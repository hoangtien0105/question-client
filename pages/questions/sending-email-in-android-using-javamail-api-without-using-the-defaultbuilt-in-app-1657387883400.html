<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-301f760ac8107464.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-76d2c3e2d98bb08b.js" defer=""></script><script src="/_next/static/6_hwtyf_oFlFS5l_S4CTe/_buildManifest.js" defer=""></script><script src="/_next/static/6_hwtyf_oFlFS5l_S4CTe/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.eZIPKL code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-c4b0431a-0"]{content:"eZIPKL,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/sending-email-in-android-using-javamail-api-without-using-the-defaultbuilt-in-app-1657387883400#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-c4b0431a-0 eZIPKL flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/sending-email-in-android-using-javamail-api-without-using-the-defaultbuilt-in-app-1657387883400">Sending Email in Android using JavaMail API without using the default/built-in app</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/jakarta-mail">jakarta-mail</a></div></div><div class="question-content mt-5">
                
<p>I am trying to create a mail sending application in Android. </p>

<p>If I use: </p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Intent</span> <span class="hljs-variable">emailIntent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(android.content.Intent.ACTION_SEND);
</code></pre>

<p>This will launch the built-in Android application; I'm trying to send the mail on button click directly <strong>without</strong> using this application.</p>
    </div></div></div><div class="sc-c4b0431a-2 cRqwQe"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Send e-mail in Android using the JavaMail API using Gmail authentication.</p>
<h3>Steps to create a sample Project:</h3>
<p><strong>MailSenderActivity.java:</strong></p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MailSenderActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        
        <span class="hljs-keyword">final</span> <span class="hljs-type">Button</span> <span class="hljs-variable">send</span> <span class="hljs-operator">=</span> (Button) <span class="hljs-built_in">this</span>.findViewById(R.id.send);
        send.setOnClickListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">View</span>.OnClickListener() {
            
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">(View v)</span> {
                <span class="hljs-keyword">try</span> {   
                    <span class="hljs-type">GMailSender</span> <span class="hljs-variable">sender</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GMailSender</span>(<span class="hljs-string">"username@gmail.com"</span>, <span class="hljs-string">"password"</span>);
                    sender.sendMail(<span class="hljs-string">"This is Subject"</span>,   
                            <span class="hljs-string">"This is Body"</span>,   
                            <span class="hljs-string">"user@gmail.com"</span>,   
                            <span class="hljs-string">"user@yahoo.com"</span>);   
                } <span class="hljs-keyword">catch</span> (Exception e) {   
                    Log.e(<span class="hljs-string">"SendMail"</span>, e.getMessage(), e);   
                } 
                
            }
        });
        
    }
}
</code></pre>
<p><strong>GMailSender.java:</strong></p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GMailSender</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">javax</span>.mail.Authenticator {   
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">mailhost</span> <span class="hljs-operator">=</span> <span class="hljs-string">"smtp.gmail.com"</span>;   
    <span class="hljs-keyword">private</span> String user;   
    <span class="hljs-keyword">private</span> String password;   
    <span class="hljs-keyword">private</span> Session session;   
  
    <span class="hljs-keyword">static</span> {   
        Security.addProvider(<span class="hljs-keyword">new</span> <span class="hljs-title class_">com</span>.provider.JSSEProvider());   
    }  
  
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">GMailSender</span><span class="hljs-params">(String user, String password)</span> {   
        <span class="hljs-built_in">this</span>.user = user;   
        <span class="hljs-built_in">this</span>.password = password;   
  
        <span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();   
        props.setProperty(<span class="hljs-string">"mail.transport.protocol"</span>, <span class="hljs-string">"smtp"</span>);   
        props.setProperty(<span class="hljs-string">"mail.host"</span>, mailhost);   
        props.put(<span class="hljs-string">"mail.smtp.auth"</span>, <span class="hljs-string">"true"</span>);   
        props.put(<span class="hljs-string">"mail.smtp.port"</span>, <span class="hljs-string">"465"</span>);   
        props.put(<span class="hljs-string">"mail.smtp.socketFactory.port"</span>, <span class="hljs-string">"465"</span>);   
        props.put(<span class="hljs-string">"mail.smtp.socketFactory.class"</span>,   
                <span class="hljs-string">"javax.net.ssl.SSLSocketFactory"</span>);   
        props.put(<span class="hljs-string">"mail.smtp.socketFactory.fallback"</span>, <span class="hljs-string">"false"</span>);   
        props.setProperty(<span class="hljs-string">"mail.smtp.quitwait"</span>, <span class="hljs-string">"false"</span>);   
  
        session = Session.getDefaultInstance(props, <span class="hljs-built_in">this</span>);   
    }   
  
    <span class="hljs-keyword">protected</span> PasswordAuthentication <span class="hljs-title function_">getPasswordAuthentication</span><span class="hljs-params">()</span> {   
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PasswordAuthentication</span>(user, password);   
    }   
  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMail</span><span class="hljs-params">(String subject, String body, String sender, String recipients)</span> <span class="hljs-keyword">throws</span> Exception {   
        <span class="hljs-keyword">try</span>{
        <span class="hljs-type">MimeMessage</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMessage</span>(session);   
        <span class="hljs-type">DataHandler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataHandler</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayDataSource</span>(body.getBytes(), <span class="hljs-string">"text/plain"</span>));   
        message.setSender(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(sender));   
        message.setSubject(subject);   
        message.setDataHandler(handler);   
        <span class="hljs-keyword">if</span> (recipients.indexOf(<span class="hljs-string">','</span>) &gt; <span class="hljs-number">0</span>)   
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
        <span class="hljs-keyword">else</span>  
            message.setRecipient(Message.RecipientType.TO, <span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(recipients));   
        Transport.send(message);   
        }<span class="hljs-keyword">catch</span>(Exception e){
            
        }
    }   
  
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ByteArrayDataSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DataSource</span> {   
        <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[] data;   
        <span class="hljs-keyword">private</span> String type;   
  
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">ByteArrayDataSource</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] data, String type)</span> {   
            <span class="hljs-built_in">super</span>();   
            <span class="hljs-built_in">this</span>.data = data;   
            <span class="hljs-built_in">this</span>.type = type;   
        }   
  
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">ByteArrayDataSource</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] data)</span> {   
            <span class="hljs-built_in">super</span>();   
            <span class="hljs-built_in">this</span>.data = data;   
        }   
  
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setType</span><span class="hljs-params">(String type)</span> {   
            <span class="hljs-built_in">this</span>.type = type;   
        }   
  
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getContentType</span><span class="hljs-params">()</span> {   
            <span class="hljs-keyword">if</span> (type == <span class="hljs-literal">null</span>)   
                <span class="hljs-keyword">return</span> <span class="hljs-string">"application/octet-stream"</span>;   
            <span class="hljs-keyword">else</span>  
                <span class="hljs-keyword">return</span> type;   
        }   
  
        <span class="hljs-keyword">public</span> InputStream <span class="hljs-title function_">getInputStream</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {   
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(data);   
        }   
  
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {   
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ByteArrayDataSource"</span>;   
        }   
  
        <span class="hljs-keyword">public</span> OutputStream <span class="hljs-title function_">getOutputStream</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {   
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"Not Supported"</span>);   
        }   
    }   
}  
</code></pre>
<p><strong>JSSEProvider.java:</strong></p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">/*
 *  Licensed to the Apache Software Foundation (ASF) under one or more
 *  contributor license agreements.  See the NOTICE file distributed with
 *  this work for additional information regarding copyright ownership.
 *  The ASF licenses this file to You under the Apache License, Version 2.0
 *  (the "License"); you may not use this file except in compliance with
 *  the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@author</span> Alexander Y. Kleymenov
 * <span class="hljs-doctag">@version</span> $Revision$
 */</span>


<span class="hljs-keyword">import</span> java.security.AccessController;
<span class="hljs-keyword">import</span> java.security.Provider;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JSSEProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Provider</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">JSSEProvider</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>(<span class="hljs-string">"HarmonyJSSE"</span>, <span class="hljs-number">1.0</span>, <span class="hljs-string">"Harmony JSSE Provider"</span>);
        AccessController.doPrivileged(<span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.security.PrivilegedAction&lt;Void&gt;() {
            <span class="hljs-keyword">public</span> Void <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                put(<span class="hljs-string">"SSLContext.TLS"</span>,
                        <span class="hljs-string">"org.apache.harmony.xnet.provider.jsse.SSLContextImpl"</span>);
                put(<span class="hljs-string">"Alg.Alias.SSLContext.TLSv1"</span>, <span class="hljs-string">"TLS"</span>);
                put(<span class="hljs-string">"KeyManagerFactory.X509"</span>,
                        <span class="hljs-string">"org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl"</span>);
                put(<span class="hljs-string">"TrustManagerFactory.X509"</span>,
                        <span class="hljs-string">"org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
        });
    }
}
</code></pre>
<p>ADD 3 jars found in the following link to your Android Project</p>
<ul>
<li><a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/mail.jar" rel="noreferrer">mail.jar</a></li>
<li><a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/activation.jar" rel="noreferrer">activation.jar</a></li>
<li><a href="https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/additionnal.jar" rel="noreferrer">additional.jar</a></li>
</ul>
<p><a href="https://stackoverflow.com/a/6859020/28557">Click here - How to add External Jars</a></p>
<p>And don't forget to add this line in your manifest:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.INTERNET"</span> /&gt;
</code></pre>
<p><strong>Just click below link to change account access for less secure apps</strong>
<a href="https://www.google.com/settings/security/lesssecureapps" rel="noreferrer">https://www.google.com/settings/security/lesssecureapps</a></p>
<p>Run the project and check your recipient mail account for the mail.
Cheers!</p>
<p>P.S. And don't forget that you cannot do network operation from any Activity in android.
Hence it is recommended to use <code>AsyncTask</code> or <code>IntentService</code> to avoid network on main thread exception.</p>
<p>Jar files: <a href="https://code.google.com/archive/p/javamail-android/" rel="noreferrer">https://code.google.com/archive/p/javamail-android/</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Thank you for your valuable information. Code is working fine. I am able to add attachment also by adding following code.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">private</span> Multipart _multipart; 
_multipart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMultipart</span>(); 

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addAttachment</span><span class="hljs-params">(String filename,String subject)</span> <span class="hljs-keyword">throws</span> Exception { 
    <span class="hljs-type">BodyPart</span> <span class="hljs-variable">messageBodyPart</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeBodyPart</span>(); 
    <span class="hljs-type">DataSource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileDataSource</span>(filename); 
    messageBodyPart.setDataHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataHandler</span>(source)); 
    messageBodyPart.setFileName(filename); 
    _multipart.addBodyPart(messageBodyPart);

    <span class="hljs-type">BodyPart</span> <span class="hljs-variable">messageBodyPart2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeBodyPart</span>(); 
    messageBodyPart2.setText(subject); 

    _multipart.addBodyPart(messageBodyPart2); 
} 



message.setContent(_multipart);
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
  <p>Could not connect to SMTP host:
  smtp.gmail.com, port: 465</p>
</blockquote>

<p>Add this line in your manifest:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.INTERNET"</span> /&gt;
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can use JavaMail API to handle your email tasks. JavaMail API is available in JavaEE package and its jar is available for download. Sadly it cannot be used directly in an Android application since it uses AWT components which are completely incompatible  in Android.</p>

<p>You can find the Android port for JavaMail at the following location:
<a href="http://code.google.com/p/javamail-android/" rel="noreferrer">http://code.google.com/p/javamail-android/</a></p>

<p>Add the jars to your application and use the SMTP method</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>100% working code with demo You can also send multiple emails using this answer.</strong></p>
<p>Download Project <strong><a href="https://github.com/arpit999/SendMail" rel="nofollow noreferrer">HERE</a></strong></p>
<p><strong>Step 1:</strong>  Download mail, activation, additional jar files and add in your <strong>project libs folder</strong> in android studio. I added a screenshot see below <strong><a href="https://code.google.com/archive/p/javamail-android/downloads" rel="nofollow noreferrer">Download link</a></strong></p>
<p><a href="https://i.stack.imgur.com/CCnFj.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/CCnFj.png" alt="libs add"></a></p>
<p>Login with gmail (<strong>using your from mail</strong>) and <strong>TURN ON</strong>  toggle button <a href="https://www.google.com/settings/u/1/security/lesssecureapps" rel="nofollow noreferrer">LINK</a></p>
<p>Most of the people forget about this step i hope you will not.</p>
<p><strong>Step 2 :</strong>  After completing this process.  Copy and past this classes into your project.</p>
<p><strong>GMail.java</strong></p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> android.util.Log;

<span class="hljs-keyword">import</span> java.io.UnsupportedEncodingException;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Properties;

<span class="hljs-keyword">import</span> javax.mail.Message;
<span class="hljs-keyword">import</span> javax.mail.MessagingException;
<span class="hljs-keyword">import</span> javax.mail.Session;
<span class="hljs-keyword">import</span> javax.mail.Transport;
<span class="hljs-keyword">import</span> javax.mail.internet.AddressException;
<span class="hljs-keyword">import</span> javax.mail.internet.InternetAddress;
<span class="hljs-keyword">import</span> javax.mail.internet.MimeMessage;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GMail</span> {

    <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">emailPort</span> <span class="hljs-operator">=</span> <span class="hljs-string">"587"</span>;<span class="hljs-comment">// gmail's smtp port</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">smtpAuth</span> <span class="hljs-operator">=</span> <span class="hljs-string">"true"</span>;
    <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">starttls</span> <span class="hljs-operator">=</span> <span class="hljs-string">"true"</span>;
    <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">emailHost</span> <span class="hljs-operator">=</span> <span class="hljs-string">"smtp.gmail.com"</span>;


    String fromEmail;
    String fromPassword;
    List&lt;String&gt; toEmailList;
    String emailSubject;
    String emailBody;

    Properties emailProperties;
    Session mailSession;
    MimeMessage emailMessage;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">GMail</span><span class="hljs-params">()</span> {

    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">GMail</span><span class="hljs-params">(String fromEmail, String fromPassword,
            List&lt;String&gt; toEmailList, String emailSubject, String emailBody)</span> {
        <span class="hljs-built_in">this</span>.fromEmail = fromEmail;
        <span class="hljs-built_in">this</span>.fromPassword = fromPassword;
        <span class="hljs-built_in">this</span>.toEmailList = toEmailList;
        <span class="hljs-built_in">this</span>.emailSubject = emailSubject;
        <span class="hljs-built_in">this</span>.emailBody = emailBody;

        emailProperties = System.getProperties();
        emailProperties.put(<span class="hljs-string">"mail.smtp.port"</span>, emailPort);
        emailProperties.put(<span class="hljs-string">"mail.smtp.auth"</span>, smtpAuth);
        emailProperties.put(<span class="hljs-string">"mail.smtp.starttls.enable"</span>, starttls);
        Log.i(<span class="hljs-string">"GMail"</span>, <span class="hljs-string">"Mail server properties set."</span>);
    }

    <span class="hljs-keyword">public</span> MimeMessage <span class="hljs-title function_">createEmailMessage</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> AddressException,
            MessagingException, UnsupportedEncodingException {

        mailSession = Session.getDefaultInstance(emailProperties, <span class="hljs-literal">null</span>);
        emailMessage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMessage</span>(mailSession);

        emailMessage.setFrom(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(fromEmail, fromEmail));
        <span class="hljs-keyword">for</span> (String toEmail : toEmailList) {
            Log.i(<span class="hljs-string">"GMail"</span>, <span class="hljs-string">"toEmail: "</span> + toEmail);
            emailMessage.addRecipient(Message.RecipientType.TO,
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(toEmail));
        }

        emailMessage.setSubject(emailSubject);
        emailMessage.setContent(emailBody, <span class="hljs-string">"text/html"</span>);<span class="hljs-comment">// for a html email</span>
        <span class="hljs-comment">// emailMessage.setText(emailBody);// for a text email</span>
        Log.i(<span class="hljs-string">"GMail"</span>, <span class="hljs-string">"Email Message created."</span>);
        <span class="hljs-keyword">return</span> emailMessage;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendEmail</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> AddressException, MessagingException {

        <span class="hljs-type">Transport</span> <span class="hljs-variable">transport</span> <span class="hljs-operator">=</span> mailSession.getTransport(<span class="hljs-string">"smtp"</span>);
        transport.connect(emailHost, fromEmail, fromPassword);
        Log.i(<span class="hljs-string">"GMail"</span>, <span class="hljs-string">"allrecipients: "</span> + emailMessage.getAllRecipients());
        transport.sendMessage(emailMessage, emailMessage.getAllRecipients());
        transport.close();
        Log.i(<span class="hljs-string">"GMail"</span>, <span class="hljs-string">"Email sent successfully."</span>);
    }

}
</code></pre>
<p><strong>SendMailTask.java</strong></p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> android.app.Activity;
<span class="hljs-keyword">import</span> android.app.ProgressDialog;
<span class="hljs-keyword">import</span> android.os.AsyncTask;
<span class="hljs-keyword">import</span> android.util.Log;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SendMailTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncTask</span> {

    <span class="hljs-keyword">private</span> ProgressDialog statusDialog;
    <span class="hljs-keyword">private</span> Activity sendMailActivity;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SendMailTask</span><span class="hljs-params">(Activity activity)</span> {
        sendMailActivity = activity;

    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPreExecute</span><span class="hljs-params">()</span> {
        statusDialog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProgressDialog</span>(sendMailActivity);
        statusDialog.setMessage(<span class="hljs-string">"Getting ready..."</span>);
        statusDialog.setIndeterminate(<span class="hljs-literal">false</span>);
        statusDialog.setCancelable(<span class="hljs-literal">false</span>);
        statusDialog.show();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">doInBackground</span><span class="hljs-params">(Object... args)</span> {
        <span class="hljs-keyword">try</span> {
            Log.i(<span class="hljs-string">"SendMailTask"</span>, <span class="hljs-string">"About to instantiate GMail..."</span>);
            publishProgress(<span class="hljs-string">"Processing input...."</span>);
            <span class="hljs-type">GMail</span> <span class="hljs-variable">androidEmail</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GMail</span>(args[<span class="hljs-number">0</span>].toString(),
                    args[<span class="hljs-number">1</span>].toString(), (List) args[<span class="hljs-number">2</span>], args[<span class="hljs-number">3</span>].toString(),
                    args[<span class="hljs-number">4</span>].toString());
            publishProgress(<span class="hljs-string">"Preparing mail message...."</span>);
            androidEmail.createEmailMessage();
            publishProgress(<span class="hljs-string">"Sending email...."</span>);
            androidEmail.sendEmail();
            publishProgress(<span class="hljs-string">"Email Sent."</span>);
            Log.i(<span class="hljs-string">"SendMailTask"</span>, <span class="hljs-string">"Mail Sent."</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            publishProgress(e.getMessage());
            Log.e(<span class="hljs-string">"SendMailTask"</span>, e.getMessage(), e);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onProgressUpdate</span><span class="hljs-params">(Object... values)</span> {
        statusDialog.setMessage(values[<span class="hljs-number">0</span>].toString());

    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPostExecute</span><span class="hljs-params">(Object result)</span> {
        statusDialog.dismiss();
    }

}
</code></pre>
<p><strong>Step 3 :</strong>
Now you can change this  class according to your needs also you can send multiple mail using this class. i provide xml and java file both.</p>
<p><strong>activity_main.xml</strong></p>
<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;
&lt;LinearLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:tools=<span class="hljs-string">"http://schemas.android.com/tools"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>
    android:orientation=<span class="hljs-string">"vertical"</span>
    android:paddingLeft=<span class="hljs-string">"20dp"</span>
    android:paddingRight=<span class="hljs-string">"20dp"</span>
    android:paddingTop=<span class="hljs-string">"30dp"</span>&gt;

    &lt;TextView
        android:id=<span class="hljs-string">"@+id/textView1"</span>
        android:layout_width=<span class="hljs-string">"wrap_content"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:paddingTop=<span class="hljs-string">"10dp"</span>
        android:text=<span class="hljs-string">"From Email"</span> /&gt;

    &lt;EditText
        android:id=<span class="hljs-string">"@+id/editText1"</span>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:background=<span class="hljs-string">"#FFFFFF"</span>
        android:cursorVisible=<span class="hljs-string">"true"</span>
        android:editable=<span class="hljs-string">"true"</span>
        android:ems=<span class="hljs-string">"10"</span>
        android:enabled=<span class="hljs-string">"true"</span>
        android:inputType=<span class="hljs-string">"textEmailAddress"</span>
        android:padding=<span class="hljs-string">"5dp"</span>
        android:textColor=<span class="hljs-string">"#000000"</span>&gt;

        &lt;requestFocus /&gt;
    &lt;/EditText&gt;

    &lt;TextView
        android:id=<span class="hljs-string">"@+id/textView2"</span>
        android:layout_width=<span class="hljs-string">"wrap_content"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:paddingTop=<span class="hljs-string">"10dp"</span>
        android:text=<span class="hljs-string">"Password (For from email)"</span> /&gt;

    &lt;EditText
        android:id=<span class="hljs-string">"@+id/editText2"</span>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:background=<span class="hljs-string">"#FFFFFF"</span>
        android:ems=<span class="hljs-string">"10"</span>
        android:inputType=<span class="hljs-string">"textPassword"</span>
        android:padding=<span class="hljs-string">"5dp"</span>
        android:textColor=<span class="hljs-string">"#000000"</span> /&gt;

    &lt;TextView
        android:id=<span class="hljs-string">"@+id/textView3"</span>
        android:layout_width=<span class="hljs-string">"wrap_content"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:paddingTop=<span class="hljs-string">"10dp"</span>
        android:text=<span class="hljs-string">"To Email"</span> /&gt;

    &lt;EditText
        android:id=<span class="hljs-string">"@+id/editText3"</span>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:background=<span class="hljs-string">"#ffffff"</span>
        android:ems=<span class="hljs-string">"10"</span>
        android:inputType=<span class="hljs-string">"textEmailAddress"</span>
        android:padding=<span class="hljs-string">"5dp"</span>
        android:textColor=<span class="hljs-string">"#000000"</span> /&gt;

    &lt;TextView
        android:id=<span class="hljs-string">"@+id/textView4"</span>
        android:layout_width=<span class="hljs-string">"wrap_content"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:paddingTop=<span class="hljs-string">"10dp"</span>
        android:text=<span class="hljs-string">"Subject"</span> /&gt;

    &lt;EditText
        android:id=<span class="hljs-string">"@+id/editText4"</span>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:background=<span class="hljs-string">"#ffffff"</span>
        android:ems=<span class="hljs-string">"10"</span>
        android:padding=<span class="hljs-string">"5dp"</span>
        android:textColor=<span class="hljs-string">"#000000"</span> /&gt;

    &lt;TextView
        android:id=<span class="hljs-string">"@+id/textView5"</span>
        android:layout_width=<span class="hljs-string">"wrap_content"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:paddingTop=<span class="hljs-string">"10dp"</span>
        android:text=<span class="hljs-string">"Body"</span> /&gt;

    &lt;EditText
        android:id=<span class="hljs-string">"@+id/editText5"</span>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:background=<span class="hljs-string">"#ffffff"</span>
        android:ems=<span class="hljs-string">"10"</span>
        android:inputType=<span class="hljs-string">"textMultiLine"</span>
        android:padding=<span class="hljs-string">"35dp"</span>
        android:textColor=<span class="hljs-string">"#000000"</span> /&gt;

    &lt;Button
        android:id=<span class="hljs-string">"@+id/button1"</span>
        android:layout_width=<span class="hljs-string">"wrap_content"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:text=<span class="hljs-string">"Send Email"</span> /&gt;

&lt;/LinearLayout&gt;
</code></pre>
<p><strong>SendMailActivity.java</strong></p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> android.app.Activity;
<span class="hljs-keyword">import</span> android.os.Bundle;
<span class="hljs-keyword">import</span> android.util.Log;
<span class="hljs-keyword">import</span> android.view.View;
<span class="hljs-keyword">import</span> android.widget.Button;
<span class="hljs-keyword">import</span> android.widget.TextView;

<span class="hljs-keyword">import</span> java.util.Arrays;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SendMailActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        <span class="hljs-keyword">final</span> <span class="hljs-type">Button</span> <span class="hljs-variable">send</span> <span class="hljs-operator">=</span> (Button) <span class="hljs-built_in">this</span>.findViewById(R.id.button1);

        send.setOnClickListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">View</span>.OnClickListener() {

            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">(View v)</span> {
                Log.i(<span class="hljs-string">"SendMailActivity"</span>, <span class="hljs-string">"Send Button Clicked."</span>);

                <span class="hljs-type">String</span> <span class="hljs-variable">fromEmail</span> <span class="hljs-operator">=</span> ((TextView) findViewById(R.id.editText1))
                        .getText().toString();
                <span class="hljs-type">String</span> <span class="hljs-variable">fromPassword</span> <span class="hljs-operator">=</span> ((TextView) findViewById(R.id.editText2))
                        .getText().toString();
                <span class="hljs-type">String</span> <span class="hljs-variable">toEmails</span> <span class="hljs-operator">=</span> ((TextView) findViewById(R.id.editText3))
                        .getText().toString();
                List&lt;String&gt; toEmailList = Arrays.asList(toEmails
                        .split(<span class="hljs-string">"\\s*,\\s*"</span>));
                Log.i(<span class="hljs-string">"SendMailActivity"</span>, <span class="hljs-string">"To List: "</span> + toEmailList);
                <span class="hljs-type">String</span> <span class="hljs-variable">emailSubject</span> <span class="hljs-operator">=</span> ((TextView) findViewById(R.id.editText4))
                        .getText().toString();
                <span class="hljs-type">String</span> <span class="hljs-variable">emailBody</span> <span class="hljs-operator">=</span> ((TextView) findViewById(R.id.editText5))
                        .getText().toString();
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">SendMailTask</span>(SendMailActivity.<span class="hljs-built_in">this</span>).execute(fromEmail,
                        fromPassword, toEmailList, emailSubject, emailBody);
            }
        });
    }
}
</code></pre>
<p><strong>Note</strong> Dont forget to add <strong>internet</strong> permission in your AndroidManifest.xml file</p>
<p><strong><code>&lt;uses-permission android:name="android.permission.INTERNET"/&gt;</code></strong></p>
<p>Hope it work if it not then just comment down below.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In order to help those getting a Network On Main Thread Exception with an SDK Target &gt;9. This is using droopie's code above but will work similarly for any.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">StrictMode.<span class="hljs-type">ThreadPolicy</span> <span class="hljs-variable">policy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StrictMode</span>.ThreadPolicy.Builder().permitAll().build();

StrictMode.setThreadPolicy(policy); 

android.os.NetworkOnMainThreadException
</code></pre>

<p>You can use AsyncTask as below</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClickMail</span><span class="hljs-params">(View view)</span> {
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">SendEmailAsyncTask</span>().execute();
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SendEmailAsyncTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncTask</span> &lt;Void, Void, Boolean&gt; {
    <span class="hljs-type">Mail</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mail</span>(<span class="hljs-string">"from@gmail.com"</span>, <span class="hljs-string">"my password"</span>);

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SendEmailAsyncTask</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (BuildConfig.DEBUG) Log.v(SendEmailAsyncTask.class.getName(), <span class="hljs-string">"SendEmailAsyncTask()"</span>);
        String[] toArr = { <span class="hljs-string">"to mail@gmail.com"</span>};
        m.setTo(toArr);
        m.setFrom(<span class="hljs-string">"from mail@gmail.com"</span>);
        m.setSubject(<span class="hljs-string">"Email from Android"</span>);
        m.setBody(<span class="hljs-string">"body."</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> Boolean <span class="hljs-title function_">doInBackground</span><span class="hljs-params">(Void... params)</span> {
        <span class="hljs-keyword">if</span> (BuildConfig.DEBUG) Log.v(SendEmailAsyncTask.class.getName(), <span class="hljs-string">"doInBackground()"</span>);
        <span class="hljs-keyword">try</span> {
            m.send();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (AuthenticationFailedException e) {
            Log.e(SendEmailAsyncTask.class.getName(), <span class="hljs-string">"Bad account details"</span>);
            e.printStackTrace();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (MessagingException e) {
            Log.e(SendEmailAsyncTask.class.getName(), m.getTo(<span class="hljs-literal">null</span>) + <span class="hljs-string">"failed"</span>);
            e.printStackTrace();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>SMTP</h2>

<p>Using SMTP is one way to go, and the others have already pointed out ways how to do it. Just note that while doing this, you completely circumvent the built in mail app, and you will have to provide the address of the SMTP server, the user name and password for that server, either statically in your code, or query it from the user.</p>

<h2>HTTP</h2>

<p>Another way would involve a simple server side script, like php, that takes some URL parameters and uses them to send a mail. This way, you only need to make an HTTP request from the device (easily possible with the built in libraries) and don't need to store the SMTP login data on the device. This is one more indirection compared to direct SMTP usage, but because it's so very easy to make HTTP request and send mails from PHP, it might even be simpler than the direct way.</p>

<h2>Mail Application</h2>

<p>If the mail shall be send from the users default mail account that he already registered with the phone, you'd have to take some other approach. If you have enough time and experience, you might want to check the source code of the Android Email application to see if it offers some entry point to send a mail without user interaction (I don't know, but maybe there is one).</p>

<p>Maybe you even find a way to query the users account details (so you can use them for SMTP), though I highly doubt that this is possible, because it would be a huge security risk and Android is built rather securely.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>here is an alt version that also works for me and has attachments (posted already above but complete version unlike the source link, which people posted they cant get it to work since its missing data)</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> java.util.Date; 
<span class="hljs-keyword">import</span> java.util.Properties; 
<span class="hljs-keyword">import</span> javax.activation.CommandMap; 
<span class="hljs-keyword">import</span> javax.activation.DataHandler; 
<span class="hljs-keyword">import</span> javax.activation.DataSource; 
<span class="hljs-keyword">import</span> javax.activation.FileDataSource; 
<span class="hljs-keyword">import</span> javax.activation.MailcapCommandMap; 
<span class="hljs-keyword">import</span> javax.mail.BodyPart; 
<span class="hljs-keyword">import</span> javax.mail.Multipart; 
<span class="hljs-keyword">import</span> javax.mail.PasswordAuthentication; 
<span class="hljs-keyword">import</span> javax.mail.Session; 
<span class="hljs-keyword">import</span> javax.mail.Transport; 
<span class="hljs-keyword">import</span> javax.mail.internet.InternetAddress; 
<span class="hljs-keyword">import</span> javax.mail.internet.MimeBodyPart; 
<span class="hljs-keyword">import</span> javax.mail.internet.MimeMessage; 
<span class="hljs-keyword">import</span> javax.mail.internet.MimeMultipart; 


<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Mail</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">javax</span>.mail.Authenticator { 
  <span class="hljs-keyword">private</span> String _user; 
  <span class="hljs-keyword">private</span> String _pass; 

  <span class="hljs-keyword">private</span> String[] _to; 
  <span class="hljs-keyword">private</span> String _from; 

  <span class="hljs-keyword">private</span> String _port; 
  <span class="hljs-keyword">private</span> String _sport; 

  <span class="hljs-keyword">private</span> String _host; 

  <span class="hljs-keyword">private</span> String _subject; 
  <span class="hljs-keyword">private</span> String _body; 

  <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> _auth; 

  <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> _debuggable; 

  <span class="hljs-keyword">private</span> Multipart _multipart; 


  <span class="hljs-keyword">public</span> <span class="hljs-title function_">Mail</span><span class="hljs-params">()</span> { 
    _host = <span class="hljs-string">"smtp.gmail.com"</span>; <span class="hljs-comment">// default smtp server </span>
    _port = <span class="hljs-string">"465"</span>; <span class="hljs-comment">// default smtp port </span>
    _sport = <span class="hljs-string">"465"</span>; <span class="hljs-comment">// default socketfactory port </span>

    _user = <span class="hljs-string">""</span>; <span class="hljs-comment">// username </span>
    _pass = <span class="hljs-string">""</span>; <span class="hljs-comment">// password </span>
    _from = <span class="hljs-string">""</span>; <span class="hljs-comment">// email sent from </span>
    _subject = <span class="hljs-string">""</span>; <span class="hljs-comment">// email subject </span>
    _body = <span class="hljs-string">""</span>; <span class="hljs-comment">// email body </span>

    _debuggable = <span class="hljs-literal">false</span>; <span class="hljs-comment">// debug mode on or off - default off </span>
    _auth = <span class="hljs-literal">true</span>; <span class="hljs-comment">// smtp authentication - default on </span>

    _multipart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMultipart</span>(); 

    <span class="hljs-comment">// There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. </span>
    <span class="hljs-type">MailcapCommandMap</span> <span class="hljs-variable">mc</span> <span class="hljs-operator">=</span> (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
    mc.addMailcap(<span class="hljs-string">"text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"</span>); 
    mc.addMailcap(<span class="hljs-string">"text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"</span>); 
    mc.addMailcap(<span class="hljs-string">"text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"</span>); 
    mc.addMailcap(<span class="hljs-string">"multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"</span>); 
    mc.addMailcap(<span class="hljs-string">"message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"</span>); 
    CommandMap.setDefaultCommandMap(mc); 
  } 

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">Mail</span><span class="hljs-params">(String user, String pass)</span> { 
    <span class="hljs-built_in">this</span>(); 

    _user = user; 
    _pass = pass; 
  } 

  <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">send</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception { 
    <span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> _setProperties(); 

    <span class="hljs-keyword">if</span>(!_user.equals(<span class="hljs-string">""</span>) &amp;&amp; !_pass.equals(<span class="hljs-string">""</span>) &amp;&amp; _to.length &gt; <span class="hljs-number">0</span> &amp;&amp; !_from.equals(<span class="hljs-string">""</span>) &amp;&amp; !_subject.equals(<span class="hljs-string">""</span>) &amp;&amp; !_body.equals(<span class="hljs-string">""</span>)) { 
      <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> Session.getInstance(props, <span class="hljs-built_in">this</span>); 

      <span class="hljs-type">MimeMessage</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMessage</span>(session); 

      msg.setFrom(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(_from)); 

      InternetAddress[] addressTo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>[_to.length]; 
      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; _to.length; i++) { 
        addressTo[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(_to[i]); 
      } 
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

      msg.setSubject(_subject); 
      msg.setSentDate(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()); 

      <span class="hljs-comment">// setup message body </span>
      <span class="hljs-type">BodyPart</span> <span class="hljs-variable">messageBodyPart</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeBodyPart</span>(); 
      messageBodyPart.setText(_body); 
      _multipart.addBodyPart(messageBodyPart); 

      <span class="hljs-comment">// Put parts in message </span>
      msg.setContent(_multipart); 

      <span class="hljs-comment">// send email </span>
      Transport.send(msg); 

      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; 
    } <span class="hljs-keyword">else</span> { 
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; 
    } 
  } 

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addAttachment</span><span class="hljs-params">(String filename)</span> <span class="hljs-keyword">throws</span> Exception { 
    <span class="hljs-type">BodyPart</span> <span class="hljs-variable">messageBodyPart</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeBodyPart</span>(); 
    <span class="hljs-type">DataSource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileDataSource</span>(filename); 
    messageBodyPart.setDataHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataHandler</span>(source)); 
    messageBodyPart.setFileName(filename); 

    _multipart.addBodyPart(messageBodyPart); 
  } 

  <span class="hljs-meta">@Override</span> 
  <span class="hljs-keyword">public</span> PasswordAuthentication <span class="hljs-title function_">getPasswordAuthentication</span><span class="hljs-params">()</span> { 
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PasswordAuthentication</span>(_user, _pass); 
  } 

  <span class="hljs-keyword">private</span> Properties <span class="hljs-title function_">_setProperties</span><span class="hljs-params">()</span> { 
    <span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>(); 

    props.put(<span class="hljs-string">"mail.smtp.host"</span>, _host); 

    <span class="hljs-keyword">if</span>(_debuggable) { 
      props.put(<span class="hljs-string">"mail.debug"</span>, <span class="hljs-string">"true"</span>); 
    } 

    <span class="hljs-keyword">if</span>(_auth) { 
      props.put(<span class="hljs-string">"mail.smtp.auth"</span>, <span class="hljs-string">"true"</span>); 
    } 

    props.put(<span class="hljs-string">"mail.smtp.port"</span>, _port); 
    props.put(<span class="hljs-string">"mail.smtp.socketFactory.port"</span>, _sport); 
    props.put(<span class="hljs-string">"mail.smtp.socketFactory.class"</span>, <span class="hljs-string">"javax.net.ssl.SSLSocketFactory"</span>); 
    props.put(<span class="hljs-string">"mail.smtp.socketFactory.fallback"</span>, <span class="hljs-string">"false"</span>); 

    <span class="hljs-keyword">return</span> props; 
  } 

  <span class="hljs-comment">// the getters and setters </span>
  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBody</span><span class="hljs-params">()</span> { 
    <span class="hljs-keyword">return</span> _body; 
  } 

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBody</span><span class="hljs-params">(String _body)</span> { 
    <span class="hljs-built_in">this</span>._body = _body; 
  }

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTo</span><span class="hljs-params">(String[] toArr)</span> {
      <span class="hljs-comment">// TODO Auto-generated method stub</span>
      <span class="hljs-built_in">this</span>._to=toArr;
  }

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFrom</span><span class="hljs-params">(String string)</span> {
      <span class="hljs-comment">// TODO Auto-generated method stub</span>
      <span class="hljs-built_in">this</span>._from=string;
  }

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSubject</span><span class="hljs-params">(String string)</span> {
      <span class="hljs-comment">// TODO Auto-generated method stub</span>
      <span class="hljs-built_in">this</span>._subject=string;
  }  

  <span class="hljs-comment">// more of the getters and setters .. </span>
}
</code></pre>

<p>and to call it in an activity...</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-meta">@Override</span> 
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle icicle)</span> { 
  <span class="hljs-built_in">super</span>.onCreate(icicle); 
  setContentView(R.layout.main); 

  <span class="hljs-type">Button</span> <span class="hljs-variable">addImage</span> <span class="hljs-operator">=</span> (Button) findViewById(R.id.send_email); 
  addImage.setOnClickListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">View</span>.OnClickListener() { 
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">(View view)</span> { 
      <span class="hljs-type">Mail</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mail</span>(<span class="hljs-string">"gmailusername@gmail.com"</span>, <span class="hljs-string">"password"</span>); 

      String[] toArr = {<span class="hljs-string">"bla@bla.com"</span>, <span class="hljs-string">"lala@lala.com"</span>}; 
      m.setTo(toArr); 
      m.setFrom(<span class="hljs-string">"wooo@wooo.com"</span>); 
      m.setSubject(<span class="hljs-string">"This is an email sent using my Mail JavaMail wrapper from an Android device."</span>); 
      m.setBody(<span class="hljs-string">"Email body."</span>); 

      <span class="hljs-keyword">try</span> { 
        m.addAttachment(<span class="hljs-string">"/sdcard/filelocation"</span>); 

        <span class="hljs-keyword">if</span>(m.send()) { 
          Toast.makeText(MailApp.<span class="hljs-built_in">this</span>, <span class="hljs-string">"Email was sent successfully."</span>, Toast.LENGTH_LONG).show(); 
        } <span class="hljs-keyword">else</span> { 
          Toast.makeText(MailApp.<span class="hljs-built_in">this</span>, <span class="hljs-string">"Email was not sent."</span>, Toast.LENGTH_LONG).show(); 
        } 
      } <span class="hljs-keyword">catch</span>(Exception e) { 
        <span class="hljs-comment">//Toast.makeText(MailApp.this, "There was a problem sending the email.", Toast.LENGTH_LONG).show(); </span>
        Log.e(<span class="hljs-string">"MailApp"</span>, <span class="hljs-string">"Could not send email"</span>, e); 
      } 
    } 
  }); 
} 
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
  <p>GmailBackground is small library to send an email in background without user interaction :</p>
</blockquote>

<p>Usage:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">    BackgroundMail.newBuilder(<span class="hljs-built_in">this</span>)
            .withUsername(<span class="hljs-string">"username@gmail.com"</span>)
            .withPassword(<span class="hljs-string">"password12345"</span>)
            .withMailto(<span class="hljs-string">"toemail@gmail.com"</span>)
            .withType(BackgroundMail.TYPE_PLAIN)
            .withSubject(<span class="hljs-string">"this is the subject"</span>)
            .withBody(<span class="hljs-string">"this is the body"</span>)
            .withOnSuccessCallback(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BackgroundMail</span>.OnSuccessCallback() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">()</span> {
                    <span class="hljs-comment">//do some magic</span>
                }
            })
            .withOnFailCallback(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BackgroundMail</span>.OnFailCallback() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFail</span><span class="hljs-params">()</span> {
                    <span class="hljs-comment">//do some magic</span>
                }
            })
            .send();
</code></pre>

<p>Configuration:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">repositories {
    <span class="hljs-comment">// ...</span>
    maven { url <span class="hljs-string">"https://jitpack.io"</span> }
 }
 dependencies {
            compile <span class="hljs-string">'com.github.yesidlazaro:GmailBackground:1.2.0'</span>
    }
</code></pre>

<p>Permissions:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;
&lt;uses-permission android:name=<span class="hljs-string">"android.permission.INTERNET"</span>/&gt;
</code></pre>

<p>Also for attachments, you need to set READ_EXTERNAL_STORAGE permission:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.READ_EXTERNAL_STORAGE"</span>/&gt;
</code></pre>

<p><a href="https://github.com/yesidlazaro/GmailBackground" rel="noreferrer">Source</a></p>

<p><em>(I've tested it myself)</em></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Word of warning if using "smtp.gmail.com" as the default smtp server. </p>

<p>Google will force you to change your linked email account password frequently due to their over zealous "suspicious activity" polices. In essence it treats repeated smtp requests from different countries within a short time frame as "suspicious activity". As they assume you (the email account holder) can only be in one country at a time.</p>

<p>When google systems detect "suspicious activity" it will prevent further emails until you change the password. As you will have hard coded the password into the app you have to re-release the app each time this happens, not ideal. This happened 3 times in a week to me, I even stored the password on another server and dynamically fetched the password each time google forced me to change it.</p>

<p>So I recommend using one of the many free smtp providers instead of "smtp.gmail.com" to avoid this security problem. Use the same code but change "smtp.gmail.com" to your new smtp forwarding host.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Edit: JavaMail 1.5.5 <a href="https://java.net/projects/javamail/pages/Android" rel="nofollow noreferrer">claims to support Android</a>, so you shouldn't need anything else.</p>

<p><strike>
I've ported the latest JavaMail (1.5.4) to Android. It's available in Maven Central, just add the following to <code>build.gradle</code>~~</strike></p><strike>

<pre class="lang-java s-code-block"><code class="hljs language-java">compile <span class="hljs-string">'eu.ocathain.com.sun.mail:javax.mail:1.5.4'</span>
</code></pre>

<p>You can then follow the official <a href="http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/javamail/javamail.html" rel="nofollow noreferrer">tutorial</a>.</p>

<p>Source code is available here: <a href="https://bitbucket.org/artbristol/javamail-forked-android" rel="nofollow noreferrer">https://bitbucket.org/artbristol/javamail-forked-android</a></p>

</strike><p><strike></strike></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I found a shorter alternative for others who need help. The code is:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">package</span> com.example.mail;

<span class="hljs-keyword">import</span> java.util.Properties;

<span class="hljs-keyword">import</span> javax.mail.Message;
<span class="hljs-keyword">import</span> javax.mail.MessagingException;
<span class="hljs-keyword">import</span> javax.mail.PasswordAuthentication;
<span class="hljs-keyword">import</span> javax.mail.Session;
<span class="hljs-keyword">import</span> javax.mail.Transport;
<span class="hljs-keyword">import</span> javax.mail.internet.InternetAddress;
<span class="hljs-keyword">import</span> javax.mail.internet.MimeMessage;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SendMailTLS</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {

        <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">"username@gmail.com"</span>;
        <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">"password"</span>;

        <span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();
        props.put(<span class="hljs-string">"mail.smtp.auth"</span>, <span class="hljs-string">"true"</span>);
        props.put(<span class="hljs-string">"mail.smtp.starttls.enable"</span>, <span class="hljs-string">"true"</span>);
        props.put(<span class="hljs-string">"mail.smtp.host"</span>, <span class="hljs-string">"smtp.gmail.com"</span>);
        props.put(<span class="hljs-string">"mail.smtp.port"</span>, <span class="hljs-string">"587"</span>);

        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> Session.getInstance(props,
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">javax</span>.mail.Authenticator() {
            <span class="hljs-keyword">protected</span> PasswordAuthentication <span class="hljs-title function_">getPasswordAuthentication</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PasswordAuthentication</span>(username, password);
            }
          });

        <span class="hljs-keyword">try</span> {

            <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMessage</span>(session);
            message.setFrom(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(<span class="hljs-string">"from-email@gmail.com"</span>));
            message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse(<span class="hljs-string">"to-email@gmail.com"</span>));
            message.setSubject(<span class="hljs-string">"Testing Subject"</span>);
            message.setText(<span class="hljs-string">"Dear Mail Crawler,"</span>
                + <span class="hljs-string">"\n\n No spam to my email, please!"</span>);

            Transport.send(message);

            System.out.println(<span class="hljs-string">"Done"</span>);

        } <span class="hljs-keyword">catch</span> (MessagingException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
}
</code></pre>
<p>Source: <a href="https://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/" rel="nofollow noreferrer">Sending Email via JavaMail API</a></p>
<p>Hope this Helps! Good Luck!</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For sending a mail with attachment..</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SendAttachment</span>{
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String [] args)</span>{ 
             <span class="hljs-comment">//to address</span>
                    String to=<span class="hljs-string">"abc@abc.com"</span>;<span class="hljs-comment">//change accordingly</span>
                    <span class="hljs-comment">//from address</span>
                    <span class="hljs-keyword">final</span> String user=<span class="hljs-string">"efg@efg.com"</span>;<span class="hljs-comment">//change accordingly</span>
                    <span class="hljs-keyword">final</span> String password=<span class="hljs-string">"password"</span>;<span class="hljs-comment">//change accordingly </span>
                     <span class="hljs-type">MailcapCommandMap</span> <span class="hljs-variable">mc</span> <span class="hljs-operator">=</span> (MailcapCommandMap) CommandMap.getDefaultCommandMap();
                   mc.addMailcap(<span class="hljs-string">"text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"</span>);
                  mc.addMailcap(<span class="hljs-string">"text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"</span>);
                  mc.addMailcap(<span class="hljs-string">"text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"</span>);
                  mc.addMailcap(<span class="hljs-string">"multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"</span>);
                  mc.addMailcap(<span class="hljs-string">"message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"</span>);
                  CommandMap.setDefaultCommandMap(mc); 
                  <span class="hljs-comment">//1) get the session object   </span>
                  <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> System.getProperties();
                  properties.put(<span class="hljs-string">"mail.smtp.port"</span>, <span class="hljs-string">"465"</span>); 
                  properties.put(<span class="hljs-string">"mail.smtp.host"</span>, <span class="hljs-string">"smtp.gmail.com"</span>);
                    properties.put(<span class="hljs-string">"mail.smtp.socketFactory.port"</span>, <span class="hljs-string">"465"</span>);
                    properties.put(<span class="hljs-string">"mail.smtp.socketFactory.class"</span>,
                            <span class="hljs-string">"javax.net.ssl.SSLSocketFactory"</span>);
                    properties.put(<span class="hljs-string">"mail.smtp.auth"</span>, <span class="hljs-string">"true"</span>);
                    properties.put(<span class="hljs-string">"mail.smtp.port"</span>, <span class="hljs-string">"465"</span>);

                  <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> Session.getDefaultInstance(properties,
                   <span class="hljs-keyword">new</span> <span class="hljs-title class_">javax</span>.mail.Authenticator() {
                   <span class="hljs-keyword">protected</span> PasswordAuthentication <span class="hljs-title function_">getPasswordAuthentication</span><span class="hljs-params">()</span> {
                   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PasswordAuthentication</span>(user,password);
                   }
                  });

                  <span class="hljs-comment">//2) compose message   </span>
                  <span class="hljs-keyword">try</span>{ 
                    <span class="hljs-type">MimeMessage</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMessage</span>(session);
                    message.setFrom(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(user));
                    message.addRecipient(Message.RecipientType.TO,<span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(to));
                    message.setSubject(<span class="hljs-string">"Hii"</span>); 
                    <span class="hljs-comment">//3) create MimeBodyPart object and set your message content    </span>
                    <span class="hljs-type">BodyPart</span> <span class="hljs-variable">messageBodyPart1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeBodyPart</span>();
                    messageBodyPart1.setText(<span class="hljs-string">"How is This"</span>); 
                    <span class="hljs-comment">//4) create new MimeBodyPart object and set DataHandler object to this object    </span>
                    <span class="hljs-type">MimeBodyPart</span> <span class="hljs-variable">messageBodyPart2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeBodyPart</span>();
                <span class="hljs-comment">//Location of file to be attached</span>
                    <span class="hljs-type">String</span> <span class="hljs-variable">filename</span> <span class="hljs-operator">=</span> Environment.getExternalStorageDirectory().getPath()+<span class="hljs-string">"/R2832.zip"</span>;<span class="hljs-comment">//change accordingly</span>
                    <span class="hljs-type">DataSource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileDataSource</span>(filename);
                    messageBodyPart2.setDataHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataHandler</span>(source));
                    messageBodyPart2.setFileName(<span class="hljs-string">"Hello"</span>); 
                    <span class="hljs-comment">//5) create Multipart object and add MimeBodyPart objects to this object    </span>
                    <span class="hljs-type">Multipart</span> <span class="hljs-variable">multipart</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMultipart</span>();
                    multipart.addBodyPart(messageBodyPart1);
                    multipart.addBodyPart(messageBodyPart2); 
                    <span class="hljs-comment">//6) set the multiplart object to the message object</span>
                    message.setContent(multipart ); 
                    <span class="hljs-comment">//7) send message </span>
                    Transport.send(message); 
                   System.out.println(<span class="hljs-string">"MESSAGE SENT...."</span>);
                   }<span class="hljs-keyword">catch</span> (MessagingException ex) {ex.printStackTrace();}
                  }
                }
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Those who are getting <code>ClassDefNotFoundError</code> try to move that Three jar files to lib folder of your Project,it worked for me!!</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I am unable to run Vinayak B's code. Finally i solved this issue by following :</p>

<p>1.Using this</p>

<p>2.Applying AsyncTask.</p>

<p>3.Changing security issue of sender gmail account.(Change to "TURN ON") in <a href="https://www.google.com/settings/security/lesssecureapps" rel="nofollow noreferrer">this</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Did you consider using Apache Commons Net ? Since 3.3, just one jar (and you can depend on it using gradle or maven) and you're done : <a href="http://blog.dahanne.net/2013/06/17/sending-a-mail-in-java-and-android-with-apache-commons-net/" rel="nofollow">http://blog.dahanne.net/2013/06/17/sending-a-mail-in-java-and-android-with-apache-commons-net/</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Without user intervention, you can send as follows:</p>

<ol>
<li><p>Send email from client apk. Here mail.jar, activation.jar is required to send java email. If these jars are added, it might increase the APK Size. </p></li>
<li><p>Alternatively, You can use a web-service at the server side code, which will use the same mail.jar and activation.jar to send email. You can call the web-service via asynctask and send email. Refer same link. </p></li>
</ol>

<p>(But, you will need to know the credentials of the mail account)</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In case that you are demanded to keep the jar library as small as possible, you can include the SMTP/POP3/IMAP function separately to avoid the "too many methods in the dex" problem. </p>

<p>You can choose the wanted jar libraries from <a href="https://java.net/projects/javamail/pages/Home" rel="nofollow">the javanet web page</a>, for example, mailapi.jar + imap.jar can enable you to access icloud, hotmail mail server in IMAP protocol. (with the help of additional.jar and activation.jar)</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I tried using the code that @Vinayak B submitted. However I'm getting an error saying: No provider for smtp</p>

<p>I created a new question for this with more information <a href="https://stackoverflow.com/questions/28693325/sending-email-in-google-glass"><strong>HERE</strong></a></p>

<p>I was able to fix it myself after all. I had to use an other <a href="http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-eeplat-419426.html#javamail-1.4.7-oth-JPR" rel="nofollow noreferrer">mail.jar</a>
and I had to make sure my "<a href="https://www.google.com/settings/security/lesssecureapps" rel="nofollow noreferrer">access for less secure apps</a>" was turned on.</p>

<p>I hope this helps anyone who has the same problem. With this done, this piece of code works on the google glass too.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>All the code provided in the other answers is correct and is working fine, but a bit messy, so I decided to publish a library (still in development though) to use it in a easier way: <strong><a href="https://github.com/enrichman/androidmail" rel="nofollow">AndroidMail</a></strong>.</p>

<p>You have just to create a MailSender, build a mail and send it (already handled in background with an AsyncTask).</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">MailSender</span> <span class="hljs-variable">mailSender</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MailSender</span>(email, password);

Mail.<span class="hljs-type">MailBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mail</span>.MailBuilder();
<span class="hljs-type">Mail</span> <span class="hljs-variable">mail</span> <span class="hljs-operator">=</span> builder
    .setSender(senderMail)
    .addRecipient(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Recipient</span>(recipient))
    .setText(<span class="hljs-string">"Hello"</span>)
    .build();

mailSender.sendMail(mail);
</code></pre>

<p>You can receive a notification for the email sent and it has also the support for different Recipients types (TO, CC and BCC), attachments and html:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">MailSender</span> <span class="hljs-variable">mailSender</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MailSender</span>(email, password);

Mail.<span class="hljs-type">MailBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mail</span>.MailBuilder();
<span class="hljs-type">Mail</span> <span class="hljs-variable">mail</span> <span class="hljs-operator">=</span> builder
    .setSender(senderMail)
    .addRecipient(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Recipient</span>(recipient))
    .addRecipient(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Recipient</span>(Recipient.TYPE.CC, recipientCC))
    .setText(<span class="hljs-string">"Hello"</span>)
    .setHtml(<span class="hljs-string">"&lt;h1 style=\"color:red;\"&gt;Hello&lt;/h1&gt;"</span>)
    .addAttachment(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Attachment</span>(filePath, fileName))
    .build();

mailSender.sendMail(mail, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MailSender</span>.OnMailSentListener() {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// mail sent!</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Exception error)</span> {
        <span class="hljs-comment">// something bad happened :(</span>
    }
});
</code></pre>

<p>You can get it via Gradle or Maven:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">compile <span class="hljs-string">'it.enricocandino:androidmail:1.0.0-SNAPSHOT'</span>
</code></pre>

<p>Please let me know if you have any issue with it! :)</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 21</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here are a lot solutions. However I think we must change the configuration of the GMail to allow accessing from less secure devices. Go to the link below and enable it. It works for me</p>

<p><a href="https://myaccount.google.com/lesssecureapps?pli=1" rel="nofollow noreferrer">https://myaccount.google.com/lesssecureapps?pli=1</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 22</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Sending email programmatically with Kotlin.</p>
<ul>
<li>simple email sending, not all the other features (like attachments).</li>
<li>TLS is always on</li>
<li>Only 1 gradle email dependency needed also.</li>
</ul>
<p>I also found this list of email POP services really helpful:</p>
<p><a href="https://support.office.com/en-gb/article/pop-and-imap-email-settings-for-outlook-8361e398-8af4-4e97-b147-6c6c4ac95353" rel="nofollow noreferrer">https://support.office.com/en-gb/article/pop-and-imap-email-settings-for-outlook-8361e398-8af4-4e97-b147-6c6c4ac95353</a></p>
<p>How to use:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">    <span class="hljs-type">val</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> EmailService.UserPassAuthenticator(<span class="hljs-string">"you@gmail.com"</span>, <span class="hljs-string">"yourPassword"</span>)
    <span class="hljs-type">val</span> <span class="hljs-variable">to</span> <span class="hljs-operator">=</span> listOf(InternetAddress(<span class="hljs-string">"to@email.com"</span>))
    <span class="hljs-type">val</span> <span class="hljs-variable">from</span> <span class="hljs-operator">=</span> InternetAddress(<span class="hljs-string">"you@gmail.com"</span>)
    <span class="hljs-type">val</span> <span class="hljs-variable">email</span> <span class="hljs-operator">=</span> EmailService.Email(auth, to, from, <span class="hljs-string">"Test Subject"</span>, <span class="hljs-string">"Hello Body World"</span>)
    <span class="hljs-type">val</span> <span class="hljs-variable">emailService</span> <span class="hljs-operator">=</span> EmailService(<span class="hljs-string">"smtp.gmail.com"</span>, <span class="hljs-number">465</span>)
    
    GlobalScope.launch { <span class="hljs-comment">// or however you do background threads</span>
        emailService.send(email)
    }
</code></pre>
<p>The code:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> java.util.*
<span class="hljs-keyword">import</span> javax.mail.*
<span class="hljs-keyword">import</span> javax.mail.internet.InternetAddress
<span class="hljs-keyword">import</span> javax.mail.internet.MimeBodyPart
<span class="hljs-keyword">import</span> javax.mail.internet.MimeMessage
<span class="hljs-keyword">import</span> javax.mail.internet.MimeMultipart

<span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailService</span>(<span class="hljs-keyword">private</span> val server: String, <span class="hljs-keyword">private</span> val port: Int) {

    data <span class="hljs-keyword">class</span> <span class="hljs-title class_">Email</span>(
        val auth: Authenticator,
        val toList: List&lt;InternetAddress&gt;,
        val from: Address,
        val subject: String,
        val body: String
    )

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPassAuthenticator</span>(<span class="hljs-keyword">private</span> val username: String, <span class="hljs-keyword">private</span> val password: String) : Authenticator() {
        override fun <span class="hljs-title function_">getPasswordAuthentication</span><span class="hljs-params">()</span>: PasswordAuthentication {
            <span class="hljs-keyword">return</span> PasswordAuthentication(username, password)
        }
    }

    fun <span class="hljs-title function_">send</span><span class="hljs-params">(email: Email)</span> {
        <span class="hljs-type">val</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> Properties()
        props[<span class="hljs-string">"mail.smtp.auth"</span>] = <span class="hljs-string">"true"</span>
        props[<span class="hljs-string">"mail.user"</span>] = email.from
        props[<span class="hljs-string">"mail.smtp.host"</span>] = server
        props[<span class="hljs-string">"mail.smtp.port"</span>] = port
        props[<span class="hljs-string">"mail.smtp.starttls.enable"</span>] = <span class="hljs-string">"true"</span>
        props[<span class="hljs-string">"mail.smtp.ssl.trust"</span>] = server
        props[<span class="hljs-string">"mail.mime.charset"</span>] = <span class="hljs-string">"UTF-8"</span>
        val msg: Message = MimeMessage(Session.getDefaultInstance(props, email.auth))
        msg.setFrom(email.from)
        msg.sentDate = Calendar.getInstance().time
        msg.setRecipients(Message.RecipientType.TO, email.toList.toTypedArray())
<span class="hljs-comment">//      msg.setRecipients(Message.RecipientType.CC, email.ccList.toTypedArray())</span>
<span class="hljs-comment">//      msg.setRecipients(Message.RecipientType.BCC, email.bccList.toTypedArray())</span>
        msg.replyTo = arrayOf(email.from)

        msg.addHeader(<span class="hljs-string">"X-Mailer"</span>, CLIENT_NAME)
        msg.addHeader(<span class="hljs-string">"Precedence"</span>, <span class="hljs-string">"bulk"</span>)
        msg.subject = email.subject

        msg.setContent(MimeMultipart().apply {
            addBodyPart(MimeBodyPart().apply {
                setText(email.body, <span class="hljs-string">"iso-8859-1"</span>)
                <span class="hljs-comment">//setContent(email.htmlBody, "text/html; charset=UTF-8")</span>
            })
        })
        Transport.send(msg)
    }

    companion object {
        const <span class="hljs-type">val</span> <span class="hljs-variable">CLIENT_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Android StackOverflow programmatic email"</span>
    }
}
</code></pre>
<p>Gradle:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">dependencies {
    implementation <span class="hljs-string">'com.sun.mail:android-mail:1.6.4'</span>
    implementation <span class="hljs-string">"org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.3"</span>
}
</code></pre>
<p>AndroidManifest:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.INTERNET"</span> /&gt;
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 23</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-java s-code-block"><code class="hljs language-java"> Add jar files mail.jar,activation.jar,additionnal.jar

 String sub=<span class="hljs-string">"Thank you for your online registration"</span> ; 
 <span class="hljs-type">Mail</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mail</span>(<span class="hljs-string">"emailid"</span>, <span class="hljs-string">"password"</span>); 

 String[] toArr = {<span class="hljs-string">"ekkatrainfo@gmail.com"</span>,sEmailId};
 m.setFrom(<span class="hljs-string">"ekkatrainfo@gmail.com"</span>); 

     m.setTo(toArr);
     m.setSubject(sub);
    m.setBody(msg);



                     <span class="hljs-keyword">try</span>{


                            <span class="hljs-keyword">if</span>(m.send()) { 

                            } <span class="hljs-keyword">else</span> { 

                            } 
                          } <span class="hljs-keyword">catch</span>(Exception e) { 

                            Log.e(<span class="hljs-string">"MailApp"</span>, <span class="hljs-string">"Could not send email"</span>, e); 
                          } 

  <span class="hljs-keyword">package</span> com.example.ekktra;

   <span class="hljs-keyword">import</span> java.util.Date;
   <span class="hljs-keyword">import</span> java.util.Properties;

   <span class="hljs-keyword">import</span> javax.activation.CommandMap;
   <span class="hljs-keyword">import</span> javax.activation.DataHandler;
   <span class="hljs-keyword">import</span> javax.activation.DataSource;
   <span class="hljs-keyword">import</span> javax.activation.FileDataSource;
   <span class="hljs-keyword">import</span> javax.activation.MailcapCommandMap;
   <span class="hljs-keyword">import</span> javax.mail.BodyPart;
   <span class="hljs-keyword">import</span> javax.mail.Multipart;
   <span class="hljs-keyword">import</span> javax.mail.PasswordAuthentication;
   <span class="hljs-keyword">import</span> javax.mail.Session;
   <span class="hljs-keyword">import</span> javax.mail.Transport;
   <span class="hljs-keyword">import</span> javax.mail.internet.InternetAddress;
   <span class="hljs-keyword">import</span> javax.mail.internet.MimeBodyPart;
   <span class="hljs-keyword">import</span> javax.mail.internet.MimeMessage;
   <span class="hljs-keyword">import</span> javax.mail.internet.MimeMultipart;

   <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Mail</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">javax</span>.mail.Authenticator { 
     <span class="hljs-keyword">private</span> String _user; 
     <span class="hljs-keyword">private</span> String _pass; 

     <span class="hljs-keyword">private</span> String[] _to; 

     <span class="hljs-keyword">private</span> String _from; 

     <span class="hljs-keyword">private</span> String _port; 
     <span class="hljs-keyword">private</span> String _sport; 

     <span class="hljs-keyword">private</span> String _host; 

     <span class="hljs-keyword">private</span> String _subject; 
     <span class="hljs-keyword">private</span> String _body; 

     <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> _auth; 

     <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> _debuggable; 

     <span class="hljs-keyword">private</span> Multipart _multipart; 


   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Mail</span><span class="hljs-params">()</span> { 
      _host = <span class="hljs-string">"smtp.gmail.com"</span>; <span class="hljs-comment">// default smtp server </span>
      _port = <span class="hljs-string">"465"</span>; <span class="hljs-comment">// default smtp port </span>
      _sport = <span class="hljs-string">"465"</span>; <span class="hljs-comment">// default socketfactory port </span>

      _user = <span class="hljs-string">""</span>; <span class="hljs-comment">// username </span>
      _pass = <span class="hljs-string">""</span>; <span class="hljs-comment">// password </span>
      _from = <span class="hljs-string">""</span>; <span class="hljs-comment">// email sent from </span>
      _subject = <span class="hljs-string">""</span>; <span class="hljs-comment">// email subject </span>
      _body = <span class="hljs-string">""</span>; <span class="hljs-comment">// email body </span>

      _debuggable = <span class="hljs-literal">false</span>; <span class="hljs-comment">// debug mode on or off - default off </span>
      _auth = <span class="hljs-literal">true</span>; <span class="hljs-comment">// smtp authentication - default on </span>

      _multipart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMultipart</span>(); 

      <span class="hljs-comment">// There is something wrong with MailCap, javamail can not find a handler for the        multipart/mixed part, so this bit needs to be added. </span>
      <span class="hljs-type">MailcapCommandMap</span> <span class="hljs-variable">mc</span> <span class="hljs-operator">=</span> (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
   mc.addMailcap(<span class="hljs-string">"text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"</span>); 
   mc.addMailcap(<span class="hljs-string">"text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"</span>); 
   mc.addMailcap(<span class="hljs-string">"text/plain;; x-java-content-  handler=com.sun.mail.handlers.text_plain"</span>); 
   mc.addMailcap(<span class="hljs-string">"multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"</span>); 
   mc.addMailcap(<span class="hljs-string">"message/rfc822;; x-java-content- handler=com.sun.mail.handlers.message_rfc822"</span>); 
    CommandMap.setDefaultCommandMap(mc); 
   } 

 <span class="hljs-keyword">public</span> <span class="hljs-title function_">Mail</span><span class="hljs-params">(String user, String pass)</span> { 
  <span class="hljs-built_in">this</span>(); 

  _user = user; 
   _pass = pass; 
 } 

<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">send</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception { 
   <span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> _setProperties(); 

  <span class="hljs-keyword">if</span>(!_user.equals(<span class="hljs-string">""</span>) &amp;&amp; !_pass.equals(<span class="hljs-string">""</span>) &amp;&amp; _to.length &gt; <span class="hljs-number">0</span> &amp;&amp; !_from.equals(<span class="hljs-string">""</span>) &amp;&amp;   !_subject.equals(<span class="hljs-string">""</span>) <span class="hljs-comment">/*&amp;&amp; !_body.equals("")*/</span>) { 
    <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> Session.getInstance(props, <span class="hljs-built_in">this</span>); 

    <span class="hljs-type">MimeMessage</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMessage</span>(session); 

     msg.setFrom(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(_from)); 

    InternetAddress[] addressTo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>[_to.length]; 
     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; _to.length; i++) { 
      addressTo[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InternetAddress</span>(_to[i]); 
    } 
      msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

    msg.setSubject(_subject); 
    msg.setSentDate(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()); 

  <span class="hljs-comment">// setup message body </span>
  <span class="hljs-type">BodyPart</span> <span class="hljs-variable">messageBodyPart</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeBodyPart</span>(); 
    messageBodyPart.setText(_body); 
    _multipart.addBodyPart(messageBodyPart); 

     <span class="hljs-comment">// Put parts in message </span>
    msg.setContent(_multipart); 

    <span class="hljs-comment">// send email </span>
    Transport.send(msg); 

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; 
   } <span class="hljs-keyword">else</span> { 
     <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; 
   } 
  } 

   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addAttachment</span><span class="hljs-params">(String filename)</span> <span class="hljs-keyword">throws</span> Exception { 
    <span class="hljs-type">BodyPart</span> <span class="hljs-variable">messageBodyPart</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeBodyPart</span>(); 
    <span class="hljs-type">DataSource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileDataSource</span>(filename); 
      messageBodyPart.setDataHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataHandler</span>(source)); 
    messageBodyPart.setFileName(filename); 

   _multipart.addBodyPart(messageBodyPart); 
 } 

  <span class="hljs-meta">@Override</span> 
  <span class="hljs-keyword">public</span> PasswordAuthentication <span class="hljs-title function_">getPasswordAuthentication</span><span class="hljs-params">()</span> { 
     <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PasswordAuthentication</span>(_user, _pass); 
  } 

   <span class="hljs-keyword">private</span> Properties <span class="hljs-title function_">_setProperties</span><span class="hljs-params">()</span> { 
   <span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>(); 

    props.put(<span class="hljs-string">"mail.smtp.host"</span>, _host); 

  <span class="hljs-keyword">if</span>(_debuggable) { 
    props.put(<span class="hljs-string">"mail.debug"</span>, <span class="hljs-string">"true"</span>); 
  } 

  <span class="hljs-keyword">if</span>(_auth) { 
    props.put(<span class="hljs-string">"mail.smtp.auth"</span>, <span class="hljs-string">"true"</span>); 
   } 

    props.put(<span class="hljs-string">"mail.smtp.port"</span>, _port); 
    props.put(<span class="hljs-string">"mail.smtp.socketFactory.port"</span>, _sport); 
    props.put(<span class="hljs-string">"mail.smtp.socketFactory.class"</span>, <span class="hljs-string">"javax.net.ssl.SSLSocketFactory"</span>); 
    props.put(<span class="hljs-string">"mail.smtp.socketFactory.fallback"</span>, <span class="hljs-string">"false"</span>); 

    <span class="hljs-keyword">return</span> props; 
   } 

   <span class="hljs-comment">// the getters and setters </span>
  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBody</span><span class="hljs-params">()</span> { 
   <span class="hljs-keyword">return</span> _body; 
 } 

 <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBody</span><span class="hljs-params">(String _body)</span> { 
  <span class="hljs-built_in">this</span>._body = _body; 
 }

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTo</span><span class="hljs-params">(String[] toArr)</span> {
     <span class="hljs-comment">// TODO Auto-generated method stub</span>
    <span class="hljs-built_in">this</span>._to=toArr;
 }

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFrom</span><span class="hljs-params">(String string)</span> {
    <span class="hljs-comment">// TODO Auto-generated method stub</span>
    <span class="hljs-built_in">this</span>._from=string;
}

 <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSubject</span><span class="hljs-params">(String string)</span> {
    <span class="hljs-comment">// TODO Auto-generated method stub</span>
    <span class="hljs-built_in">this</span>._subject=string;
  }  


   }
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 24</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For those who want to use JavaMail with Kotlin in 2020:</p>
<h2>First: Add these dependencies to your build.gradle file (official JavaMail Maven Dependencies)</h2>
<blockquote>
<p>implementation 'com.sun.mail:android-mail:1.6.5'</p>
<p>implementation 'com.sun.mail:android-activation:1.6.5'</p>
</blockquote>
<blockquote>
<p>implementation "org.bouncycastle:bcmail-jdk15on:1.65"</p>
<p>implementation "org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.7"</p>
<p>implementation "org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.7"</p>
</blockquote>
<p>BouncyCastle is for security reasons.</p>
<h2>Second: Add these permissions to your AndroidManifest.xml</h2>
<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.INTERNET"</span> /&gt;
&lt;uses-permission android:name=<span class="hljs-string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;
</code></pre>
<h2>Third: When using SMTP, create a Config file</h2>
<pre class="lang-java s-code-block"><code class="hljs language-java">object Config {
    const <span class="hljs-type">val</span> <span class="hljs-variable">EMAIL_FROM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"You_Sender_Email@email.com"</span>
    const <span class="hljs-type">val</span> <span class="hljs-variable">PASS_FROM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Your_Sender_Password"</span>

    const <span class="hljs-type">val</span> <span class="hljs-variable">EMAIL_TO</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Your_Destination_Email@email.com"</span>
}
</code></pre>
<h2>Fourth: Create your Mailer Object</h2>
<pre class="lang-java s-code-block"><code class="hljs language-java">object Mailer {

init {
    Security.addProvider(BouncyCastleProvider())
}

<span class="hljs-keyword">private</span> fun <span class="hljs-title function_">props</span><span class="hljs-params">()</span>: Properties = Properties().also {
        <span class="hljs-comment">// Smtp server</span>
        it[<span class="hljs-string">"mail.smtp.host"</span>] = <span class="hljs-string">"smtp.gmail.com"</span>
        <span class="hljs-comment">// Change when necessary</span>
        it[<span class="hljs-string">"mail.smtp.auth"</span>] = <span class="hljs-string">"true"</span>
        it[<span class="hljs-string">"mail.smtp.port"</span>] = <span class="hljs-string">"465"</span>
        <span class="hljs-comment">// Easy and fast way to enable ssl in JavaMail</span>
        it[<span class="hljs-string">"mail.smtp.ssl.enable"</span>] = <span class="hljs-literal">true</span>
    }

<span class="hljs-comment">// Dont ever use "getDefaultInstance" like other examples do!</span>
<span class="hljs-keyword">private</span> fun <span class="hljs-title function_">session</span><span class="hljs-params">(emailFrom: String, emailPass: String)</span>: Session = Session.getInstance(props(), object : Authenticator() {
    override fun <span class="hljs-title function_">getPasswordAuthentication</span><span class="hljs-params">()</span>: PasswordAuthentication {
        <span class="hljs-keyword">return</span> PasswordAuthentication(emailFrom, emailPass)
    }
})

<span class="hljs-keyword">private</span> fun <span class="hljs-title function_">builtMessage</span><span class="hljs-params">(firstName: String, surName: String)</span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"""
            &lt;b&gt;Name:&lt;/b&gt; $firstName  &lt;br/&gt;
            &lt;b&gt;Surname:&lt;/b&gt; $surName &lt;br/&gt;
        """</span>.trimIndent()
}

<span class="hljs-keyword">private</span> fun <span class="hljs-title function_">builtSubject</span><span class="hljs-params">(issue: String, firstName: String, surName: String)</span>:String {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"""
            $issue | $firstName, $surName
        """</span>.trimIndent()
}

<span class="hljs-keyword">private</span> fun <span class="hljs-title function_">sendMessageTo</span><span class="hljs-params">(emailFrom: String, session: Session, message: String, subject: String)</span> {
    <span class="hljs-keyword">try</span> {
        MimeMessage(session).let { mime -&gt;
            mime.setFrom(InternetAddress(emailFrom))
            <span class="hljs-comment">// Adding receiver</span>
            mime.addRecipient(Message.RecipientType.TO, InternetAddress(Config.EMAIL_TO))
            <span class="hljs-comment">// Adding subject</span>
            mime.subject = subject
            <span class="hljs-comment">// Adding message</span>
            mime.setText(message)
            <span class="hljs-comment">// Set Content of Message to Html if needed</span>
            mime.setContent(message, <span class="hljs-string">"text/html"</span>)
            <span class="hljs-comment">// send mail</span>
            Transport.send(mime)
        }

    } <span class="hljs-keyword">catch</span> (e: MessagingException) {
        Log.e(<span class="hljs-string">""</span>,<span class="hljs-string">""</span>) <span class="hljs-comment">// Or use timber, it really doesn't matter</span>
    }
}

fun <span class="hljs-title function_">sendMail</span><span class="hljs-params">(firstName: String, surName: String)</span> {
        <span class="hljs-comment">// Open a session</span>
        <span class="hljs-type">val</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> session(Config.EMAIL_FROM, Config.PASSWORD_FROM)

        <span class="hljs-comment">// Create a message</span>
        <span class="hljs-type">val</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> builtMessage(firstName, surName)

        <span class="hljs-comment">// Create subject</span>
        <span class="hljs-type">val</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> builtSubject(firstName, surName)

        <span class="hljs-comment">// Send Email</span>
        CoroutineScope(Dispatchers.IO).launch { sendMessageTo(Config.EMAIL_FROM, session, message, subject) }
}
</code></pre>
<h2>Note</h2>
<ul>
<li>If you want a more secure way to send your email (and you want a more secure way!), use http as mentioned in the solutions before (I will maybe add it later in this answer)</li>
<li>You have to properly check, if the users phone has internet access, otherwise the app will crash.</li>
<li>When using gmail, enable "less secure apps" (this will not work, when you gmail has two factors enabled) <a href="https://myaccount.google.com/lesssecureapps?pli=1" rel="nofollow noreferrer">https://myaccount.google.com/lesssecureapps?pli=1</a></li>
<li>Some credits belong to: <a href="https://medium.com/@chetan.garg36/android-send-mails-not-intent-642d2a71d2ee" rel="nofollow noreferrer">https://medium.com/@chetan.garg36/android-send-mails-not-intent-642d2a71d2ee</a> (he used RxJava for his solution)</li>
</ul>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 25</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">package</span> io.formics.tourguide

<span class="hljs-keyword">import</span> android.annotation.SuppressLint
<span class="hljs-keyword">import</span> android.content.Intent
<span class="hljs-keyword">import</span> android.net.Credentials
<span class="hljs-keyword">import</span> android.net.Uri
<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity
<span class="hljs-keyword">import</span> android.os.Bundle
<span class="hljs-keyword">import</span> android.util.Log
<span class="hljs-keyword">import</span> android.widget.Toast
<span class="hljs-keyword">import</span> kotlinx.android.synthetic.main.activity_feedback.*
<span class="hljs-keyword">import</span> org.jetbrains.annotations.Async
<span class="hljs-keyword">import</span> java.lang.Exception

<span class="hljs-keyword">import</span> java.util.Properties;


<span class="hljs-keyword">import</span> javax.activation.DataHandler;
<span class="hljs-keyword">import</span> javax.activation.FileDataSource
<span class="hljs-keyword">import</span> javax.mail.*
<span class="hljs-keyword">import</span> javax.mail.internet.*


<span class="hljs-keyword">class</span> <span class="hljs-title class_">FeedbackActivity</span> : AppCompatActivity()  {
  
    <span class="hljs-type">val</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> Properties()


    override fun <span class="hljs-title function_">onCreate</span><span class="hljs-params">(savedInstanceState: Bundle?)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_feedback)

        props.put(<span class="hljs-string">"mail.smtp.auth"</span>, <span class="hljs-string">"true"</span>);
        props.put(<span class="hljs-string">"mail.smtp.starttls.enable"</span>, <span class="hljs-string">"true"</span>);
        props.put(<span class="hljs-string">"mail.smtp.host"</span>, <span class="hljs-string">"smtp.gmail.com"</span>);
        props.put(<span class="hljs-string">"mail.smtp.port"</span>, <span class="hljs-string">"587"</span>);

        btnSendEmail.setOnClickListener {
            Thread {
                <span class="hljs-keyword">try</span> {
                    sendEmail()
                    <span class="hljs-comment">// Your implementation</span>
                } <span class="hljs-keyword">catch</span> (ex: Exception) {
                    ex.printStackTrace()
                }
            }.start()


        }
    }


    <span class="hljs-keyword">private</span> fun <span class="hljs-title function_">sendEmail</span><span class="hljs-params">()</span> {



        <span class="hljs-keyword">try</span> {

            <span class="hljs-type">val</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> Session.getInstance(props,
                object : javax.mail.Authenticator() {
                    <span class="hljs-comment">//Authenticating the password</span>
                    override fun <span class="hljs-title function_">getPasswordAuthentication</span><span class="hljs-params">()</span>: javax.mail.PasswordAuthentication {
                        <span class="hljs-keyword">return</span> PasswordAuthentication(<span class="hljs-string">"abc@xyz.com"</span>, <span class="hljs-string">"password"</span>)
                    }
                })

            <span class="hljs-type">val</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> MimeMessage(session);
            message.setFrom(InternetAddress(<span class="hljs-string">"abc@xyz.com"</span>));
            message.setRecipients(
                Message.RecipientType.TO,
                InternetAddress.parse(editCC.text.toString())
            )
            message.subject = editSubject.text.toString()
            message.setText(
                <span class="hljs-string">"Dear Mail Crawler,"</span>
                        + <span class="hljs-string">"\n\n No spam to my email, please!"</span>
            );

            <span class="hljs-comment">//val messageBodyPart = MimeBodyPart();</span>

            <span class="hljs-comment">//val multipart = MimeMultipart();</span>

            <span class="hljs-comment">//val file = "path of file to be attached";</span>

<span class="hljs-comment">//            val fileName = "attachmentName"</span>
           <span class="hljs-comment">// val source = FileDataSource(file);</span>
            <span class="hljs-comment">//messageBodyPart.setDataHandler(DataHandler(source));</span>
            <span class="hljs-comment">//messageBodyPart.setFileName(fileName);</span>
            <span class="hljs-comment">//multipart.addBodyPart(messageBodyPart);</span>

            <span class="hljs-comment">//message.setContent(multipart);</span>

            Transport.send(message);
            System.out.println(<span class="hljs-string">"Done"</span>);



        } <span class="hljs-keyword">catch</span> (e: MessagingException) {
            <span class="hljs-keyword">throw</span>  RuntimeException(e);
        }

           }
}




 
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 26</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>To add attachment, don't forget to add. </p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">MailcapCommandMap</span> <span class="hljs-variable">mc</span> <span class="hljs-operator">=</span> (MailcapCommandMap) CommandMap
            .getDefaultCommandMap();
    mc.addMailcap(<span class="hljs-string">"text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"</span>);
    mc.addMailcap(<span class="hljs-string">"text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"</span>);
    mc.addMailcap(<span class="hljs-string">"text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"</span>);
    mc.addMailcap(<span class="hljs-string">"multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"</span>);
    mc.addMailcap(<span class="hljs-string">"message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"</span>);
    CommandMap.setDefaultCommandMap(mc);
</code></pre>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;Send e-mail in Android using the JavaMail API using Gmail authentication.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Steps to create a sample Project:\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;MailSenderActivity.java:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MailSenderActivity\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Activity\u0026lt;/span\u0026gt; {\n    \n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Bundle savedInstanceState)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n        \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Button\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;send\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (Button) \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.findViewById(R.id.send);\n        send.setOnClickListener(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;View\u0026lt;/span\u0026gt;.OnClickListener() {\n            \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onClick\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(View v)\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {   \n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;GMailSender\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;sender\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;GMailSender\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;username@gmail.com\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;password\u0026quot;\u0026lt;/span\u0026gt;);\n                    sender.sendMail(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;This is Subject\u0026quot;\u0026lt;/span\u0026gt;,   \n                            \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;This is Body\u0026quot;\u0026lt;/span\u0026gt;,   \n                            \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;user@gmail.com\u0026quot;\u0026lt;/span\u0026gt;,   \n                            \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;user@yahoo.com\u0026quot;\u0026lt;/span\u0026gt;);   \n                } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {   \n                    Log.e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SendMail\u0026quot;\u0026lt;/span\u0026gt;, e.getMessage(), e);   \n                } \n                \n            }\n        });\n        \n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;GMailSender.java:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;GMailSender\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;javax\u0026lt;/span\u0026gt;.mail.Authenticator {   \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mailhost\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp.gmail.com\u0026quot;\u0026lt;/span\u0026gt;;   \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String user;   \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String password;   \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Session session;   \n  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; {   \n        Security.addProvider(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;com\u0026lt;/span\u0026gt;.provider.JSSEProvider());   \n    }  \n  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;GMailSender\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String user, String password)\u0026lt;/span\u0026gt; {   \n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.user = user;   \n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.password = password;   \n  \n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;props\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt;();   \n        props.setProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.transport.protocol\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp\u0026quot;\u0026lt;/span\u0026gt;);   \n        props.setProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.host\u0026quot;\u0026lt;/span\u0026gt;, mailhost);   \n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.auth\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;);   \n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.port\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;465\u0026quot;\u0026lt;/span\u0026gt;);   \n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.port\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;465\u0026quot;\u0026lt;/span\u0026gt;);   \n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.class\u0026quot;\u0026lt;/span\u0026gt;,   \n                \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;javax.net.ssl.SSLSocketFactory\u0026quot;\u0026lt;/span\u0026gt;);   \n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.fallback\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;false\u0026quot;\u0026lt;/span\u0026gt;);   \n        props.setProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.quitwait\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;false\u0026quot;\u0026lt;/span\u0026gt;);   \n  \n        session = Session.getDefaultInstance(props, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;);   \n    }   \n  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; PasswordAuthentication \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPasswordAuthentication\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {   \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PasswordAuthentication\u0026lt;/span\u0026gt;(user, password);   \n    }   \n  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;synchronized\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sendMail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String subject, String body, String sender, String recipients)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception {   \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MimeMessage\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeMessage\u0026lt;/span\u0026gt;(session);   \n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DataHandler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;handler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DataHandler\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ByteArrayDataSource\u0026lt;/span\u0026gt;(body.getBytes(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;));   \n        message.setSender(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(sender));   \n        message.setSubject(subject);   \n        message.setDataHandler(handler);   \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (recipients.indexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;) \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)   \n            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;  \n            message.setRecipient(Message.RecipientType.TO, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(recipients));   \n        Transport.send(message);   \n        }\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(Exception e){\n            \n        }\n    }   \n  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ByteArrayDataSource\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;implements\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DataSource\u0026lt;/span\u0026gt; {   \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] data;   \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String type;   \n  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ByteArrayDataSource\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] data, String type)\u0026lt;/span\u0026gt; {   \n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;();   \n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.data = data;   \n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.type = type;   \n        }   \n  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ByteArrayDataSource\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] data)\u0026lt;/span\u0026gt; {   \n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;();   \n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.data = data;   \n        }   \n  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setType\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String type)\u0026lt;/span\u0026gt; {   \n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.type = type;   \n        }   \n  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getContentType\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {   \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (type == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;)   \n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/octet-stream\u0026quot;\u0026lt;/span\u0026gt;;   \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;  \n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; type;   \n        }   \n  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; InputStream \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getInputStream\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {   \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ByteArrayInputStream\u0026lt;/span\u0026gt;(data);   \n        }   \n  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getName\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {   \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ByteArrayDataSource\u0026quot;\u0026lt;/span\u0026gt;;   \n        }   \n  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; OutputStream \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOutputStream\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {   \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;IOException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Not Supported\u0026quot;\u0026lt;/span\u0026gt;);   \n        }   \n    }   \n}  \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;JSSEProvider.java:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n *  Licensed to the Apache Software Foundation (ASF) under one or more\n *  contributor license agreements.  See the NOTICE file distributed with\n *  this work for additional information regarding copyright ownership.\n *  The ASF licenses this file to You under the Apache License, Version 2.0\n *  (the \u0026quot;License\u0026quot;); you may not use this file except in compliance with\n *  the License.  You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \u0026quot;AS IS\u0026quot; BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@author\u0026lt;/span\u0026gt; Alexander Y. Kleymenov\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@version\u0026lt;/span\u0026gt; $Revision$\n */\u0026lt;/span\u0026gt;\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.security.AccessController;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.security.Provider;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSSEProvider\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Provider\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;JSSEProvider\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;HarmonyJSSE\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Harmony JSSE Provider\u0026quot;\u0026lt;/span\u0026gt;);\n        AccessController.doPrivileged(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;java\u0026lt;/span\u0026gt;.security.PrivilegedAction\u0026amp;lt;Void\u0026amp;gt;() {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; Void \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n                put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SSLContext.TLS\u0026quot;\u0026lt;/span\u0026gt;,\n                        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;org.apache.harmony.xnet.provider.jsse.SSLContextImpl\u0026quot;\u0026lt;/span\u0026gt;);\n                put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Alg.Alias.SSLContext.TLSv1\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;TLS\u0026quot;\u0026lt;/span\u0026gt;);\n                put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;KeyManagerFactory.X509\u0026quot;\u0026lt;/span\u0026gt;,\n                        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl\u0026quot;\u0026lt;/span\u0026gt;);\n                put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;TrustManagerFactory.X509\u0026quot;\u0026lt;/span\u0026gt;,\n                        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl\u0026quot;\u0026lt;/span\u0026gt;);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n            }\n        });\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;ADD 3 jars found in the following link to your Android Project\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/mail.jar\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;mail.jar\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/activation.jar\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;activation.jar\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/additionnal.jar\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;additional.jar\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/6859020/28557\u0026quot;\u0026gt;Click here - How to add External Jars\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;And don\u0026apos;t forget to add this line in your manifest:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.INTERNET\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Just click below link to change account access for less secure apps\u0026lt;/strong\u0026gt;\n\u0026lt;a href=\u0026quot;https://www.google.com/settings/security/lesssecureapps\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://www.google.com/settings/security/lesssecureapps\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Run the project and check your recipient mail account for the mail.\nCheers!\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;P.S. And don\u0026apos;t forget that you cannot do network operation from any Activity in android.\nHence it is recommended to use \u0026lt;code\u0026gt;AsyncTask\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;IntentService\u0026lt;/code\u0026gt; to avoid network on main thread exception.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Jar files: \u0026lt;a href=\u0026quot;https://code.google.com/archive/p/javamail-android/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://code.google.com/archive/p/javamail-android/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Thank you for your valuable information. Code is working fine. I am able to add attachment also by adding following code.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Multipart _multipart; \n_multipart = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeMultipart\u0026lt;/span\u0026gt;(); \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addAttachment\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String filename,String subject)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception { \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;messageBodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeBodyPart\u0026lt;/span\u0026gt;(); \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DataSource\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;source\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FileDataSource\u0026lt;/span\u0026gt;(filename); \n    messageBodyPart.setDataHandler(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DataHandler\u0026lt;/span\u0026gt;(source)); \n    messageBodyPart.setFileName(filename); \n    _multipart.addBodyPart(messageBodyPart);\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;messageBodyPart2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeBodyPart\u0026lt;/span\u0026gt;(); \n    messageBodyPart2.setText(subject); \n\n    _multipart.addBodyPart(messageBodyPart2); \n} \n\n\n\nmessage.setContent(_multipart);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Could not connect to SMTP host:\n  smtp.gmail.com, port: 465\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;Add this line in your manifest:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.INTERNET\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can use JavaMail API to handle your email tasks. JavaMail API is available in JavaEE package and its jar is available for download. Sadly it cannot be used directly in an Android application since it uses AWT components which are completely incompatible  in Android.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can find the Android port for JavaMail at the following location:\n\u0026lt;a href=\u0026quot;http://code.google.com/p/javamail-android/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://code.google.com/p/javamail-android/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Add the jars to your application and use the SMTP method\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;100% working code with demo You can also send multiple emails using this answer.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Download Project \u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/arpit999/SendMail\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;HERE\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Step 1:\u0026lt;/strong\u0026gt;  Download mail, activation, additional jar files and add in your \u0026lt;strong\u0026gt;project libs folder\u0026lt;/strong\u0026gt; in android studio. I added a screenshot see below \u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://code.google.com/archive/p/javamail-android/downloads\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Download link\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/CCnFj.png\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/CCnFj.png\u0026quot; alt=\u0026quot;libs add\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Login with gmail (\u0026lt;strong\u0026gt;using your from mail\u0026lt;/strong\u0026gt;) and \u0026lt;strong\u0026gt;TURN ON\u0026lt;/strong\u0026gt;  toggle button \u0026lt;a href=\u0026quot;https://www.google.com/settings/u/1/security/lesssecureapps\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;LINK\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Most of the people forget about this step i hope you will not.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Step 2 :\u0026lt;/strong\u0026gt;  After completing this process.  Copy and past this classes into your project.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;GMail.java\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.util.Log;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.UnsupportedEncodingException;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.List;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Properties;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Message;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.MessagingException;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Session;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Transport;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.AddressException;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.InternetAddress;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeMessage;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;GMail\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;emailPort\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;587\u0026quot;\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// gmail\u0026apos;s smtp port\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;smtpAuth\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;starttls\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;emailHost\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp.gmail.com\u0026quot;\u0026lt;/span\u0026gt;;\n\n\n    String fromEmail;\n    String fromPassword;\n    List\u0026amp;lt;String\u0026amp;gt; toEmailList;\n    String emailSubject;\n    String emailBody;\n\n    Properties emailProperties;\n    Session mailSession;\n    MimeMessage emailMessage;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;GMail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;GMail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String fromEmail, String fromPassword,\n            List\u0026amp;lt;String\u0026amp;gt; toEmailList, String emailSubject, String emailBody)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.fromEmail = fromEmail;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.fromPassword = fromPassword;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.toEmailList = toEmailList;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.emailSubject = emailSubject;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.emailBody = emailBody;\n\n        emailProperties = System.getProperties();\n        emailProperties.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.port\u0026quot;\u0026lt;/span\u0026gt;, emailPort);\n        emailProperties.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.auth\u0026quot;\u0026lt;/span\u0026gt;, smtpAuth);\n        emailProperties.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.starttls.enable\u0026quot;\u0026lt;/span\u0026gt;, starttls);\n        Log.i(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;GMail\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Mail server properties set.\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; MimeMessage \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;createEmailMessage\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; AddressException,\n            MessagingException, UnsupportedEncodingException {\n\n        mailSession = Session.getDefaultInstance(emailProperties, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n        emailMessage = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeMessage\u0026lt;/span\u0026gt;(mailSession);\n\n        emailMessage.setFrom(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(fromEmail, fromEmail));\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (String toEmail : toEmailList) {\n            Log.i(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;GMail\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;toEmail: \u0026quot;\u0026lt;/span\u0026gt; + toEmail);\n            emailMessage.addRecipient(Message.RecipientType.TO,\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(toEmail));\n        }\n\n        emailMessage.setSubject(emailSubject);\n        emailMessage.setContent(emailBody, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/html\u0026quot;\u0026lt;/span\u0026gt;);\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// for a html email\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// emailMessage.setText(emailBody);// for a text email\u0026lt;/span\u0026gt;\n        Log.i(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;GMail\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Email Message created.\u0026quot;\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; emailMessage;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sendEmail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; AddressException, MessagingException {\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Transport\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;transport\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; mailSession.getTransport(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp\u0026quot;\u0026lt;/span\u0026gt;);\n        transport.connect(emailHost, fromEmail, fromPassword);\n        Log.i(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;GMail\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;allrecipients: \u0026quot;\u0026lt;/span\u0026gt; + emailMessage.getAllRecipients());\n        transport.sendMessage(emailMessage, emailMessage.getAllRecipients());\n        transport.close();\n        Log.i(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;GMail\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Email sent successfully.\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;SendMailTask.java\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.app.Activity;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.app.ProgressDialog;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.os.AsyncTask;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.util.Log;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.List;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SendMailTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AsyncTask\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; ProgressDialog statusDialog;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Activity sendMailActivity;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;SendMailTask\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Activity activity)\u0026lt;/span\u0026gt; {\n        sendMailActivity = activity;\n\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onPreExecute\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        statusDialog = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ProgressDialog\u0026lt;/span\u0026gt;(sendMailActivity);\n        statusDialog.setMessage(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Getting ready...\u0026quot;\u0026lt;/span\u0026gt;);\n        statusDialog.setIndeterminate(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;);\n        statusDialog.setCancelable(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;);\n        statusDialog.show();\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; Object \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doInBackground\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Object... args)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            Log.i(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SendMailTask\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;About to instantiate GMail...\u0026quot;\u0026lt;/span\u0026gt;);\n            publishProgress(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Processing input....\u0026quot;\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;GMail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;androidEmail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;GMail\u0026lt;/span\u0026gt;(args[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].toString(),\n                    args[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;].toString(), (List) args[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;], args[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;].toString(),\n                    args[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;].toString());\n            publishProgress(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Preparing mail message....\u0026quot;\u0026lt;/span\u0026gt;);\n            androidEmail.createEmailMessage();\n            publishProgress(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Sending email....\u0026quot;\u0026lt;/span\u0026gt;);\n            androidEmail.sendEmail();\n            publishProgress(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Email Sent.\u0026quot;\u0026lt;/span\u0026gt;);\n            Log.i(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SendMailTask\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Mail Sent.\u0026quot;\u0026lt;/span\u0026gt;);\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n            publishProgress(e.getMessage());\n            Log.e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SendMailTask\u0026quot;\u0026lt;/span\u0026gt;, e.getMessage(), e);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onProgressUpdate\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Object... values)\u0026lt;/span\u0026gt; {\n        statusDialog.setMessage(values[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].toString());\n\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onPostExecute\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Object result)\u0026lt;/span\u0026gt; {\n        statusDialog.dismiss();\n    }\n\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Step 3 :\u0026lt;/strong\u0026gt;\nNow you can change this  class according to your needs also you can send multiple mail using this class. i provide xml and java file both.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;activity_main.xml\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;?xml version=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;1.0\u0026quot;\u0026lt;/span\u0026gt; encoding=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;utf-8\u0026quot;\u0026lt;/span\u0026gt;?\u0026amp;gt;\n\u0026amp;lt;LinearLayout xmlns:android=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://schemas.android.com/apk/res/android\u0026quot;\u0026lt;/span\u0026gt;\n    xmlns:tools=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://schemas.android.com/tools\u0026quot;\u0026lt;/span\u0026gt;\n    android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;match_parent\u0026quot;\u0026lt;/span\u0026gt;\n    android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;match_parent\u0026quot;\u0026lt;/span\u0026gt;\n    android:orientation=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;vertical\u0026quot;\u0026lt;/span\u0026gt;\n    android:paddingLeft=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;20dp\u0026quot;\u0026lt;/span\u0026gt;\n    android:paddingRight=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;20dp\u0026quot;\u0026lt;/span\u0026gt;\n    android:paddingTop=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;30dp\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\n\n    \u0026amp;lt;TextView\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/textView1\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:paddingTop=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10dp\u0026quot;\u0026lt;/span\u0026gt;\n        android:text=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;From Email\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n    \u0026amp;lt;EditText\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/editText1\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;match_parent\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:background=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#FFFFFF\u0026quot;\u0026lt;/span\u0026gt;\n        android:cursorVisible=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n        android:editable=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n        android:ems=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10\u0026quot;\u0026lt;/span\u0026gt;\n        android:enabled=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n        android:inputType=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;textEmailAddress\u0026quot;\u0026lt;/span\u0026gt;\n        android:padding=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;5dp\u0026quot;\u0026lt;/span\u0026gt;\n        android:textColor=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#000000\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\n\n        \u0026amp;lt;requestFocus /\u0026amp;gt;\n    \u0026amp;lt;/EditText\u0026amp;gt;\n\n    \u0026amp;lt;TextView\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/textView2\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:paddingTop=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10dp\u0026quot;\u0026lt;/span\u0026gt;\n        android:text=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Password (For from email)\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n    \u0026amp;lt;EditText\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/editText2\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;match_parent\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:background=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#FFFFFF\u0026quot;\u0026lt;/span\u0026gt;\n        android:ems=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10\u0026quot;\u0026lt;/span\u0026gt;\n        android:inputType=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;textPassword\u0026quot;\u0026lt;/span\u0026gt;\n        android:padding=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;5dp\u0026quot;\u0026lt;/span\u0026gt;\n        android:textColor=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#000000\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n    \u0026amp;lt;TextView\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/textView3\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:paddingTop=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10dp\u0026quot;\u0026lt;/span\u0026gt;\n        android:text=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;To Email\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n    \u0026amp;lt;EditText\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/editText3\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;match_parent\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:background=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#ffffff\u0026quot;\u0026lt;/span\u0026gt;\n        android:ems=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10\u0026quot;\u0026lt;/span\u0026gt;\n        android:inputType=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;textEmailAddress\u0026quot;\u0026lt;/span\u0026gt;\n        android:padding=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;5dp\u0026quot;\u0026lt;/span\u0026gt;\n        android:textColor=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#000000\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n    \u0026amp;lt;TextView\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/textView4\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:paddingTop=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10dp\u0026quot;\u0026lt;/span\u0026gt;\n        android:text=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Subject\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n    \u0026amp;lt;EditText\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/editText4\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;match_parent\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:background=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#ffffff\u0026quot;\u0026lt;/span\u0026gt;\n        android:ems=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10\u0026quot;\u0026lt;/span\u0026gt;\n        android:padding=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;5dp\u0026quot;\u0026lt;/span\u0026gt;\n        android:textColor=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#000000\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n    \u0026amp;lt;TextView\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/textView5\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:paddingTop=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10dp\u0026quot;\u0026lt;/span\u0026gt;\n        android:text=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Body\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n    \u0026amp;lt;EditText\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/editText5\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;match_parent\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:background=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#ffffff\u0026quot;\u0026lt;/span\u0026gt;\n        android:ems=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10\u0026quot;\u0026lt;/span\u0026gt;\n        android:inputType=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;textMultiLine\u0026quot;\u0026lt;/span\u0026gt;\n        android:padding=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;35dp\u0026quot;\u0026lt;/span\u0026gt;\n        android:textColor=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#000000\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n    \u0026amp;lt;Button\n        android:id=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/button1\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_width=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:layout_height=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n        android:text=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Send Email\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n\u0026amp;lt;/LinearLayout\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;SendMailActivity.java\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.app.Activity;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.os.Bundle;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.util.Log;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.view.View;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.widget.Button;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.widget.TextView;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Arrays;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.List;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SendMailActivity\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Activity\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Bundle savedInstanceState)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Button\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;send\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (Button) \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.findViewById(R.id.button1);\n\n        send.setOnClickListener(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;View\u0026lt;/span\u0026gt;.OnClickListener() {\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onClick\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(View v)\u0026lt;/span\u0026gt; {\n                Log.i(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SendMailActivity\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Send Button Clicked.\u0026quot;\u0026lt;/span\u0026gt;);\n\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fromEmail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; ((TextView) findViewById(R.id.editText1))\n                        .getText().toString();\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;fromPassword\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; ((TextView) findViewById(R.id.editText2))\n                        .getText().toString();\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;toEmails\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; ((TextView) findViewById(R.id.editText3))\n                        .getText().toString();\n                List\u0026amp;lt;String\u0026amp;gt; toEmailList = Arrays.asList(toEmails\n                        .split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\s*,\\\\s*\u0026quot;\u0026lt;/span\u0026gt;));\n                Log.i(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SendMailActivity\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;To List: \u0026quot;\u0026lt;/span\u0026gt; + toEmailList);\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;emailSubject\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; ((TextView) findViewById(R.id.editText4))\n                        .getText().toString();\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;emailBody\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; ((TextView) findViewById(R.id.editText5))\n                        .getText().toString();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SendMailTask\u0026lt;/span\u0026gt;(SendMailActivity.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;).execute(fromEmail,\n                        fromPassword, toEmailList, emailSubject, emailBody);\n            }\n        });\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Note\u0026lt;/strong\u0026gt; Dont forget to add \u0026lt;strong\u0026gt;internet\u0026lt;/strong\u0026gt; permission in your AndroidManifest.xml file\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026quot;android.permission.INTERNET\u0026quot;/\u0026amp;gt;\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Hope it work if it not then just comment down below.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In order to help those getting a Network On Main Thread Exception with an SDK Target \u0026amp;gt;9. This is using droopie\u0026apos;s code above but will work similarly for any.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;StrictMode.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ThreadPolicy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;policy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StrictMode\u0026lt;/span\u0026gt;.ThreadPolicy.Builder().permitAll().build();\n\nStrictMode.setThreadPolicy(policy); \n\nandroid.os.NetworkOnMainThreadException\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can use AsyncTask as below\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onClickMail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(View view)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SendEmailAsyncTask\u0026lt;/span\u0026gt;().execute();\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SendEmailAsyncTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AsyncTask\u0026lt;/span\u0026gt; \u0026amp;lt;Void, Void, Boolean\u0026amp;gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;m\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;from@gmail.com\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;my password\u0026quot;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;SendEmailAsyncTask\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (BuildConfig.DEBUG) Log.v(SendEmailAsyncTask.class.getName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SendEmailAsyncTask()\u0026quot;\u0026lt;/span\u0026gt;);\n        String[] toArr = { \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;to mail@gmail.com\u0026quot;\u0026lt;/span\u0026gt;};\n        m.setTo(toArr);\n        m.setFrom(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;from mail@gmail.com\u0026quot;\u0026lt;/span\u0026gt;);\n        m.setSubject(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Email from Android\u0026quot;\u0026lt;/span\u0026gt;);\n        m.setBody(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;body.\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; Boolean \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doInBackground\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Void... params)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (BuildConfig.DEBUG) Log.v(SendEmailAsyncTask.class.getName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;doInBackground()\u0026quot;\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            m.send();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (AuthenticationFailedException e) {\n            Log.e(SendEmailAsyncTask.class.getName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Bad account details\u0026quot;\u0026lt;/span\u0026gt;);\n            e.printStackTrace();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (MessagingException e) {\n            Log.e(SendEmailAsyncTask.class.getName(), m.getTo(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;failed\u0026quot;\u0026lt;/span\u0026gt;);\n            e.printStackTrace();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n            e.printStackTrace();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n        }\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;SMTP\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;Using SMTP is one way to go, and the others have already pointed out ways how to do it. Just note that while doing this, you completely circumvent the built in mail app, and you will have to provide the address of the SMTP server, the user name and password for that server, either statically in your code, or query it from the user.\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;HTTP\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;Another way would involve a simple server side script, like php, that takes some URL parameters and uses them to send a mail. This way, you only need to make an HTTP request from the device (easily possible with the built in libraries) and don\u0026apos;t need to store the SMTP login data on the device. This is one more indirection compared to direct SMTP usage, but because it\u0026apos;s so very easy to make HTTP request and send mails from PHP, it might even be simpler than the direct way.\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;Mail Application\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;If the mail shall be send from the users default mail account that he already registered with the phone, you\u0026apos;d have to take some other approach. If you have enough time and experience, you might want to check the source code of the Android Email application to see if it offers some entry point to send a mail without user interaction (I don\u0026apos;t know, but maybe there is one).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Maybe you even find a way to query the users account details (so you can use them for SMTP), though I highly doubt that this is possible, because it would be a huge security risk and Android is built rather securely.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;here is an alt version that also works for me and has attachments (posted already above but complete version unlike the source link, which people posted they cant get it to work since its missing data)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Date; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Properties; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.CommandMap; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.DataHandler; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.DataSource; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.FileDataSource; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.MailcapCommandMap; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.BodyPart; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Multipart; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.PasswordAuthentication; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Session; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Transport; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.InternetAddress; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeBodyPart; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeMessage; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeMultipart; \n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;javax\u0026lt;/span\u0026gt;.mail.Authenticator { \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _user; \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _pass; \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String[] _to; \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _from; \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _port; \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _sport; \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _host; \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _subject; \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _body; \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; _auth; \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; _debuggable; \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Multipart _multipart; \n\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { \n    _host = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp.gmail.com\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// default smtp server \u0026lt;/span\u0026gt;\n    _port = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;465\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// default smtp port \u0026lt;/span\u0026gt;\n    _sport = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;465\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// default socketfactory port \u0026lt;/span\u0026gt;\n\n    _user = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// username \u0026lt;/span\u0026gt;\n    _pass = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// password \u0026lt;/span\u0026gt;\n    _from = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// email sent from \u0026lt;/span\u0026gt;\n    _subject = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// email subject \u0026lt;/span\u0026gt;\n    _body = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// email body \u0026lt;/span\u0026gt;\n\n    _debuggable = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// debug mode on or off - default off \u0026lt;/span\u0026gt;\n    _auth = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// smtp authentication - default on \u0026lt;/span\u0026gt;\n\n    _multipart = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeMultipart\u0026lt;/span\u0026gt;(); \n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MailcapCommandMap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mc\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (MailcapCommandMap) CommandMap.getDefaultCommandMap(); \n    mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/html;; x-java-content-handler=com.sun.mail.handlers.text_html\u0026quot;\u0026lt;/span\u0026gt;); \n    mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml\u0026quot;\u0026lt;/span\u0026gt;); \n    mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain\u0026quot;\u0026lt;/span\u0026gt;); \n    mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed\u0026quot;\u0026lt;/span\u0026gt;); \n    mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822\u0026quot;\u0026lt;/span\u0026gt;); \n    CommandMap.setDefaultCommandMap(mc); \n  } \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String user, String pass)\u0026lt;/span\u0026gt; { \n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;(); \n\n    _user = user; \n    _pass = pass; \n  } \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;send\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception { \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;props\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; _setProperties(); \n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(!_user.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) \u0026amp;amp;\u0026amp;amp; !_pass.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) \u0026amp;amp;\u0026amp;amp; _to.length \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; !_from.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) \u0026amp;amp;\u0026amp;amp; !_subject.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) \u0026amp;amp;\u0026amp;amp; !_body.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;)) { \n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Session\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;session\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Session.getInstance(props, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;); \n\n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MimeMessage\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;msg\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeMessage\u0026lt;/span\u0026gt;(session); \n\n      msg.setFrom(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(_from)); \n\n      InternetAddress[] addressTo = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;[_to.length]; \n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; _to.length; i++) { \n        addressTo[i] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(_to[i]); \n      } \n        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); \n\n      msg.setSubject(_subject); \n      msg.setSentDate(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;()); \n\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// setup message body \u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;messageBodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeBodyPart\u0026lt;/span\u0026gt;(); \n      messageBodyPart.setText(_body); \n      _multipart.addBodyPart(messageBodyPart); \n\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Put parts in message \u0026lt;/span\u0026gt;\n      msg.setContent(_multipart); \n\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// send email \u0026lt;/span\u0026gt;\n      Transport.send(msg); \n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;; \n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; { \n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;; \n    } \n  } \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addAttachment\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String filename)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception { \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;messageBodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeBodyPart\u0026lt;/span\u0026gt;(); \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DataSource\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;source\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FileDataSource\u0026lt;/span\u0026gt;(filename); \n    messageBodyPart.setDataHandler(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DataHandler\u0026lt;/span\u0026gt;(source)); \n    messageBodyPart.setFileName(filename); \n\n    _multipart.addBodyPart(messageBodyPart); \n  } \n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt; \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; PasswordAuthentication \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPasswordAuthentication\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PasswordAuthentication\u0026lt;/span\u0026gt;(_user, _pass); \n  } \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Properties \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_setProperties\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;props\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt;(); \n\n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.host\u0026quot;\u0026lt;/span\u0026gt;, _host); \n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(_debuggable) { \n      props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.debug\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;); \n    } \n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(_auth) { \n      props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.auth\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;); \n    } \n\n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.port\u0026quot;\u0026lt;/span\u0026gt;, _port); \n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.port\u0026quot;\u0026lt;/span\u0026gt;, _sport); \n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.class\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;javax.net.ssl.SSLSocketFactory\u0026quot;\u0026lt;/span\u0026gt;); \n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.fallback\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;false\u0026quot;\u0026lt;/span\u0026gt;); \n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; props; \n  } \n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// the getters and setters \u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _body; \n  } \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String _body)\u0026lt;/span\u0026gt; { \n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;._body = _body; \n  }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setTo\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String[] toArr)\u0026lt;/span\u0026gt; {\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO Auto-generated method stub\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;._to=toArr;\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setFrom\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String string)\u0026lt;/span\u0026gt; {\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO Auto-generated method stub\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;._from=string;\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setSubject\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String string)\u0026lt;/span\u0026gt; {\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO Auto-generated method stub\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;._subject=string;\n  }  \n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// more of the getters and setters .. \u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and to call it in an activity...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Bundle icicle)\u0026lt;/span\u0026gt; { \n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onCreate(icicle); \n  setContentView(R.layout.main); \n\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Button\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;addImage\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (Button) findViewById(R.id.send_email); \n  addImage.setOnClickListener(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;View\u0026lt;/span\u0026gt;.OnClickListener() { \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onClick\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(View view)\u0026lt;/span\u0026gt; { \n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;m\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;gmailusername@gmail.com\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;password\u0026quot;\u0026lt;/span\u0026gt;); \n\n      String[] toArr = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bla@bla.com\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;lala@lala.com\u0026quot;\u0026lt;/span\u0026gt;}; \n      m.setTo(toArr); \n      m.setFrom(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wooo@wooo.com\u0026quot;\u0026lt;/span\u0026gt;); \n      m.setSubject(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;This is an email sent using my Mail JavaMail wrapper from an Android device.\u0026quot;\u0026lt;/span\u0026gt;); \n      m.setBody(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Email body.\u0026quot;\u0026lt;/span\u0026gt;); \n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; { \n        m.addAttachment(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/sdcard/filelocation\u0026quot;\u0026lt;/span\u0026gt;); \n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(m.send()) { \n          Toast.makeText(MailApp.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Email was sent successfully.\u0026quot;\u0026lt;/span\u0026gt;, Toast.LENGTH_LONG).show(); \n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; { \n          Toast.makeText(MailApp.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Email was not sent.\u0026quot;\u0026lt;/span\u0026gt;, Toast.LENGTH_LONG).show(); \n        } \n      } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(Exception e) { \n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Toast.makeText(MailApp.this, \u0026quot;There was a problem sending the email.\u0026quot;, Toast.LENGTH_LONG).show(); \u0026lt;/span\u0026gt;\n        Log.e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MailApp\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Could not send email\u0026quot;\u0026lt;/span\u0026gt;, e); \n      } \n    } \n  }); \n} \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;GmailBackground is small library to send an email in background without user interaction :\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;Usage:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    BackgroundMail.newBuilder(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;)\n            .withUsername(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;username@gmail.com\u0026quot;\u0026lt;/span\u0026gt;)\n            .withPassword(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;password12345\u0026quot;\u0026lt;/span\u0026gt;)\n            .withMailto(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;toemail@gmail.com\u0026quot;\u0026lt;/span\u0026gt;)\n            .withType(BackgroundMail.TYPE_PLAIN)\n            .withSubject(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;this is the subject\u0026quot;\u0026lt;/span\u0026gt;)\n            .withBody(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;this is the body\u0026quot;\u0026lt;/span\u0026gt;)\n            .withOnSuccessCallback(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BackgroundMail\u0026lt;/span\u0026gt;.OnSuccessCallback() {\n                \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSuccess\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//do some magic\u0026lt;/span\u0026gt;\n                }\n            })\n            .withOnFailCallback(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BackgroundMail\u0026lt;/span\u0026gt;.OnFailCallback() {\n                \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onFail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//do some magic\u0026lt;/span\u0026gt;\n                }\n            })\n            .send();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Configuration:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;repositories {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n    maven { url \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;https://jitpack.io\u0026quot;\u0026lt;/span\u0026gt; }\n }\n dependencies {\n            compile \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;com.github.yesidlazaro:GmailBackground:1.2.0\u0026apos;\u0026lt;/span\u0026gt;\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Permissions:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.ACCESS_NETWORK_STATE\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.INTERNET\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Also for attachments, you need to set READ_EXTERNAL_STORAGE permission:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.READ_EXTERNAL_STORAGE\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/yesidlazaro/GmailBackground\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Source\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;(I\u0026apos;ve tested it myself)\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Word of warning if using \u0026quot;smtp.gmail.com\u0026quot; as the default smtp server. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Google will force you to change your linked email account password frequently due to their over zealous \u0026quot;suspicious activity\u0026quot; polices. In essence it treats repeated smtp requests from different countries within a short time frame as \u0026quot;suspicious activity\u0026quot;. As they assume you (the email account holder) can only be in one country at a time.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;When google systems detect \u0026quot;suspicious activity\u0026quot; it will prevent further emails until you change the password. As you will have hard coded the password into the app you have to re-release the app each time this happens, not ideal. This happened 3 times in a week to me, I even stored the password on another server and dynamically fetched the password each time google forced me to change it.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So I recommend using one of the many free smtp providers instead of \u0026quot;smtp.gmail.com\u0026quot; to avoid this security problem. Use the same code but change \u0026quot;smtp.gmail.com\u0026quot; to your new smtp forwarding host.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Edit: JavaMail 1.5.5 \u0026lt;a href=\u0026quot;https://java.net/projects/javamail/pages/Android\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;claims to support Android\u0026lt;/a\u0026gt;, so you shouldn\u0026apos;t need anything else.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strike\u0026gt;\nI\u0026apos;ve ported the latest JavaMail (1.5.4) to Android. It\u0026apos;s available in Maven Central, just add the following to \u0026lt;code\u0026gt;build.gradle\u0026lt;/code\u0026gt;~~\u0026lt;/strike\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;strike\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;compile \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;eu.ocathain.com.sun.mail:javax.mail:1.5.4\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can then follow the official \u0026lt;a href=\u0026quot;http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/javamail/javamail.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;tutorial\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Source code is available here: \u0026lt;a href=\u0026quot;https://bitbucket.org/artbristol/javamail-forked-android\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://bitbucket.org/artbristol/javamail-forked-android\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;/strike\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strike\u0026gt;\u0026lt;/strike\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I found a shorter alternative for others who need help. The code is:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; com.example.mail;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Properties;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Message;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.MessagingException;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.PasswordAuthentication;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Session;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Transport;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.InternetAddress;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeMessage;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SendMailTLS\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String[] args)\u0026lt;/span\u0026gt; {\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;username\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;username@gmail.com\u0026quot;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;password\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;password\u0026quot;\u0026lt;/span\u0026gt;;\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;props\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt;();\n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.auth\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;);\n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.starttls.enable\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;);\n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.host\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp.gmail.com\u0026quot;\u0026lt;/span\u0026gt;);\n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.port\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;587\u0026quot;\u0026lt;/span\u0026gt;);\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Session\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;session\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Session.getInstance(props,\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;javax\u0026lt;/span\u0026gt;.mail.Authenticator() {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; PasswordAuthentication \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPasswordAuthentication\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PasswordAuthentication\u0026lt;/span\u0026gt;(username, password);\n            }\n          });\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeMessage\u0026lt;/span\u0026gt;(session);\n            message.setFrom(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;from-email@gmail.com\u0026quot;\u0026lt;/span\u0026gt;));\n            message.setRecipients(Message.RecipientType.TO,\n                InternetAddress.parse(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;to-email@gmail.com\u0026quot;\u0026lt;/span\u0026gt;));\n            message.setSubject(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Testing Subject\u0026quot;\u0026lt;/span\u0026gt;);\n            message.setText(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Dear Mail Crawler,\u0026quot;\u0026lt;/span\u0026gt;\n                + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\\n No spam to my email, please!\u0026quot;\u0026lt;/span\u0026gt;);\n\n            Transport.send(message);\n\n            System.out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Done\u0026quot;\u0026lt;/span\u0026gt;);\n\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (MessagingException e) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(e);\n        }\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Source: \u0026lt;a href=\u0026quot;https://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Sending Email via JavaMail API\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Hope this Helps! Good Luck!\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For sending a mail with attachment..\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SendAttachment\u0026lt;/span\u0026gt;{\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String [] args)\u0026lt;/span\u0026gt;{ \n             \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//to address\u0026lt;/span\u0026gt;\n                    String to=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;abc@abc.com\u0026quot;\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//change accordingly\u0026lt;/span\u0026gt;\n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//from address\u0026lt;/span\u0026gt;\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String user=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;efg@efg.com\u0026quot;\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//change accordingly\u0026lt;/span\u0026gt;\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String password=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;password\u0026quot;\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//change accordingly \u0026lt;/span\u0026gt;\n                     \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MailcapCommandMap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mc\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (MailcapCommandMap) CommandMap.getDefaultCommandMap();\n                   mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/html;; x-java-content-handler=com.sun.mail.handlers.text_html\u0026quot;\u0026lt;/span\u0026gt;);\n                  mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml\u0026quot;\u0026lt;/span\u0026gt;);\n                  mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain\u0026quot;\u0026lt;/span\u0026gt;);\n                  mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed\u0026quot;\u0026lt;/span\u0026gt;);\n                  mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822\u0026quot;\u0026lt;/span\u0026gt;);\n                  CommandMap.setDefaultCommandMap(mc); \n                  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//1) get the session object   \u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;properties\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; System.getProperties();\n                  properties.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.port\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;465\u0026quot;\u0026lt;/span\u0026gt;); \n                  properties.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.host\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp.gmail.com\u0026quot;\u0026lt;/span\u0026gt;);\n                    properties.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.port\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;465\u0026quot;\u0026lt;/span\u0026gt;);\n                    properties.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.class\u0026quot;\u0026lt;/span\u0026gt;,\n                            \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;javax.net.ssl.SSLSocketFactory\u0026quot;\u0026lt;/span\u0026gt;);\n                    properties.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.auth\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;);\n                    properties.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.port\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;465\u0026quot;\u0026lt;/span\u0026gt;);\n\n                  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Session\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;session\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Session.getDefaultInstance(properties,\n                   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;javax\u0026lt;/span\u0026gt;.mail.Authenticator() {\n                   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; PasswordAuthentication \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPasswordAuthentication\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n                   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PasswordAuthentication\u0026lt;/span\u0026gt;(user,password);\n                   }\n                  });\n\n                  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//2) compose message   \u0026lt;/span\u0026gt;\n                  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;{ \n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MimeMessage\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeMessage\u0026lt;/span\u0026gt;(session);\n                    message.setFrom(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(user));\n                    message.addRecipient(Message.RecipientType.TO,\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(to));\n                    message.setSubject(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hii\u0026quot;\u0026lt;/span\u0026gt;); \n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//3) create MimeBodyPart object and set your message content    \u0026lt;/span\u0026gt;\n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;messageBodyPart1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeBodyPart\u0026lt;/span\u0026gt;();\n                    messageBodyPart1.setText(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;How is This\u0026quot;\u0026lt;/span\u0026gt;); \n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//4) create new MimeBodyPart object and set DataHandler object to this object    \u0026lt;/span\u0026gt;\n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MimeBodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;messageBodyPart2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeBodyPart\u0026lt;/span\u0026gt;();\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Location of file to be attached\u0026lt;/span\u0026gt;\n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;filename\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Environment.getExternalStorageDirectory().getPath()+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/R2832.zip\u0026quot;\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//change accordingly\u0026lt;/span\u0026gt;\n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DataSource\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;source\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FileDataSource\u0026lt;/span\u0026gt;(filename);\n                    messageBodyPart2.setDataHandler(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DataHandler\u0026lt;/span\u0026gt;(source));\n                    messageBodyPart2.setFileName(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello\u0026quot;\u0026lt;/span\u0026gt;); \n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//5) create Multipart object and add MimeBodyPart objects to this object    \u0026lt;/span\u0026gt;\n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Multipart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;multipart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeMultipart\u0026lt;/span\u0026gt;();\n                    multipart.addBodyPart(messageBodyPart1);\n                    multipart.addBodyPart(messageBodyPart2); \n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//6) set the multiplart object to the message object\u0026lt;/span\u0026gt;\n                    message.setContent(multipart ); \n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//7) send message \u0026lt;/span\u0026gt;\n                    Transport.send(message); \n                   System.out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MESSAGE SENT....\u0026quot;\u0026lt;/span\u0026gt;);\n                   }\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (MessagingException ex) {ex.printStackTrace();}\n                  }\n                }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Those who are getting \u0026lt;code\u0026gt;ClassDefNotFoundError\u0026lt;/code\u0026gt; try to move that Three jar files to lib folder of your Project,it worked for me!!\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I am unable to run Vinayak B\u0026apos;s code. Finally i solved this issue by following :\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;1.Using this\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;2.Applying AsyncTask.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;3.Changing security issue of sender gmail account.(Change to \u0026quot;TURN ON\u0026quot;) in \u0026lt;a href=\u0026quot;https://www.google.com/settings/security/lesssecureapps\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Did you consider using Apache Commons Net ? Since 3.3, just one jar (and you can depend on it using gradle or maven) and you\u0026apos;re done : \u0026lt;a href=\u0026quot;http://blog.dahanne.net/2013/06/17/sending-a-mail-in-java-and-android-with-apache-commons-net/\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;http://blog.dahanne.net/2013/06/17/sending-a-mail-in-java-and-android-with-apache-commons-net/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Without user intervention, you can send as follows:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Send email from client apk. Here mail.jar, activation.jar is required to send java email. If these jars are added, it might increase the APK Size. \u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Alternatively, You can use a web-service at the server side code, which will use the same mail.jar and activation.jar to send email. You can call the web-service via asynctask and send email. Refer same link. \u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;(But, you will need to know the credentials of the mail account)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In case that you are demanded to keep the jar library as small as possible, you can include the SMTP/POP3/IMAP function separately to avoid the \u0026quot;too many methods in the dex\u0026quot; problem. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can choose the wanted jar libraries from \u0026lt;a href=\u0026quot;https://java.net/projects/javamail/pages/Home\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;the javanet web page\u0026lt;/a\u0026gt;, for example, mailapi.jar + imap.jar can enable you to access icloud, hotmail mail server in IMAP protocol. (with the help of additional.jar and activation.jar)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I tried using the code that @Vinayak B submitted. However I\u0026apos;m getting an error saying: No provider for smtp\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I created a new question for this with more information \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/28693325/sending-email-in-google-glass\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;HERE\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I was able to fix it myself after all. I had to use an other \u0026lt;a href=\u0026quot;http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-eeplat-419426.html#javamail-1.4.7-oth-JPR\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;mail.jar\u0026lt;/a\u0026gt;\nand I had to make sure my \u0026quot;\u0026lt;a href=\u0026quot;https://www.google.com/settings/security/lesssecureapps\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;access for less secure apps\u0026lt;/a\u0026gt;\u0026quot; was turned on.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I hope this helps anyone who has the same problem. With this done, this piece of code works on the google glass too.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;All the code provided in the other answers is correct and is working fine, but a bit messy, so I decided to publish a library (still in development though) to use it in a easier way: \u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/enrichman/androidmail\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;AndroidMail\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You have just to create a MailSender, build a mail and send it (already handled in background with an AsyncTask).\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MailSender\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mailSender\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MailSender\u0026lt;/span\u0026gt;(email, password);\n\nMail.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MailBuilder\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;builder\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt;.MailBuilder();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; builder\n    .setSender(senderMail)\n    .addRecipient(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Recipient\u0026lt;/span\u0026gt;(recipient))\n    .setText(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello\u0026quot;\u0026lt;/span\u0026gt;)\n    .build();\n\nmailSender.sendMail(mail);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can receive a notification for the email sent and it has also the support for different Recipients types (TO, CC and BCC), attachments and html:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MailSender\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mailSender\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MailSender\u0026lt;/span\u0026gt;(email, password);\n\nMail.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MailBuilder\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;builder\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt;.MailBuilder();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; builder\n    .setSender(senderMail)\n    .addRecipient(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Recipient\u0026lt;/span\u0026gt;(recipient))\n    .addRecipient(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Recipient\u0026lt;/span\u0026gt;(Recipient.TYPE.CC, recipientCC))\n    .setText(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello\u0026quot;\u0026lt;/span\u0026gt;)\n    .setHtml(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;h1 style=\\\u0026quot;color:red;\\\u0026quot;\u0026amp;gt;Hello\u0026amp;lt;/h1\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;)\n    .addAttachment(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Attachment\u0026lt;/span\u0026gt;(filePath, fileName))\n    .build();\n\nmailSender.sendMail(mail, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MailSender\u0026lt;/span\u0026gt;.OnMailSentListener() {\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSuccess\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// mail sent!\u0026lt;/span\u0026gt;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onError\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Exception error)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// something bad happened :(\u0026lt;/span\u0026gt;\n    }\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can get it via Gradle or Maven:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;compile \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;it.enricocandino:androidmail:1.0.0-SNAPSHOT\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Please let me know if you have any issue with it! :)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here are a lot solutions. However I think we must change the configuration of the GMail to allow accessing from less secure devices. Go to the link below and enable it. It works for me\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://myaccount.google.com/lesssecureapps?pli=1\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://myaccount.google.com/lesssecureapps?pli=1\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Sending email programmatically with Kotlin.\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;simple email sending, not all the other features (like attachments).\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;TLS is always on\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Only 1 gradle email dependency needed also.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;I also found this list of email POP services really helpful:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://support.office.com/en-gb/article/pop-and-imap-email-settings-for-outlook-8361e398-8af4-4e97-b147-6c6c4ac95353\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://support.office.com/en-gb/article/pop-and-imap-email-settings-for-outlook-8361e398-8af4-4e97-b147-6c6c4ac95353\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;How to use:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;auth\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; EmailService.UserPassAuthenticator(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;you@gmail.com\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;yourPassword\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;to\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; listOf(InternetAddress(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;to@email.com\u0026quot;\u0026lt;/span\u0026gt;))\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; InternetAddress(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;you@gmail.com\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;email\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; EmailService.Email(auth, to, from, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Test Subject\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello Body World\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;emailService\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; EmailService(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp.gmail.com\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;465\u0026lt;/span\u0026gt;)\n    \n    GlobalScope.launch { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// or however you do background threads\u0026lt;/span\u0026gt;\n        emailService.send(email)\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.*\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.*\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.InternetAddress\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeBodyPart\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeMessage\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeMultipart\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;EmailService\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; val server: String, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; val port: Int) {\n\n    data \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Email\u0026lt;/span\u0026gt;(\n        val auth: Authenticator,\n        val toList: List\u0026amp;lt;InternetAddress\u0026amp;gt;,\n        val from: Address,\n        val subject: String,\n        val body: String\n    )\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;UserPassAuthenticator\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; val username: String, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; val password: String) : Authenticator() {\n        override fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPasswordAuthentication\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;: PasswordAuthentication {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; PasswordAuthentication(username, password)\n        }\n    }\n\n    fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;send\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(email: Email)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;props\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Properties()\n        props[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.auth\u0026quot;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n        props[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.user\u0026quot;\u0026lt;/span\u0026gt;] = email.from\n        props[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.host\u0026quot;\u0026lt;/span\u0026gt;] = server\n        props[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.port\u0026quot;\u0026lt;/span\u0026gt;] = port\n        props[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.starttls.enable\u0026quot;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n        props[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.ssl.trust\u0026quot;\u0026lt;/span\u0026gt;] = server\n        props[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.mime.charset\u0026quot;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UTF-8\u0026quot;\u0026lt;/span\u0026gt;\n        val msg: Message = MimeMessage(Session.getDefaultInstance(props, email.auth))\n        msg.setFrom(email.from)\n        msg.sentDate = Calendar.getInstance().time\n        msg.setRecipients(Message.RecipientType.TO, email.toList.toTypedArray())\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      msg.setRecipients(Message.RecipientType.CC, email.ccList.toTypedArray())\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      msg.setRecipients(Message.RecipientType.BCC, email.bccList.toTypedArray())\u0026lt;/span\u0026gt;\n        msg.replyTo = arrayOf(email.from)\n\n        msg.addHeader(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;X-Mailer\u0026quot;\u0026lt;/span\u0026gt;, CLIENT_NAME)\n        msg.addHeader(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Precedence\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bulk\u0026quot;\u0026lt;/span\u0026gt;)\n        msg.subject = email.subject\n\n        msg.setContent(MimeMultipart().apply {\n            addBodyPart(MimeBodyPart().apply {\n                setText(email.body, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;iso-8859-1\u0026quot;\u0026lt;/span\u0026gt;)\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//setContent(email.htmlBody, \u0026quot;text/html; charset=UTF-8\u0026quot;)\u0026lt;/span\u0026gt;\n            })\n        })\n        Transport.send(msg)\n    }\n\n    companion object {\n        const \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;CLIENT_NAME\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Android StackOverflow programmatic email\u0026quot;\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Gradle:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;dependencies {\n    implementation \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;com.sun.mail:android-mail:1.6.4\u0026apos;\u0026lt;/span\u0026gt;\n    implementation \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.3\u0026quot;\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;AndroidManifest:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.INTERNET\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt; Add jar files mail.jar,activation.jar,additionnal.jar\n\n String sub=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Thank you for your online registration\u0026quot;\u0026lt;/span\u0026gt; ; \n \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;m\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;emailid\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;password\u0026quot;\u0026lt;/span\u0026gt;); \n\n String[] toArr = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ekkatrainfo@gmail.com\u0026quot;\u0026lt;/span\u0026gt;,sEmailId};\n m.setFrom(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ekkatrainfo@gmail.com\u0026quot;\u0026lt;/span\u0026gt;); \n\n     m.setTo(toArr);\n     m.setSubject(sub);\n    m.setBody(msg);\n\n\n\n                     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;{\n\n\n                            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(m.send()) { \n\n                            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; { \n\n                            } \n                          } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(Exception e) { \n\n                            Log.e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MailApp\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Could not send email\u0026quot;\u0026lt;/span\u0026gt;, e); \n                          } \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; com.example.ekktra;\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Date;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Properties;\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.CommandMap;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.DataHandler;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.DataSource;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.FileDataSource;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.MailcapCommandMap;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.BodyPart;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Multipart;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.PasswordAuthentication;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Session;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.Transport;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.InternetAddress;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeBodyPart;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeMessage;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.MimeMultipart;\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;javax\u0026lt;/span\u0026gt;.mail.Authenticator { \n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _user; \n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _pass; \n\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String[] _to; \n\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _from; \n\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _port; \n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _sport; \n\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _host; \n\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _subject; \n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String _body; \n\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; _auth; \n\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; _debuggable; \n\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Multipart _multipart; \n\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { \n      _host = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp.gmail.com\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// default smtp server \u0026lt;/span\u0026gt;\n      _port = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;465\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// default smtp port \u0026lt;/span\u0026gt;\n      _sport = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;465\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// default socketfactory port \u0026lt;/span\u0026gt;\n\n      _user = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// username \u0026lt;/span\u0026gt;\n      _pass = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// password \u0026lt;/span\u0026gt;\n      _from = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// email sent from \u0026lt;/span\u0026gt;\n      _subject = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// email subject \u0026lt;/span\u0026gt;\n      _body = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// email body \u0026lt;/span\u0026gt;\n\n      _debuggable = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// debug mode on or off - default off \u0026lt;/span\u0026gt;\n      _auth = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// smtp authentication - default on \u0026lt;/span\u0026gt;\n\n      _multipart = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeMultipart\u0026lt;/span\u0026gt;(); \n\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// There is something wrong with MailCap, javamail can not find a handler for the        multipart/mixed part, so this bit needs to be added. \u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MailcapCommandMap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mc\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (MailcapCommandMap) CommandMap.getDefaultCommandMap(); \n   mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/html;; x-java-content-handler=com.sun.mail.handlers.text_html\u0026quot;\u0026lt;/span\u0026gt;); \n   mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml\u0026quot;\u0026lt;/span\u0026gt;); \n   mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain;; x-java-content-  handler=com.sun.mail.handlers.text_plain\u0026quot;\u0026lt;/span\u0026gt;); \n   mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed\u0026quot;\u0026lt;/span\u0026gt;); \n   mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;message/rfc822;; x-java-content- handler=com.sun.mail.handlers.message_rfc822\u0026quot;\u0026lt;/span\u0026gt;); \n    CommandMap.setDefaultCommandMap(mc); \n   } \n\n \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Mail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String user, String pass)\u0026lt;/span\u0026gt; { \n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;(); \n\n  _user = user; \n   _pass = pass; \n } \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;send\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception { \n   \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;props\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; _setProperties(); \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(!_user.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) \u0026amp;amp;\u0026amp;amp; !_pass.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) \u0026amp;amp;\u0026amp;amp; _to.length \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; !_from.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) \u0026amp;amp;\u0026amp;amp;   !_subject.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\u0026amp;amp;\u0026amp;amp; !_body.equals(\u0026quot;\u0026quot;)*/\u0026lt;/span\u0026gt;) { \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Session\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;session\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Session.getInstance(props, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;); \n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MimeMessage\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;msg\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeMessage\u0026lt;/span\u0026gt;(session); \n\n     msg.setFrom(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(_from)); \n\n    InternetAddress[] addressTo = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;[_to.length]; \n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; _to.length; i++) { \n      addressTo[i] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InternetAddress\u0026lt;/span\u0026gt;(_to[i]); \n    } \n      msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); \n\n    msg.setSubject(_subject); \n    msg.setSentDate(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;()); \n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// setup message body \u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;messageBodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeBodyPart\u0026lt;/span\u0026gt;(); \n    messageBodyPart.setText(_body); \n    _multipart.addBodyPart(messageBodyPart); \n\n     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Put parts in message \u0026lt;/span\u0026gt;\n    msg.setContent(_multipart); \n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// send email \u0026lt;/span\u0026gt;\n    Transport.send(msg); \n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;; \n   } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; { \n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;; \n   } \n  } \n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addAttachment\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String filename)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception { \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;messageBodyPart\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MimeBodyPart\u0026lt;/span\u0026gt;(); \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DataSource\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;source\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FileDataSource\u0026lt;/span\u0026gt;(filename); \n      messageBodyPart.setDataHandler(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DataHandler\u0026lt;/span\u0026gt;(source)); \n    messageBodyPart.setFileName(filename); \n\n   _multipart.addBodyPart(messageBodyPart); \n } \n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt; \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; PasswordAuthentication \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPasswordAuthentication\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { \n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PasswordAuthentication\u0026lt;/span\u0026gt;(_user, _pass); \n  } \n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Properties \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_setProperties\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { \n   \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;props\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Properties\u0026lt;/span\u0026gt;(); \n\n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.host\u0026quot;\u0026lt;/span\u0026gt;, _host); \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(_debuggable) { \n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.debug\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;); \n  } \n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(_auth) { \n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.auth\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;); \n   } \n\n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.port\u0026quot;\u0026lt;/span\u0026gt;, _port); \n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.port\u0026quot;\u0026lt;/span\u0026gt;, _sport); \n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.class\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;javax.net.ssl.SSLSocketFactory\u0026quot;\u0026lt;/span\u0026gt;); \n    props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.socketFactory.fallback\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;false\u0026quot;\u0026lt;/span\u0026gt;); \n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; props; \n   } \n\n   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// the getters and setters \u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { \n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _body; \n } \n\n \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String _body)\u0026lt;/span\u0026gt; { \n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;._body = _body; \n }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setTo\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String[] toArr)\u0026lt;/span\u0026gt; {\n     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO Auto-generated method stub\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;._to=toArr;\n }\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setFrom\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String string)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO Auto-generated method stub\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;._from=string;\n}\n\n \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setSubject\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String string)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO Auto-generated method stub\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;._subject=string;\n  }  \n\n\n   }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For those who want to use JavaMail with Kotlin in 2020:\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;First: Add these dependencies to your build.gradle file (official JavaMail Maven Dependencies)\u0026lt;/h2\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;implementation \u0026apos;com.sun.mail:android-mail:1.6.5\u0026apos;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;implementation \u0026apos;com.sun.mail:android-activation:1.6.5\u0026apos;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;implementation \u0026quot;org.bouncycastle:bcmail-jdk15on:1.65\u0026quot;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;implementation \u0026quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.7\u0026quot;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;implementation \u0026quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.7\u0026quot;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;BouncyCastle is for security reasons.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Second: Add these permissions to your AndroidManifest.xml\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.INTERNET\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.ACCESS_NETWORK_STATE\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Third: When using SMTP, create a Config file\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;object Config {\n    const \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;EMAIL_FROM\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;You_Sender_Email@email.com\u0026quot;\u0026lt;/span\u0026gt;\n    const \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;PASS_FROM\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Your_Sender_Password\u0026quot;\u0026lt;/span\u0026gt;\n\n    const \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;EMAIL_TO\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Your_Destination_Email@email.com\u0026quot;\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Fourth: Create your Mailer Object\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;object Mailer {\n\ninit {\n    Security.addProvider(BouncyCastleProvider())\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;props\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;: Properties = Properties().also {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Smtp server\u0026lt;/span\u0026gt;\n        it[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.host\u0026quot;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp.gmail.com\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Change when necessary\u0026lt;/span\u0026gt;\n        it[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.auth\u0026quot;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n        it[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.port\u0026quot;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;465\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Easy and fast way to enable ssl in JavaMail\u0026lt;/span\u0026gt;\n        it[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.ssl.enable\u0026quot;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\n    }\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Dont ever use \u0026quot;getDefaultInstance\u0026quot; like other examples do!\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;session\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(emailFrom: String, emailPass: String)\u0026lt;/span\u0026gt;: Session = Session.getInstance(props(), object : Authenticator() {\n    override fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPasswordAuthentication\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;: PasswordAuthentication {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; PasswordAuthentication(emailFrom, emailPass)\n    }\n})\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;builtMessage\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(firstName: String, surName: String)\u0026lt;/span\u0026gt;: String {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;\n            \u0026amp;lt;b\u0026amp;gt;Name:\u0026amp;lt;/b\u0026amp;gt; $firstName  \u0026amp;lt;br/\u0026amp;gt;\n            \u0026amp;lt;b\u0026amp;gt;Surname:\u0026amp;lt;/b\u0026amp;gt; $surName \u0026amp;lt;br/\u0026amp;gt;\n        \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;.trimIndent()\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;builtSubject\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(issue: String, firstName: String, surName: String)\u0026lt;/span\u0026gt;:String {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;\n            $issue | $firstName, $surName\n        \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;.trimIndent()\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sendMessageTo\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(emailFrom: String, session: Session, message: String, subject: String)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        MimeMessage(session).let { mime -\u0026amp;gt;\n            mime.setFrom(InternetAddress(emailFrom))\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Adding receiver\u0026lt;/span\u0026gt;\n            mime.addRecipient(Message.RecipientType.TO, InternetAddress(Config.EMAIL_TO))\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Adding subject\u0026lt;/span\u0026gt;\n            mime.subject = subject\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Adding message\u0026lt;/span\u0026gt;\n            mime.setText(message)\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Set Content of Message to Html if needed\u0026lt;/span\u0026gt;\n            mime.setContent(message, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/html\u0026quot;\u0026lt;/span\u0026gt;)\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// send mail\u0026lt;/span\u0026gt;\n            Transport.send(mime)\n        }\n\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (e: MessagingException) {\n        Log.e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Or use timber, it really doesn\u0026apos;t matter\u0026lt;/span\u0026gt;\n    }\n}\n\nfun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sendMail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(firstName: String, surName: String)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Open a session\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;session\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; session(Config.EMAIL_FROM, Config.PASSWORD_FROM)\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Create a message\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; builtMessage(firstName, surName)\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Create subject\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;subject\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; builtSubject(firstName, surName)\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Send Email\u0026lt;/span\u0026gt;\n        CoroutineScope(Dispatchers.IO).launch { sendMessageTo(Config.EMAIL_FROM, session, message, subject) }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Note\u0026lt;/h2\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;If you want a more secure way to send your email (and you want a more secure way!), use http as mentioned in the solutions before (I will maybe add it later in this answer)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;You have to properly check, if the users phone has internet access, otherwise the app will crash.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;When using gmail, enable \u0026quot;less secure apps\u0026quot; (this will not work, when you gmail has two factors enabled) \u0026lt;a href=\u0026quot;https://myaccount.google.com/lesssecureapps?pli=1\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://myaccount.google.com/lesssecureapps?pli=1\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Some credits belong to: \u0026lt;a href=\u0026quot;https://medium.com/@chetan.garg36/android-send-mails-not-intent-642d2a71d2ee\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://medium.com/@chetan.garg36/android-send-mails-not-intent-642d2a71d2ee\u0026lt;/a\u0026gt; (he used RxJava for his solution)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; io.formics.tourguide\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.annotation.SuppressLint\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.content.Intent\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.net.Credentials\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.net.Uri\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; androidx.appcompat.app.AppCompatActivity\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.os.Bundle\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.util.Log\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.widget.Toast\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; kotlinx.android.synthetic.main.activity_feedback.*\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; org.jetbrains.annotations.Async\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.lang.Exception\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Properties;\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.DataHandler;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.activation.FileDataSource\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.*\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.mail.internet.*\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FeedbackActivity\u0026lt;/span\u0026gt; : AppCompatActivity()  {\n  \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;props\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Properties()\n\n\n    override fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(savedInstanceState: Bundle?)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_feedback)\n\n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.auth\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;);\n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.starttls.enable\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;);\n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.host\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;smtp.gmail.com\u0026quot;\u0026lt;/span\u0026gt;);\n        props.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;mail.smtp.port\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;587\u0026quot;\u0026lt;/span\u0026gt;);\n\n        btnSendEmail.setOnClickListener {\n            Thread {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n                    sendEmail()\n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Your implementation\u0026lt;/span\u0026gt;\n                } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (ex: Exception) {\n                    ex.printStackTrace()\n                }\n            }.start()\n\n\n        }\n    }\n\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sendEmail\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n\n\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;session\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Session.getInstance(props,\n                object : javax.mail.Authenticator() {\n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Authenticating the password\u0026lt;/span\u0026gt;\n                    override fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPasswordAuthentication\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;: javax.mail.PasswordAuthentication {\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; PasswordAuthentication(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;abc@xyz.com\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;password\u0026quot;\u0026lt;/span\u0026gt;)\n                    }\n                })\n\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; MimeMessage(session);\n            message.setFrom(InternetAddress(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;abc@xyz.com\u0026quot;\u0026lt;/span\u0026gt;));\n            message.setRecipients(\n                Message.RecipientType.TO,\n                InternetAddress.parse(editCC.text.toString())\n            )\n            message.subject = editSubject.text.toString()\n            message.setText(\n                \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Dear Mail Crawler,\u0026quot;\u0026lt;/span\u0026gt;\n                        + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\\n No spam to my email, please!\u0026quot;\u0026lt;/span\u0026gt;\n            );\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//val messageBodyPart = MimeBodyPart();\u0026lt;/span\u0026gt;\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//val multipart = MimeMultipart();\u0026lt;/span\u0026gt;\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//val file = \u0026quot;path of file to be attached\u0026quot;;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//            val fileName = \u0026quot;attachmentName\u0026quot;\u0026lt;/span\u0026gt;\n           \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// val source = FileDataSource(file);\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//messageBodyPart.setDataHandler(DataHandler(source));\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//messageBodyPart.setFileName(fileName);\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//multipart.addBodyPart(messageBodyPart);\u0026lt;/span\u0026gt;\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//message.setContent(multipart);\u0026lt;/span\u0026gt;\n\n            Transport.send(message);\n            System.out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Done\u0026quot;\u0026lt;/span\u0026gt;);\n\n\n\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (e: MessagingException) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt;  RuntimeException(e);\n        }\n\n           }\n}\n\n\n\n\n \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To add attachment, don\u0026apos;t forget to add. \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;MailcapCommandMap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mc\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (MailcapCommandMap) CommandMap\n            .getDefaultCommandMap();\n    mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/html;; x-java-content-handler=com.sun.mail.handlers.text_html\u0026quot;\u0026lt;/span\u0026gt;);\n    mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml\u0026quot;\u0026lt;/span\u0026gt;);\n    mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain\u0026quot;\u0026lt;/span\u0026gt;);\n    mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed\u0026quot;\u0026lt;/span\u0026gt;);\n    mc.addMailcap(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822\u0026quot;\u0026lt;/span\u0026gt;);\n    CommandMap.setDefaultCommandMap(mc);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":408,"title":"Sending Email in Android using JavaMail API without using the default/built-in app","content":"\n                \n\u0026lt;p\u0026gt;I am trying to create a mail sending application in Android. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If I use: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;emailIntent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt;(android.content.Intent.ACTION_SEND);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This will launch the built-in Android application; I\u0026apos;m trying to send the mail on button click directly \u0026lt;strong\u0026gt;without\u0026lt;/strong\u0026gt; using this application.\u0026lt;/p\u0026gt;\n    ","slug":"sending-email-in-android-using-javamail-api-without-using-the-defaultbuilt-in-app-1657387883400","postType":"QUESTION","createdAt":"2022-07-09T17:31:23.000Z","updatedAt":"2022-07-09T17:31:23.000Z","tags":[{"id":2182,"name":"jakarta-mail","slug":"jakarta-mail","createdAt":"2022-07-09T17:31:23.000Z","updatedAt":"2022-07-09T17:31:23.000Z","Questions_Tags":{"questionId":408,"tagId":2182}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"sending-email-in-android-using-javamail-api-without-using-the-defaultbuilt-in-app-1657387883400"},"buildId":"6_hwtyf_oFlFS5l_S4CTe","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>