<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-096e453de8a27667.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-e3d1b60e109d3ba1.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_buildManifest.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.hFcsiD code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-6e32c308-0"]{content:"hFcsiD,"}/*!sc*/
.ljvTUN .comment-item .comment-body .d-inline-flex.ai-center{text-align:right;}/*!sc*/
.ljvTUN .comment-item .comment-body .comment-date{float:right;}/*!sc*/
data-styled.g6[id="sc-6e32c308-1"]{content:"ljvTUN,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/is-there-any-way-to-kill-a-thread-1657387859831#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-6e32c308-0 hFcsiD flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/is-there-any-way-to-kill-a-thread-1657387859831">Is there any way to kill a Thread?</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/kill">kill</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/terminate">terminate</a></div></div><div class="question-content mt-5">
                
<p>Is it possible to terminate a running thread without setting/checking any flags/semaphores/etc.?</p>
    </div></div></div><div class="sc-6e32c308-1 ljvTUN flex text-xs pl-10 flex-col comment items-center justify-center"><h4 class="text-left mt-10 text-lg font-semibold">Comments</h4><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">@Bluebird75: Furthermore, I'm not sure I get the argument that threads should not be killed abruptly "because the thread might be holding a critical resource that must be closed properly": this is also true from a main program, and main programs can be killed abruptly by the user (Ctrl-C in Unix, for instance)in which case they try to handle this possibility as nicely as possible.  So, I fail to see what is special with threads, and why they should not receive the same treatment as main programs (namely that they can be killed abruptly). :)  Could you elaborate on this?</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/42973/eric-o-lebigot" title="86,963 reputation" class="comment-user">Eric O Lebigot</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment7925419_325528"><span title="2011-07-14 16:53:10Z, License: CC BY-SA 3.0" class="relativetime-clean">Jul 14, 2011 at 16:53</span></a></span>
                        <span title="this comment was edited 1 time">
                            <svg aria-hidden="true" class="va-text-bottom o50 svg-icon iconPencilSm" width="14" height="14" viewBox="0 0 14 14"><path d="m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z"></path></svg>
                        </span>
            </div>
        </div><span class="divide-x-8 "></span><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">@EOL: On the other hand, if all the resources that the thread is owning are local resources (open files, sockets), Linux is reasonably good at the process cleanup and this does not leak. I had cases though where I created a server using socket, and if I do a brutal interruption with Ctrl-C, I can non longer launch the program because it can not binds the socket. I need to wait 5 minutes. Proper solution was to catch Ctrl-C and do clean socket deconnection.</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/13618/philippe-f" title="11,248 reputation" class="comment-user">Philippe F</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment8229180_325528"><span title="2011-08-02 09:45:03Z, License: CC BY-SA 3.0" class="relativetime-clean">Aug 2, 2011 at 9:45</span></a></span>
                        <span title="this comment was edited 1 time">
                            <svg aria-hidden="true" class="va-text-bottom o50 svg-icon iconPencilSm" width="14" height="14" viewBox="0 0 14 14"><path d="m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z"></path></svg>
                        </span>
            </div>
        </div><span class="divide-x-8 "></span><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">@Bluebird75: btw. you can use <code>SO_REUSEADDR</code> socket option to avoid <code>Address already in use</code> error.</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/196206/messa" title="23,038 reputation" class="comment-user">Messa</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment8905923_325528"><span title="2011-09-11 09:09:55Z, License: CC BY-SA 3.0" class="relativetime-clean">Sep 11, 2011 at 9:09</span></a></span>
                        <span title="this comment was edited 1 time">
                            <svg aria-hidden="true" class="va-text-bottom o50 svg-icon iconPencilSm" width="14" height="14" viewBox="0 0 14 14"><path d="m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z"></path></svg>
                        </span>
            </div>
        </div><span class="divide-x-8 "></span><button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">See more</button></div><div class="sc-6e32c308-2 bFXWFO"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It is generally a bad pattern to kill a thread abruptly, in Python, and in any language. Think of the following cases:</p>
<ul>
<li>the thread is holding a critical resource that must be closed properly</li>
<li>the thread has created several other threads that must be killed as well.</li>
</ul>
<p>The nice way of handling this, if you can afford it (if you are managing your own threads), is to have an exit_request flag that each thread checks on a regular interval to see if it is time for it to exit.</p>
<p><strong>For example:</strong></p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> threading

<span class="hljs-keyword">class</span> <span class="hljs-title class_">StoppableThread</span>(threading.Thread):
    <span class="hljs-string">"""Thread class with a stop() method. The thread itself has to check
    regularly for the stopped() condition."""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,  *args, **kwargs</span>):
        <span class="hljs-built_in">super</span>(StoppableThread, self).__init__(*args, **kwargs)
        self._stop_event = threading.Event()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">stop</span>(<span class="hljs-params">self</span>):
        self._stop_event.<span class="hljs-built_in">set</span>()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">stopped</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self._stop_event.is_set()
</code></pre>
<p>In this code, you should call <code>stop()</code> on the thread when you want it to exit, and wait for the thread to exit properly using <code>join()</code>. The thread should check the stop flag at regular intervals.</p>
<p>There are cases, however, when you really need to kill a thread. An example is when you are wrapping an external library that is busy for long calls, and you want to interrupt it.</p>
<p>The following code allows (with some restrictions) to raise an Exception in a Python thread:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_async_raise</span>(<span class="hljs-params">tid, exctype</span>):
    <span class="hljs-string">'''Raises an exception in the threads with id tid'''</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> inspect.isclass(exctype):
        <span class="hljs-keyword">raise</span> TypeError(<span class="hljs-string">"Only types can be raised (not instances)"</span>)
    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(tid),
                                                     ctypes.py_object(exctype))
    <span class="hljs-keyword">if</span> res == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"invalid thread id"</span>)
    <span class="hljs-keyword">elif</span> res != <span class="hljs-number">1</span>:
        <span class="hljs-comment"># "if it returns a number greater than one, you're in trouble,</span>
        <span class="hljs-comment"># and you should call it again with exc=NULL to revert the effect"</span>
        ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(tid), <span class="hljs-literal">None</span>)
        <span class="hljs-keyword">raise</span> SystemError(<span class="hljs-string">"PyThreadState_SetAsyncExc failed"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadWithExc</span>(threading.Thread):
    <span class="hljs-string">'''A thread class that supports raising an exception in the thread from
       another thread.
    '''</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_my_tid</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""determines this (self's) thread id

        CAREFUL: this function is executed in the context of the caller
        thread, to get the identity of the thread represented by this
        instance.
        """</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.isAlive():
            <span class="hljs-keyword">raise</span> threading.ThreadError(<span class="hljs-string">"the thread is not active"</span>)

        <span class="hljs-comment"># do we have it cached?</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(self, <span class="hljs-string">"_thread_id"</span>):
            <span class="hljs-keyword">return</span> self._thread_id

        <span class="hljs-comment"># no, look for it in the _active dict</span>
        <span class="hljs-keyword">for</span> tid, tobj <span class="hljs-keyword">in</span> threading._active.items():
            <span class="hljs-keyword">if</span> tobj <span class="hljs-keyword">is</span> self:
                self._thread_id = tid
                <span class="hljs-keyword">return</span> tid

        <span class="hljs-comment"># <span class="hljs-doctag">TODO:</span> in python 2.6, there's a simpler way to do: self.ident</span>

        <span class="hljs-keyword">raise</span> AssertionError(<span class="hljs-string">"could not determine the thread's id"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">raiseExc</span>(<span class="hljs-params">self, exctype</span>):
        <span class="hljs-string">"""Raises the given exception type in the context of this thread.

        If the thread is busy in a system call (time.sleep(),
        socket.accept(), ...), the exception is simply ignored.

        If you are sure that your exception should terminate the thread,
        one way to ensure that it works is:

            t = ThreadWithExc( ... )
            ...
            t.raiseExc( SomeException )
            while t.isAlive():
                time.sleep( 0.1 )
                t.raiseExc( SomeException )

        If the exception is to be caught by the thread, you need a way to
        check that your thread has caught it.

        CAREFUL: this function is executed in the context of the
        caller thread, to raise an exception in the context of the
        thread represented by this instance.
        """</span>
        _async_raise( self._get_my_tid(), exctype )
</code></pre>
<p>(Based on <a href="http://tomerfiliba.com/recipes/Thread2/" rel="noreferrer">Killable Threads</a> by Tomer Filiba. The quote about the return value of <code>PyThreadState_SetAsyncExc</code> appears to be from an <a href="https://svn.python.org/projects/stackless/Python-2.4.3/dev/Python/pystate.c" rel="noreferrer">old version of Python</a>.)</p>
<p>As noted in the documentation, this is not a magic bullet because if the thread is busy outside the Python interpreter, it will not catch the interruption.</p>
<p>A good usage pattern of this code is to have the thread catch a specific exception and perform the cleanup. That way, you can interrupt a task and still have proper cleanup.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A <a href="https://docs.python.org/library/multiprocessing.html#multiprocessing.Process" rel="noreferrer"><code>multiprocessing.Process</code></a> can <a href="https://docs.python.org/library/multiprocessing.html#multiprocessing.Process.terminate" rel="noreferrer"><code>p.terminate()</code></a></p>
<p>In the cases where I want to kill a thread, but do not want to use flags/locks/signals/semaphores/events/whatever, I promote the threads to full blown processes. For code that makes use of just a few threads the overhead is not that bad.</p>
<p>E.g. this comes in handy to easily terminate helper "threads" which execute blocking I/O</p>
<p>The conversion is trivial: In related code replace all <code>threading.Thread</code> with <code>multiprocessing.Process</code> and all <code>queue.Queue</code> with <code>multiprocessing.Queue</code> and add the required calls of <code>p.terminate()</code> to your parent process which wants to kill its child <code>p</code></p>
<p>See the <a href="https://docs.python.org/library/multiprocessing.html" rel="noreferrer">Python documentation for <code>multiprocessing</code></a>.</p>
<p>Example:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> multiprocessing
proc = multiprocessing.Process(target=your_proc_function, args=())
proc.start()
<span class="hljs-comment"># Terminate the process</span>
proc.terminate()  <span class="hljs-comment"># sends a SIGTERM</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There is no official API to do that, no.</p>

<p>You need to use platform API to kill the thread, e.g. pthread_kill, or TerminateThread. You can access such API e.g. through pythonwin, or through ctypes.</p>

<p>Notice that this is inherently unsafe. It will likely lead to uncollectable garbage (from local variables of the stack frames that become garbage), and may lead to deadlocks, if the thread being killed has the GIL at the point when it is killed.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are trying to terminate the whole program you can set the thread as a "daemon". see
<a href="http://docs.python.org/library/threading.html#threading.Thread.daemon" rel="noreferrer">Thread.daemon</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As others have mentioned, the norm is to set a stop flag. For something lightweight (no subclassing of Thread, no global variable), a lambda callback is an option. (Note the parentheses in <code>if stop()</code>.)</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">def</span> <span class="hljs-title function_">do_work</span>(<span class="hljs-params"><span class="hljs-built_in">id</span>, stop</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am thread"</span>, <span class="hljs-built_in">id</span>)
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"I am thread {} doing something"</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">id</span>))
        <span class="hljs-keyword">if</span> stop():
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"  Exiting loop."</span>)
            <span class="hljs-keyword">break</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Thread {}, signing off"</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">id</span>))


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    stop_threads = <span class="hljs-literal">False</span>
    workers = []
    <span class="hljs-keyword">for</span> <span class="hljs-built_in">id</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>):
        tmp = threading.Thread(target=do_work, args=(<span class="hljs-built_in">id</span>, <span class="hljs-keyword">lambda</span>: stop_threads))
        workers.append(tmp)
        tmp.start()
    time.sleep(<span class="hljs-number">3</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'main: done sleeping; time to stop the threads.'</span>)
    stop_threads = <span class="hljs-literal">True</span>
    <span class="hljs-keyword">for</span> worker <span class="hljs-keyword">in</span> workers:
        worker.join()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'Finis.'</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    main()
</code></pre>

<p>Replacing <code>print()</code> with a <code>pr()</code> function that always flushes (<code>sys.stdout.flush()</code>) may improve the precision of the shell output.</p>

<p>(Only tested on Windows/Eclipse/Python3.3)</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In Python, you simply cannot kill a Thread directly.</p>

<p>If you do NOT really need to have a Thread (!), what you can do, instead of using the <a href="http://docs.python.org/2/library/threading.html" rel="noreferrer"><em>threading</em> package </a>, is to use the 
<a href="http://docs.python.org/2/library/multiprocessing.html" rel="noreferrer"><em>multiprocessing</em> package </a>. Here, to kill a process, you can simply call the method:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">yourProcess.terminate()  <span class="hljs-comment"># kill the process!</span>
</code></pre>

<p>Python will kill your process (on Unix through the SIGTERM signal, while on Windows through the <code>TerminateProcess()</code> call). Pay attention to use it while using a Queue or a Pipe! (it may corrupt the data in the Queue/Pipe)</p>

<p>Note that the <code>multiprocessing.Event</code> and the <code>multiprocessing.Semaphore</code> work exactly in the same way of the <code>threading.Event</code> and the <code>threading.Semaphore</code> respectively. In fact, the first ones are clones of the latters.</p>

<p>If you REALLY need to use a Thread, there is no way to kill it directly. What you can do, however, is to use a <em>"daemon thread"</em>. In fact, in Python, a Thread can be flagged as <em>daemon</em>:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">yourThread.daemon = <span class="hljs-literal">True</span>  <span class="hljs-comment"># set the Thread as a "daemon thread"</span>
</code></pre>

<p>The main program will exit when no alive non-daemon threads are left. In other words, when your main thread (which is, of course, a non-daemon thread) will finish its operations, the program will exit even if there are still some daemon threads working.</p>

<p>Note that it is necessary to set a Thread as <code>daemon</code> before the <code>start()</code> method is called!</p>

<p>Of course you can, and should, use <code>daemon</code> even with <code>multiprocessing</code>. Here, when the main process exits, it attempts to terminate all of its daemonic child processes.</p>

<p>Finally, please, note that <code>sys.exit()</code> and <code>os.kill()</code> are not choices.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is based on the <a href="https://web.archive.org/web/20100514180958id_/http://code.activestate.com:80/recipes/496960-thread2-killable-threads/?in=lang-python" rel="nofollow noreferrer">thread2 -- killable threads</a> ActiveState recipe.</p>
<p>You need to call <a href="https://docs.python.org/3/c-api/init.html#c.PyThreadState_SetAsyncExc" rel="nofollow noreferrer"><code>PyThreadState_SetAsyncExc()</code></a>, which is only available through the <a href="https://docs.python.org/3/library/ctypes.html#module-ctypes" rel="nofollow noreferrer"><code>ctypes</code></a> module.</p>
<p>This has only been tested on Python 2.7.3, but it is likely to work with other recent 2.x releases. <code>PyThreadState_SetAsyncExc()</code> still exists in Python 3 for backwards compatibility (but I have not tested it).</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> ctypes

<span class="hljs-keyword">def</span> <span class="hljs-title function_">terminate_thread</span>(<span class="hljs-params">thread</span>):
    <span class="hljs-string">"""Terminates a python thread from another thread.

    :param thread: a threading.Thread instance
    """</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> thread.isAlive():
        <span class="hljs-keyword">return</span>

    exc = ctypes.py_object(SystemExit)
    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(
        ctypes.c_long(thread.ident), exc)
    <span class="hljs-keyword">if</span> res == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"nonexistent thread id"</span>)
    <span class="hljs-keyword">elif</span> res &gt; <span class="hljs-number">1</span>:
        <span class="hljs-comment"># """if it returns a number greater than one, you're in trouble,</span>
        <span class="hljs-comment"># and you should call it again with exc=NULL to revert the effect"""</span>
        ctypes.pythonapi.PyThreadState_SetAsyncExc(thread.ident, <span class="hljs-literal">None</span>)
        <span class="hljs-keyword">raise</span> SystemError(<span class="hljs-string">"PyThreadState_SetAsyncExc failed"</span>)
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You should never forcibly kill a thread without cooperating with it.</p>

<p>Killing a thread removes any guarantees that try/finally blocks set up so you might leave locks locked, files open, etc.</p>

<p>The only time you can argue that forcibly killing threads is a good idea is to kill a program fast, but never single threads.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are explicitly calling <code>time.sleep()</code> as part of your thread (say polling some external service), an improvement upon Phillipe's method is to use the timeout in the <code>event</code>'s <code>wait()</code> method wherever you <code>sleep()</code></p>

<p>For example:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> threading

<span class="hljs-keyword">class</span> <span class="hljs-title class_">KillableThread</span>(threading.Thread):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, sleep_interval=<span class="hljs-number">1</span></span>):
        <span class="hljs-built_in">super</span>().__init__()
        self._kill = threading.Event()
        self._interval = sleep_interval

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Do Something"</span>)

            <span class="hljs-comment"># If no kill signal is set, sleep for the interval,</span>
            <span class="hljs-comment"># If kill signal comes in while sleeping, immediately</span>
            <span class="hljs-comment">#  wake up and handle</span>
            is_killed = self._kill.wait(self._interval)
            <span class="hljs-keyword">if</span> is_killed:
                <span class="hljs-keyword">break</span>

        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Killing Thread"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">kill</span>(<span class="hljs-params">self</span>):
        self._kill.<span class="hljs-built_in">set</span>()
</code></pre>

<p>Then to run it</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">t = KillableThread(sleep_interval=<span class="hljs-number">5</span>)
t.start()
<span class="hljs-comment"># Every 5 seconds it prints:</span>
<span class="hljs-comment">#: Do Something</span>
t.kill()
<span class="hljs-comment">#: Killing Thread</span>
</code></pre>

<p>The advantage of using <code>wait()</code> instead of <code>sleep()</code>ing and regularly checking the event is that you can program in longer intervals of sleep, the thread is stopped almost immediately (when you would otherwise be <code>sleep()</code>ing) and in my opinion, the code for handling exit is significantly simpler.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can kill a thread by installing trace into the thread that will exit the thread.   See attached link for one possible implementation.</p>

<p><a href="https://web.archive.org/web/20130503082442/http://mail.python.org/pipermail/python-list/2004-May/281943.html" rel="noreferrer">Kill a thread in Python</a> </p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It is better if you don't kill a thread.
A way could be to introduce a "try" block into the thread's cycle and to throw an exception when you want to stop the thread (for example a break/return/... that stops your for/while/...). 
I've used this on my app and it works...</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It is definitely possible to implement a <code>Thread.stop</code> method as shown in the following example code:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time


<span class="hljs-keyword">class</span> <span class="hljs-title class_">StopThread</span>(<span class="hljs-title class_ inherited__">StopIteration</span>):
    <span class="hljs-keyword">pass</span>

threading.SystemExit = SystemExit, StopThread


<span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread2</span>(threading.Thread):

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">stop</span>(<span class="hljs-params">self</span>):
        self.__stop = <span class="hljs-literal">True</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_bootstrap</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">if</span> threading._trace_hook <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">'Cannot run thread with tracing!'</span>)
        self.__stop = <span class="hljs-literal">False</span>
        sys.settrace(self.__trace)
        <span class="hljs-built_in">super</span>()._bootstrap()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__trace</span>(<span class="hljs-params">self, frame, event, arg</span>):
        <span class="hljs-keyword">if</span> self.__stop:
            <span class="hljs-keyword">raise</span> StopThread()
        <span class="hljs-keyword">return</span> self.__trace


<span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread3</span>(threading.Thread):

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_bootstrap</span>(<span class="hljs-params">self, stop_thread=<span class="hljs-literal">False</span></span>):
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">stop</span>():
            <span class="hljs-keyword">nonlocal</span> stop_thread
            stop_thread = <span class="hljs-literal">True</span>
        self.stop = stop

        <span class="hljs-keyword">def</span> <span class="hljs-title function_">tracer</span>(<span class="hljs-params">*_</span>):
            <span class="hljs-keyword">if</span> stop_thread:
                <span class="hljs-keyword">raise</span> StopThread()
            <span class="hljs-keyword">return</span> tracer
        sys.settrace(tracer)
        <span class="hljs-built_in">super</span>()._bootstrap()

<span class="hljs-comment">###############################################################################</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    test1 = Thread2(target=printer)
    test1.start()
    time.sleep(<span class="hljs-number">1</span>)
    test1.stop()
    test1.join()
    test2 = Thread2(target=speed_test)
    test2.start()
    time.sleep(<span class="hljs-number">1</span>)
    test2.stop()
    test2.join()
    test3 = Thread3(target=speed_test)
    test3.start()
    time.sleep(<span class="hljs-number">1</span>)
    test3.stop()
    test3.join()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">printer</span>():
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-built_in">print</span>(time.time() % <span class="hljs-number">1</span>)
        time.sleep(<span class="hljs-number">0.1</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">speed_test</span>(<span class="hljs-params">count=<span class="hljs-number">0</span></span>):
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            count += <span class="hljs-number">1</span>
    <span class="hljs-keyword">except</span> StopThread:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'Count ='</span>, count)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    main()
</code></pre>

<p>The <code>Thread3</code> class appears to run code approximately 33% faster than the <code>Thread2</code> class.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I'm way late to this game, but I've been wrestling with <a href="https://stackoverflow.com/q/50473309/2123176">a similar question</a> and the following appears to both resolve the issue perfectly for me AND lets me do some basic thread state checking and cleanup when the daemonized sub-thread exits:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> atexit

<span class="hljs-keyword">def</span> <span class="hljs-title function_">do_work</span>():

  i = <span class="hljs-number">0</span>
<span class="hljs-meta">  @atexit.register</span>
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">goodbye</span>():
    <span class="hljs-built_in">print</span> (<span class="hljs-string">"'CLEANLY' kill sub-thread with value: %s [THREAD: %s]"</span> %
           (i, threading.currentThread().ident))

  <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    <span class="hljs-built_in">print</span> i
    i += <span class="hljs-number">1</span>
    time.sleep(<span class="hljs-number">1</span>)

t = threading.Thread(target=do_work)
t.daemon = <span class="hljs-literal">True</span>
t.start()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">after_timeout</span>():
  <span class="hljs-built_in">print</span> <span class="hljs-string">"KILL MAIN THREAD: %s"</span> % threading.currentThread().ident
  <span class="hljs-keyword">raise</span> SystemExit

threading.Timer(<span class="hljs-number">2</span>, after_timeout).start()
</code></pre>

<p>Yields:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-number">0</span>
<span class="hljs-number">1</span>
KILL MAIN THREAD: <span class="hljs-number">140013208254208</span>
<span class="hljs-string">'CLEANLY'</span> kill sub-thread <span class="hljs-keyword">with</span> value: <span class="hljs-number">2</span> [THREAD: <span class="hljs-number">140013674317568</span>]
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Following workaround can be used to kill a thread:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">kill_threads = <span class="hljs-literal">False</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">doSomething</span>():
    <span class="hljs-keyword">global</span> kill_threads
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">if</span> kill_threads:
            thread.exit()
        ......
        ......

thread.start_new_thread(doSomething, ())
</code></pre>

<p>This can be used even for terminating threads, whose code is written in another module, from main thread. We can declare a global variable in that module and use it to terminate thread/s spawned in that module.</p>

<p>I usually use this to terminate all the threads at the program exit. This might not be the perfect way to terminate thread/s but could help.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> ctypes <span class="hljs-keyword">import</span> *
pthread = cdll.LoadLibrary(<span class="hljs-string">"libpthread-2.15.so"</span>)
pthread.pthread_cancel(c_ulong(t.ident))
</code></pre>

<p><strong>t</strong> is your <code>Thread</code> object.</p>

<p>Read the python source (<code>Modules/threadmodule.c</code> and <code>Python/thread_pthread.h</code>) you can see the <code>Thread.ident</code> is an <code>pthread_t</code> type, so you can do anything <code>pthread</code> can do in python use <code>libpthread</code>.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's yet another way to do it, but with extremely clean and simple code, that works in Python 3.7 in 2021:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> ctypes 

<span class="hljs-keyword">def</span> <span class="hljs-title function_">kill_thread</span>(<span class="hljs-params">thread</span>):
    <span class="hljs-string">"""
    thread: a threading.Thread object
    """</span>
    thread_id = thread.ident
    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(thread_id, ctypes.py_object(SystemExit))
    <span class="hljs-keyword">if</span> res &gt; <span class="hljs-number">1</span>:
        ctypes.pythonapi.PyThreadState_SetAsyncExc(thread_id, <span class="hljs-number">0</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'Exception raise failure'</span>)
</code></pre>
<p>Adapted from here: <a href="https://www.geeksforgeeks.org/python-different-ways-to-kill-a-thread/" rel="noreferrer">https://www.geeksforgeeks.org/python-different-ways-to-kill-a-thread/</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>One thing I want to add is that if you read official documentation in <a href="https://docs.python.org/2/library/threading.html" rel="nofollow noreferrer">threading lib Python</a>, it's recommended to avoid use of "demonic" threads, when you don't want threads end abruptly, with the flag that Paolo Rovelli <a href="https://stackoverflow.com/a/15185771">mentioned</a>.</p>

<p>From official documentation:</p>

<blockquote>
  <p>Daemon threads are abruptly stopped at shutdown. Their resources (such as open files, database transactions, etc.) may not be released properly. If you want your threads to stop gracefully, make them non-daemonic and use a suitable signaling mechanism such as an Event.</p>
</blockquote>

<p>I think that creating daemonic threads depends of your application, but in general (and in my opinion) it's better to avoid killing them or making them daemonic. In multiprocessing you can use <code>is_alive()</code> to check process status  and "terminate" for finish them (Also you avoid GIL problems). But you can find more problems, sometimes, when you execute your code in Windows.</p>

<p>And always remember that if you have "live threads", the Python interpreter will be running for wait them. (Because of this daemonic can help you if don't matter abruptly ends).</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There is a library built for this purpose, <a href="https://pypi.org/project/stopit/" rel="nofollow noreferrer">stopit</a>. Although some of the same cautions listed herein still apply, at least this library presents a regular, repeatable technique for achieving the stated goal.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Asuming, that you want to have multiple threads of the same function, this is IMHO the easiest implementation to stop one by id:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread

<span class="hljs-keyword">def</span> <span class="hljs-title function_">doit</span>(<span class="hljs-params"><span class="hljs-built_in">id</span>=<span class="hljs-number">0</span></span>):
    doit.stop=<span class="hljs-number">0</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"start id:%d"</span>%<span class="hljs-built_in">id</span>)
    <span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:
        time.sleep(<span class="hljs-number">1</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"."</span>)
        <span class="hljs-keyword">if</span> doit.stop==<span class="hljs-built_in">id</span>:
            doit.stop=<span class="hljs-number">0</span>
            <span class="hljs-keyword">break</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"end thread %d"</span>%<span class="hljs-built_in">id</span>)

t5=Thread(target=doit, args=(<span class="hljs-number">5</span>,))
t6=Thread(target=doit, args=(<span class="hljs-number">6</span>,))

t5.start() ; t6.start()
time.sleep(<span class="hljs-number">2</span>)
doit.stop =<span class="hljs-number">5</span>  <span class="hljs-comment">#kill t5</span>
time.sleep(<span class="hljs-number">2</span>)
doit.stop =<span class="hljs-number">6</span>  <span class="hljs-comment">#kill t6</span>
</code></pre>

<p>The nice thing is here, you can have multiple of same and different functions, and stop them all by <code>functionname.stop</code></p>

<p>If you want to have only one thread of the function then you don't need to remember the id. Just stop, if <code>doit.stop</code> &gt; 0.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Just to build up on @SCB's idea (which was exactly what I needed) to create a KillableThread  subclass with a customized function:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread, Event

<span class="hljs-keyword">class</span> <span class="hljs-title class_">KillableThread</span>(<span class="hljs-title class_ inherited__">Thread</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, sleep_interval=<span class="hljs-number">1</span>, target=<span class="hljs-literal">None</span>, name=<span class="hljs-literal">None</span>, args=(<span class="hljs-params"></span>), kwargs={}</span>):
        <span class="hljs-built_in">super</span>().__init__(<span class="hljs-literal">None</span>, target, name, args, kwargs)
        self._kill = Event()
        self._interval = sleep_interval
        <span class="hljs-built_in">print</span>(self._target)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-comment"># Call custom function with arguments</span>
            self._target(*self._args)

            <span class="hljs-comment"># If no kill signal is set, sleep for the interval,</span>
            <span class="hljs-comment"># If kill signal comes in while sleeping, immediately</span>
            <span class="hljs-comment">#  wake up and handle</span>
            is_killed = self._kill.wait(self._interval)
            <span class="hljs-keyword">if</span> is_killed:
                <span class="hljs-keyword">break</span>

        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Killing Thread"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">kill</span>(<span class="hljs-params">self</span>):
        self._kill.<span class="hljs-built_in">set</span>()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">print_msg</span>(<span class="hljs-params">msg</span>):
        <span class="hljs-built_in">print</span>(msg)

    t = KillableThread(<span class="hljs-number">10</span>, print_msg, args=(<span class="hljs-string">"hello world"</span>))
    t.start()
    time.sleep(<span class="hljs-number">6</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"About to kill thread"</span>)
    t.kill()
</code></pre>
<p>Naturally, like with @SBC, the thread doesn't wait to run a new loop to stop. In this example, you would see the "Killing Thread" message printed right after the "About to kill thread" instead of waiting for 4 more seconds for the thread to complete (since we have slept for 6 seconds already).</p>
<p>Second argument in KillableThread constructor is your custom function (print_msg here). Args argument are the arguments that will be used when calling the function (("hello world")) here.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 21</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>While it's rather old, <a href="http://code.activestate.com/recipes/496960-thread2-killable-threads/" rel="nofollow noreferrer">this</a> might be a handy solution for some:  </p>

<blockquote>
  <p>A little module that extends the threading's module functionality --
  allows one thread to raise exceptions in the context of another
  thread. By raising <code>SystemExit</code>, you can finally kill python threads.</p>
</blockquote>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> ctypes     

<span class="hljs-keyword">def</span> <span class="hljs-title function_">_async_raise</span>(<span class="hljs-params">tid, excobj</span>):
    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(tid, ctypes.py_object(excobj))
    <span class="hljs-keyword">if</span> res == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"nonexistent thread id"</span>)
    <span class="hljs-keyword">elif</span> res &gt; <span class="hljs-number">1</span>:
        <span class="hljs-comment"># """if it returns a number greater than one, you're in trouble, </span>
        <span class="hljs-comment"># and you should call it again with exc=NULL to revert the effect"""</span>
        ctypes.pythonapi.PyThreadState_SetAsyncExc(tid, <span class="hljs-number">0</span>)
        <span class="hljs-keyword">raise</span> SystemError(<span class="hljs-string">"PyThreadState_SetAsyncExc failed"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread</span>(threading.Thread):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">raise_exc</span>(<span class="hljs-params">self, excobj</span>):
        <span class="hljs-keyword">assert</span> self.isAlive(), <span class="hljs-string">"thread must be started"</span>
        <span class="hljs-keyword">for</span> tid, tobj <span class="hljs-keyword">in</span> threading._active.items():
            <span class="hljs-keyword">if</span> tobj <span class="hljs-keyword">is</span> self:
                _async_raise(tid, excobj)
                <span class="hljs-keyword">return</span>

        <span class="hljs-comment"># the thread was alive when we entered the loop, but was not found </span>
        <span class="hljs-comment"># in the dict, hence it must have been already terminated. should we raise</span>
        <span class="hljs-comment"># an exception here? silently ignore?</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">terminate</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># must raise the SystemExit type, instead of a SystemExit() instance</span>
        <span class="hljs-comment"># due to a bug in PyThreadState_SetAsyncExc</span>
        self.raise_exc(SystemExit)
</code></pre>

<p>So, it allows a "thread to raise exceptions in the context of another thread" and in this way, the terminated thread can handle the termination without regularly checking an abort flag.</p>

<p>However, according to its <a href="http://tomerfiliba.com/recipes/Thread2/" rel="nofollow noreferrer">original source</a>, there are some issues with this code.</p>

<blockquote>
  <ul>
  <li>The exception will be raised only when executing python bytecode. If    your thread calls a native/built-in blocking function, the
  exception    will be raised only when execution returns to the python
  code. 
  
  <ul>
  <li>There is also an issue if the built-in function internally calls    PyErr_Clear(), which would effectively cancel your pending exception. 
  You can try to raise it again.</li>
  </ul></li>
  <li>Only exception types can be raised    safely. Exception instances are likely to cause unexpected behavior,    and are thus restricted.
  
  <ul>
  <li>For example: t1.raise_exc(TypeError) and    not t1.raise_exc(TypeError("blah")).</li>
  <li>IMHO it's a bug, and I reported it as one. For more info,    <a href="http://mail.python.org/pipermail/python-dev/2006-August/068158.html" rel="nofollow noreferrer">http://mail.python.org/pipermail/python-dev/2006-August/068158.html</a>  </li>
  </ul></li>
  <li>I asked to expose this function in the built-in thread module, but    since ctypes has become a standard library (as of 2.5), and this<br>
  feature is not likely to be implementation-agnostic, it may be kept<br>
  unexposed.</li>
  </ul>
</blockquote>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 22</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As mentioned in @Kozyarchuk's <a href="https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread/325027#325027">answer</a>, installing trace works. Since this answer contained no code, here is a working ready-to-use example:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> sys, threading, time 

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TraceThread</span>(threading.Thread): 
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, *args, **keywords</span>): 
        threading.Thread.__init__(self, *args, **keywords) 
        self.killed = <span class="hljs-literal">False</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">start</span>(<span class="hljs-params">self</span>): 
        self._run = self.run 
        self.run = self.settrace_and_run
        threading.Thread.start(self) 
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">settrace_and_run</span>(<span class="hljs-params">self</span>): 
        sys.settrace(self.globaltrace) 
        self._run()
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">globaltrace</span>(<span class="hljs-params">self, frame, event, arg</span>): 
        <span class="hljs-keyword">return</span> self.localtrace <span class="hljs-keyword">if</span> event == <span class="hljs-string">'call'</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">localtrace</span>(<span class="hljs-params">self, frame, event, arg</span>): 
        <span class="hljs-keyword">if</span> self.killed <span class="hljs-keyword">and</span> event == <span class="hljs-string">'line'</span>: 
            <span class="hljs-keyword">raise</span> SystemExit() 
        <span class="hljs-keyword">return</span> self.localtrace 

<span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(): 
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>: 
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'1'</span>) 
        time.sleep(<span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'2'</span>) 
        time.sleep(<span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'3'</span>) 
        time.sleep(<span class="hljs-number">2</span>)

t = TraceThread(target=f) 
t.start() 
time.sleep(<span class="hljs-number">2.5</span>) 
t.killed = <span class="hljs-literal">True</span>
</code></pre>

<p>It stops after having printed <code>1</code> and <code>2</code>. <code>3</code> is not printed.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 23</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Python version: 3.8</p>
<p>Using daemon thread to execute what we wanted, if we want to daemon thread be terminated, all we need is making parent thread exit, then system will terminate daemon thread which parent thread created.</p>
<p>Also support coroutine and coroutine function.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    start_time = time.perf_counter()
    t1 = ExitThread(time.sleep, (<span class="hljs-number">10</span>,), debug=<span class="hljs-literal">False</span>)
    t1.start()
    time.sleep(<span class="hljs-number">0.5</span>)
    t1.exit()
    <span class="hljs-keyword">try</span>:
        <span class="hljs-built_in">print</span>(t1.result_future.result())
    <span class="hljs-keyword">except</span> concurrent.futures.CancelledError:
        <span class="hljs-keyword">pass</span>
    end_time = time.perf_counter()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"time cost <span class="hljs-subst">{end_time - start_time:<span class="hljs-number">0.2</span>f}</span>"</span>)
</code></pre>
<p>below is ExitThread source code</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> concurrent.futures
<span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> typing
<span class="hljs-keyword">import</span> asyncio


<span class="hljs-keyword">class</span> <span class="hljs-title class_">_WorkItem</span>(<span class="hljs-title class_ inherited__">object</span>):
    <span class="hljs-string">""" concurrent\futures\thread.py

    """</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, future, fn, args, kwargs, *, debug=<span class="hljs-literal">None</span></span>):
        self._debug = debug
        self.future = future
        self.fn = fn
        self.args = args
        self.kwargs = kwargs

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">if</span> self._debug:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ExitThread._WorkItem run"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.future.set_running_or_notify_cancel():
            <span class="hljs-keyword">return</span>

        <span class="hljs-keyword">try</span>:
            coroutine = <span class="hljs-literal">None</span>
            <span class="hljs-keyword">if</span> asyncio.iscoroutinefunction(self.fn):
                coroutine = self.fn(*self.args, **self.kwargs)
            <span class="hljs-keyword">elif</span> asyncio.iscoroutine(self.fn):
                coroutine = self.fn
            <span class="hljs-keyword">if</span> coroutine <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
                result = self.fn(*self.args, **self.kwargs)
            <span class="hljs-keyword">else</span>:
                result = asyncio.run(coroutine)
            <span class="hljs-keyword">if</span> self._debug:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"_WorkItem done"</span>)
        <span class="hljs-keyword">except</span> BaseException <span class="hljs-keyword">as</span> exc:
            self.future.set_exception(exc)
            <span class="hljs-comment"># Break a reference cycle with the exception 'exc'</span>
            self = <span class="hljs-literal">None</span>
        <span class="hljs-keyword">else</span>:
            self.future.set_result(result)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExitThread</span>:
    <span class="hljs-string">""" Like a stoppable thread

    Using coroutine for target then exit before running may cause RuntimeWarning.

    """</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, target: typing.<span class="hljs-type">Union</span>[typing.<span class="hljs-type">Coroutine</span>, typing.<span class="hljs-type">Callable</span>] = <span class="hljs-literal">None</span>
                 , args=(<span class="hljs-params"></span>), kwargs={}, *, daemon=<span class="hljs-literal">None</span>, debug=<span class="hljs-literal">None</span></span>):
        <span class="hljs-comment">#</span>
        self._debug = debug
        self._parent_thread = threading.Thread(target=self._parent_thread_run, name=<span class="hljs-string">"ExitThread_parent_thread"</span>
                                               , daemon=daemon)
        self._child_daemon_thread = <span class="hljs-literal">None</span>
        self.result_future = concurrent.futures.Future()
        self._workItem = _WorkItem(self.result_future, target, args, kwargs, debug=debug)
        self._parent_thread_exit_lock = threading.Lock()
        self._parent_thread_exit_lock.acquire()
        self._parent_thread_exit_lock_released = <span class="hljs-literal">False</span>  <span class="hljs-comment"># When done it will be True</span>
        self._started = <span class="hljs-literal">False</span>
        self._exited = <span class="hljs-literal">False</span>
        self.result_future.add_done_callback(self._release_parent_thread_exit_lock)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_parent_thread_run</span>(<span class="hljs-params">self</span>):
        self._child_daemon_thread = threading.Thread(target=self._child_daemon_thread_run
                                                     , name=<span class="hljs-string">"ExitThread_child_daemon_thread"</span>
                                                     , daemon=<span class="hljs-literal">True</span>)
        self._child_daemon_thread.start()
        <span class="hljs-comment"># Block manager thread</span>
        self._parent_thread_exit_lock.acquire()
        self._parent_thread_exit_lock.release()
        <span class="hljs-keyword">if</span> self._debug:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ExitThread._parent_thread_run exit"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_release_parent_thread_exit_lock</span>(<span class="hljs-params">self, _future</span>):
        <span class="hljs-keyword">if</span> self._debug:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ExitThread._release_parent_thread_exit_lock <span class="hljs-subst">{self._parent_thread_exit_lock_released}</span> <span class="hljs-subst">{_future}</span>"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self._parent_thread_exit_lock_released:
            self._parent_thread_exit_lock_released = <span class="hljs-literal">True</span>
            self._parent_thread_exit_lock.release()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_child_daemon_thread_run</span>(<span class="hljs-params">self</span>):
        self._workItem.run()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">start</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">if</span> self._debug:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ExitThread.start <span class="hljs-subst">{self._started}</span>"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self._started:
            self._started = <span class="hljs-literal">True</span>
            self._parent_thread.start()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">exit</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">if</span> self._debug:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ExitThread.exit exited: <span class="hljs-subst">{self._exited}</span> lock_released: <span class="hljs-subst">{self._parent_thread_exit_lock_released}</span>"</span>)
        <span class="hljs-keyword">if</span> self._parent_thread_exit_lock_released:
            <span class="hljs-keyword">return</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self._exited:
            self._exited = <span class="hljs-literal">True</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.result_future.cancel():
                <span class="hljs-keyword">if</span> self.result_future.running():
                    self.result_future.set_exception(concurrent.futures.CancelledError())
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 24</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This seems to work with pywin32 on windows 7</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">my_thread = threading.Thread()
my_thread.start()
my_thread._Thread__stop()
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 25</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Pieter Hintjens -- one of the founders of the <a href="http://zguide.zeromq.org/py:all" rel="nofollow noreferrer">ØMQ</a>-project -- says, using ØMQ and avoiding synchronization primitives like locks, mutexes, events etc., is the sanest and securest way to write multi-threaded programs:</p>

<p><a href="http://zguide.zeromq.org/py:all#Multithreading-with-ZeroMQ" rel="nofollow noreferrer">http://zguide.zeromq.org/py:all#Multithreading-with-ZeroMQ</a></p>

<p>This includes telling a child thread, that it should cancel its work. This would be done by equipping the thread with a ØMQ-socket and polling on that socket for a message saying that it should cancel.</p>

<p>The link also provides an example on multi-threaded python code with ØMQ.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 26</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>An alternative is to use <a href="https://docs.python.org/3/library/signal.html#signal.pthread_kill" rel="nofollow noreferrer"><code>signal.pthread_kill</code></a> to send a stop signal.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> signal <span class="hljs-keyword">import</span> pthread_kill, SIGTSTP
<span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread
<span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> count
<span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> sleep

<span class="hljs-keyword">def</span> <span class="hljs-title function_">target</span>():
    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> count():
        <span class="hljs-built_in">print</span>(num)
        sleep(<span class="hljs-number">1</span>)

thread = Thread(target=target)
thread.start()
sleep(<span class="hljs-number">5</span>)
pthread_kill(thread.ident, SIGTSTP)
</code></pre>
<p>result</p>
<pre class="lang-bash s-code-block"><code class="hljs language-bash">0
1
2
3
4

[14]+  Stopped
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 27</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you really need the ability to kill a sub-task, use an alternate implementation. <code>multiprocessing</code> and <code>gevent</code> both support indiscriminately killing a "thread".</p>

<p>Python's threading does not support cancellation. Do not even try. Your code is very likely to deadlock, corrupt or leak memory, or have other unintended "interesting" hard-to-debug effects which happen rarely and nondeterministically.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 28</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can execute your command in a process and then kill it using the process id.
I needed to sync between two thread one of which  doesnt return by itself.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">processIds = []

<span class="hljs-keyword">def</span> <span class="hljs-title function_">executeRecord</span>(<span class="hljs-params">command</span>):
    <span class="hljs-built_in">print</span>(command)

    process = subprocess.Popen(command, stdout=subprocess.PIPE)
    processIds.append(process.pid)
    <span class="hljs-built_in">print</span>(processIds[<span class="hljs-number">0</span>])

    <span class="hljs-comment">#Command that doesn't return by itself</span>
    process.stdout.read().decode(<span class="hljs-string">"utf-8"</span>)
    <span class="hljs-keyword">return</span>;


<span class="hljs-keyword">def</span> <span class="hljs-title function_">recordThread</span>(<span class="hljs-params">command, timeOut</span>):

    thread = Thread(target=executeRecord, args=(command,))
    thread.start()
    thread.join(timeOut)

    os.kill(processIds.pop(), signal.SIGINT)

    <span class="hljs-keyword">return</span>;
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 29</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The most simple way is this:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread
<span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> sleep

<span class="hljs-keyword">def</span> <span class="hljs-title function_">do_something</span>():
    <span class="hljs-keyword">global</span> thread_work
    <span class="hljs-keyword">while</span> thread_work:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'doing something'</span>)
        sleep(<span class="hljs-number">5</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'Thread stopped'</span>)

thread_work = <span class="hljs-literal">True</span>
Thread(target=do_something).start()
sleep(<span class="hljs-number">5</span>)
thread_work = <span class="hljs-literal">False</span>
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 30</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
  <p><strong>This is a bad answer, see the comments</strong></p>
</blockquote>

<p>Here's how to do it:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> *

...

<span class="hljs-keyword">for</span> thread <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>():
    <span class="hljs-keyword">if</span> thread.isAlive():
        <span class="hljs-keyword">try</span>:
            thread._Thread__stop()
        <span class="hljs-keyword">except</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>(thread.getName()) + <span class="hljs-string">' could not be terminated'</span>))
</code></pre>

<p>Give it a few seconds then your thread should be stopped. Check also the <code>thread._Thread__delete()</code> method.</p>

<p>I'd recommend a <code>thread.quit()</code> method for convenience. For example if you have a socket in your thread, I'd recommend creating a <code>quit()</code> method in your socket-handle class, terminate the socket, then run a <code>thread._Thread__stop()</code> inside of your <code>quit()</code>.</p>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;It is generally a bad pattern to kill a thread abruptly, in Python, and in any language. Think of the following cases:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;the thread is holding a critical resource that must be closed properly\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;the thread has created several other threads that must be killed as well.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;The nice way of handling this, if you can afford it (if you are managing your own threads), is to have an exit_request flag that each thread checks on a regular interval to see if it is time for it to exit.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;For example:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; threading\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StoppableThread\u0026lt;/span\u0026gt;(threading.Thread):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;Thread class with a stop() method. The thread itself has to check\n    regularly for the stopped() condition.\u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self,  *args, **kwargs\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;(StoppableThread, self).__init__(*args, **kwargs)\n        self._stop_event = threading.Event()\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stop\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        self._stop_event.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;()\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stopped\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; self._stop_event.is_set()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;In this code, you should call \u0026lt;code\u0026gt;stop()\u0026lt;/code\u0026gt; on the thread when you want it to exit, and wait for the thread to exit properly using \u0026lt;code\u0026gt;join()\u0026lt;/code\u0026gt;. The thread should check the stop flag at regular intervals.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;There are cases, however, when you really need to kill a thread. An example is when you are wrapping an external library that is busy for long calls, and you want to interrupt it.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The following code allows (with some restrictions) to raise an Exception in a Python thread:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_async_raise\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tid, exctype\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026apos;Raises an exception in the threads with id tid\u0026apos;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; inspect.isclass(exctype):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; TypeError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Only types can be raised (not instances)\u0026quot;\u0026lt;/span\u0026gt;)\n    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(tid),\n                                                     ctypes.py_object(exctype))\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; res == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; ValueError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;invalid thread id\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;elif\u0026lt;/span\u0026gt; res != \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# \u0026quot;if it returns a number greater than one, you\u0026apos;re in trouble,\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# and you should call it again with exc=NULL to revert the effect\u0026quot;\u0026lt;/span\u0026gt;\n        ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(tid), \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; SystemError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;PyThreadState_SetAsyncExc failed\u0026quot;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ThreadWithExc\u0026lt;/span\u0026gt;(threading.Thread):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026apos;A thread class that supports raising an exception in the thread from\n       another thread.\n    \u0026apos;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_get_my_tid\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;determines this (self\u0026apos;s) thread id\n\n        CAREFUL: this function is executed in the context of the caller\n        thread, to get the identity of the thread represented by this\n        instance.\n        \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; self.isAlive():\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; threading.ThreadError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;the thread is not active\u0026quot;\u0026lt;/span\u0026gt;)\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# do we have it cached?\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;hasattr\u0026lt;/span\u0026gt;(self, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;_thread_id\u0026quot;\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; self._thread_id\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# no, look for it in the _active dict\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; tid, tobj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; threading._active.items():\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; tobj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; self:\n                self._thread_id = tid\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; tid\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;TODO:\u0026lt;/span\u0026gt; in python 2.6, there\u0026apos;s a simpler way to do: self.ident\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; AssertionError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;could not determine the thread\u0026apos;s id\u0026quot;\u0026lt;/span\u0026gt;)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;raiseExc\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, exctype\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;Raises the given exception type in the context of this thread.\n\n        If the thread is busy in a system call (time.sleep(),\n        socket.accept(), ...), the exception is simply ignored.\n\n        If you are sure that your exception should terminate the thread,\n        one way to ensure that it works is:\n\n            t = ThreadWithExc( ... )\n            ...\n            t.raiseExc( SomeException )\n            while t.isAlive():\n                time.sleep( 0.1 )\n                t.raiseExc( SomeException )\n\n        If the exception is to be caught by the thread, you need a way to\n        check that your thread has caught it.\n\n        CAREFUL: this function is executed in the context of the\n        caller thread, to raise an exception in the context of the\n        thread represented by this instance.\n        \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n        _async_raise( self._get_my_tid(), exctype )\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;(Based on \u0026lt;a href=\u0026quot;http://tomerfiliba.com/recipes/Thread2/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Killable Threads\u0026lt;/a\u0026gt; by Tomer Filiba. The quote about the return value of \u0026lt;code\u0026gt;PyThreadState_SetAsyncExc\u0026lt;/code\u0026gt; appears to be from an \u0026lt;a href=\u0026quot;https://svn.python.org/projects/stackless/Python-2.4.3/dev/Python/pystate.c\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;old version of Python\u0026lt;/a\u0026gt;.)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As noted in the documentation, this is not a magic bullet because if the thread is busy outside the Python interpreter, it will not catch the interruption.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;A good usage pattern of this code is to have the thread catch a specific exception and perform the cleanup. That way, you can interrupt a task and still have proper cleanup.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A \u0026lt;a href=\u0026quot;https://docs.python.org/library/multiprocessing.html#multiprocessing.Process\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;multiprocessing.Process\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; can \u0026lt;a href=\u0026quot;https://docs.python.org/library/multiprocessing.html#multiprocessing.Process.terminate\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;p.terminate()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In the cases where I want to kill a thread, but do not want to use flags/locks/signals/semaphores/events/whatever, I promote the threads to full blown processes. For code that makes use of just a few threads the overhead is not that bad.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;E.g. this comes in handy to easily terminate helper \u0026quot;threads\u0026quot; which execute blocking I/O\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The conversion is trivial: In related code replace all \u0026lt;code\u0026gt;threading.Thread\u0026lt;/code\u0026gt; with \u0026lt;code\u0026gt;multiprocessing.Process\u0026lt;/code\u0026gt; and all \u0026lt;code\u0026gt;queue.Queue\u0026lt;/code\u0026gt; with \u0026lt;code\u0026gt;multiprocessing.Queue\u0026lt;/code\u0026gt; and add the required calls of \u0026lt;code\u0026gt;p.terminate()\u0026lt;/code\u0026gt; to your parent process which wants to kill its child \u0026lt;code\u0026gt;p\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;See the \u0026lt;a href=\u0026quot;https://docs.python.org/library/multiprocessing.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Python documentation for \u0026lt;code\u0026gt;multiprocessing\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; multiprocessing\nproc = multiprocessing.Process(target=your_proc_function, args=())\nproc.start()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Terminate the process\u0026lt;/span\u0026gt;\nproc.terminate()  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# sends a SIGTERM\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There is no official API to do that, no.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You need to use platform API to kill the thread, e.g. pthread_kill, or TerminateThread. You can access such API e.g. through pythonwin, or through ctypes.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Notice that this is inherently unsafe. It will likely lead to uncollectable garbage (from local variables of the stack frames that become garbage), and may lead to deadlocks, if the thread being killed has the GIL at the point when it is killed.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are trying to terminate the whole program you can set the thread as a \u0026quot;daemon\u0026quot;. see\n\u0026lt;a href=\u0026quot;http://docs.python.org/library/threading.html#threading.Thread.daemon\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Thread.daemon\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As others have mentioned, the norm is to set a stop flag. For something lightweight (no subclassing of Thread, no global variable), a lambda callback is an option. (Note the parentheses in \u0026lt;code\u0026gt;if stop()\u0026lt;/code\u0026gt;.)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; threading\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; time\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;do_work\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;, stop\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am thread\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am thread {} doing something\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;))\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; stop():\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;  Exiting loop.\u0026quot;\u0026lt;/span\u0026gt;)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Thread {}, signing off\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;format\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;))\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;():\n    stop_threads = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n    workers = []\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;range\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;):\n        tmp = threading.Thread(target=do_work, args=(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt;: stop_threads))\n        workers.append(tmp)\n        tmp.start()\n    time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;main: done sleeping; time to stop the threads.\u0026apos;\u0026lt;/span\u0026gt;)\n    stop_threads = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; worker \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; workers:\n        worker.join()\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Finis.\u0026apos;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; __name__ == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;__main__\u0026apos;\u0026lt;/span\u0026gt;:\n    main()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Replacing \u0026lt;code\u0026gt;print()\u0026lt;/code\u0026gt; with a \u0026lt;code\u0026gt;pr()\u0026lt;/code\u0026gt; function that always flushes (\u0026lt;code\u0026gt;sys.stdout.flush()\u0026lt;/code\u0026gt;) may improve the precision of the shell output.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;(Only tested on Windows/Eclipse/Python3.3)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In Python, you simply cannot kill a Thread directly.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you do NOT really need to have a Thread (!), what you can do, instead of using the \u0026lt;a href=\u0026quot;http://docs.python.org/2/library/threading.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;em\u0026gt;threading\u0026lt;/em\u0026gt; package \u0026lt;/a\u0026gt;, is to use the \n\u0026lt;a href=\u0026quot;http://docs.python.org/2/library/multiprocessing.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;em\u0026gt;multiprocessing\u0026lt;/em\u0026gt; package \u0026lt;/a\u0026gt;. Here, to kill a process, you can simply call the method:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;yourProcess.terminate()  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# kill the process!\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Python will kill your process (on Unix through the SIGTERM signal, while on Windows through the \u0026lt;code\u0026gt;TerminateProcess()\u0026lt;/code\u0026gt; call). Pay attention to use it while using a Queue or a Pipe! (it may corrupt the data in the Queue/Pipe)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Note that the \u0026lt;code\u0026gt;multiprocessing.Event\u0026lt;/code\u0026gt; and the \u0026lt;code\u0026gt;multiprocessing.Semaphore\u0026lt;/code\u0026gt; work exactly in the same way of the \u0026lt;code\u0026gt;threading.Event\u0026lt;/code\u0026gt; and the \u0026lt;code\u0026gt;threading.Semaphore\u0026lt;/code\u0026gt; respectively. In fact, the first ones are clones of the latters.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you REALLY need to use a Thread, there is no way to kill it directly. What you can do, however, is to use a \u0026lt;em\u0026gt;\u0026quot;daemon thread\u0026quot;\u0026lt;/em\u0026gt;. In fact, in Python, a Thread can be flagged as \u0026lt;em\u0026gt;daemon\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;yourThread.daemon = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# set the Thread as a \u0026quot;daemon thread\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The main program will exit when no alive non-daemon threads are left. In other words, when your main thread (which is, of course, a non-daemon thread) will finish its operations, the program will exit even if there are still some daemon threads working.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Note that it is necessary to set a Thread as \u0026lt;code\u0026gt;daemon\u0026lt;/code\u0026gt; before the \u0026lt;code\u0026gt;start()\u0026lt;/code\u0026gt; method is called!\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Of course you can, and should, use \u0026lt;code\u0026gt;daemon\u0026lt;/code\u0026gt; even with \u0026lt;code\u0026gt;multiprocessing\u0026lt;/code\u0026gt;. Here, when the main process exits, it attempts to terminate all of its daemonic child processes.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Finally, please, note that \u0026lt;code\u0026gt;sys.exit()\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;os.kill()\u0026lt;/code\u0026gt; are not choices.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is based on the \u0026lt;a href=\u0026quot;https://web.archive.org/web/20100514180958id_/http://code.activestate.com:80/recipes/496960-thread2-killable-threads/?in=lang-python\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;thread2 -- killable threads\u0026lt;/a\u0026gt; ActiveState recipe.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You need to call \u0026lt;a href=\u0026quot;https://docs.python.org/3/c-api/init.html#c.PyThreadState_SetAsyncExc\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;PyThreadState_SetAsyncExc()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, which is only available through the \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/ctypes.html#module-ctypes\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;ctypes\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; module.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This has only been tested on Python 2.7.3, but it is likely to work with other recent 2.x releases. \u0026lt;code\u0026gt;PyThreadState_SetAsyncExc()\u0026lt;/code\u0026gt; still exists in Python 3 for backwards compatibility (but I have not tested it).\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; ctypes\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;terminate_thread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;thread\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;Terminates a python thread from another thread.\n\n    :param thread: a threading.Thread instance\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; thread.isAlive():\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;\n\n    exc = ctypes.py_object(SystemExit)\n    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(\n        ctypes.c_long(thread.ident), exc)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; res == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; ValueError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;nonexistent thread id\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;elif\u0026lt;/span\u0026gt; res \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# \u0026quot;\u0026quot;\u0026quot;if it returns a number greater than one, you\u0026apos;re in trouble,\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# and you should call it again with exc=NULL to revert the effect\u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n        ctypes.pythonapi.PyThreadState_SetAsyncExc(thread.ident, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; SystemError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;PyThreadState_SetAsyncExc failed\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You should never forcibly kill a thread without cooperating with it.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Killing a thread removes any guarantees that try/finally blocks set up so you might leave locks locked, files open, etc.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The only time you can argue that forcibly killing threads is a good idea is to kill a program fast, but never single threads.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are explicitly calling \u0026lt;code\u0026gt;time.sleep()\u0026lt;/code\u0026gt; as part of your thread (say polling some external service), an improvement upon Phillipe\u0026apos;s method is to use the timeout in the \u0026lt;code\u0026gt;event\u0026lt;/code\u0026gt;\u0026apos;s \u0026lt;code\u0026gt;wait()\u0026lt;/code\u0026gt; method wherever you \u0026lt;code\u0026gt;sleep()\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; threading\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;KillableThread\u0026lt;/span\u0026gt;(threading.Thread):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, sleep_interval=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;().__init__()\n        self._kill = threading.Event()\n        self._interval = sleep_interval\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Do Something\u0026quot;\u0026lt;/span\u0026gt;)\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# If no kill signal is set, sleep for the interval,\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# If kill signal comes in while sleeping, immediately\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#  wake up and handle\u0026lt;/span\u0026gt;\n            is_killed = self._kill.wait(self._interval)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; is_killed:\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Killing Thread\u0026quot;\u0026lt;/span\u0026gt;)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;kill\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        self._kill.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then to run it\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;t = KillableThread(sleep_interval=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;)\nt.start()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Every 5 seconds it prints:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#: Do Something\u0026lt;/span\u0026gt;\nt.kill()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#: Killing Thread\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The advantage of using \u0026lt;code\u0026gt;wait()\u0026lt;/code\u0026gt; instead of \u0026lt;code\u0026gt;sleep()\u0026lt;/code\u0026gt;ing and regularly checking the event is that you can program in longer intervals of sleep, the thread is stopped almost immediately (when you would otherwise be \u0026lt;code\u0026gt;sleep()\u0026lt;/code\u0026gt;ing) and in my opinion, the code for handling exit is significantly simpler.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can kill a thread by installing trace into the thread that will exit the thread.   See attached link for one possible implementation.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://web.archive.org/web/20130503082442/http://mail.python.org/pipermail/python-list/2004-May/281943.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Kill a thread in Python\u0026lt;/a\u0026gt; \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It is better if you don\u0026apos;t kill a thread.\nA way could be to introduce a \u0026quot;try\u0026quot; block into the thread\u0026apos;s cycle and to throw an exception when you want to stop the thread (for example a break/return/... that stops your for/while/...). \nI\u0026apos;ve used this on my app and it works...\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It is definitely possible to implement a \u0026lt;code\u0026gt;Thread.stop\u0026lt;/code\u0026gt; method as shown in the following example code:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; sys\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; threading\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; time\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StopThread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;StopIteration\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pass\u0026lt;/span\u0026gt;\n\nthreading.SystemExit = SystemExit, StopThread\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread2\u0026lt;/span\u0026gt;(threading.Thread):\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stop\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        self.__stop = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_bootstrap\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; threading._trace_hook \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; ValueError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Cannot run thread with tracing!\u0026apos;\u0026lt;/span\u0026gt;)\n        self.__stop = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n        sys.settrace(self.__trace)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;()._bootstrap()\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__trace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, frame, event, arg\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; self.__stop:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; StopThread()\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; self.__trace\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread3\u0026lt;/span\u0026gt;(threading.Thread):\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_bootstrap\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, stop_thread=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stop\u0026lt;/span\u0026gt;():\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;nonlocal\u0026lt;/span\u0026gt; stop_thread\n            stop_thread = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n        self.stop = stop\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;tracer\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;*_\u0026lt;/span\u0026gt;):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; stop_thread:\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; StopThread()\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; tracer\n        sys.settrace(tracer)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;()._bootstrap()\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;###############################################################################\u0026lt;/span\u0026gt;\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;():\n    test1 = Thread2(target=printer)\n    test1.start()\n    time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n    test1.stop()\n    test1.join()\n    test2 = Thread2(target=speed_test)\n    test2.start()\n    time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n    test2.stop()\n    test2.join()\n    test3 = Thread3(target=speed_test)\n    test3.start()\n    time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n    test3.stop()\n    test3.join()\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;printer\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(time.time() % \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n        time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.1\u0026lt;/span\u0026gt;)\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;speed_test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;count=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;:\n            count += \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; StopThread:\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Count =\u0026apos;\u0026lt;/span\u0026gt;, count)\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; __name__ == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;__main__\u0026apos;\u0026lt;/span\u0026gt;:\n    main()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;Thread3\u0026lt;/code\u0026gt; class appears to run code approximately 33% faster than the \u0026lt;code\u0026gt;Thread2\u0026lt;/code\u0026gt; class.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;m way late to this game, but I\u0026apos;ve been wrestling with \u0026lt;a href=\u0026quot;https://stackoverflow.com/q/50473309/2123176\u0026quot;\u0026gt;a similar question\u0026lt;/a\u0026gt; and the following appears to both resolve the issue perfectly for me AND lets me do some basic thread state checking and cleanup when the daemonized sub-thread exits:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; threading\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; time\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; atexit\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;do_work\u0026lt;/span\u0026gt;():\n\n  i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;  @atexit.register\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;goodbye\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;CLEANLY\u0026apos; kill sub-thread with value: %s [THREAD: %s]\u0026quot;\u0026lt;/span\u0026gt; %\n           (i, threading.currentThread().ident))\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;:\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; i\n    i += \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n    time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n\nt = threading.Thread(target=do_work)\nt.daemon = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\nt.start()\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;after_timeout\u0026lt;/span\u0026gt;():\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;KILL MAIN THREAD: %s\u0026quot;\u0026lt;/span\u0026gt; % threading.currentThread().ident\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; SystemExit\n\nthreading.Timer(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, after_timeout).start()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Yields:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\nKILL MAIN THREAD: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;140013208254208\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;CLEANLY\u0026apos;\u0026lt;/span\u0026gt; kill sub-thread \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt; value: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; [THREAD: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;140013674317568\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Following workaround can be used to kill a thread:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;kill_threads = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doSomething\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;global\u0026lt;/span\u0026gt; kill_threads\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; kill_threads:\n            thread.exit()\n        ......\n        ......\n\nthread.start_new_thread(doSomething, ())\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This can be used even for terminating threads, whose code is written in another module, from main thread. We can declare a global variable in that module and use it to terminate thread/s spawned in that module.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I usually use this to terminate all the threads at the program exit. This might not be the perfect way to terminate thread/s but could help.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; ctypes \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; *\npthread = cdll.LoadLibrary(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;libpthread-2.15.so\u0026quot;\u0026lt;/span\u0026gt;)\npthread.pthread_cancel(c_ulong(t.ident))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;t\u0026lt;/strong\u0026gt; is your \u0026lt;code\u0026gt;Thread\u0026lt;/code\u0026gt; object.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Read the python source (\u0026lt;code\u0026gt;Modules/threadmodule.c\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;Python/thread_pthread.h\u0026lt;/code\u0026gt;) you can see the \u0026lt;code\u0026gt;Thread.ident\u0026lt;/code\u0026gt; is an \u0026lt;code\u0026gt;pthread_t\u0026lt;/code\u0026gt; type, so you can do anything \u0026lt;code\u0026gt;pthread\u0026lt;/code\u0026gt; can do in python use \u0026lt;code\u0026gt;libpthread\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here\u0026apos;s yet another way to do it, but with extremely clean and simple code, that works in Python 3.7 in 2021:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; ctypes \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;kill_thread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;thread\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;\n    thread: a threading.Thread object\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    thread_id = thread.ident\n    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(thread_id, ctypes.py_object(SystemExit))\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; res \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;:\n        ctypes.pythonapi.PyThreadState_SetAsyncExc(thread_id, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Exception raise failure\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Adapted from here: \u0026lt;a href=\u0026quot;https://www.geeksforgeeks.org/python-different-ways-to-kill-a-thread/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://www.geeksforgeeks.org/python-different-ways-to-kill-a-thread/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;One thing I want to add is that if you read official documentation in \u0026lt;a href=\u0026quot;https://docs.python.org/2/library/threading.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;threading lib Python\u0026lt;/a\u0026gt;, it\u0026apos;s recommended to avoid use of \u0026quot;demonic\u0026quot; threads, when you don\u0026apos;t want threads end abruptly, with the flag that Paolo Rovelli \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/15185771\u0026quot;\u0026gt;mentioned\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;From official documentation:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Daemon threads are abruptly stopped at shutdown. Their resources (such as open files, database transactions, etc.) may not be released properly. If you want your threads to stop gracefully, make them non-daemonic and use a suitable signaling mechanism such as an Event.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;I think that creating daemonic threads depends of your application, but in general (and in my opinion) it\u0026apos;s better to avoid killing them or making them daemonic. In multiprocessing you can use \u0026lt;code\u0026gt;is_alive()\u0026lt;/code\u0026gt; to check process status  and \u0026quot;terminate\u0026quot; for finish them (Also you avoid GIL problems). But you can find more problems, sometimes, when you execute your code in Windows.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;And always remember that if you have \u0026quot;live threads\u0026quot;, the Python interpreter will be running for wait them. (Because of this daemonic can help you if don\u0026apos;t matter abruptly ends).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There is a library built for this purpose, \u0026lt;a href=\u0026quot;https://pypi.org/project/stopit/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;stopit\u0026lt;/a\u0026gt;. Although some of the same cautions listed herein still apply, at least this library presents a regular, repeatable technique for achieving the stated goal.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Asuming, that you want to have multiple threads of the same function, this is IMHO the easiest implementation to stop one by id:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; time\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; threading \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; Thread\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    doit.stop=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;start id:%d\u0026quot;\u0026lt;/span\u0026gt;%\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;:\n        time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; doit.stop==\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;:\n            doit.stop=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;end thread %d\u0026quot;\u0026lt;/span\u0026gt;%\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;)\n\nt5=Thread(target=doit, args=(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,))\nt6=Thread(target=doit, args=(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,))\n\nt5.start() ; t6.start()\ntime.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)\ndoit.stop =\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#kill t5\u0026lt;/span\u0026gt;\ntime.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)\ndoit.stop =\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#kill t6\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The nice thing is here, you can have multiple of same and different functions, and stop them all by \u0026lt;code\u0026gt;functionname.stop\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you want to have only one thread of the function then you don\u0026apos;t need to remember the id. Just stop, if \u0026lt;code\u0026gt;doit.stop\u0026lt;/code\u0026gt; \u0026amp;gt; 0.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Just to build up on @SCB\u0026apos;s idea (which was exactly what I needed) to create a KillableThread  subclass with a customized function:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; threading \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; Thread, Event\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;KillableThread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, sleep_interval=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, target=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, name=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, args=(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;), kwargs={}\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;().__init__(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, target, name, args, kwargs)\n        self._kill = Event()\n        self._interval = sleep_interval\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(self._target)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Call custom function with arguments\u0026lt;/span\u0026gt;\n            self._target(*self._args)\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# If no kill signal is set, sleep for the interval,\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# If kill signal comes in while sleeping, immediately\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#  wake up and handle\u0026lt;/span\u0026gt;\n            is_killed = self._kill.wait(self._interval)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; is_killed:\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Killing Thread\u0026quot;\u0026lt;/span\u0026gt;)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;kill\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        self._kill.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;()\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; __name__ == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;__main__\u0026apos;\u0026lt;/span\u0026gt;:\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;print_msg\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;msg\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(msg)\n\n    t = KillableThread(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;, print_msg, args=(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello world\u0026quot;\u0026lt;/span\u0026gt;))\n    t.start()\n    time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;About to kill thread\u0026quot;\u0026lt;/span\u0026gt;)\n    t.kill()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Naturally, like with @SBC, the thread doesn\u0026apos;t wait to run a new loop to stop. In this example, you would see the \u0026quot;Killing Thread\u0026quot; message printed right after the \u0026quot;About to kill thread\u0026quot; instead of waiting for 4 more seconds for the thread to complete (since we have slept for 6 seconds already).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Second argument in KillableThread constructor is your custom function (print_msg here). Args argument are the arguments that will be used when calling the function ((\u0026quot;hello world\u0026quot;)) here.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;While it\u0026apos;s rather old, \u0026lt;a href=\u0026quot;http://code.activestate.com/recipes/496960-thread2-killable-threads/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this\u0026lt;/a\u0026gt; might be a handy solution for some:  \u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;A little module that extends the threading\u0026apos;s module functionality --\n  allows one thread to raise exceptions in the context of another\n  thread. By raising \u0026lt;code\u0026gt;SystemExit\u0026lt;/code\u0026gt;, you can finally kill python threads.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; threading\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; ctypes     \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_async_raise\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tid, excobj\u0026lt;/span\u0026gt;):\n    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(tid, ctypes.py_object(excobj))\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; res == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; ValueError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;nonexistent thread id\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;elif\u0026lt;/span\u0026gt; res \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# \u0026quot;\u0026quot;\u0026quot;if it returns a number greater than one, you\u0026apos;re in trouble, \u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# and you should call it again with exc=NULL to revert the effect\u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n        ctypes.pythonapi.PyThreadState_SetAsyncExc(tid, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; SystemError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;PyThreadState_SetAsyncExc failed\u0026quot;\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt;(threading.Thread):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;raise_exc\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, excobj\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt; self.isAlive(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;thread must be started\u0026quot;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; tid, tobj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; threading._active.items():\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; tobj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; self:\n                _async_raise(tid, excobj)\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# the thread was alive when we entered the loop, but was not found \u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# in the dict, hence it must have been already terminated. should we raise\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# an exception here? silently ignore?\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;terminate\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# must raise the SystemExit type, instead of a SystemExit() instance\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# due to a bug in PyThreadState_SetAsyncExc\u0026lt;/span\u0026gt;\n        self.raise_exc(SystemExit)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So, it allows a \u0026quot;thread to raise exceptions in the context of another thread\u0026quot; and in this way, the terminated thread can handle the termination without regularly checking an abort flag.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;However, according to its \u0026lt;a href=\u0026quot;http://tomerfiliba.com/recipes/Thread2/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;original source\u0026lt;/a\u0026gt;, there are some issues with this code.\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;ul\u0026gt;\n  \u0026lt;li\u0026gt;The exception will be raised only when executing python bytecode. If    your thread calls a native/built-in blocking function, the\n  exception    will be raised only when execution returns to the python\n  code. \n  \n  \u0026lt;ul\u0026gt;\n  \u0026lt;li\u0026gt;There is also an issue if the built-in function internally calls    PyErr_Clear(), which would effectively cancel your pending exception. \n  You can try to raise it again.\u0026lt;/li\u0026gt;\n  \u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;Only exception types can be raised    safely. Exception instances are likely to cause unexpected behavior,    and are thus restricted.\n  \n  \u0026lt;ul\u0026gt;\n  \u0026lt;li\u0026gt;For example: t1.raise_exc(TypeError) and    not t1.raise_exc(TypeError(\u0026quot;blah\u0026quot;)).\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;IMHO it\u0026apos;s a bug, and I reported it as one. For more info,    \u0026lt;a href=\u0026quot;http://mail.python.org/pipermail/python-dev/2006-August/068158.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;http://mail.python.org/pipermail/python-dev/2006-August/068158.html\u0026lt;/a\u0026gt;  \u0026lt;/li\u0026gt;\n  \u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;I asked to expose this function in the built-in thread module, but    since ctypes has become a standard library (as of 2.5), and this\u0026lt;br\u0026gt;\n  feature is not likely to be implementation-agnostic, it may be kept\u0026lt;br\u0026gt;\n  unexposed.\u0026lt;/li\u0026gt;\n  \u0026lt;/ul\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As mentioned in @Kozyarchuk\u0026apos;s \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread/325027#325027\u0026quot;\u0026gt;answer\u0026lt;/a\u0026gt;, installing trace works. Since this answer contained no code, here is a working ready-to-use example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; sys, threading, time \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;TraceThread\u0026lt;/span\u0026gt;(threading.Thread): \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, *args, **keywords\u0026lt;/span\u0026gt;): \n        threading.Thread.__init__(self, *args, **keywords) \n        self.killed = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;start\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;): \n        self._run = self.run \n        self.run = self.settrace_and_run\n        threading.Thread.start(self) \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;settrace_and_run\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;): \n        sys.settrace(self.globaltrace) \n        self._run()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;globaltrace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, frame, event, arg\u0026lt;/span\u0026gt;): \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; self.localtrace \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; event == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;call\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;localtrace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, frame, event, arg\u0026lt;/span\u0026gt;): \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; self.killed \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; event == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;line\u0026apos;\u0026lt;/span\u0026gt;: \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;raise\u0026lt;/span\u0026gt; SystemExit() \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; self.localtrace \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;(): \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;: \n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;1\u0026apos;\u0026lt;/span\u0026gt;) \n        time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;2\u0026apos;\u0026lt;/span\u0026gt;) \n        time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;3\u0026apos;\u0026lt;/span\u0026gt;) \n        time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)\n\nt = TraceThread(target=f) \nt.start() \ntime.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.5\u0026lt;/span\u0026gt;) \nt.killed = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It stops after having printed \u0026lt;code\u0026gt;1\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;2\u0026lt;/code\u0026gt;. \u0026lt;code\u0026gt;3\u0026lt;/code\u0026gt; is not printed.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Python version: 3.8\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Using daemon thread to execute what we wanted, if we want to daemon thread be terminated, all we need is making parent thread exit, then system will terminate daemon thread which parent thread created.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Also support coroutine and coroutine function.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;():\n    start_time = time.perf_counter()\n    t1 = ExitThread(time.sleep, (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;,), debug=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;)\n    t1.start()\n    time.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.5\u0026lt;/span\u0026gt;)\n    t1.exit()\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(t1.result_future.result())\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; concurrent.futures.CancelledError:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pass\u0026lt;/span\u0026gt;\n    end_time = time.perf_counter()\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;f\u0026quot;time cost \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{end_time - start_time:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;f}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;below is ExitThread source code\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; concurrent.futures\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; threading\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; typing\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; asyncio\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;_WorkItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot; concurrent\\futures\\thread.py\n\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, future, fn, args, kwargs, *, debug=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n        self._debug = debug\n        self.future = future\n        self.fn = fn\n        self.args = args\n        self.kwargs = kwargs\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; self._debug:\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ExitThread._WorkItem run\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; self.future.set_running_or_notify_cancel():\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n            coroutine = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; asyncio.iscoroutinefunction(self.fn):\n                coroutine = self.fn(*self.args, **self.kwargs)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;elif\u0026lt;/span\u0026gt; asyncio.iscoroutine(self.fn):\n                coroutine = self.fn\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; coroutine \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;:\n                result = self.fn(*self.args, **self.kwargs)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n                result = asyncio.run(coroutine)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; self._debug:\n                \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;_WorkItem done\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; BaseException \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; exc:\n            self.future.set_exception(exc)\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Break a reference cycle with the exception \u0026apos;exc\u0026apos;\u0026lt;/span\u0026gt;\n            self = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            self.future.set_result(result)\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ExitThread\u0026lt;/span\u0026gt;:\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot; Like a stoppable thread\n\n    Using coroutine for target then exit before running may cause RuntimeWarning.\n\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;__init__\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, target: typing.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Union\u0026lt;/span\u0026gt;[typing.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Coroutine\u0026lt;/span\u0026gt;, typing.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Callable\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\n                 , args=(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;), kwargs={}, *, daemon=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, debug=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026lt;/span\u0026gt;\n        self._debug = debug\n        self._parent_thread = threading.Thread(target=self._parent_thread_run, name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ExitThread_parent_thread\u0026quot;\u0026lt;/span\u0026gt;\n                                               , daemon=daemon)\n        self._child_daemon_thread = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;\n        self.result_future = concurrent.futures.Future()\n        self._workItem = _WorkItem(self.result_future, target, args, kwargs, debug=debug)\n        self._parent_thread_exit_lock = threading.Lock()\n        self._parent_thread_exit_lock.acquire()\n        self._parent_thread_exit_lock_released = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# When done it will be True\u0026lt;/span\u0026gt;\n        self._started = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n        self._exited = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n        self.result_future.add_done_callback(self._release_parent_thread_exit_lock)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_parent_thread_run\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        self._child_daemon_thread = threading.Thread(target=self._child_daemon_thread_run\n                                                     , name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ExitThread_child_daemon_thread\u0026quot;\u0026lt;/span\u0026gt;\n                                                     , daemon=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;)\n        self._child_daemon_thread.start()\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Block manager thread\u0026lt;/span\u0026gt;\n        self._parent_thread_exit_lock.acquire()\n        self._parent_thread_exit_lock.release()\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; self._debug:\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ExitThread._parent_thread_run exit\u0026quot;\u0026lt;/span\u0026gt;)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_release_parent_thread_exit_lock\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self, _future\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; self._debug:\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;f\u0026quot;ExitThread._release_parent_thread_exit_lock \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{self._parent_thread_exit_lock_released}\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{_future}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; self._parent_thread_exit_lock_released:\n            self._parent_thread_exit_lock_released = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n            self._parent_thread_exit_lock.release()\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_child_daemon_thread_run\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        self._workItem.run()\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;start\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; self._debug:\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;f\u0026quot;ExitThread.start \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{self._started}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; self._started:\n            self._started = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n            self._parent_thread.start()\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;exit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; self._debug:\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;f\u0026quot;ExitThread.exit exited: \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{self._exited}\u0026lt;/span\u0026gt; lock_released: \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{self._parent_thread_exit_lock_released}\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; self._parent_thread_exit_lock_released:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; self._exited:\n            self._exited = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; self.result_future.cancel():\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; self.result_future.running():\n                    self.result_future.set_exception(concurrent.futures.CancelledError())\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This seems to work with pywin32 on windows 7\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;my_thread = threading.Thread()\nmy_thread.start()\nmy_thread._Thread__stop()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Pieter Hintjens -- one of the founders of the \u0026lt;a href=\u0026quot;http://zguide.zeromq.org/py:all\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;ØMQ\u0026lt;/a\u0026gt;-project -- says, using ØMQ and avoiding synchronization primitives like locks, mutexes, events etc., is the sanest and securest way to write multi-threaded programs:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://zguide.zeromq.org/py:all#Multithreading-with-ZeroMQ\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;http://zguide.zeromq.org/py:all#Multithreading-with-ZeroMQ\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This includes telling a child thread, that it should cancel its work. This would be done by equipping the thread with a ØMQ-socket and polling on that socket for a message saying that it should cancel.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The link also provides an example on multi-threaded python code with ØMQ.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;An alternative is to use \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/signal.html#signal.pthread_kill\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;signal.pthread_kill\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to send a stop signal.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; signal \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pthread_kill, SIGTSTP\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; threading \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; Thread\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; itertools \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; count\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; time \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; sleep\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;target\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; num \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; count():\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(num)\n        sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n\nthread = Thread(target=target)\nthread.start()\nsleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;)\npthread_kill(thread.ident, SIGTSTP)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;result\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;0\n1\n2\n3\n4\n\n[14]+  Stopped\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you really need the ability to kill a sub-task, use an alternate implementation. \u0026lt;code\u0026gt;multiprocessing\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;gevent\u0026lt;/code\u0026gt; both support indiscriminately killing a \u0026quot;thread\u0026quot;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Python\u0026apos;s threading does not support cancellation. Do not even try. Your code is very likely to deadlock, corrupt or leak memory, or have other unintended \u0026quot;interesting\u0026quot; hard-to-debug effects which happen rarely and nondeterministically.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can execute your command in a process and then kill it using the process id.\nI needed to sync between two thread one of which  doesnt return by itself.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;processIds = []\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;executeRecord\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;command\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(command)\n\n    process = subprocess.Popen(command, stdout=subprocess.PIPE)\n    processIds.append(process.pid)\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(processIds[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#Command that doesn\u0026apos;t return by itself\u0026lt;/span\u0026gt;\n    process.stdout.read().decode(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;utf-8\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;recordThread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;command, timeOut\u0026lt;/span\u0026gt;):\n\n    thread = Thread(target=executeRecord, args=(command,))\n    thread.start()\n    thread.join(timeOut)\n\n    os.kill(processIds.pop(), signal.SIGINT)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The most simple way is this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; threading \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; Thread\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; time \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; sleep\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;do_something\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;global\u0026lt;/span\u0026gt; thread_work\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; thread_work:\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;doing something\u0026apos;\u0026lt;/span\u0026gt;)\n        sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Thread stopped\u0026apos;\u0026lt;/span\u0026gt;)\n\nthread_work = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\nThread(target=do_something).start()\nsleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;)\nthread_work = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;This is a bad answer, see the comments\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;Here\u0026apos;s how to do it:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; threading \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; *\n\n...\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; thread \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;enumerate\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; thread.isAlive():\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n            thread._Thread__stop()\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;(thread.getName()) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; could not be terminated\u0026apos;\u0026lt;/span\u0026gt;))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Give it a few seconds then your thread should be stopped. Check also the \u0026lt;code\u0026gt;thread._Thread__delete()\u0026lt;/code\u0026gt; method.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I\u0026apos;d recommend a \u0026lt;code\u0026gt;thread.quit()\u0026lt;/code\u0026gt; method for convenience. For example if you have a socket in your thread, I\u0026apos;d recommend creating a \u0026lt;code\u0026gt;quit()\u0026lt;/code\u0026gt; method in your socket-handle class, terminate the socket, then run a \u0026lt;code\u0026gt;thread._Thread__stop()\u0026lt;/code\u0026gt; inside of your \u0026lt;code\u0026gt;quit()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    "],"comment":["\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Bluebird75: Furthermore, I\u0026apos;m not sure I get the argument that threads should not be killed abruptly \u0026quot;because the thread might be holding a critical resource that must be closed properly\u0026quot;: this is also true from a main program, and main programs can be killed abruptly by the user (Ctrl-C in Unix, for instance)in which case they try to handle this possibility as nicely as possible.  So, I fail to see what is special with threads, and why they should not receive the same treatment as main programs (namely that they can be killed abruptly). :)  Could you elaborate on this?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/42973/eric-o-lebigot\u0026quot; title=\u0026quot;86,963 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Eric O Lebigot\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment7925419_325528\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-07-14 16:53:10Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 14, 2011 at 16:53\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@EOL: On the other hand, if all the resources that the thread is owning are local resources (open files, sockets), Linux is reasonably good at the process cleanup and this does not leak. I had cases though where I created a server using socket, and if I do a brutal interruption with Ctrl-C, I can non longer launch the program because it can not binds the socket. I need to wait 5 minutes. Proper solution was to catch Ctrl-C and do clean socket deconnection.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/13618/philippe-f\u0026quot; title=\u0026quot;11,248 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Philippe F\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment8229180_325528\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-08-02 09:45:03Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Aug 2, 2011 at 9:45\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Bluebird75: btw. you can use \u0026lt;code\u0026gt;SO_REUSEADDR\u0026lt;/code\u0026gt; socket option to avoid \u0026lt;code\u0026gt;Address already in use\u0026lt;/code\u0026gt; error.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/196206/messa\u0026quot; title=\u0026quot;23,038 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Messa\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment8905923_325528\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-09-11 09:09:55Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 11, 2011 at 9:09\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Note about this answer: at least for me (py2.6), I had to pass \u0026lt;code\u0026gt;None\u0026lt;/code\u0026gt; instead of \u0026lt;code\u0026gt;0\u0026lt;/code\u0026gt; for the \u0026lt;code\u0026gt;res != 1\u0026lt;/code\u0026gt; case, and I had to call \u0026lt;code\u0026gt;ctypes.c_long(tid)\u0026lt;/code\u0026gt; and pass that to any ctypes function rather than the tid directly.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/160205/walt-w\u0026quot; title=\u0026quot;3,213 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Walt W\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment10039180_325528\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-11-17 21:16:35Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 17, 2011 at 21:16\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Its worth mentioning that _stop is already occupied in the Python 3 threading library. As such, maybe use a different variable otherwise you will get an error.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/234261/diedthreetimes\u0026quot; title=\u0026quot;4,040 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;diedthreetimes\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment20020405_325528\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2013-01-18 01:51:59Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 18, 2013 at 1:51\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Thanks. I replaced queue.Queue with multiprocessing.JoinableQueue and followed this answer: \u0026lt;a href=\u0026quot;http://stackoverflow.com/a/11984760/911207\u0026quot;\u0026gt;stackoverflow.com/a/11984760/911207\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/911207/david-braun\u0026quot; title=\u0026quot;692 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;David Braun\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment39490167_7752174\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-08-15 17:30:31Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Aug 15, 2014 at 17:30\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026lt;code\u0026gt;multiprocessing\u0026lt;/code\u0026gt; is nice, but be aware that arguments is pickled to the new process. So if one of the arguments is something not-pickable (like a \u0026lt;code\u0026gt;logging.log\u0026lt;/code\u0026gt;) it might not be a good idea to use \u0026lt;code\u0026gt;multiprocessing\u0026lt;/code\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3588365/lyager\u0026quot; title=\u0026quot;63 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Lyager\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment86472205_7752174\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-04-09 09:10:39Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 9, 2018 at 9:10\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026lt;code\u0026gt;multiprocessing\u0026lt;/code\u0026gt; arguments are pickled to the new process on Windows, but Linux uses forking to copy them (Python 3.7, unsure what other versions). So you\u0026apos;ll end up with code that works on Linux but raises pickle errors on Windows.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2683842/nyanpasu64\u0026quot; title=\u0026quot;2,475 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;nyanpasu64\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment98185115_7752174\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2019-04-18 22:21:41Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 18, 2019 at 22:21\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 2 times\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026lt;code\u0026gt;multiprocessing\u0026lt;/code\u0026gt; with logging is tricky business. Need to use \u0026lt;code\u0026gt;QueueHandler\u0026lt;/code\u0026gt; (see \u0026lt;a href=\u0026quot;https://docs.python.org/3/howto/logging-cookbook.html#logging-to-a-single-file-from-multiple-processes\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this tutorial\u0026lt;/a\u0026gt;). I learned it the hard way.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/9723036/fanchen-bao\u0026quot; title=\u0026quot;1,973 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Fanchen Bao\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment104693522_7752174\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2019-12-09 00:10:33Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 9, 2019 at 0:10\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Shame I can\u0026apos;t spy on functions ran in multiprocessing... Thank you\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/4121573/adonis\u0026quot; title=\u0026quot;4,372 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Adonis\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment126679850_7752174\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2022-03-30 14:56:37Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Mar 30 at 14:56\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;It \u0026lt;i\u0026gt;will\u0026lt;/i\u0026gt; lead to deadlocks if the thread in question holds the GIL.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/966179/matthias-urlichs\u0026quot; title=\u0026quot;1,940 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Matthias Urlichs\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment53206198_323993\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-09-20 15:09:47Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 20, 2015 at 15:09\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;This doesn\u0026apos;t make any sense. The documentation clearly states, \u0026quot;this must be set before start() is called, otherwise RuntimeError is raised.\u0026quot; Thus, if I want to kill a thread that was not originally a daemon, how can I use this?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/405326/raffi-khatchadourian\u0026quot; title=\u0026quot;3,004 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Raffi Khatchadourian\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment10249578_1667825\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-11-29 19:21:14Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 29, 2011 at 19:21\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Raffi I think he\u0026apos;s suggesting you would set it in advance, knowing that when your main thread exits you also want the daemon threads to exit.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3427777/fantabolous\u0026quot; title=\u0026quot;19,202 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;fantabolous\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment38969652_1667825\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-07-31 07:06:04Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 31, 2014 at 7:06\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Isn\u0026apos;t setting a thread as a daemon something you would do in case you want the thread to keep running even if your main program shuts down?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/9502856/michele-piccolini\u0026quot; title=\u0026quot;2,235 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Michele Piccolini\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment106658722_1667825\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-02-19 09:41:35Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Feb 19, 2020 at 9:41\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@MichelePiccolini: Its the opposite: daemon threads \u0026lt;i\u0026gt;dont\u0026lt;/i\u0026gt; keep the process running when the others are gone.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/8586227/davis-herring\u0026quot; title=\u0026quot;31,129 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Davis Herring\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment108882251_1667825\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-05-02 01:57:14Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 2, 2020 at 1:57\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;This was the best answer for me, I just wanted to cleanup threads when the parent process shuts down.  Thanks!\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1448057/lin-meyer\u0026quot; title=\u0026quot;672 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Lin Meyer\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment117945126_1667825\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2021-03-20 13:49:27Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Mar 20, 2021 at 13:49\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Verified on Linux / Python 2.7, works like a charm.  This should be the official answer, it is much simpler.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1507649/paul-kenjora\u0026quot; title=\u0026quot;1,776 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Paul Kenjora\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment81722829_27261365\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-11-20 04:15:07Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 20, 2017 at 4:15\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Verified on Linux Ubuntu Server 17.10/Python 3.6.3 and works it.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2887238/marcos\u0026quot; title=\u0026quot;826 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Marcos\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment82323556_27261365\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-12-06 19:40:31Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 6, 2017 at 19:40\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;What is \u0026lt;code\u0026gt;pr()\u0026lt;/code\u0026gt; function?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2402577/alper\u0026quot; title=\u0026quot;2,376 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;alper\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment109608320_27261365\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-05-23 12:51:59Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 23, 2020 at 12:51\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@alper You create a new function that acts just like the \u0026lt;code\u0026gt;print\u0026lt;/code\u0026gt; function but \u0026lt;code\u0026gt;flush\u0026lt;/code\u0026gt;es the output and call it \u0026lt;code\u0026gt;pr\u0026lt;/code\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/13887747/pyzard\u0026quot; title=\u0026quot;340 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Pyzard\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment115883946_27261365\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2021-01-03 00:07:44Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 3, 2021 at 0:07\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;I don\u0026apos;t know why people don\u0026apos;t vote this up. What\u0026apos;s wrong with this answer? This one works for me though.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/9555168/fsevenm\u0026quot; title=\u0026quot;601 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;fsevenm\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment112872069_15185771\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-09-10 12:51:50Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 10, 2020 at 12:51\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@fsevenm: Processes are the same as threads. They run in separate memory-spaces, so there\u0026apos;s no easy sharing of global variables. and passing arguments involves pickling them and unpickling them on the other side. That plus the overhead of starting up and running separate processes involves a lot more other overhead that simply switching threads does. It\u0026apos;s apple vs oranges in many respects, so that is probably why  to answer your question.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/355230/martineau\u0026quot; title=\u0026quot;113,814 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;martineau\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment115012577_15185771\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-11-28 23:36:57Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 28, 2020 at 23:36\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@martineau I never said they were the same things. I actually started with a \u0026lt;i\u0026gt;\u0026quot;If you do NOT really need to have a Thread\u0026quot;\u0026lt;/i\u0026gt;, because that\u0026apos;s not always the case, and then continue with a \u0026lt;i\u0026gt;\u0026quot;If you REALLY need to use a Thread\u0026quot;\u0026lt;/i\u0026gt;...\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2128591/paolo-rovelli\u0026quot; title=\u0026quot;8,920 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Paolo Rovelli\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment119214728_15185771\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2021-05-08 12:01:48Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 8, 2021 at 12:01\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@PaoloRovelli: In the first part of my comment, I meant to write \u0026quot;Processes \u0026lt;b\u0026gt;aren\u0026apos;t\u0026lt;/b\u0026gt; the same as threads.\u0026quot;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/355230/martineau\u0026quot; title=\u0026quot;113,814 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;martineau\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment119217612_15185771\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2021-05-08 15:18:14Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 8, 2021 at 15:18\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;I\u0026apos;m using something like this to give my threads a \u0026lt;code\u0026gt;KeyboardInterrupt\u0026lt;/code\u0026gt; so they\u0026apos;ve a chance to clean up. If they\u0026apos;re STILL hanging after that, then \u0026lt;code\u0026gt;SystemExit\u0026lt;/code\u0026gt; is appropriate, or just kill the process from a terminal.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/420867/drevicko\u0026quot; title=\u0026quot;13,812 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;drevicko\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment29966664_15274929\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2013-11-21 01:01:31Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 21, 2013 at 1:01\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;This works if the thread is currently executing. It does not work if the thread is in a syscall; the exception will be silently ignored.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/966179/matthias-urlichs\u0026quot; title=\u0026quot;1,940 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Matthias Urlichs\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment37653762_15274929\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-06-22 16:08:59Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 22, 2014 at 16:08\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@JohanDahlin You could wait a bit (which, if you want to retry, you need to do anyway) and then do the isAlive() test. In any case, while this would work, I also wouldn\u0026apos;t guarantee that it doesn\u0026apos;t leave dangling references around. While it\u0026apos;s possible in theory to make thread killing safe in CPython, by judicious use of \u0026lt;code\u0026gt;pthread_cleanup_push()/_pop()\u0026lt;/code\u0026gt;, it\u0026apos;d be a lot of work to implement correctly and it would slow down the interpreter noticably.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/966179/matthias-urlichs\u0026quot; title=\u0026quot;1,940 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Matthias Urlichs\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment38281918_15274929\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-07-11 01:00:21Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 11, 2014 at 1:00\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Why is it so hard to just tell a thread, please kill yourself when you finish your current loop... I don\u0026apos;t get it.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/674726/mehdi\u0026quot; title=\u0026quot;1,247 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Mehdi\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment60611974_323981\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-04-08 14:37:10Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 8, 2016 at 14:37\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;There is no mechanism built into the cpu to identify a \u0026quot;loop\u0026quot; as such, the best you can hope for is to use some kind of signal that the code that is currently inside the loop will check once it exits. The correct way to handle thread synchronization is by cooperative means, the suspension, resuming, and killing of threads is functions that are meant for debuggers and the operating system, not application code.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/267/lasse-v-karlsen\u0026quot; title=\u0026quot;367,811 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Lasse V. Karlsen\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment60620848_323981\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-04-08 18:39:51Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 8, 2016 at 18:39\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Mehdi: if I (personally) am writing the code in the thread, yes, I agree with you.  But there are cases where I\u0026apos;m running third party libraries, and I don\u0026apos;t have access to that code\u0026apos;s execution loop.  That is one use case for the requested feature.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/701435/dan-h\u0026quot; title=\u0026quot;12,926 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Dan H\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment80410192_323981\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-10-13 14:16:29Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Oct 13, 2017 at 14:16\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@DanH It is \u0026lt;b\u0026gt;even worst\u0026lt;/b\u0026gt; with third party code as you have no idea what damage it can cause. If your third party library is not robust enough that it require to be killed, then you should do one of these: (1) ask the author to fix the problem, (2) use something else. If you really have no choice, then putting that code in a distinct process should be safer as some resources are shared only within a single process.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2208372/phil1970\u0026quot; title=\u0026quot;2,543 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Phil1970\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment94677230_323981\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-12-24 19:47:31Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 24, 2018 at 19:47\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;why was this post downvoted? What\u0026apos;s wrong w/ this post? It look exactly like what I need....\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2892621/jdoaktown\u0026quot; title=\u0026quot;3,263 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;JDOaktown\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment91117366_49877671\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-08-29 17:57:05Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Aug 29, 2018 at 17:57\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;While this post was not what I needed (I need to safely interrupt the parent from the child), I was definitely using \u0026lt;code\u0026gt;time.sleep\u0026lt;/code\u0026gt; in other parts of my code and making the polling interval small so my script would react faster, however this solution has all the benefits of making a small polling interval with none of the drawbacks (wasted computation). +1 Thanks a lot.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/6173665/a-kareem\u0026quot; title=\u0026quot;585 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;A Kareem\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment115709448_49877671\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-12-25 12:53:36Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 25, 2020 at 12:53\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;One of the few answers here that actually WORKS\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/216292/ponkadoodle\u0026quot; title=\u0026quot;5,663 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Ponkadoodle\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment25371023_325027\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2013-07-04 01:53:22Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 4, 2013 at 1:53\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Two problems with this solution: (a) installing a tracer with sys.settrace() will make your thread run slower. As much as 10 times slower if it\u0026apos;s compute bound. (b) won\u0026apos;t affect your thread while it\u0026apos;s in a system call.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/966179/matthias-urlichs\u0026quot; title=\u0026quot;1,940 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Matthias Urlichs\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment37654025_325027\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-06-22 16:22:40Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 22, 2014 at 16:22\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Another problem with the linked recipe is that it overrides the \u0026lt;code\u0026gt;start()\u0026lt;/code\u0026gt; method, whereas the \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/threading.html#thread-objects\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;current documentation\u0026lt;/a\u0026gt; explicitly states \u0026quot;In other words, \u0026lt;i\u0026gt;only\u0026lt;/i\u0026gt; override the \u0026lt;code\u0026gt;__init__()\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;run()\u0026lt;/code\u0026gt; methods of this class\u0026quot; (when defining a subclass).\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/355230/martineau\u0026quot; title=\u0026quot;113,814 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;martineau\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment115012659_325027\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-11-28 23:44:48Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 28, 2020 at 23:44\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;This is a clever way to inject checks for the \u0026lt;code\u0026gt;self.__stop\u0026lt;/code\u0026gt; being set into the thread. Note that like most of the other solutions here, it won\u0026apos;t actually interrupt a blocking call, since the trace function only gets called when a new local scope is entered. Also worth noting is that \u0026lt;code\u0026gt;sys.settrace\u0026lt;/code\u0026gt; really meant for implementing debuggers, profiles, etc. and as such is considered an implementation detail of CPython, and is not guaranteed to exist in other Python implementations.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2073595/dano\u0026quot; title=\u0026quot;86,326 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;dano\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment40125151_25670684\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-09-04 21:18:40Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 4, 2014 at 21:18\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 2 times\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@dano: One of the biggest problems with the \u0026lt;code\u0026gt;Thread2\u0026lt;/code\u0026gt; class is that it runs code approximately ten times slower. Some people might still find this acceptable.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/216356/noctis-skytower\u0026quot; title=\u0026quot;20,461 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Noctis Skytower\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment40148100_25670684\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-09-05 14:20:35Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 5, 2014 at 14:20\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;+1 on this slows down the code execution considerably.. I would suggest that the author of this solution include this information in the answer.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2091948/vishal\u0026quot; title=\u0026quot;2,958 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Vishal\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment91343707_25670684\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-09-06 05:47:26Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 6, 2018 at 5:47\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Why would raising \u0026lt;code\u0026gt;SystemExit\u0026lt;/code\u0026gt; on the \u0026lt;code\u0026gt;after_timeout\u0026lt;/code\u0026gt; thread do anything to the main thread (which is simply waiting on the former to exit in this example)?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/8586227/davis-herring\u0026quot; title=\u0026quot;31,129 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Davis Herring\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment107017250_50474315\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-03-02 17:08:01Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Mar 2, 2020 at 17:08\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@DavisHerring I\u0026apos;m not sure what you are getting at.  SystemExit kills the main thread, why do you think it WOULDNT do anything on the main thread?  Without that call, the program will just continue to wait on the child thread.  You could also ctrl+c or use any other means to kill the main thread but this is an example.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2123176/slumtrimpet\u0026quot; title=\u0026quot;2,927 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;slumtrimpet\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment108870646_50474315\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-05-01 16:51:30Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 1, 2020 at 16:51\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@slumtrimpet: \u0026lt;code\u0026gt;SystemExit\u0026lt;/code\u0026gt; has only two special properties: it doesnt produce a traceback (when any thread exits by throwing one), and if the \u0026lt;i\u0026gt;main\u0026lt;/i\u0026gt; thread exits by throwing one it sets the exit status (while nonetheless waiting for other non-daemon threads to exit).\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/8586227/davis-herring\u0026quot; title=\u0026quot;31,129 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Davis Herring\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment108873200_50474315\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-05-01 18:17:52Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 1, 2020 at 18:17\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;-1 Main thread continued work and was not interrupted by the \u0026lt;code\u0026gt;SystemExit\u0026lt;/code\u0026gt; raised from the child thread. Had to terminate the script from the terminal with \u0026lt;code\u0026gt;kill -9\u0026lt;/code\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/6173665/a-kareem\u0026quot; title=\u0026quot;585 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;A Kareem\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment115709279_50474315\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-12-25 12:39:44Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 25, 2020 at 12:39\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026lt;code\u0026gt;\u0026apos;Thread\u0026apos; object has no attribute \u0026apos;exit\u0026apos;\u0026lt;/code\u0026gt; in Python 3.6+\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3110740/skjerns\u0026quot; title=\u0026quot;1,543 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;skjerns\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment123617038_49288286\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2021-11-11 15:20:39Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 11, 2021 at 15:20\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;instead of thread exit, simply break the loop and you\u0026apos;ll exit the thread\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3964056/pande\u0026quot; title=\u0026quot;641 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;PanDe\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment126058626_49288286\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2022-03-02 00:22:39Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Mar 2 at 0:22\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;You don\u0026apos;t; not on Windows and not on Linux either. Reason: The thread in question might hold the GIL while you\u0026apos;re doing this (Python releases the GIL when you call into C). If it does, your program will instantly deadlock. Even if it doesn\u0026apos;t, finally: blocks will not be executed etc., so this is a very unsafe idea.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/966179/matthias-urlichs\u0026quot; title=\u0026quot;1,940 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Matthias Urlichs\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment37653624_16146048\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-06-22 16:00:38Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 22, 2014 at 16:00\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;If you\u0026apos;re using Python 3.7 you must be a time traveler from 2018. If you refer to 2021, provide a test with Python 3.9. \u0026lt;code\u0026gt;PyThreadState_SetAsyncExc\u0026lt;/code\u0026gt; method just does a \u0026quot;schedule\u0026quot; for an thread exit. It does \u0026lt;b\u0026gt;not\u0026lt;/b\u0026gt; kill a thread especially if it\u0026apos;s executing external C-libraries. Try to kill a \u0026lt;code\u0026gt;sleep(100)\u0026lt;/code\u0026gt; with your method. It will be \u0026quot;killed\u0026quot; after 100 seconds. It\u0026apos;s just as effective as the \u0026lt;code\u0026gt;while flag:\u0026lt;/code\u0026gt; -\u0026amp;gt; \u0026lt;code\u0026gt;flag = False\u0026lt;/code\u0026gt; method.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3149622/sausix\u0026quot; title=\u0026quot;241 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;sausix\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment120307175_65534218\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2021-06-21 12:42:56Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 21, 2021 at 12:42\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Tshepang It means that if there are any running non-daemonic threads in your application, the Python interpreter will continue running until \u0026lt;b\u0026gt;\u0026lt;i\u0026gt;all\u0026lt;/i\u0026gt; non-daemon\u0026lt;/b\u0026gt; threads are \u0026lt;b\u0026gt;done\u0026lt;/b\u0026gt;. If you don\u0026apos;t care if the thread(s) end when the program terminates, then making them daemon can be of use.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/6030424/tom-myddeltyn\u0026quot; title=\u0026quot;1,227 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Tom Myddeltyn\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment61698733_23920936\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-05-06 16:17:03Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 6, 2016 at 16:17\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 2 times\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;pure functional Thread with out any class\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/6628397/f-tamy\u0026quot; title=\u0026quot;540 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;F.Tamy\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment126138570_57791772\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2022-03-05 14:08:30Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Mar 5 at 14:08\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt; and yes, I know that both are not strictly \u0026quot;threading\u0026quot;, but they both work if your code fits (or can be made to fit) their model.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/966179/matthias-urlichs\u0026quot; title=\u0026quot;1,940 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Matthias Urlichs\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment53206158_24353228\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-09-20 15:08:02Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 20, 2015 at 15:08\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;its not stopping the thread, but passing over it\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1873689/alexela\u0026quot; title=\u0026quot;1,203 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;aleXela\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment128658922_72226463\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2022-07-02 18:54:43Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 2 at 18:54\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;More details on \u0026quot;this doesn\u0026apos;t really stop a thread\u0026quot; would be helpful.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/237165/2371\u0026quot; title=\u0026quot;947 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;2371\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment10746364_5817436\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-12-27 22:40:09Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 27, 2011 at 22:40\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Basically, calling the _Thread__stop method has no effect apart from telling Python that the thread is stopped. It can actually continue running. See \u0026lt;a href=\u0026quot;https://gist.github.com/2787191\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;gist.github.com/2787191\u0026lt;/a\u0026gt; for an example.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/123623/bluehorn\u0026quot; title=\u0026quot;2,737 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Bluehorn\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment13973897_5817436\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2012-05-25 10:26:25Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 25, 2012 at 10:26\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 2 times\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;This is plain wrong. \u0026lt;code\u0026gt;_Thread__stop()\u0026lt;/code\u0026gt; merely \u0026lt;i\u0026gt;marks a thread as stopped\u0026lt;/i\u0026gt;, it does not actually stop the thread! Never do this. \u0026lt;a href=\u0026quot;http://eli.thegreenplace.net/2011/08/22/how-not-to-set-a-timeout-on-a-computation-in-python/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Have a read\u0026lt;/a\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/343302/dotancohen\u0026quot; title=\u0026quot;27,972 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;dotancohen\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment25916629_5817436\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2013-07-21 07:16:53Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 21, 2013 at 7:16\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        "],"id":399,"title":"Is there any way to kill a Thread?","content":"\n                \n\u0026lt;p\u0026gt;Is it possible to terminate a running thread without setting/checking any flags/semaphores/etc.?\u0026lt;/p\u0026gt;\n    ","slug":"is-there-any-way-to-kill-a-thread-1657387859831","postType":"QUESTION","createdAt":"2022-07-09T17:30:59.000Z","updatedAt":"2022-07-09T17:30:59.000Z","tags":[{"id":2148,"name":"kill","slug":"kill","createdAt":"2022-07-09T17:30:59.000Z","updatedAt":"2022-07-09T17:30:59.000Z","Questions_Tags":{"questionId":399,"tagId":2148}},{"id":2149,"name":"terminate","slug":"terminate","createdAt":"2022-07-09T17:30:59.000Z","updatedAt":"2022-07-09T17:30:59.000Z","Questions_Tags":{"questionId":399,"tagId":2149}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"is-there-any-way-to-kill-a-thread-1657387859831"},"buildId":"4Y8KGE-c2lolBeBmcum_I","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>