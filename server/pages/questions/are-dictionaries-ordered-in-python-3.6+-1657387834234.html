<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-096e453de8a27667.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-e3d1b60e109d3ba1.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_buildManifest.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.hFcsiD code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-6e32c308-0"]{content:"hFcsiD,"}/*!sc*/
.ljvTUN .comment-item .comment-body .d-inline-flex.ai-center{text-align:right;}/*!sc*/
.ljvTUN .comment-item .comment-body .comment-date{float:right;}/*!sc*/
data-styled.g6[id="sc-6e32c308-1"]{content:"ljvTUN,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/are-dictionaries-ordered-in-python-3.6%2B-1657387834234#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-6e32c308-0 hFcsiD flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/are-dictionaries-ordered-in-python-3.6+-1657387834234">Are dictionaries ordered in Python 3.6+?</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/python-3.6">python-3.6</a></div></div><div class="question-content mt-5">
                
<p>Dictionaries are insertion ordered as of Python 3.6. It is described as a CPython implementation detail rather than a language feature. The <a href="https://docs.python.org/3.6/whatsnew/3.6.html#new-dict-implementation" rel="noreferrer">documentation</a> states:</p>
<blockquote>
<p><code>dict()</code> now uses a “compact” representation <a href="https://morepypy.blogspot.com/2015/01/faster-more-memory-efficient-and-more.html" rel="noreferrer">pioneered by PyPy</a>. The memory usage of the new dict() is between 20% and 25% smaller compared to Python 3.5. <a href="https://www.python.org/dev/peps/pep-0468" rel="noreferrer">PEP 468</a> (Preserving the order of **kwargs in a function.) is implemented by this. The order-preserving aspect of this new implementation is considered an implementation detail and should not be relied upon (this may change in the future, but it is desired to have this new dict implementation in the language for a few releases before changing the language spec to mandate order-preserving semantics for all current and future Python implementations; this also helps preserve backwards-compatibility with older versions of the language where random iteration order is still in effect, e.g. Python 3.5). (Contributed by INADA Naoki in <a href="https://bugs.python.org/issue27350" rel="noreferrer">issue 27350</a>. Idea <a href="https://mail.python.org/pipermail/python-dev/2012-December/123028.html" rel="noreferrer">originally suggested by Raymond Hettinger</a>.)</p>
</blockquote>
<p>How does the new dictionary implementation perform better than the older one while preserving element order?</p>
<hr>
<p>Update December 2017: <code>dict</code>s retaining insertion order is <a href="https://mail.python.org/pipermail/python-dev/2017-December/151283.html" rel="noreferrer">guaranteed</a> for Python 3.7</p>
    </div></div></div><div class="sc-6e32c308-1 ljvTUN flex text-xs pl-10 flex-col comment items-center justify-center"><h4 class="text-left mt-10 text-lg font-semibold">Comments</h4><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">See this thread on Python-Dev mailing-list : <a href="https://mail.python.org/pipermail/python-dev/2016-September/146327.html" rel="nofollow noreferrer">mail.python.org/pipermail/python-dev/2016-September/146327.html</a> if you haven't seen it ; it's basically a discussion around these subjects.</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/5050917/mgc" title="4,855 reputation" class="comment-user">mgc</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment67239805_39980323"><span title="2016-10-11 15:11:30Z, License: CC BY-SA 3.0" class="relativetime-clean">Oct 11, 2016 at 15:11</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">If kwargs are now supposed to be ordered (which is nice idea) and kwargs are dict, not OrderedDict, then I guess one could assume that dict keys will stay ordered in the future version of Python, despite the documentation says otherwise.</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/1353510/dmitriy-sintsov" title="3,471 reputation" class="comment-user">Dmitriy Sintsov</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment70427826_39980323"><span title="2017-01-12 12:32:01Z, License: CC BY-SA 3.0" class="relativetime-clean">Jan 12, 2017 at 12:32</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">@DmitriySintsov No, don't make that assumption. This was an issue brought up during the writing of the PEP that defines order preserving feature of <code>**kwargs</code> and as such the wording used is diplomatic: <i><code>**kwargs</code> in a function signature is now guaranteed to be an insertion-order-preserving <b>mapping</b></i>. They've used the term <i>mapping</i> in order to not force any other implementations to make the dict ordered (and use an <code>OrderedDict</code> internally) and as a way to signal that this isn't supposed to depend on the fact that the <code>dict</code> is not ordered.</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/4952130/dimitris-fasarakis-hilliard" title="137,482 reputation" class="comment-user">Dimitris Fasarakis Hilliard</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment71259558_39980323"><span title="2017-02-04 17:18:25Z, License: CC BY-SA 3.0" class="relativetime-clean">Feb 4, 2017 at 17:18</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">See more</button></div><div class="sc-6e32c308-2 bFXWFO"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
<p><strong>Are dictionaries ordered in Python 3.6+?</strong></p>
</blockquote>
<p>They are <strong>insertion ordered</strong><sup><strong>[1]</strong></sup>.</p>
<p><strong>As of Python 3.6</strong>, for the CPython implementation of Python, dictionaries <em>remember the order of items inserted</em>. <em>This is considered an implementation detail in Python 3.6</em>; you need to use <code>OrderedDict</code> if you want insertion ordering that's <em>guaranteed</em> across other implementations of Python (and other ordered behavior<sup><strong>[1]</strong></sup>).</p>
<p><strong>As of Python 3.7</strong>, this is a guaranteed language feature, not merely an implementation detail. <a href="https://mail.python.org/pipermail/python-dev/2017-December/151283.html" rel="noreferrer">From a python-dev message by GvR</a>:</p>
<blockquote>
<p>Make it so. "Dict keeps insertion order" is the ruling. Thanks!</p>
</blockquote>
<p>This simply means that <em>you can depend on it</em>. Other implementations of Python must also offer an insertion ordered dictionary if they wish to be a conforming implementation of Python 3.7.</p>
<hr>
<blockquote>
<p><strong>How does the Python <code>3.6</code> dictionary implementation perform better<sup>[2]</sup> than the older one while preserving element order?</strong></p>
</blockquote>
<p>Essentially, by <em>keeping two arrays</em>.</p>
<ul>
<li><p>The first array, <a href="https://github.com/python/cpython/blob/474ef63e38726d4bcde14f6104984a742c6cb747/Objects/dictobject.c#L551" rel="noreferrer"><code>dk_entries</code></a>, holds the entries (<a href="https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Objects/dict-common.h#L4" rel="noreferrer">of type <code> PyDictKeyEntry</code></a>) for the dictionary in the order that they were inserted. Preserving order is achieved by this being an append only array where new items are always inserted at the end (insertion order).</p>
</li>
<li><p>The second, <a href="https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Objects/dict-common.h#L70" rel="noreferrer"><code>dk_indices</code></a>, holds the indices for the <code>dk_entries</code> array (that is, values that indicate the position of the corresponding entry in <code>dk_entries</code>). This array acts as the hash table. When a key is hashed it leads to one of the indices stored in <code>dk_indices</code> and the corresponding entry is fetched by indexing <code>dk_entries</code>. Since only indices are kept, the type of this array depends on the overall size of the dictionary (ranging from type <a href="https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Objects/dict-common.h#L64" rel="noreferrer"><code>int8_t</code></a>(<code>1</code> byte) to <a href="https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Objects/dict-common.h#L66" rel="noreferrer"><code>int32_t</code></a>/<a href="https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Objects/dict-common.h#L68" rel="noreferrer"><code>int64_t</code></a> (<code>4</code>/<code>8</code> bytes) on <code>32</code>/<code>64</code> bit builds)</p>
</li>
</ul>
<p>In the previous implementation, a sparse array of type <code>PyDictKeyEntry</code> and size <code>dk_size</code> had to be allocated; unfortunately, it also resulted in a lot of empty space since that array was not allowed to be more than <code>2/3 * dk_size</code> full <a href="https://github.com/python/cpython/blob/474ef63e38726d4bcde14f6104984a742c6cb747/Objects/dictobject.c#L375" rel="noreferrer">for performance reasons</a>. (and the empty space <em>still</em> had <code>PyDictKeyEntry</code> size!).</p>
<p>This is not the case now since only the <em>required</em> entries are stored (those that have been inserted) and a sparse array of type <code>intX_t</code> (<code>X</code> depending on dict size) <code>2/3 * dk_size</code>s full is kept. The empty space changed from type <code>PyDictKeyEntry</code> to <code>intX_t</code>.</p>
<p>So, obviously, creating a sparse array of type <code>PyDictKeyEntry</code> is much more memory demanding than a sparse array for storing <code>int</code>s.</p>
<p>You can see the full conversation <a href="https://mail.python.org/pipermail/python-dev/2016-September/146327.html" rel="noreferrer">on Python-Dev</a> regarding this feature if interested, it is a good read.</p>
<hr>
<p><a href="https://mail.python.org/pipermail/python-dev/2012-December/123028.html" rel="noreferrer">In the original proposal made by Raymond Hettinger</a>, a visualization of the data structures used can be seen which captures the gist of the idea.</p>
<blockquote>
<p>For example, the dictionary:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">d = {<span class="hljs-string">'timmy'</span>: <span class="hljs-string">'red'</span>, <span class="hljs-string">'barry'</span>: <span class="hljs-string">'green'</span>, <span class="hljs-string">'guido'</span>: <span class="hljs-string">'blue'</span>}
</code></pre>
<p>is currently stored as [keyhash, key, value]:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">entries = [[<span class="hljs-string">'--'</span>, <span class="hljs-string">'--'</span>, <span class="hljs-string">'--'</span>],
           [-<span class="hljs-number">8522787127447073495</span>, <span class="hljs-string">'barry'</span>, <span class="hljs-string">'green'</span>],
           [<span class="hljs-string">'--'</span>, <span class="hljs-string">'--'</span>, <span class="hljs-string">'--'</span>],
           [<span class="hljs-string">'--'</span>, <span class="hljs-string">'--'</span>, <span class="hljs-string">'--'</span>],
           [<span class="hljs-string">'--'</span>, <span class="hljs-string">'--'</span>, <span class="hljs-string">'--'</span>],
           [-<span class="hljs-number">9092791511155847987</span>, <span class="hljs-string">'timmy'</span>, <span class="hljs-string">'red'</span>],
           [<span class="hljs-string">'--'</span>, <span class="hljs-string">'--'</span>, <span class="hljs-string">'--'</span>],
           [-<span class="hljs-number">6480567542315338377</span>, <span class="hljs-string">'guido'</span>, <span class="hljs-string">'blue'</span>]]
</code></pre>
<p>Instead, the data should be organized as follows:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">indices =  [<span class="hljs-literal">None</span>, <span class="hljs-number">1</span>, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">None</span>, <span class="hljs-number">2</span>]
entries =  [[-<span class="hljs-number">9092791511155847987</span>, <span class="hljs-string">'timmy'</span>, <span class="hljs-string">'red'</span>],
            [-<span class="hljs-number">8522787127447073495</span>, <span class="hljs-string">'barry'</span>, <span class="hljs-string">'green'</span>],
            [-<span class="hljs-number">6480567542315338377</span>, <span class="hljs-string">'guido'</span>, <span class="hljs-string">'blue'</span>]]
</code></pre>
</blockquote>
<p>As you can visually now see, in the original proposal, a lot of space is essentially empty to reduce collisions and make look-ups faster. With the new approach, you reduce the memory required by moving the sparseness where it's really required, in the indices.</p>
<hr>
<sub>
[1]: I say "insertion ordered" and not "ordered" since, with the existence of OrderedDict, "ordered" suggests further behavior that the `dict` object *doesn't provide*. OrderedDicts are reversible, provide order sensitive methods and, mainly, provide an order-sensive equality tests (`==`, `!=`). `dict`s currently don't offer any of those behaviors/methods.
</sub>
<hr>
<sub>
[2]: The new dictionary implementations performs better **memory wise** by being designed more compactly; that's the main benefit here. Speed wise, the difference isn't so drastic, there's places where the new dict might introduce slight regressions (<a href="https://github.com/python/cpython/blob/474ef63e38726d4bcde14f6104984a742c6cb747/Objects/dictobject.c#L375" rel="noreferrer">key-lookups, for example</a>) while in others (iteration and resizing come to mind) a performance boost should be present. 
</sub>
<sub>
Overall, the performance of the dictionary, especially in real-life situations, improves due to the compactness introduced.  
</sub>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Below is answering the original first question:</p>

<blockquote>
  <p>Should I use <code>dict</code> or <code>OrderedDict</code> in Python 3.6?</p>
</blockquote>

<p>I think this sentence from the documentation is actually enough to answer your question</p>

<blockquote>
  <p>The order-preserving aspect of this new implementation is considered an implementation detail and should not be relied upon</p>
</blockquote>

<p><code>dict</code> is not explicitly meant to be an ordered collection, so if you want to stay consistent and not rely on a side effect of the new implementation you should stick with <code>OrderedDict</code>.</p>

<p>Make your code future proof :)</p>

<p>There's a debate about that <a href="https://news.ycombinator.com/item?id=12460936" rel="noreferrer">here</a>.</p>

<p>EDIT: <strong>Python 3.7 will keep this as a feature</strong> <a href="https://stackoverflow.com/a/47837132/1447525">see</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Update:
Guido van Rossum <a href="https://mail.python.org/pipermail/python-dev/2017-December/151283.html" rel="noreferrer">announced on the mailing list</a> that as of Python 3.7 <code>dict</code>s in all Python implementations must preserve insertion order.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I wanted to add to the discussion above but don't have the reputation to comment.</p>
<p>Python 3.8 includes the <code>reversed()</code> function on dictionaries (removing another difference from <code>OrderedDict</code>.</p>
<blockquote>
<p>Dict and dictviews are now iterable in reversed insertion order using reversed(). (Contributed by Rémi Lapeyre in bpo-33462.)
<a href="https://docs.python.org/3.8/whatsnew/3.8.html" rel="noreferrer">See what's new in python 3.8</a></p>
</blockquote>
<p>I don't see any mention of the equality operator or other features of <code>OrderedDict</code> so they are still not entirely the same.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>To fully answer this question in 2020, let me quote several statements from <a href="https://docs.python.org/3/library/stdtypes.html?highlight=dict#mapping-types-dict" rel="noreferrer">official Python docs</a>:</p>
<blockquote>
<p>Changed in version 3.7: Dictionary order is guaranteed to be insertion order. This behavior was an implementation detail of CPython from 3.6.</p>
</blockquote>
<blockquote>
<p>Changed in version 3.7: Dictionary order is guaranteed to be insertion order.</p>
</blockquote>
<blockquote>
<p>Changed in version 3.8: Dictionaries are now reversible.</p>
</blockquote>
<blockquote>
<p>Dictionaries and dictionary views are reversible.</p>
</blockquote>
<p>A <a href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" rel="noreferrer">statement</a> regarding OrderedDict vs Dict:</p>
<blockquote>
<p>Ordered dictionaries are just like regular dictionaries but have some extra capabilities relating to ordering operations. They have become less important now that the built-in dict class gained the ability to remember insertion order (this new behavior became guaranteed in Python 3.7).</p>
</blockquote>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If order is so important to determine like whether two dictionaries are equal, you still need to use <code>OrderedDict</code>.<br>
To implement this feature, OrderedDict uses more memory (a bidirectional linked list is maintained internally)</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> OrderedDict

a = {<span class="hljs-string">"a"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">2</span>}
b = {<span class="hljs-string">"b"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"a"</span>: <span class="hljs-number">1</span>}
c = OrderedDict({<span class="hljs-string">"a"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">2</span>})
d = OrderedDict({<span class="hljs-string">"b"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"a"</span>: <span class="hljs-number">1</span>})

<span class="hljs-built_in">print</span>(a == b)  <span class="hljs-comment"># True</span>
<span class="hljs-built_in">print</span>(c == d)  <span class="hljs-comment"># False</span>
<span class="hljs-built_in">print</span>(a == c)  <span class="hljs-comment"># True</span>
<span class="hljs-built_in">print</span>(a == d)  <span class="hljs-comment"># True</span>
</code></pre>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Are dictionaries ordered in Python 3.6+?\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;They are \u0026lt;strong\u0026gt;insertion ordered\u0026lt;/strong\u0026gt;\u0026lt;sup\u0026gt;\u0026lt;strong\u0026gt;[1]\u0026lt;/strong\u0026gt;\u0026lt;/sup\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;As of Python 3.6\u0026lt;/strong\u0026gt;, for the CPython implementation of Python, dictionaries \u0026lt;em\u0026gt;remember the order of items inserted\u0026lt;/em\u0026gt;. \u0026lt;em\u0026gt;This is considered an implementation detail in Python 3.6\u0026lt;/em\u0026gt;; you need to use \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt; if you want insertion ordering that\u0026apos;s \u0026lt;em\u0026gt;guaranteed\u0026lt;/em\u0026gt; across other implementations of Python (and other ordered behavior\u0026lt;sup\u0026gt;\u0026lt;strong\u0026gt;[1]\u0026lt;/strong\u0026gt;\u0026lt;/sup\u0026gt;).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;As of Python 3.7\u0026lt;/strong\u0026gt;, this is a guaranteed language feature, not merely an implementation detail. \u0026lt;a href=\u0026quot;https://mail.python.org/pipermail/python-dev/2017-December/151283.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;From a python-dev message by GvR\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Make it so. \u0026quot;Dict keeps insertion order\u0026quot; is the ruling. Thanks!\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;This simply means that \u0026lt;em\u0026gt;you can depend on it\u0026lt;/em\u0026gt;. Other implementations of Python must also offer an insertion ordered dictionary if they wish to be a conforming implementation of Python 3.7.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;How does the Python \u0026lt;code\u0026gt;3.6\u0026lt;/code\u0026gt; dictionary implementation perform better\u0026lt;sup\u0026gt;[2]\u0026lt;/sup\u0026gt; than the older one while preserving element order?\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;Essentially, by \u0026lt;em\u0026gt;keeping two arrays\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The first array, \u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/474ef63e38726d4bcde14f6104984a742c6cb747/Objects/dictobject.c#L551\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;dk_entries\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, holds the entries (\u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Objects/dict-common.h#L4\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;of type \u0026lt;code\u0026gt; PyDictKeyEntry\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;) for the dictionary in the order that they were inserted. Preserving order is achieved by this being an append only array where new items are always inserted at the end (insertion order).\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The second, \u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Objects/dict-common.h#L70\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;dk_indices\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, holds the indices for the \u0026lt;code\u0026gt;dk_entries\u0026lt;/code\u0026gt; array (that is, values that indicate the position of the corresponding entry in \u0026lt;code\u0026gt;dk_entries\u0026lt;/code\u0026gt;). This array acts as the hash table. When a key is hashed it leads to one of the indices stored in \u0026lt;code\u0026gt;dk_indices\u0026lt;/code\u0026gt; and the corresponding entry is fetched by indexing \u0026lt;code\u0026gt;dk_entries\u0026lt;/code\u0026gt;. Since only indices are kept, the type of this array depends on the overall size of the dictionary (ranging from type \u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Objects/dict-common.h#L64\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;int8_t\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;(\u0026lt;code\u0026gt;1\u0026lt;/code\u0026gt; byte) to \u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Objects/dict-common.h#L66\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;int32_t\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;/\u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/c30098c8c6014f3340a369a31df9c74bdbacc269/Objects/dict-common.h#L68\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;int64_t\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; (\u0026lt;code\u0026gt;4\u0026lt;/code\u0026gt;/\u0026lt;code\u0026gt;8\u0026lt;/code\u0026gt; bytes) on \u0026lt;code\u0026gt;32\u0026lt;/code\u0026gt;/\u0026lt;code\u0026gt;64\u0026lt;/code\u0026gt; bit builds)\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;In the previous implementation, a sparse array of type \u0026lt;code\u0026gt;PyDictKeyEntry\u0026lt;/code\u0026gt; and size \u0026lt;code\u0026gt;dk_size\u0026lt;/code\u0026gt; had to be allocated; unfortunately, it also resulted in a lot of empty space since that array was not allowed to be more than \u0026lt;code\u0026gt;2/3 * dk_size\u0026lt;/code\u0026gt; full \u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/474ef63e38726d4bcde14f6104984a742c6cb747/Objects/dictobject.c#L375\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;for performance reasons\u0026lt;/a\u0026gt;. (and the empty space \u0026lt;em\u0026gt;still\u0026lt;/em\u0026gt; had \u0026lt;code\u0026gt;PyDictKeyEntry\u0026lt;/code\u0026gt; size!).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This is not the case now since only the \u0026lt;em\u0026gt;required\u0026lt;/em\u0026gt; entries are stored (those that have been inserted) and a sparse array of type \u0026lt;code\u0026gt;intX_t\u0026lt;/code\u0026gt; (\u0026lt;code\u0026gt;X\u0026lt;/code\u0026gt; depending on dict size) \u0026lt;code\u0026gt;2/3 * dk_size\u0026lt;/code\u0026gt;s full is kept. The empty space changed from type \u0026lt;code\u0026gt;PyDictKeyEntry\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;intX_t\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So, obviously, creating a sparse array of type \u0026lt;code\u0026gt;PyDictKeyEntry\u0026lt;/code\u0026gt; is much more memory demanding than a sparse array for storing \u0026lt;code\u0026gt;int\u0026lt;/code\u0026gt;s.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You can see the full conversation \u0026lt;a href=\u0026quot;https://mail.python.org/pipermail/python-dev/2016-September/146327.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;on Python-Dev\u0026lt;/a\u0026gt; regarding this feature if interested, it is a good read.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://mail.python.org/pipermail/python-dev/2012-December/123028.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;In the original proposal made by Raymond Hettinger\u0026lt;/a\u0026gt;, a visualization of the data structures used can be seen which captures the gist of the idea.\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;For example, the dictionary:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;d = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;timmy\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;red\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;barry\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;green\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;guido\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;blue\u0026apos;\u0026lt;/span\u0026gt;}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;is currently stored as [keyhash, key, value]:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;entries = [[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;],\n           [-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8522787127447073495\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;barry\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;green\u0026apos;\u0026lt;/span\u0026gt;],\n           [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;],\n           [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;],\n           [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;],\n           [-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9092791511155847987\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;timmy\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;red\u0026apos;\u0026lt;/span\u0026gt;],\n           [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;--\u0026apos;\u0026lt;/span\u0026gt;],\n           [-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6480567542315338377\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;guido\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;blue\u0026apos;\u0026lt;/span\u0026gt;]]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Instead, the data should be organized as follows:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;indices =  [\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]\nentries =  [[-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9092791511155847987\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;timmy\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;red\u0026apos;\u0026lt;/span\u0026gt;],\n            [-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8522787127447073495\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;barry\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;green\u0026apos;\u0026lt;/span\u0026gt;],\n            [-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6480567542315338377\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;guido\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;blue\u0026apos;\u0026lt;/span\u0026gt;]]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;As you can visually now see, in the original proposal, a lot of space is essentially empty to reduce collisions and make look-ups faster. With the new approach, you reduce the memory required by moving the sparseness where it\u0026apos;s really required, in the indices.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;sub\u0026gt;\n[1]: I say \u0026quot;insertion ordered\u0026quot; and not \u0026quot;ordered\u0026quot; since, with the existence of OrderedDict, \u0026quot;ordered\u0026quot; suggests further behavior that the `dict` object *doesn\u0026apos;t provide*. OrderedDicts are reversible, provide order sensitive methods and, mainly, provide an order-sensive equality tests (`==`, `!=`). `dict`s currently don\u0026apos;t offer any of those behaviors/methods.\n\u0026lt;/sub\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;sub\u0026gt;\n[2]: The new dictionary implementations performs better **memory wise** by being designed more compactly; that\u0026apos;s the main benefit here. Speed wise, the difference isn\u0026apos;t so drastic, there\u0026apos;s places where the new dict might introduce slight regressions (\u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/474ef63e38726d4bcde14f6104984a742c6cb747/Objects/dictobject.c#L375\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;key-lookups, for example\u0026lt;/a\u0026gt;) while in others (iteration and resizing come to mind) a performance boost should be present. \n\u0026lt;/sub\u0026gt;\n\u0026lt;sub\u0026gt;\nOverall, the performance of the dictionary, especially in real-life situations, improves due to the compactness introduced.  \n\u0026lt;/sub\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Below is answering the original first question:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Should I use \u0026lt;code\u0026gt;dict\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt; in Python 3.6?\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;I think this sentence from the documentation is actually enough to answer your question\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;The order-preserving aspect of this new implementation is considered an implementation detail and should not be relied upon\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;dict\u0026lt;/code\u0026gt; is not explicitly meant to be an ordered collection, so if you want to stay consistent and not rely on a side effect of the new implementation you should stick with \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Make your code future proof :)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;There\u0026apos;s a debate about that \u0026lt;a href=\u0026quot;https://news.ycombinator.com/item?id=12460936\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;EDIT: \u0026lt;strong\u0026gt;Python 3.7 will keep this as a feature\u0026lt;/strong\u0026gt; \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/47837132/1447525\u0026quot;\u0026gt;see\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Update:\nGuido van Rossum \u0026lt;a href=\u0026quot;https://mail.python.org/pipermail/python-dev/2017-December/151283.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;announced on the mailing list\u0026lt;/a\u0026gt; that as of Python 3.7 \u0026lt;code\u0026gt;dict\u0026lt;/code\u0026gt;s in all Python implementations must preserve insertion order.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I wanted to add to the discussion above but don\u0026apos;t have the reputation to comment.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Python 3.8 includes the \u0026lt;code\u0026gt;reversed()\u0026lt;/code\u0026gt; function on dictionaries (removing another difference from \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Dict and dictviews are now iterable in reversed insertion order using reversed(). (Contributed by Rémi Lapeyre in bpo-33462.)\n\u0026lt;a href=\u0026quot;https://docs.python.org/3.8/whatsnew/3.8.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;See what\u0026apos;s new in python 3.8\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;I don\u0026apos;t see any mention of the equality operator or other features of \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt; so they are still not entirely the same.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To fully answer this question in 2020, let me quote several statements from \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/stdtypes.html?highlight=dict#mapping-types-dict\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;official Python docs\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Changed in version 3.7: Dictionary order is guaranteed to be insertion order. This behavior was an implementation detail of CPython from 3.6.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Changed in version 3.7: Dictionary order is guaranteed to be insertion order.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Changed in version 3.8: Dictionaries are now reversible.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Dictionaries and dictionary views are reversible.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;A \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/collections.html#collections.OrderedDict\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;statement\u0026lt;/a\u0026gt; regarding OrderedDict vs Dict:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Ordered dictionaries are just like regular dictionaries but have some extra capabilities relating to ordering operations. They have become less important now that the built-in dict class gained the ability to remember insertion order (this new behavior became guaranteed in Python 3.7).\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If order is so important to determine like whether two dictionaries are equal, you still need to use \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt;.\u0026lt;br\u0026gt;\nTo implement this feature, OrderedDict uses more memory (a bidirectional linked list is maintained internally)\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; collections \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; OrderedDict\n\na = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;}\nb = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;}\nc = OrderedDict({\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;})\nd = OrderedDict({\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;})\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(a == b)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# True\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(c == d)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# False\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(a == c)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# True\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(a == d)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# True\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"comment":["\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;See this thread on Python-Dev mailing-list : \u0026lt;a href=\u0026quot;https://mail.python.org/pipermail/python-dev/2016-September/146327.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;mail.python.org/pipermail/python-dev/2016-September/146327.html\u0026lt;/a\u0026gt; if you haven\u0026apos;t seen it ; it\u0026apos;s basically a discussion around these subjects.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/5050917/mgc\u0026quot; title=\u0026quot;4,855 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;mgc\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment67239805_39980323\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-10-11 15:11:30Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Oct 11, 2016 at 15:11\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;If kwargs are now supposed to be ordered (which is nice idea) and kwargs are dict, not OrderedDict, then I guess one could assume that dict keys will stay ordered in the future version of Python, despite the documentation says otherwise.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1353510/dmitriy-sintsov\u0026quot; title=\u0026quot;3,471 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Dmitriy Sintsov\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment70427826_39980323\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-01-12 12:32:01Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 12, 2017 at 12:32\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@DmitriySintsov No, don\u0026apos;t make that assumption. This was an issue brought up during the writing of the PEP that defines order preserving feature of \u0026lt;code\u0026gt;**kwargs\u0026lt;/code\u0026gt; and as such the wording used is diplomatic: \u0026lt;i\u0026gt;\u0026lt;code\u0026gt;**kwargs\u0026lt;/code\u0026gt; in a function signature is now guaranteed to be an insertion-order-preserving \u0026lt;b\u0026gt;mapping\u0026lt;/b\u0026gt;\u0026lt;/i\u0026gt;. They\u0026apos;ve used the term \u0026lt;i\u0026gt;mapping\u0026lt;/i\u0026gt; in order to not force any other implementations to make the dict ordered (and use an \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt; internally) and as a way to signal that this isn\u0026apos;t supposed to depend on the fact that the \u0026lt;code\u0026gt;dict\u0026lt;/code\u0026gt; is not ordered.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/4952130/dimitris-fasarakis-hilliard\u0026quot; title=\u0026quot;137,482 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Dimitris Fasarakis Hilliard\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment71259558_39980323\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-02-04 17:18:25Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Feb 4, 2017 at 17:18\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;A good \u0026lt;a href=\u0026quot;https://www.youtube.com/watch?v=p33CVV29OG8\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;video explanation\u0026lt;/a\u0026gt; from Raymond Hettinger\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1953800/alex\u0026quot; title=\u0026quot;17,232 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Alex\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment77477255_39980323\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-07-22 16:38:07Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 22, 2017 at 16:38\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@wazoox, the ordering and complexity of the hashmap hasn\u0026apos;t changed. The change makes the hashmap smaller by wasting less space, and the saved space is (usually?) more than the auxiliary array takes. Faster, smaller, ordered - you get to pick all 3.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/174728/john-la-rooy\u0026quot; title=\u0026quot;282,386 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;John La Rooy\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment78114423_39980323\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-08-08 20:28:07Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Aug 8, 2017 at 20:28\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;So, what happens when an item is removed? is the \u0026lt;code\u0026gt;entries\u0026lt;/code\u0026gt; list resized? or is a blank space kept? or is it compressed from time to time?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/671543/njzk2\u0026quot; title=\u0026quot;38,166 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;njzk2\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment67248785_39980744\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-10-11 19:19:15Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Oct 11, 2016 at 19:19\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@njzk2 When an item is removed, the corresponding index is replaced by \u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/master/Objects/dict-common.h#L19\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;DKIX_DUMMY\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; with a value of \u0026lt;code\u0026gt;-2\u0026lt;/code\u0026gt; and the entry in the \u0026lt;code\u0026gt;entry\u0026lt;/code\u0026gt; array \u0026lt;a href=\u0026quot;https://github.com/python/cpython/blob/master/Objects/dictobject.c#L1823\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;replaced by \u0026lt;code\u0026gt;NULL\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, when inserting is performed the new values are appended to the entries array, Haven\u0026apos;t been able to discern yet, but pretty sure when the indices fills up beyond the \u0026lt;code\u0026gt;2/3\u0026lt;/code\u0026gt; threshold resizing is performed. This can lead to shrinking instead of growing if many \u0026lt;code\u0026gt;DUMMY\u0026lt;/code\u0026gt; entries exist.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/4952130/dimitris-fasarakis-hilliard\u0026quot; title=\u0026quot;137,482 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Dimitris Fasarakis Hilliard\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment67250220_39980744\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-10-11 20:03:10Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Oct 11, 2016 at 20:03\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Chris_Rands Nope, the only actual regression I\u0026apos;ve seen is on the tracker in a \u0026lt;a href=\u0026quot;http://bugs.python.org/msg275587\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;message by Victor\u0026lt;/a\u0026gt;. Other than that microbenchmark, I\u0026apos;ve seen no other issue/message indicating a serious speed difference in real-life work loads. There\u0026apos;s places where the new dict might introduce slight regressions (key-lookups, for example) while in others (iteration and resizing come to mind) a performance boost would be present.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/4952130/dimitris-fasarakis-hilliard\u0026quot; title=\u0026quot;137,482 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Dimitris Fasarakis Hilliard\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment72688634_39980744\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-03-14 13:26:29Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Mar 14, 2017 at 13:26\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026lt;i\u0026gt;Correction on the resizing part\u0026lt;/i\u0026gt;: Dictionaries don\u0026apos;t resize when you delete items, they re-calculate when you re-insert. So, if a dict is created with \u0026lt;code\u0026gt;d = {i:i for i in range(100)}\u0026lt;/code\u0026gt; and you \u0026lt;code\u0026gt;.pop\u0026lt;/code\u0026gt; all items w/o inserting, the size won\u0026apos;t change. When you add to it again,  \u0026lt;code\u0026gt;d[1] = 1\u0026lt;/code\u0026gt;, the appropriate size is calculated and the dict resizes.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/4952130/dimitris-fasarakis-hilliard\u0026quot; title=\u0026quot;137,482 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Dimitris Fasarakis Hilliard\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment77900405_39980744\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-08-02 19:47:06Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Aug 2, 2017 at 19:47\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Chris_Rands I\u0026apos;m pretty sure it is staying. The thing is, and the reason why I changed my answer to remove blanket statements about \u0026apos;\u0026lt;code\u0026gt;dict\u0026lt;/code\u0026gt; being ordered\u0026apos;, \u0026lt;code\u0026gt;dict\u0026lt;/code\u0026gt;s aren\u0026apos;t ordered in the sense \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt;s are.  The notable issue is equality. \u0026lt;code\u0026gt;dict\u0026lt;/code\u0026gt;s have order insensitive \u0026lt;code\u0026gt;==\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt;s have order sensitive ones. Dumping \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt;s and changing \u0026lt;code\u0026gt;dicts\u0026lt;/code\u0026gt; to now have order sensitive comparisons could lead to a lot of breakage in old code.  I\u0026apos;m guessing the only thing that might change about \u0026lt;code\u0026gt;OrderedDict\u0026lt;/code\u0026gt;s is its implementation.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/4952130/dimitris-fasarakis-hilliard\u0026quot; title=\u0026quot;137,482 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Dimitris Fasarakis Hilliard\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment86533231_39980744\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-04-10 16:57:21Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 10, 2018 at 16:57\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Now that key ordering is the official standard, what is the purpose of the OrderedDict? Or, is it now redundant?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/5970766/jonny-waffles\u0026quot; title=\u0026quot;712 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Jonny Waffles\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment88730702_47837132\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-06-14 18:54:31Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 14, 2018 at 18:54\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;I guess OrderedDict will not be redundant because it has the \u0026lt;code\u0026gt;move_to_end\u0026lt;/code\u0026gt; method and its equality is order sensitive: \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/collections.html#collections.OrderedDict\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;docs.python.org/3/library/\u0026lt;/a\u0026gt;. See the note on Jim Fasarakis Hilliard\u0026apos;s answer.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/145349/fjsj\u0026quot; title=\u0026quot;10,758 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;fjsj\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment88766293_47837132\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-06-15 20:05:13Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 15, 2018 at 20:05\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@JonnyWaffles see Jims answer and this Q\u0026amp;amp;A \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/50872498/will-ordereddict-become-redundant-in-python-3-7/\u0026quot; title=\u0026quot;will ordereddict become redundant in python 3 7\u0026quot;\u0026gt;stackoverflow.com/questions/50872498/\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/6260170/chris-rands\u0026quot; title=\u0026quot;35,427 reputation\u0026quot; class=\u0026quot;comment-user owner\u0026quot;\u0026gt;Chris_Rands\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment89056121_47837132\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-06-25 21:15:16Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 25, 2018 at 21:15\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;If you want your code to run the same on 2.7 and 3.6/3.7+, you need to use OrderedDict\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/147562/boatcoder\u0026quot; title=\u0026quot;16,473 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;boatcoder\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment89166138_47837132\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-06-28 17:51:36Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 28, 2018 at 17:51\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Likely there will be an \u0026quot;UnorderedDict\u0026quot; soon for folks that like to hassle their dicts for security reasons ;p\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/8928024/zf007\u0026quot; title=\u0026quot;3,561 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;ZF007\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment99435244_47837132\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2019-06-03 00:18:45Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 3, 2019 at 0:18\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        "],"id":390,"title":"Are dictionaries ordered in Python 3.6+?","content":"\n                \n\u0026lt;p\u0026gt;Dictionaries are insertion ordered as of Python 3.6. It is described as a CPython implementation detail rather than a language feature. The \u0026lt;a href=\u0026quot;https://docs.python.org/3.6/whatsnew/3.6.html#new-dict-implementation\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;documentation\u0026lt;/a\u0026gt; states:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;dict()\u0026lt;/code\u0026gt; now uses a “compact” representation \u0026lt;a href=\u0026quot;https://morepypy.blogspot.com/2015/01/faster-more-memory-efficient-and-more.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;pioneered by PyPy\u0026lt;/a\u0026gt;. The memory usage of the new dict() is between 20% and 25% smaller compared to Python 3.5. \u0026lt;a href=\u0026quot;https://www.python.org/dev/peps/pep-0468\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;PEP 468\u0026lt;/a\u0026gt; (Preserving the order of **kwargs in a function.) is implemented by this. The order-preserving aspect of this new implementation is considered an implementation detail and should not be relied upon (this may change in the future, but it is desired to have this new dict implementation in the language for a few releases before changing the language spec to mandate order-preserving semantics for all current and future Python implementations; this also helps preserve backwards-compatibility with older versions of the language where random iteration order is still in effect, e.g. Python 3.5). (Contributed by INADA Naoki in \u0026lt;a href=\u0026quot;https://bugs.python.org/issue27350\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;issue 27350\u0026lt;/a\u0026gt;. Idea \u0026lt;a href=\u0026quot;https://mail.python.org/pipermail/python-dev/2012-December/123028.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;originally suggested by Raymond Hettinger\u0026lt;/a\u0026gt;.)\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;How does the new dictionary implementation perform better than the older one while preserving element order?\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;Update December 2017: \u0026lt;code\u0026gt;dict\u0026lt;/code\u0026gt;s retaining insertion order is \u0026lt;a href=\u0026quot;https://mail.python.org/pipermail/python-dev/2017-December/151283.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;guaranteed\u0026lt;/a\u0026gt; for Python 3.7\u0026lt;/p\u0026gt;\n    ","slug":"are-dictionaries-ordered-in-python-3.6+-1657387834234","postType":"QUESTION","createdAt":"2022-07-09T17:30:34.000Z","updatedAt":"2022-07-09T17:30:34.000Z","tags":[{"id":2115,"name":"python-3.6","slug":"python-3.6","createdAt":"2022-07-09T17:30:34.000Z","updatedAt":"2022-07-09T17:30:34.000Z","Questions_Tags":{"questionId":390,"tagId":2115}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"are-dictionaries-ordered-in-python-3.6+-1657387834234"},"buildId":"4Y8KGE-c2lolBeBmcum_I","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>