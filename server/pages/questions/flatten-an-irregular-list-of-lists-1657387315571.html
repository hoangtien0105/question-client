<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>Flatten an irregular list of lists | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="Yes, I know this subject has been covered before (here, here, here, here), but as far as I know, all solutions, except for one, fail on a list like this:

L = [[[1, 2, 3], [4, 5]], 6]


Where the desired output is

[1, 2, 3, 4, 5, 6]


Or perhaps even better, an iterator. The only solution I saw that works for an arbitrary nesting is found in this question:

def flatten(x):
    result = []
    for el in x:
        if hasattr(el, &quot;__iter__&quot;) and not isinstance(el, basestring):
            result.extend(flatten(el))
        else:
            result.append(el)
    return result

flatten(L)


Is this the best model? Did I overlook something? Any problems?
    "/><meta property="og:title" content="Flatten an irregular list of lists | Solutions Checker"/><meta property="og:description" content="Yes, I know this subject has been covered before (here, here, here, here), but as far as I know, all solutions, except for one, fail on a list like this:

L = [[[1, 2, 3], [4, 5]], 6]


Where the desired output is

[1, 2, 3, 4, 5, 6]


Or perhaps even better, an iterator. The only solution I saw that works for an arbitrary nesting is found in this question:

def flatten(x):
    result = []
    for el in x:
        if hasattr(el, &quot;__iter__&quot;) and not isinstance(el, basestring):
            result.extend(flatten(el))
        else:
            result.append(el)
    return result

flatten(L)


Is this the best model? Did I overlook something? Any problems?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Flatten an irregular list of lists","text":"Yes, I know this subject has been covered before (here, here, here, here), but as far as I know, all solutions, except for one, fail on a list like this:\n\nL = [[[1, 2, 3], [4, 5]], 6]\n\n\nWhere the desired output is\n\n[1, 2, 3, 4, 5, 6]\n\n\nOr perhaps even better, an iterator. The only solution I saw that works for an arbitrary nesting is found in this question:\n\ndef flatten(x):\n    result = []\n    for el in x:\n        if hasattr(el, &quot;__iter__&quot;) and not isinstance(el, basestring):\n            result.extend(flatten(el))\n        else:\n            result.append(el)\n    return result\n\nflatten(L)\n\n\nIs this the best model? Did I overlook something? Any problems?\n    ","answerCount":30,"upVoteCount":500,"suggestedAnswer":[{"text":"Using generator functions can make your example easier to read and improve performance.\nPython 2\nUsing the Iterable ABC added in 2.6:\nfrom collections import Iterable\n\ndef flatten(xs):\n    for x in xs:\n        if isinstance(x, Iterable) and not isinstance(x, basestring):\n            for item in flatten(x):\n                yield item\n        else:\n            yield x\n\nPython 3\nIn Python 3, basestring is no more, but the tuple (str, bytes) gives the same effect. Also, the yield from operator returns an item from a generator one at a time.\nfrom collections.abc import Iterable\n\ndef flatten(xs):\n    for x in xs:\n        if isinstance(x, Iterable) and not isinstance(x, (str, bytes)):\n            yield from flatten(x)\n        else:\n            yield x\n\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"My solution:\n\nimport collections\n\n\ndef flatten(x):\n    if isinstance(x, collections.Iterable):\n        return [a for i in x for a in flatten(i)]\n    else:\n        return [x]\n\n\nA little more concise, but pretty much the same.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Generator using recursion and duck typing (updated for Python 3):\n\ndef flatten(L):\n    for item in L:\n        try:\n            yield from flatten(item)\n        except TypeError:\n            yield item\n\nlist(flatten([[[1, 2, 3], [4, 5]], 6]))\n&gt;&gt;&gt;[1, 2, 3, 4, 5, 6]\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Here is my functional version of recursive flatten which handles both tuples and lists, and lets you throw in any mix of positional arguments. Returns a generator which produces the entire sequence in order, arg by arg:\n\nflatten = lambda *n: (e for a in n\n    for e in (flatten(*a) if isinstance(a, (tuple, list)) else (a,)))\n\n\nUsage:\n\nl1 = [&apos;a&apos;, [&apos;b&apos;, (&apos;c&apos;, &apos;d&apos;)]]\nl2 = [0, 1, (2, 3), [[4, 5, (6, 7, (8,), [9]), 10]], (11,)]\nprint list(flatten(l1, -2, -1, l2))\n[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"Generator version of @unutbu&apos;s non-recursive solution, as requested by @Andrew in a comment:\n\ndef genflat(l, ltypes=collections.Sequence):\n    l = list(l)\n    i = 0\n    while i &lt; len(l):\n        while isinstance(l[i], ltypes):\n            if not l[i]:\n                l.pop(i)\n                i -= 1\n                break\n            else:\n                l[i:i + 1] = l[i]\n        yield l[i]\n        i += 1\n\n\nSlightly simplified version of this generator:\n\ndef genflat(l, ltypes=collections.Sequence):\n    l = list(l)\n    while l:\n        while l and isinstance(l[0], ltypes):\n            l[0:1] = l[0]\n        if l: yield l.pop(0)\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"This version of flatten avoids python&apos;s recursion limit (and thus works with arbitrarily deep, nested iterables). It is a generator which can handle strings and arbitrary iterables (even infinite ones).\n\nimport itertools as IT\nimport collections\n\ndef flatten(iterable, ltypes=collections.Iterable):\n    remainder = iter(iterable)\n    while True:\n        first = next(remainder)\n        if isinstance(first, ltypes) and not isinstance(first, (str, bytes)):\n            remainder = IT.chain(first, remainder)\n        else:\n            yield first\n\n\nHere are some examples demonstrating its use:\n\nprint(list(IT.islice(flatten(IT.repeat(1)),10)))\n# [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]\n\nprint(list(IT.islice(flatten(IT.chain(IT.repeat(2,3),\n                                       {10,20,30},\n                                       &apos;foo bar&apos;.split(),\n                                       IT.repeat(1),)),10)))\n# [2, 2, 2, 10, 20, 30, &apos;foo&apos;, &apos;bar&apos;, 1, 1]\n\nprint(list(flatten([[1,2,[3,4]]])))\n# [1, 2, 3, 4]\n\nseq = ([[chr(i),chr(i-32)] for i in range(ord(&apos;a&apos;), ord(&apos;z&apos;)+1)] + list(range(0,9)))\nprint(list(flatten(seq)))\n# [&apos;a&apos;, &apos;A&apos;, &apos;b&apos;, &apos;B&apos;, &apos;c&apos;, &apos;C&apos;, &apos;d&apos;, &apos;D&apos;, &apos;e&apos;, &apos;E&apos;, &apos;f&apos;, &apos;F&apos;, &apos;g&apos;, &apos;G&apos;, &apos;h&apos;, &apos;H&apos;,\n# &apos;i&apos;, &apos;I&apos;, &apos;j&apos;, &apos;J&apos;, &apos;k&apos;, &apos;K&apos;, &apos;l&apos;, &apos;L&apos;, &apos;m&apos;, &apos;M&apos;, &apos;n&apos;, &apos;N&apos;, &apos;o&apos;, &apos;O&apos;, &apos;p&apos;, &apos;P&apos;,\n# &apos;q&apos;, &apos;Q&apos;, &apos;r&apos;, &apos;R&apos;, &apos;s&apos;, &apos;S&apos;, &apos;t&apos;, &apos;T&apos;, &apos;u&apos;, &apos;U&apos;, &apos;v&apos;, &apos;V&apos;, &apos;w&apos;, &apos;W&apos;, &apos;x&apos;, &apos;X&apos;,\n# &apos;y&apos;, &apos;Y&apos;, &apos;z&apos;, &apos;Z&apos;, 0, 1, 2, 3, 4, 5, 6, 7, 8]\n\n\nAlthough flatten can handle infinite generators, it can not handle infinite nesting:\n\ndef infinitely_nested():\n    while True:\n        yield IT.chain(infinitely_nested(), IT.repeat(1))\n\nprint(list(IT.islice(flatten(infinitely_nested()), 10)))\n# hangs\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"def flatten(xs):\n    res = []\n    def loop(ys):\n        for i in ys:\n            if isinstance(i, list):\n                loop(i)\n            else:\n                res.append(i)\n    loop(xs)\n    return res\n\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"Here&apos;s another answer that is even more interesting...\nimport re\n\ndef Flatten(TheList):\n    a = str(TheList)\n    b,_Anon = re.subn(r&apos;[\\[,\\]]&apos;, &apos; &apos;, a)\n    c = b.split()\n    d = [int(x) for x in c]\n\n    return(d)\n\nBasically, it converts the nested list to a string, uses a regex to strip out the nested syntax, and then converts the result back to a (flattened) list.\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"It was fun trying to create a function that could flatten irregular list in Python, but of course that is what Python is for (to make programming fun). The following generator works fairly well with some caveats:\n\ndef flatten(iterable):\n    try:\n        for item in iterable:\n            yield from flatten(item)\n    except TypeError:\n        yield iterable\n\n\nIt will flatten datatypes that you might want left alone (like bytearray, bytes, and str objects). Also, the code relies on the fact that requesting an iterator from a non-iterable raises a TypeError.\n\n&gt;&gt;&gt; L = [[[1, 2, 3], [4, 5]], 6]\n&gt;&gt;&gt; def flatten(iterable):\n    try:\n        for item in iterable:\n            yield from flatten(item)\n    except TypeError:\n        yield iterable\n\n\n&gt;&gt;&gt; list(flatten(L))\n[1, 2, 3, 4, 5, 6]\n&gt;&gt;&gt;\n\n\n\n\nEdit:\n\nI disagree with the previous implementation. The problem is that you should not be able to flatten something that is not an iterable. It is confusing and gives the wrong impression of the argument.\n\n&gt;&gt;&gt; list(flatten(123))\n[123]\n&gt;&gt;&gt;\n\n\nThe following generator is almost the same as the first but does not have the problem of trying to flatten a non-iterable object. It fails as one would expect when an inappropriate argument is given to it.\n\ndef flatten(iterable):\n    for item in iterable:\n        try:\n            yield from flatten(item)\n        except TypeError:\n            yield item\n\n\nTesting the generator works fine with the list that was provided. However, the new code will raise a TypeError when a non-iterable object is given to it. Example are shown below of the new behavior.\n\n&gt;&gt;&gt; L = [[[1, 2, 3], [4, 5]], 6]\n&gt;&gt;&gt; list(flatten(L))\n[1, 2, 3, 4, 5, 6]\n&gt;&gt;&gt; list(flatten(123))\nTraceback (most recent call last):\n  File &quot;&lt;pyshell#32&gt;&quot;, line 1, in &lt;module&gt;\n    list(flatten(123))\n  File &quot;&lt;pyshell#27&gt;&quot;, line 2, in flatten\n    for item in iterable:\nTypeError: &apos;int&apos; object is not iterable\n&gt;&gt;&gt;\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"You could use deepflatten from the 3rd party package iteration_utilities:\n\n&gt;&gt;&gt; from iteration_utilities import deepflatten\n&gt;&gt;&gt; L = [[[1, 2, 3], [4, 5]], 6]\n&gt;&gt;&gt; list(deepflatten(L))\n[1, 2, 3, 4, 5, 6]\n\n&gt;&gt;&gt; list(deepflatten(L, types=list))  # only flatten &quot;inner&quot; lists\n[1, 2, 3, 4, 5, 6]\n\n\nIt&apos;s an iterator so you need to iterate it (for example by wrapping it with list or using it in a loop). Internally it uses an iterative approach instead of an recursive approach and it&apos;s written as C extension so it can be faster than pure python approaches:\n\n&gt;&gt;&gt; %timeit list(deepflatten(L))\n12.6 µs ± 298 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)\n&gt;&gt;&gt; %timeit list(deepflatten(L, types=list))\n8.7 µs ± 139 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)\n\n&gt;&gt;&gt; %timeit list(flatten(L))   # Cristian - Python 3.x approach from https://stackoverflow.com/a/2158532/5393381\n86.4 µs ± 4.42 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)\n\n&gt;&gt;&gt; %timeit list(flatten(L))   # Josh Lee - https://stackoverflow.com/a/2158522/5393381\n107 µs ± 2.99 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)\n\n&gt;&gt;&gt; %timeit list(genflat(L, list))  # Alex Martelli - https://stackoverflow.com/a/2159079/5393381\n23.1 µs ± 710 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)\n\n\n\n\nI&apos;m the author of the iteration_utilities library.\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"Here&apos;s a simple function that flattens lists of arbitrary depth. No recursion, to avoid stack overflow.\n\nfrom copy import deepcopy\n\ndef flatten_list(nested_list):\n    &quot;&quot;&quot;Flatten an arbitrarily nested list, without recursion (to avoid\n    stack overflows). Returns a new list, the original list is unchanged.\n\n    &gt;&gt; list(flatten_list([1, 2, 3, [4], [], [[[[[[[[[5]]]]]]]]]]))\n    [1, 2, 3, 4, 5]\n    &gt;&gt; list(flatten_list([[1, 2], 3]))\n    [1, 2, 3]\n\n    &quot;&quot;&quot;\n    nested_list = deepcopy(nested_list)\n\n    while nested_list:\n        sublist = nested_list.pop(0)\n\n        if isinstance(sublist, list):\n            nested_list = sublist + nested_list\n        else:\n            yield sublist\n\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"Pandas has a function that does this. It returns an iterator as you mentioned.\nIn [1]: import pandas\nIn [2]: pandas.core.common.flatten([[[1, 2, 3], [4, 5]], 6])\nOut[2]: &lt;generator object flatten at 0x7f12ade66200&gt;\nIn [3]: list(pandas.core.common.flatten([[[1, 2, 3], [4, 5]], 6]))\nOut[3]: [1, 2, 3, 4, 5, 6]\n\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"Although an elegant and very pythonic answer has been selected I would present my solution just for the review:\n\ndef flat(l):\n    ret = []\n    for i in l:\n        if isinstance(i, list) or isinstance(i, tuple):\n            ret.extend(flat(i))\n        else:\n            ret.append(i)\n    return ret\n\n\nPlease tell how good or bad this code is?\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"I prefer simple answers.  No generators.  No recursion or recursion limits.  Just iteration:\n\ndef flatten(TheList):\n    listIsNested = True\n\n    while listIsNested:                 #outer loop\n        keepChecking = False\n        Temp = []\n\n        for element in TheList:         #inner loop\n            if isinstance(element,list):\n                Temp.extend(element)\n                keepChecking = True\n            else:\n                Temp.append(element)\n\n        listIsNested = keepChecking     #determine if outer loop exits\n        TheList = Temp[:]\n\n    return TheList\n\n\nThis works with two lists: an inner for loop and an outer while loop.  \n\nThe inner for loop iterates through the list.  If it finds a list element, it (1) uses list.extend() to flatten that part one level of nesting and (2) switches keepChecking to True.  keepchecking is used to control the outer while loop.  If the outer loop gets set to true, it triggers the inner loop for another pass.  \n\nThose passes keep happening until no more nested lists are found.  When a pass finally occurs where none are found, keepChecking never gets tripped to true, which means listIsNested stays false and the outer while loop exits.  \n\nThe flattened list is then returned.\n\nTest-run   \n\nflatten([1,2,3,4,[100,200,300,[1000,2000,3000]]])\n\n\n[1, 2, 3, 4, 100, 200, 300, 1000, 2000, 3000]\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"When trying to answer such a question you really need to give the limitations of the code you propose as a solution. If it was only about performances I wouldn&apos;t mind too much, but most of the codes proposed as solution (including the accepted answer) fail to flatten any list that has a depth greater than 1000.\n\nWhen I say most of the codes I mean all codes that use any form of recursion (or call a standard library function that is recursive). All these codes fail because for every of the recursive call made, the (call) stack grow by one unit, and the (default) python call stack has a size of 1000. \n\nIf you&apos;re not too familiar with the call stack, then maybe the following will help (otherwise you can just scroll to the Implementation).\n\nCall stack size and recursive programming (dungeon analogy)\n\nFinding the treasure and exit\n\nImagine you enter a huge dungeon with numbered rooms, looking for a treasure. You don&apos;t know the place but you have some indications on how to find the treasure. Each indication is a riddle (difficulty varies, but you can&apos;t predict how hard they will be). You decide to think a little bit about a strategy to save time, you make two observations: \n\n\nIt&apos;s hard (long) to find the treasure as you&apos;ll have to solve (potentially hard) riddles to get there. \nOnce the treasure found, returning to the entrance may be easy, you just have to use the same path in the other direction (though this needs a bit of memory to recall your path). \n\n\nWhen entering the dungeon, you notice a small notebook here. You decide to use it to write down every room you exit after solving a riddle (when entering a new room), this way you&apos;ll be able to return back to the entrance. That&apos;s a genius idea, you won&apos;t even spend a cent implementing your strategy.\n\nYou enter the dungeon, solving with great success the first 1001 riddles, but here comes something you hadn&apos;t planed, you have no space left in the notebook you borrowed. You decide to abandon your quest as you prefer not having the treasure than being lost forever inside the dungeon (that looks smart indeed).\n\nExecuting a recursive program\n\nBasically, it&apos;s the exact same thing as finding the treasure. The dungeon is the computer&apos;s memory, your goal now is not to find a treasure but to compute some function (find f(x) for a given x). The indications simply are sub-routines that will help you solving f(x). Your strategy is the same as the call stack strategy, the notebook is the stack, the rooms are the functions&apos; return addresses: \n\nx = [&quot;over here&quot;, &quot;am&quot;, &quot;I&quot;]\ny = sorted(x) # You&apos;re about to enter a room named `sorted`, note down the current room address here so you can return back: 0x4004f4 (that room address looks weird)\n# Seems like you went back from your quest using the return address 0x4004f4\n# Let&apos;s see what you&apos;ve collected \nprint(&apos; &apos;.join(y))\n\n\nThe problem you encountered in the dungeon will be the same here, the call stack has a finite size (here 1000) and therefore, if you enter too many functions without returning back then you&apos;ll fill the call stack and have an error that look like &quot;Dear adventurer, I&apos;m very sorry but your notebook is full&quot;: RecursionError: maximum recursion depth exceeded. Note that you don&apos;t need recursion to fill the call stack, but it&apos;s very unlikely that a non-recursive program call 1000 functions without ever returning. It&apos;s important to also understand that once you returned from a function, the call stack is freed from the address used (hence the name &quot;stack&quot;, return address are pushed in before entering a function and pulled out when returning). In the special case of a simple recursion (a function f that call itself once -- over and over --) you will enter f over and over until the computation is finished (until the treasure is found) and return from f until you go back to the place where you called f in the first place. The call stack will never be freed from anything until the end where it will be freed from all return addresses one after the other. \n\nHow to avoid this issue?\n\nThat&apos;s actually pretty simple: &quot;don&apos;t use recursion if you don&apos;t know how deep it can go&quot;. That&apos;s not always true as in some cases, Tail Call recursion can be Optimized (TCO). But in python, this is not the case, and even &quot;well written&quot; recursive function will not optimize stack use. There is an interesting post from Guido about this question: Tail Recursion Elimination.\n\nThere is a technique that you can use to make any recursive function iterative, this technique we could call bring your own notebook. For example, in our particular case we simply are exploring a list, entering a room is equivalent to entering a sublist, the question you should ask yourself is how can I get back from a list to its parent list? The answer is not that complex, repeat the following until the stack is empty:\n\n\npush the current list address and index in a stack when entering a new sublist (note that a list address+index is also an address, therefore we just use the exact same technique used by the call stack);\nevery time an item is found, yield it (or add them in a list);\nonce a list is fully explored, go back to the parent list using the stack return address (and index).\n\n\nAlso note that this is equivalent to a DFS in a tree where some nodes are sublists A = [1, 2] and some are simple items: 0, 1, 2, 3, 4 (for L = [0, [1,2], 3, 4]). The tree looks like this:\n\n                    L\n                    |\n           -------------------\n           |     |     |     |\n           0   --A--   3     4\n               |   |\n               1   2\n\n\nThe DFS traversal pre-order is: L, 0, A, 1, 2, 3, 4. Remember, in order to implement an iterative DFS you also &quot;need&quot; a stack. The implementation I proposed before result in having the following states (for the stack and the flat_list): \n\ninit.:  stack=[(L, 0)]\n**0**:  stack=[(L, 0)],         flat_list=[0]\n**A**:  stack=[(L, 1), (A, 0)], flat_list=[0]\n**1**:  stack=[(L, 1), (A, 0)], flat_list=[0, 1]\n**2**:  stack=[(L, 1), (A, 1)], flat_list=[0, 1, 2]\n**3**:  stack=[(L, 2)],         flat_list=[0, 1, 2, 3]\n**3**:  stack=[(L, 3)],         flat_list=[0, 1, 2, 3, 4]\nreturn: stack=[],               flat_list=[0, 1, 2, 3, 4]\n\n\nIn this example, the stack maximum size is 2, because the input list (and therefore the tree) have depth 2.\n\nImplementation\n\nFor the implementation, in python you can simplify a little bit by using iterators instead of simple lists. References to the (sub)iterators will be used to store sublists return addresses (instead of having both the list address and the index). This is not a big difference but I feel this is more readable (and also a bit faster):\n\ndef flatten(iterable):\n    return list(items_from(iterable))\n\ndef items_from(iterable):\n    cursor_stack = [iter(iterable)]\n    while cursor_stack:\n        sub_iterable = cursor_stack[-1]\n        try:\n            item = next(sub_iterable)\n        except StopIteration:   # post-order\n            cursor_stack.pop()\n            continue\n        if is_list_like(item):  # pre-order\n            cursor_stack.append(iter(item))\n        elif item is not None:\n            yield item          # in-order\n\ndef is_list_like(item):\n    return isinstance(item, list)\n\n\nAlso, notice that in is_list_like I have isinstance(item, list), which could be changed to handle more input types, here I just wanted to have the simplest version where (iterable) is just a list. But you could also do that:\n\ndef is_list_like(item):\n    try:\n        iter(item)\n        return not isinstance(item, str)  # strings are not lists (hmm...) \n    except TypeError:\n        return False\n\n\nThis considers strings as &quot;simple items&quot; and therefore flatten_iter([[&quot;test&quot;, &quot;a&quot;], &quot;b]) will return [&quot;test&quot;, &quot;a&quot;, &quot;b&quot;] and not [&quot;t&quot;, &quot;e&quot;, &quot;s&quot;, &quot;t&quot;, &quot;a&quot;, &quot;b&quot;]. Remark that in that case, iter(item) is called twice on each item, let&apos;s pretend it&apos;s an exercise for the reader to make this cleaner. \n\nTesting and remarks on other implementations\n\nIn the end, remember that you can&apos;t print a infinitely nested list L using print(L) because internally it will use recursive calls to __repr__ (RecursionError: maximum recursion depth exceeded while getting the repr of an object). For the same reason, solutions to flatten involving str will fail with the same error message. \n\nIf you need to test your solution, you can use this function to generate a simple nested list:\n\ndef build_deep_list(depth):\n    &quot;&quot;&quot;Returns a list of the form $l_{depth} = [depth-1, l_{depth-1}]$\n    with $depth &gt; 1$ and $l_0 = [0]$.\n    &quot;&quot;&quot;\n    sub_list = [0]\n    for d in range(1, depth):\n        sub_list = [d, sub_list]\n    return sub_list\n\n\nWhich gives: build_deep_list(5) &gt;&gt;&gt; [4, [3, [2, [1, [0]]]]].\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"I didn&apos;t go through all the already available answers here, but here is a one liner I came up with, borrowing from lisp&apos;s way of first and rest list processing\ndef flatten(l): return flatten(l[0]) + (flatten(l[1:]) if len(l) &gt; 1 else []) if type(l) is list else [l]\n\nhere is one simple and one not-so-simple case -\n&gt;&gt;&gt; flatten([1,[2,3],4])\n[1, 2, 3, 4]\n\n&gt;&gt;&gt; flatten([1, [2, 3], 4, [5, [6, {&apos;name&apos;: &apos;some_name&apos;, &apos;age&apos;:30}, 7]], [8, 9, [10, [11, [12, [13, {&apos;some&apos;, &apos;set&apos;}, 14, [15, &apos;some_string&apos;], 16], 17, 18], 19], 20], 21, 22, [23, 24], 25], 26, 27, 28, 29, 30])\n[1, 2, 3, 4, 5, 6, {&apos;age&apos;: 30, &apos;name&apos;: &apos;some_name&apos;}, 7, 8, 9, 10, 11, 12, 13, set([&apos;set&apos;, &apos;some&apos;]), 14, 15, &apos;some_string&apos;, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]\n&gt;&gt;&gt; \n\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"Here&apos;s the compiler.ast.flatten implementation in 2.7.5:\n\ndef flatten(seq):\n    l = []\n    for elt in seq:\n        t = type(elt)\n        if t is tuple or t is list:\n            for elt2 in flatten(elt):\n                l.append(elt2)\n        else:\n            l.append(elt)\n    return l\n\n\nThere are better, faster methods (If you&apos;ve reached here, you have seen them already)\n\nAlso note:\n\n\n  Deprecated since version 2.6: The compiler package has been removed in Python 3.\n\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"totally hacky but I think it would work (depending on your data_type)\n\nflat_list = ast.literal_eval(&quot;[%s]&quot;%re.sub(&quot;[\\[\\]]&quot;,&quot;&quot;,str(the_list)))\n\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"I&apos;m surprised no one has thought of this. Damn recursion I don&apos;t get the recursive answers that the advanced people here made. anyway here is my attempt on this. caveat is it&apos;s very specific to the OP&apos;s use case\n\nimport re\n\nL = [[[1, 2, 3], [4, 5]], 6]\nflattened_list = re.sub(&quot;[\\[\\]]&quot;, &quot;&quot;, str(L)).replace(&quot; &quot;, &quot;&quot;).split(&quot;,&quot;)\nnew_list = list(map(int, flattened_list))\nprint(new_list)\n\n\noutput:\n\n[1, 2, 3, 4, 5, 6]\n\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"Just use a funcy library:\npip install funcy\n\nimport funcy\n\n\nfuncy.flatten([[[[1, 1], 1], 2], 3]) # returns generator\nfuncy.lflatten([[[[1, 1], 1], 2], 3]) # returns list\n\n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0},{"text":"I am a dumb guy so I&apos;ll give a &quot;dumb&quot; solution. All that recursion hurts my brain.\n\nflattened_list = []\nnested_list = [[[1, 2, 3], [4, 5]], 6]\n\ndef flatten(nested_list, container):\n    for item in nested_list:\n        if isintance(item, list):\n            flatten(item, container)\n        else:\n            container.append(item)\n\n&gt;&gt;&gt; flatten(nested_list, flattened_list)\n&gt;&gt;&gt; flattened_list\n[1, 2, 3, 4, 5, 6]\n\n\nI get that it&apos;s using a side effect but well that&apos;s to the best of my comprehension of recursion can go\n    ","url":"/questions/[slug]#solution21","@type":"Answer","upvoteCount":0},{"text":"I don&apos;t see anything like this posted around here and just got here from a closed question on the same subject, but why not just do something like this(if you know the type of the list you want to split):\n\n&gt;&gt;&gt; a = [1, 2, 3, 5, 10, [1, 25, 11, [1, 0]]]    \n&gt;&gt;&gt; g = str(a).replace(&apos;[&apos;, &apos;&apos;).replace(&apos;]&apos;, &apos;&apos;)    \n&gt;&gt;&gt; b = [int(x) for x in g.split(&apos;,&apos;) if x.strip()]\n\n\nYou would need to know the type of the elements but I think this can be generalised and in terms of speed I think it would be faster.\n    ","url":"/questions/[slug]#solution22","@type":"Answer","upvoteCount":0},{"text":"Here is another py2 approach, Im not sure if its the fastest or the most elegant nor safest ...\n\nfrom collections import Iterable\nfrom itertools import imap, repeat, chain\n\n\ndef flat(seqs, ignore=(int, long, float, basestring)):\n    return repeat(seqs, 1) if any(imap(isinstance, repeat(seqs), ignore)) or not isinstance(seqs, Iterable) else chain.from_iterable(imap(flat, seqs))\n\n\nIt can ignore any specific (or derived) type you would like, it returns an iterator, so you can convert it to any specific container such as list, tuple, dict or simply consume it in order to reduce memory footprint, for better or worse it can handle initial non-iterable objects such as int ...\n\nNote most of the heavy lifting is done in C, since as far as I know thats how itertools are implemented, so while it is recursive, AFAIK it isn&apos;t bounded by python recursion depth since the function calls are happening in C, though this doesn&apos;t mean you are bounded by memory, specially in OS X where its stack size has a hard limit as of today (OS X Mavericks) ...\n\nthere is a slightly faster approach, but less portable method, only use it if you can assume that the base elements of the input can be explicitly determined otherwise, you&apos;ll get an infinite recursion, and OS X with its limited stack size, will throw a segmentation fault fairly quickly ...\n\ndef flat(seqs, ignore={int, long, float, str, unicode}):\n    return repeat(seqs, 1) if type(seqs) in ignore or not isinstance(seqs, Iterable) else chain.from_iterable(imap(flat, seqs))\n\n\nhere we are using sets to check for the type so it takes O(1) vs O(number of types) to check whether or not an element should be ignored, though of course any value with derived type of the stated ignored types will fail, this is why its using str, unicode so use it with caution ...\n\ntests:\n\nimport random\n\ndef test_flat(test_size=2000):\n    def increase_depth(value, depth=1):\n        for func in xrange(depth):\n            value = repeat(value, 1)\n        return value\n\n    def random_sub_chaining(nested_values):\n        for values in nested_values:\n            yield chain((values,), chain.from_iterable(imap(next, repeat(nested_values, random.randint(1, 10)))))\n\n    expected_values = zip(xrange(test_size), imap(str, xrange(test_size)))\n    nested_values = random_sub_chaining((increase_depth(value, depth) for depth, value in enumerate(expected_values)))\n    assert not any(imap(cmp, chain.from_iterable(expected_values), flat(chain(((),), nested_values, ((),)))))\n\n&gt;&gt;&gt; test_flat()\n&gt;&gt;&gt; list(flat([[[1, 2, 3], [4, 5]], 6]))\n[1, 2, 3, 4, 5, 6]\n&gt;&gt;&gt;  \n\n$ uname -a\nDarwin Samys-MacBook-Pro.local 13.3.0 Darwin Kernel Version 13.3.0: Tue Jun  3 21:27:35 PDT 2014; root:xnu-2422.110.17~1/RELEASE_X86_64 x86_64\n$ python --version\nPython 2.7.5\n\n    ","url":"/questions/[slug]#solution23","@type":"Answer","upvoteCount":0},{"text":"Without using any library:\n\ndef flat(l):\n    def _flat(l, r):    \n        if type(l) is not list:\n            r.append(l)\n        else:\n            for i in l:\n                r = r + flat(i)\n        return r\n    return _flat(l, [])\n\n\n\n# example\ntest = [[1], [[2]], [3], [[&apos;a&apos;,&apos;b&apos;,&apos;c&apos;] , [[&apos;z&apos;,&apos;x&apos;,&apos;y&apos;]], [&apos;d&apos;,&apos;f&apos;,&apos;g&apos;]], 4]    \nprint flat(test) # prints [1, 2, 3, &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;z&apos;, &apos;x&apos;, &apos;y&apos;, &apos;d&apos;, &apos;f&apos;, &apos;g&apos;, 4]\n\n    ","url":"/questions/[slug]#solution24","@type":"Answer","upvoteCount":0},{"text":"Using itertools.chain:\n\nimport itertools\nfrom collections import Iterable\n\ndef list_flatten(lst):\n    flat_lst = []\n    for item in itertools.chain(lst):\n        if isinstance(item, Iterable):\n            item = list_flatten(item)\n            flat_lst.extend(item)\n        else:\n            flat_lst.append(item)\n    return flat_lst\n\n\nOr without chaining:\n\ndef flatten(q, final):\n    if not q:\n        return\n    if isinstance(q, list):\n        if not isinstance(q[0], list):\n            final.append(q[0])\n        else:\n            flatten(q[0], final)\n        flatten(q[1:], final)\n    else:\n        final.append(q)\n\n    ","url":"/questions/[slug]#solution25","@type":"Answer","upvoteCount":0},{"text":"I used recursive to solve nested list with any depth\n\ndef combine_nlist(nlist,init=0,combiner=lambda x,y: x+y):\n    &apos;&apos;&apos;\n    apply function: combiner to a nested list element by element(treated as flatten list)\n    &apos;&apos;&apos;\n    current_value=init\n    for each_item in nlist:\n        if isinstance(each_item,list):\n            current_value =combine_nlist(each_item,current_value,combiner)\n        else:\n            current_value = combiner(current_value,each_item)\n    return current_value\n\n\nSo after i define function combine_nlist, it is easy to use this function do flatting. Or you can combine it into one function. I like my solution because it can be applied to any nested list.\n\ndef flatten_nlist(nlist):\n    return combine_nlist(nlist,[],lambda x,y:x+[y])\n\n\nresult\n\nIn [379]: flatten_nlist([1,2,3,[4,5],[6],[[[7],8],9],10])\nOut[379]: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\n    ","url":"/questions/[slug]#solution26","@type":"Answer","upvoteCount":0},{"text":"The easiest way is to use the morph library using pip install morph.\n\nThe code is:\n\nimport morph\n\nlist = [[[1, 2, 3], [4, 5]], 6]\nflattened_list = morph.flatten(list)  # returns [1, 2, 3, 4, 5, 6]\n\n    ","url":"/questions/[slug]#solution27","@type":"Answer","upvoteCount":0},{"text":"I am aware that there are already many awesome answers but i wanted to add an answer that uses the functional programming method of solving the question. In this answer i make use of double recursion :\n\ndef flatten_list(seq):\n    if not seq:\n        return []\n    elif isinstance(seq[0],list):\n        return (flatten_list(seq[0])+flatten_list(seq[1:]))\n    else:\n        return [seq[0]]+flatten_list(seq[1:])\n\nprint(flatten_list([1,2,[3,[4],5],[6,7]]))\n\n\noutput:\n\n[1, 2, 3, 4, 5, 6, 7]\n\n    ","url":"/questions/[slug]#solution28","@type":"Answer","upvoteCount":0},{"text":"I&apos;m not sure if this is necessarily quicker or more effective, but this is what I do:\n\ndef flatten(lst):\n    return eval(&apos;[&apos; + str(lst).replace(&apos;[&apos;, &apos;&apos;).replace(&apos;]&apos;, &apos;&apos;) + &apos;]&apos;)\n\nL = [[[1, 2, 3], [4, 5]], 6]\nprint(flatten(L))\n\n\nThe flatten function here turns the list into a string, takes out all of the square brackets, attaches square brackets back onto the ends, and turns it back into a list. \n\nAlthough, if you knew you would have square brackets in your list in strings, like [[1, 2], &quot;[3, 4] and [5]&quot;], you would have to do something else.\n    ","url":"/questions/[slug]#solution29","@type":"Answer","upvoteCount":0},{"text":"This is a simple implement of flatten on python2\n\nflatten=lambda l: reduce(lambda x,y:x+y,map(flatten,l),[]) if isinstance(l,list) else [l]\n\ntest=[[1,2,3,[3,4,5],[6,7,[8,9,[10,[11,[12,13,14]]]]]],]\nprint flatten(test)\n\n#output [1, 2, 3, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]\n\n    ","url":"/questions/[slug]#solution30","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-12e9794e898cd5f3.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-928c5d1eb8fb0bba.js" defer=""></script><script src="/_next/static/BnkbnjkWYxefPXjTJLVVv/_buildManifest.js" defer=""></script><script src="/_next/static/BnkbnjkWYxefPXjTJLVVv/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/flatten-an-irregular-list-of-lists-1657387315571#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/flatten-an-irregular-list-of-lists-1657387315571"><h1>Flatten an irregular list of lists</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>Yes, I know this subject has been covered before (<a href="https://stackoverflow.com/questions/120886">here</a>, <a href="https://stackoverflow.com/questions/406121">here</a>, <a href="https://stackoverflow.com/questions/457215">here</a>, <a href="https://stackoverflow.com/questions/952914">here</a>), but as far as I know, all solutions, except for one, fail on a list like this:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">L = [[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]
</code></pre>

<p>Where the desired output is</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
</code></pre>

<p>Or perhaps even better, an iterator. The only solution I saw that works for an arbitrary nesting is found <a href="https://stackoverflow.com/questions/406121">in this question</a>:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">x</span>):
    result = []
    <span class="hljs-keyword">for</span> el <span class="hljs-keyword">in</span> x:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(el, <span class="hljs-string">"__iter__"</span>) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(el, basestring):
            result.extend(flatten(el))
        <span class="hljs-keyword">else</span>:
            result.append(el)
    <span class="hljs-keyword">return</span> result

flatten(L)
</code></pre>

<p>Is this the best model? Did I overlook something? Any problems?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li><li class="pagination-solution-item"><span data-id="#solution21" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">21</span></li><li class="pagination-solution-item"><span data-id="#solution22" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">22</span></li><li class="pagination-solution-item"><span data-id="#solution23" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">23</span></li><li class="pagination-solution-item"><span data-id="#solution24" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">24</span></li><li class="pagination-solution-item"><span data-id="#solution25" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">25</span></li><li class="pagination-solution-item"><span data-id="#solution26" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">26</span></li><li class="pagination-solution-item"><span data-id="#solution27" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">27</span></li><li class="pagination-solution-item"><span data-id="#solution28" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">28</span></li><li class="pagination-solution-item"><span data-id="#solution29" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">29</span></li><li class="pagination-solution-item"><span data-id="#solution30" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">30</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using generator functions can make your example easier to read and improve performance.</p>
<h3>Python 2</h3>
<p>Using the <a href="https://docs.python.org/2/library/collections.html#collections-abstract-base-classes" rel="nofollow noreferrer"><code>Iterable</code> ABC</a> added in 2.6:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Iterable

<span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">xs</span>):
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> xs:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(x, Iterable) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(x, basestring):
            <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> flatten(x):
                <span class="hljs-keyword">yield</span> item
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">yield</span> x
</code></pre>
<h3>Python 3</h3>
<p>In Python 3, <code>basestring</code> is no more, but the tuple <code>(str, bytes)</code> gives the same effect. Also, the <a href="https://docs.python.org/3/whatsnew/3.3.html#pep-380" rel="nofollow noreferrer"><code>yield from</code></a> operator returns an item from a generator one at a time.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> collections.abc <span class="hljs-keyword">import</span> Iterable

<span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">xs</span>):
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> xs:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(x, Iterable) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(x, (<span class="hljs-built_in">str</span>, <span class="hljs-built_in">bytes</span>)):
            <span class="hljs-keyword">yield</span> <span class="hljs-keyword">from</span> flatten(x)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">yield</span> x
</code></pre>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>My solution:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> collections


<span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(x, collections.Iterable):
        <span class="hljs-keyword">return</span> [a <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> x <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> flatten(i)]
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> [x]
</code></pre>

<p>A little more concise, but pretty much the same.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Generator using recursion and duck typing (updated for Python 3):</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">L</span>):
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> L:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">yield</span> <span class="hljs-keyword">from</span> flatten(item)
        <span class="hljs-keyword">except</span> TypeError:
            <span class="hljs-keyword">yield</span> item

<span class="hljs-built_in">list</span>(flatten([[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]))
&gt;&gt;&gt;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is my functional version of recursive flatten which handles both tuples and lists, and lets you throw in any mix of positional arguments. Returns a generator which produces the entire sequence in order, arg by arg:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">flatten = <span class="hljs-keyword">lambda</span> *n: (e <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> n
    <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> (flatten(*a) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(a, (<span class="hljs-built_in">tuple</span>, <span class="hljs-built_in">list</span>)) <span class="hljs-keyword">else</span> (a,)))
</code></pre>

<p>Usage:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">l1 = [<span class="hljs-string">'a'</span>, [<span class="hljs-string">'b'</span>, (<span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>)]]
l2 = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>), [[<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, (<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, (<span class="hljs-number">8</span>,), [<span class="hljs-number">9</span>]), <span class="hljs-number">10</span>]], (<span class="hljs-number">11</span>,)]
<span class="hljs-built_in">print</span> <span class="hljs-built_in">list</span>(flatten(l1, -<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>, l2))
[<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>, -<span class="hljs-number">2</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Generator version of @unutbu's non-recursive solution, as requested by @Andrew in a comment:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">genflat</span>(<span class="hljs-params">l, ltypes=collections.<span class="hljs-type">Sequence</span></span>):
    l = <span class="hljs-built_in">list</span>(l)
    i = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">len</span>(l):
        <span class="hljs-keyword">while</span> <span class="hljs-built_in">isinstance</span>(l[i], ltypes):
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> l[i]:
                l.pop(i)
                i -= <span class="hljs-number">1</span>
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">else</span>:
                l[i:i + <span class="hljs-number">1</span>] = l[i]
        <span class="hljs-keyword">yield</span> l[i]
        i += <span class="hljs-number">1</span>
</code></pre>

<p>Slightly simplified version of this generator:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">genflat</span>(<span class="hljs-params">l, ltypes=collections.<span class="hljs-type">Sequence</span></span>):
    l = <span class="hljs-built_in">list</span>(l)
    <span class="hljs-keyword">while</span> l:
        <span class="hljs-keyword">while</span> l <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(l[<span class="hljs-number">0</span>], ltypes):
            l[<span class="hljs-number">0</span>:<span class="hljs-number">1</span>] = l[<span class="hljs-number">0</span>]
        <span class="hljs-keyword">if</span> l: <span class="hljs-keyword">yield</span> l.pop(<span class="hljs-number">0</span>)
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This version of <code>flatten</code> avoids python's recursion limit (and thus works with arbitrarily deep, nested iterables). It is a generator which can handle strings and arbitrary iterables (even infinite ones).</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> itertools <span class="hljs-keyword">as</span> IT
<span class="hljs-keyword">import</span> collections

<span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">iterable, ltypes=collections.Iterable</span>):
    remainder = <span class="hljs-built_in">iter</span>(iterable)
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        first = <span class="hljs-built_in">next</span>(remainder)
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(first, ltypes) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(first, (<span class="hljs-built_in">str</span>, <span class="hljs-built_in">bytes</span>)):
            remainder = IT.chain(first, remainder)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">yield</span> first
</code></pre>

<p>Here are some examples demonstrating its use:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(IT.islice(flatten(IT.repeat(<span class="hljs-number">1</span>)),<span class="hljs-number">10</span>)))
<span class="hljs-comment"># [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]</span>

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(IT.islice(flatten(IT.chain(IT.repeat(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>),
                                       {<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>},
                                       <span class="hljs-string">'foo bar'</span>.split(),
                                       IT.repeat(<span class="hljs-number">1</span>),)),<span class="hljs-number">10</span>)))
<span class="hljs-comment"># [2, 2, 2, 10, 20, 30, 'foo', 'bar', 1, 1]</span>

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(flatten([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]]])))
<span class="hljs-comment"># [1, 2, 3, 4]</span>

seq = ([[<span class="hljs-built_in">chr</span>(i),<span class="hljs-built_in">chr</span>(i-<span class="hljs-number">32</span>)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">ord</span>(<span class="hljs-string">'a'</span>), <span class="hljs-built_in">ord</span>(<span class="hljs-string">'z'</span>)+<span class="hljs-number">1</span>)] + <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">9</span>)))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(flatten(seq)))
<span class="hljs-comment"># ['a', 'A', 'b', 'B', 'c', 'C', 'd', 'D', 'e', 'E', 'f', 'F', 'g', 'G', 'h', 'H',</span>
<span class="hljs-comment"># 'i', 'I', 'j', 'J', 'k', 'K', 'l', 'L', 'm', 'M', 'n', 'N', 'o', 'O', 'p', 'P',</span>
<span class="hljs-comment"># 'q', 'Q', 'r', 'R', 's', 'S', 't', 'T', 'u', 'U', 'v', 'V', 'w', 'W', 'x', 'X',</span>
<span class="hljs-comment"># 'y', 'Y', 'z', 'Z', 0, 1, 2, 3, 4, 5, 6, 7, 8]</span>
</code></pre>

<p>Although <code>flatten</code> can handle infinite generators, it can not handle infinite nesting:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">infinitely_nested</span>():
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">yield</span> IT.chain(infinitely_nested(), IT.repeat(<span class="hljs-number">1</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(IT.islice(flatten(infinitely_nested()), <span class="hljs-number">10</span>)))
<span class="hljs-comment"># hangs</span>
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">xs</span>):
    res = []
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">loop</span>(<span class="hljs-params">ys</span>):
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> ys:
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(i, <span class="hljs-built_in">list</span>):
                loop(i)
            <span class="hljs-keyword">else</span>:
                res.append(i)
    loop(xs)
    <span class="hljs-keyword">return</span> res
</code></pre>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's another answer that is even more interesting...</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> re

<span class="hljs-keyword">def</span> <span class="hljs-title function_">Flatten</span>(<span class="hljs-params">TheList</span>):
    a = <span class="hljs-built_in">str</span>(TheList)
    b,_Anon = re.subn(<span class="hljs-string">r'[\[,\]]'</span>, <span class="hljs-string">' '</span>, a)
    c = b.split()
    d = [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> c]

    <span class="hljs-keyword">return</span>(d)
</code></pre>
<p>Basically, it converts the nested list to a string, uses a regex to strip out the nested syntax, and then converts the result back to a (flattened) list.</p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It was fun trying to create a function that could flatten irregular list in Python, but of course that is what Python is for (to make programming fun). The following generator works fairly well with some caveats:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">iterable</span>):
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> iterable:
            <span class="hljs-keyword">yield</span> <span class="hljs-keyword">from</span> flatten(item)
    <span class="hljs-keyword">except</span> TypeError:
        <span class="hljs-keyword">yield</span> iterable
</code></pre>

<p>It will flatten datatypes that you might want left alone (like <code>bytearray</code>, <code>bytes</code>, and <code>str</code> objects). Also, the code relies on the fact that requesting an iterator from a non-iterable raises a <code>TypeError</code>.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>L = [[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">iterable</span>):
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> iterable:
            <span class="hljs-keyword">yield</span> <span class="hljs-keyword">from</span> flatten(item)
    <span class="hljs-keyword">except</span> TypeError:
        <span class="hljs-keyword">yield</span> iterable


<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(flatten(L))
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
&gt;&gt;&gt;
</code></pre>

<hr>

<p><strong>Edit:</strong></p>

<p>I disagree with the previous implementation. The problem is that you should not be able to flatten something that is not an iterable. It is confusing and gives the wrong impression of the argument.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(flatten(<span class="hljs-number">123</span>))
[<span class="hljs-number">123</span>]
&gt;&gt;&gt;
</code></pre>

<p>The following generator is almost the same as the first but does not have the problem of trying to flatten a non-iterable object. It fails as one would expect when an inappropriate argument is given to it.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">iterable</span>):
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> iterable:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">yield</span> <span class="hljs-keyword">from</span> flatten(item)
        <span class="hljs-keyword">except</span> TypeError:
            <span class="hljs-keyword">yield</span> item
</code></pre>

<p>Testing the generator works fine with the list that was provided. However, the new code will raise a <code>TypeError</code> when a non-iterable object is given to it. Example are shown below of the new behavior.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>L = [[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(flatten(L))
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(flatten(<span class="hljs-number">123</span>))
Traceback (most recent call last):
  File <span class="hljs-string">"&lt;pyshell#32&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
    <span class="hljs-built_in">list</span>(flatten(<span class="hljs-number">123</span>))
  File <span class="hljs-string">"&lt;pyshell#27&gt;"</span>, line <span class="hljs-number">2</span>, <span class="hljs-keyword">in</span> flatten
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> iterable:
TypeError: <span class="hljs-string">'int'</span> <span class="hljs-built_in">object</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> iterable
&gt;&gt;&gt;
</code></pre>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You could use <a href="https://iteration-utilities.readthedocs.io/en/latest/generated/deepflatten.html" rel="noreferrer"><code>deepflatten</code></a> from the 3rd party package <a href="https://iteration-utilities.readthedocs.io/en/latest/index.html" rel="noreferrer"><code>iteration_utilities</code></a>:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> iteration_utilities <span class="hljs-keyword">import</span> deepflatten
<span class="hljs-meta">&gt;&gt;&gt; </span>L = [[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(deepflatten(L))
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(deepflatten(L, types=<span class="hljs-built_in">list</span>))  <span class="hljs-comment"># only flatten "inner" lists</span>
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
</code></pre>

<p>It's an iterator so you need to iterate it (for example by wrapping it with <code>list</code> or using it in a loop). Internally it uses an iterative approach instead of an recursive approach and it's written as C extension so it can be faster than pure python approaches:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>%timeit <span class="hljs-built_in">list</span>(deepflatten(L))
<span class="hljs-number">12.6</span> µs ± <span class="hljs-number">298</span> ns per loop (mean ± std. dev. of <span class="hljs-number">7</span> runs, <span class="hljs-number">100000</span> loops each)
<span class="hljs-meta">&gt;&gt;&gt; </span>%timeit <span class="hljs-built_in">list</span>(deepflatten(L, types=<span class="hljs-built_in">list</span>))
<span class="hljs-number">8.7</span> µs ± <span class="hljs-number">139</span> ns per loop (mean ± std. dev. of <span class="hljs-number">7</span> runs, <span class="hljs-number">100000</span> loops each)

<span class="hljs-meta">&gt;&gt;&gt; </span>%timeit <span class="hljs-built_in">list</span>(flatten(L))   <span class="hljs-comment"># Cristian - Python 3.x approach from https://stackoverflow.com/a/2158532/5393381</span>
<span class="hljs-number">86.4</span> µs ± <span class="hljs-number">4.42</span> µs per loop (mean ± std. dev. of <span class="hljs-number">7</span> runs, <span class="hljs-number">10000</span> loops each)

<span class="hljs-meta">&gt;&gt;&gt; </span>%timeit <span class="hljs-built_in">list</span>(flatten(L))   <span class="hljs-comment"># Josh Lee - https://stackoverflow.com/a/2158522/5393381</span>
<span class="hljs-number">107</span> µs ± <span class="hljs-number">2.99</span> µs per loop (mean ± std. dev. of <span class="hljs-number">7</span> runs, <span class="hljs-number">10000</span> loops each)

<span class="hljs-meta">&gt;&gt;&gt; </span>%timeit <span class="hljs-built_in">list</span>(genflat(L, <span class="hljs-built_in">list</span>))  <span class="hljs-comment"># Alex Martelli - https://stackoverflow.com/a/2159079/5393381</span>
<span class="hljs-number">23.1</span> µs ± <span class="hljs-number">710</span> ns per loop (mean ± std. dev. of <span class="hljs-number">7</span> runs, <span class="hljs-number">10000</span> loops each)
</code></pre>

<hr>

<p>I'm the author of the <code>iteration_utilities</code> library.</p>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's a simple function that flattens lists of arbitrary depth. No recursion, to avoid stack overflow.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> copy <span class="hljs-keyword">import</span> deepcopy

<span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten_list</span>(<span class="hljs-params">nested_list</span>):
    <span class="hljs-string">"""Flatten an arbitrarily nested list, without recursion (to avoid
    stack overflows). Returns a new list, the original list is unchanged.

    &gt;&gt; list(flatten_list([1, 2, 3, [4], [], [[[[[[[[[5]]]]]]]]]]))
    [1, 2, 3, 4, 5]
    &gt;&gt; list(flatten_list([[1, 2], 3]))
    [1, 2, 3]

    """</span>
    nested_list = deepcopy(nested_list)

    <span class="hljs-keyword">while</span> nested_list:
        sublist = nested_list.pop(<span class="hljs-number">0</span>)

        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(sublist, <span class="hljs-built_in">list</span>):
            nested_list = sublist + nested_list
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">yield</span> sublist
</code></pre>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Pandas has a function that does this. It returns an iterator as you mentioned.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">import</span> pandas
In [<span class="hljs-number">2</span>]: pandas.core.common.flatten([[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>])
Out[<span class="hljs-number">2</span>]: &lt;generator <span class="hljs-built_in">object</span> flatten at <span class="hljs-number">0x7f12ade66200</span>&gt;
In [<span class="hljs-number">3</span>]: <span class="hljs-built_in">list</span>(pandas.core.common.flatten([[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]))
Out[<span class="hljs-number">3</span>]: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
</code></pre>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Although an elegant and very pythonic answer has been selected I would present my solution just for the review:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flat</span>(<span class="hljs-params">l</span>):
    ret = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> l:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(i, <span class="hljs-built_in">list</span>) <span class="hljs-keyword">or</span> <span class="hljs-built_in">isinstance</span>(i, <span class="hljs-built_in">tuple</span>):
            ret.extend(flat(i))
        <span class="hljs-keyword">else</span>:
            ret.append(i)
    <span class="hljs-keyword">return</span> ret
</code></pre>

<p>Please tell how good or bad this code is?</p>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I prefer simple answers.  No generators.  No recursion or recursion limits.  Just iteration:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">TheList</span>):
    listIsNested = <span class="hljs-literal">True</span>

    <span class="hljs-keyword">while</span> listIsNested:                 <span class="hljs-comment">#outer loop</span>
        keepChecking = <span class="hljs-literal">False</span>
        Temp = []

        <span class="hljs-keyword">for</span> element <span class="hljs-keyword">in</span> TheList:         <span class="hljs-comment">#inner loop</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(element,<span class="hljs-built_in">list</span>):
                Temp.extend(element)
                keepChecking = <span class="hljs-literal">True</span>
            <span class="hljs-keyword">else</span>:
                Temp.append(element)

        listIsNested = keepChecking     <span class="hljs-comment">#determine if outer loop exits</span>
        TheList = Temp[:]

    <span class="hljs-keyword">return</span> TheList
</code></pre>

<p>This works with two lists: an inner for loop and an outer while loop.  </p>

<p>The inner for loop iterates through the list.  If it finds a list element, it (1) uses list.extend() to flatten that part one level of nesting and (2) switches keepChecking to True.  keepchecking is used to control the outer while loop.  If the outer loop gets set to true, it triggers the inner loop for another pass.  </p>

<p>Those passes keep happening until no more nested lists are found.  When a pass finally occurs where none are found, keepChecking never gets tripped to true, which means listIsNested stays false and the outer while loop exits.  </p>

<p>The flattened list is then returned.</p>

<p>Test-run   </p>

<pre class="lang-py s-code-block"><code class="hljs language-python">flatten([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,[<span class="hljs-number">100</span>,<span class="hljs-number">200</span>,<span class="hljs-number">300</span>,[<span class="hljs-number">1000</span>,<span class="hljs-number">2000</span>,<span class="hljs-number">3000</span>]]])
</code></pre>

<p><code>[1, 2, 3, 4, 100, 200, 300, 1000, 2000, 3000]</code></p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>When trying to answer such a question you really need to give the limitations of the code you propose as a solution. If it was only about performances I wouldn't mind too much, but most of the codes proposed as solution (including the accepted answer) fail to flatten any list that has a depth greater than 1000.</p>

<p>When I say <em>most of the codes</em> I mean all codes that use any form of recursion (or call a standard library function that is recursive). All these codes fail because for every of the recursive call made, the (call) stack grow by one unit, and the (default) python call stack has a size of 1000. </p>

<p>If you're not too familiar with the call stack, then maybe the following will help (otherwise you can just scroll to the <strong>Implementation</strong>).</p>

<h2>Call stack size and recursive programming (dungeon analogy)</h2>

<h3>Finding the treasure and exit</h3>

<p>Imagine you enter a huge <em>dungeon with numbered rooms</em>, looking for a treasure. You don't know the place but you have some <strong>indications</strong> on how to find the treasure. Each indication is a riddle (difficulty varies, but you can't predict how hard they will be). You decide to think a little bit about a strategy to save time, you make two observations: </p>

<ol>
<li>It's hard (long) to find the treasure as you'll have to solve (potentially hard) riddles to get there. </li>
<li>Once the treasure found, returning to the entrance may be easy, you just have to use the same path in the other direction (though this needs a bit of memory to recall your path). </li>
</ol>

<p>When entering the dungeon, you notice a small <strong>notebook</strong> here. You decide to use it to write down every room you exit after solving a riddle (when entering a new room), this way you'll be able to return back to the entrance. That's a genius idea, you <em>won't even spend a cent</em> implementing your strategy.</p>

<p>You enter the dungeon, solving with great success the first 1001 riddles, but here comes something you hadn't planed, you have no space left in the notebook you borrowed. You decide to <em>abandon</em> your quest as you prefer not having the treasure than being lost forever inside the dungeon (that looks smart indeed).</p>

<h3>Executing a recursive program</h3>

<p>Basically, it's the exact same thing as finding the treasure. The dungeon is the <em>computer's memory</em>, your goal now is not to find a treasure but to <em>compute some function</em> (find <em>f(x)</em> for a given <em>x</em>). The indications simply are sub-routines that will help you solving <em>f(x)</em>. Your strategy is the same as the <em>call stack</em> strategy, the notebook is the stack, the rooms are the functions' return addresses: </p>

<pre class="lang-py s-code-block"><code class="hljs language-python">x = [<span class="hljs-string">"over here"</span>, <span class="hljs-string">"am"</span>, <span class="hljs-string">"I"</span>]
y = <span class="hljs-built_in">sorted</span>(x) <span class="hljs-comment"># You're about to enter a room named `sorted`, note down the current room address here so you can return back: 0x4004f4 (that room address looks weird)</span>
<span class="hljs-comment"># Seems like you went back from your quest using the return address 0x4004f4</span>
<span class="hljs-comment"># Let's see what you've collected </span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">' '</span>.join(y))
</code></pre>

<p>The problem you encountered in the dungeon will be the same here, the call stack has a finite size (here 1000) and therefore, if you enter too many functions without returning back then you'll fill the call stack and have an error that look like <strike>"Dear adventurer, I'm very sorry but your notebook is full"</strike>: <code>RecursionError: maximum recursion depth exceeded</code>. Note that you don't need recursion to fill the call stack, but it's very unlikely that a non-recursive program call 1000 functions without ever returning. It's important to also understand that once you returned from a function, the call stack is freed from the address used (hence the name "stack", return address are pushed in before entering a function and pulled out when returning). In the special case of a simple recursion (a function <code>f</code> that call itself once -- over and over --) you will enter <code>f</code> over and over until the computation is finished (until the treasure is found) and return from <code>f</code> until you go back to the place where you called <code>f</code> in the first place. The call stack will never be freed from anything until the end where it will be freed from all return addresses one after the other. </p>

<h3>How to avoid this issue?</h3>

<p>That's actually pretty simple: "don't use recursion if you don't know how deep it can go". That's not always true as in some cases, <a href="https://stackoverflow.com/questions/310974/what-is-tail-call-optimization">Tail Call recursion can be Optimized (TCO)</a>. But in python, this is not the case, and even "well written" recursive function will <strong>not</strong> optimize stack use. There is an interesting post from Guido about this question: <a href="http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html" rel="noreferrer"><em>Tail Recursion Elimination</em></a>.</p>

<p>There is a technique that you can use to make any recursive function iterative, this technique we could call <em><strong>bring your own notebook</strong></em>. For example, in our particular case we simply are exploring a list, entering a room is equivalent to entering a sublist, the question you should ask yourself is <em>how can I get back from a list to its parent list?</em> The answer is not that complex, repeat the following until the <code>stack</code> is empty:</p>

<ol>
<li>push the current list <code>address</code> and <code>index</code> in a <code>stack</code> when entering a new sublist (note that a list address+index is also an address, therefore we just use the exact same technique used by the call stack);</li>
<li>every time an item is found, <code>yield</code> it (or add them in a list);</li>
<li>once a list is fully explored, go back to the parent list using the <code>stack</code> <em>return <code>address</code> (and <code>index</code>)</em>.</li>
</ol>

<p>Also note that this is equivalent to a DFS in a tree where some nodes are sublists <code>A = [1, 2]</code> and some are simple items: <code>0, 1, 2, 3, 4</code> (for <code>L = [0, [1,2], 3, 4]</code>). The tree looks like this:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">                    L
                    |
           -------------------
           |     |     |     |
           <span class="hljs-number">0</span>   --A--   <span class="hljs-number">3</span>     <span class="hljs-number">4</span>
               |   |
               <span class="hljs-number">1</span>   <span class="hljs-number">2</span>
</code></pre>

<p>The DFS traversal pre-order is: L, 0, A, 1, 2, 3, 4. Remember, in order to implement an iterative DFS you also "need" a stack. The implementation I proposed before result in having the following states (for the <code>stack</code> and the <code>flat_list</code>): </p>

<pre class="lang-py s-code-block"><code class="hljs language-python">init.:  stack=[(L, <span class="hljs-number">0</span>)]
**<span class="hljs-number">0</span>**:  stack=[(L, <span class="hljs-number">0</span>)],         flat_list=[<span class="hljs-number">0</span>]
**A**:  stack=[(L, <span class="hljs-number">1</span>), (A, <span class="hljs-number">0</span>)], flat_list=[<span class="hljs-number">0</span>]
**<span class="hljs-number">1</span>**:  stack=[(L, <span class="hljs-number">1</span>), (A, <span class="hljs-number">0</span>)], flat_list=[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]
**<span class="hljs-number">2</span>**:  stack=[(L, <span class="hljs-number">1</span>), (A, <span class="hljs-number">1</span>)], flat_list=[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>]
**<span class="hljs-number">3</span>**:  stack=[(L, <span class="hljs-number">2</span>)],         flat_list=[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
**<span class="hljs-number">3</span>**:  stack=[(L, <span class="hljs-number">3</span>)],         flat_list=[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
<span class="hljs-keyword">return</span>: stack=[],               flat_list=[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
</code></pre>

<p>In this example, the stack maximum size is 2, because the input list (and therefore the tree) have depth 2.</p>

<h2>Implementation</h2>

<p>For the implementation, in python you can simplify a little bit by using iterators instead of simple lists. References to the (sub)iterators will be used to store <em>sublists return addresses</em> (instead of having both the list address and the index). This is not a big difference but I feel this is more readable (and also a bit faster):</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">iterable</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(items_from(iterable))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">items_from</span>(<span class="hljs-params">iterable</span>):
    cursor_stack = [<span class="hljs-built_in">iter</span>(iterable)]
    <span class="hljs-keyword">while</span> cursor_stack:
        sub_iterable = cursor_stack[-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">try</span>:
            item = <span class="hljs-built_in">next</span>(sub_iterable)
        <span class="hljs-keyword">except</span> StopIteration:   <span class="hljs-comment"># post-order</span>
            cursor_stack.pop()
            <span class="hljs-keyword">continue</span>
        <span class="hljs-keyword">if</span> is_list_like(item):  <span class="hljs-comment"># pre-order</span>
            cursor_stack.append(<span class="hljs-built_in">iter</span>(item))
        <span class="hljs-keyword">elif</span> item <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">yield</span> item          <span class="hljs-comment"># in-order</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">is_list_like</span>(<span class="hljs-params">item</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">isinstance</span>(item, <span class="hljs-built_in">list</span>)
</code></pre>

<p>Also, notice that in <code>is_list_like</code> I have <code>isinstance(item, list)</code>, which could be changed to handle more input types, here I just wanted to have the simplest version where (iterable) is just a list. But you could also do that:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_list_like</span>(<span class="hljs-params">item</span>):
    <span class="hljs-keyword">try</span>:
        <span class="hljs-built_in">iter</span>(item)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(item, <span class="hljs-built_in">str</span>)  <span class="hljs-comment"># strings are not lists (hmm...) </span>
    <span class="hljs-keyword">except</span> TypeError:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
</code></pre>

<p>This considers strings as "simple items" and therefore <code>flatten_iter([["test", "a"], "b])</code> will return <code>["test", "a", "b"]</code> and not <code>["t", "e", "s", "t", "a", "b"]</code>. Remark that in that case, <code>iter(item)</code> is called twice on each item, let's pretend it's an exercise for the reader to make this cleaner. </p>

<h2>Testing and remarks on other implementations</h2>

<p>In the end, remember that you can't print a infinitely nested list <code>L</code> using <code>print(L)</code> because internally it will use recursive calls to <code>__repr__</code> (<code>RecursionError: maximum recursion depth exceeded while getting the repr of an object</code>). For the same reason, solutions to <code>flatten</code> involving <code>str</code> will fail with the same error message. </p>

<p>If you need to test your solution, you can use this function to generate a simple nested list:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">build_deep_list</span>(<span class="hljs-params">depth</span>):
    <span class="hljs-string">"""Returns a list of the form $l_{depth} = [depth-1, l_{depth-1}]$
    with $depth &gt; 1$ and $l_0 = [0]$.
    """</span>
    sub_list = [<span class="hljs-number">0</span>]
    <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, depth):
        sub_list = [d, sub_list]
    <span class="hljs-keyword">return</span> sub_list
</code></pre>

<p>Which gives: <code>build_deep_list(5)</code> &gt;&gt;&gt; <code>[4, [3, [2, [1, [0]]]]]</code>.</p>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I didn't go through all the already available answers here, but here is a one liner I came up with, borrowing from lisp's way of first and rest list processing</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">l</span>): <span class="hljs-keyword">return</span> flatten(l[<span class="hljs-number">0</span>]) + (flatten(l[<span class="hljs-number">1</span>:]) <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(l) &gt; <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> []) <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(l) <span class="hljs-keyword">is</span> <span class="hljs-built_in">list</span> <span class="hljs-keyword">else</span> [l]
</code></pre>
<p>here is one simple and one not-so-simple case -</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>flatten([<span class="hljs-number">1</span>,[<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],<span class="hljs-number">4</span>])
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]

<span class="hljs-meta">&gt;&gt;&gt; </span>flatten([<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-number">4</span>, [<span class="hljs-number">5</span>, [<span class="hljs-number">6</span>, {<span class="hljs-string">'name'</span>: <span class="hljs-string">'some_name'</span>, <span class="hljs-string">'age'</span>:<span class="hljs-number">30</span>}, <span class="hljs-number">7</span>]], [<span class="hljs-number">8</span>, <span class="hljs-number">9</span>, [<span class="hljs-number">10</span>, [<span class="hljs-number">11</span>, [<span class="hljs-number">12</span>, [<span class="hljs-number">13</span>, {<span class="hljs-string">'some'</span>, <span class="hljs-string">'set'</span>}, <span class="hljs-number">14</span>, [<span class="hljs-number">15</span>, <span class="hljs-string">'some_string'</span>], <span class="hljs-number">16</span>], <span class="hljs-number">17</span>, <span class="hljs-number">18</span>], <span class="hljs-number">19</span>], <span class="hljs-number">20</span>], <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, [<span class="hljs-number">23</span>, <span class="hljs-number">24</span>], <span class="hljs-number">25</span>], <span class="hljs-number">26</span>, <span class="hljs-number">27</span>, <span class="hljs-number">28</span>, <span class="hljs-number">29</span>, <span class="hljs-number">30</span>])
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, {<span class="hljs-string">'age'</span>: <span class="hljs-number">30</span>, <span class="hljs-string">'name'</span>: <span class="hljs-string">'some_name'</span>}, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-built_in">set</span>([<span class="hljs-string">'set'</span>, <span class="hljs-string">'some'</span>]), <span class="hljs-number">14</span>, <span class="hljs-number">15</span>, <span class="hljs-string">'some_string'</span>, <span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">19</span>, <span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>, <span class="hljs-number">25</span>, <span class="hljs-number">26</span>, <span class="hljs-number">27</span>, <span class="hljs-number">28</span>, <span class="hljs-number">29</span>, <span class="hljs-number">30</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>
</code></pre>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's the <code>compiler.ast.flatten</code> implementation in 2.7.5:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">seq</span>):
    l = []
    <span class="hljs-keyword">for</span> elt <span class="hljs-keyword">in</span> seq:
        t = <span class="hljs-built_in">type</span>(elt)
        <span class="hljs-keyword">if</span> t <span class="hljs-keyword">is</span> <span class="hljs-built_in">tuple</span> <span class="hljs-keyword">or</span> t <span class="hljs-keyword">is</span> <span class="hljs-built_in">list</span>:
            <span class="hljs-keyword">for</span> elt2 <span class="hljs-keyword">in</span> flatten(elt):
                l.append(elt2)
        <span class="hljs-keyword">else</span>:
            l.append(elt)
    <span class="hljs-keyword">return</span> l
</code></pre>

<p>There are better, faster methods (If you've reached here, you have seen them already)</p>

<p>Also note:</p>

<blockquote>
  <p>Deprecated since version 2.6: The compiler package has been removed in Python 3.</p>
</blockquote>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>totally hacky but I think it would work (depending on your data_type)</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">flat_list = ast.literal_eval(<span class="hljs-string">"[%s]"</span>%re.sub(<span class="hljs-string">"[\[\]]"</span>,<span class="hljs-string">""</span>,<span class="hljs-built_in">str</span>(the_list)))
</code></pre>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I'm surprised no one has thought of this. Damn recursion I don't get the recursive answers that the advanced people here made. anyway here is my attempt on this. caveat is it's very specific to the OP's use case</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> re

L = [[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]
flattened_list = re.sub(<span class="hljs-string">"[\[\]]"</span>, <span class="hljs-string">""</span>, <span class="hljs-built_in">str</span>(L)).replace(<span class="hljs-string">" "</span>, <span class="hljs-string">""</span>).split(<span class="hljs-string">","</span>)
new_list = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, flattened_list))
<span class="hljs-built_in">print</span>(new_list)
</code></pre>

<p>output:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
</code></pre>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Just use a <a href="https://funcy.readthedocs.io/en/stable/" rel="nofollow noreferrer"><code>funcy</code></a> library:
<code>pip install funcy</code></p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> funcy


funcy.flatten([[[[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], <span class="hljs-number">1</span>], <span class="hljs-number">2</span>], <span class="hljs-number">3</span>]) <span class="hljs-comment"># returns generator</span>
funcy.lflatten([[[[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], <span class="hljs-number">1</span>], <span class="hljs-number">2</span>], <span class="hljs-number">3</span>]) <span class="hljs-comment"># returns list</span>
</code></pre>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 21</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I am a dumb guy so I'll give a "dumb" solution. All that recursion hurts my brain.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">flattened_list = []
nested_list = [[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">nested_list, container</span>):
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> nested_list:
        <span class="hljs-keyword">if</span> isintance(item, <span class="hljs-built_in">list</span>):
            flatten(item, container)
        <span class="hljs-keyword">else</span>:
            container.append(item)

<span class="hljs-meta">&gt;&gt;&gt; </span>flatten(nested_list, flattened_list)
<span class="hljs-meta">&gt;&gt;&gt; </span>flattened_list
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
</code></pre>

<p>I get that it's using a side effect but well that's to the best of my comprehension of recursion can go</p>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 22</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I don't see anything like this posted around here and just got here from a closed question on the same subject, but why not just do something like this(if you know the type of the list you want to split):</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">25</span>, <span class="hljs-number">11</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]]]    
<span class="hljs-meta">&gt;&gt;&gt; </span>g = <span class="hljs-built_in">str</span>(a).replace(<span class="hljs-string">'['</span>, <span class="hljs-string">''</span>).replace(<span class="hljs-string">']'</span>, <span class="hljs-string">''</span>)    
<span class="hljs-meta">&gt;&gt;&gt; </span>b = [<span class="hljs-built_in">int</span>(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> g.split(<span class="hljs-string">','</span>) <span class="hljs-keyword">if</span> x.strip()]
</code></pre>

<p>You would need to know the type of the elements but I think this can be generalised and in terms of speed I think it would be faster.</p>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 23</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is another py2 approach, Im not sure if its the fastest or the most elegant nor safest ...</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Iterable
<span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> imap, repeat, chain


<span class="hljs-keyword">def</span> <span class="hljs-title function_">flat</span>(<span class="hljs-params">seqs, ignore=(<span class="hljs-params"><span class="hljs-built_in">int</span>, long, <span class="hljs-built_in">float</span>, basestring</span>)</span>):
    <span class="hljs-keyword">return</span> repeat(seqs, <span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> <span class="hljs-built_in">any</span>(imap(<span class="hljs-built_in">isinstance</span>, repeat(seqs), ignore)) <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(seqs, Iterable) <span class="hljs-keyword">else</span> chain.from_iterable(imap(flat, seqs))
</code></pre>

<p>It can ignore any specific (or derived) type you would like, it returns an iterator, so you can convert it to any specific container such as list, tuple, dict or simply consume it in order to reduce memory footprint, for better or worse it can handle initial non-iterable objects such as int ...</p>

<p>Note most of the heavy lifting is done in C, since as far as I know thats how itertools are implemented, so while it is recursive, AFAIK it isn't bounded by python recursion depth since the function calls are happening in C, though this doesn't mean you are bounded by memory, specially in OS X where its stack size has a hard limit as of today (OS X Mavericks) ...</p>

<p>there is a slightly faster approach, but less portable method, only use it if you can assume that the base elements of the input can be explicitly determined otherwise, you'll get an infinite recursion, and OS X with its limited stack size, will throw a segmentation fault fairly quickly ...</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flat</span>(<span class="hljs-params">seqs, ignore={<span class="hljs-built_in">int</span>, long, <span class="hljs-built_in">float</span>, <span class="hljs-built_in">str</span>, unicode}</span>):
    <span class="hljs-keyword">return</span> repeat(seqs, <span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(seqs) <span class="hljs-keyword">in</span> ignore <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(seqs, Iterable) <span class="hljs-keyword">else</span> chain.from_iterable(imap(flat, seqs))
</code></pre>

<p>here we are using sets to check for the type so it takes O(1) vs O(number of types) to check whether or not an element should be ignored, though of course any value with derived type of the stated ignored types will fail, this is why its using <code>str</code>, <code>unicode</code> so use it with caution ...</p>

<p>tests:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> random

<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_flat</span>(<span class="hljs-params">test_size=<span class="hljs-number">2000</span></span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">increase_depth</span>(<span class="hljs-params">value, depth=<span class="hljs-number">1</span></span>):
        <span class="hljs-keyword">for</span> func <span class="hljs-keyword">in</span> xrange(depth):
            value = repeat(value, <span class="hljs-number">1</span>)
        <span class="hljs-keyword">return</span> value

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">random_sub_chaining</span>(<span class="hljs-params">nested_values</span>):
        <span class="hljs-keyword">for</span> values <span class="hljs-keyword">in</span> nested_values:
            <span class="hljs-keyword">yield</span> chain((values,), chain.from_iterable(imap(<span class="hljs-built_in">next</span>, repeat(nested_values, random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)))))

    expected_values = <span class="hljs-built_in">zip</span>(xrange(test_size), imap(<span class="hljs-built_in">str</span>, xrange(test_size)))
    nested_values = random_sub_chaining((increase_depth(value, depth) <span class="hljs-keyword">for</span> depth, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(expected_values)))
    <span class="hljs-keyword">assert</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">any</span>(imap(cmp, chain.from_iterable(expected_values), flat(chain(((),), nested_values, ((),)))))

<span class="hljs-meta">&gt;&gt;&gt; </span>test_flat()
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(flat([[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]))
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span> 

$ uname -a
Darwin Samys-MacBook-Pro.local <span class="hljs-number">13.3</span><span class="hljs-number">.0</span> Darwin Kernel Version <span class="hljs-number">13.3</span><span class="hljs-number">.0</span>: Tue Jun  <span class="hljs-number">3</span> <span class="hljs-number">21</span>:<span class="hljs-number">27</span>:<span class="hljs-number">35</span> PDT <span class="hljs-number">2014</span>; root:xnu-<span class="hljs-number">2422.110</span><span class="hljs-number">.17</span>~<span class="hljs-number">1</span>/RELEASE_X86_64 x86_64
$ python --version
Python <span class="hljs-number">2.7</span><span class="hljs-number">.5</span>
</code></pre>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 24</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Without using any library:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flat</span>(<span class="hljs-params">l</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_flat</span>(<span class="hljs-params">l, r</span>):    
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(l) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">list</span>:
            r.append(l)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> l:
                r = r + flat(i)
        <span class="hljs-keyword">return</span> r
    <span class="hljs-keyword">return</span> _flat(l, [])



<span class="hljs-comment"># example</span>
test = [[<span class="hljs-number">1</span>], [[<span class="hljs-number">2</span>]], [<span class="hljs-number">3</span>], [[<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>,<span class="hljs-string">'c'</span>] , [[<span class="hljs-string">'z'</span>,<span class="hljs-string">'x'</span>,<span class="hljs-string">'y'</span>]], [<span class="hljs-string">'d'</span>,<span class="hljs-string">'f'</span>,<span class="hljs-string">'g'</span>]], <span class="hljs-number">4</span>]    
<span class="hljs-built_in">print</span> flat(test) <span class="hljs-comment"># prints [1, 2, 3, 'a', 'b', 'c', 'z', 'x', 'y', 'd', 'f', 'g', 4]</span>
</code></pre>
    </div></div></div></div><div id="solution25" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 25</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using <code>itertools.chain</code>:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> itertools
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Iterable

<span class="hljs-keyword">def</span> <span class="hljs-title function_">list_flatten</span>(<span class="hljs-params">lst</span>):
    flat_lst = []
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> itertools.chain(lst):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(item, Iterable):
            item = list_flatten(item)
            flat_lst.extend(item)
        <span class="hljs-keyword">else</span>:
            flat_lst.append(item)
    <span class="hljs-keyword">return</span> flat_lst
</code></pre>

<p>Or without chaining:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">q, final</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> q:
        <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(q, <span class="hljs-built_in">list</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(q[<span class="hljs-number">0</span>], <span class="hljs-built_in">list</span>):
            final.append(q[<span class="hljs-number">0</span>])
        <span class="hljs-keyword">else</span>:
            flatten(q[<span class="hljs-number">0</span>], final)
        flatten(q[<span class="hljs-number">1</span>:], final)
    <span class="hljs-keyword">else</span>:
        final.append(q)
</code></pre>
    </div></div></div></div><div id="solution26" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 26</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I used recursive to solve <strong><em>nested list with any depth</em></strong></p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">combine_nlist</span>(<span class="hljs-params">nlist,init=<span class="hljs-number">0</span>,combiner=<span class="hljs-keyword">lambda</span> x,y: x+y</span>):
    <span class="hljs-string">'''
    apply function: combiner to a nested list element by element(treated as flatten list)
    '''</span>
    current_value=init
    <span class="hljs-keyword">for</span> each_item <span class="hljs-keyword">in</span> nlist:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(each_item,<span class="hljs-built_in">list</span>):
            current_value =combine_nlist(each_item,current_value,combiner)
        <span class="hljs-keyword">else</span>:
            current_value = combiner(current_value,each_item)
    <span class="hljs-keyword">return</span> current_value
</code></pre>

<p>So after i define function combine_nlist, it is easy to use this function do flatting. Or you can combine it into one function. I like my solution because it can be applied to any nested list.</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten_nlist</span>(<span class="hljs-params">nlist</span>):
    <span class="hljs-keyword">return</span> combine_nlist(nlist,[],<span class="hljs-keyword">lambda</span> x,y:x+[y])
</code></pre>

<p>result</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">In [<span class="hljs-number">379</span>]: flatten_nlist([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>],[<span class="hljs-number">6</span>],[[[<span class="hljs-number">7</span>],<span class="hljs-number">8</span>],<span class="hljs-number">9</span>],<span class="hljs-number">10</span>])
Out[<span class="hljs-number">379</span>]: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]
</code></pre>
    </div></div></div></div><div id="solution27" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 27</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The easiest way is to use the <a href="https://github.com/metagriffin/morph" rel="nofollow">morph</a> library using <code>pip install morph</code>.</p>

<p>The code is:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">import</span> morph

<span class="hljs-built_in">list</span> = [[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]
flattened_list = morph.flatten(<span class="hljs-built_in">list</span>)  <span class="hljs-comment"># returns [1, 2, 3, 4, 5, 6]</span>
</code></pre>
    </div></div></div></div><div id="solution28" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 28</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I am aware that there are already many awesome answers but i wanted to add an answer that uses the functional programming method of solving the question. In this answer i make use of double recursion :</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten_list</span>(<span class="hljs-params">seq</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> seq:
        <span class="hljs-keyword">return</span> []
    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(seq[<span class="hljs-number">0</span>],<span class="hljs-built_in">list</span>):
        <span class="hljs-keyword">return</span> (flatten_list(seq[<span class="hljs-number">0</span>])+flatten_list(seq[<span class="hljs-number">1</span>:]))
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> [seq[<span class="hljs-number">0</span>]]+flatten_list(seq[<span class="hljs-number">1</span>:])

<span class="hljs-built_in">print</span>(flatten_list([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,[<span class="hljs-number">3</span>,[<span class="hljs-number">4</span>],<span class="hljs-number">5</span>],[<span class="hljs-number">6</span>,<span class="hljs-number">7</span>]]))
</code></pre>

<p>output:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>]
</code></pre>
    </div></div></div></div><div id="solution29" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 29</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I'm not sure if this is necessarily quicker or more effective, but this is what I do:</p>

<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten</span>(<span class="hljs-params">lst</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">eval</span>(<span class="hljs-string">'['</span> + <span class="hljs-built_in">str</span>(lst).replace(<span class="hljs-string">'['</span>, <span class="hljs-string">''</span>).replace(<span class="hljs-string">']'</span>, <span class="hljs-string">''</span>) + <span class="hljs-string">']'</span>)

L = [[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]], <span class="hljs-number">6</span>]
<span class="hljs-built_in">print</span>(flatten(L))
</code></pre>

<p>The <code>flatten</code> function here turns the list into a string, takes out <strong>all</strong> of the square brackets, attaches square brackets back onto the ends, and turns it back into a list. </p>

<p>Although, if you knew you would have square brackets in your list in strings, like <code>[[1, 2], "[3, 4] and [5]"]</code>, you would have to do something else.</p>
    </div></div></div></div><div id="solution30" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 30</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is a simple implement of flatten on python2</p>

<pre class="lang-py s-code-block"><code class="hljs language-python">flatten=<span class="hljs-keyword">lambda</span> l: reduce(<span class="hljs-keyword">lambda</span> x,y:x+y,<span class="hljs-built_in">map</span>(flatten,l),[]) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(l,<span class="hljs-built_in">list</span>) <span class="hljs-keyword">else</span> [l]

test=[[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>],[<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,[<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,[<span class="hljs-number">10</span>,[<span class="hljs-number">11</span>,[<span class="hljs-number">12</span>,<span class="hljs-number">13</span>,<span class="hljs-number">14</span>]]]]]],]
<span class="hljs-built_in">print</span> flatten(test)

<span class="hljs-comment">#output [1, 2, 3, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]</span>
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/is-floating-point-math-broken-1657384238910">Is floating point math broken?</a><a href="/questions/how-do-i-return-the-response-from-an-asynchronous-call-1657384208012">How do I return the response from an asynchronous call?</a><a href="/questions/dynamically-access-object-property-using-variable-1657384439324">Dynamically access object property using variable</a><a href="/questions/what-is-a-smart-pointer-and-when-should-i-use-one-1657387905461">What is a smart pointer and when should I use one?</a><a href="/questions/addeventlistener-vs-onclick-1657388191429">addEventListener vs onclick</a><a href="/questions/how-to-create-recyclerview-with-multiple-view-types-1657388121512">How to create RecyclerView with multiple view types</a><a href="/questions/int-division:-why-is-the-result-of-13-0-1657387547814">Int division: Why is the result of 1/3 == 0?</a><a href="/questions/dynamic-tabs-with-user-click-chosen-components-1657388465232">Dynamic tabs with user-click chosen components</a><a href="/questions/efficiently-convert-rows-to-columns-in-sql-server-1657387919213">Efficiently convert rows to columns in sql server</a><a href="/questions/with-arrays-why-is-it-the-case-that-a5-5a-1657387956216">With arrays, why is it the case that a[5] == 5[a]?</a><a href="/questions/is-it-possible-for-flex-items-to-align-tightly-to-the-items-above-them-1657388511179">Is it possible for flex items to align tightly to the items above them?</a><a href="/questions/what-is-javascript&#x27;s-highest-integer-value-that-a-number-can-go-to-without-losing-precision-1657387622983">What is JavaScript&#x27;s highest integer value that a number can go to without losing precision?</a><a href="/questions/correctly-allocating-multi-dimensional-arrays-1657387733756">Correctly allocating multi-dimensional arrays</a><a href="/questions/are-&#x27;arrow-functions&#x27;-and-&#x27;functions&#x27;-equivalent-interchangeable-1657384527873">Are &#x27;Arrow Functions&#x27; and &#x27;Functions&#x27; equivalent / interchangeable?</a><a href="/questions/how-do-i-return-the-response-from-an-observablehttpasync-call-in-angular-1657387335024">How do I return the response from an Observable/http/async call in angular?</a><a href="/questions/why-does-my-javascript-code-receive-a-%22no-&#x27;access-control-allow-origin&#x27;-header-is-present-on-the-requested-resource%22-error-while-postman-does-not-1657384636363">Why does my JavaScript code receive a &quot;No &#x27;Access-Control-Allow-Origin&#x27; header is present on the requested resource&quot; error, while Postman does not?</a><a href="/questions/how-to-make-good-reproducible-pandas-examples-1657384310402">How to make good reproducible pandas examples</a><a href="/questions/how-can-i-make-bootstrap-columns-all-the-same-height-1657388551403">How can I make Bootstrap columns all the same height?</a><a href="/questions/my-attempt-at-value-initialization-is-interpreted-as-a-function-declaration-and-why-doesn&#x27;t-a-a(())-solve-it-1657388474057">My attempt at value initialization is interpreted as a function declaration, and why doesn&#x27;t A a(()); solve it?</a><a href="/questions/cleansing-user-passwords-1657387365583">Cleansing User Passwords</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;Using generator functions can make your example easier to read and improve performance.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Python 2\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Using the \u0026lt;a href=\u0026quot;https://docs.python.org/2/library/collections.html#collections-abstract-base-classes\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Iterable\u0026lt;/code\u0026gt; ABC\u0026lt;/a\u0026gt; added in 2.6:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; collections \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; Iterable\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;xs\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; xs:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(x, Iterable) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(x, basestring):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; flatten(x):\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; item\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; x\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Python 3\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;In Python 3, \u0026lt;code\u0026gt;basestring\u0026lt;/code\u0026gt; is no more, but the tuple \u0026lt;code\u0026gt;(str, bytes)\u0026lt;/code\u0026gt; gives the same effect. Also, the \u0026lt;a href=\u0026quot;https://docs.python.org/3/whatsnew/3.3.html#pep-380\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;yield from\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; operator returns an item from a generator one at a time.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; collections.abc \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; Iterable\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;xs\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; xs:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(x, Iterable) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(x, (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bytes\u0026lt;/span\u0026gt;)):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; flatten(x)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; x\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;My solution:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; collections\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(x, collections.Iterable):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; [a \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; a \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; flatten(i)]\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; [x]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;A little more concise, but pretty much the same.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Generator using recursion and duck typing (updated for Python 3):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; L:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; flatten(item)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; TypeError:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; item\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten([[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]))\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is my functional version of recursive flatten which handles both tuples and lists, and lets you throw in any mix of positional arguments. Returns a generator which produces the entire sequence in order, arg by arg:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;flatten = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; *n: (e \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; a \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; e \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; (flatten(*a) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(a, (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tuple\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; (a,)))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Usage:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;l1 = [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;c\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;d\u0026apos;\u0026lt;/span\u0026gt;)]]\nl2 = [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;), [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,), [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]], (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;,)]\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten(l1, -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, l2))\n[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;c\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;d\u0026apos;\u0026lt;/span\u0026gt;, -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Generator version of @unutbu\u0026apos;s non-recursive solution, as requested by @Andrew in a comment:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;genflat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;l, ltypes=collections.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Sequence\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    l = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(l)\n    i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; i \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(l):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(l[i], ltypes):\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; l[i]:\n                l.pop(i)\n                i -= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n                l[i:i + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] = l[i]\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; l[i]\n        i += \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Slightly simplified version of this generator:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;genflat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;l, ltypes=collections.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Sequence\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    l = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(l)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; l:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; l \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(l[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;], ltypes):\n            l[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] = l[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; l: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; l.pop(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This version of \u0026lt;code\u0026gt;flatten\u0026lt;/code\u0026gt; avoids python\u0026apos;s recursion limit (and thus works with arbitrarily deep, nested iterables). It is a generator which can handle strings and arbitrary iterables (even infinite ones).\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; itertools \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; IT\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; collections\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;iterable, ltypes=collections.Iterable\u0026lt;/span\u0026gt;):\n    remainder = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;iter\u0026lt;/span\u0026gt;(iterable)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;:\n        first = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(remainder)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(first, ltypes) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(first, (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bytes\u0026lt;/span\u0026gt;)):\n            remainder = IT.chain(first, remainder)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; first\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Here are some examples demonstrating its use:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(IT.islice(flatten(IT.repeat(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)),\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;)))\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(IT.islice(flatten(IT.chain(IT.repeat(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;),\n                                       {\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;},\n                                       \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;foo bar\u0026apos;\u0026lt;/span\u0026gt;.split(),\n                                       IT.repeat(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;),)),\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;)))\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# [2, 2, 2, 10, 20, 30, \u0026apos;foo\u0026apos;, \u0026apos;bar\u0026apos;, 1, 1]\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten([[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]]])))\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# [1, 2, 3, 4]\u0026lt;/span\u0026gt;\n\nseq = ([[\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;chr\u0026lt;/span\u0026gt;(i),\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;chr\u0026lt;/span\u0026gt;(i-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;32\u0026lt;/span\u0026gt;)] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;range\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;ord\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;ord\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;z\u0026apos;\u0026lt;/span\u0026gt;)+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)] + \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;range\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;)))\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten(seq)))\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# [\u0026apos;a\u0026apos;, \u0026apos;A\u0026apos;, \u0026apos;b\u0026apos;, \u0026apos;B\u0026apos;, \u0026apos;c\u0026apos;, \u0026apos;C\u0026apos;, \u0026apos;d\u0026apos;, \u0026apos;D\u0026apos;, \u0026apos;e\u0026apos;, \u0026apos;E\u0026apos;, \u0026apos;f\u0026apos;, \u0026apos;F\u0026apos;, \u0026apos;g\u0026apos;, \u0026apos;G\u0026apos;, \u0026apos;h\u0026apos;, \u0026apos;H\u0026apos;,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# \u0026apos;i\u0026apos;, \u0026apos;I\u0026apos;, \u0026apos;j\u0026apos;, \u0026apos;J\u0026apos;, \u0026apos;k\u0026apos;, \u0026apos;K\u0026apos;, \u0026apos;l\u0026apos;, \u0026apos;L\u0026apos;, \u0026apos;m\u0026apos;, \u0026apos;M\u0026apos;, \u0026apos;n\u0026apos;, \u0026apos;N\u0026apos;, \u0026apos;o\u0026apos;, \u0026apos;O\u0026apos;, \u0026apos;p\u0026apos;, \u0026apos;P\u0026apos;,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# \u0026apos;q\u0026apos;, \u0026apos;Q\u0026apos;, \u0026apos;r\u0026apos;, \u0026apos;R\u0026apos;, \u0026apos;s\u0026apos;, \u0026apos;S\u0026apos;, \u0026apos;t\u0026apos;, \u0026apos;T\u0026apos;, \u0026apos;u\u0026apos;, \u0026apos;U\u0026apos;, \u0026apos;v\u0026apos;, \u0026apos;V\u0026apos;, \u0026apos;w\u0026apos;, \u0026apos;W\u0026apos;, \u0026apos;x\u0026apos;, \u0026apos;X\u0026apos;,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# \u0026apos;y\u0026apos;, \u0026apos;Y\u0026apos;, \u0026apos;z\u0026apos;, \u0026apos;Z\u0026apos;, 0, 1, 2, 3, 4, 5, 6, 7, 8]\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Although \u0026lt;code\u0026gt;flatten\u0026lt;/code\u0026gt; can handle infinite generators, it can not handle infinite nesting:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;infinitely_nested\u0026lt;/span\u0026gt;():\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; IT.chain(infinitely_nested(), IT.repeat(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;))\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(IT.islice(flatten(infinitely_nested()), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;)))\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# hangs\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;xs\u0026lt;/span\u0026gt;):\n    res = []\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;loop\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;ys\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; ys:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(i, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;):\n                loop(i)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n                res.append(i)\n    loop(xs)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; res\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here\u0026apos;s another answer that is even more interesting...\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; re\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;TheList\u0026lt;/span\u0026gt;):\n    a = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;(TheList)\n    b,_Anon = re.subn(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;r\u0026apos;[\\[,\\]]\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt;, a)\n    c = b.split()\n    d = [\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;(x) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; c]\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;(d)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Basically, it converts the nested list to a string, uses a regex to strip out the nested syntax, and then converts the result back to a (flattened) list.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It was fun trying to create a function that could flatten irregular list in Python, but of course that is what Python is for (to make programming fun). The following generator works fairly well with some caveats:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;iterable\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; iterable:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; flatten(item)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; TypeError:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; iterable\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It will flatten datatypes that you might want left alone (like \u0026lt;code\u0026gt;bytearray\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;bytes\u0026lt;/code\u0026gt;, and \u0026lt;code\u0026gt;str\u0026lt;/code\u0026gt; objects). Also, the code relies on the fact that requesting an iterator from a non-iterable raises a \u0026lt;code\u0026gt;TypeError\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;L = [[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;iterable\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; iterable:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; flatten(item)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; TypeError:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; iterable\n\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten(L))\n[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Edit:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I disagree with the previous implementation. The problem is that you should not be able to flatten something that is not an iterable. It is confusing and gives the wrong impression of the argument.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;))\n[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;]\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The following generator is almost the same as the first but does not have the problem of trying to flatten a non-iterable object. It fails as one would expect when an inappropriate argument is given to it.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;iterable\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; iterable:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; flatten(item)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; TypeError:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; item\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Testing the generator works fine with the list that was provided. However, the new code will raise a \u0026lt;code\u0026gt;TypeError\u0026lt;/code\u0026gt; when a non-iterable object is given to it. Example are shown below of the new behavior.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;L = [[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten(L))\n[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;))\nTraceback (most recent call last):\n  File \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;pyshell#32\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;, line \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026amp;lt;module\u0026amp;gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;))\n  File \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;pyshell#27\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;, line \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; flatten\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; iterable:\nTypeError: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;int\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; iterable\n\u0026amp;gt;\u0026amp;gt;\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You could use \u0026lt;a href=\u0026quot;https://iteration-utilities.readthedocs.io/en/latest/generated/deepflatten.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;deepflatten\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; from the 3rd party package \u0026lt;a href=\u0026quot;https://iteration-utilities.readthedocs.io/en/latest/index.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;iteration_utilities\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; iteration_utilities \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; deepflatten\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;L = [[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(deepflatten(L))\n[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(deepflatten(L, types=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;))  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# only flatten \u0026quot;inner\u0026quot; lists\u0026lt;/span\u0026gt;\n[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It\u0026apos;s an iterator so you need to iterate it (for example by wrapping it with \u0026lt;code\u0026gt;list\u0026lt;/code\u0026gt; or using it in a loop). Internally it uses an iterative approach instead of an recursive approach and it\u0026apos;s written as C extension so it can be faster than pure python approaches:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;%timeit \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(deepflatten(L))\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12.6\u0026lt;/span\u0026gt; µs ± \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;298\u0026lt;/span\u0026gt; ns per loop (mean ± std. dev. of \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt; runs, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100000\u0026lt;/span\u0026gt; loops each)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;%timeit \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(deepflatten(L, types=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;))\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8.7\u0026lt;/span\u0026gt; µs ± \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;139\u0026lt;/span\u0026gt; ns per loop (mean ± std. dev. of \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt; runs, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100000\u0026lt;/span\u0026gt; loops each)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;%timeit \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten(L))   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Cristian - Python 3.x approach from https://stackoverflow.com/a/2158532/5393381\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;86.4\u0026lt;/span\u0026gt; µs ± \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.42\u0026lt;/span\u0026gt; µs per loop (mean ± std. dev. of \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt; runs, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10000\u0026lt;/span\u0026gt; loops each)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;%timeit \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flatten(L))   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Josh Lee - https://stackoverflow.com/a/2158522/5393381\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;107\u0026lt;/span\u0026gt; µs ± \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.99\u0026lt;/span\u0026gt; µs per loop (mean ± std. dev. of \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt; runs, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10000\u0026lt;/span\u0026gt; loops each)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;%timeit \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(genflat(L, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;))  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Alex Martelli - https://stackoverflow.com/a/2159079/5393381\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23.1\u0026lt;/span\u0026gt; µs ± \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;710\u0026lt;/span\u0026gt; ns per loop (mean ± std. dev. of \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt; runs, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10000\u0026lt;/span\u0026gt; loops each)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;I\u0026apos;m the author of the \u0026lt;code\u0026gt;iteration_utilities\u0026lt;/code\u0026gt; library.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here\u0026apos;s a simple function that flattens lists of arbitrary depth. No recursion, to avoid stack overflow.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; copy \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; deepcopy\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten_list\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;nested_list\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;Flatten an arbitrarily nested list, without recursion (to avoid\n    stack overflows). Returns a new list, the original list is unchanged.\n\n    \u0026amp;gt;\u0026amp;gt; list(flatten_list([1, 2, 3, [4], [], [[[[[[[[[5]]]]]]]]]]))\n    [1, 2, 3, 4, 5]\n    \u0026amp;gt;\u0026amp;gt; list(flatten_list([[1, 2], 3]))\n    [1, 2, 3]\n\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    nested_list = deepcopy(nested_list)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; nested_list:\n        sublist = nested_list.pop(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(sublist, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;):\n            nested_list = sublist + nested_list\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; sublist\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Pandas has a function that does this. It returns an iterator as you mentioned.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;In [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; pandas\nIn [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]: pandas.core.common.flatten([[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;])\nOut[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]: \u0026amp;lt;generator \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; flatten at \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x7f12ade66200\u0026lt;/span\u0026gt;\u0026amp;gt;\nIn [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(pandas.core.common.flatten([[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]))\nOut[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Although an elegant and very pythonic answer has been selected I would present my solution just for the review:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;l\u0026lt;/span\u0026gt;):\n    ret = []\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; l:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(i, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(i, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tuple\u0026lt;/span\u0026gt;):\n            ret.extend(flat(i))\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            ret.append(i)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ret\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Please tell how good or bad this code is?\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I prefer simple answers.  No generators.  No recursion or recursion limits.  Just iteration:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;TheList\u0026lt;/span\u0026gt;):\n    listIsNested = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; listIsNested:                 \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#outer loop\u0026lt;/span\u0026gt;\n        keepChecking = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n        Temp = []\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; element \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; TheList:         \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#inner loop\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(element,\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;):\n                Temp.extend(element)\n                keepChecking = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n                Temp.append(element)\n\n        listIsNested = keepChecking     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#determine if outer loop exits\u0026lt;/span\u0026gt;\n        TheList = Temp[:]\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; TheList\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This works with two lists: an inner for loop and an outer while loop.  \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The inner for loop iterates through the list.  If it finds a list element, it (1) uses list.extend() to flatten that part one level of nesting and (2) switches keepChecking to True.  keepchecking is used to control the outer while loop.  If the outer loop gets set to true, it triggers the inner loop for another pass.  \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Those passes keep happening until no more nested lists are found.  When a pass finally occurs where none are found, keepChecking never gets tripped to true, which means listIsNested stays false and the outer while loop exits.  \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The flattened list is then returned.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Test-run   \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;flatten([\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;200\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;300\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3000\u0026lt;/span\u0026gt;]]])\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;[1, 2, 3, 4, 100, 200, 300, 1000, 2000, 3000]\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;When trying to answer such a question you really need to give the limitations of the code you propose as a solution. If it was only about performances I wouldn\u0026apos;t mind too much, but most of the codes proposed as solution (including the accepted answer) fail to flatten any list that has a depth greater than 1000.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;When I say \u0026lt;em\u0026gt;most of the codes\u0026lt;/em\u0026gt; I mean all codes that use any form of recursion (or call a standard library function that is recursive). All these codes fail because for every of the recursive call made, the (call) stack grow by one unit, and the (default) python call stack has a size of 1000. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you\u0026apos;re not too familiar with the call stack, then maybe the following will help (otherwise you can just scroll to the \u0026lt;strong\u0026gt;Implementation\u0026lt;/strong\u0026gt;).\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;Call stack size and recursive programming (dungeon analogy)\u0026lt;/h2\u0026gt;\n\n\u0026lt;h3\u0026gt;Finding the treasure and exit\u0026lt;/h3\u0026gt;\n\n\u0026lt;p\u0026gt;Imagine you enter a huge \u0026lt;em\u0026gt;dungeon with numbered rooms\u0026lt;/em\u0026gt;, looking for a treasure. You don\u0026apos;t know the place but you have some \u0026lt;strong\u0026gt;indications\u0026lt;/strong\u0026gt; on how to find the treasure. Each indication is a riddle (difficulty varies, but you can\u0026apos;t predict how hard they will be). You decide to think a little bit about a strategy to save time, you make two observations: \u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;It\u0026apos;s hard (long) to find the treasure as you\u0026apos;ll have to solve (potentially hard) riddles to get there. \u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Once the treasure found, returning to the entrance may be easy, you just have to use the same path in the other direction (though this needs a bit of memory to recall your path). \u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;When entering the dungeon, you notice a small \u0026lt;strong\u0026gt;notebook\u0026lt;/strong\u0026gt; here. You decide to use it to write down every room you exit after solving a riddle (when entering a new room), this way you\u0026apos;ll be able to return back to the entrance. That\u0026apos;s a genius idea, you \u0026lt;em\u0026gt;won\u0026apos;t even spend a cent\u0026lt;/em\u0026gt; implementing your strategy.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You enter the dungeon, solving with great success the first 1001 riddles, but here comes something you hadn\u0026apos;t planed, you have no space left in the notebook you borrowed. You decide to \u0026lt;em\u0026gt;abandon\u0026lt;/em\u0026gt; your quest as you prefer not having the treasure than being lost forever inside the dungeon (that looks smart indeed).\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;Executing a recursive program\u0026lt;/h3\u0026gt;\n\n\u0026lt;p\u0026gt;Basically, it\u0026apos;s the exact same thing as finding the treasure. The dungeon is the \u0026lt;em\u0026gt;computer\u0026apos;s memory\u0026lt;/em\u0026gt;, your goal now is not to find a treasure but to \u0026lt;em\u0026gt;compute some function\u0026lt;/em\u0026gt; (find \u0026lt;em\u0026gt;f(x)\u0026lt;/em\u0026gt; for a given \u0026lt;em\u0026gt;x\u0026lt;/em\u0026gt;). The indications simply are sub-routines that will help you solving \u0026lt;em\u0026gt;f(x)\u0026lt;/em\u0026gt;. Your strategy is the same as the \u0026lt;em\u0026gt;call stack\u0026lt;/em\u0026gt; strategy, the notebook is the stack, the rooms are the functions\u0026apos; return addresses: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;x = [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;over here\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;am\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I\u0026quot;\u0026lt;/span\u0026gt;]\ny = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sorted\u0026lt;/span\u0026gt;(x) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# You\u0026apos;re about to enter a room named `sorted`, note down the current room address here so you can return back: 0x4004f4 (that room address looks weird)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Seems like you went back from your quest using the return address 0x4004f4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Let\u0026apos;s see what you\u0026apos;ve collected \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt;.join(y))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The problem you encountered in the dungeon will be the same here, the call stack has a finite size (here 1000) and therefore, if you enter too many functions without returning back then you\u0026apos;ll fill the call stack and have an error that look like \u0026lt;strike\u0026gt;\u0026quot;Dear adventurer, I\u0026apos;m very sorry but your notebook is full\u0026quot;\u0026lt;/strike\u0026gt;: \u0026lt;code\u0026gt;RecursionError: maximum recursion depth exceeded\u0026lt;/code\u0026gt;. Note that you don\u0026apos;t need recursion to fill the call stack, but it\u0026apos;s very unlikely that a non-recursive program call 1000 functions without ever returning. It\u0026apos;s important to also understand that once you returned from a function, the call stack is freed from the address used (hence the name \u0026quot;stack\u0026quot;, return address are pushed in before entering a function and pulled out when returning). In the special case of a simple recursion (a function \u0026lt;code\u0026gt;f\u0026lt;/code\u0026gt; that call itself once -- over and over --) you will enter \u0026lt;code\u0026gt;f\u0026lt;/code\u0026gt; over and over until the computation is finished (until the treasure is found) and return from \u0026lt;code\u0026gt;f\u0026lt;/code\u0026gt; until you go back to the place where you called \u0026lt;code\u0026gt;f\u0026lt;/code\u0026gt; in the first place. The call stack will never be freed from anything until the end where it will be freed from all return addresses one after the other. \u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;How to avoid this issue?\u0026lt;/h3\u0026gt;\n\n\u0026lt;p\u0026gt;That\u0026apos;s actually pretty simple: \u0026quot;don\u0026apos;t use recursion if you don\u0026apos;t know how deep it can go\u0026quot;. That\u0026apos;s not always true as in some cases, \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/310974/what-is-tail-call-optimization\u0026quot;\u0026gt;Tail Call recursion can be Optimized (TCO)\u0026lt;/a\u0026gt;. But in python, this is not the case, and even \u0026quot;well written\u0026quot; recursive function will \u0026lt;strong\u0026gt;not\u0026lt;/strong\u0026gt; optimize stack use. There is an interesting post from Guido about this question: \u0026lt;a href=\u0026quot;http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;em\u0026gt;Tail Recursion Elimination\u0026lt;/em\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;There is a technique that you can use to make any recursive function iterative, this technique we could call \u0026lt;em\u0026gt;\u0026lt;strong\u0026gt;bring your own notebook\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt;. For example, in our particular case we simply are exploring a list, entering a room is equivalent to entering a sublist, the question you should ask yourself is \u0026lt;em\u0026gt;how can I get back from a list to its parent list?\u0026lt;/em\u0026gt; The answer is not that complex, repeat the following until the \u0026lt;code\u0026gt;stack\u0026lt;/code\u0026gt; is empty:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;push the current list \u0026lt;code\u0026gt;address\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;index\u0026lt;/code\u0026gt; in a \u0026lt;code\u0026gt;stack\u0026lt;/code\u0026gt; when entering a new sublist (note that a list address+index is also an address, therefore we just use the exact same technique used by the call stack);\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;every time an item is found, \u0026lt;code\u0026gt;yield\u0026lt;/code\u0026gt; it (or add them in a list);\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;once a list is fully explored, go back to the parent list using the \u0026lt;code\u0026gt;stack\u0026lt;/code\u0026gt; \u0026lt;em\u0026gt;return \u0026lt;code\u0026gt;address\u0026lt;/code\u0026gt; (and \u0026lt;code\u0026gt;index\u0026lt;/code\u0026gt;)\u0026lt;/em\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;Also note that this is equivalent to a DFS in a tree where some nodes are sublists \u0026lt;code\u0026gt;A = [1, 2]\u0026lt;/code\u0026gt; and some are simple items: \u0026lt;code\u0026gt;0, 1, 2, 3, 4\u0026lt;/code\u0026gt; (for \u0026lt;code\u0026gt;L = [0, [1,2], 3, 4]\u0026lt;/code\u0026gt;). The tree looks like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;                    L\n                    |\n           -------------------\n           |     |     |     |\n           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;   --A--   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n               |   |\n               \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The DFS traversal pre-order is: L, 0, A, 1, 2, 3, 4. Remember, in order to implement an iterative DFS you also \u0026quot;need\u0026quot; a stack. The implementation I proposed before result in having the following states (for the \u0026lt;code\u0026gt;stack\u0026lt;/code\u0026gt; and the \u0026lt;code\u0026gt;flat_list\u0026lt;/code\u0026gt;): \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;init.:  stack=[(L, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)]\n**\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;**:  stack=[(L, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)],         flat_list=[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]\n**A**:  stack=[(L, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;), (A, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)], flat_list=[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]\n**\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;**:  stack=[(L, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;), (A, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)], flat_list=[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]\n**\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;**:  stack=[(L, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;), (A, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)], flat_list=[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]\n**\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;**:  stack=[(L, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)],         flat_list=[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]\n**\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;**:  stack=[(L, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;)],         flat_list=[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;: stack=[],               flat_list=[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;In this example, the stack maximum size is 2, because the input list (and therefore the tree) have depth 2.\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;Implementation\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;For the implementation, in python you can simplify a little bit by using iterators instead of simple lists. References to the (sub)iterators will be used to store \u0026lt;em\u0026gt;sublists return addresses\u0026lt;/em\u0026gt; (instead of having both the list address and the index). This is not a big difference but I feel this is more readable (and also a bit faster):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;iterable\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(items_from(iterable))\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;items_from\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;iterable\u0026lt;/span\u0026gt;):\n    cursor_stack = [\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;iter\u0026lt;/span\u0026gt;(iterable)]\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; cursor_stack:\n        sub_iterable = cursor_stack[-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n            item = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;(sub_iterable)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; StopIteration:   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# post-order\u0026lt;/span\u0026gt;\n            cursor_stack.pop()\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;continue\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; is_list_like(item):  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# pre-order\u0026lt;/span\u0026gt;\n            cursor_stack.append(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;iter\u0026lt;/span\u0026gt;(item))\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;elif\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;None\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; item          \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# in-order\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;is_list_like\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;item\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(item, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Also, notice that in \u0026lt;code\u0026gt;is_list_like\u0026lt;/code\u0026gt; I have \u0026lt;code\u0026gt;isinstance(item, list)\u0026lt;/code\u0026gt;, which could be changed to handle more input types, here I just wanted to have the simplest version where (iterable) is just a list. But you could also do that:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;is_list_like\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;item\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;iter\u0026lt;/span\u0026gt;(item)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(item, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# strings are not lists (hmm...) \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;except\u0026lt;/span\u0026gt; TypeError:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This considers strings as \u0026quot;simple items\u0026quot; and therefore \u0026lt;code\u0026gt;flatten_iter([[\u0026quot;test\u0026quot;, \u0026quot;a\u0026quot;], \u0026quot;b])\u0026lt;/code\u0026gt; will return \u0026lt;code\u0026gt;[\u0026quot;test\u0026quot;, \u0026quot;a\u0026quot;, \u0026quot;b\u0026quot;]\u0026lt;/code\u0026gt; and not \u0026lt;code\u0026gt;[\u0026quot;t\u0026quot;, \u0026quot;e\u0026quot;, \u0026quot;s\u0026quot;, \u0026quot;t\u0026quot;, \u0026quot;a\u0026quot;, \u0026quot;b\u0026quot;]\u0026lt;/code\u0026gt;. Remark that in that case, \u0026lt;code\u0026gt;iter(item)\u0026lt;/code\u0026gt; is called twice on each item, let\u0026apos;s pretend it\u0026apos;s an exercise for the reader to make this cleaner. \u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;Testing and remarks on other implementations\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;In the end, remember that you can\u0026apos;t print a infinitely nested list \u0026lt;code\u0026gt;L\u0026lt;/code\u0026gt; using \u0026lt;code\u0026gt;print(L)\u0026lt;/code\u0026gt; because internally it will use recursive calls to \u0026lt;code\u0026gt;__repr__\u0026lt;/code\u0026gt; (\u0026lt;code\u0026gt;RecursionError: maximum recursion depth exceeded while getting the repr of an object\u0026lt;/code\u0026gt;). For the same reason, solutions to \u0026lt;code\u0026gt;flatten\u0026lt;/code\u0026gt; involving \u0026lt;code\u0026gt;str\u0026lt;/code\u0026gt; will fail with the same error message. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you need to test your solution, you can use this function to generate a simple nested list:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;build_deep_list\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;depth\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;Returns a list of the form $l_{depth} = [depth-1, l_{depth-1}]$\n    with $depth \u0026amp;gt; 1$ and $l_0 = [0]$.\n    \u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\n    sub_list = [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; d \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;range\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, depth):\n        sub_list = [d, sub_list]\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; sub_list\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Which gives: \u0026lt;code\u0026gt;build_deep_list(5)\u0026lt;/code\u0026gt; \u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;code\u0026gt;[4, [3, [2, [1, [0]]]]]\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I didn\u0026apos;t go through all the already available answers here, but here is a one liner I came up with, borrowing from lisp\u0026apos;s way of first and rest list processing\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;l\u0026lt;/span\u0026gt;): \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; flatten(l[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]) + (flatten(l[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;:]) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;len\u0026lt;/span\u0026gt;(l) \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; []) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;(l) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; [l]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;here is one simple and one not-so-simple case -\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;flatten([\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;],\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;])\n[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;flatten([\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;, {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;name\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;some_name\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;age\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;}, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;, {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;some\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;set\u0026apos;\u0026lt;/span\u0026gt;}, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;some_string\u0026apos;\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;17\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;18\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;19\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;21\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;24\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;25\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;26\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;27\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;28\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;29\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;])\n[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;, {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;age\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;name\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;some_name\u0026apos;\u0026lt;/span\u0026gt;}, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;([\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;set\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;some\u0026apos;\u0026lt;/span\u0026gt;]), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;some_string\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;17\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;18\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;19\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;21\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;24\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;25\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;26\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;27\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;28\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;29\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30\u0026lt;/span\u0026gt;]\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here\u0026apos;s the \u0026lt;code\u0026gt;compiler.ast.flatten\u0026lt;/code\u0026gt; implementation in 2.7.5:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;seq\u0026lt;/span\u0026gt;):\n    l = []\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; elt \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; seq:\n        t = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;(elt)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; t \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tuple\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; t \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; elt2 \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; flatten(elt):\n                l.append(elt2)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            l.append(elt)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; l\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;There are better, faster methods (If you\u0026apos;ve reached here, you have seen them already)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Also note:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Deprecated since version 2.6: The compiler package has been removed in Python 3.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;totally hacky but I think it would work (depending on your data_type)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;flat_list = ast.literal_eval(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[%s]\u0026quot;\u0026lt;/span\u0026gt;%re.sub(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[\\[\\]]\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;(the_list)))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;m surprised no one has thought of this. Damn recursion I don\u0026apos;t get the recursive answers that the advanced people here made. anyway here is my attempt on this. caveat is it\u0026apos;s very specific to the OP\u0026apos;s use case\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; re\n\nL = [[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\nflattened_list = re.sub(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[\\[\\]]\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;(L)).replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt;)\nnew_list = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;, flattened_list))\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(new_list)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;output:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Just use a \u0026lt;a href=\u0026quot;https://funcy.readthedocs.io/en/stable/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;funcy\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; library:\n\u0026lt;code\u0026gt;pip install funcy\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; funcy\n\n\nfuncy.flatten([[[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# returns generator\u0026lt;/span\u0026gt;\nfuncy.lflatten([[[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# returns list\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I am a dumb guy so I\u0026apos;ll give a \u0026quot;dumb\u0026quot; solution. All that recursion hurts my brain.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;flattened_list = []\nnested_list = [[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;nested_list, container\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; nested_list:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; isintance(item, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;):\n            flatten(item, container)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            container.append(item)\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;flatten(nested_list, flattened_list)\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;flattened_list\n[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I get that it\u0026apos;s using a side effect but well that\u0026apos;s to the best of my comprehension of recursion can go\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I don\u0026apos;t see anything like this posted around here and just got here from a closed question on the same subject, but why not just do something like this(if you know the type of the list you want to split):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;a = [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;25\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]]]    \n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;g = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;(a).replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;[\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;).replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;]\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;)    \n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;b = [\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;(x) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; x \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; g.split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;,\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; x.strip()]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You would need to know the type of the elements but I think this can be generalised and in terms of speed I think it would be faster.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is another py2 approach, Im not sure if its the fastest or the most elegant nor safest ...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; collections \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; Iterable\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; itertools \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; imap, repeat, chain\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;seqs, ignore=(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;, long, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;float\u0026lt;/span\u0026gt;, basestring\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; repeat(seqs, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;any\u0026lt;/span\u0026gt;(imap(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;, repeat(seqs), ignore)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(seqs, Iterable) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; chain.from_iterable(imap(flat, seqs))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It can ignore any specific (or derived) type you would like, it returns an iterator, so you can convert it to any specific container such as list, tuple, dict or simply consume it in order to reduce memory footprint, for better or worse it can handle initial non-iterable objects such as int ...\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Note most of the heavy lifting is done in C, since as far as I know thats how itertools are implemented, so while it is recursive, AFAIK it isn\u0026apos;t bounded by python recursion depth since the function calls are happening in C, though this doesn\u0026apos;t mean you are bounded by memory, specially in OS X where its stack size has a hard limit as of today (OS X Mavericks) ...\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;there is a slightly faster approach, but less portable method, only use it if you can assume that the base elements of the input can be explicitly determined otherwise, you\u0026apos;ll get an infinite recursion, and OS X with its limited stack size, will throw a segmentation fault fairly quickly ...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;seqs, ignore={\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;, long, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;float\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;, unicode}\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; repeat(seqs, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;(seqs) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; ignore \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(seqs, Iterable) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; chain.from_iterable(imap(flat, seqs))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;here we are using sets to check for the type so it takes O(1) vs O(number of types) to check whether or not an element should be ignored, though of course any value with derived type of the stated ignored types will fail, this is why its using \u0026lt;code\u0026gt;str\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;unicode\u0026lt;/code\u0026gt; so use it with caution ...\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;tests:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; random\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test_flat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;test_size=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2000\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;increase_depth\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;value, depth=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; func \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; xrange(depth):\n            value = repeat(value, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; value\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;random_sub_chaining\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;nested_values\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; values \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; nested_values:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;yield\u0026lt;/span\u0026gt; chain((values,), chain.from_iterable(imap(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;next\u0026lt;/span\u0026gt;, repeat(nested_values, random.randint(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;)))))\n\n    expected_values = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;zip\u0026lt;/span\u0026gt;(xrange(test_size), imap(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;, xrange(test_size)))\n    nested_values = random_sub_chaining((increase_depth(value, depth) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; depth, value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;enumerate\u0026lt;/span\u0026gt;(expected_values)))\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;any\u0026lt;/span\u0026gt;(imap(cmp, chain.from_iterable(expected_values), flat(chain(((),), nested_values, ((),)))))\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;test_flat()\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;(flat([[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]))\n[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026amp;gt; \u0026lt;/span\u0026gt; \n\n$ uname -a\nDarwin Samys-MacBook-Pro.local \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13.3\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;.0\u0026lt;/span\u0026gt; Darwin Kernel Version \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13.3\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;.0\u0026lt;/span\u0026gt;: Tue Jun  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;21\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;27\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;35\u0026lt;/span\u0026gt; PDT \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2014\u0026lt;/span\u0026gt;; root:xnu-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2422.110\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;.17\u0026lt;/span\u0026gt;~\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;/RELEASE_X86_64 x86_64\n$ python --version\nPython \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.7\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;.5\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Without using any library:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;l\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_flat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;l, r\u0026lt;/span\u0026gt;):    \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;(l) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;:\n            r.append(l)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; l:\n                r = r + flat(i)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; r\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _flat(l, [])\n\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# example\u0026lt;/span\u0026gt;\ntest = [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;], [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;c\u0026apos;\u0026lt;/span\u0026gt;] , [[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;z\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;x\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;y\u0026apos;\u0026lt;/span\u0026gt;]], [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;d\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;f\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;g\u0026apos;\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]    \n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; flat(test) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# prints [1, 2, 3, \u0026apos;a\u0026apos;, \u0026apos;b\u0026apos;, \u0026apos;c\u0026apos;, \u0026apos;z\u0026apos;, \u0026apos;x\u0026apos;, \u0026apos;y\u0026apos;, \u0026apos;d\u0026apos;, \u0026apos;f\u0026apos;, \u0026apos;g\u0026apos;, 4]\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Using \u0026lt;code\u0026gt;itertools.chain\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; itertools\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; collections \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; Iterable\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;list_flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;lst\u0026lt;/span\u0026gt;):\n    flat_lst = []\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; itertools.chain(lst):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(item, Iterable):\n            item = list_flatten(item)\n            flat_lst.extend(item)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            flat_lst.append(item)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; flat_lst\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or without chaining:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;q, final\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; q:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(q, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;):\n            final.append(q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            flatten(q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;], final)\n        flatten(q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;:], final)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n        final.append(q)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I used recursive to solve \u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;nested list with any depth\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;combine_nlist\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;nlist,init=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,combiner=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; x,y: x+y\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026apos;\n    apply function: combiner to a nested list element by element(treated as flatten list)\n    \u0026apos;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;\n    current_value=init\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; each_item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; nlist:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(each_item,\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;):\n            current_value =combine_nlist(each_item,current_value,combiner)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            current_value = combiner(current_value,each_item)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; current_value\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So after i define function combine_nlist, it is easy to use this function do flatting. Or you can combine it into one function. I like my solution because it can be applied to any nested list.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten_nlist\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;nlist\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; combine_nlist(nlist,[],\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; x,y:x+[y])\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;result\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;In [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;379\u0026lt;/span\u0026gt;]: flatten_nlist([\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;],[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;],[[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;],\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;],\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;],\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])\nOut[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;379\u0026lt;/span\u0026gt;]: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The easiest way is to use the \u0026lt;a href=\u0026quot;https://github.com/metagriffin/morph\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;morph\u0026lt;/a\u0026gt; library using \u0026lt;code\u0026gt;pip install morph\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The code is:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; morph\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt; = [[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\nflattened_list = morph.flatten(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# returns [1, 2, 3, 4, 5, 6]\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I am aware that there are already many awesome answers but i wanted to add an answer that uses the functional programming method of solving the question. In this answer i make use of double recursion :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten_list\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;seq\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; seq:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; []\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;elif\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(seq[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;):\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (flatten_list(seq[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+flatten_list(seq[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;:]))\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; [seq[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]]+flatten_list(seq[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;:])\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(flatten_list([\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;],\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;],[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]]))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;output:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;m not sure if this is necessarily quicker or more effective, but this is what I do:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;lst\u0026lt;/span\u0026gt;):\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;[\u0026apos;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;(lst).replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;[\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;).replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;]\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;]\u0026apos;\u0026lt;/span\u0026gt;)\n\nL = [[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt;(flatten(L))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;flatten\u0026lt;/code\u0026gt; function here turns the list into a string, takes out \u0026lt;strong\u0026gt;all\u0026lt;/strong\u0026gt; of the square brackets, attaches square brackets back onto the ends, and turns it back into a list. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Although, if you knew you would have square brackets in your list in strings, like \u0026lt;code\u0026gt;[[1, 2], \u0026quot;[3, 4] and [5]\u0026quot;]\u0026lt;/code\u0026gt;, you would have to do something else.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is a simple implement of flatten on python2\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;flatten=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; l: reduce(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lambda\u0026lt;/span\u0026gt; x,y:x+y,\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(flatten,l),[]) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(l,\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; [l]\n\ntest=[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;],[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;,[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]]]]]],]\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; flatten(test)\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#output [1, 2, 3, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":220,"title":"Flatten an irregular list of lists","content":"\n                \n\u0026lt;p\u0026gt;Yes, I know this subject has been covered before (\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/120886\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;, \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/406121\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;, \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/457215\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;, \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/952914\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;), but as far as I know, all solutions, except for one, fail on a list like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;L = [[[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]], \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Where the desired output is\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or perhaps even better, an iterator. The only solution I saw that works for an arbitrary nesting is found \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/406121\u0026quot;\u0026gt;in this question\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;flatten\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;):\n    result = []\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; el \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; x:\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;hasattr\u0026lt;/span\u0026gt;(el, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;__iter__\u0026quot;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;not\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isinstance\u0026lt;/span\u0026gt;(el, basestring):\n            result.extend(flatten(el))\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;:\n            result.append(el)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; result\n\nflatten(L)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Is this the best model? Did I overlook something? Any problems?\u0026lt;/p\u0026gt;\n    ","slug":"flatten-an-irregular-list-of-lists-1657387315571","postType":"QUESTION","createdAt":"2022-07-09T17:21:55.000Z","updatedAt":"2022-07-09T17:21:55.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"Is floating point math broken?","slug":"is-floating-point-math-broken-1657384238910"},{"title":"How do I return the response from an asynchronous call?","slug":"how-do-i-return-the-response-from-an-asynchronous-call-1657384208012"},{"title":"Dynamically access object property using variable","slug":"dynamically-access-object-property-using-variable-1657384439324"},{"title":"What is a smart pointer and when should I use one?","slug":"what-is-a-smart-pointer-and-when-should-i-use-one-1657387905461"},{"title":"addEventListener vs onclick","slug":"addeventlistener-vs-onclick-1657388191429"},{"title":"How to create RecyclerView with multiple view types","slug":"how-to-create-recyclerview-with-multiple-view-types-1657388121512"},{"title":"Int division: Why is the result of 1/3 == 0?","slug":"int-division:-why-is-the-result-of-13-0-1657387547814"},{"title":"Dynamic tabs with user-click chosen components","slug":"dynamic-tabs-with-user-click-chosen-components-1657388465232"},{"title":"Efficiently convert rows to columns in sql server","slug":"efficiently-convert-rows-to-columns-in-sql-server-1657387919213"},{"title":"With arrays, why is it the case that a[5] == 5[a]?","slug":"with-arrays-why-is-it-the-case-that-a5-5a-1657387956216"},{"title":"Is it possible for flex items to align tightly to the items above them?","slug":"is-it-possible-for-flex-items-to-align-tightly-to-the-items-above-them-1657388511179"},{"title":"What is JavaScript's highest integer value that a number can go to without losing precision?","slug":"what-is-javascript's-highest-integer-value-that-a-number-can-go-to-without-losing-precision-1657387622983"},{"title":"Correctly allocating multi-dimensional arrays","slug":"correctly-allocating-multi-dimensional-arrays-1657387733756"},{"title":"Are 'Arrow Functions' and 'Functions' equivalent / interchangeable?","slug":"are-'arrow-functions'-and-'functions'-equivalent-interchangeable-1657384527873"},{"title":"How do I return the response from an Observable/http/async call in angular?","slug":"how-do-i-return-the-response-from-an-observablehttpasync-call-in-angular-1657387335024"},{"title":"Why does my JavaScript code receive a \"No 'Access-Control-Allow-Origin' header is present on the requested resource\" error, while Postman does not?","slug":"why-does-my-javascript-code-receive-a-\"no-'access-control-allow-origin'-header-is-present-on-the-requested-resource\"-error-while-postman-does-not-1657384636363"},{"title":"How to make good reproducible pandas examples","slug":"how-to-make-good-reproducible-pandas-examples-1657384310402"},{"title":"How can I make Bootstrap columns all the same height?","slug":"how-can-i-make-bootstrap-columns-all-the-same-height-1657388551403"},{"title":"My attempt at value initialization is interpreted as a function declaration, and why doesn't A a(()); solve it?","slug":"my-attempt-at-value-initialization-is-interpreted-as-a-function-declaration-and-why-doesn't-a-a(())-solve-it-1657388474057"},{"title":"Cleansing User Passwords","slug":"cleansing-user-passwords-1657387365583"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"flatten-an-irregular-list-of-lists-1657387315571"},"buildId":"BnkbnjkWYxefPXjTJLVVv","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>