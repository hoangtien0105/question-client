<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>Android permission doesn&#x27;t work even if I have declared it | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I&#x27;m trying to write code to send an SMS from an Android app, but when I try to send the SMS it sends me back the error:

09-17 18:37:29.974  12847-12847/**.**.****E/AndroidRuntime﹕ FATAL EXCEPTION: main
Process: **.**.****, PID: 12847
java.lang.SecurityException: Sending SMS message: uid 10092 does not have android.permission.SEND_SMS.
        at android.os.Parcel.readException(Parcel.java:1599)
        at android.os.Parcel.readException(Parcel.java:1552)
        at com.android.internal.telephony.ISms$Stub$Proxy.sendTextForSubscriber(ISms.java:768)
        at android.telephony.SmsManager.sendTextMessageInternal(SmsManager.java:310)
        at android.telephony.SmsManager.sendTextMessage(SmsManager.java:293)
        at **.**.****.MainActivity$3.onClick(MainActivity.java:70)
        at android.view.View.performClick(View.java:5198)
        at android.view.View$PerformClick.run(View.java:21147)
        at android.os.Handler.handleCallback(Handler.java:739)
        at android.os.Handler.dispatchMessage(Handler.java:95)
        at android.os.Looper.loop(Looper.java:148)
        at android.app.ActivityThread.main(ActivityThread.java:5417)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)


I checked but I have the permissions in the manifest, as follows:

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;




&lt;uses-permission android:name=&quot;android.permission.SEND_SMS&quot;/&gt;
&lt;uses-feature android:name=&quot;android.hardware.telephony&quot;
    android:required=&quot;true&quot;/&gt;

&lt;application
    android:exported=&quot;true&quot;
    android:allowBackup=&quot;true&quot;
    android:icon=&quot;@mipmap/ic_launcher&quot;
    android:label=&quot;@string/app_name&quot;
    android:theme=&quot;@style/AppTheme&quot;&gt;
    &lt;activity
        android:name=&quot;.MainActivity&quot;
        android:label=&quot;@string/app_name&quot;
        android:screenOrientation=&quot;portrait&quot;&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;

            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
&lt;/application&gt;




I searched the internet but all the errors were about the &lt;uses-permission/&gt; syntax, could you help me please?
    "/><meta property="og:title" content="Android permission doesn&#x27;t work even if I have declared it | Solutions Checker"/><meta property="og:description" content="I&#x27;m trying to write code to send an SMS from an Android app, but when I try to send the SMS it sends me back the error:

09-17 18:37:29.974  12847-12847/**.**.****E/AndroidRuntime﹕ FATAL EXCEPTION: main
Process: **.**.****, PID: 12847
java.lang.SecurityException: Sending SMS message: uid 10092 does not have android.permission.SEND_SMS.
        at android.os.Parcel.readException(Parcel.java:1599)
        at android.os.Parcel.readException(Parcel.java:1552)
        at com.android.internal.telephony.ISms$Stub$Proxy.sendTextForSubscriber(ISms.java:768)
        at android.telephony.SmsManager.sendTextMessageInternal(SmsManager.java:310)
        at android.telephony.SmsManager.sendTextMessage(SmsManager.java:293)
        at **.**.****.MainActivity$3.onClick(MainActivity.java:70)
        at android.view.View.performClick(View.java:5198)
        at android.view.View$PerformClick.run(View.java:21147)
        at android.os.Handler.handleCallback(Handler.java:739)
        at android.os.Handler.dispatchMessage(Handler.java:95)
        at android.os.Looper.loop(Looper.java:148)
        at android.app.ActivityThread.main(ActivityThread.java:5417)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)


I checked but I have the permissions in the manifest, as follows:

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;




&lt;uses-permission android:name=&quot;android.permission.SEND_SMS&quot;/&gt;
&lt;uses-feature android:name=&quot;android.hardware.telephony&quot;
    android:required=&quot;true&quot;/&gt;

&lt;application
    android:exported=&quot;true&quot;
    android:allowBackup=&quot;true&quot;
    android:icon=&quot;@mipmap/ic_launcher&quot;
    android:label=&quot;@string/app_name&quot;
    android:theme=&quot;@style/AppTheme&quot;&gt;
    &lt;activity
        android:name=&quot;.MainActivity&quot;
        android:label=&quot;@string/app_name&quot;
        android:screenOrientation=&quot;portrait&quot;&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;

            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
&lt;/application&gt;




I searched the internet but all the errors were about the &lt;uses-permission/&gt; syntax, could you help me please?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Android permission doesn&apos;t work even if I have declared it","text":"I&apos;m trying to write code to send an SMS from an Android app, but when I try to send the SMS it sends me back the error:\n\n09-17 18:37:29.974  12847-12847/**.**.****E/AndroidRuntime﹕ FATAL EXCEPTION: main\nProcess: **.**.****, PID: 12847\njava.lang.SecurityException: Sending SMS message: uid 10092 does not have android.permission.SEND_SMS.\n        at android.os.Parcel.readException(Parcel.java:1599)\n        at android.os.Parcel.readException(Parcel.java:1552)\n        at com.android.internal.telephony.ISms$Stub$Proxy.sendTextForSubscriber(ISms.java:768)\n        at android.telephony.SmsManager.sendTextMessageInternal(SmsManager.java:310)\n        at android.telephony.SmsManager.sendTextMessage(SmsManager.java:293)\n        at **.**.****.MainActivity$3.onClick(MainActivity.java:70)\n        at android.view.View.performClick(View.java:5198)\n        at android.view.View$PerformClick.run(View.java:21147)\n        at android.os.Handler.handleCallback(Handler.java:739)\n        at android.os.Handler.dispatchMessage(Handler.java:95)\n        at android.os.Looper.loop(Looper.java:148)\n        at android.app.ActivityThread.main(ActivityThread.java:5417)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n\n\nI checked but I have the permissions in the manifest, as follows:\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n\n\n\n\n&lt;uses-permission android:name=&quot;android.permission.SEND_SMS&quot;/&gt;\n&lt;uses-feature android:name=&quot;android.hardware.telephony&quot;\n    android:required=&quot;true&quot;/&gt;\n\n&lt;application\n    android:exported=&quot;true&quot;\n    android:allowBackup=&quot;true&quot;\n    android:icon=&quot;@mipmap/ic_launcher&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:theme=&quot;@style/AppTheme&quot;&gt;\n    &lt;activity\n        android:name=&quot;.MainActivity&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:screenOrientation=&quot;portrait&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n&lt;/application&gt;\n\n\n\n\nI searched the internet but all the errors were about the &lt;uses-permission/&gt; syntax, could you help me please?\n    ","answerCount":13,"upVoteCount":500,"suggestedAnswer":[{"text":"(the following is extracted from a blog post of mine about this)\nThe big reason for not getting your permission nowadays is because\nyour project has a targetSdkVersion of 23 or higher, and the permission\nthat you are requesting is &quot;dangerous&quot;. In Android 6.0, this includes:\n\nACCEPT_HANDOVER\nACCESS_BACKGROUND_LOCATION\nACCESS_MEDIA_LOCATION\nACTIVITY_RECOGNITION\nANSWER_PHONE_CALLS\nACCESS_COARSE_LOCATION\nACCESS_FINE_LOCATION\nADD_VOICEMAIL\nBODY_SENSORS\nCALL_PHONE\nCAMERA\nGET_ACCOUNTS\nPROCESS_OUTGOING_CALLS\nREAD_CALENDAR\nREAD_CALL_LOG\nREAD_CELL_BROADCASTS\nREAD_CONTACTS\nREAD_EXTERNAL_STORAGE\nREAD_PHONE_STATE\nREAD_SMS\nRECEIVE_MMS\nRECEIVE_SMS\nRECEIVE_WAP_PUSH\nRECORD_AUDIO\nSEND_SMS\nUSE_SIP\nWRITE_CALENDAR\nWRITE_CALL_LOG\nWRITE_CONTACTS\nWRITE_EXTERNAL_STORAGE\n\nFor these permissions, not only does your targetSdkVersion 23+ app\nneed to have the &lt;uses-permission&gt; element(s), but you also have\nto ask for those permissions at runtime from the user on Android 6.0+\ndevices, using methods like checkSelfPermission() and\nrequestPermissions().\nAs a temporary workaround, drop your targetSdkVersion below 23.\nHowever, eventually, you will have some reason to want your\ntargetSdkVersion to be 23 or higher. At that time, you will need\nto adjust your app to use the new runtime permission system.\nThe Android documentation has\na page dedicated to this topic.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"Above API level 23 you will be given programmatically pragmatically like:\n\n    private static final int PERMISSION_REQUEST_CODE = 1;\n\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.M) {\n\n        if (checkSelfPermission(Manifest.permission.SEND_SMS)\n                == PackageManager.PERMISSION_DENIED) {\n\n            Log.d(&quot;permission&quot;, &quot;permission denied to SEND_SMS - requesting it&quot;);\n            String[] permissions = {Manifest.permission.SEND_SMS};\n\n            requestPermissions(permissions, PERMISSION_REQUEST_CODE);\n\n        }\n    }\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"request permission pragmatically (after API 23)\n\nif (ContextCompat.checkSelfPermission(thisActivity, Manifest.permission.SEND_SMS)\n    != PackageManager.PERMISSION_GRANTED) {\n    // Permission is not granted \n    // Ask for permision\n    ActivityCompat.requestPermissions(this,new String[] { Manifest.permission.SEND_SMS}, 1); \n} \nelse {\n// Permission has already been granted\n}\n\n\n&quot;If the app has the permission, the method checkSelfPermission() returns PERMISSION_GRANTED, and the app can proceed with the operation. \n\nIf the app does not have the permission, the method returns PERMISSION_DENIED, and the app has to explicitly ask the user for permission. You need to prompt the user for that permission, as shown in the above code. Calling requestPermissions() brings up a standard Android dialog, which you cannot customize.&quot;\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Please go through the link below, \nhttps://developer.android.com/guide/topics/permissions/overview.html\n\nSome samples are also available there to get start with the permissions.\n\nTo make android more secure now developers has to mention permission in manifest as well as they should have to ask user as well in run time to get the work done. They are permission categorized in dangerous permission section which are mention below\n\nCALENDAR    \n\nREAD_CALENDAR\n\nWRITE_CALENDAR\n\n\nCAMERA  \n\nCAMERA\n\n\nCONTACTS    \n\nREAD_CONTACTS\nWRITE_CONTACTS\nGET_ACCOUNTS\n\n\nLOCATION    \n\nACCESS_FINE_LOCATION\nACCESS_COARSE_LOCATION\n\n\nMICROPHONE  \n\nRECORD_AUDIO\n\n\nPHONE   \n\nREAD_PHONE_STATE\nREAD_PHONE_NUMBERS\nCALL_PHONE\nANSWER_PHONE_CALLS (must request at runtime)\nREAD_CALL_LOG\nWRITE_CALL_LOG\nADD_VOICEMAIL\nUSE_SIP\nPROCESS_OUTGOING_CALLS\nANSWER_PHONE_CALLS\n\n\nSENSORS     \n\nBODY_SENSORS\n\n\nSMS     \n\nSEND_SMS\nRECEIVE_SMS\nREAD_SMS\nRECEIVE_WAP_PUSH\nRECEIVE_MMS\n\n\nSTORAGE     \n\nREAD_EXTERNAL_STORAGE\nWRITE_EXTERNAL_STORAGE\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"If you are using sdk 23 or higher then you must check run time permissions.\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"when you declare permisson in Manifest and it&apos;s not work means you are performing Task in MarshMallow and for MarshMallow you have set Permisson at RunTime.\n\nlike this way\n\nActivityCompat.requestPermissions();\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"If you are using Android version &quot;23&quot; or &quot;23+&quot;, then app will show you errors when you are trying to access anything which requires user&apos;s permission. You have to ask for permissions at run-time even if you have declared those permissions in Android manifest.\n\nCheck this: https://developer.android.com/training/permissions/requesting.html\n\nBut if you have created your whole application and don&apos;t want to change at every place then a little cheat will be sufficient.\n\nGo to &quot;Build.gradle&quot; file and change the target Sdk version to less than 23, like 22, 21.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"Along with CommonsWare&apos;s answer,\n\nThere is a Security Setting (I checked on CM13) to set SMS Message Limit. If you set this to &quot;None&quot;, OS will popup a Dialog for every SMS, even after obtaining SMS_SEND permission in the runtime. Best thing is to set this to maximum.\n\nIf the maximum is not enough, there are ways to increases the maximum rate on a rooted device.\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"I added this to my MainActivity, that resolve my problem \n\n       int MY_PERMISSIONS_REQUEST_READ_CONTACTS=0;\n// Here, thisActivity is the current activity\n        if (ContextCompat.checkSelfPermission(this,\n                Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                != PackageManager.PERMISSION_GRANTED) {\n\n            // Should we show an explanation?\n            if (ActivityCompat.shouldShowRequestPermissionRationale(this,\n                    Manifest.permission.WRITE_EXTERNAL_STORAGE)) {\n\n                // Show an expanation to the user *asynchronously* -- don&apos;t block\n                // this thread waiting for the user&apos;s response! After the user\n                // sees the explanation, try again to request the permission.\n\n            } else {\n\n                // No explanation needed, we can request the permission.\n\n                ActivityCompat.requestPermissions(this,\n                        new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE},\n                        MY_PERMISSIONS_REQUEST_READ_CONTACTS);\n\n                // MY_PERMISSIONS_REQUEST_READ_CONTACTS is an\n                // app-defined int constant. The callback method gets the\n                // result of the request.\n            }\n        }\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"I hope the solution to write to external storage will be useful too\n\npublic  boolean checkPermission() {\n        if (Build.VERSION.SDK_INT &gt;= 23) {\n            if (checkSelfPermission(android.Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                    == PackageManager.PERMISSION_GRANTED) {\n                Timber.tag(LOG_TAG).e(&quot;Permission error. You have permission&quot;);\n                return true;\n            } else {\n                Timber.tag(LOG_TAG).e(&quot;Permission error. You have asked for permission&quot;);\n                ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\n                return false;\n            }\n        }\n        else { \n            // for a stuff below api level 23\n            Timber.tag(LOG_TAG).e(&quot;Permission error. You already have the permission&quot;);\n            return true;\n        }\n    }\n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"You can use this code to access your messages\n\nOpen a Dialog using the code below:\n\nActivityCompat.requestPermissions(MainActivity.this,\n                    new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\n                    1);\n\n\nGet the Activity result as below:\n\n@Override\npublic void onRequestPermissionsResult(int requestCode,\n                                       String permissions[], int[] grantResults) {\n    switch (requestCode) {\n        case 1: {\n\n          // If request is cancelled, the result arrays are empty.\n          if (grantResults.length &gt; 0\n                    &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n\n                // permission was granted, yay! Do the\n                // contacts-related task you need to do.          \n            } else {\n\n                // permission denied, boo! Disable the\n                // functionality that depends on this permission.\n                Toast.makeText(MainActivity.this, &quot;Permission denied to read your External storage&quot;, Toast.LENGTH_SHORT).show();\n            }\n            return;\n        }\n\n        // other &apos;case&apos; lines to check for other\n        // permissions this app might request\n    }\n}\n\n\nor edit file build.gradle and chanche number targetSdkVersion less than 23\n\nAnd no longer need the code above\n\nNOTE\n\nOf course this is not the case, and it&apos;s just an educational aspect\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"So i had to create an app to send and receive messages but the send action crashed whenever i clicked on send even though the permission was granted . I had requested runtime permissions and allowed them, still i faced a crash that the process doesnt have the requested permission to send SMS . \nI had checked the granted permissions from :\n\nadb shell dumpsys package &lt;package-name&gt;\n\n\nThe order of my request for permissions was \n\n\nRECEIVE_SMS\nSEND_SMS\n\n\nI reverted the order of request and it works fine . This was tested with a complete new app(uninstall-&gt; install -&gt; test). The answer may seem weird but just give it a shot . \n\n(If it works in the shown way in a certain order, then Android might have a bug!!) \n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"List of All Permissions Can be Found with Explanation at\n\nManifest.permission\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-12e9794e898cd5f3.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-928c5d1eb8fb0bba.js" defer=""></script><script src="/_next/static/BnkbnjkWYxefPXjTJLVVv/_buildManifest.js" defer=""></script><script src="/_next/static/BnkbnjkWYxefPXjTJLVVv/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/android-permission-doesn&#x27;t-work-even-if-i-have-declared-it-1657387726990#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/android-permission-doesn&#x27;t-work-even-if-i-have-declared-it-1657387726990"><h1>Android permission doesn&#x27;t work even if I have declared it</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/android-permissions">android-permissions</a></div></div><div class="question-content mt-5">
                
<p>I'm trying to write code to send an SMS from an Android app, but when I try to send the SMS it sends me back the error:</p>

<pre class="lang-none s-code-block"><code>09-17 18:37:29.974  12847-12847/**.**.****E/AndroidRuntime﹕ FATAL EXCEPTION: main
Process: **.**.****, PID: 12847
java.lang.SecurityException: Sending SMS message: uid 10092 does not have android.permission.SEND_SMS.
        at android.os.Parcel.readException(Parcel.java:1599)
        at android.os.Parcel.readException(Parcel.java:1552)
        at com.android.internal.telephony.ISms$Stub$Proxy.sendTextForSubscriber(ISms.java:768)
        at android.telephony.SmsManager.sendTextMessageInternal(SmsManager.java:310)
        at android.telephony.SmsManager.sendTextMessage(SmsManager.java:293)
        at **.**.****.MainActivity$3.onClick(MainActivity.java:70)
        at android.view.View.performClick(View.java:5198)
        at android.view.View$PerformClick.run(View.java:21147)
        at android.os.Handler.handleCallback(Handler.java:739)
        at android.os.Handler.dispatchMessage(Handler.java:95)
        at android.os.Looper.loop(Looper.java:148)
        at android.app.ActivityThread.main(ActivityThread.java:5417)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
</code></pre>

<p>I checked but I have the permissions in the manifest, as follows:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;
</code></pre>

<p></p>

<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.SEND_SMS"</span>/&gt;
&lt;uses-feature android:name=<span class="hljs-string">"android.hardware.telephony"</span>
    android:required=<span class="hljs-string">"true"</span>/&gt;

&lt;application
    android:exported=<span class="hljs-string">"true"</span>
    android:allowBackup=<span class="hljs-string">"true"</span>
    android:icon=<span class="hljs-string">"@mipmap/ic_launcher"</span>
    android:label=<span class="hljs-string">"@string/app_name"</span>
    android:theme=<span class="hljs-string">"@style/AppTheme"</span>&gt;
    &lt;activity
        android:name=<span class="hljs-string">".MainActivity"</span>
        android:label=<span class="hljs-string">"@string/app_name"</span>
        android:screenOrientation=<span class="hljs-string">"portrait"</span>&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=<span class="hljs-string">"android.intent.action.MAIN"</span> /&gt;

            &lt;category android:name=<span class="hljs-string">"android.intent.category.LAUNCHER"</span> /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
&lt;/application&gt;
</code></pre>

<p></p>

<p>I searched the internet but all the errors were about the <code>&lt;uses-permission/&gt;</code> syntax, could you help me please?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><sub>(the following is extracted from <a href="https://commonsware.com/blog/2015/08/31/hey-where-did-my-permission-go.html" rel="noreferrer">a blog post of mine about this</a>)</sub></p>
<p>The big reason for not getting your permission nowadays is because
your project has a <code>targetSdkVersion</code> of 23 or higher, and the permission
that you are requesting is "dangerous". In Android 6.0, this includes:</p>
<ul>
<li><code>ACCEPT_HANDOVER</code></li>
<li><code>ACCESS_BACKGROUND_LOCATION</code></li>
<li><code>ACCESS_MEDIA_LOCATION</code></li>
<li><code>ACTIVITY_RECOGNITION</code></li>
<li><code>ANSWER_PHONE_CALLS</code></li>
<li><code>ACCESS_COARSE_LOCATION</code></li>
<li><code>ACCESS_FINE_LOCATION</code></li>
<li><code>ADD_VOICEMAIL</code></li>
<li><code>BODY_SENSORS</code></li>
<li><code>CALL_PHONE</code></li>
<li><code>CAMERA</code></li>
<li><code>GET_ACCOUNTS</code></li>
<li><code>PROCESS_OUTGOING_CALLS</code></li>
<li><code>READ_CALENDAR</code></li>
<li><code>READ_CALL_LOG</code></li>
<li><code>READ_CELL_BROADCASTS</code></li>
<li><code>READ_CONTACTS</code></li>
<li><code>READ_EXTERNAL_STORAGE</code></li>
<li><code>READ_PHONE_STATE</code></li>
<li><code>READ_SMS</code></li>
<li><code>RECEIVE_MMS</code></li>
<li><code>RECEIVE_SMS</code></li>
<li><code>RECEIVE_WAP_PUSH</code></li>
<li><code>RECORD_AUDIO</code></li>
<li><code>SEND_SMS</code></li>
<li><code>USE_SIP</code></li>
<li><code>WRITE_CALENDAR</code></li>
<li><code>WRITE_CALL_LOG</code></li>
<li><code>WRITE_CONTACTS</code></li>
<li><code>WRITE_EXTERNAL_STORAGE</code></li>
</ul>
<p>For these permissions, not only does your <code>targetSdkVersion</code> 23+ app
need to have the <code>&lt;uses-permission&gt;</code> element(s), but you also have
to ask for those permissions at runtime from the user on Android 6.0+
devices, using methods like <code>checkSelfPermission()</code> and
<code>requestPermissions()</code>.</p>
<p>As a temporary workaround, drop your <code>targetSdkVersion</code> below 23.</p>
<p>However, eventually, you will have some reason to want your
<code>targetSdkVersion</code> to be 23 or higher. At that time, you will need
to adjust your app to use the new runtime permission system.
The Android documentation has
<a href="http://developer.android.com/training/permissions/requesting.html" rel="noreferrer">a page dedicated to this topic</a>.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Above API level 23 you will be given programmatically pragmatically like:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">PERMISSION_REQUEST_CODE</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

    <span class="hljs-keyword">if</span> (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.M) {

        <span class="hljs-keyword">if</span> (checkSelfPermission(Manifest.permission.SEND_SMS)
                == PackageManager.PERMISSION_DENIED) {

            Log.d(<span class="hljs-string">"permission"</span>, <span class="hljs-string">"permission denied to SEND_SMS - requesting it"</span>);
            String[] permissions = {Manifest.permission.SEND_SMS};

            requestPermissions(permissions, PERMISSION_REQUEST_CODE);

        }
    }
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>request permission pragmatically (after API 23)</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">if</span> (ContextCompat.checkSelfPermission(thisActivity, Manifest.permission.SEND_SMS)
    != PackageManager.PERMISSION_GRANTED) {
    <span class="hljs-comment">// Permission is not granted </span>
    <span class="hljs-comment">// Ask for permision</span>
    ActivityCompat.requestPermissions(<span class="hljs-built_in">this</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[] { Manifest.permission.SEND_SMS}, <span class="hljs-number">1</span>); 
} 
<span class="hljs-keyword">else</span> {
<span class="hljs-comment">// Permission has already been granted</span>
}
</code></pre>

<p>"If the app has the permission, the method checkSelfPermission() returns PERMISSION_GRANTED, and the app can proceed with the operation. </p>

<p>If the app does not have the permission, the method returns PERMISSION_DENIED, and the app has to explicitly ask the user for permission. You need to prompt the user for that permission, as shown in the above code. Calling requestPermissions() brings up a standard Android dialog, which you cannot customize."</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Please go through the link below, 
<a href="https://developer.android.com/guide/topics/permissions/overview.html" rel="noreferrer">https://developer.android.com/guide/topics/permissions/overview.html</a></p>

<p>Some samples are also available there to get start with the permissions.</p>

<p>To make android more secure now developers has to mention permission in manifest as well as they should have to ask user as well in run time to get the work done. They are permission categorized in dangerous permission section which are mention below</p>

<p><strong>CALENDAR</strong>    </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">READ_CALENDAR

WRITE_CALENDAR
</code></pre>

<p><strong>CAMERA</strong>  </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">CAMERA
</code></pre>

<p><strong>CONTACTS</strong>    </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">READ_CONTACTS
WRITE_CONTACTS
GET_ACCOUNTS
</code></pre>

<p><strong>LOCATION</strong>    </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">ACCESS_FINE_LOCATION
ACCESS_COARSE_LOCATION
</code></pre>

<p><strong>MICROPHONE</strong>  </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">RECORD_AUDIO
</code></pre>

<p><strong>PHONE</strong>   </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">READ_PHONE_STATE
READ_PHONE_NUMBERS
CALL_PHONE
<span class="hljs-title function_">ANSWER_PHONE_CALLS</span> <span class="hljs-params">(must request at runtime)</span>
READ_CALL_LOG
WRITE_CALL_LOG
ADD_VOICEMAIL
USE_SIP
PROCESS_OUTGOING_CALLS
ANSWER_PHONE_CALLS
</code></pre>

<p><strong>SENSORS</strong>     </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">BODY_SENSORS
</code></pre>

<p><strong>SMS</strong>     </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">SEND_SMS
RECEIVE_SMS
READ_SMS
RECEIVE_WAP_PUSH
RECEIVE_MMS
</code></pre>

<p><strong>STORAGE</strong>     </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">READ_EXTERNAL_STORAGE
WRITE_EXTERNAL_STORAGE
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are using sdk 23 or higher then you must check run time permissions.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>when you declare <code>permisson</code> in <code>Manifest</code> and it's not work means you are performing Task in <code>MarshMallow</code> and for <code>MarshMallow</code> you have set Permisson at <code>RunTime</code>.</p>

<p>like this way</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">ActivityCompat.requestPermissions();
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are using Android version "23" or "23+", then app will show you errors when you are trying to access anything which requires user's permission. You have to ask for permissions at run-time even if you have declared those permissions in Android manifest.</p>

<p>Check this: <a href="https://developer.android.com/training/permissions/requesting.html" rel="nofollow noreferrer">https://developer.android.com/training/permissions/requesting.html</a></p>

<p>But if you have created your whole application and don't want to change at every place then a little cheat will be sufficient.</p>

<p>Go to "Build.gradle" file and change the target Sdk version to less than 23, like 22, 21.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Along with CommonsWare's answer,</p>

<p>There is a Security Setting (I checked on CM13) to set SMS Message Limit. If you set this to "None", OS will popup a Dialog for every SMS, even after obtaining SMS_SEND permission in the runtime. Best thing is to set this to maximum.</p>

<p>If the maximum is not enough, there are ways to increases the maximum rate on a rooted device.</p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I added this to my MainActivity, that resolve my problem </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">       <span class="hljs-type">int</span> MY_PERMISSIONS_REQUEST_READ_CONTACTS=<span class="hljs-number">0</span>;
<span class="hljs-comment">// Here, thisActivity is the current activity</span>
        <span class="hljs-keyword">if</span> (ContextCompat.checkSelfPermission(<span class="hljs-built_in">this</span>,
                Manifest.permission.WRITE_EXTERNAL_STORAGE)
                != PackageManager.PERMISSION_GRANTED) {

            <span class="hljs-comment">// Should we show an explanation?</span>
            <span class="hljs-keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(<span class="hljs-built_in">this</span>,
                    Manifest.permission.WRITE_EXTERNAL_STORAGE)) {

                <span class="hljs-comment">// Show an expanation to the user *asynchronously* -- don't block</span>
                <span class="hljs-comment">// this thread waiting for the user's response! After the user</span>
                <span class="hljs-comment">// sees the explanation, try again to request the permission.</span>

            } <span class="hljs-keyword">else</span> {

                <span class="hljs-comment">// No explanation needed, we can request the permission.</span>

                ActivityCompat.requestPermissions(<span class="hljs-built_in">this</span>,
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{Manifest.permission.WRITE_EXTERNAL_STORAGE},
                        MY_PERMISSIONS_REQUEST_READ_CONTACTS);

                <span class="hljs-comment">// MY_PERMISSIONS_REQUEST_READ_CONTACTS is an</span>
                <span class="hljs-comment">// app-defined int constant. The callback method gets the</span>
                <span class="hljs-comment">// result of the request.</span>
            }
        }
</code></pre>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I hope the solution to write to external storage will be useful too</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span>  <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkPermission</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="hljs-number">23</span>) {
            <span class="hljs-keyword">if</span> (checkSelfPermission(android.Manifest.permission.WRITE_EXTERNAL_STORAGE)
                    == PackageManager.PERMISSION_GRANTED) {
                Timber.tag(LOG_TAG).e(<span class="hljs-string">"Permission error. You have permission"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> {
                Timber.tag(LOG_TAG).e(<span class="hljs-string">"Permission error. You have asked for permission"</span>);
                ActivityCompat.requestPermissions(<span class="hljs-built_in">this</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, <span class="hljs-number">1</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
        <span class="hljs-keyword">else</span> { 
            <span class="hljs-comment">// for a stuff below api level 23</span>
            Timber.tag(LOG_TAG).e(<span class="hljs-string">"Permission error. You already have the permission"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    }
</code></pre>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can use this code to access your messages</p>

<p>Open a Dialog using the code below:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">ActivityCompat.requestPermissions(MainActivity.<span class="hljs-built_in">this</span>,
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{Manifest.permission.READ_EXTERNAL_STORAGE},
                    <span class="hljs-number">1</span>);
</code></pre>

<p>Get the Activity result as below:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onRequestPermissionsResult</span><span class="hljs-params">(<span class="hljs-type">int</span> requestCode,
                                       String permissions[], <span class="hljs-type">int</span>[] grantResults)</span> {
    <span class="hljs-keyword">switch</span> (requestCode) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: {

          <span class="hljs-comment">// If request is cancelled, the result arrays are empty.</span>
          <span class="hljs-keyword">if</span> (grantResults.length &gt; <span class="hljs-number">0</span>
                    &amp;&amp; grantResults[<span class="hljs-number">0</span>] == PackageManager.PERMISSION_GRANTED) {

                <span class="hljs-comment">// permission was granted, yay! Do the</span>
                <span class="hljs-comment">// contacts-related task you need to do.          </span>
            } <span class="hljs-keyword">else</span> {

                <span class="hljs-comment">// permission denied, boo! Disable the</span>
                <span class="hljs-comment">// functionality that depends on this permission.</span>
                Toast.makeText(MainActivity.<span class="hljs-built_in">this</span>, <span class="hljs-string">"Permission denied to read your External storage"</span>, Toast.LENGTH_SHORT).show();
            }
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// other 'case' lines to check for other</span>
        <span class="hljs-comment">// permissions this app might request</span>
    }
}
</code></pre>

<p>or edit file <code>build.gradle</code> and chanche number <code>targetSdkVersion</code> less than <code>23</code>
<br>
And no longer need the code above</p>

<p><strong>NOTE</strong>
<br>
<strong>Of course this is not the case, and it's just an educational aspect</strong></p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>So i had to create an app to send and receive messages but the send action crashed whenever i clicked on send even though the permission was granted . I had requested runtime permissions and allowed them, still i faced a crash that the process doesnt have the requested permission to send SMS . 
I had checked the granted permissions from :</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">adb shell dumpsys <span class="hljs-keyword">package</span> &lt;<span class="hljs-keyword">package</span>-name&gt;
</code></pre>

<p>The order of my request for permissions was </p>

<ol>
<li>RECEIVE_SMS</li>
<li>SEND_SMS</li>
</ol>

<p>I reverted the order of request and it works fine . This was tested with a complete new app(uninstall-&gt; install -&gt; test). The answer may seem weird but just give it a shot . </p>

<p>(If it works in the shown way in a certain order, then Android might have a bug!!) </p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-permissions">android-permissions</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>List of All Permissions Can be Found with Explanation at</p>

<p><a href="https://developer.android.com/reference/android/Manifest.permission" rel="nofollow noreferrer">Manifest.permission</a></p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/what-is-the-difference-between-client-side-and-server-side-programming-1657384372926">What is the difference between client-side and server-side programming?</a><a href="/questions/javascript-infamous-loop-issue-duplicate-1657387498530">Javascript infamous Loop issue? [duplicate]</a><a href="/questions/retrieve-only-the-queried-element-in-an-object-array-in-mongodb-collection-1657384890457">Retrieve only the queried element in an object array in MongoDB collection</a><a href="/questions/how-to-find-the-&#x27;sizeof&#x27;-(a-pointer-pointing-to-an-array)-1657387354284">How to find the &#x27;sizeof&#x27; (a pointer pointing to an array)?</a><a href="/questions/how-can-i-remove-a-specific-item-from-an-array-1657387552077">How can I remove a specific item from an array?</a><a href="/questions/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems-1657384472469">What is a debugger and how can it help me diagnose problems?</a><a href="/questions/how-can-i-get-query-string-values-in-javascript-1657384443631">How can I get query string values in JavaScript?</a><a href="/questions/why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877">Why do I need to override the equals and hashCode methods in Java?</a><a href="/questions/sql-injection-that-gets-around-mysql_real_escape_string()-1657384364747">SQL injection that gets around mysql_real_escape_string()</a><a href="/questions/how-to-remove-items-from-a-list-while-iterating-1657384496375">How to remove items from a list while iterating?</a><a href="/questions/where-can-i-find-documentation-on-formatting-a-date-in-javascript-1657384878157">Where can I find documentation on formatting a date in JavaScript?</a><a href="/questions/what&#x27;s-the-difference-between-inner-join-left-join-right-join-and-full-join-duplicate-1657388082887">What&#x27;s the difference between INNER JOIN, LEFT JOIN, RIGHT JOIN and FULL JOIN? [duplicate]</a><a href="/questions/what&#x27;s-the-meaning-of-%22greater%22-(an-arrow-formed-from-equals-and-greater-than)-in-javascript-1657387977118">What&#x27;s the meaning of &quot;=&gt;&quot; (an arrow formed from equals &amp; greater than) in JavaScript?</a><a href="/questions/what-is-dom-event-delegation-1657387625599">What is DOM Event delegation?</a><a href="/questions/how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981">How can I save an activity state using the save instance state?</a><a href="/questions/what-does-a-%22cannot-find-symbol%22-or-%22cannot-resolve-symbol%22-error-mean-1657384492160">What does a &quot;Cannot find symbol&quot; or &quot;Cannot resolve symbol&quot; error mean?</a><a href="/questions/most-efficient-method-to-groupby-on-an-array-of-objects-1657387580538">Most efficient method to groupby on an array of objects</a><a href="/questions/php-code-is-not-being-executed-but-the-code-shows-in-the-browser-source-code-1657384553581">PHP code is not being executed, but the code shows in the browser source code</a><a href="/questions/alternatives-to-gprof-closed-1657388336554">Alternatives to gprof [closed]</a><a href="/questions/why-is-%22using-namespace-std%22-considered-bad-practice-1657384296377">Why is &quot;using namespace std;&quot; considered bad practice?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;sub\u0026gt;(the following is extracted from \u0026lt;a href=\u0026quot;https://commonsware.com/blog/2015/08/31/hey-where-did-my-permission-go.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;a blog post of mine about this\u0026lt;/a\u0026gt;)\u0026lt;/sub\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The big reason for not getting your permission nowadays is because\nyour project has a \u0026lt;code\u0026gt;targetSdkVersion\u0026lt;/code\u0026gt; of 23 or higher, and the permission\nthat you are requesting is \u0026quot;dangerous\u0026quot;. In Android 6.0, this includes:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACCEPT_HANDOVER\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACCESS_BACKGROUND_LOCATION\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACCESS_MEDIA_LOCATION\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACTIVITY_RECOGNITION\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ANSWER_PHONE_CALLS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACCESS_COARSE_LOCATION\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACCESS_FINE_LOCATION\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ADD_VOICEMAIL\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;BODY_SENSORS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;CALL_PHONE\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;CAMERA\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;GET_ACCOUNTS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;PROCESS_OUTGOING_CALLS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_CALENDAR\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_CALL_LOG\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_CELL_BROADCASTS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_CONTACTS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_EXTERNAL_STORAGE\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_PHONE_STATE\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_SMS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;RECEIVE_MMS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;RECEIVE_SMS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;RECEIVE_WAP_PUSH\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;RECORD_AUDIO\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;SEND_SMS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;USE_SIP\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;WRITE_CALENDAR\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;WRITE_CALL_LOG\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;WRITE_CONTACTS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;WRITE_EXTERNAL_STORAGE\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;For these permissions, not only does your \u0026lt;code\u0026gt;targetSdkVersion\u0026lt;/code\u0026gt; 23+ app\nneed to have the \u0026lt;code\u0026gt;\u0026amp;lt;uses-permission\u0026amp;gt;\u0026lt;/code\u0026gt; element(s), but you also have\nto ask for those permissions at runtime from the user on Android 6.0+\ndevices, using methods like \u0026lt;code\u0026gt;checkSelfPermission()\u0026lt;/code\u0026gt; and\n\u0026lt;code\u0026gt;requestPermissions()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As a temporary workaround, drop your \u0026lt;code\u0026gt;targetSdkVersion\u0026lt;/code\u0026gt; below 23.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;However, eventually, you will have some reason to want your\n\u0026lt;code\u0026gt;targetSdkVersion\u0026lt;/code\u0026gt; to be 23 or higher. At that time, you will need\nto adjust your app to use the new runtime permission system.\nThe Android documentation has\n\u0026lt;a href=\u0026quot;http://developer.android.com/training/permissions/requesting.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;a page dedicated to this topic\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Above API level 23 you will be given programmatically pragmatically like:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;PERMISSION_REQUEST_CODE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (android.os.Build.VERSION.SDK_INT \u0026amp;gt;= android.os.Build.VERSION_CODES.M) {\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (checkSelfPermission(Manifest.permission.SEND_SMS)\n                == PackageManager.PERMISSION_DENIED) {\n\n            Log.d(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;permission\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;permission denied to SEND_SMS - requesting it\u0026quot;\u0026lt;/span\u0026gt;);\n            String[] permissions = {Manifest.permission.SEND_SMS};\n\n            requestPermissions(permissions, PERMISSION_REQUEST_CODE);\n\n        }\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;request permission pragmatically (after API 23)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ContextCompat.checkSelfPermission(thisActivity, Manifest.permission.SEND_SMS)\n    != PackageManager.PERMISSION_GRANTED) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Permission is not granted \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Ask for permision\u0026lt;/span\u0026gt;\n    ActivityCompat.requestPermissions(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;[] { Manifest.permission.SEND_SMS}, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;); \n} \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Permission has already been granted\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026quot;If the app has the permission, the method checkSelfPermission() returns PERMISSION_GRANTED, and the app can proceed with the operation. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If the app does not have the permission, the method returns PERMISSION_DENIED, and the app has to explicitly ask the user for permission. You need to prompt the user for that permission, as shown in the above code. Calling requestPermissions() brings up a standard Android dialog, which you cannot customize.\u0026quot;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Please go through the link below, \n\u0026lt;a href=\u0026quot;https://developer.android.com/guide/topics/permissions/overview.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://developer.android.com/guide/topics/permissions/overview.html\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Some samples are also available there to get start with the permissions.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To make android more secure now developers has to mention permission in manifest as well as they should have to ask user as well in run time to get the work done. They are permission categorized in dangerous permission section which are mention below\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;CALENDAR\u0026lt;/strong\u0026gt;    \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;READ_CALENDAR\n\nWRITE_CALENDAR\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;CAMERA\u0026lt;/strong\u0026gt;  \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;CAMERA\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;CONTACTS\u0026lt;/strong\u0026gt;    \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;READ_CONTACTS\nWRITE_CONTACTS\nGET_ACCOUNTS\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;LOCATION\u0026lt;/strong\u0026gt;    \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;ACCESS_FINE_LOCATION\nACCESS_COARSE_LOCATION\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;MICROPHONE\u0026lt;/strong\u0026gt;  \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;RECORD_AUDIO\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;PHONE\u0026lt;/strong\u0026gt;   \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;READ_PHONE_STATE\nREAD_PHONE_NUMBERS\nCALL_PHONE\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ANSWER_PHONE_CALLS\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(must request at runtime)\u0026lt;/span\u0026gt;\nREAD_CALL_LOG\nWRITE_CALL_LOG\nADD_VOICEMAIL\nUSE_SIP\nPROCESS_OUTGOING_CALLS\nANSWER_PHONE_CALLS\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;SENSORS\u0026lt;/strong\u0026gt;     \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;BODY_SENSORS\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;SMS\u0026lt;/strong\u0026gt;     \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;SEND_SMS\nRECEIVE_SMS\nREAD_SMS\nRECEIVE_WAP_PUSH\nRECEIVE_MMS\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;STORAGE\u0026lt;/strong\u0026gt;     \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;READ_EXTERNAL_STORAGE\nWRITE_EXTERNAL_STORAGE\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are using sdk 23 or higher then you must check run time permissions.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;when you declare \u0026lt;code\u0026gt;permisson\u0026lt;/code\u0026gt; in \u0026lt;code\u0026gt;Manifest\u0026lt;/code\u0026gt; and it\u0026apos;s not work means you are performing Task in \u0026lt;code\u0026gt;MarshMallow\u0026lt;/code\u0026gt; and for \u0026lt;code\u0026gt;MarshMallow\u0026lt;/code\u0026gt; you have set Permisson at \u0026lt;code\u0026gt;RunTime\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;like this way\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;ActivityCompat.requestPermissions();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are using Android version \u0026quot;23\u0026quot; or \u0026quot;23+\u0026quot;, then app will show you errors when you are trying to access anything which requires user\u0026apos;s permission. You have to ask for permissions at run-time even if you have declared those permissions in Android manifest.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Check this: \u0026lt;a href=\u0026quot;https://developer.android.com/training/permissions/requesting.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://developer.android.com/training/permissions/requesting.html\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;But if you have created your whole application and don\u0026apos;t want to change at every place then a little cheat will be sufficient.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Go to \u0026quot;Build.gradle\u0026quot; file and change the target Sdk version to less than 23, like 22, 21.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Along with CommonsWare\u0026apos;s answer,\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;There is a Security Setting (I checked on CM13) to set SMS Message Limit. If you set this to \u0026quot;None\u0026quot;, OS will popup a Dialog for every SMS, even after obtaining SMS_SEND permission in the runtime. Best thing is to set this to maximum.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If the maximum is not enough, there are ways to increases the maximum rate on a rooted device.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I added this to my MainActivity, that resolve my problem \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;       \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; MY_PERMISSIONS_REQUEST_READ_CONTACTS=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Here, thisActivity is the current activity\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ContextCompat.checkSelfPermission(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\n                Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                != PackageManager.PERMISSION_GRANTED) {\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Should we show an explanation?\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ActivityCompat.shouldShowRequestPermissionRationale(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\n                    Manifest.permission.WRITE_EXTERNAL_STORAGE)) {\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Show an expanation to the user *asynchronously* -- don\u0026apos;t block\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// this thread waiting for the user\u0026apos;s response! After the user\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// sees the explanation, try again to request the permission.\u0026lt;/span\u0026gt;\n\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// No explanation needed, we can request the permission.\u0026lt;/span\u0026gt;\n\n                ActivityCompat.requestPermissions(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;[]{Manifest.permission.WRITE_EXTERNAL_STORAGE},\n                        MY_PERMISSIONS_REQUEST_READ_CONTACTS);\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// MY_PERMISSIONS_REQUEST_READ_CONTACTS is an\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// app-defined int constant. The callback method gets the\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// result of the request.\u0026lt;/span\u0026gt;\n            }\n        }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I hope the solution to write to external storage will be useful too\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;checkPermission\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (Build.VERSION.SDK_INT \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (checkSelfPermission(android.Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                    == PackageManager.PERMISSION_GRANTED) {\n                Timber.tag(LOG_TAG).e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Permission error. You have permission\u0026quot;\u0026lt;/span\u0026gt;);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                Timber.tag(LOG_TAG).e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Permission error. You have asked for permission\u0026quot;\u0026lt;/span\u0026gt;);\n                ActivityCompat.requestPermissions(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n            }\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; { \n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// for a stuff below api level 23\u0026lt;/span\u0026gt;\n            Timber.tag(LOG_TAG).e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Permission error. You already have the permission\u0026quot;\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n        }\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can use this code to access your messages\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Open a Dialog using the code below:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;ActivityCompat.requestPermissions(MainActivity.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;[]{Manifest.permission.READ_EXTERNAL_STORAGE},\n                    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Get the Activity result as below:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onRequestPermissionsResult\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; requestCode,\n                                       String permissions[], \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;[] grantResults)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;switch\u0026lt;/span\u0026gt; (requestCode) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;: {\n\n          \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// If request is cancelled, the result arrays are empty.\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (grantResults.length \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n                    \u0026amp;amp;\u0026amp;amp; grantResults[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] == PackageManager.PERMISSION_GRANTED) {\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// permission was granted, yay! Do the\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// contacts-related task you need to do.          \u0026lt;/span\u0026gt;\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// permission denied, boo! Disable the\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// functionality that depends on this permission.\u0026lt;/span\u0026gt;\n                Toast.makeText(MainActivity.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Permission denied to read your External storage\u0026quot;\u0026lt;/span\u0026gt;, Toast.LENGTH_SHORT).show();\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// other \u0026apos;case\u0026apos; lines to check for other\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// permissions this app might request\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or edit file \u0026lt;code\u0026gt;build.gradle\u0026lt;/code\u0026gt; and chanche number \u0026lt;code\u0026gt;targetSdkVersion\u0026lt;/code\u0026gt; less than \u0026lt;code\u0026gt;23\u0026lt;/code\u0026gt;\n\u0026lt;br\u0026gt;\nAnd no longer need the code above\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;NOTE\u0026lt;/strong\u0026gt;\n\u0026lt;br\u0026gt;\n\u0026lt;strong\u0026gt;Of course this is not the case, and it\u0026apos;s just an educational aspect\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;So i had to create an app to send and receive messages but the send action crashed whenever i clicked on send even though the permission was granted . I had requested runtime permissions and allowed them, still i faced a crash that the process doesnt have the requested permission to send SMS . \nI had checked the granted permissions from :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;adb shell dumpsys \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt;-name\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The order of my request for permissions was \u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;RECEIVE_SMS\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;SEND_SMS\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;I reverted the order of request and it works fine . This was tested with a complete new app(uninstall-\u0026amp;gt; install -\u0026amp;gt; test). The answer may seem weird but just give it a shot . \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;(If it works in the shown way in a certain order, then Android might have a bug!!) \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;List of All Permissions Can be Found with Explanation at\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/Manifest.permission\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Manifest.permission\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    "],"id":354,"title":"Android permission doesn't work even if I have declared it","content":"\n                \n\u0026lt;p\u0026gt;I\u0026apos;m trying to write code to send an SMS from an Android app, but when I try to send the SMS it sends me back the error:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-none s-code-block\u0026quot;\u0026gt;\u0026lt;code\u0026gt;09-17 18:37:29.974  12847-12847/**.**.****E/AndroidRuntime﹕ FATAL EXCEPTION: main\nProcess: **.**.****, PID: 12847\njava.lang.SecurityException: Sending SMS message: uid 10092 does not have android.permission.SEND_SMS.\n        at android.os.Parcel.readException(Parcel.java:1599)\n        at android.os.Parcel.readException(Parcel.java:1552)\n        at com.android.internal.telephony.ISms$Stub$Proxy.sendTextForSubscriber(ISms.java:768)\n        at android.telephony.SmsManager.sendTextMessageInternal(SmsManager.java:310)\n        at android.telephony.SmsManager.sendTextMessage(SmsManager.java:293)\n        at **.**.****.MainActivity$3.onClick(MainActivity.java:70)\n        at android.view.View.performClick(View.java:5198)\n        at android.view.View$PerformClick.run(View.java:21147)\n        at android.os.Handler.handleCallback(Handler.java:739)\n        at android.os.Handler.dispatchMessage(Handler.java:95)\n        at android.os.Looper.loop(Looper.java:148)\n        at android.app.ActivityThread.main(ActivityThread.java:5417)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I checked but I have the permissions in the manifest, as follows:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;?xml version=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;1.0\u0026quot;\u0026lt;/span\u0026gt; encoding=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;utf-8\u0026quot;\u0026lt;/span\u0026gt;?\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.SEND_SMS\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026amp;lt;uses-feature android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.hardware.telephony\u0026quot;\u0026lt;/span\u0026gt;\n    android:required=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\n\u0026amp;lt;application\n    android:exported=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n    android:allowBackup=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n    android:icon=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@mipmap/ic_launcher\u0026quot;\u0026lt;/span\u0026gt;\n    android:label=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@string/app_name\u0026quot;\u0026lt;/span\u0026gt;\n    android:theme=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@style/AppTheme\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\n    \u0026amp;lt;activity\n        android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.MainActivity\u0026quot;\u0026lt;/span\u0026gt;\n        android:label=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@string/app_name\u0026quot;\u0026lt;/span\u0026gt;\n        android:screenOrientation=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;portrait\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\n        \u0026amp;lt;intent-filter\u0026amp;gt;\n            \u0026amp;lt;action android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.intent.action.MAIN\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n            \u0026amp;lt;category android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.intent.category.LAUNCHER\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n        \u0026amp;lt;/intent-filter\u0026amp;gt;\n    \u0026amp;lt;/activity\u0026amp;gt;\n\u0026amp;lt;/application\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I searched the internet but all the errors were about the \u0026lt;code\u0026gt;\u0026amp;lt;uses-permission/\u0026amp;gt;\u0026lt;/code\u0026gt; syntax, could you help me please?\u0026lt;/p\u0026gt;\n    ","slug":"android-permission-doesn't-work-even-if-i-have-declared-it-1657387726990","postType":"QUESTION","createdAt":"2022-07-09T17:28:46.000Z","updatedAt":"2022-07-09T17:28:46.000Z","tags":[{"id":1984,"name":"android-permissions","slug":"android-permissions","createdAt":"2022-07-09T17:28:47.000Z","updatedAt":"2022-07-09T17:28:47.000Z","Questions_Tags":{"questionId":354,"tagId":1984}}],"relatedQuestions":[{"title":"Android permission doesn't work even if I have declared it","slug":"android-permission-doesn't-work-even-if-i-have-declared-it-1657387726990","tags":[{"name":"android-permissions","Questions_Tags":{"questionId":354,"tagId":1984}}]}]},"randomQuestions":[{"title":"What is the difference between client-side and server-side programming?","slug":"what-is-the-difference-between-client-side-and-server-side-programming-1657384372926"},{"title":"Javascript infamous Loop issue? [duplicate]","slug":"javascript-infamous-loop-issue-duplicate-1657387498530"},{"title":"Retrieve only the queried element in an object array in MongoDB collection","slug":"retrieve-only-the-queried-element-in-an-object-array-in-mongodb-collection-1657384890457"},{"title":"How to find the 'sizeof' (a pointer pointing to an array)?","slug":"how-to-find-the-'sizeof'-(a-pointer-pointing-to-an-array)-1657387354284"},{"title":"How can I remove a specific item from an array?","slug":"how-can-i-remove-a-specific-item-from-an-array-1657387552077"},{"title":"What is a debugger and how can it help me diagnose problems?","slug":"what-is-a-debugger-and-how-can-it-help-me-diagnose-problems-1657384472469"},{"title":"How can I get query string values in JavaScript?","slug":"how-can-i-get-query-string-values-in-javascript-1657384443631"},{"title":"Why do I need to override the equals and hashCode methods in Java?","slug":"why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877"},{"title":"SQL injection that gets around mysql_real_escape_string()","slug":"sql-injection-that-gets-around-mysql_real_escape_string()-1657384364747"},{"title":"How to remove items from a list while iterating?","slug":"how-to-remove-items-from-a-list-while-iterating-1657384496375"},{"title":"Where can I find documentation on formatting a date in JavaScript?","slug":"where-can-i-find-documentation-on-formatting-a-date-in-javascript-1657384878157"},{"title":"What's the difference between INNER JOIN, LEFT JOIN, RIGHT JOIN and FULL JOIN? [duplicate]","slug":"what's-the-difference-between-inner-join-left-join-right-join-and-full-join-duplicate-1657388082887"},{"title":"What's the meaning of \"=\u003e\" (an arrow formed from equals \u0026 greater than) in JavaScript?","slug":"what's-the-meaning-of-\"greater\"-(an-arrow-formed-from-equals-and-greater-than)-in-javascript-1657387977118"},{"title":"What is DOM Event delegation?","slug":"what-is-dom-event-delegation-1657387625599"},{"title":"How can I save an activity state using the save instance state?","slug":"how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981"},{"title":"What does a \"Cannot find symbol\" or \"Cannot resolve symbol\" error mean?","slug":"what-does-a-\"cannot-find-symbol\"-or-\"cannot-resolve-symbol\"-error-mean-1657384492160"},{"title":"Most efficient method to groupby on an array of objects","slug":"most-efficient-method-to-groupby-on-an-array-of-objects-1657387580538"},{"title":"PHP code is not being executed, but the code shows in the browser source code","slug":"php-code-is-not-being-executed-but-the-code-shows-in-the-browser-source-code-1657384553581"},{"title":"Alternatives to gprof [closed]","slug":"alternatives-to-gprof-closed-1657388336554"},{"title":"Why is \"using namespace std;\" considered bad practice?","slug":"why-is-\"using-namespace-std\"-considered-bad-practice-1657384296377"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"android-permission-doesn't-work-even-if-i-have-declared-it-1657387726990"},"buildId":"BnkbnjkWYxefPXjTJLVVv","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>