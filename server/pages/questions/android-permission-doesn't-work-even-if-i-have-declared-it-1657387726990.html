<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-096e453de8a27667.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-e3d1b60e109d3ba1.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_buildManifest.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.hFcsiD code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-6e32c308-0"]{content:"hFcsiD,"}/*!sc*/
.ljvTUN .comment-item .comment-body .d-inline-flex.ai-center{text-align:right;}/*!sc*/
.ljvTUN .comment-item .comment-body .comment-date{float:right;}/*!sc*/
data-styled.g6[id="sc-6e32c308-1"]{content:"ljvTUN,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/android-permission-doesn&#x27;t-work-even-if-i-have-declared-it-1657387726990#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-6e32c308-0 hFcsiD flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/android-permission-doesn&#x27;t-work-even-if-i-have-declared-it-1657387726990">Android permission doesn&#x27;t work even if I have declared it</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/android-permissions">android-permissions</a></div></div><div class="question-content mt-5">
                
<p>I'm trying to write code to send an SMS from an Android app, but when I try to send the SMS it sends me back the error:</p>

<pre class="lang-none s-code-block"><code>09-17 18:37:29.974  12847-12847/**.**.****E/AndroidRuntimeï¹• FATAL EXCEPTION: main
Process: **.**.****, PID: 12847
java.lang.SecurityException: Sending SMS message: uid 10092 does not have android.permission.SEND_SMS.
        at android.os.Parcel.readException(Parcel.java:1599)
        at android.os.Parcel.readException(Parcel.java:1552)
        at com.android.internal.telephony.ISms$Stub$Proxy.sendTextForSubscriber(ISms.java:768)
        at android.telephony.SmsManager.sendTextMessageInternal(SmsManager.java:310)
        at android.telephony.SmsManager.sendTextMessage(SmsManager.java:293)
        at **.**.****.MainActivity$3.onClick(MainActivity.java:70)
        at android.view.View.performClick(View.java:5198)
        at android.view.View$PerformClick.run(View.java:21147)
        at android.os.Handler.handleCallback(Handler.java:739)
        at android.os.Handler.dispatchMessage(Handler.java:95)
        at android.os.Looper.loop(Looper.java:148)
        at android.app.ActivityThread.main(ActivityThread.java:5417)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
</code></pre>

<p>I checked but I have the permissions in the manifest, as follows:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;
</code></pre>

<p></p>

<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.SEND_SMS"</span>/&gt;
&lt;uses-feature android:name=<span class="hljs-string">"android.hardware.telephony"</span>
    android:required=<span class="hljs-string">"true"</span>/&gt;

&lt;application
    android:exported=<span class="hljs-string">"true"</span>
    android:allowBackup=<span class="hljs-string">"true"</span>
    android:icon=<span class="hljs-string">"@mipmap/ic_launcher"</span>
    android:label=<span class="hljs-string">"@string/app_name"</span>
    android:theme=<span class="hljs-string">"@style/AppTheme"</span>&gt;
    &lt;activity
        android:name=<span class="hljs-string">".MainActivity"</span>
        android:label=<span class="hljs-string">"@string/app_name"</span>
        android:screenOrientation=<span class="hljs-string">"portrait"</span>&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=<span class="hljs-string">"android.intent.action.MAIN"</span> /&gt;

            &lt;category android:name=<span class="hljs-string">"android.intent.category.LAUNCHER"</span> /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
&lt;/application&gt;
</code></pre>

<p></p>

<p>I searched the internet but all the errors were about the <code>&lt;uses-permission/&gt;</code> syntax, could you help me please?</p>
    </div></div></div><div class="sc-6e32c308-1 ljvTUN flex text-xs pl-10 flex-col comment items-center justify-center"><h4 class="text-left mt-10 text-lg font-semibold">Comments</h4><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">What version of Android are you testing on?</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/115145/commonsware" title="957,562 reputation" class="comment-user">CommonsWare</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment53120071_32635704"><span title="2015-09-17 16:47:04Z, License: CC BY-SA 3.0" class="relativetime-clean">Sep 17, 2015 at 16:47</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">I'm testing on android 6.0</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/5347360/nathan-loudjani" title="2,007 reputation" class="comment-user owner">Nathan Loudjani</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment53120522_32635704"><span title="2015-09-17 16:59:36Z, License: CC BY-SA 3.0" class="relativetime-clean">Sep 17, 2015 at 16:59</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">surely it will work on a below version of android. There's a new philosophy of permissions in android 6.0</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/3343174/fakher" title="2,079 reputation" class="comment-user">Fakher</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment53120546_32635704"><span title="2015-09-17 17:00:23Z, License: CC BY-SA 3.0" class="relativetime-clean">Sep 17, 2015 at 17:00</span></a></span>
                        <span title="this comment was edited 1 time">
                            <svg aria-hidden="true" class="va-text-bottom o50 svg-icon iconPencilSm" width="14" height="14" viewBox="0 0 14 14"><path d="m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z"></path></svg>
                        </span>
            </div>
        </div><span class="divide-x-8 "></span><button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">See more</button></div><div class="sc-6e32c308-2 bFXWFO"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><sub>(the following is extracted from <a href="https://commonsware.com/blog/2015/08/31/hey-where-did-my-permission-go.html" rel="noreferrer">a blog post of mine about this</a>)</sub></p>
<p>The big reason for not getting your permission nowadays is because
your project has a <code>targetSdkVersion</code> of 23 or higher, and the permission
that you are requesting is "dangerous". In Android 6.0, this includes:</p>
<ul>
<li><code>ACCEPT_HANDOVER</code></li>
<li><code>ACCESS_BACKGROUND_LOCATION</code></li>
<li><code>ACCESS_MEDIA_LOCATION</code></li>
<li><code>ACTIVITY_RECOGNITION</code></li>
<li><code>ANSWER_PHONE_CALLS</code></li>
<li><code>ACCESS_COARSE_LOCATION</code></li>
<li><code>ACCESS_FINE_LOCATION</code></li>
<li><code>ADD_VOICEMAIL</code></li>
<li><code>BODY_SENSORS</code></li>
<li><code>CALL_PHONE</code></li>
<li><code>CAMERA</code></li>
<li><code>GET_ACCOUNTS</code></li>
<li><code>PROCESS_OUTGOING_CALLS</code></li>
<li><code>READ_CALENDAR</code></li>
<li><code>READ_CALL_LOG</code></li>
<li><code>READ_CELL_BROADCASTS</code></li>
<li><code>READ_CONTACTS</code></li>
<li><code>READ_EXTERNAL_STORAGE</code></li>
<li><code>READ_PHONE_STATE</code></li>
<li><code>READ_SMS</code></li>
<li><code>RECEIVE_MMS</code></li>
<li><code>RECEIVE_SMS</code></li>
<li><code>RECEIVE_WAP_PUSH</code></li>
<li><code>RECORD_AUDIO</code></li>
<li><code>SEND_SMS</code></li>
<li><code>USE_SIP</code></li>
<li><code>WRITE_CALENDAR</code></li>
<li><code>WRITE_CALL_LOG</code></li>
<li><code>WRITE_CONTACTS</code></li>
<li><code>WRITE_EXTERNAL_STORAGE</code></li>
</ul>
<p>For these permissions, not only does your <code>targetSdkVersion</code> 23+ app
need to have the <code>&lt;uses-permission&gt;</code> element(s), but you also have
to ask for those permissions at runtime from the user on Android 6.0+
devices, using methods like <code>checkSelfPermission()</code> and
<code>requestPermissions()</code>.</p>
<p>As a temporary workaround, drop your <code>targetSdkVersion</code> below 23.</p>
<p>However, eventually, you will have some reason to want your
<code>targetSdkVersion</code> to be 23 or higher. At that time, you will need
to adjust your app to use the new runtime permission system.
The Android documentation has
<a href="http://developer.android.com/training/permissions/requesting.html" rel="noreferrer">a page dedicated to this topic</a>.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Above API level 23 you will be given programmatically pragmatically like:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">PERMISSION_REQUEST_CODE</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

    <span class="hljs-keyword">if</span> (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.M) {

        <span class="hljs-keyword">if</span> (checkSelfPermission(Manifest.permission.SEND_SMS)
                == PackageManager.PERMISSION_DENIED) {

            Log.d(<span class="hljs-string">"permission"</span>, <span class="hljs-string">"permission denied to SEND_SMS - requesting it"</span>);
            String[] permissions = {Manifest.permission.SEND_SMS};

            requestPermissions(permissions, PERMISSION_REQUEST_CODE);

        }
    }
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>request permission pragmatically (after API 23)</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">if</span> (ContextCompat.checkSelfPermission(thisActivity, Manifest.permission.SEND_SMS)
    != PackageManager.PERMISSION_GRANTED) {
    <span class="hljs-comment">// Permission is not granted </span>
    <span class="hljs-comment">// Ask for permision</span>
    ActivityCompat.requestPermissions(<span class="hljs-built_in">this</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[] { Manifest.permission.SEND_SMS}, <span class="hljs-number">1</span>); 
} 
<span class="hljs-keyword">else</span> {
<span class="hljs-comment">// Permission has already been granted</span>
}
</code></pre>

<p>"If the app has the permission, the method checkSelfPermission() returns PERMISSION_GRANTED, and the app can proceed with the operation. </p>

<p>If the app does not have the permission, the method returns PERMISSION_DENIED, and the app has to explicitly ask the user for permission. You need to prompt the user for that permission, as shown in the above code. Calling requestPermissions() brings up a standard Android dialog, which you cannot customize."</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Please go through the link below, 
<a href="https://developer.android.com/guide/topics/permissions/overview.html" rel="noreferrer">https://developer.android.com/guide/topics/permissions/overview.html</a></p>

<p>Some samples are also available there to get start with the permissions.</p>

<p>To make android more secure now developers has to mention permission in manifest as well as they should have to ask user as well in run time to get the work done. They are permission categorized in dangerous permission section which are mention below</p>

<p><strong>CALENDAR</strong>    </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">READ_CALENDAR

WRITE_CALENDAR
</code></pre>

<p><strong>CAMERA</strong>  </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">CAMERA
</code></pre>

<p><strong>CONTACTS</strong>    </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">READ_CONTACTS
WRITE_CONTACTS
GET_ACCOUNTS
</code></pre>

<p><strong>LOCATION</strong>    </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">ACCESS_FINE_LOCATION
ACCESS_COARSE_LOCATION
</code></pre>

<p><strong>MICROPHONE</strong>  </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">RECORD_AUDIO
</code></pre>

<p><strong>PHONE</strong>   </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">READ_PHONE_STATE
READ_PHONE_NUMBERS
CALL_PHONE
<span class="hljs-title function_">ANSWER_PHONE_CALLS</span> <span class="hljs-params">(must request at runtime)</span>
READ_CALL_LOG
WRITE_CALL_LOG
ADD_VOICEMAIL
USE_SIP
PROCESS_OUTGOING_CALLS
ANSWER_PHONE_CALLS
</code></pre>

<p><strong>SENSORS</strong>     </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">BODY_SENSORS
</code></pre>

<p><strong>SMS</strong>     </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">SEND_SMS
RECEIVE_SMS
READ_SMS
RECEIVE_WAP_PUSH
RECEIVE_MMS
</code></pre>

<p><strong>STORAGE</strong>     </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">READ_EXTERNAL_STORAGE
WRITE_EXTERNAL_STORAGE
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are using sdk 23 or higher then you must check run time permissions.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>when you declare <code>permisson</code> in <code>Manifest</code> and it's not work means you are performing Task in <code>MarshMallow</code> and for <code>MarshMallow</code> you have set Permisson at <code>RunTime</code>.</p>

<p>like this way</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">ActivityCompat.requestPermissions();
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are using Android version "23" or "23+", then app will show you errors when you are trying to access anything which requires user's permission. You have to ask for permissions at run-time even if you have declared those permissions in Android manifest.</p>

<p>Check this: <a href="https://developer.android.com/training/permissions/requesting.html" rel="nofollow noreferrer">https://developer.android.com/training/permissions/requesting.html</a></p>

<p>But if you have created your whole application and don't want to change at every place then a little cheat will be sufficient.</p>

<p>Go to "Build.gradle" file and change the target Sdk version to less than 23, like 22, 21.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Along with CommonsWare's answer,</p>

<p>There is a Security Setting (I checked on CM13) to set SMS Message Limit. If you set this to "None", OS will popup a Dialog for every SMS, even after obtaining SMS_SEND permission in the runtime. Best thing is to set this to maximum.</p>

<p>If the maximum is not enough, there are ways to increases the maximum rate on a rooted device.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I added this to my MainActivity, that resolve my problem </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">       <span class="hljs-type">int</span> MY_PERMISSIONS_REQUEST_READ_CONTACTS=<span class="hljs-number">0</span>;
<span class="hljs-comment">// Here, thisActivity is the current activity</span>
        <span class="hljs-keyword">if</span> (ContextCompat.checkSelfPermission(<span class="hljs-built_in">this</span>,
                Manifest.permission.WRITE_EXTERNAL_STORAGE)
                != PackageManager.PERMISSION_GRANTED) {

            <span class="hljs-comment">// Should we show an explanation?</span>
            <span class="hljs-keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(<span class="hljs-built_in">this</span>,
                    Manifest.permission.WRITE_EXTERNAL_STORAGE)) {

                <span class="hljs-comment">// Show an expanation to the user *asynchronously* -- don't block</span>
                <span class="hljs-comment">// this thread waiting for the user's response! After the user</span>
                <span class="hljs-comment">// sees the explanation, try again to request the permission.</span>

            } <span class="hljs-keyword">else</span> {

                <span class="hljs-comment">// No explanation needed, we can request the permission.</span>

                ActivityCompat.requestPermissions(<span class="hljs-built_in">this</span>,
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{Manifest.permission.WRITE_EXTERNAL_STORAGE},
                        MY_PERMISSIONS_REQUEST_READ_CONTACTS);

                <span class="hljs-comment">// MY_PERMISSIONS_REQUEST_READ_CONTACTS is an</span>
                <span class="hljs-comment">// app-defined int constant. The callback method gets the</span>
                <span class="hljs-comment">// result of the request.</span>
            }
        }
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I hope the solution to write to external storage will be useful too</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span>  <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkPermission</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="hljs-number">23</span>) {
            <span class="hljs-keyword">if</span> (checkSelfPermission(android.Manifest.permission.WRITE_EXTERNAL_STORAGE)
                    == PackageManager.PERMISSION_GRANTED) {
                Timber.tag(LOG_TAG).e(<span class="hljs-string">"Permission error. You have permission"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> {
                Timber.tag(LOG_TAG).e(<span class="hljs-string">"Permission error. You have asked for permission"</span>);
                ActivityCompat.requestPermissions(<span class="hljs-built_in">this</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, <span class="hljs-number">1</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
        <span class="hljs-keyword">else</span> { 
            <span class="hljs-comment">// for a stuff below api level 23</span>
            Timber.tag(LOG_TAG).e(<span class="hljs-string">"Permission error. You already have the permission"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    }
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can use this code to access your messages</p>

<p>Open a Dialog using the code below:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">ActivityCompat.requestPermissions(MainActivity.<span class="hljs-built_in">this</span>,
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{Manifest.permission.READ_EXTERNAL_STORAGE},
                    <span class="hljs-number">1</span>);
</code></pre>

<p>Get the Activity result as below:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onRequestPermissionsResult</span><span class="hljs-params">(<span class="hljs-type">int</span> requestCode,
                                       String permissions[], <span class="hljs-type">int</span>[] grantResults)</span> {
    <span class="hljs-keyword">switch</span> (requestCode) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: {

          <span class="hljs-comment">// If request is cancelled, the result arrays are empty.</span>
          <span class="hljs-keyword">if</span> (grantResults.length &gt; <span class="hljs-number">0</span>
                    &amp;&amp; grantResults[<span class="hljs-number">0</span>] == PackageManager.PERMISSION_GRANTED) {

                <span class="hljs-comment">// permission was granted, yay! Do the</span>
                <span class="hljs-comment">// contacts-related task you need to do.          </span>
            } <span class="hljs-keyword">else</span> {

                <span class="hljs-comment">// permission denied, boo! Disable the</span>
                <span class="hljs-comment">// functionality that depends on this permission.</span>
                Toast.makeText(MainActivity.<span class="hljs-built_in">this</span>, <span class="hljs-string">"Permission denied to read your External storage"</span>, Toast.LENGTH_SHORT).show();
            }
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// other 'case' lines to check for other</span>
        <span class="hljs-comment">// permissions this app might request</span>
    }
}
</code></pre>

<p>or edit file <code>build.gradle</code> and chanche number <code>targetSdkVersion</code> less than <code>23</code>
<br>
And no longer need the code above</p>

<p><strong>NOTE</strong>
<br>
<strong>Of course this is not the case, and it's just an educational aspect</strong></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>So i had to create an app to send and receive messages but the send action crashed whenever i clicked on send even though the permission was granted . I had requested runtime permissions and allowed them, still i faced a crash that the process doesnt have the requested permission to send SMS . 
I had checked the granted permissions from :</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">adb shell dumpsys <span class="hljs-keyword">package</span> &lt;<span class="hljs-keyword">package</span>-name&gt;
</code></pre>

<p>The order of my request for permissions was </p>

<ol>
<li>RECEIVE_SMS</li>
<li>SEND_SMS</li>
</ol>

<p>I reverted the order of request and it works fine . This was tested with a complete new app(uninstall-&gt; install -&gt; test). The answer may seem weird but just give it a shot . </p>

<p>(If it works in the shown way in a certain order, then Android might have a bug!!) </p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>List of All Permissions Can be Found with Explanation at</p>

<p><a href="https://developer.android.com/reference/android/Manifest.permission" rel="nofollow noreferrer">Manifest.permission</a></p>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;sub\u0026gt;(the following is extracted from \u0026lt;a href=\u0026quot;https://commonsware.com/blog/2015/08/31/hey-where-did-my-permission-go.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;a blog post of mine about this\u0026lt;/a\u0026gt;)\u0026lt;/sub\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The big reason for not getting your permission nowadays is because\nyour project has a \u0026lt;code\u0026gt;targetSdkVersion\u0026lt;/code\u0026gt; of 23 or higher, and the permission\nthat you are requesting is \u0026quot;dangerous\u0026quot;. In Android 6.0, this includes:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACCEPT_HANDOVER\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACCESS_BACKGROUND_LOCATION\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACCESS_MEDIA_LOCATION\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACTIVITY_RECOGNITION\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ANSWER_PHONE_CALLS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACCESS_COARSE_LOCATION\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ACCESS_FINE_LOCATION\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;ADD_VOICEMAIL\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;BODY_SENSORS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;CALL_PHONE\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;CAMERA\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;GET_ACCOUNTS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;PROCESS_OUTGOING_CALLS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_CALENDAR\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_CALL_LOG\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_CELL_BROADCASTS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_CONTACTS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_EXTERNAL_STORAGE\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_PHONE_STATE\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;READ_SMS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;RECEIVE_MMS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;RECEIVE_SMS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;RECEIVE_WAP_PUSH\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;RECORD_AUDIO\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;SEND_SMS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;USE_SIP\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;WRITE_CALENDAR\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;WRITE_CALL_LOG\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;WRITE_CONTACTS\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;WRITE_EXTERNAL_STORAGE\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;For these permissions, not only does your \u0026lt;code\u0026gt;targetSdkVersion\u0026lt;/code\u0026gt; 23+ app\nneed to have the \u0026lt;code\u0026gt;\u0026amp;lt;uses-permission\u0026amp;gt;\u0026lt;/code\u0026gt; element(s), but you also have\nto ask for those permissions at runtime from the user on Android 6.0+\ndevices, using methods like \u0026lt;code\u0026gt;checkSelfPermission()\u0026lt;/code\u0026gt; and\n\u0026lt;code\u0026gt;requestPermissions()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As a temporary workaround, drop your \u0026lt;code\u0026gt;targetSdkVersion\u0026lt;/code\u0026gt; below 23.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;However, eventually, you will have some reason to want your\n\u0026lt;code\u0026gt;targetSdkVersion\u0026lt;/code\u0026gt; to be 23 or higher. At that time, you will need\nto adjust your app to use the new runtime permission system.\nThe Android documentation has\n\u0026lt;a href=\u0026quot;http://developer.android.com/training/permissions/requesting.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;a page dedicated to this topic\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Above API level 23 you will be given programmatically pragmatically like:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;PERMISSION_REQUEST_CODE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (android.os.Build.VERSION.SDK_INT \u0026amp;gt;= android.os.Build.VERSION_CODES.M) {\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (checkSelfPermission(Manifest.permission.SEND_SMS)\n                == PackageManager.PERMISSION_DENIED) {\n\n            Log.d(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;permission\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;permission denied to SEND_SMS - requesting it\u0026quot;\u0026lt;/span\u0026gt;);\n            String[] permissions = {Manifest.permission.SEND_SMS};\n\n            requestPermissions(permissions, PERMISSION_REQUEST_CODE);\n\n        }\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;request permission pragmatically (after API 23)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ContextCompat.checkSelfPermission(thisActivity, Manifest.permission.SEND_SMS)\n    != PackageManager.PERMISSION_GRANTED) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Permission is not granted \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Ask for permision\u0026lt;/span\u0026gt;\n    ActivityCompat.requestPermissions(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;[] { Manifest.permission.SEND_SMS}, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;); \n} \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Permission has already been granted\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026quot;If the app has the permission, the method checkSelfPermission() returns PERMISSION_GRANTED, and the app can proceed with the operation. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If the app does not have the permission, the method returns PERMISSION_DENIED, and the app has to explicitly ask the user for permission. You need to prompt the user for that permission, as shown in the above code. Calling requestPermissions() brings up a standard Android dialog, which you cannot customize.\u0026quot;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Please go through the link below, \n\u0026lt;a href=\u0026quot;https://developer.android.com/guide/topics/permissions/overview.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://developer.android.com/guide/topics/permissions/overview.html\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Some samples are also available there to get start with the permissions.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To make android more secure now developers has to mention permission in manifest as well as they should have to ask user as well in run time to get the work done. They are permission categorized in dangerous permission section which are mention below\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;CALENDAR\u0026lt;/strong\u0026gt;    \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;READ_CALENDAR\n\nWRITE_CALENDAR\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;CAMERA\u0026lt;/strong\u0026gt;  \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;CAMERA\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;CONTACTS\u0026lt;/strong\u0026gt;    \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;READ_CONTACTS\nWRITE_CONTACTS\nGET_ACCOUNTS\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;LOCATION\u0026lt;/strong\u0026gt;    \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;ACCESS_FINE_LOCATION\nACCESS_COARSE_LOCATION\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;MICROPHONE\u0026lt;/strong\u0026gt;  \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;RECORD_AUDIO\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;PHONE\u0026lt;/strong\u0026gt;   \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;READ_PHONE_STATE\nREAD_PHONE_NUMBERS\nCALL_PHONE\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ANSWER_PHONE_CALLS\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(must request at runtime)\u0026lt;/span\u0026gt;\nREAD_CALL_LOG\nWRITE_CALL_LOG\nADD_VOICEMAIL\nUSE_SIP\nPROCESS_OUTGOING_CALLS\nANSWER_PHONE_CALLS\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;SENSORS\u0026lt;/strong\u0026gt;     \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;BODY_SENSORS\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;SMS\u0026lt;/strong\u0026gt;     \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;SEND_SMS\nRECEIVE_SMS\nREAD_SMS\nRECEIVE_WAP_PUSH\nRECEIVE_MMS\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;STORAGE\u0026lt;/strong\u0026gt;     \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;READ_EXTERNAL_STORAGE\nWRITE_EXTERNAL_STORAGE\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are using sdk 23 or higher then you must check run time permissions.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;when you declare \u0026lt;code\u0026gt;permisson\u0026lt;/code\u0026gt; in \u0026lt;code\u0026gt;Manifest\u0026lt;/code\u0026gt; and it\u0026apos;s not work means you are performing Task in \u0026lt;code\u0026gt;MarshMallow\u0026lt;/code\u0026gt; and for \u0026lt;code\u0026gt;MarshMallow\u0026lt;/code\u0026gt; you have set Permisson at \u0026lt;code\u0026gt;RunTime\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;like this way\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;ActivityCompat.requestPermissions();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are using Android version \u0026quot;23\u0026quot; or \u0026quot;23+\u0026quot;, then app will show you errors when you are trying to access anything which requires user\u0026apos;s permission. You have to ask for permissions at run-time even if you have declared those permissions in Android manifest.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Check this: \u0026lt;a href=\u0026quot;https://developer.android.com/training/permissions/requesting.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://developer.android.com/training/permissions/requesting.html\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;But if you have created your whole application and don\u0026apos;t want to change at every place then a little cheat will be sufficient.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Go to \u0026quot;Build.gradle\u0026quot; file and change the target Sdk version to less than 23, like 22, 21.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Along with CommonsWare\u0026apos;s answer,\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;There is a Security Setting (I checked on CM13) to set SMS Message Limit. If you set this to \u0026quot;None\u0026quot;, OS will popup a Dialog for every SMS, even after obtaining SMS_SEND permission in the runtime. Best thing is to set this to maximum.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If the maximum is not enough, there are ways to increases the maximum rate on a rooted device.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I added this to my MainActivity, that resolve my problem \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;       \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; MY_PERMISSIONS_REQUEST_READ_CONTACTS=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Here, thisActivity is the current activity\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ContextCompat.checkSelfPermission(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\n                Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                != PackageManager.PERMISSION_GRANTED) {\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Should we show an explanation?\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ActivityCompat.shouldShowRequestPermissionRationale(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\n                    Manifest.permission.WRITE_EXTERNAL_STORAGE)) {\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Show an expanation to the user *asynchronously* -- don\u0026apos;t block\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// this thread waiting for the user\u0026apos;s response! After the user\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// sees the explanation, try again to request the permission.\u0026lt;/span\u0026gt;\n\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// No explanation needed, we can request the permission.\u0026lt;/span\u0026gt;\n\n                ActivityCompat.requestPermissions(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;[]{Manifest.permission.WRITE_EXTERNAL_STORAGE},\n                        MY_PERMISSIONS_REQUEST_READ_CONTACTS);\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// MY_PERMISSIONS_REQUEST_READ_CONTACTS is an\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// app-defined int constant. The callback method gets the\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// result of the request.\u0026lt;/span\u0026gt;\n            }\n        }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I hope the solution to write to external storage will be useful too\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;checkPermission\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (Build.VERSION.SDK_INT \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (checkSelfPermission(android.Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                    == PackageManager.PERMISSION_GRANTED) {\n                Timber.tag(LOG_TAG).e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Permission error. You have permission\u0026quot;\u0026lt;/span\u0026gt;);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                Timber.tag(LOG_TAG).e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Permission error. You have asked for permission\u0026quot;\u0026lt;/span\u0026gt;);\n                ActivityCompat.requestPermissions(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n            }\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; { \n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// for a stuff below api level 23\u0026lt;/span\u0026gt;\n            Timber.tag(LOG_TAG).e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Permission error. You already have the permission\u0026quot;\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n        }\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can use this code to access your messages\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Open a Dialog using the code below:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;ActivityCompat.requestPermissions(MainActivity.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;[]{Manifest.permission.READ_EXTERNAL_STORAGE},\n                    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Get the Activity result as below:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onRequestPermissionsResult\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; requestCode,\n                                       String permissions[], \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;[] grantResults)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;switch\u0026lt;/span\u0026gt; (requestCode) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;: {\n\n          \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// If request is cancelled, the result arrays are empty.\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (grantResults.length \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n                    \u0026amp;amp;\u0026amp;amp; grantResults[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] == PackageManager.PERMISSION_GRANTED) {\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// permission was granted, yay! Do the\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// contacts-related task you need to do.          \u0026lt;/span\u0026gt;\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// permission denied, boo! Disable the\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// functionality that depends on this permission.\u0026lt;/span\u0026gt;\n                Toast.makeText(MainActivity.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Permission denied to read your External storage\u0026quot;\u0026lt;/span\u0026gt;, Toast.LENGTH_SHORT).show();\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// other \u0026apos;case\u0026apos; lines to check for other\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// permissions this app might request\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or edit file \u0026lt;code\u0026gt;build.gradle\u0026lt;/code\u0026gt; and chanche number \u0026lt;code\u0026gt;targetSdkVersion\u0026lt;/code\u0026gt; less than \u0026lt;code\u0026gt;23\u0026lt;/code\u0026gt;\n\u0026lt;br\u0026gt;\nAnd no longer need the code above\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;NOTE\u0026lt;/strong\u0026gt;\n\u0026lt;br\u0026gt;\n\u0026lt;strong\u0026gt;Of course this is not the case, and it\u0026apos;s just an educational aspect\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;So i had to create an app to send and receive messages but the send action crashed whenever i clicked on send even though the permission was granted . I had requested runtime permissions and allowed them, still i faced a crash that the process doesnt have the requested permission to send SMS . \nI had checked the granted permissions from :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;adb shell dumpsys \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt;-name\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The order of my request for permissions was \u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;RECEIVE_SMS\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;SEND_SMS\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;I reverted the order of request and it works fine . This was tested with a complete new app(uninstall-\u0026amp;gt; install -\u0026amp;gt; test). The answer may seem weird but just give it a shot . \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;(If it works in the shown way in a certain order, then Android might have a bug!!) \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;List of All Permissions Can be Found with Explanation at\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/Manifest.permission\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Manifest.permission\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    "],"comment":["\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;What version of Android are you testing on?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/115145/commonsware\u0026quot; title=\u0026quot;957,562 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;CommonsWare\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment53120071_32635704\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-09-17 16:47:04Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 17, 2015 at 16:47\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;I\u0026apos;m testing on android 6.0\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/5347360/nathan-loudjani\u0026quot; title=\u0026quot;2,007 reputation\u0026quot; class=\u0026quot;comment-user owner\u0026quot;\u0026gt;Nathan Loudjani\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment53120522_32635704\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-09-17 16:59:36Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 17, 2015 at 16:59\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;surely it will work on a below version of android. There\u0026apos;s a new philosophy of permissions in android 6.0\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3343174/fakher\u0026quot; title=\u0026quot;2,079 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Fakher\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment53120546_32635704\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-09-17 17:00:23Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 17, 2015 at 17:00\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Is there a special syntax for android 6 ? How can i be sure it works on below version ?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/5347360/nathan-loudjani\u0026quot; title=\u0026quot;2,007 reputation\u0026quot; class=\u0026quot;comment-user owner\u0026quot;\u0026gt;Nathan Loudjani\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment53120621_32635704\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-09-17 17:02:11Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 17, 2015 at 17:02\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;my previous \u0026lt;code\u0026gt;targetsdkversion\u0026lt;/code\u0026gt; was \u0026lt;code\u0026gt;23\u0026lt;/code\u0026gt; updated to \u0026lt;code\u0026gt;27\u0026lt;/code\u0026gt; after app update \u0026lt;code\u0026gt;READ_SMS\u0026lt;/code\u0026gt; permission not working which is already enabled. please help\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2869767/sagar\u0026quot; title=\u0026quot;4,591 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Sagar\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment92015644_32635704\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-09-27 13:27:47Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 27, 2018 at 13:27\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Thank you very much, I used the requestPermissions() methods and i worked well\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/5347360/nathan-loudjani\u0026quot; title=\u0026quot;2,007 reputation\u0026quot; class=\u0026quot;comment-user owner\u0026quot;\u0026gt;Nathan Loudjani\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment53121036_32636039\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-09-17 17:15:03Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 17, 2015 at 17:15\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Ozzy: You need to be on a v23 generation of the support libraries (\u0026lt;code\u0026gt;23.x.y\u0026lt;/code\u0026gt;, for current values of x and y), rather than the v22 that you are presently using.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/115145/commonsware\u0026quot; title=\u0026quot;957,562 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;CommonsWare\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment57019418_32636039\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-01-06 15:48:11Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 6, 2016 at 15:48\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@NathanLoudjani Would you mind sharing your code that implements this? I am in the exact same boat and am struggling putting this into my activity.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1289044/dschuett\u0026quot; title=\u0026quot;190 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;dschuett\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment57650019_32636039\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-01-23 03:52:52Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 23, 2016 at 3:52\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Leviathan: At the time, I got that list from the docs, I think from the page that I link to at the end of the answer. Unfortunately, Google seems to have dropped that list, which is both unfortunate and typical. For an individual permission, its entry in \u0026lt;code\u0026gt;Manifest.permission\u0026lt;/code\u0026gt; should show its protection level, (e.g., \u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/Manifest.permission#ACCESS_COARSE_LOCATION\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;ACCESS_COARSE_LOCATION\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;).\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/115145/commonsware\u0026quot; title=\u0026quot;957,562 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;CommonsWare\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment113733585_32636039\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-10-12 12:44:35Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Oct 12, 2020 at 12:44\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Leviathan: \u0026quot;is there a way to explicity request permission for a regular permission?\u0026quot; -- no, sorry. \u0026quot;Our data protection law requires to ask for Push Notifications explicity before sending them, but afaik they can be received as soon as the app is installed and they are in the manifest\u0026quot; -- that is not a permission. Have the receiver or service be disabled in the manifest, show your own dialog, and if the user agrees, enable the component.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/115145/commonsware\u0026quot; title=\u0026quot;957,562 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;CommonsWare\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment113734170_32636039\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-10-12 13:05:21Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Oct 12, 2020 at 13:05\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Where would we put this line? ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.SEND_SMS},1); and what does the 1 refer to?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/4669512/lizg\u0026quot; title=\u0026quot;1,772 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;LizG\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment92169015_43808024\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-10-02 22:46:58Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Oct 2, 2018 at 22:46\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        "],"id":354,"title":"Android permission doesn't work even if I have declared it","content":"\n                \n\u0026lt;p\u0026gt;I\u0026apos;m trying to write code to send an SMS from an Android app, but when I try to send the SMS it sends me back the error:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-none s-code-block\u0026quot;\u0026gt;\u0026lt;code\u0026gt;09-17 18:37:29.974  12847-12847/**.**.****E/AndroidRuntimeï¹• FATAL EXCEPTION: main\nProcess: **.**.****, PID: 12847\njava.lang.SecurityException: Sending SMS message: uid 10092 does not have android.permission.SEND_SMS.\n        at android.os.Parcel.readException(Parcel.java:1599)\n        at android.os.Parcel.readException(Parcel.java:1552)\n        at com.android.internal.telephony.ISms$Stub$Proxy.sendTextForSubscriber(ISms.java:768)\n        at android.telephony.SmsManager.sendTextMessageInternal(SmsManager.java:310)\n        at android.telephony.SmsManager.sendTextMessage(SmsManager.java:293)\n        at **.**.****.MainActivity$3.onClick(MainActivity.java:70)\n        at android.view.View.performClick(View.java:5198)\n        at android.view.View$PerformClick.run(View.java:21147)\n        at android.os.Handler.handleCallback(Handler.java:739)\n        at android.os.Handler.dispatchMessage(Handler.java:95)\n        at android.os.Looper.loop(Looper.java:148)\n        at android.app.ActivityThread.main(ActivityThread.java:5417)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I checked but I have the permissions in the manifest, as follows:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;?xml version=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;1.0\u0026quot;\u0026lt;/span\u0026gt; encoding=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;utf-8\u0026quot;\u0026lt;/span\u0026gt;?\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.SEND_SMS\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026amp;lt;uses-feature android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.hardware.telephony\u0026quot;\u0026lt;/span\u0026gt;\n    android:required=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\n\u0026amp;lt;application\n    android:exported=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n    android:allowBackup=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n    android:icon=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@mipmap/ic_launcher\u0026quot;\u0026lt;/span\u0026gt;\n    android:label=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@string/app_name\u0026quot;\u0026lt;/span\u0026gt;\n    android:theme=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@style/AppTheme\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\n    \u0026amp;lt;activity\n        android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.MainActivity\u0026quot;\u0026lt;/span\u0026gt;\n        android:label=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@string/app_name\u0026quot;\u0026lt;/span\u0026gt;\n        android:screenOrientation=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;portrait\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\n        \u0026amp;lt;intent-filter\u0026amp;gt;\n            \u0026amp;lt;action android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.intent.action.MAIN\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\n            \u0026amp;lt;category android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.intent.category.LAUNCHER\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n        \u0026amp;lt;/intent-filter\u0026amp;gt;\n    \u0026amp;lt;/activity\u0026amp;gt;\n\u0026amp;lt;/application\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I searched the internet but all the errors were about the \u0026lt;code\u0026gt;\u0026amp;lt;uses-permission/\u0026amp;gt;\u0026lt;/code\u0026gt; syntax, could you help me please?\u0026lt;/p\u0026gt;\n    ","slug":"android-permission-doesn't-work-even-if-i-have-declared-it-1657387726990","postType":"QUESTION","createdAt":"2022-07-09T17:28:46.000Z","updatedAt":"2022-07-09T17:28:46.000Z","tags":[{"id":1984,"name":"android-permissions","slug":"android-permissions","createdAt":"2022-07-09T17:28:47.000Z","updatedAt":"2022-07-09T17:28:47.000Z","Questions_Tags":{"questionId":354,"tagId":1984}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"android-permission-doesn't-work-even-if-i-have-declared-it-1657387726990"},"buildId":"4Y8KGE-c2lolBeBmcum_I","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>