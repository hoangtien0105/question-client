<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-301f760ac8107464.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-76d2c3e2d98bb08b.js" defer=""></script><script src="/_next/static/B9ZMQqRLGvIP-RcWN9dT2/_buildManifest.js" defer=""></script><script src="/_next/static/B9ZMQqRLGvIP-RcWN9dT2/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.eZIPKL code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-c4b0431a-0"]{content:"eZIPKL,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-to-lazy-load-images-in-listview-in-android-1657387332835#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-c4b0431a-0 eZIPKL flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-to-lazy-load-images-in-listview-in-android-1657387332835">How to lazy load images in ListView in Android</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/listview">listview</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/universal-image-loader">universal-image-loader</a></div></div><div class="question-content mt-5">
                
<p>I am using a <code>ListView</code> to display some images and captions associated with those images. I am getting the images from the Internet. Is there a way to lazy load images so while the text displays, the UI is not blocked and images are displayed as they are downloaded? </p>

<p>The total number of images is not fixed.</p>
    </div></div></div><div class="sc-c4b0431a-2 cRqwQe"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's what I created to hold the images that my app is currently displaying. Please note that the "Log" object in use here is my custom wrapper around the final Log class inside Android.</p>
<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-keyword">package</span> com.wilson.android.library;

<span class="hljs-comment">/*
 Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
*/</span>
<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DrawableManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Drawable&gt; drawableMap;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DrawableManager</span><span class="hljs-params">()</span> {
        drawableMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Drawable&gt;();
    }

    <span class="hljs-keyword">public</span> Drawable <span class="hljs-title function_">fetchDrawable</span><span class="hljs-params">(String urlString)</span> {
        <span class="hljs-keyword">if</span> (drawableMap.containsKey(urlString)) {
            <span class="hljs-keyword">return</span> drawableMap.get(urlString);
        }

        Log.d(<span class="hljs-built_in">this</span>.getClass().getSimpleName(), <span class="hljs-string">"image url:"</span> + urlString);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> fetch(urlString);
            <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> Drawable.createFromStream(is, <span class="hljs-string">"src"</span>);


            <span class="hljs-keyword">if</span> (drawable != <span class="hljs-literal">null</span>) {
                drawableMap.put(urlString, drawable);
                Log.d(<span class="hljs-built_in">this</span>.getClass().getSimpleName(), <span class="hljs-string">"got a thumbnail drawable: "</span> + drawable.getBounds() + <span class="hljs-string">", "</span>
                        + drawable.getIntrinsicHeight() + <span class="hljs-string">","</span> + drawable.getIntrinsicWidth() + <span class="hljs-string">", "</span>
                        + drawable.getMinimumHeight() + <span class="hljs-string">","</span> + drawable.getMinimumWidth());
            } <span class="hljs-keyword">else</span> {
              Log.w(<span class="hljs-built_in">this</span>.getClass().getSimpleName(), <span class="hljs-string">"could not get thumbnail"</span>);
            }

            <span class="hljs-keyword">return</span> drawable;
        } <span class="hljs-keyword">catch</span> (MalformedURLException e) {
            Log.e(<span class="hljs-built_in">this</span>.getClass().getSimpleName(), <span class="hljs-string">"fetchDrawable failed"</span>, e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">catch</span> (IOException e) {
            Log.e(<span class="hljs-built_in">this</span>.getClass().getSimpleName(), <span class="hljs-string">"fetchDrawable failed"</span>, e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fetchDrawableOnThread</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String urlString, <span class="hljs-keyword">final</span> ImageView imageView)</span> {
        <span class="hljs-keyword">if</span> (drawableMap.containsKey(urlString)) {
            imageView.setImageDrawable(drawableMap.get(urlString));
        }

        <span class="hljs-keyword">final</span> <span class="hljs-type">Handler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>(Looper.getMainLooper()) {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message)</span> {
                imageView.setImageDrawable((Drawable) message.obj);
            }
        };

        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                <span class="hljs-comment">//TODO : set imageView to a "pending" image</span>
                <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> fetchDrawable(urlString);
                <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> handler.obtainMessage(<span class="hljs-number">1</span>, drawable);
                handler.sendMessage(message);
            }
        };
        thread.start();
    }

    <span class="hljs-keyword">private</span> InputStream <span class="hljs-title function_">fetch</span><span class="hljs-params">(String urlString)</span> <span class="hljs-keyword">throws</span> MalformedURLException, IOException {
        <span class="hljs-type">DefaultHttpClient</span> <span class="hljs-variable">httpClient</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultHttpClient</span>();
        <span class="hljs-type">HttpGet</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpGet</span>(urlString);
        <span class="hljs-type">HttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> httpClient.execute(request);
        <span class="hljs-keyword">return</span> response.getEntity().getContent();
    }
}
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I made <a href="https://github.com/thest1/LazyList" rel="noreferrer">a simple demo of a lazy list</a> (located at GitHub) with images. </p>

<blockquote>
  <p>Basic Usage </p>

<pre class="default s-code-block"><code class="hljs language-vhdl">ImageLoader imageLoader=<span class="hljs-keyword">new</span> ImageLoader(<span class="hljs-keyword">context</span>); ...
imageLoader.DisplayImage(url, imageView); 
</code></pre>
  
  <p>Don't forget to add the
  following permissions to your AndroidManifest.xml:</p>

<pre class="default s-code-block"><code class="hljs language-xml"> <span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.INTERNET"</span>/&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;</span> Please
</code></pre>
  
  <p>create only one instance of ImageLoader and reuse it all around your
  application. This way image caching will be much more efficient.</p>
</blockquote>

<p>It may be helpful to somebody. It downloads images in the background thread. Images are being cached on an SD card and in memory. The cache implementation is very simple and is just enough for the demo. I decode images with inSampleSize to reduce memory consumption. I also try to handle recycled views correctly.</p>

<p><img src="https://i.stack.imgur.com/1NvdB.png" alt="Alt text"></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I recommend open source instrument <strong><a href="https://github.com/nostra13/Android-Universal-Image-Loader" rel="noreferrer">Universal Image Loader</a></strong>. It is originally based on Fedor Vlasov's project <strong>LazyList</strong> and has been vastly improved since then.</p>
<ul>
<li>Multithread image loading</li>
<li>Possibility of wide tuning ImageLoader's configuration (thread executors, downloader, decoder, memory and disc cache, display image options, and others)</li>
<li>Possibility of image caching in memory and/or on the device's file system (or SD card)</li>
<li>Possibility to "listen" loading process</li>
<li>Possibility to customize every display image call with separated options</li>
<li>Widget support</li>
<li>Android 2.0+ support</li>
</ul>
<p><a href="https://github.com/nostra13/Android-Universal-Image-Loader" rel="noreferrer"><img src="https://i.stack.imgur.com/QzOIL.png" alt=""></a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html" rel="noreferrer">Multithreading For Performance</a>, a tutorial by Gilles Debunne.</p>

<p>This is from the Android Developers Blog. The suggested code uses:</p>

<ul>
<li><code>AsyncTasks</code>.</li>
<li>A hard, limited size, <code>FIFO cache</code>.</li>
<li>A soft, easily <code>garbage collect</code>-ed cache.</li>
<li>A <em>placeholder</em> <code>Drawable</code> while you download.</li>
</ul>

<p><img src="https://i.stack.imgur.com/xdEVJ.png" alt="enter image description here"></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Update: Note that this answer is pretty ineffective now. The Garbage Collector acts aggressively on SoftReference and WeakReference, so this code is NOT suitable for new apps.</strong>  (Instead, try libraries like <a href="https://github.com/nostra13/Android-Universal-Image-Loader" rel="nofollow noreferrer">Universal Image Loader</a> suggested in other answers.)</p>
<p>Thanks to James for the code, and Bao-Long for the suggestion of using SoftReference. I implemented the SoftReference changes on James' code. Unfortunately, SoftReferences caused my images to be garbage collected too quickly. In my case, it was fine without the SoftReference stuff, because my list size is limited and my images are small.</p>
<p>There's a discussion from a year ago regarding the SoftReferences on google groups: <a href="http://groups.google.com/group/android-developers/browse_thread/thread/ebabb0dadf38acc1" rel="nofollow noreferrer">link to thread</a>. As a solution to the too-early garbage collection, they suggest the possibility of manually setting the VM heap size using dalvik.system.VMRuntime.setMinimumHeapSize(), which is not very attractive to me.</p>
<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">DrawableManager</span><span class="hljs-params">()</span> {
    drawableMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, SoftReference&lt;Drawable&gt;&gt;();
}

<span class="hljs-keyword">public</span> Drawable <span class="hljs-title function_">fetchDrawable</span><span class="hljs-params">(String urlString)</span> {
    SoftReference&lt;Drawable&gt; drawableRef = drawableMap.get(urlString);
    <span class="hljs-keyword">if</span> (drawableRef != <span class="hljs-literal">null</span>) {
        <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> drawableRef.get();
        <span class="hljs-keyword">if</span> (drawable != <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">return</span> drawable;
        <span class="hljs-comment">// Reference has expired so remove the key from drawableMap</span>
        drawableMap.remove(urlString);
    }

    <span class="hljs-keyword">if</span> (Constants.LOGGING) Log.d(<span class="hljs-built_in">this</span>.getClass().getSimpleName(), <span class="hljs-string">"image url:"</span> + urlString);
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> fetch(urlString);
        <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> Drawable.createFromStream(is, <span class="hljs-string">"src"</span>);
        drawableRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SoftReference</span>&lt;Drawable&gt;(drawable);
        drawableMap.put(urlString, drawableRef);
        <span class="hljs-keyword">if</span> (Constants.LOGGING) Log.d(<span class="hljs-built_in">this</span>.getClass().getSimpleName(), <span class="hljs-string">"got a thumbnail drawable: "</span> + drawable.getBounds() + <span class="hljs-string">", "</span>
                + drawable.getIntrinsicHeight() + <span class="hljs-string">","</span> + drawable.getIntrinsicWidth() + <span class="hljs-string">", "</span>
                + drawable.getMinimumHeight() + <span class="hljs-string">","</span> + drawable.getMinimumWidth());
        <span class="hljs-keyword">return</span> drawableRef.get();
    } <span class="hljs-keyword">catch</span> (MalformedURLException e) {
        <span class="hljs-keyword">if</span> (Constants.LOGGING) Log.e(<span class="hljs-built_in">this</span>.getClass().getSimpleName(), <span class="hljs-string">"fetchDrawable failed"</span>, e);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">catch</span> (IOException e) {
        <span class="hljs-keyword">if</span> (Constants.LOGGING) Log.e(<span class="hljs-built_in">this</span>.getClass().getSimpleName(), <span class="hljs-string">"fetchDrawable failed"</span>, e);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fetchDrawableOnThread</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String urlString, <span class="hljs-keyword">final</span> ImageView imageView)</span> {
    SoftReference&lt;Drawable&gt; drawableRef = drawableMap.get(urlString);
    <span class="hljs-keyword">if</span> (drawableRef != <span class="hljs-literal">null</span>) {
        <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> drawableRef.get();
        <span class="hljs-keyword">if</span> (drawable != <span class="hljs-literal">null</span>) {
            imageView.setImageDrawable(drawableRef.get());
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// Reference has expired so remove the key from drawableMap</span>
        drawableMap.remove(urlString);
    }

    <span class="hljs-keyword">final</span> <span class="hljs-type">Handler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message)</span> {
            imageView.setImageDrawable((Drawable) message.obj);
        }
    };

    <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">//TODO : set imageView to a "pending" image</span>
            <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> fetchDrawable(urlString);
            <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> handler.obtainMessage(<span class="hljs-number">1</span>, drawable);
            handler.sendMessage(message);
        }
    };
    thread.start();
}
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Picasso</strong></p>
<p>Use Jake Wharton's  Picasso Library.
(A Perfect ImageLoading Library from the developer of ActionBarSherlock)</p>
<p>A powerful image downloading and caching library for Android.</p>
<p>Images add much-needed context and visual flair to Android applications. Picasso allows for hassle-free image loading in your applicationoften in one line of code!</p>
<pre class="default s-code-block"><code class="hljs language-csharp">Picasso.<span class="hljs-keyword">with</span>(context).load(<span class="hljs-string">"http://i.imgur.com/DvpvklR.png"</span>).<span class="hljs-keyword">into</span>(imageView);
</code></pre>
<p>Many common pitfalls of image loading on Android are handled automatically by Picasso:</p>
<p>Handling ImageView recycling and download cancellation in an adapter.
Complex image transformations with minimal memory use.
Automatic memory and disk caching.</p>
<p><a href="http://square.github.io/picasso/" rel="noreferrer">Picasso Jake Wharton's Library</a></p>
<p><strong>Glide</strong></p>
<p>Glide is a fast and efficient open-source media management framework for Android that wraps media decoding, memory and disk caching, and resource pooling into a simple and easy-to-use interface.</p>
<p>Glide supports fetching, decoding, and displaying video stills, images, and animated GIFs. Glide includes a flexible API that allows developers to plug into almost any network stack. By default, Glide uses a custom HttpUrlConnection based stack but also includes utility libraries plug-in to Google's Volley project or Square's OkHttp library instead.</p>
<pre class="default s-code-block"><code class="hljs language-csharp">Glide.<span class="hljs-keyword">with</span>(<span class="hljs-keyword">this</span>).load(<span class="hljs-string">"your-url-here"</span>).<span class="hljs-keyword">into</span>(imageView);
</code></pre>
<p>Glide's primary focus is on making scrolling any kind of a list of images as smooth and fast as possible, but Glide is also effective for almost any case where you need to fetch, resize, and display a remote image.</p>
<p><a href="https://github.com/bumptech/glide" rel="noreferrer">Glide Image Loading Library</a></p>
<p><strong>Fresco by Facebook</strong></p>
<p>Fresco is a powerful system for displaying images in Android applications.</p>
<p>Fresco takes care of image loading and display, so you don't have to. It will load images from the network, local storage, or local resources, and display a placeholder until the image has arrived. It has two levels of cache; one in memory and another in internal storage.</p>
<p><a href="https://github.com/facebook/fresco" rel="noreferrer">Fresco Github</a></p>
<p>In Android 4.x and lower, Fresco puts images in a special region of Android memory. This lets your application run faster - and suffer the dreaded OutOfMemoryError much less often.</p>
<p><a href="http://frescolib.org/docs/index.html#_" rel="noreferrer">Fresco Documentation</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>High-performance loader - after examining the methods suggested here,
I used <a href="http://negativeprobability.blogspot.com/2011/08/lazy-loading-of-images-in-listview.html" rel="nofollow noreferrer">Ben's solution</a> with some changes -</p>
<ol>
<li><p>I realized that working with drawable is faster than with bitmaps so I uses drawable instead</p>
</li>
<li><p>Using SoftReference is great, but it makes the cached image to be deleted too often, so I added a Linked list that holds images references, preventing the image to be deleted, until it reached a predefined size</p>
</li>
<li><p>To open the InputStream I used java.net.URLConnection which allows me to use web cache (you need to set a response cache first, but that's another story)</p>
</li>
</ol>
<p>My code:</p>
<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> java.util.Map; 
<span class="hljs-keyword">import</span> java.util.HashMap; 
<span class="hljs-keyword">import</span> java.util.LinkedList; 
<span class="hljs-keyword">import</span> java.util.Collections; 
<span class="hljs-keyword">import</span> java.util.WeakHashMap; 
<span class="hljs-keyword">import</span> java.lang.ref.SoftReference; 
<span class="hljs-keyword">import</span> java.util.concurrent.Executors; 
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService; 
<span class="hljs-keyword">import</span> android.graphics.drawable.Drawable;
<span class="hljs-keyword">import</span> android.widget.ImageView;
<span class="hljs-keyword">import</span> android.os.Handler;
<span class="hljs-keyword">import</span> android.os.Message;
<span class="hljs-keyword">import</span> java.io.InputStream;
<span class="hljs-keyword">import</span> java.net.MalformedURLException; 
<span class="hljs-keyword">import</span> java.io.IOException; 
<span class="hljs-keyword">import</span> java.net.URL;
<span class="hljs-keyword">import</span> java.net.URLConnection;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DrawableBackgroundDownloader</span> {    

<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, SoftReference&lt;Drawable&gt;&gt; mCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, SoftReference&lt;Drawable&gt;&gt;();   
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> LinkedList &lt;Drawable&gt; mChacheController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span> &lt;Drawable&gt; ();
<span class="hljs-keyword">private</span> ExecutorService mThreadPool;  
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;ImageView, String&gt; mImageViews = Collections.synchronizedMap(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakHashMap</span>&lt;ImageView, String&gt;());  

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_CACHE_SIZE</span> <span class="hljs-operator">=</span> <span class="hljs-number">80</span>; 
<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">THREAD_POOL_SIZE</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;

<span class="hljs-comment">/**
 * Constructor
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-title function_">DrawableBackgroundDownloader</span><span class="hljs-params">()</span> {  
    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);  
}  


<span class="hljs-comment">/**
 * Clears all instance data and stops running threads
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Reset</span><span class="hljs-params">()</span> {
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">oldThreadPool</span> <span class="hljs-operator">=</span> mThreadPool;
    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);
    oldThreadPool.shutdownNow();

    mChacheController.clear();
    mCache.clear();
    mImageViews.clear();
}  

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadDrawable</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String url, <span class="hljs-keyword">final</span> ImageView imageView,Drawable placeholder)</span> {  
    mImageViews.put(imageView, url);  
    <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> getDrawableFromCache(url);  

    <span class="hljs-comment">// check in UI thread, so no concurrency issues  </span>
    <span class="hljs-keyword">if</span> (drawable != <span class="hljs-literal">null</span>) {  
        <span class="hljs-comment">//Log.d(null, "Item loaded from mCache: " + url);  </span>
        imageView.setImageDrawable(drawable);  
    } <span class="hljs-keyword">else</span> {  
        imageView.setImageDrawable(placeholder);  
        queueJob(url, imageView, placeholder);  
    }  
} 


<span class="hljs-keyword">private</span> Drawable <span class="hljs-title function_">getDrawableFromCache</span><span class="hljs-params">(String url)</span> {  
    <span class="hljs-keyword">if</span> (mCache.containsKey(url)) {  
        <span class="hljs-keyword">return</span> mCache.get(url).get();  
    }  

    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">putDrawableInCache</span><span class="hljs-params">(String url,Drawable drawable)</span> {  
    <span class="hljs-type">int</span> <span class="hljs-variable">chacheControllerSize</span> <span class="hljs-operator">=</span> mChacheController.size();
    <span class="hljs-keyword">if</span> (chacheControllerSize &gt; MAX_CACHE_SIZE) 
        mChacheController.subList(<span class="hljs-number">0</span>, MAX_CACHE_SIZE/<span class="hljs-number">2</span>).clear();

    mChacheController.addLast(drawable);
    mCache.put(url, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SoftReference</span>&lt;Drawable&gt;(drawable));

}  

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queueJob</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String url, <span class="hljs-keyword">final</span> ImageView imageView,<span class="hljs-keyword">final</span> Drawable placeholder)</span> {  
    <span class="hljs-comment">/* Create handler in UI thread. */</span>  
    <span class="hljs-keyword">final</span> <span class="hljs-type">Handler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>() {  
        <span class="hljs-meta">@Override</span>  
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> {  
            <span class="hljs-type">String</span> <span class="hljs-variable">tag</span> <span class="hljs-operator">=</span> mImageViews.get(imageView);  
            <span class="hljs-keyword">if</span> (tag != <span class="hljs-literal">null</span> &amp;&amp; tag.equals(url)) {
                <span class="hljs-keyword">if</span> (imageView.isShown())
                    <span class="hljs-keyword">if</span> (msg.obj != <span class="hljs-literal">null</span>) {
                        imageView.setImageDrawable((Drawable) msg.obj);  
                    } <span class="hljs-keyword">else</span> {  
                        imageView.setImageDrawable(placeholder);  
                        <span class="hljs-comment">//Log.d(null, "fail " + url);  </span>
                    } 
            }  
        }  
    };  

    mThreadPool.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {  
        <span class="hljs-meta">@Override</span>  
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {  
            <span class="hljs-keyword">final</span> <span class="hljs-type">Drawable</span> <span class="hljs-variable">bmp</span> <span class="hljs-operator">=</span> downloadDrawable(url);
            <span class="hljs-comment">// if the view is not visible anymore, the image will be ready for next time in cache</span>
            <span class="hljs-keyword">if</span> (imageView.isShown())
            {
                <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> Message.obtain();  
                message.obj = bmp;
                <span class="hljs-comment">//Log.d(null, "Item downloaded: " + url);  </span>

                handler.sendMessage(message);
            }
        }  
    });  
}  



<span class="hljs-keyword">private</span> Drawable <span class="hljs-title function_">downloadDrawable</span><span class="hljs-params">(String url)</span> {  
    <span class="hljs-keyword">try</span> {  
        <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> getInputStream(url);

        <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> Drawable.createFromStream(is, url);
        putDrawableInCache(url,drawable);  
        <span class="hljs-keyword">return</span> drawable;  

    } <span class="hljs-keyword">catch</span> (MalformedURLException e) {  
        e.printStackTrace();  
    } <span class="hljs-keyword">catch</span> (IOException e) {  
        e.printStackTrace();  
    }  

    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  
}  


<span class="hljs-keyword">private</span> InputStream <span class="hljs-title function_">getInputStream</span><span class="hljs-params">(String urlString)</span> <span class="hljs-keyword">throws</span> MalformedURLException, IOException {
    <span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(urlString);
    URLConnection connection;
    connection = url.openConnection();
    connection.setUseCaches(<span class="hljs-literal">true</span>); 
    connection.connect();
    <span class="hljs-type">InputStream</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> connection.getInputStream();

    <span class="hljs-keyword">return</span> response;
}
}
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I have followed this Android Training and I think it does an excellent job at downloading images without blocking the main UI.  It also handles caching and dealing with scrolling through many images: <a href="http://developer.android.com/training/displaying-bitmaps/load-bitmap.html" rel="noreferrer">Loading Large Bitmaps Efficiently</a></p>

<p><img src="https://i.stack.imgur.com/zqoX2.jpg" width="350"></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>1.</strong>  <a href="http://square.github.io/picasso/" rel="noreferrer"><strong>Picasso</strong></a> allows for hassle-free image loading in your applicationoften in one line of code!</p>
<p><strong>Use Gradle:</strong></p>
<pre class="default s-code-block"><code class="hljs language-delphi"><span class="hljs-keyword">implementation</span> <span class="hljs-string">'com.squareup.picasso:picasso:(insert latest version)'</span>
</code></pre>
<p>Just one line of code!</p>
<pre class="default s-code-block"><code class="hljs language-csharp">Picasso.<span class="hljs-keyword">get</span>().load(<span class="hljs-string">"http://i.imgur.com/DvpvklR.png"</span>).<span class="hljs-keyword">into</span>(imageView);
</code></pre>
<p><strong>2.</strong> <a href="https://github.com/bumptech/glide" rel="noreferrer"><strong>Glide</strong></a> An image loading and caching library for Android focused on smooth scrolling</p>
<p><strong>Use Gradle:</strong></p>
<pre class="default s-code-block"><code class="hljs language-bash">repositories {
  mavenCentral() 
  google()
}

dependencies {
   implementation <span class="hljs-string">'com.github.bumptech.glide:glide:4.11.0'</span>
   annotationProcessor <span class="hljs-string">'com.github.bumptech.glide:compiler:4.11.0'</span>
}
</code></pre>
<p><strong>// For a simple view:</strong></p>
<pre class="default s-code-block"><code class="hljs language-csharp">  Glide.<span class="hljs-keyword">with</span>(<span class="hljs-keyword">this</span>).load(<span class="hljs-string">"http://i.imgur.com/DvpvklR.png"</span>).<span class="hljs-keyword">into</span>(imageView);
</code></pre>
<p><strong>3.</strong> <a href="https://github.com/facebook/fresco" rel="noreferrer"><strong>fresco</strong></a>  is a powerful system for displaying images in Android
applications.Fresco takes care of image loading and display, so you don't have
to.</p>
<p><a href="http://frescolib.org/docs/index.html" rel="noreferrer"><strong>Getting Started with Fresco</strong></a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I've written a tutorial that explains how to do lazy-loading of images in a listview. I go into some detail about the issues of recycling and concurrency. I also use a fixed thread pool to prevent spawning a lot of threads.</p>

<p><a href="http://negativeprobability.blogspot.com/2011/08/lazy-loading-of-images-in-listview.html" rel="noreferrer">Lazy loading of images in Listview Tutorial</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The way I do it is by launching a thread to download the images in the background and hand it a callback for each list item.  When an image is finished downloading it calls the callback which updates the view for the list item.  </p>

<p>This method doesn't work very well when you're recycling views however.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I just want to add one more good example, <em><a href="http://developer.android.com/resources/samples/XmlAdapters/index.html">XML Adapters</a></em>. As it's is used by Google and I am also using the same logic to avoid an OutOfMemory error. </p>

<p>Basically <a href="http://developer.android.com/resources/samples/XmlAdapters/src/com/example/android/xmladapters/ImageDownloader.html">this ImageDownloader</a> is your answer (as it covers most of your requirements). Some you can also implement in that.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is a common problem on Android that has been solved in many ways by many people.  In my opinion the best solution I've seen is the relatively new library called <a href="http://square.github.io/picasso/" rel="noreferrer" title="Picasso">Picasso</a>.  Here are the highlights:</p>

<ul>
<li>Open source, but headed up by <code>Jake Wharton</code> of <a href="http://actionbarsherlock.com/" rel="noreferrer" title="ActionBarSherlock">ActionBarSherlock</a> fame.</li>
<li>Asynchronously load images from network or app resources with one line of code</li>
<li>Automatic <code>ListView</code> detection</li>
<li>Automatic disk and memory caching</li>
<li>Can do custom transformations</li>
<li>Lots of configurable options</li>
<li>Super simple API</li>
<li>Frequently updated</li>
</ul>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I have been using NetworkImageView from the new Android Volley Library <code>com.android.volley.toolbox.NetworkImageView</code>, and it seems to be working pretty well. Apparently, this is the same view that is used in <a href="http://en.wikipedia.org/wiki/Google_Play">Google Play</a> and other new Google applications. Definitely worth checking out.</p>

<ul>
<li><p><a href="http://blogs.captechconsulting.com/blog/raymond-robinson/google-io-2013-volley-image-cache-tutorial">Google I/O 2013 volley image cache tutorial</a></p></li>
<li><p><a href="https://developers.google.com/events/io/sessions/325304728">Developers Google events</a></p></li>
</ul>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Well, image loading time from the Internet has many solutions. You may also use the library <a href="https://code.google.com/p/android-query/wiki/ImageLoading" rel="noreferrer">Android-Query</a>. It will give you all the required activity. Make sure what you want to do and read the library wiki page. And solve the image loading restriction.</p>

<p>This is my code:</p>

<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> View <span class="hljs-title function_">getView</span><span class="hljs-params">(<span class="hljs-type">int</span> position, View convertView, ViewGroup parent)</span> {
    <span class="hljs-type">View</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> convertView;
    <span class="hljs-keyword">if</span> (v == <span class="hljs-literal">null</span>) {
        <span class="hljs-type">LayoutInflater</span> <span class="hljs-variable">vi</span> <span class="hljs-operator">=</span> (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.row, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-type">ImageView</span> <span class="hljs-variable">imageview</span> <span class="hljs-operator">=</span> (ImageView) v.findViewById(R.id.icon);
    <span class="hljs-type">AQuery</span> <span class="hljs-variable">aq</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AQuery</span>(convertView);

    <span class="hljs-type">String</span> <span class="hljs-variable">imageUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">"http://www.vikispot.com/z/images/vikispot/android-w.png"</span>;

    aq.id(imageview).progress(<span class="hljs-built_in">this</span>).image(imageUrl, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BitmapAjaxCallback</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callback</span><span class="hljs-params">(String url, ImageView iv, Bitmap bm, AjaxStatus status)</span> {
            iv.setImageBitmap(bm);
        }
    ));

    <span class="hljs-keyword">return</span> v;
}
</code></pre>

<p>It should be solve your lazy loading problem.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I think this issue is very popular among Android developers, and there are plenty of such libraries that claims to resolve this issue, but only a few of them seems to be on the mark. <a href="http://code.google.com/p/android-query/" rel="noreferrer">AQuery</a> is one such library, but it is better than most of them in all aspects and is worth trying for.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You must try this Universal Loader is best.
I am using this after done many RnD on lazy loading .</p>

<p><a href="https://github.com/nostra13/Android-Universal-Image-Loader" rel="noreferrer">Universal Image Loader</a></p>

<p><strong>Features</strong></p>

<ul>
<li>Multithread image loading (async or sync)</li>
<li>Wide customization of ImageLoader's configuration (thread executors, downloader, decoder, memory and disk cache, display image options, etc.)</li>
<li>Many customization options for every display image call (stub images, caching switch, decoding options, Bitmap processing and displaying, etc.)</li>
<li>Image caching in memory and/or on disk (device's file system or SD card)</li>
<li>Listening loading process (including downloading progress)</li>
</ul>

<p>Android 2.0+ support</p>

<p><img src="https://i.stack.imgur.com/iFKcR.png" alt="enter image description here"></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Have a look at <a href="https://github.com/applidium/Shutterbug" rel="noreferrer">Shutterbug</a>, Applidium's lightweight SDWebImage (a nice library on iOS) port to Android.
It supports asynchronous caching, stores failed URLs, handles concurrency well, and helpful subclasses are included.</p>

<p>Pull requests (and bug reports) are welcome, too!</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="http://droidparts.org" rel="noreferrer">DroidParts</a> has <a href="https://github.com/yanchenko/droidparts/blob/master/droidparts/src/org/droidparts/net/image/ImageFetcher.java" rel="noreferrer">ImageFetcher</a> that requires zero configuration to get started.</p>

<ul>
<li>Uses a disk &amp; in-memory <a href="https://en.wikipedia.org/wiki/Cache_algorithms#Examples" rel="noreferrer">Least Recently Used</a> (LRU) cache.</li>
<li>Efficiently decodes images.</li>
<li>Supports modifying bitmaps in background thread.</li>
<li>Has simple cross-fade.</li>
<li>Has image loading progress callback.</li>
</ul>

<p>Clone <a href="https://github.com/yanchenko/droidparts/tree/master/droidparts-samples/DroidPartsGram" rel="noreferrer">DroidPartsGram</a> for an example:</p>

<p><img src="https://i.stack.imgur.com/DegXF.png" alt="Enter image description here"></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Novoda also has a great <a href="http://androidimageloader.com/">lazy image loading library</a> and many apps like Songkick, Podio, SecretDJ and ImageSearch use their library.</p>

<p>Their library is hosted <a href="https://github.com/novoda/ImageLoader">here</a> on Github and they have a pretty active <a href="https://github.com/novoda/ImageLoader/issues">issues tracker</a> as well. Their project seems to be pretty active too, with over 300+ commits at the time of writing this reply.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 21</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Just a quick tip for someone who is in indecision regarding what library to use for lazy-loading images:</p>

<p>There are four basic ways.</p>

<ol>
<li><p>DIY =&gt; Not the best solution but for a few images and if you want to go without the hassle of using others libraries</p></li>
<li><p>Volley's Lazy Loading library =&gt; From guys at android. It is nice and everything but is poorly documented and hence is a problem to use.</p></li>
<li><p>Picasso: A simple solution that just works, you can even specify the exact image size you want to bring in. It is very simple to use but might not be very "performant" for apps that has to deal with humongous amounts of images.</p></li>
<li><p>UIL: The best way to lazy load images. You can cache images(you need permission of course), initialize the loader once, then have your work done. The most mature asynchronous image loading library I have ever seen so far.</p></li>
</ol>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 22</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you want to display Shimmer layout like Facebook there is a official facebook library for that. <a href="http://facebook.github.io/shimmer-android/" rel="noreferrer">FaceBook Shimmer Android</a></p>

<p>It takes care of everything, You just need to put your desired design code in nested manner in shimmer frame.
Here is a sample code.</p>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">com.facebook.shimmer.ShimmerFrameLayout</span>
     <span class="hljs-attr">android:id</span>=<span class="hljs-string">@+id/shimmer_view_container</span>
     <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">wrap_content</span>
     <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
     <span class="hljs-attr">shimmer:duration</span>=<span class="hljs-string">"1000"</span>&gt;</span>

 <span class="hljs-tag">&lt;<span class="hljs-name">here</span> <span class="hljs-attr">will</span> <span class="hljs-attr">be</span> <span class="hljs-attr">your</span> <span class="hljs-attr">content</span> <span class="hljs-attr">to</span> <span class="hljs-attr">display</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">com.facebook.shimmer.ShimmerFrameLayout</span>&gt;</span>
</code></pre>

<p>And here is the java code for it.</p>

<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-type">ShimmerFrameLayout</span> <span class="hljs-variable">shimmerContainer</span> <span class="hljs-operator">=</span> (ShimmerFrameLayout) findViewById(R.id.shimmer_view_container);
shimmerContainer.startShimmerAnimation();
</code></pre>

<p>Add this dependency in your gradle file.</p>

<pre class="default s-code-block"><code class="hljs language-delphi"><span class="hljs-keyword">implementation</span> <span class="hljs-string">'com.facebook.shimmer:shimmer:0.1.0@aar'</span>
</code></pre>

<p>Here is how it looks like.<a href="https://i.stack.imgur.com/cP4QU.gif" rel="noreferrer"><img src="https://i.stack.imgur.com/cP4QU.gif" alt="Shimmer Android screenshot"></a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 23</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Check my fork of <a href="https://github.com/nicolasjafelle/LazyList" rel="noreferrer">LazyList</a>. Basically, I improve the LazyList by delaying the call of the ImageView and create two methods:</p>

<ol>
<li>When you need to put something like "Loading image..."</li>
<li>When you need to show the downloaded image.</li>
</ol>

<p>I also improved the ImageLoader by implementing a <a href="http://en.wikipedia.org/wiki/Singleton_pattern" rel="noreferrer">singleton</a> in this object.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 24</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>All above code have their own worth but with my personal experience just give a try with Picasso.</p>

<p><strong>Picasso</strong>  is a library specifically for this purpose, in-fact it will manage cache and all other network operations automatically.You will have to add library in your project and just write a single line of code to load image from remote URL.</p>

<p>Please visit here : <a href="http://code.tutsplus.com/tutorials/android-sdk-working-with-picasso--cms-22149" rel="noreferrer">http://code.tutsplus.com/tutorials/android-sdk-working-with-picasso--cms-22149</a> </p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 25</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Use the glide library. It worked for me and will work for your code too.It works for both images as well as gifs too. </p>

<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-title class_">ImageView</span> imageView = (<span class="hljs-title class_">ImageView</span>) <span class="hljs-title function_">findViewById</span>(R.<span class="hljs-property">id</span>.<span class="hljs-property">test_image</span>); 
    <span class="hljs-title class_">GlideDrawableImageViewTarget</span> imagePreview = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlideDrawableImageViewTarget</span>(imageView);
    <span class="hljs-title class_">Glide</span>
            .<span class="hljs-title function_">with</span>(<span class="hljs-variable language_">this</span>)
            .<span class="hljs-title function_">load</span>(url)
            .<span class="hljs-title function_">listener</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestListener</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">GlideDrawable</span>&gt;() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">onException</span>(<span class="hljs-params">Exception e, <span class="hljs-built_in">String</span> model, Target&lt;GlideDrawable&gt; target, <span class="hljs-built_in">boolean</span> isFirstResource</span>) {                       
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }

                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">onResourceReady</span>(<span class="hljs-params">GlideDrawable resource, <span class="hljs-built_in">String</span> model, Target&lt;GlideDrawable&gt; target, <span class="hljs-built_in">boolean</span> isFromMemoryCache, <span class="hljs-built_in">boolean</span> isFirstResource</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
            })
            .<span class="hljs-title function_">into</span>(imagePreview);
}
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 26</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I can recommend a different way that works like a charm: Android Query.</p>

<p>You can download that <a href="http://en.wikipedia.org/wiki/JAR_%28file_format%29" rel="noreferrer">JAR</a> file from <a href="http://code.google.com/p/android-query/downloads/list" rel="noreferrer">here</a></p>

<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-type">AQuery</span> <span class="hljs-variable">androidAQuery</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AQuery</span>(<span class="hljs-built_in">this</span>);
</code></pre>

<p>As an example:</p>

<pre class="default s-code-block"><code class="hljs language-sql">androidAQuery.id(YOUR IMAGEVIEW).image(YOUR IMAGE <span class="hljs-keyword">TO</span> LOAD, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, getDeviceWidth(), <span class="hljs-keyword">ANY</span> <span class="hljs-keyword">DEFAULT</span> IMAGE YOU WANT <span class="hljs-keyword">TO</span> <span class="hljs-keyword">SHOW</span>);
</code></pre>

<p>It's very fast and accurate, and using this you can find many more features like animation when loading, getting a bitmap (if needed), etc.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 27</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Give <a href="https://code.google.com/p/android-query/wiki/ImageLoading" rel="noreferrer">Aquery</a> a try. It has amazingly simple methods to load and cache images asynchronously.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 28</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="https://github.com/koush/UrlImageViewHelper" rel="noreferrer">URLImageViewHelper</a> is an amazing library that helps you to do that. </p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 29</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageDownloader</span> {

Map&lt;String, Bitmap&gt; imageCache;

<span class="hljs-keyword">public</span> <span class="hljs-title function_">ImageDownloader</span><span class="hljs-params">()</span> {
    imageCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Bitmap&gt;();

}

<span class="hljs-comment">// download function</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">download</span><span class="hljs-params">(String url, ImageView imageView)</span> {
    <span class="hljs-keyword">if</span> (cancelPotentialDownload(url, imageView)) {

        <span class="hljs-comment">// Caching code right here</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">filename</span> <span class="hljs-operator">=</span> String.valueOf(url.hashCode());
        <span class="hljs-type">File</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(getCacheDirectory(imageView.getContext()),
                filename);

        <span class="hljs-comment">// Is the bitmap in our memory cache?</span>
        <span class="hljs-type">Bitmap</span> <span class="hljs-variable">bitmap</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

        bitmap = (Bitmap) imageCache.get(f.getPath());

        <span class="hljs-keyword">if</span> (bitmap == <span class="hljs-literal">null</span>) {

            bitmap = BitmapFactory.decodeFile(f.getPath());

            <span class="hljs-keyword">if</span> (bitmap != <span class="hljs-literal">null</span>) {
                imageCache.put(f.getPath(), bitmap);
            }

        }
        <span class="hljs-comment">// No? download it</span>
        <span class="hljs-keyword">if</span> (bitmap == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">BitmapDownloaderTask</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BitmapDownloaderTask</span>(
                        imageView);
                <span class="hljs-type">DownloadedDrawable</span> <span class="hljs-variable">downloadedDrawable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DownloadedDrawable</span>(
                        task);
                imageView.setImageDrawable(downloadedDrawable);
                task.execute(url);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                Log.e(<span class="hljs-string">"Error==&gt;"</span>, e.toString());
            }

        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Yes? set the image</span>
            imageView.setImageBitmap(bitmap);
        }
    }
}

<span class="hljs-comment">// cancel a download (internal only)</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">cancelPotentialDownload</span><span class="hljs-params">(String url,
        ImageView imageView)</span> {
    <span class="hljs-type">BitmapDownloaderTask</span> <span class="hljs-variable">bitmapDownloaderTask</span> <span class="hljs-operator">=</span> getBitmapDownloaderTask(imageView);

    <span class="hljs-keyword">if</span> (bitmapDownloaderTask != <span class="hljs-literal">null</span>) {
        <span class="hljs-type">String</span> <span class="hljs-variable">bitmapUrl</span> <span class="hljs-operator">=</span> bitmapDownloaderTask.url;
        <span class="hljs-keyword">if</span> ((bitmapUrl == <span class="hljs-literal">null</span>) || (!bitmapUrl.equals(url))) {
            bitmapDownloaderTask.cancel(<span class="hljs-literal">true</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// The same URL is already being downloaded.</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-comment">// gets an existing download if one exists for the imageview</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> BitmapDownloaderTask <span class="hljs-title function_">getBitmapDownloaderTask</span><span class="hljs-params">(
        ImageView imageView)</span> {
    <span class="hljs-keyword">if</span> (imageView != <span class="hljs-literal">null</span>) {
        <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> imageView.getDrawable();
        <span class="hljs-keyword">if</span> (drawable <span class="hljs-keyword">instanceof</span> DownloadedDrawable) {
            <span class="hljs-type">DownloadedDrawable</span> <span class="hljs-variable">downloadedDrawable</span> <span class="hljs-operator">=</span> (DownloadedDrawable) drawable;
            <span class="hljs-keyword">return</span> downloadedDrawable.getBitmapDownloaderTask();
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}

<span class="hljs-comment">// our caching functions</span>
<span class="hljs-comment">// Find the dir to save cached images</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> File <span class="hljs-title function_">getCacheDirectory</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sdState</span> <span class="hljs-operator">=</span> android.os.Environment.getExternalStorageState();
    File cacheDir;

    <span class="hljs-keyword">if</span> (sdState.equals(android.os.Environment.MEDIA_MOUNTED)) {
        <span class="hljs-type">File</span> <span class="hljs-variable">sdDir</span> <span class="hljs-operator">=</span> android.os.Environment.getExternalStorageDirectory();

        <span class="hljs-comment">// TODO : Change your diretcory here</span>
        cacheDir = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(sdDir, <span class="hljs-string">"data/ToDo/images"</span>);
    } <span class="hljs-keyword">else</span>
        cacheDir = context.getCacheDir();

    <span class="hljs-keyword">if</span> (!cacheDir.exists())
        cacheDir.mkdirs();
    <span class="hljs-keyword">return</span> cacheDir;
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeFile</span><span class="hljs-params">(Bitmap bmp, File f)</span> {
    <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">try</span> {
        out = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(f);
        bmp.compress(Bitmap.CompressFormat.PNG, <span class="hljs-number">80</span>, out);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        e.printStackTrace();
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (out != <span class="hljs-literal">null</span>)
                out.close();
        } <span class="hljs-keyword">catch</span> (Exception ex) {
        }
    }
}

<span class="hljs-comment">// download asynctask</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BitmapDownloaderTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncTask</span>&lt;String, Void, Bitmap&gt; {
    <span class="hljs-keyword">private</span> String url;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> WeakReference&lt;ImageView&gt; imageViewReference;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BitmapDownloaderTask</span><span class="hljs-params">(ImageView imageView)</span> {
        imageViewReference = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;ImageView&gt;(imageView);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-comment">// Actual download method, run in the task thread</span>
    <span class="hljs-keyword">protected</span> Bitmap <span class="hljs-title function_">doInBackground</span><span class="hljs-params">(String... params)</span> {
        <span class="hljs-comment">// params comes from the execute() call: params[0] is the url.</span>
        url = (String) params[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">return</span> downloadBitmap(params[<span class="hljs-number">0</span>]);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-comment">// Once the image is downloaded, associates it to the imageView</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPostExecute</span><span class="hljs-params">(Bitmap bitmap)</span> {
        <span class="hljs-keyword">if</span> (isCancelled()) {
            bitmap = <span class="hljs-literal">null</span>;
        }

        <span class="hljs-keyword">if</span> (imageViewReference != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">ImageView</span> <span class="hljs-variable">imageView</span> <span class="hljs-operator">=</span> imageViewReference.get();
            <span class="hljs-type">BitmapDownloaderTask</span> <span class="hljs-variable">bitmapDownloaderTask</span> <span class="hljs-operator">=</span> getBitmapDownloaderTask(imageView);
            <span class="hljs-comment">// Change bitmap only if this process is still associated with</span>
            <span class="hljs-comment">// it</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == bitmapDownloaderTask) {
                imageView.setImageBitmap(bitmap);

                <span class="hljs-comment">// cache the image</span>

                <span class="hljs-type">String</span> <span class="hljs-variable">filename</span> <span class="hljs-operator">=</span> String.valueOf(url.hashCode());
                <span class="hljs-type">File</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(
                        getCacheDirectory(imageView.getContext()), filename);

                imageCache.put(f.getPath(), bitmap);

                writeFile(bitmap, f);
            }
        }
    }

}

<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadedDrawable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ColorDrawable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> WeakReference&lt;BitmapDownloaderTask&gt; bitmapDownloaderTaskReference;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DownloadedDrawable</span><span class="hljs-params">(BitmapDownloaderTask bitmapDownloaderTask)</span> {
        <span class="hljs-built_in">super</span>(Color.WHITE);
        bitmapDownloaderTaskReference = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakReference</span>&lt;BitmapDownloaderTask&gt;(
                bitmapDownloaderTask);
    }

    <span class="hljs-keyword">public</span> BitmapDownloaderTask <span class="hljs-title function_">getBitmapDownloaderTask</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> bitmapDownloaderTaskReference.get();
    }
}

<span class="hljs-comment">// the actual download code</span>
<span class="hljs-keyword">static</span> Bitmap <span class="hljs-title function_">downloadBitmap</span><span class="hljs-params">(String url)</span> {
    <span class="hljs-type">HttpParams</span> <span class="hljs-variable">params</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BasicHttpParams</span>();
    params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION,
            HttpVersion.HTTP_1_1);
    <span class="hljs-type">HttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultHttpClient</span>(params);
    <span class="hljs-keyword">final</span> <span class="hljs-type">HttpGet</span> <span class="hljs-variable">getRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpGet</span>(url);

    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">HttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.execute(getRequest);
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> response.getStatusLine().getStatusCode();
        <span class="hljs-keyword">if</span> (statusCode != HttpStatus.SC_OK) {
            Log.w(<span class="hljs-string">"ImageDownloader"</span>, <span class="hljs-string">"Error "</span> + statusCode
                    + <span class="hljs-string">" while retrieving bitmap from "</span> + url);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }

        <span class="hljs-keyword">final</span> <span class="hljs-type">HttpEntity</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> response.getEntity();
        <span class="hljs-keyword">if</span> (entity != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">try</span> {
                inputStream = entity.getContent();
                <span class="hljs-keyword">final</span> <span class="hljs-type">Bitmap</span> <span class="hljs-variable">bitmap</span> <span class="hljs-operator">=</span> BitmapFactory
                        .decodeStream(inputStream);
                <span class="hljs-keyword">return</span> bitmap;
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-keyword">if</span> (inputStream != <span class="hljs-literal">null</span>) {
                    inputStream.close();
                }
                entity.consumeContent();
            }
        }
    } <span class="hljs-keyword">catch</span> (Exception e) {
        <span class="hljs-comment">// Could provide a more explicit error message for IOException or</span>
        <span class="hljs-comment">// IllegalStateException</span>
        getRequest.abort();
        Log.w(<span class="hljs-string">"ImageDownloader"</span>, <span class="hljs-string">"Error while retrieving bitmap from "</span>
                + url + e.toString());
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-keyword">if</span> (client != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// client.close();</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
 }
}
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 30</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I had this issue and implemented lruCache. I believe you need API 12 and above or use the compatiblity v4 library. lurCache is fast memory, but it also has a budget, so if you're worried about that you can use a diskcache... It's all described in <em><a href="http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html" rel="noreferrer">Caching Bitmaps</a></em>.</p>

<p>I'll now provide my implementation which is a <a href="http://en.wikipedia.org/wiki/Singleton_pattern" rel="noreferrer">singleton</a> I call from anywhere like this:</p>

<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-comment">//Where the first is a string and the other is a imageview to load.</span>

DownloadImageTask<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.loadBitmap</span>(avatarURL, iv_avatar);
</code></pre>

<p>Here's the ideal code to cache and then call the above in getView of an adapter when retrieving the web image:</p>

<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadImageTask</span> {

    <span class="hljs-keyword">private</span> LruCache&lt;String, Bitmap&gt; mMemoryCache;

    <span class="hljs-comment">/* Create a singleton class to call this from multiple classes */</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">DownloadImageTask</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DownloadImageTask <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
            instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DownloadImageTask</span>();
        }
        <span class="hljs-keyword">return</span> instance;
    }

    <span class="hljs-comment">//Lock the constructor from public instances</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">DownloadImageTask</span><span class="hljs-params">()</span> {

        <span class="hljs-comment">// Get max available VM memory, exceeding this amount will throw an</span>
        <span class="hljs-comment">// OutOfMemory exception. Stored in kilobytes as LruCache takes an</span>
        <span class="hljs-comment">// int in its constructor.</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">maxMemory</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (Runtime.getRuntime().maxMemory() / <span class="hljs-number">1024</span>);

        <span class="hljs-comment">// Use 1/8th of the available memory for this memory cache.</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">cacheSize</span> <span class="hljs-operator">=</span> maxMemory / <span class="hljs-number">8</span>;

        mMemoryCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LruCache</span>&lt;String, Bitmap&gt;(cacheSize) {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sizeOf</span><span class="hljs-params">(String key, Bitmap bitmap)</span> {
                <span class="hljs-comment">// The cache size will be measured in kilobytes rather than</span>
                <span class="hljs-comment">// number of items.</span>
                <span class="hljs-keyword">return</span> bitmap.getByteCount() / <span class="hljs-number">1024</span>;
            }
        };
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadBitmap</span><span class="hljs-params">(String avatarURL, ImageView imageView)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">imageKey</span> <span class="hljs-operator">=</span> String.valueOf(avatarURL);

        <span class="hljs-keyword">final</span> <span class="hljs-type">Bitmap</span> <span class="hljs-variable">bitmap</span> <span class="hljs-operator">=</span> getBitmapFromMemCache(imageKey);
        <span class="hljs-keyword">if</span> (bitmap != <span class="hljs-literal">null</span>) {
            imageView.setImageBitmap(bitmap);
        } <span class="hljs-keyword">else</span> {
            imageView.setImageResource(R.drawable.ic_launcher);

            <span class="hljs-keyword">new</span> <span class="hljs-title class_">DownloadImageTaskViaWeb</span>(imageView).execute(avatarURL);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addBitmapToMemoryCache</span><span class="hljs-params">(String key, Bitmap bitmap)</span> {
        <span class="hljs-keyword">if</span> (getBitmapFromMemCache(key) == <span class="hljs-literal">null</span>) {
            mMemoryCache.put(key, bitmap);
        }
    }

    <span class="hljs-keyword">private</span> Bitmap <span class="hljs-title function_">getBitmapFromMemCache</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> mMemoryCache.get(key);
    }

    <span class="hljs-comment">/* A background process that opens a http stream and decodes a web image. */</span>

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadImageTaskViaWeb</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncTask</span>&lt;String, Void, Bitmap&gt; {
        ImageView bmImage;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">DownloadImageTaskViaWeb</span><span class="hljs-params">(ImageView bmImage)</span> {
            <span class="hljs-built_in">this</span>.bmImage = bmImage;
        }

        <span class="hljs-keyword">protected</span> Bitmap <span class="hljs-title function_">doInBackground</span><span class="hljs-params">(String... urls)</span> {

            <span class="hljs-type">String</span> <span class="hljs-variable">urldisplay</span> <span class="hljs-operator">=</span> urls[<span class="hljs-number">0</span>];
            <span class="hljs-type">Bitmap</span> <span class="hljs-variable">mIcon</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.net.URL(urldisplay).openStream();
                mIcon = BitmapFactory.decodeStream(in);

            } 
            <span class="hljs-keyword">catch</span> (Exception e) {
                Log.e(<span class="hljs-string">"Error"</span>, e.getMessage());
                e.printStackTrace();
            }

            addBitmapToMemoryCache(String.valueOf(urldisplay), mIcon);

            <span class="hljs-keyword">return</span> mIcon;
        }

        <span class="hljs-comment">/* After decoding we update the view on the main UI. */</span>
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPostExecute</span><span class="hljs-params">(Bitmap result)</span> {
            bmImage.setImageBitmap(result);
        }
    }
}
</code></pre>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;Here\u0026apos;s what I created to hold the images that my app is currently displaying. Please note that the \u0026quot;Log\u0026quot; object in use here is my custom wrapper around the final Log class inside Android.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; com.wilson.android.library;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n Licensed to the Apache Software Foundation (ASF) under one or more\ncontributor license agreements.  See the NOTICE file\ndistributed with this work for additional information\nregarding copyright ownership.  The ASF licenses this file\nto you under the Apache License, Version 2.0 (the\n\u0026quot;License\u0026quot;); you may not use this file except in compliance\nwith the License.  You may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing,\nsoftware distributed under the License is distributed on an\n\u0026quot;AS IS\u0026quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, either express or implied.  See the License for the\nspecific language governing permissions and limitations\nunder the License.\n*/\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.IOException;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DrawableManager\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, Drawable\u0026amp;gt; drawableMap;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;DrawableManager\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        drawableMap = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HashMap\u0026lt;/span\u0026gt;\u0026amp;lt;String, Drawable\u0026amp;gt;();\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; Drawable \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fetchDrawable\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String urlString)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (drawableMap.containsKey(urlString)) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; drawableMap.get(urlString);\n        }\n\n        Log.d(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.getClass().getSimpleName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;image url:\u0026quot;\u0026lt;/span\u0026gt; + urlString);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fetch(urlString);\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Drawable.createFromStream(is, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;src\u0026quot;\u0026lt;/span\u0026gt;);\n\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (drawable != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n                drawableMap.put(urlString, drawable);\n                Log.d(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.getClass().getSimpleName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;got a thumbnail drawable: \u0026quot;\u0026lt;/span\u0026gt; + drawable.getBounds() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;, \u0026quot;\u0026lt;/span\u0026gt;\n                        + drawable.getIntrinsicHeight() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt; + drawable.getIntrinsicWidth() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;, \u0026quot;\u0026lt;/span\u0026gt;\n                        + drawable.getMinimumHeight() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt; + drawable.getMinimumWidth());\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n              Log.w(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.getClass().getSimpleName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;could not get thumbnail\u0026quot;\u0026lt;/span\u0026gt;);\n            }\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; drawable;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (MalformedURLException e) {\n            Log.e(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.getClass().getSimpleName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fetchDrawable failed\u0026quot;\u0026lt;/span\u0026gt;, e);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (IOException e) {\n            Log.e(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.getClass().getSimpleName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fetchDrawable failed\u0026quot;\u0026lt;/span\u0026gt;, e);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fetchDrawableOnThread\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String urlString, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; ImageView imageView)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (drawableMap.containsKey(urlString)) {\n            imageView.setImageDrawable(drawableMap.get(urlString));\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Handler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;handler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Handler\u0026lt;/span\u0026gt;(Looper.getMainLooper()) {\n            \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;handleMessage\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Message message)\u0026lt;/span\u0026gt; {\n                imageView.setImageDrawable((Drawable) message.obj);\n            }\n        };\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;thread\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt;() {\n            \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//TODO : set imageView to a \u0026quot;pending\u0026quot; image\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fetchDrawable(urlString);\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; handler.obtainMessage(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, drawable);\n                handler.sendMessage(message);\n            }\n        };\n        thread.start();\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; InputStream \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fetch\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String urlString)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; MalformedURLException, IOException {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DefaultHttpClient\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;httpClient\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DefaultHttpClient\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpGet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpGet\u0026lt;/span\u0026gt;(urlString);\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpResponse\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; httpClient.execute(request);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; response.getEntity().getContent();\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I made \u0026lt;a href=\u0026quot;https://github.com/thest1/LazyList\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;a simple demo of a lazy list\u0026lt;/a\u0026gt; (located at GitHub) with images. \u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Basic Usage \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-vhdl\u0026quot;\u0026gt;ImageLoader imageLoader=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; ImageLoader(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;context\u0026lt;/span\u0026gt;); ...\nimageLoader.DisplayImage(url, imageView); \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;Don\u0026apos;t forget to add the\n  following permissions to your AndroidManifest.xml:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;uses-permission\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.INTERNET\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;uses-permission\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.WRITE_EXTERNAL_STORAGE\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\u0026lt;/span\u0026gt; Please\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;create only one instance of ImageLoader and reuse it all around your\n  application. This way image caching will be much more efficient.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;It may be helpful to somebody. It downloads images in the background thread. Images are being cached on an SD card and in memory. The cache implementation is very simple and is just enough for the demo. I decode images with inSampleSize to reduce memory consumption. I also try to handle recycled views correctly.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/1NvdB.png\u0026quot; alt=\u0026quot;Alt text\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I recommend open source instrument \u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/nostra13/Android-Universal-Image-Loader\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Universal Image Loader\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;. It is originally based on Fedor Vlasov\u0026apos;s project \u0026lt;strong\u0026gt;LazyList\u0026lt;/strong\u0026gt; and has been vastly improved since then.\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Multithread image loading\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Possibility of wide tuning ImageLoader\u0026apos;s configuration (thread executors, downloader, decoder, memory and disc cache, display image options, and others)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Possibility of image caching in memory and/or on the device\u0026apos;s file system (or SD card)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Possibility to \u0026quot;listen\u0026quot; loading process\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Possibility to customize every display image call with separated options\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Widget support\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Android 2.0+ support\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/nostra13/Android-Universal-Image-Loader\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/QzOIL.png\u0026quot; alt=\u0026quot;\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Multithreading For Performance\u0026lt;/a\u0026gt;, a tutorial by Gilles Debunne.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is from the Android Developers Blog. The suggested code uses:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;AsyncTasks\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;A hard, limited size, \u0026lt;code\u0026gt;FIFO cache\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;A soft, easily \u0026lt;code\u0026gt;garbage collect\u0026lt;/code\u0026gt;-ed cache.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;A \u0026lt;em\u0026gt;placeholder\u0026lt;/em\u0026gt; \u0026lt;code\u0026gt;Drawable\u0026lt;/code\u0026gt; while you download.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/xdEVJ.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Update: Note that this answer is pretty ineffective now. The Garbage Collector acts aggressively on SoftReference and WeakReference, so this code is NOT suitable for new apps.\u0026lt;/strong\u0026gt;  (Instead, try libraries like \u0026lt;a href=\u0026quot;https://github.com/nostra13/Android-Universal-Image-Loader\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Universal Image Loader\u0026lt;/a\u0026gt; suggested in other answers.)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Thanks to James for the code, and Bao-Long for the suggestion of using SoftReference. I implemented the SoftReference changes on James\u0026apos; code. Unfortunately, SoftReferences caused my images to be garbage collected too quickly. In my case, it was fine without the SoftReference stuff, because my list size is limited and my images are small.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;There\u0026apos;s a discussion from a year ago regarding the SoftReferences on google groups: \u0026lt;a href=\u0026quot;http://groups.google.com/group/android-developers/browse_thread/thread/ebabb0dadf38acc1\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;link to thread\u0026lt;/a\u0026gt;. As a solution to the too-early garbage collection, they suggest the possibility of manually setting the VM heap size using dalvik.system.VMRuntime.setMinimumHeapSize(), which is not very attractive to me.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;DrawableManager\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n    drawableMap = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HashMap\u0026lt;/span\u0026gt;\u0026amp;lt;String, SoftReference\u0026amp;lt;Drawable\u0026amp;gt;\u0026amp;gt;();\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; Drawable \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fetchDrawable\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String urlString)\u0026lt;/span\u0026gt; {\n    SoftReference\u0026amp;lt;Drawable\u0026amp;gt; drawableRef = drawableMap.get(urlString);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (drawableRef != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; drawableRef.get();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (drawable != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; drawable;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Reference has expired so remove the key from drawableMap\u0026lt;/span\u0026gt;\n        drawableMap.remove(urlString);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (Constants.LOGGING) Log.d(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.getClass().getSimpleName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;image url:\u0026quot;\u0026lt;/span\u0026gt; + urlString);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fetch(urlString);\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Drawable.createFromStream(is, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;src\u0026quot;\u0026lt;/span\u0026gt;);\n        drawableRef = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SoftReference\u0026lt;/span\u0026gt;\u0026amp;lt;Drawable\u0026amp;gt;(drawable);\n        drawableMap.put(urlString, drawableRef);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (Constants.LOGGING) Log.d(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.getClass().getSimpleName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;got a thumbnail drawable: \u0026quot;\u0026lt;/span\u0026gt; + drawable.getBounds() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;, \u0026quot;\u0026lt;/span\u0026gt;\n                + drawable.getIntrinsicHeight() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt; + drawable.getIntrinsicWidth() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;, \u0026quot;\u0026lt;/span\u0026gt;\n                + drawable.getMinimumHeight() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt; + drawable.getMinimumWidth());\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; drawableRef.get();\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (MalformedURLException e) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (Constants.LOGGING) Log.e(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.getClass().getSimpleName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fetchDrawable failed\u0026quot;\u0026lt;/span\u0026gt;, e);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (IOException e) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (Constants.LOGGING) Log.e(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.getClass().getSimpleName(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fetchDrawable failed\u0026quot;\u0026lt;/span\u0026gt;, e);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fetchDrawableOnThread\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String urlString, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; ImageView imageView)\u0026lt;/span\u0026gt; {\n    SoftReference\u0026amp;lt;Drawable\u0026amp;gt; drawableRef = drawableMap.get(urlString);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (drawableRef != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; drawableRef.get();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (drawable != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            imageView.setImageDrawable(drawableRef.get());\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n        }\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Reference has expired so remove the key from drawableMap\u0026lt;/span\u0026gt;\n        drawableMap.remove(urlString);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Handler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;handler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Handler\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;handleMessage\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Message message)\u0026lt;/span\u0026gt; {\n            imageView.setImageDrawable((Drawable) message.obj);\n        }\n    };\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;thread\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//TODO : set imageView to a \u0026quot;pending\u0026quot; image\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; fetchDrawable(urlString);\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; handler.obtainMessage(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, drawable);\n            handler.sendMessage(message);\n        }\n    };\n    thread.start();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Picasso\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Use Jake Wharton\u0026apos;s  Picasso Library.\n(A Perfect ImageLoading Library from the developer of ActionBarSherlock)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;A powerful image downloading and caching library for Android.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Images add much-needed context and visual flair to Android applications. Picasso allows for hassle-free image loading in your applicationoften in one line of code!\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;Picasso.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt;(context).load(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://i.imgur.com/DvpvklR.png\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt;(imageView);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Many common pitfalls of image loading on Android are handled automatically by Picasso:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Handling ImageView recycling and download cancellation in an adapter.\nComplex image transformations with minimal memory use.\nAutomatic memory and disk caching.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://square.github.io/picasso/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Picasso Jake Wharton\u0026apos;s Library\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Glide\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Glide is a fast and efficient open-source media management framework for Android that wraps media decoding, memory and disk caching, and resource pooling into a simple and easy-to-use interface.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Glide supports fetching, decoding, and displaying video stills, images, and animated GIFs. Glide includes a flexible API that allows developers to plug into almost any network stack. By default, Glide uses a custom HttpUrlConnection based stack but also includes utility libraries plug-in to Google\u0026apos;s Volley project or Square\u0026apos;s OkHttp library instead.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;Glide.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;).load(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;your-url-here\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt;(imageView);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Glide\u0026apos;s primary focus is on making scrolling any kind of a list of images as smooth and fast as possible, but Glide is also effective for almost any case where you need to fetch, resize, and display a remote image.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/bumptech/glide\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Glide Image Loading Library\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Fresco by Facebook\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Fresco is a powerful system for displaying images in Android applications.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Fresco takes care of image loading and display, so you don\u0026apos;t have to. It will load images from the network, local storage, or local resources, and display a placeholder until the image has arrived. It has two levels of cache; one in memory and another in internal storage.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/facebook/fresco\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Fresco Github\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In Android 4.x and lower, Fresco puts images in a special region of Android memory. This lets your application run faster - and suffer the dreaded OutOfMemoryError much less often.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://frescolib.org/docs/index.html#_\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Fresco Documentation\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;High-performance loader - after examining the methods suggested here,\nI used \u0026lt;a href=\u0026quot;http://negativeprobability.blogspot.com/2011/08/lazy-loading-of-images-in-listview.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Ben\u0026apos;s solution\u0026lt;/a\u0026gt; with some changes -\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;I realized that working with drawable is faster than with bitmaps so I uses drawable instead\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Using SoftReference is great, but it makes the cached image to be deleted too often, so I added a Linked list that holds images references, preventing the image to be deleted, until it reached a predefined size\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;To open the InputStream I used java.net.URLConnection which allows me to use web cache (you need to set a response cache first, but that\u0026apos;s another story)\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;My code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Map; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.HashMap; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.LinkedList; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Collections; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.WeakHashMap; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.lang.ref.SoftReference; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.concurrent.Executors; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.concurrent.ExecutorService; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.graphics.drawable.Drawable;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.widget.ImageView;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.os.Handler;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.os.Message;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.InputStream;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.MalformedURLException; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.IOException; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.URL;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.URLConnection;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DrawableBackgroundDownloader\u0026lt;/span\u0026gt; {    \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, SoftReference\u0026amp;lt;Drawable\u0026amp;gt;\u0026amp;gt; mCache = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HashMap\u0026lt;/span\u0026gt;\u0026amp;lt;String, SoftReference\u0026amp;lt;Drawable\u0026amp;gt;\u0026amp;gt;();   \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; LinkedList \u0026amp;lt;Drawable\u0026amp;gt; mChacheController = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;LinkedList\u0026lt;/span\u0026gt; \u0026amp;lt;Drawable\u0026amp;gt; ();\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; ExecutorService mThreadPool;  \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;ImageView, String\u0026amp;gt; mImageViews = Collections.synchronizedMap(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;WeakHashMap\u0026lt;/span\u0026gt;\u0026amp;lt;ImageView, String\u0026amp;gt;());  \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;MAX_CACHE_SIZE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;THREAD_POOL_SIZE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n * Constructor\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;DrawableBackgroundDownloader\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {  \n    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);  \n}  \n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n * Clears all instance data and stops running threads\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Reset\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ExecutorService\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;oldThreadPool\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; mThreadPool;\n    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);\n    oldThreadPool.shutdownNow();\n\n    mChacheController.clear();\n    mCache.clear();\n    mImageViews.clear();\n}  \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;loadDrawable\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; ImageView imageView,Drawable placeholder)\u0026lt;/span\u0026gt; {  \n    mImageViews.put(imageView, url);  \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getDrawableFromCache(url);  \n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// check in UI thread, so no concurrency issues  \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (drawable != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {  \n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Log.d(null, \u0026quot;Item loaded from mCache: \u0026quot; + url);  \u0026lt;/span\u0026gt;\n        imageView.setImageDrawable(drawable);  \n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {  \n        imageView.setImageDrawable(placeholder);  \n        queueJob(url, imageView, placeholder);  \n    }  \n} \n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Drawable \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getDrawableFromCache\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url)\u0026lt;/span\u0026gt; {  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (mCache.containsKey(url)) {  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; mCache.get(url).get();  \n    }  \n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;  \n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;synchronized\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putDrawableInCache\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url,Drawable drawable)\u0026lt;/span\u0026gt; {  \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;chacheControllerSize\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; mChacheController.size();\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (chacheControllerSize \u0026amp;gt; MAX_CACHE_SIZE) \n        mChacheController.subList(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, MAX_CACHE_SIZE/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;).clear();\n\n    mChacheController.addLast(drawable);\n    mCache.put(url, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SoftReference\u0026lt;/span\u0026gt;\u0026amp;lt;Drawable\u0026amp;gt;(drawable));\n\n}  \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;queueJob\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; ImageView imageView,\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Drawable placeholder)\u0026lt;/span\u0026gt; {  \n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Create handler in UI thread. */\u0026lt;/span\u0026gt;  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Handler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;handler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Handler\u0026lt;/span\u0026gt;() {  \n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;handleMessage\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Message msg)\u0026lt;/span\u0026gt; {  \n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;tag\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; mImageViews.get(imageView);  \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (tag != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; tag.equals(url)) {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (imageView.isShown())\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (msg.obj != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n                        imageView.setImageDrawable((Drawable) msg.obj);  \n                    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {  \n                        imageView.setImageDrawable(placeholder);  \n                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Log.d(null, \u0026quot;fail \u0026quot; + url);  \u0026lt;/span\u0026gt;\n                    } \n            }  \n        }  \n    };  \n\n    mThreadPool.submit(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Runnable\u0026lt;/span\u0026gt;() {  \n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {  \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;bmp\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; downloadDrawable(url);\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// if the view is not visible anymore, the image will be ready for next time in cache\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (imageView.isShown())\n            {\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;message\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Message.obtain();  \n                message.obj = bmp;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Log.d(null, \u0026quot;Item downloaded: \u0026quot; + url);  \u0026lt;/span\u0026gt;\n\n                handler.sendMessage(message);\n            }\n        }  \n    });  \n}  \n\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Drawable \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;downloadDrawable\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url)\u0026lt;/span\u0026gt; {  \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {  \n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getInputStream(url);\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Drawable.createFromStream(is, url);\n        putDrawableInCache(url,drawable);  \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; drawable;  \n\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (MalformedURLException e) {  \n        e.printStackTrace();  \n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (IOException e) {  \n        e.printStackTrace();  \n    }  \n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;  \n}  \n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; InputStream \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getInputStream\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String urlString)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; MalformedURLException, IOException {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(urlString);\n    URLConnection connection;\n    connection = url.openConnection();\n    connection.setUseCaches(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;); \n    connection.connect();\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getInputStream();\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; response;\n}\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I have followed this Android Training and I think it does an excellent job at downloading images without blocking the main UI.  It also handles caching and dealing with scrolling through many images: \u0026lt;a href=\u0026quot;http://developer.android.com/training/displaying-bitmaps/load-bitmap.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Loading Large Bitmaps Efficiently\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/zqoX2.jpg\u0026quot; width=\u0026quot;350\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;1.\u0026lt;/strong\u0026gt;  \u0026lt;a href=\u0026quot;http://square.github.io/picasso/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;Picasso\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt; allows for hassle-free image loading in your applicationoften in one line of code!\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Use Gradle:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-delphi\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;implementation\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;com.squareup.picasso:picasso:(insert latest version)\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Just one line of code!\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;Picasso.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;().load(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://i.imgur.com/DvpvklR.png\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt;(imageView);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;2.\u0026lt;/strong\u0026gt; \u0026lt;a href=\u0026quot;https://github.com/bumptech/glide\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;Glide\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt; An image loading and caching library for Android focused on smooth scrolling\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Use Gradle:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;repositories {\n  mavenCentral() \n  google()\n}\n\ndependencies {\n   implementation \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;com.github.bumptech.glide:glide:4.11.0\u0026apos;\u0026lt;/span\u0026gt;\n   annotationProcessor \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;com.github.bumptech.glide:compiler:4.11.0\u0026apos;\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;// For a simple view:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;  Glide.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;).load(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://i.imgur.com/DvpvklR.png\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt;(imageView);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;3.\u0026lt;/strong\u0026gt; \u0026lt;a href=\u0026quot;https://github.com/facebook/fresco\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;fresco\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt;  is a powerful system for displaying images in Android\napplications.Fresco takes care of image loading and display, so you don\u0026apos;t have\nto.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://frescolib.org/docs/index.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;Getting Started with Fresco\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;ve written a tutorial that explains how to do lazy-loading of images in a listview. I go into some detail about the issues of recycling and concurrency. I also use a fixed thread pool to prevent spawning a lot of threads.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://negativeprobability.blogspot.com/2011/08/lazy-loading-of-images-in-listview.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Lazy loading of images in Listview Tutorial\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The way I do it is by launching a thread to download the images in the background and hand it a callback for each list item.  When an image is finished downloading it calls the callback which updates the view for the list item.  \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This method doesn\u0026apos;t work very well when you\u0026apos;re recycling views however.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I just want to add one more good example, \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;http://developer.android.com/resources/samples/XmlAdapters/index.html\u0026quot;\u0026gt;XML Adapters\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;. As it\u0026apos;s is used by Google and I am also using the same logic to avoid an OutOfMemory error. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Basically \u0026lt;a href=\u0026quot;http://developer.android.com/resources/samples/XmlAdapters/src/com/example/android/xmladapters/ImageDownloader.html\u0026quot;\u0026gt;this ImageDownloader\u0026lt;/a\u0026gt; is your answer (as it covers most of your requirements). Some you can also implement in that.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is a common problem on Android that has been solved in many ways by many people.  In my opinion the best solution I\u0026apos;ve seen is the relatively new library called \u0026lt;a href=\u0026quot;http://square.github.io/picasso/\u0026quot; rel=\u0026quot;noreferrer\u0026quot; title=\u0026quot;Picasso\u0026quot;\u0026gt;Picasso\u0026lt;/a\u0026gt;.  Here are the highlights:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Open source, but headed up by \u0026lt;code\u0026gt;Jake Wharton\u0026lt;/code\u0026gt; of \u0026lt;a href=\u0026quot;http://actionbarsherlock.com/\u0026quot; rel=\u0026quot;noreferrer\u0026quot; title=\u0026quot;ActionBarSherlock\u0026quot;\u0026gt;ActionBarSherlock\u0026lt;/a\u0026gt; fame.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Asynchronously load images from network or app resources with one line of code\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Automatic \u0026lt;code\u0026gt;ListView\u0026lt;/code\u0026gt; detection\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Automatic disk and memory caching\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Can do custom transformations\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Lots of configurable options\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Super simple API\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Frequently updated\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I have been using NetworkImageView from the new Android Volley Library \u0026lt;code\u0026gt;com.android.volley.toolbox.NetworkImageView\u0026lt;/code\u0026gt;, and it seems to be working pretty well. Apparently, this is the same view that is used in \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Google_Play\u0026quot;\u0026gt;Google Play\u0026lt;/a\u0026gt; and other new Google applications. Definitely worth checking out.\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://blogs.captechconsulting.com/blog/raymond-robinson/google-io-2013-volley-image-cache-tutorial\u0026quot;\u0026gt;Google I/O 2013 volley image cache tutorial\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developers.google.com/events/io/sessions/325304728\u0026quot;\u0026gt;Developers Google events\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Well, image loading time from the Internet has many solutions. You may also use the library \u0026lt;a href=\u0026quot;https://code.google.com/p/android-query/wiki/ImageLoading\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Android-Query\u0026lt;/a\u0026gt;. It will give you all the required activity. Make sure what you want to do and read the library wiki page. And solve the image loading restriction.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is my code:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; View \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getView\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; position, View convertView, ViewGroup parent)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;View\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; convertView;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (v == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;LayoutInflater\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;vi\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n        v = vi.inflate(R.layout.row, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ImageView\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;imageview\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (ImageView) v.findViewById(R.id.icon);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;AQuery\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;aq\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AQuery\u0026lt;/span\u0026gt;(convertView);\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;imageUrl\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://www.vikispot.com/z/images/vikispot/android-w.png\u0026quot;\u0026lt;/span\u0026gt;;\n\n    aq.id(imageview).progress(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;).image(imageUrl, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BitmapAjaxCallback\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;callback\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url, ImageView iv, Bitmap bm, AjaxStatus status)\u0026lt;/span\u0026gt; {\n            iv.setImageBitmap(bm);\n        }\n    ));\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; v;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It should be solve your lazy loading problem.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I think this issue is very popular among Android developers, and there are plenty of such libraries that claims to resolve this issue, but only a few of them seems to be on the mark. \u0026lt;a href=\u0026quot;http://code.google.com/p/android-query/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;AQuery\u0026lt;/a\u0026gt; is one such library, but it is better than most of them in all aspects and is worth trying for.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You must try this Universal Loader is best.\nI am using this after done many RnD on lazy loading .\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/nostra13/Android-Universal-Image-Loader\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Universal Image Loader\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Features\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Multithread image loading (async or sync)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Wide customization of ImageLoader\u0026apos;s configuration (thread executors, downloader, decoder, memory and disk cache, display image options, etc.)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Many customization options for every display image call (stub images, caching switch, decoding options, Bitmap processing and displaying, etc.)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Image caching in memory and/or on disk (device\u0026apos;s file system or SD card)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Listening loading process (including downloading progress)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Android 2.0+ support\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/iFKcR.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Have a look at \u0026lt;a href=\u0026quot;https://github.com/applidium/Shutterbug\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Shutterbug\u0026lt;/a\u0026gt;, Applidium\u0026apos;s lightweight SDWebImage (a nice library on iOS) port to Android.\nIt supports asynchronous caching, stores failed URLs, handles concurrency well, and helpful subclasses are included.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Pull requests (and bug reports) are welcome, too!\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://droidparts.org\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;DroidParts\u0026lt;/a\u0026gt; has \u0026lt;a href=\u0026quot;https://github.com/yanchenko/droidparts/blob/master/droidparts/src/org/droidparts/net/image/ImageFetcher.java\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;ImageFetcher\u0026lt;/a\u0026gt; that requires zero configuration to get started.\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Uses a disk \u0026amp;amp; in-memory \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Cache_algorithms#Examples\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Least Recently Used\u0026lt;/a\u0026gt; (LRU) cache.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Efficiently decodes images.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Supports modifying bitmaps in background thread.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Has simple cross-fade.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Has image loading progress callback.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Clone \u0026lt;a href=\u0026quot;https://github.com/yanchenko/droidparts/tree/master/droidparts-samples/DroidPartsGram\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;DroidPartsGram\u0026lt;/a\u0026gt; for an example:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/DegXF.png\u0026quot; alt=\u0026quot;Enter image description here\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Novoda also has a great \u0026lt;a href=\u0026quot;http://androidimageloader.com/\u0026quot;\u0026gt;lazy image loading library\u0026lt;/a\u0026gt; and many apps like Songkick, Podio, SecretDJ and ImageSearch use their library.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Their library is hosted \u0026lt;a href=\u0026quot;https://github.com/novoda/ImageLoader\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt; on Github and they have a pretty active \u0026lt;a href=\u0026quot;https://github.com/novoda/ImageLoader/issues\u0026quot;\u0026gt;issues tracker\u0026lt;/a\u0026gt; as well. Their project seems to be pretty active too, with over 300+ commits at the time of writing this reply.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Just a quick tip for someone who is in indecision regarding what library to use for lazy-loading images:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;There are four basic ways.\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;DIY =\u0026amp;gt; Not the best solution but for a few images and if you want to go without the hassle of using others libraries\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Volley\u0026apos;s Lazy Loading library =\u0026amp;gt; From guys at android. It is nice and everything but is poorly documented and hence is a problem to use.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Picasso: A simple solution that just works, you can even specify the exact image size you want to bring in. It is very simple to use but might not be very \u0026quot;performant\u0026quot; for apps that has to deal with humongous amounts of images.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;UIL: The best way to lazy load images. You can cache images(you need permission of course), initialize the loader once, then have your work done. The most mature asynchronous image loading library I have ever seen so far.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you want to display Shimmer layout like Facebook there is a official facebook library for that. \u0026lt;a href=\u0026quot;http://facebook.github.io/shimmer-android/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;FaceBook Shimmer Android\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It takes care of everything, You just need to put your desired design code in nested manner in shimmer frame.\nHere is a sample code.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;com.facebook.shimmer.ShimmerFrameLayout\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;@+id/shimmer_view_container\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:layout_width\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;wrap_content\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:layout_height\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrap_content\u0026quot;\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;shimmer:duration\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;1000\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;here\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;will\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;be\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;your\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;content\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;to\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;display\u0026lt;/span\u0026gt; /\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;com.facebook.shimmer.ShimmerFrameLayout\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And here is the java code for it.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ShimmerFrameLayout\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;shimmerContainer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (ShimmerFrameLayout) findViewById(R.id.shimmer_view_container);\nshimmerContainer.startShimmerAnimation();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Add this dependency in your gradle file.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-delphi\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;implementation\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;com.facebook.shimmer:shimmer:0.1.0@aar\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Here is how it looks like.\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/cP4QU.gif\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/cP4QU.gif\u0026quot; alt=\u0026quot;Shimmer Android screenshot\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Check my fork of \u0026lt;a href=\u0026quot;https://github.com/nicolasjafelle/LazyList\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;LazyList\u0026lt;/a\u0026gt;. Basically, I improve the LazyList by delaying the call of the ImageView and create two methods:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;When you need to put something like \u0026quot;Loading image...\u0026quot;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;When you need to show the downloaded image.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;I also improved the ImageLoader by implementing a \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Singleton_pattern\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;singleton\u0026lt;/a\u0026gt; in this object.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;All above code have their own worth but with my personal experience just give a try with Picasso.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Picasso\u0026lt;/strong\u0026gt;  is a library specifically for this purpose, in-fact it will manage cache and all other network operations automatically.You will have to add library in your project and just write a single line of code to load image from remote URL.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Please visit here : \u0026lt;a href=\u0026quot;http://code.tutsplus.com/tutorials/android-sdk-working-with-picasso--cms-22149\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://code.tutsplus.com/tutorials/android-sdk-working-with-picasso--cms-22149\u0026lt;/a\u0026gt; \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Use the glide library. It worked for me and will work for your code too.It works for both images as well as gifs too. \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ImageView\u0026lt;/span\u0026gt; imageView = (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ImageView\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;findViewById\u0026lt;/span\u0026gt;(R.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;test_image\u0026lt;/span\u0026gt;); \n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;GlideDrawableImageViewTarget\u0026lt;/span\u0026gt; imagePreview = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;GlideDrawableImageViewTarget\u0026lt;/span\u0026gt;(imageView);\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Glide\u0026lt;/span\u0026gt;\n            .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;with\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;)\n            .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;load\u0026lt;/span\u0026gt;(url)\n            .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;listener\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RequestListener\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;GlideDrawable\u0026lt;/span\u0026gt;\u0026amp;gt;() {\n                \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Exception e, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; model, Target\u0026amp;lt;GlideDrawable\u0026amp;gt; target, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; isFirstResource\u0026lt;/span\u0026gt;) {                       \n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n                }\n\n                \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onResourceReady\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;GlideDrawable resource, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; model, Target\u0026amp;lt;GlideDrawable\u0026amp;gt; target, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; isFromMemoryCache, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; isFirstResource\u0026lt;/span\u0026gt;) {\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n                }\n            })\n            .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;into\u0026lt;/span\u0026gt;(imagePreview);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I can recommend a different way that works like a charm: Android Query.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can download that \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/JAR_%28file_format%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;JAR\u0026lt;/a\u0026gt; file from \u0026lt;a href=\u0026quot;http://code.google.com/p/android-query/downloads/list\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;AQuery\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;androidAQuery\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AQuery\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;As an example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;androidAQuery.id(YOUR IMAGEVIEW).image(YOUR IMAGE \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;TO\u0026lt;/span\u0026gt; LOAD, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, getDeviceWidth(), \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ANY\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;DEFAULT\u0026lt;/span\u0026gt; IMAGE YOU WANT \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;TO\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SHOW\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It\u0026apos;s very fast and accurate, and using this you can find many more features like animation when loading, getting a bitmap (if needed), etc.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Give \u0026lt;a href=\u0026quot;https://code.google.com/p/android-query/wiki/ImageLoading\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Aquery\u0026lt;/a\u0026gt; a try. It has amazingly simple methods to load and cache images asynchronously.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/koush/UrlImageViewHelper\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;URLImageViewHelper\u0026lt;/a\u0026gt; is an amazing library that helps you to do that. \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ImageDownloader\u0026lt;/span\u0026gt; {\n\nMap\u0026amp;lt;String, Bitmap\u0026amp;gt; imageCache;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ImageDownloader\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n    imageCache = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HashMap\u0026lt;/span\u0026gt;\u0026amp;lt;String, Bitmap\u0026amp;gt;();\n\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// download function\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;download\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url, ImageView imageView)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (cancelPotentialDownload(url, imageView)) {\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Caching code right here\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;filename\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; String.valueOf(url.hashCode());\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(getCacheDirectory(imageView.getContext()),\n                filename);\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Is the bitmap in our memory cache?\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bitmap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;bitmap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n        bitmap = (Bitmap) imageCache.get(f.getPath());\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (bitmap == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n\n            bitmap = BitmapFactory.decodeFile(f.getPath());\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (bitmap != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n                imageCache.put(f.getPath(), bitmap);\n            }\n\n        }\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// No? download it\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (bitmap == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BitmapDownloaderTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;task\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BitmapDownloaderTask\u0026lt;/span\u0026gt;(\n                        imageView);\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DownloadedDrawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;downloadedDrawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DownloadedDrawable\u0026lt;/span\u0026gt;(\n                        task);\n                imageView.setImageDrawable(downloadedDrawable);\n                task.execute(url);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n                Log.e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Error==\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;, e.toString());\n            }\n\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Yes? set the image\u0026lt;/span\u0026gt;\n            imageView.setImageBitmap(bitmap);\n        }\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cancel a download (internal only)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cancelPotentialDownload\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url,\n        ImageView imageView)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BitmapDownloaderTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;bitmapDownloaderTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getBitmapDownloaderTask(imageView);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (bitmapDownloaderTask != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;bitmapUrl\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; bitmapDownloaderTask.url;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; ((bitmapUrl == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) || (!bitmapUrl.equals(url))) {\n            bitmapDownloaderTask.cancel(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// The same URL is already being downloaded.\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// gets an existing download if one exists for the imageview\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; BitmapDownloaderTask \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getBitmapDownloaderTask\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        ImageView imageView)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (imageView != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;drawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; imageView.getDrawable();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (drawable \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; DownloadedDrawable) {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DownloadedDrawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;downloadedDrawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (DownloadedDrawable) drawable;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; downloadedDrawable.getBitmapDownloaderTask();\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// our caching functions\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Find the dir to save cached images\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; File \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCacheDirectory\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Context context)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;sdState\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; android.os.Environment.getExternalStorageState();\n    File cacheDir;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (sdState.equals(android.os.Environment.MEDIA_MOUNTED)) {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;sdDir\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; android.os.Environment.getExternalStorageDirectory();\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO : Change your diretcory here\u0026lt;/span\u0026gt;\n        cacheDir = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(sdDir, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;data/ToDo/images\u0026quot;\u0026lt;/span\u0026gt;);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n        cacheDir = context.getCacheDir();\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!cacheDir.exists())\n        cacheDir.mkdirs();\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; cacheDir;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;writeFile\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Bitmap bmp, File f)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;FileOutputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        out = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FileOutputStream\u0026lt;/span\u0026gt;(f);\n        bmp.compress(Bitmap.CompressFormat.PNG, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;, out);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n        e.printStackTrace();\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;finally\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (out != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;)\n                out.close();\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        }\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// download asynctask\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BitmapDownloaderTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AsyncTask\u0026lt;/span\u0026gt;\u0026amp;lt;String, Void, Bitmap\u0026amp;gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String url;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; WeakReference\u0026amp;lt;ImageView\u0026amp;gt; imageViewReference;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;BitmapDownloaderTask\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(ImageView imageView)\u0026lt;/span\u0026gt; {\n        imageViewReference = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;WeakReference\u0026lt;/span\u0026gt;\u0026amp;lt;ImageView\u0026amp;gt;(imageView);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Actual download method, run in the task thread\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; Bitmap \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doInBackground\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String... params)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// params comes from the execute() call: params[0] is the url.\u0026lt;/span\u0026gt;\n        url = (String) params[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; downloadBitmap(params[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Once the image is downloaded, associates it to the imageView\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onPostExecute\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Bitmap bitmap)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (isCancelled()) {\n            bitmap = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (imageViewReference != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ImageView\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;imageView\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; imageViewReference.get();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BitmapDownloaderTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;bitmapDownloaderTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getBitmapDownloaderTask(imageView);\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Change bitmap only if this process is still associated with\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// it\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt; == bitmapDownloaderTask) {\n                imageView.setImageBitmap(bitmap);\n\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cache the image\u0026lt;/span\u0026gt;\n\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;filename\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; String.valueOf(url.hashCode());\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(\n                        getCacheDirectory(imageView.getContext()), filename);\n\n                imageCache.put(f.getPath(), bitmap);\n\n                writeFile(bitmap, f);\n            }\n        }\n    }\n\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DownloadedDrawable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ColorDrawable\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; WeakReference\u0026amp;lt;BitmapDownloaderTask\u0026amp;gt; bitmapDownloaderTaskReference;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;DownloadedDrawable\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(BitmapDownloaderTask bitmapDownloaderTask)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;(Color.WHITE);\n        bitmapDownloaderTaskReference = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;WeakReference\u0026lt;/span\u0026gt;\u0026amp;lt;BitmapDownloaderTask\u0026amp;gt;(\n                bitmapDownloaderTask);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; BitmapDownloaderTask \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getBitmapDownloaderTask\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; bitmapDownloaderTaskReference.get();\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// the actual download code\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; Bitmap \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;downloadBitmap\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpParams\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;params\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BasicHttpParams\u0026lt;/span\u0026gt;();\n    params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION,\n            HttpVersion.HTTP_1_1);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpClient\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;client\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DefaultHttpClient\u0026lt;/span\u0026gt;(params);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpGet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;getRequest\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpGet\u0026lt;/span\u0026gt;(url);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpResponse\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; client.execute(getRequest);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;statusCode\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; response.getStatusLine().getStatusCode();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (statusCode != HttpStatus.SC_OK) {\n            Log.w(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ImageDownloader\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Error \u0026quot;\u0026lt;/span\u0026gt; + statusCode\n                    + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; while retrieving bitmap from \u0026quot;\u0026lt;/span\u0026gt; + url);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpEntity\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;entity\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; response.getEntity();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (entity != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;inputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n                inputStream = entity.getContent();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bitmap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;bitmap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; BitmapFactory\n                        .decodeStream(inputStream);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; bitmap;\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;finally\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (inputStream != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n                    inputStream.close();\n                }\n                entity.consumeContent();\n            }\n        }\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Could provide a more explicit error message for IOException or\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// IllegalStateException\u0026lt;/span\u0026gt;\n        getRequest.abort();\n        Log.w(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ImageDownloader\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Error while retrieving bitmap from \u0026quot;\u0026lt;/span\u0026gt;\n                + url + e.toString());\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;finally\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (client != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// client.close();\u0026lt;/span\u0026gt;\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I had this issue and implemented lruCache. I believe you need API 12 and above or use the compatiblity v4 library. lurCache is fast memory, but it also has a budget, so if you\u0026apos;re worried about that you can use a diskcache... It\u0026apos;s all described in \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Caching Bitmaps\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I\u0026apos;ll now provide my implementation which is a \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Singleton_pattern\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;singleton\u0026lt;/a\u0026gt; I call from anywhere like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Where the first is a string and the other is a imageview to load.\u0026lt;/span\u0026gt;\n\nDownloadImageTask\u0026lt;span class=\u0026quot;hljs-selector-class\u0026quot;\u0026gt;.getInstance\u0026lt;/span\u0026gt;()\u0026lt;span class=\u0026quot;hljs-selector-class\u0026quot;\u0026gt;.loadBitmap\u0026lt;/span\u0026gt;(avatarURL, iv_avatar);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Here\u0026apos;s the ideal code to cache and then call the above in getView of an adapter when retrieving the web image:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DownloadImageTask\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; LruCache\u0026amp;lt;String, Bitmap\u0026amp;gt; mMemoryCache;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Create a singleton class to call this from multiple classes */\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DownloadImageTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;instance\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; DownloadImageTask \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getInstance\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (instance == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            instance = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DownloadImageTask\u0026lt;/span\u0026gt;();\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; instance;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Lock the constructor from public instances\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;DownloadImageTask\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Get max available VM memory, exceeding this amount will throw an\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// OutOfMemory exception. Stored in kilobytes as LruCache takes an\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// int in its constructor.\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;maxMemory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;) (Runtime.getRuntime().maxMemory() / \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;);\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Use 1/8th of the available memory for this memory cache.\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;cacheSize\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; maxMemory / \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;\n\n        mMemoryCache = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;LruCache\u0026lt;/span\u0026gt;\u0026amp;lt;String, Bitmap\u0026amp;gt;(cacheSize) {\n            \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sizeOf\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String key, Bitmap bitmap)\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// The cache size will be measured in kilobytes rather than\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// number of items.\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; bitmap.getByteCount() / \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;;\n            }\n        };\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;loadBitmap\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String avatarURL, ImageView imageView)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;imageKey\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; String.valueOf(avatarURL);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bitmap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;bitmap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getBitmapFromMemCache(imageKey);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (bitmap != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            imageView.setImageBitmap(bitmap);\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            imageView.setImageResource(R.drawable.ic_launcher);\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DownloadImageTaskViaWeb\u0026lt;/span\u0026gt;(imageView).execute(avatarURL);\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addBitmapToMemoryCache\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String key, Bitmap bitmap)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (getBitmapFromMemCache(key) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            mMemoryCache.put(key, bitmap);\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Bitmap \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getBitmapFromMemCache\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String key)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; mMemoryCache.get(key);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* A background process that opens a http stream and decodes a web image. */\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DownloadImageTaskViaWeb\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AsyncTask\u0026lt;/span\u0026gt;\u0026amp;lt;String, Void, Bitmap\u0026amp;gt; {\n        ImageView bmImage;\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;DownloadImageTaskViaWeb\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(ImageView bmImage)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.bmImage = bmImage;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; Bitmap \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doInBackground\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String... urls)\u0026lt;/span\u0026gt; {\n\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;urldisplay\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; urls[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bitmap\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mIcon\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;java\u0026lt;/span\u0026gt;.net.URL(urldisplay).openStream();\n                mIcon = BitmapFactory.decodeStream(in);\n\n            } \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n                Log.e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Error\u0026quot;\u0026lt;/span\u0026gt;, e.getMessage());\n                e.printStackTrace();\n            }\n\n            addBitmapToMemoryCache(String.valueOf(urldisplay), mIcon);\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; mIcon;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* After decoding we update the view on the main UI. */\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onPostExecute\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Bitmap result)\u0026lt;/span\u0026gt; {\n            bmImage.setImageBitmap(result);\n        }\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":225,"title":"How to lazy load images in ListView in Android","content":"\n                \n\u0026lt;p\u0026gt;I am using a \u0026lt;code\u0026gt;ListView\u0026lt;/code\u0026gt; to display some images and captions associated with those images. I am getting the images from the Internet. Is there a way to lazy load images so while the text displays, the UI is not blocked and images are displayed as they are downloaded? \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The total number of images is not fixed.\u0026lt;/p\u0026gt;\n    ","slug":"how-to-lazy-load-images-in-listview-in-android-1657387332835","postType":"QUESTION","createdAt":"2022-07-09T17:22:12.000Z","updatedAt":"2022-07-09T17:22:12.000Z","tags":[{"id":1527,"name":"listview","slug":"listview","createdAt":"2022-07-09T17:22:12.000Z","updatedAt":"2022-07-09T17:22:12.000Z","Questions_Tags":{"questionId":225,"tagId":1527}},{"id":1529,"name":"universal-image-loader","slug":"universal-image-loader","createdAt":"2022-07-09T17:22:12.000Z","updatedAt":"2022-07-09T17:22:12.000Z","Questions_Tags":{"questionId":225,"tagId":1529}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-to-lazy-load-images-in-listview-in-android-1657387332835"},"buildId":"B9ZMQqRLGvIP-RcWN9dT2","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>