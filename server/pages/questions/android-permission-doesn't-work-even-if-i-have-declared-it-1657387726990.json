{"pageProps":{"data":{"answer":["\n&lt;p&gt;&lt;sub&gt;(the following is extracted from &lt;a href=&quot;https://commonsware.com/blog/2015/08/31/hey-where-did-my-permission-go.html&quot; rel=&quot;noreferrer&quot;&gt;a blog post of mine about this&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;\n&lt;p&gt;The big reason for not getting your permission nowadays is because\nyour project has a &lt;code&gt;targetSdkVersion&lt;/code&gt; of 23 or higher, and the permission\nthat you are requesting is &quot;dangerous&quot;. In Android 6.0, this includes:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;ACCEPT_HANDOVER&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;ACCESS_BACKGROUND_LOCATION&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;ACCESS_MEDIA_LOCATION&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;ACTIVITY_RECOGNITION&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;ANSWER_PHONE_CALLS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;ACCESS_COARSE_LOCATION&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;ACCESS_FINE_LOCATION&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;ADD_VOICEMAIL&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;BODY_SENSORS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;CALL_PHONE&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;CAMERA&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;GET_ACCOUNTS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;PROCESS_OUTGOING_CALLS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;READ_CALENDAR&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;READ_CALL_LOG&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;READ_CELL_BROADCASTS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;READ_CONTACTS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;READ_EXTERNAL_STORAGE&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;READ_PHONE_STATE&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;READ_SMS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;RECEIVE_MMS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;RECEIVE_SMS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;RECEIVE_WAP_PUSH&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;RECORD_AUDIO&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;SEND_SMS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;USE_SIP&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;WRITE_CALENDAR&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;WRITE_CALL_LOG&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;WRITE_CONTACTS&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;WRITE_EXTERNAL_STORAGE&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;For these permissions, not only does your &lt;code&gt;targetSdkVersion&lt;/code&gt; 23+ app\nneed to have the &lt;code&gt;&amp;lt;uses-permission&amp;gt;&lt;/code&gt; element(s), but you also have\nto ask for those permissions at runtime from the user on Android 6.0+\ndevices, using methods like &lt;code&gt;checkSelfPermission()&lt;/code&gt; and\n&lt;code&gt;requestPermissions()&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;As a temporary workaround, drop your &lt;code&gt;targetSdkVersion&lt;/code&gt; below 23.&lt;/p&gt;\n&lt;p&gt;However, eventually, you will have some reason to want your\n&lt;code&gt;targetSdkVersion&lt;/code&gt; to be 23 or higher. At that time, you will need\nto adjust your app to use the new runtime permission system.\nThe Android documentation has\n&lt;a href=&quot;http://developer.android.com/training/permissions/requesting.html&quot; rel=&quot;noreferrer&quot;&gt;a page dedicated to this topic&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;Above API level 23 you will be given programmatically pragmatically like:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;PERMISSION_REQUEST_CODE&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (android.os.Build.VERSION.SDK_INT &amp;gt;= android.os.Build.VERSION_CODES.M) {\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (checkSelfPermission(Manifest.permission.SEND_SMS)\n                == PackageManager.PERMISSION_DENIED) {\n\n            Log.d(&lt;span class=&quot;hljs-string&quot;&gt;&quot;permission&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;permission denied to SEND_SMS - requesting it&quot;&lt;/span&gt;);\n            String[] permissions = {Manifest.permission.SEND_SMS};\n\n            requestPermissions(permissions, PERMISSION_REQUEST_CODE);\n\n        }\n    }\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;request permission pragmatically (after API 23)&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (ContextCompat.checkSelfPermission(thisActivity, Manifest.permission.SEND_SMS)\n    != PackageManager.PERMISSION_GRANTED) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Permission is not granted &lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Ask for permision&lt;/span&gt;\n    ActivityCompat.requestPermissions(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;,&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;[] { Manifest.permission.SEND_SMS}, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;); \n} \n&lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n&lt;span class=&quot;hljs-comment&quot;&gt;// Permission has already been granted&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&quot;If the app has the permission, the method checkSelfPermission() returns PERMISSION_GRANTED, and the app can proceed with the operation. &lt;/p&gt;\n\n&lt;p&gt;If the app does not have the permission, the method returns PERMISSION_DENIED, and the app has to explicitly ask the user for permission. You need to prompt the user for that permission, as shown in the above code. Calling requestPermissions() brings up a standard Android dialog, which you cannot customize.&quot;&lt;/p&gt;\n    ","\n&lt;p&gt;Please go through the link below, \n&lt;a href=&quot;https://developer.android.com/guide/topics/permissions/overview.html&quot; rel=&quot;noreferrer&quot;&gt;https://developer.android.com/guide/topics/permissions/overview.html&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Some samples are also available there to get start with the permissions.&lt;/p&gt;\n\n&lt;p&gt;To make android more secure now developers has to mention permission in manifest as well as they should have to ask user as well in run time to get the work done. They are permission categorized in dangerous permission section which are mention below&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;CALENDAR&lt;/strong&gt;    &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;READ_CALENDAR\n\nWRITE_CALENDAR\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;CAMERA&lt;/strong&gt;  &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;CAMERA\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;CONTACTS&lt;/strong&gt;    &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;READ_CONTACTS\nWRITE_CONTACTS\nGET_ACCOUNTS\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;LOCATION&lt;/strong&gt;    &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;ACCESS_FINE_LOCATION\nACCESS_COARSE_LOCATION\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;MICROPHONE&lt;/strong&gt;  &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;RECORD_AUDIO\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;PHONE&lt;/strong&gt;   &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;READ_PHONE_STATE\nREAD_PHONE_NUMBERS\nCALL_PHONE\n&lt;span class=&quot;hljs-title function_&quot;&gt;ANSWER_PHONE_CALLS&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(must request at runtime)&lt;/span&gt;\nREAD_CALL_LOG\nWRITE_CALL_LOG\nADD_VOICEMAIL\nUSE_SIP\nPROCESS_OUTGOING_CALLS\nANSWER_PHONE_CALLS\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;SENSORS&lt;/strong&gt;     &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;BODY_SENSORS\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;SMS&lt;/strong&gt;     &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;SEND_SMS\nRECEIVE_SMS\nREAD_SMS\nRECEIVE_WAP_PUSH\nRECEIVE_MMS\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;STORAGE&lt;/strong&gt;     &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;READ_EXTERNAL_STORAGE\nWRITE_EXTERNAL_STORAGE\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you are using sdk 23 or higher then you must check run time permissions.&lt;/p&gt;\n    ","\n&lt;p&gt;when you declare &lt;code&gt;permisson&lt;/code&gt; in &lt;code&gt;Manifest&lt;/code&gt; and it&apos;s not work means you are performing Task in &lt;code&gt;MarshMallow&lt;/code&gt; and for &lt;code&gt;MarshMallow&lt;/code&gt; you have set Permisson at &lt;code&gt;RunTime&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;like this way&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;ActivityCompat.requestPermissions();\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you are using Android version &quot;23&quot; or &quot;23+&quot;, then app will show you errors when you are trying to access anything which requires user&apos;s permission. You have to ask for permissions at run-time even if you have declared those permissions in Android manifest.&lt;/p&gt;\n\n&lt;p&gt;Check this: &lt;a href=&quot;https://developer.android.com/training/permissions/requesting.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://developer.android.com/training/permissions/requesting.html&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;But if you have created your whole application and don&apos;t want to change at every place then a little cheat will be sufficient.&lt;/p&gt;\n\n&lt;p&gt;Go to &quot;Build.gradle&quot; file and change the target Sdk version to less than 23, like 22, 21.&lt;/p&gt;\n    ","\n&lt;p&gt;Along with CommonsWare&apos;s answer,&lt;/p&gt;\n\n&lt;p&gt;There is a Security Setting (I checked on CM13) to set SMS Message Limit. If you set this to &quot;None&quot;, OS will popup a Dialog for every SMS, even after obtaining SMS_SEND permission in the runtime. Best thing is to set this to maximum.&lt;/p&gt;\n\n&lt;p&gt;If the maximum is not enough, there are ways to increases the maximum rate on a rooted device.&lt;/p&gt;\n    ","\n&lt;p&gt;I added this to my MainActivity, that resolve my problem &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;       &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; MY_PERMISSIONS_REQUEST_READ_CONTACTS=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Here, thisActivity is the current activity&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (ContextCompat.checkSelfPermission(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;,\n                Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                != PackageManager.PERMISSION_GRANTED) {\n\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Should we show an explanation?&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (ActivityCompat.shouldShowRequestPermissionRationale(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;,\n                    Manifest.permission.WRITE_EXTERNAL_STORAGE)) {\n\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Show an expanation to the user *asynchronously* -- don&apos;t block&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// this thread waiting for the user&apos;s response! After the user&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// sees the explanation, try again to request the permission.&lt;/span&gt;\n\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n\n                &lt;span class=&quot;hljs-comment&quot;&gt;// No explanation needed, we can request the permission.&lt;/span&gt;\n\n                ActivityCompat.requestPermissions(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;,\n                        &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;[]{Manifest.permission.WRITE_EXTERNAL_STORAGE},\n                        MY_PERMISSIONS_REQUEST_READ_CONTACTS);\n\n                &lt;span class=&quot;hljs-comment&quot;&gt;// MY_PERMISSIONS_REQUEST_READ_CONTACTS is an&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// app-defined int constant. The callback method gets the&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// result of the request.&lt;/span&gt;\n            }\n        }\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I hope the solution to write to external storage will be useful too&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;  &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;checkPermission&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (Build.VERSION.SDK_INT &amp;gt;= &lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (checkSelfPermission(android.Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                    == PackageManager.PERMISSION_GRANTED) {\n                Timber.tag(LOG_TAG).e(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Permission error. You have permission&quot;&lt;/span&gt;);\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n                Timber.tag(LOG_TAG).e(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Permission error. You have asked for permission&quot;&lt;/span&gt;);\n                ActivityCompat.requestPermissions(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n            }\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; { \n            &lt;span class=&quot;hljs-comment&quot;&gt;// for a stuff below api level 23&lt;/span&gt;\n            Timber.tag(LOG_TAG).e(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Permission error. You already have the permission&quot;&lt;/span&gt;);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n        }\n    }\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can use this code to access your messages&lt;/p&gt;\n\n&lt;p&gt;Open a Dialog using the code below:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;ActivityCompat.requestPermissions(MainActivity.&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;,\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;[]{Manifest.permission.READ_EXTERNAL_STORAGE},\n                    &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Get the Activity result as below:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onRequestPermissionsResult&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; requestCode,\n                                       String permissions[], &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;[] grantResults)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (requestCode) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;: {\n\n          &lt;span class=&quot;hljs-comment&quot;&gt;// If request is cancelled, the result arrays are empty.&lt;/span&gt;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (grantResults.length &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n                    &amp;amp;&amp;amp; grantResults[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] == PackageManager.PERMISSION_GRANTED) {\n\n                &lt;span class=&quot;hljs-comment&quot;&gt;// permission was granted, yay! Do the&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// contacts-related task you need to do.          &lt;/span&gt;\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n\n                &lt;span class=&quot;hljs-comment&quot;&gt;// permission denied, boo! Disable the&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// functionality that depends on this permission.&lt;/span&gt;\n                Toast.makeText(MainActivity.&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Permission denied to read your External storage&quot;&lt;/span&gt;, Toast.LENGTH_SHORT).show();\n            }\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n        }\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// other &apos;case&apos; lines to check for other&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// permissions this app might request&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;or edit file &lt;code&gt;build.gradle&lt;/code&gt; and chanche number &lt;code&gt;targetSdkVersion&lt;/code&gt; less than &lt;code&gt;23&lt;/code&gt;\n&lt;br&gt;\nAnd no longer need the code above&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;\n&lt;br&gt;\n&lt;strong&gt;Of course this is not the case, and it&apos;s just an educational aspect&lt;/strong&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;So i had to create an app to send and receive messages but the send action crashed whenever i clicked on send even though the permission was granted . I had requested runtime permissions and allowed them, still i faced a crash that the process doesnt have the requested permission to send SMS . \nI had checked the granted permissions from :&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;adb shell dumpsys &lt;span class=&quot;hljs-keyword&quot;&gt;package&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;package&lt;/span&gt;-name&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The order of my request for permissions was &lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;RECEIVE_SMS&lt;/li&gt;\n&lt;li&gt;SEND_SMS&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;I reverted the order of request and it works fine . This was tested with a complete new app(uninstall-&amp;gt; install -&amp;gt; test). The answer may seem weird but just give it a shot . &lt;/p&gt;\n\n&lt;p&gt;(If it works in the shown way in a certain order, then Android might have a bug!!) &lt;/p&gt;\n    ","\n&lt;p&gt;List of All Permissions Can be Found with Explanation at&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://developer.android.com/reference/android/Manifest.permission&quot; rel=&quot;nofollow noreferrer&quot;&gt;Manifest.permission&lt;/a&gt;&lt;/p&gt;\n    "],"comment":["\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;What version of Android are you testing on?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/115145/commonsware&quot; title=&quot;957,562 reputation&quot; class=&quot;comment-user&quot;&gt;CommonsWare&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment53120071_32635704&quot;&gt;&lt;span title=&quot;2015-09-17 16:47:04Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 17, 2015 at 16:47&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I&apos;m testing on android 6.0&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/5347360/nathan-loudjani&quot; title=&quot;2,007 reputation&quot; class=&quot;comment-user owner&quot;&gt;Nathan Loudjani&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment53120522_32635704&quot;&gt;&lt;span title=&quot;2015-09-17 16:59:36Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 17, 2015 at 16:59&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;surely it will work on a below version of android. There&apos;s a new philosophy of permissions in android 6.0&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/3343174/fakher&quot; title=&quot;2,079 reputation&quot; class=&quot;comment-user&quot;&gt;Fakher&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment53120546_32635704&quot;&gt;&lt;span title=&quot;2015-09-17 17:00:23Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 17, 2015 at 17:00&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Is there a special syntax for android 6 ? How can i be sure it works on below version ?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/5347360/nathan-loudjani&quot; title=&quot;2,007 reputation&quot; class=&quot;comment-user owner&quot;&gt;Nathan Loudjani&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment53120621_32635704&quot;&gt;&lt;span title=&quot;2015-09-17 17:02:11Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 17, 2015 at 17:02&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;my previous &lt;code&gt;targetsdkversion&lt;/code&gt; was &lt;code&gt;23&lt;/code&gt; updated to &lt;code&gt;27&lt;/code&gt; after app update &lt;code&gt;READ_SMS&lt;/code&gt; permission not working which is already enabled. please help&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2869767/sagar&quot; title=&quot;4,591 reputation&quot; class=&quot;comment-user&quot;&gt;Sagar&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment92015644_32635704&quot;&gt;&lt;span title=&quot;2018-09-27 13:27:47Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 27, 2018 at 13:27&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Thank you very much, I used the requestPermissions() methods and i worked well&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/5347360/nathan-loudjani&quot; title=&quot;2,007 reputation&quot; class=&quot;comment-user owner&quot;&gt;Nathan Loudjani&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment53121036_32636039&quot;&gt;&lt;span title=&quot;2015-09-17 17:15:03Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 17, 2015 at 17:15&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Ozzy: You need to be on a v23 generation of the support libraries (&lt;code&gt;23.x.y&lt;/code&gt;, for current values of x and y), rather than the v22 that you are presently using.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/115145/commonsware&quot; title=&quot;957,562 reputation&quot; class=&quot;comment-user&quot;&gt;CommonsWare&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment57019418_32636039&quot;&gt;&lt;span title=&quot;2016-01-06 15:48:11Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 6, 2016 at 15:48&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@NathanLoudjani Would you mind sharing your code that implements this? I am in the exact same boat and am struggling putting this into my activity.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1289044/dschuett&quot; title=&quot;190 reputation&quot; class=&quot;comment-user&quot;&gt;dschuett&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment57650019_32636039&quot;&gt;&lt;span title=&quot;2016-01-23 03:52:52Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 23, 2016 at 3:52&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Leviathan: At the time, I got that list from the docs, I think from the page that I link to at the end of the answer. Unfortunately, Google seems to have dropped that list, which is both unfortunate and typical. For an individual permission, its entry in &lt;code&gt;Manifest.permission&lt;/code&gt; should show its protection level, (e.g., &lt;a href=&quot;https://developer.android.com/reference/android/Manifest.permission#ACCESS_COARSE_LOCATION&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;ACCESS_COARSE_LOCATION&lt;/code&gt;&lt;/a&gt;).&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/115145/commonsware&quot; title=&quot;957,562 reputation&quot; class=&quot;comment-user&quot;&gt;CommonsWare&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment113733585_32636039&quot;&gt;&lt;span title=&quot;2020-10-12 12:44:35Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 12, 2020 at 12:44&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Leviathan: &quot;is there a way to explicity request permission for a regular permission?&quot; -- no, sorry. &quot;Our data protection law requires to ask for Push Notifications explicity before sending them, but afaik they can be received as soon as the app is installed and they are in the manifest&quot; -- that is not a permission. Have the receiver or service be disabled in the manifest, show your own dialog, and if the user agrees, enable the component.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/115145/commonsware&quot; title=&quot;957,562 reputation&quot; class=&quot;comment-user&quot;&gt;CommonsWare&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment113734170_32636039&quot;&gt;&lt;span title=&quot;2020-10-12 13:05:21Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 12, 2020 at 13:05&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Where would we put this line? ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.SEND_SMS},1); and what does the 1 refer to?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/4669512/lizg&quot; title=&quot;1,772 reputation&quot; class=&quot;comment-user&quot;&gt;LizG&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment92169015_43808024&quot;&gt;&lt;span title=&quot;2018-10-02 22:46:58Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 2, 2018 at 22:46&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        "],"id":354,"title":"Android permission doesn't work even if I have declared it","content":"\n                \n&lt;p&gt;I&apos;m trying to write code to send an SMS from an Android app, but when I try to send the SMS it sends me back the error:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;09-17 18:37:29.974  12847-12847/**.**.****E/AndroidRuntimeï¹• FATAL EXCEPTION: main\nProcess: **.**.****, PID: 12847\njava.lang.SecurityException: Sending SMS message: uid 10092 does not have android.permission.SEND_SMS.\n        at android.os.Parcel.readException(Parcel.java:1599)\n        at android.os.Parcel.readException(Parcel.java:1552)\n        at com.android.internal.telephony.ISms$Stub$Proxy.sendTextForSubscriber(ISms.java:768)\n        at android.telephony.SmsManager.sendTextMessageInternal(SmsManager.java:310)\n        at android.telephony.SmsManager.sendTextMessage(SmsManager.java:293)\n        at **.**.****.MainActivity$3.onClick(MainActivity.java:70)\n        at android.view.View.performClick(View.java:5198)\n        at android.view.View$PerformClick.run(View.java:21147)\n        at android.os.Handler.handleCallback(Handler.java:739)\n        at android.os.Handler.dispatchMessage(Handler.java:95)\n        at android.os.Looper.loop(Looper.java:148)\n        at android.app.ActivityThread.main(ActivityThread.java:5417)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I checked but I have the permissions in the manifest, as follows:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;hljs-string&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;hljs-string&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;?&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;uses-permission android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.SEND_SMS&quot;&lt;/span&gt;/&amp;gt;\n&amp;lt;uses-feature android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.hardware.telephony&quot;&lt;/span&gt;\n    android:required=&lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;\n\n&amp;lt;application\n    android:exported=&lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;\n    android:allowBackup=&lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;\n    android:icon=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@mipmap/ic_launcher&quot;&lt;/span&gt;\n    android:label=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@string/app_name&quot;&lt;/span&gt;\n    android:theme=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@style/AppTheme&quot;&lt;/span&gt;&amp;gt;\n    &amp;lt;activity\n        android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;.MainActivity&quot;&lt;/span&gt;\n        android:label=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@string/app_name&quot;&lt;/span&gt;\n        android:screenOrientation=&lt;span class=&quot;hljs-string&quot;&gt;&quot;portrait&quot;&lt;/span&gt;&amp;gt;\n        &amp;lt;intent-filter&amp;gt;\n            &amp;lt;action android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.intent.action.MAIN&quot;&lt;/span&gt; /&amp;gt;\n\n            &amp;lt;category android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.intent.category.LAUNCHER&quot;&lt;/span&gt; /&amp;gt;\n        &amp;lt;/intent-filter&amp;gt;\n    &amp;lt;/activity&amp;gt;\n&amp;lt;/application&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;I searched the internet but all the errors were about the &lt;code&gt;&amp;lt;uses-permission/&amp;gt;&lt;/code&gt; syntax, could you help me please?&lt;/p&gt;\n    ","slug":"android-permission-doesn't-work-even-if-i-have-declared-it-1657387726990","postType":"QUESTION","createdAt":"2022-07-09T17:28:46.000Z","updatedAt":"2022-07-09T17:28:46.000Z","tags":[{"id":1984,"name":"android-permissions","slug":"android-permissions","createdAt":"2022-07-09T17:28:47.000Z","updatedAt":"2022-07-09T17:28:47.000Z","Questions_Tags":{"questionId":354,"tagId":1984}}]}},"__N_SSG":true}