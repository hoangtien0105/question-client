<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-096e453de8a27667.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-e3d1b60e109d3ba1.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_buildManifest.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.hFcsiD code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-6e32c308-0"]{content:"hFcsiD,"}/*!sc*/
.ljvTUN .comment-item .comment-body .d-inline-flex.ai-center{text-align:right;}/*!sc*/
.ljvTUN .comment-item .comment-body .comment-date{float:right;}/*!sc*/
data-styled.g6[id="sc-6e32c308-1"]{content:"ljvTUN,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/srand()-why-call-it-only-once-1657387794760#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-6e32c308-0 hFcsiD flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/srand()-why-call-it-only-once-1657387794760">srand() — why call it only once?</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/srand">srand</a></div></div><div class="question-content mt-5">
                
<p>This question is about a comment in this question
<a href="https://stackoverflow.com/questions/322938/recommended-way-to-initialize-srand">Recommended way to initialize srand?</a> The first comment says that <code>srand()</code> should be called only ONCE in an application. Why is it so?</p>
    </div></div></div><div class="sc-6e32c308-1 ljvTUN flex text-xs pl-10 flex-col comment items-center justify-center"><h4 class="text-left mt-10 text-lg font-semibold">Comments</h4><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">try, in a loop, calling srand and then rand</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/590042/foo-bah" title="24,833 reputation" class="comment-user">Foo Bah</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment8858502_7343833"><span title="2011-09-08 06:16:54Z, License: CC BY-SA 3.0" class="relativetime-clean">Sep 8, 2011 at 6:16</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">See also Dilbert's <a href="http://dilbert.com/strip/2001-10-25" rel="nofollow noreferrer">Tour of Accounting</a>.</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/15168/jonathan-leffler" title="700,796 reputation" class="comment-user">Jonathan Leffler</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment56888925_7343833"><span title="2016-01-03 00:05:12Z, License: CC BY-SA 3.0" class="relativetime-clean">Jan 3, 2016 at 0:05</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">See also <a href="https://stackoverflow.com/q/322938/15168">Recommended way to initialize <code>srand()</code>?</a>  Using <code>time(0)</code> for the value passed to <code>srand()</code> is simplistic  and hence probably adequate since <code>srand()</code> is often also simplistic (see the example implementation in the <a href="http://port70.net/~nsz/c/c11/n1570.html#7.22.2.2p5" rel="nofollow noreferrer">C standard</a> which assumes RAND_MAX is 32,767).  One solution in the <a href="https://stackoverflow.com/a/323302/15168">linked Q&amp;A</a> uses a function to mix 3 values  the results from <code>clock()</code>, <code>time(0)</code>, and <code>getpid()</code>.  Using a mixing function is a good idea. A CRC could be used too.</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/15168/jonathan-leffler" title="700,796 reputation" class="comment-user">Jonathan Leffler</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment127174645_7343833"><span title="2022-04-22 15:17:29Z, License: CC BY-SA 4.0" class="relativetime-clean">Apr 22 at 15:17</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">See more</button></div><div class="sc-6e32c308-2 bFXWFO"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>That depends on what you are trying to achieve.</p>

<p>Randomization is performed as a function that has a starting value, namely <strong>the seed</strong>.</p>

<p>So, for the same seed, you will always get the same sequence of values.</p>

<p>If you try to set the seed every time you need a random value, and the seed is the same number, you will always get the same "random" value.</p>

<p>Seed is usually taken from the current time, which are the seconds, as in <code>time(NULL)</code>, so if you always set the seed before taking the random number, you will get the same number as long as you call the srand/rand combo multiple times <strong>in the same second</strong>.</p>

<p>To avoid this problem, srand is set only once per application, because it is doubtful that two of the application instances will be initialized in the same second, so each instance will then have a different sequence of random numbers.</p>

<p>However, there is a slight possibility that you will run your app (especially if it's a short one, or a command line tool or something like that) many times in a second, then you will have to resort to some other way of choosing a seed (unless the same sequence in different application instances is ok by you). But like I said, that depends on your application context of usage.</p>

<p>Also, you may want to try to increase the precision to microseconds (minimizing the chance of the same seed), requires (<code>sys/time.h</code>):</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">timeval</span> <span class="hljs-title">t1</span>;</span>
gettimeofday(&amp;t1, <span class="hljs-literal">NULL</span>);
srand(t1.tv_usec * t1.tv_sec);
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Random numbers are actually pseudo random. A seed is set first, from which each call of <code>rand</code> gets a random number, and modifies the internal state and this new state is used in the next <code>rand</code> call to get another number. Because a certain formula is used to generate these "random numbers" therefore setting a certain value of seed after every call to <code>rand</code> will return the same number from the call. For example <code>srand (1234); rand ();</code> will return the same value. Initializing once the initial state with the seed value will generate enough random numbers as you do not set the internal state with <code>srand</code>, thus making the numbers more probable to be random.</p>

<p>Generally we use the <code>time (NULL)</code> returned seconds value when initializing the seed value. Say the <code>srand (time (NULL));</code> is in a loop. Then loop can iterate more than once in one second, therefore the number of times the loop iterates inside the loop in a second <code>rand</code> call in the loop will return the same "random number", which is not desired. Initializing it once at program start will set the seed once, and each time <code>rand</code> is called, a new number is generated and the internal state is modified, so the next call <code>rand</code> returns a number which is random enough.</p>

<p>For example this code from <a href="http://linux.die.net/man/3/rand" rel="noreferrer">http://linux.die.net/man/3/rand</a>:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">static</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> next = <span class="hljs-number">1</span>;
<span class="hljs-comment">/* RAND_MAX assumed to be 32767 */</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">myrand</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    next = next * <span class="hljs-number">1103515245</span> + <span class="hljs-number">12345</span>;
    <span class="hljs-keyword">return</span>((<span class="hljs-type">unsigned</span>)(next/<span class="hljs-number">65536</span>) % <span class="hljs-number">32768</span>);
}
<span class="hljs-type">void</span> <span class="hljs-title function_">mysrand</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> seed)</span> {
    next = seed;
}
</code></pre>

<p>The internal state <code>next</code> is declared as global. Each <code>myrand</code> call will modify the internal state and update it, and return a random number. Every call of <code>myrand</code> will have a different <code>next</code> value therefore the the method will return the different numbers every call. </p>

<p>Look at the <code>mysrand</code> implementation; it simply sets the seed value you pass to <code>next</code>. Therefore if you set the <code>next</code> value the same  everytime before calling <code>rand</code> it will return the same random value, because of the identical formula applied on it, which is not desirable, as the function is made to be random.</p>

<p>But depending on your needs you can set the seed to some certain value to generate the same "random sequence" each run, say for some benchmark or others.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Short answer: calling <code>srand()</code> is <strong>not</strong> like "rolling the dice" for the random number generator.  Nor is it like shuffling a deck of cards.  If anything, it's more like just cutting a deck of cards.</p>
<p>Think of it like this.  <code>rand()</code> deals from a big deck of cards, and every time you call it, all it does is pick the next card off the top of the deck, give you the value, and return that card to the bottom of the deck.  (Yes, that means the "random" sequence will repeat after a while.  It's a <em>very</em> big deck, though: typically 4,294,967,296 cards.)</p>
<p>Furthermore, every time your program runs, a brand-new pack of cards is bought from the game shop, <em>and</em> every brand-new pack of cards always has the same sequence.  So unless you do something special, every time your program runs, it will get exactly the same "random" numbers back from <code>rand()</code>.</p>
<p>Now, you might say, "Okay, so how do I shuffle the deck?"  And the answer -- at least as far as <code>rand</code> and <code>srand</code> are concerned -- is that there is no way of shuffling the deck.</p>
<p>So what does <code>srand</code> do?  Based on the analogy I've been building here, calling <code>srand(n)</code> is basically like saying, "cut the deck <code>n</code> cards from the top".  But wait, one more thing: it's actually <em>start with another brand-new deck and cut it <code>n</code> cards from the top</em>.</p>
<p>So if you call <code>srand(n)</code>, <code>rand()</code>, <code>srand(n)</code>, <code>rand()</code>, ..., with the same <code>n</code> every time, you won't just get a not-very-random sequence, you'll actually get the same number back from <code>rand()</code> every time.  (Probably not the same number you handed to <code>srand</code>, but the same number back from <code>rand</code> over and over.)</p>
<p>So the best you can do is to cut the deck <em>once</em>, that is, call <code>srand()</code> once, at the beginning of your program, with an <code>n</code> that's reasonably random, so that you'll start at a different random place in the big deck each time your program runs.  With <code>rand()</code>, that really is the best you can do.</p>
<p>[P.S. Yes, I know, in real life, when you buy a brand-new deck of cards it's typically in order, not in random order.  For the analogy here to work, I'm imagining that each deck you buy from the game shop is in a seemingly random order, but the exact same seemingly-random order as every other deck of cards you buy from that same shop.  Sort of like the identically shuffled decks of cards they use in bridge tournaments.]</p>
<hr>
<p>Addendum: For a very cute demonstration of the fact that for a given PRNG algorithm and a given seed value, you always get the same sequence, see <a href="https://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world">this question</a> (which is about Java, not C, but anyway).</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The reason is that <code>srand()</code> sets the initial state of the random generator, and all the values that generator produces are only "random enough" if you don't touch the state yourself in between.</p>

<p>For example you could do:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">int</span> <span class="hljs-title function_">getRandomValue</span><span class="hljs-params">()</span>
{
    srand(time(<span class="hljs-number">0</span>));
    <span class="hljs-keyword">return</span> rand();
}
</code></pre>

<p>and then if you call that function repeatedly so that <code>time()</code> returns the same values in adjacent calls you just get the same value generated - that's by design.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A simpler solution for using <code>srand()</code> for generating different seeds for application instances run at the same second is as seen.</p>

<pre class="lang-c s-code-block"><code class="hljs language-c">srand(time(<span class="hljs-literal">NULL</span>)-getpid());
</code></pre>

<p>This method makes your seed very close to random as there is no way to guess at what time your thread started and the pid will be different also.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>srand seeds the pseudorandom number generator.  If you call it more than once, you will reseed the RNG.  And if you call it with the same argument, it will restart the same sequence.</p>
<p>To prove it, if you do something simple like this, you will see the same number printed 100 times:</p>
<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i != <span class="hljs-number">100</span>; ++i) {
        srand(<span class="hljs-number">0</span>);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, rand());
    }
}
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<ol>
<li><p>It seems that every time <code>rand()</code> runs, it will set a new seed for the next <code>rand()</code>.</p>
</li>
<li><p>If <code>srand()</code> runs multiple times, the problem is if the two running happen in one second (the <code>time(NULL)</code> does not change), the next <code>rand()</code> will be the same as the <code>rand()</code> right after the previous <code>srand()</code>.</p>
</li>
</ol>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;That depends on what you are trying to achieve.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Randomization is performed as a function that has a starting value, namely \u0026lt;strong\u0026gt;the seed\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So, for the same seed, you will always get the same sequence of values.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you try to set the seed every time you need a random value, and the seed is the same number, you will always get the same \u0026quot;random\u0026quot; value.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Seed is usually taken from the current time, which are the seconds, as in \u0026lt;code\u0026gt;time(NULL)\u0026lt;/code\u0026gt;, so if you always set the seed before taking the random number, you will get the same number as long as you call the srand/rand combo multiple times \u0026lt;strong\u0026gt;in the same second\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To avoid this problem, srand is set only once per application, because it is doubtful that two of the application instances will be initialized in the same second, so each instance will then have a different sequence of random numbers.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;However, there is a slight possibility that you will run your app (especially if it\u0026apos;s a short one, or a command line tool or something like that) many times in a second, then you will have to resort to some other way of choosing a seed (unless the same sequence in different application instances is ok by you). But like I said, that depends on your application context of usage.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Also, you may want to try to increase the precision to microseconds (minimizing the chance of the same seed), requires (\u0026lt;code\u0026gt;sys/time.h\u0026lt;/code\u0026gt;):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;struct\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;timeval\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;t1\u0026lt;/span\u0026gt;;\u0026lt;/span\u0026gt;\ngettimeofday(\u0026amp;amp;t1, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;);\nsrand(t1.tv_usec * t1.tv_sec);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Random numbers are actually pseudo random. A seed is set first, from which each call of \u0026lt;code\u0026gt;rand\u0026lt;/code\u0026gt; gets a random number, and modifies the internal state and this new state is used in the next \u0026lt;code\u0026gt;rand\u0026lt;/code\u0026gt; call to get another number. Because a certain formula is used to generate these \u0026quot;random numbers\u0026quot; therefore setting a certain value of seed after every call to \u0026lt;code\u0026gt;rand\u0026lt;/code\u0026gt; will return the same number from the call. For example \u0026lt;code\u0026gt;srand (1234); rand ();\u0026lt;/code\u0026gt; will return the same value. Initializing once the initial state with the seed value will generate enough random numbers as you do not set the internal state with \u0026lt;code\u0026gt;srand\u0026lt;/code\u0026gt;, thus making the numbers more probable to be random.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Generally we use the \u0026lt;code\u0026gt;time (NULL)\u0026lt;/code\u0026gt; returned seconds value when initializing the seed value. Say the \u0026lt;code\u0026gt;srand (time (NULL));\u0026lt;/code\u0026gt; is in a loop. Then loop can iterate more than once in one second, therefore the number of times the loop iterates inside the loop in a second \u0026lt;code\u0026gt;rand\u0026lt;/code\u0026gt; call in the loop will return the same \u0026quot;random number\u0026quot;, which is not desired. Initializing it once at program start will set the seed once, and each time \u0026lt;code\u0026gt;rand\u0026lt;/code\u0026gt; is called, a new number is generated and the internal state is modified, so the next call \u0026lt;code\u0026gt;rand\u0026lt;/code\u0026gt; returns a number which is random enough.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example this code from \u0026lt;a href=\u0026quot;http://linux.die.net/man/3/rand\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://linux.die.net/man/3/rand\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;long\u0026lt;/span\u0026gt; next = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* RAND_MAX assumed to be 32767 */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;myrand\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt; {\n    next = next * \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1103515245\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12345\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;((\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt;)(next/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;65536\u0026lt;/span\u0026gt;) % \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;32768\u0026lt;/span\u0026gt;);\n}\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;mysrand\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; seed)\u0026lt;/span\u0026gt; {\n    next = seed;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The internal state \u0026lt;code\u0026gt;next\u0026lt;/code\u0026gt; is declared as global. Each \u0026lt;code\u0026gt;myrand\u0026lt;/code\u0026gt; call will modify the internal state and update it, and return a random number. Every call of \u0026lt;code\u0026gt;myrand\u0026lt;/code\u0026gt; will have a different \u0026lt;code\u0026gt;next\u0026lt;/code\u0026gt; value therefore the the method will return the different numbers every call. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Look at the \u0026lt;code\u0026gt;mysrand\u0026lt;/code\u0026gt; implementation; it simply sets the seed value you pass to \u0026lt;code\u0026gt;next\u0026lt;/code\u0026gt;. Therefore if you set the \u0026lt;code\u0026gt;next\u0026lt;/code\u0026gt; value the same  everytime before calling \u0026lt;code\u0026gt;rand\u0026lt;/code\u0026gt; it will return the same random value, because of the identical formula applied on it, which is not desirable, as the function is made to be random.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;But depending on your needs you can set the seed to some certain value to generate the same \u0026quot;random sequence\u0026quot; each run, say for some benchmark or others.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Short answer: calling \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt; is \u0026lt;strong\u0026gt;not\u0026lt;/strong\u0026gt; like \u0026quot;rolling the dice\u0026quot; for the random number generator.  Nor is it like shuffling a deck of cards.  If anything, it\u0026apos;s more like just cutting a deck of cards.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Think of it like this.  \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt; deals from a big deck of cards, and every time you call it, all it does is pick the next card off the top of the deck, give you the value, and return that card to the bottom of the deck.  (Yes, that means the \u0026quot;random\u0026quot; sequence will repeat after a while.  It\u0026apos;s a \u0026lt;em\u0026gt;very\u0026lt;/em\u0026gt; big deck, though: typically 4,294,967,296 cards.)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Furthermore, every time your program runs, a brand-new pack of cards is bought from the game shop, \u0026lt;em\u0026gt;and\u0026lt;/em\u0026gt; every brand-new pack of cards always has the same sequence.  So unless you do something special, every time your program runs, it will get exactly the same \u0026quot;random\u0026quot; numbers back from \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Now, you might say, \u0026quot;Okay, so how do I shuffle the deck?\u0026quot;  And the answer -- at least as far as \u0026lt;code\u0026gt;rand\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;srand\u0026lt;/code\u0026gt; are concerned -- is that there is no way of shuffling the deck.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So what does \u0026lt;code\u0026gt;srand\u0026lt;/code\u0026gt; do?  Based on the analogy I\u0026apos;ve been building here, calling \u0026lt;code\u0026gt;srand(n)\u0026lt;/code\u0026gt; is basically like saying, \u0026quot;cut the deck \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt; cards from the top\u0026quot;.  But wait, one more thing: it\u0026apos;s actually \u0026lt;em\u0026gt;start with another brand-new deck and cut it \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt; cards from the top\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So if you call \u0026lt;code\u0026gt;srand(n)\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;srand(n)\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt;, ..., with the same \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt; every time, you won\u0026apos;t just get a not-very-random sequence, you\u0026apos;ll actually get the same number back from \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt; every time.  (Probably not the same number you handed to \u0026lt;code\u0026gt;srand\u0026lt;/code\u0026gt;, but the same number back from \u0026lt;code\u0026gt;rand\u0026lt;/code\u0026gt; over and over.)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So the best you can do is to cut the deck \u0026lt;em\u0026gt;once\u0026lt;/em\u0026gt;, that is, call \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt; once, at the beginning of your program, with an \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt; that\u0026apos;s reasonably random, so that you\u0026apos;ll start at a different random place in the big deck each time your program runs.  With \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt;, that really is the best you can do.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;[P.S. Yes, I know, in real life, when you buy a brand-new deck of cards it\u0026apos;s typically in order, not in random order.  For the analogy here to work, I\u0026apos;m imagining that each deck you buy from the game shop is in a seemingly random order, but the exact same seemingly-random order as every other deck of cards you buy from that same shop.  Sort of like the identically shuffled decks of cards they use in bridge tournaments.]\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;Addendum: For a very cute demonstration of the fact that for a given PRNG algorithm and a given seed value, you always get the same sequence, see \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/15182496/why-does-this-code-using-random-strings-print-hello-world\u0026quot;\u0026gt;this question\u0026lt;/a\u0026gt; (which is about Java, not C, but anyway).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The reason is that \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt; sets the initial state of the random generator, and all the values that generator produces are only \u0026quot;random enough\u0026quot; if you don\u0026apos;t touch the state yourself in between.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example you could do:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getRandomValue\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;\n{\n    srand(time(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;));\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; rand();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and then if you call that function repeatedly so that \u0026lt;code\u0026gt;time()\u0026lt;/code\u0026gt; returns the same values in adjacent calls you just get the same value generated - that\u0026apos;s by design.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A simpler solution for using \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt; for generating different seeds for application instances run at the same second is as seen.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;srand(time(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;)-getpid());\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This method makes your seed very close to random as there is no way to guess at what time your thread started and the pid will be different also.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;srand seeds the pseudorandom number generator.  If you call it more than once, you will reseed the RNG.  And if you call it with the same argument, it will restart the same sequence.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;To prove it, if you do something simple like this, you will see the same number printed 100 times:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;stdlib.h\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;stdio.h\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i != \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;; ++i) {\n        srand(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%d\\n\u0026quot;\u0026lt;/span\u0026gt;, rand());\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;It seems that every time \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt; runs, it will set a new seed for the next \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;If \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt; runs multiple times, the problem is if the two running happen in one second (the \u0026lt;code\u0026gt;time(NULL)\u0026lt;/code\u0026gt; does not change), the next \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt; will be the same as the \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt; right after the previous \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    "],"comment":["\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;try, in a loop, calling srand and then rand\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/590042/foo-bah\u0026quot; title=\u0026quot;24,833 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Foo Bah\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment8858502_7343833\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-09-08 06:16:54Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 8, 2011 at 6:16\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;See also Dilbert\u0026apos;s \u0026lt;a href=\u0026quot;http://dilbert.com/strip/2001-10-25\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Tour of Accounting\u0026lt;/a\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/15168/jonathan-leffler\u0026quot; title=\u0026quot;700,796 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Jonathan Leffler\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment56888925_7343833\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-01-03 00:05:12Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 3, 2016 at 0:05\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;See also \u0026lt;a href=\u0026quot;https://stackoverflow.com/q/322938/15168\u0026quot;\u0026gt;Recommended way to initialize \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt;?\u0026lt;/a\u0026gt;  Using \u0026lt;code\u0026gt;time(0)\u0026lt;/code\u0026gt; for the value passed to \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt; is simplistic  and hence probably adequate since \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt; is often also simplistic (see the example implementation in the \u0026lt;a href=\u0026quot;http://port70.net/~nsz/c/c11/n1570.html#7.22.2.2p5\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;C standard\u0026lt;/a\u0026gt; which assumes RAND_MAX is 32,767).  One solution in the \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/323302/15168\u0026quot;\u0026gt;linked Q\u0026amp;amp;A\u0026lt;/a\u0026gt; uses a function to mix 3 values  the results from \u0026lt;code\u0026gt;clock()\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;time(0)\u0026lt;/code\u0026gt;, and \u0026lt;code\u0026gt;getpid()\u0026lt;/code\u0026gt;.  Using a mixing function is a good idea. A CRC could be used too.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/15168/jonathan-leffler\u0026quot; title=\u0026quot;700,796 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Jonathan Leffler\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment127174645_7343833\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2022-04-22 15:17:29Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 22 at 15:17\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Side note: \u0026lt;code\u0026gt;gettimeofday\u0026lt;/code\u0026gt; is obsolete in POSIX 2008. Instead, it introduces \u0026lt;code\u0026gt;clock_gettime\u0026lt;/code\u0026gt; which may require linking with \u0026lt;code\u0026gt;-lrt\u0026lt;/code\u0026gt;. It may not yet be available on many platforms, though. In Linux this is alright. On Mac I think it\u0026apos;s not yet available. In Windows it will probably never be available.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/912144/shahbaz\u0026quot; title=\u0026quot;44,850 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Shahbaz\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment22575446_7343909\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2013-04-07 10:23:09Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 7, 2013 at 10:23\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;t1.tv_usec is a long int, and srand takes as input an unsigned int. (And I just ran into a problem where it makes a difference.)\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2587816/jiminion\u0026quot; title=\u0026quot;5,174 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Jiminion\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment74318529_7343909\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-04-26 13:12:10Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 26, 2017 at 13:12\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;That did the trick. By increasing the precision it got rid of my duplicates. Thank you \u0026lt;i\u0026gt;very\u0026lt;/i\u0026gt; much. I have a deadline to deliver and this saved my derrière.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3074057/beezer\u0026quot; title=\u0026quot;994 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Beezer\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment115063673_7343909\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-12-01 04:00:10Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 1, 2020 at 4:00\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Don\u0026apos;t you mean (unsigned long seed) for the parameter of mysrand() ?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2587816/jiminion\u0026quot; title=\u0026quot;5,174 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Jiminion\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment74318727_7346409\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-04-26 13:15:56Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 26, 2017 at 13:15\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Jiminion This is a code snippet from \u0026lt;code\u0026gt;man srand\u0026lt;/code\u0026gt; . The range is from 0 to 32767 (assuming RAND_MAX), which is way less than the \u0026lt;code\u0026gt;long\u0026lt;/code\u0026gt; range. The state variable \u0026lt;code\u0026gt;next\u0026lt;/code\u0026gt; is made \u0026lt;code\u0026gt;long\u0026lt;/code\u0026gt; as the internal multiplication and addition will exceed the range of an \u0026lt;code\u0026gt;unsigned int\u0026lt;/code\u0026gt;. After that the result is scaled or modified within the above specified range. Though you can make the seed \u0026lt;code\u0026gt;long\u0026lt;/code\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/702361/phoxis\u0026quot; title=\u0026quot;56,722 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;phoxis\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment74726146_7346409\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-05-08 10:22:22Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 8, 2017 at 10:22\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Note that the C standard includes the snippet of code shown too.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/15168/jonathan-leffler\u0026quot; title=\u0026quot;700,796 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Jonathan Leffler\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment79138269_7346409\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-09-07 05:15:36Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 7, 2017 at 5:15\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Superb explanation Steve.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3796318/drunkenmaster\u0026quot; title=\u0026quot;1,158 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;DrunkenMaster\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment100244060_40250047\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2019-07-02 06:38:30Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 2, 2019 at 6:38\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;The main point is that initializing with \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt; several times with the same seed will result in identical values returned by \u0026lt;code\u0026gt;rand()\u0026lt;/code\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1885002/king-thrushbeard\u0026quot; title=\u0026quot;869 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;King Thrushbeard\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment82169073_47605186\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-12-02 06:25:34Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 2, 2017 at 6:25\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        "],"id":376,"title":"srand() — why call it only once?","content":"\n                \n\u0026lt;p\u0026gt;This question is about a comment in this question\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/322938/recommended-way-to-initialize-srand\u0026quot;\u0026gt;Recommended way to initialize srand?\u0026lt;/a\u0026gt; The first comment says that \u0026lt;code\u0026gt;srand()\u0026lt;/code\u0026gt; should be called only ONCE in an application. Why is it so?\u0026lt;/p\u0026gt;\n    ","slug":"srand()-why-call-it-only-once-1657387794760","postType":"QUESTION","createdAt":"2022-07-09T17:29:54.000Z","updatedAt":"2022-07-09T17:29:54.000Z","tags":[{"id":2062,"name":"srand","slug":"srand","createdAt":"2022-07-09T17:29:54.000Z","updatedAt":"2022-07-09T17:29:54.000Z","Questions_Tags":{"questionId":376,"tagId":2062}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"srand()-why-call-it-only-once-1657387794760"},"buildId":"4Y8KGE-c2lolBeBmcum_I","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>