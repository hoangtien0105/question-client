{"pageProps":{"data":{"count":1,"rows":[{"answer":["\n&lt;p&gt;&lt;strong&gt;2019 modern browsers update&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;This is the approach I&apos;d now recommend with a few caveats:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;A relatively modern browser is required&lt;/li&gt;\n&lt;li&gt;If the file is expected to be &lt;strong&gt;very large&lt;/strong&gt; you should likely do something similar to the original approach (iframe and cookie) because some of the below operations could likely consume system memory at least as large as the file being downloaded and/or other interesting CPU side effects.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;false&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;fetch&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;https://jsonplaceholder.typicode.com/todos/1&apos;&lt;/span&gt;)\n  .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;resp&lt;/span&gt; =&amp;gt;&lt;/span&gt; resp.&lt;span class=&quot;hljs-title function_&quot;&gt;blob&lt;/span&gt;())\n  .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;blob&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n    a.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n    a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = url;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// the filename you want&lt;/span&gt;\n    a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;todo-1.json&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(a);\n    a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(url);\n    &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;your file has downloaded!&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// or you know, something with better UX...&lt;/span&gt;\n  })\n  .&lt;span class=&quot;hljs-title function_&quot;&gt;catch&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;oh no!&apos;&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;2012 Original jQuery/iframe/Cookie based approach&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/a/7660817/107768&quot;&gt;Bluish&lt;/a&gt; is completely right about this, you can&apos;t do it through Ajax because JavaScript cannot save files directly to a user&apos;s computer (out of security concerns). Unfortunately pointing the &lt;em&gt;main window&apos;s&lt;/em&gt; URL at your file download means you have little control over what the user experience is when a file download occurs.&lt;/p&gt;\n\n&lt;p&gt;I created &lt;a href=&quot;http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx&quot; rel=&quot;noreferrer&quot;&gt;jQuery File Download&lt;/a&gt; which allows for an &quot;Ajax like&quot; experience with file downloads complete with OnSuccess and OnFailure callbacks to provide for a better user experience. Take a look at my &lt;a href=&quot;http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx&quot; rel=&quot;noreferrer&quot;&gt;blog post&lt;/a&gt; on the common problem that the plugin solves and some ways to use it and also a &lt;a href=&quot;http://jqueryfiledownload.apphb.com/&quot; rel=&quot;noreferrer&quot;&gt;demo of jQuery File Download in action&lt;/a&gt;. Here is the &lt;a href=&quot;http://github.com/johnculviner/jquery.fileDownload/blob/master/src/Scripts/jquery.fileDownload.js&quot; rel=&quot;noreferrer&quot;&gt;source&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Here is a simple use case demo using the plugin &lt;a href=&quot;http://github.com/johnculviner/jquery.fileDownload/blob/master/src/Scripts/jquery.fileDownload.js&quot; rel=&quot;noreferrer&quot;&gt;source&lt;/a&gt; with promises. The &lt;a href=&quot;http://jqueryfiledownload.apphb.com/&quot; rel=&quot;noreferrer&quot;&gt;demo page&lt;/a&gt; includes many other, &apos;better UX&apos; examples as well.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.&lt;span class=&quot;hljs-title function_&quot;&gt;fileDownload&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;some/file.pdf&apos;&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;done&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;File download a success!&apos;&lt;/span&gt;); })\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;fail&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;File download failed!&apos;&lt;/span&gt;); });\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Depending on what browsers you need to support you may be able to use &lt;a href=&quot;https://github.com/eligrey/FileSaver.js/&quot; rel=&quot;noreferrer&quot;&gt;https://github.com/eligrey/FileSaver.js/&lt;/a&gt; which allows more explicit control than the IFRAME method jQuery File Download uses.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;em&gt;Noone posted this &lt;a href=&quot;https://stackoverflow.com/questions/4545311/download-a-file-by-jquery-ajax#comment4981707_4545311&quot;&gt;@Pekka&apos;s solution&lt;/a&gt;... so I&apos;ll post it. It can help someone.&lt;/em&gt;&lt;/p&gt;\n\n&lt;p&gt;You don&apos;t need to do this through Ajax. Just use&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;location&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;download.action?para1=value1....&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;You can with HTML5&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;NB: The file data returned MUST be base64 encoded because you cannot JSON encode binary data&lt;/p&gt;\n\n&lt;p&gt;In my &lt;code&gt;AJAX&lt;/code&gt; response I have a data structure that looks like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;{\n    &lt;span class=&quot;hljs-attr&quot;&gt;result&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;OK&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;download&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;mimetype&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;string&lt;/span&gt;(mimetype &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; the form &lt;span class=&quot;hljs-string&quot;&gt;&apos;major/minor&apos;&lt;/span&gt;),\n        &lt;span class=&quot;hljs-attr&quot;&gt;filename&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;string&lt;/span&gt;(the name &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; the file to download),\n        &lt;span class=&quot;hljs-attr&quot;&gt;data&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;base64&lt;/span&gt;(the binary data &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; base64 to download)\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;That means that I can do the following to save a file via AJAX&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Blob&lt;/span&gt; &amp;amp;&amp;amp; (&lt;span class=&quot;hljs-string&quot;&gt;&apos;download&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; a) &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;atob&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Do it the HTML5 compliant way&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; blob = &lt;span class=&quot;hljs-title function_&quot;&gt;base64ToBlob&lt;/span&gt;(result.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;data&lt;/span&gt;, result.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;mimetype&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n    a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = url;\n    a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = result.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;filename&lt;/span&gt;;\n    a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(url);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The function base64ToBlob was taken from &lt;a href=&quot;https://stackoverflow.com/a/16245768&quot;&gt;here&lt;/a&gt; and must be used in compliance with this function &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;base64ToBlob&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;base64, mimetype, slicesize&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;atob&lt;/span&gt; || !&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Uint8Array&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// The current browser doesn&apos;t have the atob function. Cannot continue&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n    mimetype = mimetype || &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n    slicesize = slicesize || &lt;span class=&quot;hljs-number&quot;&gt;512&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bytechars = &lt;span class=&quot;hljs-title function_&quot;&gt;atob&lt;/span&gt;(base64);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bytearrays = [];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; offset = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; offset &amp;lt; bytechars.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; offset += slicesize) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; slice = bytechars.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(offset, offset + slicesize);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bytenums = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;(slice.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; slice.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n            bytenums[i] = slice.&lt;span class=&quot;hljs-title function_&quot;&gt;charCodeAt&lt;/span&gt;(i);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bytearray = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Uint8Array&lt;/span&gt;(bytenums);\n        bytearrays[bytearrays.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;] = bytearray;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;(bytearrays, {&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: mimetype});\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This is good if your server is dumping filedata to be saved. However, I&apos;ve not quite worked out how one would implement a HTML4 fallback&lt;/p&gt;\n    ","\n&lt;p&gt;The simple way to make the browser downloads a file is to make the request like that:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;downloadFile&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;urlToSend&lt;/span&gt;) {\n     &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; req = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;XMLHttpRequest&lt;/span&gt;();\n     req.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;GET&quot;&lt;/span&gt;, urlToSend, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n     req.&lt;span class=&quot;hljs-property&quot;&gt;responseType&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;blob&quot;&lt;/span&gt;;\n     req.&lt;span class=&quot;hljs-property&quot;&gt;onload&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;event&lt;/span&gt;) {\n         &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; blob = req.&lt;span class=&quot;hljs-property&quot;&gt;response&lt;/span&gt;;\n         &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; fileName = req.&lt;span class=&quot;hljs-title function_&quot;&gt;getResponseHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;fileName&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;//if you have the fileName header available&lt;/span&gt;\n         &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; link=&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n         link.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n         link.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt;=fileName;\n         link.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n     };\n\n     req.&lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;();\n }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This opens the browser download pop up.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;1. Framework agnostic: Servlet downloading file as attachment&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;!-- &lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;JS&lt;/span&gt; --&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;javascript:window.location=&apos;downloadServlet?param1=value1&apos;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    download\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&amp;lt;!-- without &lt;span class=&quot;hljs-variable constant_&quot;&gt;JS&lt;/span&gt; --&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadServlet?param1=value1&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;download&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;2. Struts2 Framework: Action downloading file as attachment&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;!-- &lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;JS&lt;/span&gt; --&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;javascript:window.location=&apos;downloadAction.action?param1=value1&apos;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    download\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&amp;lt;!-- without &lt;span class=&quot;hljs-variable constant_&quot;&gt;JS&lt;/span&gt; --&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadAction.action?param1=value1&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;download&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It would be better to use &lt;code&gt;&amp;lt;s:a&amp;gt;&lt;/code&gt; tag pointing with &lt;em&gt;OGNL&lt;/em&gt; to an &lt;em&gt;URL&lt;/em&gt; created with &lt;code&gt;&amp;lt;s:url&amp;gt;&lt;/code&gt; tag:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;!-- without &lt;span class=&quot;hljs-variable constant_&quot;&gt;JS&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Struts&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;tags&lt;/span&gt;: &lt;span class=&quot;hljs-variable constant_&quot;&gt;THE&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;RIGHT&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;WAY&lt;/span&gt; --&amp;gt;    \n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;s:url&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadAction.action&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;var&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;url&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;s:param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;param1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;value1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;s:param&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;s:ulr&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;s:a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;%{url}&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;download&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;s:a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;In the above cases, you &lt;strong&gt;need&lt;/strong&gt; to write the &lt;em&gt;Content-Disposition&lt;/em&gt; header to the &lt;em&gt;response&lt;/em&gt;, specifying that the file needs to be downloaded (&lt;code&gt;attachment&lt;/code&gt;) and not opened by the browser (&lt;code&gt;inline&lt;/code&gt;). You &lt;strong&gt;need&lt;/strong&gt; to specify the &lt;em&gt;Content Type&lt;/em&gt; too, and you may want to add the file name and length (to help the browser drawing a realistic progressbar). &lt;/p&gt;\n\n&lt;p&gt;For example, when downloading a ZIP:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;response.&lt;span class=&quot;hljs-title function_&quot;&gt;setContentType&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;application/zip&quot;&lt;/span&gt;);\nresponse.&lt;span class=&quot;hljs-title function_&quot;&gt;addHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Disposition&quot;&lt;/span&gt;, \n                   &lt;span class=&quot;hljs-string&quot;&gt;&quot;attachment; filename=\\&quot;name of my file.zip\\&quot;&quot;&lt;/span&gt;);\nresponse.&lt;span class=&quot;hljs-title function_&quot;&gt;setHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Length&quot;&lt;/span&gt;, myFile.&lt;span class=&quot;hljs-title function_&quot;&gt;length&lt;/span&gt;()); &lt;span class=&quot;hljs-comment&quot;&gt;// or myByte[].length...&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;With Struts2 (unless you are using the Action as a Servlet, an hack &lt;a href=&quot;https://stackoverflow.com/a/16654313/1654265&quot;&gt;for direct streaming&lt;/a&gt;, for example), you don&apos;t need to directly write anything to the response; simply using the &lt;a href=&quot;http://struts.apache.org/release/2.3.x/struts2-core/apidocs/org/apache/struts2/dispatcher/StreamResult.html&quot; rel=&quot;noreferrer&quot;&gt;Stream result type&lt;/a&gt; and configuring it in struts.xml will work: &lt;a href=&quot;http://www.mkyong.com/struts2/struts-2-download-file-example/&quot; rel=&quot;noreferrer&quot;&gt;EXAMPLE&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;result name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;success&quot;&lt;/span&gt; type=&lt;span class=&quot;hljs-string&quot;&gt;&quot;stream&quot;&lt;/span&gt;&amp;gt;\n   &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentType&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;application/zip&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n   &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentDisposition&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;attachment;filename=&quot;${fileName}&quot;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n   &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentLength&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${fileLength}&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&amp;lt;/result&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;3. Framework agnostic (/ Struts2 framework): Servlet(/Action) opening file inside the browser&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;If you want to open the file inside the browser, instead of downloading it, the &lt;em&gt;Content-disposition&lt;/em&gt; must be set to &lt;em&gt;inline&lt;/em&gt;, but the target can&apos;t be the current window location; you must target a new window created by javascript, an &lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt; in the page, or a new window created on-the-fly with the &quot;discussed&quot; target=&quot;_blank&quot;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;!-- &lt;span class=&quot;hljs-title class_&quot;&gt;From&lt;/span&gt; a parent page into an &lt;span class=&quot;hljs-title class_&quot;&gt;IFrame&lt;/span&gt; without javascript --&amp;gt;   \n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadServlet?param1=value1&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;iFrameName&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    download\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&amp;lt;!-- &lt;span class=&quot;hljs-title class_&quot;&gt;In&lt;/span&gt; a &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt; without javascript --&amp;gt; \n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadServlet?param1=value1&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;_blank&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    download\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&amp;lt;!-- &lt;span class=&quot;hljs-title class_&quot;&gt;In&lt;/span&gt; a &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;with&lt;/span&gt; javascript --&amp;gt;    \n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;javascript:window.open(&apos;downloadServlet?param1=value1&apos;);&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;\n    download\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I have created little function as workaround solution (inspired by @JohnCulviner plugin):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// creates iframe and form in it with hidden field,&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// then submit form with provided data&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// url - form url&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// data - data to form field&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// input_name - form hidden input name&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ajax_download&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;url, data, input_name&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; $iframe,\n        iframe_doc,\n        iframe_html;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (($iframe = $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#download_iframe&apos;&lt;/span&gt;)).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        $iframe = $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;iframe id=&apos;download_iframe&apos;&quot;&lt;/span&gt; +\n                    &lt;span class=&quot;hljs-string&quot;&gt;&quot; style=&apos;display: none&apos; src=&apos;about:blank&apos;&amp;gt;&amp;lt;/iframe&amp;gt;&quot;&lt;/span&gt;\n                   ).&lt;span class=&quot;hljs-title function_&quot;&gt;appendTo&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;body&quot;&lt;/span&gt;);\n    }\n\n    iframe_doc = $iframe[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;contentWindow&lt;/span&gt; || $iframe[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;contentDocument&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (iframe_doc.&lt;span class=&quot;hljs-property&quot;&gt;document&lt;/span&gt;) {\n        iframe_doc = iframe_doc.&lt;span class=&quot;hljs-property&quot;&gt;document&lt;/span&gt;;\n    }\n\n    iframe_html = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;form method=&apos;POST&apos; action=&apos;&quot;&lt;/span&gt; +\n                  url +&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&amp;gt;&quot;&lt;/span&gt; +\n                  &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;input type=hidden name=&apos;&quot;&lt;/span&gt; + input_name + &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos; value=&apos;&quot;&lt;/span&gt; +\n                  &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(data) +&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;/&amp;gt;&amp;lt;/form&amp;gt;&quot;&lt;/span&gt; +\n                  &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&quot;&lt;/span&gt;;\n\n    iframe_doc.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;();\n    iframe_doc.&lt;span class=&quot;hljs-title function_&quot;&gt;write&lt;/span&gt;(iframe_html);\n    $(iframe_doc).&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;form&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Demo with click event:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#someid&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-title function_&quot;&gt;ajax_download&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/download.action&apos;&lt;/span&gt;, {&lt;span class=&quot;hljs-string&quot;&gt;&apos;para1&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;para2&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;}, &lt;span class=&quot;hljs-string&quot;&gt;&apos;dataname&apos;&lt;/span&gt;);\n});\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I faced the same issue and successfully solved it. My use-case is this.&lt;/p&gt;\n\n&lt;p&gt;&quot;&lt;i&gt;Post JSON data to the server and receive an excel file.\nThat excel file is created by the server and returned as a response to the client. Download that response as a file with custom name in browser&lt;/i&gt;&quot;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&quot;#my-button&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;click&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Data to post&lt;/span&gt;\ndata = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;ids&lt;/span&gt;: [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]\n};\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Use XMLHttpRequest instead of Jquery $ajax&lt;/span&gt;\nxhttp = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;XMLHttpRequest&lt;/span&gt;();\nxhttp.&lt;span class=&quot;hljs-property&quot;&gt;onreadystatechange&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; a;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (xhttp.&lt;span class=&quot;hljs-property&quot;&gt;readyState&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &amp;amp;&amp;amp; xhttp.&lt;span class=&quot;hljs-property&quot;&gt;status&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Trick for making downloadable link&lt;/span&gt;\n        a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n        a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(xhttp.&lt;span class=&quot;hljs-property&quot;&gt;response&lt;/span&gt;);\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Give filename you wish to download&lt;/span&gt;\n        a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;test-file.xls&quot;&lt;/span&gt;;\n        a.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(a);\n        a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n    }\n};\n&lt;span class=&quot;hljs-comment&quot;&gt;// Post data to URL which handles post request&lt;/span&gt;\nxhttp.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;POST&quot;&lt;/span&gt;, excelDownloadUrl);\nxhttp.&lt;span class=&quot;hljs-title function_&quot;&gt;setRequestHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-comment&quot;&gt;// You should set responseType as blob for binary responses&lt;/span&gt;\nxhttp.&lt;span class=&quot;hljs-property&quot;&gt;responseType&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;blob&apos;&lt;/span&gt;;\nxhttp.&lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(data));\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The above snippet is just doing following&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Posting an array as JSON to the server using XMLHttpRequest.&lt;/li&gt;\n&lt;li&gt;After fetching content as a blob(binary), we are creating a downloadable URL and attaching it to invisible &quot;a&quot; link then clicking it. I did a POST request here. Instead, you can go for a simple GET too. We cannot download the file through Ajax, must use XMLHttpRequest.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Here we need to carefully set few things on the server side. I set few headers in Python Django HttpResponse. You need to set them accordingly if you use other programming languages.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;# &lt;span class=&quot;hljs-title class_&quot;&gt;In&lt;/span&gt; python django code\nresponse = &lt;span class=&quot;hljs-title class_&quot;&gt;HttpResponse&lt;/span&gt;(file_content, content_type=&lt;span class=&quot;hljs-string&quot;&gt;&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Since I download xls(excel) here, I adjusted contentType to above one. You need to set it according to your file type. You can use this technique to download any kind of files.&lt;/p&gt;\n    ","\n&lt;p&gt;Ok, based on ndpu&apos;s code heres an improved (I think) version of ajax_download;-&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ajax_download&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;url, data&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; $iframe,\n        iframe_doc,\n        iframe_html;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (($iframe = $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#download_iframe&apos;&lt;/span&gt;)).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        $iframe = $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;iframe id=&apos;download_iframe&apos;&quot;&lt;/span&gt; +\n                    &lt;span class=&quot;hljs-string&quot;&gt;&quot; style=&apos;display: none&apos; src=&apos;about:blank&apos;&amp;gt;&amp;lt;/iframe&amp;gt;&quot;&lt;/span&gt;\n                   ).&lt;span class=&quot;hljs-title function_&quot;&gt;appendTo&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;body&quot;&lt;/span&gt;);\n    }\n\n    iframe_doc = $iframe[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;contentWindow&lt;/span&gt; || $iframe[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;contentDocument&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (iframe_doc.&lt;span class=&quot;hljs-property&quot;&gt;document&lt;/span&gt;) {\n        iframe_doc = iframe_doc.&lt;span class=&quot;hljs-property&quot;&gt;document&lt;/span&gt;;\n    }\n\n    iframe_html = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;form method=&apos;POST&apos; action=&apos;&quot;&lt;/span&gt; +\n                  url +&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&amp;gt;&quot;&lt;/span&gt; \n\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(data).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;){\n        iframe_html += &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;input type=&apos;hidden&apos; name=&apos;&quot;&lt;/span&gt;+key+&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos; value=&apos;&quot;&lt;/span&gt;+data[key]+&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&amp;gt;&quot;&lt;/span&gt;;\n\n    });\n\n        iframe_html +=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;/form&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&quot;&lt;/span&gt;;\n\n    iframe_doc.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;();\n    iframe_doc.&lt;span class=&quot;hljs-title function_&quot;&gt;write&lt;/span&gt;(iframe_html);\n    $(iframe_doc).&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;form&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Use this like this;-&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#someid&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-title function_&quot;&gt;ajax_download&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/download.action&apos;&lt;/span&gt;, {&lt;span class=&quot;hljs-string&quot;&gt;&apos;para1&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;para2&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;});\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The params are sent as proper post params as if coming from an input rather than as a json encoded string as per the previous example.&lt;/p&gt;\n\n&lt;p&gt;CAVEAT: Be wary about the potential for variable injection on those forms. There might be a safer way to encode those variables. Alternatively contemplate escaping them.&lt;/p&gt;\n    ","\n&lt;p&gt;Here is what I did, pure javascript and html. Did not test it but this should work in all browsers.&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Javascript Function&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; iframe = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;iframe&apos;&lt;/span&gt;);\niframe.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;IFRAMEID&quot;&lt;/span&gt;;\niframe.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(iframe);\niframe.&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;SERVERURL&apos;&lt;/span&gt;+&lt;span class=&quot;hljs-string&quot;&gt;&apos;?&apos;&lt;/span&gt; + $.&lt;span class=&quot;hljs-title function_&quot;&gt;param&lt;/span&gt;($scope.&lt;span class=&quot;hljs-property&quot;&gt;filtro&lt;/span&gt;);\niframe.&lt;span class=&quot;hljs-title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;load&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n     &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;FILE LOAD DONE.. Download should start now&quot;&lt;/span&gt;);\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Using just components that is supported in all browsers no additional\n  libraries.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/JghC5.png&quot; alt=&quot;enter image description here&quot;&gt;\n&lt;img src=&quot;https://i.stack.imgur.com/wNPAx.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Here is my server side JAVA Spring controller code.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;@&lt;span class=&quot;hljs-title class_&quot;&gt;RequestMapping&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/rootto/my/xlsx&quot;&lt;/span&gt;, method = &lt;span class=&quot;hljs-title class_&quot;&gt;RequestMethod&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;GET&lt;/span&gt;)\npublic &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;downloadExcelFile&lt;/span&gt;(@&lt;span class=&quot;hljs-title class_&quot;&gt;RequestParam&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;param1&quot;&lt;/span&gt;, required = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;) &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt; param1,\n    &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServletRequest&lt;/span&gt; request, &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServletResponse&lt;/span&gt; response)\n            throws &lt;span class=&quot;hljs-title class_&quot;&gt;ParseException&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Workbook&lt;/span&gt; wb = service.&lt;span class=&quot;hljs-title function_&quot;&gt;getWorkbook&lt;/span&gt;(param1);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (wb != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n            &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt; fileName = &lt;span class=&quot;hljs-string&quot;&gt;&quot;myfile_&quot;&lt;/span&gt; + sdf.&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;());\n            response.&lt;span class=&quot;hljs-title function_&quot;&gt;setContentType&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;&lt;/span&gt;);\n            response.&lt;span class=&quot;hljs-title function_&quot;&gt;setHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-disposition&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;attachment; filename=\\&quot;&quot;&lt;/span&gt; + fileName + &lt;span class=&quot;hljs-string&quot;&gt;&quot;.xlsx\\&quot;&quot;&lt;/span&gt;);\n            wb.&lt;span class=&quot;hljs-title function_&quot;&gt;write&lt;/span&gt;(response.&lt;span class=&quot;hljs-title function_&quot;&gt;getOutputStream&lt;/span&gt;());\n            response.&lt;span class=&quot;hljs-title function_&quot;&gt;getOutputStream&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;close&lt;/span&gt;();\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;hljs-title class_&quot;&gt;IOException&lt;/span&gt; e) {\n            e.&lt;span class=&quot;hljs-title function_&quot;&gt;printStackTrace&lt;/span&gt;();\n        }\n    }\n    }\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;My approach is completly based on jQuery. The problem for me was that it has to be a POST-HTTP call. And I wanted it to be done by jQuery alone.&lt;/p&gt;\n&lt;p&gt;The solution:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n    &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;POST&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;/some/webpage&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;headers&lt;/span&gt;: {&lt;span class=&quot;hljs-string&quot;&gt;&apos;X-CSRF-TOKEN&apos;&lt;/span&gt;: csrfToken},\n    &lt;span class=&quot;hljs-attr&quot;&gt;data&lt;/span&gt;: additionalDataToSend,\n    &lt;span class=&quot;hljs-attr&quot;&gt;dataType&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;success&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;result&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; blob = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;([result], { &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/octetstream&quot;&lt;/span&gt; }); \n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n        a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n        a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;test.xml&quot;&lt;/span&gt;;;\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(a);\n        a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;removeChild&lt;/span&gt;(a);\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt;);\n                        \n        ...\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;error&lt;/span&gt;: errorDialog\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Explanation:&lt;/p&gt;\n&lt;p&gt;What I and many others do is to create a link on the webpage, indicating that the target should be downloaded and putting the result of the http-request as the target. After that I append the link to the document than simply &lt;em&gt;clicking&lt;/em&gt; the link and removing the link afterwards. You don&apos;t need an iframe anymore.&lt;/p&gt;\n&lt;p&gt;The magic lies in the lines&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; blob = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;([result], { &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/octetstream&quot;&lt;/span&gt; }); \na.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The interesting point is that this solution is only working with a &quot;&lt;em&gt;blob&lt;/em&gt;&quot;. As you can see in other answers, some are simply using a blob but not explaining why and how to create it.\nAs you can read e.g. in the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL&quot; rel=&quot;noreferrer&quot;&gt;Mozilla developer documentation&lt;/a&gt; you need a file, media ressource or blob for the function &quot;&lt;em&gt;createObjectURL()&lt;/em&gt;&quot; to work. The problem is that your http-response might not be any of those.\nTherefore the first thing you must do is to convert your response to a blob. This is what the first line does. Then you can use the &quot;&lt;em&gt;createObjectURL&lt;/em&gt;&quot; with your newly created blob.\nIf you than click the link your browser will open a file-save dialog and you can save your data. Obviously it s possible that you cannot define a fixed filename for your file to download. Then you must make your response more complex like in the answer from Luke.&lt;/p&gt;\n&lt;p&gt;And don&apos;t forget to free up the memory especially when you are working with large files. For more examples and information you can look at &lt;a href=&quot;https://javascript.info/blob&quot; rel=&quot;noreferrer&quot;&gt;the details of the JS blob object&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;How to DOWNLOAD a file after receiving it by AJAX&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Its convenient when the file is created for a long time and you need to show PRELOADER&lt;/p&gt;\n\n&lt;p&gt;Example when submitting a web form:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;script&amp;gt;\n$(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;form&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#loader&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;show&lt;/span&gt;();\n        $.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n            &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: $(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;action&apos;&lt;/span&gt;),\n            &lt;span class=&quot;hljs-attr&quot;&gt;data&lt;/span&gt;: $(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;serialize&lt;/span&gt;(),\n            &lt;span class=&quot;hljs-attr&quot;&gt;dataType&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;binary&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-attr&quot;&gt;xhrFields&lt;/span&gt;: {\n                &lt;span class=&quot;hljs-string&quot;&gt;&apos;responseType&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;blob&apos;&lt;/span&gt;\n            },\n            &lt;span class=&quot;hljs-attr&quot;&gt;success&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data, status, xhr&lt;/span&gt;) {\n                $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#loader&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;hide&lt;/span&gt;();\n                &lt;span class=&quot;hljs-comment&quot;&gt;// if(data.type.indexOf(&apos;text/html&apos;) != -1){//If instead of a file you get an error page&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     var reader = new FileReader();&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     reader.readAsText(data);&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     reader.onload = function() {alert(reader.result);};&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     return;&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// }&lt;/span&gt;\n                &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; link = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;),\n                    filename = &lt;span class=&quot;hljs-string&quot;&gt;&apos;file.xlsx&apos;&lt;/span&gt;;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// if(xhr.getResponseHeader(&apos;Content-Disposition&apos;)){//filename &lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     filename = xhr.getResponseHeader(&apos;Content-Disposition&apos;);&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     filename=filename.match(/filename=&quot;(.*?)&quot;/)[1];&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//     filename=decodeURIComponent(escape(filename));&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;// }&lt;/span&gt;\n                link.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = &lt;span class=&quot;hljs-variable constant_&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(data);\n                link.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = filename;\n                link.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n            }\n        });\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n    });\n});\n&amp;lt;/script&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Optional functional is commented out to simplify the example.&lt;/p&gt;\n\n&lt;p&gt;No need to create temporary files on the server.&lt;/p&gt;\n\n&lt;p&gt;On jQuery v2.2.4 OK. There will be an error on the old version:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Uncaught&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DOMException&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Failed&lt;/span&gt; to read the &lt;span class=&quot;hljs-string&quot;&gt;&apos;responseText&apos;&lt;/span&gt; property &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;XMLHttpRequest&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;The&lt;/span&gt; value is only accessible &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; the object&lt;span class=&quot;hljs-string&quot;&gt;&apos;s &apos;&lt;/span&gt;responseType&lt;span class=&quot;hljs-string&quot;&gt;&apos; is &apos;&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos; or &apos;&lt;/span&gt;text&lt;span class=&quot;hljs-string&quot;&gt;&apos; (was &apos;&lt;/span&gt;blob&lt;span class=&quot;hljs-string&quot;&gt;&apos;).\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;downloadURI&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;uri, name&lt;/span&gt;) \n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; link = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;);\n    link.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = name;\n    link.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = uri;\n    link.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I try to download a CSV file and then do something after download has finished. So I need to implement an appropriate &lt;code&gt;callback&lt;/code&gt; function.&lt;/p&gt;\n\n&lt;p&gt;Using &lt;code&gt;window.location=&quot;...&quot;&lt;/code&gt; is not a good idea because I cannot operate the program after finishing download.  Something like this, change header so it is not a good idea.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;fetch&lt;/code&gt; is a good alternative however &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API&quot; rel=&quot;noreferrer&quot;&gt;it cannot support IE 11&lt;/a&gt;. And &lt;code&gt;window.URL.createObjectURL&lt;/code&gt; cannot support IE 11.You can refer &lt;a href=&quot;https://stackoverflow.com/questions/24007073/open-links-made-by-createobjecturl-in-ie11&quot;&gt;this&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;This is my code, it is similar to the code of Shahrukh Alam. But you should take care that &lt;code&gt;window.URL.createObjectURL&lt;/code&gt; maybe create memory leaks. You can refer &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL&quot; rel=&quot;noreferrer&quot;&gt;this&lt;/a&gt;. When response has arrived, data will be stored into memory of browser. So before you click &lt;code&gt;a&lt;/code&gt; link, the file has been downloaded. It means that you can do anything after download.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n    &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;your download url&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;GET&apos;&lt;/span&gt;,\n}).&lt;span class=&quot;hljs-title function_&quot;&gt;done&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;data, textStatus, request&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// csv =&amp;gt; Blob&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; blob = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;([data]);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// the file name from server.&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; fileName = request.&lt;span class=&quot;hljs-title function_&quot;&gt;getResponseHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;fileName&apos;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;navigator&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;navigator&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;msSaveOrOpenBlob&lt;/span&gt;) { &lt;span class=&quot;hljs-comment&quot;&gt;// for IE&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;navigator&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;msSaveOrOpenBlob&lt;/span&gt;(blob, fileName);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; { &lt;span class=&quot;hljs-comment&quot;&gt;// for others&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n    a.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n    a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = url;\n    a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = fileName;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(a);\n    a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(url);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Do something after download &lt;/span&gt;\n    ...\n\n    }\n}).&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(after_download)\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Adding some more things to  above answer for downloading a file&lt;/p&gt;\n\n&lt;p&gt;Below is some java spring code which generates byte Array&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;@&lt;span class=&quot;hljs-title class_&quot;&gt;RequestMapping&lt;/span&gt;(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/downloadReport&quot;&lt;/span&gt;, method = { &lt;span class=&quot;hljs-title class_&quot;&gt;RequestMethod&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;POST&lt;/span&gt; })\n    public &lt;span class=&quot;hljs-title class_&quot;&gt;ResponseEntity&lt;/span&gt;&amp;lt;byte[]&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;downloadReport&lt;/span&gt;(\n            @&lt;span class=&quot;hljs-title class_&quot;&gt;RequestBody&lt;/span&gt; final &lt;span class=&quot;hljs-title class_&quot;&gt;SomeObejct&lt;/span&gt; obj, &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServletResponse&lt;/span&gt; response) throws &lt;span class=&quot;hljs-title class_&quot;&gt;Exception&lt;/span&gt; {\n\n        &lt;span class=&quot;hljs-title class_&quot;&gt;OutputStream&lt;/span&gt; out = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ByteArrayOutputStream&lt;/span&gt;();\n        &lt;span class=&quot;hljs-comment&quot;&gt;// write something to output stream&lt;/span&gt;\n        &lt;span class=&quot;hljs-title class_&quot;&gt;HttpHeaders&lt;/span&gt; respHeaders = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpHeaders&lt;/span&gt;();\n        respHeaders.&lt;span class=&quot;hljs-title function_&quot;&gt;setContentType&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;MediaType&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;APPLICATION_OCTET_STREAM&lt;/span&gt;);\n        respHeaders.&lt;span class=&quot;hljs-title function_&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;X-File-Name&quot;&lt;/span&gt;, name);\n        &lt;span class=&quot;hljs-title class_&quot;&gt;ByteArrayOutputStream&lt;/span&gt; bos = (&lt;span class=&quot;hljs-title class_&quot;&gt;ByteArrayOutputStream&lt;/span&gt;) out;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ResponseEntity&lt;/span&gt;&amp;lt;byte[]&amp;gt;(bos.&lt;span class=&quot;hljs-title function_&quot;&gt;toByteArray&lt;/span&gt;(), respHeaders, &lt;span class=&quot;hljs-title class_&quot;&gt;HttpStatus&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;CREATED&lt;/span&gt;);\n    }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now in  javascript code using FileSaver.js ,can download a file with below code &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; json=angular.&lt;span class=&quot;hljs-title function_&quot;&gt;toJson&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;somejsobject&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; url=apiEndPoint+&lt;span class=&quot;hljs-string&quot;&gt;&apos;some url&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; xhr = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;XMLHttpRequest&lt;/span&gt;();\n&lt;span class=&quot;hljs-comment&quot;&gt;//headers(&apos;X-File-Name&apos;)&lt;/span&gt;\nxhr.&lt;span class=&quot;hljs-property&quot;&gt;onreadystatechange&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;readyState&lt;/span&gt; == &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;status&lt;/span&gt; == &lt;span class=&quot;hljs-number&quot;&gt;201&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; res = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;response&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; fileName=&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getResponseHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;X-File-Name&apos;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;([res]);\n        &lt;span class=&quot;hljs-title function_&quot;&gt;saveAs&lt;/span&gt;(data, fileName); &lt;span class=&quot;hljs-comment&quot;&gt;//this from FileSaver.js&lt;/span&gt;\n    }\n}    \nxhr.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;POST&apos;&lt;/span&gt;, url);\nxhr.&lt;span class=&quot;hljs-title function_&quot;&gt;setRequestHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Authorization&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;Bearer &apos;&lt;/span&gt; + token);\nxhr.&lt;span class=&quot;hljs-title function_&quot;&gt;setRequestHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;application/json&apos;&lt;/span&gt;);\nxhr.&lt;span class=&quot;hljs-property&quot;&gt;responseType&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;arraybuffer&apos;&lt;/span&gt;;\nxhr.&lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;(json);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The above will download file &lt;/p&gt;\n    ","\n&lt;p&gt;In Rails, I do it this way: &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;download_file&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;file_id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; url       = &lt;span class=&quot;hljs-string&quot;&gt;&apos;/files/&apos;&lt;/span&gt; + file_id + &lt;span class=&quot;hljs-string&quot;&gt;&apos;/download_file&apos;&lt;/span&gt;;\n    $.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n    &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;GET&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: url,\n    &lt;span class=&quot;hljs-attr&quot;&gt;processData&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;success&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;) {\n       &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;location&lt;/span&gt; = url;\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;error&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;xhr&lt;/span&gt;) {\n     &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos; Error:  &amp;gt;&amp;gt;&amp;gt;&amp;gt; &apos;&lt;/span&gt; + &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(xhr));\n    }\n   });\n }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The trick is the &lt;em&gt;window.location&lt;/em&gt; part. The controller&apos;s method looks like:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;# &lt;span class=&quot;hljs-variable constant_&quot;&gt;GET&lt;/span&gt; /files/{:id}/download_file/\ndef download_file\n    &lt;span class=&quot;hljs-title function_&quot;&gt;send_file&lt;/span&gt;(@file.&lt;span class=&quot;hljs-property&quot;&gt;file&lt;/span&gt;,\n          :&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;disposition&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;attachment&apos;&lt;/span&gt;,\n          :&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;url_based_filename&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;)\nend\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Use &lt;code&gt;window.open&lt;/code&gt; &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/open&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/API/Window/open&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;For example, you can put this line of code in a click handler:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;open&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/file.txt&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;_blank&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It will open a new tab (because of the &apos;_blank&apos; window-name) and that tab will open the URL.&lt;/p&gt;\n\n&lt;p&gt;Your server-side code should also have something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;res.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Content-Disposition&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;attachment; filename=file.txt&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And that way, the browser should prompt the user to save the file to disk, instead of just showing them the file. It will also automatically close the tab that it just opened.&lt;/p&gt;\n    ","\n&lt;p&gt;The HTML Code :&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;button type=&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt; id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;GetFile&quot;&lt;/span&gt;&amp;gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Get&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;!&amp;lt;/button&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The jQuery Code :&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#GetFile&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    $.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n        &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;https://s3-us-west-2.amazonaws.com/s.cdpn.io/172905/test.pdf&apos;&lt;/span&gt;,\n        &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;GET&apos;&lt;/span&gt;,\n        &lt;span class=&quot;hljs-attr&quot;&gt;xhrFields&lt;/span&gt;: {\n            &lt;span class=&quot;hljs-attr&quot;&gt;responseType&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;blob&apos;&lt;/span&gt;\n        },\n        &lt;span class=&quot;hljs-attr&quot;&gt;success&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; a = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(data);\n            a.&lt;span class=&quot;hljs-property&quot;&gt;href&lt;/span&gt; = url;\n            a.&lt;span class=&quot;hljs-property&quot;&gt;download&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;myfile.pdf&apos;&lt;/span&gt;;\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;append&lt;/span&gt;(a);\n            a.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;();\n            a.&lt;span class=&quot;hljs-title function_&quot;&gt;remove&lt;/span&gt;();\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(url);\n        }\n    });\n});\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Ok so here is the working code when Using MVC and you are getting your file from a controller&lt;/p&gt;\n\n&lt;p&gt;lets say you have your byte array declare and populate,  the only thing you need to do is to use the File function (using System.Web.Mvc)&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;byte[] bytes = .... insert your bytes &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; the array\n&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(bytes, &lt;span class=&quot;hljs-title class_&quot;&gt;System&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Net&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Mime&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;MediaTypeNames&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Application&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Octet&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;nameoffile.exe&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and then,  in the same controller,  add thoses 2 functions&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;protected override &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;OnResultExecuting&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;ResultExecutingContext&lt;/span&gt; context)\n    {\n        &lt;span class=&quot;hljs-title class_&quot;&gt;CheckAndHandleFileResult&lt;/span&gt;(context);\n\n        base.&lt;span class=&quot;hljs-title class_&quot;&gt;OnResultExecuting&lt;/span&gt;(context);\n    }\n\n    private &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; string &lt;span class=&quot;hljs-variable constant_&quot;&gt;FILE_DOWNLOAD_COOKIE_NAME&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;fileDownload&quot;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;/// &amp;lt;summary&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;/// If the current response is a FileResult (an MVC base class for files) then write a&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;/// cookie to inform jquery.fileDownload that a successful file download has occured&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;/// &amp;lt;/summary&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;/// &amp;lt;param name=&quot;context&quot;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;\n    private &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;CheckAndHandleFileResult&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;ResultExecutingContext&lt;/span&gt; context)\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (context.&lt;span class=&quot;hljs-property&quot;&gt;Result&lt;/span&gt; is &lt;span class=&quot;hljs-title class_&quot;&gt;FileResult&lt;/span&gt;)\n            &lt;span class=&quot;hljs-comment&quot;&gt;//jquery.fileDownload uses this cookie to determine that a file download has completed successfully&lt;/span&gt;\n            &lt;span class=&quot;hljs-title class_&quot;&gt;Response&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;SetCookie&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpCookie&lt;/span&gt;(&lt;span class=&quot;hljs-variable constant_&quot;&gt;FILE_DOWNLOAD_COOKIE_NAME&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;) { &lt;span class=&quot;hljs-title class_&quot;&gt;Path&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/&quot;&lt;/span&gt; });\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//ensure that the cookie is removed in case someone did a file download without using jquery.fileDownload&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title class_&quot;&gt;Request&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Cookies&lt;/span&gt;[&lt;span class=&quot;hljs-variable constant_&quot;&gt;FILE_DOWNLOAD_COOKIE_NAME&lt;/span&gt;] != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;)\n                &lt;span class=&quot;hljs-title class_&quot;&gt;Response&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Cookies&lt;/span&gt;[&lt;span class=&quot;hljs-variable constant_&quot;&gt;FILE_DOWNLOAD_COOKIE_NAME&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;Expires&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;DateTime&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Now&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;AddYears&lt;/span&gt;(-&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n    }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and then you will be able to call your controller to download and get the &quot;success&quot; or &quot;failure&quot; callback&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.&lt;span class=&quot;hljs-title function_&quot;&gt;fileDownload&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;mvcUrl&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;name of the controller&apos;&lt;/span&gt;), {\n            &lt;span class=&quot;hljs-attr&quot;&gt;httpMethod&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;POST&apos;&lt;/span&gt;,\n            &lt;span class=&quot;hljs-attr&quot;&gt;successCallback&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;url&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-comment&quot;&gt;//insert success code&lt;/span&gt;\n\n            },\n            &lt;span class=&quot;hljs-attr&quot;&gt;failCallback&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;html, url&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-comment&quot;&gt;//insert fail code&lt;/span&gt;\n            }\n        });\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I found a fix that while it&apos;s not actually using ajax it does allow you to use a javascript call to request the download and then get a callback when the download actually starts.  I found this helpful if the link runs a server side script that takes a little bit to compose the file before sending it. so you can alert them that it&apos;s processing, and then when it does finally send the file remove that processing notification. which is why I wanted to try to load the file via ajax to begin with so that I could have an event happen when the file is requested and another when it actually starts downloading.&lt;/p&gt;\n\n&lt;p&gt;the js on the front page&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;expdone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;exportdiv&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;expgo&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)\n{\n   &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;exportdiv&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;block&apos;&lt;/span&gt;;\n   &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;exportif&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;test2.php?arguments=data&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;the iframe&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;div id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;exportdiv&quot;&lt;/span&gt; style=&lt;span class=&quot;hljs-string&quot;&gt;&quot;display:none;&quot;&lt;/span&gt;&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;loader.gif&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;Generating Report&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;exportif&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;width: 1px;height: 1px; border:0px;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;then the other file:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;!&lt;span class=&quot;hljs-variable constant_&quot;&gt;DOCTYPE&lt;/span&gt; html&amp;gt;\n&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;expdone&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;parent&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;expdone&lt;/span&gt;();\n}\n&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;exportif&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;?php echo &quot;&lt;/span&gt;&lt;span class=&quot;hljs-attr&quot;&gt;http:&lt;/span&gt;//&lt;span class=&quot;hljs-attr&quot;&gt;10.192.37.211&lt;/span&gt;/&lt;span class=&quot;hljs-attr&quot;&gt;npdtracker&lt;/span&gt;/&lt;span class=&quot;hljs-attr&quot;&gt;exportthismonth.php&lt;/span&gt;?&lt;span class=&quot;hljs-attr&quot;&gt;arguments&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;.$_GET[&quot;&lt;/span&gt;&lt;span class=&quot;hljs-attr&quot;&gt;arguments&lt;/span&gt;&quot;]; ?&amp;gt;&lt;/span&gt;&quot;&amp;gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;exportif&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;onload&lt;/span&gt;= expdone;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I think there&apos;s a way to read get data using js so then no php would be needed. but I don&apos;t know it off hand and the server I&apos;m using supports php so this works for me.  thought I&apos;d share it in case it helps anyone.&lt;/p&gt;\n    ","\n&lt;p&gt;If the server is writing the file back in the response (including cookies if\nyou use them to determine whether the file download started), Simply create a form with the values and submit it:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ajaxPostDownload&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;url, data&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; $form;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (($form = $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#download_form&apos;&lt;/span&gt;)).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        $form = $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;form id=&apos;download_form&apos;&quot;&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot; style=&apos;display: none; width: 1px; height: 1px; position: absolute; top: -10000px&apos; method=&apos;POST&apos; action=&apos;&quot;&lt;/span&gt; + url + &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&amp;gt;&amp;lt;/form&amp;gt;&quot;&lt;/span&gt;);\n        $form.&lt;span class=&quot;hljs-title function_&quot;&gt;appendTo&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;body&quot;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Clear the form fields&lt;/span&gt;\n    $form.&lt;span class=&quot;hljs-title function_&quot;&gt;html&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Create new form fields&lt;/span&gt;\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(data).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n        $form.&lt;span class=&quot;hljs-title function_&quot;&gt;append&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;input type=&apos;hidden&apos; name=&apos;&quot;&lt;/span&gt; + key + &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos; value=&apos;&quot;&lt;/span&gt; + data[key] + &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;&amp;gt;&quot;&lt;/span&gt;);\n    });\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Submit the form post&lt;/span&gt;\n    $form.&lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Usage:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;ajaxPostDownload&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/fileController/ExportFile&apos;&lt;/span&gt;, {\n    &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadToken&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;newDownloadToken&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Name&lt;/span&gt;: $txtName.&lt;span class=&quot;hljs-title function_&quot;&gt;val&lt;/span&gt;(),\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Type&lt;/span&gt;: $txtType.&lt;span class=&quot;hljs-title function_&quot;&gt;val&lt;/span&gt;()\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Controller Method:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[&lt;span class=&quot;hljs-title class_&quot;&gt;HttpPost&lt;/span&gt;]\npublic &lt;span class=&quot;hljs-title class_&quot;&gt;FileResult&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ExportFile&lt;/span&gt;(string &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadToken&lt;/span&gt;, string &lt;span class=&quot;hljs-title class_&quot;&gt;Name&lt;/span&gt;, string &lt;span class=&quot;hljs-title class_&quot;&gt;Type&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Set DownloadToken Cookie.&lt;/span&gt;\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Response&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;SetCookie&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpCookie&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;downloadToken&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;DownloadToken&lt;/span&gt;)\n    {\n        &lt;span class=&quot;hljs-title class_&quot;&gt;Expires&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;DateTime&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;UtcNow&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;AddDays&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;),\n        &lt;span class=&quot;hljs-title class_&quot;&gt;Secure&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;\n    });\n\n    using (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; output = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MemoryStream&lt;/span&gt;())\n    {\n        &lt;span class=&quot;hljs-comment&quot;&gt;//get File&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(output.&lt;span class=&quot;hljs-title class_&quot;&gt;ToArray&lt;/span&gt;(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/vnd.ms-excel&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;NewFile.xls&quot;&lt;/span&gt;);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you want to use  jQuery File Download , please note this for IE.\nYou need to reset the response or it will not download&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;    &lt;span class=&quot;hljs-comment&quot;&gt;//The IE will only work if you reset response&lt;/span&gt;\n    &lt;span class=&quot;hljs-title function_&quot;&gt;getServletResponse&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;reset&lt;/span&gt;();\n    &lt;span class=&quot;hljs-comment&quot;&gt;//The jquery.fileDownload needs a cookie be set&lt;/span&gt;\n    &lt;span class=&quot;hljs-title function_&quot;&gt;getServletResponse&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;setHeader&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Set-Cookie&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;fileDownload=true; path=/&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Do the reset of your action create InputStream and return&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Your action can implement &lt;code&gt;ServletResponseAware&lt;/code&gt;  to access &lt;code&gt;getServletResponse()&lt;/code&gt; &lt;/p&gt;\n    ","\n&lt;p&gt;It is certain that you can not do it through Ajax call.&lt;/p&gt;\n\n&lt;p&gt;However, there is a workaround.&lt;/p&gt;\n\n&lt;p&gt;Steps :&lt;/p&gt;\n\n&lt;p&gt;If you are using form.submit() for downloading the file, what you can do is :&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Create an ajax call from client to server and store the file stream inside the session.&lt;/li&gt;\n&lt;li&gt;Upon &quot;success&quot; being returned from server, call your form.submit() to just stream the file stream stored in the session.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;This is helpful in case when you want to decide whether or not file needs to be downloaded after making form.submit(), eg: there can be a case where on form.submit(), an exception occurs on the server side and instead of crashing, you might need to show a custom message on the client side, in such case this implementation might help.&lt;/p&gt;\n    ","\n&lt;p&gt;there is another solution to download a web page in ajax. But I am referring to a page that must first be processed and then downloaded.&lt;/p&gt;\n\n&lt;p&gt;First you need to separate the page processing from the results download.&lt;/p&gt;\n\n&lt;p&gt;1) Only the page calculations are made in the ajax call.&lt;/p&gt;\n\n&lt;pre&gt;$.post(&quot;CalculusPage.php&quot;, { calculusFunction: true, ID: 29, data1: &quot;a&quot;, data2: &quot;b&quot; },\n\n       function(data, status) \n       {\n            if (status == &quot;success&quot;) \n            {\n                /* 2) In the answer the page that uses the previous calculations is downloaded. For example, this can be a page that prints the results of a table calculated in the ajax call. */\n                window.location.href = DownloadPage.php+&quot;?ID=&quot;+29;\n            }               \n       }\n);\n\n// For example: in the CalculusPage.php\n\n    if ( !empty($_POST[&quot;calculusFunction&quot;]) ) \n    {\n        $ID = $_POST[&quot;ID&quot;];\n\n        $query = &quot;INSERT INTO ExamplePage (data1, data2) VALUES (&apos;&quot;.$_POST[&quot;data1&quot;].&quot;&apos;, &apos;&quot;.$_POST[&quot;data2&quot;].&quot;&apos;) WHERE id = &quot;.$ID;\n        ...\n    }\n\n// For example: in the DownloadPage.php\n\n    $ID = $_GET[&quot;ID&quot;];\n\n    $sede = &quot;SELECT * FROM ExamplePage WHERE id = &quot;.$ID;\n    ...\n\n    $filename=&quot;Export_Data.xls&quot;;\n    header(&quot;Content-Type: application/vnd.ms-excel&quot;);\n    header(&quot;Content-Disposition: inline; filename=$filename&quot;);\n\n    ...\n&lt;/pre&gt;\n\n&lt;p&gt;I hope this solution can be useful for many, as it was for me.&lt;/p&gt;\n    ","\n&lt;p&gt;That&apos;s it works so fine in any browser (I&apos;m using asp.net core)&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;            &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onDownload&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; api = &lt;span class=&quot;hljs-string&quot;&gt;&apos;@Url.Action(&quot;myaction&quot;, &quot;mycontroller&quot;)&apos;&lt;/span&gt;; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; form = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FormData&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;form1&apos;&lt;/span&gt;));\n\n  &lt;span class=&quot;hljs-title function_&quot;&gt;fetch&lt;/span&gt;(api, { &lt;span class=&quot;hljs-attr&quot;&gt;body&lt;/span&gt;: form, &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;POST&quot;&lt;/span&gt;})\n      .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;resp&lt;/span&gt; =&amp;gt;&lt;/span&gt; resp.&lt;span class=&quot;hljs-title function_&quot;&gt;blob&lt;/span&gt;())\n      .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;blob&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n        $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;download&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Attachement.zip&apos;&lt;/span&gt;);\n          $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;href&quot;&lt;/span&gt;, url);\n          $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;)\n              .&lt;span class=&quot;hljs-title function_&quot;&gt;fadeIn&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3000&lt;/span&gt;,\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { });\n\n      })\n      .&lt;span class=&quot;hljs-title function_&quot;&gt;catch&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;An error occurred&apos;&lt;/span&gt;));\n\n\n\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt; \n &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;onDownload()&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;btn btn-primary btn-sm&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Click to Process Files&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;\n \n \n \n &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;role&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;display: none&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;btn btn-sm btn-secondary&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;linkdownload&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Click to download Attachments&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;\n \n \n &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;asp-controller&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;mycontroller&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;asp-action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;myaction&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;form1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;\n \n &lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;        &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onDownload&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; api = &lt;span class=&quot;hljs-string&quot;&gt;&apos;@Url.Action(&quot;myaction&quot;, &quot;mycontroller&quot;)&apos;&lt;/span&gt;; \n            &lt;span class=&quot;hljs-comment&quot;&gt;//form1 is your id form, and to get data content of form&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; form = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FormData&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;form1&apos;&lt;/span&gt;));\n\n            &lt;span class=&quot;hljs-title function_&quot;&gt;fetch&lt;/span&gt;(api, { &lt;span class=&quot;hljs-attr&quot;&gt;body&lt;/span&gt;: form, &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;POST&quot;&lt;/span&gt;})\n                .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;resp&lt;/span&gt; =&amp;gt;&lt;/span&gt; resp.&lt;span class=&quot;hljs-title function_&quot;&gt;blob&lt;/span&gt;())\n                .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;blob&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; url = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(blob);\n                    $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;download&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Attachments.zip&apos;&lt;/span&gt;);\n                    $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;attr&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;href&quot;&lt;/span&gt;, url);\n                    $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#linkdownload&apos;&lt;/span&gt;)\n                        .&lt;span class=&quot;hljs-title function_&quot;&gt;fadeIn&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3000&lt;/span&gt;,\n                            &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n\n                            });\n                })\n                .&lt;span class=&quot;hljs-title function_&quot;&gt;catch&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;An error occurred&apos;&lt;/span&gt;));                 \n\n        }\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I have tried Ajax and HttpRequest ways to get my result download file but I&apos;ve failed, finally I&apos;ve solved my problem using these steps:&lt;/p&gt;\n&lt;p&gt;implemented a simple hidden form in my html code:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;form method=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt; id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post_form&quot;&lt;/span&gt; style=&lt;span class=&quot;hljs-string&quot;&gt;&quot;display:none&quot;&lt;/span&gt; action=&lt;span class=&quot;hljs-string&quot;&gt;&quot;amin.php&quot;&lt;/span&gt; &amp;gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;hidden&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;action&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;export_xlsx&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;hidden&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post_form_data&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&amp;lt;/form&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;input with &apos;action&apos; name is for calling function in my php code,\ninput with &apos;post_form_data&apos; name for sending long data of a table which were not possible to send with GET. this data was encoded to json, and put json in input:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; list = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;();\n    $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#table_name tr&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; row = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;();\n        $(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;td&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n            row.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;($(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;text&lt;/span&gt;());\n        });\n        list.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(row);\n    });\nlist    = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(list);\n\n$(&lt;span class=&quot;hljs-string&quot;&gt;&quot;input[name=post_form_data]&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;val&lt;/span&gt;(list);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;now, the form is ready with my desire values in inputs, just need to trigger the submit.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;post_form&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;and done!\nwhile my result is a file (xlsx file for me) the page wouldn&apos;t be redirected and instantly the file starts to download in last page, so no need to  useiframe or window.open etc.&lt;/p&gt;\n&lt;p&gt;if you are trying to do something like this, this should be an easy trick .&lt;/p&gt;\n    ","\n&lt;p&gt;I struggled with this issue for a long time. Finally an elegant external library suggested &lt;a href=&quot;https://github.com/axios/axios/issues/1660#issuecomment-404858057&quot; rel=&quot;nofollow noreferrer&quot;&gt;here&lt;/a&gt; helped me out.&lt;/p&gt;\n    "],"comment":["\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;possible duplicate of &lt;a href=&quot;http://stackoverflow.com/questions/4518702/how-to-download-a-file-on-clicking-the-name-of-file-using-php&quot;&gt;How to download a file on clicking the name of file using PHP?&lt;/a&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/187606/pekka&quot; title=&quot;432,081 reputation&quot; class=&quot;comment-user&quot;&gt;Pekka&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment4981707_4545311&quot;&gt;&lt;span title=&quot;2010-12-28 10:29:40Z, License: CC BY-SA 2.5&quot; class=&quot;relativetime-clean&quot;&gt;Dec 28, 2010 at 10:29&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I marked it as a duplicate despite the platform difference, because as far as I can see the solution is the same (You can&apos;t and don&apos;t need to do this through Ajax).&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/187606/pekka&quot; title=&quot;432,081 reputation&quot; class=&quot;comment-user&quot;&gt;Pekka&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment4981712_4545311&quot;&gt;&lt;span title=&quot;2010-12-28 10:30:12Z, License: CC BY-SA 2.5&quot; class=&quot;relativetime-clean&quot;&gt;Dec 28, 2010 at 10:30&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 2 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;so,without ajax,just use the window.location=&quot;download.action?para1=value1....&quot;?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/306719/hguser&quot; title=&quot;33,491 reputation&quot; class=&quot;comment-user owner&quot;&gt;hguser&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment4981728_4545311&quot;&gt;&lt;span title=&quot;2010-12-28 10:32:50Z, License: CC BY-SA 2.5&quot; class=&quot;relativetime-clean&quot;&gt;Dec 28, 2010 at 10:32&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I love what you built but I suspect that to get more StackOverFlow credit your answer here should contain a bit more detail.  Specifically on how you solved the problem.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/438458/anthonyvo&quot; title=&quot;3,553 reputation&quot; class=&quot;comment-user&quot;&gt;AnthonyVO&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment15767980_9970672&quot;&gt;&lt;span title=&quot;2012-08-07 21:58:49Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 7, 2012 at 21:58&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;it would be nice if you would mention exactly how this &quot;plugin&quot; gets around the limitation, rather than forcing us to go to your blog/plugin source to see it. for example, is it instead posting to an iframe? is it instead requiring the remote script to save the file and return a url to it?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/400654/kevin-b&quot; title=&quot;94,232 reputation&quot; class=&quot;comment-user&quot;&gt;Kevin B&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment28014924_9970672&quot;&gt;&lt;span title=&quot;2013-09-23 19:47:49Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 23, 2013 at 19:47&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 2 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@asgerhallas Sure, but that&apos;s completely useless if said link goes away.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/400654/kevin-b&quot; title=&quot;94,232 reputation&quot; class=&quot;comment-user&quot;&gt;Kevin B&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment29194884_9970672&quot;&gt;&lt;span title=&quot;2013-10-29 14:06:49Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 29, 2013 at 14:06&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I agree, a blog is a far better place to place a lengthy description of how to use your plugin and how it works. but you could have at least gave a short overview of how this plugin solves the problem. For example, this solves the problem by having the server set a cookie and having your javascript continuously look for the cookie until it exists. Once it exists, we can assume that the download is complete. With that kind of information one could easily roll their own solution very quickly, and the answer no longer relies 100% on your blog/plugin/jquery and can be applied to other libraries.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/400654/kevin-b&quot; title=&quot;94,232 reputation&quot; class=&quot;comment-user&quot;&gt;Kevin B&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment29250601_9970672&quot;&gt;&lt;span title=&quot;2013-10-30 20:10:23Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 30, 2013 at 20:10&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 3 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Royi, as I understand it AJAX can &lt;i&gt;never&lt;/i&gt; support file downloads that result in a file download popup to save to disk. Have you found a way that I&apos;m unaware of?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/455556/john-culviner&quot; title=&quot;21,046 reputation&quot; class=&quot;comment-user&quot;&gt;John Culviner&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment31734357_9970672&quot;&gt;&lt;span title=&quot;2014-01-13 16:19:12Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 13, 2014 at 16:19&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Nice one...as I was struggling with handling the download file prompt and using jquery ajax..and this solution works perfectly for me ..+1&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/639406/swapnesh&quot; title=&quot;25,460 reputation&quot; class=&quot;comment-user&quot;&gt;swapnesh&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment21336908_7660817&quot;&gt;&lt;span title=&quot;2013-03-01 08:49:01Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Mar 1, 2013 at 8:49&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Note that this requires the server to be setting a Content-Disposition header value of &apos;attachment&apos;, otherwise the browser will redirect to (and display) the response content&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/957950/brichins&quot; title=&quot;3,616 reputation&quot; class=&quot;comment-user&quot;&gt;brichins&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment23168326_7660817&quot;&gt;&lt;span title=&quot;2013-04-24 21:45:20Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 24, 2013 at 21:45&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Or alternatively use &lt;code&gt;window.open(&amp;lt;url&amp;gt;, &apos;_blank&apos;);&lt;/code&gt; to ensure that the download won&apos;t replace your current browser content (regardless of the Content-Disposition header).&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1212747/christopher-king&quot; title=&quot;1,645 reputation&quot; class=&quot;comment-user&quot;&gt;Christopher King&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment39486623_7660817&quot;&gt;&lt;span title=&quot;2014-08-15 15:38:31Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 15, 2014 at 15:38&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;The problem with this solution is that if the operation fails/the server returns an error, your page will be redirected to the error page. To solve that use the iFrame solution&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/460084/kofifus&quot; title=&quot;14,671 reputation&quot; class=&quot;comment-user&quot;&gt;kofifus&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment50310886_7660817&quot;&gt;&lt;span title=&quot;2015-06-30 23:52:42Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 30, 2015 at 23:52&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;The real problem with this solution - question is about &lt;code&gt;POST&lt;/code&gt; request.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/800613/atomosk&quot; title=&quot;1,813 reputation&quot; class=&quot;comment-user&quot;&gt;Atomosk&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment99275661_7660817&quot;&gt;&lt;span title=&quot;2019-05-28 03:45:31Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;May 28, 2019 at 3:45&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;The &lt;code&gt;a.click()&lt;/code&gt; does not seem to work in firefox... Any idea?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/3083904/0x777&quot; title=&quot;760 reputation&quot; class=&quot;comment-user&quot;&gt;0x777&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment81536494_29939024&quot;&gt;&lt;span title=&quot;2017-11-14 18:34:51Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 14, 2017 at 18:34&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;In some browsers you might need to add the &lt;code&gt;a&lt;/code&gt; to the dom in order for this code to work and/or remove the &lt;code&gt;revokeObjectURL&lt;/code&gt; part: &lt;code&gt;document.body.appendChild(a)&lt;/code&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/3083904/0x777&quot; title=&quot;760 reputation&quot; class=&quot;comment-user&quot;&gt;0x777&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment81542130_29939024&quot;&gt;&lt;span title=&quot;2017-11-14 21:26:54Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 14, 2017 at 21:26&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;saved my day (and possibly a job too :) ) Not a javascript expert by any measure... more java guy. However, I have no idea why a simple &quot;createObjectURL(new Blob([atob(base64)]))&quot; doesn&apos;t work! It simply doesn&apos;t, while all instinct says it must. grrr...&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1538324/apil-tamang&quot; title=&quot;2,247 reputation&quot; class=&quot;comment-user&quot;&gt;apil.tamang&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment97306093_29939024&quot;&gt;&lt;span title=&quot;2019-03-21 19:55:12Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Mar 21, 2019 at 19:55&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;at line &lt;code&gt;var bytechars = atob(base64)&lt;/code&gt; it throws an error &lt;code&gt;JavaScript runtime error: InvalidCharacterError&lt;/code&gt;. I am using Chrome Version 75.0.3770.142 but i dont know, what is wrong here.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2333663/muflix&quot; title=&quot;5,182 reputation&quot; class=&quot;comment-user&quot;&gt;Muflix&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment101264335_29939024&quot;&gt;&lt;span title=&quot;2019-08-07 09:23:30Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 7, 2019 at 9:23&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Thank you, I used this solution. Worked like a charm. Also, if you don&apos;t get a blob from the response, just create a new Blob.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/6404781/fabio-sang&quot; title=&quot;707 reputation&quot; class=&quot;comment-user&quot;&gt;fabio.sang&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment80032585_42830315&quot;&gt;&lt;span title=&quot;2017-10-03 07:22:49Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 3, 2017 at 7:22&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;A better version with IE handling &lt;a href=&quot;https://stackoverflow.com/a/49674385/6196745&quot;&gt;link&lt;/a&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/6196745/startswith-r&quot; title=&quot;131 reputation&quot; class=&quot;comment-user&quot;&gt;startsWith_R&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment88479485_42830315&quot;&gt;&lt;span title=&quot;2018-06-07 08:03:16Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 7, 2018 at 8:03&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;The link from @startsWith_R really helps if you are working with IE11&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/4111295/alexventuraio&quot; title=&quot;5,818 reputation&quot; class=&quot;comment-user&quot;&gt;alexventuraio&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment103356884_42830315&quot;&gt;&lt;span title=&quot;2019-10-23 03:24:27Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 23, 2019 at 3:24&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Sir, Your input: &quot;Content-Disposition&quot;, &quot;inline;.... saved the poor coder&apos;s day :)&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/769599/amiga500&quot; title=&quot;5,324 reputation&quot; class=&quot;comment-user&quot;&gt;Amiga500&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment49137614_16900840&quot;&gt;&lt;span title=&quot;2015-05-29 14:23:18Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;May 29, 2015 at 14:23&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This is the only answer that mentions &quot;window.open&quot; (one of the comments mentions it).&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/326242/andrew-koster&quot; title=&quot;1,289 reputation&quot; class=&quot;comment-user&quot;&gt;Andrew Koster&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment99042856_16900840&quot;&gt;&lt;span title=&quot;2019-05-19 18:31:44Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;May 19, 2019 at 18:31&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;It does not work if you have a lot of parameters, because you will get &lt;code&gt;too long url&lt;/code&gt; error.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2333663/muflix&quot; title=&quot;5,182 reputation&quot; class=&quot;comment-user&quot;&gt;Muflix&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment101264389_16900840&quot;&gt;&lt;span title=&quot;2019-08-07 09:25:03Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 7, 2019 at 9:25&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;That sends the data in a &lt;i&gt;very&lt;/i&gt; strange way to the server though.   I wonder if it could be altered to create compliant POST?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1158644/shayne&quot; title=&quot;1,582 reputation&quot; class=&quot;comment-user&quot;&gt;Shayne&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment31964980_21164120&quot;&gt;&lt;span title=&quot;2014-01-19 21:44:24Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 19, 2014 at 21:44&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;&quot;We cannot download the file through Ajax, must use XMLHttpRequest&quot;. XMLHttpRequest is AJAX by definition. Otherwise great solution for modern web browsers. For IE, which doesn&apos;t support &lt;code&gt;HTMLAnchorElement.download&lt;/code&gt;, I&apos;m thinking of combining it with the proprietary &lt;a href=&quot;https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/samples/hh779016(v=vs.85)&quot; rel=&quot;nofollow noreferrer&quot;&gt;msSaveOrOpenBlob&lt;/a&gt; method.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/767425/tsahi-asher&quot; title=&quot;1,712 reputation&quot; class=&quot;comment-user&quot;&gt;Tsahi Asher&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment92213708_38851131&quot;&gt;&lt;span title=&quot;2018-10-04 06:49:48Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 4, 2018 at 6:49&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 2 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This is working example. Thanks. Is it possible to do that without iframe but without window.location ?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/948517/marek-bar&quot; title=&quot;863 reputation&quot; class=&quot;comment-user&quot;&gt;Marek Bar&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment41422940_21223167&quot;&gt;&lt;span title=&quot;2014-10-15 13:57:08Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 15, 2014 at 13:57&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I suppose you could just append the hidden form to the bottom of the DOM. Also possibly worth exploring is use of the Shadow dom , although thats not necessarily well supported on older browsers.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1158644/shayne&quot; title=&quot;1,582 reputation&quot; class=&quot;comment-user&quot;&gt;Shayne&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment41481258_21223167&quot;&gt;&lt;span title=&quot;2014-10-17 02:44:24Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 17, 2014 at 2:44&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;In this code I am getting this error. &lt;code&gt;Uncaught SecurityError: Blocked a frame with origin &quot;http://foo.bar.com&quot; from accessing a frame with origin &quot;null&quot;.  The frame requesting access has a protocol of &quot;http&quot;, the frame being accessed has a protocol of &quot;data&quot;. Protocols must match.&lt;/code&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1496715/void&quot; title=&quot;34,992 reputation&quot; class=&quot;comment-user&quot;&gt;void&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment57393424_21223167&quot;&gt;&lt;span title=&quot;2016-01-16 10:09:45Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 16, 2016 at 10:09&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;How can I map this form to some model class? I have:  &lt;code&gt;@ResourceMapping() public void downloadFile(final ResourceRequest request, final ResourceResponse response, @ModelAttribute(&quot;downForm&quot;) FormModel model)&lt;/code&gt;   but it&apos;s not working..&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/4358367/bartex9&quot; title=&quot;351 reputation&quot; class=&quot;comment-user&quot;&gt;bartex9&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment70420199_21223167&quot;&gt;&lt;span title=&quot;2017-01-12 09:23:57Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 12, 2017 at 9:23&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;void : That would likely be some sort of cross origin security issue. Thats probably a whole stack overflow question in and of it self.  @bartex9 : That would depend heavily on what sort of framework your using. But the principle would be to take the name and path and store that, whilst pushing the file itself into a web accessible area of the file system, or something like amazon S3 for high availability&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1158644/shayne&quot; title=&quot;1,582 reputation&quot; class=&quot;comment-user&quot;&gt;Shayne&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment70453833_21223167&quot;&gt;&lt;span title=&quot;2017-01-13 02:23:46Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 13, 2017 at 2:23&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;it seems your load event is not called for Content-disposition attachment content (because nothing is loaded into the iframe), if it works for you (you get the console.log) pls post a sample&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/460084/kofifus&quot; title=&quot;14,671 reputation&quot; class=&quot;comment-user&quot;&gt;kofifus&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment50273568_31103676&quot;&gt;&lt;span title=&quot;2015-06-30 06:33:08Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 30, 2015 at 6:33&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Here is a quick fiddle &lt;a href=&quot;https://jsfiddle.net/y2xezyoj/&quot; rel=&quot;nofollow noreferrer&quot;&gt;jsfiddle.net/y2xezyoj&lt;/a&gt; this fires the load event ass soon as the pdf file is loaded into the iframe.. this fiddle does not download becaus the key for downloading is in the server side &quot;response.setHeader(&quot;Content-disposition&quot;, &quot;&lt;b&gt;attachment&lt;/b&gt;; filename=\\&quot;&quot; + fileName + &quot;.xlsx\\&quot;&quot;);&quot;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1700885/manukyanv07&quot; title=&quot;443 reputation&quot; class=&quot;comment-user&quot;&gt;manukyanv07&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment50303448_31103676&quot;&gt;&lt;span title=&quot;2015-06-30 19:13:53Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 30, 2015 at 19:13&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;yes it will work in that case, but if the file is downloaded, that is the server sends Content-Disposition: attachment, then the load event will not fire which was my point&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/460084/kofifus&quot; title=&quot;14,671 reputation&quot; class=&quot;comment-user&quot;&gt;kofifus&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment50310674_31103676&quot;&gt;&lt;span title=&quot;2015-06-30 23:38:15Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 30, 2015 at 23:38&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;You are totally right load event is fired right after the server is done processing starts sending the file. This is what i was looking for, 1- block the button and show processing so that the user can have a feedback that things are happening.  2 - Then when the server is done processing and about to send the file 3- (load event is fired) where I unlock the button and remove processing spinner 4 -  the user is now poped up with save file or the browser starts download it in the defined download location. Sorry my English.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1700885/manukyanv07&quot; title=&quot;443 reputation&quot; class=&quot;comment-user&quot;&gt;manukyanv07&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment50394900_31103676&quot;&gt;&lt;span title=&quot;2015-07-02 21:45:50Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jul 2, 2015 at 21:45&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 4 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Thanks! But It should be: &lt;b&gt;revokeObjectURL()&lt;/b&gt; window.URL.revokeObjectURL(a.href);&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/69079/scotts&quot; title=&quot;3,950 reputation&quot; class=&quot;comment-user&quot;&gt;scotts&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment122530071_66598997&quot;&gt;&lt;span title=&quot;2021-09-25 09:22:35Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 25, 2021 at 9:22&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 3 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I&apos;m returning a zip file but when I use this method my zip file is invalid.  I had to remove dataType from the ajax call to get it to work. For the blob creation I used application/zip, the option you used above, and tried removing it altogether.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1071776/zoey&quot; title=&quot;197 reputation&quot; class=&quot;comment-user&quot;&gt;Zoey&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment123140931_66598997&quot;&gt;&lt;span title=&quot;2021-10-21 17:42:22Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 21, 2021 at 17:42&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@scotts Thx. I&apos;ve changed my code.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/5681666/m46&quot; title=&quot;817 reputation&quot; class=&quot;comment-user&quot;&gt;M46&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment123165333_66598997&quot;&gt;&lt;span title=&quot;2021-10-22 16:32:46Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 22, 2021 at 16:32&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;To get the file name from Content-Disposition, this match worked for me: &lt;code&gt;filename.match(/filename=(.*)/)[1]&lt;/code&gt; (without the double quotes or question mark) - &lt;a href=&quot;https://regex101.com/r/2AsD4y/2&quot; rel=&quot;nofollow noreferrer&quot;&gt;regex101.com/r/2AsD4y/2&lt;/a&gt;. However, your solution was the only solution that worked after searching a lot.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1048588/jstuardo&quot; title=&quot;3,159 reputation&quot; class=&quot;comment-user&quot;&gt;jstuardo&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment109435472_60185326&quot;&gt;&lt;span title=&quot;2020-05-18 15:05:57Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;May 18, 2020 at 15:05&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Here is another lazier way to fetch the filename :) &lt;a href=&quot;https://www.npmjs.com/package/content-disposition&quot; rel=&quot;nofollow noreferrer&quot;&gt;npmjs.com/package/content-disposition&lt;/a&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/220837/martin-kovachev&quot; title=&quot;442 reputation&quot; class=&quot;comment-user&quot;&gt;Martin Kovachev&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment111015032_60185326&quot;&gt;&lt;span title=&quot;2020-07-07 14:19:28Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jul 7, 2020 at 14:19&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Could you explain your answer? That&apos;d help others understand what you&apos;ve done so they could apply your techniques to their situations.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1364007/wai-ha-lee&quot; title=&quot;8,182 reputation&quot; class=&quot;comment-user&quot;&gt;Wai Ha Lee&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment60757372_36578627&quot;&gt;&lt;span title=&quot;2016-04-12 16:34:46Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 12, 2016 at 16:34&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Just a warning: Safari and IE does not support the &lt;code&gt;download&lt;/code&gt; attribute, so your file will end up having the name &quot;Unknown&quot;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1751946/yangshun-tay&quot; title=&quot;42,292 reputation&quot; class=&quot;comment-user&quot;&gt;Yangshun Tay&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment62028914_36578627&quot;&gt;&lt;span title=&quot;2016-05-16 09:21:28Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;May 16, 2016 at 9:21&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Quick question, won&apos;t this generate the file twice? Once You send the ajax request. Then you make the page redirect to the same URL as well. How can we eliminate that?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1749638/coderhs&quot; title=&quot;3,887 reputation&quot; class=&quot;comment-user&quot;&gt;coderhs&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment88358521_44292887&quot;&gt;&lt;span title=&quot;2018-06-04 06:23:45Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 4, 2018 at 6:23&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Not in my case. I only tested it on Chrome though.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1123717/aarkerio&quot; title=&quot;1,919 reputation&quot; class=&quot;comment-user&quot;&gt;aarkerio&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment88377783_44292887&quot;&gt;&lt;span title=&quot;2018-06-04 15:31:33Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 4, 2018 at 15:31&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;As coderhs already states correctly, the action gets called twice.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/548655/sven&quot; title=&quot;2,044 reputation&quot; class=&quot;comment-user&quot;&gt;Sven&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment88748871_44292887&quot;&gt;&lt;span title=&quot;2018-06-15 10:29:23Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 15, 2018 at 10:29&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;It&apos;s getting called twice for me too.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1046185/csquared&quot; title=&quot;155 reputation&quot; class=&quot;comment-user&quot;&gt;CSquared&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment106264929_44292887&quot;&gt;&lt;span title=&quot;2020-02-05 20:14:27Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Feb 5, 2020 at 20:14&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Code only answers should have at least a minumum description explaining how the code works and why it answers to the question.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/11336762/roberto-caboni&quot; title=&quot;6,824 reputation&quot; class=&quot;comment-user&quot;&gt;Roberto Caboni&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment105320103_59576416&quot;&gt;&lt;span title=&quot;2020-01-03 10:21:49Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 3, 2020 at 10:21&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;It gives me -&amp;gt; VM2821:81 Uncaught TypeError: Failed to execute &apos;createObjectURL&apos; on &apos;URL&apos;: Overload resolution failed&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1382647/fatherazrael&quot; title=&quot;5,097 reputation&quot; class=&quot;comment-user&quot;&gt;fatherazrael&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment116263785_59576416&quot;&gt;&lt;span title=&quot;2021-01-17 06:31:02Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 17, 2021 at 6:31&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        "],"id":506,"title":"Download a file by jQuery.Ajax","content":"\n                \n&lt;p&gt;I have a Struts2 action in the server side for file downloading.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;action name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;download&quot;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;com.xxx.DownAction&quot;&lt;/span&gt;&amp;gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;success&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;stream&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentType&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;text/plain&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;inputName&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;imageStream&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentDisposition&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;attachment;filename={fileName}&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;bufferSize&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;1024&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;result&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&amp;lt;/action&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;However when I call the action using the jQuery:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.&lt;span class=&quot;hljs-title function_&quot;&gt;post&lt;/span&gt;(\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;/download.action&quot;&lt;/span&gt;,{\n    &lt;span class=&quot;hljs-attr&quot;&gt;para1&lt;/span&gt;:value1,\n    &lt;span class=&quot;hljs-attr&quot;&gt;para2&lt;/span&gt;:value2\n    ....\n  },&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;){\n      &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;info&lt;/span&gt;(data);\n   }\n);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;in Firebug I see the data is retrieved with the &lt;strong&gt;Binary stream&lt;/strong&gt;. I wonder how to open the &lt;strong&gt;file downloading window&lt;/strong&gt; with which the user can save the file locally?&lt;/p&gt;\n    ","slug":"download-a-file-by-jquery.ajax-1657388220611","postType":"QUESTION","createdAt":"2022-07-09T17:37:00.000Z","updatedAt":"2022-07-09T17:37:00.000Z","tags":[{"id":2520,"name":"download","slug":"download","createdAt":"2022-07-09T17:37:00.000Z","updatedAt":"2022-07-09T17:37:00.000Z","Questions_Tags":{"questionId":506,"tagId":2520}}]}]}},"__N_SSG":true}