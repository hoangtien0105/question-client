<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/81-096e453de8a27667.js" defer=""></script><script src="/_next/static/chunks/pages/questions/tag/%5Bslug%5D-6802ea06aeddcbec.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_buildManifest.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5"></style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/tag/http#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="flex items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934">How to use java.net.URLConnection to fire and handle HTTP requests</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/http">http</a></div></div><div class="mt-4 mb-6" style="height:100px;overflow:auto"><h4 class="font-semibold">Solution 1:</h4><div class="text-sm bg-green-100 text-neutral-600">
<p><sup><em>First a disclaimer beforehand: the posted code snippets are all basic examples. You'll need to handle trivial <code>IOException</code>s and <code>RuntimeException</code>s like <code>NullPointerException</code>, <code>ArrayIndexOutOfBoundsException</code> and consorts yourself.</em></sup></p>
<p><sup><em>In case you're developing for Android instead of Java, note also that since introduction of API level 28, cleartext HTTP requests are <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-28#tls-enabled" rel="noreferrer">disabled by default</a>. You are encouraged to use <code>HttpsURLConnection</code>, but if it is really necessary, cleartext can be enabled in the Application Manifest.</em></sup></p>
<hr>
<h3>Preparing</h3>
<p>We first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"http://example.com"</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">charset</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UTF-8"</span>;  <span class="hljs-comment">// Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()</span>
<span class="hljs-type">String</span> <span class="hljs-variable">param1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"value1"</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">param2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"value2"</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-type">String</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"param1=%s&amp;param2=%s"</span>,
    URLEncoder.encode(param1, charset),
    URLEncoder.encode(param2, charset));
</code></pre>
<p>The query parameters must be in <code>name=value</code> format and be concatenated by <code>&amp;</code>. You would normally also <a href="http://en.wikipedia.org/wiki/Percent-encoding" rel="noreferrer">URL-encode</a> the query parameters with the specified charset using <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html#encode-java.lang.String-java.lang.String-" rel="noreferrer"><code>URLEncoder#encode()</code></a>.</p>
<p><sup>The <code>String#format()</code> is just for convenience. I prefer it when I would need the String concatenation operator <code>+</code> more than twice.</sup></p>
<hr>
<h3>Firing an <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3" rel="noreferrer">HTTP GET</a> request with (optionally) query parameters</h3>
<p>It's a trivial task. It's the default request method.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">URLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url + <span class="hljs-string">"?"</span> + query).openConnection();
connection.setRequestProperty(<span class="hljs-string">"Accept-Charset"</span>, charset);
<span class="hljs-type">InputStream</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> connection.getInputStream();
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Any query string should be concatenated to the URL using <code>?</code>. The <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2" rel="noreferrer"><code>Accept-Charset</code></a> header may hint the server what encoding the parameters are in. If you don't send any query string, then you can leave the <code>Accept-Charset</code> header away. If you don't need to set any headers, then you can even use the <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#openStream%28%29" rel="noreferrer"><code>URL#openStream()</code></a> shortcut method.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">InputStream</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openStream();
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Either way, if the other side is an <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html" rel="noreferrer"><code>HttpServlet</code></a>, then its <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29" rel="noreferrer"><code>doGet()</code></a> method will be called and the parameters will be available by <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29" rel="noreferrer"><code>HttpServletRequest#getParameter()</code></a>.</p>
<p>For testing purposes, you can print the response body to <a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29" rel="noreferrer">standard output</a> as below:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">try</span> (<span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(response)) {
    <span class="hljs-type">String</span> <span class="hljs-variable">responseBody</span> <span class="hljs-operator">=</span> scanner.useDelimiter(<span class="hljs-string">"\\A"</span>).next();
    System.out.println(responseBody);
}
</code></pre>
<hr>
<h3>Firing an <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5" rel="noreferrer">HTTP POST</a> request with query parameters</h3>
<p>Setting the <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29" rel="noreferrer"><code>URLConnection#setDoOutput()</code></a> to <code>true</code> implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type <code>application/x-www-form-urlencoded</code> wherein the query string is written to the request body.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">URLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
connection.setDoOutput(<span class="hljs-literal">true</span>); <span class="hljs-comment">// Triggers POST.</span>
connection.setRequestProperty(<span class="hljs-string">"Accept-Charset"</span>, charset);
connection.setRequestProperty(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/x-www-form-urlencoded;charset="</span> + charset);

<span class="hljs-keyword">try</span> (<span class="hljs-type">OutputStream</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> connection.getOutputStream()) {
    output.write(query.getBytes(charset));
}

<span class="hljs-type">InputStream</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> connection.getInputStream();
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Note: whenever you'd like to submit a HTML form programmatically, don't forget to take the <code>name=value</code> pairs of any <code>&lt;input type="hidden"&gt;</code> elements into the query string and of course also the <code>name=value</code> pair of the <code>&lt;input type="submit"&gt;</code> element which you'd like to "press" programmatically (because that's usually been used in the server side to distinguish if a button was pressed and if so, which one).</p>
<p>You can also cast the obtained <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html" rel="noreferrer"><code>URLConnection</code></a> to <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html" rel="noreferrer"><code>HttpURLConnection</code></a> and use its <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29" rel="noreferrer"><code>HttpURLConnection#setRequestMethod()</code></a> instead. But if you're trying to use the connection for output you still need to set <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29" rel="noreferrer"><code>URLConnection#setDoOutput()</code></a> to <code>true</code>.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">httpConnection</span> <span class="hljs-operator">=</span> (HttpURLConnection) <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
httpConnection.setRequestMethod(<span class="hljs-string">"POST"</span>);
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Either way, if the other side is an <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html" rel="noreferrer"><code>HttpServlet</code></a>, then its <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29" rel="noreferrer"><code>doPost()</code></a> method will be called and the parameters will be available by <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29" rel="noreferrer"><code>HttpServletRequest#getParameter()</code></a>.</p>
<hr>
<h3>Actually firing the HTTP request</h3>
<p>You can fire the HTTP request explicitly with <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#connect%28%29" rel="noreferrer"><code>URLConnection#connect()</code></a>, but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#getInputStream%28%29" rel="noreferrer"><code>URLConnection#getInputStream()</code></a> and so on. The above examples does exactly that, so the <code>connect()</code> call is in fact superfluous.</p>
<hr>
<h3>Gathering HTTP response information</h3>
<ol>
<li><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" rel="noreferrer">HTTP response status</a>:</li>
</ol>
<p>You need an <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html" rel="noreferrer"><code>HttpURLConnection</code></a> here. Cast it first if necessary.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">    <span class="hljs-type">int</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> httpConnection.getResponseCode();
</code></pre>
<ol start="2">
<li><p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html" rel="noreferrer">HTTP response headers</a>:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"> <span class="hljs-keyword">for</span> (Entry&lt;String, List&lt;String&gt;&gt; header : connection.getHeaderFields().entrySet()) {
     System.out.println(header.getKey() + <span class="hljs-string">"="</span> + header.getValue());
 }
</code></pre>
</li>
<li><p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17" rel="noreferrer">HTTP response encoding</a>:</p>
</li>
</ol>
<p>When the <code>Content-Type</code> contains a <code>charset</code> parameter, then the response body is likely text based and we'd like to process the response body with the server-side specified character encoding then.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">    <span class="hljs-type">String</span> <span class="hljs-variable">contentType</span> <span class="hljs-operator">=</span> connection.getHeaderField(<span class="hljs-string">"Content-Type"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">charset</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">for</span> (String param : contentType.replace(<span class="hljs-string">" "</span>, <span class="hljs-string">""</span>).split(<span class="hljs-string">";"</span>)) {
        <span class="hljs-keyword">if</span> (param.startsWith(<span class="hljs-string">"charset="</span>)) {
            charset = param.split(<span class="hljs-string">"="</span>, <span class="hljs-number">2</span>)[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">break</span>;
        }
    }

    <span class="hljs-keyword">if</span> (charset != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(response, charset))) {
            <span class="hljs-keyword">for</span> (String line; (line = reader.readLine()) != <span class="hljs-literal">null</span>;) {
                <span class="hljs-comment">// ... System.out.println(line)?</span>
            }
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// It's likely binary content, use InputStream/OutputStream.</span>
    }
</code></pre>
<hr>
<h3>Maintaining the session</h3>
<p>The server side session is usually backed by a cookie. Some web forms require that you're logged in and/or are tracked by a session. You can use the <a href="http://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html" rel="noreferrer"><code>CookieHandler</code></a> API to maintain cookies. You need to prepare a <a href="http://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html" rel="noreferrer"><code>CookieManager</code></a> with a <a href="http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html" rel="noreferrer"><code>CookiePolicy</code></a> of <a href="http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html#ACCEPT_ALL" rel="noreferrer"><code>ACCEPT_ALL</code></a> before sending all HTTP requests.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// First set the default cookie manager.</span>
CookieHandler.setDefault(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CookieManager</span>(<span class="hljs-literal">null</span>, CookiePolicy.ACCEPT_ALL));

<span class="hljs-comment">// All the following subsequent URLConnections will use the same cookie manager.</span>
<span class="hljs-type">URLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
<span class="hljs-comment">// ...</span>

connection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
<span class="hljs-comment">// ...</span>

connection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Note that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all <code>Set-Cookie</code> headers from the response of the login or the first <code>GET</code> request and then pass this through the subsequent requests.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// Gather all cookies on the first request.</span>
<span class="hljs-type">URLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
List&lt;String&gt; cookies = connection.getHeaderFields().get(<span class="hljs-string">"Set-Cookie"</span>);
<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// Then use the same cookies on all subsequent requests.</span>
connection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
<span class="hljs-keyword">for</span> (String cookie : cookies) {
    connection.addRequestProperty(<span class="hljs-string">"Cookie"</span>, cookie.split(<span class="hljs-string">";"</span>, <span class="hljs-number">2</span>)[<span class="hljs-number">0</span>]);
}
<span class="hljs-comment">// ...</span>
</code></pre>
<p>The <code>split(";", 2)[0]</code> is there to get rid of cookie attributes which are irrelevant for the server side like <code>expires</code>, <code>path</code>, etc. Alternatively, you could also use <code>cookie.substring(0, cookie.indexOf(';'))</code> instead of <code>split()</code>.</p>
<hr>
<h3>Streaming mode</h3>
<p>The <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html" rel="noreferrer"><code>HttpURLConnection</code></a> will by default buffer the <em>entire</em> request body before actually sending it, regardless of whether you've set a fixed content length yourself using <code>connection.setRequestProperty("Content-Length", contentLength);</code>. This may cause <code>OutOfMemoryException</code>s whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29" rel="noreferrer"><code>HttpURLConnection#setFixedLengthStreamingMode()</code></a>.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">httpConnection.setFixedLengthStreamingMode(contentLength);
</code></pre>
<p>But if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29" rel="noreferrer"><code>HttpURLConnection#setChunkedStreamingMode()</code></a> accordingly. This will set the HTTP <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41" rel="noreferrer"><code>Transfer-Encoding</code></a> header to <code>chunked</code> which will force the request body being sent in chunks. The below example will send the body in chunks of 1&nbsp;KB.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">httpConnection.setChunkedStreamingMode(<span class="hljs-number">1024</span>);
</code></pre>
<hr>
<h3>User-Agent</h3>
<p>It can happen that <a href="https://stackoverflow.com/questions/13670692/403-forbidden-with-java-but-not-web-browser">a request returns an unexpected response, while it works fine with a real web browser</a>. The server side is probably blocking requests based on the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43" rel="noreferrer"><code>User-Agent</code></a> request header. The <code>URLConnection</code> will by default set it to <code>Java/1.6.0_19</code> where the last part is obviously the JRE version. You can override this as follows:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">connection.setRequestProperty(<span class="hljs-string">"User-Agent"</span>, <span class="hljs-string">"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36"</span>); <span class="hljs-comment">// Do as if you're using Chrome 41 on Windows 7.</span>
</code></pre>
<p>Use the User-Agent string from a <a href="http://www.useragentstring.com/pages/useragentstring.php" rel="noreferrer">recent browser</a>.</p>
<hr>
<h3>Error handling</h3>
<p>If the HTTP response code is <code>4nn</code> (Client Error) or <code>5nn</code> (Server Error), then you may want to read the <code>HttpURLConnection#getErrorStream()</code> to see if the server has sent any useful error information.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">InputStream</span> <span class="hljs-variable">error</span> <span class="hljs-operator">=</span> ((HttpURLConnection) connection).getErrorStream();
</code></pre>
<p>If the HTTP response code is -1, then something went wrong with connection and response handling. The <code>HttpURLConnection</code> implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the <code>http.keepAlive</code> system property to <code>false</code>. You can do this programmatically in the beginning of your application by:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">System.setProperty(<span class="hljs-string">"http.keepAlive"</span>, <span class="hljs-string">"false"</span>);
</code></pre>
<hr>
<h3>Uploading files</h3>
<p>You'd normally use <a href="http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2" rel="noreferrer"><code>multipart/form-data</code></a> encoding for mixed POST content (binary and character data). The encoding is in more detail described in <a href="http://www.faqs.org/rfcs/rfc2388.html" rel="noreferrer">RFC2388</a>.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">String</span> <span class="hljs-variable">param</span> <span class="hljs-operator">=</span> <span class="hljs-string">"value"</span>;
<span class="hljs-type">File</span> <span class="hljs-variable">textFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"/path/to/file.txt"</span>);
<span class="hljs-type">File</span> <span class="hljs-variable">binaryFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"/path/to/file.bin"</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">boundary</span> <span class="hljs-operator">=</span> Long.toHexString(System.currentTimeMillis()); <span class="hljs-comment">// Just generate some unique random value.</span>
<span class="hljs-type">String</span> <span class="hljs-variable">CRLF</span> <span class="hljs-operator">=</span> <span class="hljs-string">"\r\n"</span>; <span class="hljs-comment">// Line separator required by multipart/form-data.</span>
<span class="hljs-type">URLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
connection.setDoOutput(<span class="hljs-literal">true</span>);
connection.setRequestProperty(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"multipart/form-data; boundary="</span> + boundary);

<span class="hljs-keyword">try</span> (
    <span class="hljs-type">OutputStream</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> connection.getOutputStream();
    <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(output, charset), <span class="hljs-literal">true</span>);
) {
    <span class="hljs-comment">// Send normal param.</span>
    writer.append(<span class="hljs-string">"--"</span> + boundary).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Disposition: form-data; name=\"param\""</span>).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Type: text/plain; charset="</span> + charset).append(CRLF);
    writer.append(CRLF).append(param).append(CRLF).flush();

    <span class="hljs-comment">// Send text file.</span>
    writer.append(<span class="hljs-string">"--"</span> + boundary).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Disposition: form-data; name=\"textFile\"; filename=\""</span> + textFile.getName() + <span class="hljs-string">"\""</span>).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Type: text/plain; charset="</span> + charset).append(CRLF); <span class="hljs-comment">// Text file itself must be saved in this charset!</span>
    writer.append(CRLF).flush();
    Files.copy(textFile.toPath(), output);
    output.flush(); <span class="hljs-comment">// Important before continuing with writer!</span>
    writer.append(CRLF).flush(); <span class="hljs-comment">// CRLF is important! It indicates end of boundary.</span>

    <span class="hljs-comment">// Send binary file.</span>
    writer.append(<span class="hljs-string">"--"</span> + boundary).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Disposition: form-data; name=\"binaryFile\"; filename=\""</span> + binaryFile.getName() + <span class="hljs-string">"\""</span>).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Type: "</span> + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Transfer-Encoding: binary"</span>).append(CRLF);
    writer.append(CRLF).flush();
    Files.copy(binaryFile.toPath(), output);
    output.flush(); <span class="hljs-comment">// Important before continuing with writer!</span>
    writer.append(CRLF).flush(); <span class="hljs-comment">// CRLF is important! It indicates end of boundary.</span>

    <span class="hljs-comment">// End of multipart/form-data.</span>
    writer.append(<span class="hljs-string">"--"</span> + boundary + <span class="hljs-string">"--"</span>).append(CRLF).flush();
}
</code></pre>
<p>If the other side is an <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html" rel="noreferrer"><code>HttpServlet</code></a>, then its <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29" rel="noreferrer"><code>doPost()</code></a> method will be called and the parts will be available by <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29" rel="noreferrer"><code>HttpServletRequest#getPart()</code></a> (note, thus <strong>not</strong> <code>getParameter()</code> and so on!). The <code>getPart()</code> method is however relatively new, it's introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc.). Prior to Servlet 3.0, your best choice is using <a href="http://commons.apache.org/fileupload" rel="noreferrer">Apache Commons FileUpload</a> to parse a <code>multipart/form-data</code> request. Also see <a href="https://stackoverflow.com/questions/2422468/upload-big-file-to-servlet/2424824#2424824">this answer</a> for examples of both the FileUpload and the Servelt 3.0 approaches.</p>
<hr>
<h3>Dealing with untrusted or misconfigured HTTPS sites</h3>
<p><sup><em>In case you're developing for Android instead of Java, <strong>be careful</strong>: the workaround below may save your day if you don't have correct certificates deployed during development. But you should not use it for production. These days (April 2021) Google will not allow your app be distributed on Play Store if they detect insecure hostname verifier, see <a href="https://support.google.com/faqs/answer/7188426." rel="noreferrer">https://support.google.com/faqs/answer/7188426.</a></em></sup></p>
<p>Sometimes you need to connect an HTTPS URL, perhaps because you're writing a web scraper. In that case, you may likely face a <code>javax.net.ssl.SSLException: Not trusted server certificate</code> on some HTTPS sites who doesn't keep their SSL certificates up to date, or a <code>java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found</code> or <code>javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name</code> on some misconfigured HTTPS sites.</p>
<p>The following one-time-run <code>static</code> initializer in your web scraper class should make <code>HttpsURLConnection</code> more lenient as to those HTTPS sites and thus not throw those exceptions anymore.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">static</span> {
    TrustManager[] trustAllCertificates = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrustManager</span>[] {
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">X509TrustManager</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> X509Certificate[] getAcceptedIssuers() {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// Not relevant.</span>
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkClientTrusted</span><span class="hljs-params">(X509Certificate[] certs, String authType)</span> {
                <span class="hljs-comment">// Do nothing. Just allow them all.</span>
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkServerTrusted</span><span class="hljs-params">(X509Certificate[] certs, String authType)</span> {
                <span class="hljs-comment">// Do nothing. Just allow them all.</span>
            }
        }
    };

    <span class="hljs-type">HostnameVerifier</span> <span class="hljs-variable">trustAllHostnames</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HostnameVerifier</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">verify</span><span class="hljs-params">(String hostname, SSLSession session)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// Just allow them all.</span>
        }
    };

    <span class="hljs-keyword">try</span> {
        System.setProperty(<span class="hljs-string">"jsse.enableSNIExtension"</span>, <span class="hljs-string">"false"</span>);
        <span class="hljs-type">SSLContext</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> SSLContext.getInstance(<span class="hljs-string">"SSL"</span>);
        sc.init(<span class="hljs-literal">null</span>, trustAllCertificates, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecureRandom</span>());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
        HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);
    }
    <span class="hljs-keyword">catch</span> (GeneralSecurityException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(e);
    }
}
</code></pre>
<hr>
<h3>Last words</h3>
<p>The <a href="http://hc.apache.org/httpcomponents-client-ga/" rel="noreferrer">Apache HttpComponents HttpClient</a> is <em>much</em> more convenient in this all :)</p>
<ul>
<li><a href="http://hc.apache.org/httpcomponents-client-ga/tutorial/html/" rel="noreferrer">HttpClient Tutorial</a></li>
<li><a href="http://hc.apache.org/httpcomponents-client-ga/examples.html" rel="noreferrer">HttpClient Examples</a></li>
</ul>
<hr>
<h3>Parsing and extracting HTML</h3>
<p>If all you want is parsing and extracting data from HTML, then better use a HTML parser like <a href="http://jsoup.org" rel="noreferrer">Jsoup</a>.</p>
<ul>
<li><a href="https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281">What are the pros/cons of leading HTML parsers in Java</a></li>
<li><a href="https://stackoverflow.com/questions/2835505/how-to-scan-a-website-or-page-for-info-and-bring-it-into-my-program/2835555#2835555">How to scan and extract a webpage in Java</a></li>
</ul>
    </div></div><div><div class="flex items-center justify-between text-slate-500"><div class="flex space-x-4 md:space-x-8"><div class="flex cursor-pointer items-center transition hover:text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" class="mr-1.5 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"></path></svg><span>4</span></div></div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"count":1,"rows":[{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;sup\u0026gt;\u0026lt;em\u0026gt;First a disclaimer beforehand: the posted code snippets are all basic examples. You\u0026apos;ll need to handle trivial \u0026lt;code\u0026gt;IOException\u0026lt;/code\u0026gt;s and \u0026lt;code\u0026gt;RuntimeException\u0026lt;/code\u0026gt;s like \u0026lt;code\u0026gt;NullPointerException\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;ArrayIndexOutOfBoundsException\u0026lt;/code\u0026gt; and consorts yourself.\u0026lt;/em\u0026gt;\u0026lt;/sup\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;sup\u0026gt;\u0026lt;em\u0026gt;In case you\u0026apos;re developing for Android instead of Java, note also that since introduction of API level 28, cleartext HTTP requests are \u0026lt;a href=\u0026quot;https://developer.android.com/about/versions/pie/android-9.0-changes-28#tls-enabled\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;disabled by default\u0026lt;/a\u0026gt;. You are encouraged to use \u0026lt;code\u0026gt;HttpsURLConnection\u0026lt;/code\u0026gt;, but if it is really necessary, cleartext can be enabled in the Application Manifest.\u0026lt;/em\u0026gt;\u0026lt;/sup\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Preparing\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;We first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://example.com\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;charset\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UTF-8\u0026quot;\u0026lt;/span\u0026gt;;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;param1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value1\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;param2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value2\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;query\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; String.format(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;param1=%s\u0026amp;amp;param2=%s\u0026quot;\u0026lt;/span\u0026gt;,\n    URLEncoder.encode(param1, charset),\n    URLEncoder.encode(param2, charset));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The query parameters must be in \u0026lt;code\u0026gt;name=value\u0026lt;/code\u0026gt; format and be concatenated by \u0026lt;code\u0026gt;\u0026amp;amp;\u0026lt;/code\u0026gt;. You would normally also \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Percent-encoding\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;URL-encode\u0026lt;/a\u0026gt; the query parameters with the specified charset using \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html#encode-java.lang.String-java.lang.String-\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLEncoder#encode()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;sup\u0026gt;The \u0026lt;code\u0026gt;String#format()\u0026lt;/code\u0026gt; is just for convenience. I prefer it when I would need the String concatenation operator \u0026lt;code\u0026gt;+\u0026lt;/code\u0026gt; more than twice.\u0026lt;/sup\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Firing an \u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP GET\u0026lt;/a\u0026gt; request with (optionally) query parameters\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;It\u0026apos;s a trivial task. It\u0026apos;s the default request method.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;?\u0026quot;\u0026lt;/span\u0026gt; + query).openConnection();\nconnection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Accept-Charset\u0026quot;\u0026lt;/span\u0026gt;, charset);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getInputStream();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Any query string should be concatenated to the URL using \u0026lt;code\u0026gt;?\u0026lt;/code\u0026gt;. The \u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Accept-Charset\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; header may hint the server what encoding the parameters are in. If you don\u0026apos;t send any query string, then you can leave the \u0026lt;code\u0026gt;Accept-Charset\u0026lt;/code\u0026gt; header away. If you don\u0026apos;t need to set any headers, then you can even use the \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#openStream%28%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URL#openStream()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; shortcut method.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openStream();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Either way, if the other side is an \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServlet\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, then its \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;doGet()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; method will be called and the parameters will be available by \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServletRequest#getParameter()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For testing purposes, you can print the response body to \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;standard output\u0026lt;/a\u0026gt; as below:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Scanner\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;scanner\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Scanner\u0026lt;/span\u0026gt;(response)) {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;responseBody\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; scanner.useDelimiter(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\A\u0026quot;\u0026lt;/span\u0026gt;).next();\n    System.out.println(responseBody);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Firing an \u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP POST\u0026lt;/a\u0026gt; request with query parameters\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Setting the \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLConnection#setDoOutput()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to \u0026lt;code\u0026gt;true\u0026lt;/code\u0026gt; implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type \u0026lt;code\u0026gt;application/x-www-form-urlencoded\u0026lt;/code\u0026gt; wherein the query string is written to the request body.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\nconnection.setDoOutput(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Triggers POST.\u0026lt;/span\u0026gt;\nconnection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Accept-Charset\u0026quot;\u0026lt;/span\u0026gt;, charset);\nconnection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/x-www-form-urlencoded;charset=\u0026quot;\u0026lt;/span\u0026gt; + charset);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;OutputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;output\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getOutputStream()) {\n    output.write(query.getBytes(charset));\n}\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getInputStream();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Note: whenever you\u0026apos;d like to submit a HTML form programmatically, don\u0026apos;t forget to take the \u0026lt;code\u0026gt;name=value\u0026lt;/code\u0026gt; pairs of any \u0026lt;code\u0026gt;\u0026amp;lt;input type=\u0026quot;hidden\u0026quot;\u0026amp;gt;\u0026lt;/code\u0026gt; elements into the query string and of course also the \u0026lt;code\u0026gt;name=value\u0026lt;/code\u0026gt; pair of the \u0026lt;code\u0026gt;\u0026amp;lt;input type=\u0026quot;submit\u0026quot;\u0026amp;gt;\u0026lt;/code\u0026gt; element which you\u0026apos;d like to \u0026quot;press\u0026quot; programmatically (because that\u0026apos;s usually been used in the server side to distinguish if a button was pressed and if so, which one).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You can also cast the obtained \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLConnection\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; and use its \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection#setRequestMethod()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; instead. But if you\u0026apos;re trying to use the connection for output you still need to set \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLConnection#setDoOutput()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to \u0026lt;code\u0026gt;true\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpURLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;httpConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (HttpURLConnection) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\nhttpConnection.setRequestMethod(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;POST\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Either way, if the other side is an \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServlet\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, then its \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;doPost()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; method will be called and the parameters will be available by \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServletRequest#getParameter()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Actually firing the HTTP request\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;You can fire the HTTP request explicitly with \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#connect%28%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLConnection#connect()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#getInputStream%28%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLConnection#getInputStream()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; and so on. The above examples does exactly that, so the \u0026lt;code\u0026gt;connect()\u0026lt;/code\u0026gt; call is in fact superfluous.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Gathering HTTP response information\u0026lt;/h3\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP response status\u0026lt;/a\u0026gt;:\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;You need an \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; here. Cast it first if necessary.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;status\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; httpConnection.getResponseCode();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;ol start=\u0026quot;2\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP response headers\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (Entry\u0026amp;lt;String, List\u0026amp;lt;String\u0026amp;gt;\u0026amp;gt; header : connection.getHeaderFields().entrySet()) {\n     System.out.println(header.getKey() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;=\u0026quot;\u0026lt;/span\u0026gt; + header.getValue());\n }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP response encoding\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;When the \u0026lt;code\u0026gt;Content-Type\u0026lt;/code\u0026gt; contains a \u0026lt;code\u0026gt;charset\u0026lt;/code\u0026gt; parameter, then the response body is likely text based and we\u0026apos;d like to process the response body with the server-side specified character encoding then.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;contentType\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getHeaderField(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;charset\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (String param : contentType.replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;;\u0026quot;\u0026lt;/span\u0026gt;)) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (param.startsWith(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;charset=\u0026quot;\u0026lt;/span\u0026gt;)) {\n            charset = param.split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;=\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (charset != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BufferedReader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;reader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BufferedReader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InputStreamReader\u0026lt;/span\u0026gt;(response, charset))) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (String line; (line = reader.readLine()) != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;) {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ... System.out.println(line)?\u0026lt;/span\u0026gt;\n            }\n        }\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// It\u0026apos;s likely binary content, use InputStream/OutputStream.\u0026lt;/span\u0026gt;\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Maintaining the session\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;The server side session is usually backed by a cookie. Some web forms require that you\u0026apos;re logged in and/or are tracked by a session. You can use the \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;CookieHandler\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; API to maintain cookies. You need to prepare a \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;CookieManager\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; with a \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;CookiePolicy\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; of \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html#ACCEPT_ALL\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;ACCEPT_ALL\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; before sending all HTTP requests.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// First set the default cookie manager.\u0026lt;/span\u0026gt;\nCookieHandler.setDefault(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;CookieManager\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, CookiePolicy.ACCEPT_ALL));\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// All the following subsequent URLConnections will use the same cookie manager.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\nconnection = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\nconnection = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Note that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all \u0026lt;code\u0026gt;Set-Cookie\u0026lt;/code\u0026gt; headers from the response of the login or the first \u0026lt;code\u0026gt;GET\u0026lt;/code\u0026gt; request and then pass this through the subsequent requests.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Gather all cookies on the first request.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\nList\u0026amp;lt;String\u0026amp;gt; cookies = connection.getHeaderFields().get(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Set-Cookie\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Then use the same cookies on all subsequent requests.\u0026lt;/span\u0026gt;\nconnection = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (String cookie : cookies) {\n    connection.addRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Cookie\u0026quot;\u0026lt;/span\u0026gt;, cookie.split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]);\n}\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;split(\u0026quot;;\u0026quot;, 2)[0]\u0026lt;/code\u0026gt; is there to get rid of cookie attributes which are irrelevant for the server side like \u0026lt;code\u0026gt;expires\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;path\u0026lt;/code\u0026gt;, etc. Alternatively, you could also use \u0026lt;code\u0026gt;cookie.substring(0, cookie.indexOf(\u0026apos;;\u0026apos;))\u0026lt;/code\u0026gt; instead of \u0026lt;code\u0026gt;split()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Streaming mode\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; will by default buffer the \u0026lt;em\u0026gt;entire\u0026lt;/em\u0026gt; request body before actually sending it, regardless of whether you\u0026apos;ve set a fixed content length yourself using \u0026lt;code\u0026gt;connection.setRequestProperty(\u0026quot;Content-Length\u0026quot;, contentLength);\u0026lt;/code\u0026gt;. This may cause \u0026lt;code\u0026gt;OutOfMemoryException\u0026lt;/code\u0026gt;s whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection#setFixedLengthStreamingMode()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;httpConnection.setFixedLengthStreamingMode(contentLength);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;But if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection#setChunkedStreamingMode()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; accordingly. This will set the HTTP \u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Transfer-Encoding\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; header to \u0026lt;code\u0026gt;chunked\u0026lt;/code\u0026gt; which will force the request body being sent in chunks. The below example will send the body in chunks of 1\u0026amp;nbsp;KB.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;httpConnection.setChunkedStreamingMode(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;User-Agent\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;It can happen that \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/13670692/403-forbidden-with-java-but-not-web-browser\u0026quot;\u0026gt;a request returns an unexpected response, while it works fine with a real web browser\u0026lt;/a\u0026gt;. The server side is probably blocking requests based on the \u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;User-Agent\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; request header. The \u0026lt;code\u0026gt;URLConnection\u0026lt;/code\u0026gt; will by default set it to \u0026lt;code\u0026gt;Java/1.6.0_19\u0026lt;/code\u0026gt; where the last part is obviously the JRE version. You can override this as follows:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;connection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;User-Agent\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do as if you\u0026apos;re using Chrome 41 on Windows 7.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Use the User-Agent string from a \u0026lt;a href=\u0026quot;http://www.useragentstring.com/pages/useragentstring.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;recent browser\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Error handling\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;If the HTTP response code is \u0026lt;code\u0026gt;4nn\u0026lt;/code\u0026gt; (Client Error) or \u0026lt;code\u0026gt;5nn\u0026lt;/code\u0026gt; (Server Error), then you may want to read the \u0026lt;code\u0026gt;HttpURLConnection#getErrorStream()\u0026lt;/code\u0026gt; to see if the server has sent any useful error information.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;error\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; ((HttpURLConnection) connection).getErrorStream();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If the HTTP response code is -1, then something went wrong with connection and response handling. The \u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt; implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the \u0026lt;code\u0026gt;http.keepAlive\u0026lt;/code\u0026gt; system property to \u0026lt;code\u0026gt;false\u0026lt;/code\u0026gt;. You can do this programmatically in the beginning of your application by:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;System.setProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http.keepAlive\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;false\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Uploading files\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;You\u0026apos;d normally use \u0026lt;a href=\u0026quot;http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;multipart/form-data\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; encoding for mixed POST content (binary and character data). The encoding is in more detail described in \u0026lt;a href=\u0026quot;http://www.faqs.org/rfcs/rfc2388.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;RFC2388\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;textFile\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/path/to/file.txt\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;binaryFile\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/path/to/file.bin\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;boundary\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Long.toHexString(System.currentTimeMillis()); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Just generate some unique random value.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;CRLF\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\r\\n\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Line separator required by multipart/form-data.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\nconnection.setDoOutput(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\nconnection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/form-data; boundary=\u0026quot;\u0026lt;/span\u0026gt; + boundary);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; (\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;OutputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;output\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getOutputStream();\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;writer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OutputStreamWriter\u0026lt;/span\u0026gt;(output, charset), \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Send normal param.\u0026lt;/span\u0026gt;\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--\u0026quot;\u0026lt;/span\u0026gt; + boundary).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Disposition: form-data; name=\\\u0026quot;param\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type: text/plain; charset=\u0026quot;\u0026lt;/span\u0026gt; + charset).append(CRLF);\n    writer.append(CRLF).append(param).append(CRLF).flush();\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Send text file.\u0026lt;/span\u0026gt;\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--\u0026quot;\u0026lt;/span\u0026gt; + boundary).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Disposition: form-data; name=\\\u0026quot;textFile\\\u0026quot;; filename=\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; + textFile.getName() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type: text/plain; charset=\u0026quot;\u0026lt;/span\u0026gt; + charset).append(CRLF); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Text file itself must be saved in this charset!\u0026lt;/span\u0026gt;\n    writer.append(CRLF).flush();\n    Files.copy(textFile.toPath(), output);\n    output.flush(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Important before continuing with writer!\u0026lt;/span\u0026gt;\n    writer.append(CRLF).flush(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// CRLF is important! It indicates end of boundary.\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Send binary file.\u0026lt;/span\u0026gt;\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--\u0026quot;\u0026lt;/span\u0026gt; + boundary).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Disposition: form-data; name=\\\u0026quot;binaryFile\\\u0026quot;; filename=\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; + binaryFile.getName() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type: \u0026quot;\u0026lt;/span\u0026gt; + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Transfer-Encoding: binary\u0026quot;\u0026lt;/span\u0026gt;).append(CRLF);\n    writer.append(CRLF).flush();\n    Files.copy(binaryFile.toPath(), output);\n    output.flush(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Important before continuing with writer!\u0026lt;/span\u0026gt;\n    writer.append(CRLF).flush(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// CRLF is important! It indicates end of boundary.\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// End of multipart/form-data.\u0026lt;/span\u0026gt;\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--\u0026quot;\u0026lt;/span\u0026gt; + boundary + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--\u0026quot;\u0026lt;/span\u0026gt;).append(CRLF).flush();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If the other side is an \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServlet\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, then its \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;doPost()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; method will be called and the parts will be available by \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServletRequest#getPart()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; (note, thus \u0026lt;strong\u0026gt;not\u0026lt;/strong\u0026gt; \u0026lt;code\u0026gt;getParameter()\u0026lt;/code\u0026gt; and so on!). The \u0026lt;code\u0026gt;getPart()\u0026lt;/code\u0026gt; method is however relatively new, it\u0026apos;s introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc.). Prior to Servlet 3.0, your best choice is using \u0026lt;a href=\u0026quot;http://commons.apache.org/fileupload\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Apache Commons FileUpload\u0026lt;/a\u0026gt; to parse a \u0026lt;code\u0026gt;multipart/form-data\u0026lt;/code\u0026gt; request. Also see \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/2422468/upload-big-file-to-servlet/2424824#2424824\u0026quot;\u0026gt;this answer\u0026lt;/a\u0026gt; for examples of both the FileUpload and the Servelt 3.0 approaches.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Dealing with untrusted or misconfigured HTTPS sites\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;sup\u0026gt;\u0026lt;em\u0026gt;In case you\u0026apos;re developing for Android instead of Java, \u0026lt;strong\u0026gt;be careful\u0026lt;/strong\u0026gt;: the workaround below may save your day if you don\u0026apos;t have correct certificates deployed during development. But you should not use it for production. These days (April 2021) Google will not allow your app be distributed on Play Store if they detect insecure hostname verifier, see \u0026lt;a href=\u0026quot;https://support.google.com/faqs/answer/7188426.\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://support.google.com/faqs/answer/7188426.\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/sup\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Sometimes you need to connect an HTTPS URL, perhaps because you\u0026apos;re writing a web scraper. In that case, you may likely face a \u0026lt;code\u0026gt;javax.net.ssl.SSLException: Not trusted server certificate\u0026lt;/code\u0026gt; on some HTTPS sites who doesn\u0026apos;t keep their SSL certificates up to date, or a \u0026lt;code\u0026gt;java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name\u0026lt;/code\u0026gt; on some misconfigured HTTPS sites.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The following one-time-run \u0026lt;code\u0026gt;static\u0026lt;/code\u0026gt; initializer in your web scraper class should make \u0026lt;code\u0026gt;HttpsURLConnection\u0026lt;/code\u0026gt; more lenient as to those HTTPS sites and thus not throw those exceptions anymore.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; {\n    TrustManager[] trustAllCertificates = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;TrustManager\u0026lt;/span\u0026gt;[] {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;X509TrustManager\u0026lt;/span\u0026gt;() {\n            \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; X509Certificate[] getAcceptedIssuers() {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Not relevant.\u0026lt;/span\u0026gt;\n            }\n            \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;checkClientTrusted\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(X509Certificate[] certs, String authType)\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do nothing. Just allow them all.\u0026lt;/span\u0026gt;\n            }\n            \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;checkServerTrusted\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(X509Certificate[] certs, String authType)\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do nothing. Just allow them all.\u0026lt;/span\u0026gt;\n            }\n        }\n    };\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HostnameVerifier\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;trustAllHostnames\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HostnameVerifier\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;verify\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String hostname, SSLSession session)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Just allow them all.\u0026lt;/span\u0026gt;\n        }\n    };\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        System.setProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;jsse.enableSNIExtension\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;false\u0026quot;\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SSLContext\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;sc\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; SSLContext.getInstance(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SSL\u0026quot;\u0026lt;/span\u0026gt;);\n        sc.init(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, trustAllCertificates, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SecureRandom\u0026lt;/span\u0026gt;());\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n        HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (GeneralSecurityException e) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ExceptionInInitializerError\u0026lt;/span\u0026gt;(e);\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Last words\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;a href=\u0026quot;http://hc.apache.org/httpcomponents-client-ga/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Apache HttpComponents HttpClient\u0026lt;/a\u0026gt; is \u0026lt;em\u0026gt;much\u0026lt;/em\u0026gt; more convenient in this all :)\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://hc.apache.org/httpcomponents-client-ga/tutorial/html/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HttpClient Tutorial\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://hc.apache.org/httpcomponents-client-ga/examples.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HttpClient Examples\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Parsing and extracting HTML\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;If all you want is parsing and extracting data from HTML, then better use a HTML parser like \u0026lt;a href=\u0026quot;http://jsoup.org\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Jsoup\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281\u0026quot;\u0026gt;What are the pros/cons of leading HTML parsers in Java\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/2835505/how-to-scan-a-website-or-page-for-info-and-bring-it-into-my-program/2835555#2835555\u0026quot;\u0026gt;How to scan and extract a webpage in Java\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;When working with HTTP it\u0026apos;s almost always more useful to refer to \u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt; rather than the base class \u0026lt;code\u0026gt;URLConnection\u0026lt;/code\u0026gt; (since \u0026lt;code\u0026gt;URLConnection\u0026lt;/code\u0026gt; is an abstract class when you ask for \u0026lt;code\u0026gt;URLConnection.openConnection()\u0026lt;/code\u0026gt; on a HTTP URL that\u0026apos;s what you\u0026apos;ll get back anyway).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Then you can instead of relying on \u0026lt;code\u0026gt;URLConnection#setDoOutput(true)\u0026lt;/code\u0026gt; to implicitly set the request method to \u0026lt;em\u0026gt;POST\u0026lt;/em\u0026gt; instead do \u0026lt;code\u0026gt;httpURLConnection.setRequestMethod(\u0026quot;POST\u0026quot;)\u0026lt;/code\u0026gt; which some might find more natural (and which also allows you to specify other request methods such as \u0026lt;em\u0026gt;PUT\u0026lt;/em\u0026gt;, \u0026lt;em\u0026gt;DELETE\u0026lt;/em\u0026gt;, ...).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It also provides useful HTTP constants so you can do:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;responseCode\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; httpURLConnection.getResponseCode();\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (responseCode == HttpURLConnection.HTTP_OK) {\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Inspired by this and other questions on Stack\u0026amp;nbsp;Overflow, I\u0026apos;ve created a minimal open source \u0026lt;a href=\u0026quot;http://code.google.com/p/basic-http-client/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;basic-http-client\u0026lt;/a\u0026gt; that embodies most of the techniques found here.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://code.google.com/p/google-http-java-client/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;google-http-java-client\u0026lt;/a\u0026gt; is also a great open source resource.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I suggest you take a look at the code on \u0026lt;a href=\u0026quot;https://github.com/kevinsawicki/http-request\u0026quot;\u0026gt;kevinsawicki/http-request\u0026lt;/a\u0026gt;, its basically a wrapper on top of \u0026lt;code\u0026gt;HttpUrlConnection\u0026lt;/code\u0026gt; it provides a much simpler API in case you just want to make the requests right now or you can take a look at the sources (it\u0026apos;s not too big) to take a look at how connections are handled.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Example: Make a \u0026lt;code\u0026gt;GET\u0026lt;/code\u0026gt; request with content type \u0026lt;code\u0026gt;application/json\u0026lt;/code\u0026gt; and some query parameters:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// GET http://google.com?q=baseball%20gloves\u0026amp;amp;size=100\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpRequest.get(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://google.com\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;q\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;baseball gloves\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;size\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;)\n        .accept(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/json\u0026quot;\u0026lt;/span\u0026gt;)\n        .body();\nSystem.out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Response was: \u0026quot;\u0026lt;/span\u0026gt; + response);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;Update\u0026lt;/h2\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;The new HTTP Client shipped with Java 9 but as part of an\n  Incubator module named \u0026lt;code\u0026gt;jdk.incubator.httpclient\u0026lt;/code\u0026gt;. Incubator modules are\n  a means of putting non-final APIs in the hands of developers while the\n  APIs progress towards either finalization or removal in a future\n  release.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;In Java 9, you can send a \u0026lt;code\u0026gt;GET\u0026lt;/code\u0026gt; request like:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// GET\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpResponse\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpRequest\n    .create(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URI\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://www.stackoverflow.com\u0026quot;\u0026lt;/span\u0026gt;))\n    .headers(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Foo\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foovalue\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Bar\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;barvalue\u0026quot;\u0026lt;/span\u0026gt;)\n    .GET()\n    .response();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then you can examine the returned \u0026lt;code\u0026gt;HttpResponse\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;statusCode\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; response.statusCode();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;responseBody\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; response.body(HttpResponse.asString());\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Since this new HTTP Client is in \u0026lt;del\u0026gt;\u0026lt;code\u0026gt;java.httpclient\u0026lt;/code\u0026gt;\u0026lt;/del\u0026gt; \u0026lt;code\u0026gt;jdk.incubator.httpclient\u0026lt;/code\u0026gt; module, you should declare this dependency in your \u0026lt;code\u0026gt;module-info.java\u0026lt;/code\u0026gt; file:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;module\u0026lt;/span\u0026gt; com.foo.bar {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;requires\u0026lt;/span\u0026gt; jdk.incubator.httpclient;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are two options you can go with HTTP URL Hits : GET / POST\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;GET Request:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;HttpURLConnection.setFollowRedirects(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Defaults to true\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;https://name_of_the_url\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request_url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpURLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;http_conn\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100000\u0026lt;/span\u0026gt;);\nhttp_conn.setReadTimeout(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100000\u0026lt;/span\u0026gt;);\nhttp_conn.setInstanceFollowRedirects(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;POST request:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;HttpURLConnection.setFollowRedirects(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Defaults to true\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;https://name_of_the_url\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request_url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpURLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;http_conn\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100000\u0026lt;/span\u0026gt;);\nhttp_conn.setReadTimeout(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100000\u0026lt;/span\u0026gt;);\nhttp_conn.setInstanceFollowRedirects(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\nhttp_conn.setDoOutput(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt;(http_conn.getOutputStream());\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (urlparameter != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n   out.println(urlparameter);\n}\nout.close();\nout = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I was also very inspired by this response.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I am often on projects where I need to do some HTTP, and I may not want to bring in a lot of third-party dependencies (which bring in others and so on and so on, etc.)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I started to write my own utilities based on some of this conversation (not any where done):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; org.boon.utils;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.IOException;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.InputStream;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.HttpURLConnection;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.URL;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.URLConnection;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Map;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; org.boon.utils.IO.read;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HTTP\u0026lt;/span\u0026gt; {\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then there are just a bunch or static methods.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url)\u0026lt;/span\u0026gt; {\n\n    Exceptions.tryIt(() -\u0026amp;gt; {\n        URLConnection connection;\n        connection = doGet(url, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    });\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getWithHeaders\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers)\u0026lt;/span\u0026gt; {\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doGet(url, headers, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getWithContentType\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n        String contentType)\u0026lt;/span\u0026gt; {\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doGet(url, headers, contentType, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getWithCharSet\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n        String contentType,\n        String charSet)\u0026lt;/span\u0026gt; {\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doGet(url, headers, contentType, charSet);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then post...\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;postBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String body)\u0026lt;/span\u0026gt; {\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doPost(url, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, body);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;postBodyWithHeaders\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String body)\u0026lt;/span\u0026gt; {\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doPost(url, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, body);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;postBodyWithContentType\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String contentType,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String body)\u0026lt;/span\u0026gt; {\n\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doPost(url, headers, contentType, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, body);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;postBodyWithCharset\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String contentType,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String charSet,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String body)\u0026lt;/span\u0026gt; {\n\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doPost(url, headers, contentType, charSet, body);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; URLConnection \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doPost\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url, Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n                                    String contentType, String charset, String body\n                                    )\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n    URLConnection connection;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Handle output. */\u0026lt;/span\u0026gt;\n    connection = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n    connection.setDoOutput(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    IO.write(connection.getOutputStream(), body, IO.CHARSET);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; connection;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;manageHeaders\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers, URLConnection connection)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (headers != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (Map.Entry\u0026amp;lt;String, ? \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;\u0026amp;gt; entry : headers.entrySet()) {\n            connection.setRequestProperty(entry.getKey(), entry.getValue().toString());\n        }\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;manageContentTypeHeaders\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String contentType, String charset, URLConnection connection)\u0026lt;/span\u0026gt; {\n    connection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Accept-Charset\u0026quot;\u0026lt;/span\u0026gt;, charset == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; ? IO.CHARSET : charset);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (contentType!=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; !contentType.isEmpty()) {\n        connection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;, contentType);\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; URLConnection \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doGet\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url, Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n                                    String contentType, String charset)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n    URLConnection connection;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Handle output. */\u0026lt;/span\u0026gt;\n    connection = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; connection;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extractResponseString\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(URLConnection connection)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Handle input. */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpURLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;http\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (HttpURLConnection)connection;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;status\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; http.getResponseCode();\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;charset\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getCharset(connection.getHeaderField(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;));\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (status==\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;200\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; readResponseBody(http, charset);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; readErrorResponseBody(http, status, charset);\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;readErrorResponseBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpURLConnection http, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; status, String charset)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;errorStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; http.getErrorStream();\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; ( errorStream!=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; ) {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;error\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; charset== \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; ? read( errorStream ) :\n            read( errorStream, charset );\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;STATUS CODE =\u0026quot;\u0026lt;/span\u0026gt; + status + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\\n\u0026quot;\u0026lt;/span\u0026gt; + error);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;STATUS CODE =\u0026quot;\u0026lt;/span\u0026gt; + status);\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;readResponseBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpURLConnection http, String charset)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (charset != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; read(http.getInputStream(), charset);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; read(http.getInputStream());\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCharset\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String contentType)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (contentType==\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;)  {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;charset\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (String param : contentType.replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;;\u0026quot;\u0026lt;/span\u0026gt;)) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (param.startsWith(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;charset=\u0026quot;\u0026lt;/span\u0026gt;)) {\n            charset = param.split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;=\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n        }\n    }\n    charset = charset == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; ? IO.CHARSET : charset;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; charset;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Well, you get the idea....\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Here are the tests:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyHandler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;implements\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpHandler\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;handle\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpExchange t)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;requestBody\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; t.getRequestBody();\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; IO.read(requestBody);\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Headers\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;requestHeaders\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; t.getRequestHeaders();\n        body = body + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\u0026quot;\u0026lt;/span\u0026gt; + copy(requestHeaders).toString();\n        t.sendResponseHeaders(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;200\u0026lt;/span\u0026gt;, body.length());\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;OutputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;os\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; t.getResponseBody();\n        os.write(body.getBytes());\n        os.close();\n    }\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Test\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testHappy\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception {\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpServer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;server\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpServer.create(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InetSocketAddress\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9212\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n    server.createContext(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/test\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyHandler\u0026lt;/span\u0026gt;());\n    server.setExecutor(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// creates a default executor\u0026lt;/span\u0026gt;\n    server.start();\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    Map\u0026amp;lt;String,String\u0026amp;gt; headers = map(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bar\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fun\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sun\u0026quot;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HTTP.postBodyWithContentType(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;));\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    response = HTTP.postBodyWithCharset(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UTF-8\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;));\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    response = HTTP.postBodyWithHeaders(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;));\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    response = HTTP.get(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    response = HTTP.getWithHeaders(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    response = HTTP.getWithContentType(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    response = HTTP.getWithCharSet(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UTF-8\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    server.stop(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n}\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Test\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testPostBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception {\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpServer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;server\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpServer.create(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InetSocketAddress\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9220\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n    server.createContext(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/test\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyHandler\u0026lt;/span\u0026gt;());\n    server.setExecutor(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// creates a default executor\u0026lt;/span\u0026gt;\n    server.start();\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    Map\u0026amp;lt;String,String\u0026amp;gt; headers = map(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bar\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fun\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sun\u0026quot;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HTTP.postBody(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9220/test\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;));\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    server.stop(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n}\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Test(expected = RuntimeException.class)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testSad\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception {\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpServer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;server\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpServer.create(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InetSocketAddress\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9213\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n    server.createContext(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/test\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyHandler\u0026lt;/span\u0026gt;());\n    server.setExecutor(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// creates a default executor\u0026lt;/span\u0026gt;\n    server.start();\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    Map\u0026amp;lt;String,String\u0026amp;gt; headers = map(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bar\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fun\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sun\u0026quot;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HTTP.postBodyWithContentType(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9213/foo\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;));\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    server.stop(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You can find the rest here:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/RichardHightower/boon\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://github.com/RichardHightower/boon\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;My goal is to provide the common things one would want to do in a bit more easier way then....\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Initially I was misled by \u0026lt;a href=\u0026quot;http://www.innovation.ch/java/HTTPClient/urlcon_vs_httpclient.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this article\u0026lt;/a\u0026gt; which favours \u0026lt;code\u0026gt;HttpClient\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Later I have realized that \u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt; is going to stay from \u0026lt;a href=\u0026quot;https://github.com/loopj/android-async-http/issues/75\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this article\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;As per the Google blog\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Apache HTTP client has fewer bugs on Eclair and Froyo. It is the best choice for these releases. For Gingerbread , HttpURLConnection is the best choice. Its simple API and small size makes it great fit for Android.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Transparent compression and response caching reduce network use, improve speed and save battery. New applications should use HttpURLConnection; it is where we will be spending our energy going forward.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;After reading \u0026lt;a href=\u0026quot;http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this article\u0026lt;/a\u0026gt; and some other stack over flow questions, I am convinced that \u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt; is going to stay for longer durations.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Some of the SE questions favouring \u0026lt;code\u0026gt;HttpURLConnections\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/4330392/on-android-make-a-post-request-with-url-encoded-form-data-without-using-urlenco/4794289#4794289\u0026quot;\u0026gt;On Android, make a POST request with URL Encoded Form data without using UrlEncodedFormEntity\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/4221420/httppost-works-in-java-project-not-in-android\u0026quot;\u0026gt;HttpPost works in Java project, but not on Android\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There is also \u0026lt;a href=\u0026quot;http://square.github.io/okhttp/\u0026quot;\u0026gt;OkHttp\u0026lt;/a\u0026gt;, which is an HTTP client thats efficient by default:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;ul\u0026gt;\n  \u0026lt;li\u0026gt;HTTP/2 support allows all requests to the same host to share a    socket.\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;Connection pooling reduces request latency (if HTTP/2 isnt    available).\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;Transparent GZIP shrinks download sizes.\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;Response caching avoids the network completely for repeat requests.\u0026lt;/li\u0026gt;\n  \u0026lt;/ul\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;First create an instance of \u0026lt;code\u0026gt;OkHttpClient\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;OkHttpClient\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;client\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OkHttpClient\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then, prepare your \u0026lt;code\u0026gt;GET\u0026lt;/code\u0026gt; request:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Request\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Request\u0026lt;/span\u0026gt;.Builder()\n      .url(url)\n      .build();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;finally, use \u0026lt;code\u0026gt;OkHttpClient\u0026lt;/code\u0026gt; to send prepared \u0026lt;code\u0026gt;Request\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; client.newCall(request).execute();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;For more details, you can consult the \u0026lt;a href=\u0026quot;https://github.com/square/okhttp/wiki\u0026quot;\u0026gt;OkHttp\u0026apos;s documentation\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are using HTTP \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;GET\u0026lt;/a\u0026gt;, please remove this line:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;urlConnection.setDoOutput(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can also use \u0026lt;a href=\u0026quot;http://http.jcabi.com/apidocs-1.0/com/jcabi/http/request/JdkRequest.html\u0026quot;\u0026gt;\u0026lt;code\u0026gt;JdkRequest\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; from \u0026lt;a href=\u0026quot;http://http.jcabi.com\u0026quot;\u0026gt;jcabi-http\u0026lt;/a\u0026gt; (I\u0026apos;m a developer), which does all this work for you, decorating HttpURLConnection, firing HTTP requests and parsing responses, for example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;html\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JdkRequest\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://www.google.com\u0026quot;\u0026lt;/span\u0026gt;).fetch().body();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Check this blog post for more info: \u0026lt;a href=\u0026quot;http://www.yegor256.com/2014/04/11/jcabi-http-intro.html\u0026quot;\u0026gt;http://www.yegor256.com/2014/04/11/jcabi-http-intro.html\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are using \u0026lt;strong\u0026gt;Java 11\u0026lt;/strong\u0026gt; (\u0026lt;a href=\u0026quot;https://stackoverflow.com/q/65363995/8583692\u0026quot;\u0026gt;except on Android\u0026lt;/a\u0026gt;), instead of the legacy \u0026lt;em\u0026gt;HttpUrlConnection\u0026lt;/em\u0026gt; class, you can use Java 11 new \u0026lt;a href=\u0026quot;https://openjdk.java.net/groups/net/httpclient/intro.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;HTTP Client API\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;h4\u0026gt;An example \u0026lt;em\u0026gt;GET\u0026lt;/em\u0026gt; request:\u0026lt;/h4\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;uri\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; URI.create(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;https://httpbin.org/get?age=26\u0026amp;amp;isHappy=true\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;client\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpClient.newHttpClient();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .header(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;accept\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/json\u0026quot;\u0026lt;/span\u0026gt;)\n        .GET()\n        .build();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; client.send(request, HttpResponse.BodyHandlers.ofString());\nSystem.out.println(response.statusCode());\nSystem.out.println(response.body());\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The same request executed asynchronously:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;responseAsync\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; client\n        .sendAsync(request, HttpResponse.BodyHandlers.ofString())\n        .thenApply(HttpResponse::body)\n        .thenAccept(System.out::println);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// responseAsync.join(); // Wait for completion\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h4\u0026gt;An example \u0026lt;em\u0026gt;POST\u0026lt;/em\u0026gt; request:\u0026lt;/h4\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .version(HttpClient.Version.HTTP_2)\n        .timeout(Duration.ofMinutes(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;))\n        .header(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/json\u0026quot;\u0026lt;/span\u0026gt;)\n        .header(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Authorization\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Bearer fake\u0026quot;\u0026lt;/span\u0026gt;)\n        .POST(BodyPublishers.ofString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;{ title: \u0026apos;This is cool\u0026apos; }\u0026quot;\u0026lt;/span\u0026gt;))\n        .build();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; client.send(request, HttpResponse.BodyHandlers.ofString());\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;For sending form data as multipart (\u0026lt;code\u0026gt;multipart/form-data\u0026lt;/code\u0026gt;) or url-encoded (\u0026lt;code\u0026gt;application/x-www-form-urlencoded\u0026lt;/code\u0026gt;) format, see \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/56482187/8583692\u0026quot;\u0026gt;this solution\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;See \u0026lt;a href=\u0026quot;https://www.baeldung.com/java-9-http-client\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this article\u0026lt;/a\u0026gt; for examples and more information about HTTP Client API.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Sidenote\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;For Java standard library HTTP server, see \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/71635295/8583692\u0026quot;\u0026gt;this post\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    "],"comment":["\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Some questions with lots of votes and general titles are flagged duplicate and link to this question. Also, there are \u0026lt;a href=\u0026quot;https://openjdk.java.net/groups/net/httpclient/intro.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;new ways\u0026lt;/a\u0026gt; to execute HTTP requests in Java and the legacy \u0026lt;i\u0026gt;URLConnection\u0026lt;/i\u0026gt; way may be deprecated in future. The title of this question should probably change to \u0026lt;i\u0026gt;How to execute HTTP requests in Java\u0026lt;/i\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/8583692/mahozad\u0026quot; title=\u0026quot;11,874 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Mahozad\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment124703591_2793150\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2021-12-31 19:31:32Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 31, 2021 at 19:31\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@imperator: It\u0026apos;s a bug in the server\u0026apos;s code. It threw an exception. The error page which may contain detailed exception information is available in \u0026lt;code\u0026gt;getErrorStream()\u0026lt;/code\u0026gt;. See also \u0026quot;Error Handling\u0026quot; part in the above answer. Or if it\u0026apos;s your own server, read its server logs.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/157882/balusc\u0026quot; title=\u0026quot;1,044,865 reputation\u0026quot; class=\u0026quot;comment-user owner\u0026quot;\u0026gt;BalusC\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment11881119_2793153\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2012-02-22 20:17:17Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Feb 22, 2012 at 20:17\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 2 times\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Brais: Please read the spec. The \u0026lt;code\u0026gt;--\u0026lt;/code\u0026gt; part is not part of the boundary itself. It\u0026apos;s just a separator string. I\u0026apos;ve rolled back your invalid edit.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/157882/balusc\u0026quot; title=\u0026quot;1,044,865 reputation\u0026quot; class=\u0026quot;comment-user owner\u0026quot;\u0026gt;BalusC\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment17309614_2793153\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2012-10-09 13:22:58Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Oct 9, 2012 at 13:22\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;The sad part is that on Android it is \u0026lt;i\u0026gt;not\u0026lt;/i\u0026gt; recommended to use the Apache \u0026lt;code\u0026gt;HttpClient\u0026lt;/code\u0026gt; now and \u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt; is cruel. \u0026lt;a href=\u0026quot;http://android-developers.blogspot.in/2011/09/androids-http-clients.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;android-developers.blogspot.in/2011/09/\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/687467/yati-sagade\u0026quot; title=\u0026quot;1,325 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;yati sagade\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment35265439_2793153\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-04-15 05:27:32Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 15, 2014 at 5:27\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;According to my simple measures URLConn is 400-500ms faster than Apache.Httpclient\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1599213/to-kra\u0026quot; title=\u0026quot;3,046 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;To Kra\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment37266706_2793153\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-06-10 19:22:48Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 10, 2014 at 19:22\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Haresh: They are part of Java 7. Like as those \u0026lt;code\u0026gt;try-with-resources\u0026lt;/code\u0026gt; statements. Perhaps you\u0026apos;re still on long EOL\u0026apos;ed Java 6 or even older? Just upgrade to at least Java 7 (we\u0026apos;re currently already on Java 8), or replace Java 7 code by older Java equivalents. E.g. an old fashioned \u0026lt;code\u0026gt;for\u0026lt;/code\u0026gt; loop writing a buffer from input to ouput.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/157882/balusc\u0026quot; title=\u0026quot;1,044,865 reputation\u0026quot; class=\u0026quot;comment-user owner\u0026quot;\u0026gt;BalusC\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment49338508_2793153\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-06-04 06:49:55Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 4, 2015 at 6:49\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 4 times\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;setDoOutPut true was my issue which set my GET to a POST. Thanks\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/255293/patrick-kafka\u0026quot; title=\u0026quot;9,666 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Patrick Kafka\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment10664880_8394587\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-12-21 21:32:47Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 21, 2011 at 21:32\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;If you are trying to write data to the outputstream you \u0026lt;b\u0026gt;must\u0026lt;/b\u0026gt; still set \u0026lt;code\u0026gt;setDoOutput()\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;true\u0026lt;/code\u0026gt; otherwise an exception is thrown (even if you \u0026lt;code\u0026gt;setRequestMethod(\u0026quot;POST\u0026quot;)\u0026lt;/code\u0026gt;). To be clear: setting \u0026lt;code\u0026gt;URLConnection#setDoOutput(true)\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;true\u0026lt;/code\u0026gt; implicitly sets the request method to POST, but setting \u0026lt;code\u0026gt;httpURLConnection.setRequestMethod(\u0026quot;POST\u0026quot;)\u0026lt;/code\u0026gt; to POST does \u0026lt;b\u0026gt;not\u0026lt;/b\u0026gt; implicitly set \u0026lt;code\u0026gt;setDoOutput()\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;true\u0026lt;/code\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/708906/tony-chan\u0026quot; title=\u0026quot;7,952 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Tony Chan\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment15567926_8394587\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2012-07-31 00:09:44Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 31, 2012 at 0:09\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;8 years later, \u0026lt;code\u0026gt;setRequestMethod(\u0026quot;POST\u0026quot;)\u0026lt;/code\u0026gt; \u0026lt;b\u0026gt;\u0026lt;i\u0026gt;does\u0026lt;/i\u0026gt;\u0026lt;/b\u0026gt; set \u0026lt;code\u0026gt;doOutput\u0026lt;/code\u0026gt; to \u0026lt;b\u0026gt;\u0026lt;code\u0026gt;true\u0026lt;/code\u0026gt;\u0026lt;/b\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/192373/alex-cohn\u0026quot; title=\u0026quot;54,262 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Alex Cohn\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment118555338_8394587\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2021-04-13 09:18:12Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 13, 2021 at 9:18\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;I was just thinking the same. But it might also be nice to have a barebones/simple Java library that only uses URLConnection code as presented here that encapsulates the code to simpler methods to do an HTTP GET, POST, etc. The library can then be compiled \u0026amp;amp; packaged as JAR and imported/used in Java code or the source class file can be included in Java project if external JARs are not desired. This could be done with other libraries like Apache, etc. but is more of a pain compared to a simple 1 file class library using URLConnection.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/425997/david\u0026quot; title=\u0026quot;2,964 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;David\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment20158548_11019442\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2013-01-23 00:24:28Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 23, 2013 at 0:24\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026lt;a href=\u0026quot;http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;rapidvaluesolutions.com/tech_blog/\u0026lt;/a\u0026gt; favors HttpURLConnection over HttpClient\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/4999394/ravindra-babu\u0026quot; title=\u0026quot;46,251 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Ravindra babu\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment53401318_11019442\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-09-25 11:48:25Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 25, 2015 at 11:48\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Further update: the module is out of incubation status.  Its now \u0026lt;a href=\u0026quot;https://docs.oracle.com/en/java/javase/13/docs/api/java.net.http/module-summary.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;java.net.http\u0026lt;/a\u0026gt;, not jdk.incubator.httpclient.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1831987/vgr\u0026quot; title=\u0026quot;37,784 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;VGR\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment102428134_36932953\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2019-09-19 13:19:36Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 19, 2019 at 13:19\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;How can you view the actual JSON response?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/7028887/sora\u0026quot; title=\u0026quot;517 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Sora\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment83561031_27547168\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-01-16 19:01:12Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 16, 2018 at 19:01\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;It\u0026apos;s odd that in the \u0026lt;code\u0026gt;doPost\u0026lt;/code\u0026gt; method there is a \u0026lt;code\u0026gt;charset\u0026lt;/code\u0026gt; param, that is used to set request header, but then the data is written with some hard-coded charset \u0026lt;code\u0026gt;IO.CHARSET\u0026lt;/code\u0026gt;. A bug?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/247013/vit-khudenko\u0026quot; title=\u0026quot;28,049 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Vit Khudenko\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment30192476_19418989\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2013-11-27 13:48:04Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 27, 2013 at 13:48\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;How do you handle cookies?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/264419/dejell\u0026quot; title=\u0026quot;13,556 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Dejell\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment44725309_20239958\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-01-27 19:08:05Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 27, 2015 at 19:08\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        "],"id":210,"title":"How to use java.net.URLConnection to fire and handle HTTP requests","content":"\n                \n\u0026lt;p\u0026gt;Use of \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;java.net.URLConnection\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; is asked about pretty often here, and the \u0026lt;a href=\u0026quot;http://download.oracle.com/javase/tutorial/networking/urls/connecting.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Oracle tutorial\u0026lt;/a\u0026gt; is \u0026lt;em\u0026gt;too\u0026lt;/em\u0026gt; concise about it.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;That tutorial basically only shows how to fire a \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;GET\u0026lt;/a\u0026gt; request and read the response. It doesn\u0026apos;t explain anywhere how to use it to, among others, perform a \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/POST_%28HTTP%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;POST\u0026lt;/a\u0026gt; request, set request headers, read response headers, deal with cookies, submit a HTML form, upload a file, etc.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So, how can I use \u0026lt;code\u0026gt;java.net.URLConnection\u0026lt;/code\u0026gt; to fire and handle \u0026quot;advanced\u0026quot; HTTP requests?\u0026lt;/p\u0026gt;\n    ","slug":"how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934","postType":"QUESTION","createdAt":"2022-07-09T17:20:45.000Z","updatedAt":"2022-07-09T17:20:45.000Z","tags":[{"id":1469,"name":"http","slug":"http","createdAt":"2022-07-09T17:20:46.000Z","updatedAt":"2022-07-09T17:20:46.000Z","Questions_Tags":{"questionId":210,"tagId":1469}}]}]}},"__N_SSG":true},"page":"/questions/tag/[slug]","query":{"slug":"http"},"buildId":"4Y8KGE-c2lolBeBmcum_I","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>