{"pageProps":{"data":{"count":1,"rows":[{"id":218,"title":"Removing trailing newline character from fgets() input","slug":"removing-trailing-newline-character-from-fgets()-input-1657387308069","postType":"QUESTION","createdAt":"2022-07-09T17:21:48.000Z","updatedAt":"2022-07-09T17:21:48.000Z","tags":[{"id":1502,"name":"newline","slug":"newline","createdAt":"2022-07-09T17:21:48.000Z","updatedAt":"2022-07-09T17:21:48.000Z","Questions_Tags":{"questionId":218,"tagId":1502}}]}]},"slug":"newline","page":1,"answers":{"218":["\n&lt;p&gt;Perhaps the simplest solution uses one of my favorite little-known functions, &lt;a href=&quot;http://www.freebsd.org/cgi/man.cgi?query=strcspn&amp;amp;sektion=3&quot; rel=&quot;noreferrer&quot; title=&quot;strcspn manpage&quot;&gt;&lt;code&gt;strcspn()&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;buffer[&lt;span class=&quot;hljs-built_in&quot;&gt;strcspn&lt;/span&gt;(buffer, &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;)] = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If you want it to also handle &lt;code&gt;&apos;\\r&apos;&lt;/code&gt; (say, if the stream is binary):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;buffer[&lt;span class=&quot;hljs-built_in&quot;&gt;strcspn&lt;/span&gt;(buffer, &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\r\\n&quot;&lt;/span&gt;)] = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// works for LF, CR, CRLF, LFCR, ...&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The function counts the number of characters until it hits a &lt;code&gt;&apos;\\r&apos;&lt;/code&gt; or a &lt;code&gt;&apos;\\n&apos;&lt;/code&gt; (in other words, it finds the first &lt;code&gt;&apos;\\r&apos;&lt;/code&gt; or &lt;code&gt;&apos;\\n&apos;&lt;/code&gt;). If it doesn&apos;t hit anything, it stops at the &lt;code&gt;&apos;\\0&apos;&lt;/code&gt; (returning the length of the string).&lt;/p&gt;\n\n&lt;p&gt;Note that this works fine even if there is no newline, because &lt;code&gt;strcspn&lt;/code&gt; stops at a &lt;code&gt;&apos;\\0&apos;&lt;/code&gt;. In that case, the entire line is simply replacing &lt;code&gt;&apos;\\0&apos;&lt;/code&gt; with &lt;code&gt;&apos;\\0&apos;&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;The elegant way:&lt;/p&gt;\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;Name[&lt;span class=&quot;hljs-built_in&quot;&gt;strcspn&lt;/span&gt;(Name, &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;)] = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The slightly ugly way:&lt;/p&gt;\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *pos;\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ((pos=&lt;span class=&quot;hljs-built_in&quot;&gt;strchr&lt;/span&gt;(Name, &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;)) != &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;)\n    *pos = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;/* input too long for buffer, flag error */&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The slightly strange way:&lt;/p&gt;\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;strtok(Name, &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note that the &lt;code&gt;strtok&lt;/code&gt; function doesn&apos;t work as expected if the user enters an empty string (i.e. presses only Enter). It leaves the &lt;code&gt;\\n&lt;/code&gt; character intact.&lt;/p&gt;\n&lt;p&gt;There are others as well, of course.&lt;/p&gt;\n    ","\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; ln = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(name) - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (*name &amp;amp;&amp;amp; name[ln] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;) \n    name[ln] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Below is a fast approach to remove a potential &lt;code&gt;&apos;\\n&apos;&lt;/code&gt; from a string saved by &lt;code&gt;fgets()&lt;/code&gt;.&lt;br&gt;\nIt uses &lt;code&gt;strlen()&lt;/code&gt;, with 2 tests.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; buffer[&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;];\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (fgets(buffer, &lt;span class=&quot;hljs-keyword&quot;&gt;sizeof&lt;/span&gt; buffer, &lt;span class=&quot;hljs-built_in&quot;&gt;stdin&lt;/span&gt;) != &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;) {\n\n  &lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; len = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(buffer);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (len &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; buffer[len&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;) {\n    buffer[--len] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n  }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now use &lt;code&gt;buffer&lt;/code&gt; and &lt;code&gt;len&lt;/code&gt; as needed.&lt;/p&gt;\n\n&lt;p&gt;This method has the side benefit of a &lt;code&gt;len&lt;/code&gt; value for subsequent code.  It can be easily faster than &lt;code&gt;strchr(Name, &apos;\\n&apos;)&lt;/code&gt;.  &lt;a href=&quot;https://codereview.stackexchange.com/a/67844/29485&quot;&gt;Ref&lt;/a&gt;  YMMV, but both methods work.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;&lt;code&gt;buffer&lt;/code&gt;, from the original &lt;code&gt;fgets()&lt;/code&gt; will not contain in &lt;code&gt;&quot;\\n&quot;&lt;/code&gt; under some circumstances:&lt;br&gt;\nA) The line was too long for &lt;code&gt;buffer&lt;/code&gt; so only &lt;code&gt;char&lt;/code&gt; preceding the &lt;code&gt;&apos;\\n&apos;&lt;/code&gt; is saved in &lt;code&gt;buffer&lt;/code&gt;. The unread characters remain in the stream.&lt;br&gt;\nB) The last line in the file did not end with a &lt;code&gt;&apos;\\n&apos;&lt;/code&gt;.  &lt;/p&gt;\n\n&lt;p&gt;If input has embedded null characters &lt;code&gt;&apos;\\0&apos;&lt;/code&gt; in it somewhere, the length reported by &lt;code&gt;strlen()&lt;/code&gt; will not include the &lt;code&gt;&apos;\\n&apos;&lt;/code&gt; location.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Some other answers&apos; issues: &lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;strtok(buffer, &quot;\\n&quot;);&lt;/code&gt; fails to remove the &lt;code&gt;&apos;\\n&apos;&lt;/code&gt; when &lt;code&gt;buffer&lt;/code&gt; is &lt;code&gt;&quot;\\n&quot;&lt;/code&gt;.  From this &lt;a href=&quot;https://stackoverflow.com/a/2693826/2410359&quot;&gt;answer&lt;/a&gt; - amended after this answer to warn of this limitation. &lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;The following fails on rare occasions when the first &lt;code&gt;char&lt;/code&gt; read by &lt;code&gt;fgets()&lt;/code&gt; is &lt;code&gt;&apos;\\0&apos;&lt;/code&gt;.  This happens when input begins with an embedded &lt;code&gt;&apos;\\0&apos;&lt;/code&gt;.  Then &lt;code&gt;buffer[len -1]&lt;/code&gt; becomes &lt;code&gt;buffer[SIZE_MAX]&lt;/code&gt; accessing memory certainly outside the legitimate range of &lt;code&gt;buffer&lt;/code&gt;. Something a hacker may try or found in foolishly reading UTF16 text files.  This was the state of an &lt;a href=&quot;https://stackoverflow.com/a/2693827/2410359&quot;&gt;answer&lt;/a&gt; when this answer was written.  Later a non-OP edited it to include code like this answer&apos;s check for &lt;code&gt;&quot;&quot;&lt;/code&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; len = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(buffer);\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (buffer[len - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;) {  &lt;span class=&quot;hljs-comment&quot;&gt;// FAILS when len == 0&lt;/span&gt;\n  buffer[len &lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;sprintf(buffer,&quot;%s&quot;,buffer);&lt;/code&gt; is undefined behavior: &lt;a href=&quot;https://stackoverflow.com/questions/1283354/is-sprintfbuffer-s-buffer-safe&quot;&gt;Ref&lt;/a&gt;.  Further, it does not save any leading, separating or trailing whitespace.  Now &lt;a href=&quot;https://stackoverflow.com/a/23695411/2410359&quot;&gt;deleted&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;[Edit due to good later &lt;a href=&quot;https://stackoverflow.com/a/28462221/2410359&quot;&gt;answer&lt;/a&gt;] There are no problems with the 1 liner &lt;code&gt;buffer[strcspn(buffer, &quot;\\n&quot;)] = 0;&lt;/code&gt; other than performance as compared to the &lt;code&gt;strlen()&lt;/code&gt; approach.  Performance in trimming is usually not an issue given code is doing I/O - a black hole of CPU time.  Should following code need the string&apos;s length or is highly performance conscious, use this &lt;code&gt;strlen()&lt;/code&gt; approach.  Else the &lt;code&gt;strcspn()&lt;/code&gt; is a fine alternative.&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n    ","\n&lt;p&gt;Direct to remove the &apos;\\n&apos; from the fgets output if every line has &apos;\\n&apos;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;line[&lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(line) - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Otherwise:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;remove_newline_ch&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *line)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; new_line = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(line) &lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (line[new_line] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;)\n        line[new_line] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;For single &apos;\\n&apos; trimming,&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;remove_new_line&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; length = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;((length &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (&lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;[length&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;))\n    {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;[length&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;] =&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;for multiple &apos;\\n&apos; trimming,&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;remove_multi_new_line&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;)&lt;/span&gt;\n{\n  &lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; length = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;((length&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (&lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;[length&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;))\n  {\n      --length;\n      &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;[length] =&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;My Newbie way ;-) Please let me know if that&apos;s correct. It seems to be working for all my cases:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; IPT_SIZE 5&lt;/span&gt;\n\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;findNULL&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* arr)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(arr); i++)\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (*(arr+i) == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;)\n        {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; i;\n        }\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *input = &lt;span class=&quot;hljs-built_in&quot;&gt;malloc&lt;/span&gt;(IPT_SIZE + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; * &lt;span class=&quot;hljs-keyword&quot;&gt;sizeof&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;)), buff;\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; counter = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;//prompt user for the input:&lt;/span&gt;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;input string no longer than %i characters: &quot;&lt;/span&gt;, IPT_SIZE);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;do&lt;/span&gt;\n    {\n        fgets(input, &lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;stdin&lt;/span&gt;);\n        *(input + findNULL(input)) = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(input) &amp;gt; IPT_SIZE)\n        {\n            &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;error! the given string is too large. try again...\\n&quot;&lt;/span&gt;);\n            counter++;\n        }\n        &lt;span class=&quot;hljs-comment&quot;&gt;//if the counter exceeds 3, exit the program (custom function):&lt;/span&gt;\n        errorMsgExit(counter, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;); \n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(input) &amp;gt; IPT_SIZE);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//rest of the program follows&lt;/span&gt;\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;free&lt;/span&gt;(input)\n&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The steps to remove the newline character in the perhaps most obvious way:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Determine the length of the string inside &lt;code&gt;NAME&lt;/code&gt; by using &lt;code&gt;strlen()&lt;/code&gt;, header &lt;code&gt;string.h&lt;/code&gt;. Note that &lt;code&gt;strlen()&lt;/code&gt; does not count the terminating &lt;code&gt;\\0&lt;/code&gt;.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; sl = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(NAME);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;ol start=&quot;2&quot;&gt;\n&lt;li&gt;Look if the string begins with or only includes one &lt;code&gt;\\0&lt;/code&gt; character (empty string). In this case &lt;code&gt;sl&lt;/code&gt; would be &lt;code&gt;0&lt;/code&gt; since &lt;code&gt;strlen()&lt;/code&gt; as I said above doesn´t count the &lt;code&gt;\\0&lt;/code&gt; and stops at the first occurrence of it: &lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(sl == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n{\n   &lt;span class=&quot;hljs-comment&quot;&gt;// Skip the newline replacement process.&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;ol start=&quot;3&quot;&gt;\n&lt;li&gt;Check if the last character of the proper string is a newline character &lt;code&gt;&apos;\\n&apos;&lt;/code&gt;.  If this is the case, replace &lt;code&gt;\\n&lt;/code&gt; with a &lt;code&gt;\\0&lt;/code&gt;. Note that index counts start at &lt;code&gt;0&lt;/code&gt; so we will need to do &lt;code&gt;NAME[sl - 1]&lt;/code&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(NAME[sl - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;)\n{\n   NAME[sl - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note if you only pressed Enter at the &lt;code&gt;fgets()&lt;/code&gt; string request (the string content was only consisted of a newline character) the string in &lt;code&gt;NAME&lt;/code&gt; will be an empty string thereafter.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;ol start=&quot;4&quot;&gt;\n&lt;li&gt;We can combine step 2. and 3. together in just one &lt;code&gt;if&lt;/code&gt;-statement by using the logic operator &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(sl &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; NAME[sl - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;)\n{\n   NAME[sl - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;ol start=&quot;5&quot;&gt;\n&lt;li&gt;The finished code:&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; sl = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(NAME);\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(sl &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; NAME[sl - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;)\n{\n   NAME[sl - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;If you rather like a function for use this technique by handling &lt;code&gt;fgets&lt;/code&gt; output strings in general without retyping each and every time, here is &lt;code&gt;fgets_newline_kill&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fgets_newline_kill&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; a[])&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; sl = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(a);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(sl &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; a[sl - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;)\n    {\n       a[sl - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;In your provided example, it would be:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter your Name: &quot;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (fgets(Name, &lt;span class=&quot;hljs-keyword&quot;&gt;sizeof&lt;/span&gt; Name, &lt;span class=&quot;hljs-built_in&quot;&gt;stdin&lt;/span&gt;) == &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-built_in&quot;&gt;fprintf&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;stderr&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Error reading Name.\\n&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n    fgets_newline_kill(NAME);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note that this method does not work if the input string has embedded &lt;code&gt;\\0&lt;/code&gt;s in it. If that would be the case &lt;code&gt;strlen()&lt;/code&gt; would only return the amount of characters until the first &lt;code&gt;\\0&lt;/code&gt;. But this isn´t quite a common approach, since the most string-reading functions usually stop at the first &lt;code&gt;\\0&lt;/code&gt; and take the string until that null character.&lt;/p&gt;\n\n&lt;p&gt;Aside from the question on its own. Try to avoid double negations that make your code unclearer: &lt;code&gt;if (!(fgets(Name, sizeof Name, stdin) != NULL) {}&lt;/code&gt;. You can simply do &lt;code&gt;if (fgets(Name, sizeof Name, stdin) == NULL) {}&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;If using &lt;code&gt;getline&lt;/code&gt; is an option - Not neglecting its security issues and if you wish to brace pointers - you can avoid string functions as the &lt;code&gt;getline&lt;/code&gt; returns the number of characters. Something like below&lt;/p&gt;\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *fname, *lname;\n    &lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; size = &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;, nchar; &lt;span class=&quot;hljs-comment&quot;&gt;// Max size of strings and number of characters read&lt;/span&gt;\n    fname = &lt;span class=&quot;hljs-built_in&quot;&gt;malloc&lt;/span&gt;(size * &lt;span class=&quot;hljs-keyword&quot;&gt;sizeof&lt;/span&gt; *fname);\n    lname = &lt;span class=&quot;hljs-built_in&quot;&gt;malloc&lt;/span&gt;(size * &lt;span class=&quot;hljs-keyword&quot;&gt;sizeof&lt;/span&gt; *lname);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt; == fname || &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt; == lname)\n    {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Error in memory allocation.&quot;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter first name &quot;&lt;/span&gt;);\n    nchar = getline(&amp;amp;fname, &amp;amp;size, &lt;span class=&quot;hljs-built_in&quot;&gt;stdin&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (nchar == &lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;// getline return -1 on failure to read a line.&lt;/span&gt;\n    {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Line couldn&apos;t be read..&quot;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-comment&quot;&gt;// This if block could be repeated for next getline too&lt;/span&gt;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Number of characters read :%zu\\n&quot;&lt;/span&gt;, nchar);\n    fname[nchar - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter last name &quot;&lt;/span&gt;);\n    nchar = getline(&amp;amp;lname, &amp;amp;size, &lt;span class=&quot;hljs-built_in&quot;&gt;stdin&lt;/span&gt;);\n    &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Number of characters read :%zu\\n&quot;&lt;/span&gt;, nchar);\n    lname[nchar - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Name entered %s %s\\n&quot;&lt;/span&gt;, fname, lname);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;sup&gt;&lt;strong&gt;Note&lt;/strong&gt;: The &lt;a href=&quot;https://stackoverflow.com/questions/2008173/writing-secure-c-and-secure-c-idioms&quot;&gt;[ &lt;strong&gt;security issues&lt;/strong&gt; ]&lt;/a&gt; with &lt;code&gt;getline&lt;/code&gt; shouldn&apos;t be neglected though.&lt;/sup&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;In general, rather than trimming data that you don&apos;t want, avoid writing it in the first place.  If you don&apos;t want the newline in the buffer, don&apos;t use fgets.  Instead, use &lt;code&gt;getc&lt;/code&gt; or &lt;code&gt;fgetc&lt;/code&gt; or &lt;code&gt;scanf&lt;/code&gt;.  Perhaps something like:&lt;/p&gt;\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;)&lt;/span&gt;\n{\n        &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; Name[&lt;span class=&quot;hljs-number&quot;&gt;256&lt;/span&gt;];\n        &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; fmt[&lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;( &lt;span class=&quot;hljs-built_in&quot;&gt;snprintf&lt;/span&gt;(fmt, &lt;span class=&quot;hljs-keyword&quot;&gt;sizeof&lt;/span&gt; fmt, &lt;span class=&quot;hljs-string&quot;&gt;&quot;%%%zd[^\\n]&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;sizeof&lt;/span&gt; Name - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) &amp;gt;= (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;)&lt;span class=&quot;hljs-keyword&quot;&gt;sizeof&lt;/span&gt; fmt ){\n                &lt;span class=&quot;hljs-built_in&quot;&gt;fprintf&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;stderr&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Unable to write format\\n&quot;&lt;/span&gt;);\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; EXIT_FAILURE;\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;( &lt;span class=&quot;hljs-built_in&quot;&gt;scanf&lt;/span&gt;(fmt, Name) == &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; ) {\n                &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Name = %s\\n&quot;&lt;/span&gt;, Name);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note that this particular approach will leave the newline unread, so you may want to use a format string like &lt;code&gt;&quot;%255[^\\n]%*c&quot;&lt;/code&gt; to discard it (eg, &lt;code&gt;sprintf(fmt, &quot;%%%zd[^\\n]%%*c&quot;, sizeof Name - 1);&lt;/code&gt;), or perhaps follow the scanf with a &lt;code&gt;getchar()&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;Tim Čas one liner is amazing for strings obtained by a call to fgets, because you know they contain a single newline at the end. &lt;/p&gt;\n\n&lt;p&gt;If you are in a different context and want to handle strings that may contain more than one newline, you might be looking for strrspn. It is not POSIX, meaning you will not find it on all Unices. I wrote one for my own needs.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/* Returns the length of the segment leading to the last \n   characters of s in accept. */&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;strrspn&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *s, &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *accept)&lt;/span&gt;\n{\n  &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *ch;\n  &lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; len = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(s);\n\nmore: \n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (len &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (ch = accept ; *ch != &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; ; ch++) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (s[len - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] == *ch) {\n        len--;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;goto&lt;/span&gt; more;\n      }\n    }\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; len;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;For those looking for a Perl chomp equivalent in C, I think this is it (chomp only removes the trailing newline).&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;line[strrspn(&lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\r\\n&quot;&lt;/span&gt;)] = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The strrcspn function:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/* Returns the length of the segment leading to the last \n   character of reject in s. */&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;strrcspn&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *s, &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *reject)&lt;/span&gt;\n{\n  &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *ch;\n  &lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; len = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(s);\n  &lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; origlen = len;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (len &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (ch = reject ; *ch != &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; ; ch++) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (s[len - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] == *ch) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; len;\n      }\n    }\n    len--;\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; origlen;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This is my solution. Very simple.&lt;/p&gt;\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Delete new line&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// char preDelete[256]  include &quot;\\n&quot; as newline after fgets&lt;/span&gt;\n\n&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; deletedWords[&lt;span class=&quot;hljs-number&quot;&gt;256&lt;/span&gt;];\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; iLeng = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(preDelete);\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; iFinal = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; iLeng; i++) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (preDelete[i] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;) {\n\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        deletedWords[iFinal]  = preDelete[i];\n        iFinal++;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (i == iLeng &lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt; ) {\n        deletedWords[iFinal] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The function below is a part of string processing library I am maintaining on Github. It removes and unwanted characters from a string, exactly what you want&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;zstring_search_chr&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *token,&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; s)&lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!token || s==&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (;*token; token++)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (*token == s)\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *&lt;span class=&quot;hljs-title function_&quot;&gt;zstring_remove_chr&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *str,&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bad)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *src = str , *dst = str;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(*src)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(zstring_search_chr(bad,*src))\n            src++;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n            *dst++ = *src++;  &lt;span class=&quot;hljs-comment&quot;&gt;/* assign first, then incement */&lt;/span&gt;\n\n    *dst=&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; str;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;An example usage could be &lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;Example Usage\n      &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; s[]=&lt;span class=&quot;hljs-string&quot;&gt;&quot;this is a trial string to test the function.&quot;&lt;/span&gt;;\n      &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; *d=&lt;span class=&quot;hljs-string&quot;&gt;&quot; .&quot;&lt;/span&gt;;\n      &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;%s\\n&quot;&lt;/span&gt;,zstring_remove_chr(s,d));\n\n  Example Output\n      thisisatrialstringtotestthefunction\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You may want to check other available functions, or even contribute to the project :)\n&lt;a href=&quot;https://github.com/fnoyanisi/zString&quot; rel=&quot;nofollow&quot;&gt;https://github.com/fnoyanisi/zString&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(Name); i++ )\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(Name[i] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;) Name[i] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You should give it a try. This code basically loop through the string until it finds the &apos;\\n&apos;. When it&apos;s found the &apos;\\n&apos; will be replaced by the null character terminator &apos;\\0&apos;&lt;/p&gt;\n\n&lt;p&gt;Note that you are comparing characters and not strings in this line, then there&apos;s no need to use strcmp():&lt;/p&gt;\n\n&lt;pre class=&quot;lang-c s-code-block&quot;&gt;&lt;code class=&quot;hljs language-c&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(Name[i] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt;) Name[i] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\0&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;since you will be using single quotes and not double quotes. &lt;a href=&quot;https://stackoverflow.com/questions/3683602/single-quotes-vs-double-quotes-in-c-or-c&quot; title=&quot;Here&apos;s&quot;&gt;Here&apos;s&lt;/a&gt; a link about single vs double quotes if you want to know more&lt;/p&gt;\n    "]},"randomTags":[{"name":"char","slug":"char"},{"name":"error-reporting","slug":"error-reporting"},{"name":"equality-operator","slug":"equality-operator"},{"name":"currency","slug":"currency"},{"name":"pygame2","slug":"pygame2"},{"name":"out-of-memory","slug":"out-of-memory"},{"name":"syntactic-sugar","slug":"syntactic-sugar"},{"name":"php-password-hash","slug":"php-password-hash"},{"name":"pandas","slug":"pandas"},{"name":"collections","slug":"collections"},{"name":"asp.net-mvc","slug":"asp.net-mvc"},{"name":"instance-variables","slug":"instance-variables"},{"name":"jsf","slug":"jsf"},{"name":"dependent-name","slug":"dependent-name"},{"name":"storage","slug":"storage"},{"name":"performance","slug":"performance"},{"name":"exception","slug":"exception"},{"name":"transpose","slug":"transpose"},{"name":"shadowing","slug":"shadowing"},{"name":"sqlite","slug":"sqlite"}]},"__N_SSG":true}