{"pageProps":{"data":{"count":1,"rows":[{"answer":["\n&lt;p&gt;Virtual destructors are useful when you might potentially delete an instance of a derived class through a pointer to base class:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Base&lt;/span&gt; \n{\n    &lt;span class=&quot;hljs-comment&quot;&gt;// some virtual methods&lt;/span&gt;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Derived&lt;/span&gt; : &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Base\n{\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;Derived&lt;/span&gt;()\n    {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Do some important cleanup&lt;/span&gt;\n    }\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here, you&apos;ll notice that I didn&apos;t declare Base&apos;s destructor to be &lt;code&gt;virtual&lt;/code&gt;. Now, let&apos;s have a look at the following snippet:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;Base *b = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Derived&lt;/span&gt;();\n&lt;span class=&quot;hljs-comment&quot;&gt;// use b&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; b; &lt;span class=&quot;hljs-comment&quot;&gt;// Here&apos;s the problem!&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Since Base&apos;s destructor is not &lt;code&gt;virtual&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt; is a &lt;code&gt;Base*&lt;/code&gt; pointing to a &lt;code&gt;Derived&lt;/code&gt; object, &lt;code&gt;delete b&lt;/code&gt; has &lt;a href=&quot;https://stackoverflow.com/q/2397984/20984&quot;&gt;undefined behaviour&lt;/a&gt;:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;[In &lt;code&gt;delete b&lt;/code&gt;], if the static type of the\n  object to be deleted is different from its dynamic type, the static\n  type shall be a base class of the dynamic type of the object to be\n  deleted and &lt;strong&gt;the static type shall have a virtual destructor or the\n  behavior is undefined&lt;/strong&gt;.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;In most implementations, the call to the destructor will be resolved like any non-virtual code, meaning that the destructor of the base class will be called but not the one of the derived class, resulting in a resources leak.&lt;/p&gt;\n\n&lt;p&gt;To sum up, always make base classes&apos; destructors &lt;code&gt;virtual&lt;/code&gt; when they&apos;re meant to be manipulated polymorphically.&lt;/p&gt;\n\n&lt;p&gt;If you want to prevent the deletion of an instance through a base class pointer, you can make the base class destructor protected and nonvirtual; by doing so, the compiler won&apos;t let you call &lt;code&gt;delete&lt;/code&gt; on a base class pointer.&lt;/p&gt;\n\n&lt;p&gt;You can learn more about virtuality and virtual base class destructor in &lt;a href=&quot;http://www.gotw.ca/publications/mill18.htm&quot; rel=&quot;noreferrer&quot;&gt;this article from Herb Sutter&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;A virtual constructor is not possible but virtual destructor is possible.\nLet us experiment.......&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Base&lt;/span&gt;\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-built_in&quot;&gt;Base&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Base Constructor Called\\n&quot;&lt;/span&gt;;\n    }\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;Base&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Base Destructor called\\n&quot;&lt;/span&gt;;\n    }\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Derived1&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Base\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-built_in&quot;&gt;Derived1&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Derived constructor called\\n&quot;&lt;/span&gt;;\n    }\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;Derived1&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Derived destructor called\\n&quot;&lt;/span&gt;;\n    }\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n    Base *b = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Derived1&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; b;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The above code output the following:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;Base Constructor Called\nDerived constructor called\nBase Destructor called\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The construction of derived object follow the construction rule but when we delete the &quot;b&quot; pointer(base pointer) we have found that only the base destructor is called. But this must not happen. To do the appropriate thing, we have to make the base destructor virtual.\nNow let see what happens in the following:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Base&lt;/span&gt;\n{ \n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-built_in&quot;&gt;Base&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Base Constructor Called\\n&quot;&lt;/span&gt;;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;Base&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Base Destructor called\\n&quot;&lt;/span&gt;;\n    }\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Derived1&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Base\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-built_in&quot;&gt;Derived1&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Derived constructor called\\n&quot;&lt;/span&gt;;\n    }\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;Derived1&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Derived destructor called\\n&quot;&lt;/span&gt;;\n    }\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n    Base *b = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Derived1&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; b;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The output changed as following:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;Base Constructor Called\nDerived Constructor called\nDerived destructor called\nBase destructor called\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So the destruction of the base pointer (which takes an allocation on derived object!) follows the destruction rule, i.e first the Derived, then the Base.\nOn the other hand, there is nothing like a virtual constructor.       &lt;/p&gt;\n    ","\n&lt;p&gt;Declare destructors virtual in polymorphic base classes.  This is Item 7 in Scott Meyers&apos; &lt;a href=&quot;https://rads.stackoverflow.com/amzn/click/com/0201924889&quot; rel=&quot;noreferrer&quot;&gt;Effective C++&lt;/a&gt;.  Meyers goes on to summarize that if a class has &lt;em&gt;any&lt;/em&gt; virtual function, it should have a virtual destructor, and that classes not designed to be base classes or not designed to be used polymorphically should &lt;em&gt;not&lt;/em&gt; declare virtual destructors.&lt;/p&gt;\n    ","\n&lt;p&gt;Also be aware that deleting a base class pointer when there is no virtual destructor will result in &lt;strong&gt;&lt;em&gt;undefined behavior&lt;/em&gt;&lt;/strong&gt;.  Something that I learned just recently:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/408196/how-should-overriding-delete-in-c-behave&quot;&gt;How should overriding delete in C++ behave?&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;I&apos;ve been using C++ for years and I still manage to hang myself.&lt;/p&gt;\n    ","\n&lt;p&gt;Make the destructor virtual whenever your class is polymorphic.&lt;/p&gt;\n    ","\n&lt;h3&gt;Calling destructor via a pointer to a base class&lt;/h3&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Base&lt;/span&gt; {\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{}\n  &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;Base&lt;/span&gt;() {}\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Derived&lt;/span&gt; : Base {\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;override&lt;/span&gt; &lt;/span&gt;{}\n  ~&lt;span class=&quot;hljs-built_in&quot;&gt;Derived&lt;/span&gt;() &lt;span class=&quot;hljs-keyword&quot;&gt;override&lt;/span&gt; {}\n};\n\nBase* base = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Derived;\nbase-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;f&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// calls Derived::f&lt;/span&gt;\nbase-&amp;gt;~&lt;span class=&quot;hljs-built_in&quot;&gt;Base&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// calls Derived::~Derived&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Virtual destructor call is no different from any other virtual function call.&lt;/p&gt;\n\n&lt;p&gt;For &lt;code&gt;base-&amp;gt;f()&lt;/code&gt;, the call will be dispatched to &lt;code&gt;Derived::f()&lt;/code&gt;, and it&apos;s the same for &lt;code&gt;base-&amp;gt;~Base()&lt;/code&gt; - its overriding function - the &lt;code&gt;Derived::~Derived()&lt;/code&gt; will be called.&lt;/p&gt;\n\n&lt;p&gt;Same happens when destructor is being called indirectly, e.g. &lt;code&gt;delete base;&lt;/code&gt;. The &lt;code&gt;delete&lt;/code&gt; statement will call &lt;code&gt;base-&amp;gt;~Base()&lt;/code&gt; which will be dispatched to &lt;code&gt;Derived::~Derived()&lt;/code&gt;.&lt;/p&gt;\n\n&lt;h3&gt;Abstract class with non-virtual destructor&lt;/h3&gt;\n\n&lt;p&gt;If you are not going to delete object through a pointer to its base class - then there is no need to have a virtual destructor. Just make it &lt;code&gt;protected&lt;/code&gt; so that it won&apos;t be called accidentally:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// library.hpp&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Base&lt;/span&gt; {\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt;:\n  ~&lt;span class=&quot;hljs-built_in&quot;&gt;Base&lt;/span&gt;() = &lt;span class=&quot;hljs-keyword&quot;&gt;default&lt;/span&gt;;\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;CallsF&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Base&amp;amp; base)&lt;/span&gt;&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;// CallsF is not going to own &quot;base&quot; (i.e. call &quot;delete &amp;amp;base;&quot;).&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// It will only call Base::f() so it doesn&apos;t need to access Base::~Base.&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//-------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// application.cpp&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Derived&lt;/span&gt; : Base {\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;override&lt;/span&gt; &lt;/span&gt;{ ... }\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{\n  Derived derived;\n  &lt;span class=&quot;hljs-built_in&quot;&gt;CallsF&lt;/span&gt;(derived);\n  &lt;span class=&quot;hljs-comment&quot;&gt;// No need for virtual destructor here as well.&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;To be simple,\nVirtual destructor is to destruct the resources in a proper order, when you delete a base class pointer pointing to derived class object.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt; &lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n &lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;B&lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n       &lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;(){\n          cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;B()\\n&quot;&lt;/span&gt;;\n       }\n       &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;(){ \n          cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;~B()\\n&quot;&lt;/span&gt;;\n       }\n };\n &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;D&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; B{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n       &lt;span class=&quot;hljs-built_in&quot;&gt;D&lt;/span&gt;(){\n          cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;D()\\n&quot;&lt;/span&gt;;\n       }\n       ~&lt;span class=&quot;hljs-built_in&quot;&gt;D&lt;/span&gt;(){\n          cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;~D()\\n&quot;&lt;/span&gt;;\n       }\n };\n &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;{\n    B *b = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;D&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; b;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n }\n\nOUTPUT:\n&lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;()\n&lt;span class=&quot;hljs-built_in&quot;&gt;D&lt;/span&gt;()\n~&lt;span class=&quot;hljs-built_in&quot;&gt;D&lt;/span&gt;()\n~&lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;()\n\n==============\nIf you don&lt;span class=&quot;hljs-number&quot;&gt;&apos;&lt;/span&gt;t give ~&lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;()  as &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt;. then output would be \n&lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;()\n&lt;span class=&quot;hljs-built_in&quot;&gt;D&lt;/span&gt;()\n~&lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;()\nwhere destruction of ~&lt;span class=&quot;hljs-built_in&quot;&gt;D&lt;/span&gt;() is &lt;span class=&quot;hljs-keyword&quot;&gt;not&lt;/span&gt; done which leads to leak\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n    ","\n&lt;p&gt;Virtual keyword for destructor is necessary when you want different destructors should follow proper order while objects is being deleted through base class pointer. \nfor example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;Base *myObj = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Derived&lt;/span&gt;();\n&lt;span class=&quot;hljs-comment&quot;&gt;// Some code which is using myObj object&lt;/span&gt;\nmyObj-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;fun&lt;/span&gt;();\n&lt;span class=&quot;hljs-comment&quot;&gt;//Now delete the object&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; myObj ; \n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If your base class destructor is virtual then objects will be destructed in a order(firstly derived object then base ). If your base class destructor is NOT virtual then only base class object will get deleted(because pointer is of base class &quot;Base *myObj&quot;). So there will be memory leak for derived object.&lt;/p&gt;\n    ","\n&lt;p&gt;I like to think about interfaces and implementations of interfaces. In C++ speak interface is pure virtual class. Destructor is part of the interface and expected to implemented. Therefore destructor should be pure virtual. How about constructor? Constructor is actually not part of the interface because object is always instantiated explicitly. &lt;/p&gt;\n    ","\n&lt;p&gt;Virtual base class destructors are &quot;best practice&quot; - you should always use them to avoid (hard to detect) memory leaks. Using them, you can be sure all destructors in the inheritance chain of your classes are beeing called (in proper order). Inheriting from a base class using virtual destructor makes the destructor of the inheriting class automatically virtual, too (so you do not have to retype &apos;virtual&apos; in the inheriting class destructor declaration).&lt;/p&gt;\n    ","\n&lt;p&gt;I think the core of this question is about virtual methods and polymorphism, not the destructor specifically. Here is a clearer example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;A&lt;/span&gt;\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-built_in&quot;&gt;A&lt;/span&gt;() {}\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n    &lt;/span&gt;{\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;This is A.&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl;\n    }\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;B&lt;/span&gt; : &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; A\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;() {}\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n    &lt;/span&gt;{\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;This is B.&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl;\n    }\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; argc, &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* argv[])&lt;/span&gt;\n&lt;/span&gt;{\n    A *a = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;();\n    a-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;foo&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(a != &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;)\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; a;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Will print out:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;This is B.\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Without &lt;code&gt;virtual&lt;/code&gt; it will print out:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;This is A.\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And now you should understand when to use virtual destructors.&lt;/p&gt;\n    ","\n&lt;p&gt;If you use &lt;code&gt;shared_ptr&lt;/code&gt;(only shared_ptr, not unique_ptr), you don&apos;t have to have the base class destructor virtual:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;memory&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Base&lt;/span&gt;\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-built_in&quot;&gt;Base&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Base Constructor Called\\n&quot;&lt;/span&gt;;\n    }\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;Base&lt;/span&gt;(){ &lt;span class=&quot;hljs-comment&quot;&gt;// not virtual&lt;/span&gt;\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Base Destructor called\\n&quot;&lt;/span&gt;;\n    }\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Derived&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Base\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-built_in&quot;&gt;Derived&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Derived constructor called\\n&quot;&lt;/span&gt;;\n    }\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;Derived&lt;/span&gt;(){\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Derived destructor called\\n&quot;&lt;/span&gt;;\n    }\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n    &lt;span class=&quot;hljs-function&quot;&gt;shared_ptr&amp;lt;Base&amp;gt; &lt;span class=&quot;hljs-title&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Derived())&lt;/span&gt;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;output:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;Base Constructor Called\nDerived constructor called\nDerived destructor called\nBase Destructor called\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;What is a virtual destructor or how to use virtual destructor&lt;/p&gt;\n\n&lt;p&gt;A class destructor is a function with same name of the class preceding with ~ that will reallocate the memory that is allocated by the class. Why we need a virtual destructor&lt;/p&gt;\n\n&lt;p&gt;See  the  following  sample with some virtual functions&lt;/p&gt;\n\n&lt;p&gt;The sample also tell how you can convert a letter to upper or lower&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;stdafx.h&quot;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n&lt;span class=&quot;hljs-comment&quot;&gt;// program to convert the lower to upper orlower&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;convertch&lt;/span&gt;\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n  &lt;span class=&quot;hljs-comment&quot;&gt;//void convertch(){};&lt;/span&gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;hljs-title&quot;&gt;convertChar&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  ~&lt;span class=&quot;hljs-built_in&quot;&gt;convertch&lt;/span&gt;(){};\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MakeLower&lt;/span&gt; :&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; convertch\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n  &lt;span class=&quot;hljs-built_in&quot;&gt;MakeLower&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *passLetter)\n  {\n    tolower = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n    Letter = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;];\n    &lt;span class=&quot;hljs-built_in&quot;&gt;strcpy&lt;/span&gt;(Letter, passLetter);\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;MakeLower&lt;/span&gt;()\n  {\n    cout&amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;called ~MakeLower()&quot;&lt;/span&gt;&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt;[] Letter;\n  }\n\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;hljs-title&quot;&gt;convertChar&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n  &lt;/span&gt;{\n    &lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; len = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(Letter);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;len;i++)\n      Letter[i] = Letter[i] + &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; Letter;\n  }\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt;:\n  &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *Letter;\n  &lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; tolower;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MakeUpper&lt;/span&gt; : &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; convertch\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n  &lt;span class=&quot;hljs-built_in&quot;&gt;MakeUpper&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *passLetter)\n  {\n    Letter = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;];\n    toupper = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;strcpy&lt;/span&gt;(Letter, passLetter);\n  }\n\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;hljs-title&quot;&gt;convertChar&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n  &lt;/span&gt;{   \n    &lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; len = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(Letter);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;len;i++)\n      Letter[i] = Letter[i] - &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; Letter;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;MakeUpper&lt;/span&gt;()\n  {\n    cout&amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;called ~MakeUpper()&quot;&lt;/span&gt;&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; Letter;\n  }\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt;:\n  &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *Letter;\n  &lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; toupper;\n};\n\n\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; _tmain(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; argc, _TCHAR* argv[])\n{\n  convertch *makeupper = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;MakeUpper&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hai&quot;&lt;/span&gt;); \n  cout&amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Eneterd : hai = &quot;&lt;/span&gt; &amp;lt;&amp;lt;makeupper-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;convertChar&lt;/span&gt;()&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot; &quot;&lt;/span&gt;;     \n  &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; makeupper;\n  convertch *makelower = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;MakeLower&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;HAI&quot;&lt;/span&gt;);;\n  cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Eneterd : HAI = &quot;&lt;/span&gt; &amp;lt;&amp;lt;makelower-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;convertChar&lt;/span&gt;()&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot; &quot;&lt;/span&gt;; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; makelower;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;From the above sample you can see that the destructor for both MakeUpper and MakeLower class is not called.&lt;/p&gt;\n\n&lt;p&gt;See the next sample with the virtual destructor&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;stdafx.h&quot;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n&lt;span class=&quot;hljs-comment&quot;&gt;// program to convert the lower to upper orlower&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;convertch&lt;/span&gt;\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n&lt;span class=&quot;hljs-comment&quot;&gt;//void convertch(){};&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;hljs-title&quot;&gt;convertChar&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;convertch&lt;/span&gt;(){}; &lt;span class=&quot;hljs-comment&quot;&gt;// defined the virtual destructor&lt;/span&gt;\n\n};\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MakeLower&lt;/span&gt; :&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; convertch\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n&lt;span class=&quot;hljs-built_in&quot;&gt;MakeLower&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *passLetter)\n{\ntolower = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\nLetter = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;];\n&lt;span class=&quot;hljs-built_in&quot;&gt;strcpy&lt;/span&gt;(Letter, passLetter);\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;MakeLower&lt;/span&gt;()\n{\ncout&amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;called ~MakeLower()&quot;&lt;/span&gt;&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt;[] Letter;\n}\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;hljs-title&quot;&gt;convertChar&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n&lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; len = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(Letter);\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;len;i++)\n{\nLetter[i] = Letter[i] + &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;;\n\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; Letter;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt;:\n&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *Letter;\n&lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; tolower;\n\n};\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MakeUpper&lt;/span&gt; : &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; convertch\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n&lt;span class=&quot;hljs-built_in&quot;&gt;MakeUpper&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *passLetter)\n{\nLetter = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;];\ntoupper = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n&lt;span class=&quot;hljs-built_in&quot;&gt;strcpy&lt;/span&gt;(Letter, passLetter);\n}\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;hljs-title&quot;&gt;convertChar&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n\n&lt;span class=&quot;hljs-type&quot;&gt;size_t&lt;/span&gt; len = &lt;span class=&quot;hljs-built_in&quot;&gt;strlen&lt;/span&gt;(Letter);\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;len;i++)\n{\nLetter[i] = Letter[i] - &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; Letter;\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;MakeUpper&lt;/span&gt;()\n{\n      cout&amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;called ~MakeUpper()&quot;&lt;/span&gt;&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; Letter;\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt;:\n&lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *Letter;\n&lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; toupper;\n};\n\n\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; _tmain(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; argc, _TCHAR* argv[])\n{\n\nconvertch *makeupper = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;MakeUpper&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hai&quot;&lt;/span&gt;);\n\ncout&amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Eneterd : hai = &quot;&lt;/span&gt; &amp;lt;&amp;lt;makeupper-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;convertChar&lt;/span&gt;()&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot; \\n&quot;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; makeupper;\nconvertch *makelower = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;MakeLower&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;HAI&quot;&lt;/span&gt;);;\ncout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Eneterd : HAI = &quot;&lt;/span&gt; &amp;lt;&amp;lt;makelower-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;convertChar&lt;/span&gt;()&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n &quot;&lt;/span&gt;;\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; makelower;\n&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The virtual destructor will call explicitly the most derived run time destructor of class so that it will be able to clear the object in a proper way.&lt;/p&gt;\n\n&lt;p&gt;Or visit the link&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://web.archive.org/web/20130822173509/http://www.programminggallery.com/article_details.php?article_id=138&quot; rel=&quot;nofollow&quot;&gt;https://web.archive.org/web/20130822173509/http://www.programminggallery.com/article_details.php?article_id=138&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I thought it would be beneficial to discuss the &quot;undefined&quot; behavior, or at least the &quot;crash&quot; undefined behavior that may occur when deleting through a base class(/struct) without a virtual destructor, or more precisely no vtable.  The code below list a few simple structs (the same would be true for classes).&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;a&lt;/span&gt;\n{\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;a&lt;/span&gt;() {}\n\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; i;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;b&lt;/span&gt; : a\n{\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;b&lt;/span&gt;() {}\n\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; j;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;c&lt;/span&gt; : b\n{\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;() {}\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;m3&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{}\n\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; k;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;d&lt;/span&gt; : c\n{\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;d&lt;/span&gt;() {}\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;m4&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{}\n\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; l;\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;sizeof(a): &quot;&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;sizeof&lt;/span&gt;(a) &amp;lt;&amp;lt; endl;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;sizeof(b): &quot;&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;sizeof&lt;/span&gt;(b) &amp;lt;&amp;lt; endl;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;sizeof(c): &quot;&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;sizeof&lt;/span&gt;(c) &amp;lt;&amp;lt; endl;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;sizeof(d): &quot;&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;sizeof&lt;/span&gt;(d) &amp;lt;&amp;lt; endl;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// No issue.&lt;/span&gt;\n\n    a* a1 = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;a&lt;/span&gt;();\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;a1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; a1 &amp;lt;&amp;lt; endl;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; a1;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// No issue.&lt;/span&gt;\n\n    b* b1 = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;b&lt;/span&gt;();\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;b1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; b1 &amp;lt;&amp;lt; endl;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;(a*) b1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; (a*) b1 &amp;lt;&amp;lt; endl;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; b1;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// No issue.&lt;/span&gt;\n\n    c* c1 = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;();\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;c1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; c1 &amp;lt;&amp;lt; endl;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;(b*) c1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; (b*) c1 &amp;lt;&amp;lt; endl;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;(a*) c1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; (a*) c1 &amp;lt;&amp;lt; endl;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; c1;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// No issue.&lt;/span&gt;\n\n    d* d1 = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;d&lt;/span&gt;();\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;d1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; d1 &amp;lt;&amp;lt; endl;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;(c*) d1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; (c*) d1 &amp;lt;&amp;lt; endl;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;(b*) d1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; (b*) d1 &amp;lt;&amp;lt; endl;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;(a*) d1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; (a*) d1 &amp;lt;&amp;lt; endl;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; d1;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Doesn&apos;t crash, but may not produce the results you want.&lt;/span&gt;\n\n    c1 = (c*) &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;d&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; c1;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Crashes due to passing an invalid address to the method which&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// frees the memory.&lt;/span&gt;\n\n    d1 = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;d&lt;/span&gt;();\n    b1 = (b*) d1;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;d1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; d1 &amp;lt;&amp;lt; endl;\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;b1: &quot;&lt;/span&gt; &amp;lt;&amp;lt; b1 &amp;lt;&amp;lt; endl;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; b1;  \n\n&lt;span class=&quot;hljs-comment&quot;&gt;/*\n\n    // This is similar to what&apos;s happening above in the &quot;crash&quot; case.\n\n    char* buf = new char[32];\n    cout &amp;lt;&amp;lt; &quot;buf: &quot; &amp;lt;&amp;lt; (void*) buf &amp;lt;&amp;lt; endl;\n    buf += 8;\n    cout &amp;lt;&amp;lt; &quot;buf after adding 8: &quot; &amp;lt;&amp;lt; (void*) buf &amp;lt;&amp;lt; endl;\n    delete buf;\n*/&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I&apos;m not suggesting whether you need virtual destructors or not, though I think in general it&apos;s a good practice to have them.  I&apos;m just pointing out the reason you may end up with a crash if your base class(/struct) does not have a vtable and your derived class(/struct) does and you delete an object via a base class(/struct) pointer.  In this case, the address you pass to the heap&apos;s free routine is invalid and thus the reason for the crash.&lt;/p&gt;\n\n&lt;p&gt;If you run the above code you&apos;ll see clearly when the issue occurs.  When the this pointer of the base class(/struct) is different from the this pointer of the derived class(/struct) you&apos;re going to run into this problem.  In the sample above, struct a and b don&apos;t have vtables.  structs c and d do have vtables.  Thus an a or b pointer to a c or d object instance will be fixed up to account for the vtable.  If you pass this a or b pointer to delete it will crash due to the address being invalid to the heap&apos;s free routine.&lt;/p&gt;\n\n&lt;p&gt;If you plan to delete derived instances which have vtables from base class pointers, you need to ensure the base class has a vtable.  One way to do that is to add a virtual destructor, which you might want anyway to properly clean up resources.&lt;/p&gt;\n    ","\n&lt;p&gt;when you need to call derived class destructor from base class. you need to declare virtual base class destructor in base class.&lt;/p&gt;\n    ","\n&lt;p&gt;I think most answers here miss the point, with the exception of the accepted one, which is a good thing. However, let me add one more with a different view on the issue: You need a virtual destructor if you want to polymorphically delete instances of this class.&lt;/p&gt;\n&lt;p&gt;This kind-of sidesteps the question, so let me elaborate: As many pointed out, you get undesired behaviour if you invoke &lt;code&gt;delete base_ptr&lt;/code&gt; and the destructor is not virtual. However, there are several assumptions there that need to be make explicit:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;If your class is not a baseclass, you will hopefully not write code like this. In this case I don&apos;t mean the manual memory management, which is bad in and of itself, but deriving publicly from this class. A class not designed as baseclass should not be inherited from, like e.g. &lt;code&gt;std::string&lt;/code&gt;. C++ allows you to shoot yourself in the foot. This is your fault though, not that of the baseclass not having a virtual destructor.&lt;/li&gt;\n&lt;li&gt;If the destructor is not accessible (protected or private), this code won&apos;t compile, so the undesired behaviour can not occur. Having a protected destructor is useful, especially for mixins but also (to a lesser extent) for interfaces. You don&apos;t want to incur the overhead of virtual functions unless you actually make use of them. Making the destructor protected instead prevents undesired behaviour but doesn&apos;t restrict you otherwise.&lt;/li&gt;\n&lt;li&gt;If you actually write a class that is supposed to be derived from, you will typically have virtual functions anyways. As a user of them, you will typically only use them via a pointer to the baseclass. When this use includes disposing of them, it then needs to be polymorphic as well. This is then the case when you should make the destructor virtual.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;For a similarly different view on the subject, also read &lt;a href=&quot;https://stackoverflow.com/questions/300986/when-should-you-not-use-virtual-destructors&quot;&gt;When should you not use virtual destructors?&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;A basic definition about &lt;code&gt;virtual&lt;/code&gt; is it determines if a member function of a class can be over-ridden in its derived classes. &lt;/p&gt;\n\n&lt;p&gt;A class&apos;s D-tor is called basically at the end of the scope, but there is a problem, for example when we define an instance on the Heap (dynamic allocation), we should delete it manually.&lt;/p&gt;\n\n&lt;p&gt;As soon as the instruction get executed, the base class destructor get called, but not for the derived one.&lt;/p&gt;\n\n&lt;p&gt;A Pratical example is when, in control field, you have to manipulate effectors, actuators.&lt;/p&gt;\n\n&lt;p&gt;At the end of the scope, if the destructor of one of the power elements (Actuator), isn&apos;t called, there will be fatal consequences.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Mother&lt;/span&gt;{\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n\n    &lt;span class=&quot;hljs-built_in&quot;&gt;Mother&lt;/span&gt;(){\n\n          std::cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Mother Ctor&quot;&lt;/span&gt;&amp;lt;&amp;lt;std::endl;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt;~&lt;span class=&quot;hljs-built_in&quot;&gt;Mother&lt;/span&gt;(){\n\n        std::cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Mother D-tor&quot;&lt;/span&gt;&amp;lt;&amp;lt;std::endl;\n    }\n\n\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Child&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Mother{\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n\n    &lt;span class=&quot;hljs-built_in&quot;&gt;Child&lt;/span&gt;(){\n\n        std::cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Child C-tor&quot;&lt;/span&gt;&amp;lt;&amp;lt;std::endl;\n    }\n\n    ~&lt;span class=&quot;hljs-built_in&quot;&gt;Child&lt;/span&gt;(){\n\n         std::cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Child D-tor&quot;&lt;/span&gt;&amp;lt;&amp;lt;std::endl;\n    }\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n\n    Mother *c = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Child&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; c;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Make all destructors virtual unless you have good reason not to.&lt;/p&gt;\n&lt;p&gt;Otherwise evil like this happens:&lt;/p&gt;\n&lt;p&gt;Suppose you have an array of Fruit pointers with both Apple and Orange objects.&lt;/p&gt;\n&lt;p&gt;When you delete from the collection of Fruit objects,\n~Apple() and ~Orange() fail to be called unless ~Fruit() is virtual.&lt;/p&gt;\n&lt;p&gt;Example done right:&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Fruit&lt;/span&gt; { &lt;span class=&quot;hljs-comment&quot;&gt;// good&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;Fruit&lt;/span&gt;() { cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;peel or core should have been tossed&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl; } \n};\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Apple&lt;/span&gt;:  Fruit { &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;Apple&lt;/span&gt;()  {cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;toss core&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl; } };\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Orange&lt;/span&gt;: Fruit { &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;Orange&lt;/span&gt;() {cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;toss peel&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl; } };\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{ \n  Fruit *basket[]={ &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Apple&lt;/span&gt;(), &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Orange&lt;/span&gt;() };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;auto&lt;/span&gt; fruit: basket) &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; fruit;\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;good output&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;toss core\npeel &lt;span class=&quot;hljs-keyword&quot;&gt;or&lt;/span&gt; core should have been tossed\ntoss peel\npeel &lt;span class=&quot;hljs-keyword&quot;&gt;or&lt;/span&gt; core should have been tossed\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Example done wrong:&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Fruit&lt;/span&gt; { &lt;span class=&quot;hljs-comment&quot;&gt;// bad &lt;/span&gt;\n  ~&lt;span class=&quot;hljs-built_in&quot;&gt;Fruit&lt;/span&gt;() { cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;peel or core should have been tossed&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl; } \n};\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Apple&lt;/span&gt;:  Fruit { &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;Apple&lt;/span&gt;()  {cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;toss core&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl; } };\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Orange&lt;/span&gt;: Fruit { &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; ~&lt;span class=&quot;hljs-built_in&quot;&gt;Orange&lt;/span&gt;() {cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;toss peel&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl; } };\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{ \n  Fruit *basket[]={ &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Apple&lt;/span&gt;(), &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Orange&lt;/span&gt;() };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;auto&lt;/span&gt; fruit: basket) &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; fruit;\n};\n\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;bad output&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;peel &lt;span class=&quot;hljs-keyword&quot;&gt;or&lt;/span&gt; core should have been tossed\npeel &lt;span class=&quot;hljs-keyword&quot;&gt;or&lt;/span&gt; core should have been tossed\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;(Note: Where I used struct for brevity, normally use class and specify public)&lt;/p&gt;\n    ","\n&lt;p&gt;Any class that is inherited publicly, polymorphic or not, should have a virtual destructor. To put another way, if it can be pointed to by a base class pointer, its base class should have a virtual destructor.&lt;/p&gt;\n&lt;p&gt;If virtual, the derived class destructor gets called and then the base class destructor. If not virtual, only the base class destructor gets called.&lt;/p&gt;\n    "],"comment":["\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;See this: &lt;a href=&quot;http://stackoverflow.com/questions/353817/should-every-class-have-a-virtual-destructor&quot;&gt;Virtual Destructor&lt;/a&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/39742/naveen&quot; title=&quot;72,107 reputation&quot; class=&quot;comment-user&quot;&gt;Naveen&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment17175835_461203&quot;&gt;&lt;span title=&quot;2009-01-20 13:04:11Z, License: CC BY-SA 2.5&quot; class=&quot;relativetime-clean&quot;&gt;Jan 20, 2009 at 13:04&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Every destructor &lt;i&gt;down&lt;/i&gt; gets called no matter what.  &lt;code&gt;virtual&lt;/code&gt; makes sure it starts at the top instead of the middle.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/845092/mooing-duck&quot; title=&quot;59,416 reputation&quot; class=&quot;comment-user&quot;&gt;Mooing Duck&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment25221104_461203&quot;&gt;&lt;span title=&quot;2013-06-29 00:32:17Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 29, 2013 at 0:32&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;related question: &lt;a href=&quot;http://stackoverflow.com/questions/300986/when-should-you-not-use-virtual-destructors&quot;&gt;When should you not use virtual destructors?&lt;/a&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1336150/eitan-t&quot; title=&quot;32,372 reputation&quot; class=&quot;comment-user&quot;&gt;Eitan T&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment26399948_461203&quot;&gt;&lt;span title=&quot;2013-08-04 16:39:33Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 4, 2013 at 16:39&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I&apos;m also confused by @MooingDuck &apos;s answer. Shouldn&apos;t it be &lt;i&gt;up&lt;/i&gt; instead of &lt;i&gt;down&lt;/i&gt;, if you use the notion of subclass (under) and superclass (above)?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/3218438/nibor&quot; title=&quot;1,132 reputation&quot; class=&quot;comment-user&quot;&gt;Nibor&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment99931686_461203&quot;&gt;&lt;span title=&quot;2019-06-20 09:31:28Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 20, 2019 at 9:31&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Nibor: Yes, &lt;i&gt;if you use that notion&lt;/i&gt;.  About half the people I talk to view superclasses as &quot;above&quot;, and half view superclasses as &quot;below&quot;, so both are conflicting standards, which makes everything confusing.  I think superclass as &quot;above&quot; is slightly more common, but that&apos;s not the way I was taught :(&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/845092/mooing-duck&quot; title=&quot;59,416 reputation&quot; class=&quot;comment-user&quot;&gt;Mooing Duck&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment99947142_461203&quot;&gt;&lt;span title=&quot;2019-06-20 17:09:04Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 20, 2019 at 17:09&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This would explain why i had massive leaks using a factory i made before. All makes sense now. Thanks&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/23339/lodle&quot; title=&quot;29,917 reputation&quot; class=&quot;comment-user owner&quot;&gt;Lodle&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment280011_461224&quot;&gt;&lt;span title=&quot;2009-01-20 13:08:34Z, License: CC BY-SA 2.5&quot; class=&quot;relativetime-clean&quot;&gt;Jan 20, 2009 at 13:08&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Well, this is a bad example as there are no data members.  What if &lt;code&gt;Base&lt;/code&gt; and &lt;code&gt;Derived&lt;/code&gt; have &lt;i&gt;all&lt;/i&gt; automatic storage variables?  ie there is no &quot;special&quot; or additional custom code to execute in the destructor.  Is it ok then to leave off writing any destructors at all?  Or will the derived class &lt;i&gt;still&lt;/i&gt; have a memory leak?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/111307/bobobobo&quot; title=&quot;61,811 reputation&quot; class=&quot;comment-user&quot;&gt;bobobobo&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment15007091_461224&quot;&gt;&lt;span title=&quot;2012-07-08 18:27:35Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jul 8, 2012 at 18:27&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;&lt;a href=&quot;http://stackoverflow.com/questions/2100644/will-using-delete-with-a-base-class-pointer-cause-a-memory-leak&quot;&gt;Wait, it will be undefined behavior&lt;/a&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/111307/bobobobo&quot; title=&quot;61,811 reputation&quot; class=&quot;comment-user&quot;&gt;bobobobo&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment15007131_461224&quot;&gt;&lt;span title=&quot;2012-07-08 18:29:45Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jul 8, 2012 at 18:29&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;From the Herb Sutter&apos;s article: &quot;Guideline #4: A base class destructor should be either public and virtual, or protected and nonvirtual.&quot;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/552175/sundae&quot; title=&quot;694 reputation&quot; class=&quot;comment-user&quot;&gt;Sundae&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment58284341_461224&quot;&gt;&lt;span title=&quot;2016-02-09 08:22:25Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Feb 9, 2016 at 8:22&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Also from the article - &apos;if you delete polymorphically without a virtual destructor, you summon the dreaded specter of &quot;undefined behavior,&quot; a specter I personally would rather not meet in even a moderately well-lit alley, thank you very much.&apos; lol&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1399272/bondolin&quot; title=&quot;2,546 reputation&quot; class=&quot;comment-user&quot;&gt;Bondolin&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment59080427_461224&quot;&gt;&lt;span title=&quot;2016-02-29 14:30:21Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Feb 29, 2016 at 14:30&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;&quot; virtual constructor is not possible&quot; means you need not write virtual constructor by your own. Construction of derived object must follow the chain of construction from derived to base. So you need not write the virtual keyword for your constructor. Thanks&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1918966/tunvir-rahman-tusher&quot; title=&quot;6,082 reputation&quot; class=&quot;comment-user&quot;&gt;Tunvir Rahman Tusher&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment22986522_15903538&quot;&gt;&lt;span title=&quot;2013-04-19 06:50:48Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 19, 2013 at 6:50&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Murkantilism, &quot;virtual constructors cannot be done&quot; is true indeed. A constructor cannot be marked virtual.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/504032/cmeub&quot; title=&quot;467 reputation&quot; class=&quot;comment-user&quot;&gt;cmeub&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment23050490_15903538&quot;&gt;&lt;span title=&quot;2013-04-21 20:09:39Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 21, 2013 at 20:09&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@cmeub, But there is an idiom to achieve what you would want from a virtual constructor.  See &lt;a href=&quot;http://www.parashift.com/c++-faq-lite/virtual-ctors.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;parashift.com/c++-faq-lite/virtual-ctors.html&lt;/a&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/390847/cape1232&quot; title=&quot;989 reputation&quot; class=&quot;comment-user&quot;&gt;cape1232&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment28341755_15903538&quot;&gt;&lt;span title=&quot;2013-10-03 12:58:05Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 3, 2013 at 12:58&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@TunvirRahmanTusher could you please explain why the Base Destructor is called??&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/8667423/rimalroshan&quot; title=&quot;858 reputation&quot; class=&quot;comment-user&quot;&gt;rimalroshan&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment81422428_15903538&quot;&gt;&lt;span title=&quot;2017-11-11 08:49:08Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 11, 2017 at 8:49&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@rimiro Its automatic by c++.you can follow the link &lt;a href=&quot;https://stackoverflow.com/questions/677620/do-i-need-to-explicitly-call-the-base-virtual-destructor&quot; title=&quot;do i need to explicitly call the base virtual destructor&quot;&gt;stackoverflow.com/questions/677620/&lt;/a&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1918966/tunvir-rahman-tusher&quot; title=&quot;6,082 reputation&quot; class=&quot;comment-user&quot;&gt;Tunvir Rahman Tusher&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment81425349_15903538&quot;&gt;&lt;span title=&quot;2017-11-11 12:01:02Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 11, 2017 at 12:01&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;+&quot;If a class has any virtual function, it should have a virtual destructor, and that classes not designed to be base classes or not designed to be used polymorphically should not declare virtual destructors.&quot;: Are there cases in which it makes sense to break this rule? If not, would it make sense to have the compiler check this condition and issue an error is it is not satisfied?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/815409/giorgio&quot; title=&quot;4,795 reputation&quot; class=&quot;comment-user&quot;&gt;Giorgio&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment13524146_461237&quot;&gt;&lt;span title=&quot;2012-05-06 09:29:26Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;May 6, 2012 at 9:29&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Giorgio I don&apos;t know of any exceptions to the rule.  But I wouldn&apos;t rate myself as a C++ expert, so you may want to post this as a separate question.  A compiler warning (or a warning from a static analysis tool) makes sense to me.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1288/bill-the-lizard&quot; title=&quot;387,743 reputation&quot; class=&quot;comment-user&quot;&gt;Bill the Lizard&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment13526445_461237&quot;&gt;&lt;span title=&quot;2012-05-06 13:08:22Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;May 6, 2012 at 13:08&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Classes can be designed not to be deleted through a certain type&apos;s pointer, yet still have virtual functions - typical example is a callback interface. One does not delete his implementation through a callback interface pointer as that&apos;s only for subscribing, but it does have virtual functions.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/272708/dascandy&quot; title=&quot;7,036 reputation&quot; class=&quot;comment-user&quot;&gt;dascandy&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment57352117_461237&quot;&gt;&lt;span title=&quot;2016-01-15 05:05:24Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 15, 2016 at 5:05&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@dascandy Exactly - that or all the &lt;i&gt;many&lt;/i&gt; other situations where we use polymorphic behaviour but don&apos;t perform storage management via pointers - e.g. maintaining automatic or static-duration objects, with pointers only used as observation routes. No need/purpose in implementing a virtual destructor in any such cases. Since we&apos;re just quoting people here, I prefer Sutter from above: &quot;Guideline #4: A base class destructor should be either public and virtual, or protected and nonvirtual.&quot; The latter ensures anyone accidentally trying to delete via a base pointer is shown the error of their ways&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2757035/underscore-d&quot; title=&quot;5,910 reputation&quot; class=&quot;comment-user&quot;&gt;underscore_d&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment61198881_461237&quot;&gt;&lt;span title=&quot;2016-04-23 15:58:38Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 23, 2016 at 15:58&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 4 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Giorgio There is actually a trick one can use and avoid a virtual call to a destructor: bind via a const reference a derived object to a base, like &lt;code&gt;const Base&amp;amp; = make_Derived();&lt;/code&gt;. In this case, the destructor of the &lt;code&gt;Derived&lt;/code&gt; prvalue will be called, even if it&apos;s not virtual, so one saves the overhead introduced by vtables/vpointers. Of course the scope is quite limited. Andrei Alexandrescu mentioned this in his book &lt;a href=&quot;https://en.wikipedia.org/wiki/Modern_C%2B%2B_Design&quot; rel=&quot;nofollow noreferrer&quot;&gt;Modern C++ Design&lt;/a&gt;.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/3093378/vsoftco&quot; title=&quot;53,963 reputation&quot; class=&quot;comment-user&quot;&gt;vsoftco&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment68029351_461237&quot;&gt;&lt;span title=&quot;2016-11-02 20:06:56Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 2, 2016 at 20:06&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I had a look at that question of yours and saw that you had declared the base destructor as virtual. So does &quot;deleting a base class pointer when there is no virtual destructor will result in undefined behavior&quot; stay valid with respect to that question of yours? Since, in that question, when you called delete, the derived class (created by its new operator) is checked for a compatible version first. Since it found one there, it was called. So, don&apos;t you think it would be better to say as &quot;deleting a base class pointer when there is no destructor will result in undefined behavior&quot;?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/5752218/ubuntugod&quot; title=&quot;542 reputation&quot; class=&quot;comment-user&quot;&gt;ubuntugod&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment58829315_463774&quot;&gt;&lt;span title=&quot;2016-02-23 07:09:11Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Feb 23, 2016 at 7:09&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Thats pretty much the same thing.  The default constructor is not virtual.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/26983/bigsandwich&quot; title=&quot;2,698 reputation&quot; class=&quot;comment-user&quot;&gt;BigSandwich&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment59007412_463774&quot;&gt;&lt;span title=&quot;2016-02-26 23:30:25Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Feb 26, 2016 at 23:30&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@BigSandwich &quot;hang myself&quot;? You mean memory leaking?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/13611002/john&quot; title=&quot;2,641 reputation&quot; class=&quot;comment-user&quot;&gt;John&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment121795455_463774&quot;&gt;&lt;span title=&quot;2021-08-25 02:40:08Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 25, 2021 at 2:40&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Is it necessary to explicitly declare &lt;code&gt;~Derived()&lt;/code&gt; in all derived classes, even if it&apos;s just &lt;code&gt;~Derived() = default&lt;/code&gt;? Or is that implied by the language (making it safe to omit)?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/216292/ponkadoodle&quot; title=&quot;5,663 reputation&quot; class=&quot;comment-user&quot;&gt;Ponkadoodle&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment65394305_30304726&quot;&gt;&lt;span title=&quot;2016-08-18 15:20:27Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 18, 2016 at 15:20&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Wallacoloo no, only declare it when it&apos;s necessary. E.g. to put in &lt;code&gt;protected&lt;/code&gt; section, or to ensure that it&apos;s virtual by using &lt;code&gt;override&lt;/code&gt;.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/343443/abyx&quot; title=&quot;11,582 reputation&quot; class=&quot;comment-user&quot;&gt;Abyx&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment65399910_30304726&quot;&gt;&lt;span title=&quot;2016-08-18 17:51:38Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 18, 2016 at 17:51&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Abyx Is it sutiable to call &lt;code&gt;base-&amp;gt;~Base()&lt;/code&gt;? As per what you said, the &lt;code&gt;Base::~Base()&lt;/code&gt; would not be invoked, then there would be memory leaking. Am I right?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/13611002/john&quot; title=&quot;2,641 reputation&quot; class=&quot;comment-user&quot;&gt;John&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment121795506_30304726&quot;&gt;&lt;span title=&quot;2021-08-25 02:46:29Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 25, 2021 at 2:46&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Not have the base virtual destructor and calling &lt;code&gt;delete&lt;/code&gt; on a base pointer leads to undefined behavior.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/4505712/james-adkison&quot; title=&quot;9,261 reputation&quot; class=&quot;comment-user&quot;&gt;James Adkison&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment67336966_39158918&quot;&gt;&lt;span title=&quot;2016-10-13 20:00:23Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 13, 2016 at 20:00&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@JamesAdkison why does it lead to undefined behaviour??&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/8667423/rimalroshan&quot; title=&quot;858 reputation&quot; class=&quot;comment-user&quot;&gt;rimalroshan&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment81424552_39158918&quot;&gt;&lt;span title=&quot;2017-11-11 11:06:44Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 11, 2017 at 11:06&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 2 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@rimiro &lt;a href=&quot;https://stackoverflow.com/questions/8772227/deleting-a-derived-object-via-a-pointer-to-its-base-class#comment48280738_8772227&quot;&gt;It&apos;s what the standard says&lt;/a&gt;. I don&apos;t have a copy but the link takes you to a comment where someone references the location within the standard.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/4505712/james-adkison&quot; title=&quot;9,261 reputation&quot; class=&quot;comment-user&quot;&gt;James Adkison&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment81427254_39158918&quot;&gt;&lt;span title=&quot;2017-11-11 13:52:40Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 11, 2017 at 13:52&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@rimiro &quot;If deletion, therefore, can be performed polymorphically through the base class interface, then it must behave virtually and must be virtual. Indeed, the language requires it - if you delete polymorphically without a virtual destructor, you summon the dreaded specter of &quot;undefined behavior,&quot; a specter I personally would rather not meet in even a moderately well-lit alley, thank you very much.&quot; (&lt;a href=&quot;http://www.gotw.ca/publications/mill18.htm&quot; rel=&quot;nofollow noreferrer&quot;&gt;gotw.ca/publications/mill18.htm&lt;/a&gt;) -- Herb Sutter&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/4505712/james-adkison&quot; title=&quot;9,261 reputation&quot; class=&quot;comment-user&quot;&gt;James Adkison&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment81427288_39158918&quot;&gt;&lt;span title=&quot;2017-11-11 13:54:16Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 11, 2017 at 13:54&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;It&apos;s a different perspective on the same question. If we think in terms of interfaces instead of base class vs derived class then it&apos;s natural conclusion: if it&apos;s a part of the interface than make it virtual. If it&apos;s not don&apos;t.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1809897/dragan-ostojic&quot; title=&quot;109 reputation&quot; class=&quot;comment-user&quot;&gt;Dragan Ostojic&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment18160510_13293274&quot;&gt;&lt;span title=&quot;2012-11-09 18:58:19Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 9, 2012 at 18:58&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;+1 for stating the similarity of the OO concept of &lt;b&gt;interface&lt;/b&gt; and a C++ &lt;b&gt;pure virtual class&lt;/b&gt;. Regarding &lt;i&gt;destructor is expected to be implemented&lt;/i&gt;: that is often unnecessary. Unless a class is managing a resource such as raw dynamically allocated memory (e.g., not via a smart pointer), a file handle or a database handle, using the default destructor created by the compiler is fine in derived classes. And note that if a destructor (or any function) is declared &lt;code&gt;virtual&lt;/code&gt; in a base class, it is automatically &lt;code&gt;virtual&lt;/code&gt; in a derived class, even if it is not declared so.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1497596/davidrr&quot; title=&quot;16,881 reputation&quot; class=&quot;comment-user&quot;&gt;DavidRR&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment25605198_13293274&quot;&gt;&lt;span title=&quot;2013-07-11 13:22:26Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jul 11, 2013 at 13:22&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This misses the crucial detail that the destructor is &lt;i&gt;not necessarily&lt;/i&gt; part of the interface. One can easily program classes that have polymorphic functions but which the caller does not manage/is not allowed to delete. Then a virtual destructor has no purpose. Of course, to ensure this, the non-virtual - probably default - destructor should be non-public. If I had to guess, I&apos;d say such classes are more often used internally to projects, but that doesn&apos;t make them any less relevant as an example/nuance in all this.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2757035/underscore-d&quot; title=&quot;5,910 reputation&quot; class=&quot;comment-user&quot;&gt;underscore_d&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment61199198_13293274&quot;&gt;&lt;span title=&quot;2016-04-23 16:12:23Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 23, 2016 at 16:12&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I&apos;d recommend not using the massive number of implied behaviors in C++. You can in your own project, but anywhere else, explicit code conveys intent rather than just behavior plus someone else working on the project may not know C++ perfectly. For example, do you know the default linkage behavior of a &lt;code&gt;const&lt;/code&gt; global variable versus a non-&lt;code&gt;const&lt;/code&gt; one? Even if you do, I guarantee most don&apos;t with many not even knowing the two types of linkage exist.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/904963/user904963&quot; title=&quot;1,360 reputation&quot; class=&quot;comment-user&quot;&gt;user904963&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment126052454_41833225&quot;&gt;&lt;span title=&quot;2022-03-01 17:58:01Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Mar 1 at 17:58&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;No, this only retreads the utter basics of virtual functions, totally ignoring the nuance of when/why the destructor should be one - which isn&apos;t as intuitive, hence why the OP asked the question. (Also, why the unnecessary dynamic allocation here? Just do &lt;code&gt;B b{}; A&amp;amp; a{b}; a.foo();&lt;/code&gt;. Checking for &lt;code&gt;NULL&lt;/code&gt; - which should be &lt;code&gt;nullptr&lt;/code&gt; - before &lt;code&gt;delete&lt;/code&gt;ing - with incorrect indendation - is not required: &lt;code&gt;delete nullptr;&lt;/code&gt; is defined as a no-op. If anything, you should have checked this before calling &lt;code&gt;-&amp;gt;foo()&lt;/code&gt;, as otherwise undefined behaviour can occur if the &lt;code&gt;new&lt;/code&gt; somehow failed.)&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2757035/underscore-d&quot; title=&quot;5,910 reputation&quot; class=&quot;comment-user&quot;&gt;underscore_d&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment61199269_23723229&quot;&gt;&lt;span title=&quot;2016-04-23 16:15:30Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 23, 2016 at 16:15&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 3 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;It is safe to call &lt;code&gt;delete&lt;/code&gt; on a &lt;code&gt;NULL&lt;/code&gt; pointer (i.e., you don&apos;t need the &lt;code&gt;if (a != NULL)&lt;/code&gt; guard).&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/4505712/james-adkison&quot; title=&quot;9,261 reputation&quot; class=&quot;comment-user&quot;&gt;James Adkison&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment67336865_23723229&quot;&gt;&lt;span title=&quot;2016-10-13 19:57:25Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 13, 2016 at 19:57&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@SaileshD Yes, I know. That is what I said in &lt;a href=&quot;https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors/23723229?noredirect=1#comment67336865_23723229&quot;&gt;my comment&lt;/a&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/4505712/james-adkison&quot; title=&quot;9,261 reputation&quot; class=&quot;comment-user&quot;&gt;James Adkison&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment86824154_23723229&quot;&gt;&lt;span title=&quot;2018-04-18 16:02:19Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 18, 2018 at 16:02&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@underscore_d People usually demonstrate the behavior using pointers, because the most common use cases use pointers such as having &lt;code&gt;std::vector&amp;lt;Base*&amp;gt;&lt;/code&gt;. Of course, &lt;code&gt;std::vector&amp;lt;Base&amp;amp;&amp;gt;&lt;/code&gt; isn&apos;t a thing.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/904963/user904963&quot; title=&quot;1,360 reputation&quot; class=&quot;comment-user&quot;&gt;user904963&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment126052197_23723229&quot;&gt;&lt;span title=&quot;2022-03-01 17:44:27Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Mar 1 at 17:44&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Though this is possible, I would discourage anyone from using this. The overhead of a virtual destructor is miniscule and this just makes it possible to mess up, specially by a less experienced programmer, who doesn&apos;t know this. That little &lt;code&gt;virtual&lt;/code&gt; keyword could save you from a lot of agony.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/4429205/michal-%c5%a0tein&quot; title=&quot;854 reputation&quot; class=&quot;comment-user&quot;&gt;Michal tein&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment107548792_55030804&quot;&gt;&lt;span title=&quot;2020-03-21 12:18:45Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Mar 21, 2020 at 12:18&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Out of curiosity - Why is it that in the case of a shared_ptr the Base destructor gets called but not in the case of a unique_ptr?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/493957/gr-disarray&quot; title=&quot;494 reputation&quot; class=&quot;comment-user&quot;&gt;Gr-Disarray&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment121222011_55030804&quot;&gt;&lt;span title=&quot;2021-07-30 14:34:09Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jul 30, 2021 at 14:34&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I would say this is only necessary &quot;if it can be pointed to by a base class pointer&quot; &lt;i&gt;and&lt;/i&gt; can be publically deleted. But I guess it doesn&apos;t hurt to get into the habit of adding virtual dtors in case they might become needed later.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2757035/underscore-d&quot; title=&quot;5,910 reputation&quot; class=&quot;comment-user&quot;&gt;underscore_d&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment61199396_27745233&quot;&gt;&lt;span title=&quot;2016-04-23 16:21:26Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 23, 2016 at 16:21&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        "],"id":486,"title":"When to use virtual destructors?","content":"\n                \n&lt;p&gt;I have a solid understanding of most &lt;code&gt;OOP&lt;/code&gt; theory but the one thing that confuses me a lot is virtual destructors.&lt;/p&gt;\n&lt;p&gt;I thought that the destructor always gets called no matter what and for every object in the chain.&lt;/p&gt;\n&lt;p&gt;When are you meant to make them virtual and why?&lt;/p&gt;\n    ","slug":"when-to-use-virtual-destructors-1657388152135","postType":"QUESTION","createdAt":"2022-07-09T17:35:52.000Z","updatedAt":"2022-07-09T17:35:52.000Z","tags":[{"id":2448,"name":"shared-ptr","slug":"shared-ptr","createdAt":"2022-07-09T17:35:52.000Z","updatedAt":"2022-07-09T17:35:52.000Z","Questions_Tags":{"questionId":486,"tagId":2448}}]}]}},"__N_SSG":true}