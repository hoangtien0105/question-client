<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/81-096e453de8a27667.js" defer=""></script><script src="/_next/static/chunks/pages/questions/tag/%5Bslug%5D-6802ea06aeddcbec.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_buildManifest.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5"></style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/tag/printf#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="flex items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-string-1657387853407">Why does printf not flush after the call unless a newline is in the format string?</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/printf">printf</a></div></div><div class="mt-4 mb-6" style="height:100px;overflow:auto"><h4 class="font-semibold">Solution 1:</h4><div class="text-sm bg-green-100 text-neutral-600">
<p>The <code>stdout</code> stream is line buffered by default, so will only display what's in the buffer after it reaches a newline (or when it's told to). You have a few options to print immediately:</p>
<ul>
<li><p>Print to <code>stderr</code>instead using <code>fprintf</code> (<code>stderr</code> is <a href="http://man7.org/linux/man-pages/man3/setbuf.3.html#DESCRIPTION" rel="nofollow noreferrer">unbuffered by default</a>):</p>
<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"I will be printed immediately"</span>);
</code></pre>
</li>
<li><p>Flush <code>stdout</code> whenever you need it to using <code>fflush</code>:</p>
<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-built_in">printf</span>(<span class="hljs-string">"Buffered, will be flushed"</span>);
fflush(<span class="hljs-built_in">stdout</span>); <span class="hljs-comment">// Will now print everything in the stdout buffer</span>
</code></pre>
</li>
<li><p>Disable buffering on stdout by using <code>setbuf</code>:</p>
<pre class="lang-c s-code-block"><code class="hljs language-c">setbuf(<span class="hljs-built_in">stdout</span>, <span class="hljs-literal">NULL</span>);
</code></pre>
</li>
<li><p>Or use the more flexible <a href="https://en.cppreference.com/w/c/io/setvbuf" rel="nofollow noreferrer"><code>setvbuf</code></a>:</p>
<pre class="lang-c s-code-block"><code class="hljs language-c">setvbuf(<span class="hljs-built_in">stdout</span>, <span class="hljs-literal">NULL</span>, _IONBF, <span class="hljs-number">0</span>); 
</code></pre>
</li>
</ul>
    </div></div><div><div class="flex items-center justify-between text-slate-500"><div class="flex space-x-4 md:space-x-8"><div class="flex cursor-pointer items-center transition hover:text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" class="mr-1.5 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"></path></svg><span>4</span></div></div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"count":1,"rows":[{"answer":["\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;stdout\u0026lt;/code\u0026gt; stream is line buffered by default, so will only display what\u0026apos;s in the buffer after it reaches a newline (or when it\u0026apos;s told to). You have a few options to print immediately:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Print to \u0026lt;code\u0026gt;stderr\u0026lt;/code\u0026gt;instead using \u0026lt;code\u0026gt;fprintf\u0026lt;/code\u0026gt; (\u0026lt;code\u0026gt;stderr\u0026lt;/code\u0026gt; is \u0026lt;a href=\u0026quot;http://man7.org/linux/man-pages/man3/setbuf.3.html#DESCRIPTION\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;unbuffered by default\u0026lt;/a\u0026gt;):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;fprintf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;stderr\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I will be printed immediately\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Flush \u0026lt;code\u0026gt;stdout\u0026lt;/code\u0026gt; whenever you need it to using \u0026lt;code\u0026gt;fflush\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Buffered, will be flushed\u0026quot;\u0026lt;/span\u0026gt;);\nfflush(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;stdout\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Will now print everything in the stdout buffer\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Disable buffering on stdout by using \u0026lt;code\u0026gt;setbuf\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;setbuf(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;stdout\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Or use the more flexible \u0026lt;a href=\u0026quot;https://en.cppreference.com/w/c/io/setvbuf\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;setvbuf\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;setvbuf(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;stdout\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;, _IONBF, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;); \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;No, it\u0026apos;s not POSIX behaviour, it\u0026apos;s ISO behaviour (well, it \u0026lt;em\u0026gt;is\u0026lt;/em\u0026gt; POSIX behaviour but only insofar as they conform to ISO).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Standard output is line buffered if it can be detected to refer to an interactive device, otherwise it\u0026apos;s fully buffered. So there are situations where \u0026lt;code\u0026gt;printf\u0026lt;/code\u0026gt; won\u0026apos;t flush, even if it gets a newline to send out, such as:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;myprog \u0026amp;gt;myfile.txt\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This makes sense for efficiency since, if you\u0026apos;re interacting with a user, they probably want to see every line. If you\u0026apos;re sending the output to a file, it\u0026apos;s most likely that there\u0026apos;s not a user at the other end (though not impossible, they could be tailing the file). Now you \u0026lt;em\u0026gt;could\u0026lt;/em\u0026gt; argue that the user wants to see every character but there are two problems with that.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The first is that it\u0026apos;s not very efficient. The second is that the original ANSI C mandate was to primarily codify \u0026lt;em\u0026gt;existing\u0026lt;/em\u0026gt; behaviour, rather than invent \u0026lt;em\u0026gt;new\u0026lt;/em\u0026gt; behaviour, and those design decisions were made long before ANSI started the process. Even ISO nowadays treads very carefully when changing existing rules in the standards.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As to how to deal with that, if you \u0026lt;code\u0026gt;fflush (stdout)\u0026lt;/code\u0026gt; after every output call that you want to see immediately, that will solve the problem.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Alternatively, you can use \u0026lt;code\u0026gt;setvbuf\u0026lt;/code\u0026gt; before operating on \u0026lt;code\u0026gt;stdout\u0026lt;/code\u0026gt;, to set it to unbuffered and you won\u0026apos;t have to worry about adding all those \u0026lt;code\u0026gt;fflush\u0026lt;/code\u0026gt; lines to your code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;setvbuf (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;stdout\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;, _IONBF, BUFSIZ);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Just keep in mind that may affect performance quite a bit if you \u0026lt;em\u0026gt;are\u0026lt;/em\u0026gt; sending the output to a file. Also keep in mind that support for this is implementation-defined, not guaranteed by the standard.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;ISO C99 section \u0026lt;code\u0026gt;7.19.3/3\u0026lt;/code\u0026gt; is the relevant bit:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;When a stream is \u0026lt;em\u0026gt;unbuffered\u0026lt;/em\u0026gt;, characters are intended to appear from the source or at the destination as soon as possible. Otherwise characters may be accumulated and transmitted to or from the host environment as a block.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;When a stream is \u0026lt;em\u0026gt;fully buffered\u0026lt;/em\u0026gt;, characters are intended to be transmitted to or from the host environment as a block when a buffer is filled.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;When a stream is \u0026lt;em\u0026gt;line buffered\u0026lt;/em\u0026gt;, characters are intended to be transmitted to or from the host environment as a block when a new-line character is encountered.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Furthermore, characters are intended to be transmitted as a block to the host environment when a buffer is filled, when input is requested on an unbuffered stream, or when input is requested on a line buffered stream that requires the transmission of characters from the host environment.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Support for these characteristics is implementation-defined, and may be affected via the \u0026lt;code\u0026gt;setbuf\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;setvbuf\u0026lt;/code\u0026gt; functions.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To immediately flush call \u0026lt;code\u0026gt;fflush(stdout)\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;fflush(NULL)\u0026lt;/code\u0026gt; (\u0026lt;code\u0026gt;NULL\u0026lt;/code\u0026gt; means flush everything).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It\u0026apos;s probably like that because of efficiency and because if you have multiple programs writing to a single TTY, this way you don\u0026apos;t get characters on a line interlaced. So if program A and B are outputting, you\u0026apos;ll usually get:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;program A output\nprogram B output\nprogram B output\nprogram A output\nprogram B output\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This stinks, but it\u0026apos;s better than\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;proprogrgraam m AB  ououtputputt\nprproogrgram amB A  ououtputtput\nprogram B output\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note that it isn\u0026apos;t even guaranteed to flush on a newline, so you should flush explicitly if flushing matters to you.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Note: Microsoft runtime libraries do not support line buffering, so \u0026lt;code\u0026gt;printf(\u0026quot;will print immediately to terminal\u0026quot;)\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/setvbuf\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/setvbuf\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;stdout is buffered, so will only output after a newline is printed.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To get immediate output, either:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Print to stderr.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Make stdout unbuffered.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;by default, stdout is line buffered, stderr is none buffered and file is completely buffered.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can fprintf to stderr, which is unbuffered, instead.  Or you can flush stdout when you want to.  Or you can set stdout to unbuffered.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Use \u0026lt;code\u0026gt;setbuf(stdout, NULL);\u0026lt;/code\u0026gt; to disable buffering.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are generally 2 levels of buffering-\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;1. Kernel buffer Cache (makes read/write faster)\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;2. Buffering in I/O library (reduces no. of system calls)\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Let\u0026apos;s take example of \u0026lt;code\u0026gt;fprintf and write()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;When you call \u0026lt;code\u0026gt;fprintf()\u0026lt;/code\u0026gt;, it doesn\u0026apos;t wirte directly to the file. It first goes to stdio buffer in the program\u0026apos;s memory. From there it is written to the kernel buffer cache by using write system call. So one way to skip I/O buffer is directly using write(). Other ways are by using \u0026lt;code\u0026gt;setbuff(stream,NULL)\u0026lt;/code\u0026gt;. This sets the buffering mode to no buffering and data is directly written to kernel buffer.\nTo forcefully make the data to be shifted to kernel buffer, we can use \u0026quot;\\n\u0026quot;, which in case of default buffering mode of \u0026apos;line buffering\u0026apos;, will flush I/O buffer.\nOr we can use \u0026lt;code\u0026gt;fflush(FILE *stream)\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Now we are in kernel buffer. Kernel(/OS) wants to minimise disk access time and hence it reads/writes only blocks of disk. So when a \u0026lt;code\u0026gt;read()\u0026lt;/code\u0026gt; is issued, which is a system call and can be invoked directly or through \u0026lt;code\u0026gt;fscanf()\u0026lt;/code\u0026gt;, kernel reads the disk block from disk and stores it in a buffer. After that data is copied from here to user space.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Similarly that \u0026lt;code\u0026gt;fprintf()\u0026lt;/code\u0026gt; data recieved from I/O buffer is written to the disk by the kernel. This makes read() write() faster.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Now to force the kernel to initiate a \u0026lt;code\u0026gt;write()\u0026lt;/code\u0026gt;, after which data transfer is controlled by hardware controllers, there are also some ways. We can use \u0026lt;code\u0026gt;O_SYNC\u0026lt;/code\u0026gt; or similar flags during write calls. Or we could use other functions like \u0026lt;code\u0026gt;fsync(),fdatasync(),sync()\u0026lt;/code\u0026gt; to make the kernel initiate writes as soon as data is available in the kernel buffer.\u0026lt;/p\u0026gt;\n    "],"comment":["\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;did you investigated whether this happens with any file or only with terminals? that would sound to be a clever terminal feature not to output uncompleted line from a background program, though i expect it wouldn\u0026apos;t apply to \u0026lt;i\u0026gt;the\u0026lt;/i\u0026gt; foreground program.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/15304/pypebros\u0026quot; title=\u0026quot;2,541 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;PypeBros\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment1602128_1716296\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2009-11-12 16:50:13Z, License: CC BY-SA 2.5\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 12, 2009 at 16:50\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Under Cygwin bash I\u0026apos;m seeing this same misbehaviour even if a newline \u0026lt;i\u0026gt;is\u0026lt;/i\u0026gt; in the format string. This problem is new to Windows 7; the same source code worked fine on Windows XP. MS cmd.exe flushes as expected. The fix \u0026lt;code\u0026gt;setvbuf(stdout, (char*)NULL, _IONBF, 0)\u0026lt;/code\u0026gt; works around the problem, but surely should not have been necessary. I\u0026apos;m using MSVC++ 2008 Express. ~~~\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/7255/steve-pitchers\u0026quot; title=\u0026quot;6,801 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Steve Pitchers\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment19717105_1716296\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2013-01-08 14:10:43Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 8, 2013 at 14:10\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;To clarify the title of the question: \u0026lt;code\u0026gt;printf(..)\u0026lt;/code\u0026gt; \u0026lt;b\u0026gt;does not do any flushing\u0026lt;/b\u0026gt; itself, it\u0026apos;s the buffering of \u0026lt;code\u0026gt;stdout\u0026lt;/code\u0026gt; that may flush when seeing a newline (if it\u0026apos;s line-buffered). It would react the same way to \u0026lt;code\u0026gt;putchar(\u0026apos;\\n\u0026apos;);\u0026lt;/code\u0026gt;, so \u0026lt;code\u0026gt;printf(..)\u0026lt;/code\u0026gt; is not special in this regard. This is in contrast with \u0026lt;code\u0026gt;cout \u0026amp;lt;\u0026amp;lt; endl;\u0026lt;/code\u0026gt;, the \u0026lt;a href=\u0026quot;http://www.cplusplus.com/reference/ostream/endl/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;documentation of which\u0026lt;/a\u0026gt; prominently mentions flushing. The \u0026lt;a href=\u0026quot;http://www.cplusplus.com/reference/cstdio/printf/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;documentation of printf\u0026lt;/a\u0026gt; doesn\u0026apos;t mention flushing at all.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1143274/evgeni-sergeev\u0026quot; title=\u0026quot;20,997 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Evgeni Sergeev\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment60471558_1716296\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-04-05 14:02:44Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 5, 2016 at 14:02\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;writing (/flushing) is potentially an expensive operation, it\u0026apos;s probably buffered for performance reasons.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1067003/hanshenrik\u0026quot; title=\u0026quot;17,729 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;hanshenrik\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment78450183_1716296\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-08-17 23:31:32Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Aug 17, 2017 at 23:31\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@EvgeniSergeev: Is there a consensus that the question has incorrectly diagnosed the problem, and that flushing happens when there is a newline in the \u0026lt;i\u0026gt;output\u0026lt;/i\u0026gt;? (putting one in the format string is one way, but not the only way, of getting one in the output).\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/103167/ben-voigt\u0026quot; title=\u0026quot;270,543 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Ben Voigt\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment108872469_1716296\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-05-01 17:54:52Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 1, 2020 at 17:54\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Or, to disable buffering entirely: \u0026lt;code\u0026gt;setbuf(stdout, NULL);\u0026lt;/code\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/9555/andy-ross\u0026quot; title=\u0026quot;11,273 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Andy Ross\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment1594565_1716621\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2009-11-11 17:42:08Z, License: CC BY-SA 2.5\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 11, 2009 at 17:42\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Also, just wanted to mention that apparently in UNIX a newline will typically only flush the buffer if stdout is a terminal. If the output is being redirected to a file, a newline won\u0026apos;t flush.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/206760/hora\u0026quot; title=\u0026quot;3,481 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;hora\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment5855685_1716621\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-03-05 23:10:56Z, License: CC BY-SA 2.5\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Mar 5, 2011 at 23:10\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;I feel that I should add: I\u0026apos;ve just been testing this theory, and I am finding that using \u0026lt;code\u0026gt;setlinebuf()\u0026lt;/code\u0026gt; on a stream which is not directed to a terminal \u0026lt;i\u0026gt;is\u0026lt;/i\u0026gt; flushing at the end of each line.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/402390/doddy\u0026quot; title=\u0026quot;1,301 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Doddy\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment8830923_1716621\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-09-06 19:06:40Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 6, 2011 at 19:06\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026quot;As initially opened, the standard error stream is not fully buffered; the standard input and standard output streams are fully buffered if and only if the stream can be determined not to refer to an interactive device\u0026quot; -- see this question: \u0026lt;a href=\u0026quot;http://stackoverflow.com/questions/5229096/does-printf-always-flush-the-buffer-on-encountering-a-newline\u0026quot; title=\u0026quot;does printf always flush the buffer on encountering a newline\u0026quot;\u0026gt;stackoverflow.com/questions/5229096/\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/651246/seppo-enarvi\u0026quot; title=\u0026quot;2,890 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Seppo Enarvi\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment48869715_1716621\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-05-22 07:23:05Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 22, 2015 at 7:23\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@RuddZwolinski If this is going to be a good canon answer of \u0026quot;why isn\u0026apos;t it printing\u0026quot; it seems important to mention the terminal/file distinction as per \u0026lt;a href=\u0026quot;http://stackoverflow.com/questions/5229096/does-printf-always-flush-the-buffer-on-encountering-a-newline\u0026quot;\u0026gt;\u0026quot;Does printf always flush the buffer on encountering a newline?\u0026quot;\u0026lt;/a\u0026gt; directly in this highly upvoted answer, vs people needing to read the comments...\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/211160/hostilefork-says-dont-trust-se\u0026quot; title=\u0026quot;32,116 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;HostileFork says dont trust SE\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment60626842_1716621\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-04-08 22:08:13Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 8, 2016 at 22:08\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;I just came across a scenario where even there is a \u0026apos;\\n\u0026apos;, printf() doesn\u0026apos;t flush. It was overcome by adding a fflush(stdout), as you mentioned here. But I am wondering the reason why \u0026apos;\\n\u0026apos; failed to flush the buffer in printf().\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1060209/qiang-xu\u0026quot; title=\u0026quot;3,993 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Qiang Xu\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment13360080_4201325\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2012-04-28 19:45:39Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 28, 2012 at 19:45\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@QiangXu, standard output is line buffered only in the case where it can be definitively determined to refer to an interactive device. So, for example, if you redirect output with \u0026lt;code\u0026gt;myprog \u0026amp;gt;/tmp/tmpfile\u0026lt;/code\u0026gt;, that is fully buffered rather than line buffered. From memory, the determination as to whether your standard output is interactive is left to the implementation.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/14860/paxdiablo\u0026quot; title=\u0026quot;818,480 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;paxdiablo\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment13363061_4201325\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2012-04-29 00:20:58Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 29, 2012 at 0:20\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;furthermore on Windows calling setvbuf(...., _IOLBF) will not work as _IOLBF is the same as _IOFBF there: \u0026lt;a href=\u0026quot;https://msdn.microsoft.com/en-us/library/86cebhfs.aspx\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;msdn.microsoft.com/en-us/library/86cebhfs.aspx\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/498981/piotr-lopusiewicz\u0026quot; title=\u0026quot;2,414 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Piotr Lopusiewicz\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment45026926_4201325\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-02-05 10:02:12Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Feb 5, 2015 at 10:02\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Keep in mind \u0026lt;code\u0026gt;fflush(NULL);\u0026lt;/code\u0026gt; is usually a very bad idea. It will kill performance if you have many files open, especially in a multi-threaded environment where you\u0026apos;ll fight with everything for locks.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/379897/r-github-stop-helping-ice\u0026quot; title=\u0026quot;202,279 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;R.. GitHub STOP HELPING ICE\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment7350537_1716322\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2011-06-09 13:57:51Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jun 9, 2011 at 13:57\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Funny, I think this is the only answer which actually answers the \u0026quot;why?\u0026quot; - applying an appropriate amount of guessing. The others explain \u0026lt;i\u0026gt;that\u0026lt;/i\u0026gt; it is buffered (which does seem less necessary towards  an OP who demonstrates awareness of that by using the term \u0026quot;flushing\u0026quot;) and how to avoid/control it. Admittedly there is enough detail there to provide helpful insights in answers. But only this one discusses why and has that angle of answering all to itself. Cheers.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/7733418/yunnosch\u0026quot; title=\u0026quot;25,060 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Yunnosch\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment125506107_1716959\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2022-02-05 07:58:37Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Feb 5 at 7:58\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Worse than \u0026lt;code\u0026gt;printf\u0026lt;/code\u0026gt; going immediately to the terminal in the \u0026quot;normal\u0026quot; case is the fact that \u0026lt;code\u0026gt;printf\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;fprintf\u0026lt;/code\u0026gt; get more coarsely buffered even in cases where their output is put to immediate use.  Unless MS has fixed things, that makes it impossible for one program to capture stderr and stdout from another and identify in what sequence things were sent to each.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/363751/supercat\u0026quot; title=\u0026quot;73,697 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;supercat\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment51895931_4027867\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-08-13 18:37:12Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Aug 13, 2015 at 18:37\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;no, it doesn\u0026apos;t print that immediately to the terminal unless no buffering was set. By default full buffering is used\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/995714/phuclv\u0026quot; title=\u0026quot;32,962 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;phuclv\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment108676979_4027867\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-04-26 02:01:59Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 26, 2020 at 2:01\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Or \u0026lt;code\u0026gt;fflush(stdout)\u0026lt;/code\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1701799/rastajedi\u0026quot; title=\u0026quot;631 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;RastaJedi\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment58819255_1716315\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2016-02-22 22:47:24Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Feb 22, 2016 at 22:47\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026quot;so will only output after a newline is printed.\u0026quot; Not only this but at least 4 other cases.  buffer full, write to \u0026lt;code\u0026gt;stderr\u0026lt;/code\u0026gt; (this answer mentions later), \u0026lt;code\u0026gt;fflush(stdout)\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;fflush(NULL)\u0026lt;/code\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2410359/chux-reinstate-monica\u0026quot; title=\u0026quot;128,313 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;chux - Reinstate Monica\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment82848702_1716315\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-12-22 10:20:43Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 22, 2017 at 10:20\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026quot;stdout is buffered\u0026quot; is not true, as hinted at by bullet point 2.  By default, stdout is block buffered when it is a regular file and line buffered when it is a tty.  Perhaps simply add \u0026quot;by default\u0026quot; to the phrase \u0026quot;stdout is buffered\u0026quot;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/140750/william-pursell\u0026quot; title=\u0026quot;191,423 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;William Pursell\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment124359606_1716315\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2021-12-14 15:14:17Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Dec 14, 2021 at 15:14\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        "],"id":397,"title":"Why does printf not flush after the call unless a newline is in the format string?","content":"\n                \n\u0026lt;p\u0026gt;Why does \u0026lt;code\u0026gt;printf\u0026lt;/code\u0026gt; not flush after the call unless a newline is in the format string? Is this POSIX behavior? How might I have \u0026lt;code\u0026gt;printf\u0026lt;/code\u0026gt; immediately flush every time?\u0026lt;/p\u0026gt;\n    ","slug":"why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-string-1657387853407","postType":"QUESTION","createdAt":"2022-07-09T17:30:53.000Z","updatedAt":"2022-07-09T17:30:53.000Z","tags":[{"id":2138,"name":"printf","slug":"printf","createdAt":"2022-07-09T17:30:53.000Z","updatedAt":"2022-07-09T17:30:53.000Z","Questions_Tags":{"questionId":397,"tagId":2138}}]}]}},"__N_SSG":true},"page":"/questions/tag/[slug]","query":{"slug":"printf"},"buildId":"4Y8KGE-c2lolBeBmcum_I","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>