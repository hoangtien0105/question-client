{"pageProps":{"data":{"count":1,"rows":[{"answer":["\n&lt;p&gt;&lt;a href=&quot;http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;SQLiteOpenHelper&lt;/code&gt;&lt;/a&gt; &lt;a href=&quot;http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onCreate%28android.database.sqlite.SQLiteDatabase%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;onCreate()&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;onUpgrade()&lt;/code&gt;&lt;/a&gt; callbacks are invoked when the database is actually opened, for example by a call to &lt;a href=&quot;http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase%28%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;getWritableDatabase()&lt;/code&gt;&lt;/a&gt;. The database is not opened when the database helper object itself is created.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;SQLiteOpenHelper&lt;/code&gt; versions the database files. The version number is the &lt;code&gt;int&lt;/code&gt; argument passed to the &lt;a href=&quot;http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#SQLiteOpenHelper%28android.content.Context,%20java.lang.String,%20android.database.sqlite.SQLiteDatabase.CursorFactory,%20int%29&quot; rel=&quot;noreferrer&quot;&gt;constructor&lt;/a&gt;. In the database file, the version number is stored in &lt;a href=&quot;http://www.sqlite.org/pragma.html#pragma_schema_version&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;PRAGMA user_version&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;onCreate()&lt;/code&gt; is only run when the database file did not exist and was just created. If &lt;code&gt;onCreate()&lt;/code&gt; returns successfully (doesn&apos;t throw an exception), the database is assumed to be created with the requested version number. As an implication, you should not catch &lt;code&gt;SQLException&lt;/code&gt;s in &lt;code&gt;onCreate()&lt;/code&gt; yourself.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;onUpgrade()&lt;/code&gt; is only called when the database file exists but the stored version number is lower than requested in the constructor. The &lt;code&gt;onUpgrade()&lt;/code&gt; should update the table schema to the requested version.&lt;/p&gt;\n\n&lt;p&gt;When changing the table schema in code (&lt;code&gt;onCreate()&lt;/code&gt;), you should make sure the database is updated. Two main approaches:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;Delete the old database file so that &lt;code&gt;onCreate()&lt;/code&gt; is run again. This is often preferred at development time where you have control over the installed versions and data loss is not an issue. Some ways to delete the database file:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;Uninstall the application. Use the application manager or &lt;code&gt;adb uninstall your.package.name&lt;/code&gt; from the shell.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Clear application data. Use the application manager.&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Increment the database version so that &lt;code&gt;onUpgrade()&lt;/code&gt; is invoked. This is slightly more complicated as more code is needed.&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;For development time schema upgrades where data loss is not an issue, you can just use &lt;code&gt;execSQL(&quot;DROP TABLE IF EXISTS &amp;lt;tablename&amp;gt;&quot;)&lt;/code&gt; in to remove your existing tables and call &lt;code&gt;onCreate()&lt;/code&gt; to recreate the database.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;For released versions, you should implement data migration in &lt;code&gt;onUpgrade()&lt;/code&gt; so your users don&apos;t lose their data.&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;/ol&gt;\n    ","\n&lt;p&gt;To further add missing points here, as per the request by Jaskey&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Database version is stored within the &lt;code&gt;SQLite&lt;/code&gt; database file.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;catch is the constructor&lt;/p&gt;\n\n&lt;pre class=&quot;lang-sql s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;SQLiteOpenHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; version)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So when the database helper constructor is called with a &lt;code&gt;name&lt;/code&gt; (2nd param), platform checks if the database exists or not and if the database exists, it gets the version information from the database file header and triggers the right call back&lt;/p&gt;\n\n&lt;p&gt;As already explained in the older answer, if the database with the name doesn&apos;t exists, it triggers &lt;code&gt;onCreate&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;Below explanation explains &lt;code&gt;onUpgrade&lt;/code&gt; case with an example.&lt;/p&gt;\n\n&lt;p&gt;Say, your first version of application had the &lt;code&gt;DatabaseHelper&lt;/code&gt; (extending &lt;code&gt;SQLiteOpenHelper&lt;/code&gt;) with constructor passing version as &lt;code&gt;1&lt;/code&gt; and then you provided an upgraded application with the new source code having version passed as &lt;code&gt;2&lt;/code&gt;, then automatically when the &lt;code&gt;DatabaseHelper&lt;/code&gt; is constructed, platform triggers &lt;code&gt;onUpgrade&lt;/code&gt; by seeing the file already exists, but the version is lower than the current version which you have passed.&lt;/p&gt;\n\n&lt;p&gt;Now say you are planing to give a third version of application with db version as &lt;code&gt;3&lt;/code&gt; (db version is increased only when database schema is to be modified). In such incremental upgrades, you have to write the upgrade logic from each version incrementally for a better maintainable code&lt;/p&gt;\n\n&lt;p&gt;Example pseudo code below:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-sql s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;@Override&lt;/span&gt;\npublic void onUpgrade(SQLiteDatabase db, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; oldVersion, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; newVersion) {\n  switch(oldVersion) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;:\n       &lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;upgrade logic &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; version &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;:\n       &lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;upgrade logic &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; version &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;:\n       &lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;upgrade logic &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; version &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;\n       break;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;default&lt;/span&gt;:\n       throw &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(\n                &quot;onUpgrade() with unknown oldVersion &quot; &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; oldVersion);\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Notice the missing &lt;code&gt;break&lt;/code&gt; statement in case &lt;code&gt;1&lt;/code&gt; and &lt;code&gt;2&lt;/code&gt;. This is what I mean by incremental upgrade.&lt;/p&gt;\n\n&lt;p&gt;Say if the old version is &lt;code&gt;2&lt;/code&gt; and new version is &lt;code&gt;4&lt;/code&gt;, then the logic will upgrade the database from &lt;code&gt;2&lt;/code&gt; to &lt;code&gt;3&lt;/code&gt; and then to &lt;code&gt;4&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;If old version is &lt;code&gt;3&lt;/code&gt; and new version is &lt;code&gt;4&lt;/code&gt;, it will just run the upgrade logic for &lt;code&gt;3&lt;/code&gt; to &lt;code&gt;4&lt;/code&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;&lt;code&gt;onCreate()&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;When we create DataBase at a first time (i.e Database is not exists) &lt;code&gt;onCreate()&lt;/code&gt; create database with version which is passed in \n&lt;code&gt;SQLiteOpenHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version)&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;code&gt;onCreate()&lt;/code&gt; method is creating the tables youve defined and executing any other code youve written. However, this method will only be called if the SQLite file is missing in your apps data directory (&lt;code&gt;/data/data/your.apps.classpath/databases&lt;/code&gt;).  &lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;This method will not be called if youve changed your code and relaunched in the emulator.  If you want &lt;code&gt;onCreate()&lt;/code&gt; to run you need to use adb to delete the SQLite database file.&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;code&gt;onUpgrade()&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;code&gt;SQLiteOpenHelper&lt;/code&gt; should call the super constructor.&lt;/li&gt;\n&lt;li&gt;The &lt;code&gt;onUpgrade()&lt;/code&gt; method will only be called when the version integer is larger than the current version running in the app.&lt;/li&gt;\n&lt;li&gt;If you want the &lt;code&gt;onUpgrade()&lt;/code&gt; method to be called, you need to increment the version number in your code.&lt;/li&gt;\n&lt;/ol&gt;\n    ","\n&lt;p&gt;May be I am too late but I would like to share my short and sweet answer.\nPlease check &lt;a href=&quot;https://stackoverflow.com/a/31605916/2110812&quot;&gt;&lt;strong&gt;Answer&lt;/strong&gt;&lt;/a&gt;  for a same problem. It will definitely help you. No more deep specifications.&lt;/p&gt;\n\n&lt;p&gt;If you are confident about syntax for creating table, than it may happen when you add new column in your same table, for that...&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;1) Uninstall from your device and run it again.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;OR&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;2) Setting -&amp;gt; app -&amp;gt; ClearData&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;OR&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;3)&lt;/strong&gt; Change &lt;code&gt;DATABASE_VERSION&lt;/code&gt; in your &quot;DatabaseHandler&quot; class (If you have added new column than it will upgrade automatically)&lt;/p&gt;\n\n&lt;pre class=&quot;lang-sql s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;public DatabaseHandler(Context context) {\n    super(context, DATABASE_NAME, &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;, DATABASE_VERSION);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;OR&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;4)&lt;/strong&gt; Change &lt;code&gt;DATABASE_NAME&lt;/code&gt; in your &quot;DatabaseHandler&quot; class (I faced same problem. But I succeed by changing &lt;code&gt;DATABASE_NAME&lt;/code&gt;.)&lt;/p&gt;\n    ","\n&lt;p&gt;Points to remember when extending &lt;code&gt;SQLiteOpenHelper&lt;/code&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;code&gt;super(context, DBName, null, DBversion);&lt;/code&gt; - This should be invoked first line of constructor&lt;/li&gt;\n&lt;li&gt;override &lt;code&gt;onCreate&lt;/code&gt; and &lt;code&gt;onUpgrade&lt;/code&gt; (if needed)&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;onCreate&lt;/code&gt; will be invoked only when &lt;code&gt;getWritableDatabase()&lt;/code&gt; or &lt;code&gt;getReadableDatabase()&lt;/code&gt; is executed. And this will only invoked once when a &lt;code&gt;DBName&lt;/code&gt; specified in the first step is not available. You can add create table query on &lt;code&gt;onCreate&lt;/code&gt; method&lt;/li&gt;\n&lt;li&gt;Whenever you want to add new table just change &lt;code&gt;DBversion&lt;/code&gt; and do the queries in &lt;code&gt;onUpgrade&lt;/code&gt; table or simply uninstall then install the app.&lt;/li&gt;\n&lt;/ol&gt;\n    ","\n&lt;p&gt;You can create database &amp;amp; table like &lt;/p&gt;\n\n&lt;pre class=&quot;lang-sql s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;public class DbHelper extends SQLiteOpenHelper {\nprivate &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String DBNAME &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &quot;testdatbase.db&quot;;\nprivate &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; VERSION &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n\npublic DbHelper(Context context) {\n    super(context, DBNAME, &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;, VERSION);\n    &lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt; TODO Auto&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;generated constructor stub\n}\n\n&lt;span class=&quot;hljs-variable&quot;&gt;@Override&lt;/span&gt;\npublic void onCreate(SQLiteDatabase db) {\n    &lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt; TODO Auto&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;generated &lt;span class=&quot;hljs-keyword&quot;&gt;method&lt;/span&gt; stub\n    db.execSQL(&quot;create table BookDb(id integer primary key autoincrement,BookName text,Author text,IssuedOn text,DueDate text,Fine text,Totalfine text&quot;);\n\n}\n\n&lt;span class=&quot;hljs-variable&quot;&gt;@Override&lt;/span&gt;\npublic void onUpgrade(SQLiteDatabase db, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; oldVersion, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; newVersion) {\n    db.execSQL(&quot;DROP TABLE IF EXISTS BookDb&quot;);\n    onCreate(db);\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Note : if you want create another table or add columns or no such table, just increment the VERSION&lt;/strong&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;onCreate&lt;/strong&gt; is called for the first time when creation of tables are needed. We need to override this method where we write the script for table creation which is executed by SQLiteDatabase. execSQL method. After executing in first time deployment, this method will not be called onwards.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;onUpgrade&lt;/em&gt;&lt;/strong&gt;\nThis method is called when database version is upgraded. Suppose for the first time deployment , database version was 1 and in second deployment there was change in database structure like adding extra column in table. Suppose database version is 2 now.&lt;/p&gt;\n    ","\n&lt;p&gt;Sqlite database override two methods &lt;/p&gt;\n\n&lt;p&gt;1) onCreate():\nThis method invoked only once when the application is start at first time . So it called only once &lt;/p&gt;\n\n&lt;p&gt;2)onUpgrade()\nThis method called when we change the database version,then this methods gets invoked.It is used for the alter the table structure like adding new column after creating DB Schema&lt;/p&gt;\n    ","\n&lt;p&gt;no such table found is mainly when you have not opened the &lt;code&gt;SQLiteOpenHelper&lt;/code&gt; class with &lt;code&gt;getwritabledata()&lt;/code&gt; and before this you also have to call make constructor with databasename &amp;amp; version. \nAnd &lt;code&gt;OnUpgrade&lt;/code&gt; is called whenever there is upgrade value in version number given in &lt;code&gt;SQLiteOpenHelper&lt;/code&gt; class.&lt;/p&gt;\n\n&lt;p&gt;Below is the code snippet (No such column found may be because of spell in column name):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-sql s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;public class database_db {\n    entry_data endb;\n    String file_name&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&quot;Record.db&quot;;\n    SQLiteDatabase sq;\n    public database_db(Context c)\n    {\n        endb&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; entry_data(c, file_name, &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;);\n    }\n    public database_db &lt;span class=&quot;hljs-keyword&quot;&gt;open&lt;/span&gt;()\n    {\n        sq&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;endb.getWritableDatabase();\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; this;\n    }\n    public &lt;span class=&quot;hljs-keyword&quot;&gt;Cursor&lt;/span&gt; getdata(String &lt;span class=&quot;hljs-keyword&quot;&gt;table&lt;/span&gt;)\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; sq.query(&lt;span class=&quot;hljs-keyword&quot;&gt;table&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;);\n    }\n    public long insert_data(String &lt;span class=&quot;hljs-keyword&quot;&gt;table&lt;/span&gt;,ContentValues &lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;)\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; sq.insert(&lt;span class=&quot;hljs-keyword&quot;&gt;table&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;);\n    }\n    public void &lt;span class=&quot;hljs-keyword&quot;&gt;close&lt;/span&gt;()\n    {\n        sq.close();\n    }\n    public void &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt;(String &lt;span class=&quot;hljs-keyword&quot;&gt;table&lt;/span&gt;)\n    {\n        sq.delete(&lt;span class=&quot;hljs-keyword&quot;&gt;table&lt;/span&gt;,&lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;,&lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;);\n    }\n}\nclass entry_data extends SQLiteOpenHelper\n{\n\n    public entry_data(Context context, String name, SQLiteDatabase.CursorFactory factory,\n                      &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; version) {\n        super(context, name, factory, version);\n        &lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt; TODO Auto&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;generated constructor stub\n    }\n\n    &lt;span class=&quot;hljs-variable&quot;&gt;@Override&lt;/span&gt;\n    public void onCreate(SQLiteDatabase sqdb) {\n        &lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt; TODO Auto&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;generated &lt;span class=&quot;hljs-keyword&quot;&gt;method&lt;/span&gt; stub\n\n        sqdb.execSQL(&quot;CREATE TABLE IF NOT EXISTS &apos;YOUR_TABLE_NAME&apos;(Column_1 text not null,Column_2 text not null);&quot;);\n\n    }\n\n    public void onUpgrade(SQLiteDatabase db, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; oldVersion, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; newVersion) {\n          onCreate(db);\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you forget to provide a &quot;name&quot; string as the second argument to the constructor, it creates an &quot;in-memory&quot; database which gets erased when you close the app.&lt;/p&gt;\n    ","\n&lt;p&gt;Uninstall your application from the emulator or device. Run the app again. (OnCreate() is not executed when the database already exists)&lt;/p&gt;\n    ","\n&lt;p&gt;Your database name must end with .db also your query strings must have a terminator (;)&lt;/p&gt;\n    ","\n&lt;p&gt;Recheck your query in ur DatabaseHandler/DatabaseManager class(which ever you have took)&lt;/p&gt;\n    ","\n&lt;p&gt;In my case I get items from XML-file with &lt;code&gt;&amp;lt;string-array&amp;gt;&lt;/code&gt;, where I store &lt;code&gt;&amp;lt;item&amp;gt;&lt;/code&gt;s. In these &lt;code&gt;&amp;lt;item&amp;gt;&lt;/code&gt;s I hold SQL strings and apply one-by-one with &lt;code&gt;databaseBuilder.addMigrations(migration)&lt;/code&gt;. I made one mistake, forgot to add &lt;code&gt;\\&lt;/code&gt; before quote and got the exception:&lt;/p&gt;\n\n&lt;p&gt;android.database.sqlite.SQLiteException: no such column: some_value (code 1 SQLITE_ERROR): , while compiling: INSERT INTO table_name(id, name) VALUES(1, some_value)&lt;/p&gt;\n\n&lt;p&gt;So, this is a right variant:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-sql s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;&lt;/span&gt;item&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;INTO&lt;/span&gt; table_name(id, name) &lt;span class=&quot;hljs-keyword&quot;&gt;VALUES&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, \\&quot;some_value\\&quot;)\n&lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;/&lt;/span&gt;item&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Sqliteopenhelper&apos;s method have methods create and upgrade,create is used when any table is first time created and upgrade method will called everytime whenever table&apos;s number of column is changed.&lt;/p&gt;\n    "],"comment":["\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Ndupza This isn&apos;t an actual problem of mine, just fed up writing the same answer/comment for the Nth time.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/101361/laalto&quot; title=&quot;145,165 reputation&quot; class=&quot;comment-user owner&quot;&gt;laalto&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment33132561_21881992&quot;&gt;&lt;span title=&quot;2014-02-19 13:35:27Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Feb 19, 2014 at 13:35&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Laalto //data migration in onUpgrade()// Can you please explain about this.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1882517/bcliks&quot; title=&quot;2,838 reputation&quot; class=&quot;comment-user&quot;&gt;bCliks&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment40417569_21881993&quot;&gt;&lt;span title=&quot;2014-09-14 14:29:46Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 14, 2014 at 14:29&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@bala Not in the scope of this question/answer. If you have a question, feel free to post it as a question.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/101361/laalto&quot; title=&quot;145,165 reputation&quot; class=&quot;comment-user owner&quot;&gt;laalto&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment40418584_21881993&quot;&gt;&lt;span title=&quot;2014-09-14 15:27:42Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 14, 2014 at 15:27&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Jaskey The version number is for your code i.e. what schema version the code expects to run against. If the file is older (from a previous version of your app), it needs to be upgraded.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/101361/laalto&quot; title=&quot;145,165 reputation&quot; class=&quot;comment-user owner&quot;&gt;laalto&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment41340098_21881993&quot;&gt;&lt;span title=&quot;2014-10-13 11:26:32Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 13, 2014 at 11:26&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;So, I need to hard code the DB VERSION in the SQLiteHelper each time I modify the schema, so that when the old app runs and get the db connection and find it is old, and then onUpgrade will be trgiigered instead of  onCreate, is this right?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2087628/jaskeylam&quot; title=&quot;14,493 reputation&quot; class=&quot;comment-user&quot;&gt;JaskeyLam&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment41340199_21881993&quot;&gt;&lt;span title=&quot;2014-10-13 11:30:02Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 13, 2014 at 11:30&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Thank you ! This make sense to me. Please verify if I understand well.So we need to do 1. every time we update the schema, modify the DB_VERSION variable(hard code). 2. In &lt;code&gt;onUpdate()&lt;/code&gt;, check every old version and do proper data migration . And then when a user update their app(they have old db files), &lt;code&gt;onUpgrade&lt;/code&gt; will be Triggered, and if the user is newly install, &lt;code&gt;onCreate()&lt;/code&gt; is triggered.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2087628/jaskeylam&quot; title=&quot;14,493 reputation&quot; class=&quot;comment-user&quot;&gt;JaskeyLam&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment41341050_21881993&quot;&gt;&lt;span title=&quot;2014-10-13 11:56:01Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 13, 2014 at 11:56&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I think you want your switch(newVersion) to be switch(oldVersion) instead. You may also want to verify that newVersion is 4 (and not 5, or 3; because your logic is assuming the new version should be 4).As it is, if the old version is 2 and new version is 5, you&apos;ll hit the case 4: and upgrade from 3 to 4 (which should probably not be expected behavior).&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/95999/joe-p&quot; title=&quot;463 reputation&quot; class=&quot;comment-user&quot;&gt;joe p&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment42417049_26916986&quot;&gt;&lt;span title=&quot;2014-11-14 18:19:29Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 14, 2014 at 18:19&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;right - typo.. but if new version is 5 -&amp;gt; then it will always throw IllegalStateException and developer will be fixing it by adding case 5..&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1172782/aun&quot; title=&quot;1,805 reputation&quot; class=&quot;comment-user&quot;&gt;Aun&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment42418014_26916986&quot;&gt;&lt;span title=&quot;2014-11-14 18:52:56Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 14, 2014 at 18:52&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;What if the user upgrades his app from version 2 to 3 only? In that case also, all the cases upto case 4 will run.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/246936/paramvir-singh&quot; title=&quot;2,314 reputation&quot; class=&quot;comment-user&quot;&gt;Paramvir Singh&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment45026163_26916986&quot;&gt;&lt;span title=&quot;2015-02-05 09:41:14Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Feb 5, 2015 at 9:41&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@param user cannot do that. He can upgrade 2 to latest (here 4) only.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/739331/mohammed-h&quot; title=&quot;6,578 reputation&quot; class=&quot;comment-user&quot;&gt;Mohammed H&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment45516211_26916986&quot;&gt;&lt;span title=&quot;2015-02-19 12:06:35Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Feb 19, 2015 at 12:06&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Could you please elaborate more your answer adding a little more description about the solution you provide?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/4579155/abarisone&quot; title=&quot;3,619 reputation&quot; class=&quot;comment-user&quot;&gt;abarisone&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment49779691_30868736&quot;&gt;&lt;span title=&quot;2015-06-16 13:35:27Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 16, 2015 at 13:35&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I have my own DB and using SQLiteAssetHelper class. So, I did create the DB by sql script before and the db was created. By using the SQLiteAssetHelper it couldn&apos;t copy the DB until uninstalling the app form the emulator or device, because it was a db with the same version.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/478162/behzad&quot; title=&quot;1,190 reputation&quot; class=&quot;comment-user&quot;&gt;Behzad&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment81007534_42618641&quot;&gt;&lt;span title=&quot;2017-10-31 08:07:26Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 31, 2017 at 8:07&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;onUpgrade method is called when the database version increases, not when the number of column is changed. Ref: &lt;a href=&quot;https://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade(android.database.sqlite.SQLiteDatabase&quot; rel=&quot;nofollow noreferrer&quot;&gt;developer.android.com/reference/android/database/sqlite/&lt;/a&gt;, int, int)&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1825443/roger-huang&quot; title=&quot;587 reputation&quot; class=&quot;comment-user&quot;&gt;Roger Huang&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment74297356_41399757&quot;&gt;&lt;span title=&quot;2017-04-26 03:01:09Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 26, 2017 at 3:01&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        "],"id":182,"title":"When does SQLiteOpenHelper onCreate() / onUpgrade() run?","content":"\n                \n&lt;p&gt;I have created my tables in my &lt;code&gt;SQLiteOpenHelper&lt;/code&gt; &lt;code&gt;onCreate()&lt;/code&gt; but receive&lt;/p&gt;\n\n&lt;pre class=&quot;lang-sql s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;SQLiteException: &lt;span class=&quot;hljs-keyword&quot;&gt;no&lt;/span&gt; such &lt;span class=&quot;hljs-keyword&quot;&gt;table&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;or&lt;/p&gt;\n\n&lt;pre class=&quot;lang-sql s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;SQLiteException: &lt;span class=&quot;hljs-keyword&quot;&gt;no&lt;/span&gt; such &lt;span class=&quot;hljs-keyword&quot;&gt;column&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;errors. Why?&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt;&lt;/p&gt;\n  \n  &lt;p&gt;(This is the amalgamated summary of tens of similar questions every week. Attempting to provide a &quot;canonical&quot; community wiki question/answer here so that all those questions can be directed to a good reference.)&lt;/p&gt;\n&lt;/blockquote&gt;\n    ","slug":"when-does-sqliteopenhelper-oncreate()-onupgrade()-run-1657384883864","postType":"QUESTION","createdAt":"2022-07-09T16:41:23.000Z","updatedAt":"2022-07-09T16:41:23.000Z","tags":[{"id":668,"name":"sqlexception","slug":"sqlexception","createdAt":"2022-07-09T16:41:23.000Z","updatedAt":"2022-07-09T16:41:23.000Z","Questions_Tags":{"questionId":182,"tagId":668}}]}]}},"__N_SSG":true}