<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/81-096e453de8a27667.js" defer=""></script><script src="/_next/static/chunks/pages/questions/tag/%5Bslug%5D-6802ea06aeddcbec.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_buildManifest.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5"></style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/tag/opengl#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="flex items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457">How do I compose a rotation matrix with human readable angles from scratch?</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/opengl">opengl</a></div></div><div class="mt-4 mb-6" style="height:100px;overflow:auto"><h4 class="font-semibold">Solution 1:</h4><div class="text-sm bg-green-100 text-neutral-600">
<p>So the question really is <strong>Understanding 4x4 homogenous transform matrices</strong></p>
<p>well without the math behind the only thing that left is geometric representation/meaning which is far better for human abstraction/understanding.</p>
<ol>
<li><p><strong>So what the 4x4 matrix is?</strong></p>
<p>It is representation of some Cartesian coordinate system and it is composed of:</p>
<ol>
<li><p><strong><code>3</code> basis vectors (one for each axis) red,green,blue</strong></p>
<p>So if the red,green,blue vectors are perpendicular to each other then the coordinate system is <strong>orthogonal</strong>. If they are also unit vectors then it is <strong>orthonormal</strong> (like for example unit matrix).</p>
</li>
<li><p><strong>origin point gray</strong></p>
</li>
<li><p><strong>projection and homogenous side (unmarked bottom rest of the matrix)</strong></p>
<p>This part is there only for enabling rotation and translation at once, therefore point used must be homogenous that means in form <code>(x,y,z,w=1)</code> for points and <code>(x,y,z,w=0)</code> for direction vectors. If it was just <code>(x,y,z)</code> then the matrix would be <code>3x3</code> and that is not enough for translation. I will not use any projections they are uneasy to explain geometrically.</p>
</li>
</ol>
<p>This layout is from <strong>OpenGL notation</strong> there are also transposed representation out there (vectors are rows not columns)</p>
<p>now how to transform any point to/from this coordinate system:</p>
<pre><code>g=M*l;
l=Inverse(M)*g;
</code></pre>
<p>where:</p>
<ul>
<li><code>M</code> is transform matrix</li>
<li><code>l</code> is <code>M</code> local coordinate system point (LCS)</li>
<li><code>g</code> is global coordinate system point (GCS)</li>
</ul>
<p>for the transposed version (<strong>DirectX</strong>) it is:</p>
<pre><code>l=M*g;
g=Inverse(M)*l;
</code></pre>
<p>That is because <strong>transposed orthogonal rotation matrix is also inverse of itself</strong></p>
<ul>
<li>for more info see <a href="https://stackoverflow.com/a/25216549/2521214">transform matrix anatomy</a> and <a href="https://stackoverflow.com/a/21100338/2521214">3D graphic pipeline</a></li>
</ul>
<p><img src="https://i.stack.imgur.com/rayCb.png" alt="OpenGL transform matrix"></p>
</li>
<li><p><strong>how to visualize it</strong></p>
<p>Yes you can draw the matrix numbers but they do not make sense at first look especially if the numbers are changing so draw the axises vectors as on image above. Where each axis is a line from <code>origin</code> to <code>origin + line_size*axis_vector</code></p>
</li>
<li><p><strong>how to construct it</strong></p>
<p>Just compute axis vectors and origin and put them inside matrix. To ensure orthogonality exploit <strong>cross product</strong> (but be careful with order of multiplicants to use the right direction) Here <a href="https://stackoverflow.com/a/41813188/2521214">example of getting 3 basis vectors from direction</a></p>
</li>
<li><p><strong>effects</strong></p>
<ul>
<li>rotation is done by rotating the axises so you can compute each axis by parametric circle equation ...</li>
<li>scaling is done by multiplying axises by scale factor</li>
<li>skewing is just using non perpendicular axises</li>
</ul>
</li>
<li><p><strong>rotation</strong></p>
<p>For most cases the incremental rotation is used. There are two types</p>
<ul>
<li><p><strong>local rotation</strong> <code>M'=M*rotation_matrix</code> it rotates around local coordinate axises like you will control plane or car or player ... Most engines/games do not use these and fake it with <strong>euler angles</strong> instead which is a cheap solution (have many quirks and problems) because most people who using OpenGL do not even know this is possible and rather stack list of <code>glRotate/glTranslate</code> calls...</p>
</li>
<li><p><strong>global rotation</strong> <code>M'=Inverse(Inverse(M)*rotation_matrix)</code> it rotates around global coordinate system axises.</p>
</li>
</ul>
<p>where <code>rotation_matrix</code> is any standard rotation transform matrix.</p>
<p>If you have different matrix layout (transposed) then the rotations local and global are computed the other way around ...</p>
<p>You can also compute your <code>rotation_matrix</code> from <code>3</code> angles like:</p>
<pre><code>rotation_matrix=rotation_around_x(ax)*rotation_around_y(ay)*rotation_around_z(az);
</code></pre>
<p>see <a href="http://en.wikipedia.org/wiki/Rotation_matrix" rel="noreferrer">Wiki rotation matrices</a> the 3D <code>Rx,Ry,Rz</code> from <code>Basic rotations</code> are what you need. As you can see they are just unit circle parametric equation really. The order of multiplication change how the angles converge to target position. This is called <strong>Euler angles</strong> and I do not use it (I integrate step changes instead which has no restrictions if done properly not to mention it is simpler).</p>
<p>Anyway if you need you can convert transform matrix into euler angles relatively easily see:</p>
<ul>
<li><a href="https://stackoverflow.com/a/56950130/2521214">Is there a way to calculate 3D rotation on X and Y axis from a 4x4 matrix</a></li>
</ul>
</li>
<li><p><strong>glRotate</strong></p>
<p>If you want <code>glRotate</code> which is rotation around arbitrary axis not by 3 angles then <a href="https://stackoverflow.com/a/64389606/2521214">There is workaround</a>:</p>
<ol>
<li>create transform matrix <code>N</code> for that axis</li>
<li>then transform your matrix <code>M</code> to it</li>
<li>rotate <code>N</code> by angle</li>
<li>then transform <code>M</code> back from <code>N</code> to global coordinates</li>
</ol>
<p>Or you can use <a href="https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula" rel="noreferrer">Rodrigues_rotation_formula</a> instead</p>
<p>To transform Matrix to/from Matrix in this case just transform axises as points and leave the origin as is but the origin of <code>N</code> <strong>must be (0,0,0)!!!</strong> or the vectors transformed must have <code>w=0</code> instead.</p>
</li>
<li><p><strong>usage</strong></p>
<p>Transformations are cumulative that means:</p>
<ul>
<li><code>p'=M1*M2*M3*M4*p;</code> is the same as <code>M=M1*M2*M3*M4; p'=M*p</code></li>
</ul>
<p>So if you have many points to transform then you precompute all transformations to single matrix and use just it. Do not need to multiply points by all subsequent matrices. OK now the concept:</p>
<p>you should have <code>3</code> coordinate systems:</p>
<ul>
<li>camera <code>C</code></li>
<li>world (usually unit matrix)</li>
<li>object <code>O</code> (each object have its own matrix)</li>
</ul>
<p>so if you have cube with <code>8</code> vertexes <code>p0,...,p7</code> then you have to perform transformation on each point from object local coordinates to camera local coordinates. Some gfx api do some of it so you apply only what you have to so you really need:</p>
<ul>
<li><code>p(i)'=inverse(C)*unit*M*p(i);</code></li>
</ul>
<p>the transforms are cumulative and unit matrix does not change anything so:</p>
<ul>
<li><code>Q=inverse(C)*M; p(i)'=Q*p(i);</code></li>
</ul>
<p>so before drawing compute <code>Q</code> for drawed object then take each point <code>p(i)</code> of the object and compute the transformed <code>p(i)'</code> and draw/use the transformed one ... The <code>p(i)'</code> is in local camera coordinate system (x,y of the screen) but there is no perspective there so before drawing you can also add any of the projection matrices and divide by <code>z</code> cordinate at the end ... The projection is also cumulative so it can be also inside <code>Q</code></p>
</li>
</ol>
<p><strong>[edit1] C++ example</strong></p>
<pre class="lang-cpp s-code-block"><code class="hljs language-cpp"><span class="hljs-comment">//$$---- Form CPP ----</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-comment">// apart from math.h include you can ignore this machine generated VCL related code</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vcl.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">pragma</span> hdrstop</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"win_main.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;math.h&gt;</span></span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-meta">#<span class="hljs-keyword">pragma</span> package(smart_init)</span>
<span class="hljs-meta">#<span class="hljs-keyword">pragma</span> resource <span class="hljs-string">"*.dfm"</span></span>
TMain *Main; <span class="hljs-comment">// pointer to main window ...</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-comment">// Here is the important stuff some math first</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-type">const</span> <span class="hljs-type">double</span> deg=M_PI/<span class="hljs-number">180.0</span>;
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y)</span></span>;
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_mul</span>       <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span></span>; <span class="hljs-comment">// c[16] = a[16] * b[16]</span>
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_mul_vector</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span></span>; <span class="hljs-comment">// c[ 4] = a[16] * b[ 4]</span>
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_subdet</span>    <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span></span>;           <span class="hljs-comment">// c[16] = all subdets of a[16]</span>
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_subdet</span>   <span class="hljs-params">(          <span class="hljs-type">double</span> *a,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> s)</span></span>;<span class="hljs-comment">//      = subdet(r,s) of a[16]</span>
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_det</span>      <span class="hljs-params">(          <span class="hljs-type">double</span> *a)</span></span>;           <span class="hljs-comment">//       = det of a[16]</span>
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_det</span>      <span class="hljs-params">(          <span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span></span>; <span class="hljs-comment">//       = det of a[16] and subdets b[16]</span>
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_inv</span>       <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span></span>;           <span class="hljs-comment">// c[16] = a[16] ^ -1</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y)</span>
        </span>{
        <span class="hljs-keyword">if</span> (!y) <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
        <span class="hljs-keyword">return</span> x/y;
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_mul</span>       <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span>
        </span>{
        <span class="hljs-type">double</span> q[<span class="hljs-number">16</span>];
        q[ <span class="hljs-number">0</span>]=(a[ <span class="hljs-number">0</span>]*b[ <span class="hljs-number">0</span>])+(a[ <span class="hljs-number">1</span>]*b[ <span class="hljs-number">4</span>])+(a[ <span class="hljs-number">2</span>]*b[ <span class="hljs-number">8</span>])+(a[ <span class="hljs-number">3</span>]*b[<span class="hljs-number">12</span>]);
        q[ <span class="hljs-number">1</span>]=(a[ <span class="hljs-number">0</span>]*b[ <span class="hljs-number">1</span>])+(a[ <span class="hljs-number">1</span>]*b[ <span class="hljs-number">5</span>])+(a[ <span class="hljs-number">2</span>]*b[ <span class="hljs-number">9</span>])+(a[ <span class="hljs-number">3</span>]*b[<span class="hljs-number">13</span>]);
        q[ <span class="hljs-number">2</span>]=(a[ <span class="hljs-number">0</span>]*b[ <span class="hljs-number">2</span>])+(a[ <span class="hljs-number">1</span>]*b[ <span class="hljs-number">6</span>])+(a[ <span class="hljs-number">2</span>]*b[<span class="hljs-number">10</span>])+(a[ <span class="hljs-number">3</span>]*b[<span class="hljs-number">14</span>]);
        q[ <span class="hljs-number">3</span>]=(a[ <span class="hljs-number">0</span>]*b[ <span class="hljs-number">3</span>])+(a[ <span class="hljs-number">1</span>]*b[ <span class="hljs-number">7</span>])+(a[ <span class="hljs-number">2</span>]*b[<span class="hljs-number">11</span>])+(a[ <span class="hljs-number">3</span>]*b[<span class="hljs-number">15</span>]);
        q[ <span class="hljs-number">4</span>]=(a[ <span class="hljs-number">4</span>]*b[ <span class="hljs-number">0</span>])+(a[ <span class="hljs-number">5</span>]*b[ <span class="hljs-number">4</span>])+(a[ <span class="hljs-number">6</span>]*b[ <span class="hljs-number">8</span>])+(a[ <span class="hljs-number">7</span>]*b[<span class="hljs-number">12</span>]);
        q[ <span class="hljs-number">5</span>]=(a[ <span class="hljs-number">4</span>]*b[ <span class="hljs-number">1</span>])+(a[ <span class="hljs-number">5</span>]*b[ <span class="hljs-number">5</span>])+(a[ <span class="hljs-number">6</span>]*b[ <span class="hljs-number">9</span>])+(a[ <span class="hljs-number">7</span>]*b[<span class="hljs-number">13</span>]);
        q[ <span class="hljs-number">6</span>]=(a[ <span class="hljs-number">4</span>]*b[ <span class="hljs-number">2</span>])+(a[ <span class="hljs-number">5</span>]*b[ <span class="hljs-number">6</span>])+(a[ <span class="hljs-number">6</span>]*b[<span class="hljs-number">10</span>])+(a[ <span class="hljs-number">7</span>]*b[<span class="hljs-number">14</span>]);
        q[ <span class="hljs-number">7</span>]=(a[ <span class="hljs-number">4</span>]*b[ <span class="hljs-number">3</span>])+(a[ <span class="hljs-number">5</span>]*b[ <span class="hljs-number">7</span>])+(a[ <span class="hljs-number">6</span>]*b[<span class="hljs-number">11</span>])+(a[ <span class="hljs-number">7</span>]*b[<span class="hljs-number">15</span>]);
        q[ <span class="hljs-number">8</span>]=(a[ <span class="hljs-number">8</span>]*b[ <span class="hljs-number">0</span>])+(a[ <span class="hljs-number">9</span>]*b[ <span class="hljs-number">4</span>])+(a[<span class="hljs-number">10</span>]*b[ <span class="hljs-number">8</span>])+(a[<span class="hljs-number">11</span>]*b[<span class="hljs-number">12</span>]);
        q[ <span class="hljs-number">9</span>]=(a[ <span class="hljs-number">8</span>]*b[ <span class="hljs-number">1</span>])+(a[ <span class="hljs-number">9</span>]*b[ <span class="hljs-number">5</span>])+(a[<span class="hljs-number">10</span>]*b[ <span class="hljs-number">9</span>])+(a[<span class="hljs-number">11</span>]*b[<span class="hljs-number">13</span>]);
        q[<span class="hljs-number">10</span>]=(a[ <span class="hljs-number">8</span>]*b[ <span class="hljs-number">2</span>])+(a[ <span class="hljs-number">9</span>]*b[ <span class="hljs-number">6</span>])+(a[<span class="hljs-number">10</span>]*b[<span class="hljs-number">10</span>])+(a[<span class="hljs-number">11</span>]*b[<span class="hljs-number">14</span>]);
        q[<span class="hljs-number">11</span>]=(a[ <span class="hljs-number">8</span>]*b[ <span class="hljs-number">3</span>])+(a[ <span class="hljs-number">9</span>]*b[ <span class="hljs-number">7</span>])+(a[<span class="hljs-number">10</span>]*b[<span class="hljs-number">11</span>])+(a[<span class="hljs-number">11</span>]*b[<span class="hljs-number">15</span>]);
        q[<span class="hljs-number">12</span>]=(a[<span class="hljs-number">12</span>]*b[ <span class="hljs-number">0</span>])+(a[<span class="hljs-number">13</span>]*b[ <span class="hljs-number">4</span>])+(a[<span class="hljs-number">14</span>]*b[ <span class="hljs-number">8</span>])+(a[<span class="hljs-number">15</span>]*b[<span class="hljs-number">12</span>]);
        q[<span class="hljs-number">13</span>]=(a[<span class="hljs-number">12</span>]*b[ <span class="hljs-number">1</span>])+(a[<span class="hljs-number">13</span>]*b[ <span class="hljs-number">5</span>])+(a[<span class="hljs-number">14</span>]*b[ <span class="hljs-number">9</span>])+(a[<span class="hljs-number">15</span>]*b[<span class="hljs-number">13</span>]);
        q[<span class="hljs-number">14</span>]=(a[<span class="hljs-number">12</span>]*b[ <span class="hljs-number">2</span>])+(a[<span class="hljs-number">13</span>]*b[ <span class="hljs-number">6</span>])+(a[<span class="hljs-number">14</span>]*b[<span class="hljs-number">10</span>])+(a[<span class="hljs-number">15</span>]*b[<span class="hljs-number">14</span>]);
        q[<span class="hljs-number">15</span>]=(a[<span class="hljs-number">12</span>]*b[ <span class="hljs-number">3</span>])+(a[<span class="hljs-number">13</span>]*b[ <span class="hljs-number">7</span>])+(a[<span class="hljs-number">14</span>]*b[<span class="hljs-number">11</span>])+(a[<span class="hljs-number">15</span>]*b[<span class="hljs-number">15</span>]);
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">16</span>;i++) c[i]=q[i];
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_mul_vector</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span>
        </span>{
        <span class="hljs-type">double</span> q[<span class="hljs-number">3</span>];
        q[<span class="hljs-number">0</span>]=(a[ <span class="hljs-number">0</span>]*b[<span class="hljs-number">0</span>])+(a[ <span class="hljs-number">1</span>]*b[<span class="hljs-number">1</span>])+(a[ <span class="hljs-number">2</span>]*b[<span class="hljs-number">2</span>])+(a[ <span class="hljs-number">3</span>]);
        q[<span class="hljs-number">1</span>]=(a[ <span class="hljs-number">4</span>]*b[<span class="hljs-number">0</span>])+(a[ <span class="hljs-number">5</span>]*b[<span class="hljs-number">1</span>])+(a[ <span class="hljs-number">6</span>]*b[<span class="hljs-number">2</span>])+(a[ <span class="hljs-number">7</span>]);
        q[<span class="hljs-number">2</span>]=(a[ <span class="hljs-number">8</span>]*b[<span class="hljs-number">0</span>])+(a[ <span class="hljs-number">9</span>]*b[<span class="hljs-number">1</span>])+(a[<span class="hljs-number">10</span>]*b[<span class="hljs-number">2</span>])+(a[<span class="hljs-number">11</span>]);
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=q[i];
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_subdet</span>    <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>
        </span>{
        <span class="hljs-type">double</span>   q[<span class="hljs-number">16</span>];
        <span class="hljs-type">int</span>     i,j;
        <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++)
         <span class="hljs-keyword">for</span> (j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">4</span>;j++)
          q[j+(i&lt;&lt;<span class="hljs-number">2</span>)]=<span class="hljs-built_in">matrix_subdet</span>(a,i,j);
        <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">16</span>;i++) c[i]=q[i];
        }
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_subdet</span>    <span class="hljs-params">(         <span class="hljs-type">double</span> *a,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> s)</span>
        </span>{
        <span class="hljs-type">double</span>   c,q[<span class="hljs-number">9</span>];
        <span class="hljs-type">int</span>     i,j,k;
        k=<span class="hljs-number">0</span>;                            <span class="hljs-comment">// q = sub matrix</span>
        <span class="hljs-keyword">for</span> (j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">4</span>;j++)
         <span class="hljs-keyword">if</span> (j!=s)
          <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++)
           <span class="hljs-keyword">if</span> (i!=r)
                {
                q[k]=a[i+(j&lt;&lt;<span class="hljs-number">2</span>)];
                k++;
                }
        c=<span class="hljs-number">0</span>;
        c+=q[<span class="hljs-number">0</span>]*q[<span class="hljs-number">4</span>]*q[<span class="hljs-number">8</span>];
        c+=q[<span class="hljs-number">1</span>]*q[<span class="hljs-number">5</span>]*q[<span class="hljs-number">6</span>];
        c+=q[<span class="hljs-number">2</span>]*q[<span class="hljs-number">3</span>]*q[<span class="hljs-number">7</span>];
        c-=q[<span class="hljs-number">0</span>]*q[<span class="hljs-number">5</span>]*q[<span class="hljs-number">7</span>];
        c-=q[<span class="hljs-number">1</span>]*q[<span class="hljs-number">3</span>]*q[<span class="hljs-number">8</span>];
        c-=q[<span class="hljs-number">2</span>]*q[<span class="hljs-number">4</span>]*q[<span class="hljs-number">6</span>];
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">int</span>((r+s)&amp;<span class="hljs-number">1</span>)) c=-c;       <span class="hljs-comment">// add signum</span>
        <span class="hljs-keyword">return</span> c;
        }
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_det</span>       <span class="hljs-params">(         <span class="hljs-type">double</span> *a)</span>
        </span>{
        <span class="hljs-type">double</span> c=<span class="hljs-number">0</span>;
        c+=a[ <span class="hljs-number">0</span>]*<span class="hljs-built_in">matrix_subdet</span>(a,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
        c+=a[ <span class="hljs-number">4</span>]*<span class="hljs-built_in">matrix_subdet</span>(a,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
        c+=a[ <span class="hljs-number">8</span>]*<span class="hljs-built_in">matrix_subdet</span>(a,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>);
        c+=a[<span class="hljs-number">12</span>]*<span class="hljs-built_in">matrix_subdet</span>(a,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>);
        <span class="hljs-keyword">return</span> c;
        }
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_det</span>       <span class="hljs-params">(         <span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span>
        </span>{
        <span class="hljs-type">double</span> c=<span class="hljs-number">0</span>;
        c+=a[ <span class="hljs-number">0</span>]*b[ <span class="hljs-number">0</span>];
        c+=a[ <span class="hljs-number">4</span>]*b[ <span class="hljs-number">1</span>];
        c+=a[ <span class="hljs-number">8</span>]*b[ <span class="hljs-number">2</span>];
        c+=a[<span class="hljs-number">12</span>]*b[ <span class="hljs-number">3</span>];
        <span class="hljs-keyword">return</span> c;
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_inv</span>       <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>
        </span>{
        <span class="hljs-type">double</span>   d[<span class="hljs-number">16</span>],D;
        <span class="hljs-built_in">matrix_subdet</span>(d,a);
        D=<span class="hljs-built_in">matrix_det</span>(a,d);
        <span class="hljs-keyword">if</span> (D) D=<span class="hljs-number">1.0</span>/D;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">16</span>;i++) c[i]=d[i]*D;
        }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-comment">// now the object representation</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> pnts=<span class="hljs-number">8</span>;
<span class="hljs-type">double</span> pnt[pnts*<span class="hljs-number">3</span>]=     <span class="hljs-comment">// Vertexes for 100x100x100 cube centered at (0,0,0)</span>
    {
    <span class="hljs-number">-100.0</span>,<span class="hljs-number">-100.0</span>,<span class="hljs-number">-100.0</span>,
    <span class="hljs-number">-100.0</span>,+<span class="hljs-number">100.0</span>,<span class="hljs-number">-100.0</span>,
    +<span class="hljs-number">100.0</span>,+<span class="hljs-number">100.0</span>,<span class="hljs-number">-100.0</span>,
    +<span class="hljs-number">100.0</span>,<span class="hljs-number">-100.0</span>,<span class="hljs-number">-100.0</span>,
    <span class="hljs-number">-100.0</span>,<span class="hljs-number">-100.0</span>,+<span class="hljs-number">100.0</span>,
    <span class="hljs-number">-100.0</span>,+<span class="hljs-number">100.0</span>,+<span class="hljs-number">100.0</span>,
    +<span class="hljs-number">100.0</span>,+<span class="hljs-number">100.0</span>,+<span class="hljs-number">100.0</span>,
    +<span class="hljs-number">100.0</span>,<span class="hljs-number">-100.0</span>,+<span class="hljs-number">100.0</span>,
    };
<span class="hljs-type">const</span> <span class="hljs-type">int</span> facs=<span class="hljs-number">6</span>;
<span class="hljs-type">int</span> fac[facs*<span class="hljs-number">4</span>]=        <span class="hljs-comment">// faces (index of point used) no winding rule</span>
    {
    <span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,
    <span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,
    <span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,
    <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">6</span>,<span class="hljs-number">5</span>,
    <span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>,
    <span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>,
    };
<span class="hljs-type">double</span> rep[<span class="hljs-number">16</span>]=        <span class="hljs-comment">// 4x4 transform matrix of object (unit from start) at (0,0,+100)</span>
    {
    <span class="hljs-number">1.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,  <span class="hljs-number">0.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,<span class="hljs-number">0.0</span>,  <span class="hljs-number">0.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,<span class="hljs-number">100.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,
    };
<span class="hljs-type">double</span> eye[<span class="hljs-number">16</span>]=        <span class="hljs-comment">// 4x4 transform matrix of camera at (0,0,-150)</span>
    {
    <span class="hljs-number">1.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,   <span class="hljs-number">0.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,<span class="hljs-number">0.0</span>,   <span class="hljs-number">0.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,<span class="hljs-number">-150.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,
    };
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-comment">// this is how to draw it</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">obj</span><span class="hljs-params">(<span class="hljs-type">double</span> *pnt,<span class="hljs-type">int</span> pnts,<span class="hljs-type">int</span> *fac,<span class="hljs-type">int</span> facs,<span class="hljs-type">double</span> *rep,<span class="hljs-type">double</span> *ieye)</span>
    </span>{
    <span class="hljs-comment">// variables for drawing</span>
    <span class="hljs-type">int</span> i;
    <span class="hljs-type">double</span> p0[<span class="hljs-number">3</span>],p1[<span class="hljs-number">3</span>],p2[<span class="hljs-number">3</span>],p3[<span class="hljs-number">3</span>],m[<span class="hljs-number">16</span>],d;
    <span class="hljs-comment">// gfx api variables (change to your stuff) Main is the main form of this application</span>
    TCanvas *scr=Main-&gt;bmp-&gt;Canvas;
    <span class="hljs-type">double</span> xs2=Main-&gt;ClientWidth/<span class="hljs-number">2</span>,ys2=Main-&gt;ClientHeight/<span class="hljs-number">2</span>;
    <span class="hljs-type">double</span> v=xs2*<span class="hljs-built_in">tan</span>(<span class="hljs-number">30.0</span>*deg); <span class="hljs-comment">// 60 degree viewing angle perspective projection</span>

    <span class="hljs-built_in">matrix_mul</span>(m,ieye,rep);             <span class="hljs-comment">// cumulate all needed transforms</span>

    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;facs*<span class="hljs-number">4</span>;)                 <span class="hljs-comment">// go through all faces</span>
        {
        <span class="hljs-comment">// convert all points of face</span>
        <span class="hljs-built_in">matrix_mul_vector</span>(p0,m,&amp;pnt[fac[i]*<span class="hljs-number">3</span>]); i++;
        <span class="hljs-built_in">matrix_mul_vector</span>(p1,m,&amp;pnt[fac[i]*<span class="hljs-number">3</span>]); i++;
        <span class="hljs-built_in">matrix_mul_vector</span>(p2,m,&amp;pnt[fac[i]*<span class="hljs-number">3</span>]); i++;
        <span class="hljs-built_in">matrix_mul_vector</span>(p3,m,&amp;pnt[fac[i]*<span class="hljs-number">3</span>]); i++;
        <span class="hljs-comment">// here goes perspective divide by z coordinate if needed</span>
        d=<span class="hljs-built_in">divide</span>(v,p0[<span class="hljs-number">2</span>]); p0[<span class="hljs-number">0</span>]*=d; p0[<span class="hljs-number">1</span>]*=d;
        d=<span class="hljs-built_in">divide</span>(v,p1[<span class="hljs-number">2</span>]); p1[<span class="hljs-number">0</span>]*=d; p1[<span class="hljs-number">1</span>]*=d;
        d=<span class="hljs-built_in">divide</span>(v,p2[<span class="hljs-number">2</span>]); p2[<span class="hljs-number">0</span>]*=d; p2[<span class="hljs-number">1</span>]*=d;
        d=<span class="hljs-built_in">divide</span>(v,p3[<span class="hljs-number">2</span>]); p3[<span class="hljs-number">0</span>]*=d; p3[<span class="hljs-number">1</span>]*=d;
        <span class="hljs-comment">// here is viewport transform (just translate (0,0) to middle of screen in this case</span>
        p0[<span class="hljs-number">0</span>]+=xs2; p0[<span class="hljs-number">1</span>]+=ys2;
        p1[<span class="hljs-number">0</span>]+=xs2; p1[<span class="hljs-number">1</span>]+=ys2;
        p2[<span class="hljs-number">0</span>]+=xs2; p2[<span class="hljs-number">1</span>]+=ys2;
        p3[<span class="hljs-number">0</span>]+=xs2; p3[<span class="hljs-number">1</span>]+=ys2;
        <span class="hljs-comment">// draw quad</span>
        <span class="hljs-comment">// I use VCL GDI TCanvas you use what you have ...</span>
        <span class="hljs-comment">// and wireframe only to keep this simple (no Z buffer,winding culling,...)</span>
        scr-&gt;Pen-&gt;Color=clAqua;     <span class="hljs-comment">// perimeter wireframe</span>
        scr-&gt;<span class="hljs-built_in">MoveTo</span>(p0[<span class="hljs-number">0</span>],p0[<span class="hljs-number">1</span>]);
        scr-&gt;<span class="hljs-built_in">LineTo</span>(p1[<span class="hljs-number">0</span>],p1[<span class="hljs-number">1</span>]);
        scr-&gt;<span class="hljs-built_in">LineTo</span>(p2[<span class="hljs-number">0</span>],p2[<span class="hljs-number">1</span>]);
        scr-&gt;<span class="hljs-built_in">LineTo</span>(p3[<span class="hljs-number">0</span>],p3[<span class="hljs-number">1</span>]);
        scr-&gt;<span class="hljs-built_in">LineTo</span>(p0[<span class="hljs-number">0</span>],p0[<span class="hljs-number">1</span>]);
<span class="hljs-comment">//      scr-&gt;Pen-&gt;Color=clBlue;     // face cross to visualy check if I correctly generate the fac[]</span>
<span class="hljs-comment">//      scr-&gt;MoveTo(p0[0],p0[1]);</span>
<span class="hljs-comment">//      scr-&gt;LineTo(p2[0],p2[1]);</span>
<span class="hljs-comment">//      scr-&gt;MoveTo(p1[0],p1[1]);</span>
<span class="hljs-comment">//      scr-&gt;LineTo(p3[0],p3[1]);</span>
        }
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">TMain::draw</span><span class="hljs-params">()</span>
    </span>{
    <span class="hljs-keyword">if</span> (!_redraw) <span class="hljs-keyword">return</span>;
    bmp-&gt;Canvas-&gt;Brush-&gt;Color=clBlack;
    bmp-&gt;Canvas-&gt;<span class="hljs-built_in">FillRect</span>(<span class="hljs-built_in">TRect</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,xs,ys));

    <span class="hljs-comment">// compute inverse of camera need to compute just once for all objects</span>
    <span class="hljs-type">double</span> ieye[<span class="hljs-number">16</span>];
    <span class="hljs-built_in">matrix_inv</span>(ieye,eye);
    <span class="hljs-comment">// draw all objects</span>
    <span class="hljs-built_in">obj</span>(pnt,pnts,fac,facs,rep,ieye);

    Main-&gt;Canvas-&gt;<span class="hljs-built_in">Draw</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,bmp);
    _redraw=<span class="hljs-literal">false</span>;
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function">__fastcall <span class="hljs-title">TMain::TMain</span><span class="hljs-params">(TComponent* Owner)</span> : TForm(Owner)
    {</span>
    <span class="hljs-comment">// window constructor you can ignore this ... (just create a backbuffer bitmap here)</span>
    bmp=<span class="hljs-keyword">new</span> Graphics::TBitmap;
    bmp-&gt;HandleType=bmDIB;
    bmp-&gt;PixelFormat=pf32bit;
    pyx=<span class="hljs-literal">NULL</span>;
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> __fastcall <span class="hljs-title">TMain::FormDestroy</span><span class="hljs-params">(TObject *Sender)</span>
    </span>{
    <span class="hljs-comment">// window destructor release memory ... also ignoe this</span>
    <span class="hljs-keyword">if</span> (pyx) <span class="hljs-keyword">delete</span> pyx;
    <span class="hljs-keyword">delete</span> bmp;
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> __fastcall <span class="hljs-title">TMain::FormResize</span><span class="hljs-params">(TObject *Sender)</span>
    </span>{
    <span class="hljs-comment">// on resize event ... just resize/redraw backbuffer also can ignore this</span>
    xs=ClientWidth;  xs2=xs&gt;&gt;<span class="hljs-number">1</span>;
    ys=ClientHeight; ys2=ys&gt;&gt;<span class="hljs-number">1</span>;
    bmp-&gt;Width=xs;
    bmp-&gt;Height=ys;
    <span class="hljs-keyword">if</span> (pyx) <span class="hljs-keyword">delete</span> pyx;
    pyx=<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>*[ys];
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y=<span class="hljs-number">0</span>;y&lt;ys;y++) pyx[y]=(<span class="hljs-type">int</span>*) bmp-&gt;ScanLine[y];
    _redraw=<span class="hljs-literal">true</span>;
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> __fastcall <span class="hljs-title">TMain::FormPaint</span><span class="hljs-params">(TObject *Sender)</span>
    </span>{
    <span class="hljs-comment">// repaint event can ignore</span>
    _redraw=<span class="hljs-literal">true</span>;
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> __fastcall <span class="hljs-title">TMain::tim_redrawTimer</span><span class="hljs-params">(TObject *Sender)</span>
    </span>{
    <span class="hljs-comment">// timer event to animate the cube ...</span>
    _redraw=<span class="hljs-literal">true</span>;

    <span class="hljs-comment">// rotate the object to see it in motion</span>
    <span class="hljs-type">double</span> ang,c,s;

    ang=<span class="hljs-number">5.0</span>*deg; c=<span class="hljs-built_in">cos</span>(ang); s=<span class="hljs-built_in">sin</span>(ang);    <span class="hljs-comment">// rotate baround z by 5 degrees per timer step</span>
    <span class="hljs-type">double</span> rz[<span class="hljs-number">16</span>]= { c, s, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
                    -s, c, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
                     <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>,
                     <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> };

    ang=<span class="hljs-number">1.0</span>*deg; c=<span class="hljs-built_in">cos</span>(ang); s=<span class="hljs-built_in">sin</span>(ang);    <span class="hljs-comment">// rotate baround x by 1 degrees per timer step</span>
    <span class="hljs-type">double</span> rx[<span class="hljs-number">16</span>]= { <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
                     <span class="hljs-number">0</span>, c, s, <span class="hljs-number">0</span>,
                     <span class="hljs-number">0</span>,-s, c, <span class="hljs-number">0</span>,
                     <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> };
    <span class="hljs-built_in">matrix_mul</span>(rep,rep,rz);
    <span class="hljs-built_in">matrix_mul</span>(rep,rep,rx);

    <span class="hljs-built_in">draw</span>();
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
</code></pre>
<p>here is how it looks like:</p>
<p><img src="https://i.stack.imgur.com/lgfsw.png" alt="cube example"></p>
<p>And GIF animation with back face culling:</p>
<p><a href="https://i.stack.imgur.com/FGVUb.gif" rel="noreferrer"><img src="https://i.stack.imgur.com/FGVUb.gif" alt="animation"></a></p>
<p><strong>[notes]</strong></p>
<p>If you have more questions then comment me ...</p>
<p><strong>[Edit2] basic 3D vector operations often needed</strong></p>
<p>If you do not know how to compute vector operations like cross/dot products or absolute value see:</p>
<pre class="lang-cpp s-code-block"><code class="hljs language-cpp"><span class="hljs-comment">// cross product: W = U x V</span>
W.x=(U.y*V.z)-(U.z*V.y)
W.y=(U.z*V.x)-(U.x*V.z)
W.z=(U.x*V.y)-(U.y*V.x)
<span class="hljs-comment">// dot product: a = (U.V)</span>
a=U.x*V.x+U.y*V.y+U.z*V.z
<span class="hljs-comment">// abs of vector a = |U|</span>
a=<span class="hljs-built_in">sqrt</span>((U.x*U.x)+(U.y*U.y)+(U.z*U.z))
</code></pre>
<p>here my C++ vector math:</p>
<pre class="lang-cpp s-code-block"><code class="hljs language-cpp"><span class="hljs-type">static</span> <span class="hljs-type">double</span> vector_tmp[<span class="hljs-number">3</span>];
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y)</span> </span>{ <span class="hljs-keyword">if</span> ((y&gt;=<span class="hljs-number">-1e-30</span>)&amp;&amp;(y&lt;=+<span class="hljs-number">1e-30</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>; <span class="hljs-keyword">return</span> x/y; }
<span class="hljs-function"><span class="hljs-type">double</span>* <span class="hljs-title">vector_ld</span><span class="hljs-params">(<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y,<span class="hljs-type">double</span> z)</span>          </span>{ <span class="hljs-type">double</span> *p=vector_tmp; p[<span class="hljs-number">0</span>]=x; p[<span class="hljs-number">1</span>]=y; p[<span class="hljs-number">2</span>]=z; <span class="hljs-keyword">return</span> p;}
<span class="hljs-function"><span class="hljs-type">double</span>* <span class="hljs-title">vector_ld</span><span class="hljs-params">(<span class="hljs-type">double</span> *p,<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y,<span class="hljs-type">double</span> z)</span> </span>{                      p[<span class="hljs-number">0</span>]=x; p[<span class="hljs-number">1</span>]=y; p[<span class="hljs-number">2</span>]=z; <span class="hljs-keyword">return</span> p;}
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_copy</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>         </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=a[i];       }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_abs</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>          </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=<span class="hljs-built_in">fabs</span>(a[i]); }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_one</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>
        </span>{
        <span class="hljs-type">double</span> l=<span class="hljs-built_in">divide</span>(<span class="hljs-number">1.0</span>,<span class="hljs-built_in">sqrt</span>((a[<span class="hljs-number">0</span>]*a[<span class="hljs-number">0</span>])+(a[<span class="hljs-number">1</span>]*a[<span class="hljs-number">1</span>])+(a[<span class="hljs-number">2</span>]*a[<span class="hljs-number">2</span>])));
        c[<span class="hljs-number">0</span>]=a[<span class="hljs-number">0</span>]*l;
        c[<span class="hljs-number">1</span>]=a[<span class="hljs-number">1</span>]*l;
        c[<span class="hljs-number">2</span>]=a[<span class="hljs-number">2</span>]*l;
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_len</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> l)</span>
        </span>{
        l=<span class="hljs-built_in">divide</span>(l,<span class="hljs-built_in">sqrt</span>((a[<span class="hljs-number">0</span>]*a[<span class="hljs-number">0</span>])+(a[<span class="hljs-number">1</span>]*a[<span class="hljs-number">1</span>])+(a[<span class="hljs-number">2</span>]*a[<span class="hljs-number">2</span>])));
        c[<span class="hljs-number">0</span>]=a[<span class="hljs-number">0</span>]*l;
        c[<span class="hljs-number">1</span>]=a[<span class="hljs-number">1</span>]*l;
        c[<span class="hljs-number">2</span>]=a[<span class="hljs-number">2</span>]*l;
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_neg</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>          </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=-a[i];      }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_add</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span> </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=a[i]+b[i]; }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_sub</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span> </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=a[i]-b[i]; }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_mul</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span> <span class="hljs-comment">// cross</span>
        </span>{
        <span class="hljs-type">double</span>   q[<span class="hljs-number">3</span>];
        q[<span class="hljs-number">0</span>]=(a[<span class="hljs-number">1</span>]*b[<span class="hljs-number">2</span>])-(a[<span class="hljs-number">2</span>]*b[<span class="hljs-number">1</span>]);
        q[<span class="hljs-number">1</span>]=(a[<span class="hljs-number">2</span>]*b[<span class="hljs-number">0</span>])-(a[<span class="hljs-number">0</span>]*b[<span class="hljs-number">2</span>]);
        q[<span class="hljs-number">2</span>]=(a[<span class="hljs-number">0</span>]*b[<span class="hljs-number">1</span>])-(a[<span class="hljs-number">1</span>]*b[<span class="hljs-number">0</span>]);
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=q[i];
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_mul</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span>  b)</span> </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=a[i]*b; }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_mul</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span>  a,<span class="hljs-type">double</span> *b)</span> </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=a*b[i]; }
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">vector_mul</span><span class="hljs-params">(         <span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span> </span>{ <span class="hljs-type">double</span> c=<span class="hljs-number">0</span>; <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c+=a[i]*b[i]; <span class="hljs-keyword">return</span> c; } <span class="hljs-comment">// dot</span>
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">vector_len</span><span class="hljs-params">(<span class="hljs-type">double</span> *a)</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrt</span>((a[<span class="hljs-number">0</span>]*a[<span class="hljs-number">0</span>])+(a[<span class="hljs-number">1</span>]*a[<span class="hljs-number">1</span>])+(a[<span class="hljs-number">2</span>]*a[<span class="hljs-number">2</span>])); }
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">vector_len2</span><span class="hljs-params">(<span class="hljs-type">double</span> *a)</span> </span>{ <span class="hljs-keyword">return</span> (a[<span class="hljs-number">0</span>]*a[<span class="hljs-number">0</span>])+(a[<span class="hljs-number">1</span>]*a[<span class="hljs-number">1</span>])+(a[<span class="hljs-number">2</span>]*a[<span class="hljs-number">2</span>]); }
</code></pre>
<p><strong>[Edit3] local rotations for camera and object control via keyboard</strong></p>
<p>As this has been asked a lot lately here some example answers of mine with demos:</p>
<ul>
<li><a href="https://stackoverflow.com/a/40171880/2521214">stationary camera view control (partial pseudo inverse matrix)</a></li>
<li><a href="https://stackoverflow.com/a/40104549/2521214">camera and player control (inverse matrix)</a></li>
<li><a href="https://stackoverflow.com/a/42293434/2521214">How to preserve accuracy with cumulative transforms over time (full pseudo inverse matrix)</a></li>
<li><a href="https://stackoverflow.com/a/52801501/2521214">rotundus style simple OpenGL/C++/VCL player control example</a></li>
</ul>
    </div></div><div><div class="flex items-center justify-between text-slate-500"><div class="flex space-x-4 md:space-x-8"><div class="flex cursor-pointer items-center transition hover:text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" class="mr-1.5 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"></path></svg><span>4</span></div></div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"count":1,"rows":[{"answer":["\n\u0026lt;p\u0026gt;So the question really is \u0026lt;strong\u0026gt;Understanding 4x4 homogenous transform matrices\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;well without the math behind the only thing that left is geometric representation/meaning which is far better for human abstraction/understanding.\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;So what the 4x4 matrix is?\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;It is representation of some Cartesian coordinate system and it is composed of:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;3\u0026lt;/code\u0026gt; basis vectors (one for each axis) red,green,blue\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So if the red,green,blue vectors are perpendicular to each other then the coordinate system is \u0026lt;strong\u0026gt;orthogonal\u0026lt;/strong\u0026gt;. If they are also unit vectors then it is \u0026lt;strong\u0026gt;orthonormal\u0026lt;/strong\u0026gt; (like for example unit matrix).\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;origin point gray\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;projection and homogenous side (unmarked bottom rest of the matrix)\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This part is there only for enabling rotation and translation at once, therefore point used must be homogenous that means in form \u0026lt;code\u0026gt;(x,y,z,w=1)\u0026lt;/code\u0026gt; for points and \u0026lt;code\u0026gt;(x,y,z,w=0)\u0026lt;/code\u0026gt; for direction vectors. If it was just \u0026lt;code\u0026gt;(x,y,z)\u0026lt;/code\u0026gt; then the matrix would be \u0026lt;code\u0026gt;3x3\u0026lt;/code\u0026gt; and that is not enough for translation. I will not use any projections they are uneasy to explain geometrically.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;This layout is from \u0026lt;strong\u0026gt;OpenGL notation\u0026lt;/strong\u0026gt; there are also transposed representation out there (vectors are rows not columns)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;now how to transform any point to/from this coordinate system:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;g=M*l;\nl=Inverse(M)*g;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;where:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;M\u0026lt;/code\u0026gt; is transform matrix\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;l\u0026lt;/code\u0026gt; is \u0026lt;code\u0026gt;M\u0026lt;/code\u0026gt; local coordinate system point (LCS)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;g\u0026lt;/code\u0026gt; is global coordinate system point (GCS)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;for the transposed version (\u0026lt;strong\u0026gt;DirectX\u0026lt;/strong\u0026gt;) it is:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;l=M*g;\ng=Inverse(M)*l;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;That is because \u0026lt;strong\u0026gt;transposed orthogonal rotation matrix is also inverse of itself\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;for more info see \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/25216549/2521214\u0026quot;\u0026gt;transform matrix anatomy\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/21100338/2521214\u0026quot;\u0026gt;3D graphic pipeline\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/rayCb.png\u0026quot; alt=\u0026quot;OpenGL transform matrix\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;how to visualize it\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Yes you can draw the matrix numbers but they do not make sense at first look especially if the numbers are changing so draw the axises vectors as on image above. Where each axis is a line from \u0026lt;code\u0026gt;origin\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;origin + line_size*axis_vector\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;how to construct it\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Just compute axis vectors and origin and put them inside matrix. To ensure orthogonality exploit \u0026lt;strong\u0026gt;cross product\u0026lt;/strong\u0026gt; (but be careful with order of multiplicants to use the right direction) Here \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/41813188/2521214\u0026quot;\u0026gt;example of getting 3 basis vectors from direction\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;effects\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;rotation is done by rotating the axises so you can compute each axis by parametric circle equation ...\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;scaling is done by multiplying axises by scale factor\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;skewing is just using non perpendicular axises\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;rotation\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For most cases the incremental rotation is used. There are two types\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;local rotation\u0026lt;/strong\u0026gt; \u0026lt;code\u0026gt;M\u0026apos;=M*rotation_matrix\u0026lt;/code\u0026gt; it rotates around local coordinate axises like you will control plane or car or player ... Most engines/games do not use these and fake it with \u0026lt;strong\u0026gt;euler angles\u0026lt;/strong\u0026gt; instead which is a cheap solution (have many quirks and problems) because most people who using OpenGL do not even know this is possible and rather stack list of \u0026lt;code\u0026gt;glRotate/glTranslate\u0026lt;/code\u0026gt; calls...\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;global rotation\u0026lt;/strong\u0026gt; \u0026lt;code\u0026gt;M\u0026apos;=Inverse(Inverse(M)*rotation_matrix)\u0026lt;/code\u0026gt; it rotates around global coordinate system axises.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;where \u0026lt;code\u0026gt;rotation_matrix\u0026lt;/code\u0026gt; is any standard rotation transform matrix.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you have different matrix layout (transposed) then the rotations local and global are computed the other way around ...\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You can also compute your \u0026lt;code\u0026gt;rotation_matrix\u0026lt;/code\u0026gt; from \u0026lt;code\u0026gt;3\u0026lt;/code\u0026gt; angles like:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;rotation_matrix=rotation_around_x(ax)*rotation_around_y(ay)*rotation_around_z(az);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;see \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Rotation_matrix\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Wiki rotation matrices\u0026lt;/a\u0026gt; the 3D \u0026lt;code\u0026gt;Rx,Ry,Rz\u0026lt;/code\u0026gt; from \u0026lt;code\u0026gt;Basic rotations\u0026lt;/code\u0026gt; are what you need. As you can see they are just unit circle parametric equation really. The order of multiplication change how the angles converge to target position. This is called \u0026lt;strong\u0026gt;Euler angles\u0026lt;/strong\u0026gt; and I do not use it (I integrate step changes instead which has no restrictions if done properly not to mention it is simpler).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Anyway if you need you can convert transform matrix into euler angles relatively easily see:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/56950130/2521214\u0026quot;\u0026gt;Is there a way to calculate 3D rotation on X and Y axis from a 4x4 matrix\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;glRotate\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you want \u0026lt;code\u0026gt;glRotate\u0026lt;/code\u0026gt; which is rotation around arbitrary axis not by 3 angles then \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/64389606/2521214\u0026quot;\u0026gt;There is workaround\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;create transform matrix \u0026lt;code\u0026gt;N\u0026lt;/code\u0026gt; for that axis\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;then transform your matrix \u0026lt;code\u0026gt;M\u0026lt;/code\u0026gt; to it\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;rotate \u0026lt;code\u0026gt;N\u0026lt;/code\u0026gt; by angle\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;then transform \u0026lt;code\u0026gt;M\u0026lt;/code\u0026gt; back from \u0026lt;code\u0026gt;N\u0026lt;/code\u0026gt; to global coordinates\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;Or you can use \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Rodrigues_rotation_formula\u0026lt;/a\u0026gt; instead\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;To transform Matrix to/from Matrix in this case just transform axises as points and leave the origin as is but the origin of \u0026lt;code\u0026gt;N\u0026lt;/code\u0026gt; \u0026lt;strong\u0026gt;must be (0,0,0)!!!\u0026lt;/strong\u0026gt; or the vectors transformed must have \u0026lt;code\u0026gt;w=0\u0026lt;/code\u0026gt; instead.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;usage\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Transformations are cumulative that means:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;p\u0026apos;=M1*M2*M3*M4*p;\u0026lt;/code\u0026gt; is the same as \u0026lt;code\u0026gt;M=M1*M2*M3*M4; p\u0026apos;=M*p\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;So if you have many points to transform then you precompute all transformations to single matrix and use just it. Do not need to multiply points by all subsequent matrices. OK now the concept:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;you should have \u0026lt;code\u0026gt;3\u0026lt;/code\u0026gt; coordinate systems:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;camera \u0026lt;code\u0026gt;C\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;world (usually unit matrix)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;object \u0026lt;code\u0026gt;O\u0026lt;/code\u0026gt; (each object have its own matrix)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;so if you have cube with \u0026lt;code\u0026gt;8\u0026lt;/code\u0026gt; vertexes \u0026lt;code\u0026gt;p0,...,p7\u0026lt;/code\u0026gt; then you have to perform transformation on each point from object local coordinates to camera local coordinates. Some gfx api do some of it so you apply only what you have to so you really need:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;p(i)\u0026apos;=inverse(C)*unit*M*p(i);\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;the transforms are cumulative and unit matrix does not change anything so:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;Q=inverse(C)*M; p(i)\u0026apos;=Q*p(i);\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;so before drawing compute \u0026lt;code\u0026gt;Q\u0026lt;/code\u0026gt; for drawed object then take each point \u0026lt;code\u0026gt;p(i)\u0026lt;/code\u0026gt; of the object and compute the transformed \u0026lt;code\u0026gt;p(i)\u0026apos;\u0026lt;/code\u0026gt; and draw/use the transformed one ... The \u0026lt;code\u0026gt;p(i)\u0026apos;\u0026lt;/code\u0026gt; is in local camera coordinate system (x,y of the screen) but there is no perspective there so before drawing you can also add any of the projection matrices and divide by \u0026lt;code\u0026gt;z\u0026lt;/code\u0026gt; cordinate at the end ... The projection is also cumulative so it can be also inside \u0026lt;code\u0026gt;Q\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;[edit1] C++ example\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cpp s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//$$---- Form CPP ----\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// apart from math.h include you can ignore this machine generated VCL related code\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;vcl.h\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pragma\u0026lt;/span\u0026gt; hdrstop\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;win_main.h\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;math.h\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pragma\u0026lt;/span\u0026gt; package(smart_init)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pragma\u0026lt;/span\u0026gt; resource \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*.dfm\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\nTMain *Main; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// pointer to main window ...\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Here is the important stuff some math first\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; deg=M_PI/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;180.0\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; y)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_mul\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// c[16] = a[16] * b[16]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// c[ 4] = a[16] * b[ 4]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;           \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// c[16] = all subdets of a[16]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(          \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; r,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; s)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      = subdet(r,s) of a[16]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_det\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(          \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;           \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//       = det of a[16]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_det\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(          \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//       = det of a[16] and subdets b[16]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_inv\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;           \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// c[16] = a[16] ^ -1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; y)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!y) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x/y;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_mul\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;];\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;;i++) c[i]=q[i];\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;];\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=q[i];\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;   q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;     i,j;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;i++)\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (j=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;j\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;j++)\n          q[j+(i\u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)]=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(a,i,j);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;;i++) c[i]=q[i];\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(         \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; r,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; s)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;   c,q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;     i,j,k;\n        k=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;                            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// q = sub matrix\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (j=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;j\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;j++)\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (j!=s)\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;i++)\n           \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (i!=r)\n                {\n                q[k]=a[i+(j\u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)];\n                k++;\n                }\n        c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n        c+=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;];\n        c+=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;];\n        c+=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;];\n        c-=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;];\n        c-=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;];\n        c-=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;((r+s)\u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)) c=-c;       \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// add signum\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; c;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_det\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(         \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(a,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(a,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(a,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;);\n        c+=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(a,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; c;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_det\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(         \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;];\n        c+=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; c;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_inv\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;   d[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;],D;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(d,a);\n        D=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_det\u0026lt;/span\u0026gt;(a,d);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (D) D=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;/D;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;;i++) c[i]=d[i]*D;\n        }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// now the object representation\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; pnts=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; pnt[pnts*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]=     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Vertexes for 100x100x100 cube centered at (0,0,0)\u0026lt;/span\u0026gt;\n    {\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\n    +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\n    +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\n    +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\n    +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\n    };\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; facs=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; fac[facs*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]=        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// faces (index of point used) no winding rule\u0026lt;/span\u0026gt;\n    {\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\n    };\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; rep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;]=        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 4x4 transform matrix of object (unit from start) at (0,0,+100)\u0026lt;/span\u0026gt;\n    {\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\n    };\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; eye[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;]=        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 4x4 transform matrix of camera at (0,0,-150)\u0026lt;/span\u0026gt;\n    {\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-150.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\n    };\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// this is how to draw it\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *pnt,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; pnts,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; *fac,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; facs,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *rep,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *ieye)\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// variables for drawing\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;],p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;],p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;],p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;],m[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;],d;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// gfx api variables (change to your stuff) Main is the main form of this application\u0026lt;/span\u0026gt;\n    TCanvas *scr=Main-\u0026amp;gt;bmp-\u0026amp;gt;Canvas;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; xs2=Main-\u0026amp;gt;ClientWidth/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,ys2=Main-\u0026amp;gt;ClientHeight/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; v=xs2*\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tan\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30.0\u0026lt;/span\u0026gt;*deg); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 60 degree viewing angle perspective projection\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul\u0026lt;/span\u0026gt;(m,ieye,rep);             \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cumulate all needed transforms\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;facs*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;)                 \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// go through all faces\u0026lt;/span\u0026gt;\n        {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// convert all points of face\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;(p0,m,\u0026amp;amp;pnt[fac[i]*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]); i++;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;(p1,m,\u0026amp;amp;pnt[fac[i]*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]); i++;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;(p2,m,\u0026amp;amp;pnt[fac[i]*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]); i++;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;(p3,m,\u0026amp;amp;pnt[fac[i]*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]); i++;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// here goes perspective divide by z coordinate if needed\u0026lt;/span\u0026gt;\n        d=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(v,p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]); p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*=d; p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*=d;\n        d=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(v,p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]); p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*=d; p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*=d;\n        d=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(v,p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]); p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*=d; p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*=d;\n        d=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(v,p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]); p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*=d; p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*=d;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// here is viewport transform (just translate (0,0) to middle of screen in this case\u0026lt;/span\u0026gt;\n        p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]+=xs2; p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]+=ys2;\n        p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]+=xs2; p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]+=ys2;\n        p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]+=xs2; p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]+=ys2;\n        p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]+=xs2; p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]+=ys2;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// draw quad\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// I use VCL GDI TCanvas you use what you have ...\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// and wireframe only to keep this simple (no Z buffer,winding culling,...)\u0026lt;/span\u0026gt;\n        scr-\u0026amp;gt;Pen-\u0026amp;gt;Color=clAqua;     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// perimeter wireframe\u0026lt;/span\u0026gt;\n        scr-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;MoveTo\u0026lt;/span\u0026gt;(p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n        scr-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;LineTo\u0026lt;/span\u0026gt;(p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n        scr-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;LineTo\u0026lt;/span\u0026gt;(p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n        scr-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;LineTo\u0026lt;/span\u0026gt;(p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n        scr-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;LineTo\u0026lt;/span\u0026gt;(p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      scr-\u0026amp;gt;Pen-\u0026amp;gt;Color=clBlue;     // face cross to visualy check if I correctly generate the fac[]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      scr-\u0026amp;gt;MoveTo(p0[0],p0[1]);\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      scr-\u0026amp;gt;LineTo(p2[0],p2[1]);\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      scr-\u0026amp;gt;MoveTo(p1[0],p1[1]);\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      scr-\u0026amp;gt;LineTo(p3[0],p3[1]);\u0026lt;/span\u0026gt;\n        }\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::draw\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!_redraw) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n    bmp-\u0026amp;gt;Canvas-\u0026amp;gt;Brush-\u0026amp;gt;Color=clBlack;\n    bmp-\u0026amp;gt;Canvas-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;FillRect\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;TRect\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,xs,ys));\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// compute inverse of camera need to compute just once for all objects\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; ieye[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_inv\u0026lt;/span\u0026gt;(ieye,eye);\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// draw all objects\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;(pnt,pnts,fac,facs,rep,ieye);\n\n    Main-\u0026amp;gt;Canvas-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Draw\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,bmp);\n    _redraw=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;__fastcall \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::TMain\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(TComponent* Owner)\u0026lt;/span\u0026gt; : TForm(Owner)\n    {\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// window constructor you can ignore this ... (just create a backbuffer bitmap here)\u0026lt;/span\u0026gt;\n    bmp=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Graphics::TBitmap;\n    bmp-\u0026amp;gt;HandleType=bmDIB;\n    bmp-\u0026amp;gt;PixelFormat=pf32bit;\n    pyx=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;;\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; __fastcall \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::FormDestroy\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(TObject *Sender)\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// window destructor release memory ... also ignoe this\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (pyx) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; pyx;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; bmp;\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; __fastcall \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::FormResize\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(TObject *Sender)\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// on resize event ... just resize/redraw backbuffer also can ignore this\u0026lt;/span\u0026gt;\n    xs=ClientWidth;  xs2=xs\u0026amp;gt;\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n    ys=ClientHeight; ys2=ys\u0026amp;gt;\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n    bmp-\u0026amp;gt;Width=xs;\n    bmp-\u0026amp;gt;Height=ys;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (pyx) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; pyx;\n    pyx=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;*[ys];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; y=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;y\u0026amp;lt;ys;y++) pyx[y]=(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;*) bmp-\u0026amp;gt;ScanLine[y];\n    _redraw=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; __fastcall \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::FormPaint\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(TObject *Sender)\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// repaint event can ignore\u0026lt;/span\u0026gt;\n    _redraw=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; __fastcall \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::tim_redrawTimer\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(TObject *Sender)\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// timer event to animate the cube ...\u0026lt;/span\u0026gt;\n    _redraw=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// rotate the object to see it in motion\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; ang,c,s;\n\n    ang=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.0\u0026lt;/span\u0026gt;*deg; c=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cos\u0026lt;/span\u0026gt;(ang); s=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sin\u0026lt;/span\u0026gt;(ang);    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// rotate baround z by 5 degrees per timer step\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; rz[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;]= { c, s, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                    -s, c, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; };\n\n    ang=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;*deg; c=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cos\u0026lt;/span\u0026gt;(ang); s=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sin\u0026lt;/span\u0026gt;(ang);    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// rotate baround x by 1 degrees per timer step\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; rx[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;]= { \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, c, s, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,-s, c, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; };\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul\u0026lt;/span\u0026gt;(rep,rep,rz);\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul\u0026lt;/span\u0026gt;(rep,rep,rx);\n\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;draw\u0026lt;/span\u0026gt;();\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;here is how it looks like:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/lgfsw.png\u0026quot; alt=\u0026quot;cube example\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;And GIF animation with back face culling:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/FGVUb.gif\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/FGVUb.gif\u0026quot; alt=\u0026quot;animation\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;[notes]\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you have more questions then comment me ...\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;[Edit2] basic 3D vector operations often needed\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you do not know how to compute vector operations like cross/dot products or absolute value see:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cpp s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cross product: W = U x V\u0026lt;/span\u0026gt;\nW.x=(U.y*V.z)-(U.z*V.y)\nW.y=(U.z*V.x)-(U.x*V.z)\nW.z=(U.x*V.y)-(U.y*V.x)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// dot product: a = (U.V)\u0026lt;/span\u0026gt;\na=U.x*V.x+U.y*V.y+U.z*V.z\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// abs of vector a = |U|\u0026lt;/span\u0026gt;\na=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sqrt\u0026lt;/span\u0026gt;((U.x*U.x)+(U.y*U.y)+(U.z*U.z))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;here my C++ vector math:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cpp s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; vector_tmp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;];\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; y)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; ((y\u0026amp;gt;=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-1e-30\u0026lt;/span\u0026gt;)\u0026amp;amp;\u0026amp;amp;(y\u0026amp;lt;=+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1e-30\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x/y; }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;* \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_ld\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; y,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; z)\u0026lt;/span\u0026gt;          \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *p=vector_tmp; p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=x; p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=y; p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=z; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; p;}\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;* \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_ld\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *p,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; y,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; z)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{                      p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=x; p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=y; p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=z; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; p;}\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_copy\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;         \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=a[i];       }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_abs\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;          \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;fabs\u0026lt;/span\u0026gt;(a[i]); }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_one\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; l=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sqrt\u0026lt;/span\u0026gt;((a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])));\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*l;\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*l;\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*l;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_len\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; l)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        l=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(l,\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sqrt\u0026lt;/span\u0026gt;((a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])));\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*l;\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*l;\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*l;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_neg\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;          \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=-a[i];      }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_add\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=a[i]+b[i]; }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_sub\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=a[i]-b[i]; }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_mul\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cross\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;   q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;];\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])-(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])-(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])-(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=q[i];\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_mul\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;  b)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=a[i]*b; }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_mul\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;  a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=a*b[i]; }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_mul\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(         \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c+=a[i]*b[i]; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; c; } \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// dot\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_len\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sqrt\u0026lt;/span\u0026gt;((a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])); }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_len2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]); }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;[Edit3] local rotations for camera and object control via keyboard\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As this has been asked a lot lately here some example answers of mine with demos:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/40171880/2521214\u0026quot;\u0026gt;stationary camera view control (partial pseudo inverse matrix)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/40104549/2521214\u0026quot;\u0026gt;camera and player control (inverse matrix)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/42293434/2521214\u0026quot;\u0026gt;How to preserve accuracy with cumulative transforms over time (full pseudo inverse matrix)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/52801501/2521214\u0026quot;\u0026gt;rotundus style simple OpenGL/C++/VCL player control example\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    "],"comment":["\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;The whole purpose of mathematical notation is to make things easier to understand. A programmed algorithm will always be just a specialized case of a general mathematical concept. When it comes to linear algebra, I think you might find this very helpful (especially how a matrix acts as a \u0026quot;function\u0026quot; on pieces of incoming data): \u0026lt;a href=\u0026quot;http://betterexplained.com/articles/linear-algebra-guide/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;betterexplained.com/articles/linear-algebra-guide\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/524368/datenwolf\u0026quot; title=\u0026quot;155,414 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;datenwolf\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment44531259_28075743\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-01-21 20:20:22Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 21, 2015 at 20:20\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;What you ask is impossible. Of course you can copy and paste a matrix class  or a rotation method, i am sure you can find plenty out there. Therein you will see arrays summed and multiplied with each other following some for-loop schemes. If you know arrays and for loops that is as close as you can get with a purely programming and no-mathematics way to understand it. If that is not enough for you, you have to continue to try to learn the math. Sometimes this is hard if all tutorials don\u0026apos;t match your way of thinking, but maybe you can visit a course or sth where you live.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3967585/thomas\u0026quot; title=\u0026quot;725 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Thomas\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment44532001_28075743\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-01-21 20:47:19Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 21, 2015 at 20:47\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;While I would feel bad to downvote such a carefully written question, I agree with the previous commenters that it\u0026apos;s a tough request. And I don\u0026apos;t think it\u0026apos;s a good fit for SO. Explaining mathematical concepts without mathematical notation is almost a contradiction in itself. And even though this is fairly basic math, it would still take a substantial amount of explanation if everything has to be explained from scratch. If I gave it a shot despite all that, I\u0026apos;m still not sure that I would do better than all the people who get paid for writing math books. Then the whole thing might get deleted.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3530129/reto-koradi\u0026quot; title=\u0026quot;51,602 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Reto Koradi\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment44542908_28075743\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-01-22 06:15:34Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 22, 2015 at 6:15\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Michael Faraday struggled with math notation, too, and he seemed to do ok \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Michael_Faraday\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;en.wikipedia.org/wiki/Michael_Faraday\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/871990/rob3c\u0026quot; title=\u0026quot;1,806 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;rob3c\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment76760643_28075743\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-07-03 17:46:36Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 3, 2017 at 17:46\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;I know this question is about a year old and already has an accepted answer I\u0026apos;d still like to point out a few quick simple things that can still help in the understanding of some of the math behind 3D Transformations. First is the simple use of an open source and header only C++ Library called \u0026lt;code\u0026gt;glm\u0026lt;/code\u0026gt; you can find it here: \u0026lt;a href=\u0026quot;https://glm.g-truc.net/0.9.9/index.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;glm.g-truc.net/0.9.9/index.html\u0026lt;/a\u0026gt; and a very good video series that pertains to many different fields of math that may be useful found here: \u0026lt;a href=\u0026quot;https://www.youtube.com/channel/UCYO_jab_esuFRV4b17AJtAw/playlists?disable_polymer=1\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;youtube.com/channel/UCYO_jab_esuFRV4b17AJtAw/\u0026lt;/a\u0026gt;. Look for the linear algebra series!\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1757805/francis-cugler\u0026quot; title=\u0026quot;7,614 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Francis Cugler\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment93265662_28075743\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-11-07 11:10:00Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 7, 2018 at 11:10\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@MichaelDibbets no that is not right 1. vertex is still vertex you just convert it to homegenous coordinates so (x,y,z) becomes (x,y,z,1) so you can multiply it and 4x4 matrix together\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2521214/spektre\u0026quot; title=\u0026quot;45,936 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Spektre\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment44552014_28084380\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-01-22 11:21:47Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 22, 2015 at 11:21\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@MichaelDibbets 2. matrix represents coordinate system of your object (cube) if it si untranslated unrotated then it is unit matrix (1,0,0,0,   0,1,0,0,   0,0,0,1,   0,0,0,1) after some movement,rotation it will become different. if you want to construct one then take the axises of you objects vectors of x axis,y axis ,z axis in global world coordinate system and fill the matrix with them, then take the origin point and fill it also there last add the (0,0,0,1) at the bottom. I use as origin the middle point of the object and axises are Z for forward movement, Y for up and X for right ...\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2521214/spektre\u0026quot; title=\u0026quot;45,936 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Spektre\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment44552024_28084380\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-01-22 11:22:17Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 22, 2015 at 11:22\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@MichaelDibbets most meshes are already translated to (0,0,0) like your cube example so point1 is not necessary , point 2 is done in single step by using single transform matrix (this translate and rotate the object to desired position) point 3 is not translate back but transform to camera view coordinates instead which can be also done in step 2.  I will try to make working example for you in C++ ...\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2521214/spektre\u0026quot; title=\u0026quot;45,936 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Spektre\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment44554478_28084380\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-01-22 12:35:48Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 22, 2015 at 12:35\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 2 times\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@MichaelDibbets added C++ example and repaired few thing local/global  rotation was reversed and the camera/world/object transform cumulation was in wrong order for current matrix layout\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2521214/spektre\u0026quot; title=\u0026quot;45,936 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Spektre\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment44557930_28084380\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-01-22 14:04:30Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 22, 2015 at 14:04\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@Dudeson (debuleted) btw if youre interested see \u0026lt;a href=\u0026quot;http://meta.stackoverflow.com/a/307557/2521214\u0026quot;\u0026gt;Bulletpoints EVERYWHERE\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2521214/spektre\u0026quot; title=\u0026quot;45,936 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Spektre\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment55543026_28084380\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-11-24 09:30:11Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 24, 2015 at 9:30\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        "],"id":432,"title":"How do I compose a rotation matrix with human readable angles from scratch?","content":"\n                \n\u0026lt;p\u0026gt;The one thing that has always hindered me from doing 3D programming is failing to understand how math works. I can go along with math fine in programming flow using methods and functions, then its all clear and logical to me, but in mathematical notation, I just can\u0026apos;t make heads or tails from it.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I have been reading websites, a watching videos of institutes trying to explain this, but they all use mathematical notation and I simply get lost in it, my mind won\u0026apos;t translate it to something understandable. I might have a defect there.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Also, Just using someone\u0026apos;s code isn\u0026apos;t my interest, I want to understand the mechanics behind it, the logic. I\u0026apos;d be happy to use someone else\u0026apos;s code, but I really want to understand how it works.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;The question\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Can you explain to me in simple terms \u0026lt;strong\u0026gt;without\u0026lt;/strong\u0026gt; mathematical notation, just programming notation/functions/psuedocode, how to implement a matrix transform along all 3 axes?\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Ideally what I want is the material/understanding to write a method/object where I can define the angles of 3 axes similar to glRotate to rotate the collection of quads/triangles I have. (I am trying to program a 3D rotation of a cube shapes without having access to OpenGL functions to do it for me because this is done in one draw call every time something changes in the display list.)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;What have I done?\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I have attempted at making a 90 degrees transform function to get the hang of the math but failed utterly in making a proper matrix which in theory should have been the simplest to do. You can see my failed attempt in all its glory on \u0026lt;a href=\u0026quot;http://jsfiddle.net/bLfg0tj8/5/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://jsfiddle.net/bLfg0tj8/5/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;true\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-display\u0026quot; style=\u0026quot;vertical-align: center\u0026quot;\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link-chevron\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;expander-arrow-hide\u0026quot; style=\u0026quot;vertical-align: middle;\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;show-hide\u0026quot; data-ishidden=\u0026quot;true\u0026quot; style=\u0026quot;vertical-align: middle\u0026quot;\u0026gt;Show code snippet\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code snippet-currently-hidden\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;x,y,z\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; = x;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = y;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt; = z;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;matrixPoints\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;();    \n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationAngle\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;90\u0026lt;/span\u0026gt;;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;addVector\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;vector\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;matrixPoints\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(vector);\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;setRotationPoint\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;vector\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt; = vector; \n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;setRotationAngle\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;angle\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationAngle\u0026lt;/span\u0026gt; = angle;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;populate\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    translateToOrigin =     [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;-\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;-\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;-\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;]];\n    rotationMatrix =         [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]];\n    translateEnd =         [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;]];\n    currentColumn = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n    currentRow = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;mergeMatrices\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;mergeMatrices\u0026lt;/span\u0026gt;(translateEnd,rotationMatrix),\n                                          translateToOrigin);\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;transform\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    newmatrix = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(c = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;c\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;matrixPoints\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;;c++) {\n        newmatrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;applyToVertex\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;matrixPoints\u0026lt;/span\u0026gt;[c]));\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newmatrix;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;applyToVertex\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;vertex\u0026lt;/span\u0026gt;) {\n    ret = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;,vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;,vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;);\n    ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; = ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;;\n    \n    ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;;\n    \n    ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt; = ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ret;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;mergeMatrices\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;lastStep, oneInFront\u0026lt;/span\u0026gt;) {\n    step1 = [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]];\n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//============================================================\u0026lt;/span\u0026gt;\n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//============================================================\u0026lt;/span\u0026gt;\n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; step1;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;getCurrentMatrix\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;matrixPoints\u0026lt;/span\u0026gt;;\n}\nmyvectors = [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)];\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;drawVectors\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;vectors,color\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;c\u0026amp;lt;vectors.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;;c++) {\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;whoa\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;innerHTML\u0026lt;/span\u0026gt; += \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;div style=\u0026quot;color:\u0026apos;\u0026lt;/span\u0026gt;+color+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;position:absolute;left:\u0026apos;\u0026lt;/span\u0026gt;+vectors[c].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;px; top:\u0026apos;\u0026lt;/span\u0026gt;+vectors[c].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;px;z-index:\u0026apos;\u0026lt;/span\u0026gt;+vectors[c].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;\u0026quot;\u0026amp;gt;(\u0026apos;\u0026lt;/span\u0026gt;+c+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;).\u0026amp;lt;/div\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n    }\n}\nmatrix = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;c\u0026amp;lt;myvectors.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;;c++) {\n    matrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addVector\u0026lt;/span\u0026gt;(myvectors[c]);\n}\nmatrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setRotationPoint\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;70\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;));\nmatrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;populate\u0026lt;/span\u0026gt;();\nsomematrix = matrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;transform\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;drawVectors\u0026lt;/span\u0026gt;(matrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCurrentMatrix\u0026lt;/span\u0026gt;(),\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;lime\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// draw current matrix that was hand coded\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;drawVectors\u0026lt;/span\u0026gt;([matrix.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;],\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;white\u0026apos;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// draw rotation point\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;drawVectors\u0026lt;/span\u0026gt;(somematrix,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;red\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// transformed matrix... somehow two points merge\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-html lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;div\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;whoa\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;position:relative;top:50px;left:150px;background-color:green;color:red;width:400px;height:300px;\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-symbol\u0026quot;\u0026gt;\u0026amp;amp;nbsp;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;div\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif1\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The green text is the original triangle, the white point the center point, the red points the failed transformation(I think, because it isn\u0026apos;t aligned around the center point). The tutorial I was in thought me how to combine matrices into a combined matrix, but I guess I screwed up somewhere.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;As I said, it\u0026apos;s really really hard for me to understand mathematical notation and speak. And not helping is that most teachers skip parts of the explanation. Took me 2 hours alone to understand when multiplying matrices you need to add each step together instead of just keep on multiplying. Yay for explanations.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;A practical example what I work with/want to work with\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example I have a cube, loaded from a wavefront obj file located in the world at \u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;x = 50\ny = 100\nz = 200\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The cube is drawn using quads and some uv mapping. No problems here. It renders beautifully with all the textures showing correctly.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;These are the location coordinates for each \u0026quot;face\u0026quot; of the cube which is drawn using a quad.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;// Front face\n-1.0, -1.0,  1.0,\n 1.0, -1.0,  1.0,\n 1.0,  1.0,  1.0,\n-1.0,  1.0,  1.0,\n\n// Back face\n-1.0, -1.0, -1.0,\n-1.0,  1.0, -1.0,\n 1.0,  1.0, -1.0,\n 1.0, -1.0, -1.0,\n\n// Top face\n-1.0,  1.0, -1.0,\n-1.0,  1.0,  1.0,\n 1.0,  1.0,  1.0,\n 1.0,  1.0, -1.0,\n\n// Bottom face\n-1.0, -1.0, -1.0,\n 1.0, -1.0, -1.0,\n 1.0, -1.0,  1.0,\n-1.0, -1.0,  1.0,\n\n// Right face\n 1.0, -1.0, -1.0,\n 1.0,  1.0, -1.0,\n 1.0,  1.0,  1.0,\n 1.0, -1.0,  1.0,\n\n// Left face\n-1.0, -1.0, -1.0,\n-1.0, -1.0,  1.0,\n-1.0,  1.0,  1.0,\n-1.0,  1.0, -1.0\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So this works all great. But what if I want this cube rotated 90 degrees along the x axis and 45 degrees around the z axis? I cannot use glRotate because at the moment I pass the data to the tesselator object I cannot do any matrix transforms to it via the opengl functions because it\u0026apos;s just taking in the data, not actually rendering it per se.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The way the data is stored is as following:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;WaveFrontObject()\n   |\n   |-\u0026amp;gt; Groups(String groupname)\n        |\n        |-\u0026amp;gt; Faces()\n              |\n              |-\u0026amp;gt; Vertex(float x, float y, float z)[] \n              |-\u0026amp;gt; Float UVmap[] corresponding to each vertex\n              |-\u0026amp;gt; drawFace() // Draws the face as a quad or triangle\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So each of the above coordinates I gave is stored as a face of the wavefront object in the group \u0026quot;cube\u0026quot;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;When the cube is added to the tesselator it is translated to the right coordinates in the world and it renders normal.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It always renders the same however. If I would want it to render at an angle I would have to make a seperate wavefront object at this moment to be able to do that. In my opnion that is madness to do when it can be solved with some math.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Needed in the answer\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Explanation step by step how to build a translation matrix and an attempt to explain the math to me.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Explanation how to apply the translation matrix to the quads/triangles in the faces whist they keep oriented around the center of their location \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;x = 50.5\ny = 100.5\nz = 200.5\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Some example/pseudo code to go along with the explanation.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;The used programming language used to explain isn\u0026apos;t really relevant as long as its in the C family\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Please try to stay away from mathematical notation/speak. I don\u0026apos;t know what alpha beta, thetha is, I do know what x axis, y axis and z axis is. I do know what angles are, but I do not know the names mathematicians find for it.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you wish to use math names, please explain to me what they are in the 3D world/code and how they are formed/calculated.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I simply want to make a method/object along the lines of\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;Matrix.transformVertices(vertices[], 90deg x, 45 deg y, 0 deg z);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457","postType":"QUESTION","createdAt":"2022-07-09T17:32:43.000Z","updatedAt":"2022-07-09T17:32:43.000Z","tags":[{"id":2260,"name":"opengl","slug":"opengl","createdAt":"2022-07-09T17:32:43.000Z","updatedAt":"2022-07-09T17:32:43.000Z","Questions_Tags":{"questionId":432,"tagId":2260}}]}]}},"__N_SSG":true},"page":"/questions/tag/[slug]","query":{"slug":"opengl"},"buildId":"4Y8KGE-c2lolBeBmcum_I","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>