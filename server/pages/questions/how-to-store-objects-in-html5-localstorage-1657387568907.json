{"pageProps":{"data":{"answer":["\n&lt;p&gt;Looking at the &lt;a href=&quot;https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Name-ValueStorage/Name-ValueStorage.html&quot; rel=&quot;noreferrer&quot;&gt;Apple&lt;/a&gt;, &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API&quot; rel=&quot;noreferrer&quot;&gt;Mozilla&lt;/a&gt; and &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem&quot; rel=&quot;noreferrer&quot;&gt;Mozilla again&lt;/a&gt; documentation, the functionality seems to be limited to handle only string key/value pairs.&lt;/p&gt;\n\n&lt;p&gt;A workaround can be to &lt;a href=&quot;https://www.w3schools.com/js/js_json_stringify.asp&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;stringify&lt;/em&gt;&lt;/a&gt; your object before storing it, and later parse it when you retrieve it:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; testObject = { &lt;span class=&quot;hljs-string&quot;&gt;&apos;one&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;two&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;three&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; };\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Put the object into storage&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;testObject&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(testObject));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Retrieve the object from storage&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; retrievedObject = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;testObject&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;retrievedObject: &apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(retrievedObject));\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;A minor improvement on a &lt;a href=&quot;https://stackoverflow.com/a/2010994/59087&quot;&gt;variant&lt;/a&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(key, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(value));\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; value = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(key);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value &amp;amp;&amp;amp; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(value);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Because of &lt;a href=&quot;http://en.wikipedia.org/wiki/Short-circuit_evaluation&quot; rel=&quot;noreferrer&quot;&gt;short-circuit evaluation&lt;/a&gt;, &lt;code&gt;getObject()&lt;/code&gt; will &lt;em&gt;immediately&lt;/em&gt; return &lt;code&gt;null&lt;/code&gt; if &lt;code&gt;key&lt;/code&gt; is not in Storage. It also will not throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception if &lt;code&gt;value&lt;/code&gt; is &lt;code&gt;&quot;&quot;&lt;/code&gt; (the empty string; &lt;code&gt;JSON.parse()&lt;/code&gt; cannot handle that).&lt;/p&gt;\n    ","\n&lt;p&gt;You might find it useful to extend the Storage object with these handy methods:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(key, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(value));\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(key));\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This way you get the functionality that you really wanted even though underneath the API only supports strings.&lt;/p&gt;\n    ","\n&lt;p&gt;Creating a facade for the Storage object is an awesome solution. That way, you can implement your own &lt;code&gt;get&lt;/code&gt; and &lt;code&gt;set&lt;/code&gt; methods. For my API, I have created a facade for localStorage and then check if it is an object or not while setting and getting.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = {\n  &lt;span class=&quot;hljs-attr&quot;&gt;set&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!key || !value) {&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;}\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; value === &lt;span class=&quot;hljs-string&quot;&gt;&quot;object&quot;&lt;/span&gt;) {\n      value = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(value);\n    }\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(key, value);\n  },\n  &lt;span class=&quot;hljs-attr&quot;&gt;get&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; value = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(key);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!value) {&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;}\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// assume it is an object that has been stringified&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (value[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] === &lt;span class=&quot;hljs-string&quot;&gt;&quot;{&quot;&lt;/span&gt;) {\n      value = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(value);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value;\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h2&gt;Stringify doesn&apos;t solve all problems&lt;/h2&gt;\n&lt;p&gt;It seems that the answers here don&apos;t cover all types that are possible in JavaScript, so here are some short examples on how to deal with them correctly:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Objects and Arrays:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = {&lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;};\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj);  &lt;span class=&quot;hljs-comment&quot;&gt;// Will ignore private members&lt;/span&gt;\n    obj = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Boolean:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bool = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;bool&lt;/span&gt; = bool;\n    bool = (&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;bool&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Numbers:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; num = &lt;span class=&quot;hljs-number&quot;&gt;42&lt;/span&gt;;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;num&lt;/span&gt; = num;\n    num = +&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;num&lt;/span&gt;;    &lt;span class=&quot;hljs-comment&quot;&gt;// Short for &quot;num = parseFloat(localStorage.num);&quot;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Dates:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; date = &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;now&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;date&lt;/span&gt; = date;\n    date = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;parseInt&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;date&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Regular expressions:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; regex = &lt;span class=&quot;hljs-regexp&quot;&gt;/^No\\.[\\d]*$/i&lt;/span&gt;;     &lt;span class=&quot;hljs-comment&quot;&gt;// Usage example: &quot;No.42&quot;.match(regex);&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;regex&lt;/span&gt; = regex;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; components = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;regex&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;^/(.*)/([a-z]*)$&quot;&lt;/span&gt;);\n    regex = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(components[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;], components[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Functions (not recommended):&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;func&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {}\n\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;func&lt;/span&gt; = func;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;eval&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;func&lt;/span&gt;);      &lt;span class=&quot;hljs-comment&quot;&gt;// Recreates the function with the name &quot;func&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;I do not recommend&lt;/strong&gt; to store functions, because &lt;code&gt;eval()&lt;/code&gt; is evil and can lead to issues regarding security, optimisation and debugging.&lt;/p&gt;\n&lt;p&gt;In general, &lt;code&gt;eval()&lt;/code&gt; should never be used in JavaScript code.&lt;/p&gt;\n&lt;h2&gt;Private members&lt;/h2&gt;\n&lt;p&gt;The problem with using &lt;code&gt;JSON.stringify()&lt;/code&gt; for storing objects is, that this function can not serialise private members.&lt;/p&gt;\n&lt;p&gt;This issue can be solved by overwriting the &lt;code&gt;.toString()&lt;/code&gt; method (which is called implicitly when storing data in web storage):&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Object with private and public members:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;MyClass&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;privateContent, publicContent&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; privateMember = privateContent || &lt;span class=&quot;hljs-string&quot;&gt;&quot;defaultPrivateValue&quot;&lt;/span&gt;;\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;publicMember&lt;/span&gt; = publicContent  || &lt;span class=&quot;hljs-string&quot;&gt;&quot;defaultPublicValue&quot;&lt;/span&gt;;\n\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;toString&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;{&quot;private&quot;: &quot;&apos;&lt;/span&gt; + privateMember + &lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;, &quot;public&quot;: &quot;&apos;&lt;/span&gt; + &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;publicMember&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;}&apos;&lt;/span&gt;;\n        };\n    }\n    &lt;span class=&quot;hljs-title class_&quot;&gt;MyClass&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;fromString&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;serialisedString&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; properties = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(serialisedString || &lt;span class=&quot;hljs-string&quot;&gt;&quot;{}&quot;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyClass&lt;/span&gt;(properties.&lt;span class=&quot;hljs-property&quot;&gt;private&lt;/span&gt;, properties.&lt;span class=&quot;hljs-property&quot;&gt;public&lt;/span&gt;);\n    };\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Storing:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;invisible&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;visible&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt; = obj;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Loading:&lt;/span&gt;\n    obj = &lt;span class=&quot;hljs-title class_&quot;&gt;MyClass&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;fromString&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Circular references&lt;/h2&gt;\n&lt;p&gt;Another problem &lt;code&gt;stringify&lt;/code&gt; can&apos;t deal with are circular references:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = {};\nobj[&lt;span class=&quot;hljs-string&quot;&gt;&quot;circular&quot;&lt;/span&gt;] = obj;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj);  &lt;span class=&quot;hljs-comment&quot;&gt;// Fails&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In this example, &lt;code&gt;JSON.stringify()&lt;/code&gt; will throw a &lt;code&gt;TypeError&lt;/code&gt; &lt;em&gt;&quot;Converting circular structure to JSON&quot;&lt;/em&gt;.&lt;/p&gt;\n&lt;p&gt;If storing circular references should be supported, the second parameter of &lt;code&gt;JSON.stringify()&lt;/code&gt; might be used:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = {&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;sub&lt;/span&gt;: {}};\nobj.&lt;span class=&quot;hljs-property&quot;&gt;sub&lt;/span&gt;[&lt;span class=&quot;hljs-string&quot;&gt;&quot;circular&quot;&lt;/span&gt;] = obj;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(key == &lt;span class=&quot;hljs-string&quot;&gt;&apos;circular&apos;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;$ref&quot;&lt;/span&gt; + value.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot;$&quot;&lt;/span&gt;;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value;\n    }\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;However, finding an efficient solution for storing circular references highly depends on the tasks that need to be solved, and restoring such data is not trivial either.&lt;/p&gt;\n&lt;p&gt;There are already some question on Stack&amp;nbsp;Overflow dealing with this problem: &lt;em&gt;&lt;a href=&quot;https://stackoverflow.com/questions/10392293/stringify-javascript-object-with-circular-reference/12659424#12659424&quot;&gt;Stringify (convert to JSON) a JavaScript object with circular reference&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;There is a great library that wraps many solutions so it even supports older browsers called &lt;a href=&quot;https://github.com/andris9/jStorage&quot; rel=&quot;nofollow noreferrer&quot;&gt;jStorage&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;You can set an object&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-shell&quot;&gt;&lt;span class=&quot;hljs-meta prompt_&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;.jStorage.&lt;span class=&quot;hljs-built_in&quot;&gt;set&lt;/span&gt;(key, value)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And retrieve it easily&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt; = $.jStorage.get(key)\n&lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt; = $.jStorage.get(key, &lt;span class=&quot;hljs-string&quot;&gt;&quot;default value&quot;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I arrived at this post after hitting on another post that has been closed as a duplicate of this - titled &apos;how to store an array in localstorage?&apos;.  Which is fine except neither thread actually provides a full answer as to how you can maintain an array in localStorage - however I have managed to craft a solution based on information contained in both threads.&lt;/p&gt;\n\n&lt;p&gt;So if anyone else is wanting to be able to push/pop/shift items within an array, and they want that array stored in localStorage or indeed sessionStorage, here you go:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getArray&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; thisArray = [];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; fetchArrayObject = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(arrayName);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; fetchArrayObject !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (fetchArrayObject !== &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) { thisArray = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(fetchArrayObject); }\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; thisArray;\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;pushArrayItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName,arrayItem&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; existingArray = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getArray&lt;/span&gt;(arrayName);\n  existingArray.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(arrayItem);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(arrayName,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(existingArray));\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;popArrayItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; arrayItem = {};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; existingArray = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getArray&lt;/span&gt;(arrayName);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (existingArray.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n    arrayItem = existingArray.&lt;span class=&quot;hljs-title function_&quot;&gt;pop&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(arrayName,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(existingArray));\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arrayItem;\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;shiftArrayItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; arrayItem = {};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; existingArray = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getArray&lt;/span&gt;(arrayName);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (existingArray.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n    arrayItem = existingArray.&lt;span class=&quot;hljs-title function_&quot;&gt;shift&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(arrayName,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(existingArray));\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arrayItem;\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;unshiftArrayItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName,arrayItem&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; existingArray = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getArray&lt;/span&gt;(arrayName);\n  existingArray.&lt;span class=&quot;hljs-title function_&quot;&gt;unshift&lt;/span&gt;(arrayItem);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(arrayName,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(existingArray));\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;deleteArray&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;removeItem&lt;/span&gt;(arrayName);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;example usage - storing simple strings in localStorage array:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;pushArrayItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myArray&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;item one&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;pushArrayItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myArray&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;item two&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;example usage - storing objects in sessionStorage array:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-delphi&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; item1 = &lt;span class=&quot;hljs-comment&quot;&gt;{}&lt;/span&gt;; item1.&lt;span class=&quot;hljs-keyword&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;fred&apos;&lt;/span&gt;; item1.age = &lt;span class=&quot;hljs-number&quot;&gt;48&lt;/span&gt;;\nsessionStorage.pushArrayItem(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myArray&apos;&lt;/span&gt;,item1);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; item2 = &lt;span class=&quot;hljs-comment&quot;&gt;{}&lt;/span&gt;; item2.&lt;span class=&quot;hljs-keyword&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;dave&apos;&lt;/span&gt;; item2.age = &lt;span class=&quot;hljs-number&quot;&gt;22&lt;/span&gt;;\nsessionStorage.pushArrayItem(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myArray&apos;&lt;/span&gt;,item2);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;common methods to manipulate arrays:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;.pushArrayItem(arrayName,arrayItem); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; adds an element onto &lt;span class=&quot;hljs-keyword&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; named &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;\n.unshiftArrayItem(arrayName,arrayItem); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; adds an element onto front &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; named &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;\n.popArrayItem(arrayName); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; removes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;returns&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;last&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt; element\n.shiftArrayItem(arrayName); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; removes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;returns&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;first&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt; element\n.getArray(arrayName); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;returns&lt;/span&gt; entire &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;\n.deleteArray(arrayName); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; removes entire &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; storage\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;In theory, it is possible to store objects with functions:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;store&lt;/span&gt; (a)\n{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; c = {&lt;span class=&quot;hljs-attr&quot;&gt;f&lt;/span&gt;: {}, &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;: {}};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; a)\n  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (a.&lt;span class=&quot;hljs-title function_&quot;&gt;hasOwnProperty&lt;/span&gt;(k) &amp;amp;&amp;amp; &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; a[k] === &lt;span class=&quot;hljs-string&quot;&gt;&apos;function&apos;&lt;/span&gt;)\n    {\n      c.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt;[k] = &lt;span class=&quot;hljs-built_in&quot;&gt;encodeURIComponent&lt;/span&gt;(a[k]);\n    }\n  }\n\n  c.&lt;span class=&quot;hljs-property&quot;&gt;d&lt;/span&gt; = a;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(c);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;CODE&apos;&lt;/span&gt;, data);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;restore&lt;/span&gt; ()\n{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;CODE&apos;&lt;/span&gt;);\n  data = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(data);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; b = data.&lt;span class=&quot;hljs-property&quot;&gt;d&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; data.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt;)\n  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (data.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;hasOwnProperty&lt;/span&gt;(k))\n    {\n      b[k] = &lt;span class=&quot;hljs-built_in&quot;&gt;eval&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;(&quot;&lt;/span&gt; + &lt;span class=&quot;hljs-built_in&quot;&gt;decodeURIComponent&lt;/span&gt;(data.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt;[k]) + &lt;span class=&quot;hljs-string&quot;&gt;&quot;)&quot;&lt;/span&gt;);\n    }\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; b;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;However, function serialization/deserialization is unreliable because &lt;a href=&quot;http://ecma-international.org/ecma-262/5.1/#sec-15.3.4&quot; rel=&quot;nofollow noreferrer&quot;&gt;it is implementation-dependent&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;It is recommended using an abstraction library for many of the features discussed here, as well as better compatibility. There are lots of options:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/andris9/jStorage&quot; rel=&quot;nofollow noreferrer&quot;&gt;jStorage&lt;/a&gt; or &lt;a href=&quot;https://github.com/andris9/simpleStorage&quot; rel=&quot;nofollow noreferrer&quot;&gt;simpleStorage&lt;/a&gt;  my preference&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/mozilla/localForage&quot; rel=&quot;nofollow noreferrer&quot;&gt;localForage&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/alekseykulikov/storage&quot; rel=&quot;nofollow noreferrer&quot;&gt;alekseykulikov/storage&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/brianleroux/lawnchair&quot; rel=&quot;nofollow noreferrer&quot;&gt;Lawnchair&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/marcuswestin/store.js&quot; rel=&quot;nofollow noreferrer&quot;&gt;Store.js&lt;/a&gt;  another good option&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/aaronagray/omg&quot; rel=&quot;nofollow noreferrer&quot;&gt;OMG&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/macmcmeans/localDataStorage&quot; rel=&quot;nofollow noreferrer&quot;&gt;localDataStorage&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;You can use &lt;a href=&quot;https://github.com/macmcmeans/localDataStorage&quot; rel=&quot;nofollow noreferrer&quot;&gt;localDataStorage&lt;/a&gt; to transparently store JavaScript data types (Array, Boolean, Date, Float, Integer, String and Object). It also provides lightweight data obfuscation, automatically compresses strings, facilitates query by key (name) as well as query by (key) value, and helps to enforce segmented shared storage within the same domain by prefixing keys.&lt;/p&gt;\n&lt;p&gt;[DISCLAIMER] I am the author of the utility [/DISCLAIMER]&lt;/p&gt;\n&lt;p&gt;Examples:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;localDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;set&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key1&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Belgian&apos;&lt;/span&gt; )\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;set&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key2&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1200.0047&lt;/span&gt; )\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;set&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key3&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt; )\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;set&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key4&apos;&lt;/span&gt;, { &lt;span class=&quot;hljs-string&quot;&gt;&apos;RSK&apos;&lt;/span&gt; : [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;3&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;7&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;] } )\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;set&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key5&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; )\n\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key1&apos;&lt;/span&gt; )  &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt;   &apos;Belgian&apos;&lt;/span&gt;\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key2&apos;&lt;/span&gt; )  &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt;   1200.0047&lt;/span&gt;\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key3&apos;&lt;/span&gt; )  &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt;   true&lt;/span&gt;\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key4&apos;&lt;/span&gt; )  &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt;   Object {RSK: Array(5)}&lt;/span&gt;\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key5&apos;&lt;/span&gt; )  &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt;   null&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;As you can see, the primitive values are respected.&lt;/p&gt;\n    ","\n&lt;p&gt;You cannot store a key value without a string format.&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;LocalStorage&lt;/em&gt; only supports string formats for keys/values.&lt;/p&gt;\n&lt;p&gt;That is why you should convert your data to string whatever it is an array or object.&lt;/p&gt;\n&lt;p&gt;To &lt;em&gt;store&lt;/em&gt; data in localStorage, first of all stringify it using the JSON.stringify() method.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myObj = [{&lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;test&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;time&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Date 2017-02-03T08:38:04.449Z&quot;&lt;/span&gt;}];\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;item&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(myObj));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Then when you want to retrieve data, you need to parse the string to object again.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; getObj = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;item&apos;&lt;/span&gt;));\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can use &lt;a href=&quot;https://docs.meteor.com/api/ejson.html&quot; rel=&quot;noreferrer&quot;&gt;ejson&lt;/a&gt; to store the objects as strings.&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;EJSON is an extension of JSON to support more types. It supports all JSON-safe types, as well as:&lt;/p&gt;\n  \n  &lt;ul&gt;\n  &lt;li&gt;Date (JavaScript &lt;code&gt;Date&lt;/code&gt;)&lt;/li&gt;\n  &lt;li&gt;Binary (JavaScript &lt;code&gt;Uint8Array&lt;/code&gt; or the result of &lt;a href=&quot;https://docs.meteor.com/api/ejson.html#ejson_new_binary&quot; rel=&quot;noreferrer&quot;&gt;EJSON.newBinary&lt;/a&gt;)&lt;/li&gt;\n  &lt;li&gt;User-defined types (see &lt;a href=&quot;https://docs.meteor.com/api/ejson.html#ejson_add_type&quot; rel=&quot;noreferrer&quot;&gt;EJSON.addType&lt;/a&gt;. For example, &lt;a href=&quot;https://docs.meteor.com/api/ejson.html#mongo_object_id&quot; rel=&quot;noreferrer&quot;&gt;Mongo.ObjectID&lt;/a&gt; is implemented this way.)&lt;/li&gt;\n  &lt;/ul&gt;\n  \n  &lt;p&gt;All EJSON serializations are also valid JSON. For example an object with a date and a binary buffer would be serialized in EJSON as:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;{\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;d&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;$date&lt;/span&gt;&quot;&lt;/span&gt;: 1358205756553},\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;$binary&lt;/span&gt;&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;c3VyZS4=&quot;&lt;/span&gt;}\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Here is my localStorage wrapper using ejson&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/UziTech/storage.js&quot; rel=&quot;noreferrer&quot;&gt;https://github.com/UziTech/storage.js&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;I added some types to my wrapper including regular expressions and functions&lt;/p&gt;\n    ","\n&lt;p&gt;Another option would be to use an existing plugin.&lt;/p&gt;\n\n&lt;p&gt;For example &lt;a href=&quot;https://github.com/mar10/persisto&quot; rel=&quot;noreferrer&quot;&gt;persisto&lt;/a&gt; is an open source project that provides an easy interface to localStorage/sessionStorage and automates persistence for form fields (input, radio buttons, and checkboxes).&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/cU5V0.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/cU5V0.png&quot; alt=&quot;persisto features&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;(Disclaimer: I am the author.)&lt;/p&gt;\n    ","\n&lt;p&gt;For TypeScript users willing to set and get typed properties:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Silly wrapper to be able to type the storage keys\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;export &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;TypedStorage&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;T&lt;/span&gt;&amp;gt;&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;removeItem&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key: keyof T&lt;/span&gt;): &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;&lt;/span&gt; {\n        localStorage.removeItem(key);\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;getItem&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;keyof&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;T&lt;/span&gt;&amp;gt;(&lt;span class=&quot;hljs-params&quot;&gt;key: K&lt;/span&gt;): T[K] | &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; data: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt; | &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; =  localStorage.getItem(key);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; JSON.parse(data);\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;setItem&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;keyof&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;T&lt;/span&gt;&amp;gt;(&lt;span class=&quot;hljs-params&quot;&gt;key: K, &lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;: T[K]&lt;/span&gt;): &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; data: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt; = JSON.stringify(&lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;);\n        localStorage.setItem(key, data);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;a href=&quot;http://www.typescriptlang.org/play/#src=%2F**%0D%0A%20*%20Silly%20wrapper%20to%20be%20able%20to%20type%20the%20storage%20keys%0D%0A%20*%2F%0D%0Aexport%20class%20TypedStorage%3CT%3E%20%7B%0D%0A%0D%0A%20%20%20%20public%20removeItem(key%3A%20keyof%20T)%3A%20void%20%7B%0D%0A%20%20%20%20%20%20%20%20localStorage.removeItem(key)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20public%20getItem%3CK%20extends%20keyof%20T%3E(key%3A%20K)%3A%20T%5BK%5D%20%7C%20null%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20data%3A%20string%20%7C%20null%20%3D%20%20localStorage.getItem(key)%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.parse(data)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20public%20setItem%3CK%20extends%20keyof%20T%3E(key%3A%20K%2C%20value%3A%20T%5BK%5D)%3A%20void%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20data%3A%20string%20%3D%20JSON.stringify(value)%3B%0D%0A%20%20%20%20%20%20%20%20localStorage.setItem(key%2C%20data)%3B%0D%0A%20%20%20%20%7D%0D%0A%7D%0D%0A%0D%0A%2F%2F%20write%20an%20interface%20for%20the%20storage%0D%0Ainterface%20MyStore%20%7B%0D%0A%20%20%20age%3A%20number%2C%0D%0A%20%20%20name%3A%20string%2C%0D%0A%20%20%20address%3A%20%7Bcity%3Astring%7D%0D%0A%7D%0D%0A%0D%0Aconst%20storage%3A%20TypedStorage%3CMyStore%3E%20%3D%20new%20TypedStorage%3CMyStore%3E()%3B%0D%0A%0D%0Astorage.setItem(%22wrong%20key%22%2C%20%22%22)%3B%20%2F%2F%20error%20unknown%20key%0D%0Astorage.setItem(%22age%22%2C%20%22hello%22)%3B%20%2F%2F%20error%2C%20age%20should%20be%20number%0D%0Astorage.setItem(%22address%22%2C%20%7Bcity%3A%22Here%22%7D)%3B%20%2F%2F%20ok%0D%0A%0D%0Aconst%20address%3A%20%7Bcity%3Astring%7D%20%3D%20storage.getItem(%22address%22)%3B&quot; rel=&quot;nofollow noreferrer&quot;&gt;Example usage&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// write an interface for the storage&lt;/span&gt;\n&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;MyStore&lt;/span&gt; &lt;/span&gt;{\n   age: number,\n   name: &lt;span class=&quot;hljs-keyword&quot;&gt;string&lt;/span&gt;,\n   address: {city:&lt;span class=&quot;hljs-keyword&quot;&gt;string&lt;/span&gt;}\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;storage&lt;/span&gt;: TypedStorage&amp;lt;MyStore&amp;gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;TypedStorage&lt;/span&gt;&amp;lt;MyStore&amp;gt;();\n\nstorage.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrong key&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// error unknown key&lt;/span&gt;\nstorage.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;hello&quot;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// error, age should be number&lt;/span&gt;\nstorage.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;address&quot;&lt;/span&gt;, {&lt;span class=&quot;hljs-attr&quot;&gt;city&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Here&quot;&lt;/span&gt;}); &lt;span class=&quot;hljs-comment&quot;&gt;// ok&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;address&lt;/span&gt;: {city:&lt;span class=&quot;hljs-keyword&quot;&gt;string&lt;/span&gt;} = storage.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;address&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;https://github.com/adrianmay/rhaboo&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://github.com/adrianmay/rhaboo&lt;/a&gt; is a localStorage sugar layer that lets you write things like this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; store = Rhaboo.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;persistent&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Some name&apos;&lt;/span&gt;);\nstore.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;write&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;count&apos;&lt;/span&gt;, store.count ? store.count+&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\nstore.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;write&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;somethingfancy&apos;&lt;/span&gt;, {\n  &lt;span class=&quot;hljs-attr&quot;&gt;one&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&apos;man&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;went&apos;&lt;/span&gt;],\n  &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;mow&apos;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;went&lt;/span&gt;: [  &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;mow&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;meadow&apos;&lt;/span&gt; ] }, {}  ]\n});\nstore.somethingfancy.went[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;].mow.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;write&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;lawn&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It doesn&apos;t use JSON.stringify/parse because that would be inaccurate and slow on big objects. Instead, each terminal value has its own localStorage entry.&lt;/p&gt;\n\n&lt;p&gt;You can probably guess that I might have something to do with rhaboo.&lt;/p&gt;\n    ","\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;Akash&apos;&lt;/span&gt;})); &lt;span class=&quot;hljs-comment&quot;&gt;// Set Object in localStorage&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Get Object from localStorage&lt;/span&gt;\n\nsessionStorage.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;Akash&apos;&lt;/span&gt;})); &lt;span class=&quot;hljs-comment&quot;&gt;// Set Object in sessionStorage&lt;/span&gt;\nsessionStorage.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Get Object from sessionStorage&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I made another minimalistic wrapper with only 20 lines of code to allow using it like it should:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myKey&apos;&lt;/span&gt;,{&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;], &lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;ok&apos;&lt;/span&gt;});\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myKey&apos;&lt;/span&gt;);   &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt; true&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myKey&apos;&lt;/span&gt;);   &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt; {a:[1,2,5], b: &apos;ok&apos;}&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;();         &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt; [&apos;myKey&apos;]&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;remove&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myKey&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/zevero/simpleWebstorage&quot; rel=&quot;nofollow&quot;&gt;https://github.com/zevero/simpleWebstorage&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I made a thing that doesn&apos;t break the existing Storage objects, but creates a wrapper so you can do what you want. The result is a normal object, no methods, with access like any object.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/rudiedirkx/ObjectStorage&quot; rel=&quot;nofollow&quot;&gt;The thing I made.&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;If you want 1 &lt;code&gt;localStorage&lt;/code&gt; property to be magic:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; prop = &lt;span class=&quot;hljs-title class_&quot;&gt;ObjectStorage&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;prop&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If you need several:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; storage = &lt;span class=&quot;hljs-title class_&quot;&gt;ObjectStorage&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;prop&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;more&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;props&apos;&lt;/span&gt;]);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Everything you do to &lt;code&gt;prop&lt;/code&gt;, or the objects &lt;strong&gt;inside&lt;/strong&gt; &lt;code&gt;storage&lt;/code&gt; will be automatically saved into &lt;code&gt;localStorage&lt;/code&gt;. You&apos;re always playing with a real object, so you can do stuff like this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;storage.&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;.list.push(&lt;span class=&quot;hljs-string&quot;&gt;&apos;more data&apos;&lt;/span&gt;);\nstorage.another.list.splice(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, {another: &lt;span class=&quot;hljs-string&quot;&gt;&apos;object&apos;&lt;/span&gt;});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And every new object &lt;strong&gt;inside&lt;/strong&gt; a tracked object will be automatically tracked.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The very big downside:&lt;/strong&gt; it depends on &lt;code&gt;Object.observe()&lt;/code&gt; so it has very limited browser support. And it doesn&apos;t look like it&apos;ll be coming for Firefox or Edge anytime soon.&lt;/p&gt;\n    ","\n&lt;p&gt;I found a way to make it work with objects that have cyclic references.&lt;/p&gt;\n\n&lt;p&gt;Let&apos;s make an object with cyclic references.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-string&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;L:&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L:&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;v:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;lorem&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R:&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;v:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;ipsum&apos;&lt;/span&gt; }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;R:&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L:&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;v:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;dolor&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R:&lt;/span&gt; {\n            &lt;span class=&quot;hljs-attr&quot;&gt;L:&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;v:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;sit&apos;&lt;/span&gt; },\n            &lt;span class=&quot;hljs-attr&quot;&gt;R:&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;v:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;amet&apos;&lt;/span&gt; }\n        }\n    }\n}\n&lt;span class=&quot;hljs-string&quot;&gt;obj.R.L.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.L;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;obj.R.R.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.L;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;obj.R.R.L.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.R.L;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;obj.R.R.R.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.R.L;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;obj.L.L.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.R;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;obj.L.R.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.R;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;We can&apos;t do &lt;code&gt;JSON.stringify&lt;/code&gt; here, because of the circular references.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/4taQx.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/4taQx.png&quot; alt=&quot;circularUncle&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;LOCALSTORAGE.CYCLICJSON&lt;/code&gt; has &lt;code&gt;.stringify&lt;/code&gt; and &lt;code&gt;.parse&lt;/code&gt; just like normal &lt;code&gt;JSON&lt;/code&gt;, but works with objects with circular references. (&quot;Works&quot; meaning parse(stringify(obj)) and obj are deep equal AND have identical sets of &apos;inner equalities&apos;)&lt;/p&gt;\n\n&lt;p&gt;But we can just use the shortcuts:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;LOCALSTORAGE.setObject(&lt;span class=&quot;hljs-string&quot;&gt;&apos;latinUncles&apos;&lt;/span&gt;, obj)\nrecovered = LOCALSTORAGE.getObject(&lt;span class=&quot;hljs-string&quot;&gt;&apos;latinUncles&apos;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then, &lt;code&gt;recovered&lt;/code&gt; will be &quot;the same&quot; to obj, in the following sense:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-section&quot;&gt;[\nobj.L.L.v === recovered.L.L.v,\nobj.L.R.v === recovered.L.R.v,\nobj.R.L.v === recovered.R.L.v,\nobj.R.R.L.v === recovered.R.R.L.v,\nobj.R.R.R.v === recovered.R.R.R.v,\nobj.R.L.uncle === obj.L,\nobj.R.R.uncle === obj.L,\nobj.R.R.L.uncle === obj.R.L,\nobj.R.R.R.uncle === obj.R.L,\nobj.L.L.uncle === obj.R,\nobj.L.R.uncle === obj.R,\nrecovered.R.L.uncle === recovered.L,\nrecovered.R.R.uncle === recovered.L,\nrecovered.R.R.L.uncle === recovered.R.L,\nrecovered.R.R.R.uncle === recovered.R.L,\nrecovered.L.L.uncle === recovered.R,\nrecovered.L.R.uncle === recovered.R\n]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here is the implementation of &lt;code&gt;LOCALSTORAGE&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable constant_&quot;&gt;LOCALSTORAGE&lt;/span&gt; = (&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;use strict&quot;&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ignore = [&lt;span class=&quot;hljs-title class_&quot;&gt;Boolean&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;primitive&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; item === &lt;span class=&quot;hljs-string&quot;&gt;&apos;object&apos;&lt;/span&gt;){\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (item === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;; }\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;ignore.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++){\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (item &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; ignore[i]) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;; }\n      }\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n    }\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;infant&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;value&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(value) ? [] : {};\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;decycleIntoForest&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object, replacer&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; replacer !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;function&apos;&lt;/span&gt;){\n      replacer = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;){ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; x; }\n    }\n    object = &lt;span class=&quot;hljs-title function_&quot;&gt;replacer&lt;/span&gt;(object);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;primitive&lt;/span&gt;(object)) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; object;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; objects = [object];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; forest  = [&lt;span class=&quot;hljs-title function_&quot;&gt;infant&lt;/span&gt;(object)];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bucket  = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;WeakMap&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// bucket = inverse of objects &lt;/span&gt;\n    bucket.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(object, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;addToBucket&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;){\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result = objects.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;\n      objects.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(obj);\n      bucket.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(obj, result);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;isInBucket&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;){ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; bucket.&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(obj); }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;processNode&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;source, target&lt;/span&gt;){\n      &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(source).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;){\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; value = &lt;span class=&quot;hljs-title function_&quot;&gt;replacer&lt;/span&gt;(source[key]);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;primitive&lt;/span&gt;(value)){\n          target[key] = {&lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: value};\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ptr;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;isInBucket&lt;/span&gt;(value)){\n            ptr = bucket.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(value);\n          } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            ptr = &lt;span class=&quot;hljs-title function_&quot;&gt;addToBucket&lt;/span&gt;(value);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; newTree = &lt;span class=&quot;hljs-title function_&quot;&gt;infant&lt;/span&gt;(value);\n            forest.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(newTree);\n            &lt;span class=&quot;hljs-title function_&quot;&gt;processNode&lt;/span&gt;(value, newTree);\n          }\n          target[key] = {&lt;span class=&quot;hljs-attr&quot;&gt;pointer&lt;/span&gt;: ptr};\n        }\n      });\n    }\n    &lt;span class=&quot;hljs-title function_&quot;&gt;processNode&lt;/span&gt;(object, forest[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; forest;\n  };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;deForestIntoCycle&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;forest&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; objects = [];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; objectRequested = [];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; todo = [];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;processTree&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;idx&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (idx &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; objects) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; objects[idx];\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (objectRequested[idx]) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n      objectRequested[idx] = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tree = forest[idx];\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; node = &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(tree) ? [] : {};\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; tree) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; o = tree[key];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-string&quot;&gt;&apos;pointer&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; o) {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ptr = o.&lt;span class=&quot;hljs-property&quot;&gt;pointer&lt;/span&gt;;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; value = &lt;span class=&quot;hljs-title function_&quot;&gt;processTree&lt;/span&gt;(ptr);\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (value === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            todo.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;({\n              &lt;span class=&quot;hljs-attr&quot;&gt;node&lt;/span&gt;: node,\n              &lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;: key,\n              &lt;span class=&quot;hljs-attr&quot;&gt;idx&lt;/span&gt;: ptr\n            });\n          } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            node[key] = value;\n          }\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-string&quot;&gt;&apos;value&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; o) {\n            node[key] = o.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;;\n          } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;unexpected&apos;&lt;/span&gt;)\n          }\n        }\n      }\n      objects[idx] = node;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; node;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result = &lt;span class=&quot;hljs-title function_&quot;&gt;processTree&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; todo.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; item = todo[i];\n      item.&lt;span class=&quot;hljs-property&quot;&gt;node&lt;/span&gt;[item.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt;] = objects[item.&lt;span class=&quot;hljs-property&quot;&gt;idx&lt;/span&gt;];\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n  };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt; = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;log&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;){\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; the = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;the&apos;&lt;/span&gt;);\n      the.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; = the.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt; + x;\n\t},\n\t&lt;span class=&quot;hljs-attr&quot;&gt;delimiter&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; the = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;the&apos;&lt;/span&gt;);\n      the.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; = the.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; +\n\t\t&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n*******************************************&apos;&lt;/span&gt;;\n\t}\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;logCyclicObjectToConsole&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;root&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; cycleFree = &lt;span class=&quot;hljs-title function_&quot;&gt;decycleIntoForest&lt;/span&gt;(root);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; shown = cycleFree.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;tree, idx&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n    });\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; indentIncrement = &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;showItem&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;nodeSlot, indent, label&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; leadingSpaces = &lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;repeat&lt;/span&gt;(indent);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; leadingSpacesPlus = &lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;repeat&lt;/span&gt;(indent + indentIncrement);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (shown[nodeSlot]) {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(leadingSpaces + label + &lt;span class=&quot;hljs-string&quot;&gt;&apos; ... see above (object #&apos;&lt;/span&gt; + nodeSlot + &lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;);\n      } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(leadingSpaces + label + &lt;span class=&quot;hljs-string&quot;&gt;&apos; object#&apos;&lt;/span&gt; + nodeSlot);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tree = cycleFree[nodeSlot];\n        shown[nodeSlot] = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n        &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(tree).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; entry = tree[key];\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-string&quot;&gt;&apos;value&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; entry) {\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(leadingSpacesPlus + key + &lt;span class=&quot;hljs-string&quot;&gt;&quot;: &quot;&lt;/span&gt; + entry.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;);\n          } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-string&quot;&gt;&apos;pointer&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; entry) {\n              &lt;span class=&quot;hljs-title function_&quot;&gt;showItem&lt;/span&gt;(entry.&lt;span class=&quot;hljs-property&quot;&gt;pointer&lt;/span&gt;, indent + indentIncrement, key);\n            }\n          }\n        });\n      }\n    }\n\t&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;delimiter&lt;/span&gt;();\n    &lt;span class=&quot;hljs-title function_&quot;&gt;showItem&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;root&apos;&lt;/span&gt;);\n  };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;decycleIntoForest&lt;/span&gt;(obj));\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;str&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;deForestIntoCycle&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(str));\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;CYCLICJSON&lt;/span&gt; = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;decycleIntoForest&lt;/span&gt;: decycleIntoForest,\n    deForestIntoCycle : deForestIntoCycle,\n    &lt;span class=&quot;hljs-attr&quot;&gt;logCyclicObjectToConsole&lt;/span&gt;: logCyclicObjectToConsole,\n    stringify : stringify,\n    parse : parse\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setObject&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name, object&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; str = &lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(object);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(name, str);\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getObject&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; str = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(name);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (str===&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(str);\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {\n    &lt;span class=&quot;hljs-variable constant_&quot;&gt;CYCLICJSON&lt;/span&gt; : &lt;span class=&quot;hljs-variable constant_&quot;&gt;CYCLICJSON&lt;/span&gt;,\n    setObject  : setObject,\n    getObject  : getObject\n  }\n})();\nobj = {\n\t&lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: {\n\t\t&lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;lorem&apos;&lt;/span&gt; },\n\t\t&lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;ipsum&apos;&lt;/span&gt; }\n\t},\n\t&lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n\t\t&lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;dolor&apos;&lt;/span&gt; },\n\t\t&lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n\t\t\t&lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;sit&apos;&lt;/span&gt; },\n\t\t\t&lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;amet&apos;&lt;/span&gt; }\n\t\t}\n\t}\n}\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// LOCALSTORAGE.setObject(&apos;latinUncles&apos;, obj)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// recovered = LOCALSTORAGE.getObject(&apos;latinUncles&apos;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// localStorage not available inside fiddle ):&lt;/span&gt;\n&lt;span class=&quot;hljs-variable constant_&quot;&gt;LOCALSTORAGE&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;CYCLICJSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;logCyclicObjectToConsole&lt;/span&gt;(obj)\nputIntoLS = &lt;span class=&quot;hljs-variable constant_&quot;&gt;LOCALSTORAGE&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;CYCLICJSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj);\nrecovered = &lt;span class=&quot;hljs-variable constant_&quot;&gt;LOCALSTORAGE&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;CYCLICJSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(putIntoLS);\n&lt;span class=&quot;hljs-variable constant_&quot;&gt;LOCALSTORAGE&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;CYCLICJSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;logCyclicObjectToConsole&lt;/span&gt;(recovered);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; the = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;the&apos;&lt;/span&gt;);\nthe.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; = the.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n\\n&apos;&lt;/span&gt; +\n&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(\n[\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;\n]\n)&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;pre&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;the&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;pre&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;This question has been answered sufficiently from the JavaScript-only perspective, and others have already noted that both &lt;code&gt;localStorage.getItem&lt;/code&gt; and &lt;code&gt;localStorage.setItem&lt;/code&gt; have no concept of objectsthey handle strings and strings only. This answer provides a TypeScript-friendly solution that incorporates what &lt;a href=&quot;https://stackoverflow.com/a/2010948/39155&quot;&gt;others&lt;/a&gt; &lt;a href=&quot;https://stackoverflow.com/a/3146971/39155&quot;&gt;have&lt;/a&gt; &lt;a href=&quot;https://stackoverflow.com/a/4762411/39155&quot;&gt;suggested&lt;/a&gt; in JavaScript-only solutions.&lt;/p&gt;\n&lt;h2&gt;TypeScript 4.2.3&lt;/h2&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;key: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;, value: &lt;span class=&quot;hljs-built_in&quot;&gt;unknown&lt;/span&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(key, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(value));\n};\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;key: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; value = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(key);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!value) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(value);\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;declare&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;global&lt;/span&gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;setObject&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;, value: &lt;span class=&quot;hljs-built_in&quot;&gt;unknown&lt;/span&gt;&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attr&quot;&gt;getObject&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;unknown&lt;/span&gt;;\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;Usage&lt;/h3&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setObject&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;ages&apos;&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;18&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;33&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;22&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;58&lt;/span&gt;]);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getObject&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;ages&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;Explanation&lt;/h3&gt;\n&lt;p&gt;We declare both &lt;code&gt;setObject&lt;/code&gt; and &lt;code&gt;getObject&lt;/code&gt; functions on the &lt;code&gt;Storage&lt;/code&gt; prototype&lt;code&gt;localStorage&lt;/code&gt; is an instance of this type. There&apos;s nothing special we really need to note besides the null handling in &lt;code&gt;getObject&lt;/code&gt;. Since &lt;code&gt;getItem&lt;/code&gt; can return &lt;code&gt;null&lt;/code&gt;, we must exit early since calling &lt;code&gt;JSON.parse&lt;/code&gt; on a &lt;code&gt;null&lt;/code&gt; value will throw a runtime exception.&lt;/p&gt;\n&lt;p&gt;After declaring the functions on the &lt;code&gt;Storage&lt;/code&gt; prototype, we include their type definitions on the &lt;code&gt;Storage&lt;/code&gt; type in the global namespace.&lt;/p&gt;\n&lt;p&gt;Note: If we defined these functions with arrow functions, we&apos;d need to assume that the storage object we&apos;re calling is always &lt;code&gt;localStorage&lt;/code&gt;, which might not be true. For instance, the above code will add &lt;code&gt;setObject&lt;/code&gt; and &lt;code&gt;getObject&lt;/code&gt; support to &lt;code&gt;sessionStorage&lt;/code&gt; as well.&lt;/p&gt;\n    ","\n&lt;p&gt;Here is some extended version of the code &lt;a href=&quot;https://stackoverflow.com/questions/2010892/how-to-store-objects-in-html5-localstorage/5790739#5790739&quot;&gt;posted by danott&lt;/a&gt;:&lt;/p&gt;\n&lt;p&gt;It&apos;ll also implement a &lt;strong&gt;delete&lt;/strong&gt; value from localstorage and shows how to adds a Getter and Setter layer so instead of,&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;localstorage.setItem(preview, true)&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;you can write&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;config.preview = true&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;Okay, here were go:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;=&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;_setItem&lt;/span&gt; &amp;gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;u&apos;&lt;/span&gt;)\n  &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;_setItem&lt;/span&gt; = &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setItem&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;)\n{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; value &amp;gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;u&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;//..undefined&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;removeItem&lt;/span&gt;(key)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;_setItem&lt;/span&gt;(key, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(value));\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;_getItem&lt;/span&gt; &amp;gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;u&apos;&lt;/span&gt;)\n  &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;_getItem&lt;/span&gt; = &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getItem&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;)\n{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ItemData&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;_getItem&lt;/span&gt;(key)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;\n  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;ItemData&lt;/span&gt;);\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(e)\n  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ItemData&lt;/span&gt;;\n  }\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Aliases for localStorage.set/getItem&lt;/span&gt;\nget = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getItem&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;bind&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;)\nset = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setItem&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;bind&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;)\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Create ConfigWrapperObject&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; config = {}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Helper to create getter &amp;amp; setter&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;configCreate&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;PropToAdd&lt;/span&gt;){\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;defineProperty&lt;/span&gt;( config, &lt;span class=&quot;hljs-title class_&quot;&gt;PropToAdd&lt;/span&gt;, {\n      &lt;span class=&quot;hljs-attr&quot;&gt;get&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)    { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;PropToAdd&lt;/span&gt;)    )},\n      &lt;span class=&quot;hljs-attr&quot;&gt;set&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;val&lt;/span&gt;) {         &lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;PropToAdd&lt;/span&gt;, val)}\n    })\n}\n&lt;span class=&quot;hljs-comment&quot;&gt;//------------------------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Usage Part&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Create properties&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;configCreate&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;preview&apos;&lt;/span&gt;)\n&lt;span class=&quot;hljs-title function_&quot;&gt;configCreate&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;notification&apos;&lt;/span&gt;)\n&lt;span class=&quot;hljs-comment&quot;&gt;//...&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Configuration Data transfer&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Set&lt;/span&gt;\nconfig.&lt;span class=&quot;hljs-property&quot;&gt;preview&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get&lt;/span&gt;\nconfig.&lt;span class=&quot;hljs-property&quot;&gt;preview&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Delete&lt;/span&gt;\nconfig.&lt;span class=&quot;hljs-property&quot;&gt;preview&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Well, you may strip the aliases part with &lt;code&gt;.bind(...)&lt;/code&gt;. However, I just put it in since it&apos;s really good to know about this. I took me hours to find out why a simple &lt;code&gt;get = localStorage.getItem;&lt;/code&gt; don&apos;t work.&lt;/p&gt;\n    ","\n&lt;h3&gt;Circular References&lt;/h3&gt;\n&lt;p&gt;In this answer I focus on data-only objects (without functions, etc.) with circular references and develop ideas mentioned &lt;a href=&quot;https://stackoverflow.com/a/27013704/860099&quot;&gt;by maja&lt;/a&gt; &lt;a href=&quot;https://stackoverflow.com/a/58825573/860099&quot;&gt;and mathheadinclouds&lt;/a&gt; (I use his test case and\nmy code is several times shorter).&lt;/p&gt;\n&lt;p&gt;Actually, we can use JSON.stringify with a proper &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify&quot; rel=&quot;nofollow noreferrer&quot;&gt;replacer&lt;/a&gt; - if the source object contains multi-references to some object, or contains circular references then we reference it by special path-string (similar to &lt;a href=&quot;https://jsonpath.com/&quot; rel=&quot;nofollow noreferrer&quot;&gt;JSONPath&lt;/a&gt;).&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// JSON.strigify replacer for objects with circ ref&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;refReplacer&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; m = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;(), v = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;(), init = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;field, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; p = m.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;) + (&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;) ? &lt;span class=&quot;hljs-string&quot;&gt;`[&lt;span class=&quot;hljs-subst&quot;&gt;${field}&lt;/span&gt;]`&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; + field);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; isComplex = value === &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(value)\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (isComplex) m.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(value, p);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; pp = v.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(value)||&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; path = p.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/undefined\\.\\.?/&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; val = pp ? &lt;span class=&quot;hljs-string&quot;&gt;`#REF:&lt;span class=&quot;hljs-subst&quot;&gt;${pp[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;[&apos;&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;$&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;$.&apos;&lt;/span&gt;}&lt;/span&gt;&lt;span class=&quot;hljs-subst&quot;&gt;${pp}&lt;/span&gt;`&lt;/span&gt; : value;\n\n    !init ? (init=value) : (val===init ? val=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#REF:$&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(!pp &amp;amp;&amp;amp; isComplex) v.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(value, path);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; val;\n  }\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// TEST&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Generate obj with duplicate/circular references&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;lorem&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;ipsum&apos;&lt;/span&gt; }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;dolor&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n            &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;sit&apos;&lt;/span&gt; },\n            &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;amet&apos;&lt;/span&gt; }\n        }\n    }\n}\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\ntestObject = obj;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; json = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(testObject, &lt;span class=&quot;hljs-title function_&quot;&gt;refReplacer&lt;/span&gt;(), &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Test Object\\n&quot;&lt;/span&gt;, testObject);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;JSON with JSONpath references\\n&quot;&lt;/span&gt;, json);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Parse such JSON content with JSONpath-like references:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Parse JSON content with JSONpath references to object&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;parseRefJSON&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;json&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; objToPath = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; pathToObj = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; o = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(json);\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;traverse&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;parent, field&lt;/span&gt;) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj = parent;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; path = &lt;span class=&quot;hljs-string&quot;&gt;&apos;#REF:$&apos;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (field !== &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;) {\n      obj = parent[field];\n      path = objToPath.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(parent) + (&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(parent) ? &lt;span class=&quot;hljs-string&quot;&gt;`[&lt;span class=&quot;hljs-subst&quot;&gt;${field}&lt;/span&gt;]`&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${field ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; + field : &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;}&lt;/span&gt;`&lt;/span&gt;);\n    }\n\n    objToPath.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(obj, path);\n    pathToObj.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(path, obj);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; ref = pathToObj.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(obj);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (ref) parent[field] = ref;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; f &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj) &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj === &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(obj)) &lt;span class=&quot;hljs-title function_&quot;&gt;traverse&lt;/span&gt;(obj, f);\n  }\n\n  &lt;span class=&quot;hljs-title function_&quot;&gt;traverse&lt;/span&gt;(o);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; o;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// TEST 1&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; json = &lt;span class=&quot;hljs-string&quot;&gt;`\n{\n    &quot;L&quot;: {\n        &quot;L&quot;: {\n            &quot;v&quot;: &quot;lorem&quot;,\n            &quot;uncle&quot;: {\n                &quot;L&quot;: {\n                    &quot;v&quot;: &quot;dolor&quot;,\n                    &quot;uncle&quot;: &quot;#REF:$.L&quot;\n                },\n                &quot;R&quot;: {\n                    &quot;L&quot;: {\n                        &quot;v&quot;: &quot;sit&quot;,\n                        &quot;uncle&quot;: &quot;#REF:$.L.L.uncle.L&quot;\n                    },\n                    &quot;R&quot;: {\n                        &quot;v&quot;: &quot;amet&quot;,\n                        &quot;uncle&quot;: &quot;#REF:$.L.L.uncle.L&quot;\n                    },\n                    &quot;uncle&quot;: &quot;#REF:$.L&quot;\n                }\n            }\n        },\n        &quot;R&quot;: {\n            &quot;v&quot;: &quot;ipsum&quot;,\n            &quot;uncle&quot;: &quot;#REF:$.L.L.uncle&quot;\n        }\n    },\n    &quot;R&quot;: &quot;#REF:$.L.L.uncle&quot;\n}`&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; testObject = &lt;span class=&quot;hljs-title function_&quot;&gt;parseRefJSON&lt;/span&gt;(json);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Test Object\\n&quot;&lt;/span&gt;, testObject);\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// TEST 2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Tests from mathheadinclouds answer: &apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; recovered = testObject;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj = { &lt;span class=&quot;hljs-comment&quot;&gt;// Original object&lt;/span&gt;\n    &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;lorem&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;ipsum&apos;&lt;/span&gt; }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;dolor&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n            &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;sit&apos;&lt;/span&gt; },\n            &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;amet&apos;&lt;/span&gt; }\n        }\n    }\n}\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\n\n[\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;\n].&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;test pass: &apos;&lt;/span&gt; + x));&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;To load/save the resulting JSON content into storage, use the following code:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;localStorage.myObject&lt;/span&gt; = JSON.stringify(testObject, refReplacer())&lt;span class=&quot;hljs-comment&quot;&gt;;  // Save&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;testObject&lt;/span&gt; = parseRefJSON(localStorage.myObject)&lt;span class=&quot;hljs-comment&quot;&gt;;                   // Load&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I suggest using &lt;a href=&quot;https://github.com/pichillilorenzo/jackson-js&quot; rel=&quot;nofollow noreferrer&quot;&gt;Jackson-js&lt;/a&gt;. It is a library that handles serializing and deserializing of Objects while retaining their structure, based on decorators.&lt;/p&gt;\n&lt;p&gt;The library handles all the pitfalls such as cyclic reference, attributes aliasing, etc.&lt;/p&gt;\n&lt;p&gt;Simply describe your class using the @JsonProperty() and @JsonClassType() decorators.&lt;/p&gt;\n&lt;p&gt;Serialize your object using:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-vbnet&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; objectMapper = &lt;span class=&quot;hljs-built_in&quot;&gt;new&lt;/span&gt; ObjectMapper();\nlocalstore.setItem(&lt;span class=&quot;hljs-keyword&quot;&gt;key&lt;/span&gt;, objectMapper.stringify&amp;lt;yourObjectType&amp;gt;(yourObject));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For slightly more detailed explanation, check my answer here:&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;&lt;a href=&quot;https://stackoverflow.com/questions/16261119/typescript-objects-serialization/66706365#66706365&quot;&gt;Typescript objects serialization?&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;And the Jackson-js tutorial here:&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;&lt;a href=&quot;https://itnext.io/jackson-js-powerful-javascript-decorators-to-serialize-deserialize-objects-into-json-and-vice-df952454cf&quot; rel=&quot;nofollow noreferrer&quot;&gt;Jackson-js: Powerful JavaScript decorators to serialize/deserialize objects into JSON and vice versa (Part 1)&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;user&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(user));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Then to retrieve it from the store and convert to an object again:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; user = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;user&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;If&lt;/span&gt; we need to &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; all entries &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; the store we can simply &lt;span class=&quot;hljs-attr&quot;&gt;do&lt;/span&gt;:\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;clear&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n    "],"comment":["\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;BTW, your reading of &quot;structured clone algorithm&quot; is correct, it&apos;s just that the spec was changed from string-only values to this after the implementations were out. I filed bug &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=538142&quot; rel=&quot;nofollow noreferrer&quot;&gt;bugzilla.mozilla.org/show_bug.cgi?id=538142&lt;/a&gt; with mozilla to track this issue.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1026/nickolay&quot; title=&quot;29,668 reputation&quot; class=&quot;comment-user&quot;&gt;Nickolay&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment1934066_2010892&quot;&gt;&lt;span title=&quot;2010-01-06 13:30:05Z, License: CC BY-SA 2.5&quot; class=&quot;relativetime-clean&quot;&gt;Jan 6, 2010 at 13:30&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This seems like a job for indexedDB...&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1233320/markasoftware&quot; title=&quot;11,597 reputation&quot; class=&quot;comment-user&quot;&gt;markasoftware&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment26334182_2010892&quot;&gt;&lt;span title=&quot;2013-08-02 02:06:09Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 2, 2013 at 2:06&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;How about storing an array of Objects in localStorage? I am facing same problem that it is getting converted to string.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/7349145/jayant-pareek&quot; title=&quot;360 reputation&quot; class=&quot;comment-user&quot;&gt;Jayant Pareek&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment75926963_2010892&quot;&gt;&lt;span title=&quot;2017-06-09 19:08:26Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 9, 2017 at 19:08&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;could you instead just serialize the array? like store with JSON stringify then parse again upon loading?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/8355619/brandito&quot; title=&quot;687 reputation&quot; class=&quot;comment-user&quot;&gt;brandito&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment85462110_2010892&quot;&gt;&lt;span title=&quot;2018-03-12 06:35:24Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Mar 12, 2018 at 6:35&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 2 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;You can use &lt;a href=&quot;https://stackoverflow.com/a/44013834/2158270&quot;&gt;localDataStorage&lt;/a&gt; to transparently store javascript data types (Array, Boolean, Date, Float, Integer, String and Object)&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2158270/mac&quot; title=&quot;1,249 reputation&quot; class=&quot;comment-user&quot;&gt;Mac&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment88584890_2010892&quot;&gt;&lt;span title=&quot;2018-06-11 00:54:45Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 11, 2018 at 0:54&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;do observe that any metadata will be removed. you just get an object with the key-value pairs, so any object with behaviour need to be rebuilt.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/200987/oligofren&quot; title=&quot;18,236 reputation&quot; class=&quot;comment-user&quot;&gt;oligofren&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment28465605_2010948&quot;&gt;&lt;span title=&quot;2013-10-07 18:48:42Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 7, 2013 at 18:48&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@CMS can setItem throw some exception if the data is over the capacity ?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/728407/ashish-negi&quot; title=&quot;4,973 reputation&quot; class=&quot;comment-user&quot;&gt;Ashish Negi&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment34509432_2010948&quot;&gt;&lt;span title=&quot;2014-03-26 09:27:36Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Mar 26, 2014 at 9:27&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;... applies to objects with circular references only, &lt;code&gt;JSON.stringify()&lt;/code&gt; expands the referenced object to its full &quot;content&quot; (implicitly stringified) in the object we stringify. See: &lt;a href=&quot;http://stackoverflow.com/a/12659424/2044940&quot;&gt;stackoverflow.com/a/12659424/2044940&lt;/a&gt;&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2044940/codemanx&quot; title=&quot;10,335 reputation&quot; class=&quot;comment-user&quot;&gt;CodeManX&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment38713373_2010948&quot;&gt;&lt;span title=&quot;2014-07-23 16:54:51Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jul 23, 2014 at 16:54&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;The problem with this approach are performance issues, if you have to handle large arrays or objects.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/284577/mark&quot; title=&quot;3,361 reputation&quot; class=&quot;comment-user&quot;&gt;Mark&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment41862886_2010948&quot;&gt;&lt;span title=&quot;2014-10-29 09:35:28Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 29, 2014 at 9:35&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@oligofren true, but as &lt;b&gt;maja&lt;/b&gt; correctly suggested eval() =&amp;gt; , this is one of the good use of , you can easily retrieve function code =&amp;gt; store it as string and then eval() it back :)&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1835470/jave-web&quot; title=&quot;12,444 reputation&quot; class=&quot;comment-user&quot;&gt;jave.web&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment50506216_2010948&quot;&gt;&lt;span title=&quot;2015-07-06 20:03:52Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jul 6, 2015 at 20:03&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I just want to quickly add the usage as it wasn&apos;t immediately clear for me:  &lt;code&gt;var userObject = { \t\tuserId: 24, \t\tname: &apos;Jack Bauer&apos; \t};&lt;/code&gt;  \tAnd to set it \t&lt;code&gt;localStorage.setObject(&apos;user&apos;, userObject);&lt;/code&gt;  \tThen get it back from storage \t&lt;code&gt;userObject = localStorage.getObject(&apos;user&apos;);&lt;/code&gt;  You can even store an array of objects if you want.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/569447/zuallauz&quot; title=&quot;4,288 reputation&quot; class=&quot;comment-user&quot;&gt;zuallauz&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment8481025_3146971&quot;&gt;&lt;span title=&quot;2011-08-16 21:38:07Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 16, 2011 at 21:38&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;It is just boolean expression. Second part are evaluated only if left one is true. In that case result of whole expression will be from right part. It is popular technic based on the way how boolean expressions are evaluated.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/305830/guria&quot; title=&quot;6,868 reputation&quot; class=&quot;comment-user&quot;&gt;Guria&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment9749407_3146971&quot;&gt;&lt;span title=&quot;2011-11-01 21:04:19Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 1, 2011 at 21:04&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I do not see the point of the local variable and the shortcut evaluation here (minor performance improvements aside). If &lt;code&gt;key&lt;/code&gt; is not in the Local Storage, &lt;code&gt;window.localStorage.getItem(key)&lt;/code&gt; returns &lt;code&gt;null&lt;/code&gt;  it does &lt;i&gt;not&lt;/i&gt; throw an &quot;Illegal access&quot; exception  and &lt;code&gt;JSON.parse(null)&lt;/code&gt; returns &lt;code&gt;null&lt;/code&gt; as well  it does &lt;i&gt;not&lt;/i&gt; throw an exception either, neither in Chromium 21 nor per &lt;a href=&quot;http://ecma-international.org/ecma-262/5.1/#sec-15.12.2&quot; rel=&quot;nofollow noreferrer&quot;&gt;ES 5.1 section 15.12.2&lt;/a&gt;, because &lt;code&gt;String(null) === &quot;null&quot;&lt;/code&gt; which can be interpreted as a &lt;a href=&quot;http://json.org/&quot; rel=&quot;nofollow noreferrer&quot;&gt;JSON literal&lt;/a&gt;.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/855543/pointedears&quot; title=&quot;14,354 reputation&quot; class=&quot;comment-user&quot;&gt;PointedEars&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment17274283_3146971&quot;&gt;&lt;span title=&quot;2012-10-08 10:20:17Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 8, 2012 at 10:20&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;The values in Local Storage are always primitive string values. So what this shortcut evaluation does handle is when someone stored &lt;code&gt;&quot;&quot;&lt;/code&gt; (the empty string) before. Because it type-converts to &lt;code&gt;false&lt;/code&gt; and &lt;code&gt;JSON.parse(&quot;&quot;)&lt;/code&gt;, which would throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception, is not called.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/855543/pointedears&quot; title=&quot;14,354 reputation&quot; class=&quot;comment-user&quot;&gt;PointedEars&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment17274881_3146971&quot;&gt;&lt;span title=&quot;2012-10-08 10:42:24Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 8, 2012 at 10:42&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This wont&apos;t work in IE8, so you&apos;re better of using the functions in the confirmed answer if you need to support it.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1031237/ezeke&quot; title=&quot;942 reputation&quot; class=&quot;comment-user&quot;&gt;Ezeke&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment19962374_3146971&quot;&gt;&lt;span title=&quot;2013-01-16 12:15:23Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 16, 2013 at 12:15&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Wrapping CMS&apos; approach up into a function is a good idea, it just needs a feature tests: One for JSON.stringify, one for JSON.parse, and one to test if localStorage can in fact set and retrieve an object. Modifying host objects is not a good idea; I would rather see this as a separate method and not as &lt;code&gt;localStorage.setObject&lt;/code&gt;.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/261439/garrett&quot; title=&quot;2,857 reputation&quot; class=&quot;comment-user&quot;&gt;Garrett&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment4789284_2010994&quot;&gt;&lt;span title=&quot;2010-12-09 01:28:14Z, License: CC BY-SA 2.5&quot; class=&quot;relativetime-clean&quot;&gt;Dec 9, 2010 at 1:28&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 2 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This &lt;code&gt;getObject()&lt;/code&gt; will throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception if the stored value is &lt;code&gt;&quot;&quot;&lt;/code&gt;, because &lt;code&gt;JSON.parse()&lt;/code&gt; cannot handle that. See my edit to Guria&apos;s answer for details.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/855543/pointedears&quot; title=&quot;14,354 reputation&quot; class=&quot;comment-user&quot;&gt;PointedEars&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment17274963_2010994&quot;&gt;&lt;span title=&quot;2012-10-08 10:45:56Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 8, 2012 at 10:45&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Just my two cents, but I&apos;m pretty sure it&apos;s not a good idea to extend objects provided by the vendor like this.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1150718/sethen&quot; title=&quot;10,760 reputation&quot; class=&quot;comment-user&quot;&gt;Sethen&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment38112616_2010994&quot;&gt;&lt;span title=&quot;2014-07-06 18:54:40Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jul 6, 2014 at 18:54&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 3 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;I completely agree with @Sethen . Please don&apos;t monkey-patch globals implemented by the browser like this. It can break code and it&apos;s not future-compatible with browsers that may ship a &lt;code&gt;setObject&lt;/code&gt; method in this global in the future.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/247696/flimm&quot; title=&quot;117,480 reputation&quot; class=&quot;comment-user&quot;&gt;Flimm&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment124417347_2010994&quot;&gt;&lt;span title=&quot;2021-12-16 18:45:33Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Dec 16, 2021 at 18:45&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This was almost exactly what i needed. Just had to add \t\t\t\tif (value == null) { return false } before the comment, otherwise it resulted in error when checking the existence of a key on localStorage.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/902480/francesco-frapporti&quot; title=&quot;5,015 reputation&quot; class=&quot;comment-user&quot;&gt;Francesco Frapporti&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment12213712_4762411&quot;&gt;&lt;span title=&quot;2012-03-08 20:09:48Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Mar 8, 2012 at 20:09&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This is pretty cool actually. Agree with @FrancescoFrapporti you need an if in there for null values. I also added an &apos; || value[0] == &quot;[&quot; &apos; test in case there in an array in there.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/468855/rob-james&quot; title=&quot;1,212 reputation&quot; class=&quot;comment-user&quot;&gt;rob_james&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment12293071_4762411&quot;&gt;&lt;span title=&quot;2012-03-13 00:06:59Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Mar 13, 2012 at 0:06&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 2 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Good point, I&apos;ll edit this. Although you don&apos;t need the null part, but if you do I recommend three ===. If you use JSHint or JSLint you will be warned against using ==.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/761547/alex-grande&quot; title=&quot;7,781 reputation&quot; class=&quot;comment-user&quot;&gt;Alex Grande&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment17967203_4762411&quot;&gt;&lt;span title=&quot;2012-11-02 15:15:19Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Nov 2, 2012 at 15:15&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;And for non-ninjas (like me), could someone please provide a usage example for this answer? Is it: &lt;code&gt;data.set(&apos;username&apos;: &apos;ifedi&apos;, &apos;fullname&apos;: { firstname: &apos;Ifedi&apos;, lastname: &apos;Okonkwo&apos;});&lt;/code&gt;?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2554788/ifedi-okonkwo&quot; title=&quot;3,108 reputation&quot; class=&quot;comment-user&quot;&gt;Ifedi Okonkwo&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment49937144_4762411&quot;&gt;&lt;span title=&quot;2015-06-20 08:13:34Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jun 20, 2015 at 8:13&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Your set function won&apos;t work if you want to set a key to 0, &quot;&quot; or any other value that converts to false. Instead you should write: &lt;code&gt;if (!key || value === undefined) return;&lt;/code&gt; This will also let you store a value of &apos;null&apos; for a key.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/3596943/fredrik-borgstrom&quot; title=&quot;2,190 reputation&quot; class=&quot;comment-user&quot;&gt;Fredrik_Borgstrom&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment94830816_4762411&quot;&gt;&lt;span title=&quot;2019-01-01 15:51:13Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 1, 2019 at 15:51&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Therefore, and needless to say - storing data into Storage should be based on the sole  premise of &lt;b&gt;copies&lt;/b&gt; of simple data. Not live Objects.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/383904/roko-c-buljan&quot; title=&quot;181,290 reputation&quot; class=&quot;comment-user&quot;&gt;Roko C. Buljan&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment107626671_27013704&quot;&gt;&lt;span title=&quot;2020-03-24 13:04:08Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Mar 24, 2020 at 13:04&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Probably would use a custom &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#tojson_behavior&quot; rel=&quot;nofollow noreferrer&quot;&gt;toJSON&lt;/a&gt; instead of toString() these days. No symmetric equivalent for parsing, unfortunately.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/200987/oligofren&quot; title=&quot;18,236 reputation&quot; class=&quot;comment-user&quot;&gt;oligofren&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment124422468_27013704&quot;&gt;&lt;span title=&quot;2021-12-16 23:32:55Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Dec 16, 2021 at 23:32&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;toJSON won&apos;t support types that have no direct json representation like date, regex, function and many other, newer types that were added to JavaScript after I wrote this answer.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2224996/maja&quot; title=&quot;15,918 reputation&quot; class=&quot;comment-user&quot;&gt;maja&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment124438052_27013704&quot;&gt;&lt;span title=&quot;2021-12-17 16:10:44Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Dec 17, 2021 at 16:10&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Why &quot;+&quot; in front of &lt;code&gt;localStorage.num&lt;/code&gt; (&lt;code&gt;num = +localStorage.num&lt;/code&gt;)?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/63550/peter-mortensen&quot; title=&quot;30,018 reputation&quot; class=&quot;comment-user&quot;&gt;Peter Mortensen&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment127309844_27013704&quot;&gt;&lt;span title=&quot;2022-04-28 21:36:56Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 28 at 21:36&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 2 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@PeterMortensen to convert the stored string back into a number&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2224996/maja&quot; title=&quot;15,918 reputation&quot; class=&quot;comment-user&quot;&gt;maja&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment127314635_27013704&quot;&gt;&lt;span title=&quot;2022-04-29 06:04:01Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 29 at 6:04&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@SuperUberDuper\tjStorage requires Prototype, MooTools or jQuery&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1675/jprogrammer&quot; title=&quot;2,710 reputation&quot; class=&quot;comment-user&quot;&gt;JProgrammer&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment65813850_7156082&quot;&gt;&lt;span title=&quot;2016-08-30 23:02:32Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 30, 2016 at 23:02&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This is a very handy set of methods for manipulating arrays stored in localStorage or sessionStorage, and deserves much more credit than it&apos;s attracted. @Andy Lorenz Thanks for taking the time to share!&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1200867/velojet&quot; title=&quot;838 reputation&quot; class=&quot;comment-user&quot;&gt;Velojet&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment78542239_23516713&quot;&gt;&lt;span title=&quot;2017-08-21 08:19:13Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Aug 21, 2017 at 8:19&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;It&apos;s generally not a good idea to monkey patch a global shipped by the browser like this. It can cause other code to break, and it&apos;s not forwards compatible with future browsers that may want to ship their own identically named methods in the global.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/247696/flimm&quot; title=&quot;117,480 reputation&quot; class=&quot;comment-user&quot;&gt;Flimm&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment124417422_23516713&quot;&gt;&lt;span title=&quot;2021-12-16 18:49:25Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Dec 16, 2021 at 18:49&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Flimm I agree its GENERALLY not a good idea to do this, but that opinion is based much more on theory than practice.  e.g. Since my posting in 2014 nothing in the localStorage or sessionStorage implementations have changed that have been compromised. And I doubt they ever will to be honest. But if that possibility was a concern for someone - and it is a personal decision to consider the risk, not a &apos;thou shalt/not&apos; - my answer could easily be used as a blueprint to implement a custom array class that wraps around actual localStorage/sessionStorage.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/2208713/andy-lorenz&quot; title=&quot;2,589 reputation&quot; class=&quot;comment-user&quot;&gt;Andy Lorenz&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment124482959_23516713&quot;&gt;&lt;span title=&quot;2021-12-20 11:36:39Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Dec 20, 2021 at 11:36&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Function serialization/deserialization is unreliable because &lt;a href=&quot;http://ecma-international.org/ecma-262/5.1/#sec-15.3.4&quot; rel=&quot;nofollow noreferrer&quot;&gt;it is implementation-dependent&lt;/a&gt;. Also, you want to replace &lt;code&gt;c.f[k] = escape(a[k]);&lt;/code&gt;  with the Unicode-safe &lt;code&gt;c.f[k] = encodeURIComponent(a[k]);&lt;/code&gt; and &lt;code&gt;eval(&apos;b.&apos; + k + &apos; = &apos; + unescape(data.f[k]));&lt;/code&gt; with &lt;code&gt;b[k] = eval(&quot;(&quot; + decodeURIComponent(data.f[k]) + &quot;)&quot;);&lt;/code&gt;. The parentheses are required because your function, if serialized properly, is likely to be anonymous, which is not as-is a valid /Statement/ (so &lt;code&gt;eval()&lt;/code&gt;) would throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception otherwise).&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/855543/pointedears&quot; title=&quot;14,354 reputation&quot; class=&quot;comment-user&quot;&gt;PointedEars&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment17275149_5558677&quot;&gt;&lt;span title=&quot;2012-10-08 10:54:19Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 8, 2012 at 10:54&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 5 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;And &lt;code&gt;typeof&lt;/code&gt; is an &lt;i&gt;operator&lt;/i&gt;, do not write it as if it was a function. Replace &lt;code&gt;typeof(a[k])&lt;/code&gt; with &lt;code&gt;typeof a[k]&lt;/code&gt;.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/855543/pointedears&quot; title=&quot;14,354 reputation&quot; class=&quot;comment-user&quot;&gt;PointedEars&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment17275216_5558677&quot;&gt;&lt;span title=&quot;2012-10-08 10:57:19Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 8, 2012 at 10:57&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;In addition to applying my suggestions and emphasizing the unreliability of the approach, I have fixed the following bugs: 1. Not all variables were declared. 2. &lt;code&gt;for&lt;/code&gt;-&lt;code&gt;in&lt;/code&gt; was not filtered for own properties. 3. Code style, including referencing, was inconsistent.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/855543/pointedears&quot; title=&quot;14,354 reputation&quot; class=&quot;comment-user&quot;&gt;PointedEars&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment17283936_5558677&quot;&gt;&lt;span title=&quot;2012-10-08 16:17:41Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Oct 8, 2012 at 16:17&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@PointedEars what practical difference does this make? the spec says &lt;code&gt;the use and placement of white space, line terminators, and semicolons within the representation String is implementation-dependent.&lt;/code&gt;  I don&apos;t see any functional differences.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/543873/michael&quot; title=&quot;8,519 reputation&quot; class=&quot;comment-user&quot;&gt;Michael&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment31480173_5558677&quot;&gt;&lt;span title=&quot;2014-01-06 19:34:47Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 6, 2014 at 19:34&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 1 time&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;@Michael The part that you quoted starts with &lt;code&gt;Note *in particular* that &lt;/code&gt;. But the return value specification starts with &lt;code&gt;An implementation-dependent representation of the function is returned. This representation has the syntax of a FunctionDeclaration.&lt;/code&gt; The return value can be &lt;code&gt;function foo () {}&lt;/code&gt;  assuming a &lt;i&gt;conforming&lt;/i&gt; implementation.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/855543/pointedears&quot; title=&quot;14,354 reputation&quot; class=&quot;comment-user&quot;&gt;PointedEars&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment31672810_5558677&quot;&gt;&lt;span title=&quot;2014-01-11 13:17:38Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 11, 2014 at 13:17&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 4 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This is a brilliant resource and just what I need. I&apos;m doing Ionic apps with AngularJS where I need to save certain javascript objects in localStorage and up to this point I&apos;ve just been doing JSON.parse and JSON.stringify, and they work, but it&apos;s a bit more cumbersome than being able to just use a utility like this one. I&apos;m going to try it.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/957860/nmuta&quot; title=&quot;345 reputation&quot; class=&quot;comment-user&quot;&gt;Nmuta&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment83713633_44013834&quot;&gt;&lt;span title=&quot;2018-01-21 03:30:06Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jan 21, 2018 at 3:30&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Thanks,i got concept of localstorage cleared&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/6440372/ashish-kamble&quot; title=&quot;2,395 reputation&quot; class=&quot;comment-user&quot;&gt;Ashish Kamble&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment122294537_59835127&quot;&gt;&lt;span title=&quot;2021-09-15 12:18:06Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Sep 15, 2021 at 12:18&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;Still working on my readme, but &lt;a href=&quot;https://github.com/JDMcKinstry/localStorageHelper&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;b&gt;my version&lt;/b&gt;&lt;/a&gt; doesn&apos;t &lt;i&gt;require&lt;/i&gt; jQuery, as it appears persisto does, but it does provide an alternative for dealing with jQuery element Objects. I will add more in the near future, as I work with it more, to help it further handle different jQuery Objects and maintain things like persistent data. Also, +1 for trying to provide a simpler solution! Also, it uses all the traditional methods of &lt;code&gt;localStroage&lt;/code&gt;; &lt;i&gt;exp:&lt;/i&gt; &lt;code&gt;var lsh = new localStorageHelper(); lsh.setItem(&apos;bob&apos;, &apos;bill&apos;);&lt;/code&gt; Also includes events.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/900807/spyk3hh&quot; title=&quot;21,944 reputation&quot; class=&quot;comment-user&quot;&gt;SpYk3HH&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment64045837_37865455&quot;&gt;&lt;span title=&quot;2016-07-11 19:28:11Z, License: CC BY-SA 3.0&quot; class=&quot;relativetime-clean&quot;&gt;Jul 11, 2016 at 19:28&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n                        &lt;span title=&quot;this comment was edited 3 times&quot;&gt;\n                            &lt;svg aria-hidden=&quot;true&quot; class=&quot;va-text-bottom o50 svg-icon iconPencilSm&quot; width=&quot;14&quot; height=&quot;14&quot; viewBox=&quot;0 0 14 14&quot;&gt;&lt;path d=&quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;\n                        &lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;&lt;code&gt;Object.observe&lt;/code&gt; is deprecated in all major browsers, now.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/247696/flimm&quot; title=&quot;117,480 reputation&quot; class=&quot;comment-user&quot;&gt;Flimm&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment124417489_33976225&quot;&gt;&lt;span title=&quot;2021-12-16 18:52:18Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Dec 16, 2021 at 18:52&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;It&apos;s generally not a good idea to monkey-patch a global shipped by the browser. It can break other code, and it&apos;s not future-compatible.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/247696/flimm&quot; title=&quot;117,480 reputation&quot; class=&quot;comment-user&quot;&gt;Flimm&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment124417507_66945310&quot;&gt;&lt;span title=&quot;2021-12-16 18:53:31Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Dec 16, 2021 at 18:53&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;It&apos;s generally not a good idea to monkey patch globals like this. It can break code and it&apos;s not future compatible.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/247696/flimm&quot; title=&quot;117,480 reputation&quot; class=&quot;comment-user&quot;&gt;Flimm&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment124417453_28441092&quot;&gt;&lt;span title=&quot;2021-12-16 18:50:42Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Dec 16, 2021 at 18:50&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;danott&apos;s answer is now deleted. It was deleted without any explanation  near the end of 2019 in a mass deletion of answers by a moderator.&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/63550/peter-mortensen&quot; title=&quot;30,018 reputation&quot; class=&quot;comment-user&quot;&gt;Peter Mortensen&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment127035709_28441092&quot;&gt;&lt;span title=&quot;2022-04-15 23:37:05Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Apr 15 at 23:37&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        ","\n            &lt;div class=&quot;comment-body js-comment-edit-hide&quot;&gt;\n                \n                &lt;span class=&quot;comment-copy&quot;&gt;This is a 10-year-old question. Do you think your answer adds anything not already covered by the other answers?&lt;/span&gt;\n                \n              &lt;div class=&quot;d-inline-flex ai-center&quot;&gt;\n&amp;nbsp;&lt;a href=&quot;/users/1175/kristopher-johnson&quot; title=&quot;79,416 reputation&quot; class=&quot;comment-user owner&quot;&gt;Kristopher Johnson&lt;/a&gt;\n                &lt;/div&gt;\n                &lt;span class=&quot;comment-date&quot; dir=&quot;ltr&quot;&gt;&lt;a class=&quot;comment-link&quot; href=&quot;#comment106298093_60088002&quot;&gt;&lt;span title=&quot;2020-02-06 18:49:24Z, License: CC BY-SA 4.0&quot; class=&quot;relativetime-clean&quot;&gt;Feb 6, 2020 at 18:49&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        "],"id":306,"title":"How to store objects in HTML5 localStorage","content":"\n                \n&lt;p&gt;I&apos;d like to store a JavaScript object in HTML5 &lt;code&gt;localStorage&lt;/code&gt;, but my object is apparently being converted to a string.&lt;/p&gt;\n&lt;p&gt;I can store and retrieve primitive JavaScript types and arrays using &lt;code&gt;localStorage&lt;/code&gt;, but objects don&apos;t seem to work.  Should they?&lt;/p&gt;\n&lt;p&gt;Here&apos;s my code:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; testObject = { &lt;span class=&quot;hljs-string&quot;&gt;&apos;one&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;two&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;three&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; };\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;typeof testObject: &apos;&lt;/span&gt; + &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; testObject);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;testObject properties:&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; prop &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; testObject) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;  &apos;&lt;/span&gt; + prop + &lt;span class=&quot;hljs-string&quot;&gt;&apos;: &apos;&lt;/span&gt; + testObject[prop]);\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Put the object into storage&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;testObject&apos;&lt;/span&gt;, testObject);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Retrieve the object from storage&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; retrievedObject = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;testObject&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;typeof retrievedObject: &apos;&lt;/span&gt; + &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; retrievedObject);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Value of retrievedObject: &apos;&lt;/span&gt; + retrievedObject);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The console output is&lt;/p&gt;\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;typeof testObject: object\ntestObject properties:\n  one: 1\n  two: 2\n  three: 3\ntypeof retrievedObject: string\nValue of retrievedObject: [object Object]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It looks to me like the &lt;code&gt;setItem&lt;/code&gt; method is converting the input to a string before storing it.&lt;/p&gt;\n&lt;p&gt;I see this behavior in Safari, Chrome, and Firefox, so I assume it&apos;s my misunderstanding of the &lt;a href=&quot;http://www.w3.org/TR/webstorage/&quot; rel=&quot;noreferrer&quot;&gt;HTML5 Web Storage&lt;/a&gt; specification, not a browser-specific bug or limitation.&lt;/p&gt;\n&lt;p&gt;I&apos;ve tried to make sense of the &lt;em&gt;structured clone&lt;/em&gt; algorithm described in &lt;em&gt;&lt;a href=&quot;https://html.spec.whatwg.org/multipage/infrastructure.html#infrastructure&quot; rel=&quot;noreferrer&quot;&gt;2 Common infrastructure&lt;/a&gt;&lt;/em&gt;.  I don&apos;t fully understand what it&apos;s saying, but maybe my problem has to do with my object&apos;s properties not being enumerable (???).&lt;/p&gt;\n&lt;p&gt;Is there an easy workaround?&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;Update: The W3C eventually changed their minds about the structured-clone specification, and decided to change the spec to match the implementations.  See &lt;em&gt;&lt;a href=&quot;https://www.w3.org/Bugs/Public/show_bug.cgi?id=12111&quot; rel=&quot;noreferrer&quot;&gt;12111  spec for Storage object getItem(key) method does not match implementation behavior&lt;/a&gt;&lt;/em&gt;. So this question is no longer 100% valid, but the answers still may be of interest.&lt;/p&gt;\n    ","slug":"how-to-store-objects-in-html5-localstorage-1657387568907","postType":"QUESTION","createdAt":"2022-07-09T17:26:08.000Z","updatedAt":"2022-07-09T17:26:08.000Z","tags":[{"id":1822,"name":"local-storage","slug":"local-storage","createdAt":"2022-07-09T17:26:09.000Z","updatedAt":"2022-07-09T17:26:09.000Z","Questions_Tags":{"questionId":306,"tagId":1822}}]}},"__N_SSG":true}