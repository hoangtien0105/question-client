<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/2eccd4d47c856f2b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2eccd4d47c856f2b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-25e5079ab4bd6ecd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-20edbe0b078add93.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/613-1e0aa2b2023820bb.js" defer=""></script><script src="/_next/static/chunks/495-bb1d5b202c02d7f2.js" defer=""></script><script src="/_next/static/chunks/471-84c36aa98dd4107c.js" defer=""></script><script src="/_next/static/chunks/81-096e453de8a27667.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-e3d1b60e109d3ba1.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_buildManifest.js" defer=""></script><script src="/_next/static/4Y8KGE-c2lolBeBmcum_I/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">.hFcsiD code{padding:5px;color:hsl(210deg 8% 15%);background-color:hsl(210deg 8% 90%);border-radius:3px;}/*!sc*/
data-styled.g5[id="sc-6e32c308-0"]{content:"hFcsiD,"}/*!sc*/
.ljvTUN .comment-item .comment-body .d-inline-flex.ai-center{text-align:right;}/*!sc*/
.ljvTUN .comment-item .comment-body .comment-date{float:right;}/*!sc*/
data-styled.g6[id="sc-6e32c308-1"]{content:"ljvTUN,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-9099c029-0 cIPEih"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo"/><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Hunter</span></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/utf-8-all-the-way-through-1657384323434#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="sc-c5440139-0 figLul question my-5"><div class="sc-6e32c308-0 hFcsiD flex question-header items-center justify-center"><div class="rounded-xl border p-5 shadow-md w-9/12 bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/utf-8-all-the-way-through-1657384323434">UTF-8 all the way through</a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/linux">linux</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/apache">apache</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/utf-8">utf-8</a></div></div><div class="question-content mt-5">
                
<p>
I'm setting up a new server and want to support UTF-8 fully in my web application. I have tried this in the past on existing servers and always seem to end up having to fall back to ISO-8859-1.</p>

<p>Where exactly do I need to set the encoding/charsets? I'm aware that I need to configure Apache, MySQL, and PHP to do this â€” is there some standard checklist I can follow, or perhaps troubleshoot where the mismatches occur?</p>

<p>This is for a new Linux server, running MySQL 5, PHP, 5 and Apache 2.</p>
    </div></div></div><div class="sc-6e32c308-1 ljvTUN flex text-xs pl-10 flex-col comment items-center justify-center"><h4 class="text-left mt-10 text-lg font-semibold">Comments</h4><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">Here's an introduction to encodings in general and encodings in PHP in particular: <a href="http://kunststube.net/encoding/" rel="nofollow noreferrer">What Every Programmer Absolutely, Positively Needs To Know About Encodings And Character Sets To Work With Text</a></span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/476/deceze" title="493,533 reputation" class="comment-user">deceze</a>
<span class="mod-flair " title="Moderator"></span>                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment25539384_279170"><span title="2013-07-09 19:33:26Z, License: CC BY-SA 3.0" class="relativetime-clean">Jul 9, 2013 at 19:33</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">Some recent <a href="https://www.reddit.com/r/PHP/comments/30v26b/is_unicode_support_going_to_make_it_into_php7/" rel="nofollow noreferrer">discussions about PHP 7</a> indicate that there are no changes in the "officially abandoned" position of 2010... There are something more about "PHP7 and UTF-8"?</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/287948/peter-krauss" title="12,467 reputation" class="comment-user">Peter Krauss</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment53305441_279170"><span title="2015-09-23 06:02:09Z, License: CC BY-SA 3.0" class="relativetime-clean">Sep 23, 2015 at 6:02</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><div class="comment-item w-9/12 border-t divide-y-8">
            <div class="comment-body js-comment-edit-hide">
                
                <span class="comment-copy">This problem is common. But there is no shortcut solution, you will have to setup <code>utf-8</code> for each of them seprately - MySQL 5, PHP 5 OR Apache 2.</span>
                
              <div class="d-inline-flex ai-center">
&nbsp;<a href="/users/1133932/manish-shrivastava" title="28,489 reputation" class="comment-user">Manish Shrivastava</a>
                </div>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment70637257_279170"><span title="2017-01-18 14:00:18Z, License: CC BY-SA 3.0" class="relativetime-clean">Jan 18, 2017 at 14:00</span></a></span>
            </div>
        </div><span class="divide-x-8 "></span><button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">See more</button></div><div class="sc-6e32c308-2 bFXWFO"><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Data Storage</strong>:</p>
<ul>
<li><p>Specify the <code>utf8mb4</code> character set on all tables and text columns in your database.  This makes MySQL physically store and retrieve values encoded natively in UTF-8.  Note that MySQL will implicitly use <code>utf8mb4</code> encoding if a <code>utf8mb4_*</code> collation is specified (without any explicit character set).</p>
</li>
<li><p>In older versions of MySQL (&lt; 5.5.3), you'll unfortunately be forced to use simply <code>utf8</code>, which only supports a subset of Unicode characters.  I wish I were kidding.</p>
</li>
</ul>
<p><strong>Data Access</strong>:</p>
<ul>
<li><p>In your application code (e.g. PHP), in whatever DB access method you use, you'll need to set the connection charset to <code>utf8mb4</code>.  This way, MySQL does no conversion from its native UTF-8 when it hands data off to your application and vice versa.</p>
</li>
<li><p>Some drivers provide their own mechanism for configuring the connection character set, which both updates its own internal state and informs MySQL of the encoding to be used on the connectionthis is usually the preferred approach.   In PHP:</p>
<ul>
<li><p>If you're using the <a href="http://www.php.net/manual/en/book.pdo.php" rel="noreferrer">PDO</a> abstraction layer with PHP  5.3.6, you can specify <code>charset</code> in the <a href="http://php.net/manual/en/ref.pdo-mysql.connection.php" rel="noreferrer">DSN</a>:</p>
<pre class="default s-code-block"><code class="hljs language-php"> <span class="hljs-variable">$dbh</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(<span class="hljs-string">'mysql:charset=utf8mb4'</span>);
</code></pre>
</li>
<li><p>If you're using <a href="http://www.php.net/manual/en/book.mysqli.php" rel="noreferrer">mysqli</a>, you can call <a href="http://php.net/manual/en/mysqli.set-charset.php" rel="noreferrer"><code>set_charset()</code></a>:</p>
<pre class="default s-code-block"><code class="hljs language-php">  <span class="hljs-variable">$mysqli</span>-&gt;<span class="hljs-title function_ invoke__">set_charset</span>(<span class="hljs-string">'utf8mb4'</span>);       <span class="hljs-comment">// object oriented style</span>
  <span class="hljs-title function_ invoke__">mysqli_set_charset</span>(<span class="hljs-variable">$link</span>, <span class="hljs-string">'utf8mb4'</span>);  <span class="hljs-comment">// procedural style</span>
</code></pre>
</li>
<li><p>If you're stuck with plain <a href="http://php.net/manual/en/book.mysql.php" rel="noreferrer">mysql</a> but happen to be running PHP  5.2.3, you can call <a href="http://php.net/manual/en/function.mysql-set-charset.php" rel="noreferrer"><code>mysql_set_charset</code></a>.</p>
</li>
</ul>
</li>
<li><p>If the driver does not provide its own mechanism for setting the connection character set, you may have to issue a query to tell MySQL how your application expects data on the connection to be encoded: <a href="http://dev.mysql.com/doc/en/charset-connection.html" rel="noreferrer"><code>SET NAMES 'utf8mb4'</code></a>.</p>
</li>
<li><p>The same consideration regarding <code>utf8mb4</code>/<code>utf8</code> applies as above.</p>
</li>
</ul>
<p><strong>Output</strong>:</p>
<ul>
<li>UTF-8 should be set in the HTTP header, such as <code>Content-Type: text/html; charset=utf-8</code>. You can achieve that either by setting <a href="http://www.php.net/manual/en/ini.core.php#ini.default-charset" rel="noreferrer"><code>default_charset</code></a> in php.ini (preferred), or manually using <code>header()</code> function.</li>
<li>If your application transmits text to other systems, they will also need to be informed of the character encoding.  With web applications, the browser must be informed of the encoding in which data is sent (through HTTP response headers or <a href="https://stackoverflow.com/q/4696499">HTML metadata</a>).</li>
<li>When encoding the output using <code>json_encode()</code>, add <code>JSON_UNESCAPED_UNICODE</code> as a second parameter.</li>
</ul>
<p><strong>Input</strong>:</p>
<ul>
<li>Browsers will submit data in the character set specified for the document, hence nothing particular has to be done on the input.</li>
<li>In case you have doubts about request encoding (in case it could be tampered with), you may verify every received string as being valid UTF-8 before you try to store it or use it anywhere.  PHP's <a href="http://php.net/manual/en/function.mb-check-encoding.php" rel="noreferrer"><code>mb_check_encoding()</code></a> does the trick, but you have to use it religiously.  There's really no way around this, as malicious clients can submit data in whatever encoding they want, and I haven't found a trick to get PHP to do this for you reliably.</li>
</ul>
<p><strong>Other Code Considerations</strong>:</p>
<ul>
<li><p>Obviously enough, all files you'll be serving (PHP, HTML, JavaScript, etc.) should be encoded in valid UTF-8.</p>
</li>
<li><p>You need to make sure that every time you process a UTF-8 string, you do so safely.  This is, unfortunately, the hard part.  You'll probably want to make extensive use of PHP's <a href="http://www.php.net/manual/en/book.mbstring.php" rel="noreferrer"><code>mbstring</code></a> extension.</p>
</li>
<li><p><strong>PHP's built-in string operations are <em>not</em> by default UTF-8 safe.</strong>  There are some things you can safely do with normal PHP string operations (like concatenation), but for most things you should use the equivalent <code>mbstring</code> function.</p>
</li>
<li><p>To know what you're doing (read: not mess it up), you really need to know UTF-8 and how it works on the lowest possible level.  Check out any of the links from <a href="http://www.utf8.com/" rel="noreferrer">utf8.com</a> for some good resources to learn everything you need to know.</p>
</li>
</ul>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I'd like to add one thing to <a href="https://stackoverflow.com/questions/279170/utf-8-all-the-way-through#279279">chazomaticus' excellent answer</a>:</p>

<p>Don't forget the META tag either (like this, or <a href="http://www.w3.org/International/questions/qa-html-encoding-declarations#quicklookup" rel="noreferrer">the HTML4 or XHTML version of it</a>):</p>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
</code></pre>

<p>That seems trivial, but IE7 has given me problems with that before.</p>

<p>I was doing everything right; the database, database connection and Content-Type HTTP header were all set to UTF-8, and it worked fine in all other browsers, but Internet Explorer still insisted on using the "Western European" encoding.</p>

<p>It turned out the page was missing the META tag. Adding that solved the problem.</p>

<p><strong>Edit:</strong></p>

<p>The W3C actually has a rather large <a href="http://www.w3.org/International/" rel="noreferrer">section dedicated to I18N</a>. They have a number of articles related to this issue  describing the HTTP, (X)HTML and CSS side of things:</p>

<ul>
<li><a href="http://www.w3.org/International/questions/qa-changing-encoding" rel="noreferrer">FAQ: Changing (X)HTML page encoding to UTF-8</a></li>
<li><a href="http://www.w3.org/International/questions/qa-html-encoding-declarations" rel="noreferrer">Declaring character encodings in HTML</a></li>
<li><a href="http://www.w3.org/International/tutorials/tutorial-char-enc/" rel="noreferrer">Tutorial: Character sets &amp; encodings in XHTML, HTML and CSS</a></li>
<li><a href="http://www.w3.org/International/O-HTTP-charset" rel="noreferrer">Setting the HTTP charset parameter</a></li>
</ul>

<p>They recommend using both the HTTP header and HTML meta tag (or XML declaration in case of XHTML served as XML).</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In addition to setting <code>default_charset</code> in php.ini, you can send the correct charset using <code>header()</code> from within your code, before any output:</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">'Content-Type: text/html; charset=utf-8'</span>);
</code></pre>
<p>Working with Unicode in PHP is easy as long as you realize that most of the <strong>string functions don't work with Unicode, and some might mangle strings completely</strong>. PHP considers "characters" to be 1 byte long. Sometimes this is okay (for example, <a href="https://www.php.net/manual/en/function.explode.php" rel="nofollow noreferrer">explode()</a> only looks for a byte sequence and uses it as a separator -- so it doesn't matter what actual characters you look for). But other times, when the function is actually designed to work on <em>characters</em>, PHP has no idea that your text has multi-byte characters that are found with Unicode.</p>
<p>A good library to check into is <a href="http://phputf8.sourceforge.net/" rel="nofollow noreferrer">phputf8</a>. This rewrites all of the "bad" functions so you can safely work on UTF8 strings. There are extensions like the <a href="https://www.php.net/manual/en/book.mbstring.php" rel="nofollow noreferrer">mb_string</a> extension that try to do this for you, too, but I prefer using the library because it's more portable (but I write mass-market products, so that's important for me). But phputf8 can use mb_string behind the scenes, anyway, to increase performance.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
<p><strong>Warning:</strong> This answer applies to PHP 5.3.5 and lower. Do not use it for PHP version 5.3.6 (released in March 2011) or later.</p>
<p>Compare with <a href="https://stackoverflow.com/a/21373793/367456">Palec's answer to <em>PDO + MySQL and broken UTF-8 encoding</em></a>.</p>
</blockquote>
<hr>
<p>I found an issue with someone using <a href="https://en.wikipedia.org/wiki/PHP#Development_and_community" rel="nofollow noreferrer">PDO</a> and the answer was to use this for the PDO connection string:</p>
<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-variable">$pdo</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(
    <span class="hljs-string">'mysql:host=mysql.example.com;dbname=example_db'</span>,
    <span class="hljs-string">"username"</span>,
    <span class="hljs-string">"password"</span>,
    <span class="hljs-keyword">array</span>(PDO::<span class="hljs-variable constant_">MYSQL_ATTR_INIT_COMMAND</span> =&gt; <span class="hljs-string">"SET NAMES utf8"</span>));
</code></pre>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In my case, I was using <code>mb_split</code>, which uses regular expressions.  Therefore I also had to manually make sure the regular expression  encoding was UTF-8 by doing <code>mb_regex_encoding('UTF-8');</code></p>
<p>As a side note, I also discovered by running <code>mb_internal_encoding()</code> that the internal encoding wasn't UTF-8, and I changed that by running <code>mb_internal_encoding("UTF-8");</code>.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>First of all, if you are in PHP before 5.3 then no. You've got a ton of problems to tackle.</p>
<p>I am surprised that none has mentioned the <a href="http://php.net/intl" rel="nofollow noreferrer"><strong>intl</strong></a> library, the one that has good support for <strong>Unicode</strong>, <strong>graphemes</strong>, <strong>string operations</strong>, <strong>localisation</strong> and many more, see below.</p>
<p>I will quote some information about Unicode support in PHP by <strong>Elizabeth Smith's</strong> <a href="http://www.slideshare.net/auroraeosrose/using-unicode-with-php" rel="nofollow noreferrer">slides</a> at <strong>PHPBenelux'14</strong></p>
<h2><strong>INTL</strong></h2>
<p>Good:</p>
<ul>
<li>Wrapper around ICU library</li>
<li>Standardised locales, set locale per script</li>
<li>Number formatting</li>
<li>Currency formatting</li>
<li>Message formatting (replaces gettext)</li>
<li>Calendars, dates, time zone and time</li>
<li>Transliterator</li>
<li>Spoofchecker</li>
<li>Resource bundles</li>
<li>Convertors</li>
<li>IDN support</li>
<li>Graphemes</li>
<li>Collation</li>
<li>Iterators</li>
</ul>
<p>Bad:</p>
<ul>
<li>Does not support zend_multibyte</li>
<li>Does not support HTTP input output conversion</li>
<li>Does not support function overloading</li>
</ul>
<h2><strong>mb_string</strong></h2>
<ul>
<li>Enables zend_multibyte support</li>
<li>Supports transparent HTTP in/out encoding</li>
<li>Provides some wrappers for functionality such as strtoupper</li>
</ul>
<h2><strong>ICONV</strong></h2>
<ul>
<li>Primary for charset conversion</li>
<li>Output buffer handler</li>
<li>mime encoding functionality</li>
<li>conversion</li>
<li>some string helpers (len, substr, strpos, strrpos)</li>
<li>Stream Filter <code>stream_filter_append($fp, 'convert.iconv.ISO-2022-JP/EUC-JP')</code></li>
</ul>
<h2><strong>DATABASES</strong></h2>
<ul>
<li>MySQL: Charset and collation on tables and on the connection (not the collation). Also, don't use mysql - mysqli or PDO</li>
<li>postgresql: pg_set_client_encoding</li>
<li>sqlite(3): Make sure it was compiled with Unicode and intl support</li>
</ul>
<h2><strong>Some other gotchas</strong></h2>
<ul>
<li>You cannot use Unicode filenames with PHP and windows unless you use a 3rd part extension.</li>
<li>Send everything in ASCII if you are using exec, proc_open and other command line calls</li>
<li>Plain text is not plain text, files have encodings</li>
<li>You can convert files on the fly with the iconv filter</li>
</ul>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The only thing I would add to these amazing answers is to emphasize on saving your files in UTF-8 encoding, I have noticed that browsers accept this property over setting UTF-8 as your code encoding. Any decent text editor will show you this. For example, <a href="https://en.wikipedia.org/wiki/Notepad%2B%2B" rel="nofollow noreferrer">Notepad++</a> has a menu option for file encoding, and it shows you the current encoding and enables you to change it. For all my PHP files I use UTF-8 without a <a href="https://en.wikipedia.org/wiki/Byte_order_mark" rel="nofollow noreferrer">BOM</a>.</p>
<p>Sometime ago I had someone ask me to add UTF-8 support for a PHP and MySQL application designed by someone else. I noticed that all files were encoded in ANSI, so I had to use <a href="https://en.wikipedia.org/wiki/Iconv" rel="nofollow noreferrer">iconv</a> to convert all files, change the database tables to use the UTF-8 character set and <em>utf8_general_ci</em> collate, add 'SET NAMES utf8' to the database abstraction layer after the connection (if using 5.3.6 or earlier. Otherwise, you have to use charset=utf8 in the connection string) and change string functions to use the PHP multibyte string functions equivalent.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I recently discovered that using <code>strtolower()</code> can cause issues where the data is truncated after a special character.</p>

<p>The solution was to use </p>

<pre class="default s-code-block"><code class="hljs language-bash">mb_strtolower(<span class="hljs-variable">$string</span>, <span class="hljs-string">'UTF-8'</span>);
</code></pre>

<blockquote>
  <p>mb_ uses MultiByte. It supports more characters but in general is a little slower.</p>
</blockquote>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In PHP, you'll need to either use the <a href="http://us2.php.net/manual/en/ref.mbstring.php" rel="noreferrer">multibyte functions</a>, or turn on <a href="http://us2.php.net/manual/en/mbstring.configuration.php" rel="noreferrer">mbstring.func_overload</a>. That way things like strlen will work if you have characters that take more than one byte.</p>

<p>You'll also need to identify the character set of your responses. You can either use AddDefaultCharset, as above, or write PHP code that returns the header. (Or you can add a META tag to your HTML documents.)</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I have just gone through the same issue and found a good solution at PHP manuals.</p>
<p>I changed all my files' encoding to UTF8 and then the default encoding on my connection. This solved all the problems.</p>
<pre class="default s-code-block"><code class="hljs language-perl"><span class="hljs-keyword">if</span> (!$mysqli-&gt;set_charset(<span class="hljs-string">"utf8"</span>)) {
    <span class="hljs-keyword">printf</span>(<span class="hljs-string">"Error loading character set utf8: %s\n"</span>, $mysqli-&gt;error);
} <span class="hljs-keyword">else</span> {
   <span class="hljs-keyword">printf</span>(<span class="hljs-string">"Current character set: %s\n"</span>, $mysqli-&gt;character_set_name());
}
</code></pre>
<p><a href="http://php.net/manual/en/mysqli.set-charset.php" rel="nofollow noreferrer">View Source</a></p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Unicode support in PHP is still a huge mess. While it's capable of converting an <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" rel="nofollow noreferrer">ISO&nbsp;8859</a> string (which it uses internally) to UTF-8, it lacks the capability to work with Unicode strings natively, which means all the string processing functions will mangle and corrupt your strings.</p>
<p>So you have to either use a separate library for proper UTF-8 support, or rewrite all the string handling functions yourself.</p>
<p>The easy part is just specifying the charset in HTTP headers and in the database and such, but none of that matters if your PHP code doesn't output valid UTF-8. That's the hard part, and PHP gives you virtually no help there. (I think PHP&nbsp;6 is supposed to fix the worst of this, but that's still a while away.)</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you want a MySQL server to decide the character set, and not PHP as a client (old behaviour; preferred, in my opinion), try adding <code>skip-character-set-client-handshake</code> to your <code>my.cnf</code>, under <code>[mysqld]</code>, and restart <code>mysql</code>.</p>
<p>This may cause trouble in case you're using anything other than UTF-8.</p>
    </div></div></div></div><div class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl border p-10 shadow-md w-9/12 bg-white"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The top answer is excellent. Here is what I had to on a regular <a href="https://en.wikipedia.org/wiki/Debian" rel="nofollow noreferrer">Debian</a>, PHP, and <a href="https://en.wikipedia.org/wiki/MySQL" rel="nofollow noreferrer">MySQL</a> setup:</p>
<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-comment">// Storage</span>
<span class="hljs-comment">// Debian. Apparently already UTF-8</span>

<span class="hljs-comment">// Retrieval</span>
<span class="hljs-comment">// The MySQL database was stored in UTF-8,</span>
<span class="hljs-comment">// but apparently PHP was requesting ISO 8859-1. This worked:</span>
<span class="hljs-comment">// ***notice "utf8", without dash, this is a MySQL encoding***</span>
<span class="hljs-built_in">mysql_set_charset</span>('utf8');

<span class="hljs-comment">// Delivery</span>
<span class="hljs-comment">// File *php.ini* did not have a default charset,</span>
<span class="hljs-comment">// (it was commented out, shared host) and</span>
<span class="hljs-comment">// no HTTP encoding was specified in the Apache headers.</span>
<span class="hljs-comment">// This made Apache send out a UTF-8 header</span>
<span class="hljs-comment">// (and perhaps made PHP actually send out UTF-8)</span>
<span class="hljs-comment">// ***notice "utf-8", with dash, this is a php encoding***</span>
<span class="hljs-built_in">ini_set</span>('default_charset','utf-<span class="hljs-number">8</span>');

<span class="hljs-comment">// Submission</span>
<span class="hljs-comment">// This worked in all major browsers once Apache</span>
<span class="hljs-comment">// was sending out the UTF-8 header. I didnt add</span>
<span class="hljs-comment">// the accept-charset attribute.</span>

<span class="hljs-comment">// Processing</span>
<span class="hljs-comment">// Changed a few commands in PHP, like substr(),</span>
<span class="hljs-comment">// to mb_substr()</span>
</code></pre>
<p>That was all!</p>
    </div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Data Storage\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Specify the \u0026lt;code\u0026gt;utf8mb4\u0026lt;/code\u0026gt; character set on all tables and text columns in your database.  This makes MySQL physically store and retrieve values encoded natively in UTF-8.  Note that MySQL will implicitly use \u0026lt;code\u0026gt;utf8mb4\u0026lt;/code\u0026gt; encoding if a \u0026lt;code\u0026gt;utf8mb4_*\u0026lt;/code\u0026gt; collation is specified (without any explicit character set).\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;In older versions of MySQL (\u0026amp;lt; 5.5.3), you\u0026apos;ll unfortunately be forced to use simply \u0026lt;code\u0026gt;utf8\u0026lt;/code\u0026gt;, which only supports a subset of Unicode characters.  I wish I were kidding.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Data Access\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;In your application code (e.g. PHP), in whatever DB access method you use, you\u0026apos;ll need to set the connection charset to \u0026lt;code\u0026gt;utf8mb4\u0026lt;/code\u0026gt;.  This way, MySQL does no conversion from its native UTF-8 when it hands data off to your application and vice versa.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Some drivers provide their own mechanism for configuring the connection character set, which both updates its own internal state and informs MySQL of the encoding to be used on the connectionthis is usually the preferred approach.   In PHP:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;If you\u0026apos;re using the \u0026lt;a href=\u0026quot;http://www.php.net/manual/en/book.pdo.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;PDO\u0026lt;/a\u0026gt; abstraction layer with PHP  5.3.6, you can specify \u0026lt;code\u0026gt;charset\u0026lt;/code\u0026gt; in the \u0026lt;a href=\u0026quot;http://php.net/manual/en/ref.pdo-mysql.connection.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;DSN\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dbh\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;mysql:charset=utf8mb4\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;If you\u0026apos;re using \u0026lt;a href=\u0026quot;http://www.php.net/manual/en/book.mysqli.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;mysqli\u0026lt;/a\u0026gt;, you can call \u0026lt;a href=\u0026quot;http://php.net/manual/en/mysqli.set-charset.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;set_charset()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;  \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$mysqli\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;set_charset\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;utf8mb4\u0026apos;\u0026lt;/span\u0026gt;);       \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// object oriented style\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;mysqli_set_charset\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$link\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;utf8mb4\u0026apos;\u0026lt;/span\u0026gt;);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// procedural style\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;If you\u0026apos;re stuck with plain \u0026lt;a href=\u0026quot;http://php.net/manual/en/book.mysql.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;mysql\u0026lt;/a\u0026gt; but happen to be running PHP  5.2.3, you can call \u0026lt;a href=\u0026quot;http://php.net/manual/en/function.mysql-set-charset.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;mysql_set_charset\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;If the driver does not provide its own mechanism for setting the connection character set, you may have to issue a query to tell MySQL how your application expects data on the connection to be encoded: \u0026lt;a href=\u0026quot;http://dev.mysql.com/doc/en/charset-connection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;SET NAMES \u0026apos;utf8mb4\u0026apos;\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The same consideration regarding \u0026lt;code\u0026gt;utf8mb4\u0026lt;/code\u0026gt;/\u0026lt;code\u0026gt;utf8\u0026lt;/code\u0026gt; applies as above.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Output\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;UTF-8 should be set in the HTTP header, such as \u0026lt;code\u0026gt;Content-Type: text/html; charset=utf-8\u0026lt;/code\u0026gt;. You can achieve that either by setting \u0026lt;a href=\u0026quot;http://www.php.net/manual/en/ini.core.php#ini.default-charset\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;default_charset\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; in php.ini (preferred), or manually using \u0026lt;code\u0026gt;header()\u0026lt;/code\u0026gt; function.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;If your application transmits text to other systems, they will also need to be informed of the character encoding.  With web applications, the browser must be informed of the encoding in which data is sent (through HTTP response headers or \u0026lt;a href=\u0026quot;https://stackoverflow.com/q/4696499\u0026quot;\u0026gt;HTML metadata\u0026lt;/a\u0026gt;).\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;When encoding the output using \u0026lt;code\u0026gt;json_encode()\u0026lt;/code\u0026gt;, add \u0026lt;code\u0026gt;JSON_UNESCAPED_UNICODE\u0026lt;/code\u0026gt; as a second parameter.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Input\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Browsers will submit data in the character set specified for the document, hence nothing particular has to be done on the input.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;In case you have doubts about request encoding (in case it could be tampered with), you may verify every received string as being valid UTF-8 before you try to store it or use it anywhere.  PHP\u0026apos;s \u0026lt;a href=\u0026quot;http://php.net/manual/en/function.mb-check-encoding.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;mb_check_encoding()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; does the trick, but you have to use it religiously.  There\u0026apos;s really no way around this, as malicious clients can submit data in whatever encoding they want, and I haven\u0026apos;t found a trick to get PHP to do this for you reliably.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Other Code Considerations\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Obviously enough, all files you\u0026apos;ll be serving (PHP, HTML, JavaScript, etc.) should be encoded in valid UTF-8.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;You need to make sure that every time you process a UTF-8 string, you do so safely.  This is, unfortunately, the hard part.  You\u0026apos;ll probably want to make extensive use of PHP\u0026apos;s \u0026lt;a href=\u0026quot;http://www.php.net/manual/en/book.mbstring.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;mbstring\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; extension.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;PHP\u0026apos;s built-in string operations are \u0026lt;em\u0026gt;not\u0026lt;/em\u0026gt; by default UTF-8 safe.\u0026lt;/strong\u0026gt;  There are some things you can safely do with normal PHP string operations (like concatenation), but for most things you should use the equivalent \u0026lt;code\u0026gt;mbstring\u0026lt;/code\u0026gt; function.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;To know what you\u0026apos;re doing (read: not mess it up), you really need to know UTF-8 and how it works on the lowest possible level.  Check out any of the links from \u0026lt;a href=\u0026quot;http://www.utf8.com/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;utf8.com\u0026lt;/a\u0026gt; for some good resources to learn everything you need to know.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;d like to add one thing to \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/279170/utf-8-all-the-way-through#279279\u0026quot;\u0026gt;chazomaticus\u0026apos; excellent answer\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Don\u0026apos;t forget the META tag either (like this, or \u0026lt;a href=\u0026quot;http://www.w3.org/International/questions/qa-html-encoding-declarations#quicklookup\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;the HTML4 or XHTML version of it\u0026lt;/a\u0026gt;):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;meta\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;charset\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;utf-8\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;That seems trivial, but IE7 has given me problems with that before.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I was doing everything right; the database, database connection and Content-Type HTTP header were all set to UTF-8, and it worked fine in all other browsers, but Internet Explorer still insisted on using the \u0026quot;Western European\u0026quot; encoding.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It turned out the page was missing the META tag. Adding that solved the problem.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Edit:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The W3C actually has a rather large \u0026lt;a href=\u0026quot;http://www.w3.org/International/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;section dedicated to I18N\u0026lt;/a\u0026gt;. They have a number of articles related to this issue  describing the HTTP, (X)HTML and CSS side of things:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://www.w3.org/International/questions/qa-changing-encoding\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;FAQ: Changing (X)HTML page encoding to UTF-8\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://www.w3.org/International/questions/qa-html-encoding-declarations\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Declaring character encodings in HTML\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://www.w3.org/International/tutorials/tutorial-char-enc/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Tutorial: Character sets \u0026amp;amp; encodings in XHTML, HTML and CSS\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://www.w3.org/International/O-HTTP-charset\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Setting the HTTP charset parameter\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;They recommend using both the HTTP header and HTML meta tag (or XML declaration in case of XHTML served as XML).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In addition to setting \u0026lt;code\u0026gt;default_charset\u0026lt;/code\u0026gt; in php.ini, you can send the correct charset using \u0026lt;code\u0026gt;header()\u0026lt;/code\u0026gt; from within your code, before any output:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;header\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Content-Type: text/html; charset=utf-8\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Working with Unicode in PHP is easy as long as you realize that most of the \u0026lt;strong\u0026gt;string functions don\u0026apos;t work with Unicode, and some might mangle strings completely\u0026lt;/strong\u0026gt;. PHP considers \u0026quot;characters\u0026quot; to be 1 byte long. Sometimes this is okay (for example, \u0026lt;a href=\u0026quot;https://www.php.net/manual/en/function.explode.php\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;explode()\u0026lt;/a\u0026gt; only looks for a byte sequence and uses it as a separator -- so it doesn\u0026apos;t matter what actual characters you look for). But other times, when the function is actually designed to work on \u0026lt;em\u0026gt;characters\u0026lt;/em\u0026gt;, PHP has no idea that your text has multi-byte characters that are found with Unicode.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;A good library to check into is \u0026lt;a href=\u0026quot;http://phputf8.sourceforge.net/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;phputf8\u0026lt;/a\u0026gt;. This rewrites all of the \u0026quot;bad\u0026quot; functions so you can safely work on UTF8 strings. There are extensions like the \u0026lt;a href=\u0026quot;https://www.php.net/manual/en/book.mbstring.php\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;mb_string\u0026lt;/a\u0026gt; extension that try to do this for you, too, but I prefer using the library because it\u0026apos;s more portable (but I write mass-market products, so that\u0026apos;s important for me). But phputf8 can use mb_string behind the scenes, anyway, to increase performance.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Warning:\u0026lt;/strong\u0026gt; This answer applies to PHP 5.3.5 and lower. Do not use it for PHP version 5.3.6 (released in March 2011) or later.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Compare with \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/21373793/367456\u0026quot;\u0026gt;Palec\u0026apos;s answer to \u0026lt;em\u0026gt;PDO + MySQL and broken UTF-8 encoding\u0026lt;/em\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;I found an issue with someone using \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/PHP#Development_and_community\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;PDO\u0026lt;/a\u0026gt; and the answer was to use this for the PDO connection string:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pdo\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;mysql:host=mysql.example.com;dbname=example_db\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;username\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;password\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;MYSQL_ATTR_INIT_COMMAND\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SET NAMES utf8\u0026quot;\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In my case, I was using \u0026lt;code\u0026gt;mb_split\u0026lt;/code\u0026gt;, which uses regular expressions.  Therefore I also had to manually make sure the regular expression  encoding was UTF-8 by doing \u0026lt;code\u0026gt;mb_regex_encoding(\u0026apos;UTF-8\u0026apos;);\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As a side note, I also discovered by running \u0026lt;code\u0026gt;mb_internal_encoding()\u0026lt;/code\u0026gt; that the internal encoding wasn\u0026apos;t UTF-8, and I changed that by running \u0026lt;code\u0026gt;mb_internal_encoding(\u0026quot;UTF-8\u0026quot;);\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;First of all, if you are in PHP before 5.3 then no. You\u0026apos;ve got a ton of problems to tackle.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I am surprised that none has mentioned the \u0026lt;a href=\u0026quot;http://php.net/intl\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;intl\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt; library, the one that has good support for \u0026lt;strong\u0026gt;Unicode\u0026lt;/strong\u0026gt;, \u0026lt;strong\u0026gt;graphemes\u0026lt;/strong\u0026gt;, \u0026lt;strong\u0026gt;string operations\u0026lt;/strong\u0026gt;, \u0026lt;strong\u0026gt;localisation\u0026lt;/strong\u0026gt; and many more, see below.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I will quote some information about Unicode support in PHP by \u0026lt;strong\u0026gt;Elizabeth Smith\u0026apos;s\u0026lt;/strong\u0026gt; \u0026lt;a href=\u0026quot;http://www.slideshare.net/auroraeosrose/using-unicode-with-php\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;slides\u0026lt;/a\u0026gt; at \u0026lt;strong\u0026gt;PHPBenelux\u0026apos;14\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;\u0026lt;strong\u0026gt;INTL\u0026lt;/strong\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Good:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Wrapper around ICU library\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Standardised locales, set locale per script\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Number formatting\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Currency formatting\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Message formatting (replaces gettext)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Calendars, dates, time zone and time\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Transliterator\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Spoofchecker\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Resource bundles\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Convertors\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;IDN support\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Graphemes\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Collation\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Iterators\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;Bad:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Does not support zend_multibyte\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Does not support HTTP input output conversion\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Does not support function overloading\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;\u0026lt;strong\u0026gt;mb_string\u0026lt;/strong\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Enables zend_multibyte support\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Supports transparent HTTP in/out encoding\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Provides some wrappers for functionality such as strtoupper\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;\u0026lt;strong\u0026gt;ICONV\u0026lt;/strong\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Primary for charset conversion\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Output buffer handler\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;mime encoding functionality\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;conversion\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;some string helpers (len, substr, strpos, strrpos)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Stream Filter \u0026lt;code\u0026gt;stream_filter_append($fp, \u0026apos;convert.iconv.ISO-2022-JP/EUC-JP\u0026apos;)\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;\u0026lt;strong\u0026gt;DATABASES\u0026lt;/strong\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;MySQL: Charset and collation on tables and on the connection (not the collation). Also, don\u0026apos;t use mysql - mysqli or PDO\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;postgresql: pg_set_client_encoding\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;sqlite(3): Make sure it was compiled with Unicode and intl support\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;\u0026lt;strong\u0026gt;Some other gotchas\u0026lt;/strong\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;You cannot use Unicode filenames with PHP and windows unless you use a 3rd part extension.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Send everything in ASCII if you are using exec, proc_open and other command line calls\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Plain text is not plain text, files have encodings\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;You can convert files on the fly with the iconv filter\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The only thing I would add to these amazing answers is to emphasize on saving your files in UTF-8 encoding, I have noticed that browsers accept this property over setting UTF-8 as your code encoding. Any decent text editor will show you this. For example, \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Notepad%2B%2B\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Notepad++\u0026lt;/a\u0026gt; has a menu option for file encoding, and it shows you the current encoding and enables you to change it. For all my PHP files I use UTF-8 without a \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Byte_order_mark\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;BOM\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Sometime ago I had someone ask me to add UTF-8 support for a PHP and MySQL application designed by someone else. I noticed that all files were encoded in ANSI, so I had to use \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Iconv\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;iconv\u0026lt;/a\u0026gt; to convert all files, change the database tables to use the UTF-8 character set and \u0026lt;em\u0026gt;utf8_general_ci\u0026lt;/em\u0026gt; collate, add \u0026apos;SET NAMES utf8\u0026apos; to the database abstraction layer after the connection (if using 5.3.6 or earlier. Otherwise, you have to use charset=utf8 in the connection string) and change string functions to use the PHP multibyte string functions equivalent.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I recently discovered that using \u0026lt;code\u0026gt;strtolower()\u0026lt;/code\u0026gt; can cause issues where the data is truncated after a special character.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The solution was to use \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;mb_strtolower(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;UTF-8\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;mb_ uses MultiByte. It supports more characters but in general is a little slower.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In PHP, you\u0026apos;ll need to either use the \u0026lt;a href=\u0026quot;http://us2.php.net/manual/en/ref.mbstring.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;multibyte functions\u0026lt;/a\u0026gt;, or turn on \u0026lt;a href=\u0026quot;http://us2.php.net/manual/en/mbstring.configuration.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;mbstring.func_overload\u0026lt;/a\u0026gt;. That way things like strlen will work if you have characters that take more than one byte.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You\u0026apos;ll also need to identify the character set of your responses. You can either use AddDefaultCharset, as above, or write PHP code that returns the header. (Or you can add a META tag to your HTML documents.)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I have just gone through the same issue and found a good solution at PHP manuals.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I changed all my files\u0026apos; encoding to UTF8 and then the default encoding on my connection. This solved all the problems.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-perl\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!$mysqli-\u0026amp;gt;set_charset(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;utf8\u0026quot;\u0026lt;/span\u0026gt;)) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Error loading character set utf8: %s\\n\u0026quot;\u0026lt;/span\u0026gt;, $mysqli-\u0026amp;gt;error);\n} \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Current character set: %s\\n\u0026quot;\u0026lt;/span\u0026gt;, $mysqli-\u0026amp;gt;character_set_name());\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://php.net/manual/en/mysqli.set-charset.php\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;View Source\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Unicode support in PHP is still a huge mess. While it\u0026apos;s capable of converting an \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/ISO/IEC_8859-1\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;ISO\u0026amp;nbsp;8859\u0026lt;/a\u0026gt; string (which it uses internally) to UTF-8, it lacks the capability to work with Unicode strings natively, which means all the string processing functions will mangle and corrupt your strings.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So you have to either use a separate library for proper UTF-8 support, or rewrite all the string handling functions yourself.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The easy part is just specifying the charset in HTTP headers and in the database and such, but none of that matters if your PHP code doesn\u0026apos;t output valid UTF-8. That\u0026apos;s the hard part, and PHP gives you virtually no help there. (I think PHP\u0026amp;nbsp;6 is supposed to fix the worst of this, but that\u0026apos;s still a while away.)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you want a MySQL server to decide the character set, and not PHP as a client (old behaviour; preferred, in my opinion), try adding \u0026lt;code\u0026gt;skip-character-set-client-handshake\u0026lt;/code\u0026gt; to your \u0026lt;code\u0026gt;my.cnf\u0026lt;/code\u0026gt;, under \u0026lt;code\u0026gt;[mysqld]\u0026lt;/code\u0026gt;, and restart \u0026lt;code\u0026gt;mysql\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This may cause trouble in case you\u0026apos;re using anything other than UTF-8.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The top answer is excellent. Here is what I had to on a regular \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Debian\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Debian\u0026lt;/a\u0026gt;, PHP, and \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/MySQL\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;MySQL\u0026lt;/a\u0026gt; setup:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Storage\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Debian. Apparently already UTF-8\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Retrieval\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// The MySQL database was stored in UTF-8,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// but apparently PHP was requesting ISO 8859-1. This worked:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ***notice \u0026quot;utf8\u0026quot;, without dash, this is a MySQL encoding***\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;mysql_set_charset\u0026lt;/span\u0026gt;(\u0026apos;utf8\u0026apos;);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Delivery\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// File *php.ini* did not have a default charset,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// (it was commented out, shared host) and\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// no HTTP encoding was specified in the Apache headers.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This made Apache send out a UTF-8 header\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// (and perhaps made PHP actually send out UTF-8)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ***notice \u0026quot;utf-8\u0026quot;, with dash, this is a php encoding***\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;ini_set\u0026lt;/span\u0026gt;(\u0026apos;default_charset\u0026apos;,\u0026apos;utf-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026apos;);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Submission\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This worked in all major browsers once Apache\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// was sending out the UTF-8 header. I didnt add\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// the accept-charset attribute.\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Processing\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Changed a few commands in PHP, like substr(),\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// to mb_substr()\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;That was all!\u0026lt;/p\u0026gt;\n    "],"comment":["\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Here\u0026apos;s an introduction to encodings in general and encodings in PHP in particular: \u0026lt;a href=\u0026quot;http://kunststube.net/encoding/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;What Every Programmer Absolutely, Positively Needs To Know About Encodings And Character Sets To Work With Text\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/476/deceze\u0026quot; title=\u0026quot;493,533 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;deceze\u0026lt;/a\u0026gt;\n\u0026lt;span class=\u0026quot;mod-flair \u0026quot; title=\u0026quot;Moderator\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment25539384_279170\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2013-07-09 19:33:26Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 9, 2013 at 19:33\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Some recent \u0026lt;a href=\u0026quot;https://www.reddit.com/r/PHP/comments/30v26b/is_unicode_support_going_to_make_it_into_php7/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;discussions about PHP 7\u0026lt;/a\u0026gt; indicate that there are no changes in the \u0026quot;officially abandoned\u0026quot; position of 2010... There are something more about \u0026quot;PHP7 and UTF-8\u0026quot;?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/287948/peter-krauss\u0026quot; title=\u0026quot;12,467 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Peter Krauss\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment53305441_279170\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-09-23 06:02:09Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Sep 23, 2015 at 6:02\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;This problem is common. But there is no shortcut solution, you will have to setup \u0026lt;code\u0026gt;utf-8\u0026lt;/code\u0026gt; for each of them seprately - MySQL 5, PHP 5 OR Apache 2.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1133932/manish-shrivastava\u0026quot; title=\u0026quot;28,489 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Manish Shrivastava\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment70637257_279170\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-01-18 14:00:18Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 18, 2017 at 14:00\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;The timezone of the database server is also an important setting to choose. I recommend to use UTC (`set time_zone=\u0026apos;+0:00`` for MySQL) as the server default.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/328115/dolmen\u0026quot; title=\u0026quot;7,281 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;dolmen\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment126715199_279170\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2022-03-31 23:08:43Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Mar 31 at 23:08\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;I\u0026apos;m not wrong: COLLATE implies CHARACTER SET.  See e.g. \u0026lt;a href=\u0026quot;http://dev.mysql.com/doc/refman/5.0/en/charset-database.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;dev.mysql.com/doc/refman/5.0/en/charset-database.html\u0026lt;/a\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/30497/chazomaticus\u0026quot; title=\u0026quot;15,126 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;chazomaticus\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment130959_279279\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2008-11-10 23:01:19Z, License: CC BY-SA 2.5\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Nov 10, 2008 at 23:01\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Note that MySQL does not speak the same language as everyone else. When MySQL says \u0026quot;utf8\u0026quot; it really means \u0026quot;some weirdly retarded variant of UTF-8 that is limited to three bytes for god knows what ridiculous reason\u0026quot;. If you really want UTF-8 you should tell MySQL that you want this weird thing MySQL likes to call \u0026lt;a href=\u0026quot;http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;utf8mb4\u0026lt;/a\u0026gt;. Don\u0026apos;t bother saving on the \u0026quot;WTF!\u0026quot;s.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/46642/r-martinho-fernandes\u0026quot; title=\u0026quot;219,978 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;R. Martinho Fernandes\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment22638702_279279\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2013-04-09 09:21:04Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 9, 2013 at 9:21\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 4 times\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@chazomaticus do you think I should user mbstring even for English....or strlen will suffice? What about Greek?\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1671785/dimitris-papageorgiou\u0026quot; title=\u0026quot;419 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Dimitris Papageorgiou\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment127951758_279279\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2022-05-30 04:37:00Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;May 30 at 4:37\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Looking for this a bit further, this is only necessary for PHP versions prior to 5.3.6. See also: \u0026lt;a href=\u0026quot;http://stackoverflow.com/a/4361485/2286722\u0026quot;\u0026gt;http://stackoverflow.com/a/4361485/2286722\u0026lt;/a\u0026gt; (although they use a separate \u0026lt;code\u0026gt;$dbh-\u0026amp;gt;exec(\u0026quot;set names utf8\u0026quot;);\u0026lt;/code\u0026gt;; I do prefer the method presented here). Btw. there is also a similar note on this as a comment in the PHP manual: \u0026lt;a href=\u0026quot;http://php.net/manual/en/pdo.construct.php#96325\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;php.net/manual/en/pdo.construct.php#96325\u0026lt;/a\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2286722/marten-koetsier\u0026quot; title=\u0026quot;3,179 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Marten Koetsier\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment51884852_12373363\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2015-08-13 13:55:16Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Aug 13, 2015 at 13:55\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;See also \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/4475548/pdo-mysql-and-broken-utf-8-encoding/21373793#21373793\u0026quot;\u0026gt;Palec\u0026apos;s answer to \u0026lt;i\u0026gt;PDO + MySQL and broken UTF-8 encoding\u0026lt;/i\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/63550/peter-mortensen\u0026quot; title=\u0026quot;30,018 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Peter Mortensen\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment100418166_12373363\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2019-07-08 16:21:27Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jul 8, 2019 at 16:21\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Yes, right. Mysqli and PDO can use their native drivers. Also they can use mysqlnd driver if you will compile php with \u0026lt;code\u0026gt;--with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd\u0026lt;/code\u0026gt; options.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2648942/alexander-yancharuk\u0026quot; title=\u0026quot;13,017 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Alexander Yancharuk\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment33014132_21376914\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-02-16 17:54:56Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Feb 16, 2014 at 17:54\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Great tip about the func_overload setting - allows for minimal modification to existing code.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/195835/simon-east\u0026quot; title=\u0026quot;51,717 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Simon East\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment31795836_279238\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-01-15 04:56:15Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 15, 2014 at 4:56\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Just be careful -- some code might actually be relying on the one-byte-per-character nature of the standard string functions.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/4321/jw\u0026quot; title=\u0026quot;49,237 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;JW.\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment31824168_279238\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2014-01-15 18:18:29Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 15, 2014 at 18:18\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;Important to note that the mbstring.func_overload feature is being deprecated as of PHP 7.2, due to the issues noted in @JW\u0026apos;s comment above. So the best advice is: Yes you should definitely use the mbstring functions, but don\u0026apos;t use the overload feature to get the standard functions to work as multibyte.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/3913358/simba\u0026quot; title=\u0026quot;4,872 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Simba\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment71351371_279238\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-02-07 13:08:02Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Feb 7, 2017 at 13:08\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;I spent an hour trying to figure out an encoding problem on a page I\u0026apos;m working on and I\u0026apos;m usually pretty good at figuring out stuff. I always consult this page and your answer helped me a lot. Got my upvote. In my case, \u0026lt;code\u0026gt;set_charset(\u0026apos;utf8mb4\u0026apos;)\u0026lt;/code\u0026gt; did not work but \u0026lt;code\u0026gt;\u0026amp;gt;set_charset(\u0026quot;utf8\u0026quot;)\u0026lt;/code\u0026gt; did and that wasn\u0026apos;t actually shown in the other answers.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/1415724/funk-forty-niner\u0026quot; title=\u0026quot;74,253 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Funk Forty Niner\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment70751031_30063664\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2017-01-21 14:16:41Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 21, 2017 at 14:16\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;@FunkFortyNiner Beware: \u0026lt;code\u0026gt;set_charset(\u0026quot;utf8\u0026quot;)\u0026lt;/code\u0026gt; may work but will behave differently (see the remarks about the difference between \u0026lt;code\u0026gt;utf8\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;utf8mb4\u0026lt;/code\u0026gt; and the mysql version history). Use \u0026lt;code\u0026gt;utf8\u0026lt;/code\u0026gt; \u0026lt;b\u0026gt;if you have to\u0026lt;/b\u0026gt; AND ONLY \u0026lt;b\u0026gt;if you know what you\u0026apos;re doing\u0026lt;/b\u0026gt;!\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/399908/martin-hennings\u0026quot; title=\u0026quot;15,812 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;Martin Hennings\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment87013865_30063664\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2018-04-24 10:09:28Z, License: CC BY-SA 3.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Apr 24, 2018 at 10:09\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;5 stars solution, I was reading a text file line by line and getting ? for each character, then I did save-as , instead of ansi, used utf8. thanks.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/2828651/%d8%b5%d9%84%d9%8a-%d8%b9%d9%84%d9%8a-%d9%85%d8%ad%d9%85%d8%af-atef-farouk\u0026quot; title=\u0026quot;1,895 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;ØµÙ„ÙŠ Ø¹Ù„ÙŠ Ù…Ø­Ù…Ø¯ Atef Farouk\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment105556302_30063664\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2020-01-12 06:22:27Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Jan 12, 2020 at 6:22\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026lt;code\u0026gt;utf8mb4\u0026lt;/code\u0026gt; is the charset to use.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/328115/dolmen\u0026quot; title=\u0026quot;7,281 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;dolmen\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment126715254_30063664\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2022-03-31 23:13:37Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Mar 31 at 23:13\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        ","\n            \u0026lt;div class=\u0026quot;comment-body js-comment-edit-hide\u0026quot;\u0026gt;\n                \n                \u0026lt;span class=\u0026quot;comment-copy\u0026quot;\u0026gt;\u0026lt;code\u0026gt;utf8mb4\u0026lt;/code\u0026gt; is the charset to use for MySQL.\u0026lt;/span\u0026gt;\n                \n              \u0026lt;div class=\u0026quot;d-inline-flex ai-center\u0026quot;\u0026gt;\n\u0026amp;nbsp;\u0026lt;a href=\u0026quot;/users/328115/dolmen\u0026quot; title=\u0026quot;7,281 reputation\u0026quot; class=\u0026quot;comment-user\u0026quot;\u0026gt;dolmen\u0026lt;/a\u0026gt;\n                \u0026lt;/div\u0026gt;\n                \u0026lt;span class=\u0026quot;comment-date\u0026quot; dir=\u0026quot;ltr\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;comment-link\u0026quot; href=\u0026quot;#comment126715269_4693147\u0026quot;\u0026gt;\u0026lt;span title=\u0026quot;2022-03-31 23:14:55Z, License: CC BY-SA 4.0\u0026quot; class=\u0026quot;relativetime-clean\u0026quot;\u0026gt;Mar 31 at 23:14\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/span\u0026gt;\n                        \u0026lt;span title=\u0026quot;this comment was edited 1 time\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;va-text-bottom o50 svg-icon iconPencilSm\u0026quot; width=\u0026quot;14\u0026quot; height=\u0026quot;14\u0026quot; viewBox=\u0026quot;0 0 14 14\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;m11.1 1.71 1.13 1.12c.2.2.2.51 0 .71L11.1 4.7 9.21 2.86l1.17-1.15c.2-.2.51-.2.71 0ZM2 10.12l6.37-6.43 1.88 1.88L3.88 12H2v-1.88Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/span\u0026gt;\n            \u0026lt;/div\u0026gt;\n        "],"id":27,"title":"UTF-8 all the way through","content":"\n                \n\u0026lt;p\u0026gt;\nI\u0026apos;m setting up a new server and want to support UTF-8 fully in my web application. I have tried this in the past on existing servers and always seem to end up having to fall back to ISO-8859-1.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Where exactly do I need to set the encoding/charsets? I\u0026apos;m aware that I need to configure Apache, MySQL, and PHP to do this â€” is there some standard checklist I can follow, or perhaps troubleshoot where the mismatches occur?\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is for a new Linux server, running MySQL 5, PHP, 5 and Apache 2.\u0026lt;/p\u0026gt;\n    ","slug":"utf-8-all-the-way-through-1657384323434","postType":"QUESTION","createdAt":"2022-07-09T16:32:03.000Z","updatedAt":"2022-07-09T16:32:03.000Z","tags":[{"id":89,"name":"linux","slug":"linux","createdAt":"2022-07-09T16:32:03.000Z","updatedAt":"2022-07-09T16:32:03.000Z","Questions_Tags":{"questionId":27,"tagId":89}},{"id":90,"name":"apache","slug":"apache","createdAt":"2022-07-09T16:32:03.000Z","updatedAt":"2022-07-09T16:32:03.000Z","Questions_Tags":{"questionId":27,"tagId":90}},{"id":91,"name":"utf-8","slug":"utf-8","createdAt":"2022-07-09T16:32:03.000Z","updatedAt":"2022-07-09T16:32:03.000Z","Questions_Tags":{"questionId":27,"tagId":91}}]}},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"utf-8-all-the-way-through-1657384323434"},"buildId":"4Y8KGE-c2lolBeBmcum_I","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>