<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550","name":"Questions"}}]}</script><title>Why does a RegExp with global flag give wrong results? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="What is the problem with this regular expression when I use the global flag and the case insensitive flag? Query is a user generated input. The result should be [true, true].

var query = &#x27;Foo B&#x27;;
var re = new RegExp(query, &#x27;gi&#x27;);
var result = [];
result.push(re.test(&#x27;Foo Bar&#x27;));
result.push(re.test(&#x27;Foo Bar&#x27;));
// result will be [true, false]






var reg = /^a$/g;
for(i = 0; i++ &lt; 10;)
   console.log(reg.test(&quot;a&quot;));
 Run code snippetHide resultsExpand snippet


    "/><meta property="og:title" content="Why does a RegExp with global flag give wrong results? | Solution Checker"/><meta property="og:description" content="What is the problem with this regular expression when I use the global flag and the case insensitive flag? Query is a user generated input. The result should be [true, true].

var query = &#x27;Foo B&#x27;;
var re = new RegExp(query, &#x27;gi&#x27;);
var result = [];
result.push(re.test(&#x27;Foo Bar&#x27;));
result.push(re.test(&#x27;Foo Bar&#x27;));
// result will be [true, false]






var reg = /^a$/g;
for(i = 0; i++ &lt; 10;)
   console.log(reg.test(&quot;a&quot;));
 Run code snippetHide resultsExpand snippet


    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Why does a RegExp with global flag give wrong results?","text":"What is the problem with this regular expression when I use the global flag and the case insensitive flag? Query is a user generated input. The result should be [true, true].\n\nvar query = &apos;Foo B&apos;;\nvar re = new RegExp(query, &apos;gi&apos;);\nvar result = [];\nresult.push(re.test(&apos;Foo Bar&apos;));\nresult.push(re.test(&apos;Foo Bar&apos;));\n// result will be [true, false]\n\n\n\n\n\n\nvar reg = /^a$/g;\nfor(i = 0; i++ &lt; 10;)\n   console.log(reg.test(&quot;a&quot;));\n Run code snippetHide resultsExpand snippet\n\n\n    ","answerCount":7,"upVoteCount":500,"suggestedAnswer":[{"text":"A RegExp object with the g flag keeps track of the lastIndex where a match occurred, so on subsequent matches it will start from the last used index, instead of 0. Take a look:\n\n\nvar query = &apos;Foo B&apos;;\nvar re = new RegExp(query, &apos;gi&apos;);\nvar result = [];\nresult.push(re.test(&apos;Foo Bar&apos;));\n\nalert(re.lastIndex);\n\nresult.push(re.test(&apos;Foo Bar&apos;));\n Run code snippetHide resultsExpand snippet\n\n\nIf you don&apos;t want to manually reset lastIndex to 0 after every test, just remove the g flag.\nHere&apos;s the algorithm that the specs dictate (section 15.10.6.2):\n\nRegExp.prototype.exec(string)\nPerforms\na regular expression match of string\nagainst the regular expression and\nreturns an Array object containing the\nresults of the match, or null if the\nstring did not match The string\nToString(string) is searched for an\noccurrence of the regular expression\npattern as follows:\n\n\n\nLet R be this RexExp object.\nLet S be the value of ToString(string).\nLet length be the length of S.\nLet lastIndex be the value of the lastIndex property on R.\nLet i be the value of ToInteger(lastIndex).\nIf the global property is false, let i = 0.\nIf i &lt; 0 or i &gt; length then set the lastIndex property of R to 0 and return null.\nCall [[Match]], giving it the arguments S and i. If [[Match]]\nreturned failure, go to step 9;\notherwise let r be its State result\nand go to step 10.\nLet i = i+1.\nGo to step 7.\nLet e be r&apos;s endIndex value.\nIf the global property is true, set the lastIndex property of R to e.\nLet n be the length of r&apos;s captures array. (This is the same\nvalue as 15.10.2.1&apos;s\nNCapturingParens.)\nReturn a new array with the following properties:\n\n\nThe index\nproperty is set to the position of the\nmatched substring within the complete\nstring S.\nThe input property is set\nto S.\nThe length property is set to\nn + 1.\nThe 0 property is set to the\nmatched substring (i.e. the portion of\nS between offset i inclusive and\noffset e exclusive).\nFor each\ninteger i such that i &gt; 0 and i  n,\nset the property named ToString(i) to\nthe ith element of r&apos;s captures array.\n\n\n    ","url":"https://solutionschecker.com/questions/why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550#solution1","@type":"Answer","upvoteCount":0},{"text":"You are using a single RegExp object and executing it multiple times. On each successive execution it continues on from the last match index.\n\nYou need to &quot;reset&quot; the regex to start from the beginning before each execution:\n\nresult.push(re.test(&apos;Foo Bar&apos;));\nre.lastIndex = 0;\nresult.push(re.test(&apos;Foo Bar&apos;));\n// result is now [true, true]\n\n\nHaving said that it may be more readable to create a new RegExp object each time (overhead is minimal as the RegExp is cached anyway):\n\nresult.push((/Foo B/gi).test(stringA));\nresult.push((/Foo B/gi).test(stringB));\n\n    ","url":"https://solutionschecker.com/questions/why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550#solution2","@type":"Answer","upvoteCount":0},{"text":"RegExp.prototype.test updates the regular expressions&apos; lastIndex property so that each test will start where the last one stopped. I&apos;d suggest using String.prototype.match since it doesn&apos;t update the lastIndex property:\n\n!!&apos;Foo Bar&apos;.match(re); // -&gt; true\n!!&apos;Foo Bar&apos;.match(re); // -&gt; true\n\n\nNote: !! converts it to a boolean and then inverts the boolean so it reflects the result.\n\nAlternatively, you could just reset the lastIndex property:\n\nresult.push(re.test(&apos;Foo Bar&apos;));\nre.lastIndex = 0;\nresult.push(re.test(&apos;Foo Bar&apos;));\n\n    ","url":"https://solutionschecker.com/questions/why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550#solution3","@type":"Answer","upvoteCount":0},{"text":"Removing global g flag will fix your problem.\n\nvar re = new RegExp(query, &apos;gi&apos;);\n\n\nShould be\n\nvar re = new RegExp(query, &apos;i&apos;);\n\n    ","url":"https://solutionschecker.com/questions/why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550#solution4","@type":"Answer","upvoteCount":0},{"text":"You need to set re.lastIndex = 0 because with g flag regex keep track of last match occured, so test will not go to test the same string, for that you need to do re.lastIndex = 0 \n\n\n\nvar query = &apos;Foo B&apos;;\nvar re = new RegExp(query, &apos;gi&apos;);\nvar result = [];\nresult.push(re.test(&apos;Foo Bar&apos;));\nre.lastIndex=0;\nresult.push(re.test(&apos;Foo Bar&apos;));\n\nconsole.log(result)\n Run code snippetHide resultsExpand snippet\n\n\n    ","url":"https://solutionschecker.com/questions/why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550#solution5","@type":"Answer","upvoteCount":0},{"text":"Using the /g flag tells it to continue searching after a hit.\n\nIf the match succeeds, the exec() method returns an array and updates properties of the regular expression object.\n\nBefore your first search:\n\nmyRegex.lastIndex\n//is 0\n\n\nAfter the first search\n\nmyRegex.lastIndex\n//is 8\n\n\nRemove the g and it exits the search after each call to exec().\n    ","url":"https://solutionschecker.com/questions/why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550#solution6","@type":"Answer","upvoteCount":0},{"text":"I had the function:\n\nfunction parseDevName(name) {\n  var re = /^([^-]+)-([^-]+)-([^-]+)$/g;\n  var match = re.exec(name);\n  return match.slice(1,4);\n}\n\nvar rv = parseDevName(&quot;BR-H-01&quot;);\nrv = parseDevName(&quot;BR-H-01&quot;);\n\n\nThe first call works.\nThe second call doesn&apos;t. The slice operation complains about a null value. I assume this is because of the re.lastIndex. This is strange because I would expect a new RegExp to be allocated each time the function is called and not shared across multiple invocations of my function.\n\nWhen I changed it to:\n\nvar re = new RegExp(&apos;^([^-]+)-([^-]+)-([^-]+)$&apos;, &apos;g&apos;);\n\n\nThen I don&apos;t get the lastIndex holdover effect. It works as I would expect it to.\n    ","url":"https://solutionschecker.com/questions/why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550#solution7","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><script id="google-analytics" data-nscript="beforeInteractive">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NXVLL8B');</script><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-862498b6ec7885c3.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-47289857226115f9.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_buildManifest.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_ssgManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXVLL8B"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550"><h1>Why does a RegExp with global flag give wrong results?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>What is the problem with this regular expression when I use the global flag and the case insensitive flag? Query is a user generated input. The result should be [true, true].</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> query = <span class="hljs-string">'Foo B'</span>;
<span class="hljs-keyword">var</span> re = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(query, <span class="hljs-string">'gi'</span>);
<span class="hljs-keyword">var</span> result = [];
result.<span class="hljs-title function_">push</span>(re.<span class="hljs-title function_">test</span>(<span class="hljs-string">'Foo Bar'</span>));
result.<span class="hljs-title function_">push</span>(re.<span class="hljs-title function_">test</span>(<span class="hljs-string">'Foo Bar'</span>));
<span class="hljs-comment">// result will be [true, false]</span>
</code></pre>

<hr>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/^a$/g</span>;
<span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i++ &lt; <span class="hljs-number">10</span>;)
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(reg.<span class="hljs-title function_">test</span>(<span class="hljs-string">"a"</span>));</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif1" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A <code>RegExp</code> object with the <code>g</code> flag keeps track of the <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/RegExp/lastIndex" rel="noreferrer"><code>lastIndex</code></a> where a match occurred, so on subsequent matches it will start from the last used index, instead of 0. Take a look:</p>
<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> query = <span class="hljs-string">'Foo B'</span>;
<span class="hljs-keyword">var</span> re = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(query, <span class="hljs-string">'gi'</span>);
<span class="hljs-keyword">var</span> result = [];
result.<span class="hljs-title function_">push</span>(re.<span class="hljs-title function_">test</span>(<span class="hljs-string">'Foo Bar'</span>));

<span class="hljs-title function_">alert</span>(re.<span class="hljs-property">lastIndex</span>);

result.<span class="hljs-title function_">push</span>(re.<span class="hljs-title function_">test</span>(<span class="hljs-string">'Foo Bar'</span>));</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif2" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
<p>If you don't want to manually reset <code>lastIndex</code> to 0 after every test, just remove the <code>g</code> flag.</p>
<p>Here's the algorithm that the specs dictate (section 15.10.6.2):</p>
<blockquote>
<p><strong>RegExp.prototype.exec(string)</strong></p>
<p>Performs
a regular expression match of string
against the regular expression and
returns an Array object containing the
results of the match, or null if the
string did not match The string
ToString(string) is searched for an
occurrence of the regular expression
pattern as follows:</p>
</blockquote>
<blockquote>
<ol>
<li>Let <em>R</em> be this RexExp object.</li>
<li>Let <em>S</em> be the value of ToString(string).</li>
<li>Let <em>length</em> be the length of <em>S</em>.</li>
<li><strong>Let lastIndex be the value of the lastIndex property on <em>R</em>.</strong></li>
<li>Let i be the value of ToInteger(lastIndex).</li>
<li>If the global property is false, let i = 0.</li>
<li>If i &lt; 0 or i &gt; length then set the <em>lastIndex</em> property of <em>R</em> to 0 and return null.</li>
<li>Call [[Match]], giving it the arguments S and i. If [[Match]]
returned failure, go to step 9;
otherwise let r be its State result
and go to step 10.</li>
<li>Let i = i+1.</li>
<li>Go to step 7.</li>
<li>Let e be r's endIndex value.</li>
<li><strong>If the global property is true, set the <em>lastIndex</em> property of <em>R</em> to e.</strong></li>
<li>Let n be the length of r's captures array. (This is the same
value as 15.10.2.1's
NCapturingParens.)</li>
<li>Return a new array with the following properties:</li>
</ol>
<ul>
<li>The index
property is set to the position of the
matched substring within the complete
string S.</li>
<li>The input property is set
to S.</li>
<li>The length property is set to
n + 1.</li>
<li>The 0 property is set to the
matched substring (i.e. the portion of
S between offset i inclusive and
offset e exclusive).</li>
<li>For each
integer i such that i &gt; 0 and i  n,
set the property named ToString(i) to
the ith element of r's captures array.</li>
</ul>
</blockquote>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You are using a single <code>RegExp</code> object and executing it multiple times. On each successive execution it continues on from the last match index.</p>

<p>You need to "reset" the regex to start from the beginning before each execution:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">result.<span class="hljs-title function_">push</span>(re.<span class="hljs-title function_">test</span>(<span class="hljs-string">'Foo Bar'</span>));
re.<span class="hljs-property">lastIndex</span> = <span class="hljs-number">0</span>;
result.<span class="hljs-title function_">push</span>(re.<span class="hljs-title function_">test</span>(<span class="hljs-string">'Foo Bar'</span>));
<span class="hljs-comment">// result is now [true, true]</span>
</code></pre>

<p>Having said that it may be more readable to create a new RegExp object each time (overhead is minimal as the RegExp is cached anyway):</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">result.<span class="hljs-title function_">push</span>((<span class="hljs-regexp">/Foo B/gi</span>).<span class="hljs-title function_">test</span>(stringA));
result.<span class="hljs-title function_">push</span>((<span class="hljs-regexp">/Foo B/gi</span>).<span class="hljs-title function_">test</span>(stringB));
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong><code>RegExp.prototype.test</code></strong> updates the regular expressions' <strong><code>lastIndex</code></strong> property so that each test will start where the last one stopped. I'd suggest using <strong><code>String.prototype.match</code></strong> since it doesn't update the <strong><code>lastIndex</code></strong> property:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">!!<span class="hljs-string">'Foo Bar'</span>.<span class="hljs-title function_">match</span>(re); <span class="hljs-comment">// -&gt; true</span>
!!<span class="hljs-string">'Foo Bar'</span>.<span class="hljs-title function_">match</span>(re); <span class="hljs-comment">// -&gt; true</span>
</code></pre>

<p>Note: <strong><code>!!</code></strong> converts it to a boolean and then inverts the boolean so it reflects the result.</p>

<p>Alternatively, you could just reset the <strong><code>lastIndex</code></strong> property:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">result.<span class="hljs-title function_">push</span>(re.<span class="hljs-title function_">test</span>(<span class="hljs-string">'Foo Bar'</span>));
re.<span class="hljs-property">lastIndex</span> = <span class="hljs-number">0</span>;
result.<span class="hljs-title function_">push</span>(re.<span class="hljs-title function_">test</span>(<span class="hljs-string">'Foo Bar'</span>));
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Removing global <code>g</code> flag will fix your problem.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> re = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(query, <span class="hljs-string">'gi'</span>);
</code></pre>

<p><em>Should be</em></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> re = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(query, <span class="hljs-string">'i'</span>);
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You need to set re.lastIndex = 0 because with g flag regex keep track of last match occured, so test will not go to test the same string, for that you need to do re.lastIndex = 0 </p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> query = <span class="hljs-string">'Foo B'</span>;
<span class="hljs-keyword">var</span> re = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(query, <span class="hljs-string">'gi'</span>);
<span class="hljs-keyword">var</span> result = [];
result.<span class="hljs-title function_">push</span>(re.<span class="hljs-title function_">test</span>(<span class="hljs-string">'Foo Bar'</span>));
re.<span class="hljs-property">lastIndex</span>=<span class="hljs-number">0</span>;
result.<span class="hljs-title function_">push</span>(re.<span class="hljs-title function_">test</span>(<span class="hljs-string">'Foo Bar'</span>));

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif3" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using the /g flag tells it to continue searching after a hit.</p>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec" rel="nofollow noreferrer">If the match succeeds, the exec() method returns an array and updates properties of the regular expression object.</a></p>

<p>Before your first search:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">myRegex.<span class="hljs-property">lastIndex</span>
<span class="hljs-comment">//is 0</span>
</code></pre>

<p>After the first search</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">myRegex.<span class="hljs-property">lastIndex</span>
<span class="hljs-comment">//is 8</span>
</code></pre>

<p>Remove the g and it exits the search after each call to exec().</p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I had the function:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">parseDevName</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-keyword">var</span> re = <span class="hljs-regexp">/^([^-]+)-([^-]+)-([^-]+)$/g</span>;
  <span class="hljs-keyword">var</span> match = re.<span class="hljs-title function_">exec</span>(name);
  <span class="hljs-keyword">return</span> match.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>,<span class="hljs-number">4</span>);
}

<span class="hljs-keyword">var</span> rv = <span class="hljs-title function_">parseDevName</span>(<span class="hljs-string">"BR-H-01"</span>);
rv = <span class="hljs-title function_">parseDevName</span>(<span class="hljs-string">"BR-H-01"</span>);
</code></pre>

<p>The first call works.
The second call doesn't. The <code>slice</code> operation complains about a null value. I assume this is because of the <code>re.lastIndex</code>. This is strange because I would expect a new <code>RegExp</code> to be allocated each time the function is called and not shared across multiple invocations of my function.</p>

<p>When I changed it to:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> re = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">'^([^-]+)-([^-]+)-([^-]+)$'</span>, <span class="hljs-string">'g'</span>);
</code></pre>

<p>Then I don't get the <code>lastIndex</code> holdover effect. It works as I would expect it to.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-do-i-write-a-correct-micro-benchmark-in-java-1657384488725">How do I write a correct micro-benchmark in Java?</a><a href="/questions/is-there-a-difference-between-%22%22-and-%22is%22-1657387902231">Is there a difference between &quot;==&quot; and &quot;is&quot;?</a><a href="/questions/how-does-access-control-allow-origin-header-work-1657384881723">How does Access-Control-Allow-Origin header work?</a><a href="/questions/using-regular-expressions-to-parse-html:-why-not-1657387543969">Using regular expressions to parse HTML: why not?</a><a href="/questions/random-number-generator-only-generating-one-random-number-1657385468315">Random number generator only generating one random number</a><a href="/questions/how-do-i-compare-strings-in-java-1657384243187">How do I compare strings in Java?</a><a href="/questions/how-do-i-correctly-clone-a-javascript-object-1657387325850">How do I correctly clone a JavaScript object?</a><a href="/questions/how-do-i-add-a-delay-in-a-javascript-loop-1657388544679">How do I add a delay in a JavaScript loop?</a><a href="/questions/methods-in-es6-objects:-using-arrow-functions-1657388249058">Methods in ES6 objects: using arrow functions</a><a href="/questions/what-is-the-purpose-of-the-var-keyword-and-when-should-i-use-it-(or-omit-it)-1657387525538">What is the purpose of the var keyword and when should I use it (or omit it)?</a><a href="/questions/what-is-the-difference-between-char-s-and-char-*s-1657387823570">What is the difference between char s[] and char *s?</a><a href="/questions/how-to-check-if-element-is-visible-after-scrolling-1657387987960">How to check if element is visible after scrolling?</a><a href="/questions/what-is-the-best-way-to-detect-a-mobile-device-1657387665025">What is the best way to detect a mobile device?</a><a href="/questions/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other-resources-needed-by-my-javafx-application-1657388143988">How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?</a><a href="/questions/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element-1657384326458">Why does jQuery or a DOM method such as getElementById not find the element?</a><a href="/questions/what-is-the-javascript-version-of-sleep()-1657387391406">What is the JavaScript version of sleep()?</a><a href="/questions/why-are-mutable-structs-%22evil%22-1657388508974">Why are mutable structs “evil”?</a><a href="/questions/flexbox:-center-horizontally-and-vertically-1657384587888">Flexbox: center horizontally and vertically</a><a href="/questions/ways-to-circumvent-the-same-origin-policy-1657384763316">Ways to circumvent the same-origin policy</a><a href="/questions/templated-check-for-the-existence-of-a-class-member-function-1657388363414">Templated check for the existence of a class member function?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;A \u0026lt;code\u0026gt;RegExp\u0026lt;/code\u0026gt; object with the \u0026lt;code\u0026gt;g\u0026lt;/code\u0026gt; flag keeps track of the \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/RegExp/lastIndex\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;lastIndex\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; where a match occurred, so on subsequent matches it will start from the last used index, instead of 0. Take a look:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;false\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; query = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo B\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; re = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(query, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;gi\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; result = [];\nresult.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;));\n\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;lastIndex\u0026lt;/span\u0026gt;);\n\nresult.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;));\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif2\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you don\u0026apos;t want to manually reset \u0026lt;code\u0026gt;lastIndex\u0026lt;/code\u0026gt; to 0 after every test, just remove the \u0026lt;code\u0026gt;g\u0026lt;/code\u0026gt; flag.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Here\u0026apos;s the algorithm that the specs dictate (section 15.10.6.2):\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;RegExp.prototype.exec(string)\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Performs\na regular expression match of string\nagainst the regular expression and\nreturns an Array object containing the\nresults of the match, or null if the\nstring did not match The string\nToString(string) is searched for an\noccurrence of the regular expression\npattern as follows:\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Let \u0026lt;em\u0026gt;R\u0026lt;/em\u0026gt; be this RexExp object.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Let \u0026lt;em\u0026gt;S\u0026lt;/em\u0026gt; be the value of ToString(string).\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Let \u0026lt;em\u0026gt;length\u0026lt;/em\u0026gt; be the length of \u0026lt;em\u0026gt;S\u0026lt;/em\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Let lastIndex be the value of the lastIndex property on \u0026lt;em\u0026gt;R\u0026lt;/em\u0026gt;.\u0026lt;/strong\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Let i be the value of ToInteger(lastIndex).\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;If the global property is false, let i = 0.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;If i \u0026amp;lt; 0 or i \u0026amp;gt; length then set the \u0026lt;em\u0026gt;lastIndex\u0026lt;/em\u0026gt; property of \u0026lt;em\u0026gt;R\u0026lt;/em\u0026gt; to 0 and return null.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Call [[Match]], giving it the arguments S and i. If [[Match]]\nreturned failure, go to step 9;\notherwise let r be its State result\nand go to step 10.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Let i = i+1.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Go to step 7.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Let e be r\u0026apos;s endIndex value.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;If the global property is true, set the \u0026lt;em\u0026gt;lastIndex\u0026lt;/em\u0026gt; property of \u0026lt;em\u0026gt;R\u0026lt;/em\u0026gt; to e.\u0026lt;/strong\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Let n be the length of r\u0026apos;s captures array. (This is the same\nvalue as 15.10.2.1\u0026apos;s\nNCapturingParens.)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Return a new array with the following properties:\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;The index\nproperty is set to the position of the\nmatched substring within the complete\nstring S.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;The input property is set\nto S.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;The length property is set to\nn + 1.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;The 0 property is set to the\nmatched substring (i.e. the portion of\nS between offset i inclusive and\noffset e exclusive).\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;For each\ninteger i such that i \u0026amp;gt; 0 and i  n,\nset the property named ToString(i) to\nthe ith element of r\u0026apos;s captures array.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You are using a single \u0026lt;code\u0026gt;RegExp\u0026lt;/code\u0026gt; object and executing it multiple times. On each successive execution it continues on from the last match index.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You need to \u0026quot;reset\u0026quot; the regex to start from the beginning before each execution:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;result.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;));\nre.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;lastIndex\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\nresult.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;));\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// result is now [true, true]\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Having said that it may be more readable to create a new RegExp object each time (overhead is minimal as the RegExp is cached anyway):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;result.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;((\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/Foo B/gi\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(stringA));\nresult.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;((\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/Foo B/gi\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(stringB));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;RegExp.prototype.test\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt; updates the regular expressions\u0026apos; \u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;lastIndex\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt; property so that each test will start where the last one stopped. I\u0026apos;d suggest using \u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;String.prototype.match\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt; since it doesn\u0026apos;t update the \u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;lastIndex\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt; property:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;!!\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;match\u0026lt;/span\u0026gt;(re); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// -\u0026amp;gt; true\u0026lt;/span\u0026gt;\n!!\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;match\u0026lt;/span\u0026gt;(re); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// -\u0026amp;gt; true\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note: \u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;!!\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt; converts it to a boolean and then inverts the boolean so it reflects the result.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Alternatively, you could just reset the \u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;lastIndex\u0026lt;/code\u0026gt;\u0026lt;/strong\u0026gt; property:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;result.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;));\nre.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;lastIndex\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\nresult.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Removing global \u0026lt;code\u0026gt;g\u0026lt;/code\u0026gt; flag will fix your problem.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; re = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(query, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;gi\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Should be\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; re = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(query, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You need to set re.lastIndex = 0 because with g flag regex keep track of last match occured, so test will not go to test the same string, for that you need to do re.lastIndex = 0 \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;false\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; query = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo B\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; re = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(query, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;gi\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; result = [];\nresult.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;));\nre.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;lastIndex\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\nresult.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;));\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(result)\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif3\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Using the /g flag tells it to continue searching after a hit.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;If the match succeeds, the exec() method returns an array and updates properties of the regular expression object.\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Before your first search:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;myRegex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;lastIndex\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//is 0\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;After the first search\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;myRegex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;lastIndex\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//is 8\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Remove the g and it exits the search after each call to exec().\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I had the function:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseDevName\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; re = \u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/^([^-]+)-([^-]+)-([^-]+)$/g\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; match = re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;exec\u0026lt;/span\u0026gt;(name);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; match.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;);\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; rv = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseDevName\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;BR-H-01\u0026quot;\u0026lt;/span\u0026gt;);\nrv = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseDevName\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;BR-H-01\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The first call works.\nThe second call doesn\u0026apos;t. The \u0026lt;code\u0026gt;slice\u0026lt;/code\u0026gt; operation complains about a null value. I assume this is because of the \u0026lt;code\u0026gt;re.lastIndex\u0026lt;/code\u0026gt;. This is strange because I would expect a new \u0026lt;code\u0026gt;RegExp\u0026lt;/code\u0026gt; to be allocated each time the function is called and not shared across multiple invocations of my function.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;When I changed it to:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; re = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;^([^-]+)-([^-]+)-([^-]+)$\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;g\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then I don\u0026apos;t get the \u0026lt;code\u0026gt;lastIndex\u0026lt;/code\u0026gt; holdover effect. It works as I would expect it to.\u0026lt;/p\u0026gt;\n    "],"id":373,"title":"Why does a RegExp with global flag give wrong results?","content":"\n                \n\u0026lt;p\u0026gt;What is the problem with this regular expression when I use the global flag and the case insensitive flag? Query is a user generated input. The result should be [true, true].\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; query = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo B\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; re = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(query, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;gi\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; result = [];\nresult.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;));\nresult.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(re.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Foo Bar\u0026apos;\u0026lt;/span\u0026gt;));\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// result will be [true, false]\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;false\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; reg = \u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/^a$/g\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i++ \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;;)\n   \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(reg.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;));\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif1\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n    ","slug":"why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550","postType":"QUESTION","createdAt":"2022-07-09T17:29:48.000Z","updatedAt":"2022-07-09T17:29:48.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"How do I write a correct micro-benchmark in Java?","slug":"how-do-i-write-a-correct-micro-benchmark-in-java-1657384488725"},{"title":"Is there a difference between \"==\" and \"is\"?","slug":"is-there-a-difference-between-\"\"-and-\"is\"-1657387902231"},{"title":"How does Access-Control-Allow-Origin header work?","slug":"how-does-access-control-allow-origin-header-work-1657384881723"},{"title":"Using regular expressions to parse HTML: why not?","slug":"using-regular-expressions-to-parse-html:-why-not-1657387543969"},{"title":"Random number generator only generating one random number","slug":"random-number-generator-only-generating-one-random-number-1657385468315"},{"title":"How do I compare strings in Java?","slug":"how-do-i-compare-strings-in-java-1657384243187"},{"title":"How do I correctly clone a JavaScript object?","slug":"how-do-i-correctly-clone-a-javascript-object-1657387325850"},{"title":"How do I add a delay in a JavaScript loop?","slug":"how-do-i-add-a-delay-in-a-javascript-loop-1657388544679"},{"title":"Methods in ES6 objects: using arrow functions","slug":"methods-in-es6-objects:-using-arrow-functions-1657388249058"},{"title":"What is the purpose of the var keyword and when should I use it (or omit it)?","slug":"what-is-the-purpose-of-the-var-keyword-and-when-should-i-use-it-(or-omit-it)-1657387525538"},{"title":"What is the difference between char s[] and char *s?","slug":"what-is-the-difference-between-char-s-and-char-*s-1657387823570"},{"title":"How to check if element is visible after scrolling?","slug":"how-to-check-if-element-is-visible-after-scrolling-1657387987960"},{"title":"What is the best way to detect a mobile device?","slug":"what-is-the-best-way-to-detect-a-mobile-device-1657387665025"},{"title":"How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?","slug":"how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other-resources-needed-by-my-javafx-application-1657388143988"},{"title":"Why does jQuery or a DOM method such as getElementById not find the element?","slug":"why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element-1657384326458"},{"title":"What is the JavaScript version of sleep()?","slug":"what-is-the-javascript-version-of-sleep()-1657387391406"},{"title":"Why are mutable structs “evil”?","slug":"why-are-mutable-structs-\"evil\"-1657388508974"},{"title":"Flexbox: center horizontally and vertically","slug":"flexbox:-center-horizontally-and-vertically-1657384587888"},{"title":"Ways to circumvent the same-origin policy","slug":"ways-to-circumvent-the-same-origin-policy-1657384763316"},{"title":"Templated check for the existence of a class member function?","slug":"templated-check-for-the-existence-of-a-class-member-function-1657388363414"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"why-does-a-regexp-with-global-flag-give-wrong-results-1657387788550"},"buildId":"xZs8haGjOP63QuDE0kxeX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>