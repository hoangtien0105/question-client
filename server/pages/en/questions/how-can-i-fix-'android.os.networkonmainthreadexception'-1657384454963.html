<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="android-networking,networkonmainthread,solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/how-can-i-fix-&apos;android.os.networkonmainthreadexception&apos;-1657384454963","name":"Questions"}}]}</script><title>How can I fix &#x27;android.os.NetworkOnMainThreadException&#x27;? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I got an error while running my Android project for RssReader. 

Code:

URL url = new URL(urlToRssFeed);
SAXParserFactory factory = SAXParserFactory.newInstance();
SAXParser parser = factory.newSAXParser();
XMLReader xmlreader = parser.getXMLReader();
RssHandler theRSSHandler = new RssHandler();
xmlreader.setContentHandler(theRSSHandler);
InputSource is = new InputSource(url.openStream());
xmlreader.parse(is);
return theRSSHandler.getFeed();


And it shows the below error:

android.os.NetworkOnMainThreadException


How can I fix this issue?
    "/><meta property="og:title" content="How can I fix &#x27;android.os.NetworkOnMainThreadException&#x27;? | Solution Checker"/><meta property="og:description" content="I got an error while running my Android project for RssReader. 

Code:

URL url = new URL(urlToRssFeed);
SAXParserFactory factory = SAXParserFactory.newInstance();
SAXParser parser = factory.newSAXParser();
XMLReader xmlreader = parser.getXMLReader();
RssHandler theRSSHandler = new RssHandler();
xmlreader.setContentHandler(theRSSHandler);
InputSource is = new InputSource(url.openStream());
xmlreader.parse(is);
return theRSSHandler.getFeed();


And it shows the below error:

android.os.NetworkOnMainThreadException


How can I fix this issue?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How can I fix &apos;android.os.NetworkOnMainThreadException&apos;?","text":"I got an error while running my Android project for RssReader. \n\nCode:\n\nURL url = new URL(urlToRssFeed);\nSAXParserFactory factory = SAXParserFactory.newInstance();\nSAXParser parser = factory.newSAXParser();\nXMLReader xmlreader = parser.getXMLReader();\nRssHandler theRSSHandler = new RssHandler();\nxmlreader.setContentHandler(theRSSHandler);\nInputSource is = new InputSource(url.openStream());\nxmlreader.parse(is);\nreturn theRSSHandler.getFeed();\n\n\nAnd it shows the below error:\n\nandroid.os.NetworkOnMainThreadException\n\n\nHow can I fix this issue?\n    ","answerCount":30,"upVoteCount":500,"suggestedAnswer":[{"text":"NOTE : AsyncTask was deprecated in API level 30.\nAsyncTask | Android Developers\nThis exception is thrown when an application attempts to perform a networking operation on its main thread. Run your code in AsyncTask:\nclass RetrieveFeedTask extends AsyncTask&lt;String, Void, RSSFeed&gt; {\n\n    private Exception exception;\n\n    protected RSSFeed doInBackground(String... urls) {\n        try {\n            URL url = new URL(urls[0]);\n            SAXParserFactory factory = SAXParserFactory.newInstance();\n            SAXParser parser = factory.newSAXParser();\n            XMLReader xmlreader = parser.getXMLReader();\n            RssHandler theRSSHandler = new RssHandler();\n            xmlreader.setContentHandler(theRSSHandler);\n            InputSource is = new InputSource(url.openStream());\n            xmlreader.parse(is);\n\n            return theRSSHandler.getFeed();\n        } catch (Exception e) {\n            this.exception = e;\n\n            return null;\n        } finally {\n            is.close();\n        }\n    }\n\n    protected void onPostExecute(RSSFeed feed) {\n        // TODO: check this.exception\n        // TODO: do something with the feed\n    }\n}\n\nHow to execute the task:\nIn MainActivity.java file you can add this line within your oncreate() method\nnew RetrieveFeedTask().execute(urlToRssFeed);\n\nDon&apos;t forget to add this to AndroidManifest.xml file:\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"You should almost always run network operations on a thread or as an asynchronous task.\nBut it is possible to remove this restriction and you override the default behavior, if you are willing to accept the consequences.\nAdd:\nStrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n\nStrictMode.setThreadPolicy(policy);\n\nIn your class,\nand\nAdd this permission in the Android manifest.xml file:\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n\nConsequences:\nYour app will (in areas of spotty Internet connection) become unresponsive and lock up, the user perceives slowness and has to do a force kill, and you risk the activity manager killing your app and telling the user that the app has stopped.\nAndroid has some good tips on good programming practices to design for responsiveness:\nNetworkOnMainThreadException | Android Developers\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"I solved this problem using a new Thread.\n\nThread thread = new Thread(new Runnable() {\n\n    @Override\n    public void run() {\n        try  {\n            //Your code goes here\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n});\n\nthread.start(); \n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"The accepted answer has some significant downsides. It is not advisable to use AsyncTask for networking unless you really know what you are doing. Some of the down-sides include:\n\nAsyncTask&apos;s created as non-static inner classes have an implicit reference to the enclosing Activity object, its context, and the entire View hierarchy created by that activity. This reference prevents the Activity from being garbage collected until the AsyncTask&apos;s background work completes. If the user&apos;s connection is slow, and/or the download is large, these short-term memory leaks can become a problem - for example, if the orientation changes several times (and you don&apos;t cancel the executing tasks), or the user navigates away from the Activity.\nAsyncTask has different execution characteristics depending on the platform it executes on: prior to API level 4 AsyncTasks execute serially on a single background thread; from API level 4 through API level 10, AsyncTasks execute on a pool of up to 128 threads; from API level 11 onwards AsyncTask executes serially on a single background thread (unless you use the overloaded executeOnExecutor method and supply an alternative executor). Code that works fine when running serially on ICS may break when executed concurrently on Gingerbread, say if you have inadvertent order-of-execution dependencies.\n\nIf you want to avoid short-term memory leaks, have well-defined execution characteristics across all platforms, and have a base to build really robust network handling, you might want to consider:\n\nUsing a library that does a nice job of this for you - there&apos;s a nice comparison of networking libs in this question, or\nUsing a Service or IntentService instead, perhaps with a PendingIntent to return the result via the Activity&apos;s onActivityResult method.\n\nIntentService approach\nDownsides:\n\nMore code and complexity than AsyncTask, though not as much as you might think\nWill queue requests and run them on a single background thread. You can easily control this by replacing IntentService with an equivalent Service implementation, perhaps like this one.\nUm, I can&apos;t think of any others right now actually\n\nUpsides:\n\nAvoids the short-term memory leak problem\nIf your activity restarts while network operations are in-flight it can still receive the result of the download via its onActivityResult method\nA better platform than AsyncTask to build and reuse robust networking code. Example: if you need to do an important upload, you could do it from AsyncTask in an Activity, but if the user context-switches out of the app to take a phone call, the system may kill the app before the upload completes. It is less likely to kill an application with an active Service.\nIf you use your own concurrent version of IntentService (like the one I linked above) you can control the level of concurrency via the Executor.\n\nImplementation summary\nYou can implement an IntentService to perform downloads on a single background thread quite easily.\nStep 1: Create an IntentService to perform the download. You can tell it what to download via Intent extras, and pass it a PendingIntent to use to return the result to the Activity:\nimport android.app.IntentService;\nimport android.app.PendingIntent;\nimport android.content.Intent;\nimport android.util.Log;\n\nimport java.io.InputStream;\nimport java.net.MalformedURLException;\nimport java.net.URL;\n\npublic class DownloadIntentService extends IntentService {\n\n    private static final String TAG = DownloadIntentService.class.getSimpleName();\n\n    public static final String PENDING_RESULT_EXTRA = &quot;pending_result&quot;;\n    public static final String URL_EXTRA = &quot;url&quot;;\n    public static final String RSS_RESULT_EXTRA = &quot;url&quot;;\n\n    public static final int RESULT_CODE = 0;\n    public static final int INVALID_URL_CODE = 1;\n    public static final int ERROR_CODE = 2;\n\n    private IllustrativeRSSParser parser;\n\n    public DownloadIntentService() {\n        super(TAG);\n\n        // make one and reuse, in the case where more than one intent is queued\n        parser = new IllustrativeRSSParser();\n    }\n\n    @Override\n    protected void onHandleIntent(Intent intent) {\n        PendingIntent reply = intent.getParcelableExtra(PENDING_RESULT_EXTRA);\n        InputStream in = null;\n        try {\n            try {\n                URL url = new URL(intent.getStringExtra(URL_EXTRA));\n                IllustrativeRSS rss = parser.parse(in = url.openStream());\n\n                Intent result = new Intent();\n                result.putExtra(RSS_RESULT_EXTRA, rss);\n\n                reply.send(this, RESULT_CODE, result);\n            } catch (MalformedURLException exc) {\n                reply.send(INVALID_URL_CODE);\n            } catch (Exception exc) {\n                // could do better by treating the different sax/xml exceptions individually\n                reply.send(ERROR_CODE);\n            }\n        } catch (PendingIntent.CanceledException exc) {\n            Log.i(TAG, &quot;reply cancelled&quot;, exc);\n        }\n    }\n}\n\nStep 2: Register the service in the manifest:\n&lt;service\n        android:name=&quot;.DownloadIntentService&quot;\n        android:exported=&quot;false&quot;/&gt;\n\nStep 3: Invoke the service from the Activity, passing a PendingResult object which the Service will use to return the result:\nPendingIntent pendingResult = createPendingResult(\n    RSS_DOWNLOAD_REQUEST_CODE, new Intent(), 0);\nIntent intent = new Intent(getApplicationContext(), DownloadIntentService.class);\nintent.putExtra(DownloadIntentService.URL_EXTRA, URL);\nintent.putExtra(DownloadIntentService.PENDING_RESULT_EXTRA, pendingResult);\nstartService(intent);\n\nStep 4: Handle the result in onActivityResult:\n@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    if (requestCode == RSS_DOWNLOAD_REQUEST_CODE) {\n        switch (resultCode) {\n            case DownloadIntentService.INVALID_URL_CODE:\n                handleInvalidURL();\n                break;\n            case DownloadIntentService.ERROR_CODE:\n                handleError(data);\n                break;\n            case DownloadIntentService.RESULT_CODE:\n                handleRSS(data);\n                break;\n        }\n        handleRSS(data);\n    }\n    super.onActivityResult(requestCode, resultCode, data);\n}\n\nA GitHub project containing a complete working Android Studio/Gradle project is available here.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"You cannot perform network I/O on the UI thread on Honeycomb. Technically, it is possible on earlier versions of Android, but it is a really bad idea as it will cause your app to stop responding, and can result in the OS killing your app for being badly behaved. You&apos;ll need to run a background process or use AsyncTask to perform your network transaction on a background thread.\n\nThere is an article about Painless Threading on the Android developer site which is a good introduction to this, and it will provide you with a much better depth of an answer than can be realistically provided here.\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"There are two solutions of this problem.\n\nDon&apos;t use a network call in the main UI thread. Use an async task for that.\n\nWrite the below code into your MainActivity file after setContentView(R.layout.activity_main);:\nif (android.os.Build.VERSION.SDK_INT &gt; 9) {\nStrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\nStrictMode.setThreadPolicy(policy);\n}\n\n\nAnd the below import statement into your Java file.\nimport android.os.StrictMode;\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"Do the network actions on another thread.\nFor example:\nnew Thread(new Runnable(){\n    @Override\n    public void run() {\n        // Do network action in this function\n    }\n}).start();\n\nAnd add this to file AndroidManifest.xml:\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"\nDo not use strictMode (only in debug mode)\nDo not change SDK version\nDo not use a separate thread\n\n\nUse Service or AsyncTask\n\nSee also StackÂ Overflow question:\n\nandroid.os.NetworkOnMainThreadException sending an email from Android\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"You disable the strict mode using following code:\n\nif (android.os.Build.VERSION.SDK_INT &gt; 9) {\n    StrictMode.ThreadPolicy policy = \n        new StrictMode.ThreadPolicy.Builder().permitAll().build();\n    StrictMode.setThreadPolicy(policy);\n}\n\n\nThis is not recommended: use the AsyncTask interface.\n\nFull code for both the methods\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"Network-based operations cannot be run on the main thread. You need to run all network-based tasks on a child thread or implement AsyncTask.\n\nThis is how you run a task in a child thread:\n\nnew Thread(new Runnable(){\n    @Override\n    public void run() {\n        try {\n            // Your implementation goes here\n        } \n        catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}).start();\n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"Put your code inside:\n\nnew Thread(new Runnable(){\n    @Override\n    public void run() {\n        try {\n            // Your implementation\n        }\n        catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}).start();\n\n\nOr:\n\nclass DemoTask extends AsyncTask&lt;Void, Void, Void&gt; {\n\n    protected Void doInBackground(Void... arg0) {\n        //Your implementation\n    }\n\n    protected void onPostExecute(Void result) {\n        // TODO: do something with the feed\n    }\n}\n\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"This happens in Android 3.0 and above. From Android 3.0 and above, they have restricted using network operations (functions that access the Internet) from running in the main thread/UI thread (what spawns from your on create and on resume methods in the activity).\n\nThis is to encourage using separate threads for network operations. See AsyncTask for more details on how to perform network activities the right way.\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"Using Android Annotations is an option. It will allow you to simply run any method in a background thread:\n\n// normal method\nprivate void normal() {\n    doSomething(); // do something in background\n}\n\n@Background\nprotected void doSomething() \n    // run your networking code here\n}\n\n\nNote, that although it provides benefits of simplicity and readability, it has its disadvantages. \n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"The error is due to executing long running operations in main thread,You can easily rectify the problem by using AsynTask or Thread. You can checkout this library AsyncHTTPClient for better handling. \n\nAsyncHttpClient client = new AsyncHttpClient();\nclient.get(&quot;http://www.google.com&quot;, new AsyncHttpResponseHandler() {\n\n    @Override\n    public void onStart() {\n        // Called before a request is started\n    }\n\n    @Override\n    public void onSuccess(int statusCode, Header[] headers, byte[] response) {\n        // Called when response HTTP status is &quot;200 OK&quot;\n    }\n\n    @Override\n    public void onFailure(int statusCode, Header[] headers, byte[] errorResponse, Throwable e) {\n        // Called when response HTTP status is &quot;4XX&quot; (for example, 401, 403, 404)\n    }\n\n    @Override\n    public void onRetry(int retryNo) {\n        // Called when request is retried\n    }\n});\n\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"You should not do any time-consuming task on the main thread (UI thread), like any network operation, file I/O, or SQLite database operations. So for this kind of operation, you should create a worker thread, but the problem is that you can not directly perform any UI related operation from your worker thread. For that, you have to use Handler and pass the Message. \n\nTo simplify all these things, Android provides various ways, like AsyncTask, AsyncTaskLoader, CursorLoader or IntentService. So you can use any of these according to your requirements.\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"The top answer of spektom works perfect.\n\nIf you are writing the AsyncTask inline and not extending as a class, and on top of this, if there is a need to get a response out of the AsyncTask, one can use the get() method as below.\n\nRSSFeed feed = new RetreiveFeedTask().execute(urlToRssFeed).get();\n\n\n(From his example.)\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"This is only thrown for applications targeting the Honeycomb SDK or higher. Applications targeting earlier SDK versions are allowed to do networking on their main event loop threads.\n\nThe error is the SDK warning!\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"For me it was this:\n\n&lt;uses-sdk\n        android:minSdkVersion=&quot;8&quot;\n        android:targetSdkVersion=&quot;10&quot; /&gt;\n\n\nThe device I was testing my app on was 4.1.2 which is SDK Version 16!\n\nMake the sure the target version is the same as your Android Target Library. If you are unsure what your target library is, right click your Project -&gt; Build Path -&gt; Android, and it should be the one that is ticked.\n\nAlso, as others have mentioned, include the correct permissions to access the Internet:\n\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"Use this in Your Activity\n\n    btnsub.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            new Thread(new Runnable() {\n\n                @Override\n                public void run() {\n                    // TODO Auto-generated method stub\n\n                    //Initialize soap request + add parameters\n                    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);\n\n                    //Use this to add parameters\n                    request.addProperty(&quot;pincode&quot;, txtpincode.getText().toString());\n                    request.addProperty(&quot;bg&quot;, bloodgroup.getSelectedItem().toString());\n\n                    //Declare the version of the SOAP request\n                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n\n                    envelope.setOutputSoapObject(request);\n                    envelope.dotNet = true;\n\n                    try {\n                        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);\n\n                        //this is the actual part that will call the webservice\n                        androidHttpTransport.call(SOAP_ACTION1, envelope);\n\n                        // Get the SoapResult from the envelope body.\n                        SoapObject result = (SoapObject) envelope.getResponse();\n                        Log.e(&quot;result data&quot;, &quot;data&quot; + result);\n                        SoapObject root = (SoapObject) result.getProperty(0);\n                        // SoapObject s_deals = (SoapObject) root.getProperty(0);\n                        // SoapObject s_deals_1 = (SoapObject) s_deals.getProperty(0);\n                        //\n\n                        System.out.println(&quot;********Count : &quot; + root.getPropertyCount());\n\n                        value = new ArrayList&lt;Detailinfo&gt;();\n\n                        for (int i = 0; i &lt; root.getPropertyCount(); i++) {\n                            SoapObject s_deals = (SoapObject) root.getProperty(i);\n                            Detailinfo info = new Detailinfo();\n\n                            info.setFirstName(s_deals.getProperty(&quot;Firstname&quot;).toString());\n                            info.setLastName(s_deals.getProperty(&quot;Lastname&quot;).toString());\n                            info.setDOB(s_deals.getProperty(&quot;DOB&quot;).toString());\n                            info.setGender(s_deals.getProperty(&quot;Gender&quot;).toString());\n                            info.setAddress(s_deals.getProperty(&quot;Address&quot;).toString());\n                            info.setCity(s_deals.getProperty(&quot;City&quot;).toString());\n                            info.setState(s_deals.getProperty(&quot;State&quot;).toString());\n                            info.setPinecode(s_deals.getProperty(&quot;Pinecode&quot;).toString());\n                            info.setMobile(s_deals.getProperty(&quot;Mobile&quot;).toString());\n                            info.setEmail(s_deals.getProperty(&quot;Email&quot;).toString());\n                            info.setBloodgroup(s_deals.getProperty(&quot;Bloodgroup&quot;).toString());\n                            info.setAdddate(s_deals.getProperty(&quot;Adddate&quot;).toString());\n                            info.setWaight(s_deals.getProperty(&quot;waight&quot;).toString());\n                            value.add(info);\n                        }\n\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n                    Intent intent = new Intent(getApplicationContext(), ComposeMail.class);\n                    //intent.putParcelableArrayListExtra(&quot;valuesList&quot;, value);\n\n                    startActivity(intent);\n                }\n            }).start();\n        }\n    });\n\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"Just to spell out something explicitly:\n\nThe main thread is basically the UI thread.\n\nSo saying that you cannot do networking operations in the main thread means you cannot do networking operations in the UI thread, which means you cannot do networking operations in a *runOnUiThread(new Runnable() { ... }* block inside some other thread, either.\n\n(I just had a long head-scratching moment trying to figure out why I was getting that error somewhere other than my main thread.  This was why; this thread helped; and hopefully this comment will help someone else.)\n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0},{"text":"This exception occurs due to any heavy task performed on the main thread if that performing task takes too much time.\n\nTo avoid this, we can handle it using threads or executers\n\nExecutors.newSingleThreadExecutor().submit(new Runnable() {\n    @Override\n    public void run() {\n        // You can perform your task here.\n    }\n});\n\n    ","url":"/questions/[slug]#solution21","@type":"Answer","upvoteCount":0},{"text":"There are many great answers already on this question, but a lot of great libraries have come out since those answers were posted. This is intended as a kind of newbie-guide.\nI will cover several use cases for performing network operations and a solution or two for each.\nREST over HTTP\nTypically JSON, but it can be XML or something else.\nFull API Access\nLet&apos;s say you are writing an app that lets users track stock prices, interest rates and currency exchange rates. You find an JSON API that looks something like this:\nhttp://api.example.com/stocks                       // ResponseWrapper&lt;String&gt; object containing a\n                                                    // list of strings with ticker symbols\nhttp://api.example.com/stocks/$symbol               // Stock object\nhttp://api.example.com/stocks/$symbol/prices        // PriceHistory&lt;Stock&gt; object\nhttp://api.example.com/currencies                   // ResponseWrapper&lt;String&gt; object containing a\n                                                    // list of currency abbreviation\nhttp://api.example.com/currencies/$currency         // Currency object\nhttp://api.example.com/currencies/$id1/values/$id2  // PriceHistory&lt;Currency&gt; object comparing the prices\n                                                    // of the first currency (id1) to the second (id2)\n\nRetrofit from Square\nThis is an excellent choice for an API with multiple endpoints and allows you to declare the REST endpoints instead of having to code them individually as with other libraries like Amazon Ion Java or Volley (website: Retrofit).\nHow do you use it with the finances API?\nFile build.gradle\nAdd these lines to your module level build.gradle file:\nimplementation &apos;com.squareup.retrofit2:retrofit:2.3.0&apos; // Retrofit library, current as of September 21, 2017\nimplementation &apos;com.squareup.retrofit2:converter-gson:2.3.0&apos; // Gson serialization and deserialization support for retrofit, version must match retrofit version\n\nFile FinancesApi.java\npublic interface FinancesApi {\n    @GET(&quot;stocks&quot;)\n    Call&lt;ResponseWrapper&lt;String&gt;&gt; listStocks();\n    @GET(&quot;stocks/{symbol}&quot;)\n    Call&lt;Stock&gt; getStock(@Path(&quot;symbol&quot;)String tickerSymbol);\n    @GET(&quot;stocks/{symbol}/prices&quot;)\n    Call&lt;PriceHistory&lt;Stock&gt;&gt; getPriceHistory(@Path(&quot;symbol&quot;)String tickerSymbol);\n\n    @GET(&quot;currencies&quot;)\n    Call&lt;ResponseWrapper&lt;String&gt;&gt; listCurrencies();\n    @GET(&quot;currencies/{symbol}&quot;)\n    Call&lt;Currency&gt; getCurrency(@Path(&quot;symbol&quot;)String currencySymbol);\n    @GET(&quot;currencies/{symbol}/values/{compare_symbol}&quot;)\n    Call&lt;PriceHistory&lt;Currency&gt;&gt; getComparativeHistory(@Path(&quot;symbol&quot;)String currency, @Path(&quot;compare_symbol&quot;)String currencyToPriceAgainst);\n}\n\nClass FinancesApiBuilder\npublic class FinancesApiBuilder {\n    public static FinancesApi build(String baseUrl){\n        return new Retrofit.Builder()\n                    .baseUrl(baseUrl)\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .build()\n                    .create(FinancesApi.class);\n    }\n}\n\nClass FinancesFragment snippet\nFinancesApi api = FinancesApiBuilder.build(&quot;http://api.example.com/&quot;); //trailing &apos;/&apos; required for predictable behavior\napi.getStock(&quot;INTC&quot;).enqueue(new Callback&lt;Stock&gt;(){\n    @Override\n    public void onResponse(Call&lt;Stock&gt; stockCall, Response&lt;Stock&gt; stockResponse){\n        Stock stock = stockCall.body();\n        // Do something with the stock\n    }\n    @Override\n    public void onResponse(Call&lt;Stock&gt; stockCall, Throwable t){\n        // Something bad happened\n    }\n}\n\nIf your API requires an API key or other header, like a user token, etc. to be sent, Retrofit makes this easy (see this awesome answer to Add Header Parameter in Retrofit for details).\nOne-off REST API access\nLet&apos;s say you&apos;re building a &quot;mood weather&quot; app that looks up the user&apos;s GPS location and checks the current temperature in that area and tells them the mood. This type of app doesn&apos;t need to declare API endpoints; it just needs to be able to access one API endpoint.\nIon\nThis is a great library for this type of access.\nPlease read msysmilu&apos;s great answer to How can I fix &apos;android.os.NetworkOnMainThreadException&apos;?.\nLoad images via HTTP\nVolley\nVolley can also be used for REST APIs, but due to the more complicated setup required, I prefer to use Retrofit from Square as above.\nLet&apos;s say you are building a social networking app and want to load profile pictures of friends.\nFile build.gradle\nAdd this line to your module level build.gradle file:\nimplementation &apos;com.android.volley:volley:1.0.0&apos;\n\nFile ImageFetch.java\nVolley requires more setup than Retrofit. You will need to create a class like this to setup a RequestQueue, an ImageLoader and an ImageCache, but it&apos;s not too bad:\npublic class ImageFetch {\n    private static ImageLoader imageLoader = null;\n    private static RequestQueue imageQueue = null;\n\n    public static ImageLoader getImageLoader(Context ctx){\n        if(imageLoader == null){\n            if(imageQueue == null){\n                imageQueue = Volley.newRequestQueue(ctx.getApplicationContext());\n            }\n            imageLoader = new ImageLoader(imageQueue, new ImageLoader.ImageCache() {\n                Map&lt;String, Bitmap&gt; cache = new HashMap&lt;String, Bitmap&gt;();\n                @Override\n                public Bitmap getBitmap(String url) {\n                    return cache.get(url);\n                }\n                @Override\n                public void putBitmap(String url, Bitmap bitmap) {\n                    cache.put(url, bitmap);\n                }\n            });\n        }\n        return imageLoader;\n    }\n}\n\nFile user_view_dialog.xml\nAdd the following to your layout XML file to add an image:\n&lt;com.android.volley.toolbox.NetworkImageView\n    android:id=&quot;@+id/profile_picture&quot;\n    android:layout_width=&quot;32dp&quot;\n    android:layout_height=&quot;32dp&quot;\n    android:layout_alignParentTop=&quot;true&quot;\n    android:layout_centerHorizontal=&quot;true&quot;\n    app:srcCompat=&quot;@android:drawable/spinner_background&quot;/&gt;\n\nFile UserViewDialog.java\nAdd the following code to the onCreate method (Fragment, Activity) or the constructor (Dialog):\nNetworkImageView profilePicture = view.findViewById(R.id.profile_picture);\nprofilePicture.setImageUrl(&quot;http://example.com/users/images/profile.jpg&quot;, ImageFetch.getImageLoader(getContext());\n\nPicasso\nPicasso is another excellent library from Square. Please see the website for some great examples.\n    ","url":"/questions/[slug]#solution22","@type":"Answer","upvoteCount":0},{"text":"In simple words,\nDo not do network work in the UI thread\nFor example, if you do an HTTP request, that is a network action.\nSolution:\n\nYou have to create a new Thread\nOr use the AsyncTask class\n\nWay:\nPut all your works inside\n\nThe run() method of the new thread\nOr the doInBackground() method of the AsyncTask class.\n\nBut:\nWhen you get something from a network response and want to show it on your view (like display response message in TextView), you need to return back to the UI thread.\nIf you don&apos;t do it, you will get ViewRootImpl$CalledFromWrongThreadException.\nHow-to\n\nWhile using AsyncTask, update the view from the onPostExecute() method\nOr call the runOnUiThread() method and update the view inside the run() method.\n\n    ","url":"/questions/[slug]#solution23","@type":"Answer","upvoteCount":0},{"text":"You are able to move a part of your code into another thread to offload the main thread and avoid getting ANR, NetworkOnMainThreadException, IllegalStateException (e.g., cannot access database on the main thread since it may potentially lock the UI for a long period of time).\nThere are some approaches that you should choose depends on the situation\nJava Thread or Android HandlerThread:\n\nJava threads are one-time use only and die after executing its run method.\nHandlerThread is a handy class for starting a new thread that has a looper.\n\nAsyncTask (deprecated in API level 30)\n\nAsyncTask is designed to be a helper class around Thread and Handler and does not constitute a generic threading framework. AsyncTasks should ideally be used for short operations (a few seconds at the most.) If you need to keep threads running for long periods of time, it is highly recommended you use the various APIs provided by the java.util.concurrent package such as Executor, ThreadPoolExecutor and FutureTask.\n\nSince the main thread monopolizes UI components, it is not possible to access to some View, and that is why Handler comes to the rescue\n[Executor framework]\n\nThreadPoolExecutor class that implements ExecutorService which gives fine control on the thread pool (E.g., core pool size, max pool size, keep alive time, etc.)\nScheduledThreadPoolExecutor - a class that extends ThreadPoolExecutor. It can schedule tasks after a given delay or periodically.\n\nFutureTask\n\nFutureTask performs asynchronous processing, however, if the result is not ready yet or processing has not complete, calling get() will be block the thread\n\nAsyncTaskLoaders\n\nAsyncTaskLoaders as they solve a lot of problems that are inherent to AsyncTask\n\nIntentService\n\nThis is the de facto choice for long running processing on Android, a good example would be to upload or download large files. The upload and download may continue even if the user exits the app and you certainly do not want to block the user from being able to use the app while these tasks are going on.\n\nJobScheduler\n\nEffectively, you have to create a Service and create a job using JobInfo.Builder that specifies your criteria for when to run the service.\n\nRxJava\n\nLibrary for composing asynchronous and event-based programs by using observable sequences.\n\nCoroutines (Kotlin)\n\nThe main gist of it is, it makes asynchronous code looks so much like synchronous\n\nRead more here, here, here, and here.\n    ","url":"/questions/[slug]#solution24","@type":"Answer","upvoteCount":0},{"text":"New Thread and AsyncTask solutions have been explained already.\n\nAsyncTask should ideally be used for short operations. Normal Thread is not preferable for Android. \n\nHave a look at alternate solution using HandlerThread and Handler\n\nHandlerThread\n\n\n  Handy class for starting a new thread that has a looper. The looper can then be used to create handler classes. Note that start() must still be called.\n\n\nHandler:\n\n\n  A Handler allows you to send and process Message and Runnable objects associated with a thread&apos;s MessageQueue. Each Handler instance is associated with a single thread and that thread&apos;s message queue. When you create a new Handler, it is bound to the thread / message queue of the thread that is creating it -- from that point on, it will deliver messages and runnables to that message queue and execute them as they come out of the message queue.\n\n\nSolution:\n\n\nCreate HandlerThread\nCall start() on HandlerThread\nCreate Handler by getting Looper from HanlerThread\nEmbed your Network operation related code in Runnable object\nSubmit Runnable task to Handler\n\n\nSample code snippet, which address  NetworkOnMainThreadException\n\nHandlerThread handlerThread = new HandlerThread(&quot;URLConnection&quot;);\nhandlerThread.start();\nhandler mainHandler = new Handler(handlerThread.getLooper());\n\nRunnable myRunnable = new Runnable() {\n    @Override\n    public void run() {\n        try {\n            Log.d(&quot;Ravi&quot;, &quot;Before IO call&quot;);\n            URL page = new URL(&quot;http://www.google.com&quot;);\n            StringBuffer text = new StringBuffer();\n            HttpURLConnection conn = (HttpURLConnection) page.openConnection();\n            conn.connect();\n            InputStreamReader in = new InputStreamReader((InputStream) conn.getContent());\n            BufferedReader buff = new BufferedReader(in);\n            String line;\n            while ( (line =  buff.readLine()) != null) {\n                text.append(line + &quot;\\n&quot;);\n            }\n            Log.d(&quot;Ravi&quot;, &quot;After IO call&quot;);\n            Log.d(&quot;Ravi&quot;,text.toString());\n\n        }catch( Exception err){\n            err.printStackTrace();\n        }\n    }\n};\nmainHandler.post(myRunnable);\n\n\nPros of using this approach:\n\n\nCreating new Thread/AsyncTask for each network operation is expensive. The Thread/AsyncTask will be destroyed and re-created for next Network operations. But with Handler and HandlerThread approach, you can submit many network operations (as Runnable tasks) to single HandlerThread by using Handler. \n\n    ","url":"/questions/[slug]#solution25","@type":"Answer","upvoteCount":0},{"text":"Although above there is a huge solution pool, no one mentioned com.koushikdutta.ion: https://github.com/koush/ion\n\nIt&apos;s also asynchronous and very simple to use:\n\nIon.with(context)\n.load(&quot;http://example.com/thing.json&quot;)\n.asJsonObject()\n.setCallback(new FutureCallback&lt;JsonObject&gt;() {\n   @Override\n    public void onCompleted(Exception e, JsonObject result) {\n        // do stuff with the result or error\n    }\n});\n\n    ","url":"/questions/[slug]#solution26","@type":"Answer","upvoteCount":0},{"text":"This works. I just made Dr.Luiji&apos;s answer a little simpler.\nnew Thread() {\n    @Override\n    public void run() {\n        try {\n            //Your code goes here\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}.start();\n\n    ","url":"/questions/[slug]#solution27","@type":"Answer","upvoteCount":0},{"text":" Kotlin \nIf you are using Kotlin, you can use a coroutine:\nfun doSomeNetworkStuff() {\n    GlobalScope.launch(Dispatchers.IO) {\n        // ...\n    }\n}\n\n    ","url":"/questions/[slug]#solution28","@type":"Answer","upvoteCount":0},{"text":"The main thread is the UI thread, and you cannot do an operation in the main thread which may block the user interaction. You can solve this in two ways:\n\nForce to do the task in the main thread like this\n\nStrictMode.ThreadPolicy threadPolicy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\nStrictMode.setThreadPolicy(threadPolicy);\n\n\nOr create a simple handler and update the main thread if you want.\n\nRunnable runnable;\nHandler newHandler;\n\nnewHandler = new Handler();\nrunnable = new Runnable() {\n    @Override\n    public void run() {\n         try {\n            //update UI\n        } catch (Exception e) {\n            e.printStackTrace();\n        } \n    }\n};\nnewHandler.post(runnable);\n\n\nAnd to stop the thread use:\n\nnewHandler.removeCallbacks(runnable);\n\n\nFor more information check this out: Painless threading\n    ","url":"/questions/[slug]#solution29","@type":"Answer","upvoteCount":0},{"text":"RxAndroid is another better alternative to this problem and it saves us from hassles of creating threads and then posting results on Android UI thread.\nWe just need to specify threads on which tasks need to be executed and everything is handled internally.\nObservable&lt;List&lt;String&gt;&gt; musicShowsObservable = Observable.fromCallable(new Callable&lt;List&lt;String&gt;&gt;() {\n\n  @Override\n  public List&lt;String&gt; call() {\n    return mRestClient.getFavoriteMusicShows();\n  }\n\n});\n\nmMusicShowSubscription = musicShowsObservable\n  .subscribeOn(Schedulers.io())\n  .observeOn(AndroidSchedulers.mainThread())\n  .subscribe(new Observer&lt;List&lt;String&gt;&gt;() {\n\n    @Override\n    public void onCompleted() { }\n\n    @Override\n    public void onError(Throwable e) { }\n\n    @Override\n    public void onNext(List&lt;String&gt; musicShows) {\n        listMusicShows(musicShows);\n    }\n});\n\n\nBy specifiying (Schedulers.io()), RxAndroid will run getFavoriteMusicShows() on a different thread.\n\nBy using AndroidSchedulers.mainThread() we want to observe this Observable on the UI thread, i.e., we want our onNext() callback to be called on the UI thread.\n\n\n    ","url":"/questions/[slug]#solution30","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-260362324a06d105.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-50e201fdaa1e0fd1.js" defer=""></script><script src="/_next/static/5tS3Jli5j89_wXapXajXn/_buildManifest.js" defer=""></script><script src="/_next/static/5tS3Jli5j89_wXapXajXn/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-can-i-fix-&#x27;android.os.networkonmainthreadexception&#x27;-1657384454963#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-can-i-fix-&#x27;android.os.networkonmainthreadexception&#x27;-1657384454963"><h1>How can I fix &#x27;android.os.NetworkOnMainThreadException&#x27;?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div><div class="question-content mt-5">
                
<p>I got an error while running my Android project for RssReader. </p>

<p>Code:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(urlToRssFeed);
<span class="hljs-type">SAXParserFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> SAXParserFactory.newInstance();
<span class="hljs-type">SAXParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> factory.newSAXParser();
<span class="hljs-type">XMLReader</span> <span class="hljs-variable">xmlreader</span> <span class="hljs-operator">=</span> parser.getXMLReader();
<span class="hljs-type">RssHandler</span> <span class="hljs-variable">theRSSHandler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RssHandler</span>();
xmlreader.setContentHandler(theRSSHandler);
<span class="hljs-type">InputSource</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputSource</span>(url.openStream());
xmlreader.parse(is);
<span class="hljs-keyword">return</span> theRSSHandler.getFeed();
</code></pre>

<p>And it shows the below error:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">android.os.NetworkOnMainThreadException
</code></pre>

<p>How can I fix this issue?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li><li class="pagination-solution-item"><span data-id="#solution21" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">21</span></li><li class="pagination-solution-item"><span data-id="#solution22" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">22</span></li><li class="pagination-solution-item"><span data-id="#solution23" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">23</span></li><li class="pagination-solution-item"><span data-id="#solution24" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">24</span></li><li class="pagination-solution-item"><span data-id="#solution25" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">25</span></li><li class="pagination-solution-item"><span data-id="#solution26" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">26</span></li><li class="pagination-solution-item"><span data-id="#solution27" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">27</span></li><li class="pagination-solution-item"><span data-id="#solution28" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">28</span></li><li class="pagination-solution-item"><span data-id="#solution29" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">29</span></li><li class="pagination-solution-item"><span data-id="#solution30" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">30</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>NOTE : AsyncTask was deprecated in API level 30.<br>
<a href="https://developer.android.com/reference/android/os/AsyncTask" rel="noreferrer">AsyncTask | Android Developers</a></strong></p>
<p>This exception is thrown when an application attempts to perform a networking operation on its main thread. Run your code in <a href="http://developer.android.com/reference/android/os/AsyncTask.html" rel="noreferrer"><code>AsyncTask</code></a>:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RetrieveFeedTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncTask</span>&lt;String, Void, RSSFeed&gt; {

    <span class="hljs-keyword">private</span> Exception exception;

    <span class="hljs-keyword">protected</span> RSSFeed <span class="hljs-title function_">doInBackground</span><span class="hljs-params">(String... urls)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(urls[<span class="hljs-number">0</span>]);
            <span class="hljs-type">SAXParserFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> SAXParserFactory.newInstance();
            <span class="hljs-type">SAXParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> factory.newSAXParser();
            <span class="hljs-type">XMLReader</span> <span class="hljs-variable">xmlreader</span> <span class="hljs-operator">=</span> parser.getXMLReader();
            <span class="hljs-type">RssHandler</span> <span class="hljs-variable">theRSSHandler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RssHandler</span>();
            xmlreader.setContentHandler(theRSSHandler);
            <span class="hljs-type">InputSource</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputSource</span>(url.openStream());
            xmlreader.parse(is);

            <span class="hljs-keyword">return</span> theRSSHandler.getFeed();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-built_in">this</span>.exception = e;

            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">finally</span> {
            is.close();
        }
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPostExecute</span><span class="hljs-params">(RSSFeed feed)</span> {
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> check this.exception</span>
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> do something with the feed</span>
    }
}
</code></pre>
<p>How to execute the task:</p>
<p>In <code>MainActivity.java</code> file you can add this line within your <code>oncreate()</code> method</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">new</span> <span class="hljs-title class_">RetrieveFeedTask</span>().execute(urlToRssFeed);
</code></pre>
<p>Don't forget to add this to <code>AndroidManifest.xml</code> file:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.INTERNET"</span>/&gt;
</code></pre>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>You should almost always run network operations on a thread or as an asynchronous task.</strong></p>
<p>But it <em>is</em> possible to remove this restriction and you override the default behavior, if you are willing to accept the consequences.</p>
<p>Add:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">StrictMode.<span class="hljs-type">ThreadPolicy</span> <span class="hljs-variable">policy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StrictMode</span>.ThreadPolicy.Builder().permitAll().build();

StrictMode.setThreadPolicy(policy);
</code></pre>
<p>In your class,</p>
<p>and</p>
<p><em>Add</em> this permission in the Android <em>manifest.xml</em> file:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.INTERNET"</span>/&gt;
</code></pre>
<p>Consequences:</p>
<p>Your app will (in areas of spotty Internet connection) become unresponsive and lock up, the user perceives slowness and has to do a force kill, and you risk the activity manager killing your app and telling the user that the app has stopped.</p>
<p>Android has some good tips on good programming practices to design for responsiveness:
<a href="http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html" rel="noreferrer">NetworkOnMainThreadException | Android Developers</a></p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I solved this problem using a new <code>Thread</code>.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span>  {
            <span class="hljs-comment">//Your code goes here</span>
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
});

thread.start(); 
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>The accepted answer has some significant downsides. It is not advisable to use AsyncTask for networking unless you <em>really</em> know what you are doing. Some of the down-sides include:</strong></p>
<ul>
<li>AsyncTask's created as non-static inner classes have an implicit reference to the enclosing Activity object, its context, and the entire View hierarchy created by that activity. This reference prevents the Activity from being garbage collected until the AsyncTask's background work completes. If the user's connection is slow, and/or the download is large, these short-term memory leaks can become a problem - for example, if the orientation changes several times (and you don't cancel the executing tasks), or the user navigates away from the Activity.</li>
<li>AsyncTask has different execution characteristics depending on the platform it executes on: prior to API level 4 AsyncTasks execute serially on a single background thread; from API level 4 through API level 10, AsyncTasks execute on a pool of up to 128 threads; from API level 11 onwards AsyncTask executes serially on a single background thread (unless you use the overloaded <code>executeOnExecutor</code> method and supply an alternative executor). Code that works fine when running serially on ICS may break when executed concurrently on Gingerbread, say if you have inadvertent order-of-execution dependencies.</li>
</ul>
<p>If you want to avoid short-term memory leaks, have well-defined execution characteristics across all platforms, and have a base to build really robust network handling, you might want to consider:</p>
<ol>
<li>Using a library that does a nice job of this for you - there's a nice comparison of networking libs in <a href="https://stackoverflow.com/questions/16902716/comparison-of-android-networking-libraries-okhttp-retrofit-volley">this question</a>, or</li>
<li>Using a <code>Service</code> or <code>IntentService</code> instead, perhaps with a <code>PendingIntent</code> to return the result via the Activity's <code>onActivityResult</code> method.</li>
</ol>
<h2 id="intentservice-approach"><em>IntentService approach</em></h2>
<p>Downsides:</p>
<ul>
<li>More code and complexity than <code>AsyncTask</code>, though not as much as you might think</li>
<li>Will queue requests and run them on a <em>single</em> background thread. You can easily control this by replacing <code>IntentService</code> with an equivalent <code>Service</code> implementation, perhaps like <a href="https://github.com/steveliles/AsyncAndroid/blob/master/AsyncAndroid/src/main/java/com/packt/asyncandroid/chapter6/ConcurrentIntentService.java" rel="noreferrer">this one</a>.</li>
<li>Um, I can't think of any others right now actually</li>
</ul>
<p>Upsides:</p>
<ul>
<li>Avoids the short-term memory leak problem</li>
<li>If your activity restarts while network operations are in-flight it can still receive the result of the download via its <code>onActivityResult</code> method</li>
<li>A better platform than AsyncTask to build and reuse robust networking code. Example: if you need to do an important upload, you could do it from <code>AsyncTask</code> in an <code>Activity</code>, but if the user context-switches out of the app to take a phone call, the system <em>may</em> kill the app before the upload completes. It is <em>less likely</em> to kill an application with an active <code>Service</code>.</li>
<li>If you use your own concurrent version of <code>IntentService</code> (like the one I linked above) you can control the level of concurrency via the <code>Executor</code>.</li>
</ul>
<h2 id="implementation-summary"><em>Implementation summary</em></h2>
<p>You can implement an <code>IntentService</code> to perform downloads on a single background thread quite easily.</p>
<p>Step 1: Create an <code>IntentService</code> to perform the download. You can tell it what to download via <code>Intent</code> extras, and pass it a <code>PendingIntent</code> to use to return the result to the <code>Activity</code>:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> android.app.IntentService;
<span class="hljs-keyword">import</span> android.app.PendingIntent;
<span class="hljs-keyword">import</span> android.content.Intent;
<span class="hljs-keyword">import</span> android.util.Log;

<span class="hljs-keyword">import</span> java.io.InputStream;
<span class="hljs-keyword">import</span> java.net.MalformedURLException;
<span class="hljs-keyword">import</span> java.net.URL;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadIntentService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IntentService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> DownloadIntentService.class.getSimpleName();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PENDING_RESULT_EXTRA</span> <span class="hljs-operator">=</span> <span class="hljs-string">"pending_result"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">URL_EXTRA</span> <span class="hljs-operator">=</span> <span class="hljs-string">"url"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">RSS_RESULT_EXTRA</span> <span class="hljs-operator">=</span> <span class="hljs-string">"url"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">RESULT_CODE</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INVALID_URL_CODE</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">ERROR_CODE</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;

    <span class="hljs-keyword">private</span> IllustrativeRSSParser parser;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DownloadIntentService</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>(TAG);

        <span class="hljs-comment">// make one and reuse, in the case where more than one intent is queued</span>
        parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllustrativeRSSParser</span>();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onHandleIntent</span><span class="hljs-params">(Intent intent)</span> {
        <span class="hljs-type">PendingIntent</span> <span class="hljs-variable">reply</span> <span class="hljs-operator">=</span> intent.getParcelableExtra(PENDING_RESULT_EXTRA);
        <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(intent.getStringExtra(URL_EXTRA));
                <span class="hljs-type">IllustrativeRSS</span> <span class="hljs-variable">rss</span> <span class="hljs-operator">=</span> parser.parse(in = url.openStream());

                <span class="hljs-type">Intent</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>();
                result.putExtra(RSS_RESULT_EXTRA, rss);

                reply.send(<span class="hljs-built_in">this</span>, RESULT_CODE, result);
            } <span class="hljs-keyword">catch</span> (MalformedURLException exc) {
                reply.send(INVALID_URL_CODE);
            } <span class="hljs-keyword">catch</span> (Exception exc) {
                <span class="hljs-comment">// could do better by treating the different sax/xml exceptions individually</span>
                reply.send(ERROR_CODE);
            }
        } <span class="hljs-keyword">catch</span> (PendingIntent.CanceledException exc) {
            Log.i(TAG, <span class="hljs-string">"reply cancelled"</span>, exc);
        }
    }
}
</code></pre>
<p>Step 2: Register the service in the manifest:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;service
        android:name=<span class="hljs-string">".DownloadIntentService"</span>
        android:exported=<span class="hljs-string">"false"</span>/&gt;
</code></pre>
<p>Step 3: Invoke the service from the Activity, passing a PendingResult object which the Service will use to return the result:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">PendingIntent</span> <span class="hljs-variable">pendingResult</span> <span class="hljs-operator">=</span> createPendingResult(
    RSS_DOWNLOAD_REQUEST_CODE, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(), <span class="hljs-number">0</span>);
<span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(getApplicationContext(), DownloadIntentService.class);
intent.putExtra(DownloadIntentService.URL_EXTRA, URL);
intent.putExtra(DownloadIntentService.PENDING_RESULT_EXTRA, pendingResult);
startService(intent);
</code></pre>
<p>Step 4: Handle the result in onActivityResult:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onActivityResult</span><span class="hljs-params">(<span class="hljs-type">int</span> requestCode, <span class="hljs-type">int</span> resultCode, Intent data)</span> {
    <span class="hljs-keyword">if</span> (requestCode == RSS_DOWNLOAD_REQUEST_CODE) {
        <span class="hljs-keyword">switch</span> (resultCode) {
            <span class="hljs-keyword">case</span> DownloadIntentService.INVALID_URL_CODE:
                handleInvalidURL();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> DownloadIntentService.ERROR_CODE:
                handleError(data);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> DownloadIntentService.RESULT_CODE:
                handleRSS(data);
                <span class="hljs-keyword">break</span>;
        }
        handleRSS(data);
    }
    <span class="hljs-built_in">super</span>.onActivityResult(requestCode, resultCode, data);
}
</code></pre>
<p>A GitHub project containing a complete working Android Studio/<a href="https://en.wikipedia.org/wiki/Gradle" rel="noreferrer">Gradle</a> project is available <a href="https://github.com/steveliles/Android-Download-Service-Example" rel="noreferrer">here</a>.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You cannot perform network <a href="http://en.wikipedia.org/wiki/Input/output" rel="noreferrer">I/O</a> on the UI thread on <a href="https://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29" rel="noreferrer">Honeycomb</a>. Technically, it <em>is</em> possible on earlier versions of Android, but it is a really bad idea as it will cause your app to stop responding, and can result in the OS killing your app for being badly behaved. You'll need to run a background process or use AsyncTask to perform your network transaction on a background thread.</p>

<p>There is an article about <a href="http://android-developers.blogspot.com/2009/05/painless-threading.html" rel="noreferrer">Painless Threading</a> on the Android developer site which is a good introduction to this, and it will provide you with a much better depth of an answer than can be realistically provided here.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are two solutions of this problem.</p>
<ol>
<li><p>Don't use a network call in the main UI thread. Use an async task for that.</p>
</li>
<li><p>Write the below code into your MainActivity file after <em>setContentView(R.layout.activity_main);</em>:</p>
<p>if (android.os.Build.VERSION.SDK_INT &gt; 9) {
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy);
}</p>
</li>
</ol>
<p>And the below import statement into your Java file.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> android.os.StrictMode;
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Do the network actions on another thread.</p>
<p>For example:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>(){
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// Do network action in this function</span>
    }
}).start();
</code></pre>
<p>And add this to file <em>AndroidManifest.xml</em>:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.INTERNET"</span>/&gt;
</code></pre>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<ol>
<li>Do not use strictMode (only in debug mode)</li>
<li>Do not change SDK version</li>
<li>Do not use a separate thread</li>
</ol>

<p>Use Service or AsyncTask</p>

<p>See also Stack&nbsp;Overflow question:</p>

<p><em><a href="https://stackoverflow.com/questions/18297485/i-get-an-android-os-networkonmainthreadexception-sending-an-email-from-android/18297516#18297516">android.os.NetworkOnMainThreadException sending an email from Android</a></em></p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 9</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You disable the strict mode using following code:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">if</span> (android.os.Build.VERSION.SDK_INT &gt; <span class="hljs-number">9</span>) {
    StrictMode.<span class="hljs-type">ThreadPolicy</span> <span class="hljs-variable">policy</span> <span class="hljs-operator">=</span> 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">StrictMode</span>.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
}
</code></pre>

<p><strong>This is not recommended</strong>: use the <code>AsyncTask</code> interface.</p>

<p><a href="https://askanydifference.com/how-to-fix-android-os-networkonmainthreadexception/" rel="noreferrer">Full code for both the methods</a></p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 10</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Network-based operations cannot be run on the main thread. You need to run all network-based tasks on a child thread or implement AsyncTask.</p>

<p>This is how you run a task in a child thread:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>(){
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Your implementation goes here</span>
        } 
        <span class="hljs-keyword">catch</span> (Exception ex) {
            ex.printStackTrace();
        }
    }
}).start();
</code></pre>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 11</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Put your code inside:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>(){
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Your implementation</span>
        }
        <span class="hljs-keyword">catch</span> (Exception ex) {
            ex.printStackTrace();
        }
    }
}).start();
</code></pre>

<p>Or:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncTask</span>&lt;Void, Void, Void&gt; {

    <span class="hljs-keyword">protected</span> Void <span class="hljs-title function_">doInBackground</span><span class="hljs-params">(Void... arg0)</span> {
        <span class="hljs-comment">//Your implementation</span>
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPostExecute</span><span class="hljs-params">(Void result)</span> {
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> do something with the feed</span>
    }
}
</code></pre>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 12</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This happens in Android 3.0 and above. From Android 3.0 and above, they have restricted using network operations (functions that access the Internet) from running in the main thread/UI thread (what spawns from your on create and on resume methods in the activity).</p>

<p>This is to encourage using separate threads for network operations. See <a href="http://developer.android.com/reference/android/os/AsyncTask.html">AsyncTask</a> for more details on how to perform network activities the right way.</p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 13</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using <a href="http://androidannotations.org/" rel="noreferrer">Android Annotations</a> is an option. It will allow you to simply run any method in a background thread:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// normal method</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">normal</span><span class="hljs-params">()</span> {
    doSomething(); <span class="hljs-comment">// do something in background</span>
}

<span class="hljs-meta">@Background</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSomething</span><span class="hljs-params">()</span> 
    <span class="hljs-comment">// run your networking code here</span>
}
</code></pre>

<p>Note, that although it provides benefits of simplicity and readability, it has its disadvantages. </p>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 14</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The error is due to executing long running operations in main thread,You can easily rectify the problem by using <a href="https://developer.android.com/reference/android/os/AsyncTask.html" rel="noreferrer">AsynTask</a> or <a href="https://developer.android.com/reference/java/lang/Thread.html" rel="noreferrer">Thread</a>. You can checkout this library <a href="http://loopj.com/android-async-http/" rel="noreferrer">AsyncHTTPClient</a> for better handling. </p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">AsyncHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncHttpClient</span>();
client.get(<span class="hljs-string">"http://www.google.com"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncHttpResponseHandler</span>() {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStart</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// Called before a request is started</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(<span class="hljs-type">int</span> statusCode, Header[] headers, <span class="hljs-type">byte</span>[] response)</span> {
        <span class="hljs-comment">// Called when response HTTP status is "200 OK"</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFailure</span><span class="hljs-params">(<span class="hljs-type">int</span> statusCode, Header[] headers, <span class="hljs-type">byte</span>[] errorResponse, Throwable e)</span> {
        <span class="hljs-comment">// Called when response HTTP status is "4XX" (for example, 401, 403, 404)</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onRetry</span><span class="hljs-params">(<span class="hljs-type">int</span> retryNo)</span> {
        <span class="hljs-comment">// Called when request is retried</span>
    }
});
</code></pre>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 15</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You should not do any time-consuming task on the main thread (UI thread), like any network operation, file I/O, or SQLite database operations. So for this kind of operation, you should create a worker thread, but the problem is that you can not directly perform any UI related operation from your worker thread. For that, you have to use <code>Handler</code> and pass the <code>Message</code>. </p>

<p>To simplify all these things, Android provides various ways, like <code>AsyncTask</code>, <code>AsyncTaskLoader</code>, <code>CursorLoader</code> or <code>IntentService</code>. So you can use any of these according to your requirements.</p>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 16</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The top <a href="https://stackoverflow.com/questions/6343166/how-to-fix-android-os-networkonmainthreadexception/6343299#6343299">answer of spektom</a> works perfect.</p>

<p>If you are writing the <code>AsyncTask</code> inline and not extending as a class, and on top of this, if there is a need to get a response out of the <code>AsyncTask</code>, one can use the <code>get()</code> method as below.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">RSSFeed</span> <span class="hljs-variable">feed</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RetreiveFeedTask</span>().execute(urlToRssFeed).get();
</code></pre>

<p>(From his example.)</p>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 17</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is only thrown for applications targeting the <a href="http://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29" rel="noreferrer">Honeycomb</a> SDK or higher. Applications targeting earlier SDK versions are allowed to do networking on their main event loop threads.</p>

<p><a href="http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html" rel="noreferrer">The error is the SDK warning!</a></p>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 18</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For me it was this:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-sdk
        android:minSdkVersion=<span class="hljs-string">"8"</span>
        android:targetSdkVersion=<span class="hljs-string">"10"</span> /&gt;
</code></pre>

<p>The device I was testing my app on was 4.1.2 which is SDK Version 16!</p>

<p>Make the sure the target version is the same as your Android Target Library. If you are unsure what your target library is, right click your Project -&gt; <em>Build Path</em> -&gt; <em>Android</em>, and it should be the one that is ticked.</p>

<p>Also, as others have mentioned, include the correct permissions to access the Internet:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.INTERNET"</span>/&gt;
</code></pre>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 19</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Use this in Your Activity</strong></p>

<pre class="lang-java s-code-block"><code class="hljs language-java">    btnsub.setOnClickListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">View</span>.OnClickListener() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">(View v)</span> {
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {

                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                    <span class="hljs-comment">// TODO Auto-generated method stub</span>

                    <span class="hljs-comment">//Initialize soap request + add parameters</span>
                    <span class="hljs-type">SoapObject</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SoapObject</span>(NAMESPACE, METHOD_NAME1);

                    <span class="hljs-comment">//Use this to add parameters</span>
                    request.addProperty(<span class="hljs-string">"pincode"</span>, txtpincode.getText().toString());
                    request.addProperty(<span class="hljs-string">"bg"</span>, bloodgroup.getSelectedItem().toString());

                    <span class="hljs-comment">//Declare the version of the SOAP request</span>
                    <span class="hljs-type">SoapSerializationEnvelope</span> <span class="hljs-variable">envelope</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SoapSerializationEnvelope</span>(SoapEnvelope.VER11);

                    envelope.setOutputSoapObject(request);
                    envelope.dotNet = <span class="hljs-literal">true</span>;

                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-type">HttpTransportSE</span> <span class="hljs-variable">androidHttpTransport</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpTransportSE</span>(URL);

                        <span class="hljs-comment">//this is the actual part that will call the webservice</span>
                        androidHttpTransport.call(SOAP_ACTION1, envelope);

                        <span class="hljs-comment">// Get the SoapResult from the envelope body.</span>
                        <span class="hljs-type">SoapObject</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> (SoapObject) envelope.getResponse();
                        Log.e(<span class="hljs-string">"result data"</span>, <span class="hljs-string">"data"</span> + result);
                        <span class="hljs-type">SoapObject</span> <span class="hljs-variable">root</span> <span class="hljs-operator">=</span> (SoapObject) result.getProperty(<span class="hljs-number">0</span>);
                        <span class="hljs-comment">// SoapObject s_deals = (SoapObject) root.getProperty(0);</span>
                        <span class="hljs-comment">// SoapObject s_deals_1 = (SoapObject) s_deals.getProperty(0);</span>
                        <span class="hljs-comment">//</span>

                        System.out.println(<span class="hljs-string">"********Count : "</span> + root.getPropertyCount());

                        value = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Detailinfo&gt;();

                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; root.getPropertyCount(); i++) {
                            <span class="hljs-type">SoapObject</span> <span class="hljs-variable">s_deals</span> <span class="hljs-operator">=</span> (SoapObject) root.getProperty(i);
                            <span class="hljs-type">Detailinfo</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Detailinfo</span>();

                            info.setFirstName(s_deals.getProperty(<span class="hljs-string">"Firstname"</span>).toString());
                            info.setLastName(s_deals.getProperty(<span class="hljs-string">"Lastname"</span>).toString());
                            info.setDOB(s_deals.getProperty(<span class="hljs-string">"DOB"</span>).toString());
                            info.setGender(s_deals.getProperty(<span class="hljs-string">"Gender"</span>).toString());
                            info.setAddress(s_deals.getProperty(<span class="hljs-string">"Address"</span>).toString());
                            info.setCity(s_deals.getProperty(<span class="hljs-string">"City"</span>).toString());
                            info.setState(s_deals.getProperty(<span class="hljs-string">"State"</span>).toString());
                            info.setPinecode(s_deals.getProperty(<span class="hljs-string">"Pinecode"</span>).toString());
                            info.setMobile(s_deals.getProperty(<span class="hljs-string">"Mobile"</span>).toString());
                            info.setEmail(s_deals.getProperty(<span class="hljs-string">"Email"</span>).toString());
                            info.setBloodgroup(s_deals.getProperty(<span class="hljs-string">"Bloodgroup"</span>).toString());
                            info.setAdddate(s_deals.getProperty(<span class="hljs-string">"Adddate"</span>).toString());
                            info.setWaight(s_deals.getProperty(<span class="hljs-string">"waight"</span>).toString());
                            value.add(info);
                        }

                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        e.printStackTrace();
                    }
                    <span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(getApplicationContext(), ComposeMail.class);
                    <span class="hljs-comment">//intent.putParcelableArrayListExtra("valuesList", value);</span>

                    startActivity(intent);
                }
            }).start();
        }
    });
</code></pre>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 20</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Just to spell out something explicitly:</p>

<p>The main thread is basically the UI thread.</p>

<p>So saying that you cannot do networking operations in the main thread means you cannot do networking operations in the UI thread, which means <em>you cannot do networking operations in a <code>*runOnUiThread(new Runnable() { ... }*</code> block</em> inside some other thread, either.</p>

<p>(I just had a long head-scratching moment trying to figure out why I was getting that error somewhere other than my main thread.  This was why; this thread helped; and hopefully this comment will help someone else.)</p>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 21</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This exception occurs due to any heavy task performed on the main thread if that performing task takes <em>too much time</em>.</p>

<p>To avoid this, we can handle it using <strong>threads</strong> or <strong>executers</strong></p>

<pre class="lang-java s-code-block"><code class="hljs language-java">Executors.newSingleThreadExecutor().submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// You can perform your task here.</span>
    }
});
</code></pre>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 22</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are many great answers already on this question, but a lot of great libraries have come out since those answers were posted. This is intended as a kind of newbie-guide.</p>
<p>I will cover several use cases for performing network operations and <em>a</em> solution or two for each.</p>
<h1 id="rest-over-http-nzt9"><a href="https://en.wikipedia.org/wiki/Representational_state_transfer" rel="nofollow noreferrer">REST</a> over HTTP</h1>
<p><em>Typically JSON, but it can be XML or something else.</em></p>
<h2 id="full-api-access-wvsz">Full API Access</h2>
<p>Let's say you are writing an app that lets users track stock prices, interest rates and currency exchange rates. You find an JSON API that looks something like this:</p>
<pre class="lang-none s-code-block"><code>http://api.example.com/stocks                       // ResponseWrapper&lt;String&gt; object containing a
                                                    // list of strings with ticker symbols
http://api.example.com/stocks/$symbol               // Stock object
http://api.example.com/stocks/$symbol/prices        // PriceHistory&lt;Stock&gt; object
http://api.example.com/currencies                   // ResponseWrapper&lt;String&gt; object containing a
                                                    // list of currency abbreviation
http://api.example.com/currencies/$currency         // Currency object
http://api.example.com/currencies/$id1/values/$id2  // PriceHistory&lt;Currency&gt; object comparing the prices
                                                    // of the first currency (id1) to the second (id2)
</code></pre>
<h3 id="retrofit-from-square-j5a1">Retrofit from Square</h3>
<p>This is an excellent choice for an API with multiple endpoints and allows you to declare the REST endpoints instead of having to code them individually as with other libraries like <a href="https://amzn.github.io/ion-docs/" rel="nofollow noreferrer">Amazon Ion Java</a> or <a href="https://developer.android.com/training/volley/" rel="nofollow noreferrer">Volley</a> (website: <em><a href="http://square.github.io/retrofit/" rel="nofollow noreferrer">Retrofit</a></em>).</p>
<p>How do you use it with the finances API?</p>
<h3 id="file-build.gradle-uu1e">File <em>build.gradle</em></h3>
<p>Add these lines to your <em>module</em> level <em>build.gradle</em> file:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">implementation <span class="hljs-string">'com.squareup.retrofit2:retrofit:2.3.0'</span> <span class="hljs-comment">// Retrofit library, current as of September 21, 2017</span>
implementation <span class="hljs-string">'com.squareup.retrofit2:converter-gson:2.3.0'</span> <span class="hljs-comment">// Gson serialization and deserialization support for retrofit, version must match retrofit version</span>
</code></pre>
<h3 id="file-financesapi.java-lwca">File <em>FinancesApi.java</em></h3>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">FinancesApi</span> {
    <span class="hljs-meta">@GET("stocks")</span>
    Call&lt;ResponseWrapper&lt;String&gt;&gt; <span class="hljs-title function_">listStocks</span><span class="hljs-params">()</span>;
    <span class="hljs-meta">@GET("stocks/{symbol}")</span>
    Call&lt;Stock&gt; <span class="hljs-title function_">getStock</span><span class="hljs-params">(<span class="hljs-meta">@Path("symbol")</span>String tickerSymbol)</span>;
    <span class="hljs-meta">@GET("stocks/{symbol}/prices")</span>
    Call&lt;PriceHistory&lt;Stock&gt;&gt; <span class="hljs-title function_">getPriceHistory</span><span class="hljs-params">(<span class="hljs-meta">@Path("symbol")</span>String tickerSymbol)</span>;

    <span class="hljs-meta">@GET("currencies")</span>
    Call&lt;ResponseWrapper&lt;String&gt;&gt; <span class="hljs-title function_">listCurrencies</span><span class="hljs-params">()</span>;
    <span class="hljs-meta">@GET("currencies/{symbol}")</span>
    Call&lt;Currency&gt; <span class="hljs-title function_">getCurrency</span><span class="hljs-params">(<span class="hljs-meta">@Path("symbol")</span>String currencySymbol)</span>;
    <span class="hljs-meta">@GET("currencies/{symbol}/values/{compare_symbol}")</span>
    Call&lt;PriceHistory&lt;Currency&gt;&gt; <span class="hljs-title function_">getComparativeHistory</span><span class="hljs-params">(<span class="hljs-meta">@Path("symbol")</span>String currency, <span class="hljs-meta">@Path("compare_symbol")</span>String currencyToPriceAgainst)</span>;
}
</code></pre>
<h3 id="class-financesapibuilder-7lsi">Class <em>FinancesApiBuilder</em></h3>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FinancesApiBuilder</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> FinancesApi <span class="hljs-title function_">build</span><span class="hljs-params">(String baseUrl)</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Retrofit</span>.Builder()
                    .baseUrl(baseUrl)
                    .addConverterFactory(GsonConverterFactory.create())
                    .build()
                    .create(FinancesApi.class);
    }
}
</code></pre>
<h3 id="class-financesfragment-snippet-4nuc">Class <em>FinancesFragment</em> snippet</h3>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">FinancesApi</span> <span class="hljs-variable">api</span> <span class="hljs-operator">=</span> FinancesApiBuilder.build(<span class="hljs-string">"http://api.example.com/"</span>); <span class="hljs-comment">//trailing '/' required for predictable behavior</span>
api.getStock(<span class="hljs-string">"INTC"</span>).enqueue(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;Stock&gt;(){
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onResponse</span><span class="hljs-params">(Call&lt;Stock&gt; stockCall, Response&lt;Stock&gt; stockResponse)</span>{
        <span class="hljs-type">Stock</span> <span class="hljs-variable">stock</span> <span class="hljs-operator">=</span> stockCall.body();
        <span class="hljs-comment">// Do something with the stock</span>
    }
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onResponse</span><span class="hljs-params">(Call&lt;Stock&gt; stockCall, Throwable t)</span>{
        <span class="hljs-comment">// Something bad happened</span>
    }
}
</code></pre>
<p>If your API requires an API key or other header, like a user token, etc. to be sent, Retrofit makes this easy (see <a href="https://stackoverflow.com/questions/42898920/add-header-parameter-in-retrofit/42899766#42899766">this awesome answer</a> to <em><a href="https://stackoverflow.com/questions/42898920/">Add Header Parameter in Retrofit</a></em> for details).</p>
<h2 id="one-off-rest-api-access-z59h">One-off REST API access</h2>
<p>Let's say you're building a "mood weather" app that looks up the user's GPS location and checks the current temperature in that area and tells them the mood. This type of app doesn't need to declare API endpoints; it just needs to be able to access one API endpoint.</p>
<h3 id="ion-oacp">Ion</h3>
<p>This is a great library for this type of access.</p>
<p>Please read <a href="https://stackoverflow.com/questions/6343166/how-can-i-fix-android-os-networkonmainthreadexception/28559884#28559884">msysmilu's great answer</a> to <em><a href="https://stackoverflow.com/questions/6343166">How can I fix 'android.os.NetworkOnMainThreadException'?</a></em>.</p>
<h1 id="load-images-via-http-8qty">Load images via HTTP</h1>
<h2 id="volley-ct3h">Volley</h2>
<p><em>Volley can also be used for REST APIs, but due to the more complicated setup required, I prefer to use <a href="http://square.github.io/retrofit/" rel="nofollow noreferrer">Retrofit</a> from Square as above.</em></p>
<p>Let's say you are building a social networking app and want to load profile pictures of friends.</p>
<h3 id="file-build.gradle-1-xq8r">File <em>build.gradle</em></h3>
<p>Add this line to your <em>module</em> level <em>build.gradle</em> file:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">implementation <span class="hljs-string">'com.android.volley:volley:1.0.0'</span>
</code></pre>
<h3 id="file-imagefetch.java-g0ls">File <em>ImageFetch.java</em></h3>
<p>Volley requires more setup than Retrofit. You will need to create a class like this to setup a RequestQueue, an ImageLoader and an ImageCache, but it's not too bad:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageFetch</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">ImageLoader</span> <span class="hljs-variable">imageLoader</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">RequestQueue</span> <span class="hljs-variable">imageQueue</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ImageLoader <span class="hljs-title function_">getImageLoader</span><span class="hljs-params">(Context ctx)</span>{
        <span class="hljs-keyword">if</span>(imageLoader == <span class="hljs-literal">null</span>){
            <span class="hljs-keyword">if</span>(imageQueue == <span class="hljs-literal">null</span>){
                imageQueue = Volley.newRequestQueue(ctx.getApplicationContext());
            }
            imageLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageLoader</span>(imageQueue, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageLoader</span>.ImageCache() {
                Map&lt;String, Bitmap&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Bitmap&gt;();
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> Bitmap <span class="hljs-title function_">getBitmap</span><span class="hljs-params">(String url)</span> {
                    <span class="hljs-keyword">return</span> cache.get(url);
                }
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">putBitmap</span><span class="hljs-params">(String url, Bitmap bitmap)</span> {
                    cache.put(url, bitmap);
                }
            });
        }
        <span class="hljs-keyword">return</span> imageLoader;
    }
}
</code></pre>
<h3 id="file-user_view_dialog.xml-vi6y">File <em>user_view_dialog.xml</em></h3>
<p>Add the following to your layout XML file to add an image:</p>
<pre class="lang-xml s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">com.android.volley.toolbox.NetworkImageView</span>
    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/profile_picture"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"32dp"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"32dp"</span>
    <span class="hljs-attr">android:layout_alignParentTop</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">android:layout_centerHorizontal</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">app:srcCompat</span>=<span class="hljs-string">"@android:drawable/spinner_background"</span>/&gt;</span>
</code></pre>
<h3 id="file-userviewdialog.java-qsy0">File <em>UserViewDialog.java</em></h3>
<p>Add the following code to the onCreate method (Fragment, Activity) or the constructor (Dialog):</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">NetworkImageView</span> <span class="hljs-variable">profilePicture</span> <span class="hljs-operator">=</span> view.findViewById(R.id.profile_picture);
profilePicture.setImageUrl(<span class="hljs-string">"http://example.com/users/images/profile.jpg"</span>, ImageFetch.getImageLoader(getContext());
</code></pre>
<h2 id="picasso-iipo">Picasso</h2>
<p><a href="http://square.github.io/picasso/" rel="nofollow noreferrer">Picasso</a> is another excellent library from Square. Please see the website for some great examples.</p>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 23</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In simple words,</p>
<p><em><strong>Do not do network work in the UI thread</strong></em></p>
<p>For example, if you do an HTTP request, that is a network action.</p>
<p><strong>Solution:</strong></p>
<ol>
<li>You have to create a new Thread</li>
<li><strong>Or</strong> use the <a href="https://www.google.com.np/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CB0QFjAAahUKEwjgivqS0-3GAhUGOJQKHV_YD84&amp;url=http%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fos%2FAsyncTask.html&amp;ei=RfquVaDUPIbw0ATfsL_wDA&amp;usg=AFQjCNE8gLVXz1Hwq4rI8oxRkZNHjhRzpQ&amp;sig2=qTI0AgoyYUXyDwHFQup9sw" rel="nofollow noreferrer">AsyncTask class</a></li>
</ol>
<p><strong>Way:</strong></p>
<p>Put all your works inside</p>
<ol>
<li>The <code>run()</code> method of the new thread</li>
<li><strong>Or</strong> the <code>doInBackground()</code> method of the AsyncTask class.</li>
</ol>
<p><strong>But:</strong></p>
<p>When you get something from a network response and want to show it on your view (like display response message in TextView), you need to <strong>return back to the UI</strong> thread.</p>
<p>If you don't do it, you will get <code>ViewRootImpl$CalledFromWrongThreadException</code>.</p>
<p><strong>How-to</strong></p>
<ol>
<li>While using AsyncTask, update the view from the <code>onPostExecute()</code> method</li>
<li><strong>Or</strong> call the <a href="https://stackoverflow.com/questions/11140285/how-to-use-runonuithread"><code>runOnUiThread()</code></a> method and update the view inside the <code>run()</code> method.</li>
</ol>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 24</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You are able to move a part of your code into another thread to offload the <code>main thread</code> and avoid getting <a href="https://developer.android.com/topic/performance/vitals/anr.html" rel="nofollow noreferrer">ANR</a>, <a href="https://developer.android.com/reference/android/os/NetworkOnMainThreadException.html" rel="nofollow noreferrer">NetworkOnMainThreadException</a>, <a href="https://developer.android.com/reference/java/lang/IllegalStateException.html" rel="nofollow noreferrer">IllegalStateException</a> (e.g., cannot access database on the main thread since it may potentially lock the UI for a long period of time).</p>
<p>There are some approaches that you should choose depends on the situation</p>
<p>Java <a href="https://developer.android.com/reference/java/lang/Thread.html" rel="nofollow noreferrer">Thread</a> or Android <a href="https://developer.android.com/reference/android/os/HandlerThread.html" rel="nofollow noreferrer">HandlerThread</a>:</p>
<blockquote>
<p>Java threads are one-time use only and die after executing its run method.</p>
<p>HandlerThread is a handy class for starting a new thread that has a looper.</p>
</blockquote>
<p><a href="https://developer.android.com/reference/android/os/AsyncTask.html" rel="nofollow noreferrer">AsyncTask</a> (<strong>deprecated</strong> in API level 30)</p>
<blockquote>
<p><strong>AsyncTask</strong> is designed to be a helper class around <strong>Thread</strong> and <strong>Handler</strong> and does not constitute a generic threading framework. AsyncTasks should ideally be used for short operations (a few seconds at the most.) If you need to keep threads running for long periods of time, it is highly recommended you use the various APIs provided by the java.util.concurrent package such as <strong>Executor</strong>, <strong>ThreadPoolExecutor</strong> and <strong>FutureTask</strong>.</p>
</blockquote>
<p>Since the <em>main</em> thread monopolizes UI components, it is not possible to access to some View, and that is why Handler comes to the rescue</p>
<p><a href="https://stackoverflow.com/a/66567556/4770877">[Executor framework]</a></p>
<blockquote>
<p>ThreadPoolExecutor class that implements ExecutorService which gives fine control on the thread pool (E.g., core pool size, max pool size, keep alive time, etc.)</p>
<p>ScheduledThreadPoolExecutor - a class that extends ThreadPoolExecutor. It can schedule tasks after a given delay or periodically.</p>
</blockquote>
<p><a href="https://developer.android.com/reference/java/util/concurrent/FutureTask.html" rel="nofollow noreferrer">FutureTask</a></p>
<blockquote>
<p>FutureTask performs asynchronous processing, however, if the result is not ready yet or processing has not complete, calling get() will be block the thread</p>
</blockquote>
<p><a href="https://developer.android.com/reference/android/content/AsyncTaskLoader.html" rel="nofollow noreferrer">AsyncTaskLoaders</a></p>
<blockquote>
<p>AsyncTaskLoaders as they solve a lot of problems that are inherent to AsyncTask</p>
</blockquote>
<p><a href="https://developer.android.com/reference/android/app/IntentService.html" rel="nofollow noreferrer">IntentService</a></p>
<blockquote>
<p>This is the de facto choice for long running processing on Android, a good example would be to upload or download large files. The upload and download may continue even if the user exits the app and you certainly do not want to block the user from being able to use the app while these tasks are going on.</p>
</blockquote>
<p><a href="https://developer.android.com/reference/android/app/job/JobScheduler.html" rel="nofollow noreferrer">JobScheduler</a></p>
<blockquote>
<p>Effectively, you have to create a Service and create a job using JobInfo.Builder that specifies your criteria for when to run the service.</p>
</blockquote>
<p><a href="https://github.com/ReactiveX/RxJava" rel="nofollow noreferrer">RxJava</a></p>
<blockquote>
<p>Library for composing asynchronous and event-based programs by using observable sequences.</p>
</blockquote>
<p><a href="https://kotlinlang.org/docs/reference/coroutines.html" rel="nofollow noreferrer">Coroutines</a> (Kotlin)</p>
<blockquote>
<p>The main gist of it is, it makes asynchronous code looks so much like synchronous</p>
</blockquote>
<p>Read more <a href="https://android.jlelse.eu/8-ways-to-do-asynchronous-processing-in-android-and-counting-f634dc6fae4e" rel="nofollow noreferrer">here</a>, <a href="https://medium.com/@elye.project/the-evolution-of-android-network-access-1e199fc6e9a2" rel="nofollow noreferrer">here</a>, <a href="https://medium.com/@frank.tan/using-a-thread-pool-in-android-e3c88f59d07f" rel="nofollow noreferrer">here</a>, and <a href="https://guides.codepath.com/android/Managing-Threads-and-Custom-Services#handlerthread-caveats" rel="nofollow noreferrer">here</a>.</p>
    </div></div></div></div><div id="solution25" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 25</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>New <code>Thread</code> and <a href="https://developer.android.com/reference/android/os/AsyncTask.html" rel="noreferrer">AsyncTask</a> solutions have been explained already.</p>

<p><code>AsyncTask</code> should ideally be used for short operations. Normal <code>Thread</code> is not preferable for Android. </p>

<p>Have a look at alternate solution using <a href="https://developer.android.com/reference/android/os/HandlerThread.html" rel="noreferrer">HandlerThread</a> and <a href="https://developer.android.com/reference/android/os/Handler.html" rel="noreferrer">Handler</a></p>

<p><strong>HandlerThread</strong></p>

<blockquote>
  <p>Handy class for starting a new thread that has a looper. The looper can then be used to create handler classes. Note that <code>start()</code> must still be called.</p>
</blockquote>

<p><strong>Handler:</strong></p>

<blockquote>
  <p>A Handler allows you to send and process Message and Runnable objects associated with a thread's MessageQueue. Each Handler instance is associated with a single thread and that thread's message queue. When you create a new Handler, it is bound to the thread / message queue of the thread that is creating it -- from that point on, it will deliver messages and runnables to that message queue and execute them as they come out of the message queue.</p>
</blockquote>

<p>Solution:</p>

<ol>
<li><p>Create <code>HandlerThread</code></p></li>
<li><p>Call <code>start()</code> on <code>HandlerThread</code></p></li>
<li><p>Create <code>Handler</code> by getting <code>Looper</code> from <code>HanlerThread</code></p></li>
<li><p>Embed your Network operation related code in <code>Runnable</code> object</p></li>
<li><p>Submit <code>Runnable</code> task to <code>Handler</code></p></li>
</ol>

<p>Sample code snippet, which address  <code>NetworkOnMainThreadException</code></p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">HandlerThread</span> <span class="hljs-variable">handlerThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HandlerThread</span>(<span class="hljs-string">"URLConnection"</span>);
handlerThread.start();
<span class="hljs-type">handler</span> <span class="hljs-variable">mainHandler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>(handlerThread.getLooper());

<span class="hljs-type">Runnable</span> <span class="hljs-variable">myRunnable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            Log.d(<span class="hljs-string">"Ravi"</span>, <span class="hljs-string">"Before IO call"</span>);
            <span class="hljs-type">URL</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(<span class="hljs-string">"http://www.google.com"</span>);
            <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();
            <span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> (HttpURLConnection) page.openConnection();
            conn.connect();
            <span class="hljs-type">InputStreamReader</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>((InputStream) conn.getContent());
            <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">buff</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(in);
            String line;
            <span class="hljs-keyword">while</span> ( (line =  buff.readLine()) != <span class="hljs-literal">null</span>) {
                text.append(line + <span class="hljs-string">"\n"</span>);
            }
            Log.d(<span class="hljs-string">"Ravi"</span>, <span class="hljs-string">"After IO call"</span>);
            Log.d(<span class="hljs-string">"Ravi"</span>,text.toString());

        }<span class="hljs-keyword">catch</span>( Exception err){
            err.printStackTrace();
        }
    }
};
mainHandler.post(myRunnable);
</code></pre>

<p>Pros of using this approach:</p>

<ol>
<li>Creating new <code>Thread/AsyncTask</code> for each network operation is expensive. The <code>Thread/AsyncTask</code> will be destroyed and re-created for next Network operations. But with <code>Handler</code> and <code>HandlerThread</code> approach, you can submit many network operations (as Runnable tasks) to single <code>HandlerThread</code> by using <code>Handler</code>. </li>
</ol>
    </div></div></div></div><div id="solution26" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 26</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Although above there is a huge solution pool, no one mentioned <code>com.koushikdutta.ion</code>: <a href="https://github.com/koush/ion" rel="noreferrer">https://github.com/koush/ion</a></p>

<p>It's also <strong>asynchronous</strong> and <strong>very simple</strong> to use:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">Ion.with(context)
.load(<span class="hljs-string">"http://example.com/thing.json"</span>)
.asJsonObject()
.setCallback(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureCallback</span>&lt;JsonObject&gt;() {
   <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCompleted</span><span class="hljs-params">(Exception e, JsonObject result)</span> {
        <span class="hljs-comment">// do stuff with the result or error</span>
    }
});
</code></pre>
    </div></div></div></div><div id="solution27" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 27</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This works. I just made <a href="https://stackoverflow.com/questions/6343166/how-can-i-fix-android-os-networkonmainthreadexception/14443056#14443056">Dr.Luiji's answer</a> a little simpler.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">//Your code goes here</span>
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
}.start();
</code></pre>
    </div></div></div></div><div id="solution28" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 28</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2> Kotlin </h2>
<p>If you are using Kotlin, you can use a <em><a href="https://en.wikipedia.org/wiki/Coroutine" rel="nofollow noreferrer">coroutine</a></em>:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">fun <span class="hljs-title function_">doSomeNetworkStuff</span><span class="hljs-params">()</span> {
    GlobalScope.launch(Dispatchers.IO) {
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
    </div></div></div></div><div id="solution29" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 29</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The main thread is the UI thread, and you cannot do an operation in the main thread which may block the user interaction. You can solve this in two ways:</p>

<p>Force to do the task in the main thread like this</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">StrictMode.<span class="hljs-type">ThreadPolicy</span> <span class="hljs-variable">threadPolicy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StrictMode</span>.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(threadPolicy);
</code></pre>

<p>Or create a simple handler and update the main thread if you want.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">Runnable runnable;
Handler newHandler;

newHandler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>();
runnable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
         <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">//update UI</span>
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } 
    }
};
newHandler.post(runnable);
</code></pre>

<p>And to stop the thread use:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">newHandler.removeCallbacks(runnable);
</code></pre>

<p>For more information check this out: <em><a href="https://android-developers.googleblog.com/2009/05/painless-threading.html" rel="noreferrer">Painless threading</a></em></p>
    </div></div></div></div><div id="solution30" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 30</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/android-networking">android-networking</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/networkonmainthread">networkonmainthread</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><code>RxAndroid</code> is another better alternative to this problem and it saves us from hassles of creating threads and then posting results on Android UI thread.</p>
<p>We just need to specify threads on which tasks need to be executed and everything is handled internally.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">Observable&lt;List&lt;String&gt;&gt; musicShowsObservable = Observable.fromCallable(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callable</span>&lt;List&lt;String&gt;&gt;() {

  <span class="hljs-meta">@Override</span>
  <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">call</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> mRestClient.getFavoriteMusicShows();
  }

});

mMusicShowSubscription = musicShowsObservable
  .subscribeOn(Schedulers.io())
  .observeOn(AndroidSchedulers.mainThread())
  .subscribe(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>&lt;List&lt;String&gt;&gt;() {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCompleted</span><span class="hljs-params">()</span> { }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable e)</span> { }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(List&lt;String&gt; musicShows)</span> {
        listMusicShows(musicShows);
    }
});
</code></pre>
<ol>
<li><p>By specifiying <code>(Schedulers.io())</code>, RxAndroid will run <code>getFavoriteMusicShows()</code> on a different thread.</p>
</li>
<li><p>By using <code>AndroidSchedulers.mainThread()</code> we want to observe this Observable on the UI thread, i.e., we want our <code>onNext()</code> callback to be called on the UI thread.</p>
</li>
</ol>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/accessing-nested-javascript-objects-and-arrays-by-string-path-1657387321754">Accessing nested JavaScript objects and arrays by string path</a><a href="/questions/retrieve-only-the-queried-element-in-an-object-array-in-mongodb-collection-1657384890457">Retrieve only the queried element in an object array in MongoDB collection</a><a href="/questions/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457">How do I compose a rotation matrix with human readable angles from scratch?</a><a href="/questions/how-do-i-count-the-occurrences-of-a-list-item-1657387916234">How do I count the occurrences of a list item?</a><a href="/questions/how-do-i-split-a-delimited-string-so-i-can-access-individual-items-1657388042385">How do I split a delimited string so I can access individual items?</a><a href="/questions/how-to-randomize-(shuffle)-a-javascript-array-1657384790171">How to randomize (shuffle) a JavaScript array?</a><a href="/questions/which-characters-are-valid-in-css-class-namesselectors-1657387959188">Which characters are valid in CSS class names/selectors?</a><a href="/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547">Query based on multiple where clauses in Firebase</a><a href="/questions/actual-meaning-of-&#x27;shelltrue&#x27;-in-subprocess-1657388470341">Actual meaning of &#x27;shell=True&#x27; in subprocess</a><a href="/questions/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc-1657387609554">Why does the order in which libraries are linked sometimes cause errors in GCC?</a><a href="/questions/submit-same-partial-view-called-multiple-times-data-to-controller-1657387887213">Submit same Partial View called multiple times data to controller?</a><a href="/questions/generating-random-whole-numbers-in-javascript-in-a-specific-range-1657388112728">Generating random whole numbers in JavaScript in a specific range</a><a href="/questions/php-mail-function-doesn&#x27;t-complete-sending-of-e-mail-1657384307499">PHP mail function doesn&#x27;t complete sending of e-mail</a><a href="/questions/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java-closed-1657387970474">What is an efficient way to implement a singleton pattern in Java? [closed]</a><a href="/questions/converting-string-into-datetime-1657387717295">Converting string into datetime</a><a href="/questions/why-do-regex-constructors-need-to-be-double-escaped-1657388004942">Why do regex constructors need to be double escaped?</a><a href="/questions/is-javascript-a-pass-by-reference-or-pass-by-value-language-1657384675679">Is JavaScript a pass-by-reference or pass-by-value language?</a><a href="/questions/the-difference-between-bracket-and-double-bracket-for-accessing-the-elements-of-a-list-or-dataframe-1657388451711">The difference between bracket [ ] and double bracket [[ ]] for accessing the elements of a list or dataframe</a><a href="/questions/what-is-event-bubbling-and-capturing-1657388059203">What is event bubbling and capturing?</a><a href="/questions/can-i-bind-an-array-to-an-in()-condition-in-a-pdo-query-1657388382858">Can I bind an array to an IN() condition in a PDO query?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;NOTE : AsyncTask was deprecated in API level 30.\u0026lt;br\u0026gt;\n\u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/os/AsyncTask\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;AsyncTask | Android Developers\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This exception is thrown when an application attempts to perform a networking operation on its main thread. Run your code in \u0026lt;a href=\u0026quot;http://developer.android.com/reference/android/os/AsyncTask.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;AsyncTask\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RetrieveFeedTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AsyncTask\u0026lt;/span\u0026gt;\u0026amp;lt;String, Void, RSSFeed\u0026amp;gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; Exception exception;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; RSSFeed \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doInBackground\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String... urls)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(urls[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]);\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SAXParserFactory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;factory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; SAXParserFactory.newInstance();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SAXParser\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;parser\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; factory.newSAXParser();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;XMLReader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;xmlreader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parser.getXMLReader();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;RssHandler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;theRSSHandler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RssHandler\u0026lt;/span\u0026gt;();\n            xmlreader.setContentHandler(theRSSHandler);\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputSource\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InputSource\u0026lt;/span\u0026gt;(url.openStream());\n            xmlreader.parse(is);\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; theRSSHandler.getFeed();\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.exception = e;\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;finally\u0026lt;/span\u0026gt; {\n            is.close();\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onPostExecute\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(RSSFeed feed)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;TODO:\u0026lt;/span\u0026gt; check this.exception\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;TODO:\u0026lt;/span\u0026gt; do something with the feed\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;How to execute the task:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In \u0026lt;code\u0026gt;MainActivity.java\u0026lt;/code\u0026gt; file you can add this line within your \u0026lt;code\u0026gt;oncreate()\u0026lt;/code\u0026gt; method\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RetrieveFeedTask\u0026lt;/span\u0026gt;().execute(urlToRssFeed);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Don\u0026apos;t forget to add this to \u0026lt;code\u0026gt;AndroidManifest.xml\u0026lt;/code\u0026gt; file:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.INTERNET\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;You should almost always run network operations on a thread or as an asynchronous task.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;But it \u0026lt;em\u0026gt;is\u0026lt;/em\u0026gt; possible to remove this restriction and you override the default behavior, if you are willing to accept the consequences.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Add:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;StrictMode.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ThreadPolicy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;policy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StrictMode\u0026lt;/span\u0026gt;.ThreadPolicy.Builder().permitAll().build();\n\nStrictMode.setThreadPolicy(policy);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;In your class,\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;and\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Add\u0026lt;/em\u0026gt; this permission in the Android \u0026lt;em\u0026gt;manifest.xml\u0026lt;/em\u0026gt; file:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.INTERNET\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Consequences:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Your app will (in areas of spotty Internet connection) become unresponsive and lock up, the user perceives slowness and has to do a force kill, and you risk the activity manager killing your app and telling the user that the app has stopped.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Android has some good tips on good programming practices to design for responsiveness:\n\u0026lt;a href=\u0026quot;http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;NetworkOnMainThreadException | Android Developers\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I solved this problem using a new \u0026lt;code\u0026gt;Thread\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;thread\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Runnable\u0026lt;/span\u0026gt;() {\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;  {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Your code goes here\u0026lt;/span\u0026gt;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n            e.printStackTrace();\n        }\n    }\n});\n\nthread.start(); \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;The accepted answer has some significant downsides. It is not advisable to use AsyncTask for networking unless you \u0026lt;em\u0026gt;really\u0026lt;/em\u0026gt; know what you are doing. Some of the down-sides include:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;AsyncTask\u0026apos;s created as non-static inner classes have an implicit reference to the enclosing Activity object, its context, and the entire View hierarchy created by that activity. This reference prevents the Activity from being garbage collected until the AsyncTask\u0026apos;s background work completes. If the user\u0026apos;s connection is slow, and/or the download is large, these short-term memory leaks can become a problem - for example, if the orientation changes several times (and you don\u0026apos;t cancel the executing tasks), or the user navigates away from the Activity.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;AsyncTask has different execution characteristics depending on the platform it executes on: prior to API level 4 AsyncTasks execute serially on a single background thread; from API level 4 through API level 10, AsyncTasks execute on a pool of up to 128 threads; from API level 11 onwards AsyncTask executes serially on a single background thread (unless you use the overloaded \u0026lt;code\u0026gt;executeOnExecutor\u0026lt;/code\u0026gt; method and supply an alternative executor). Code that works fine when running serially on ICS may break when executed concurrently on Gingerbread, say if you have inadvertent order-of-execution dependencies.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;If you want to avoid short-term memory leaks, have well-defined execution characteristics across all platforms, and have a base to build really robust network handling, you might want to consider:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Using a library that does a nice job of this for you - there\u0026apos;s a nice comparison of networking libs in \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/16902716/comparison-of-android-networking-libraries-okhttp-retrofit-volley\u0026quot;\u0026gt;this question\u0026lt;/a\u0026gt;, or\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Using a \u0026lt;code\u0026gt;Service\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;IntentService\u0026lt;/code\u0026gt; instead, perhaps with a \u0026lt;code\u0026gt;PendingIntent\u0026lt;/code\u0026gt; to return the result via the Activity\u0026apos;s \u0026lt;code\u0026gt;onActivityResult\u0026lt;/code\u0026gt; method.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;h2 id=\u0026quot;intentservice-approach\u0026quot;\u0026gt;\u0026lt;em\u0026gt;IntentService approach\u0026lt;/em\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Downsides:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;More code and complexity than \u0026lt;code\u0026gt;AsyncTask\u0026lt;/code\u0026gt;, though not as much as you might think\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Will queue requests and run them on a \u0026lt;em\u0026gt;single\u0026lt;/em\u0026gt; background thread. You can easily control this by replacing \u0026lt;code\u0026gt;IntentService\u0026lt;/code\u0026gt; with an equivalent \u0026lt;code\u0026gt;Service\u0026lt;/code\u0026gt; implementation, perhaps like \u0026lt;a href=\u0026quot;https://github.com/steveliles/AsyncAndroid/blob/master/AsyncAndroid/src/main/java/com/packt/asyncandroid/chapter6/ConcurrentIntentService.java\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;this one\u0026lt;/a\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Um, I can\u0026apos;t think of any others right now actually\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;Upsides:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Avoids the short-term memory leak problem\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;If your activity restarts while network operations are in-flight it can still receive the result of the download via its \u0026lt;code\u0026gt;onActivityResult\u0026lt;/code\u0026gt; method\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;A better platform than AsyncTask to build and reuse robust networking code. Example: if you need to do an important upload, you could do it from \u0026lt;code\u0026gt;AsyncTask\u0026lt;/code\u0026gt; in an \u0026lt;code\u0026gt;Activity\u0026lt;/code\u0026gt;, but if the user context-switches out of the app to take a phone call, the system \u0026lt;em\u0026gt;may\u0026lt;/em\u0026gt; kill the app before the upload completes. It is \u0026lt;em\u0026gt;less likely\u0026lt;/em\u0026gt; to kill an application with an active \u0026lt;code\u0026gt;Service\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;If you use your own concurrent version of \u0026lt;code\u0026gt;IntentService\u0026lt;/code\u0026gt; (like the one I linked above) you can control the level of concurrency via the \u0026lt;code\u0026gt;Executor\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2 id=\u0026quot;implementation-summary\u0026quot;\u0026gt;\u0026lt;em\u0026gt;Implementation summary\u0026lt;/em\u0026gt;\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;You can implement an \u0026lt;code\u0026gt;IntentService\u0026lt;/code\u0026gt; to perform downloads on a single background thread quite easily.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Step 1: Create an \u0026lt;code\u0026gt;IntentService\u0026lt;/code\u0026gt; to perform the download. You can tell it what to download via \u0026lt;code\u0026gt;Intent\u0026lt;/code\u0026gt; extras, and pass it a \u0026lt;code\u0026gt;PendingIntent\u0026lt;/code\u0026gt; to use to return the result to the \u0026lt;code\u0026gt;Activity\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.app.IntentService;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.app.PendingIntent;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.content.Intent;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.util.Log;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.InputStream;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.MalformedURLException;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.URL;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DownloadIntentService\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;IntentService\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;TAG\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; DownloadIntentService.class.getSimpleName();\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;PENDING_RESULT_EXTRA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;pending_result\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;URL_EXTRA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;url\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;RSS_RESULT_EXTRA\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;url\u0026quot;\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;RESULT_CODE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;INVALID_URL_CODE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;ERROR_CODE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; IllustrativeRSSParser parser;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;DownloadIntentService\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;(TAG);\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// make one and reuse, in the case where more than one intent is queued\u0026lt;/span\u0026gt;\n        parser = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;IllustrativeRSSParser\u0026lt;/span\u0026gt;();\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onHandleIntent\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Intent intent)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;PendingIntent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;reply\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; intent.getParcelableExtra(PENDING_RESULT_EXTRA);\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(intent.getStringExtra(URL_EXTRA));\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;IllustrativeRSS\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;rss\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parser.parse(in = url.openStream());\n\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt;();\n                result.putExtra(RSS_RESULT_EXTRA, rss);\n\n                reply.send(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, RESULT_CODE, result);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (MalformedURLException exc) {\n                reply.send(INVALID_URL_CODE);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception exc) {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// could do better by treating the different sax/xml exceptions individually\u0026lt;/span\u0026gt;\n                reply.send(ERROR_CODE);\n            }\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (PendingIntent.CanceledException exc) {\n            Log.i(TAG, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;reply cancelled\u0026quot;\u0026lt;/span\u0026gt;, exc);\n        }\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Step 2: Register the service in the manifest:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;service\n        android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.DownloadIntentService\u0026quot;\u0026lt;/span\u0026gt;\n        android:exported=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;false\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Step 3: Invoke the service from the Activity, passing a PendingResult object which the Service will use to return the result:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;PendingIntent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;pendingResult\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; createPendingResult(\n    RSS_DOWNLOAD_REQUEST_CODE, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt;(), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;intent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt;(getApplicationContext(), DownloadIntentService.class);\nintent.putExtra(DownloadIntentService.URL_EXTRA, URL);\nintent.putExtra(DownloadIntentService.PENDING_RESULT_EXTRA, pendingResult);\nstartService(intent);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Step 4: Handle the result in onActivityResult:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onActivityResult\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; requestCode, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; resultCode, Intent data)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (requestCode == RSS_DOWNLOAD_REQUEST_CODE) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;switch\u0026lt;/span\u0026gt; (resultCode) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; DownloadIntentService.INVALID_URL_CODE:\n                handleInvalidURL();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; DownloadIntentService.ERROR_CODE:\n                handleError(data);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; DownloadIntentService.RESULT_CODE:\n                handleRSS(data);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n        }\n        handleRSS(data);\n    }\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onActivityResult(requestCode, resultCode, data);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;A GitHub project containing a complete working Android Studio/\u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Gradle\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Gradle\u0026lt;/a\u0026gt; project is available \u0026lt;a href=\u0026quot;https://github.com/steveliles/Android-Download-Service-Example\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You cannot perform network \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Input/output\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;I/O\u0026lt;/a\u0026gt; on the UI thread on \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Honeycomb\u0026lt;/a\u0026gt;. Technically, it \u0026lt;em\u0026gt;is\u0026lt;/em\u0026gt; possible on earlier versions of Android, but it is a really bad idea as it will cause your app to stop responding, and can result in the OS killing your app for being badly behaved. You\u0026apos;ll need to run a background process or use AsyncTask to perform your network transaction on a background thread.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;There is an article about \u0026lt;a href=\u0026quot;http://android-developers.blogspot.com/2009/05/painless-threading.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Painless Threading\u0026lt;/a\u0026gt; on the Android developer site which is a good introduction to this, and it will provide you with a much better depth of an answer than can be realistically provided here.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are two solutions of this problem.\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Don\u0026apos;t use a network call in the main UI thread. Use an async task for that.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Write the below code into your MainActivity file after \u0026lt;em\u0026gt;setContentView(R.layout.activity_main);\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;if (android.os.Build.VERSION.SDK_INT \u0026amp;gt; 9) {\nStrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\nStrictMode.setThreadPolicy(policy);\n}\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;And the below import statement into your Java file.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.os.StrictMode;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Do the network actions on another thread.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Runnable\u0026lt;/span\u0026gt;(){\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do network action in this function\u0026lt;/span\u0026gt;\n    }\n}).start();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And add this to file \u0026lt;em\u0026gt;AndroidManifest.xml\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.INTERNET\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Do not use strictMode (only in debug mode)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Do not change SDK version\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Do not use a separate thread\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;Use Service or AsyncTask\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;See also Stack\u0026amp;nbsp;Overflow question:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/18297485/i-get-an-android-os-networkonmainthreadexception-sending-an-email-from-android/18297516#18297516\u0026quot;\u0026gt;android.os.NetworkOnMainThreadException sending an email from Android\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You disable the strict mode using following code:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (android.os.Build.VERSION.SDK_INT \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;) {\n    StrictMode.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ThreadPolicy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;policy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StrictMode\u0026lt;/span\u0026gt;.ThreadPolicy.Builder().permitAll().build();\n    StrictMode.setThreadPolicy(policy);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;This is not recommended\u0026lt;/strong\u0026gt;: use the \u0026lt;code\u0026gt;AsyncTask\u0026lt;/code\u0026gt; interface.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://askanydifference.com/how-to-fix-android-os-networkonmainthreadexception/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Full code for both the methods\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Network-based operations cannot be run on the main thread. You need to run all network-based tasks on a child thread or implement AsyncTask.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is how you run a task in a child thread:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Runnable\u0026lt;/span\u0026gt;(){\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Your implementation goes here\u0026lt;/span\u0026gt;\n        } \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}).start();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Put your code inside:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Runnable\u0026lt;/span\u0026gt;(){\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Your implementation\u0026lt;/span\u0026gt;\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}).start();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DemoTask\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AsyncTask\u0026lt;/span\u0026gt;\u0026amp;lt;Void, Void, Void\u0026amp;gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; Void \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doInBackground\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Void... arg0)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Your implementation\u0026lt;/span\u0026gt;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onPostExecute\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Void result)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;TODO:\u0026lt;/span\u0026gt; do something with the feed\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This happens in Android 3.0 and above. From Android 3.0 and above, they have restricted using network operations (functions that access the Internet) from running in the main thread/UI thread (what spawns from your on create and on resume methods in the activity).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is to encourage using separate threads for network operations. See \u0026lt;a href=\u0026quot;http://developer.android.com/reference/android/os/AsyncTask.html\u0026quot;\u0026gt;AsyncTask\u0026lt;/a\u0026gt; for more details on how to perform network activities the right way.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Using \u0026lt;a href=\u0026quot;http://androidannotations.org/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Android Annotations\u0026lt;/a\u0026gt; is an option. It will allow you to simply run any method in a background thread:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// normal method\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;normal\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n    doSomething(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// do something in background\u0026lt;/span\u0026gt;\n}\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Background\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doSomething\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// run your networking code here\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note, that although it provides benefits of simplicity and readability, it has its disadvantages. \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The error is due to executing long running operations in main thread,You can easily rectify the problem by using \u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/os/AsyncTask.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;AsynTask\u0026lt;/a\u0026gt; or \u0026lt;a href=\u0026quot;https://developer.android.com/reference/java/lang/Thread.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Thread\u0026lt;/a\u0026gt;. You can checkout this library \u0026lt;a href=\u0026quot;http://loopj.com/android-async-http/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;AsyncHTTPClient\u0026lt;/a\u0026gt; for better handling. \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;AsyncHttpClient\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;client\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AsyncHttpClient\u0026lt;/span\u0026gt;();\nclient.get(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://www.google.com\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;AsyncHttpResponseHandler\u0026lt;/span\u0026gt;() {\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onStart\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Called before a request is started\u0026lt;/span\u0026gt;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSuccess\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; statusCode, Header[] headers, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] response)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Called when response HTTP status is \u0026quot;200 OK\u0026quot;\u0026lt;/span\u0026gt;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onFailure\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; statusCode, Header[] headers, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] errorResponse, Throwable e)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Called when response HTTP status is \u0026quot;4XX\u0026quot; (for example, 401, 403, 404)\u0026lt;/span\u0026gt;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onRetry\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; retryNo)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Called when request is retried\u0026lt;/span\u0026gt;\n    }\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You should not do any time-consuming task on the main thread (UI thread), like any network operation, file I/O, or SQLite database operations. So for this kind of operation, you should create a worker thread, but the problem is that you can not directly perform any UI related operation from your worker thread. For that, you have to use \u0026lt;code\u0026gt;Handler\u0026lt;/code\u0026gt; and pass the \u0026lt;code\u0026gt;Message\u0026lt;/code\u0026gt;. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To simplify all these things, Android provides various ways, like \u0026lt;code\u0026gt;AsyncTask\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;AsyncTaskLoader\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;CursorLoader\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;IntentService\u0026lt;/code\u0026gt;. So you can use any of these according to your requirements.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The top \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/6343166/how-to-fix-android-os-networkonmainthreadexception/6343299#6343299\u0026quot;\u0026gt;answer of spektom\u0026lt;/a\u0026gt; works perfect.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you are writing the \u0026lt;code\u0026gt;AsyncTask\u0026lt;/code\u0026gt; inline and not extending as a class, and on top of this, if there is a need to get a response out of the \u0026lt;code\u0026gt;AsyncTask\u0026lt;/code\u0026gt;, one can use the \u0026lt;code\u0026gt;get()\u0026lt;/code\u0026gt; method as below.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;RSSFeed\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;feed\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RetreiveFeedTask\u0026lt;/span\u0026gt;().execute(urlToRssFeed).get();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;(From his example.)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is only thrown for applications targeting the \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Honeycomb\u0026lt;/a\u0026gt; SDK or higher. Applications targeting earlier SDK versions are allowed to do networking on their main event loop threads.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;The error is the SDK warning!\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For me it was this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-sdk\n        android:minSdkVersion=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;8\u0026quot;\u0026lt;/span\u0026gt;\n        android:targetSdkVersion=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The device I was testing my app on was 4.1.2 which is SDK Version 16!\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Make the sure the target version is the same as your Android Target Library. If you are unsure what your target library is, right click your Project -\u0026amp;gt; \u0026lt;em\u0026gt;Build Path\u0026lt;/em\u0026gt; -\u0026amp;gt; \u0026lt;em\u0026gt;Android\u0026lt;/em\u0026gt;, and it should be the one that is ticked.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Also, as others have mentioned, include the correct permissions to access the Internet:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026amp;lt;uses-permission android:name=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;android.permission.INTERNET\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Use this in Your Activity\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    btnsub.setOnClickListener(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;View\u0026lt;/span\u0026gt;.OnClickListener() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onClick\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(View v)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Runnable\u0026lt;/span\u0026gt;() {\n\n                \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TODO Auto-generated method stub\u0026lt;/span\u0026gt;\n\n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Initialize soap request + add parameters\u0026lt;/span\u0026gt;\n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SoapObject\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SoapObject\u0026lt;/span\u0026gt;(NAMESPACE, METHOD_NAME1);\n\n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Use this to add parameters\u0026lt;/span\u0026gt;\n                    request.addProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;pincode\u0026quot;\u0026lt;/span\u0026gt;, txtpincode.getText().toString());\n                    request.addProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bg\u0026quot;\u0026lt;/span\u0026gt;, bloodgroup.getSelectedItem().toString());\n\n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Declare the version of the SOAP request\u0026lt;/span\u0026gt;\n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SoapSerializationEnvelope\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;envelope\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SoapSerializationEnvelope\u0026lt;/span\u0026gt;(SoapEnvelope.VER11);\n\n                    envelope.setOutputSoapObject(request);\n                    envelope.dotNet = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n                        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpTransportSE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;androidHttpTransport\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpTransportSE\u0026lt;/span\u0026gt;(URL);\n\n                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//this is the actual part that will call the webservice\u0026lt;/span\u0026gt;\n                        androidHttpTransport.call(SOAP_ACTION1, envelope);\n\n                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Get the SoapResult from the envelope body.\u0026lt;/span\u0026gt;\n                        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SoapObject\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (SoapObject) envelope.getResponse();\n                        Log.e(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;result data\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;data\u0026quot;\u0026lt;/span\u0026gt; + result);\n                        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SoapObject\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;root\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (SoapObject) result.getProperty(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// SoapObject s_deals = (SoapObject) root.getProperty(0);\u0026lt;/span\u0026gt;\n                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// SoapObject s_deals_1 = (SoapObject) s_deals.getProperty(0);\u0026lt;/span\u0026gt;\n                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//\u0026lt;/span\u0026gt;\n\n                        System.out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;********Count : \u0026quot;\u0026lt;/span\u0026gt; + root.getPropertyCount());\n\n                        value = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ArrayList\u0026lt;/span\u0026gt;\u0026amp;lt;Detailinfo\u0026amp;gt;();\n\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; root.getPropertyCount(); i++) {\n                            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SoapObject\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;s_deals\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (SoapObject) root.getProperty(i);\n                            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Detailinfo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;info\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Detailinfo\u0026lt;/span\u0026gt;();\n\n                            info.setFirstName(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Firstname\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setLastName(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Lastname\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setDOB(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;DOB\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setGender(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Gender\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setAddress(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Address\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setCity(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;City\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setState(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;State\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setPinecode(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Pinecode\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setMobile(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Mobile\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setEmail(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Email\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setBloodgroup(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Bloodgroup\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setAdddate(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Adddate\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            info.setWaight(s_deals.getProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;waight\u0026quot;\u0026lt;/span\u0026gt;).toString());\n                            value.add(info);\n                        }\n\n                    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n                        e.printStackTrace();\n                    }\n                    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;intent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt;(getApplicationContext(), ComposeMail.class);\n                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//intent.putParcelableArrayListExtra(\u0026quot;valuesList\u0026quot;, value);\u0026lt;/span\u0026gt;\n\n                    startActivity(intent);\n                }\n            }).start();\n        }\n    });\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Just to spell out something explicitly:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The main thread is basically the UI thread.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So saying that you cannot do networking operations in the main thread means you cannot do networking operations in the UI thread, which means \u0026lt;em\u0026gt;you cannot do networking operations in a \u0026lt;code\u0026gt;*runOnUiThread(new Runnable() { ... }*\u0026lt;/code\u0026gt; block\u0026lt;/em\u0026gt; inside some other thread, either.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;(I just had a long head-scratching moment trying to figure out why I was getting that error somewhere other than my main thread.  This was why; this thread helped; and hopefully this comment will help someone else.)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This exception occurs due to any heavy task performed on the main thread if that performing task takes \u0026lt;em\u0026gt;too much time\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To avoid this, we can handle it using \u0026lt;strong\u0026gt;threads\u0026lt;/strong\u0026gt; or \u0026lt;strong\u0026gt;executers\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;Executors.newSingleThreadExecutor().submit(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Runnable\u0026lt;/span\u0026gt;() {\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// You can perform your task here.\u0026lt;/span\u0026gt;\n    }\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are many great answers already on this question, but a lot of great libraries have come out since those answers were posted. This is intended as a kind of newbie-guide.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I will cover several use cases for performing network operations and \u0026lt;em\u0026gt;a\u0026lt;/em\u0026gt; solution or two for each.\u0026lt;/p\u0026gt;\n\u0026lt;h1 id=\u0026quot;rest-over-http-nzt9\u0026quot;\u0026gt;\u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Representational_state_transfer\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;REST\u0026lt;/a\u0026gt; over HTTP\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Typically JSON, but it can be XML or something else.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;h2 id=\u0026quot;full-api-access-wvsz\u0026quot;\u0026gt;Full API Access\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Let\u0026apos;s say you are writing an app that lets users track stock prices, interest rates and currency exchange rates. You find an JSON API that looks something like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-none s-code-block\u0026quot;\u0026gt;\u0026lt;code\u0026gt;http://api.example.com/stocks                       // ResponseWrapper\u0026amp;lt;String\u0026amp;gt; object containing a\n                                                    // list of strings with ticker symbols\nhttp://api.example.com/stocks/$symbol               // Stock object\nhttp://api.example.com/stocks/$symbol/prices        // PriceHistory\u0026amp;lt;Stock\u0026amp;gt; object\nhttp://api.example.com/currencies                   // ResponseWrapper\u0026amp;lt;String\u0026amp;gt; object containing a\n                                                    // list of currency abbreviation\nhttp://api.example.com/currencies/$currency         // Currency object\nhttp://api.example.com/currencies/$id1/values/$id2  // PriceHistory\u0026amp;lt;Currency\u0026amp;gt; object comparing the prices\n                                                    // of the first currency (id1) to the second (id2)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3 id=\u0026quot;retrofit-from-square-j5a1\u0026quot;\u0026gt;Retrofit from Square\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;This is an excellent choice for an API with multiple endpoints and allows you to declare the REST endpoints instead of having to code them individually as with other libraries like \u0026lt;a href=\u0026quot;https://amzn.github.io/ion-docs/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Amazon Ion Java\u0026lt;/a\u0026gt; or \u0026lt;a href=\u0026quot;https://developer.android.com/training/volley/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Volley\u0026lt;/a\u0026gt; (website: \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;http://square.github.io/retrofit/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Retrofit\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;How do you use it with the finances API?\u0026lt;/p\u0026gt;\n\u0026lt;h3 id=\u0026quot;file-build.gradle-uu1e\u0026quot;\u0026gt;File \u0026lt;em\u0026gt;build.gradle\u0026lt;/em\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Add these lines to your \u0026lt;em\u0026gt;module\u0026lt;/em\u0026gt; level \u0026lt;em\u0026gt;build.gradle\u0026lt;/em\u0026gt; file:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;implementation \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;com.squareup.retrofit2:retrofit:2.3.0\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Retrofit library, current as of September 21, 2017\u0026lt;/span\u0026gt;\nimplementation \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;com.squareup.retrofit2:converter-gson:2.3.0\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Gson serialization and deserialization support for retrofit, version must match retrofit version\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3 id=\u0026quot;file-financesapi.java-lwca\u0026quot;\u0026gt;File \u0026lt;em\u0026gt;FinancesApi.java\u0026lt;/em\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;interface\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FinancesApi\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@GET(\u0026quot;stocks\u0026quot;)\u0026lt;/span\u0026gt;\n    Call\u0026amp;lt;ResponseWrapper\u0026amp;lt;String\u0026amp;gt;\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;listStocks\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@GET(\u0026quot;stocks/{symbol}\u0026quot;)\u0026lt;/span\u0026gt;\n    Call\u0026amp;lt;Stock\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getStock\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Path(\u0026quot;symbol\u0026quot;)\u0026lt;/span\u0026gt;String tickerSymbol)\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@GET(\u0026quot;stocks/{symbol}/prices\u0026quot;)\u0026lt;/span\u0026gt;\n    Call\u0026amp;lt;PriceHistory\u0026amp;lt;Stock\u0026amp;gt;\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPriceHistory\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Path(\u0026quot;symbol\u0026quot;)\u0026lt;/span\u0026gt;String tickerSymbol)\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@GET(\u0026quot;currencies\u0026quot;)\u0026lt;/span\u0026gt;\n    Call\u0026amp;lt;ResponseWrapper\u0026amp;lt;String\u0026amp;gt;\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;listCurrencies\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@GET(\u0026quot;currencies/{symbol}\u0026quot;)\u0026lt;/span\u0026gt;\n    Call\u0026amp;lt;Currency\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCurrency\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Path(\u0026quot;symbol\u0026quot;)\u0026lt;/span\u0026gt;String currencySymbol)\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@GET(\u0026quot;currencies/{symbol}/values/{compare_symbol}\u0026quot;)\u0026lt;/span\u0026gt;\n    Call\u0026amp;lt;PriceHistory\u0026amp;lt;Currency\u0026amp;gt;\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getComparativeHistory\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Path(\u0026quot;symbol\u0026quot;)\u0026lt;/span\u0026gt;String currency, \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Path(\u0026quot;compare_symbol\u0026quot;)\u0026lt;/span\u0026gt;String currencyToPriceAgainst)\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3 id=\u0026quot;class-financesapibuilder-7lsi\u0026quot;\u0026gt;Class \u0026lt;em\u0026gt;FinancesApiBuilder\u0026lt;/em\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FinancesApiBuilder\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; FinancesApi \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;build\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String baseUrl)\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Retrofit\u0026lt;/span\u0026gt;.Builder()\n                    .baseUrl(baseUrl)\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .build()\n                    .create(FinancesApi.class);\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3 id=\u0026quot;class-financesfragment-snippet-4nuc\u0026quot;\u0026gt;Class \u0026lt;em\u0026gt;FinancesFragment\u0026lt;/em\u0026gt; snippet\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;FinancesApi\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;api\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; FinancesApiBuilder.build(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://api.example.com/\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//trailing \u0026apos;/\u0026apos; required for predictable behavior\u0026lt;/span\u0026gt;\napi.getStock(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;INTC\u0026quot;\u0026lt;/span\u0026gt;).enqueue(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Callback\u0026lt;/span\u0026gt;\u0026amp;lt;Stock\u0026amp;gt;(){\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onResponse\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Call\u0026amp;lt;Stock\u0026amp;gt; stockCall, Response\u0026amp;lt;Stock\u0026amp;gt; stockResponse)\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Stock\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;stock\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; stockCall.body();\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do something with the stock\u0026lt;/span\u0026gt;\n    }\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onResponse\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Call\u0026amp;lt;Stock\u0026amp;gt; stockCall, Throwable t)\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Something bad happened\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If your API requires an API key or other header, like a user token, etc. to be sent, Retrofit makes this easy (see \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/42898920/add-header-parameter-in-retrofit/42899766#42899766\u0026quot;\u0026gt;this awesome answer\u0026lt;/a\u0026gt; to \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/42898920/\u0026quot;\u0026gt;Add Header Parameter in Retrofit\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt; for details).\u0026lt;/p\u0026gt;\n\u0026lt;h2 id=\u0026quot;one-off-rest-api-access-z59h\u0026quot;\u0026gt;One-off REST API access\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Let\u0026apos;s say you\u0026apos;re building a \u0026quot;mood weather\u0026quot; app that looks up the user\u0026apos;s GPS location and checks the current temperature in that area and tells them the mood. This type of app doesn\u0026apos;t need to declare API endpoints; it just needs to be able to access one API endpoint.\u0026lt;/p\u0026gt;\n\u0026lt;h3 id=\u0026quot;ion-oacp\u0026quot;\u0026gt;Ion\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;This is a great library for this type of access.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Please read \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/6343166/how-can-i-fix-android-os-networkonmainthreadexception/28559884#28559884\u0026quot;\u0026gt;msysmilu\u0026apos;s great answer\u0026lt;/a\u0026gt; to \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/6343166\u0026quot;\u0026gt;How can I fix \u0026apos;android.os.NetworkOnMainThreadException\u0026apos;?\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;h1 id=\u0026quot;load-images-via-http-8qty\u0026quot;\u0026gt;Load images via HTTP\u0026lt;/h1\u0026gt;\n\u0026lt;h2 id=\u0026quot;volley-ct3h\u0026quot;\u0026gt;Volley\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Volley can also be used for REST APIs, but due to the more complicated setup required, I prefer to use \u0026lt;a href=\u0026quot;http://square.github.io/retrofit/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Retrofit\u0026lt;/a\u0026gt; from Square as above.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Let\u0026apos;s say you are building a social networking app and want to load profile pictures of friends.\u0026lt;/p\u0026gt;\n\u0026lt;h3 id=\u0026quot;file-build.gradle-1-xq8r\u0026quot;\u0026gt;File \u0026lt;em\u0026gt;build.gradle\u0026lt;/em\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Add this line to your \u0026lt;em\u0026gt;module\u0026lt;/em\u0026gt; level \u0026lt;em\u0026gt;build.gradle\u0026lt;/em\u0026gt; file:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;implementation \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;com.android.volley:volley:1.0.0\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3 id=\u0026quot;file-imagefetch.java-g0ls\u0026quot;\u0026gt;File \u0026lt;em\u0026gt;ImageFetch.java\u0026lt;/em\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Volley requires more setup than Retrofit. You will need to create a class like this to setup a RequestQueue, an ImageLoader and an ImageCache, but it\u0026apos;s not too bad:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ImageFetch\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ImageLoader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;imageLoader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;RequestQueue\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;imageQueue\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; ImageLoader \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getImageLoader\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Context ctx)\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(imageLoader == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;){\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(imageQueue == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;){\n                imageQueue = Volley.newRequestQueue(ctx.getApplicationContext());\n            }\n            imageLoader = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ImageLoader\u0026lt;/span\u0026gt;(imageQueue, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ImageLoader\u0026lt;/span\u0026gt;.ImageCache() {\n                Map\u0026amp;lt;String, Bitmap\u0026amp;gt; cache = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HashMap\u0026lt;/span\u0026gt;\u0026amp;lt;String, Bitmap\u0026amp;gt;();\n                \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; Bitmap \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getBitmap\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url)\u0026lt;/span\u0026gt; {\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; cache.get(url);\n                }\n                \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putBitmap\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url, Bitmap bitmap)\u0026lt;/span\u0026gt; {\n                    cache.put(url, bitmap);\n                }\n            });\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; imageLoader;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3 id=\u0026quot;file-user_view_dialog.xml-vi6y\u0026quot;\u0026gt;File \u0026lt;em\u0026gt;user_view_dialog.xml\u0026lt;/em\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Add the following to your layout XML file to add an image:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-xml s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;com.android.volley.toolbox.NetworkImageView\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@+id/profile_picture\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:layout_width\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;32dp\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:layout_height\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;32dp\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:layout_alignParentTop\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:layout_centerHorizontal\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;app:srcCompat\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;@android:drawable/spinner_background\u0026quot;\u0026lt;/span\u0026gt;/\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3 id=\u0026quot;file-userviewdialog.java-qsy0\u0026quot;\u0026gt;File \u0026lt;em\u0026gt;UserViewDialog.java\u0026lt;/em\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Add the following code to the onCreate method (Fragment, Activity) or the constructor (Dialog):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;NetworkImageView\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;profilePicture\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; view.findViewById(R.id.profile_picture);\nprofilePicture.setImageUrl(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://example.com/users/images/profile.jpg\u0026quot;\u0026lt;/span\u0026gt;, ImageFetch.getImageLoader(getContext());\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2 id=\u0026quot;picasso-iipo\u0026quot;\u0026gt;Picasso\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://square.github.io/picasso/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Picasso\u0026lt;/a\u0026gt; is another excellent library from Square. Please see the website for some great examples.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In simple words,\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;strong\u0026gt;Do not do network work in the UI thread\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For example, if you do an HTTP request, that is a network action.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Solution:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;You have to create a new Thread\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Or\u0026lt;/strong\u0026gt; use the \u0026lt;a href=\u0026quot;https://www.google.com.np/url?sa=t\u0026amp;amp;rct=j\u0026amp;amp;q=\u0026amp;amp;esrc=s\u0026amp;amp;source=web\u0026amp;amp;cd=1\u0026amp;amp;cad=rja\u0026amp;amp;uact=8\u0026amp;amp;ved=0CB0QFjAAahUKEwjgivqS0-3GAhUGOJQKHV_YD84\u0026amp;amp;url=http%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fos%2FAsyncTask.html\u0026amp;amp;ei=RfquVaDUPIbw0ATfsL_wDA\u0026amp;amp;usg=AFQjCNE8gLVXz1Hwq4rI8oxRkZNHjhRzpQ\u0026amp;amp;sig2=qTI0AgoyYUXyDwHFQup9sw\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;AsyncTask class\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Way:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Put all your works inside\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;The \u0026lt;code\u0026gt;run()\u0026lt;/code\u0026gt; method of the new thread\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Or\u0026lt;/strong\u0026gt; the \u0026lt;code\u0026gt;doInBackground()\u0026lt;/code\u0026gt; method of the AsyncTask class.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;But:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;When you get something from a network response and want to show it on your view (like display response message in TextView), you need to \u0026lt;strong\u0026gt;return back to the UI\u0026lt;/strong\u0026gt; thread.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you don\u0026apos;t do it, you will get \u0026lt;code\u0026gt;ViewRootImpl$CalledFromWrongThreadException\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;How-to\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;While using AsyncTask, update the view from the \u0026lt;code\u0026gt;onPostExecute()\u0026lt;/code\u0026gt; method\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Or\u0026lt;/strong\u0026gt; call the \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/11140285/how-to-use-runonuithread\u0026quot;\u0026gt;\u0026lt;code\u0026gt;runOnUiThread()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; method and update the view inside the \u0026lt;code\u0026gt;run()\u0026lt;/code\u0026gt; method.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You are able to move a part of your code into another thread to offload the \u0026lt;code\u0026gt;main thread\u0026lt;/code\u0026gt; and avoid getting \u0026lt;a href=\u0026quot;https://developer.android.com/topic/performance/vitals/anr.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;ANR\u0026lt;/a\u0026gt;, \u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/os/NetworkOnMainThreadException.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;NetworkOnMainThreadException\u0026lt;/a\u0026gt;, \u0026lt;a href=\u0026quot;https://developer.android.com/reference/java/lang/IllegalStateException.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;IllegalStateException\u0026lt;/a\u0026gt; (e.g., cannot access database on the main thread since it may potentially lock the UI for a long period of time).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;There are some approaches that you should choose depends on the situation\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Java \u0026lt;a href=\u0026quot;https://developer.android.com/reference/java/lang/Thread.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Thread\u0026lt;/a\u0026gt; or Android \u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/os/HandlerThread.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;HandlerThread\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Java threads are one-time use only and die after executing its run method.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;HandlerThread is a handy class for starting a new thread that has a looper.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/os/AsyncTask.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;AsyncTask\u0026lt;/a\u0026gt; (\u0026lt;strong\u0026gt;deprecated\u0026lt;/strong\u0026gt; in API level 30)\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;AsyncTask\u0026lt;/strong\u0026gt; is designed to be a helper class around \u0026lt;strong\u0026gt;Thread\u0026lt;/strong\u0026gt; and \u0026lt;strong\u0026gt;Handler\u0026lt;/strong\u0026gt; and does not constitute a generic threading framework. AsyncTasks should ideally be used for short operations (a few seconds at the most.) If you need to keep threads running for long periods of time, it is highly recommended you use the various APIs provided by the java.util.concurrent package such as \u0026lt;strong\u0026gt;Executor\u0026lt;/strong\u0026gt;, \u0026lt;strong\u0026gt;ThreadPoolExecutor\u0026lt;/strong\u0026gt; and \u0026lt;strong\u0026gt;FutureTask\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;Since the \u0026lt;em\u0026gt;main\u0026lt;/em\u0026gt; thread monopolizes UI components, it is not possible to access to some View, and that is why Handler comes to the rescue\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/66567556/4770877\u0026quot;\u0026gt;[Executor framework]\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;ThreadPoolExecutor class that implements ExecutorService which gives fine control on the thread pool (E.g., core pool size, max pool size, keep alive time, etc.)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;ScheduledThreadPoolExecutor - a class that extends ThreadPoolExecutor. It can schedule tasks after a given delay or periodically.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.android.com/reference/java/util/concurrent/FutureTask.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;FutureTask\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;FutureTask performs asynchronous processing, however, if the result is not ready yet or processing has not complete, calling get() will be block the thread\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/content/AsyncTaskLoader.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;AsyncTaskLoaders\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;AsyncTaskLoaders as they solve a lot of problems that are inherent to AsyncTask\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/app/IntentService.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;IntentService\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;This is the de facto choice for long running processing on Android, a good example would be to upload or download large files. The upload and download may continue even if the user exits the app and you certainly do not want to block the user from being able to use the app while these tasks are going on.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/app/job/JobScheduler.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;JobScheduler\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Effectively, you have to create a Service and create a job using JobInfo.Builder that specifies your criteria for when to run the service.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/ReactiveX/RxJava\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;RxJava\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Library for composing asynchronous and event-based programs by using observable sequences.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://kotlinlang.org/docs/reference/coroutines.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Coroutines\u0026lt;/a\u0026gt; (Kotlin)\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;The main gist of it is, it makes asynchronous code looks so much like synchronous\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;Read more \u0026lt;a href=\u0026quot;https://android.jlelse.eu/8-ways-to-do-asynchronous-processing-in-android-and-counting-f634dc6fae4e\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;, \u0026lt;a href=\u0026quot;https://medium.com/@elye.project/the-evolution-of-android-network-access-1e199fc6e9a2\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;, \u0026lt;a href=\u0026quot;https://medium.com/@frank.tan/using-a-thread-pool-in-android-e3c88f59d07f\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;, and \u0026lt;a href=\u0026quot;https://guides.codepath.com/android/Managing-Threads-and-Custom-Services#handlerthread-caveats\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;New \u0026lt;code\u0026gt;Thread\u0026lt;/code\u0026gt; and \u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/os/AsyncTask.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;AsyncTask\u0026lt;/a\u0026gt; solutions have been explained already.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;AsyncTask\u0026lt;/code\u0026gt; should ideally be used for short operations. Normal \u0026lt;code\u0026gt;Thread\u0026lt;/code\u0026gt; is not preferable for Android. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Have a look at alternate solution using \u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/os/HandlerThread.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HandlerThread\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/os/Handler.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Handler\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;HandlerThread\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Handy class for starting a new thread that has a looper. The looper can then be used to create handler classes. Note that \u0026lt;code\u0026gt;start()\u0026lt;/code\u0026gt; must still be called.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Handler:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;A Handler allows you to send and process Message and Runnable objects associated with a thread\u0026apos;s MessageQueue. Each Handler instance is associated with a single thread and that thread\u0026apos;s message queue. When you create a new Handler, it is bound to the thread / message queue of the thread that is creating it -- from that point on, it will deliver messages and runnables to that message queue and execute them as they come out of the message queue.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;Solution:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Create \u0026lt;code\u0026gt;HandlerThread\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Call \u0026lt;code\u0026gt;start()\u0026lt;/code\u0026gt; on \u0026lt;code\u0026gt;HandlerThread\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Create \u0026lt;code\u0026gt;Handler\u0026lt;/code\u0026gt; by getting \u0026lt;code\u0026gt;Looper\u0026lt;/code\u0026gt; from \u0026lt;code\u0026gt;HanlerThread\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Embed your Network operation related code in \u0026lt;code\u0026gt;Runnable\u0026lt;/code\u0026gt; object\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Submit \u0026lt;code\u0026gt;Runnable\u0026lt;/code\u0026gt; task to \u0026lt;code\u0026gt;Handler\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;Sample code snippet, which address  \u0026lt;code\u0026gt;NetworkOnMainThreadException\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HandlerThread\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;handlerThread\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HandlerThread\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;URLConnection\u0026quot;\u0026lt;/span\u0026gt;);\nhandlerThread.start();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;handler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mainHandler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Handler\u0026lt;/span\u0026gt;(handlerThread.getLooper());\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Runnable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myRunnable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Runnable\u0026lt;/span\u0026gt;() {\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            Log.d(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Ravi\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Before IO call\u0026quot;\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;page\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://www.google.com\u0026quot;\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;StringBuffer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;text\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StringBuffer\u0026lt;/span\u0026gt;();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpURLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;conn\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (HttpURLConnection) page.openConnection();\n            conn.connect();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStreamReader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InputStreamReader\u0026lt;/span\u0026gt;((InputStream) conn.getContent());\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BufferedReader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;buff\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BufferedReader\u0026lt;/span\u0026gt;(in);\n            String line;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; ( (line =  buff.readLine()) != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n                text.append(line + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\u0026quot;\u0026lt;/span\u0026gt;);\n            }\n            Log.d(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Ravi\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;After IO call\u0026quot;\u0026lt;/span\u0026gt;);\n            Log.d(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Ravi\u0026quot;\u0026lt;/span\u0026gt;,text.toString());\n\n        }\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;( Exception err){\n            err.printStackTrace();\n        }\n    }\n};\nmainHandler.post(myRunnable);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Pros of using this approach:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Creating new \u0026lt;code\u0026gt;Thread/AsyncTask\u0026lt;/code\u0026gt; for each network operation is expensive. The \u0026lt;code\u0026gt;Thread/AsyncTask\u0026lt;/code\u0026gt; will be destroyed and re-created for next Network operations. But with \u0026lt;code\u0026gt;Handler\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;HandlerThread\u0026lt;/code\u0026gt; approach, you can submit many network operations (as Runnable tasks) to single \u0026lt;code\u0026gt;HandlerThread\u0026lt;/code\u0026gt; by using \u0026lt;code\u0026gt;Handler\u0026lt;/code\u0026gt;. \u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Although above there is a huge solution pool, no one mentioned \u0026lt;code\u0026gt;com.koushikdutta.ion\u0026lt;/code\u0026gt;: \u0026lt;a href=\u0026quot;https://github.com/koush/ion\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://github.com/koush/ion\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It\u0026apos;s also \u0026lt;strong\u0026gt;asynchronous\u0026lt;/strong\u0026gt; and \u0026lt;strong\u0026gt;very simple\u0026lt;/strong\u0026gt; to use:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;Ion.with(context)\n.load(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://example.com/thing.json\u0026quot;\u0026lt;/span\u0026gt;)\n.asJsonObject()\n.setCallback(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FutureCallback\u0026lt;/span\u0026gt;\u0026amp;lt;JsonObject\u0026amp;gt;() {\n   \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCompleted\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Exception e, JsonObject result)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// do stuff with the result or error\u0026lt;/span\u0026gt;\n    }\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This works. I just made \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/6343166/how-can-i-fix-android-os-networkonmainthreadexception/14443056#14443056\u0026quot;\u0026gt;Dr.Luiji\u0026apos;s answer\u0026lt;/a\u0026gt; a little simpler.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Thread\u0026lt;/span\u0026gt;() {\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Your code goes here\u0026lt;/span\u0026gt;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}.start();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h2\u0026gt; Kotlin \u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;If you are using Kotlin, you can use a \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Coroutine\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;coroutine\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;fun \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doSomeNetworkStuff\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n    GlobalScope.launch(Dispatchers.IO) {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The main thread is the UI thread, and you cannot do an operation in the main thread which may block the user interaction. You can solve this in two ways:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Force to do the task in the main thread like this\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;StrictMode.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ThreadPolicy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;threadPolicy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StrictMode\u0026lt;/span\u0026gt;.ThreadPolicy.Builder().permitAll().build();\nStrictMode.setThreadPolicy(threadPolicy);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or create a simple handler and update the main thread if you want.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;Runnable runnable;\nHandler newHandler;\n\nnewHandler = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Handler\u0026lt;/span\u0026gt;();\nrunnable = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Runnable\u0026lt;/span\u0026gt;() {\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;run\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//update UI\u0026lt;/span\u0026gt;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n            e.printStackTrace();\n        } \n    }\n};\nnewHandler.post(runnable);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And to stop the thread use:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;newHandler.removeCallbacks(runnable);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;For more information check this out: \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://android-developers.googleblog.com/2009/05/painless-threading.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Painless threading\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;RxAndroid\u0026lt;/code\u0026gt; is another better alternative to this problem and it saves us from hassles of creating threads and then posting results on Android UI thread.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;We just need to specify threads on which tasks need to be executed and everything is handled internally.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;Observable\u0026amp;lt;List\u0026amp;lt;String\u0026amp;gt;\u0026amp;gt; musicShowsObservable = Observable.fromCallable(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Callable\u0026lt;/span\u0026gt;\u0026amp;lt;List\u0026amp;lt;String\u0026amp;gt;\u0026amp;gt;() {\n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; List\u0026amp;lt;String\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; mRestClient.getFavoriteMusicShows();\n  }\n\n});\n\nmMusicShowSubscription = musicShowsObservable\n  .subscribeOn(Schedulers.io())\n  .observeOn(AndroidSchedulers.mainThread())\n  .subscribe(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Observer\u0026lt;/span\u0026gt;\u0026amp;lt;List\u0026amp;lt;String\u0026amp;gt;\u0026amp;gt;() {\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCompleted\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onError\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Throwable e)\u0026lt;/span\u0026gt; { }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onNext\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(List\u0026amp;lt;String\u0026amp;gt; musicShows)\u0026lt;/span\u0026gt; {\n        listMusicShows(musicShows);\n    }\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;By specifiying \u0026lt;code\u0026gt;(Schedulers.io())\u0026lt;/code\u0026gt;, RxAndroid will run \u0026lt;code\u0026gt;getFavoriteMusicShows()\u0026lt;/code\u0026gt; on a different thread.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;By using \u0026lt;code\u0026gt;AndroidSchedulers.mainThread()\u0026lt;/code\u0026gt; we want to observe this Observable on the UI thread, i.e., we want our \u0026lt;code\u0026gt;onNext()\u0026lt;/code\u0026gt; callback to be called on the UI thread.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    "],"id":62,"title":"How can I fix 'android.os.NetworkOnMainThreadException'?","content":"\n                \n\u0026lt;p\u0026gt;I got an error while running my Android project for RssReader. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Code:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(urlToRssFeed);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SAXParserFactory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;factory\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; SAXParserFactory.newInstance();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SAXParser\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;parser\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; factory.newSAXParser();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;XMLReader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;xmlreader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parser.getXMLReader();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;RssHandler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;theRSSHandler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RssHandler\u0026lt;/span\u0026gt;();\nxmlreader.setContentHandler(theRSSHandler);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputSource\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InputSource\u0026lt;/span\u0026gt;(url.openStream());\nxmlreader.parse(is);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; theRSSHandler.getFeed();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And it shows the below error:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;android.os.NetworkOnMainThreadException\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;How can I fix this issue?\u0026lt;/p\u0026gt;\n    ","slug":"how-can-i-fix-'android.os.networkonmainthreadexception'-1657384454963","postType":"QUESTION","createdAt":"2022-07-09T16:34:15.000Z","updatedAt":"2022-07-09T16:34:15.000Z","tags":[{"id":226,"name":"android-networking","slug":"android-networking","createdAt":"2022-07-09T16:34:15.000Z","updatedAt":"2022-07-09T16:34:15.000Z","Questions_Tags":{"questionId":62,"tagId":226}},{"id":227,"name":"networkonmainthread","slug":"networkonmainthread","createdAt":"2022-07-09T16:34:15.000Z","updatedAt":"2022-07-09T16:34:15.000Z","Questions_Tags":{"questionId":62,"tagId":227}}],"relatedQuestions":[{"title":"How can I fix 'android.os.NetworkOnMainThreadException'?","slug":"how-can-i-fix-'android.os.networkonmainthreadexception'-1657384454963","tags":[{"name":"android-networking","Questions_Tags":{"questionId":62,"tagId":226}},{"name":"networkonmainthread","Questions_Tags":{"questionId":62,"tagId":227}}]}]},"randomQuestions":[{"title":"Accessing nested JavaScript objects and arrays by string path","slug":"accessing-nested-javascript-objects-and-arrays-by-string-path-1657387321754"},{"title":"Retrieve only the queried element in an object array in MongoDB collection","slug":"retrieve-only-the-queried-element-in-an-object-array-in-mongodb-collection-1657384890457"},{"title":"How do I compose a rotation matrix with human readable angles from scratch?","slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457"},{"title":"How do I count the occurrences of a list item?","slug":"how-do-i-count-the-occurrences-of-a-list-item-1657387916234"},{"title":"How do I split a delimited string so I can access individual items?","slug":"how-do-i-split-a-delimited-string-so-i-can-access-individual-items-1657388042385"},{"title":"How to randomize (shuffle) a JavaScript array?","slug":"how-to-randomize-(shuffle)-a-javascript-array-1657384790171"},{"title":"Which characters are valid in CSS class names/selectors?","slug":"which-characters-are-valid-in-css-class-namesselectors-1657387959188"},{"title":"Query based on multiple where clauses in Firebase","slug":"query-based-on-multiple-where-clauses-in-firebase-1657387494547"},{"title":"Actual meaning of 'shell=True' in subprocess","slug":"actual-meaning-of-'shelltrue'-in-subprocess-1657388470341"},{"title":"Why does the order in which libraries are linked sometimes cause errors in GCC?","slug":"why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc-1657387609554"},{"title":"Submit same Partial View called multiple times data to controller?","slug":"submit-same-partial-view-called-multiple-times-data-to-controller-1657387887213"},{"title":"Generating random whole numbers in JavaScript in a specific range","slug":"generating-random-whole-numbers-in-javascript-in-a-specific-range-1657388112728"},{"title":"PHP mail function doesn't complete sending of e-mail","slug":"php-mail-function-doesn't-complete-sending-of-e-mail-1657384307499"},{"title":"What is an efficient way to implement a singleton pattern in Java? [closed]","slug":"what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java-closed-1657387970474"},{"title":"Converting string into datetime","slug":"converting-string-into-datetime-1657387717295"},{"title":"Why do regex constructors need to be double escaped?","slug":"why-do-regex-constructors-need-to-be-double-escaped-1657388004942"},{"title":"Is JavaScript a pass-by-reference or pass-by-value language?","slug":"is-javascript-a-pass-by-reference-or-pass-by-value-language-1657384675679"},{"title":"The difference between bracket [ ] and double bracket [[ ]] for accessing the elements of a list or dataframe","slug":"the-difference-between-bracket-and-double-bracket-for-accessing-the-elements-of-a-list-or-dataframe-1657388451711"},{"title":"What is event bubbling and capturing?","slug":"what-is-event-bubbling-and-capturing-1657388059203"},{"title":"Can I bind an array to an IN() condition in a PDO query?","slug":"can-i-bind-an-array-to-an-in()-condition-in-a-pdo-query-1657388382858"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-can-i-fix-'android.os.networkonmainthreadexception'-1657384454963"},"buildId":"5tS3Jli5j89_wXapXajXn","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>