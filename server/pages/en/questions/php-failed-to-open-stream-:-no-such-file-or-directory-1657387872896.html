<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="require,fopen,include-path,solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/php-failed-to-open-stream-:-no-such-file-or-directory-1657387872896","name":"Questions"}}]}</script><title>PHP - Failed to open stream : No such file or directory | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="In PHP scripts, whether calling include(), require(), fopen(), or their derivatives such as include_once, require_once, or even, move_uploaded_file(), one often runs into an error or warning: 


  Failed to open stream : No such file or directory.


What is a good process to quickly find the root cause of the problem?
    "/><meta property="og:title" content="PHP - Failed to open stream : No such file or directory | Solution Checker"/><meta property="og:description" content="In PHP scripts, whether calling include(), require(), fopen(), or their derivatives such as include_once, require_once, or even, move_uploaded_file(), one often runs into an error or warning: 


  Failed to open stream : No such file or directory.


What is a good process to quickly find the root cause of the problem?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"PHP - Failed to open stream : No such file or directory","text":"In PHP scripts, whether calling include(), require(), fopen(), or their derivatives such as include_once, require_once, or even, move_uploaded_file(), one often runs into an error or warning: \n\n\n  Failed to open stream : No such file or directory.\n\n\nWhat is a good process to quickly find the root cause of the problem?\n    ","answerCount":10,"upVoteCount":500,"suggestedAnswer":[{"text":"There are many reasons why one might run into this error and thus a good checklist of what to check first helps considerably.\n\nLet&apos;s consider that we are troubleshooting the following line:\n\nrequire &quot;/path/to/file&quot;\n\n\n\n\nChecklist\n\n\n\n1. Check the file path for typos\n\n\neither check manually (by visually checking the path)\nor move whatever is called by require* or include* to its own variable, echo it, copy it, and try accessing it from a terminal:\n\n$path = &quot;/path/to/file&quot;;\n\necho &quot;Path : $path&quot;;\n\nrequire &quot;$path&quot;;\n\n\nThen, in a terminal:\n\ncat &lt;file path pasted&gt;\n\n\n\n\n\n2. Check that the file path is correct regarding relative vs absolute path considerations\n\n\nif it is starting by a forward slash &quot;/&quot; then it is not referring to the root of your website&apos;s folder (the document root), but to the root of your server.\n\n\nfor example, your website&apos;s directory might be /users/tony/htdocs\n\nif it is not starting by a forward slash then it is either relying on the include path (see below) or the path is relative. If it is relative, then PHP will calculate relatively to the path of the current working directory.\n\n\nthus, not relative to the path of your web site&apos;s root, or to the file where you are typing\nfor that reason, always use absolute file paths\n\n\n\nBest practices :\n\nIn order to make your script robust in case you move things around, while still generating an absolute path at runtime, you have 2 options :\n\n\nuse require __DIR__ . &quot;/relative/path/from/current/file&quot;. The __DIR__ magic constant returns the directory of the current file.\ndefine a SITE_ROOT constant yourself :\n\n\nat the root of your web site&apos;s directory, create a file, e.g. config.php\nin config.php, write\n\ndefine(&apos;SITE_ROOT&apos;, __DIR__);\n\nin every file where you want to reference the site root folder, include config.php, and then use the SITE_ROOT constant wherever you like :\n\nrequire_once __DIR__.&quot;/../config.php&quot;;\n...\nrequire_once SITE_ROOT.&quot;/other/file.php&quot;;\n\n\n\n\nThese 2 practices also make your application more portable because it does not rely on ini settings like the include path.\n\n\n\n3. Check your include path\n\nAnother way to include files, neither relatively nor purely absolutely, is to rely on the include path. This is often the case for libraries or frameworks such as the Zend framework.\n\nSuch an inclusion will look like this :\n\ninclude &quot;Zend/Mail/Protocol/Imap.php&quot;\n\n\nIn that case, you will want to make sure that the folder where &quot;Zend&quot; is, is part of the include path.\n\nYou can check the include path with :\n\necho get_include_path();\n\n\nYou can add a folder to it with :\n\nset_include_path(get_include_path().&quot;:&quot;.&quot;/path/to/new/folder&quot;);\n\n\n\n\n4. Check that your server has access to that file\n\nIt might be that all together, the user running the server process (Apache or PHP) simply doesn&apos;t have permission to read from or write to that file.\n\nTo check under what user the server is running you can use posix_getpwuid :\n\n$user = posix_getpwuid(posix_geteuid());\n\nvar_dump($user);\n\n\nTo find out the permissions on the file, type the following command in the terminal:\n\nls -l &lt;path/to/file&gt;\n\n\nand look at permission symbolic notation\n\n\n\n5. Check PHP settings\n\nIf none of the above worked, then the issue is probably that some PHP settings forbid it to access that file.\n\nThree settings could be relevant :\n\n\nopen_basedir\n\n\nIf this is set PHP won&apos;t be able to access any file outside of the specified directory (not even through a symbolic link).\nHowever, the default behavior is for it not to be set in which case there is no restriction\nThis can be checked by either calling phpinfo() or by using ini_get(&quot;open_basedir&quot;)\nYou can change the setting either by editing your php.ini file or your httpd.conf file\n\nsafe mode\n\n\nif this is turned on restrictions might apply. However, this has been removed in PHP 5.4. If you are still on a version that supports safe mode upgrade to a PHP version that is still being supported.\n\nallow_url_fopen and allow_url_include\n\n\nthis applies only to including or opening files through a network process such as http:// not when trying to include files on the local file system\nthis can be checked with ini_get(&quot;allow_url_include&quot;) and set with ini_set(&quot;allow_url_include&quot;, &quot;1&quot;)\n\n\n\n\n\nCorner cases\n\nIf none of the above enabled to diagnose the problem, here are some special situations that could happen :\n\n\n\n1. The inclusion of library relying on the include path\n\nIt can happen that you include a library, for example, the Zend framework, using a relative or absolute path. For example :\n\nrequire &quot;/usr/share/php/libzend-framework-php/Zend/Mail/Protocol/Imap.php&quot;\n\n\nBut then you still get the same kind of error.\n\nThis could happen because the file that you have (successfully) included, has itself an include statement for another file, and that second include statement assumes that you have added the path of that library to the include path.\n\nFor example, the Zend framework file mentioned before could have the following include :\n\ninclude &quot;Zend/Mail/Protocol/Exception.php&quot; \n\n\nwhich is neither an inclusion by relative path, nor by absolute path. It is assuming that the Zend framework directory has been added to the include path.\n\nIn such a case, the only practical solution is to add the directory to your include path.\n\n\n\n2. SELinux\n\nIf you are running Security-Enhanced Linux, then it might be the reason for the problem, by denying access to the file from the server.\n\nTo check whether SELinux is enabled on your system, run the sestatus command in a terminal. If the command does not exist, then SELinux is not on your system. If it does exist, then it should tell you whether it is enforced or not.\n\nTo check whether SELinux policies are the reason for the problem, you can try turning it off temporarily. However be CAREFUL, since this will disable protection entirely. Do not do this on your production server.\n\nsetenforce 0\n\n\nIf you no longer have the problem with SELinux turned off, then this is the root cause.\n\nTo solve it, you will have to configure SELinux accordingly.\n\nThe following context types will be necessary :\n\n\nhttpd_sys_content_t for files that you want your server to be able to read\nhttpd_sys_rw_content_t for files on which you want read and write access\nhttpd_log_t for log files\nhttpd_cache_t for the cache directory\n\n\nFor example, to assign the httpd_sys_content_t context type to your website root directory, run :\n\nsemanage fcontext -a -t httpd_sys_content_t &quot;/path/to/root(/.*)?&quot;\nrestorecon -Rv /path/to/root\n\n\nIf your file is in a home directory, you will also need to turn on the httpd_enable_homedirs boolean :\n\nsetsebool -P httpd_enable_homedirs 1\n\n\nIn any case, there could be a variety of reasons why SELinux would deny access to a file, depending on your policies. So you will need to enquire into that. Here is a tutorial specifically on configuring SELinux for a web server.\n\n\n\n3. Symfony\n\nIf you are using Symfony, and experiencing this error when uploading to a server, then it can be that the app&apos;s cache hasn&apos;t been reset, either because app/cache has been uploaded, or that cache hasn&apos;t been cleared.\n\nYou can test and fix this by running the following console command:\n\ncache:clear\n\n\n\n\n4. Non ACSII characters inside Zip file\n\nApparently, this error can happen also upon calling zip-&gt;close() when some files inside the zip have non-ASCII characters in their filename, such as &quot;é&quot;.\n\nA potential solution is to wrap the file name in utf8_decode() before creating the target file.\n\nCredits to Fran Cano for identifying and suggesting a solution to this issue\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"To add to the (really good) existing answer\nShared Hosting Software\nopen_basedir is one that can stump you because it can be specified in a web server configuration. While this is easily remedied if you run your own dedicated server, there are some shared hosting software packages out there (like Plesk, cPanel, etc) that will configure a configuration directive on a per-domain basis. Because the software builds the configuration file (i.e. httpd.conf) you cannot change that file directly because the hosting software will just overwrite it when it restarts.\nWith Plesk, they provide a place to override the provided httpd.conf called vhost.conf. Only the server admin can write this file. The configuration for Apache looks something like this\n&lt;Directory /var/www/vhosts/domain.com&gt;\n    &lt;IfModule mod_php5.c&gt;\n        php_admin_flag engine on\n        php_admin_flag safe_mode off\n        php_admin_value open_basedir &quot;/var/www/vhosts/domain.com:/tmp:/usr/share/pear:/local/PEAR&quot;\n    &lt;/IfModule&gt;\n&lt;/Directory&gt;\n\nHave your server admin consult the manual for the hosting and web server software they use.\nFile Permissions\nIt&apos;s important to note that executing a file through your web server is very different from a command line or cron job execution. The big difference is that your web server has its own user and permissions. For security reasons that user is pretty restricted. Apache, for instance, is often apache, www-data or httpd (depending on your server). A cron job or CLI execution has whatever permissions that the user running it has (i.e. running a PHP script as root will execute with permissions of root).\nA lot of times people will solve a permissions problem by doing the following (Linux example)\nchmod 777 /path/to/file\n\nThis is not a smart idea, because the file or directory is now world writable. If you own the server and are the only user then this isn&apos;t such a big deal, but if you&apos;re on a shared hosting environment you&apos;ve just given everyone on your server access.\nWhat you need to do is determine the user(s) that need access and give only those them access. Once you know which users need access you&apos;ll want to make sure that\n\nThat user owns the file and possibly the parent directory (especially the parent directory if you want to write files). In most shared hosting environments this won&apos;t be an issue, because your user should own all the files underneath your root. A Linux example is shown below\n chown apache:apache /path/to/file\n\n\nThe user, and only that user, has access. In Linux, a good practice would be chmod 600 (only owner can read and write) or chmod 644 (owner can write but everyone can read)\n\n\nYou can read a more extended discussion of Linux/Unix permissions and users here\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"\nLook at the exact error\n\n\nMy code worked fine on all machines but only on this one started giving problem (which used to work find I guess). Used echo &quot;document_root&quot; path to debug and also looked closely at the error, found this\n\n\n  Warning:\n  include(D:/MyProjects/testproject//functions/connections.php):\n  failed to open stream:\n\n\nYou can easily see where the problems are. The problems are // before functions\n\n$document_root = $_SERVER[&apos;DOCUMENT_ROOT&apos;];\necho &quot;root: $document_root&quot;;\ninclude($document_root.&apos;/functions/connections.php&apos;);\n\n\nSo simply remove the lading / from include and it should work fine. What is interesting is this behaviors is different on different versions. I run the same code on Laptop, Macbook Pro and this PC, all worked fine untill. Hope this helps someone.\n\n\nCopy past the file location in the browser to make sure file exists. Sometimes files get deleted unexpectedly (happened with me) and it was also the issue in my case.\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Samba Shares\n\nIf you have a Linux test server and you work from a Windows Client, the Samba share interferes with the chmod command. So, even if you use:\n\nchmod -R 777 myfolder\n\n\non the Linux side it is fully possible that the Unix Group\\www-data still doesn&apos;t have write access. One working solution if your share is set up that Windows admins are mapped to root: From Windows, open the Permissions, disable Inheritance for your folder with copy, and then grant full access for www-data. \n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"Add script with query parameters\n\nThat was my case. It actually links to question #4485874, but I&apos;m going to explain it here shortly.\nWhen you try to require path/to/script.php?parameter=value, PHP looks for file named script.php?parameter=value, because UNIX allows you to have paths like this.\nIf you are really need to pass some data to included script, just declare it as $variable=... or $GLOBALS[]=... or other way you like.\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"The following PHP settings in php.ini if set to non-existent directory can also raise\n\nPHP Warning: Unknown: failed to open stream: Permission denied in\nUnknown on line 0\n\nsys_temp_dir\nupload_tmp_dir\nsession.save_path\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"PHP - Failed to open stream : No such file or directory in mac\nFor example I will upload a picture. But I am getting this error. First thing i will do right click on the image and get info.\n$thePathOfMyPicture = &quot;/Users/misstugba/Desktop/&quot;;\nuse with function\nif(move_uploaded_file($_FILES[&quot;file&quot;][&quot;tmp_name&quot;],$thePathOfMyPicture.$_FILES[&quot;file&quot;][&quot;name&quot;])){\necho &quot;image uploaded successfully&quot;;\n\n}\n\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"For me I got this error because I was trying to read a file which required HTTP auth, with a username and password. Hope that helps others. Might be another corner case.\nEdit\nYou can check if this type of authentication is present by inspecting the headers:\n$file_headers = get_headers($url);\nif (!$file_headers) echo &apos;File headers missing&apos;;\nelse if (strpos($file_headers[0], &apos;401 Unauthorized&apos;) &gt; -1) echo &apos;401 Unauthorized&apos;;\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"In PHP, start Apache then write you DB name and password if exist in your environment(.env).\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"Aside from the other excellent answers, one thing I overlooked on Windows while writing a simple script: This error will be shown when trying to open a file with characters that Windows does not support in file names.\nFor example:\n$file = fopen(date(&apos;Y-m-d_H:i:s&apos;), &apos;w+&apos;);\n\nWill give:\n\nfopen(2022-06-01_22:53:03): Failed to open stream: No such file or directory in ...\n\nWindows does not like : in file names, as well as a number of other characters.\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-43d1c35cd6eb9b8f.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-50e201fdaa1e0fd1.js" defer=""></script><script src="/_next/static/00bsHgHZki2FteshOatnd/_buildManifest.js" defer=""></script><script src="/_next/static/00bsHgHZki2FteshOatnd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/php-failed-to-open-stream-:-no-such-file-or-directory-1657387872896#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/php-failed-to-open-stream-:-no-such-file-or-directory-1657387872896"><h1>PHP - Failed to open stream : No such file or directory</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/include-path">include-path</a></div></div><div class="question-content mt-5">
                
<p>In PHP scripts, whether calling <code>include()</code>, <code>require()</code>, <code>fopen()</code>, or their derivatives such as <code>include_once</code>, <code>require_once</code>, or even, <code>move_uploaded_file()</code>, one often runs into an error or warning: </p>

<blockquote>
  <p>Failed to open stream : No such file or directory.</p>
</blockquote>

<p>What is a good process to quickly find the root cause of the problem?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/include-path">include-path</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are many reasons why one might run into this error and thus a good checklist of what to check first helps considerably.</p>

<p>Let's consider that we are troubleshooting the following line:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">require</span> <span class="hljs-string">"/path/to/file"</span>
</code></pre>

<p><br></p>

<h1>Checklist</h1>

<p><br></p>

<h2>1. Check the file path for typos</h2>

<ul>
<li>either check manually (by visually checking the path)</li>
<li><p>or move whatever is called by <code>require*</code> or <code>include*</code> to its own variable, echo it, copy it, and try accessing it from a terminal:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$path</span> = <span class="hljs-string">"/path/to/file"</span>;

<span class="hljs-keyword">echo</span> <span class="hljs-string">"Path : <span class="hljs-subst">$path</span>"</span>;

<span class="hljs-keyword">require</span> <span class="hljs-string">"<span class="hljs-subst">$path</span>"</span>;
</code></pre>

<p>Then, in a terminal:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php">cat &lt;file path pasted&gt;
</code></pre></li>
</ul>

<p><br></p>

<h2>2. Check that the file path is correct regarding relative vs absolute path considerations</h2>

<ul>
<li>if it is starting by a forward slash "/" then it is not referring to the root of your website's folder (the document root), but to the root of your server.

<ul>
<li>for example, your website's directory might be <code>/users/tony/htdocs</code></li>
</ul></li>
<li>if it is not starting by a forward slash then it is either relying on the include path (see below) or the path is relative. If it is relative, then PHP will calculate relatively to the path of the <a href="https://secure.php.net/manual/en/function.getcwd.php" rel="noreferrer">current working directory</a>.

<ul>
<li>thus, not relative to the path of your web site's root, or to the file where you are typing</li>
<li>for that reason, always use absolute file paths</li>
</ul></li>
</ul>

<p>Best practices :</p>

<p>In order to make your script robust in case you move things around, while still generating an absolute path at runtime, you have 2 options :</p>

<ol>
<li>use <code>require __DIR__ . "/relative/path/from/current/file"</code>. The <a href="https://secure.php.net/manual/en/language.constants.predefined.php" rel="noreferrer"><code>__DIR__</code> magic constant</a> returns the directory of the current file.</li>
<li><p>define a <code>SITE_ROOT</code> constant yourself :</p>

<ul>
<li>at the root of your web site's directory, create a file, e.g. <code>config.php</code></li>
<li><p>in <code>config.php</code>, write</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-title function_ invoke__">define</span>(<span class="hljs-string">'SITE_ROOT'</span>, <span class="hljs-keyword">__DIR__</span>);
</code></pre></li>
<li><p>in every file where you want to reference the site root folder, include <code>config.php</code>, and then use the <code>SITE_ROOT</code> constant wherever you like :</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">require_once</span> <span class="hljs-keyword">__DIR__</span>.<span class="hljs-string">"/../config.php"</span>;
...
<span class="hljs-keyword">require_once</span> SITE_ROOT.<span class="hljs-string">"/other/file.php"</span>;
</code></pre></li>
</ul></li>
</ol>

<p>These 2 practices also make your application more portable because it does not rely on ini settings like the include path.</p>

<p><br></p>

<h2>3. Check your include path</h2>

<p>Another way to include files, neither relatively nor purely absolutely, is to rely on the <a href="https://secure.php.net/manual/en/ini.core.php#ini.include-path" rel="noreferrer">include path</a>. This is often the case for libraries or frameworks such as the Zend framework.</p>

<p>Such an inclusion will look like this :</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">include</span> <span class="hljs-string">"Zend/Mail/Protocol/Imap.php"</span>
</code></pre>

<p>In that case, you will want to make sure that the folder where "Zend" is, is part of the include path.</p>

<p>You can check the include path with :</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">get_include_path</span>();
</code></pre>

<p>You can add a folder to it with :</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-title function_ invoke__">set_include_path</span>(<span class="hljs-title function_ invoke__">get_include_path</span>().<span class="hljs-string">":"</span>.<span class="hljs-string">"/path/to/new/folder"</span>);
</code></pre>

<p><br></p>

<h2>4. Check that your server has access to that file</h2>

<p>It might be that all together, the user running the server process (Apache or PHP) simply doesn't have permission to read from or write to that file.</p>

<p>To check under what user the server is running you can use <a href="https://secure.php.net/manual/en/function.posix-getpwuid.php" rel="noreferrer">posix_getpwuid</a> :</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$user</span> = <span class="hljs-title function_ invoke__">posix_getpwuid</span>(<span class="hljs-title function_ invoke__">posix_geteuid</span>());

<span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$user</span>);
</code></pre>

<p>To find out the permissions on the file, type the following command in the terminal:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php">ls -l &lt;path/to/file&gt;
</code></pre>

<p>and look at <a href="https://en.wikipedia.org/wiki/File_system_permissions#Symbolic_notation" rel="noreferrer">permission symbolic notation</a></p>

<p><br></p>

<h2>5. Check PHP settings</h2>

<p>If none of the above worked, then the issue is probably that some PHP settings forbid it to access that file.</p>

<p>Three settings could be relevant :</p>

<ol>
<li><a href="https://secure.php.net/manual/en/ini.core.php#ini.open-basedir" rel="noreferrer">open_basedir</a>

<ul>
<li>If this is set PHP won't be able to access any file outside of the specified directory (not even through a symbolic link).</li>
<li>However, the default behavior is for it not to be set in which case there is no restriction</li>
<li>This can be checked by either calling <a href="https://secure.php.net/manual/en/function.phpinfo.php" rel="noreferrer"><code>phpinfo()</code></a> or by using <code>ini_get("open_basedir")</code></li>
<li>You can change the setting either by editing your php.ini file or your httpd.conf file</li>
</ul></li>
<li><a href="https://secure.php.net/manual/en/features.safe-mode.php" rel="noreferrer">safe mode</a>

<ul>
<li>if this is turned on restrictions might apply. However, this has been removed in PHP 5.4. If you are still on a version that supports safe mode upgrade to a PHP version that is <a href="http://php.net/eol.php" rel="noreferrer">still being supported</a>.</li>
</ul></li>
<li><a href="https://secure.php.net/manual/en/filesystem.configuration.php" rel="noreferrer">allow_url_fopen and allow_url_include</a>

<ul>
<li>this applies only to including or opening files through a network process such as http:// not when trying to include files on the local file system</li>
<li>this can be checked with <code>ini_get("allow_url_include")</code> and set with <code>ini_set("allow_url_include", "1")</code></li>
</ul></li>
</ol>

<p><br></p>

<h1>Corner cases</h1>

<p>If none of the above enabled to diagnose the problem, here are some special situations that could happen :</p>

<p><br></p>

<h2>1. The inclusion of library relying on the include path</h2>

<p>It can happen that you include a library, for example, the Zend framework, using a relative or absolute path. For example :</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">require</span> <span class="hljs-string">"/usr/share/php/libzend-framework-php/Zend/Mail/Protocol/Imap.php"</span>
</code></pre>

<p>But then you still get the same kind of error.</p>

<p>This could happen because the file that you have (successfully) included, has itself an include statement for another file, and that second include statement assumes that you have added the path of that library to the include path.</p>

<p>For example, the Zend framework file mentioned before could have the following include :</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">include</span> <span class="hljs-string">"Zend/Mail/Protocol/Exception.php"</span> 
</code></pre>

<p>which is neither an inclusion by relative path, nor by absolute path. It is assuming that the Zend framework directory has been added to the include path.</p>

<p>In such a case, the only practical solution is to add the directory to your include path.</p>

<p><br></p>

<h2>2. SELinux</h2>

<p>If you are running Security-Enhanced Linux, then it might be the reason for the problem, by denying access to the file from the server.</p>

<p><strong>To check whether SELinux is enabled</strong> on your system, run the <code>sestatus</code> command in a terminal. If the command does not exist, then SELinux is not on your system. If it does exist, then it should tell you whether it is enforced or not.</p>

<p><strong>To check whether SELinux policies are the reason</strong> for the problem, you can try turning it off temporarily. However be CAREFUL, since this will disable protection entirely. Do not do this on your production server.</p>

<pre class="lang-php s-code-block"><code class="hljs language-php">setenforce <span class="hljs-number">0</span>
</code></pre>

<p>If you no longer have the problem with SELinux turned off, then this is the root cause.</p>

<p><strong>To solve it</strong>, you will have to configure SELinux accordingly.</p>

<p>The following context types will be necessary :</p>

<ul>
<li><code>httpd_sys_content_t</code> for files that you want your server to be able to read</li>
<li><code>httpd_sys_rw_content_t</code> for files on which you want read and write access</li>
<li><code>httpd_log_t</code> for log files</li>
<li><code>httpd_cache_t</code> for the cache directory</li>
</ul>

<p>For example, to assign the <code>httpd_sys_content_t</code> context type to your website root directory, run :</p>

<pre class="lang-php s-code-block"><code class="hljs language-php">semanage fcontext -a -t httpd_sys_content_t <span class="hljs-string">"/path/to/root(/.*)?"</span>
restorecon -Rv /path/to/root
</code></pre>

<p>If your file is in a home directory, you will also need to turn on the <code>httpd_enable_homedirs</code> boolean :</p>

<pre class="lang-php s-code-block"><code class="hljs language-php">setsebool -P httpd_enable_homedirs <span class="hljs-number">1</span>
</code></pre>

<p>In any case, there could be a variety of reasons why SELinux would deny access to a file, depending on your policies. So you will need to enquire into that. <a href="http://www.serverlab.ca/tutorials/linux/web-servers-linux/configuring-selinux-policies-for-apache-web-servers/" rel="noreferrer">Here</a> is a tutorial specifically on configuring SELinux for a web server.</p>

<p><br></p>

<h2>3. Symfony</h2>

<p>If you are using Symfony, and experiencing this error when uploading to a server, then it can be that the app's cache hasn't been reset, either because <code>app/cache</code> has been uploaded, or that cache hasn't been cleared.</p>

<p>You can test and fix this by running the following console command:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php">cache:clear
</code></pre>

<p><br></p>

<h2>4. Non ACSII characters inside Zip file</h2>

<p>Apparently, this error can happen also upon calling <code>zip-&gt;close()</code> when some files inside the zip have non-ASCII characters in their filename, such as "é".</p>

<p>A potential solution is to wrap the file name in <code>utf8_decode()</code> before creating the target file.</p>

<p><em>Credits to <a href="https://stackoverflow.com/users/4217158/fran-cano">Fran Cano</a> for identifying and suggesting a solution to this issue</em></p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/include-path">include-path</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>To add to the (really good) existing answer</p>
<h1>Shared Hosting Software</h1>
<p><code>open_basedir</code> is one that can stump you because it can be specified in a web server configuration. While this is easily remedied if you run your own dedicated server, there are some shared hosting software packages out there (like Plesk, cPanel, etc) that will configure a configuration directive on a per-domain basis. Because the software builds the configuration file (i.e. <code>httpd.conf</code>) you cannot change that file directly because the hosting software will just overwrite it when it restarts.</p>
<p>With Plesk, they provide a place to override the provided <code>httpd.conf</code> called <code>vhost.conf</code>. Only the server admin can write this file. The configuration for Apache looks something like this</p>
<pre class="lang-php s-code-block"><code class="hljs language-php">&lt;<span class="hljs-built_in">Directory</span> /<span class="hljs-keyword">var</span>/www/vhosts/domain.com&gt;
    &lt;IfModule mod_php5.c&gt;
        php_admin_flag engine on
        php_admin_flag safe_mode off
        php_admin_value open_basedir <span class="hljs-string">"/var/www/vhosts/domain.com:/tmp:/usr/share/pear:/local/PEAR"</span>
    &lt;/IfModule&gt;
&lt;/<span class="hljs-built_in">Directory</span>&gt;
</code></pre>
<p>Have your server admin consult the manual for the hosting and web server software they use.</p>
<h1>File Permissions</h1>
<p>It's important to note that executing a file through your web server is very different from a command line or cron job execution. The big difference is that your web server has its own user and permissions. For security reasons that user is pretty restricted. Apache, for instance, is often <code>apache</code>, <code>www-data</code> or <code>httpd</code> (depending on your server). A cron job or CLI execution has whatever permissions that the user running it has (i.e. running a PHP script as root will execute with permissions of root).</p>
<p>A lot of times people will solve a permissions problem by doing the following (Linux example)</p>
<pre class="lang-php s-code-block"><code class="hljs language-php">chmod <span class="hljs-number">777</span> /path/to/file
</code></pre>
<p>This is not a smart idea, because the file or directory is now world writable. If you own the server and are the only user then this isn't such a big deal, but if you're on a shared hosting environment you've just given everyone on your server access.</p>
<p>What you need to do is determine the user(s) that need access and give only those them access. Once you know which users need access you'll want to make sure that</p>
<ol>
<li><p>That user owns the file <strong>and possibly the parent directory</strong> (especially the parent directory if you want to write files). In most shared hosting environments this won't be an issue, because your user should own all the files underneath your root. A Linux example is shown below</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"> chown apache:apache /path/to/file
</code></pre>
</li>
<li><p>The user, and only that user, has access. In Linux, a good practice would be <code>chmod 600</code> (only owner can read and write) or <code>chmod 644</code> (owner can write but everyone can read)</p>
</li>
</ol>
<p>You can <a href="https://unix.stackexchange.com/questions/35711/giving-php-permission-to-write-to-files-and-folders">read a more extended discussion of Linux/Unix permissions and users here</a></p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/include-path">include-path</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<ol>
<li>Look at the <strong>exact</strong> error</li>
</ol>

<p>My code worked fine on all machines but only on this one started giving problem (which used to work find I guess). Used echo "document_root" path to debug and also looked closely at the error, found this</p>

<blockquote>
  <p>Warning:
  include(<strong>D:/MyProjects/testproject//functions/connections.php</strong>):
  failed to open stream:</p>
</blockquote>

<p>You can easily see where the problems are. The problems are // before functions</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$document_root</span> = <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'DOCUMENT_ROOT'</span>];
<span class="hljs-keyword">echo</span> <span class="hljs-string">"root: <span class="hljs-subst">$document_root</span>"</span>;
<span class="hljs-keyword">include</span>(<span class="hljs-variable">$document_root</span>.<span class="hljs-string">'/functions/connections.php'</span>);
</code></pre>

<p>So simply remove the lading / from include and it should work fine. What is interesting is this behaviors is different on different versions. I run the same code on Laptop, Macbook Pro and this PC, all worked fine untill. Hope this helps someone.</p>

<ol start="2">
<li>Copy past the file location in the browser to make sure file exists. Sometimes files get deleted unexpectedly (happened with me) and it was also the issue in my case.</li>
</ol>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/include-path">include-path</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Samba Shares</strong></p>

<p>If you have a Linux test server and you work from a Windows Client, the Samba share interferes with the <em>chmod</em> command. So, even if you use:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php">chmod -R <span class="hljs-number">777</span> myfolder
</code></pre>

<p>on the Linux side it is fully possible that the Unix Group\www-data still doesn't have write access. One working solution if your share is set up that Windows admins are mapped to root: From Windows, open the Permissions, disable Inheritance for your folder with copy, and then grant full access for www-data. </p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/include-path">include-path</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Add script with query parameters</h1>

<p>That was my case. It actually links to <a href="https://stackoverflow.com/a/4485874/10198757">question #4485874</a>, but I'm going to explain it here shortly.<br>
When you try to require <code>path/to/script.php?parameter=value</code>, PHP looks for file named <code>script.php?parameter=value</code>, because UNIX allows you to have paths like this.<br>
If you are really need to pass some data to included script, just declare it as <code>$variable=...</code> or <code>$GLOBALS[]=...</code> or other way you like.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/include-path">include-path</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The following PHP settings in <code>php.ini</code> if set to non-existent directory can also raise</p>
<blockquote>
<p>PHP Warning: Unknown: failed to open stream: Permission denied in
Unknown on line 0</p>
</blockquote>
<pre class="lang-php s-code-block"><code class="hljs language-php">sys_temp_dir
upload_tmp_dir
session.save_path
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/include-path">include-path</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>PHP - Failed to open stream : No such file or directory in mac</strong></p>
<p>For example I will upload a picture. But I am getting this error. First thing i will do right click on the image and get info.</p>
<p><code>$thePathOfMyPicture = "/Users/misstugba/Desktop/";</code>
use with function</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">move_uploaded_file</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">"file"</span>][<span class="hljs-string">"tmp_name"</span>],<span class="hljs-variable">$thePathOfMyPicture</span>.<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">"file"</span>][<span class="hljs-string">"name"</span>])){
<span class="hljs-keyword">echo</span> <span class="hljs-string">"image uploaded successfully"</span>;
</code></pre>
<p>}
<a href="https://i.stack.imgur.com/zCOex.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/zCOex.png" alt="enter image description here"></a></p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/include-path">include-path</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For me I got this error because I was trying to read a file which required HTTP auth, with a username and password. Hope that helps others. Might be another corner case.</p>
<h2>Edit</h2>
<p>You can check if this type of authentication is present by inspecting the headers:</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$file_headers</span> = <span class="hljs-title function_ invoke__">get_headers</span>(<span class="hljs-variable">$url</span>);
<span class="hljs-keyword">if</span> (!<span class="hljs-variable">$file_headers</span>) <span class="hljs-keyword">echo</span> <span class="hljs-string">'File headers missing'</span>;
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">strpos</span>(<span class="hljs-variable">$file_headers</span>[<span class="hljs-number">0</span>], <span class="hljs-string">'401 Unauthorized'</span>) &gt; -<span class="hljs-number">1</span>) <span class="hljs-keyword">echo</span> <span class="hljs-string">'401 Unauthorized'</span>;
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 9</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/include-path">include-path</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In PHP, start Apache then write you DB name and password if exist in your environment(.env).</p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 10</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/require">require</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/fopen">fopen</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/include-path">include-path</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Aside from the other excellent answers, one thing I overlooked on Windows while writing a simple script: This error will be shown when trying to open a file with characters that Windows does not support in file names.</p>
<p>For example:</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$file</span> = <span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-title function_ invoke__">date</span>(<span class="hljs-string">'Y-m-d_H:i:s'</span>), <span class="hljs-string">'w+'</span>);
</code></pre>
<p>Will give:</p>
<blockquote>
<p>fopen(2022-06-01_22:53:03): Failed to open stream: No such file or directory in ...</p>
</blockquote>
<p>Windows does not like <code>:</code> in file names, as well as a number of other characters.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/correctly-allocating-multi-dimensional-arrays-1657387733756">Correctly allocating multi-dimensional arrays</a><a href="/questions/make-a-div-fill-the-height-of-the-remaining-screen-space-1657387482387">Make a div fill the height of the remaining screen space</a><a href="/questions/how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934">How to use java.net.URLConnection to fire and handle HTTP requests</a><a href="/questions/pandas-merging-101-1657384447080">Pandas Merging 101</a><a href="/questions/when-should-static_cast-dynamic_cast-const_cast-and-reinterpret_cast-be-used-1657388406205">When should static_cast, dynamic_cast, const_cast, and reinterpret_cast be used?</a><a href="/questions/sort-(order)-data-frame-rows-by-multiple-columns-1657388355671">Sort (order) data frame rows by multiple columns</a><a href="/questions/how-to-use-variables-in-sql-statement-in-python-1657388479077">How to use variables in SQL statement in Python?</a><a href="/questions/why-does-tkinter-image-not-show-up-if-created-in-a-function-1657387388233">Why does Tkinter image not show up if created in a function?</a><a href="/questions/how-to-avoid-having-class-data-shared-among-instances-1657387687732">How to avoid having class data shared among instances?</a><a href="/questions/identifying-and-solving-javax.el.propertynotfoundexception:-target-unreachable-1657388164753">Identifying and solving javax.el.PropertyNotFoundException: Target Unreachable</a><a href="/questions/why-does-this-pdo-statement-silently-fail-1657384892133">Why does this PDO statement silently fail?</a><a href="/questions/how-to-find-the-&#x27;sizeof&#x27;-(a-pointer-pointing-to-an-array)-1657387354284">How to find the &#x27;sizeof&#x27; (a pointer pointing to an array)?</a><a href="/questions/is-there-a-unique-android-device-id-1657388089268">Is there a unique Android device ID?</a><a href="/questions/how-can-i-make-an-ajax-call-without-jquery-1657388448955">How can I make an AJAX call without jQuery?</a><a href="/questions/why-does-spring-mvc-respond-with-a-404-and-report-%22no-mapping-found-for-http-request-with-uri-...-in-dispatcherservlet%22-1657387995250">Why does Spring MVC respond with a 404 and report &quot;No mapping found for HTTP request with URI [...] in DispatcherServlet&quot;?</a><a href="/questions/what-are-the-rules-for-javascript&#x27;s-automatic-semicolon-insertion-(asi)-1657387472789">What are the rules for JavaScript&#x27;s automatic semicolon insertion (ASI)?</a><a href="/questions/reference-what-does-this-error-mean-in-php-1657384301782">Reference - What does this error mean in PHP?</a><a href="/questions/how-do-you-use-a-variable-in-a-regular-expression-1657387939007">How do you use a variable in a regular expression?</a><a href="/questions/how-can-i-deserialize-json-with-c-1657388102941">How can I deserialize JSON with C#?</a><a href="/questions/how-can-i-vertically-center-a-div-element-for-all-browsers-using-css-1657385488425">How can I vertically center a div element for all browsers using CSS?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;There are many reasons why one might run into this error and thus a good checklist of what to check first helps considerably.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Let\u0026apos;s consider that we are troubleshooting the following line:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;require\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/path/to/file\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h1\u0026gt;Checklist\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;1. Check the file path for typos\u0026lt;/h2\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;either check manually (by visually checking the path)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;or move whatever is called by \u0026lt;code\u0026gt;require*\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;include*\u0026lt;/code\u0026gt; to its own variable, echo it, copy it, and try accessing it from a terminal:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$path\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/path/to/file\u0026quot;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Path : \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$path\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;require\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$path\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then, in a terminal:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;cat \u0026amp;lt;file path pasted\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;2. Check that the file path is correct regarding relative vs absolute path considerations\u0026lt;/h2\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;if it is starting by a forward slash \u0026quot;/\u0026quot; then it is not referring to the root of your website\u0026apos;s folder (the document root), but to the root of your server.\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;for example, your website\u0026apos;s directory might be \u0026lt;code\u0026gt;/users/tony/htdocs\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;if it is not starting by a forward slash then it is either relying on the include path (see below) or the path is relative. If it is relative, then PHP will calculate relatively to the path of the \u0026lt;a href=\u0026quot;https://secure.php.net/manual/en/function.getcwd.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;current working directory\u0026lt;/a\u0026gt;.\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;thus, not relative to the path of your web site\u0026apos;s root, or to the file where you are typing\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;for that reason, always use absolute file paths\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Best practices :\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In order to make your script robust in case you move things around, while still generating an absolute path at runtime, you have 2 options :\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;use \u0026lt;code\u0026gt;require __DIR__ . \u0026quot;/relative/path/from/current/file\u0026quot;\u0026lt;/code\u0026gt;. The \u0026lt;a href=\u0026quot;https://secure.php.net/manual/en/language.constants.predefined.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;__DIR__\u0026lt;/code\u0026gt; magic constant\u0026lt;/a\u0026gt; returns the directory of the current file.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;define a \u0026lt;code\u0026gt;SITE_ROOT\u0026lt;/code\u0026gt; constant yourself :\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;at the root of your web site\u0026apos;s directory, create a file, e.g. \u0026lt;code\u0026gt;config.php\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;in \u0026lt;code\u0026gt;config.php\u0026lt;/code\u0026gt;, write\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SITE_ROOT\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;__DIR__\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;in every file where you want to reference the site root folder, include \u0026lt;code\u0026gt;config.php\u0026lt;/code\u0026gt;, and then use the \u0026lt;code\u0026gt;SITE_ROOT\u0026lt;/code\u0026gt; constant wherever you like :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;require_once\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;__DIR__\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/../config.php\u0026quot;\u0026lt;/span\u0026gt;;\n...\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;require_once\u0026lt;/span\u0026gt; SITE_ROOT.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/other/file.php\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;These 2 practices also make your application more portable because it does not rely on ini settings like the include path.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;3. Check your include path\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;Another way to include files, neither relatively nor purely absolutely, is to rely on the \u0026lt;a href=\u0026quot;https://secure.php.net/manual/en/ini.core.php#ini.include-path\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;include path\u0026lt;/a\u0026gt;. This is often the case for libraries or frameworks such as the Zend framework.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Such an inclusion will look like this :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Zend/Mail/Protocol/Imap.php\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;In that case, you will want to make sure that the folder where \u0026quot;Zend\u0026quot; is, is part of the include path.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can check the include path with :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;get_include_path\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can add a folder to it with :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;set_include_path\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;get_include_path\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;:\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/path/to/new/folder\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;4. Check that your server has access to that file\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;It might be that all together, the user running the server process (Apache or PHP) simply doesn\u0026apos;t have permission to read from or write to that file.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To check under what user the server is running you can use \u0026lt;a href=\u0026quot;https://secure.php.net/manual/en/function.posix-getpwuid.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;posix_getpwuid\u0026lt;/a\u0026gt; :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$user\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;posix_getpwuid\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;posix_geteuid\u0026lt;/span\u0026gt;());\n\n\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;var_dump\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$user\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;To find out the permissions on the file, type the following command in the terminal:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;ls -l \u0026amp;lt;path/to/file\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and look at \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/File_system_permissions#Symbolic_notation\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;permission symbolic notation\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;5. Check PHP settings\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;If none of the above worked, then the issue is probably that some PHP settings forbid it to access that file.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Three settings could be relevant :\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://secure.php.net/manual/en/ini.core.php#ini.open-basedir\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;open_basedir\u0026lt;/a\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;If this is set PHP won\u0026apos;t be able to access any file outside of the specified directory (not even through a symbolic link).\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;However, the default behavior is for it not to be set in which case there is no restriction\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;This can be checked by either calling \u0026lt;a href=\u0026quot;https://secure.php.net/manual/en/function.phpinfo.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;phpinfo()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; or by using \u0026lt;code\u0026gt;ini_get(\u0026quot;open_basedir\u0026quot;)\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;You can change the setting either by editing your php.ini file or your httpd.conf file\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://secure.php.net/manual/en/features.safe-mode.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;safe mode\u0026lt;/a\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;if this is turned on restrictions might apply. However, this has been removed in PHP 5.4. If you are still on a version that supports safe mode upgrade to a PHP version that is \u0026lt;a href=\u0026quot;http://php.net/eol.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;still being supported\u0026lt;/a\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://secure.php.net/manual/en/filesystem.configuration.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;allow_url_fopen and allow_url_include\u0026lt;/a\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;this applies only to including or opening files through a network process such as http:// not when trying to include files on the local file system\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;this can be checked with \u0026lt;code\u0026gt;ini_get(\u0026quot;allow_url_include\u0026quot;)\u0026lt;/code\u0026gt; and set with \u0026lt;code\u0026gt;ini_set(\u0026quot;allow_url_include\u0026quot;, \u0026quot;1\u0026quot;)\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h1\u0026gt;Corner cases\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;If none of the above enabled to diagnose the problem, here are some special situations that could happen :\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;1. The inclusion of library relying on the include path\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;It can happen that you include a library, for example, the Zend framework, using a relative or absolute path. For example :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;require\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/usr/share/php/libzend-framework-php/Zend/Mail/Protocol/Imap.php\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;But then you still get the same kind of error.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This could happen because the file that you have (successfully) included, has itself an include statement for another file, and that second include statement assumes that you have added the path of that library to the include path.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example, the Zend framework file mentioned before could have the following include :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Zend/Mail/Protocol/Exception.php\u0026quot;\u0026lt;/span\u0026gt; \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;which is neither an inclusion by relative path, nor by absolute path. It is assuming that the Zend framework directory has been added to the include path.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In such a case, the only practical solution is to add the directory to your include path.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;2. SELinux\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;If you are running Security-Enhanced Linux, then it might be the reason for the problem, by denying access to the file from the server.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;To check whether SELinux is enabled\u0026lt;/strong\u0026gt; on your system, run the \u0026lt;code\u0026gt;sestatus\u0026lt;/code\u0026gt; command in a terminal. If the command does not exist, then SELinux is not on your system. If it does exist, then it should tell you whether it is enforced or not.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;To check whether SELinux policies are the reason\u0026lt;/strong\u0026gt; for the problem, you can try turning it off temporarily. However be CAREFUL, since this will disable protection entirely. Do not do this on your production server.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;setenforce \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If you no longer have the problem with SELinux turned off, then this is the root cause.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;To solve it\u0026lt;/strong\u0026gt;, you will have to configure SELinux accordingly.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The following context types will be necessary :\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;httpd_sys_content_t\u0026lt;/code\u0026gt; for files that you want your server to be able to read\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;httpd_sys_rw_content_t\u0026lt;/code\u0026gt; for files on which you want read and write access\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;httpd_log_t\u0026lt;/code\u0026gt; for log files\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;httpd_cache_t\u0026lt;/code\u0026gt; for the cache directory\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;For example, to assign the \u0026lt;code\u0026gt;httpd_sys_content_t\u0026lt;/code\u0026gt; context type to your website root directory, run :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;semanage fcontext -a -t httpd_sys_content_t \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/path/to/root(/.*)?\u0026quot;\u0026lt;/span\u0026gt;\nrestorecon -Rv /path/to/root\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If your file is in a home directory, you will also need to turn on the \u0026lt;code\u0026gt;httpd_enable_homedirs\u0026lt;/code\u0026gt; boolean :\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;setsebool -P httpd_enable_homedirs \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;In any case, there could be a variety of reasons why SELinux would deny access to a file, depending on your policies. So you will need to enquire into that. \u0026lt;a href=\u0026quot;http://www.serverlab.ca/tutorials/linux/web-servers-linux/configuring-selinux-policies-for-apache-web-servers/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Here\u0026lt;/a\u0026gt; is a tutorial specifically on configuring SELinux for a web server.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;3. Symfony\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;If you are using Symfony, and experiencing this error when uploading to a server, then it can be that the app\u0026apos;s cache hasn\u0026apos;t been reset, either because \u0026lt;code\u0026gt;app/cache\u0026lt;/code\u0026gt; has been uploaded, or that cache hasn\u0026apos;t been cleared.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can test and fix this by running the following console command:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;cache:clear\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;4. Non ACSII characters inside Zip file\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;Apparently, this error can happen also upon calling \u0026lt;code\u0026gt;zip-\u0026amp;gt;close()\u0026lt;/code\u0026gt; when some files inside the zip have non-ASCII characters in their filename, such as \u0026quot;é\u0026quot;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;A potential solution is to wrap the file name in \u0026lt;code\u0026gt;utf8_decode()\u0026lt;/code\u0026gt; before creating the target file.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Credits to \u0026lt;a href=\u0026quot;https://stackoverflow.com/users/4217158/fran-cano\u0026quot;\u0026gt;Fran Cano\u0026lt;/a\u0026gt; for identifying and suggesting a solution to this issue\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To add to the (really good) existing answer\u0026lt;/p\u0026gt;\n\u0026lt;h1\u0026gt;Shared Hosting Software\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;open_basedir\u0026lt;/code\u0026gt; is one that can stump you because it can be specified in a web server configuration. While this is easily remedied if you run your own dedicated server, there are some shared hosting software packages out there (like Plesk, cPanel, etc) that will configure a configuration directive on a per-domain basis. Because the software builds the configuration file (i.e. \u0026lt;code\u0026gt;httpd.conf\u0026lt;/code\u0026gt;) you cannot change that file directly because the hosting software will just overwrite it when it restarts.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;With Plesk, they provide a place to override the provided \u0026lt;code\u0026gt;httpd.conf\u0026lt;/code\u0026gt; called \u0026lt;code\u0026gt;vhost.conf\u0026lt;/code\u0026gt;. Only the server admin can write this file. The configuration for Apache looks something like this\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Directory\u0026lt;/span\u0026gt; /\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt;/www/vhosts/domain.com\u0026amp;gt;\n    \u0026amp;lt;IfModule mod_php5.c\u0026amp;gt;\n        php_admin_flag engine on\n        php_admin_flag safe_mode off\n        php_admin_value open_basedir \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/var/www/vhosts/domain.com:/tmp:/usr/share/pear:/local/PEAR\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026amp;lt;/IfModule\u0026amp;gt;\n\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Directory\u0026lt;/span\u0026gt;\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Have your server admin consult the manual for the hosting and web server software they use.\u0026lt;/p\u0026gt;\n\u0026lt;h1\u0026gt;File Permissions\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;It\u0026apos;s important to note that executing a file through your web server is very different from a command line or cron job execution. The big difference is that your web server has its own user and permissions. For security reasons that user is pretty restricted. Apache, for instance, is often \u0026lt;code\u0026gt;apache\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;www-data\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;httpd\u0026lt;/code\u0026gt; (depending on your server). A cron job or CLI execution has whatever permissions that the user running it has (i.e. running a PHP script as root will execute with permissions of root).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;A lot of times people will solve a permissions problem by doing the following (Linux example)\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;chmod \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;777\u0026lt;/span\u0026gt; /path/to/file\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This is not a smart idea, because the file or directory is now world writable. If you own the server and are the only user then this isn\u0026apos;t such a big deal, but if you\u0026apos;re on a shared hosting environment you\u0026apos;ve just given everyone on your server access.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;What you need to do is determine the user(s) that need access and give only those them access. Once you know which users need access you\u0026apos;ll want to make sure that\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;That user owns the file \u0026lt;strong\u0026gt;and possibly the parent directory\u0026lt;/strong\u0026gt; (especially the parent directory if you want to write files). In most shared hosting environments this won\u0026apos;t be an issue, because your user should own all the files underneath your root. A Linux example is shown below\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt; chown apache:apache /path/to/file\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The user, and only that user, has access. In Linux, a good practice would be \u0026lt;code\u0026gt;chmod 600\u0026lt;/code\u0026gt; (only owner can read and write) or \u0026lt;code\u0026gt;chmod 644\u0026lt;/code\u0026gt; (owner can write but everyone can read)\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;You can \u0026lt;a href=\u0026quot;https://unix.stackexchange.com/questions/35711/giving-php-permission-to-write-to-files-and-folders\u0026quot;\u0026gt;read a more extended discussion of Linux/Unix permissions and users here\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Look at the \u0026lt;strong\u0026gt;exact\u0026lt;/strong\u0026gt; error\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;My code worked fine on all machines but only on this one started giving problem (which used to work find I guess). Used echo \u0026quot;document_root\u0026quot; path to debug and also looked closely at the error, found this\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Warning:\n  include(\u0026lt;strong\u0026gt;D:/MyProjects/testproject//functions/connections.php\u0026lt;/strong\u0026gt;):\n  failed to open stream:\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;You can easily see where the problems are. The problems are // before functions\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$document_root\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$_SERVER\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;DOCUMENT_ROOT\u0026apos;\u0026lt;/span\u0026gt;];\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;root: \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$document_root\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$document_root\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/functions/connections.php\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So simply remove the lading / from include and it should work fine. What is interesting is this behaviors is different on different versions. I run the same code on Laptop, Macbook Pro and this PC, all worked fine untill. Hope this helps someone.\u0026lt;/p\u0026gt;\n\n\u0026lt;ol start=\u0026quot;2\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;Copy past the file location in the browser to make sure file exists. Sometimes files get deleted unexpectedly (happened with me) and it was also the issue in my case.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Samba Shares\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you have a Linux test server and you work from a Windows Client, the Samba share interferes with the \u0026lt;em\u0026gt;chmod\u0026lt;/em\u0026gt; command. So, even if you use:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;chmod -R \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;777\u0026lt;/span\u0026gt; myfolder\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;on the Linux side it is fully possible that the Unix Group\\www-data still doesn\u0026apos;t have write access. One working solution if your share is set up that Windows admins are mapped to root: From Windows, open the Permissions, disable Inheritance for your folder with copy, and then grant full access for www-data. \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;Add script with query parameters\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;That was my case. It actually links to \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/4485874/10198757\u0026quot;\u0026gt;question #4485874\u0026lt;/a\u0026gt;, but I\u0026apos;m going to explain it here shortly.\u0026lt;br\u0026gt;\nWhen you try to require \u0026lt;code\u0026gt;path/to/script.php?parameter=value\u0026lt;/code\u0026gt;, PHP looks for file named \u0026lt;code\u0026gt;script.php?parameter=value\u0026lt;/code\u0026gt;, because UNIX allows you to have paths like this.\u0026lt;br\u0026gt;\nIf you are really need to pass some data to included script, just declare it as \u0026lt;code\u0026gt;$variable=...\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;$GLOBALS[]=...\u0026lt;/code\u0026gt; or other way you like.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The following PHP settings in \u0026lt;code\u0026gt;php.ini\u0026lt;/code\u0026gt; if set to non-existent directory can also raise\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;PHP Warning: Unknown: failed to open stream: Permission denied in\nUnknown on line 0\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;sys_temp_dir\nupload_tmp_dir\nsession.save_path\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;PHP - Failed to open stream : No such file or directory in mac\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For example I will upload a picture. But I am getting this error. First thing i will do right click on the image and get info.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;$thePathOfMyPicture = \u0026quot;/Users/misstugba/Desktop/\u0026quot;;\u0026lt;/code\u0026gt;\nuse with function\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;move_uploaded_file\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$_FILES\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;tmp_name\u0026quot;\u0026lt;/span\u0026gt;],\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$thePathOfMyPicture\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$_FILES\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;file\u0026quot;\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;name\u0026quot;\u0026lt;/span\u0026gt;])){\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;image uploaded successfully\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;}\n\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/zCOex.png\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/zCOex.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For me I got this error because I was trying to read a file which required HTTP auth, with a username and password. Hope that helps others. Might be another corner case.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Edit\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;You can check if this type of authentication is present by inspecting the headers:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$file_headers\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;get_headers\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$url\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$file_headers\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;File headers missing\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;strpos\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$file_headers\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;401 Unauthorized\u0026apos;\u0026lt;/span\u0026gt;) \u0026amp;gt; -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;401 Unauthorized\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In PHP, start Apache then write you DB name and password if exist in your environment(.env).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Aside from the other excellent answers, one thing I overlooked on Windows while writing a simple script: This error will be shown when trying to open a file with characters that Windows does not support in file names.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$file\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;fopen\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Y-m-d_H:i:s\u0026apos;\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;w+\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Will give:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;fopen(2022-06-01_22:53:03): Failed to open stream: No such file or directory in ...\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;Windows does not like \u0026lt;code\u0026gt;:\u0026lt;/code\u0026gt; in file names, as well as a number of other characters.\u0026lt;/p\u0026gt;\n    "],"id":404,"title":"PHP - Failed to open stream : No such file or directory","content":"\n                \n\u0026lt;p\u0026gt;In PHP scripts, whether calling \u0026lt;code\u0026gt;include()\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;require()\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;fopen()\u0026lt;/code\u0026gt;, or their derivatives such as \u0026lt;code\u0026gt;include_once\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;require_once\u0026lt;/code\u0026gt;, or even, \u0026lt;code\u0026gt;move_uploaded_file()\u0026lt;/code\u0026gt;, one often runs into an error or warning: \u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Failed to open stream : No such file or directory.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;What is a good process to quickly find the root cause of the problem?\u0026lt;/p\u0026gt;\n    ","slug":"php-failed-to-open-stream-:-no-such-file-or-directory-1657387872896","postType":"QUESTION","createdAt":"2022-07-09T17:31:12.000Z","updatedAt":"2022-07-09T17:31:12.000Z","tags":[{"id":2165,"name":"require","slug":"require","createdAt":"2022-07-09T17:31:12.000Z","updatedAt":"2022-07-09T17:31:12.000Z","Questions_Tags":{"questionId":404,"tagId":2165}},{"id":2166,"name":"fopen","slug":"fopen","createdAt":"2022-07-09T17:31:12.000Z","updatedAt":"2022-07-09T17:31:12.000Z","Questions_Tags":{"questionId":404,"tagId":2166}},{"id":2167,"name":"include-path","slug":"include-path","createdAt":"2022-07-09T17:31:12.000Z","updatedAt":"2022-07-09T17:31:12.000Z","Questions_Tags":{"questionId":404,"tagId":2167}}],"relatedQuestions":[{"title":"PHP - Failed to open stream : No such file or directory","slug":"php-failed-to-open-stream-:-no-such-file-or-directory-1657387872896","tags":[{"name":"require","Questions_Tags":{"questionId":404,"tagId":2165}},{"name":"fopen","Questions_Tags":{"questionId":404,"tagId":2166}},{"name":"include-path","Questions_Tags":{"questionId":404,"tagId":2167}}]}]},"randomQuestions":[{"title":"Correctly allocating multi-dimensional arrays","slug":"correctly-allocating-multi-dimensional-arrays-1657387733756"},{"title":"Make a div fill the height of the remaining screen space","slug":"make-a-div-fill-the-height-of-the-remaining-screen-space-1657387482387"},{"title":"How to use java.net.URLConnection to fire and handle HTTP requests","slug":"how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934"},{"title":"Pandas Merging 101","slug":"pandas-merging-101-1657384447080"},{"title":"When should static_cast, dynamic_cast, const_cast, and reinterpret_cast be used?","slug":"when-should-static_cast-dynamic_cast-const_cast-and-reinterpret_cast-be-used-1657388406205"},{"title":"Sort (order) data frame rows by multiple columns","slug":"sort-(order)-data-frame-rows-by-multiple-columns-1657388355671"},{"title":"How to use variables in SQL statement in Python?","slug":"how-to-use-variables-in-sql-statement-in-python-1657388479077"},{"title":"Why does Tkinter image not show up if created in a function?","slug":"why-does-tkinter-image-not-show-up-if-created-in-a-function-1657387388233"},{"title":"How to avoid having class data shared among instances?","slug":"how-to-avoid-having-class-data-shared-among-instances-1657387687732"},{"title":"Identifying and solving javax.el.PropertyNotFoundException: Target Unreachable","slug":"identifying-and-solving-javax.el.propertynotfoundexception:-target-unreachable-1657388164753"},{"title":"Why does this PDO statement silently fail?","slug":"why-does-this-pdo-statement-silently-fail-1657384892133"},{"title":"How to find the 'sizeof' (a pointer pointing to an array)?","slug":"how-to-find-the-'sizeof'-(a-pointer-pointing-to-an-array)-1657387354284"},{"title":"Is there a unique Android device ID?","slug":"is-there-a-unique-android-device-id-1657388089268"},{"title":"How can I make an AJAX call without jQuery?","slug":"how-can-i-make-an-ajax-call-without-jquery-1657388448955"},{"title":"Why does Spring MVC respond with a 404 and report \"No mapping found for HTTP request with URI [...] in DispatcherServlet\"?","slug":"why-does-spring-mvc-respond-with-a-404-and-report-\"no-mapping-found-for-http-request-with-uri-...-in-dispatcherservlet\"-1657387995250"},{"title":"What are the rules for JavaScript's automatic semicolon insertion (ASI)?","slug":"what-are-the-rules-for-javascript's-automatic-semicolon-insertion-(asi)-1657387472789"},{"title":"Reference - What does this error mean in PHP?","slug":"reference-what-does-this-error-mean-in-php-1657384301782"},{"title":"How do you use a variable in a regular expression?","slug":"how-do-you-use-a-variable-in-a-regular-expression-1657387939007"},{"title":"How can I deserialize JSON with C#?","slug":"how-can-i-deserialize-json-with-c-1657388102941"},{"title":"How can I vertically center a div element for all browsers using CSS?","slug":"how-can-i-vertically-center-a-div-element-for-all-browsers-using-css-1657385488425"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"php-failed-to-open-stream-:-no-such-file-or-directory-1657387872896"},"buildId":"00bsHgHZki2FteshOatnd","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>