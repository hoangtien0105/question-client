<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>Is there a RegExp.escape function in JavaScript? | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I just want to create a regular expression out of any possible string.
var usersString = &quot;Hello?!*`~World()[]&quot;;
var expression = new RegExp(RegExp.escape(usersString))
var matches = &quot;Hello&quot;.match(expression);

Is there a built-in method for that? If not, what do people use? Ruby has RegExp.escape. I don&#x27;t feel like I&#x27;d need to write my own, there have got to be something standard out there.
    "/><meta property="og:title" content="Is there a RegExp.escape function in JavaScript? | Solutions Checker"/><meta property="og:description" content="I just want to create a regular expression out of any possible string.
var usersString = &quot;Hello?!*`~World()[]&quot;;
var expression = new RegExp(RegExp.escape(usersString))
var matches = &quot;Hello&quot;.match(expression);

Is there a built-in method for that? If not, what do people use? Ruby has RegExp.escape. I don&#x27;t feel like I&#x27;d need to write my own, there have got to be something standard out there.
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Is there a RegExp.escape function in JavaScript?","text":"I just want to create a regular expression out of any possible string.\nvar usersString = &quot;Hello?!*`~World()[]&quot;;\nvar expression = new RegExp(RegExp.escape(usersString))\nvar matches = &quot;Hello&quot;.match(expression);\n\nIs there a built-in method for that? If not, what do people use? Ruby has RegExp.escape. I don&apos;t feel like I&apos;d need to write my own, there have got to be something standard out there.\n    ","answerCount":16,"upVoteCount":500,"suggestedAnswer":[{"text":"The function linked in another answer is insufficient. It fails to escape ^ or $ (start and end of string), or -, which in a character group is used for ranges.\nUse this function:\nfunction escapeRegex(string) {\n    return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, &apos;\\\\$&amp;&apos;);\n}\n\nWhile it may seem unnecessary at first glance, escaping - (as well as ^) makes the function suitable for escaping characters to be inserted into a character class as well as the body of the regex.\nEscaping / makes the function suitable for escaping characters to be used in a JavaScript regex literal for later evaluation.\nAs there is no downside to escaping either of them, it makes sense to escape to cover wider use cases.\nAnd yes, it is a disappointing failing that this is not part of standard JavaScript.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"For anyone using Lodash, since v3.0.0 a _.escapeRegExp function is built-in:\n_.escapeRegExp(&apos;[lodash](https://lodash.com/)&apos;);\n//  &apos;\\[lodash\\]\\(https:\\/\\/lodash\\.com\\/\\)&apos;\n\nAnd, in the event that you don&apos;t want to require the full Lodash library, you may require just that function!\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Most of the expressions here solve single specific use cases.\n\nThat&apos;s okay, but I prefer an &quot;always works&quot; approach.\n\nfunction regExpEscape(literal_string) {\n    return literal_string.replace(/[-[\\]{}()*+!&lt;=:?.\\/\\\\^$|#\\s,]/g, &apos;\\\\$&amp;&apos;);\n}\n\n\nThis will &quot;fully escape&quot; a literal string for any of the following uses in regular expressions:\n\n\nInsertion in a regular expression. E.g. new RegExp(regExpEscape(str))\nInsertion in a character class. E.g. new RegExp(&apos;[&apos; + regExpEscape(str) + &apos;]&apos;)\nInsertion in integer count specifier. E.g. new RegExp(&apos;x{1,&apos; + regExpEscape(str) + &apos;}&apos;)\nExecution in non-JavaScript regular expression engines.\n\n\nSpecial Characters Covered:\n\n\n-: Creates a character range in a character class.\n[ / ]: Starts / ends a character class.\n{ / }: Starts / ends a numeration specifier.\n( / ): Starts / ends a group.\n* / + / ?: Specifies repetition type.\n.: Matches any character.\n\\: Escapes characters, and starts entities.\n^: Specifies start of matching zone, and negates matching in a character class.\n$: Specifies end of matching zone.\n|: Specifies alternation.\n#: Specifies comment in free spacing mode.\n\\s: Ignored in free spacing mode.\n,: Separates values in numeration specifier.\n/: Starts or ends expression.\n:: Completes special group types, and part of Perl-style character classes.\n!: Negates zero-width group.\n&lt; / =: Part of zero-width group specifications.\n\n\nNotes:\n\n\n/ is not strictly necessary in any flavor of regular expression. However, it protects in case someone (shudder) does eval(&quot;/&quot; + pattern + &quot;/&quot;);.\n, ensures that if the string is meant to be an integer in the numerical specifier, it will properly cause a RegExp compiling error instead of silently compiling wrong.\n#, and \\s do not need to be escaped in JavaScript, but do in many other flavors. They are escaped here in case the regular expression will later be passed to another program.\n\n\n\n\nIf you also need to future-proof the regular expression against potential additions to the JavaScript regex engine capabilities, I recommend using the more paranoid:\n\nfunction regExpEscapeFuture(literal_string) {\n    return literal_string.replace(/[^A-Za-z0-9_]/g, &apos;\\\\$&amp;&apos;);\n}\n\n\nThis function escapes every character except those explicitly guaranteed not be used for syntax in future regular expression flavors.\n\n\n\nFor the truly sanitation-keen, consider this edge case:\n\nvar s = &apos;&apos;;\nnew RegExp(&apos;(choice1|choice2|&apos; + regExpEscape(s) + &apos;)&apos;);\n\n\nThis should compile fine in JavaScript, but will not in some other flavors. If intending to pass to another flavor, the null case of s === &apos;&apos; should be independently checked, like so:\n\nvar s = &apos;&apos;;\nnew RegExp(&apos;(choice1|choice2&apos; + (s ? &apos;|&apos; + regExpEscape(s) : &apos;&apos;) + &apos;)&apos;);\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Mozilla Developer Network&apos;s Guide to Regular Expressions provides this escaping function:\n\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, &apos;\\\\$&amp;&apos;); // $&amp; means the whole matched string\n}\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"In jQuery UI&apos;s autocomplete widget (version 1.9.1) they use a slightly different regular expression (line 6753), here&apos;s the regular expression combined with bobince&apos;s approach.\nRegExp.escape = function( value ) {\n     return value.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, &quot;\\\\$&amp;&quot;);\n}\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"Nothing should prevent you from just escaping every non-alphanumeric character:\n\nusersString.replace(/(?=\\W)/g, &apos;\\\\&apos;);\n\n\nYou lose a certain degree of readability when doing re.toString() but you win a great deal of simplicity (and security).\n\nAccording to ECMA-262, on the one hand, regular expression &quot;syntax characters&quot; are always non-alphanumeric, such that the result is secure, and special escape sequences (\\d, \\w, \\n) are always alphanumeric such that no false control escapes will be produced.\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"There is an ES7 proposal for RegExp.escape at https://github.com/benjamingr/RexExp.escape/, with a polyfill available at https://github.com/ljharb/regexp.escape.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"Another (much safer) approach is to escape all the characters (and not just a few special ones that we currently know) using the unicode escape format \\u{code}:\n\nfunction escapeRegExp(text) {\n    return Array.from(text)\n           .map(char =&gt; `\\\\u{${char.charCodeAt(0).toString(16)}}`)\n           .join(&apos;&apos;);\n}\n\nconsole.log(escapeRegExp(&apos;a.b&apos;)); // &apos;\\u{61}\\u{2e}\\u{62}&apos;\n\n\nPlease note that you need to pass the u flag for this method to work:\n\nvar expression = new RegExp(escapeRegExp(usersString), &apos;u&apos;);\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"This is a shorter version.\n\nRegExp.escape = function(s) {\n    return s.replace(/[$-\\/?[-^{|}]/g, &apos;\\\\$&amp;&apos;);\n}\n\n\nThis includes the non-meta characters of %, &amp;, &apos;, and ,, but the JavaScript RegExp specification allows this.\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"There is an ES7 proposal for RegExp.escape at https://github.com/benjamingr/RexExp.escape/, with a polyfill available at https://github.com/ljharb/regexp.escape.\nAn example based on the rejected ES proposal, includes checks if the property already exists, in the case that TC39 backtracks on their decision.\n\nCode:\nif (!Object.prototype.hasOwnProperty.call(RegExp, &apos;escape&apos;)) {\n  RegExp.escape = function(string) {\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\n    // https://github.com/benjamingr/RegExp.escape/issues/37\n    return string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, &apos;\\\\$&amp;&apos;); // $&amp; means the whole matched string\n  };\n}\n\nCode Minified:\nObject.prototype.hasOwnProperty.call(RegExp,&quot;escape&quot;)||(RegExp.escape=function(e){return e.replace(/[.*+\\-?^${}()|[\\]\\\\]/g,&quot;\\\\$&amp;&quot;)});\n\n\n// ...\nvar assert = require(&apos;assert&apos;);\n \nvar str = &apos;hello. how are you?&apos;;\nvar regex = new RegExp(RegExp.escape(str), &apos;g&apos;);\nassert.equal(String(regex), &apos;/hello\\. how are you\\?/g&apos;);\n\n\nThere is also an npm module at:\nhttps://www.npmjs.com/package/regexp.escape\n\nOne can install this and use it as so:\n\nnpm install regexp.escape\n\nor\nyarn add regexp.escape\n\n\nvar escape = require(&apos;regexp.escape&apos;);\nvar assert = require(&apos;assert&apos;);\n \nvar str = &apos;hello. how are you?&apos;;\nvar regex = new RegExp(escape(str), &apos;g&apos;);\nassert.equal(String(regex), &apos;/hello\\. how are you\\?/g&apos;);\n\nIn the GitHub &amp;&amp; NPM page are descriptions of how to use the shim/polyfill for this option, as well. That logic is based on return RegExp.escape || implementation;, where implementation contains the regexp used above.\n\nThe NPM module is an extra dependency, but it also make it easier for an external contributor to identify logical parts added to the code. ¯\\()/¯\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"XRegExp has an escape function:\n\nXRegExp.escape(&apos;Escaped? &lt;.&gt;&apos;);\n// -&gt; &apos;Escaped\\?\\ &lt;\\.&gt;&apos;\n\n\nMore on: http://xregexp.com/api/#escape\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"escapeRegExp = function(str) {\n  if (str == null) return &apos;&apos;;\n  return String(str).replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, &apos;\\\\$1&apos;);\n};\n\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"Rather than only escaping characters which will cause issues in your regular expression (e.g.: a blacklist), consider using a whitelist instead. This way each character is considered tainted unless it matches.\nFor this example, assume the following expression:\nRegExp.escape(&apos;be || ! be&apos;);\n\nThis whitelists letters, number and spaces:\nRegExp.escape = function (string) {\n    return string.replace(/([^\\w\\d\\s])/gi, &apos;\\\\$1&apos;);\n}\n\nReturns:\n&quot;be \\|\\| \\! be&quot;\n\nThis may escape characters which do not need to be escaped, but this doesn&apos;t hinder your expression (maybe some minor time penalties - but it&apos;s worth it for safety).\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"The functions in the other answers are overkill for escaping entire regular expressions (they may be useful for escaping parts of regular expressions that will later be concatenated into bigger regexps).\n\nIf you escape an entire regexp and are done with it, quoting the metacharacters that are either standalone (., ?, +, *, ^, $, |, \\) or start something ((, [, {) is all you need:\n\nString.prototype.regexEscape = function regexEscape() {\n  return this.replace(/[.?+*^$|({[\\\\]/g, &apos;\\\\$&amp;&apos;);\n};\n\n\nAnd yes, it&apos;s disappointing that JavaScript doesn&apos;t have a function like this built-in.\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"There has only ever been and ever will be 12 meta characters that need to be escaped\nto be considered a literal.\nIt doesn&apos;t matter what is done with the escaped string, inserted into a balanced regex wrapper or appended. It doesn&apos;t matter.\nDo a string replace using this\nvar escaped_string = oldstring.replace(/[\\\\^$.|?*+()[{]/g, &apos;\\\\$&amp;&apos;);\n\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"I borrowed bobince&apos;s answer above and created a tagged template function for creating a RegExp where part of the value is escaped and part isn&apos;t.\nregex-escaped.js\n\n\nRegExp.escape = text =&gt; text.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, &apos;\\\\$&amp;&apos;);\n\nRegExp.escaped = flags =&gt;\n  function (regexStrings, ...escaped) {\n    const source = regexStrings\n      .map((s, i) =&gt;\n        // escaped[i] will be undefined for the last value of s\n        escaped[i] === undefined\n          ? s\n          : s + RegExp.escape(escaped[i].toString())\n      )\n      .join(&apos;&apos;);\n    return new RegExp(source, flags);\n  };\n  \nfunction capitalizeFirstUserInputCaseInsensitiveMatch(text, userInput) {\n  const [, before, match, after ] =\n    RegExp.escaped(&apos;i&apos;)`^((?:(?!${userInput}).)*)(${userInput})?(.*)$`.exec(text);\n\n  return `${before}${match.toUpperCase()}${after}`;\n}\n\nconst text = &apos;hello (world)&apos;;\nconst userInput = &apos;lo (wor&apos;;\nconsole.log(capitalizeFirstUserInputCaseInsensitiveMatch(text, userInput));\n Run code snippetHide resultsExpand snippet\n\n\nFor our TypeScript fans...\nglobal.d.ts\ninterface RegExpConstructor {\n  /** Escapes a string so that it can be used as a literal within a `RegExp`. */\n  escape(text: string): string;\n\n  /**\n   * Returns a tagged template function that creates `RegExp` with its template values escaped.\n   *\n   * This can be useful when using a `RegExp` to search with user input.\n   *\n   * @param flags The flags to apply to the `RegExp`.\n   *\n   * @example\n   *\n   * function capitalizeFirstUserInputCaseInsensitiveMatch(text: string, userInput: string) {\n   *   const [, before, match, after ] =\n   *     RegExp.escaped(&apos;i&apos;)`^((?:(?!${userInput}).)*)(${userInput})?(.*)$`.exec(text);\n   *\n   *   return `${before}${match.toUpperCase()}${after}`;\n   * }\n   */\n  escaped(flags?: string): (regexStrings: TemplateStringsArray, ...escapedVals: Array&lt;string | number&gt;) =&gt; RegExp;\n}\n\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-b06815e21c943e0d.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-79a1437acf654019.js" defer=""></script><script src="/_next/static/6ctJfCympFH_chh5mjicD/_buildManifest.js" defer=""></script><script src="/_next/static/6ctJfCympFH_chh5mjicD/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/is-there-a-regexp.escape-function-in-javascript-1657387606651#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/is-there-a-regexp.escape-function-in-javascript-1657387606651"><h1>Is there a RegExp.escape function in JavaScript?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>I just want to create a regular expression out of any possible string.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> usersString = <span class="hljs-string">"Hello?!*`~World()[]"</span>;
<span class="hljs-keyword">var</span> expression = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-title class_">RegExp</span>.<span class="hljs-built_in">escape</span>(usersString))
<span class="hljs-keyword">var</span> matches = <span class="hljs-string">"Hello"</span>.<span class="hljs-title function_">match</span>(expression);
</code></pre>
<p>Is there a built-in method for that? If not, what do people use? Ruby has <a href="http://ruby-doc.org/core/classes/Regexp.html#M001195" rel="noreferrer"><code>RegExp.escape</code></a>. I don't feel like I'd need to write my own, there have got to be something standard out there.</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The function linked in another answer is insufficient. It fails to escape <code>^</code> or <code>$</code> (start and end of string), or <code>-</code>, which in a character group is used for ranges.</p>
<p>Use this function:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">escapeRegex</span>(<span class="hljs-params">string</span>) {
    <span class="hljs-keyword">return</span> string.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[-\/\\^$*+?.()|[\]{}]/g</span>, <span class="hljs-string">'\\$&amp;'</span>);
}
</code></pre>
<p>While it may seem unnecessary at first glance, escaping <code>-</code> (as well as <code>^</code>) makes the function suitable for escaping characters to be inserted into a character class as well as the body of the regex.</p>
<p>Escaping <code>/</code> makes the function suitable for escaping characters to be used in a JavaScript regex literal for later evaluation.</p>
<p>As there is no downside to escaping either of them, it makes sense to escape to cover wider use cases.</p>
<p>And yes, it is a disappointing failing that this is not part of standard JavaScript.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For anyone using Lodash, <a href="https://github.com/lodash/lodash/wiki/Changelog#v300" rel="noreferrer">since v3.0.0</a> a <a href="https://lodash.com/docs#escapeRegExp" rel="noreferrer">_.escapeRegExp</a> function is built-in:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">_.escapeRegExp(<span class="hljs-string">'[lodash](https://lodash.com/)'</span>);
<span class="hljs-comment">//  '\[lodash\]\(https:\/\/lodash\.com\/\)'</span>
</code></pre>
<p>And, in the event that you don't want to require the full Lodash library, you may require <a href="https://www.npmjs.com/package/lodash.escaperegexp" rel="noreferrer">just that function</a>!</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Most of the expressions here solve single specific use cases.</p>

<p>That's okay, but I prefer an "always works" approach.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">regExpEscape</span>(<span class="hljs-params">literal_string</span>) {
    <span class="hljs-keyword">return</span> literal_string.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[-[\]{}()*+!&lt;=:?.\/\\^$|#\s,]/g</span>, <span class="hljs-string">'\\$&amp;'</span>);
}
</code></pre>

<p>This will "fully escape" a literal string for any of the following uses in regular expressions:</p>

<ul>
<li>Insertion in a regular expression. E.g. <code>new RegExp(regExpEscape(str))</code></li>
<li>Insertion in a character class. E.g. <code>new RegExp('[' + regExpEscape(str) + ']')</code></li>
<li>Insertion in integer count specifier. E.g. <code>new RegExp('x{1,' + regExpEscape(str) + '}')</code></li>
<li>Execution in non-JavaScript regular expression engines.</li>
</ul>

<p>Special Characters Covered:</p>

<ul>
<li><code>-</code>: Creates a character range in a character class.</li>
<li><code>[</code> / <code>]</code>: Starts / ends a character class.</li>
<li><code>{</code> / <code>}</code>: Starts / ends a numeration specifier.</li>
<li><code>(</code> / <code>)</code>: Starts / ends a group.</li>
<li><code>*</code> / <code>+</code> / <code>?</code>: Specifies repetition type.</li>
<li><code>.</code>: Matches any character.</li>
<li><code>\</code>: Escapes characters, and starts entities.</li>
<li><code>^</code>: Specifies start of matching zone, and negates matching in a character class.</li>
<li><code>$</code>: Specifies end of matching zone.</li>
<li><code>|</code>: Specifies alternation.</li>
<li><code>#</code>: Specifies comment in free spacing mode.</li>
<li><code>\s</code>: Ignored in free spacing mode.</li>
<li><code>,</code>: Separates values in numeration specifier.</li>
<li><code>/</code>: Starts or ends expression.</li>
<li><code>:</code>: Completes special group types, and part of Perl-style character classes.</li>
<li><code>!</code>: Negates zero-width group.</li>
<li><code>&lt;</code> / <code>=</code>: Part of zero-width group specifications.</li>
</ul>

<p>Notes:</p>

<ul>
<li><code>/</code> is not strictly necessary in any flavor of regular expression. However, it protects in case someone <em>(shudder)</em> does <code>eval("/" + pattern + "/");</code>.</li>
<li><code>,</code> ensures that if the string is meant to be an integer in the numerical specifier, it will properly cause a RegExp compiling error instead of silently compiling wrong.</li>
<li><code>#</code>, and <code>\s</code> do not need to be escaped in JavaScript, but do in many other flavors. They are escaped here in case the regular expression will later be passed to another program.</li>
</ul>

<hr>

<p>If you also need to future-proof the regular expression against potential additions to the JavaScript regex engine capabilities, I recommend using the more paranoid:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">regExpEscapeFuture</span>(<span class="hljs-params">literal_string</span>) {
    <span class="hljs-keyword">return</span> literal_string.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[^A-Za-z0-9_]/g</span>, <span class="hljs-string">'\\$&amp;'</span>);
}
</code></pre>

<p>This function escapes every character except those explicitly guaranteed not be used for syntax in future regular expression flavors.</p>

<hr>

<p>For the truly sanitation-keen, consider this edge case:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> s = <span class="hljs-string">''</span>;
<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">'(choice1|choice2|'</span> + <span class="hljs-title function_">regExpEscape</span>(s) + <span class="hljs-string">')'</span>);
</code></pre>

<p>This <em>should</em> compile fine in JavaScript, but will not in some other flavors. If intending to pass to another flavor, the null case of <code>s === ''</code> should be independently checked, like so:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> s = <span class="hljs-string">''</span>;
<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">'(choice1|choice2'</span> + (s ? <span class="hljs-string">'|'</span> + <span class="hljs-title function_">regExpEscape</span>(s) : <span class="hljs-string">''</span>) + <span class="hljs-string">')'</span>);
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping" rel="noreferrer">Mozilla Developer Network's Guide to Regular Expressions</a> provides this escaping function:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">escapeRegExp</span>(<span class="hljs-params">string</span>) {
  <span class="hljs-keyword">return</span> string.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[.*+?^${}()|[\]\\]/g</span>, <span class="hljs-string">'\\$&amp;'</span>); <span class="hljs-comment">// $&amp; means the whole matched string</span>
}
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In jQuery UI's autocomplete widget (version 1.9.1) they use a slightly different regular expression (line 6753), here's the regular expression combined with <a href="https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript/3561711#3561711">bobince's approach</a>.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">RegExp</span>.<span class="hljs-property">escape</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"> value </span>) {
     <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[\-\[\]{}()*+?.,\\\^$|#\s]/g</span>, <span class="hljs-string">"\\$&amp;"</span>);
}
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Nothing should prevent you from just escaping every non-alphanumeric character:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">usersString.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(?=\W)/g</span>, <span class="hljs-string">'\\'</span>);
</code></pre>

<p>You lose a certain degree of readability when doing <code>re.toString()</code> but you win a great deal of simplicity (and security).</p>

<p>According to ECMA-262, on the one hand, regular expression "syntax characters" are always non-alphanumeric, such that the result is secure, and special escape sequences (<code>\d</code>, <code>\w</code>, <code>\n</code>) are always alphanumeric such that no false control escapes will be produced.</p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There is an <a href="https://en.wikipedia.org/wiki/ECMAScript#7th_Edition_-_ECMAScript_2016" rel="nofollow noreferrer">ES7</a> proposal for RegExp.escape at <a href="https://github.com/benjamingr/RexExp.escape/" rel="nofollow noreferrer">https://github.com/benjamingr/RexExp.escape/</a>, with a polyfill available at <a href="https://github.com/ljharb/regexp.escape" rel="nofollow noreferrer">https://github.com/ljharb/regexp.escape</a>.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Another (much safer) approach is to escape all the characters (and not just a few special ones that we currently know) using the unicode escape format <code>\u{code}</code>:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">escapeRegExp</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(text)
           .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">char</span> =&gt;</span> <span class="hljs-string">`\\u{<span class="hljs-subst">${char.charCodeAt(<span class="hljs-number">0</span>).toString(<span class="hljs-number">16</span>)}</span>}`</span>)
           .<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(escapeRegExp(<span class="hljs-string">'a.b'</span>)); <span class="hljs-comment">// '\u{61}\u{2e}\u{62}'</span>
</code></pre>

<p>Please note that you need to pass the <code>u</code> flag for this method to work:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> expression = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(escapeRegExp(usersString), <span class="hljs-string">'u'</span>);
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is a shorter version.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">RegExp</span>.<span class="hljs-property">escape</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) {
    <span class="hljs-keyword">return</span> s.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[$-\/?[-^{|}]/g</span>, <span class="hljs-string">'\\$&amp;'</span>);
}
</code></pre>

<p>This includes the non-meta characters of <code>%</code>, <code>&amp;</code>, <code>'</code>, and <code>,</code>, but the JavaScript RegExp specification allows this.</p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There is an ES7 proposal for RegExp.escape at <a href="https://github.com/benjamingr/RexExp.escape/" rel="noreferrer">https://github.com/benjamingr/RexExp.escape/</a>, with a polyfill available at <a href="https://github.com/ljharb/regexp.escape" rel="noreferrer">https://github.com/ljharb/regexp.escape</a>.</p>
<p>An example based on the rejected ES proposal, includes checks if the property already exists, in the case that TC39 backtracks on their decision.</p>
<hr>
<p>Code:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(<span class="hljs-title class_">RegExp</span>, <span class="hljs-string">'escape'</span>)) {
  <span class="hljs-title class_">RegExp</span>.<span class="hljs-property">escape</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">string</span>) {
    <span class="hljs-comment">// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping</span>
    <span class="hljs-comment">// https://github.com/benjamingr/RegExp.escape/issues/37</span>
    <span class="hljs-keyword">return</span> string.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[.*+\-?^${}()|[\]\\]/g</span>, <span class="hljs-string">'\\$&amp;'</span>); <span class="hljs-comment">// $&amp; means the whole matched string</span>
  };
}
</code></pre>
<p>Code Minified:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(<span class="hljs-title class_">RegExp</span>,<span class="hljs-string">"escape"</span>)||(<span class="hljs-title class_">RegExp</span>.<span class="hljs-property">escape</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> e.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[.*+\-?^${}()|[\]\\]/g</span>,<span class="hljs-string">"\\$&amp;"</span>)});
</code></pre>
<hr>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">// ...</span>
<span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);
 
<span class="hljs-keyword">var</span> str = <span class="hljs-string">'hello. how are you?'</span>;
<span class="hljs-keyword">var</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-title class_">RegExp</span>.<span class="hljs-built_in">escape</span>(str), <span class="hljs-string">'g'</span>);
assert.<span class="hljs-title function_">equal</span>(<span class="hljs-title class_">String</span>(regex), <span class="hljs-string">'/hello\. how are you\?/g'</span>);
</code></pre>
<hr>
<p>There is also an <code>npm</code> module at:
<a href="https://www.npmjs.com/package/regexp.escape" rel="noreferrer">https://www.npmjs.com/package/regexp.escape</a></p>
<hr>
<p>One can install this and use it as so:</p>
<hr>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">npm install regexp.<span class="hljs-property">escape</span>
</code></pre>
<p>or</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">yarn add regexp.<span class="hljs-property">escape</span>
</code></pre>
<hr>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> <span class="hljs-built_in">escape</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'regexp.escape'</span>);
<span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);
 
<span class="hljs-keyword">var</span> str = <span class="hljs-string">'hello. how are you?'</span>;
<span class="hljs-keyword">var</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-built_in">escape</span>(str), <span class="hljs-string">'g'</span>);
assert.<span class="hljs-title function_">equal</span>(<span class="hljs-title class_">String</span>(regex), <span class="hljs-string">'/hello\. how are you\?/g'</span>);
</code></pre>
<p>In the GitHub &amp;&amp; NPM page are descriptions of how to use the shim/polyfill for this option, as well. That logic is based on <code>return RegExp.escape || implementation;</code>, where implementation contains the regexp used above.</p>
<hr>
<p>The NPM module is an extra dependency, but it also make it easier for an external contributor to identify logical parts added to the code. ¯\<em>()</em>/¯</p>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>XRegExp has an escape function:</p>

<p><code>XRegExp.escape('Escaped? &lt;.&gt;');
// -&gt; 'Escaped\?\ &lt;\.&gt;'
</code></p>

<p>More on: <a href="http://xregexp.com/api/#escape" rel="nofollow noreferrer">http://xregexp.com/api/#escape</a></p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-js s-code-block"><code class="hljs language-javascript">escapeRegExp = <span class="hljs-keyword">function</span>(<span class="hljs-params">str</span>) {
  <span class="hljs-keyword">if</span> (str == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(str).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/([.*+?^=!:${}()|[\]\/\\])/g</span>, <span class="hljs-string">'\\$1'</span>);
};
</code></pre>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Rather than only escaping characters which will cause issues in your regular expression (e.g.: a blacklist), consider using a whitelist instead. This way each character is considered tainted unless it matches.</p>
<p>For this example, assume the following expression:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">RegExp</span>.<span class="hljs-built_in">escape</span>(<span class="hljs-string">'be || ! be'</span>);
</code></pre>
<p>This whitelists letters, number and spaces:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">RegExp</span>.<span class="hljs-property">escape</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">string</span>) {
    <span class="hljs-keyword">return</span> string.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/([^\w\d\s])/gi</span>, <span class="hljs-string">'\\$1'</span>);
}
</code></pre>
<p>Returns:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-string">"be \|\| \! be"</span>
</code></pre>
<p>This may escape characters which do not need to be escaped, but this doesn't hinder your expression (maybe some minor time penalties - but it's worth it for safety).</p>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The functions in the other answers are overkill for escaping entire regular expressions (they may be useful for escaping <em>parts</em> of regular expressions that will later be concatenated into bigger regexps).</p>

<p>If you escape an entire regexp and are done with it, quoting the metacharacters that are either standalone (<code>.</code>, <code>?</code>, <code>+</code>, <code>*</code>, <code>^</code>, <code>$</code>, <code>|</code>, <code>\</code>) or start something (<code>(</code>, <code>[</code>, <code>{</code>) is all you need:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">String</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">regexEscape</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">regexEscape</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[.?+*^$|({[\\]/g</span>, <span class="hljs-string">'\\$&amp;'</span>);
};
</code></pre>

<p>And yes, it's disappointing that JavaScript doesn't have a function like this built-in.</p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There has only ever been and ever will be 12 meta characters that need to be escaped
to be considered a literal.</p>
<p>It doesn't matter what is done with the escaped string, inserted into a balanced regex wrapper or appended. It doesn't matter.</p>
<p>Do a string replace using this</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> escaped_string = oldstring.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[\\^$.|?*+()[{]/g</span>, <span class="hljs-string">'\\$&amp;'</span>);
</code></pre>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I borrowed bobince's <a href="https://stackoverflow.com/a/3561711/3120446">answer above</a> and created a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates" rel="nofollow noreferrer">tagged template function</a> for creating a <code>RegExp</code> where part of the value is escaped and part isn't.</p>
<h3>regex-escaped.js</h3>
<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">RegExp</span>.<span class="hljs-property">escape</span> = <span class="hljs-function"><span class="hljs-params">text</span> =&gt;</span> text.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[\-\[\]{}()*+?.,\\\^$|#\s]/g</span>, <span class="hljs-string">'\\$&amp;'</span>);

<span class="hljs-title class_">RegExp</span>.<span class="hljs-property">escaped</span> = <span class="hljs-function"><span class="hljs-params">flags</span> =&gt;</span>
  <span class="hljs-keyword">function</span> (<span class="hljs-params">regexStrings, ...escaped</span>) {
    <span class="hljs-keyword">const</span> source = regexStrings
      .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">s, i</span>) =&gt;</span>
        <span class="hljs-comment">// escaped[i] will be undefined for the last value of s</span>
        escaped[i] === <span class="hljs-literal">undefined</span>
          ? s
          : s + <span class="hljs-title class_">RegExp</span>.<span class="hljs-built_in">escape</span>(escaped[i].<span class="hljs-title function_">toString</span>())
      )
      .<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(source, flags);
  };
  
<span class="hljs-keyword">function</span> <span class="hljs-title function_">capitalizeFirstUserInputCaseInsensitiveMatch</span>(<span class="hljs-params">text, userInput</span>) {
  <span class="hljs-keyword">const</span> [, before, match, after ] =
    <span class="hljs-title class_">RegExp</span>.escaped(<span class="hljs-string">'i'</span>)<span class="hljs-string">`^((?:(?!<span class="hljs-subst">${userInput}</span>).)*)(<span class="hljs-subst">${userInput}</span>)?(.*)$`</span>.<span class="hljs-title function_">exec</span>(text);

  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${before}</span><span class="hljs-subst">${match.toUpperCase()}</span><span class="hljs-subst">${after}</span>`</span>;
}

<span class="hljs-keyword">const</span> text = <span class="hljs-string">'hello (world)'</span>;
<span class="hljs-keyword">const</span> userInput = <span class="hljs-string">'lo (wor'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">capitalizeFirstUserInputCaseInsensitiveMatch</span>(text, userInput));</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif1" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
<p>For our TypeScript fans...</p>
<h3>global.d.ts</h3>
<pre class="lang-ts s-code-block"><code class="hljs language-typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">RegExpConstructor</span> {
  <span class="hljs-comment">/** Escapes a string so that it can be used as a literal within a `RegExp`. */</span>
  <span class="hljs-built_in">escape</span>(<span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;

  <span class="hljs-comment">/**
   * Returns a tagged template function that creates `RegExp` with its template values escaped.
   *
   * This can be useful when using a `RegExp` to search with user input.
   *
   * <span class="hljs-doctag">@param</span> flags The flags to apply to the `RegExp`.
   *
   * <span class="hljs-doctag">@example</span>
   *
   * function capitalizeFirstUserInputCaseInsensitiveMatch(text: string, userInput: string) {
   *   const [, before, match, after ] =
   *     RegExp.escaped('i')`^((?:(?!${userInput}).)*)(${userInput})?(.*)$`.exec(text);
   *
   *   return `${before}${match.toUpperCase()}${after}`;
   * }
   */</span>
  escaped(flags?: <span class="hljs-built_in">string</span>): <span class="hljs-function">(<span class="hljs-params">regexStrings: TemplateStringsArray, ...escapedVals: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>&gt;</span>) =&gt;</span> <span class="hljs-title class_">RegExp</span>;
}
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/what-is-an-undefined-referenceunresolved-external-symbol-error-and-how-do-i-fix-it-1657384255179">What is an undefined reference/unresolved external symbol error and how do I fix it?</a><a href="/questions/undefined-unspecified-and-implementation-defined-behavior-1657384516085">Undefined, unspecified and implementation-defined behavior</a><a href="/questions/what-do-queryselectorall-and-getelementsby*-methods-return-1657384425935">What do querySelectorAll and getElementsBy* methods return?</a><a href="/questions/pandas-merging-101-1657384447080">Pandas Merging 101</a><a href="/questions/how-do-i-copy-to-the-clipboard-in-javascript-1657385501223">How do I copy to the clipboard in JavaScript?</a><a href="/questions/how-to-randomize-(shuffle)-a-javascript-array-1657384790171">How to randomize (shuffle) a JavaScript array?</a><a href="/questions/why-does-my-recursive-function-return-none-1657387792894">Why does my recursive function return None?</a><a href="/questions/mysql-pivot-row-into-dynamic-number-of-columns-1657387981930">MySQL pivot row into dynamic number of columns</a><a href="/questions/is-it-possible-for-flex-items-to-align-tightly-to-the-items-above-them-1657388511179">Is it possible for flex items to align tightly to the items above them?</a><a href="/questions/how-to-remove-the-space-between-inlineinline-block-elements-1657384532273">How to remove the space between inline/inline-block elements?</a><a href="/questions/dollar(document).ready-equivalent-without-jquery-1657388504115">$(document).ready equivalent without jQuery</a><a href="/questions/is-storing-a-delimited-list-in-a-database-column-really-that-bad-1657384474773">Is storing a delimited list in a database column really that bad?</a><a href="/questions/what-is-the-difference-between-a-definition-and-a-declaration-1657387851618">What is the difference between a definition and a declaration?</a><a href="/questions/what-does-a-%22cannot-find-symbol%22-or-%22cannot-resolve-symbol%22-error-mean-1657384492160">What does a &quot;Cannot find symbol&quot; or &quot;Cannot resolve symbol&quot; error mean?</a><a href="/questions/how-to-center-an-element-horizontally-and-vertically-1657388132330">How to center an element horizontally and vertically</a><a href="/questions/how-to-add-to-the-pythonpath-in-windows-so-it-finds-my-modulespackages-1657388540360">How to add to the PYTHONPATH in Windows, so it finds my modules/packages?</a><a href="/questions/android-permission-doesn&#x27;t-work-even-if-i-have-declared-it-1657387726990">Android permission doesn&#x27;t work even if I have declared it</a><a href="/questions/why-shouldn&#x27;t-i-use-mysql_*-functions-in-php-1657384260352">Why shouldn&#x27;t I use mysql_* functions in PHP?</a><a href="/questions/how-can-i-do-a-full-outer-join-in-mysql-1657388175444">How can I do a FULL OUTER JOIN in MySQL?</a><a href="/questions/how-to-get-the-difference-between-two-arrays-in-javascript-1657388463384">How to get the difference between two arrays in JavaScript?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;The function linked in another answer is insufficient. It fails to escape \u0026lt;code\u0026gt;^\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;$\u0026lt;/code\u0026gt; (start and end of string), or \u0026lt;code\u0026gt;-\u0026lt;/code\u0026gt;, which in a character group is used for ranges.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Use this function:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;escapeRegex\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; string.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[-\\/\\\\^$*+?.()|[\\]{}]/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$\u0026amp;amp;\u0026apos;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;While it may seem unnecessary at first glance, escaping \u0026lt;code\u0026gt;-\u0026lt;/code\u0026gt; (as well as \u0026lt;code\u0026gt;^\u0026lt;/code\u0026gt;) makes the function suitable for escaping characters to be inserted into a character class as well as the body of the regex.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Escaping \u0026lt;code\u0026gt;/\u0026lt;/code\u0026gt; makes the function suitable for escaping characters to be used in a JavaScript regex literal for later evaluation.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As there is no downside to escaping either of them, it makes sense to escape to cover wider use cases.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;And yes, it is a disappointing failing that this is not part of standard JavaScript.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For anyone using Lodash, \u0026lt;a href=\u0026quot;https://github.com/lodash/lodash/wiki/Changelog#v300\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;since v3.0.0\u0026lt;/a\u0026gt; a \u0026lt;a href=\u0026quot;https://lodash.com/docs#escapeRegExp\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;_.escapeRegExp\u0026lt;/a\u0026gt; function is built-in:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;_.escapeRegExp(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;[lodash](https://lodash.com/)\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//  \u0026apos;\\[lodash\\]\\(https:\\/\\/lodash\\.com\\/\\)\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And, in the event that you don\u0026apos;t want to require the full Lodash library, you may require \u0026lt;a href=\u0026quot;https://www.npmjs.com/package/lodash.escaperegexp\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;just that function\u0026lt;/a\u0026gt;!\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Most of the expressions here solve single specific use cases.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;That\u0026apos;s okay, but I prefer an \u0026quot;always works\u0026quot; approach.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;regExpEscape\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;literal_string\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; literal_string.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[-[\\]{}()*+!\u0026amp;lt;=:?.\\/\\\\^$|#\\s,]/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$\u0026amp;amp;\u0026apos;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This will \u0026quot;fully escape\u0026quot; a literal string for any of the following uses in regular expressions:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Insertion in a regular expression. E.g. \u0026lt;code\u0026gt;new RegExp(regExpEscape(str))\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Insertion in a character class. E.g. \u0026lt;code\u0026gt;new RegExp(\u0026apos;[\u0026apos; + regExpEscape(str) + \u0026apos;]\u0026apos;)\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Insertion in integer count specifier. E.g. \u0026lt;code\u0026gt;new RegExp(\u0026apos;x{1,\u0026apos; + regExpEscape(str) + \u0026apos;}\u0026apos;)\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Execution in non-JavaScript regular expression engines.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Special Characters Covered:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;-\u0026lt;/code\u0026gt;: Creates a character range in a character class.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;[\u0026lt;/code\u0026gt; / \u0026lt;code\u0026gt;]\u0026lt;/code\u0026gt;: Starts / ends a character class.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;{\u0026lt;/code\u0026gt; / \u0026lt;code\u0026gt;}\u0026lt;/code\u0026gt;: Starts / ends a numeration specifier.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;(\u0026lt;/code\u0026gt; / \u0026lt;code\u0026gt;)\u0026lt;/code\u0026gt;: Starts / ends a group.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;*\u0026lt;/code\u0026gt; / \u0026lt;code\u0026gt;+\u0026lt;/code\u0026gt; / \u0026lt;code\u0026gt;?\u0026lt;/code\u0026gt;: Specifies repetition type.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;.\u0026lt;/code\u0026gt;: Matches any character.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;\\\u0026lt;/code\u0026gt;: Escapes characters, and starts entities.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;^\u0026lt;/code\u0026gt;: Specifies start of matching zone, and negates matching in a character class.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;$\u0026lt;/code\u0026gt;: Specifies end of matching zone.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;|\u0026lt;/code\u0026gt;: Specifies alternation.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;#\u0026lt;/code\u0026gt;: Specifies comment in free spacing mode.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;\\s\u0026lt;/code\u0026gt;: Ignored in free spacing mode.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;,\u0026lt;/code\u0026gt;: Separates values in numeration specifier.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;/\u0026lt;/code\u0026gt;: Starts or ends expression.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;:\u0026lt;/code\u0026gt;: Completes special group types, and part of Perl-style character classes.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;!\u0026lt;/code\u0026gt;: Negates zero-width group.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;\u0026amp;lt;\u0026lt;/code\u0026gt; / \u0026lt;code\u0026gt;=\u0026lt;/code\u0026gt;: Part of zero-width group specifications.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Notes:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;/\u0026lt;/code\u0026gt; is not strictly necessary in any flavor of regular expression. However, it protects in case someone \u0026lt;em\u0026gt;(shudder)\u0026lt;/em\u0026gt; does \u0026lt;code\u0026gt;eval(\u0026quot;/\u0026quot; + pattern + \u0026quot;/\u0026quot;);\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;,\u0026lt;/code\u0026gt; ensures that if the string is meant to be an integer in the numerical specifier, it will properly cause a RegExp compiling error instead of silently compiling wrong.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;#\u0026lt;/code\u0026gt;, and \u0026lt;code\u0026gt;\\s\u0026lt;/code\u0026gt; do not need to be escaped in JavaScript, but do in many other flavors. They are escaped here in case the regular expression will later be passed to another program.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;If you also need to future-proof the regular expression against potential additions to the JavaScript regex engine capabilities, I recommend using the more paranoid:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;regExpEscapeFuture\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;literal_string\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; literal_string.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[^A-Za-z0-9_]/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$\u0026amp;amp;\u0026apos;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This function escapes every character except those explicitly guaranteed not be used for syntax in future regular expression flavors.\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;For the truly sanitation-keen, consider this edge case:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; s = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;(choice1|choice2|\u0026apos;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;regExpEscape\u0026lt;/span\u0026gt;(s) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This \u0026lt;em\u0026gt;should\u0026lt;/em\u0026gt; compile fine in JavaScript, but will not in some other flavors. If intending to pass to another flavor, the null case of \u0026lt;code\u0026gt;s === \u0026apos;\u0026apos;\u0026lt;/code\u0026gt; should be independently checked, like so:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; s = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;(choice1|choice2\u0026apos;\u0026lt;/span\u0026gt; + (s ? \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;|\u0026apos;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;regExpEscape\u0026lt;/span\u0026gt;(s) : \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Mozilla Developer Network\u0026apos;s Guide to Regular Expressions\u0026lt;/a\u0026gt; provides this escaping function:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;escapeRegExp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; string.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[.*+?^${}()|[\\]\\\\]/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$\u0026amp;amp;\u0026apos;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// $\u0026amp;amp; means the whole matched string\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In jQuery UI\u0026apos;s autocomplete widget (version 1.9.1) they use a slightly different regular expression (line 6753), here\u0026apos;s the regular expression combined with \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript/3561711#3561711\u0026quot;\u0026gt;bobince\u0026apos;s approach\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt; value \u0026lt;/span\u0026gt;) {\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; value.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\$\u0026amp;amp;\u0026quot;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Nothing should prevent you from just escaping every non-alphanumeric character:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;usersString.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/(?=\\W)/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You lose a certain degree of readability when doing \u0026lt;code\u0026gt;re.toString()\u0026lt;/code\u0026gt; but you win a great deal of simplicity (and security).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;According to ECMA-262, on the one hand, regular expression \u0026quot;syntax characters\u0026quot; are always non-alphanumeric, such that the result is secure, and special escape sequences (\u0026lt;code\u0026gt;\\d\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;\\w\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;\\n\u0026lt;/code\u0026gt;) are always alphanumeric such that no false control escapes will be produced.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There is an \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/ECMAScript#7th_Edition_-_ECMAScript_2016\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;ES7\u0026lt;/a\u0026gt; proposal for RegExp.escape at \u0026lt;a href=\u0026quot;https://github.com/benjamingr/RexExp.escape/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://github.com/benjamingr/RexExp.escape/\u0026lt;/a\u0026gt;, with a polyfill available at \u0026lt;a href=\u0026quot;https://github.com/ljharb/regexp.escape\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://github.com/ljharb/regexp.escape\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Another (much safer) approach is to escape all the characters (and not just a few special ones that we currently know) using the unicode escape format \u0026lt;code\u0026gt;\\u{code}\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;escapeRegExp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;text\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;(text)\n           .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`\\\\u{\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${char.charCodeAt(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;).toString(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;)}\u0026lt;/span\u0026gt;}`\u0026lt;/span\u0026gt;)\n           .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;join\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;);\n}\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(escapeRegExp(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a.b\u0026apos;\u0026lt;/span\u0026gt;)); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// \u0026apos;\\u{61}\\u{2e}\\u{62}\u0026apos;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Please note that you need to pass the \u0026lt;code\u0026gt;u\u0026lt;/code\u0026gt; flag for this method to work:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; expression = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(escapeRegExp(usersString), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;u\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is a shorter version.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;s\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; s.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[$-\\/?[-^{|}]/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$\u0026amp;amp;\u0026apos;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This includes the non-meta characters of \u0026lt;code\u0026gt;%\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;\u0026amp;amp;\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;\u0026apos;\u0026lt;/code\u0026gt;, and \u0026lt;code\u0026gt;,\u0026lt;/code\u0026gt;, but the JavaScript RegExp specification allows this.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There is an ES7 proposal for RegExp.escape at \u0026lt;a href=\u0026quot;https://github.com/benjamingr/RexExp.escape/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://github.com/benjamingr/RexExp.escape/\u0026lt;/a\u0026gt;, with a polyfill available at \u0026lt;a href=\u0026quot;https://github.com/ljharb/regexp.escape\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://github.com/ljharb/regexp.escape\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;An example based on the rejected ES proposal, includes checks if the property already exists, in the case that TC39 backtracks on their decision.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;Code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;escape\u0026apos;\u0026lt;/span\u0026gt;)) {\n  \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// https://github.com/benjamingr/RegExp.escape/issues/37\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; string.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[.*+\\-?^${}()|[\\]\\\\]/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$\u0026amp;amp;\u0026apos;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// $\u0026amp;amp; means the whole matched string\u0026lt;/span\u0026gt;\n  };\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Code Minified:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;escape\u0026quot;\u0026lt;/span\u0026gt;)||(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;e\u0026lt;/span\u0026gt;){\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; e.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[.*+\\-?^${}()|[\\]\\\\]/g\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\$\u0026amp;amp;\u0026quot;\u0026lt;/span\u0026gt;)});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; assert = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;require\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;assert\u0026apos;\u0026lt;/span\u0026gt;);\n \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; str = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hello. how are you?\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; regex = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt;(str), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;g\u0026apos;\u0026lt;/span\u0026gt;);\nassert.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equal\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(regex), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/hello\\. how are you\\?/g\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;There is also an \u0026lt;code\u0026gt;npm\u0026lt;/code\u0026gt; module at:\n\u0026lt;a href=\u0026quot;https://www.npmjs.com/package/regexp.escape\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://www.npmjs.com/package/regexp.escape\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;One can install this and use it as so:\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;npm install regexp.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;yarn add regexp.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;require\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;regexp.escape\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; assert = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;require\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;assert\u0026apos;\u0026lt;/span\u0026gt;);\n \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; str = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hello. how are you?\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; regex = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt;(str), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;g\u0026apos;\u0026lt;/span\u0026gt;);\nassert.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equal\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(regex), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/hello\\. how are you\\?/g\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;In the GitHub \u0026amp;amp;\u0026amp;amp; NPM page are descriptions of how to use the shim/polyfill for this option, as well. That logic is based on \u0026lt;code\u0026gt;return RegExp.escape || implementation;\u0026lt;/code\u0026gt;, where implementation contains the regexp used above.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;The NPM module is an extra dependency, but it also make it easier for an external contributor to identify logical parts added to the code. ¯\\\u0026lt;em\u0026gt;()\u0026lt;/em\u0026gt;/¯\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;XRegExp has an escape function:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;XRegExp.escape(\u0026apos;Escaped? \u0026amp;lt;.\u0026amp;gt;\u0026apos;);\n// -\u0026amp;gt; \u0026apos;Escaped\\?\\ \u0026amp;lt;\\.\u0026amp;gt;\u0026apos;\n\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;More on: \u0026lt;a href=\u0026quot;http://xregexp.com/api/#escape\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;http://xregexp.com/api/#escape\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;escapeRegExp = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (str == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(str).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/([.*+?^=!:${}()|[\\]\\/\\\\])/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$1\u0026apos;\u0026lt;/span\u0026gt;);\n};\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Rather than only escaping characters which will cause issues in your regular expression (e.g.: a blacklist), consider using a whitelist instead. This way each character is considered tainted unless it matches.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For this example, assume the following expression:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;be || ! be\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This whitelists letters, number and spaces:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; string.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/([^\\w\\d\\s])/gi\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$1\u0026apos;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Returns:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;be \\|\\| \\! be\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This may escape characters which do not need to be escaped, but this doesn\u0026apos;t hinder your expression (maybe some minor time penalties - but it\u0026apos;s worth it for safety).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The functions in the other answers are overkill for escaping entire regular expressions (they may be useful for escaping \u0026lt;em\u0026gt;parts\u0026lt;/em\u0026gt; of regular expressions that will later be concatenated into bigger regexps).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you escape an entire regexp and are done with it, quoting the metacharacters that are either standalone (\u0026lt;code\u0026gt;.\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;?\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;+\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;*\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;^\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;$\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;|\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;\\\u0026lt;/code\u0026gt;) or start something (\u0026lt;code\u0026gt;(\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;[\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;{\u0026lt;/code\u0026gt;) is all you need:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;regexEscape\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;regexEscape\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[.?+*^$|({[\\\\]/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$\u0026amp;amp;\u0026apos;\u0026lt;/span\u0026gt;);\n};\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And yes, it\u0026apos;s disappointing that JavaScript doesn\u0026apos;t have a function like this built-in.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There has only ever been and ever will be 12 meta characters that need to be escaped\nto be considered a literal.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;It doesn\u0026apos;t matter what is done with the escaped string, inserted into a balanced regex wrapper or appended. It doesn\u0026apos;t matter.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Do a string replace using this\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; escaped_string = oldstring.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[\\\\^$.|?*+()[{]/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$\u0026amp;amp;\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I borrowed bobince\u0026apos;s \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/3561711/3120446\u0026quot;\u0026gt;answer above\u0026lt;/a\u0026gt; and created a \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;tagged template function\u0026lt;/a\u0026gt; for creating a \u0026lt;code\u0026gt;RegExp\u0026lt;/code\u0026gt; where part of the value is escaped and part isn\u0026apos;t.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;regex-escaped.js\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;false\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;text\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; text.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\\\$\u0026amp;amp;\u0026apos;\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;escaped\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;flags\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;regexStrings, ...escaped\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; source = regexStrings\n      .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;s, i\u0026lt;/span\u0026gt;) =\u0026amp;gt;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// escaped[i] will be undefined for the last value of s\u0026lt;/span\u0026gt;\n        escaped[i] === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;\n          ? s\n          : s + \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt;(escaped[i].\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toString\u0026lt;/span\u0026gt;())\n      )\n      .\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;join\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(source, flags);\n  };\n  \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;capitalizeFirstUserInputCaseInsensitiveMatch\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;text, userInput\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; [, before, match, after ] =\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.escaped(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;i\u0026apos;\u0026lt;/span\u0026gt;)\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`^((?:(?!\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${userInput}\u0026lt;/span\u0026gt;).)*)(\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${userInput}\u0026lt;/span\u0026gt;)?(.*)$`\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;exec\u0026lt;/span\u0026gt;(text);\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${before}\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${match.toUpperCase()}\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${after}\u0026lt;/span\u0026gt;`\u0026lt;/span\u0026gt;;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; text = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hello (world)\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; userInput = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;lo (wor\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;capitalizeFirstUserInputCaseInsensitiveMatch\u0026lt;/span\u0026gt;(text, userInput));\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif1\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For our TypeScript fans...\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;global.d.ts\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-ts s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;interface\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExpConstructor\u0026lt;/span\u0026gt; {\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Escapes a string so that it can be used as a literal within a `RegExp`. */\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;text\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;): \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;;\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n   * Returns a tagged template function that creates `RegExp` with its template values escaped.\n   *\n   * This can be useful when using a `RegExp` to search with user input.\n   *\n   * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; flags The flags to apply to the `RegExp`.\n   *\n   * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@example\u0026lt;/span\u0026gt;\n   *\n   * function capitalizeFirstUserInputCaseInsensitiveMatch(text: string, userInput: string) {\n   *   const [, before, match, after ] =\n   *     RegExp.escaped(\u0026apos;i\u0026apos;)`^((?:(?!${userInput}).)*)(${userInput})?(.*)$`.exec(text);\n   *\n   *   return `${before}${match.toUpperCase()}${after}`;\n   * }\n   */\u0026lt;/span\u0026gt;\n  escaped(flags?: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;): \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;regexStrings: TemplateStringsArray, ...escapedVals: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; | \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;) =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":315,"title":"Is there a RegExp.escape function in JavaScript?","content":"\n                \n\u0026lt;p\u0026gt;I just want to create a regular expression out of any possible string.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; usersString = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello?!*`~World()[]\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; expression = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;escape\u0026lt;/span\u0026gt;(usersString))\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; matches = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello\u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;match\u0026lt;/span\u0026gt;(expression);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Is there a built-in method for that? If not, what do people use? Ruby has \u0026lt;a href=\u0026quot;http://ruby-doc.org/core/classes/Regexp.html#M001195\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;RegExp.escape\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;. I don\u0026apos;t feel like I\u0026apos;d need to write my own, there have got to be something standard out there.\u0026lt;/p\u0026gt;\n    ","slug":"is-there-a-regexp.escape-function-in-javascript-1657387606651","postType":"QUESTION","createdAt":"2022-07-09T17:26:46.000Z","updatedAt":"2022-07-09T17:26:46.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"What is an undefined reference/unresolved external symbol error and how do I fix it?","slug":"what-is-an-undefined-referenceunresolved-external-symbol-error-and-how-do-i-fix-it-1657384255179"},{"title":"Undefined, unspecified and implementation-defined behavior","slug":"undefined-unspecified-and-implementation-defined-behavior-1657384516085"},{"title":"What do querySelectorAll and getElementsBy* methods return?","slug":"what-do-queryselectorall-and-getelementsby*-methods-return-1657384425935"},{"title":"Pandas Merging 101","slug":"pandas-merging-101-1657384447080"},{"title":"How do I copy to the clipboard in JavaScript?","slug":"how-do-i-copy-to-the-clipboard-in-javascript-1657385501223"},{"title":"How to randomize (shuffle) a JavaScript array?","slug":"how-to-randomize-(shuffle)-a-javascript-array-1657384790171"},{"title":"Why does my recursive function return None?","slug":"why-does-my-recursive-function-return-none-1657387792894"},{"title":"MySQL pivot row into dynamic number of columns","slug":"mysql-pivot-row-into-dynamic-number-of-columns-1657387981930"},{"title":"Is it possible for flex items to align tightly to the items above them?","slug":"is-it-possible-for-flex-items-to-align-tightly-to-the-items-above-them-1657388511179"},{"title":"How to remove the space between inline/inline-block elements?","slug":"how-to-remove-the-space-between-inlineinline-block-elements-1657384532273"},{"title":"$(document).ready equivalent without jQuery","slug":"dollar(document).ready-equivalent-without-jquery-1657388504115"},{"title":"Is storing a delimited list in a database column really that bad?","slug":"is-storing-a-delimited-list-in-a-database-column-really-that-bad-1657384474773"},{"title":"What is the difference between a definition and a declaration?","slug":"what-is-the-difference-between-a-definition-and-a-declaration-1657387851618"},{"title":"What does a \"Cannot find symbol\" or \"Cannot resolve symbol\" error mean?","slug":"what-does-a-\"cannot-find-symbol\"-or-\"cannot-resolve-symbol\"-error-mean-1657384492160"},{"title":"How to center an element horizontally and vertically","slug":"how-to-center-an-element-horizontally-and-vertically-1657388132330"},{"title":"How to add to the PYTHONPATH in Windows, so it finds my modules/packages?","slug":"how-to-add-to-the-pythonpath-in-windows-so-it-finds-my-modulespackages-1657388540360"},{"title":"Android permission doesn't work even if I have declared it","slug":"android-permission-doesn't-work-even-if-i-have-declared-it-1657387726990"},{"title":"Why shouldn't I use mysql_* functions in PHP?","slug":"why-shouldn't-i-use-mysql_*-functions-in-php-1657384260352"},{"title":"How can I do a FULL OUTER JOIN in MySQL?","slug":"how-can-i-do-a-full-outer-join-in-mysql-1657388175444"},{"title":"How to get the difference between two arrays in JavaScript?","slug":"how-to-get-the-difference-between-two-arrays-in-javascript-1657388463384"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"is-there-a-regexp.escape-function-in-javascript-1657387606651"},"buildId":"6ctJfCympFH_chh5mjicD","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>