<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/the-viewdata-item-that-has-the-key-&apos;xxx&apos;-is-of-type-&apos;system.int32&apos;-but-must-be-of-type-&apos;ienumerablelessselectlistitemgreater&apos;-1657388454191","name":"Questions"}}]}</script><title>The ViewData item that has the key &#x27;XXX&#x27; is of type &#x27;System.Int32&#x27; but must be of type &#x27;IEnumerable&lt;SelectListItem&gt;&#x27; | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I have the following view model

public class ProjectVM
{
    ....
    [Display(Name = &quot;Category&quot;)]
    [Required(ErrorMessage = &quot;Please select a category&quot;)]
    public int CategoryID { get; set; }
    public IEnumerable&lt;SelectListItem&gt; CategoryList { get; set; }
    ....
}


and the following controller method to create a new Project and assign a Category

public ActionResult Create()
{
    ProjectVM model = new ProjectVM
    {
        CategoryList = new SelectList(db.Categories, &quot;ID&quot;, &quot;Name&quot;)
    }
    return View(model);
}

public ActionResult Create(ProjectVM model)
{
    if (!ModelState.IsValid)
    {
        return View(model);
    }
    // Save and redirect
}


and in the view

@model ProjectVM
....
@using (Html.BeginForm())
{
    ....
    @Html.LabelFor(m =&gt; m.CategoryID)
    @Html.DropDownListFor(m =&gt; m.CategoryID, Model.CategoryList, &quot;-Please select-&quot;)
    @Html.ValidationMessageFor(m =&gt; m.CategoryID)
    ....
    &lt;input type=&quot;submit&quot; value=&quot;Create&quot; /&gt;
}


The view displays correctly but when submitting the form, I get the following error message


  InvalidOperationException: The ViewData item that has the key &#x27;CategoryID&#x27; is of type &#x27;System.Int32&#x27; but must be of type &#x27;IEnumerable&lt;SelectListItem&gt;&#x27;.


The same error occurs using the @Html.DropDownList() method, and if I pass the SelectList using a ViewBag or ViewData.
    "/><meta property="og:title" content="The ViewData item that has the key &#x27;XXX&#x27; is of type &#x27;System.Int32&#x27; but must be of type &#x27;IEnumerable&lt;SelectListItem&gt;&#x27; | Solution Checker"/><meta property="og:description" content="I have the following view model

public class ProjectVM
{
    ....
    [Display(Name = &quot;Category&quot;)]
    [Required(ErrorMessage = &quot;Please select a category&quot;)]
    public int CategoryID { get; set; }
    public IEnumerable&lt;SelectListItem&gt; CategoryList { get; set; }
    ....
}


and the following controller method to create a new Project and assign a Category

public ActionResult Create()
{
    ProjectVM model = new ProjectVM
    {
        CategoryList = new SelectList(db.Categories, &quot;ID&quot;, &quot;Name&quot;)
    }
    return View(model);
}

public ActionResult Create(ProjectVM model)
{
    if (!ModelState.IsValid)
    {
        return View(model);
    }
    // Save and redirect
}


and in the view

@model ProjectVM
....
@using (Html.BeginForm())
{
    ....
    @Html.LabelFor(m =&gt; m.CategoryID)
    @Html.DropDownListFor(m =&gt; m.CategoryID, Model.CategoryList, &quot;-Please select-&quot;)
    @Html.ValidationMessageFor(m =&gt; m.CategoryID)
    ....
    &lt;input type=&quot;submit&quot; value=&quot;Create&quot; /&gt;
}


The view displays correctly but when submitting the form, I get the following error message


  InvalidOperationException: The ViewData item that has the key &#x27;CategoryID&#x27; is of type &#x27;System.Int32&#x27; but must be of type &#x27;IEnumerable&lt;SelectListItem&gt;&#x27;.


The same error occurs using the @Html.DropDownList() method, and if I pass the SelectList using a ViewBag or ViewData.
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"The ViewData item that has the key &apos;XXX&apos; is of type &apos;System.Int32&apos; but must be of type &apos;IEnumerable&lt;SelectListItem&gt;&apos;","text":"I have the following view model\n\npublic class ProjectVM\n{\n    ....\n    [Display(Name = &quot;Category&quot;)]\n    [Required(ErrorMessage = &quot;Please select a category&quot;)]\n    public int CategoryID { get; set; }\n    public IEnumerable&lt;SelectListItem&gt; CategoryList { get; set; }\n    ....\n}\n\n\nand the following controller method to create a new Project and assign a Category\n\npublic ActionResult Create()\n{\n    ProjectVM model = new ProjectVM\n    {\n        CategoryList = new SelectList(db.Categories, &quot;ID&quot;, &quot;Name&quot;)\n    }\n    return View(model);\n}\n\npublic ActionResult Create(ProjectVM model)\n{\n    if (!ModelState.IsValid)\n    {\n        return View(model);\n    }\n    // Save and redirect\n}\n\n\nand in the view\n\n@model ProjectVM\n....\n@using (Html.BeginForm())\n{\n    ....\n    @Html.LabelFor(m =&gt; m.CategoryID)\n    @Html.DropDownListFor(m =&gt; m.CategoryID, Model.CategoryList, &quot;-Please select-&quot;)\n    @Html.ValidationMessageFor(m =&gt; m.CategoryID)\n    ....\n    &lt;input type=&quot;submit&quot; value=&quot;Create&quot; /&gt;\n}\n\n\nThe view displays correctly but when submitting the form, I get the following error message\n\n\n  InvalidOperationException: The ViewData item that has the key &apos;CategoryID&apos; is of type &apos;System.Int32&apos; but must be of type &apos;IEnumerable&lt;SelectListItem&gt;&apos;.\n\n\nThe same error occurs using the @Html.DropDownList() method, and if I pass the SelectList using a ViewBag or ViewData.\n    ","answerCount":6,"upVoteCount":500,"suggestedAnswer":[{"text":"The error means that the value of CategoryList  is null (and as a result the DropDownListFor() method expects that the first parameter is of type IEnumerable&lt;SelectListItem&gt;).\n\nYou are not generating an input for each property of each SelectListItem in CategoryList (and nor should you) so no values for the SelectList are posted to the controller method, and therefore the value of model.CategoryList in the POST method is null. If you return the view, you must first reassign the value of CategoryList, just as you did in the GET method.\n\npublic ActionResult Create(ProjectVM model)\n{\n    if (!ModelState.IsValid)\n    {\n        model.CategoryList = new SelectList(db.Categories, &quot;ID&quot;, &quot;Name&quot;); // add this\n        return View(model);\n    }\n    // Save and redirect\n}\n\n\nTo explain the inner workings (the source code can be seen here)\n\nEach overload of DropDownList() and DropDownListFor() eventually calls the following method\n\nprivate static MvcHtmlString SelectInternal(this HtmlHelper htmlHelper, ModelMetadata metadata,\n  string optionLabel, string name, IEnumerable&lt;SelectListItem&gt; selectList, bool allowMultiple,\n  IDictionary&lt;string, object&gt; htmlAttributes)\n\n\nwhich checks if the selectList (the second parameter of @Html.DropDownListFor()) is null\n\n// If we got a null selectList, try to use ViewData to get the list of items.\nif (selectList == null)\n{\n    selectList = htmlHelper.GetSelectData(name);\n    usedViewData = true;\n}\n\n\nwhich in turn calls \n\nprivate static IEnumerable&lt;SelectListItem&gt; GetSelectData(this HtmlHelper htmlHelper, string name)\n\n\nwhich evaluates the the first parameter of @Html.DropDownListFor() (in this case CategoryID)\n\n....\no = htmlHelper.ViewData.Eval(name);\n....\nIEnumerable&lt;SelectListItem&gt; selectList = o as IEnumerable&lt;SelectListItem&gt;;\nif (selectList == null)\n{\n    throw new InvalidOperationException(String.Format(CultureInfo.CurrentCulture, \n        MvcResources.HtmlHelper_WrongSelectDataType,\n        name, o.GetType().FullName, &quot;IEnumerable&lt;SelectListItem&gt;&quot;));\n}\n\n\nBecause property CategoryID is typeof int, it cannot be cast to IEnumerable&lt;SelectListItem&gt; and the exception is thrown (which is defined in the MvcResources.resx file as)\n\n&lt;data name=&quot;HtmlHelper_WrongSelectDataType&quot; xml:space=&quot;preserve&quot;&gt;\n    &lt;value&gt;The ViewData item that has the key &apos;{0}&apos; is of type &apos;{1}&apos; but must be of type &apos;{2}&apos;.&lt;/value&gt;\n&lt;/data&gt;\n\n    ","url":"https://solutionschecker.com/questions/the-viewdata-item-that-has-the-key-&apos;xxx&apos;-is-of-type-&apos;system.int32&apos;-but-must-be-of-type-&apos;ienumerablelessselectlistitemgreater&apos;-1657388454191#solution1","@type":"Answer","upvoteCount":0},{"text":"according to stephens (user3559349) answer, this can be useful:\n\n@Html.DropDownListFor(m =&gt; m.CategoryID, Model.CategoryList ?? new List&lt;SelectListItem&gt;(), &quot;-Please select-&quot;)\n\n\nor in ProjectVM:\n\npublic class ProjectVM\n{\n    public ProjectVM()\n    {\n        CategoryList = new List&lt;SelectListItem&gt;();\n    }\n    ...\n}\n\n    ","url":"https://solutionschecker.com/questions/the-viewdata-item-that-has-the-key-&apos;xxx&apos;-is-of-type-&apos;system.int32&apos;-but-must-be-of-type-&apos;ienumerablelessselectlistitemgreater&apos;-1657388454191#solution2","@type":"Answer","upvoteCount":0},{"text":"Most Likely Caused some sort of error redirecting to your page and you not initializing your model&apos;s drop down lists again. \n\nMake sure that you initialize your drop downs in either the model&apos;s constructor or every time before you send said model to the page. \n\nOtherwise you will need to maintain the state of the drop down lists either through the view bag or through the hidden value helpers. \n    ","url":"https://solutionschecker.com/questions/the-viewdata-item-that-has-the-key-&apos;xxx&apos;-is-of-type-&apos;system.int32&apos;-but-must-be-of-type-&apos;ienumerablelessselectlistitemgreater&apos;-1657388454191#solution3","@type":"Answer","upvoteCount":0},{"text":"OK, the poster&apos;s canned answer neatly explained why the error occurred, but not how to get it to work. I&apos;m not sure that&apos;s really an answer, but it did point me in the right direction. \n\nI ran into the same issue and found a slick way to resolve it. I&apos;ll try to capture that here. Disclaimer - I work on web pages once a year or so and really don&apos;t know what I&apos;m doing most of the time. This answer should in no way be considered an &quot;expert&quot; answer, but it does the job with little work...\n\nGiven that I have some data object (most likely a Data Transfer Object) that I want to use a drop-down list to supply valid values for a field, like so:\n\npublic class MyDataObject\n{\n  public int id;\n  public string StrValue;\n}\n\n\nThen the ViewModel looks like this:\n\npublic class MyDataObjectVM\n{\n  public int id;\n\n  public string StrValue;\n  public List&lt;SectListItem&gt; strValues;\n}\n\n\nThe real problem here, as @Stephen so eloquently described above, is the select list isn&apos;t populated on the POST method in the controller. So your controller methods would look like this:\n\n// GET\npublic ActionResult Create()\n{\n  var dataObjectVM = GetNewMyDataObjectVM();\n  return View(dataObjectVM); // I use T4MVC, don&apos;t you?\n}\n\nprivate MyDataObjectVM GetNewMyDataObjectVM(MyDataObjectVM model = null)\n{\n  return new MyDataObjectVM\n  {\n    int id = model?.Id ?? 0,\n    string StrValue = model?.StrValue ?? &quot;&quot;, \n    var strValues = new List&lt;SelectListItem&gt; \n      { \n        new SelectListItem {Text = &quot;Select&quot;, Value = &quot;&quot;},\n        new SelectListITem {Text = &quot;Item1&quot;, Value = &quot;Item1&quot;},\n        new SelectListItem {Text = &quot;Item2&quot;, Value = &quot;Item2&quot;}\n      };\n  };\n}\n\n// POST\npublic ActionResult Create(FormCollection formValues)\n{\n  var dataObject = new MyDataObject();\n\n  try\n  {\n    UpdateModel(dataObject, formValues);\n    AddObjectToObjectStore(dataObject);\n\n    return RedirectToAction(Actions.Index);\n  }\n  catch (Exception ex)\n  {\n    // fill in the drop-down list for the view model\n    var dataObjectVM = GetNewMyDataObjectVM();\n    ModelState.AddModelError(&quot;&quot;, ex.Message);\n\n    return View(dataObjectVM);\n  )\n}\n\n\nThere you have it. This is NOT working code, I copy/pasted and edited to make it simple, but you get the idea. If the data members in both the original data model and the derived view model have the same name, UpdateModel() does an awesome job of filling in just the right data for you from the FormCollection values.\n\nI&apos;m posting this here so I can find the answer when I inevitably run into this issue again -- hopefully it will help someone else out as well.\n    ","url":"https://solutionschecker.com/questions/the-viewdata-item-that-has-the-key-&apos;xxx&apos;-is-of-type-&apos;system.int32&apos;-but-must-be-of-type-&apos;ienumerablelessselectlistitemgreater&apos;-1657388454191#solution4","@type":"Answer","upvoteCount":0},{"text":"I had the same problem, I was getting an invalid ModelState when I tried to post the form. For me, this was caused by setting CategoryId to int, when I changed it to string the ModelState was valid and the Create method worked as expected.\n    ","url":"https://solutionschecker.com/questions/the-viewdata-item-that-has-the-key-&apos;xxx&apos;-is-of-type-&apos;system.int32&apos;-but-must-be-of-type-&apos;ienumerablelessselectlistitemgreater&apos;-1657388454191#solution5","@type":"Answer","upvoteCount":0},{"text":"In my case the first ID in my list was zero, once I changed the ID to start from 1, it worked.\n    ","url":"https://solutionschecker.com/questions/the-viewdata-item-that-has-the-key-&apos;xxx&apos;-is-of-type-&apos;system.int32&apos;-but-must-be-of-type-&apos;ienumerablelessselectlistitemgreater&apos;-1657388454191#solution6","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><script id="google-analytics" data-nscript="beforeInteractive">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NXVLL8B');</script><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-862498b6ec7885c3.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-47289857226115f9.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_buildManifest.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_ssgManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXVLL8B"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/the-viewdata-item-that-has-the-key-&#x27;xxx&#x27;-is-of-type-&#x27;system.int32&#x27;-but-must-be-of-type-&#x27;ienumerablelessselectlistitemgreater&#x27;-1657388454191#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/the-viewdata-item-that-has-the-key-&#x27;xxx&#x27;-is-of-type-&#x27;system.int32&#x27;-but-must-be-of-type-&#x27;ienumerablelessselectlistitemgreater&#x27;-1657388454191"><h1>The ViewData item that has the key &#x27;XXX&#x27; is of type &#x27;System.Int32&#x27; but must be of type &#x27;IEnumerable&lt;SelectListItem&gt;&#x27;</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>I have the following view model</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProjectVM</span>
{
    ....
    [<span class="hljs-meta">Display(Name = <span class="hljs-string">"Category"</span>)</span>]
    [<span class="hljs-meta">Required(ErrorMessage = <span class="hljs-string">"Please select a category"</span>)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> CategoryID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> IEnumerable&lt;SelectListItem&gt; CategoryList { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    ....
}
</code></pre>

<p>and the following controller method to create a new Project and assign a <code>Category</code></p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Create</span>()</span>
{
    ProjectVM model = <span class="hljs-keyword">new</span> ProjectVM
    {
        CategoryList = <span class="hljs-keyword">new</span> SelectList(db.Categories, <span class="hljs-string">"ID"</span>, <span class="hljs-string">"Name"</span>)
    }
    <span class="hljs-keyword">return</span> View(model);
}

<span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Create</span>(<span class="hljs-params">ProjectVM model</span>)</span>
{
    <span class="hljs-keyword">if</span> (!ModelState.IsValid)
    {
        <span class="hljs-keyword">return</span> View(model);
    }
    <span class="hljs-comment">// Save and redirect</span>
}
</code></pre>

<p>and in the view</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp">@model ProjectVM
....
@using (Html.BeginForm())
{
    ....
    @Html.LabelFor(m =&gt; m.CategoryID)
    @Html.DropDownListFor(m =&gt; m.CategoryID, Model.CategoryList, <span class="hljs-string">"-Please select-"</span>)
    @Html.ValidationMessageFor(m =&gt; m.CategoryID)
    ....
    &lt;input type=<span class="hljs-string">"submit"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"Create"</span> /&gt;
}
</code></pre>

<p>The view displays correctly but when submitting the form, I get the following error message</p>

<blockquote>
  <p>InvalidOperationException: The ViewData item that has the key 'CategoryID' is of type 'System.Int32' but must be of type 'IEnumerable&lt;SelectListItem&gt;'.</p>
</blockquote>

<p>The same error occurs using the <code>@Html.DropDownList()</code> method, and if I pass the SelectList using a <code>ViewBag</code> or <code>ViewData</code>.</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The error means that the value of <code>CategoryList</code>  is null (and as a result the <code>DropDownListFor()</code> method expects that the first parameter is of type <code>IEnumerable&lt;SelectListItem&gt;</code>).</p>

<p>You are not generating an input for each property of each <code>SelectListItem</code> in <code>CategoryList</code> (and nor should you) so no values for the <code>SelectList</code> are posted to the controller method, and therefore the value of <code>model.CategoryList</code> in the POST method is <code>null</code>. If you return the view, you must first reassign the value of <code>CategoryList</code>, just as you did in the GET method.</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Create</span>(<span class="hljs-params">ProjectVM model</span>)</span>
{
    <span class="hljs-keyword">if</span> (!ModelState.IsValid)
    {
        model.CategoryList = <span class="hljs-keyword">new</span> SelectList(db.Categories, <span class="hljs-string">"ID"</span>, <span class="hljs-string">"Name"</span>); <span class="hljs-comment">// add this</span>
        <span class="hljs-keyword">return</span> View(model);
    }
    <span class="hljs-comment">// Save and redirect</span>
}
</code></pre>

<p>To explain the inner workings (the source code can be <a href="https://aspnetwebstack.codeplex.com/SourceControl/latest#src/System.Web.Mvc/Html/SelectExtensions.cs">seen here</a>)</p>

<p>Each overload of <code>DropDownList()</code> and <code>DropDownListFor()</code> eventually calls the following method</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> MvcHtmlString <span class="hljs-title">SelectInternal</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> HtmlHelper htmlHelper, ModelMetadata metadata,
  <span class="hljs-built_in">string</span> optionLabel, <span class="hljs-built_in">string</span> name, IEnumerable&lt;SelectListItem&gt; selectList, <span class="hljs-built_in">bool</span> allowMultiple,
  IDictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt; htmlAttributes</span>)
</span></code></pre>

<p>which checks if the <code>selectList</code> (the second parameter of <code>@Html.DropDownListFor()</code>) is <code>null</code></p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-comment">// If we got a null selectList, try to use ViewData to get the list of items.</span>
<span class="hljs-keyword">if</span> (selectList == <span class="hljs-literal">null</span>)
{
    selectList = htmlHelper.GetSelectData(name);
    usedViewData = <span class="hljs-literal">true</span>;
}
</code></pre>

<p>which in turn calls </p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IEnumerable&lt;SelectListItem&gt; <span class="hljs-title">GetSelectData</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> HtmlHelper htmlHelper, <span class="hljs-built_in">string</span> name</span>)
</span></code></pre>

<p>which evaluates the the first parameter of <code>@Html.DropDownListFor()</code> (in this case <code>CategoryID</code>)</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp">....
o = htmlHelper.ViewData.Eval(name);
....
IEnumerable&lt;SelectListItem&gt; selectList = o <span class="hljs-keyword">as</span> IEnumerable&lt;SelectListItem&gt;;
<span class="hljs-keyword">if</span> (selectList == <span class="hljs-literal">null</span>)
{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidOperationException(String.Format(CultureInfo.CurrentCulture, 
        MvcResources.HtmlHelper_WrongSelectDataType,
        name, o.GetType().FullName, <span class="hljs-string">"IEnumerable&lt;SelectListItem&gt;"</span>));
}
</code></pre>

<p>Because property <code>CategoryID</code> is typeof <code>int</code>, it cannot be cast to <code>IEnumerable&lt;SelectListItem&gt;</code> and the exception is thrown (which is defined in the <code>MvcResources.resx</code> file as)</p>

<pre class="lang-xml s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">data</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"HtmlHelper_WrongSelectDataType"</span> <span class="hljs-attr">xml:space</span>=<span class="hljs-string">"preserve"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>The ViewData item that has the key '{0}' is of type '{1}' but must be of type '{2}'.<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">data</span>&gt;</span>
</code></pre>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>according to stephens (user3559349) <a href="https://stackoverflow.com/questions/34366305/the-viewdata-item-that-has-the-key-xxx-is-of-type-system-int32-but-must-be-o/#answer-34366306">answer</a>, this can be useful:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp">@Html.DropDownListFor(m =&gt; m.CategoryID, Model.CategoryList ?? <span class="hljs-keyword">new</span> List&lt;SelectListItem&gt;(), <span class="hljs-string">"-Please select-"</span>)
</code></pre>

<p>or in ProjectVM:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProjectVM</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ProjectVM</span>()</span>
    {
        CategoryList = <span class="hljs-keyword">new</span> List&lt;SelectListItem&gt;();
    }
    ...
}
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Most Likely Caused some sort of error redirecting to your page and you not initializing your model's drop down lists again. </p>

<p>Make sure that you initialize your drop downs in either the model's constructor or every time before you send said model to the page. </p>

<p>Otherwise you will need to maintain the state of the drop down lists either through the view bag or through the hidden value helpers. </p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>OK, the poster's canned answer neatly explained <em>why</em> the error occurred, but not how to get it to work. I'm not sure that's really an answer, but it did point me in the right direction. </p>

<p>I ran into the same issue and found a slick way to resolve it. I'll try to capture that here. Disclaimer - I work on web pages once a year or so and really don't know what I'm doing most of the time. This answer should in no way be considered an "expert" answer, but it does the job with little work...</p>

<p>Given that I have some data object (most likely a Data Transfer Object) that I want to use a drop-down list to supply valid values for a field, like so:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyDataObject</span>
{
  <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> id;
  <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> StrValue;
}
</code></pre>

<p>Then the ViewModel looks like this:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyDataObjectVM</span>
{
  <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> id;

  <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> StrValue;
  <span class="hljs-keyword">public</span> List&lt;SectListItem&gt; strValues;
}
</code></pre>

<p>The real problem here, as @Stephen so eloquently described above, is the select list isn't populated on the POST method in the controller. So your controller methods would look like this:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-comment">// GET</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Create</span>()</span>
{
  <span class="hljs-keyword">var</span> dataObjectVM = GetNewMyDataObjectVM();
  <span class="hljs-keyword">return</span> View(dataObjectVM); <span class="hljs-comment">// I use T4MVC, don't you?</span>
}

<span class="hljs-function"><span class="hljs-keyword">private</span> MyDataObjectVM <span class="hljs-title">GetNewMyDataObjectVM</span>(<span class="hljs-params">MyDataObjectVM model = <span class="hljs-literal">null</span></span>)</span>
{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MyDataObjectVM
  {
    <span class="hljs-built_in">int</span> id = model?.Id ?? <span class="hljs-number">0</span>,
    <span class="hljs-built_in">string</span> StrValue = model?.StrValue ?? <span class="hljs-string">""</span>, 
    <span class="hljs-keyword">var</span> strValues = <span class="hljs-keyword">new</span> List&lt;SelectListItem&gt; 
      { 
        <span class="hljs-keyword">new</span> SelectListItem {Text = <span class="hljs-string">"Select"</span>, Value = <span class="hljs-string">""</span>},
        <span class="hljs-keyword">new</span> SelectListITem {Text = <span class="hljs-string">"Item1"</span>, Value = <span class="hljs-string">"Item1"</span>},
        <span class="hljs-keyword">new</span> SelectListItem {Text = <span class="hljs-string">"Item2"</span>, Value = <span class="hljs-string">"Item2"</span>}
      };
  };
}

<span class="hljs-comment">// POST</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Create</span>(<span class="hljs-params">FormCollection formValues</span>)</span>
{
  <span class="hljs-keyword">var</span> dataObject = <span class="hljs-keyword">new</span> MyDataObject();

  <span class="hljs-keyword">try</span>
  {
    UpdateModel(dataObject, formValues);
    AddObjectToObjectStore(dataObject);

    <span class="hljs-keyword">return</span> RedirectToAction(Actions.Index);
  }
  <span class="hljs-keyword">catch</span> (Exception ex)
  {
    <span class="hljs-comment">// fill in the drop-down list for the view model</span>
    <span class="hljs-keyword">var</span> dataObjectVM = GetNewMyDataObjectVM();
    ModelState.AddModelError(<span class="hljs-string">""</span>, ex.Message);

    <span class="hljs-keyword">return</span> View(dataObjectVM);
  )
}
</code></pre>

<p>There you have it. This is NOT working code, I copy/pasted and edited to make it simple, but you get the idea. If the data members in both the original data model and the derived view model have the same name, UpdateModel() does an awesome job of filling in just the right data for you from the FormCollection values.</p>

<p>I'm posting this here so I can find the answer when I inevitably run into this issue again -- hopefully it will help someone else out as well.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I had the same problem, I was getting an invalid ModelState when I tried to post the form. For me, this was caused by setting CategoryId to int, when I changed it to string the ModelState was valid and the Create method worked as expected.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In my case the first ID in my list was zero, once I changed the ID to start from 1, it worked.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/php-mail-function-doesn&#x27;t-complete-sending-of-e-mail-1657384307499">PHP mail function doesn&#x27;t complete sending of e-mail</a><a href="/questions/are-&#x27;arrow-functions&#x27;-and-&#x27;functions&#x27;-equivalent-interchangeable-1657384527873">Are &#x27;Arrow Functions&#x27; and &#x27;Functions&#x27; equivalent / interchangeable?</a><a href="/questions/using-asyncawait-with-a-foreach-loop-1657384512667">Using async/await with a forEach loop</a><a href="/questions/how-do-javascript-closures-work-1657384418555">How do JavaScript closures work?</a><a href="/questions/what-is-a-raw-type-and-why-shouldn&#x27;t-we-use-it-1657384481079">What is a raw type and why shouldn&#x27;t we use it?</a><a href="/questions/which-characters-are-valid-in-css-class-namesselectors-1657387959188">Which characters are valid in CSS class names/selectors?</a><a href="/questions/javascript-closure-inside-loops-simple-practical-example-1657384278449">JavaScript closure inside loops â€“ simple practical example</a><a href="/questions/is-it-safe-to-expose-firebase-apikey-to-the-public-1657388268111">Is it safe to expose Firebase apiKey to the public?</a><a href="/questions/how-do-you-use-bcrypt-for-hashing-passwords-in-php-duplicate-1657387318517">How do you use bcrypt for hashing passwords in PHP? [duplicate]</a><a href="/questions/why-does-this-unboundlocalerror-occur-(closure)-duplicate-1657388531538">Why does this UnboundLocalError occur (closure)? [duplicate]</a><a href="/questions/how-do-i-make-a-flat-list-out-of-a-list-of-lists-1657384500439">How do I make a flat list out of a list of lists?</a><a href="/questions/what-is-selenium-and-what-is-webdriver-1657385470372">What Is Selenium And What Is WebDriver?</a><a href="/questions/official-locator-strategies-for-the-webdriver-1657384353174">Official locator strategies for the webdriver</a><a href="/questions/how-do-function-pointers-in-c-work-1657388332074">How do function pointers in C work?</a><a href="/questions/sorting-an-array-of-objects-by-property-values-1657387447490">Sorting an array of objects by property values</a><a href="/questions/should-i-avoid-the-use-of-set(preferredormaximumorminimum)size-methods-in-java-swing-1657384628399">Should I avoid the use of set(Preferred|Maximum|Minimum)Size methods in Java Swing?</a><a href="/questions/jstl-in-jsf2-facelets...-makes-sense-1657387667435">JSTL in JSF2 Facelets... makes sense?</a><a href="/questions/how-can-i-get-useful-error-messages-in-php-1657384609065">How can I get useful error messages in PHP?</a><a href="/questions/how-can-i-sort-arrays-and-data-in-php-1657384726665">How can I sort arrays and data in PHP?</a><a href="/questions/arrays-linked-lists-and-other-data-structures-in-cmd.exe-(batch)-script-1657387558484">Arrays, linked lists and other data structures in cmd.exe (batch) script</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;The error means that the value of \u0026lt;code\u0026gt;CategoryList\u0026lt;/code\u0026gt;  is null (and as a result the \u0026lt;code\u0026gt;DropDownListFor()\u0026lt;/code\u0026gt; method expects that the first parameter is of type \u0026lt;code\u0026gt;IEnumerable\u0026amp;lt;SelectListItem\u0026amp;gt;\u0026lt;/code\u0026gt;).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You are not generating an input for each property of each \u0026lt;code\u0026gt;SelectListItem\u0026lt;/code\u0026gt; in \u0026lt;code\u0026gt;CategoryList\u0026lt;/code\u0026gt; (and nor should you) so no values for the \u0026lt;code\u0026gt;SelectList\u0026lt;/code\u0026gt; are posted to the controller method, and therefore the value of \u0026lt;code\u0026gt;model.CategoryList\u0026lt;/code\u0026gt; in the POST method is \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt;. If you return the view, you must first reassign the value of \u0026lt;code\u0026gt;CategoryList\u0026lt;/code\u0026gt;, just as you did in the GET method.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; ActionResult \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Create\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;ProjectVM model\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!ModelState.IsValid)\n    {\n        model.CategoryList = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; SelectList(db.Categories, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ID\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Name\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// add this\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; View(model);\n    }\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Save and redirect\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;To explain the inner workings (the source code can be \u0026lt;a href=\u0026quot;https://aspnetwebstack.codeplex.com/SourceControl/latest#src/System.Web.Mvc/Html/SelectExtensions.cs\u0026quot;\u0026gt;seen here\u0026lt;/a\u0026gt;)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Each overload of \u0026lt;code\u0026gt;DropDownList()\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;DropDownListFor()\u0026lt;/code\u0026gt; eventually calls the following method\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; MvcHtmlString \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;SelectInternal\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt; HtmlHelper htmlHelper, ModelMetadata metadata,\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; optionLabel, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; name, IEnumerable\u0026amp;lt;SelectListItem\u0026amp;gt; selectList, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt; allowMultiple,\n  IDictionary\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;\u0026amp;gt; htmlAttributes\u0026lt;/span\u0026gt;)\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;which checks if the \u0026lt;code\u0026gt;selectList\u0026lt;/code\u0026gt; (the second parameter of \u0026lt;code\u0026gt;@Html.DropDownListFor()\u0026lt;/code\u0026gt;) is \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// If we got a null selectList, try to use ViewData to get the list of items.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (selectList == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;)\n{\n    selectList = htmlHelper.GetSelectData(name);\n    usedViewData = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;which in turn calls \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; IEnumerable\u0026amp;lt;SelectListItem\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;GetSelectData\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt; HtmlHelper htmlHelper, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; name\u0026lt;/span\u0026gt;)\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;which evaluates the the first parameter of \u0026lt;code\u0026gt;@Html.DropDownListFor()\u0026lt;/code\u0026gt; (in this case \u0026lt;code\u0026gt;CategoryID\u0026lt;/code\u0026gt;)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;....\no = htmlHelper.ViewData.Eval(name);\n....\nIEnumerable\u0026amp;lt;SelectListItem\u0026amp;gt; selectList = o \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; IEnumerable\u0026amp;lt;SelectListItem\u0026amp;gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (selectList == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;)\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; InvalidOperationException(String.Format(CultureInfo.CurrentCulture, \n        MvcResources.HtmlHelper_WrongSelectDataType,\n        name, o.GetType().FullName, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;IEnumerable\u0026amp;lt;SelectListItem\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;));\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Because property \u0026lt;code\u0026gt;CategoryID\u0026lt;/code\u0026gt; is typeof \u0026lt;code\u0026gt;int\u0026lt;/code\u0026gt;, it cannot be cast to \u0026lt;code\u0026gt;IEnumerable\u0026amp;lt;SelectListItem\u0026amp;gt;\u0026lt;/code\u0026gt; and the exception is thrown (which is defined in the \u0026lt;code\u0026gt;MvcResources.resx\u0026lt;/code\u0026gt; file as)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-xml s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;HtmlHelper_WrongSelectDataType\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;xml:space\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;preserve\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;The ViewData item that has the key \u0026apos;{0}\u0026apos; is of type \u0026apos;{1}\u0026apos; but must be of type \u0026apos;{2}\u0026apos;.\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;according to stephens (user3559349) \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/34366305/the-viewdata-item-that-has-the-key-xxx-is-of-type-system-int32-but-must-be-o/#answer-34366306\u0026quot;\u0026gt;answer\u0026lt;/a\u0026gt;, this can be useful:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;@Html.DropDownListFor(m =\u0026amp;gt; m.CategoryID, Model.CategoryList ?? \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; List\u0026amp;lt;SelectListItem\u0026amp;gt;(), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-Please select-\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or in ProjectVM:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;ProjectVM\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;ProjectVM\u0026lt;/span\u0026gt;()\u0026lt;/span\u0026gt;\n    {\n        CategoryList = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; List\u0026amp;lt;SelectListItem\u0026amp;gt;();\n    }\n    ...\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Most Likely Caused some sort of error redirecting to your page and you not initializing your model\u0026apos;s drop down lists again. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Make sure that you initialize your drop downs in either the model\u0026apos;s constructor or every time before you send said model to the page. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Otherwise you will need to maintain the state of the drop down lists either through the view bag or through the hidden value helpers. \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;OK, the poster\u0026apos;s canned answer neatly explained \u0026lt;em\u0026gt;why\u0026lt;/em\u0026gt; the error occurred, but not how to get it to work. I\u0026apos;m not sure that\u0026apos;s really an answer, but it did point me in the right direction. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I ran into the same issue and found a slick way to resolve it. I\u0026apos;ll try to capture that here. Disclaimer - I work on web pages once a year or so and really don\u0026apos;t know what I\u0026apos;m doing most of the time. This answer should in no way be considered an \u0026quot;expert\u0026quot; answer, but it does the job with little work...\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Given that I have some data object (most likely a Data Transfer Object) that I want to use a drop-down list to supply valid values for a field, like so:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;MyDataObject\u0026lt;/span\u0026gt;\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; id;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; StrValue;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then the ViewModel looks like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;MyDataObjectVM\u0026lt;/span\u0026gt;\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; id;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; StrValue;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; List\u0026amp;lt;SectListItem\u0026amp;gt; strValues;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The real problem here, as @Stephen so eloquently described above, is the select list isn\u0026apos;t populated on the POST method in the controller. So your controller methods would look like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// GET\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; ActionResult \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Create\u0026lt;/span\u0026gt;()\u0026lt;/span\u0026gt;\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; dataObjectVM = GetNewMyDataObjectVM();\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; View(dataObjectVM); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// I use T4MVC, don\u0026apos;t you?\u0026lt;/span\u0026gt;\n}\n\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; MyDataObjectVM \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;GetNewMyDataObjectVM\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;MyDataObjectVM model = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; MyDataObjectVM\n  {\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; id = model?.Id ?? \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; StrValue = model?.StrValue ?? \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;, \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; strValues = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; List\u0026amp;lt;SelectListItem\u0026amp;gt; \n      { \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; SelectListItem {Text = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Select\u0026quot;\u0026lt;/span\u0026gt;, Value = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;},\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; SelectListITem {Text = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Item1\u0026quot;\u0026lt;/span\u0026gt;, Value = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Item1\u0026quot;\u0026lt;/span\u0026gt;},\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; SelectListItem {Text = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Item2\u0026quot;\u0026lt;/span\u0026gt;, Value = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Item2\u0026quot;\u0026lt;/span\u0026gt;}\n      };\n  };\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// POST\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; ActionResult \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Create\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;FormCollection formValues\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; dataObject = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; MyDataObject();\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;\n  {\n    UpdateModel(dataObject, formValues);\n    AddObjectToObjectStore(dataObject);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; RedirectToAction(Actions.Index);\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex)\n  {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// fill in the drop-down list for the view model\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; dataObjectVM = GetNewMyDataObjectVM();\n    ModelState.AddModelError(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;, ex.Message);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; View(dataObjectVM);\n  )\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;There you have it. This is NOT working code, I copy/pasted and edited to make it simple, but you get the idea. If the data members in both the original data model and the derived view model have the same name, UpdateModel() does an awesome job of filling in just the right data for you from the FormCollection values.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I\u0026apos;m posting this here so I can find the answer when I inevitably run into this issue again -- hopefully it will help someone else out as well.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I had the same problem, I was getting an invalid ModelState when I tried to post the form. For me, this was caused by setting CategoryId to int, when I changed it to string the ModelState was valid and the Create method worked as expected.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In my case the first ID in my list was zero, once I changed the ID to start from 1, it worked.\u0026lt;/p\u0026gt;\n    "],"id":571,"title":"The ViewData item that has the key 'XXX' is of type 'System.Int32' but must be of type 'IEnumerable\u003cSelectListItem\u003e'","content":"\n                \n\u0026lt;p\u0026gt;I have the following view model\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;ProjectVM\u0026lt;/span\u0026gt;\n{\n    ....\n    [\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;Display(Name = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Category\u0026quot;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;]\n    [\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;Required(ErrorMessage = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Please select a category\u0026quot;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;]\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; CategoryID { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;; }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; IEnumerable\u0026amp;lt;SelectListItem\u0026amp;gt; CategoryList { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;; }\n    ....\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and the following controller method to create a new Project and assign a \u0026lt;code\u0026gt;Category\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; ActionResult \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Create\u0026lt;/span\u0026gt;()\u0026lt;/span\u0026gt;\n{\n    ProjectVM model = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; ProjectVM\n    {\n        CategoryList = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; SelectList(db.Categories, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ID\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Name\u0026quot;\u0026lt;/span\u0026gt;)\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; View(model);\n}\n\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; ActionResult \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Create\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;ProjectVM model\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!ModelState.IsValid)\n    {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; View(model);\n    }\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Save and redirect\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and in the view\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;@model ProjectVM\n....\n@using (Html.BeginForm())\n{\n    ....\n    @Html.LabelFor(m =\u0026amp;gt; m.CategoryID)\n    @Html.DropDownListFor(m =\u0026amp;gt; m.CategoryID, Model.CategoryList, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-Please select-\u0026quot;\u0026lt;/span\u0026gt;)\n    @Html.ValidationMessageFor(m =\u0026amp;gt; m.CategoryID)\n    ....\n    \u0026amp;lt;input type=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;submit\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Create\u0026quot;\u0026lt;/span\u0026gt; /\u0026amp;gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The view displays correctly but when submitting the form, I get the following error message\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;InvalidOperationException: The ViewData item that has the key \u0026apos;CategoryID\u0026apos; is of type \u0026apos;System.Int32\u0026apos; but must be of type \u0026apos;IEnumerable\u0026amp;lt;SelectListItem\u0026amp;gt;\u0026apos;.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;The same error occurs using the \u0026lt;code\u0026gt;@Html.DropDownList()\u0026lt;/code\u0026gt; method, and if I pass the SelectList using a \u0026lt;code\u0026gt;ViewBag\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;ViewData\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    ","slug":"the-viewdata-item-that-has-the-key-'xxx'-is-of-type-'system.int32'-but-must-be-of-type-'ienumerablelessselectlistitemgreater'-1657388454191","postType":"QUESTION","createdAt":"2022-07-09T17:40:54.000Z","updatedAt":"2022-07-09T17:40:54.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"PHP mail function doesn't complete sending of e-mail","slug":"php-mail-function-doesn't-complete-sending-of-e-mail-1657384307499"},{"title":"Are 'Arrow Functions' and 'Functions' equivalent / interchangeable?","slug":"are-'arrow-functions'-and-'functions'-equivalent-interchangeable-1657384527873"},{"title":"Using async/await with a forEach loop","slug":"using-asyncawait-with-a-foreach-loop-1657384512667"},{"title":"How do JavaScript closures work?","slug":"how-do-javascript-closures-work-1657384418555"},{"title":"What is a raw type and why shouldn't we use it?","slug":"what-is-a-raw-type-and-why-shouldn't-we-use-it-1657384481079"},{"title":"Which characters are valid in CSS class names/selectors?","slug":"which-characters-are-valid-in-css-class-namesselectors-1657387959188"},{"title":"JavaScript closure inside loops â€“ simple practical example","slug":"javascript-closure-inside-loops-simple-practical-example-1657384278449"},{"title":"Is it safe to expose Firebase apiKey to the public?","slug":"is-it-safe-to-expose-firebase-apikey-to-the-public-1657388268111"},{"title":"How do you use bcrypt for hashing passwords in PHP? [duplicate]","slug":"how-do-you-use-bcrypt-for-hashing-passwords-in-php-duplicate-1657387318517"},{"title":"Why does this UnboundLocalError occur (closure)? [duplicate]","slug":"why-does-this-unboundlocalerror-occur-(closure)-duplicate-1657388531538"},{"title":"How do I make a flat list out of a list of lists?","slug":"how-do-i-make-a-flat-list-out-of-a-list-of-lists-1657384500439"},{"title":"What Is Selenium And What Is WebDriver?","slug":"what-is-selenium-and-what-is-webdriver-1657385470372"},{"title":"Official locator strategies for the webdriver","slug":"official-locator-strategies-for-the-webdriver-1657384353174"},{"title":"How do function pointers in C work?","slug":"how-do-function-pointers-in-c-work-1657388332074"},{"title":"Sorting an array of objects by property values","slug":"sorting-an-array-of-objects-by-property-values-1657387447490"},{"title":"Should I avoid the use of set(Preferred|Maximum|Minimum)Size methods in Java Swing?","slug":"should-i-avoid-the-use-of-set(preferredormaximumorminimum)size-methods-in-java-swing-1657384628399"},{"title":"JSTL in JSF2 Facelets... makes sense?","slug":"jstl-in-jsf2-facelets...-makes-sense-1657387667435"},{"title":"How can I get useful error messages in PHP?","slug":"how-can-i-get-useful-error-messages-in-php-1657384609065"},{"title":"How can I sort arrays and data in PHP?","slug":"how-can-i-sort-arrays-and-data-in-php-1657384726665"},{"title":"Arrays, linked lists and other data structures in cmd.exe (batch) script","slug":"arrays-linked-lists-and-other-data-structures-in-cmd.exe-(batch)-script-1657387558484"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"the-viewdata-item-that-has-the-key-'xxx'-is-of-type-'system.int32'-but-must-be-of-type-'ienumerablelessselectlistitemgreater'-1657388454191"},"buildId":"xZs8haGjOP63QuDE0kxeX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>