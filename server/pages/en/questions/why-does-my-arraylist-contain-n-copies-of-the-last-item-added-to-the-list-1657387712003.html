<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/why-does-my-arraylist-contain-n-copies-of-the-last-item-added-to-the-list-1657387712003","name":"Questions"}}]}</script><title>Why does my ArrayList contain N copies of the last item added to the list? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I&#x27;m adding three different objects to an ArrayList, but the list contains three copies of the last object I added. 

For example:

for (Foo f : list) {
  System.out.println(f.getValue());
}    


Expected:

0
1
2


Actual:

2
2
2


What mistake have I made?

Note: this is designed to be a canonical Q&amp;A for the numerous similar issues that arise on this site.
    "/><meta property="og:title" content="Why does my ArrayList contain N copies of the last item added to the list? | Solution Checker"/><meta property="og:description" content="I&#x27;m adding three different objects to an ArrayList, but the list contains three copies of the last object I added. 

For example:

for (Foo f : list) {
  System.out.println(f.getValue());
}    


Expected:

0
1
2


Actual:

2
2
2


What mistake have I made?

Note: this is designed to be a canonical Q&amp;A for the numerous similar issues that arise on this site.
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Why does my ArrayList contain N copies of the last item added to the list?","text":"I&apos;m adding three different objects to an ArrayList, but the list contains three copies of the last object I added. \n\nFor example:\n\nfor (Foo f : list) {\n  System.out.println(f.getValue());\n}    \n\n\nExpected:\n\n0\n1\n2\n\n\nActual:\n\n2\n2\n2\n\n\nWhat mistake have I made?\n\nNote: this is designed to be a canonical Q&amp;A for the numerous similar issues that arise on this site.\n    ","answerCount":5,"upVoteCount":500,"suggestedAnswer":[{"text":"This problem has two typical causes:\n\nStatic fields used by the objects you stored in the list\n\nAccidentally adding the same object to the list\n\n\nStatic Fields\nIf the objects in your list store data in static fields, each object in your list will appear to be the same because they hold the same values. Consider the class below:\npublic class Foo {\n  private static int value; \n  //      ^^^^^^------------ - Here&apos;s the problem!\n  \n  public Foo(int value) {\n    this.value = value;\n  }\n  \n  public int getValue() {\n    return value;\n  }\n}\n\nIn that example, there is only one int value which is shared between all instances of Foo because it is declared static. (See &quot;Understanding Class Members&quot; tutorial.)\nIf you add multiple Foo objects to a list using the code below, each instance will return 3 from a call to getValue():\nfor (int i = 0; i &lt; 4; i++) {      \n  list.add(new Foo(i));\n}\n\nThe solution is simple - don&apos;t use the static keywords for fields in your class unless you actually want the values shared between every instance of that class.\nAdding the Same Object\nIf you add a temporary variable to a list, you must create a new instance of the object you are adding, each time you loop. Consider the following erroneous code snippet:\nList&lt;Foo&gt; list = new ArrayList&lt;Foo&gt;();    \nFoo tmp = new Foo();\n\nfor (int i = 0; i &lt; 3; i++) {\n  tmp.setValue(i);\n  list.add(tmp);\n}\n\nHere, the tmp object was constructed outside the loop. As a result, the same object instance is being added to the list three times. The instance will hold the value 2, because that was the value passed during the last call to setValue().\nTo fix this, just move the object construction inside the loop:\nList&lt;Foo&gt; list = new ArrayList&lt;Foo&gt;();        \n\nfor (int i = 0; i &lt; 3; i++) {\n  Foo tmp = new Foo(); // &lt;-- fresh instance!\n  tmp.setValue(i);\n  list.add(tmp);\n}\n\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"Your problem is with the type static which requires a new initialization every time a loop is iterated. If you are in a loop it is better to keep the concrete initialization inside the loop.\n\nList&lt;Object&gt; objects = new ArrayList&lt;&gt;(); \n\nfor (int i = 0; i &lt; length_you_want; i++) {\n    SomeStaticClass myStaticObject = new SomeStaticClass();\n    myStaticObject.tag = i;\n    // Do stuff with myStaticObject\n    objects.add(myStaticClass);\n}\n\n\nInstead of:\n\nList&lt;Object&gt; objects = new ArrayList&lt;&gt;(); \n\nSomeStaticClass myStaticObject = new SomeStaticClass();\nfor (int i = 0; i &lt; length; i++) {\n    myStaticObject.tag = i;\n    // Do stuff with myStaticObject\n    objects.add(myStaticClass);\n    // This will duplicate the last item &quot;length&quot; times\n}\n\n\nHere tag is a variable in SomeStaticClass to check the validity of the above snippet; you can have some other implementation based on your use case.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Had the same trouble with the calendar instance.\n\nWrong code:\n\nCalendar myCalendar = Calendar.getInstance();\n\nfor (int days = 0; days &lt; daysPerWeek; days++) {\n    myCalendar.add(Calendar.DAY_OF_YEAR, 1);\n\n    // In the next line lies the error\n    Calendar newCal = myCalendar;\n    calendarList.add(newCal);\n}\n\n\nYou have to create a NEW object of the calendar, which can be done with calendar.clone();\n\nCalendar myCalendar = Calendar.getInstance();\n\nfor (int days = 0; days &lt; daysPerWeek; days++) {\n    myCalendar.add(Calendar.DAY_OF_YEAR, 1);\n\n    // RIGHT WAY\n    Calendar newCal = (Calendar) myCalendar.clone();\n    calendarList.add(newCal);\n\n}\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Every time you add an object to an ArrayList, make sure you add a new object and not already used object. What is happening is that when you add the same 1 copy of object, that same object is added to different positions in an ArrayList. And when you make change to one, because the same copy is added over and over again, all the copies get affected. \nFor example,\nSay you have an ArrayList like this:\n\nArrayList&lt;Card&gt; list = new ArrayList&lt;Card&gt;();\nCard c = new Card();\n\n\nNow if you add this Card c to list, it will be added no problem. It will be saved at location 0. But, when you save the same Card c in the list, it will be saved at location 1. So remember that you added same 1 object to two different locations in a list. Now if you make a change that Card object c, the objects in a list at location 0 and 1 will also reflect that change, because they are the same object. \n\nOne solution would be to make a constructor in Card class, that accepts another Card object. Then in that constructor, you can set the properties like this:\n\npublic Card(Card c){\nthis.property1 = c.getProperty1();\nthis.property2 = c.getProperty2(); \n... //add all the properties that you have in this class Card this way\n}\n\n\nAnd lets say you have the same 1 copy of Card, so at the time of adding a new object, you can do this:\n\nlist.add(new Card(nameOfTheCardObjectThatYouWantADifferentCopyOf));\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"It can also consequence of using the same reference instead of using a new one.      \n\n List&lt;Foo&gt; list = new ArrayList&lt;Foo&gt;();        \n\n setdata();\n......\n\npublic void setdata(int i) {\n  Foo temp = new Foo();\n  tmp.setValue(i);\n  list.add(tmp);\n}\n\n\nInstead of: \n\nList&lt;Foo&gt; list = new ArrayList&lt;Foo&gt;(); \nFoo temp = new Foo();       \nsetdata();\n......\n\npublic void setdata(int i) {\n  tmp.setValue(i);\n  list.add(tmp);\n} \n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-260362324a06d105.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-50e201fdaa1e0fd1.js" defer=""></script><script src="/_next/static/5tS3Jli5j89_wXapXajXn/_buildManifest.js" defer=""></script><script src="/_next/static/5tS3Jli5j89_wXapXajXn/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/why-does-my-arraylist-contain-n-copies-of-the-last-item-added-to-the-list-1657387712003#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/why-does-my-arraylist-contain-n-copies-of-the-last-item-added-to-the-list-1657387712003"><h1>Why does my ArrayList contain N copies of the last item added to the list?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>I'm adding three different objects to an ArrayList, but the list contains three copies of the last object I added. </p>

<p>For example:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">for</span> (Foo f : list) {
  System.out.println(f.getValue());
}    
</code></pre>

<p>Expected:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-number">0</span>
<span class="hljs-number">1</span>
<span class="hljs-number">2</span>
</code></pre>

<p>Actual:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-number">2</span>
<span class="hljs-number">2</span>
<span class="hljs-number">2</span>
</code></pre>

<p>What mistake have I made?</p>

<p><sup>Note: this is designed to be a canonical Q&amp;A for the numerous similar issues that arise on this site.</sup></p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This problem has two typical causes:</p>
<ul>
<li><p>Static fields used by the objects you stored in the list</p>
</li>
<li><p>Accidentally adding the <em>same</em> object to the list</p>
</li>
</ul>
<h2>Static Fields</h2>
<p>If the objects in your list store data in static fields, each object in your list will appear to be the same because they hold the same values. Consider the class below:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Foo</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> value; 
  <span class="hljs-comment">//      ^^^^^^------------ - Here's the problem!</span>
  
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">Foo</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> {
    <span class="hljs-built_in">this</span>.value = value;
  }
  
  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getValue</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> value;
  }
}
</code></pre>
<p>In that example, there is only one <code>int value</code> which is shared between all instances of <code>Foo</code> because it is declared <code>static</code>. (See <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html" rel="noreferrer"><em>"Understanding Class Members"</em></a> tutorial.)</p>
<p>If you add multiple <code>Foo</code> objects to a list using the code below, each instance will return <code>3</code> from a call to <code>getValue()</code>:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) {      
  list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>(i));
}
</code></pre>
<p>The solution is simple - don't use the <code>static</code> keywords for fields in your class unless you actually want the values shared between every instance of that class.</p>
<h2>Adding the Same Object</h2>
<p>If you add a temporary variable to a list, you must create a new instance of the object you are adding, each time you loop. Consider the following erroneous code snippet:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">List&lt;Foo&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Foo&gt;();    
<span class="hljs-type">Foo</span> <span class="hljs-variable">tmp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>();

<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  tmp.setValue(i);
  list.add(tmp);
}
</code></pre>
<p>Here, the <code>tmp</code> object was constructed outside the loop. As a result, the <em>same object instance</em> is being added to the list three times. The instance will hold the value <code>2</code>, because that was the value passed during the last call to <code>setValue()</code>.</p>
<p>To fix this, just move the object construction inside the loop:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">List&lt;Foo&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Foo&gt;();        

<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  <span class="hljs-type">Foo</span> <span class="hljs-variable">tmp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>(); <span class="hljs-comment">// &lt;-- fresh instance!</span>
  tmp.setValue(i);
  list.add(tmp);
}
</code></pre>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Your problem is with the type <code>static</code> which requires a new initialization every time a loop is iterated. If you are in a loop it is better to keep the concrete initialization inside the loop.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">List&lt;Object&gt; objects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(); 

<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; length_you_want; i++) {
    <span class="hljs-type">SomeStaticClass</span> <span class="hljs-variable">myStaticObject</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SomeStaticClass</span>();
    myStaticObject.tag = i;
    <span class="hljs-comment">// Do stuff with myStaticObject</span>
    objects.add(myStaticClass);
}
</code></pre>

<p>Instead of:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">List&lt;Object&gt; objects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(); 

<span class="hljs-type">SomeStaticClass</span> <span class="hljs-variable">myStaticObject</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SomeStaticClass</span>();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; length; i++) {
    myStaticObject.tag = i;
    <span class="hljs-comment">// Do stuff with myStaticObject</span>
    objects.add(myStaticClass);
    <span class="hljs-comment">// This will duplicate the last item "length" times</span>
}
</code></pre>

<p>Here <code>tag</code> is a variable in <code>SomeStaticClass</code> to check the validity of the above snippet; you can have some other implementation based on your use case.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Had the same trouble with the calendar instance.</p>

<p>Wrong code:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Calendar</span> <span class="hljs-variable">myCalendar</span> <span class="hljs-operator">=</span> Calendar.getInstance();

<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">days</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; days &lt; daysPerWeek; days++) {
    myCalendar.add(Calendar.DAY_OF_YEAR, <span class="hljs-number">1</span>);

    <span class="hljs-comment">// In the next line lies the error</span>
    <span class="hljs-type">Calendar</span> <span class="hljs-variable">newCal</span> <span class="hljs-operator">=</span> myCalendar;
    calendarList.add(newCal);
}
</code></pre>

<p>You have to create a NEW object of the calendar, which can be done with <code>calendar.clone()</code>;</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Calendar</span> <span class="hljs-variable">myCalendar</span> <span class="hljs-operator">=</span> Calendar.getInstance();

<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">days</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; days &lt; daysPerWeek; days++) {
    myCalendar.add(Calendar.DAY_OF_YEAR, <span class="hljs-number">1</span>);

    <span class="hljs-comment">// RIGHT WAY</span>
    <span class="hljs-type">Calendar</span> <span class="hljs-variable">newCal</span> <span class="hljs-operator">=</span> (Calendar) myCalendar.clone();
    calendarList.add(newCal);

}
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Every time you add an object to an ArrayList, make sure you add a new object and not already used object. What is happening is that when you add the same 1 copy of object, that same object is added to different positions in an ArrayList. And when you make change to one, because the same copy is added over and over again, all the copies get affected. 
For example,
Say you have an ArrayList like this:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">ArrayList&lt;Card&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Card&gt;();
<span class="hljs-type">Card</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Card</span>();
</code></pre>

<p>Now if you add this Card c to list, it will be added no problem. It will be saved at location 0. But, when you save the same Card c in the list, it will be saved at location 1. So remember that you added same 1 object to two different locations in a list. Now if you make a change that Card object c, the objects in a list at location 0 and 1 will also reflect that change, because they are the same object. </p>

<p>One solution would be to make a constructor in Card class, that accepts another Card object. Then in that constructor, you can set the properties like this:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">Card</span><span class="hljs-params">(Card c)</span>{
<span class="hljs-built_in">this</span>.property1 = c.getProperty1();
<span class="hljs-built_in">this</span>.property2 = c.getProperty2(); 
... <span class="hljs-comment">//add all the properties that you have in this class Card this way</span>
}
</code></pre>

<p>And lets say you have the same 1 copy of Card, so at the time of adding a new object, you can do this:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Card</span>(nameOfTheCardObjectThatYouWantADifferentCopyOf));
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It can also consequence of using the same reference instead of using a new one.      </p>

<pre class="lang-java s-code-block"><code class="hljs language-java"> List&lt;Foo&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Foo&gt;();        

 setdata();
......

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setdata</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> {
  <span class="hljs-type">Foo</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>();
  tmp.setValue(i);
  list.add(tmp);
}
</code></pre>

<p>Instead of: </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">List&lt;Foo&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Foo&gt;(); 
<span class="hljs-type">Foo</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>();       
setdata();
......

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setdata</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> {
  tmp.setValue(i);
  list.add(tmp);
} 
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-can-i-pivot-a-dataframe-1657384433802">How can I pivot a dataframe?</a><a href="/questions/how-can-i-make-bootstrap-columns-all-the-same-height-1657388551403">How can I make Bootstrap columns all the same height?</a><a href="/questions/what-does-it-mean-to-%22program-to-an-interface%22-1657384671665">What does it mean to &quot;program to an interface&quot;?</a><a href="/questions/how-to-remove-%22noise%22-from-gccclang-assembly-output-1657387612391">How to remove &quot;noise&quot; from GCC/clang assembly output?</a><a href="/questions/unboundlocalerror-on-local-variable-when-reassigned-after-first-use-1657387685248">UnboundLocalError on local variable when reassigned after first use</a><a href="/questions/how-do-i-use-shell-variables-in-an-awk-script-1657387754261">How do I use shell variables in an awk script?</a><a href="/questions/randomize-a-listlesstgreater-1657388172793">Randomize a List&lt;T&gt;</a><a href="/questions/using-limit-within-group-by-to-get-n-results-per-group-1657388324167">Using LIMIT within GROUP BY to get N results per group?</a><a href="/questions/what-should-main()-return-in-c-and-c++-1657384745630">What should main() return in C and C++?</a><a href="/questions/understanding-slicing-1657384397680">Understanding slicing</a><a href="/questions/actual-meaning-of-&#x27;shelltrue&#x27;-in-subprocess-1657388470341">Actual meaning of &#x27;shell=True&#x27; in subprocess</a><a href="/questions/asynctask-android-example-1657388127898">AsyncTask Android example</a><a href="/questions/how-to-get-all-possible-combinations-of-a-list&#x27;s-elements-1657388271070">How to get all possible combinations of a listâ€™s elements?</a><a href="/questions/is-there-a-difference-between-%22%22-and-%22is%22-1657387902231">Is there a difference between &quot;==&quot; and &quot;is&quot;?</a><a href="/questions/php-parsesyntax-errors-and-how-to-solve-them-1657384264713">PHP parse/syntax errors; and how to solve them</a><a href="/questions/how-to-access-the-correct-this-inside-a-callback-1657384283261">How to access the correct `this` inside a callback</a><a href="/questions/what-is-a-smart-pointer-and-when-should-i-use-one-1657387905461">What is a smart pointer and when should I use one?</a><a href="/questions/how-do-i-make-a-flat-list-out-of-a-list-of-lists-1657384500439">How do I make a flat list out of a list of lists?</a><a href="/questions/how-do-i-return-the-response-from-an-observablehttpasync-call-in-angular-1657387335024">How do I return the response from an Observable/http/async call in angular?</a><a href="/questions/converting-string-into-datetime-1657387717295">Converting string into datetime</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;This problem has two typical causes:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Static fields used by the objects you stored in the list\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Accidentally adding the \u0026lt;em\u0026gt;same\u0026lt;/em\u0026gt; object to the list\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;Static Fields\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;If the objects in your list store data in static fields, each object in your list will appear to be the same because they hold the same values. Consider the class below:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; value; \n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      ^^^^^^------------ - Here\u0026apos;s the problem!\u0026lt;/span\u0026gt;\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; value)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.value = value;\n  }\n  \n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getValue\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; value;\n  }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;In that example, there is only one \u0026lt;code\u0026gt;int value\u0026lt;/code\u0026gt; which is shared between all instances of \u0026lt;code\u0026gt;Foo\u0026lt;/code\u0026gt; because it is declared \u0026lt;code\u0026gt;static\u0026lt;/code\u0026gt;. (See \u0026lt;a href=\u0026quot;https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;em\u0026gt;\u0026quot;Understanding Class Members\u0026quot;\u0026lt;/em\u0026gt;\u0026lt;/a\u0026gt; tutorial.)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you add multiple \u0026lt;code\u0026gt;Foo\u0026lt;/code\u0026gt; objects to a list using the code below, each instance will return \u0026lt;code\u0026gt;3\u0026lt;/code\u0026gt; from a call to \u0026lt;code\u0026gt;getValue()\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;; i++) {      \n  list.add(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt;(i));\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The solution is simple - don\u0026apos;t use the \u0026lt;code\u0026gt;static\u0026lt;/code\u0026gt; keywords for fields in your class unless you actually want the values shared between every instance of that class.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Adding the Same Object\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;If you add a temporary variable to a list, you must create a new instance of the object you are adding, each time you loop. Consider the following erroneous code snippet:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;List\u0026amp;lt;Foo\u0026amp;gt; list = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ArrayList\u0026lt;/span\u0026gt;\u0026amp;lt;Foo\u0026amp;gt;();    \n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;tmp\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt;();\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;; i++) {\n  tmp.setValue(i);\n  list.add(tmp);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Here, the \u0026lt;code\u0026gt;tmp\u0026lt;/code\u0026gt; object was constructed outside the loop. As a result, the \u0026lt;em\u0026gt;same object instance\u0026lt;/em\u0026gt; is being added to the list three times. The instance will hold the value \u0026lt;code\u0026gt;2\u0026lt;/code\u0026gt;, because that was the value passed during the last call to \u0026lt;code\u0026gt;setValue()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;To fix this, just move the object construction inside the loop:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;List\u0026amp;lt;Foo\u0026amp;gt; list = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ArrayList\u0026lt;/span\u0026gt;\u0026amp;lt;Foo\u0026amp;gt;();        \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;; i++) {\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;tmp\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt;(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// \u0026amp;lt;-- fresh instance!\u0026lt;/span\u0026gt;\n  tmp.setValue(i);\n  list.add(tmp);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Your problem is with the type \u0026lt;code\u0026gt;static\u0026lt;/code\u0026gt; which requires a new initialization every time a loop is iterated. If you are in a loop it is better to keep the concrete initialization inside the loop.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;List\u0026amp;lt;Object\u0026amp;gt; objects = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ArrayList\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026amp;gt;(); \n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; length_you_want; i++) {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SomeStaticClass\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myStaticObject\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SomeStaticClass\u0026lt;/span\u0026gt;();\n    myStaticObject.tag = i;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do stuff with myStaticObject\u0026lt;/span\u0026gt;\n    objects.add(myStaticClass);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Instead of:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;List\u0026amp;lt;Object\u0026amp;gt; objects = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ArrayList\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026amp;gt;(); \n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SomeStaticClass\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myStaticObject\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SomeStaticClass\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; length; i++) {\n    myStaticObject.tag = i;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do stuff with myStaticObject\u0026lt;/span\u0026gt;\n    objects.add(myStaticClass);\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This will duplicate the last item \u0026quot;length\u0026quot; times\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Here \u0026lt;code\u0026gt;tag\u0026lt;/code\u0026gt; is a variable in \u0026lt;code\u0026gt;SomeStaticClass\u0026lt;/code\u0026gt; to check the validity of the above snippet; you can have some other implementation based on your use case.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Had the same trouble with the calendar instance.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Wrong code:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Calendar\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myCalendar\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Calendar.getInstance();\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;days\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; days \u0026amp;lt; daysPerWeek; days++) {\n    myCalendar.add(Calendar.DAY_OF_YEAR, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// In the next line lies the error\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Calendar\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;newCal\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; myCalendar;\n    calendarList.add(newCal);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You have to create a NEW object of the calendar, which can be done with \u0026lt;code\u0026gt;calendar.clone()\u0026lt;/code\u0026gt;;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Calendar\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myCalendar\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Calendar.getInstance();\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;days\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; days \u0026amp;lt; daysPerWeek; days++) {\n    myCalendar.add(Calendar.DAY_OF_YEAR, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// RIGHT WAY\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Calendar\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;newCal\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (Calendar) myCalendar.clone();\n    calendarList.add(newCal);\n\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Every time you add an object to an ArrayList, make sure you add a new object and not already used object. What is happening is that when you add the same 1 copy of object, that same object is added to different positions in an ArrayList. And when you make change to one, because the same copy is added over and over again, all the copies get affected. \nFor example,\nSay you have an ArrayList like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;ArrayList\u0026amp;lt;Card\u0026amp;gt; list = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ArrayList\u0026lt;/span\u0026gt;\u0026amp;lt;Card\u0026amp;gt;();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Card\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Card\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Now if you add this Card c to list, it will be added no problem. It will be saved at location 0. But, when you save the same Card c in the list, it will be saved at location 1. So remember that you added same 1 object to two different locations in a list. Now if you make a change that Card object c, the objects in a list at location 0 and 1 will also reflect that change, because they are the same object. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;One solution would be to make a constructor in Card class, that accepts another Card object. Then in that constructor, you can set the properties like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Card\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Card c)\u0026lt;/span\u0026gt;{\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.property1 = c.getProperty1();\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.property2 = c.getProperty2(); \n... \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//add all the properties that you have in this class Card this way\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And lets say you have the same 1 copy of Card, so at the time of adding a new object, you can do this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;list.add(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Card\u0026lt;/span\u0026gt;(nameOfTheCardObjectThatYouWantADifferentCopyOf));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It can also consequence of using the same reference instead of using a new one.      \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt; List\u0026amp;lt;Foo\u0026amp;gt; list = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ArrayList\u0026lt;/span\u0026gt;\u0026amp;lt;Foo\u0026amp;gt;();        \n\n setdata();\n......\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setdata\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i)\u0026lt;/span\u0026gt; {\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;temp\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt;();\n  tmp.setValue(i);\n  list.add(tmp);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Instead of: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;List\u0026amp;lt;Foo\u0026amp;gt; list = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ArrayList\u0026lt;/span\u0026gt;\u0026amp;lt;Foo\u0026amp;gt;(); \n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;temp\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt;();       \nsetdata();\n......\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setdata\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i)\u0026lt;/span\u0026gt; {\n  tmp.setValue(i);\n  list.add(tmp);\n} \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":349,"title":"Why does my ArrayList contain N copies of the last item added to the list?","content":"\n                \n\u0026lt;p\u0026gt;I\u0026apos;m adding three different objects to an ArrayList, but the list contains three copies of the last object I added. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (Foo f : list) {\n  System.out.println(f.getValue());\n}    \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Expected:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Actual:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;What mistake have I made?\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;sup\u0026gt;Note: this is designed to be a canonical Q\u0026amp;amp;A for the numerous similar issues that arise on this site.\u0026lt;/sup\u0026gt;\u0026lt;/p\u0026gt;\n    ","slug":"why-does-my-arraylist-contain-n-copies-of-the-last-item-added-to-the-list-1657387712003","postType":"QUESTION","createdAt":"2022-07-09T17:28:32.000Z","updatedAt":"2022-07-09T17:28:32.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"How can I pivot a dataframe?","slug":"how-can-i-pivot-a-dataframe-1657384433802"},{"title":"How can I make Bootstrap columns all the same height?","slug":"how-can-i-make-bootstrap-columns-all-the-same-height-1657388551403"},{"title":"What does it mean to \"program to an interface\"?","slug":"what-does-it-mean-to-\"program-to-an-interface\"-1657384671665"},{"title":"How to remove \"noise\" from GCC/clang assembly output?","slug":"how-to-remove-\"noise\"-from-gccclang-assembly-output-1657387612391"},{"title":"UnboundLocalError on local variable when reassigned after first use","slug":"unboundlocalerror-on-local-variable-when-reassigned-after-first-use-1657387685248"},{"title":"How do I use shell variables in an awk script?","slug":"how-do-i-use-shell-variables-in-an-awk-script-1657387754261"},{"title":"Randomize a List\u003cT\u003e","slug":"randomize-a-listlesstgreater-1657388172793"},{"title":"Using LIMIT within GROUP BY to get N results per group?","slug":"using-limit-within-group-by-to-get-n-results-per-group-1657388324167"},{"title":"What should main() return in C and C++?","slug":"what-should-main()-return-in-c-and-c++-1657384745630"},{"title":"Understanding slicing","slug":"understanding-slicing-1657384397680"},{"title":"Actual meaning of 'shell=True' in subprocess","slug":"actual-meaning-of-'shelltrue'-in-subprocess-1657388470341"},{"title":"AsyncTask Android example","slug":"asynctask-android-example-1657388127898"},{"title":"How to get all possible combinations of a listâ€™s elements?","slug":"how-to-get-all-possible-combinations-of-a-list's-elements-1657388271070"},{"title":"Is there a difference between \"==\" and \"is\"?","slug":"is-there-a-difference-between-\"\"-and-\"is\"-1657387902231"},{"title":"PHP parse/syntax errors; and how to solve them","slug":"php-parsesyntax-errors-and-how-to-solve-them-1657384264713"},{"title":"How to access the correct `this` inside a callback","slug":"how-to-access-the-correct-this-inside-a-callback-1657384283261"},{"title":"What is a smart pointer and when should I use one?","slug":"what-is-a-smart-pointer-and-when-should-i-use-one-1657387905461"},{"title":"How do I make a flat list out of a list of lists?","slug":"how-do-i-make-a-flat-list-out-of-a-list-of-lists-1657384500439"},{"title":"How do I return the response from an Observable/http/async call in angular?","slug":"how-do-i-return-the-response-from-an-observablehttpasync-call-in-angular-1657387335024"},{"title":"Converting string into datetime","slug":"converting-string-into-datetime-1657387717295"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"why-does-my-arraylist-contain-n-copies-of-the-last-item-added-to-the-list-1657387712003"},"buildId":"5tS3Jli5j89_wXapXajXn","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>