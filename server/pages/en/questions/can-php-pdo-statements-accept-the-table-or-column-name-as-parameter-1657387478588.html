<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>Can PHP PDO Statements accept the table or column name as parameter? | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="Why can&#x27;t I pass the table name to a prepared PDO statement?

$stmt = $dbh-&gt;prepare(&#x27;SELECT * FROM :table WHERE 1&#x27;);
if ($stmt-&gt;execute(array(&#x27;:table&#x27; =&gt; &#x27;users&#x27;))) {
    var_dump($stmt-&gt;fetchAll());
}


Is there another safe way to insert a table name into a SQL query? With safe, I mean that I don&#x27;t want to do

$sql = &quot;SELECT * FROM $table WHERE 1&quot;

    "/><meta property="og:title" content="Can PHP PDO Statements accept the table or column name as parameter? | Solutions Checker"/><meta property="og:description" content="Why can&#x27;t I pass the table name to a prepared PDO statement?

$stmt = $dbh-&gt;prepare(&#x27;SELECT * FROM :table WHERE 1&#x27;);
if ($stmt-&gt;execute(array(&#x27;:table&#x27; =&gt; &#x27;users&#x27;))) {
    var_dump($stmt-&gt;fetchAll());
}


Is there another safe way to insert a table name into a SQL query? With safe, I mean that I don&#x27;t want to do

$sql = &quot;SELECT * FROM $table WHERE 1&quot;

    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Can PHP PDO Statements accept the table or column name as parameter?","text":"Why can&apos;t I pass the table name to a prepared PDO statement?\n\n$stmt = $dbh-&gt;prepare(&apos;SELECT * FROM :table WHERE 1&apos;);\nif ($stmt-&gt;execute(array(&apos;:table&apos; =&gt; &apos;users&apos;))) {\n    var_dump($stmt-&gt;fetchAll());\n}\n\n\nIs there another safe way to insert a table name into a SQL query? With safe, I mean that I don&apos;t want to do\n\n$sql = &quot;SELECT * FROM $table WHERE 1&quot;\n\n    ","answerCount":8,"upVoteCount":500,"suggestedAnswer":[{"text":"Table and Column names CANNOT be replaced by parameters in PDO.\n\nIn that case you will simply want to filter and sanitize the data manually. One way to do this is to pass in shorthand parameters to the function that will execute the query dynamically and then use a switch() statement to create a white list of valid values to be used for the table name or column name. That way no user input ever goes directly into the query. So for example:\n\nfunction buildQuery( $get_var ) \n{\n    switch($get_var)\n    {\n        case 1:\n            $tbl = &apos;users&apos;;\n            break;\n    }\n\n    $sql = &quot;SELECT * FROM $tbl&quot;;\n}\n\n\nBy leaving no default case or using a default case that returns an error message you ensure that only values that you want used get used.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"To understand why binding a table (or column) name doesn&apos;t work, you have to understand how the placeholders in prepared statements work: they are not simply substituted in as (suitably escaped) strings, and the resulting SQL executed. Instead, a DBMS asked to &quot;prepare&quot; a statement comes up with a complete query plan for how it would execute that query, including which tables and indexes it would use, which will be the same regardless of how you fill in the placeholders.\n\nThe plan for SELECT name FROM my_table WHERE id = :value will be the same whatever you substitute for :value, but the seemingly similar SELECT name FROM :table WHERE id = :value cannot be planned, because the DBMS has no idea what table you&apos;re actually going to select from.\n\nThis is not something an abstraction library like PDO can or should work around, either, since it would defeat the 2 key purposes of prepared statements: 1) to allow the database to decide in advance how a query will be run, and use the same plan multiple times; and 2) to prevent security issues by separating the logic of the query from the variable input.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"I see this is an old post, but I found it useful and thought I&apos;d share a solution similar to what @kzqai suggested:\n\nI have a function that receives two parameters like...\n\nfunction getTableInfo($inTableName, $inColumnName) {\n    ....\n}\n\n\nInside I check against arrays I&apos;ve set up to make sure only tables and columns with &quot;blessed&quot; tables are accessible:\n\n$allowed_tables_array = array(&apos;tblTheTable&apos;);\n$allowed_columns_array[&apos;tblTheTable&apos;] = array(&apos;the_col_to_check&apos;);\n\n\nThen the PHP check before running PDO looks like...\n\nif(in_array($inTableName, $allowed_tables_array) &amp;&amp; in_array($inColumnName,$allowed_columns_array[$inTableName]))\n{\n    $sql = &quot;SELECT $inColumnName AS columnInfo\n            FROM $inTableName&quot;;\n    $stmt = $pdo-&gt;prepare($sql); \n    $stmt-&gt;execute();\n    $result = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);\n}\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Using the former isn&apos;t inherently more safe than the latter, you need to sanitize the input whether it&apos;s part of a parameter array or a simple variable.  So I don&apos;t see anything wrong with using the latter form with $table, provided you make sure that the content of $table is safe (alphanum plus underscores?) before using it.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"(Late answer, consult my side note).\n\nThe same rule applies when trying to create a &quot;database&quot;.\n\nYou cannot use a prepared statement to bind a database.\n\nI.e.:\n\nCREATE DATABASE IF NOT EXISTS :database\n\n\nwill not work. Use a safelist instead.\n\nSide note: I added this answer (as a community wiki) because it often used to close questions with, where some people posted questions similar to this in trying to bind a database and not a table and/or column.\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"Part of me wonders if you could provide your own custom sanitizing function as simple as this:\n\n$value = preg_replace(&apos;/[^a-zA-Z_]*/&apos;, &apos;&apos;, $value);\n\n\nI haven&apos;t really thought through it, but it seems like removing anything except characters and underscores might work.\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"As for the main question in this thread, the other posts made it clear why we can&apos;t bind values to column names when preparing statements, so here is one solution:\n\nclass myPdo{\n    private $user   = &apos;dbuser&apos;;\n    private $pass   = &apos;dbpass&apos;;\n    private $host   = &apos;dbhost&apos;;\n    private $db = &apos;dbname&apos;;\n    private $pdo;\n    private $dbInfo;\n    public function __construct($type){\n        $this-&gt;pdo = new PDO(&apos;mysql:host=&apos;.$this-&gt;host.&apos;;dbname=&apos;.$this-&gt;db.&apos;;charset=utf8&apos;,$this-&gt;user,$this-&gt;pass);\n        if(isset($type)){\n            //when class is called upon, it stores column names and column types from the table of you choice in $this-&gt;dbInfo;\n            $stmt = &quot;select distinct column_name,column_type from information_schema.columns where table_name=&apos;sometable&apos;;&quot;;\n            $stmt = $this-&gt;pdo-&gt;prepare($stmt);//not really necessary since this stmt doesn&apos;t contain any dynamic values;\n            $stmt-&gt;execute();\n            $this-&gt;dbInfo = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);\n        }\n    }\n    public function pdo_param($col){\n        $param_type = PDO::PARAM_STR;\n        foreach($this-&gt;dbInfo as $k =&gt; $arr){\n            if($arr[&apos;column_name&apos;] == $col){\n                if(strstr($arr[&apos;column_type&apos;],&apos;int&apos;)){\n                    $param_type = PDO::PARAM_INT;\n                    break;\n                }\n            }\n        }//for testing purposes i only used INT and VARCHAR column types. Adjust to your needs...\n        return $param_type;\n    }\n    public function columnIsAllowed($col){\n        $colisAllowed = false;\n        foreach($this-&gt;dbInfo as $k =&gt; $arr){\n            if($arr[&apos;column_name&apos;] === $col){\n                $colisAllowed = true;\n                break;\n            }\n        }\n        return $colisAllowed;\n    }\n    public function q($data){\n        //$data is received by post as a JSON object and looks like this\n        //{&quot;data&quot;:{&quot;column_a&quot;:&quot;value&quot;,&quot;column_b&quot;:&quot;value&quot;,&quot;column_c&quot;:&quot;value&quot;},&quot;get&quot;:&quot;column_x&quot;}\n        $data = json_decode($data,TRUE);\n        $continue = true;\n        foreach($data[&apos;data&apos;] as $column_name =&gt; $value){\n            if(!$this-&gt;columnIsAllowed($column_name)){\n                 $continue = false;\n                 //means that someone possibly messed with the post and tried to get data from a column that does not exist in the current table, or the column name is a sql injection string and so on...\n                 break;\n             }\n        }\n        //since $data[&apos;get&apos;] is also a column, check if its allowed as well\n        if(isset($data[&apos;get&apos;]) &amp;&amp; !$this-&gt;columnIsAllowed($data[&apos;get&apos;])){\n             $continue = false;\n        }\n        if(!$continue){\n            exit(&apos;possible injection attempt&apos;);\n        }\n        //continue with the rest of the func, as you normally would\n        $stmt = &quot;SELECT DISTINCT &quot;.$data[&apos;get&apos;].&quot; from sometable WHERE &quot;;\n        foreach($data[&apos;data&apos;] as $k =&gt; $v){\n            $stmt .= $k.&apos; LIKE :&apos;.$k.&apos;_val AND &apos;;\n        }\n        $stmt = substr($stmt,0,-5).&quot; order by &quot;.$data[&apos;get&apos;];\n        //$stmt should look like this\n        //SELECT DISTINCT column_x from sometable WHERE column_a LIKE :column_a_val AND column_b LIKE :column_b_val AND column_c LIKE :column_c_val order by column_x\n        $stmt = $this-&gt;pdo-&gt;prepare($stmt);\n        //obviously now i have to bindValue()\n        foreach($data[&apos;data&apos;] as $k =&gt; $v){\n            $stmt-&gt;bindValue(&apos;:&apos;.$k.&apos;_val&apos;,&apos;%&apos;.$v.&apos;%&apos;,$this-&gt;pdo_param($k));\n            //setting PDO::PARAM... type based on column_type from $this-&gt;dbInfo\n        }\n        $stmt-&gt;execute();\n        return $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);//or whatever\n    }\n}\n$pdo = new myPdo(&apos;anything&apos;);//anything so that isset() evaluates to TRUE.\nvar_dump($pdo-&gt;q($some_json_object_as_described_above));\n\n\nThe above is just an example, so needless to say, copy-&gt;paste won&apos;t work. Adjust for your needs.\nNow this may not provide 100% security, but it allows some control over the column names when they &quot;come in&quot; as dynamic strings and may be changed on users end. Furthermore, there is no need to build some array with your table column names and types since they are extracted from the information_schema.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"Short answer is NO you cannot use dynamic table name, field names,  etc in the Prepared execute statement with PDO because it adds quotes to them which will break the query.  But if you can sanitize them, then you can safely plop them right in the query itself just like you would with MySQLi anyway.\nThe correct way to do this is with mysqli&apos;s mysqli_real_escape_string() function because the mysql_real_escape_string was removed from PHP hastily without any consideration into how that affects dynamic structure applications.\n$unsanitized_table_name = &quot;users&apos; OR &apos;1&apos;=&apos;1&quot;; //SQL Injection attempt\n$sanitized_table_name = sanitize_input($unsanitized_table_name);\n\n$stmt = $dbh-&gt;prepare(&quot;SELECT * FROM {$unsanitized_table_name} WHERE 1&quot;); //&lt;--- REALLY bad idea\n$stmt = $dbh-&gt;prepare(&quot;SELECT * FROM {$sanitized_table_name} WHERE 1&quot;); //&lt;--- Not ideal but hey, at least you&apos;re safe.\n\n//PDO Cant sanitize everything so we limp along with mysqli instead\nfunction sanitize_input($string)\n{\n   $mysqli = new mysqli(&quot;localhost&quot;,&quot;UsahName&quot;,&quot;Passerrrd&quot;);\n   $string = $mysqli-&gt;real_escape_string($string);\n\n   return $string;\n}\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-b06815e21c943e0d.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-79a1437acf654019.js" defer=""></script><script src="/_next/static/6ctJfCympFH_chh5mjicD/_buildManifest.js" defer=""></script><script src="/_next/static/6ctJfCympFH_chh5mjicD/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/can-php-pdo-statements-accept-the-table-or-column-name-as-parameter-1657387478588#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/can-php-pdo-statements-accept-the-table-or-column-name-as-parameter-1657387478588"><h1>Can PHP PDO Statements accept the table or column name as parameter?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>Why can't I pass the table name to a prepared PDO statement?</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$dbh</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">'SELECT * FROM :table WHERE 1'</span>);
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>(<span class="hljs-keyword">array</span>(<span class="hljs-string">':table'</span> =&gt; <span class="hljs-string">'users'</span>))) {
    <span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">fetchAll</span>());
}
</code></pre>

<p>Is there another safe way to insert a table name into a SQL query? With safe, I mean that I don't want to do</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$sql</span> = <span class="hljs-string">"SELECT * FROM <span class="hljs-subst">$table</span> WHERE 1"</span>
</code></pre>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Table and Column names CANNOT be replaced by parameters in PDO.</strong></p>

<p>In that case you will simply want to filter and sanitize the data manually. One way to do this is to pass in shorthand parameters to the function that will execute the query dynamically and then use a <code>switch()</code> statement to create a white list of valid values to be used for the table name or column name. That way no user input ever goes directly into the query. So for example:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildQuery</span>(<span class="hljs-params"> <span class="hljs-variable">$get_var</span> </span>) 
</span>{
    <span class="hljs-keyword">switch</span>(<span class="hljs-variable">$get_var</span>)
    {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
            <span class="hljs-variable">$tbl</span> = <span class="hljs-string">'users'</span>;
            <span class="hljs-keyword">break</span>;
    }

    <span class="hljs-variable">$sql</span> = <span class="hljs-string">"SELECT * FROM <span class="hljs-subst">$tbl</span>"</span>;
}
</code></pre>

<p>By leaving no default case or using a default case that returns an error message you ensure that only values that you want used get used.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>To understand <em>why</em> binding a table (or column) name doesn't work, you have to understand how the placeholders in prepared statements work: they are not simply substituted in as (suitably escaped) strings, and the resulting SQL executed. Instead, a DBMS asked to "prepare" a statement comes up with a complete query plan for how it would execute that query, including which tables and indexes it would use, which will be the same regardless of how you fill in the placeholders.</p>

<p>The plan for <code>SELECT name FROM my_table WHERE id = :value</code> will be the same whatever you substitute for <code>:value</code>, but the seemingly similar <code>SELECT name FROM :table WHERE id = :value</code> cannot be planned, because the DBMS has no idea what table you're actually going to select from.</p>

<p>This is not something an abstraction library like PDO can or should work around, either, since it would defeat the 2 key purposes of prepared statements: 1) to allow the database to decide in advance how a query will be run, and use the same plan multiple times; and 2) to prevent security issues by separating the logic of the query from the variable input.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I see this is an old post, but I found it useful and thought I'd share a solution similar to what @kzqai suggested:</p>

<p>I have a function that receives two parameters like...</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTableInfo</span>(<span class="hljs-params"><span class="hljs-variable">$inTableName</span>, <span class="hljs-variable">$inColumnName</span></span>) </span>{
    ....
}
</code></pre>

<p>Inside I check against arrays I've set up to make sure only tables and columns with "blessed" tables are accessible:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$allowed_tables_array</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">'tblTheTable'</span>);
<span class="hljs-variable">$allowed_columns_array</span>[<span class="hljs-string">'tblTheTable'</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">'the_col_to_check'</span>);
</code></pre>

<p>Then the PHP check before running PDO looks like...</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">in_array</span>(<span class="hljs-variable">$inTableName</span>, <span class="hljs-variable">$allowed_tables_array</span>) &amp;&amp; <span class="hljs-title function_ invoke__">in_array</span>(<span class="hljs-variable">$inColumnName</span>,<span class="hljs-variable">$allowed_columns_array</span>[<span class="hljs-variable">$inTableName</span>]))
{
    <span class="hljs-variable">$sql</span> = <span class="hljs-string">"SELECT <span class="hljs-subst">$inColumnName</span> AS columnInfo
            FROM <span class="hljs-subst">$inTableName</span>"</span>;
    <span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$pdo</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$sql</span>); 
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
    <span class="hljs-variable">$result</span> = <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">fetchAll</span>(PDO::<span class="hljs-variable constant_">FETCH_ASSOC</span>);
}
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using the former isn't inherently more safe than the latter, you need to sanitize the input whether it's part of a parameter array or a simple variable.  So I don't see anything wrong with using the latter form with <code>$table</code>, provided you make sure that the content of <code>$table</code> is safe (alphanum plus underscores?) before using it.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><em>(Late answer, consult my side note).</em></p>

<p>The same rule applies when trying to create a "database".</p>

<p>You cannot use a prepared statement to bind a database.</p>

<p>I.e.:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php">CREATE DATABASE IF NOT EXISTS :database
</code></pre>

<p>will not work. Use a safelist instead.</p>

<p><strong>Side note:</strong> I added this answer (as a community wiki) because it often used to close questions with, where some people posted questions similar to this in trying to bind a <strong>database</strong> and not a table and/or column.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Part of me wonders if you could provide your own custom sanitizing function as simple as this:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$value</span> = <span class="hljs-title function_ invoke__">preg_replace</span>(<span class="hljs-string">'/[^a-zA-Z_]*/'</span>, <span class="hljs-string">''</span>, <span class="hljs-variable">$value</span>);
</code></pre>

<p>I haven't really thought through it, but it seems like removing anything except characters and underscores might work.</p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As for the main question in this thread, the other posts made it clear why we can't bind values to column names when preparing statements, so here is one solution:</p>

<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myPdo</span></span>{
    <span class="hljs-keyword">private</span> <span class="hljs-variable">$user</span>   = <span class="hljs-string">'dbuser'</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-variable">$pass</span>   = <span class="hljs-string">'dbpass'</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-variable">$host</span>   = <span class="hljs-string">'dbhost'</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-variable">$db</span> = <span class="hljs-string">'dbname'</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-variable">$pdo</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-variable">$dbInfo</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$type</span></span>)</span>{
        <span class="hljs-variable language_">$this</span>-&gt;pdo = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(<span class="hljs-string">'mysql:host='</span>.<span class="hljs-variable">$this</span>-&gt;host.<span class="hljs-string">';dbname='</span>.<span class="hljs-variable">$this</span>-&gt;db.<span class="hljs-string">';charset=utf8'</span>,<span class="hljs-variable">$this</span>-&gt;user,<span class="hljs-variable">$this</span>-&gt;pass);
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$type</span>)){
            <span class="hljs-comment">//when class is called upon, it stores column names and column types from the table of you choice in $this-&gt;dbInfo;</span>
            <span class="hljs-variable">$stmt</span> = <span class="hljs-string">"select distinct column_name,column_type from information_schema.columns where table_name='sometable';"</span>;
            <span class="hljs-variable">$stmt</span> = <span class="hljs-variable language_">$this</span>-&gt;pdo-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$stmt</span>);<span class="hljs-comment">//not really necessary since this stmt doesn't contain any dynamic values;</span>
            <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
            <span class="hljs-variable language_">$this</span>-&gt;dbInfo = <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">fetchAll</span>(PDO::<span class="hljs-variable constant_">FETCH_ASSOC</span>);
        }
    }
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pdo_param</span>(<span class="hljs-params"><span class="hljs-variable">$col</span></span>)</span>{
        <span class="hljs-variable">$param_type</span> = PDO::<span class="hljs-variable constant_">PARAM_STR</span>;
        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable language_">$this</span>-&gt;dbInfo <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span> =&gt; <span class="hljs-variable">$arr</span>){
            <span class="hljs-keyword">if</span>(<span class="hljs-variable">$arr</span>[<span class="hljs-string">'column_name'</span>] == <span class="hljs-variable">$col</span>){
                <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">strstr</span>(<span class="hljs-variable">$arr</span>[<span class="hljs-string">'column_type'</span>],<span class="hljs-string">'int'</span>)){
                    <span class="hljs-variable">$param_type</span> = PDO::<span class="hljs-variable constant_">PARAM_INT</span>;
                    <span class="hljs-keyword">break</span>;
                }
            }
        }<span class="hljs-comment">//for testing purposes i only used INT and VARCHAR column types. Adjust to your needs...</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$param_type</span>;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">columnIsAllowed</span>(<span class="hljs-params"><span class="hljs-variable">$col</span></span>)</span>{
        <span class="hljs-variable">$colisAllowed</span> = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable language_">$this</span>-&gt;dbInfo <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span> =&gt; <span class="hljs-variable">$arr</span>){
            <span class="hljs-keyword">if</span>(<span class="hljs-variable">$arr</span>[<span class="hljs-string">'column_name'</span>] === <span class="hljs-variable">$col</span>){
                <span class="hljs-variable">$colisAllowed</span> = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$colisAllowed</span>;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">q</span>(<span class="hljs-params"><span class="hljs-variable">$data</span></span>)</span>{
        <span class="hljs-comment">//$data is received by post as a JSON object and looks like this</span>
        <span class="hljs-comment">//{"data":{"column_a":"value","column_b":"value","column_c":"value"},"get":"column_x"}</span>
        <span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$data</span>,<span class="hljs-literal">TRUE</span>);
        <span class="hljs-variable">$continue</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$data</span>[<span class="hljs-string">'data'</span>] <span class="hljs-keyword">as</span> <span class="hljs-variable">$column_name</span> =&gt; <span class="hljs-variable">$value</span>){
            <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">columnIsAllowed</span>(<span class="hljs-variable">$column_name</span>)){
                 <span class="hljs-variable">$continue</span> = <span class="hljs-literal">false</span>;
                 <span class="hljs-comment">//means that someone possibly messed with the post and tried to get data from a column that does not exist in the current table, or the column name is a sql injection string and so on...</span>
                 <span class="hljs-keyword">break</span>;
             }
        }
        <span class="hljs-comment">//since $data['get'] is also a column, check if its allowed as well</span>
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$data</span>[<span class="hljs-string">'get'</span>]) &amp;&amp; !<span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">columnIsAllowed</span>(<span class="hljs-variable">$data</span>[<span class="hljs-string">'get'</span>])){
             <span class="hljs-variable">$continue</span> = <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">if</span>(!<span class="hljs-variable">$continue</span>){
            <span class="hljs-keyword">exit</span>(<span class="hljs-string">'possible injection attempt'</span>);
        }
        <span class="hljs-comment">//continue with the rest of the func, as you normally would</span>
        <span class="hljs-variable">$stmt</span> = <span class="hljs-string">"SELECT DISTINCT "</span>.<span class="hljs-variable">$data</span>[<span class="hljs-string">'get'</span>].<span class="hljs-string">" from sometable WHERE "</span>;
        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$data</span>[<span class="hljs-string">'data'</span>] <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span> =&gt; <span class="hljs-variable">$v</span>){
            <span class="hljs-variable">$stmt</span> .= <span class="hljs-variable">$k</span>.<span class="hljs-string">' LIKE :'</span>.<span class="hljs-variable">$k</span>.<span class="hljs-string">'_val AND '</span>;
        }
        <span class="hljs-variable">$stmt</span> = <span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$stmt</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">5</span>).<span class="hljs-string">" order by "</span>.<span class="hljs-variable">$data</span>[<span class="hljs-string">'get'</span>];
        <span class="hljs-comment">//$stmt should look like this</span>
        <span class="hljs-comment">//SELECT DISTINCT column_x from sometable WHERE column_a LIKE :column_a_val AND column_b LIKE :column_b_val AND column_c LIKE :column_c_val order by column_x</span>
        <span class="hljs-variable">$stmt</span> = <span class="hljs-variable language_">$this</span>-&gt;pdo-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$stmt</span>);
        <span class="hljs-comment">//obviously now i have to bindValue()</span>
        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$data</span>[<span class="hljs-string">'data'</span>] <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span> =&gt; <span class="hljs-variable">$v</span>){
            <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">bindValue</span>(<span class="hljs-string">':'</span>.<span class="hljs-variable">$k</span>.<span class="hljs-string">'_val'</span>,<span class="hljs-string">'%'</span>.<span class="hljs-variable">$v</span>.<span class="hljs-string">'%'</span>,<span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">pdo_param</span>(<span class="hljs-variable">$k</span>));
            <span class="hljs-comment">//setting PDO::PARAM... type based on column_type from $this-&gt;dbInfo</span>
        }
        <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>();
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">fetchAll</span>(PDO::<span class="hljs-variable constant_">FETCH_ASSOC</span>);<span class="hljs-comment">//or whatever</span>
    }
}
<span class="hljs-variable">$pdo</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">myPdo</span>(<span class="hljs-string">'anything'</span>);<span class="hljs-comment">//anything so that isset() evaluates to TRUE.</span>
<span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$pdo</span>-&gt;<span class="hljs-title function_ invoke__">q</span>(<span class="hljs-variable">$some_json_object_as_described_above</span>));
</code></pre>

<p>The above is just an example, so needless to say, copy-&gt;paste won't work. Adjust for your needs.
Now this may not provide 100% security, but it allows some control over the column names when they "come in" as dynamic strings and may be changed on users end. Furthermore, there is no need to build some array with your table column names and types since they are extracted from the information_schema.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Short answer is NO you cannot use dynamic table name, field names,  etc in the Prepared execute statement with PDO because it adds quotes to them which will break the query.  But if you can sanitize them, then you can safely plop them right in the query itself just like you would with MySQLi anyway.</p>
<p>The correct way to do this is with mysqli's mysqli_real_escape_string() function because the mysql_real_escape_string was removed from PHP hastily without any consideration into how that affects dynamic structure applications.</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-variable">$unsanitized_table_name</span> = <span class="hljs-string">"users' OR '1'='1"</span>; <span class="hljs-comment">//SQL Injection attempt</span>
<span class="hljs-variable">$sanitized_table_name</span> = <span class="hljs-title function_ invoke__">sanitize_input</span>(<span class="hljs-variable">$unsanitized_table_name</span>);

<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$dbh</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"SELECT * FROM <span class="hljs-subst">{$unsanitized_table_name}</span> WHERE 1"</span>); <span class="hljs-comment">//&lt;--- REALLY bad idea</span>
<span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$dbh</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"SELECT * FROM <span class="hljs-subst">{$sanitized_table_name}</span> WHERE 1"</span>); <span class="hljs-comment">//&lt;--- Not ideal but hey, at least you're safe.</span>

<span class="hljs-comment">//PDO Cant sanitize everything so we limp along with mysqli instead</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sanitize_input</span>(<span class="hljs-params"><span class="hljs-variable">$string</span></span>)
</span>{
   <span class="hljs-variable">$mysqli</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">mysqli</span>(<span class="hljs-string">"localhost"</span>,<span class="hljs-string">"UsahName"</span>,<span class="hljs-string">"Passerrrd"</span>);
   <span class="hljs-variable">$string</span> = <span class="hljs-variable">$mysqli</span>-&gt;<span class="hljs-title function_ invoke__">real_escape_string</span>(<span class="hljs-variable">$string</span>);

   <span class="hljs-keyword">return</span> <span class="hljs-variable">$string</span>;
}
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/css-selector-for-first-element-with-class-1657388028765">CSS selector for first element with class</a><a href="/questions/how-do-you-use-a-variable-in-a-regular-expression-1657387939007">How do you use a variable in a regular expression?</a><a href="/questions/importing-installed-package-from-script-raises-%22attributeerror:-module-has-no-attribute%22-or-%22importerror:-cannot-import-name%22-1657387790607">Importing installed package from script raises &quot;AttributeError: module has no attribute&quot; or &quot;ImportError: cannot import name&quot;</a><a href="/questions/how-do-i-get-php-errors-to-display-1657384570095">How do I get PHP errors to display?</a><a href="/questions/how-to-print-without-a-newline-or-space-1657387814213">How to print without a newline or space</a><a href="/questions/why-not-use-double-or-float-to-represent-currency-1657387417964">Why not use Double or Float to represent currency?</a><a href="/questions/google-maps-js-api-v3-simple-multiple-marker-example-1657388073335">Google Maps JS API v3 - Simple Multiple Marker Example</a><a href="/questions/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript-1657387777379">How to print a number with commas as thousands separators in JavaScript</a><a href="/questions/how-do-i-return-the-response-from-an-asynchronous-call-1657384208012">How do I return the response from an asynchronous call?</a><a href="/questions/r-cannot-be-resolved-android-error-1657388526258">R cannot be resolved - Android error</a><a href="/questions/why-should-i-not-include-lessbitsstdc++.hgreater-1657384470484">Why should I not #include &lt;bits/stdc++.h&gt;?</a><a href="/questions/how-can-i-validate-an-email-address-using-a-regular-expression-1657384549233">How can I validate an email address using a regular expression?</a><a href="/questions/dollar(document).ready-equivalent-without-jquery-1657388504115">$(document).ready equivalent without jQuery</a><a href="/questions/how-to-avoid-using-select-in-excel-vba-1657384286300">How to avoid using Select in Excel VBA</a><a href="/questions/what-is-the-copy-and-swap-idiom-1657384840329">What is the copy-and-swap idiom?</a><a href="/questions/is-listlessdoggreater-a-subclass-of-listlessanimalgreater-why-are-java-generics-not-implicitly-polymorphic-1657384766724">Is List&lt;Dog&gt; a subclass of List&lt;Animal&gt;? Why are Java generics not implicitly polymorphic?</a><a href="/questions/reshaping-multiple-sets-of-measurement-columns-(wide-format)-into-single-columns-(long-format)-1657388016983">Reshaping multiple sets of measurement columns (wide format) into single columns (long format)</a><a href="/questions/safely-turning-a-json-string-into-an-object-1657388194824">Safely turning a JSON string into an object</a><a href="/questions/what-is-an-undefined-referenceunresolved-external-symbol-error-and-how-do-i-fix-it-1657384255179">What is an undefined reference/unresolved external symbol error and how do I fix it?</a><a href="/questions/how-can-i-parse-a-json-file-with-php-duplicate-1657388002325">How can I parse a JSON file with PHP? [duplicate]</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Table and Column names CANNOT be replaced by parameters in PDO.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In that case you will simply want to filter and sanitize the data manually. One way to do this is to pass in shorthand parameters to the function that will execute the query dynamically and then use a \u0026lt;code\u0026gt;switch()\u0026lt;/code\u0026gt; statement to create a white list of valid values to be used for the table name or column name. That way no user input ever goes directly into the query. So for example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;buildQuery\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$get_var\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;) \n\u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;switch\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$get_var\u0026lt;/span\u0026gt;)\n    {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;:\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$tbl\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;users\u0026apos;\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$tbl\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;By leaving no default case or using a default case that returns an error message you ensure that only values that you want used get used.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To understand \u0026lt;em\u0026gt;why\u0026lt;/em\u0026gt; binding a table (or column) name doesn\u0026apos;t work, you have to understand how the placeholders in prepared statements work: they are not simply substituted in as (suitably escaped) strings, and the resulting SQL executed. Instead, a DBMS asked to \u0026quot;prepare\u0026quot; a statement comes up with a complete query plan for how it would execute that query, including which tables and indexes it would use, which will be the same regardless of how you fill in the placeholders.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The plan for \u0026lt;code\u0026gt;SELECT name FROM my_table WHERE id = :value\u0026lt;/code\u0026gt; will be the same whatever you substitute for \u0026lt;code\u0026gt;:value\u0026lt;/code\u0026gt;, but the seemingly similar \u0026lt;code\u0026gt;SELECT name FROM :table WHERE id = :value\u0026lt;/code\u0026gt; cannot be planned, because the DBMS has no idea what table you\u0026apos;re actually going to select from.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is not something an abstraction library like PDO can or should work around, either, since it would defeat the 2 key purposes of prepared statements: 1) to allow the database to decide in advance how a query will be run, and use the same plan multiple times; and 2) to prevent security issues by separating the logic of the query from the variable input.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I see this is an old post, but I found it useful and thought I\u0026apos;d share a solution similar to what @kzqai suggested:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I have a function that receives two parameters like...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;getTableInfo\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$inTableName\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$inColumnName\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;) \u0026lt;/span\u0026gt;{\n    ....\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Inside I check against arrays I\u0026apos;ve set up to make sure only tables and columns with \u0026quot;blessed\u0026quot; tables are accessible:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$allowed_tables_array\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;tblTheTable\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$allowed_columns_array\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;tblTheTable\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;the_col_to_check\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then the PHP check before running PDO looks like...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;in_array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$inTableName\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$allowed_tables_array\u0026lt;/span\u0026gt;) \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;in_array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$inColumnName\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$allowed_columns_array\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$inTableName\u0026lt;/span\u0026gt;]))\n{\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$inColumnName\u0026lt;/span\u0026gt; AS columnInfo\n            FROM \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$inTableName\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pdo\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt;); \n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$result\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;fetchAll\u0026lt;/span\u0026gt;(PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;FETCH_ASSOC\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Using the former isn\u0026apos;t inherently more safe than the latter, you need to sanitize the input whether it\u0026apos;s part of a parameter array or a simple variable.  So I don\u0026apos;t see anything wrong with using the latter form with \u0026lt;code\u0026gt;$table\u0026lt;/code\u0026gt;, provided you make sure that the content of \u0026lt;code\u0026gt;$table\u0026lt;/code\u0026gt; is safe (alphanum plus underscores?) before using it.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;(Late answer, consult my side note).\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The same rule applies when trying to create a \u0026quot;database\u0026quot;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You cannot use a prepared statement to bind a database.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I.e.:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;CREATE DATABASE IF NOT EXISTS :database\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;will not work. Use a safelist instead.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Side note:\u0026lt;/strong\u0026gt; I added this answer (as a community wiki) because it often used to close questions with, where some people posted questions similar to this in trying to bind a \u0026lt;strong\u0026gt;database\u0026lt;/strong\u0026gt; and not a table and/or column.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Part of me wonders if you could provide your own custom sanitizing function as simple as this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;preg_replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/[^a-zA-Z_]*/\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I haven\u0026apos;t really thought through it, but it seems like removing anything except characters and underscores might work.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As for the main question in this thread, the other posts made it clear why we can\u0026apos;t bind values to column names when preparing statements, so here is one solution:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;myPdo\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$user\u0026lt;/span\u0026gt;   = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dbuser\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pass\u0026lt;/span\u0026gt;   = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dbpass\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$host\u0026lt;/span\u0026gt;   = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dbhost\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$db\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dbname\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pdo\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dbInfo\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;__construct\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$type\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;pdo = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;PDO\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;mysql:host=\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;host.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;dbname=\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;db.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;charset=utf8\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;user,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;pass);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;isset\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$type\u0026lt;/span\u0026gt;)){\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//when class is called upon, it stores column names and column types from the table of you choice in $this-\u0026amp;gt;dbInfo;\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;select distinct column_name,column_type from information_schema.columns where table_name=\u0026apos;sometable\u0026apos;;\u0026quot;\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;pdo-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;);\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//not really necessary since this stmt doesn\u0026apos;t contain any dynamic values;\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;dbInfo = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;fetchAll\u0026lt;/span\u0026gt;(PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;FETCH_ASSOC\u0026lt;/span\u0026gt;);\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;pdo_param\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$col\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$param_type\u0026lt;/span\u0026gt; = PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PARAM_STR\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;dbInfo \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$arr\u0026lt;/span\u0026gt;){\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;column_name\u0026apos;\u0026lt;/span\u0026gt;] == \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$col\u0026lt;/span\u0026gt;){\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;strstr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;column_type\u0026apos;\u0026lt;/span\u0026gt;],\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;int\u0026apos;\u0026lt;/span\u0026gt;)){\n                    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$param_type\u0026lt;/span\u0026gt; = PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PARAM_INT\u0026lt;/span\u0026gt;;\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n                }\n            }\n        }\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//for testing purposes i only used INT and VARCHAR column types. Adjust to your needs...\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$param_type\u0026lt;/span\u0026gt;;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;columnIsAllowed\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$col\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$colisAllowed\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;dbInfo \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$arr\u0026lt;/span\u0026gt;){\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$arr\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;column_name\u0026apos;\u0026lt;/span\u0026gt;] === \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$col\u0026lt;/span\u0026gt;){\n                \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$colisAllowed\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n            }\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$colisAllowed\u0026lt;/span\u0026gt;;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;q\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//$data is received by post as a JSON object and looks like this\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//{\u0026quot;data\u0026quot;:{\u0026quot;column_a\u0026quot;:\u0026quot;value\u0026quot;,\u0026quot;column_b\u0026quot;:\u0026quot;value\u0026quot;,\u0026quot;column_c\u0026quot;:\u0026quot;value\u0026quot;},\u0026quot;get\u0026quot;:\u0026quot;column_x\u0026quot;}\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_decode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$continue\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;data\u0026apos;\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$column_name\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;){\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(!\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;columnIsAllowed\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$column_name\u0026lt;/span\u0026gt;)){\n                 \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$continue\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n                 \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//means that someone possibly messed with the post and tried to get data from a column that does not exist in the current table, or the column name is a sql injection string and so on...\u0026lt;/span\u0026gt;\n                 \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n             }\n        }\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//since $data[\u0026apos;get\u0026apos;] is also a column, check if its allowed as well\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;isset\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;get\u0026apos;\u0026lt;/span\u0026gt;]) \u0026amp;amp;\u0026amp;amp; !\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;columnIsAllowed\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;get\u0026apos;\u0026lt;/span\u0026gt;])){\n             \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$continue\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(!\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$continue\u0026lt;/span\u0026gt;){\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;exit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;possible injection attempt\u0026apos;\u0026lt;/span\u0026gt;);\n        }\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//continue with the rest of the func, as you normally would\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT DISTINCT \u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;get\u0026apos;\u0026lt;/span\u0026gt;].\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; from sometable WHERE \u0026quot;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;data\u0026apos;\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$v\u0026lt;/span\u0026gt;){\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; .= \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; LIKE :\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;_val AND \u0026apos;\u0026lt;/span\u0026gt;;\n        }\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;substr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; order by \u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;get\u0026apos;\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//$stmt should look like this\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//SELECT DISTINCT column_x from sometable WHERE column_a LIKE :column_a_val AND column_b LIKE :column_b_val AND column_c LIKE :column_c_val order by column_x\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;pdo-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//obviously now i have to bindValue()\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;data\u0026apos;\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$v\u0026lt;/span\u0026gt;){\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;bindValue\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;_val\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;%\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$v\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;%\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;pdo_param\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$k\u0026lt;/span\u0026gt;));\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//setting PDO::PARAM... type based on column_type from $this-\u0026amp;gt;dbInfo\u0026lt;/span\u0026gt;\n        }\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;fetchAll\u0026lt;/span\u0026gt;(PDO::\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;FETCH_ASSOC\u0026lt;/span\u0026gt;);\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//or whatever\u0026lt;/span\u0026gt;\n    }\n}\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pdo\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;myPdo\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;anything\u0026apos;\u0026lt;/span\u0026gt;);\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//anything so that isset() evaluates to TRUE.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;var_dump\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$pdo\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;q\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$some_json_object_as_described_above\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The above is just an example, so needless to say, copy-\u0026amp;gt;paste won\u0026apos;t work. Adjust for your needs.\nNow this may not provide 100% security, but it allows some control over the column names when they \u0026quot;come in\u0026quot; as dynamic strings and may be changed on users end. Furthermore, there is no need to build some array with your table column names and types since they are extracted from the information_schema.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Short answer is NO you cannot use dynamic table name, field names,  etc in the Prepared execute statement with PDO because it adds quotes to them which will break the query.  But if you can sanitize them, then you can safely plop them right in the query itself just like you would with MySQLi anyway.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The correct way to do this is with mysqli\u0026apos;s mysqli_real_escape_string() function because the mysql_real_escape_string was removed from PHP hastily without any consideration into how that affects dynamic structure applications.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$unsanitized_table_name\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;users\u0026apos; OR \u0026apos;1\u0026apos;=\u0026apos;1\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//SQL Injection attempt\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sanitized_table_name\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;sanitize_input\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$unsanitized_table_name\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dbh\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{$unsanitized_table_name}\u0026lt;/span\u0026gt; WHERE 1\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//\u0026amp;lt;--- REALLY bad idea\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dbh\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{$sanitized_table_name}\u0026lt;/span\u0026gt; WHERE 1\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//\u0026amp;lt;--- Not ideal but hey, at least you\u0026apos;re safe.\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//PDO Cant sanitize everything so we limp along with mysqli instead\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;sanitize_input\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\n\u0026lt;/span\u0026gt;{\n   \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$mysqli\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;mysqli\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;localhost\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UsahName\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Passerrrd\u0026quot;\u0026lt;/span\u0026gt;);\n   \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$mysqli\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;real_escape_string\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt;);\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":274,"title":"Can PHP PDO Statements accept the table or column name as parameter?","content":"\n                \n\u0026lt;p\u0026gt;Why can\u0026apos;t I pass the table name to a prepared PDO statement?\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dbh\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;prepare\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT * FROM :table WHERE 1\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;execute\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;:table\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;users\u0026apos;\u0026lt;/span\u0026gt;))) {\n    \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;var_dump\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$stmt\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;fetchAll\u0026lt;/span\u0026gt;());\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Is there another safe way to insert a table name into a SQL query? With safe, I mean that I don\u0026apos;t want to do\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM \u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$table\u0026lt;/span\u0026gt; WHERE 1\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","slug":"can-php-pdo-statements-accept-the-table-or-column-name-as-parameter-1657387478588","postType":"QUESTION","createdAt":"2022-07-09T17:24:38.000Z","updatedAt":"2022-07-09T17:24:38.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"CSS selector for first element with class","slug":"css-selector-for-first-element-with-class-1657388028765"},{"title":"How do you use a variable in a regular expression?","slug":"how-do-you-use-a-variable-in-a-regular-expression-1657387939007"},{"title":"Importing installed package from script raises \"AttributeError: module has no attribute\" or \"ImportError: cannot import name\"","slug":"importing-installed-package-from-script-raises-\"attributeerror:-module-has-no-attribute\"-or-\"importerror:-cannot-import-name\"-1657387790607"},{"title":"How do I get PHP errors to display?","slug":"how-do-i-get-php-errors-to-display-1657384570095"},{"title":"How to print without a newline or space","slug":"how-to-print-without-a-newline-or-space-1657387814213"},{"title":"Why not use Double or Float to represent currency?","slug":"why-not-use-double-or-float-to-represent-currency-1657387417964"},{"title":"Google Maps JS API v3 - Simple Multiple Marker Example","slug":"google-maps-js-api-v3-simple-multiple-marker-example-1657388073335"},{"title":"How to print a number with commas as thousands separators in JavaScript","slug":"how-to-print-a-number-with-commas-as-thousands-separators-in-javascript-1657387777379"},{"title":"How do I return the response from an asynchronous call?","slug":"how-do-i-return-the-response-from-an-asynchronous-call-1657384208012"},{"title":"R cannot be resolved - Android error","slug":"r-cannot-be-resolved-android-error-1657388526258"},{"title":"Why should I not #include \u003cbits/stdc++.h\u003e?","slug":"why-should-i-not-include-lessbitsstdc++.hgreater-1657384470484"},{"title":"How can I validate an email address using a regular expression?","slug":"how-can-i-validate-an-email-address-using-a-regular-expression-1657384549233"},{"title":"$(document).ready equivalent without jQuery","slug":"dollar(document).ready-equivalent-without-jquery-1657388504115"},{"title":"How to avoid using Select in Excel VBA","slug":"how-to-avoid-using-select-in-excel-vba-1657384286300"},{"title":"What is the copy-and-swap idiom?","slug":"what-is-the-copy-and-swap-idiom-1657384840329"},{"title":"Is List\u003cDog\u003e a subclass of List\u003cAnimal\u003e? Why are Java generics not implicitly polymorphic?","slug":"is-listlessdoggreater-a-subclass-of-listlessanimalgreater-why-are-java-generics-not-implicitly-polymorphic-1657384766724"},{"title":"Reshaping multiple sets of measurement columns (wide format) into single columns (long format)","slug":"reshaping-multiple-sets-of-measurement-columns-(wide-format)-into-single-columns-(long-format)-1657388016983"},{"title":"Safely turning a JSON string into an object","slug":"safely-turning-a-json-string-into-an-object-1657388194824"},{"title":"What is an undefined reference/unresolved external symbol error and how do I fix it?","slug":"what-is-an-undefined-referenceunresolved-external-symbol-error-and-how-do-i-fix-it-1657384255179"},{"title":"How can I parse a JSON file with PHP? [duplicate]","slug":"how-can-i-parse-a-json-file-with-php-duplicate-1657388002325"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"can-php-pdo-statements-accept-the-table-or-column-name-as-parameter-1657387478588"},"buildId":"6ctJfCympFH_chh5mjicD","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>