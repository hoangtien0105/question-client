<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852","name":"Questions"}}]}</script><title>How to evaluate a math expression given in string form? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I&#x27;m trying to write a Java routine to evaluate math expressions from String values like:

&quot;5+3&quot;
&quot;10-40&quot;
&quot;(1+10)*3&quot;

I want to avoid a lot of if-then-else statements.
How can I do this?
    "/><meta property="og:title" content="How to evaluate a math expression given in string form? | Solution Checker"/><meta property="og:description" content="I&#x27;m trying to write a Java routine to evaluate math expressions from String values like:

&quot;5+3&quot;
&quot;10-40&quot;
&quot;(1+10)*3&quot;

I want to avoid a lot of if-then-else statements.
How can I do this?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How to evaluate a math expression given in string form?","text":"I&apos;m trying to write a Java routine to evaluate math expressions from String values like:\n\n&quot;5+3&quot;\n&quot;10-40&quot;\n&quot;(1+10)*3&quot;\n\nI want to avoid a lot of if-then-else statements.\nHow can I do this?\n    ","answerCount":25,"upVoteCount":500,"suggestedAnswer":[{"text":"With JDK1.6, you can use the built-in Javascript engine.\n\nimport javax.script.ScriptEngineManager;\nimport javax.script.ScriptEngine;\nimport javax.script.ScriptException;\n\npublic class Test {\n  public static void main(String[] args) throws ScriptException {\n    ScriptEngineManager mgr = new ScriptEngineManager();\n    ScriptEngine engine = mgr.getEngineByName(&quot;JavaScript&quot;);\n    String foo = &quot;40+2&quot;;\n    System.out.println(engine.eval(foo));\n    } \n}\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution1","@type":"Answer","upvoteCount":0},{"text":"I&apos;ve written this eval method for arithmetic expressions to answer this question. It does addition, subtraction, multiplication, division, exponentiation (using the ^ symbol), and a few basic functions like sqrt. It supports grouping using (...), and it gets the operator precedence and associativity rules correct.\npublic static double eval(final String str) {\n    return new Object() {\n        int pos = -1, ch;\n        \n        void nextChar() {\n            ch = (++pos &lt; str.length()) ? str.charAt(pos) : -1;\n        }\n        \n        boolean eat(int charToEat) {\n            while (ch == &apos; &apos;) nextChar();\n            if (ch == charToEat) {\n                nextChar();\n                return true;\n            }\n            return false;\n        }\n        \n        double parse() {\n            nextChar();\n            double x = parseExpression();\n            if (pos &lt; str.length()) throw new RuntimeException(&quot;Unexpected: &quot; + (char)ch);\n            return x;\n        }\n        \n        // Grammar:\n        // expression = term | expression `+` term | expression `-` term\n        // term = factor | term `*` factor | term `/` factor\n        // factor = `+` factor | `-` factor | `(` expression `)` | number\n        //        | functionName `(` expression `)` | functionName factor\n        //        | factor `^` factor\n        \n        double parseExpression() {\n            double x = parseTerm();\n            for (;;) {\n                if      (eat(&apos;+&apos;)) x += parseTerm(); // addition\n                else if (eat(&apos;-&apos;)) x -= parseTerm(); // subtraction\n                else return x;\n            }\n        }\n        \n        double parseTerm() {\n            double x = parseFactor();\n            for (;;) {\n                if      (eat(&apos;*&apos;)) x *= parseFactor(); // multiplication\n                else if (eat(&apos;/&apos;)) x /= parseFactor(); // division\n                else return x;\n            }\n        }\n        \n        double parseFactor() {\n            if (eat(&apos;+&apos;)) return +parseFactor(); // unary plus\n            if (eat(&apos;-&apos;)) return -parseFactor(); // unary minus\n            \n            double x;\n            int startPos = this.pos;\n            if (eat(&apos;(&apos;)) { // parentheses\n                x = parseExpression();\n                if (!eat(&apos;)&apos;)) throw new RuntimeException(&quot;Missing &apos;)&apos;&quot;);\n            } else if ((ch &gt;= &apos;0&apos; &amp;&amp; ch &lt;= &apos;9&apos;) || ch == &apos;.&apos;) { // numbers\n                while ((ch &gt;= &apos;0&apos; &amp;&amp; ch &lt;= &apos;9&apos;) || ch == &apos;.&apos;) nextChar();\n                x = Double.parseDouble(str.substring(startPos, this.pos));\n            } else if (ch &gt;= &apos;a&apos; &amp;&amp; ch &lt;= &apos;z&apos;) { // functions\n                while (ch &gt;= &apos;a&apos; &amp;&amp; ch &lt;= &apos;z&apos;) nextChar();\n                String func = str.substring(startPos, this.pos);\n                if (eat(&apos;(&apos;)) {\n                    x = parseExpression();\n                    if (!eat(&apos;)&apos;)) throw new RuntimeException(&quot;Missing &apos;)&apos; after argument to &quot; + func);\n                } else {\n                    x = parseFactor();\n                }\n                if (func.equals(&quot;sqrt&quot;)) x = Math.sqrt(x);\n                else if (func.equals(&quot;sin&quot;)) x = Math.sin(Math.toRadians(x));\n                else if (func.equals(&quot;cos&quot;)) x = Math.cos(Math.toRadians(x));\n                else if (func.equals(&quot;tan&quot;)) x = Math.tan(Math.toRadians(x));\n                else throw new RuntimeException(&quot;Unknown function: &quot; + func);\n            } else {\n                throw new RuntimeException(&quot;Unexpected: &quot; + (char)ch);\n            }\n            \n            if (eat(&apos;^&apos;)) x = Math.pow(x, parseFactor()); // exponentiation\n            \n            return x;\n        }\n    }.parse();\n}\n\nExample:\nSystem.out.println(eval(&quot;((4 - 2^3 + 1) * -sqrt(3*3+4*4)) / 2&quot;));\n\nOutput: 7.5 (which is correct)\n\nThe parser is a recursive descent parser, so internally uses separate parse methods for each level of operator precedence in its grammar. I deliberately kept it short, but here are some ideas you might want to expand it with:\n\nVariables:\nThe bit of the parser that reads the names for functions can easily be changed to handle custom variables too, by looking up names in a variable table passed to the eval method, such as a Map&lt;String,Double&gt; variables.\n\nSeparate compilation and evaluation:\nWhat if, having added support for variables, you wanted to evaluate the same expression millions of times with changed variables, without parsing it every time? It&apos;s possible. First define an interface to use to evaluate the precompiled expression:\n  @FunctionalInterface\n  interface Expression {\n      double eval();\n  }\n\nNow to rework the original &quot;eval&quot; function into a &quot;parse&quot; function, change all the methods that return doubles, so instead they return an instance of that interface. Java 8&apos;s lambda syntax works well for this. Example of one of the changed methods:\n  Expression parseExpression() {\n      Expression x = parseTerm();\n      for (;;) {\n          if (eat(&apos;+&apos;)) { // addition\n              Expression a = x, b = parseTerm();\n              x = (() -&gt; a.eval() + b.eval());\n          } else if (eat(&apos;-&apos;)) { // subtraction\n              Expression a = x, b = parseTerm();\n              x = (() -&gt; a.eval() - b.eval());\n          } else {\n              return x;\n          }\n      }\n  }\n\nThat builds a recursive tree of Expression objects representing the compiled expression (an abstract syntax tree). Then you can compile it once and evaluate it repeatedly with different values:\n  public static void main(String[] args) {\n      Map&lt;String,Double&gt; variables = new HashMap&lt;&gt;();\n      Expression exp = parse(&quot;x^2 - x + 2&quot;, variables);\n      for (double x = -20; x &lt;= +20; x++) {\n          variables.put(&quot;x&quot;, x);\n          System.out.println(x + &quot; =&gt; &quot; + exp.eval());\n      }\n  }\n\n\nDifferent datatypes:\nInstead of double, you could change the evaluator to use something more powerful like BigDecimal, or a class that implements complex numbers, or rational numbers (fractions). You could even use Object, allowing some mix of datatypes in expressions, just like a real programming language. :)\n\n\n\nAll code in this answer released to the public domain. Have fun!\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution2","@type":"Answer","upvoteCount":0},{"text":"For my university project, I was looking for a parser / evaluator supporting both basic formulas and more complicated equations (especially iterated operators). I found very nice open source library for JAVA and .NET called mXparser. I will give a few examples to make some feeling on the syntax, for further instructions please visit project website (especially tutorial section).\nhttps://mathparser.org/\nhttps://mathparser.org/mxparser-tutorial/\nhttps://mathparser.org/api/\nAnd few examples\n1 - Simple furmula\nExpression e = new Expression(&quot;( 2 + 3/4 + sin(pi) )/2&quot;);\ndouble v = e.calculate()\n\n2 - User defined arguments and constants\nArgument x = new Argument(&quot;x = 10&quot;);\nConstant a = new Constant(&quot;a = pi^2&quot;);\nExpression e = new Expression(&quot;cos(a*x)&quot;, x, a);\ndouble v = e.calculate()\n\n3 - User defined functions\nFunction f = new Function(&quot;f(x, y, z) = sin(x) + cos(y*z)&quot;);\nExpression e = new Expression(&quot;f(3,2,5)&quot;, f);\ndouble v = e.calculate()\n\n4 - Iteration\nExpression e = new Expression(&quot;sum( i, 1, 100, sin(i) )&quot;);\ndouble v = e.calculate()\n\nFound recently - in case you would like to try the syntax (and see the advanced use case) you can download the Scalar Calculator app that is powered by mXparser.\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution3","@type":"Answer","upvoteCount":0},{"text":"The correct way to solve this is with a lexer and a parser. You can write simple versions of these yourself, or those pages also have links to Java lexers and parsers.\n\nCreating a recursive descent parser is a really good learning exercise.\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution4","@type":"Answer","upvoteCount":0},{"text":"HERE is another open source library on GitHub named EvalEx.\n\nUnlike the JavaScript engine this library is focused in evaluating mathematical expressions only. Moreover, the library is extensible and supports use of boolean operators as well as parentheses.\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution5","@type":"Answer","upvoteCount":0},{"text":"You can evaluate expressions easily if your Java application already accesses a database, without using any other JARs.\n\nSome databases require you to use a dummy table (eg, Oracle&apos;s &quot;dual&quot; table) and others will allow you to evaluate expressions without &quot;selecting&quot; from any table.\n\nFor example, in Sql Server or Sqlite\n\nselect (((12.10 +12.0))/ 233.0) amount\n\n\nand in Oracle\n\nselect (((12.10 +12.0))/ 233.0) amount from dual;\n\n\nThe advantage of using a DB is that you can evaluate many expressions at the same time. Also most DB&apos;s will allow you to use highly complex expressions and   will also have a number of extra functions that can be called as necessary.  \n\nHowever performance may suffer if many single expressions need to be evaluated individually, particularly when the DB is located on a network server.\n\nThe following addresses the performance problem to some extent, by using a Sqlite in-memory database.    \n\nHere&apos;s a full working example in Java\n\nClass. forName(&quot;org.sqlite.JDBC&quot;);\nConnection conn = DriverManager.getConnection(&quot;jdbc:sqlite::memory:&quot;);\nStatement stat = conn.createStatement();\nResultSet rs = stat.executeQuery( &quot;select (1+10)/20.0 amount&quot;);\nrs.next();\nSystem.out.println(rs.getBigDecimal(1));\nstat.close();\nconn.close();\n\n\nOf course you could extend the above code to handle multiple calculations at the same time.\n\nResultSet rs = stat.executeQuery( &quot;select (1+10)/20.0 amount, (1+100)/20.0 amount2&quot;);\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution6","@type":"Answer","upvoteCount":0},{"text":"You can also try the BeanShell interpreter:\n\nInterpreter interpreter = new Interpreter();\ninterpreter.eval(&quot;result = (7+21*6)/(32-27)&quot;);\nSystem.out.println(interpreter.get(&quot;result&quot;));\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution7","@type":"Answer","upvoteCount":0},{"text":"Another way is to use the Spring Expression Language or SpEL which does a whole lot more along with evaluating mathematical expressions, therefore maybe slightly overkill. You do not have to be using Spring framework to use this expression library as it is stand-alone. Copying examples from SpEL&apos;s documentation:\nExpressionParser parser = new SpelExpressionParser();\nint two = parser.parseExpression(&quot;1 + 1&quot;).getValue(Integer.class); // 2 \ndouble twentyFour = parser.parseExpression(&quot;2.0 * 3e0 * 4&quot;).getValue(Double.class); //24.0\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution8","@type":"Answer","upvoteCount":0},{"text":"This article discusses various approaches. Here are the 2 key approaches mentioned in the article:\nJEXL from Apache\nAllows for scripts that include references to java objects.\n// Create or retrieve a JexlEngine\nJexlEngine jexl = new JexlEngine();\n// Create an expression object\nString jexlExp = &quot;foo.innerFoo.bar()&quot;;\nExpression e = jexl.createExpression( jexlExp );\n \n// Create a context and add data\nJexlContext jctx = new MapContext();\njctx.set(&quot;foo&quot;, new Foo() );\n \n// Now evaluate the expression, getting the result\nObject o = e.evaluate(jctx);\n\nUse the javascript engine embedded in the JDK:\nprivate static void jsEvalWithVariable()\n{\n    List&lt;String&gt; namesList = new ArrayList&lt;String&gt;();\n    namesList.add(&quot;Jill&quot;);\n    namesList.add(&quot;Bob&quot;);\n    namesList.add(&quot;Laureen&quot;);\n    namesList.add(&quot;Ed&quot;);\n \n    ScriptEngineManager mgr = new ScriptEngineManager();\n    ScriptEngine jsEngine = mgr.getEngineByName(&quot;JavaScript&quot;);\n \n    jsEngine.put(&quot;namesListKey&quot;, namesList);\n    System.out.println(&quot;Executing in script environment...&quot;);\n    try\n    {\n      jsEngine.eval(&quot;var x;&quot; +\n                    &quot;var names = namesListKey.toArray();&quot; +\n                    &quot;for(x in names) {&quot; +\n                    &quot;  println(names[x]);&quot; +\n                    &quot;}&quot; +\n                    &quot;namesListKey.add(\\&quot;Dana\\&quot;);&quot;);\n    }\n    catch (ScriptException ex)\n    {\n        ex.printStackTrace();\n    }\n}\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution9","@type":"Answer","upvoteCount":0},{"text":"if we are going to implement it then we can can use the below algorithm :--\n\n\nWhile there are still tokens to be read in,\n\n1.1 Get the next token.\n1.2 If the token is:\n\n1.2.1 A number: push it onto the value stack.\n\n1.2.2 A variable: get its value, and push onto the value stack.\n\n1.2.3 A left parenthesis: push it onto the operator stack.\n\n1.2.4 A right parenthesis:\n\n 1 While the thing on top of the operator stack is not a \n   left parenthesis,\n     1 Pop the operator from the operator stack.\n     2 Pop the value stack twice, getting two operands.\n     3 Apply the operator to the operands, in the correct order.\n     4 Push the result onto the value stack.\n 2 Pop the left parenthesis from the operator stack, and discard it.\n\n\n1.2.5 An operator (call it thisOp):\n\n 1 While the operator stack is not empty, and the top thing on the\n   operator stack has the same or greater precedence as thisOp,\n   1 Pop the operator from the operator stack.\n   2 Pop the value stack twice, getting two operands.\n   3 Apply the operator to the operands, in the correct order.\n   4 Push the result onto the value stack.\n 2 Push thisOp onto the operator stack.\n\nWhile the operator stack is not empty,\n1 Pop the operator from the operator stack.\n2 Pop the value stack twice, getting two operands.\n3 Apply the operator to the operands, in the correct order.\n4 Push the result onto the value stack.\nAt this point the operator stack should be empty, and the value\nstack should have only one value in it, which is the final result.\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution10","@type":"Answer","upvoteCount":0},{"text":"This is another interesting alternative \nhttps://github.com/Shy-Ta/expression-evaluator-demo\n\nThe usage is very simple and gets the job done, for example:\n\n  ExpressionsEvaluator evalExpr = ExpressionsFactory.create(&quot;2+3*4-6/2&quot;);  \n  assertEquals(BigDecimal.valueOf(11), evalExpr.eval()); \n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution11","@type":"Answer","upvoteCount":0},{"text":"It seems like JEP should do the job\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution12","@type":"Answer","upvoteCount":0},{"text":"It&apos;s too late to answer but I came across same situation to evaluate expression in java, it might help someone\n\nMVEL does runtime evaluation of expressions, we can write a java code in String to get it evaluated in this.\n\n    String expressionStr = &quot;x+y&quot;;\n    Map&lt;String, Object&gt; vars = new HashMap&lt;String, Object&gt;();\n    vars.put(&quot;x&quot;, 10);\n    vars.put(&quot;y&quot;, 20);\n    ExecutableStatement statement = (ExecutableStatement) MVEL.compileExpression(expressionStr);\n    Object result = MVEL.executeExpression(statement, vars);\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution13","@type":"Answer","upvoteCount":0},{"text":"I think what ever way you do this it&apos;s going to involve a lot of conditional statements. But for single operations like in your examples you could limit it to 4 if statements with something like \n\nString math = &quot;1+4&quot;;\n\nif (math.split(&quot;+&quot;).length == 2) {\n    //do calculation\n} else if (math.split(&quot;-&quot;).length == 2) {\n    //do calculation\n} ...\n\n\nIt gets a whole lot more complicated when you want to deal with multiple operations like &quot;4+5*6&quot;.\n\nIf you are trying to build a calculator then I&apos;d surgest passing each section of the calculation separatly (each number or operator) rather than as a single string.\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution14","@type":"Answer","upvoteCount":0},{"text":"You might have a look at the Symja framework:\n\nExprEvaluator util = new ExprEvaluator(); \nIExpr result = util.evaluate(&quot;10-40&quot;);\nSystem.out.println(result.toString()); // -&gt; &quot;-30&quot; \n\n\nTake note that definitively more complex expressions can be evaluated:\n\n// D(...) gives the derivative of the function Sin(x)*Cos(x)\nIAST function = D(Times(Sin(x), Cos(x)), x);\nIExpr result = util.evaluate(function);\n// print: Cos(x)^2-Sin(x)^2\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution15","@type":"Answer","upvoteCount":0},{"text":"Try the following sample code using JDK1.6&apos;s Javascript engine with code injection handling.\n\nimport javax.script.ScriptEngine;\nimport javax.script.ScriptEngineManager;\n\npublic class EvalUtil {\nprivate static ScriptEngine engine = new ScriptEngineManager().getEngineByName(&quot;JavaScript&quot;);\npublic static void main(String[] args) {\n    try {\n        System.out.println((new EvalUtil()).eval(&quot;(((5+5)/2) &gt; 5) || 5 &gt;3 &quot;));\n        System.out.println((new EvalUtil()).eval(&quot;(((5+5)/2) &gt; 5) || true&quot;));\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\npublic Object eval(String input) throws Exception{\n    try {\n        if(input.matches(&quot;.*[a-zA-Z;~`#$_{}\\\\[\\\\]:\\\\\\\\;\\&quot;&apos;,\\\\.\\\\?]+.*&quot;)) {\n            throw new Exception(&quot;Invalid expression : &quot; + input );\n        }\n        return engine.eval(input);\n    } catch (Exception e) {\n        e.printStackTrace();\n        throw e;\n    }\n }\n}\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution16","@type":"Answer","upvoteCount":0},{"text":"This is actually complementing the answer given by @Boann. It has a slight bug which causes &quot;-2 ^ 2&quot; to give an erroneous result of -4.0. The problem for that is the point at which the exponentiation is evaluated in his. Just move the exponentiation to the block of parseTerm(), and you&apos;ll be all fine. Have a look at the below, which is @Boann&apos;s answer slightly modified. Modification is in the comments.\n\npublic static double eval(final String str) {\n    return new Object() {\n        int pos = -1, ch;\n\n        void nextChar() {\n            ch = (++pos &lt; str.length()) ? str.charAt(pos) : -1;\n        }\n\n        boolean eat(int charToEat) {\n            while (ch == &apos; &apos;) nextChar();\n            if (ch == charToEat) {\n                nextChar();\n                return true;\n            }\n            return false;\n        }\n\n        double parse() {\n            nextChar();\n            double x = parseExpression();\n            if (pos &lt; str.length()) throw new RuntimeException(&quot;Unexpected: &quot; + (char)ch);\n            return x;\n        }\n\n        // Grammar:\n        // expression = term | expression `+` term | expression `-` term\n        // term = factor | term `*` factor | term `/` factor\n        // factor = `+` factor | `-` factor | `(` expression `)`\n        //        | number | functionName factor | factor `^` factor\n\n        double parseExpression() {\n            double x = parseTerm();\n            for (;;) {\n                if      (eat(&apos;+&apos;)) x += parseTerm(); // addition\n                else if (eat(&apos;-&apos;)) x -= parseTerm(); // subtraction\n                else return x;\n            }\n        }\n\n        double parseTerm() {\n            double x = parseFactor();\n            for (;;) {\n                if      (eat(&apos;*&apos;)) x *= parseFactor(); // multiplication\n                else if (eat(&apos;/&apos;)) x /= parseFactor(); // division\n                else if (eat(&apos;^&apos;)) x = Math.pow(x, parseFactor()); //exponentiation -&gt; Moved in to here. So the problem is fixed\n                else return x;\n            }\n        }\n\n        double parseFactor() {\n            if (eat(&apos;+&apos;)) return parseFactor(); // unary plus\n            if (eat(&apos;-&apos;)) return -parseFactor(); // unary minus\n\n            double x;\n            int startPos = this.pos;\n            if (eat(&apos;(&apos;)) { // parentheses\n                x = parseExpression();\n                eat(&apos;)&apos;);\n            } else if ((ch &gt;= &apos;0&apos; &amp;&amp; ch &lt;= &apos;9&apos;) || ch == &apos;.&apos;) { // numbers\n                while ((ch &gt;= &apos;0&apos; &amp;&amp; ch &lt;= &apos;9&apos;) || ch == &apos;.&apos;) nextChar();\n                x = Double.parseDouble(str.substring(startPos, this.pos));\n            } else if (ch &gt;= &apos;a&apos; &amp;&amp; ch &lt;= &apos;z&apos;) { // functions\n                while (ch &gt;= &apos;a&apos; &amp;&amp; ch &lt;= &apos;z&apos;) nextChar();\n                String func = str.substring(startPos, this.pos);\n                x = parseFactor();\n                if (func.equals(&quot;sqrt&quot;)) x = Math.sqrt(x);\n                else if (func.equals(&quot;sin&quot;)) x = Math.sin(Math.toRadians(x));\n                else if (func.equals(&quot;cos&quot;)) x = Math.cos(Math.toRadians(x));\n                else if (func.equals(&quot;tan&quot;)) x = Math.tan(Math.toRadians(x));\n                else throw new RuntimeException(&quot;Unknown function: &quot; + func);\n            } else {\n                throw new RuntimeException(&quot;Unexpected: &quot; + (char)ch);\n            }\n\n            //if (eat(&apos;^&apos;)) x = Math.pow(x, parseFactor()); // exponentiation -&gt; This is causing a bit of problem\n\n            return x;\n        }\n    }.parse();\n}\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution17","@type":"Answer","upvoteCount":0},{"text":"package ExpressionCalculator.expressioncalculator;\n\nimport java.text.DecimalFormat;\nimport java.util.Scanner;\n\npublic class ExpressionCalculator {\n\nprivate static String addSpaces(String exp){\n\n    //Add space padding to operands.\n    //https://regex101.com/r/sJ9gM7/73\n    exp = exp.replaceAll(&quot;(?&lt;=[0-9()])[\\\\/]&quot;, &quot; / &quot;);\n    exp = exp.replaceAll(&quot;(?&lt;=[0-9()])[\\\\^]&quot;, &quot; ^ &quot;);\n    exp = exp.replaceAll(&quot;(?&lt;=[0-9()])[\\\\*]&quot;, &quot; * &quot;);\n    exp = exp.replaceAll(&quot;(?&lt;=[0-9()])[+]&quot;, &quot; + &quot;); \n    exp = exp.replaceAll(&quot;(?&lt;=[0-9()])[-]&quot;, &quot; - &quot;);\n\n    //Keep replacing double spaces with single spaces until your string is properly formatted\n    /*while(exp.indexOf(&quot;  &quot;) != -1){\n        exp = exp.replace(&quot;  &quot;, &quot; &quot;);\n     }*/\n    exp = exp.replaceAll(&quot; {2,}&quot;, &quot; &quot;);\n\n       return exp;\n}\n\npublic static Double evaluate(String expr){\n\n    DecimalFormat df = new DecimalFormat(&quot;#.####&quot;);\n\n    //Format the expression properly before performing operations\n    String expression = addSpaces(expr);\n\n    try {\n        //We will evaluate using rule BDMAS, i.e. brackets, division, power, multiplication, addition and\n        //subtraction will be processed in following order\n        int indexClose = expression.indexOf(&quot;)&quot;);\n        int indexOpen = -1;\n        if (indexClose != -1) {\n            String substring = expression.substring(0, indexClose);\n            indexOpen = substring.lastIndexOf(&quot;(&quot;);\n            substring = substring.substring(indexOpen + 1).trim();\n            if(indexOpen != -1 &amp;&amp; indexClose != -1) {\n                Double result = evaluate(substring);\n                expression = expression.substring(0, indexOpen).trim() + &quot; &quot; + result + &quot; &quot; + expression.substring(indexClose + 1).trim();\n                return evaluate(expression.trim());\n            }\n        }\n\n        String operation = &quot;&quot;;\n        if(expression.indexOf(&quot; / &quot;) != -1){\n            operation = &quot;/&quot;;\n        }else if(expression.indexOf(&quot; ^ &quot;) != -1){\n            operation = &quot;^&quot;;\n        } else if(expression.indexOf(&quot; * &quot;) != -1){\n            operation = &quot;*&quot;;\n        } else if(expression.indexOf(&quot; + &quot;) != -1){\n            operation = &quot;+&quot;;\n        } else if(expression.indexOf(&quot; - &quot;) != -1){ //Avoid negative numbers\n            operation = &quot;-&quot;;\n        } else{\n            return Double.parseDouble(expression);\n        }\n\n        int index = expression.indexOf(operation);\n        if(index != -1){\n            indexOpen = expression.lastIndexOf(&quot; &quot;, index - 2);\n            indexOpen = (indexOpen == -1)?0:indexOpen;\n            indexClose = expression.indexOf(&quot; &quot;, index + 2);\n            indexClose = (indexClose == -1)?expression.length():indexClose;\n            if(indexOpen != -1 &amp;&amp; indexClose != -1) {\n                Double lhs = Double.parseDouble(expression.substring(indexOpen, index));\n                Double rhs = Double.parseDouble(expression.substring(index + 2, indexClose));\n                Double result = null;\n                switch (operation){\n                    case &quot;/&quot;:\n                        //Prevent divide by 0 exception.\n                        if(rhs == 0){\n                            return null;\n                        }\n                        result = lhs / rhs;\n                        break;\n                    case &quot;^&quot;:\n                        result = Math.pow(lhs, rhs);\n                        break;\n                    case &quot;*&quot;:\n                        result = lhs * rhs;\n                        break;\n                    case &quot;-&quot;:\n                        result = lhs - rhs;\n                        break;\n                    case &quot;+&quot;:\n                        result = lhs + rhs;\n                        break;\n                    default:\n                        break;\n                }\n                if(indexClose == expression.length()){\n                    expression = expression.substring(0, indexOpen) + &quot; &quot; + result + &quot; &quot; + expression.substring(indexClose);\n                }else{\n                    expression = expression.substring(0, indexOpen) + &quot; &quot; + result + &quot; &quot; + expression.substring(indexClose + 1);\n                }\n                return Double.valueOf(df.format(evaluate(expression.trim())));\n            }\n        }\n    }catch(Exception exp){\n        exp.printStackTrace();\n    }\n    return 0.0;\n}\n\npublic static void main(String args[]){\n\n    Scanner scanner = new Scanner(System.in);\n    System.out.print(&quot;Enter an Mathematical Expression to Evaluate: &quot;);\n    String input = scanner.nextLine();\n    System.out.println(evaluate(input));\n}\n\n\n}\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution18","@type":"Answer","upvoteCount":0},{"text":"import java.util.*;\n\npublic class check { \n   int ans;\n   String str=&quot;7 + 5&quot;;\n   StringTokenizer st=new StringTokenizer(str);\n\n   int v1=Integer.parseInt(st.nextToken());\n   String op=st.nextToken();\n   int v2=Integer.parseInt(st.nextToken());\n\n   if(op.equals(&quot;+&quot;)) { ans= v1 + v2; }\n   if(op.equals(&quot;-&quot;)) { ans= v1 - v2; }\n   //.........\n}\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution19","@type":"Answer","upvoteCount":0},{"text":"A Java class that can evaluate mathematical expressions:\npackage test;\n\npublic class Calculator {\n\n    public static Double calculate(String expression){\n        if (expression == null || expression.length() == 0) {\n            return null;\n        }\n        return calc(expression.replace(&quot; &quot;, &quot;&quot;));\n    }\n    public static Double calc(String expression) {\n        String[] containerArr = new String[]{expression};\n        double leftVal = getNextOperand(containerArr);\n        expression = containerArr[0];\n        if (expression.length() == 0) {\n            return leftVal;\n        }\n        char operator = expression.charAt(0);\n        expression = expression.substring(1);\n\n        while (operator == &apos;*&apos; || operator == &apos;/&apos;) {\n            containerArr[0] = expression;\n            double rightVal = getNextOperand(containerArr);\n            expression = containerArr[0];\n            if (operator == &apos;*&apos;) {\n                leftVal = leftVal * rightVal;\n            } else {\n                leftVal = leftVal / rightVal;\n            }\n            if (expression.length() &gt; 0) {\n                operator = expression.charAt(0);\n                expression = expression.substring(1);\n            } else {\n                return leftVal;\n            }\n        }\n        if (operator == &apos;+&apos;) {\n            return leftVal + calc(expression);\n        } else {\n            return leftVal - calc(expression);\n        }\n\n    }\n    \n    private static double getNextOperand(String[] exp){\n        double res;\n        if (exp[0].startsWith(&quot;(&quot;)) {\n            int open = 1;\n            int i = 1;\n            while (open != 0) {\n                if (exp[0].charAt(i) == &apos;(&apos;) {\n                    open++;\n                } else if (exp[0].charAt(i) == &apos;)&apos;) {\n                    open--;\n                }\n                i++;\n            }\n            res = calc(exp[0].substring(1, i - 1));\n            exp[0] = exp[0].substring(i);\n        } else {\n            int i = 1;\n            if (exp[0].charAt(0) == &apos;-&apos;) {\n                i++;\n            }\n            while (exp[0].length() &gt; i &amp;&amp; isNumber((int) exp[0].charAt(i))) {\n                i++;\n            }\n            res = Double.parseDouble(exp[0].substring(0, i));\n            exp[0] = exp[0].substring(i);\n        }\n        return res;\n    }\n\n\n    private static boolean isNumber(int c) {\n        int zero = (int) &apos;0&apos;;\n        int nine = (int) &apos;9&apos;;\n        return (c &gt;= zero &amp;&amp; c &lt;= nine) || c ==&apos;.&apos;;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(calculate(&quot;(((( -6 )))) * 9 * -1&quot;));\n        System.out.println(calc(&quot;(-5.2+-5*-5*((5/4+2)))&quot;));\n\n    }\n\n}\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution20","@type":"Answer","upvoteCount":0},{"text":"How about something like this:\n\nString st = &quot;10+3&quot;;\nint result;\nfor(int i=0;i&lt;st.length();i++)\n{\n  if(st.charAt(i)==&apos;+&apos;)\n  {\n    result=Integer.parseInt(st.substring(0, i))+Integer.parseInt(st.substring(i+1, st.length()));\n    System.out.print(result);\n  }         \n}\n\n\nand do the similar thing for every other mathematical operator accordingly .. \n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution21","@type":"Answer","upvoteCount":0},{"text":"It is possible to convert any expression string in infix notation to a postfix notation using Djikstra&apos;s shunting-yard algorithm. The result of the algorithm can then serve as input to the postfix algorithm with returns the result of the expression.\n\nI wrote an article about it here, with an implementation in java\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution22","@type":"Answer","upvoteCount":0},{"text":"Yet another option: https://github.com/stefanhaustein/expressionparser\n\nI have implemented this to have a simple but flexible option to permit both:\n\n\nImmediate processing (Calculator.java, SetDemo.java)\nBuilding and processing a parse tree (TreeBuilder.java)\n\n\nThe TreeBuilder linked above is part of a CAS demo package that does symbolic derivation. There is also a BASIC interpreter example and I have started to build a TypeScript interpreter using it.\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution23","@type":"Answer","upvoteCount":0},{"text":"External library like RHINO or NASHORN can be used to run javascript. And javascript can evaluate simple formula without parcing the string. No performance impact as well if code is written well.\nBelow is an example with RHINO - \n\npublic class RhinoApp {\n    private String simpleAdd = &quot;(12+13+2-2)*2+(12+13+2-2)*2&quot;;\n\npublic void runJavaScript() {\n    Context jsCx = Context.enter();\n    Context.getCurrentContext().setOptimizationLevel(-1);\n    ScriptableObject scope = jsCx.initStandardObjects();\n    Object result = jsCx.evaluateString(scope, simpleAdd , &quot;formula&quot;, 0, null);\n    Context.exit();\n    System.out.println(result);\n}\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution24","@type":"Answer","upvoteCount":0},{"text":"import javax.script.ScriptEngine;\nimport javax.script.ScriptEngineManager;\nimport javax.script.ScriptException;\n\npublic class test2 {\n    public static void main(String[] args) throws ScriptException {\n        String s = &quot;10+2&quot;;\n        ScriptEngineManager mn = new ScriptEngineManager();\n        ScriptEngine en = mn.getEngineByName(&quot;js&quot;);\n        Object result = en.eval(s);\n        System.out.println(result);\n    }\n}\n\n    ","url":"https://solutionschecker.com/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#solution25","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><script id="google-analytics" data-nscript="beforeInteractive">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NXVLL8B');</script><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-862498b6ec7885c3.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-47289857226115f9.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_buildManifest.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_ssgManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXVLL8B"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852"><h1>How to evaluate a math expression given in string form?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>I'm trying to write a Java routine to evaluate math expressions from <code>String</code> values like:</p>
<ol>
<li><code>"5+3"</code></li>
<li><code>"10-40"</code></li>
<li><code>"(1+10)*3"</code></li>
</ol>
<p>I want to avoid a lot of if-then-else statements.
How can I do this?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li><li class="pagination-solution-item"><span data-id="#solution21" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">21</span></li><li class="pagination-solution-item"><span data-id="#solution22" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">22</span></li><li class="pagination-solution-item"><span data-id="#solution23" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">23</span></li><li class="pagination-solution-item"><span data-id="#solution24" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">24</span></li><li class="pagination-solution-item"><span data-id="#solution25" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">25</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>With JDK1.6, you can use the built-in Javascript engine.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> javax.script.ScriptEngineManager;
<span class="hljs-keyword">import</span> javax.script.ScriptEngine;
<span class="hljs-keyword">import</span> javax.script.ScriptException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ScriptException {
    <span class="hljs-type">ScriptEngineManager</span> <span class="hljs-variable">mgr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScriptEngineManager</span>();
    <span class="hljs-type">ScriptEngine</span> <span class="hljs-variable">engine</span> <span class="hljs-operator">=</span> mgr.getEngineByName(<span class="hljs-string">"JavaScript"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">foo</span> <span class="hljs-operator">=</span> <span class="hljs-string">"40+2"</span>;
    System.out.println(engine.eval(foo));
    } 
}
</code></pre>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I've written this <code>eval</code> method for arithmetic expressions to answer this question. It does addition, subtraction, multiplication, division, exponentiation (using the <code>^</code> symbol), and a few basic functions like <code>sqrt</code>. It supports grouping using <code>(</code>...<code>)</code>, and it gets the operator <a href="https://en.wikipedia.org/wiki/Order_of_operations" rel="noreferrer">precedence</a> and <a href="https://en.wikipedia.org/wiki/Operator_associativity" rel="noreferrer">associativity</a> rules correct.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">eval</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String str)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>() {
        <span class="hljs-type">int</span> <span class="hljs-variable">pos</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>, ch;
        
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">nextChar</span><span class="hljs-params">()</span> {
            ch = (++pos &lt; str.length()) ? str.charAt(pos) : -<span class="hljs-number">1</span>;
        }
        
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">eat</span><span class="hljs-params">(<span class="hljs-type">int</span> charToEat)</span> {
            <span class="hljs-keyword">while</span> (ch == <span class="hljs-string">' '</span>) nextChar();
            <span class="hljs-keyword">if</span> (ch == charToEat) {
                nextChar();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        <span class="hljs-type">double</span> <span class="hljs-title function_">parse</span><span class="hljs-params">()</span> {
            nextChar();
            <span class="hljs-type">double</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> parseExpression();
            <span class="hljs-keyword">if</span> (pos &lt; str.length()) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Unexpected: "</span> + (<span class="hljs-type">char</span>)ch);
            <span class="hljs-keyword">return</span> x;
        }
        
        <span class="hljs-comment">// Grammar:</span>
        <span class="hljs-comment">// expression = term | expression `+` term | expression `-` term</span>
        <span class="hljs-comment">// term = factor | term `*` factor | term `/` factor</span>
        <span class="hljs-comment">// factor = `+` factor | `-` factor | `(` expression `)` | number</span>
        <span class="hljs-comment">//        | functionName `(` expression `)` | functionName factor</span>
        <span class="hljs-comment">//        | factor `^` factor</span>
        
        <span class="hljs-type">double</span> <span class="hljs-title function_">parseExpression</span><span class="hljs-params">()</span> {
            <span class="hljs-type">double</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> parseTerm();
            <span class="hljs-keyword">for</span> (;;) {
                <span class="hljs-keyword">if</span>      (eat(<span class="hljs-string">'+'</span>)) x += parseTerm(); <span class="hljs-comment">// addition</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'-'</span>)) x -= parseTerm(); <span class="hljs-comment">// subtraction</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> x;
            }
        }
        
        <span class="hljs-type">double</span> <span class="hljs-title function_">parseTerm</span><span class="hljs-params">()</span> {
            <span class="hljs-type">double</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> parseFactor();
            <span class="hljs-keyword">for</span> (;;) {
                <span class="hljs-keyword">if</span>      (eat(<span class="hljs-string">'*'</span>)) x *= parseFactor(); <span class="hljs-comment">// multiplication</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'/'</span>)) x /= parseFactor(); <span class="hljs-comment">// division</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> x;
            }
        }
        
        <span class="hljs-type">double</span> <span class="hljs-title function_">parseFactor</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'+'</span>)) <span class="hljs-keyword">return</span> +parseFactor(); <span class="hljs-comment">// unary plus</span>
            <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'-'</span>)) <span class="hljs-keyword">return</span> -parseFactor(); <span class="hljs-comment">// unary minus</span>
            
            <span class="hljs-type">double</span> x;
            <span class="hljs-type">int</span> <span class="hljs-variable">startPos</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.pos;
            <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'('</span>)) { <span class="hljs-comment">// parentheses</span>
                x = parseExpression();
                <span class="hljs-keyword">if</span> (!eat(<span class="hljs-string">')'</span>)) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Missing ')'"</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((ch &gt;= <span class="hljs-string">'0'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'9'</span>) || ch == <span class="hljs-string">'.'</span>) { <span class="hljs-comment">// numbers</span>
                <span class="hljs-keyword">while</span> ((ch &gt;= <span class="hljs-string">'0'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'9'</span>) || ch == <span class="hljs-string">'.'</span>) nextChar();
                x = Double.parseDouble(str.substring(startPos, <span class="hljs-built_in">this</span>.pos));
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch &gt;= <span class="hljs-string">'a'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'z'</span>) { <span class="hljs-comment">// functions</span>
                <span class="hljs-keyword">while</span> (ch &gt;= <span class="hljs-string">'a'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'z'</span>) nextChar();
                <span class="hljs-type">String</span> <span class="hljs-variable">func</span> <span class="hljs-operator">=</span> str.substring(startPos, <span class="hljs-built_in">this</span>.pos);
                <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'('</span>)) {
                    x = parseExpression();
                    <span class="hljs-keyword">if</span> (!eat(<span class="hljs-string">')'</span>)) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Missing ')' after argument to "</span> + func);
                } <span class="hljs-keyword">else</span> {
                    x = parseFactor();
                }
                <span class="hljs-keyword">if</span> (func.equals(<span class="hljs-string">"sqrt"</span>)) x = Math.sqrt(x);
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (func.equals(<span class="hljs-string">"sin"</span>)) x = Math.sin(Math.toRadians(x));
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (func.equals(<span class="hljs-string">"cos"</span>)) x = Math.cos(Math.toRadians(x));
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (func.equals(<span class="hljs-string">"tan"</span>)) x = Math.tan(Math.toRadians(x));
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Unknown function: "</span> + func);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Unexpected: "</span> + (<span class="hljs-type">char</span>)ch);
            }
            
            <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'^'</span>)) x = Math.pow(x, parseFactor()); <span class="hljs-comment">// exponentiation</span>
            
            <span class="hljs-keyword">return</span> x;
        }
    }.parse();
}
</code></pre>
<p>Example:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">System.out.println(eval(<span class="hljs-string">"((4 - 2^3 + 1) * -sqrt(3*3+4*4)) / 2"</span>));
</code></pre>
<p>Output: 7.5 <a href="https://www.wolframalpha.com/input/?i=%28%284%20-%202%5E3%20%2B%201%29%20*%20-sqrt%283*3%2B4*4%29%29%20%2F%202" rel="noreferrer">(which is correct)</a></p>
<hr>
<p>The parser is a <a href="https://en.wikipedia.org/wiki/Recursive_descent_parser" rel="noreferrer">recursive descent parser</a>, so internally uses separate parse methods for each level of operator precedence in its grammar. I deliberately kept it <strong>short</strong>, but here are some ideas you might want to expand it with:</p>
<ul>
<li><p><strong>Variables:</strong></p>
<p>The bit of the parser that reads the names for functions can easily be changed to handle custom variables too, by looking up names in a variable table passed to the <code>eval</code> method, such as a <code>Map&lt;String,Double&gt; variables</code>.</p>
</li>
<li><p><strong>Separate compilation and evaluation:</strong></p>
<p>What if, having added support for variables, you wanted to evaluate the same expression millions of times with changed variables, without parsing it every time? It's possible. First define an interface to use to evaluate the precompiled expression:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">  <span class="hljs-meta">@FunctionalInterface</span>
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Expression</span> {
      <span class="hljs-type">double</span> <span class="hljs-title function_">eval</span><span class="hljs-params">()</span>;
  }
</code></pre>
<p>Now to rework the original "eval" function into a "parse" function, change all the methods that return <code>double</code>s, so instead they return an instance of that interface. Java 8's lambda syntax works well for this. Example of one of the changed methods:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">  Expression <span class="hljs-title function_">parseExpression</span><span class="hljs-params">()</span> {
      <span class="hljs-type">Expression</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> parseTerm();
      <span class="hljs-keyword">for</span> (;;) {
          <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'+'</span>)) { <span class="hljs-comment">// addition</span>
              <span class="hljs-type">Expression</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> x, b = parseTerm();
              x = (() -&gt; a.eval() + b.eval());
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'-'</span>)) { <span class="hljs-comment">// subtraction</span>
              <span class="hljs-type">Expression</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> x, b = parseTerm();
              x = (() -&gt; a.eval() - b.eval());
          } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">return</span> x;
          }
      }
  }
</code></pre>
<p>That builds a recursive tree of <code>Expression</code> objects representing the compiled expression (an <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" rel="noreferrer">abstract syntax tree</a>). Then you can compile it once and evaluate it repeatedly with different values:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
      Map&lt;String,Double&gt; variables = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
      <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> parse(<span class="hljs-string">"x^2 - x + 2"</span>, variables);
      <span class="hljs-keyword">for</span> (<span class="hljs-type">double</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> -<span class="hljs-number">20</span>; x &lt;= +<span class="hljs-number">20</span>; x++) {
          variables.put(<span class="hljs-string">"x"</span>, x);
          System.out.println(x + <span class="hljs-string">" =&gt; "</span> + exp.eval());
      }
  }
</code></pre>
</li>
<li><p><strong>Different datatypes:</strong></p>
<p>Instead of <code>double</code>, you could change the evaluator to use something more powerful like <code>BigDecimal</code>, or a class that implements complex numbers, or rational numbers (fractions). You could even use <code>Object</code>, allowing some mix of datatypes in expressions, just like a real programming language. :)</p>
</li>
</ul>
<hr>
<p><sub>All code in this answer released <a href="https://creativecommons.org/publicdomain/zero/1.0/" rel="noreferrer">to the public domain</a>. Have fun!</sub></p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For my university project, I was looking for a parser / evaluator supporting both basic formulas and more complicated equations (especially iterated operators). I found very nice open source library for JAVA and .NET called mXparser. I will give a few examples to make some feeling on the syntax, for further instructions please visit project website (especially tutorial section).</p>
<p><a href="https://mathparser.org/" rel="nofollow noreferrer">https://mathparser.org/</a></p>
<p><a href="https://mathparser.org/mxparser-tutorial/" rel="nofollow noreferrer">https://mathparser.org/mxparser-tutorial/</a></p>
<p><a href="https://mathparser.org/api/" rel="nofollow noreferrer">https://mathparser.org/api/</a></p>
<p>And few examples</p>
<p>1 - Simple furmula</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Expression</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Expression</span>(<span class="hljs-string">"( 2 + 3/4 + sin(pi) )/2"</span>);
<span class="hljs-type">double</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> e.calculate()
</code></pre>
<p>2 - User defined arguments and constants</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Argument</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Argument</span>(<span class="hljs-string">"x = 10"</span>);
<span class="hljs-type">Constant</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Constant</span>(<span class="hljs-string">"a = pi^2"</span>);
<span class="hljs-type">Expression</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Expression</span>(<span class="hljs-string">"cos(a*x)"</span>, x, a);
<span class="hljs-type">double</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> e.calculate()
</code></pre>
<p>3 - User defined functions</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Function</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">"f(x, y, z) = sin(x) + cos(y*z)"</span>);
<span class="hljs-type">Expression</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Expression</span>(<span class="hljs-string">"f(3,2,5)"</span>, f);
<span class="hljs-type">double</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> e.calculate()
</code></pre>
<p>4 - Iteration</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Expression</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Expression</span>(<span class="hljs-string">"sum( i, 1, 100, sin(i) )"</span>);
<span class="hljs-type">double</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> e.calculate()
</code></pre>
<p>Found recently - in case you would like to try the syntax (and see the advanced use case) you can download the <a href="https://scalarmath.org" rel="nofollow noreferrer">Scalar</a> <a href="https://play.google.com/store/apps/details?id=org.mathparser.scalar.lite" rel="nofollow noreferrer">Calculator</a> <a href="https://play.google.com/store/apps/details?id=org.mathparser.scalar.pro" rel="nofollow noreferrer">app</a> that is powered by mXparser.</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The correct way to solve this is with a <a href="http://en.wikipedia.org/wiki/Lexical_analysis" rel="noreferrer">lexer</a> and a <a href="http://en.wikipedia.org/wiki/Parser" rel="noreferrer">parser</a>. You can write simple versions of these yourself, or those pages also have links to Java lexers and parsers.</p>

<p>Creating a recursive descent parser is a really good learning exercise.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="https://github.com/uklimaschewski/EvalEx" rel="noreferrer">HERE</a> is another open source library on GitHub named EvalEx.</p>

<p>Unlike the JavaScript engine this library is focused in evaluating mathematical expressions only. Moreover, the library is extensible and supports use of boolean operators as well as parentheses.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can evaluate expressions easily if your Java application already accesses a database, without using any other JARs.</p>

<p>Some databases require you to use a dummy table (eg, Oracle's "dual" table) and others will allow you to evaluate expressions without "selecting" from any table.</p>

<p>For example, in Sql Server or Sqlite</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">select (((<span class="hljs-number">12.10</span> +<span class="hljs-number">12.0</span>))/ <span class="hljs-number">233.0</span>) amount
</code></pre>

<p>and in Oracle</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">select (((<span class="hljs-number">12.10</span> +<span class="hljs-number">12.0</span>))/ <span class="hljs-number">233.0</span>) amount from dual;
</code></pre>

<p>The advantage of using a DB is that you can evaluate many expressions at the same time. Also most DB's will allow you to use highly complex expressions and   will also have a number of extra functions that can be called as necessary.  </p>

<p>However performance may suffer if many single expressions need to be evaluated individually, particularly when the DB is located on a network server.</p>

<p>The following addresses the performance problem to some extent, by using a Sqlite in-memory database.    </p>

<p>Here's a full working example in Java</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">Class. forName(<span class="hljs-string">"org.sqlite.JDBC"</span>);
<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(<span class="hljs-string">"jdbc:sqlite::memory:"</span>);
<span class="hljs-type">Statement</span> <span class="hljs-variable">stat</span> <span class="hljs-operator">=</span> conn.createStatement();
<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stat.executeQuery( <span class="hljs-string">"select (1+10)/20.0 amount"</span>);
rs.next();
System.out.println(rs.getBigDecimal(<span class="hljs-number">1</span>));
stat.close();
conn.close();
</code></pre>

<p>Of course you could extend the above code to handle multiple calculations at the same time.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stat.executeQuery( <span class="hljs-string">"select (1+10)/20.0 amount, (1+100)/20.0 amount2"</span>);
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can also try the <a href="http://www.beanshell.org" rel="noreferrer">BeanShell</a> interpreter:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Interpreter</span> <span class="hljs-variable">interpreter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Interpreter</span>();
interpreter.eval(<span class="hljs-string">"result = (7+21*6)/(32-27)"</span>);
System.out.println(interpreter.get(<span class="hljs-string">"result"</span>));
</code></pre>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Another way is to use the <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#expressions" rel="nofollow noreferrer">Spring Expression Language or SpEL</a> which does a whole lot more along with evaluating mathematical expressions, therefore maybe slightly overkill. You do not have to be using Spring framework to use this expression library as it is stand-alone. Copying examples from SpEL's documentation:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();
<span class="hljs-type">int</span> <span class="hljs-variable">two</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"1 + 1"</span>).getValue(Integer.class); <span class="hljs-comment">// 2 </span>
<span class="hljs-type">double</span> <span class="hljs-variable">twentyFour</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"2.0 * 3e0 * 4"</span>).getValue(Double.class); <span class="hljs-comment">//24.0</span>
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 9</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="http://www.beyondlinux.com/2011/08/07/3-method-to-evaluate-expressions/" rel="noreferrer">This article</a> discusses various approaches. Here are the 2 key approaches mentioned in the article:</p>
<h3><a href="http://commons.apache.org/proper/commons-jexl/" rel="noreferrer">JEXL from Apache</a></h3>
<p>Allows for scripts that include references to java objects.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// Create or retrieve a JexlEngine</span>
<span class="hljs-type">JexlEngine</span> <span class="hljs-variable">jexl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JexlEngine</span>();
<span class="hljs-comment">// Create an expression object</span>
<span class="hljs-type">String</span> <span class="hljs-variable">jexlExp</span> <span class="hljs-operator">=</span> <span class="hljs-string">"foo.innerFoo.bar()"</span>;
<span class="hljs-type">Expression</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> jexl.createExpression( jexlExp );
 
<span class="hljs-comment">// Create a context and add data</span>
<span class="hljs-type">JexlContext</span> <span class="hljs-variable">jctx</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MapContext</span>();
jctx.set(<span class="hljs-string">"foo"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>() );
 
<span class="hljs-comment">// Now evaluate the expression, getting the result</span>
<span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> e.evaluate(jctx);
</code></pre>
<h3>Use the javascript engine embedded in the JDK:</h3>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jsEvalWithVariable</span><span class="hljs-params">()</span>
{
    List&lt;String&gt; namesList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    namesList.add(<span class="hljs-string">"Jill"</span>);
    namesList.add(<span class="hljs-string">"Bob"</span>);
    namesList.add(<span class="hljs-string">"Laureen"</span>);
    namesList.add(<span class="hljs-string">"Ed"</span>);
 
    <span class="hljs-type">ScriptEngineManager</span> <span class="hljs-variable">mgr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScriptEngineManager</span>();
    <span class="hljs-type">ScriptEngine</span> <span class="hljs-variable">jsEngine</span> <span class="hljs-operator">=</span> mgr.getEngineByName(<span class="hljs-string">"JavaScript"</span>);
 
    jsEngine.put(<span class="hljs-string">"namesListKey"</span>, namesList);
    System.out.println(<span class="hljs-string">"Executing in script environment..."</span>);
    <span class="hljs-keyword">try</span>
    {
      jsEngine.eval(<span class="hljs-string">"var x;"</span> +
                    <span class="hljs-string">"var names = namesListKey.toArray();"</span> +
                    <span class="hljs-string">"for(x in names) {"</span> +
                    <span class="hljs-string">"  println(names[x]);"</span> +
                    <span class="hljs-string">"}"</span> +
                    <span class="hljs-string">"namesListKey.add(\"Dana\");"</span>);
    }
    <span class="hljs-keyword">catch</span> (ScriptException ex)
    {
        ex.printStackTrace();
    }
}
</code></pre>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 10</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>if we are going to implement it then we can can use the below algorithm :--</p>

<ol>
<li><p>While there are still tokens to be read in,</p>

<p>1.1 Get the next token.
1.2 If the token is:</p>

<p>1.2.1 A number: push it onto the value stack.</p>

<p>1.2.2 A variable: get its value, and push onto the value stack.</p>

<p>1.2.3 A left parenthesis: push it onto the operator stack.</p>

<p>1.2.4 A right parenthesis:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"> <span class="hljs-number">1</span> While the thing on top of the operator stack is not a 
   left parenthesis,
     <span class="hljs-number">1</span> Pop the operator from the operator stack.
     <span class="hljs-number">2</span> Pop the value stack twice, getting two operands.
     <span class="hljs-number">3</span> Apply the operator to the operands, in the correct order.
     <span class="hljs-number">4</span> Push the result onto the value stack.
 <span class="hljs-number">2</span> Pop the left parenthesis from the operator stack, and discard it.
</code></pre>

<p>1.2.5 An operator (call it thisOp):</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"> <span class="hljs-number">1</span> While the operator stack is not empty, and the top thing on the
   operator stack has the same or greater precedence as thisOp,
   <span class="hljs-number">1</span> Pop the operator from the operator stack.
   <span class="hljs-number">2</span> Pop the value stack twice, getting two operands.
   <span class="hljs-number">3</span> Apply the operator to the operands, in the correct order.
   <span class="hljs-number">4</span> Push the result onto the value stack.
 <span class="hljs-number">2</span> Push thisOp onto the operator stack.
</code></pre></li>
<li><p>While the operator stack is not empty,
1 Pop the operator from the operator stack.
2 Pop the value stack twice, getting two operands.
3 Apply the operator to the operands, in the correct order.
4 Push the result onto the value stack.</p></li>
<li><p>At this point the operator stack should be empty, and the value
stack should have only one value in it, which is the final result.</p></li>
</ol>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 11</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is another interesting alternative 
<a href="https://github.com/Shy-Ta/expression-evaluator-demo" rel="nofollow">https://github.com/Shy-Ta/expression-evaluator-demo</a></p>

<p>The usage is very simple and gets the job done, for example:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">  <span class="hljs-type">ExpressionsEvaluator</span> <span class="hljs-variable">evalExpr</span> <span class="hljs-operator">=</span> ExpressionsFactory.create(<span class="hljs-string">"2+3*4-6/2"</span>);  
  assertEquals(BigDecimal.valueOf(<span class="hljs-number">11</span>), evalExpr.eval()); 
</code></pre>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 12</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It seems like <a href="http://sourceforge.net/projects/jep/" rel="noreferrer">JEP</a> should do the job</p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 13</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It's too late to answer but I came across same situation to evaluate expression in java, it might help someone</p>

<p><code>MVEL</code> does runtime evaluation of expressions, we can write a java code in <code>String</code> to get it evaluated in this.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">    <span class="hljs-type">String</span> <span class="hljs-variable">expressionStr</span> <span class="hljs-operator">=</span> <span class="hljs-string">"x+y"</span>;
    Map&lt;String, Object&gt; vars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Object&gt;();
    vars.put(<span class="hljs-string">"x"</span>, <span class="hljs-number">10</span>);
    vars.put(<span class="hljs-string">"y"</span>, <span class="hljs-number">20</span>);
    <span class="hljs-type">ExecutableStatement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> (ExecutableStatement) MVEL.compileExpression(expressionStr);
    <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> MVEL.executeExpression(statement, vars);
</code></pre>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 14</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I think what ever way you do this it's going to involve a lot of conditional statements. But for single operations like in your examples you could limit it to 4 if statements with something like </p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">String</span> <span class="hljs-variable">math</span> <span class="hljs-operator">=</span> <span class="hljs-string">"1+4"</span>;

<span class="hljs-keyword">if</span> (math.split(<span class="hljs-string">"+"</span>).length == <span class="hljs-number">2</span>) {
    <span class="hljs-comment">//do calculation</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (math.split(<span class="hljs-string">"-"</span>).length == <span class="hljs-number">2</span>) {
    <span class="hljs-comment">//do calculation</span>
} ...
</code></pre>

<p>It gets a whole lot more complicated when you want to deal with multiple operations like "4+5*6".</p>

<p>If you are trying to build a calculator then I'd surgest passing each section of the calculation separatly (each number or operator) rather than as a single string.</p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 15</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You might have a look at the <a href="https://bitbucket.org/axelclk/symja_android_library/wiki/Home" rel="nofollow">Symja framework</a>:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">ExprEvaluator</span> <span class="hljs-variable">util</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExprEvaluator</span>(); 
<span class="hljs-type">IExpr</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> util.evaluate(<span class="hljs-string">"10-40"</span>);
System.out.println(result.toString()); <span class="hljs-comment">// -&gt; "-30" </span>
</code></pre>

<p>Take note that definitively more complex expressions can be evaluated:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// D(...) gives the derivative of the function Sin(x)*Cos(x)</span>
<span class="hljs-type">IAST</span> <span class="hljs-variable">function</span> <span class="hljs-operator">=</span> D(Times(Sin(x), Cos(x)), x);
<span class="hljs-type">IExpr</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> util.evaluate(function);
<span class="hljs-comment">// print: Cos(x)^2-Sin(x)^2</span>
</code></pre>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 16</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Try the following sample code using JDK1.6's Javascript engine with code injection handling.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> javax.script.ScriptEngine;
<span class="hljs-keyword">import</span> javax.script.ScriptEngineManager;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EvalUtil</span> {
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">ScriptEngine</span> <span class="hljs-variable">engine</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScriptEngineManager</span>().getEngineByName(<span class="hljs-string">"JavaScript"</span>);
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-keyword">try</span> {
        System.out.println((<span class="hljs-keyword">new</span> <span class="hljs-title class_">EvalUtil</span>()).eval(<span class="hljs-string">"(((5+5)/2) &gt; 5) || 5 &gt;3 "</span>));
        System.out.println((<span class="hljs-keyword">new</span> <span class="hljs-title class_">EvalUtil</span>()).eval(<span class="hljs-string">"(((5+5)/2) &gt; 5) || true"</span>));
    } <span class="hljs-keyword">catch</span> (Exception e) {
        e.printStackTrace();
    }
}
<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">eval</span><span class="hljs-params">(String input)</span> <span class="hljs-keyword">throws</span> Exception{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span>(input.matches(<span class="hljs-string">".*[a-zA-Z;~`#$_{}\\[\\]:\\\\;\"',\\.\\?]+.*"</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">"Invalid expression : "</span> + input );
        }
        <span class="hljs-keyword">return</span> engine.eval(input);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        e.printStackTrace();
        <span class="hljs-keyword">throw</span> e;
    }
 }
}
</code></pre>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 17</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is actually complementing the answer given by @Boann. It has a slight bug which causes "-2 ^ 2" to give an erroneous result of -4.0. The problem for that is the point at which the exponentiation is evaluated in his. Just move the exponentiation to the block of parseTerm(), and you'll be all fine. Have a look at the below, which is <a href="https://stackoverflow.com/a/26227947/3126973">@Boann's answer</a> slightly modified. Modification is in the comments.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">eval</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String str)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>() {
        <span class="hljs-type">int</span> <span class="hljs-variable">pos</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>, ch;

        <span class="hljs-keyword">void</span> <span class="hljs-title function_">nextChar</span><span class="hljs-params">()</span> {
            ch = (++pos &lt; str.length()) ? str.charAt(pos) : -<span class="hljs-number">1</span>;
        }

        <span class="hljs-type">boolean</span> <span class="hljs-title function_">eat</span><span class="hljs-params">(<span class="hljs-type">int</span> charToEat)</span> {
            <span class="hljs-keyword">while</span> (ch == <span class="hljs-string">' '</span>) nextChar();
            <span class="hljs-keyword">if</span> (ch == charToEat) {
                nextChar();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-type">double</span> <span class="hljs-title function_">parse</span><span class="hljs-params">()</span> {
            nextChar();
            <span class="hljs-type">double</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> parseExpression();
            <span class="hljs-keyword">if</span> (pos &lt; str.length()) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Unexpected: "</span> + (<span class="hljs-type">char</span>)ch);
            <span class="hljs-keyword">return</span> x;
        }

        <span class="hljs-comment">// Grammar:</span>
        <span class="hljs-comment">// expression = term | expression `+` term | expression `-` term</span>
        <span class="hljs-comment">// term = factor | term `*` factor | term `/` factor</span>
        <span class="hljs-comment">// factor = `+` factor | `-` factor | `(` expression `)`</span>
        <span class="hljs-comment">//        | number | functionName factor | factor `^` factor</span>

        <span class="hljs-type">double</span> <span class="hljs-title function_">parseExpression</span><span class="hljs-params">()</span> {
            <span class="hljs-type">double</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> parseTerm();
            <span class="hljs-keyword">for</span> (;;) {
                <span class="hljs-keyword">if</span>      (eat(<span class="hljs-string">'+'</span>)) x += parseTerm(); <span class="hljs-comment">// addition</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'-'</span>)) x -= parseTerm(); <span class="hljs-comment">// subtraction</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> x;
            }
        }

        <span class="hljs-type">double</span> <span class="hljs-title function_">parseTerm</span><span class="hljs-params">()</span> {
            <span class="hljs-type">double</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> parseFactor();
            <span class="hljs-keyword">for</span> (;;) {
                <span class="hljs-keyword">if</span>      (eat(<span class="hljs-string">'*'</span>)) x *= parseFactor(); <span class="hljs-comment">// multiplication</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'/'</span>)) x /= parseFactor(); <span class="hljs-comment">// division</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'^'</span>)) x = Math.pow(x, parseFactor()); <span class="hljs-comment">//exponentiation -&gt; Moved in to here. So the problem is fixed</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> x;
            }
        }

        <span class="hljs-type">double</span> <span class="hljs-title function_">parseFactor</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'+'</span>)) <span class="hljs-keyword">return</span> parseFactor(); <span class="hljs-comment">// unary plus</span>
            <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'-'</span>)) <span class="hljs-keyword">return</span> -parseFactor(); <span class="hljs-comment">// unary minus</span>

            <span class="hljs-type">double</span> x;
            <span class="hljs-type">int</span> <span class="hljs-variable">startPos</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.pos;
            <span class="hljs-keyword">if</span> (eat(<span class="hljs-string">'('</span>)) { <span class="hljs-comment">// parentheses</span>
                x = parseExpression();
                eat(<span class="hljs-string">')'</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((ch &gt;= <span class="hljs-string">'0'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'9'</span>) || ch == <span class="hljs-string">'.'</span>) { <span class="hljs-comment">// numbers</span>
                <span class="hljs-keyword">while</span> ((ch &gt;= <span class="hljs-string">'0'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'9'</span>) || ch == <span class="hljs-string">'.'</span>) nextChar();
                x = Double.parseDouble(str.substring(startPos, <span class="hljs-built_in">this</span>.pos));
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch &gt;= <span class="hljs-string">'a'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'z'</span>) { <span class="hljs-comment">// functions</span>
                <span class="hljs-keyword">while</span> (ch &gt;= <span class="hljs-string">'a'</span> &amp;&amp; ch &lt;= <span class="hljs-string">'z'</span>) nextChar();
                <span class="hljs-type">String</span> <span class="hljs-variable">func</span> <span class="hljs-operator">=</span> str.substring(startPos, <span class="hljs-built_in">this</span>.pos);
                x = parseFactor();
                <span class="hljs-keyword">if</span> (func.equals(<span class="hljs-string">"sqrt"</span>)) x = Math.sqrt(x);
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (func.equals(<span class="hljs-string">"sin"</span>)) x = Math.sin(Math.toRadians(x));
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (func.equals(<span class="hljs-string">"cos"</span>)) x = Math.cos(Math.toRadians(x));
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (func.equals(<span class="hljs-string">"tan"</span>)) x = Math.tan(Math.toRadians(x));
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Unknown function: "</span> + func);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Unexpected: "</span> + (<span class="hljs-type">char</span>)ch);
            }

            <span class="hljs-comment">//if (eat('^')) x = Math.pow(x, parseFactor()); // exponentiation -&gt; This is causing a bit of problem</span>

            <span class="hljs-keyword">return</span> x;
        }
    }.parse();
}
</code></pre>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 18</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">package</span> ExpressionCalculator.expressioncalculator;

<span class="hljs-keyword">import</span> java.text.DecimalFormat;
<span class="hljs-keyword">import</span> java.util.Scanner;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExpressionCalculator</span> {

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">addSpaces</span><span class="hljs-params">(String exp)</span>{

    <span class="hljs-comment">//Add space padding to operands.</span>
    <span class="hljs-comment">//https://regex101.com/r/sJ9gM7/73</span>
    exp = exp.replaceAll(<span class="hljs-string">"(?&lt;=[0-9()])[\\/]"</span>, <span class="hljs-string">" / "</span>);
    exp = exp.replaceAll(<span class="hljs-string">"(?&lt;=[0-9()])[\\^]"</span>, <span class="hljs-string">" ^ "</span>);
    exp = exp.replaceAll(<span class="hljs-string">"(?&lt;=[0-9()])[\\*]"</span>, <span class="hljs-string">" * "</span>);
    exp = exp.replaceAll(<span class="hljs-string">"(?&lt;=[0-9()])[+]"</span>, <span class="hljs-string">" + "</span>); 
    exp = exp.replaceAll(<span class="hljs-string">"(?&lt;=[0-9()])[-]"</span>, <span class="hljs-string">" - "</span>);

    <span class="hljs-comment">//Keep replacing double spaces with single spaces until your string is properly formatted</span>
    <span class="hljs-comment">/*while(exp.indexOf("  ") != -1){
        exp = exp.replace("  ", " ");
     }*/</span>
    exp = exp.replaceAll(<span class="hljs-string">" {2,}"</span>, <span class="hljs-string">" "</span>);

       <span class="hljs-keyword">return</span> exp;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Double <span class="hljs-title function_">evaluate</span><span class="hljs-params">(String expr)</span>{

    <span class="hljs-type">DecimalFormat</span> <span class="hljs-variable">df</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DecimalFormat</span>(<span class="hljs-string">"#.####"</span>);

    <span class="hljs-comment">//Format the expression properly before performing operations</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">expression</span> <span class="hljs-operator">=</span> addSpaces(expr);

    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">//We will evaluate using rule BDMAS, i.e. brackets, division, power, multiplication, addition and</span>
        <span class="hljs-comment">//subtraction will be processed in following order</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">indexClose</span> <span class="hljs-operator">=</span> expression.indexOf(<span class="hljs-string">")"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">indexOpen</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> (indexClose != -<span class="hljs-number">1</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">substring</span> <span class="hljs-operator">=</span> expression.substring(<span class="hljs-number">0</span>, indexClose);
            indexOpen = substring.lastIndexOf(<span class="hljs-string">"("</span>);
            substring = substring.substring(indexOpen + <span class="hljs-number">1</span>).trim();
            <span class="hljs-keyword">if</span>(indexOpen != -<span class="hljs-number">1</span> &amp;&amp; indexClose != -<span class="hljs-number">1</span>) {
                <span class="hljs-type">Double</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> evaluate(substring);
                expression = expression.substring(<span class="hljs-number">0</span>, indexOpen).trim() + <span class="hljs-string">" "</span> + result + <span class="hljs-string">" "</span> + expression.substring(indexClose + <span class="hljs-number">1</span>).trim();
                <span class="hljs-keyword">return</span> evaluate(expression.trim());
            }
        }

        <span class="hljs-type">String</span> <span class="hljs-variable">operation</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
        <span class="hljs-keyword">if</span>(expression.indexOf(<span class="hljs-string">" / "</span>) != -<span class="hljs-number">1</span>){
            operation = <span class="hljs-string">"/"</span>;
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(expression.indexOf(<span class="hljs-string">" ^ "</span>) != -<span class="hljs-number">1</span>){
            operation = <span class="hljs-string">"^"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(expression.indexOf(<span class="hljs-string">" * "</span>) != -<span class="hljs-number">1</span>){
            operation = <span class="hljs-string">"*"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(expression.indexOf(<span class="hljs-string">" + "</span>) != -<span class="hljs-number">1</span>){
            operation = <span class="hljs-string">"+"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(expression.indexOf(<span class="hljs-string">" - "</span>) != -<span class="hljs-number">1</span>){ <span class="hljs-comment">//Avoid negative numbers</span>
            operation = <span class="hljs-string">"-"</span>;
        } <span class="hljs-keyword">else</span>{
            <span class="hljs-keyword">return</span> Double.parseDouble(expression);
        }

        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> expression.indexOf(operation);
        <span class="hljs-keyword">if</span>(index != -<span class="hljs-number">1</span>){
            indexOpen = expression.lastIndexOf(<span class="hljs-string">" "</span>, index - <span class="hljs-number">2</span>);
            indexOpen = (indexOpen == -<span class="hljs-number">1</span>)?<span class="hljs-number">0</span>:indexOpen;
            indexClose = expression.indexOf(<span class="hljs-string">" "</span>, index + <span class="hljs-number">2</span>);
            indexClose = (indexClose == -<span class="hljs-number">1</span>)?expression.length():indexClose;
            <span class="hljs-keyword">if</span>(indexOpen != -<span class="hljs-number">1</span> &amp;&amp; indexClose != -<span class="hljs-number">1</span>) {
                <span class="hljs-type">Double</span> <span class="hljs-variable">lhs</span> <span class="hljs-operator">=</span> Double.parseDouble(expression.substring(indexOpen, index));
                <span class="hljs-type">Double</span> <span class="hljs-variable">rhs</span> <span class="hljs-operator">=</span> Double.parseDouble(expression.substring(index + <span class="hljs-number">2</span>, indexClose));
                <span class="hljs-type">Double</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">switch</span> (operation){
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"/"</span>:
                        <span class="hljs-comment">//Prevent divide by 0 exception.</span>
                        <span class="hljs-keyword">if</span>(rhs == <span class="hljs-number">0</span>){
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                        }
                        result = lhs / rhs;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"^"</span>:
                        result = Math.pow(lhs, rhs);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"*"</span>:
                        result = lhs * rhs;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"-"</span>:
                        result = lhs - rhs;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"+"</span>:
                        result = lhs + rhs;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">default</span>:
                        <span class="hljs-keyword">break</span>;
                }
                <span class="hljs-keyword">if</span>(indexClose == expression.length()){
                    expression = expression.substring(<span class="hljs-number">0</span>, indexOpen) + <span class="hljs-string">" "</span> + result + <span class="hljs-string">" "</span> + expression.substring(indexClose);
                }<span class="hljs-keyword">else</span>{
                    expression = expression.substring(<span class="hljs-number">0</span>, indexOpen) + <span class="hljs-string">" "</span> + result + <span class="hljs-string">" "</span> + expression.substring(indexClose + <span class="hljs-number">1</span>);
                }
                <span class="hljs-keyword">return</span> Double.valueOf(df.format(evaluate(expression.trim())));
            }
        }
    }<span class="hljs-keyword">catch</span>(Exception exp){
        exp.printStackTrace();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String args[])</span>{

    <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);
    System.out.print(<span class="hljs-string">"Enter an Mathematical Expression to Evaluate: "</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">input</span> <span class="hljs-operator">=</span> scanner.nextLine();
    System.out.println(evaluate(input));
}
</code></pre>

<p>}</p>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 19</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">check</span> { 
   <span class="hljs-type">int</span> ans;
   String str=<span class="hljs-string">"7 + 5"</span>;
   StringTokenizer st=<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringTokenizer</span>(str);

   <span class="hljs-type">int</span> v1=Integer.parseInt(st.nextToken());
   String op=st.nextToken();
   <span class="hljs-type">int</span> v2=Integer.parseInt(st.nextToken());

   <span class="hljs-keyword">if</span>(op.equals(<span class="hljs-string">"+"</span>)) { ans= v1 + v2; }
   <span class="hljs-keyword">if</span>(op.equals(<span class="hljs-string">"-"</span>)) { ans= v1 - v2; }
   <span class="hljs-comment">//.........</span>
}
</code></pre>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 20</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A Java class that can evaluate mathematical expressions:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">package</span> test;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Double <span class="hljs-title function_">calculate</span><span class="hljs-params">(String expression)</span>{
        <span class="hljs-keyword">if</span> (expression == <span class="hljs-literal">null</span> || expression.length() == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">return</span> calc(expression.replace(<span class="hljs-string">" "</span>, <span class="hljs-string">""</span>));
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Double <span class="hljs-title function_">calc</span><span class="hljs-params">(String expression)</span> {
        String[] containerArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{expression};
        <span class="hljs-type">double</span> <span class="hljs-variable">leftVal</span> <span class="hljs-operator">=</span> getNextOperand(containerArr);
        expression = containerArr[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> (expression.length() == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> leftVal;
        }
        <span class="hljs-type">char</span> <span class="hljs-variable">operator</span> <span class="hljs-operator">=</span> expression.charAt(<span class="hljs-number">0</span>);
        expression = expression.substring(<span class="hljs-number">1</span>);

        <span class="hljs-keyword">while</span> (operator == <span class="hljs-string">'*'</span> || operator == <span class="hljs-string">'/'</span>) {
            containerArr[<span class="hljs-number">0</span>] = expression;
            <span class="hljs-type">double</span> <span class="hljs-variable">rightVal</span> <span class="hljs-operator">=</span> getNextOperand(containerArr);
            expression = containerArr[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">if</span> (operator == <span class="hljs-string">'*'</span>) {
                leftVal = leftVal * rightVal;
            } <span class="hljs-keyword">else</span> {
                leftVal = leftVal / rightVal;
            }
            <span class="hljs-keyword">if</span> (expression.length() &gt; <span class="hljs-number">0</span>) {
                operator = expression.charAt(<span class="hljs-number">0</span>);
                expression = expression.substring(<span class="hljs-number">1</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> leftVal;
            }
        }
        <span class="hljs-keyword">if</span> (operator == <span class="hljs-string">'+'</span>) {
            <span class="hljs-keyword">return</span> leftVal + calc(expression);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> leftVal - calc(expression);
        }

    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getNextOperand</span><span class="hljs-params">(String[] exp)</span>{
        <span class="hljs-type">double</span> res;
        <span class="hljs-keyword">if</span> (exp[<span class="hljs-number">0</span>].startsWith(<span class="hljs-string">"("</span>)) {
            <span class="hljs-type">int</span> <span class="hljs-variable">open</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
            <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
            <span class="hljs-keyword">while</span> (open != <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">if</span> (exp[<span class="hljs-number">0</span>].charAt(i) == <span class="hljs-string">'('</span>) {
                    open++;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (exp[<span class="hljs-number">0</span>].charAt(i) == <span class="hljs-string">')'</span>) {
                    open--;
                }
                i++;
            }
            res = calc(exp[<span class="hljs-number">0</span>].substring(<span class="hljs-number">1</span>, i - <span class="hljs-number">1</span>));
            exp[<span class="hljs-number">0</span>] = exp[<span class="hljs-number">0</span>].substring(i);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
            <span class="hljs-keyword">if</span> (exp[<span class="hljs-number">0</span>].charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'-'</span>) {
                i++;
            }
            <span class="hljs-keyword">while</span> (exp[<span class="hljs-number">0</span>].length() &gt; i &amp;&amp; isNumber((<span class="hljs-type">int</span>) exp[<span class="hljs-number">0</span>].charAt(i))) {
                i++;
            }
            res = Double.parseDouble(exp[<span class="hljs-number">0</span>].substring(<span class="hljs-number">0</span>, i));
            exp[<span class="hljs-number">0</span>] = exp[<span class="hljs-number">0</span>].substring(i);
        }
        <span class="hljs-keyword">return</span> res;
    }


    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isNumber</span><span class="hljs-params">(<span class="hljs-type">int</span> c)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">zero</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) <span class="hljs-string">'0'</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">nine</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) <span class="hljs-string">'9'</span>;
        <span class="hljs-keyword">return</span> (c &gt;= zero &amp;&amp; c &lt;= nine) || c ==<span class="hljs-string">'.'</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(calculate(<span class="hljs-string">"(((( -6 )))) * 9 * -1"</span>));
        System.out.println(calc(<span class="hljs-string">"(-5.2+-5*-5*((5/4+2)))"</span>));

    }

}
</code></pre>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 21</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>How about something like this:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">String</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-string">"10+3"</span>;
<span class="hljs-type">int</span> result;
<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;st.length();i++)
{
  <span class="hljs-keyword">if</span>(st.charAt(i)==<span class="hljs-string">'+'</span>)
  {
    result=Integer.parseInt(st.substring(<span class="hljs-number">0</span>, i))+Integer.parseInt(st.substring(i+<span class="hljs-number">1</span>, st.length()));
    System.out.print(result);
  }         
}
</code></pre>

<p>and do the similar thing for every other mathematical operator accordingly .. </p>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 22</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It is possible to convert any expression string in infix notation to a postfix notation using <a href="https://en.wikipedia.org/wiki/Shunting-yard_algorithm" rel="nofollow">Djikstra's shunting-yard algorithm</a>. The result of the algorithm can then serve as input to the <a href="https://en.wikipedia.org/wiki/Reverse_Polish_notation" rel="nofollow">postfix algorithm</a> with returns the result of the expression.</p>

<p>I wrote an article about it <a href="http://emmanueljohn.me/2015/07/05/shunting-yard-algorithm/" rel="nofollow">here, with an implementation in java</a></p>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 23</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Yet another option: <a href="https://github.com/stefanhaustein/expressionparser" rel="nofollow">https://github.com/stefanhaustein/expressionparser</a></p>

<p>I have implemented this to have a simple but flexible option to permit both:</p>

<ul>
<li>Immediate processing (<a href="https://github.com/stefanhaustein/expressionparser/blob/master/src/main/java/org/kobjects/expressionparser/demo/calculator/Calculator.java" rel="nofollow">Calculator.java</a>, <a href="https://github.com/stefanhaustein/expressionparser/blob/master/src/main/java/org/kobjects/expressionparser/demo/sets/SetDemo.java" rel="nofollow">SetDemo.java</a>)</li>
<li>Building and processing a parse tree (<a href="https://github.com/stefanhaustein/expressionparser/blob/master/src/main/java/org/kobjects/expressionparser/demo/cas/TreeBuilder.java" rel="nofollow">TreeBuilder.java</a>)</li>
</ul>

<p>The TreeBuilder linked above is part of a <a href="https://github.com/stefanhaustein/expressionparser/tree/master/src/main/java/org/kobjects/expressionparser/demo/cas" rel="nofollow">CAS demo package</a> that does symbolic derivation. There is also a <a href="https://github.com/stefanhaustein/expressionparser/tree/master/src/main/java/org/kobjects/expressionparser/demo/basic" rel="nofollow">BASIC interpreter</a> example and I have started to build a <a href="https://github.com/stefanhaustein/typo" rel="nofollow">TypeScript interpreter</a> using it.</p>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 24</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>External library like RHINO or NASHORN can be used to run javascript. And javascript can evaluate simple formula without parcing the string. No performance impact as well if code is written well.
Below is an example with RHINO - </p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RhinoApp</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">simpleAdd</span> <span class="hljs-operator">=</span> <span class="hljs-string">"(12+13+2-2)*2+(12+13+2-2)*2"</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">runJavaScript</span><span class="hljs-params">()</span> {
    <span class="hljs-type">Context</span> <span class="hljs-variable">jsCx</span> <span class="hljs-operator">=</span> Context.enter();
    Context.getCurrentContext().setOptimizationLevel(-<span class="hljs-number">1</span>);
    <span class="hljs-type">ScriptableObject</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> jsCx.initStandardObjects();
    <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jsCx.evaluateString(scope, simpleAdd , <span class="hljs-string">"formula"</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">null</span>);
    Context.exit();
    System.out.println(result);
}
</code></pre>
    </div></div></div></div><div id="solution25" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 25</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> javax.script.ScriptEngine;
<span class="hljs-keyword">import</span> javax.script.ScriptEngineManager;
<span class="hljs-keyword">import</span> javax.script.ScriptException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">test2</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ScriptException {
        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">"10+2"</span>;
        <span class="hljs-type">ScriptEngineManager</span> <span class="hljs-variable">mn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScriptEngineManager</span>();
        <span class="hljs-type">ScriptEngine</span> <span class="hljs-variable">en</span> <span class="hljs-operator">=</span> mn.getEngineByName(<span class="hljs-string">"js"</span>);
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> en.eval(s);
        System.out.println(result);
    }
}
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-to-evaluate-a-math-expression-given-in-string-form-1657387797852">How to evaluate a math expression given in string form?</a><a href="/questions/using-auto-layout-in-uitableview-for-dynamic-cell-layouts-and-variable-row-heights-1657387722263">Using Auto Layout in UITableView for dynamic cell layouts &amp; variable row heights</a><a href="/questions/css-selector-for-first-element-with-class-1657388028765">CSS selector for first element with class</a><a href="/questions/what-are-good-ways-to-prevent-sql-injection-duplicate-1657388431570">What are good ways to prevent SQL injection? [duplicate]</a><a href="/questions/why-aren&#x27;t-variable-length-arrays-part-of-the-c++-standard-1657384712975">Why aren&#x27;t variable-length arrays part of the C++ standard?</a><a href="/questions/gui-not-working-after-rewriting-to-mvc-1657388388035">GUI not working after rewriting to MVC</a><a href="/questions/how-do-i-make-a-redirect-in-php-1657387381903">How do I make a redirect in PHP?</a><a href="/questions/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457">How do I compose a rotation matrix with human readable angles from scratch?</a><a href="/questions/what-are-metaclasses-in-python-1657387811608">What are metaclasses in Python?</a><a href="/questions/can-i-mix-mysql-apis-in-php-1657384597444">Can I mix MySQL APIs in PHP?</a><a href="/questions/of-the-many-findelement(s)by-functions-in-selenium-when-would-you-use-one-over-the-other-1657388412658">Of the many findElement(s)/By functions in Selenium, when would you use one over the other?</a><a href="/questions/what-and-where-are-the-stack-and-heap-1657387415361">What and where are the stack and heap?</a><a href="/questions/how-to-return-datasnapshot-value-as-a-result-of-a-method-1657387538165">How to return DataSnapshot value as a result of a method?</a><a href="/questions/web-scraping-javascript-page-with-python-1657388240875">Web-scraping JavaScript page with Python</a><a href="/questions/which-equals-operator-(-vs-)-should-be-used-in-javascript-comparisons-1657384663105">Which equals operator (== vs ===) should be used in JavaScript comparisons?</a><a href="/questions/how-do-i-access-previous-promise-results-in-a-.then()-chain-1657387705386">How do I access previous promise results in a .then() chain?</a><a href="/questions/why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877">Why do I need to override the equals and hashCode methods in Java?</a><a href="/questions/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element-1657384326458">Why does jQuery or a DOM method such as getElementById not find the element?</a><a href="/questions/how-can-i-return-pivot-table-output-in-mysql-1657384715043">How can I return pivot table output in MySQL?</a><a href="/questions/are-dictionaries-ordered-in-python-3.6+-1657387834234">Are dictionaries ordered in Python 3.6+?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;With JDK1.6, you can use the built-in Javascript engine.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.script.ScriptEngineManager;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.script.ScriptEngine;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.script.ScriptException;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Test\u0026lt;/span\u0026gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String[] args)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ScriptException {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ScriptEngineManager\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mgr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ScriptEngineManager\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ScriptEngine\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;engine\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; mgr.getEngineByName(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;JavaScript\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;40+2\u0026quot;\u0026lt;/span\u0026gt;;\n    System.out.println(engine.eval(foo));\n    } \n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;ve written this \u0026lt;code\u0026gt;eval\u0026lt;/code\u0026gt; method for arithmetic expressions to answer this question. It does addition, subtraction, multiplication, division, exponentiation (using the \u0026lt;code\u0026gt;^\u0026lt;/code\u0026gt; symbol), and a few basic functions like \u0026lt;code\u0026gt;sqrt\u0026lt;/code\u0026gt;. It supports grouping using \u0026lt;code\u0026gt;(\u0026lt;/code\u0026gt;...\u0026lt;code\u0026gt;)\u0026lt;/code\u0026gt;, and it gets the operator \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Order_of_operations\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;precedence\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Operator_associativity\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;associativity\u0026lt;/a\u0026gt; rules correct.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String str)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;pos\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, ch;\n        \n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;nextChar\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            ch = (++pos \u0026amp;lt; str.length()) ? str.charAt(pos) : -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n        }\n        \n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;eat\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; charToEat)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (ch == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt;) nextChar();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ch == charToEat) {\n                nextChar();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n        }\n        \n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            nextChar();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parseExpression();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (pos \u0026amp;lt; str.length()) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unexpected: \u0026quot;\u0026lt;/span\u0026gt; + (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;)ch);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x;\n        }\n        \n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Grammar:\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// expression = term | expression `+` term | expression `-` term\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// term = factor | term `*` factor | term `/` factor\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// factor = `+` factor | `-` factor | `(` expression `)` | number\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//        | functionName `(` expression `)` | functionName factor\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//        | factor `^` factor\u0026lt;/span\u0026gt;\n        \n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseExpression\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parseTerm();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (;;) {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;      (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;+\u0026apos;\u0026lt;/span\u0026gt;)) x += parseTerm(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// addition\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-\u0026apos;\u0026lt;/span\u0026gt;)) x -= parseTerm(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// subtraction\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x;\n            }\n        }\n        \n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseTerm\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parseFactor();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (;;) {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;      (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;*\u0026apos;\u0026lt;/span\u0026gt;)) x *= parseFactor(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// multiplication\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/\u0026apos;\u0026lt;/span\u0026gt;)) x /= parseFactor(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// division\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x;\n            }\n        }\n        \n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseFactor\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;+\u0026apos;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; +parseFactor(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// unary plus\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-\u0026apos;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; -parseFactor(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// unary minus\u0026lt;/span\u0026gt;\n            \n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;startPos\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.pos;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;(\u0026apos;\u0026lt;/span\u0026gt;)) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// parentheses\u0026lt;/span\u0026gt;\n                x = parseExpression();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Missing \u0026apos;)\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; ((ch \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;0\u0026apos;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; ch \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;9\u0026apos;\u0026lt;/span\u0026gt;) || ch == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// numbers\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; ((ch \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;0\u0026apos;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; ch \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;9\u0026apos;\u0026lt;/span\u0026gt;) || ch == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;) nextChar();\n                x = Double.parseDouble(str.substring(startPos, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.pos));\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ch \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; ch \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;z\u0026apos;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// functions\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (ch \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; ch \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;z\u0026apos;\u0026lt;/span\u0026gt;) nextChar();\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; str.substring(startPos, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.pos);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;(\u0026apos;\u0026lt;/span\u0026gt;)) {\n                    x = parseExpression();\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Missing \u0026apos;)\u0026apos; after argument to \u0026quot;\u0026lt;/span\u0026gt; + func);\n                } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                    x = parseFactor();\n                }\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (func.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sqrt\u0026quot;\u0026lt;/span\u0026gt;)) x = Math.sqrt(x);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (func.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sin\u0026quot;\u0026lt;/span\u0026gt;)) x = Math.sin(Math.toRadians(x));\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (func.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;cos\u0026quot;\u0026lt;/span\u0026gt;)) x = Math.cos(Math.toRadians(x));\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (func.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;tan\u0026quot;\u0026lt;/span\u0026gt;)) x = Math.tan(Math.toRadians(x));\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unknown function: \u0026quot;\u0026lt;/span\u0026gt; + func);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unexpected: \u0026quot;\u0026lt;/span\u0026gt; + (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;)ch);\n            }\n            \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;^\u0026apos;\u0026lt;/span\u0026gt;)) x = Math.pow(x, parseFactor()); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// exponentiation\u0026lt;/span\u0026gt;\n            \n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x;\n        }\n    }.parse();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;System.out.println(eval(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;((4 - 2^3 + 1) * -sqrt(3*3+4*4)) / 2\u0026quot;\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Output: 7.5 \u0026lt;a href=\u0026quot;https://www.wolframalpha.com/input/?i=%28%284%20-%202%5E3%20%2B%201%29%20*%20-sqrt%283*3%2B4*4%29%29%20%2F%202\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;(which is correct)\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;The parser is a \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Recursive_descent_parser\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;recursive descent parser\u0026lt;/a\u0026gt;, so internally uses separate parse methods for each level of operator precedence in its grammar. I deliberately kept it \u0026lt;strong\u0026gt;short\u0026lt;/strong\u0026gt;, but here are some ideas you might want to expand it with:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Variables:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The bit of the parser that reads the names for functions can easily be changed to handle custom variables too, by looking up names in a variable table passed to the \u0026lt;code\u0026gt;eval\u0026lt;/code\u0026gt; method, such as a \u0026lt;code\u0026gt;Map\u0026amp;lt;String,Double\u0026amp;gt; variables\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Separate compilation and evaluation:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;What if, having added support for variables, you wanted to evaluate the same expression millions of times with changed variables, without parsing it every time? It\u0026apos;s possible. First define an interface to use to evaluate the precompiled expression:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@FunctionalInterface\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;interface\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt; {\n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;;\n  }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Now to rework the original \u0026quot;eval\u0026quot; function into a \u0026quot;parse\u0026quot; function, change all the methods that return \u0026lt;code\u0026gt;double\u0026lt;/code\u0026gt;s, so instead they return an instance of that interface. Java 8\u0026apos;s lambda syntax works well for this. Example of one of the changed methods:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;  Expression \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseExpression\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parseTerm();\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (;;) {\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;+\u0026apos;\u0026lt;/span\u0026gt;)) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// addition\u0026lt;/span\u0026gt;\n              \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; x, b = parseTerm();\n              x = (() -\u0026amp;gt; a.eval() + b.eval());\n          } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-\u0026apos;\u0026lt;/span\u0026gt;)) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// subtraction\u0026lt;/span\u0026gt;\n              \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; x, b = parseTerm();\n              x = (() -\u0026amp;gt; a.eval() - b.eval());\n          } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n              \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x;\n          }\n      }\n  }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;That builds a recursive tree of \u0026lt;code\u0026gt;Expression\u0026lt;/code\u0026gt; objects representing the compiled expression (an \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Abstract_syntax_tree\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;abstract syntax tree\u0026lt;/a\u0026gt;). Then you can compile it once and evaluate it repeatedly with different values:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String[] args)\u0026lt;/span\u0026gt; {\n      Map\u0026amp;lt;String,Double\u0026amp;gt; variables = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HashMap\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026amp;gt;();\n      \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;exp\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parse(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x^2 - x + 2\u0026quot;\u0026lt;/span\u0026gt;, variables);\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;; x \u0026amp;lt;= +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;; x++) {\n          variables.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x\u0026quot;\u0026lt;/span\u0026gt;, x);\n          System.out.println(x + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; =\u0026amp;gt; \u0026quot;\u0026lt;/span\u0026gt; + exp.eval());\n      }\n  }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Different datatypes:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Instead of \u0026lt;code\u0026gt;double\u0026lt;/code\u0026gt;, you could change the evaluator to use something more powerful like \u0026lt;code\u0026gt;BigDecimal\u0026lt;/code\u0026gt;, or a class that implements complex numbers, or rational numbers (fractions). You could even use \u0026lt;code\u0026gt;Object\u0026lt;/code\u0026gt;, allowing some mix of datatypes in expressions, just like a real programming language. :)\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;sub\u0026gt;All code in this answer released \u0026lt;a href=\u0026quot;https://creativecommons.org/publicdomain/zero/1.0/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;to the public domain\u0026lt;/a\u0026gt;. Have fun!\u0026lt;/sub\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For my university project, I was looking for a parser / evaluator supporting both basic formulas and more complicated equations (especially iterated operators). I found very nice open source library for JAVA and .NET called mXparser. I will give a few examples to make some feeling on the syntax, for further instructions please visit project website (especially tutorial section).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://mathparser.org/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://mathparser.org/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://mathparser.org/mxparser-tutorial/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://mathparser.org/mxparser-tutorial/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://mathparser.org/api/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://mathparser.org/api/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;And few examples\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;1 - Simple furmula\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;e\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;( 2 + 3/4 + sin(pi) )/2\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; e.calculate()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;2 - User defined arguments and constants\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Argument\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Argument\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x = 10\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Constant\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Constant\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a = pi^2\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;e\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;cos(a*x)\u0026quot;\u0026lt;/span\u0026gt;, x, a);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; e.calculate()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;3 - User defined functions\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;f(x, y, z) = sin(x) + cos(y*z)\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;e\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;f(3,2,5)\u0026quot;\u0026lt;/span\u0026gt;, f);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; e.calculate()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;4 - Iteration\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;e\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sum( i, 1, 100, sin(i) )\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; e.calculate()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Found recently - in case you would like to try the syntax (and see the advanced use case) you can download the \u0026lt;a href=\u0026quot;https://scalarmath.org\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Scalar\u0026lt;/a\u0026gt; \u0026lt;a href=\u0026quot;https://play.google.com/store/apps/details?id=org.mathparser.scalar.lite\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Calculator\u0026lt;/a\u0026gt; \u0026lt;a href=\u0026quot;https://play.google.com/store/apps/details?id=org.mathparser.scalar.pro\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;app\u0026lt;/a\u0026gt; that is powered by mXparser.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The correct way to solve this is with a \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Lexical_analysis\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;lexer\u0026lt;/a\u0026gt; and a \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Parser\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;parser\u0026lt;/a\u0026gt;. You can write simple versions of these yourself, or those pages also have links to Java lexers and parsers.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Creating a recursive descent parser is a really good learning exercise.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/uklimaschewski/EvalEx\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HERE\u0026lt;/a\u0026gt; is another open source library on GitHub named EvalEx.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Unlike the JavaScript engine this library is focused in evaluating mathematical expressions only. Moreover, the library is extensible and supports use of boolean operators as well as parentheses.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can evaluate expressions easily if your Java application already accesses a database, without using any other JARs.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Some databases require you to use a dummy table (eg, Oracle\u0026apos;s \u0026quot;dual\u0026quot; table) and others will allow you to evaluate expressions without \u0026quot;selecting\u0026quot; from any table.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example, in Sql Server or Sqlite\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;select (((\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12.10\u0026lt;/span\u0026gt; +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12.0\u0026lt;/span\u0026gt;))/ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;233.0\u0026lt;/span\u0026gt;) amount\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and in Oracle\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;select (((\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12.10\u0026lt;/span\u0026gt; +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12.0\u0026lt;/span\u0026gt;))/ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;233.0\u0026lt;/span\u0026gt;) amount from dual;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The advantage of using a DB is that you can evaluate many expressions at the same time. Also most DB\u0026apos;s will allow you to use highly complex expressions and   will also have a number of extra functions that can be called as necessary.  \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;However performance may suffer if many single expressions need to be evaluated individually, particularly when the DB is located on a network server.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The following addresses the performance problem to some extent, by using a Sqlite in-memory database.    \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here\u0026apos;s a full working example in Java\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;Class. forName(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;org.sqlite.JDBC\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;conn\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; DriverManager.getConnection(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;jdbc:sqlite::memory:\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Statement\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;stat\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; conn.createStatement();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ResultSet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;rs\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; stat.executeQuery( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;select (1+10)/20.0 amount\u0026quot;\u0026lt;/span\u0026gt;);\nrs.next();\nSystem.out.println(rs.getBigDecimal(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;));\nstat.close();\nconn.close();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Of course you could extend the above code to handle multiple calculations at the same time.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ResultSet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;rs\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; stat.executeQuery( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;select (1+10)/20.0 amount, (1+100)/20.0 amount2\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can also try the \u0026lt;a href=\u0026quot;http://www.beanshell.org\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;BeanShell\u0026lt;/a\u0026gt; interpreter:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Interpreter\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;interpreter\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Interpreter\u0026lt;/span\u0026gt;();\ninterpreter.eval(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;result = (7+21*6)/(32-27)\u0026quot;\u0026lt;/span\u0026gt;);\nSystem.out.println(interpreter.get(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;result\u0026quot;\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Another way is to use the \u0026lt;a href=\u0026quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#expressions\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Spring Expression Language or SpEL\u0026lt;/a\u0026gt; which does a whole lot more along with evaluating mathematical expressions, therefore maybe slightly overkill. You do not have to be using Spring framework to use this expression library as it is stand-alone. Copying examples from SpEL\u0026apos;s documentation:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ExpressionParser\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;parser\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SpelExpressionParser\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;two\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parser.parseExpression(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;1 + 1\u0026quot;\u0026lt;/span\u0026gt;).getValue(Integer.class); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 2 \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;twentyFour\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parser.parseExpression(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;2.0 * 3e0 * 4\u0026quot;\u0026lt;/span\u0026gt;).getValue(Double.class); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//24.0\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://www.beyondlinux.com/2011/08/07/3-method-to-evaluate-expressions/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;This article\u0026lt;/a\u0026gt; discusses various approaches. Here are the 2 key approaches mentioned in the article:\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;\u0026lt;a href=\u0026quot;http://commons.apache.org/proper/commons-jexl/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;JEXL from Apache\u0026lt;/a\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Allows for scripts that include references to java objects.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Create or retrieve a JexlEngine\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;JexlEngine\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;jexl\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JexlEngine\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Create an expression object\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;jexlExp\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo.innerFoo.bar()\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Expression\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;e\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; jexl.createExpression( jexlExp );\n \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Create a context and add data\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;JexlContext\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;jctx\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MapContext\u0026lt;/span\u0026gt;();\njctx.set(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Foo\u0026lt;/span\u0026gt;() );\n \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Now evaluate the expression, getting the result\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; e.evaluate(jctx);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Use the javascript engine embedded in the JDK:\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;jsEvalWithVariable\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;\n{\n    List\u0026amp;lt;String\u0026amp;gt; namesList = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ArrayList\u0026lt;/span\u0026gt;\u0026amp;lt;String\u0026amp;gt;();\n    namesList.add(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Jill\u0026quot;\u0026lt;/span\u0026gt;);\n    namesList.add(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Bob\u0026quot;\u0026lt;/span\u0026gt;);\n    namesList.add(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Laureen\u0026quot;\u0026lt;/span\u0026gt;);\n    namesList.add(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Ed\u0026quot;\u0026lt;/span\u0026gt;);\n \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ScriptEngineManager\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mgr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ScriptEngineManager\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ScriptEngine\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;jsEngine\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; mgr.getEngineByName(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;JavaScript\u0026quot;\u0026lt;/span\u0026gt;);\n \n    jsEngine.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;namesListKey\u0026quot;\u0026lt;/span\u0026gt;, namesList);\n    System.out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Executing in script environment...\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;\n    {\n      jsEngine.eval(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;var x;\u0026quot;\u0026lt;/span\u0026gt; +\n                    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;var names = namesListKey.toArray();\u0026quot;\u0026lt;/span\u0026gt; +\n                    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;for(x in names) {\u0026quot;\u0026lt;/span\u0026gt; +\n                    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;  println(names[x]);\u0026quot;\u0026lt;/span\u0026gt; +\n                    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;}\u0026quot;\u0026lt;/span\u0026gt; +\n                    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;namesListKey.add(\\\u0026quot;Dana\\\u0026quot;);\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (ScriptException ex)\n    {\n        ex.printStackTrace();\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;if we are going to implement it then we can can use the below algorithm :--\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;While there are still tokens to be read in,\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;1.1 Get the next token.\n1.2 If the token is:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;1.2.1 A number: push it onto the value stack.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;1.2.2 A variable: get its value, and push onto the value stack.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;1.2.3 A left parenthesis: push it onto the operator stack.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;1.2.4 A right parenthesis:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; While the thing on top of the operator stack is not a \n   left parenthesis,\n     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; Pop the operator from the operator stack.\n     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; Pop the value stack twice, getting two operands.\n     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; Apply the operator to the operands, in the correct order.\n     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; Push the result onto the value stack.\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; Pop the left parenthesis from the operator stack, and discard it.\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;1.2.5 An operator (call it thisOp):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; While the operator stack is not empty, and the top thing on the\n   operator stack has the same or greater precedence as thisOp,\n   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; Pop the operator from the operator stack.\n   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; Pop the value stack twice, getting two operands.\n   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; Apply the operator to the operands, in the correct order.\n   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; Push the result onto the value stack.\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; Push thisOp onto the operator stack.\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;While the operator stack is not empty,\n1 Pop the operator from the operator stack.\n2 Pop the value stack twice, getting two operands.\n3 Apply the operator to the operands, in the correct order.\n4 Push the result onto the value stack.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;At this point the operator stack should be empty, and the value\nstack should have only one value in it, which is the final result.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is another interesting alternative \n\u0026lt;a href=\u0026quot;https://github.com/Shy-Ta/expression-evaluator-demo\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;https://github.com/Shy-Ta/expression-evaluator-demo\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The usage is very simple and gets the job done, for example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ExpressionsEvaluator\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;evalExpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; ExpressionsFactory.create(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;2+3*4-6/2\u0026quot;\u0026lt;/span\u0026gt;);  \n  assertEquals(BigDecimal.valueOf(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;), evalExpr.eval()); \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It seems like \u0026lt;a href=\u0026quot;http://sourceforge.net/projects/jep/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;JEP\u0026lt;/a\u0026gt; should do the job\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It\u0026apos;s too late to answer but I came across same situation to evaluate expression in java, it might help someone\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;MVEL\u0026lt;/code\u0026gt; does runtime evaluation of expressions, we can write a java code in \u0026lt;code\u0026gt;String\u0026lt;/code\u0026gt; to get it evaluated in this.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;expressionStr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x+y\u0026quot;\u0026lt;/span\u0026gt;;\n    Map\u0026amp;lt;String, Object\u0026amp;gt; vars = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HashMap\u0026lt;/span\u0026gt;\u0026amp;lt;String, Object\u0026amp;gt;();\n    vars.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;x\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n    vars.put(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;y\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ExecutableStatement\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;statement\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (ExecutableStatement) MVEL.compileExpression(expressionStr);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; MVEL.executeExpression(statement, vars);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I think what ever way you do this it\u0026apos;s going to involve a lot of conditional statements. But for single operations like in your examples you could limit it to 4 if statements with something like \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;math\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;1+4\u0026quot;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (math.split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;+\u0026quot;\u0026lt;/span\u0026gt;).length == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//do calculation\u0026lt;/span\u0026gt;\n} \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (math.split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-\u0026quot;\u0026lt;/span\u0026gt;).length == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//do calculation\u0026lt;/span\u0026gt;\n} ...\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It gets a whole lot more complicated when you want to deal with multiple operations like \u0026quot;4+5*6\u0026quot;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you are trying to build a calculator then I\u0026apos;d surgest passing each section of the calculation separatly (each number or operator) rather than as a single string.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You might have a look at the \u0026lt;a href=\u0026quot;https://bitbucket.org/axelclk/symja_android_library/wiki/Home\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;Symja framework\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ExprEvaluator\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;util\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ExprEvaluator\u0026lt;/span\u0026gt;(); \n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;IExpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; util.evaluate(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10-40\u0026quot;\u0026lt;/span\u0026gt;);\nSystem.out.println(result.toString()); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// -\u0026amp;gt; \u0026quot;-30\u0026quot; \u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Take note that definitively more complex expressions can be evaluated:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// D(...) gives the derivative of the function Sin(x)*Cos(x)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;IAST\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; D(Times(Sin(x), Cos(x)), x);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;IExpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; util.evaluate(function);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// print: Cos(x)^2-Sin(x)^2\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Try the following sample code using JDK1.6\u0026apos;s Javascript engine with code injection handling.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.script.ScriptEngine;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.script.ScriptEngineManager;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;EvalUtil\u0026lt;/span\u0026gt; {\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ScriptEngine\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;engine\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ScriptEngineManager\u0026lt;/span\u0026gt;().getEngineByName(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;JavaScript\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String[] args)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        System.out.println((\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;EvalUtil\u0026lt;/span\u0026gt;()).eval(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(((5+5)/2) \u0026amp;gt; 5) || 5 \u0026amp;gt;3 \u0026quot;\u0026lt;/span\u0026gt;));\n        System.out.println((\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;EvalUtil\u0026lt;/span\u0026gt;()).eval(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(((5+5)/2) \u0026amp;gt; 5) || true\u0026quot;\u0026lt;/span\u0026gt;));\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n        e.printStackTrace();\n    }\n}\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; Object \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String input)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(input.matches(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.*[a-zA-Z;~`#$_{}\\\\[\\\\]:\\\\\\\\;\\\u0026quot;\u0026apos;,\\\\.\\\\?]+.*\u0026quot;\u0026lt;/span\u0026gt;)) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Exception\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Invalid expression : \u0026quot;\u0026lt;/span\u0026gt; + input );\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; engine.eval(input);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception e) {\n        e.printStackTrace();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; e;\n    }\n }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is actually complementing the answer given by @Boann. It has a slight bug which causes \u0026quot;-2 ^ 2\u0026quot; to give an erroneous result of -4.0. The problem for that is the point at which the exponentiation is evaluated in his. Just move the exponentiation to the block of parseTerm(), and you\u0026apos;ll be all fine. Have a look at the below, which is \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/26227947/3126973\u0026quot;\u0026gt;@Boann\u0026apos;s answer\u0026lt;/a\u0026gt; slightly modified. Modification is in the comments.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String str)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;pos\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, ch;\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;nextChar\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            ch = (++pos \u0026amp;lt; str.length()) ? str.charAt(pos) : -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;eat\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; charToEat)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (ch == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt;) nextChar();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ch == charToEat) {\n                nextChar();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            nextChar();\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parseExpression();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (pos \u0026amp;lt; str.length()) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unexpected: \u0026quot;\u0026lt;/span\u0026gt; + (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;)ch);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Grammar:\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// expression = term | expression `+` term | expression `-` term\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// term = factor | term `*` factor | term `/` factor\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// factor = `+` factor | `-` factor | `(` expression `)`\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//        | number | functionName factor | factor `^` factor\u0026lt;/span\u0026gt;\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseExpression\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parseTerm();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (;;) {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;      (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;+\u0026apos;\u0026lt;/span\u0026gt;)) x += parseTerm(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// addition\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-\u0026apos;\u0026lt;/span\u0026gt;)) x -= parseTerm(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// subtraction\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x;\n            }\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseTerm\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parseFactor();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (;;) {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;      (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;*\u0026apos;\u0026lt;/span\u0026gt;)) x *= parseFactor(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// multiplication\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/\u0026apos;\u0026lt;/span\u0026gt;)) x /= parseFactor(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// division\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;^\u0026apos;\u0026lt;/span\u0026gt;)) x = Math.pow(x, parseFactor()); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//exponentiation -\u0026amp;gt; Moved in to here. So the problem is fixed\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x;\n            }\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseFactor\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;+\u0026apos;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; parseFactor(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// unary plus\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-\u0026apos;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; -parseFactor(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// unary minus\u0026lt;/span\u0026gt;\n\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;startPos\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.pos;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;(\u0026apos;\u0026lt;/span\u0026gt;)) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// parentheses\u0026lt;/span\u0026gt;\n                x = parseExpression();\n                eat(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; ((ch \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;0\u0026apos;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; ch \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;9\u0026apos;\u0026lt;/span\u0026gt;) || ch == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// numbers\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; ((ch \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;0\u0026apos;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; ch \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;9\u0026apos;\u0026lt;/span\u0026gt;) || ch == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;) nextChar();\n                x = Double.parseDouble(str.substring(startPos, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.pos));\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ch \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; ch \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;z\u0026apos;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// functions\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (ch \u0026amp;gt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; ch \u0026amp;lt;= \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;z\u0026apos;\u0026lt;/span\u0026gt;) nextChar();\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; str.substring(startPos, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.pos);\n                x = parseFactor();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (func.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sqrt\u0026quot;\u0026lt;/span\u0026gt;)) x = Math.sqrt(x);\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (func.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sin\u0026quot;\u0026lt;/span\u0026gt;)) x = Math.sin(Math.toRadians(x));\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (func.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;cos\u0026quot;\u0026lt;/span\u0026gt;)) x = Math.cos(Math.toRadians(x));\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (func.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;tan\u0026quot;\u0026lt;/span\u0026gt;)) x = Math.tan(Math.toRadians(x));\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unknown function: \u0026quot;\u0026lt;/span\u0026gt; + func);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unexpected: \u0026quot;\u0026lt;/span\u0026gt; + (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;)ch);\n            }\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//if (eat(\u0026apos;^\u0026apos;)) x = Math.pow(x, parseFactor()); // exponentiation -\u0026amp;gt; This is causing a bit of problem\u0026lt;/span\u0026gt;\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x;\n        }\n    }.parse();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; ExpressionCalculator.expressioncalculator;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.text.DecimalFormat;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Scanner;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ExpressionCalculator\u0026lt;/span\u0026gt; {\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addSpaces\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String exp)\u0026lt;/span\u0026gt;{\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Add space padding to operands.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//https://regex101.com/r/sJ9gM7/73\u0026lt;/span\u0026gt;\n    exp = exp.replaceAll(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(?\u0026amp;lt;=[0-9()])[\\\\/]\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; / \u0026quot;\u0026lt;/span\u0026gt;);\n    exp = exp.replaceAll(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(?\u0026amp;lt;=[0-9()])[\\\\^]\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; ^ \u0026quot;\u0026lt;/span\u0026gt;);\n    exp = exp.replaceAll(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(?\u0026amp;lt;=[0-9()])[\\\\*]\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; * \u0026quot;\u0026lt;/span\u0026gt;);\n    exp = exp.replaceAll(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(?\u0026amp;lt;=[0-9()])[+]\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; + \u0026quot;\u0026lt;/span\u0026gt;); \n    exp = exp.replaceAll(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(?\u0026amp;lt;=[0-9()])[-]\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; - \u0026quot;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Keep replacing double spaces with single spaces until your string is properly formatted\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*while(exp.indexOf(\u0026quot;  \u0026quot;) != -1){\n        exp = exp.replace(\u0026quot;  \u0026quot;, \u0026quot; \u0026quot;);\n     }*/\u0026lt;/span\u0026gt;\n    exp = exp.replaceAll(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; {2,}\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt;);\n\n       \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; exp;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; Double \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;evaluate\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String expr)\u0026lt;/span\u0026gt;{\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DecimalFormat\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;df\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;DecimalFormat\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#.####\u0026quot;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Format the expression properly before performing operations\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;expression\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; addSpaces(expr);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//We will evaluate using rule BDMAS, i.e. brackets, division, power, multiplication, addition and\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//subtraction will be processed in following order\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;indexClose\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; expression.indexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;)\u0026quot;\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;indexOpen\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (indexClose != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;substring\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; expression.substring(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, indexClose);\n            indexOpen = substring.lastIndexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(\u0026quot;\u0026lt;/span\u0026gt;);\n            substring = substring.substring(indexOpen + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;).trim();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(indexOpen != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; indexClose != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) {\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; evaluate(substring);\n                expression = expression.substring(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, indexOpen).trim() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt; + result + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt; + expression.substring(indexClose + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;).trim();\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; evaluate(expression.trim());\n            }\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;operation\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(expression.indexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; / \u0026quot;\u0026lt;/span\u0026gt;) != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;){\n            operation = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/\u0026quot;\u0026lt;/span\u0026gt;;\n        }\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(expression.indexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; ^ \u0026quot;\u0026lt;/span\u0026gt;) != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;){\n            operation = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;^\u0026quot;\u0026lt;/span\u0026gt;;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(expression.indexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; * \u0026quot;\u0026lt;/span\u0026gt;) != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;){\n            operation = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*\u0026quot;\u0026lt;/span\u0026gt;;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(expression.indexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; + \u0026quot;\u0026lt;/span\u0026gt;) != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;){\n            operation = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;+\u0026quot;\u0026lt;/span\u0026gt;;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(expression.indexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; - \u0026quot;\u0026lt;/span\u0026gt;) != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;){ \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Avoid negative numbers\u0026lt;/span\u0026gt;\n            operation = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-\u0026quot;\u0026lt;/span\u0026gt;;\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;{\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; Double.parseDouble(expression);\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;index\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; expression.indexOf(operation);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(index != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;){\n            indexOpen = expression.lastIndexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt;, index - \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;);\n            indexOpen = (indexOpen == -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)?\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;:indexOpen;\n            indexClose = expression.indexOf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt;, index + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;);\n            indexClose = (indexClose == -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)?expression.length():indexClose;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(indexOpen != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; indexClose != -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) {\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;lhs\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Double.parseDouble(expression.substring(indexOpen, index));\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;rhs\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Double.parseDouble(expression.substring(index + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, indexClose));\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;switch\u0026lt;/span\u0026gt; (operation){\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/\u0026quot;\u0026lt;/span\u0026gt;:\n                        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Prevent divide by 0 exception.\u0026lt;/span\u0026gt;\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(rhs == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;){\n                            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n                        }\n                        result = lhs / rhs;\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;^\u0026quot;\u0026lt;/span\u0026gt;:\n                        result = Math.pow(lhs, rhs);\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*\u0026quot;\u0026lt;/span\u0026gt;:\n                        result = lhs * rhs;\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-\u0026quot;\u0026lt;/span\u0026gt;:\n                        result = lhs - rhs;\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;case\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;+\u0026quot;\u0026lt;/span\u0026gt;:\n                        result = lhs + rhs;\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;default\u0026lt;/span\u0026gt;:\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n                }\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(indexClose == expression.length()){\n                    expression = expression.substring(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, indexOpen) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt; + result + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt; + expression.substring(indexClose);\n                }\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;{\n                    expression = expression.substring(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, indexOpen) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt; + result + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt; + expression.substring(indexClose + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n                }\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; Double.valueOf(df.format(evaluate(expression.trim())));\n            }\n        }\n    }\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(Exception exp){\n        exp.printStackTrace();\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String args[])\u0026lt;/span\u0026gt;{\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Scanner\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;scanner\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Scanner\u0026lt;/span\u0026gt;(System.in);\n    System.out.print(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Enter an Mathematical Expression to Evaluate: \u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;input\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; scanner.nextLine();\n    System.out.println(evaluate(input));\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;}\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.*;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;check\u0026lt;/span\u0026gt; { \n   \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; ans;\n   String str=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;7 + 5\u0026quot;\u0026lt;/span\u0026gt;;\n   StringTokenizer st=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StringTokenizer\u0026lt;/span\u0026gt;(str);\n\n   \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; v1=Integer.parseInt(st.nextToken());\n   String op=st.nextToken();\n   \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; v2=Integer.parseInt(st.nextToken());\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(op.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;+\u0026quot;\u0026lt;/span\u0026gt;)) { ans= v1 + v2; }\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(op.equals(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;-\u0026quot;\u0026lt;/span\u0026gt;)) { ans= v1 - v2; }\n   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//.........\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A Java class that can evaluate mathematical expressions:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; test;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Calculator\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; Double \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;calculate\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String expression)\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (expression == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; || expression.length() == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; calc(expression.replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;));\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; Double \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;calc\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String expression)\u0026lt;/span\u0026gt; {\n        String[] containerArr = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;[]{expression};\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;leftVal\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getNextOperand(containerArr);\n        expression = containerArr[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (expression.length() == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; leftVal;\n        }\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;operator\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; expression.charAt(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n        expression = expression.substring(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (operator == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;*\u0026apos;\u0026lt;/span\u0026gt; || operator == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;/\u0026apos;\u0026lt;/span\u0026gt;) {\n            containerArr[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] = expression;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;rightVal\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getNextOperand(containerArr);\n            expression = containerArr[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (operator == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;*\u0026apos;\u0026lt;/span\u0026gt;) {\n                leftVal = leftVal * rightVal;\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                leftVal = leftVal / rightVal;\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (expression.length() \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n                operator = expression.charAt(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n                expression = expression.substring(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; leftVal;\n            }\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (operator == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;+\u0026apos;\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; leftVal + calc(expression);\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; leftVal - calc(expression);\n        }\n\n    }\n    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getNextOperand\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String[] exp)\u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; res;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].startsWith(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(\u0026quot;\u0026lt;/span\u0026gt;)) {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;open\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (open != \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].charAt(i) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;(\u0026apos;\u0026lt;/span\u0026gt;) {\n                    open++;\n                } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].charAt(i) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;) {\n                    open--;\n                }\n                i++;\n            }\n            res = calc(exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].substring(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, i - \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;));\n            exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] = exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].substring(i);\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;i\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].charAt(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;-\u0026apos;\u0026lt;/span\u0026gt;) {\n                i++;\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].length() \u0026amp;gt; i \u0026amp;amp;\u0026amp;amp; isNumber((\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;) exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].charAt(i))) {\n                i++;\n            }\n            res = Double.parseDouble(exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].substring(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, i));\n            exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] = exp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;].substring(i);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; res;\n    }\n\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isNumber\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; c)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;zero\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;0\u0026apos;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;nine\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;9\u0026apos;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (c \u0026amp;gt;= zero \u0026amp;amp;\u0026amp;amp; c \u0026amp;lt;= nine) || c ==\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt;;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String[] args)\u0026lt;/span\u0026gt; {\n        System.out.println(calculate(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(((( -6 )))) * 9 * -1\u0026quot;\u0026lt;/span\u0026gt;));\n        System.out.println(calc(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(-5.2+-5*-5*((5/4+2)))\u0026quot;\u0026lt;/span\u0026gt;));\n\n    }\n\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;How about something like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;st\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10+3\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; result;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;st.length();i++)\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(st.charAt(i)==\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;+\u0026apos;\u0026lt;/span\u0026gt;)\n  {\n    result=Integer.parseInt(st.substring(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, i))+Integer.parseInt(st.substring(i+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, st.length()));\n    System.out.print(result);\n  }         \n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and do the similar thing for every other mathematical operator accordingly .. \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It is possible to convert any expression string in infix notation to a postfix notation using \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Shunting-yard_algorithm\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;Djikstra\u0026apos;s shunting-yard algorithm\u0026lt;/a\u0026gt;. The result of the algorithm can then serve as input to the \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Reverse_Polish_notation\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;postfix algorithm\u0026lt;/a\u0026gt; with returns the result of the expression.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I wrote an article about it \u0026lt;a href=\u0026quot;http://emmanueljohn.me/2015/07/05/shunting-yard-algorithm/\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;here, with an implementation in java\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Yet another option: \u0026lt;a href=\u0026quot;https://github.com/stefanhaustein/expressionparser\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;https://github.com/stefanhaustein/expressionparser\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I have implemented this to have a simple but flexible option to permit both:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Immediate processing (\u0026lt;a href=\u0026quot;https://github.com/stefanhaustein/expressionparser/blob/master/src/main/java/org/kobjects/expressionparser/demo/calculator/Calculator.java\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;Calculator.java\u0026lt;/a\u0026gt;, \u0026lt;a href=\u0026quot;https://github.com/stefanhaustein/expressionparser/blob/master/src/main/java/org/kobjects/expressionparser/demo/sets/SetDemo.java\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;SetDemo.java\u0026lt;/a\u0026gt;)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Building and processing a parse tree (\u0026lt;a href=\u0026quot;https://github.com/stefanhaustein/expressionparser/blob/master/src/main/java/org/kobjects/expressionparser/demo/cas/TreeBuilder.java\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;TreeBuilder.java\u0026lt;/a\u0026gt;)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;The TreeBuilder linked above is part of a \u0026lt;a href=\u0026quot;https://github.com/stefanhaustein/expressionparser/tree/master/src/main/java/org/kobjects/expressionparser/demo/cas\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;CAS demo package\u0026lt;/a\u0026gt; that does symbolic derivation. There is also a \u0026lt;a href=\u0026quot;https://github.com/stefanhaustein/expressionparser/tree/master/src/main/java/org/kobjects/expressionparser/demo/basic\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;BASIC interpreter\u0026lt;/a\u0026gt; example and I have started to build a \u0026lt;a href=\u0026quot;https://github.com/stefanhaustein/typo\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;TypeScript interpreter\u0026lt;/a\u0026gt; using it.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;External library like RHINO or NASHORN can be used to run javascript. And javascript can evaluate simple formula without parcing the string. No performance impact as well if code is written well.\nBelow is an example with RHINO - \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RhinoApp\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;simpleAdd\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(12+13+2-2)*2+(12+13+2-2)*2\u0026quot;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;runJavaScript\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Context\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;jsCx\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Context.enter();\n    Context.getCurrentContext().setOptimizationLevel(-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ScriptableObject\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;scope\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; jsCx.initStandardObjects();\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; jsCx.evaluateString(scope, simpleAdd , \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;formula\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n    Context.exit();\n    System.out.println(result);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.script.ScriptEngine;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.script.ScriptEngineManager;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; javax.script.ScriptException;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;test2\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String[] args)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; ScriptException {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;s\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10+2\u0026quot;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ScriptEngineManager\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;mn\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ScriptEngineManager\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ScriptEngine\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;en\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; mn.getEngineByName(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;js\u0026quot;\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; en.eval(s);\n        System.out.println(result);\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":377,"title":"How to evaluate a math expression given in string form?","content":"\n                \n\u0026lt;p\u0026gt;I\u0026apos;m trying to write a Java routine to evaluate math expressions from \u0026lt;code\u0026gt;String\u0026lt;/code\u0026gt; values like:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;\u0026quot;5+3\u0026quot;\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;\u0026quot;10-40\u0026quot;\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;\u0026quot;(1+10)*3\u0026quot;\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;I want to avoid a lot of if-then-else statements.\nHow can I do this?\u0026lt;/p\u0026gt;\n    ","slug":"how-to-evaluate-a-math-expression-given-in-string-form-1657387797852","postType":"QUESTION","createdAt":"2022-07-09T17:29:57.000Z","updatedAt":"2022-07-09T17:29:57.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"How to evaluate a math expression given in string form?","slug":"how-to-evaluate-a-math-expression-given-in-string-form-1657387797852"},{"title":"Using Auto Layout in UITableView for dynamic cell layouts \u0026 variable row heights","slug":"using-auto-layout-in-uitableview-for-dynamic-cell-layouts-and-variable-row-heights-1657387722263"},{"title":"CSS selector for first element with class","slug":"css-selector-for-first-element-with-class-1657388028765"},{"title":"What are good ways to prevent SQL injection? [duplicate]","slug":"what-are-good-ways-to-prevent-sql-injection-duplicate-1657388431570"},{"title":"Why aren't variable-length arrays part of the C++ standard?","slug":"why-aren't-variable-length-arrays-part-of-the-c++-standard-1657384712975"},{"title":"GUI not working after rewriting to MVC","slug":"gui-not-working-after-rewriting-to-mvc-1657388388035"},{"title":"How do I make a redirect in PHP?","slug":"how-do-i-make-a-redirect-in-php-1657387381903"},{"title":"How do I compose a rotation matrix with human readable angles from scratch?","slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457"},{"title":"What are metaclasses in Python?","slug":"what-are-metaclasses-in-python-1657387811608"},{"title":"Can I mix MySQL APIs in PHP?","slug":"can-i-mix-mysql-apis-in-php-1657384597444"},{"title":"Of the many findElement(s)/By functions in Selenium, when would you use one over the other?","slug":"of-the-many-findelement(s)by-functions-in-selenium-when-would-you-use-one-over-the-other-1657388412658"},{"title":"What and where are the stack and heap?","slug":"what-and-where-are-the-stack-and-heap-1657387415361"},{"title":"How to return DataSnapshot value as a result of a method?","slug":"how-to-return-datasnapshot-value-as-a-result-of-a-method-1657387538165"},{"title":"Web-scraping JavaScript page with Python","slug":"web-scraping-javascript-page-with-python-1657388240875"},{"title":"Which equals operator (== vs ===) should be used in JavaScript comparisons?","slug":"which-equals-operator-(-vs-)-should-be-used-in-javascript-comparisons-1657384663105"},{"title":"How do I access previous promise results in a .then() chain?","slug":"how-do-i-access-previous-promise-results-in-a-.then()-chain-1657387705386"},{"title":"Why do I need to override the equals and hashCode methods in Java?","slug":"why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877"},{"title":"Why does jQuery or a DOM method such as getElementById not find the element?","slug":"why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element-1657384326458"},{"title":"How can I return pivot table output in MySQL?","slug":"how-can-i-return-pivot-table-output-in-mysql-1657384715043"},{"title":"Are dictionaries ordered in Python 3.6+?","slug":"are-dictionaries-ordered-in-python-3.6+-1657387834234"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-to-evaluate-a-math-expression-given-in-string-form-1657387797852"},"buildId":"xZs8haGjOP63QuDE0kxeX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>