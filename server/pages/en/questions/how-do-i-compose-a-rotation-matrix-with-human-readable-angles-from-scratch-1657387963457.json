{"pageProps":{"data":{"answer":["\n&lt;p&gt;So the question really is &lt;strong&gt;Understanding 4x4 homogenous transform matrices&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;well without the math behind the only thing that left is geometric representation/meaning which is far better for human abstraction/understanding.&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;So what the 4x4 matrix is?&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;It is representation of some Cartesian coordinate system and it is composed of:&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;3&lt;/code&gt; basis vectors (one for each axis) red,green,blue&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;So if the red,green,blue vectors are perpendicular to each other then the coordinate system is &lt;strong&gt;orthogonal&lt;/strong&gt;. If they are also unit vectors then it is &lt;strong&gt;orthonormal&lt;/strong&gt; (like for example unit matrix).&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;origin point gray&lt;/strong&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;projection and homogenous side (unmarked bottom rest of the matrix)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;This part is there only for enabling rotation and translation at once, therefore point used must be homogenous that means in form &lt;code&gt;(x,y,z,w=1)&lt;/code&gt; for points and &lt;code&gt;(x,y,z,w=0)&lt;/code&gt; for direction vectors. If it was just &lt;code&gt;(x,y,z)&lt;/code&gt; then the matrix would be &lt;code&gt;3x3&lt;/code&gt; and that is not enough for translation. I will not use any projections they are uneasy to explain geometrically.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;This layout is from &lt;strong&gt;OpenGL notation&lt;/strong&gt; there are also transposed representation out there (vectors are rows not columns)&lt;/p&gt;\n&lt;p&gt;now how to transform any point to/from this coordinate system:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;g=M*l;\nl=Inverse(M)*g;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;where:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;M&lt;/code&gt; is transform matrix&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;l&lt;/code&gt; is &lt;code&gt;M&lt;/code&gt; local coordinate system point (LCS)&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;g&lt;/code&gt; is global coordinate system point (GCS)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;for the transposed version (&lt;strong&gt;DirectX&lt;/strong&gt;) it is:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;l=M*g;\ng=Inverse(M)*l;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;That is because &lt;strong&gt;transposed orthogonal rotation matrix is also inverse of itself&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;for more info see &lt;a href=&quot;https://stackoverflow.com/a/25216549/2521214&quot;&gt;transform matrix anatomy&lt;/a&gt; and &lt;a href=&quot;https://stackoverflow.com/a/21100338/2521214&quot;&gt;3D graphic pipeline&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/rayCb.png&quot; alt=&quot;OpenGL transform matrix&quot;&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;how to visualize it&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Yes you can draw the matrix numbers but they do not make sense at first look especially if the numbers are changing so draw the axises vectors as on image above. Where each axis is a line from &lt;code&gt;origin&lt;/code&gt; to &lt;code&gt;origin + line_size*axis_vector&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;how to construct it&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Just compute axis vectors and origin and put them inside matrix. To ensure orthogonality exploit &lt;strong&gt;cross product&lt;/strong&gt; (but be careful with order of multiplicants to use the right direction) Here &lt;a href=&quot;https://stackoverflow.com/a/41813188/2521214&quot;&gt;example of getting 3 basis vectors from direction&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;effects&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;rotation is done by rotating the axises so you can compute each axis by parametric circle equation ...&lt;/li&gt;\n&lt;li&gt;scaling is done by multiplying axises by scale factor&lt;/li&gt;\n&lt;li&gt;skewing is just using non perpendicular axises&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;rotation&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;For most cases the incremental rotation is used. There are two types&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;local rotation&lt;/strong&gt; &lt;code&gt;M&apos;=M*rotation_matrix&lt;/code&gt; it rotates around local coordinate axises like you will control plane or car or player ... Most engines/games do not use these and fake it with &lt;strong&gt;euler angles&lt;/strong&gt; instead which is a cheap solution (have many quirks and problems) because most people who using OpenGL do not even know this is possible and rather stack list of &lt;code&gt;glRotate/glTranslate&lt;/code&gt; calls...&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;global rotation&lt;/strong&gt; &lt;code&gt;M&apos;=Inverse(Inverse(M)*rotation_matrix)&lt;/code&gt; it rotates around global coordinate system axises.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;where &lt;code&gt;rotation_matrix&lt;/code&gt; is any standard rotation transform matrix.&lt;/p&gt;\n&lt;p&gt;If you have different matrix layout (transposed) then the rotations local and global are computed the other way around ...&lt;/p&gt;\n&lt;p&gt;You can also compute your &lt;code&gt;rotation_matrix&lt;/code&gt; from &lt;code&gt;3&lt;/code&gt; angles like:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;rotation_matrix=rotation_around_x(ax)*rotation_around_y(ay)*rotation_around_z(az);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;see &lt;a href=&quot;http://en.wikipedia.org/wiki/Rotation_matrix&quot; rel=&quot;noreferrer&quot;&gt;Wiki rotation matrices&lt;/a&gt; the 3D &lt;code&gt;Rx,Ry,Rz&lt;/code&gt; from &lt;code&gt;Basic rotations&lt;/code&gt; are what you need. As you can see they are just unit circle parametric equation really. The order of multiplication change how the angles converge to target position. This is called &lt;strong&gt;Euler angles&lt;/strong&gt; and I do not use it (I integrate step changes instead which has no restrictions if done properly not to mention it is simpler).&lt;/p&gt;\n&lt;p&gt;Anyway if you need you can convert transform matrix into euler angles relatively easily see:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/56950130/2521214&quot;&gt;Is there a way to calculate 3D rotation on X and Y axis from a 4x4 matrix&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;glRotate&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;If you want &lt;code&gt;glRotate&lt;/code&gt; which is rotation around arbitrary axis not by 3 angles then &lt;a href=&quot;https://stackoverflow.com/a/64389606/2521214&quot;&gt;There is workaround&lt;/a&gt;:&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;create transform matrix &lt;code&gt;N&lt;/code&gt; for that axis&lt;/li&gt;\n&lt;li&gt;then transform your matrix &lt;code&gt;M&lt;/code&gt; to it&lt;/li&gt;\n&lt;li&gt;rotate &lt;code&gt;N&lt;/code&gt; by angle&lt;/li&gt;\n&lt;li&gt;then transform &lt;code&gt;M&lt;/code&gt; back from &lt;code&gt;N&lt;/code&gt; to global coordinates&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Or you can use &lt;a href=&quot;https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula&quot; rel=&quot;noreferrer&quot;&gt;Rodrigues_rotation_formula&lt;/a&gt; instead&lt;/p&gt;\n&lt;p&gt;To transform Matrix to/from Matrix in this case just transform axises as points and leave the origin as is but the origin of &lt;code&gt;N&lt;/code&gt; &lt;strong&gt;must be (0,0,0)!!!&lt;/strong&gt; or the vectors transformed must have &lt;code&gt;w=0&lt;/code&gt; instead.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;strong&gt;usage&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Transformations are cumulative that means:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;p&apos;=M1*M2*M3*M4*p;&lt;/code&gt; is the same as &lt;code&gt;M=M1*M2*M3*M4; p&apos;=M*p&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;So if you have many points to transform then you precompute all transformations to single matrix and use just it. Do not need to multiply points by all subsequent matrices. OK now the concept:&lt;/p&gt;\n&lt;p&gt;you should have &lt;code&gt;3&lt;/code&gt; coordinate systems:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;camera &lt;code&gt;C&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;world (usually unit matrix)&lt;/li&gt;\n&lt;li&gt;object &lt;code&gt;O&lt;/code&gt; (each object have its own matrix)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;so if you have cube with &lt;code&gt;8&lt;/code&gt; vertexes &lt;code&gt;p0,...,p7&lt;/code&gt; then you have to perform transformation on each point from object local coordinates to camera local coordinates. Some gfx api do some of it so you apply only what you have to so you really need:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;p(i)&apos;=inverse(C)*unit*M*p(i);&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;the transforms are cumulative and unit matrix does not change anything so:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;Q=inverse(C)*M; p(i)&apos;=Q*p(i);&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;so before drawing compute &lt;code&gt;Q&lt;/code&gt; for drawed object then take each point &lt;code&gt;p(i)&lt;/code&gt; of the object and compute the transformed &lt;code&gt;p(i)&apos;&lt;/code&gt; and draw/use the transformed one ... The &lt;code&gt;p(i)&apos;&lt;/code&gt; is in local camera coordinate system (x,y of the screen) but there is no perspective there so before drawing you can also add any of the projection matrices and divide by &lt;code&gt;z&lt;/code&gt; cordinate at the end ... The projection is also cumulative so it can be also inside &lt;code&gt;Q&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;strong&gt;[edit1] C++ example&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//$$---- Form CPP ----&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// apart from math.h include you can ignore this machine generated VCL related code&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;vcl.h&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;pragma&lt;/span&gt; hdrstop&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;win_main.h&quot;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;math.h&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;pragma&lt;/span&gt; package(smart_init)&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;pragma&lt;/span&gt; resource &lt;span class=&quot;hljs-string&quot;&gt;&quot;*.dfm&quot;&lt;/span&gt;&lt;/span&gt;\nTMain *Main; &lt;span class=&quot;hljs-comment&quot;&gt;// pointer to main window ...&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Here is the important stuff some math first&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; deg=M_PI/&lt;span class=&quot;hljs-number&quot;&gt;180.0&lt;/span&gt;;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;divide&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; x,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; y)&lt;/span&gt;&lt;/span&gt;;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;matrix_mul&lt;/span&gt;       &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// c[16] = a[16] * b[16]&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;matrix_mul_vector&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// c[ 4] = a[16] * b[ 4]&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;matrix_subdet&lt;/span&gt;    &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt;&lt;/span&gt;;           &lt;span class=&quot;hljs-comment&quot;&gt;// c[16] = all subdets of a[16]&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;matrix_subdet&lt;/span&gt;   &lt;span class=&quot;hljs-params&quot;&gt;(          &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; r,&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; s)&lt;/span&gt;&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot;&gt;//      = subdet(r,s) of a[16]&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;matrix_det&lt;/span&gt;      &lt;span class=&quot;hljs-params&quot;&gt;(          &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt;&lt;/span&gt;;           &lt;span class=&quot;hljs-comment&quot;&gt;//       = det of a[16]&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;matrix_det&lt;/span&gt;      &lt;span class=&quot;hljs-params&quot;&gt;(          &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;//       = det of a[16] and subdets b[16]&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;matrix_inv&lt;/span&gt;       &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt;&lt;/span&gt;;           &lt;span class=&quot;hljs-comment&quot;&gt;// c[16] = a[16] ^ -1&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;divide&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; x,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; y)&lt;/span&gt;\n        &lt;/span&gt;{\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!y) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; x/y;\n        }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;matrix_mul&lt;/span&gt;       &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt;\n        &lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; q[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;];\n        q[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]);\n        q[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]);\n        q[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;]);\n        q[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;]);\n        q[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]);\n        q[ &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]);\n        q[ &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;]);\n        q[ &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;]);\n        q[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]);\n        q[ &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]);\n        q[&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;]);\n        q[&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;]);\n        q[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]=(a[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]);\n        q[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]=(a[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]);\n        q[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;]=(a[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;]);\n        q[&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;]=(a[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;]);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;;i++) c[i]=q[i];\n        }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;matrix_mul_vector&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt;\n        &lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; q[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;];\n        q[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]);\n        q[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;]);\n        q[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]=(a[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[ &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;]);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;i++) c[i]=q[i];\n        }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;matrix_subdet&lt;/span&gt;    &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt;\n        &lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt;   q[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;];\n        &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;     i,j;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;i++)\n         &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (j=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;j&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;j++)\n          q[j+(i&amp;lt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;)]=&lt;span class=&quot;hljs-built_in&quot;&gt;matrix_subdet&lt;/span&gt;(a,i,j);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;;i++) c[i]=q[i];\n        }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;matrix_subdet&lt;/span&gt;    &lt;span class=&quot;hljs-params&quot;&gt;(         &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; r,&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; s)&lt;/span&gt;\n        &lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt;   c,q[&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;];\n        &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;     i,j,k;\n        k=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;                            &lt;span class=&quot;hljs-comment&quot;&gt;// q = sub matrix&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (j=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;j&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;j++)\n         &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (j!=s)\n          &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;i++)\n           &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (i!=r)\n                {\n                q[k]=a[i+(j&amp;lt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;)];\n                k++;\n                }\n        c=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n        c+=q[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;];\n        c+=q[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;];\n        c+=q[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;];\n        c-=q[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;];\n        c-=q[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;];\n        c-=q[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]*q[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;((r+s)&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;)) c=-c;       &lt;span class=&quot;hljs-comment&quot;&gt;// add signum&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; c;\n        }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;matrix_det&lt;/span&gt;       &lt;span class=&quot;hljs-params&quot;&gt;(         &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt;\n        &lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; c=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n        c+=a[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*&lt;span class=&quot;hljs-built_in&quot;&gt;matrix_subdet&lt;/span&gt;(a,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n        c+=a[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]*&lt;span class=&quot;hljs-built_in&quot;&gt;matrix_subdet&lt;/span&gt;(a,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n        c+=a[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;]*&lt;span class=&quot;hljs-built_in&quot;&gt;matrix_subdet&lt;/span&gt;(a,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n        c+=a[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]*&lt;span class=&quot;hljs-built_in&quot;&gt;matrix_subdet&lt;/span&gt;(a,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; c;\n        }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;matrix_det&lt;/span&gt;       &lt;span class=&quot;hljs-params&quot;&gt;(         &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt;\n        &lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; c=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n        c+=a[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n        c+=a[ &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;];\n        c+=a[ &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;];\n        c+=a[&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;]*b[ &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; c;\n        }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;matrix_inv&lt;/span&gt;       &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt;\n        &lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt;   d[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;],D;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;matrix_subdet&lt;/span&gt;(d,a);\n        D=&lt;span class=&quot;hljs-built_in&quot;&gt;matrix_det&lt;/span&gt;(a,d);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (D) D=&lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;/D;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;;i++) c[i]=d[i]*D;\n        }\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// now the object representation&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; pnts=&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;\n&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; pnt[pnts*&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]=     &lt;span class=&quot;hljs-comment&quot;&gt;// Vertexes for 100x100x100 cube centered at (0,0,0)&lt;/span&gt;\n    {\n    &lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,+&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,\n    +&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,+&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,\n    +&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,+&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,+&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,+&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,\n    +&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,+&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,+&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,\n    +&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;-100.0&lt;/span&gt;,+&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,\n    };\n&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; facs=&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;;\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; fac[facs*&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]=        &lt;span class=&quot;hljs-comment&quot;&gt;// faces (index of point used) no winding rule&lt;/span&gt;\n    {\n    &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,\n    };\n&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; rep[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;]=        &lt;span class=&quot;hljs-comment&quot;&gt;// 4x4 transform matrix of object (unit from start) at (0,0,+100)&lt;/span&gt;\n    {\n    &lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,  &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,  &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;100.0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;,\n    };\n&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; eye[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;]=        &lt;span class=&quot;hljs-comment&quot;&gt;// 4x4 transform matrix of camera at (0,0,-150)&lt;/span&gt;\n    {\n    &lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,   &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,   &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;-150.0&lt;/span&gt;,\n    &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;,\n    };\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// this is how to draw it&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *pnt,&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; pnts,&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; *fac,&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; facs,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *rep,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *ieye)&lt;/span&gt;\n    &lt;/span&gt;{\n    &lt;span class=&quot;hljs-comment&quot;&gt;// variables for drawing&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i;\n    &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; p0[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;],p1[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;],p2[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;],p3[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;],m[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;],d;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// gfx api variables (change to your stuff) Main is the main form of this application&lt;/span&gt;\n    TCanvas *scr=Main-&amp;gt;bmp-&amp;gt;Canvas;\n    &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; xs2=Main-&amp;gt;ClientWidth/&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,ys2=Main-&amp;gt;ClientHeight/&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;;\n    &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; v=xs2*&lt;span class=&quot;hljs-built_in&quot;&gt;tan&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;30.0&lt;/span&gt;*deg); &lt;span class=&quot;hljs-comment&quot;&gt;// 60 degree viewing angle perspective projection&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-built_in&quot;&gt;matrix_mul&lt;/span&gt;(m,ieye,rep);             &lt;span class=&quot;hljs-comment&quot;&gt;// cumulate all needed transforms&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;facs*&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;)                 &lt;span class=&quot;hljs-comment&quot;&gt;// go through all faces&lt;/span&gt;\n        {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// convert all points of face&lt;/span&gt;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;matrix_mul_vector&lt;/span&gt;(p0,m,&amp;amp;pnt[fac[i]*&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]); i++;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;matrix_mul_vector&lt;/span&gt;(p1,m,&amp;amp;pnt[fac[i]*&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]); i++;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;matrix_mul_vector&lt;/span&gt;(p2,m,&amp;amp;pnt[fac[i]*&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]); i++;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;matrix_mul_vector&lt;/span&gt;(p3,m,&amp;amp;pnt[fac[i]*&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]); i++;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// here goes perspective divide by z coordinate if needed&lt;/span&gt;\n        d=&lt;span class=&quot;hljs-built_in&quot;&gt;divide&lt;/span&gt;(v,p0[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]); p0[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*=d; p0[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*=d;\n        d=&lt;span class=&quot;hljs-built_in&quot;&gt;divide&lt;/span&gt;(v,p1[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]); p1[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*=d; p1[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*=d;\n        d=&lt;span class=&quot;hljs-built_in&quot;&gt;divide&lt;/span&gt;(v,p2[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]); p2[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*=d; p2[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*=d;\n        d=&lt;span class=&quot;hljs-built_in&quot;&gt;divide&lt;/span&gt;(v,p3[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]); p3[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*=d; p3[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*=d;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// here is viewport transform (just translate (0,0) to middle of screen in this case&lt;/span&gt;\n        p0[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]+=xs2; p0[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]+=ys2;\n        p1[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]+=xs2; p1[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]+=ys2;\n        p2[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]+=xs2; p2[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]+=ys2;\n        p3[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]+=xs2; p3[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]+=ys2;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// draw quad&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// I use VCL GDI TCanvas you use what you have ...&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// and wireframe only to keep this simple (no Z buffer,winding culling,...)&lt;/span&gt;\n        scr-&amp;gt;Pen-&amp;gt;Color=clAqua;     &lt;span class=&quot;hljs-comment&quot;&gt;// perimeter wireframe&lt;/span&gt;\n        scr-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;MoveTo&lt;/span&gt;(p0[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;],p0[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);\n        scr-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;LineTo&lt;/span&gt;(p1[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;],p1[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);\n        scr-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;LineTo&lt;/span&gt;(p2[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;],p2[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);\n        scr-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;LineTo&lt;/span&gt;(p3[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;],p3[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);\n        scr-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;LineTo&lt;/span&gt;(p0[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;],p0[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);\n&lt;span class=&quot;hljs-comment&quot;&gt;//      scr-&amp;gt;Pen-&amp;gt;Color=clBlue;     // face cross to visualy check if I correctly generate the fac[]&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//      scr-&amp;gt;MoveTo(p0[0],p0[1]);&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//      scr-&amp;gt;LineTo(p2[0],p2[1]);&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//      scr-&amp;gt;MoveTo(p1[0],p1[1]);&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//      scr-&amp;gt;LineTo(p3[0],p3[1]);&lt;/span&gt;\n        }\n    }\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;TMain::draw&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n    &lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!_redraw) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n    bmp-&amp;gt;Canvas-&amp;gt;Brush-&amp;gt;Color=clBlack;\n    bmp-&amp;gt;Canvas-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;FillRect&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;TRect&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,xs,ys));\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// compute inverse of camera need to compute just once for all objects&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; ieye[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;];\n    &lt;span class=&quot;hljs-built_in&quot;&gt;matrix_inv&lt;/span&gt;(ieye,eye);\n    &lt;span class=&quot;hljs-comment&quot;&gt;// draw all objects&lt;/span&gt;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;obj&lt;/span&gt;(pnt,pnts,fac,facs,rep,ieye);\n\n    Main-&amp;gt;Canvas-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;Draw&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,bmp);\n    _redraw=&lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n    }\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;__fastcall &lt;span class=&quot;hljs-title&quot;&gt;TMain::TMain&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(TComponent* Owner)&lt;/span&gt; : TForm(Owner)\n    {&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// window constructor you can ignore this ... (just create a backbuffer bitmap here)&lt;/span&gt;\n    bmp=&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Graphics::TBitmap;\n    bmp-&amp;gt;HandleType=bmDIB;\n    bmp-&amp;gt;PixelFormat=pf32bit;\n    pyx=&lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt;;\n    }\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; __fastcall &lt;span class=&quot;hljs-title&quot;&gt;TMain::FormDestroy&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(TObject *Sender)&lt;/span&gt;\n    &lt;/span&gt;{\n    &lt;span class=&quot;hljs-comment&quot;&gt;// window destructor release memory ... also ignoe this&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (pyx) &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; pyx;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; bmp;\n    }\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; __fastcall &lt;span class=&quot;hljs-title&quot;&gt;TMain::FormResize&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(TObject *Sender)&lt;/span&gt;\n    &lt;/span&gt;{\n    &lt;span class=&quot;hljs-comment&quot;&gt;// on resize event ... just resize/redraw backbuffer also can ignore this&lt;/span&gt;\n    xs=ClientWidth;  xs2=xs&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    ys=ClientHeight; ys2=ys&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    bmp-&amp;gt;Width=xs;\n    bmp-&amp;gt;Height=ys;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (pyx) &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; pyx;\n    pyx=&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;*[ys];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; y=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;y&amp;lt;ys;y++) pyx[y]=(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt;*) bmp-&amp;gt;ScanLine[y];\n    _redraw=&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n    }\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; __fastcall &lt;span class=&quot;hljs-title&quot;&gt;TMain::FormPaint&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(TObject *Sender)&lt;/span&gt;\n    &lt;/span&gt;{\n    &lt;span class=&quot;hljs-comment&quot;&gt;// repaint event can ignore&lt;/span&gt;\n    _redraw=&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n    }\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; __fastcall &lt;span class=&quot;hljs-title&quot;&gt;TMain::tim_redrawTimer&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(TObject *Sender)&lt;/span&gt;\n    &lt;/span&gt;{\n    &lt;span class=&quot;hljs-comment&quot;&gt;// timer event to animate the cube ...&lt;/span&gt;\n    _redraw=&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// rotate the object to see it in motion&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; ang,c,s;\n\n    ang=&lt;span class=&quot;hljs-number&quot;&gt;5.0&lt;/span&gt;*deg; c=&lt;span class=&quot;hljs-built_in&quot;&gt;cos&lt;/span&gt;(ang); s=&lt;span class=&quot;hljs-built_in&quot;&gt;sin&lt;/span&gt;(ang);    &lt;span class=&quot;hljs-comment&quot;&gt;// rotate baround z by 5 degrees per timer step&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; rz[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;]= { c, s, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n                    -s, c, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n                     &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n                     &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; };\n\n    ang=&lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;*deg; c=&lt;span class=&quot;hljs-built_in&quot;&gt;cos&lt;/span&gt;(ang); s=&lt;span class=&quot;hljs-built_in&quot;&gt;sin&lt;/span&gt;(ang);    &lt;span class=&quot;hljs-comment&quot;&gt;// rotate baround x by 1 degrees per timer step&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; rx[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;]= { &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n                     &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, c, s, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n                     &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,-s, c, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n                     &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; };\n    &lt;span class=&quot;hljs-built_in&quot;&gt;matrix_mul&lt;/span&gt;(rep,rep,rz);\n    &lt;span class=&quot;hljs-built_in&quot;&gt;matrix_mul&lt;/span&gt;(rep,rep,rx);\n\n    &lt;span class=&quot;hljs-built_in&quot;&gt;draw&lt;/span&gt;();\n    }\n&lt;span class=&quot;hljs-comment&quot;&gt;//---------------------------------------------------------------------------&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;here is how it looks like:&lt;/p&gt;\n&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/lgfsw.png&quot; alt=&quot;cube example&quot;&gt;&lt;/p&gt;\n&lt;p&gt;And GIF animation with back face culling:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/FGVUb.gif&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/FGVUb.gif&quot; alt=&quot;animation&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;[notes]&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;If you have more questions then comment me ...&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;[Edit2] basic 3D vector operations often needed&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;If you do not know how to compute vector operations like cross/dot products or absolute value see:&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// cross product: W = U x V&lt;/span&gt;\nW.x=(U.y*V.z)-(U.z*V.y)\nW.y=(U.z*V.x)-(U.x*V.z)\nW.z=(U.x*V.y)-(U.y*V.x)\n&lt;span class=&quot;hljs-comment&quot;&gt;// dot product: a = (U.V)&lt;/span&gt;\na=U.x*V.x+U.y*V.y+U.z*V.z\n&lt;span class=&quot;hljs-comment&quot;&gt;// abs of vector a = |U|&lt;/span&gt;\na=&lt;span class=&quot;hljs-built_in&quot;&gt;sqrt&lt;/span&gt;((U.x*U.x)+(U.y*U.y)+(U.z*U.z))\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;here my C++ vector math:&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; vector_tmp[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;];\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;divide&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; x,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; y)&lt;/span&gt; &lt;/span&gt;{ &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ((y&amp;gt;=&lt;span class=&quot;hljs-number&quot;&gt;-1e-30&lt;/span&gt;)&amp;amp;&amp;amp;(y&amp;lt;=+&lt;span class=&quot;hljs-number&quot;&gt;1e-30&lt;/span&gt;)) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0.0&lt;/span&gt;; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; x/y; }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt;* &lt;span class=&quot;hljs-title&quot;&gt;vector_ld&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; x,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; y,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; z)&lt;/span&gt;          &lt;/span&gt;{ &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *p=vector_tmp; p[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]=x; p[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]=y; p[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]=z; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; p;}\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt;* &lt;span class=&quot;hljs-title&quot;&gt;vector_ld&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *p,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; x,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; y,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; z)&lt;/span&gt; &lt;/span&gt;{                      p[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]=x; p[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]=y; p[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]=z; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; p;}\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;vector_copy&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt;         &lt;/span&gt;{ &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;i++) c[i]=a[i];       }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;vector_abs&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt;          &lt;/span&gt;{ &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;i++) c[i]=&lt;span class=&quot;hljs-built_in&quot;&gt;fabs&lt;/span&gt;(a[i]); }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;vector_one&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt;\n        &lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; l=&lt;span class=&quot;hljs-built_in&quot;&gt;divide&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;,&lt;span class=&quot;hljs-built_in&quot;&gt;sqrt&lt;/span&gt;((a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])));\n        c[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]=a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*l;\n        c[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]=a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*l;\n        c[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]=a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*l;\n        }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;vector_len&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; l)&lt;/span&gt;\n        &lt;/span&gt;{\n        l=&lt;span class=&quot;hljs-built_in&quot;&gt;divide&lt;/span&gt;(l,&lt;span class=&quot;hljs-built_in&quot;&gt;sqrt&lt;/span&gt;((a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])));\n        c[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]=a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*l;\n        c[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]=a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*l;\n        c[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]=a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*l;\n        }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;vector_neg&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt;          &lt;/span&gt;{ &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;i++) c[i]=-a[i];      }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;vector_add&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt; &lt;/span&gt;{ &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;i++) c[i]=a[i]+b[i]; }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;vector_sub&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt; &lt;/span&gt;{ &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;i++) c[i]=a[i]-b[i]; }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;vector_mul&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// cross&lt;/span&gt;\n        &lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt;   q[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;];\n        q[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]=(a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])-(a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);\n        q[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]=(a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])-(a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]);\n        q[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]=(a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])-(a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*b[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;i++) c[i]=q[i];\n        }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;vector_mul&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt;  b)&lt;/span&gt; &lt;/span&gt;{ &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;i++) c[i]=a[i]*b; }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;  &lt;span class=&quot;hljs-title&quot;&gt;vector_mul&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *c,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt;  a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt; &lt;/span&gt;{ &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;i++) c[i]=a*b[i]; }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;vector_mul&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(         &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a,&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *b)&lt;/span&gt; &lt;/span&gt;{ &lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; c=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;i++) c+=a[i]*b[i]; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; c; } &lt;span class=&quot;hljs-comment&quot;&gt;// dot&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;vector_len&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt; &lt;/span&gt;{ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sqrt&lt;/span&gt;((a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])); }\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;vector_len2&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;double&lt;/span&gt; *a)&lt;/span&gt; &lt;/span&gt;{ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+(a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]*a[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]); }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;[Edit3] local rotations for camera and object control via keyboard&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;As this has been asked a lot lately here some example answers of mine with demos:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/40171880/2521214&quot;&gt;stationary camera view control (partial pseudo inverse matrix)&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/40104549/2521214&quot;&gt;camera and player control (inverse matrix)&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/42293434/2521214&quot;&gt;How to preserve accuracy with cumulative transforms over time (full pseudo inverse matrix)&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/52801501/2521214&quot;&gt;rotundus style simple OpenGL/C++/VCL player control example&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n    "],"id":432,"title":"How do I compose a rotation matrix with human readable angles from scratch?","content":"\n                \n&lt;p&gt;The one thing that has always hindered me from doing 3D programming is failing to understand how math works. I can go along with math fine in programming flow using methods and functions, then its all clear and logical to me, but in mathematical notation, I just can&apos;t make heads or tails from it.&lt;/p&gt;\n\n&lt;p&gt;I have been reading websites, a watching videos of institutes trying to explain this, but they all use mathematical notation and I simply get lost in it, my mind won&apos;t translate it to something understandable. I might have a defect there.&lt;/p&gt;\n\n&lt;p&gt;Also, Just using someone&apos;s code isn&apos;t my interest, I want to understand the mechanics behind it, the logic. I&apos;d be happy to use someone else&apos;s code, but I really want to understand how it works.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The question&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Can you explain to me in simple terms &lt;strong&gt;without&lt;/strong&gt; mathematical notation, just programming notation/functions/psuedocode, how to implement a matrix transform along all 3 axes?&lt;/p&gt;\n\n&lt;p&gt;Ideally what I want is the material/understanding to write a method/object where I can define the angles of 3 axes similar to glRotate to rotate the collection of quads/triangles I have. (I am trying to program a 3D rotation of a cube shapes without having access to OpenGL functions to do it for me because this is done in one draw call every time something changes in the display list.)&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;What have I done?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;I have attempted at making a 90 degrees transform function to get the hang of the math but failed utterly in making a proper matrix which in theory should have been the simplest to do. You can see my failed attempt in all its glory on &lt;a href=&quot;http://jsfiddle.net/bLfg0tj8/5/&quot; rel=&quot;noreferrer&quot;&gt;http://jsfiddle.net/bLfg0tj8/5/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Vec3&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x,y,z&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; = x;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; = y;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;z&lt;/span&gt; = z;\n}\n&lt;span class=&quot;hljs-title class_&quot;&gt;Matrix&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Matrix&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;matrixPoints&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;();    \n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;rotationPoint&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Vec3&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;rotationAngle&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;90&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-title class_&quot;&gt;Matrix&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;addVector&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;vector&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;matrixPoints&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(vector);\n}\n&lt;span class=&quot;hljs-title class_&quot;&gt;Matrix&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setRotationPoint&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;vector&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;rotationPoint&lt;/span&gt; = vector; \n}\n&lt;span class=&quot;hljs-title class_&quot;&gt;Matrix&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setRotationAngle&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;angle&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;rotationAngle&lt;/span&gt; = angle;\n}\n&lt;span class=&quot;hljs-title class_&quot;&gt;Matrix&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;populate&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    translateToOrigin =     [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;-&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;rotationPoint&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt;],\n                                  [&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;-&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;rotationPoint&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt;],\n                                  [&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;-&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;rotationPoint&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;z&lt;/span&gt;]];\n    rotationMatrix =         [[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,-&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;],\n                                  [&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;],\n                                  [&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]];\n    translateEnd =         [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;rotationPoint&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt;],\n                                  [&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;rotationPoint&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt;],\n                                  [&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;rotationPoint&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;z&lt;/span&gt;]];\n    currentColumn = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    currentRow = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;combomatrix&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;mergeMatrices&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;mergeMatrices&lt;/span&gt;(translateEnd,rotationMatrix),\n                                          translateToOrigin);\n}\n&lt;span class=&quot;hljs-title class_&quot;&gt;Matrix&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;transform&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    newmatrix = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(c = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;c&amp;lt;&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;matrixPoints&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;c++) {\n        newmatrix.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;applyToVertex&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;matrixPoints&lt;/span&gt;[c]));\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; newmatrix;\n}\n&lt;span class=&quot;hljs-title class_&quot;&gt;Matrix&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;applyToVertex&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;vertex&lt;/span&gt;) {\n    ret = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Vec3&lt;/span&gt;(vertex.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt;,vertex.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt;,vertex.&lt;span class=&quot;hljs-property&quot;&gt;z&lt;/span&gt;);\n    ret.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; = ret.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; + &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;combomatrix&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * vertex.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; +\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;combomatrix&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * vertex.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; +\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;combomatrix&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * vertex.&lt;span class=&quot;hljs-property&quot;&gt;z&lt;/span&gt;;\n    \n    ret.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; = ret.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; + &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;combomatrix&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * vertex.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; +\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;combomatrix&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * vertex.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; +\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;combomatrix&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * vertex.&lt;span class=&quot;hljs-property&quot;&gt;z&lt;/span&gt;;\n    \n    ret.&lt;span class=&quot;hljs-property&quot;&gt;z&lt;/span&gt; = ret.&lt;span class=&quot;hljs-property&quot;&gt;z&lt;/span&gt; + &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;combomatrix&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * vertex.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt; +\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;combomatrix&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * vertex.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt; +\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;combomatrix&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * vertex.&lt;span class=&quot;hljs-property&quot;&gt;z&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ret;\n}\n&lt;span class=&quot;hljs-title class_&quot;&gt;Matrix&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;mergeMatrices&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;lastStep, oneInFront&lt;/span&gt;) {\n    step1 = [[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;],[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;],[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]];\n    step1[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] =   lastStep[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n    \n    step1[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] =   lastStep[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;];\n    \n    step1[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] =   lastStep[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;];\n    &lt;span class=&quot;hljs-comment&quot;&gt;//============================================================&lt;/span&gt;\n    step1[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] =   lastStep[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n    \n    step1[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] =   lastStep[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;];\n    \n    step1[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] =   lastStep[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;];\n    &lt;span class=&quot;hljs-comment&quot;&gt;//============================================================&lt;/span&gt;\n    step1[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] =   lastStep[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n    \n    step1[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] =   lastStep[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;];\n    \n    step1[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] =   lastStep[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] + \n                    lastStep[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] * oneInFront[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;][&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; step1;\n}\n&lt;span class=&quot;hljs-title class_&quot;&gt;Matrix&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getCurrentMatrix&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;matrixPoints&lt;/span&gt;;\n}\nmyvectors = [&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Vec3&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;), &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Vec3&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;80&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;), &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Vec3&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;80&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;80&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)];\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;drawVectors&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;vectors,color&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(c=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;c&amp;lt;vectors.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;c++) {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;whoa&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;innerHTML&lt;/span&gt; += &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;div style=&quot;color:&apos;&lt;/span&gt;+color+&lt;span class=&quot;hljs-string&quot;&gt;&apos;;position:absolute;left:&apos;&lt;/span&gt;+vectors[c].&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt;+&lt;span class=&quot;hljs-string&quot;&gt;&apos;px; top:&apos;&lt;/span&gt;+vectors[c].&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt;+&lt;span class=&quot;hljs-string&quot;&gt;&apos;px;z-index:&apos;&lt;/span&gt;+vectors[c].&lt;span class=&quot;hljs-property&quot;&gt;z&lt;/span&gt;+&lt;span class=&quot;hljs-string&quot;&gt;&apos;;&quot;&amp;gt;(&apos;&lt;/span&gt;+c+&lt;span class=&quot;hljs-string&quot;&gt;&apos;).&amp;lt;/div&amp;gt;&apos;&lt;/span&gt;;\n    }\n}\nmatrix = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Matrix&lt;/span&gt;();\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(c=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;c&amp;lt;myvectors.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;c++) {\n    matrix.&lt;span class=&quot;hljs-title function_&quot;&gt;addVector&lt;/span&gt;(myvectors[c]);\n}\nmatrix.&lt;span class=&quot;hljs-title function_&quot;&gt;setRotationPoint&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Vec3&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;70&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;));\nmatrix.&lt;span class=&quot;hljs-title function_&quot;&gt;populate&lt;/span&gt;();\nsomematrix = matrix.&lt;span class=&quot;hljs-title function_&quot;&gt;transform&lt;/span&gt;();\n&lt;span class=&quot;hljs-title function_&quot;&gt;drawVectors&lt;/span&gt;(matrix.&lt;span class=&quot;hljs-title function_&quot;&gt;getCurrentMatrix&lt;/span&gt;(),&lt;span class=&quot;hljs-string&quot;&gt;&quot;lime&quot;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// draw current matrix that was hand coded&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;drawVectors&lt;/span&gt;([matrix.&lt;span class=&quot;hljs-property&quot;&gt;rotationPoint&lt;/span&gt;],&lt;span class=&quot;hljs-string&quot;&gt;&apos;white&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// draw rotation point&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;drawVectors&lt;/span&gt;(somematrix,&lt;span class=&quot;hljs-string&quot;&gt;&quot;red&quot;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// transformed matrix... somehow two points merge&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;whoa&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;position:relative;top:50px;left:150px;background-color:green;color:red;width:400px;height:300px;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-symbol&quot;&gt;&amp;amp;nbsp;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;The green text is the original triangle, the white point the center point, the red points the failed transformation(I think, because it isn&apos;t aligned around the center point). The tutorial I was in thought me how to combine matrices into a combined matrix, but I guess I screwed up somewhere.&lt;/p&gt;\n\n&lt;p&gt;As I said, it&apos;s really really hard for me to understand mathematical notation and speak. And not helping is that most teachers skip parts of the explanation. Took me 2 hours alone to understand when multiplying matrices you need to add each step together instead of just keep on multiplying. Yay for explanations.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;A practical example what I work with/want to work with&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;For example I have a cube, loaded from a wavefront obj file located in the world at &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;x = 50\ny = 100\nz = 200\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The cube is drawn using quads and some uv mapping. No problems here. It renders beautifully with all the textures showing correctly.&lt;/p&gt;\n\n&lt;p&gt;These are the location coordinates for each &quot;face&quot; of the cube which is drawn using a quad.&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;// Front face\n-1.0, -1.0,  1.0,\n 1.0, -1.0,  1.0,\n 1.0,  1.0,  1.0,\n-1.0,  1.0,  1.0,\n\n// Back face\n-1.0, -1.0, -1.0,\n-1.0,  1.0, -1.0,\n 1.0,  1.0, -1.0,\n 1.0, -1.0, -1.0,\n\n// Top face\n-1.0,  1.0, -1.0,\n-1.0,  1.0,  1.0,\n 1.0,  1.0,  1.0,\n 1.0,  1.0, -1.0,\n\n// Bottom face\n-1.0, -1.0, -1.0,\n 1.0, -1.0, -1.0,\n 1.0, -1.0,  1.0,\n-1.0, -1.0,  1.0,\n\n// Right face\n 1.0, -1.0, -1.0,\n 1.0,  1.0, -1.0,\n 1.0,  1.0,  1.0,\n 1.0, -1.0,  1.0,\n\n// Left face\n-1.0, -1.0, -1.0,\n-1.0, -1.0,  1.0,\n-1.0,  1.0,  1.0,\n-1.0,  1.0, -1.0\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So this works all great. But what if I want this cube rotated 90 degrees along the x axis and 45 degrees around the z axis? I cannot use glRotate because at the moment I pass the data to the tesselator object I cannot do any matrix transforms to it via the opengl functions because it&apos;s just taking in the data, not actually rendering it per se.&lt;/p&gt;\n\n&lt;p&gt;The way the data is stored is as following:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;WaveFrontObject()\n   |\n   |-&amp;gt; Groups(String groupname)\n        |\n        |-&amp;gt; Faces()\n              |\n              |-&amp;gt; Vertex(float x, float y, float z)[] \n              |-&amp;gt; Float UVmap[] corresponding to each vertex\n              |-&amp;gt; drawFace() // Draws the face as a quad or triangle\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So each of the above coordinates I gave is stored as a face of the wavefront object in the group &quot;cube&quot;.&lt;/p&gt;\n\n&lt;p&gt;When the cube is added to the tesselator it is translated to the right coordinates in the world and it renders normal.&lt;/p&gt;\n\n&lt;p&gt;It always renders the same however. If I would want it to render at an angle I would have to make a seperate wavefront object at this moment to be able to do that. In my opnion that is madness to do when it can be solved with some math.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Needed in the answer&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Explanation step by step how to build a translation matrix and an attempt to explain the math to me.&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Explanation how to apply the translation matrix to the quads/triangles in the faces whist they keep oriented around the center of their location &lt;/p&gt;\n\n&lt;p&gt;x = 50.5\ny = 100.5\nz = 200.5&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Some example/pseudo code to go along with the explanation.&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;The used programming language used to explain isn&apos;t really relevant as long as its in the C family&lt;/p&gt;\n\n&lt;p&gt;Please try to stay away from mathematical notation/speak. I don&apos;t know what alpha beta, thetha is, I do know what x axis, y axis and z axis is. I do know what angles are, but I do not know the names mathematicians find for it.&lt;/p&gt;\n\n&lt;p&gt;If you wish to use math names, please explain to me what they are in the 3D world/code and how they are formed/calculated.&lt;/p&gt;\n\n&lt;p&gt;I simply want to make a method/object along the lines of&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;Matrix.transformVertices(vertices[], 90deg x, 45 deg y, 0 deg z);\n&lt;/code&gt;&lt;/pre&gt;\n    ","slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457","postType":"QUESTION","createdAt":"2022-07-09T17:32:43.000Z","updatedAt":"2022-07-09T17:32:43.000Z","tags":[{"id":2260,"name":"opengl","slug":"opengl","createdAt":"2022-07-09T17:32:43.000Z","updatedAt":"2022-07-09T17:32:43.000Z","Questions_Tags":{"questionId":432,"tagId":2260}},{"id":2262,"name":"matrix","slug":"matrix","createdAt":"2022-07-09T17:32:43.000Z","updatedAt":"2022-07-09T17:32:43.000Z","Questions_Tags":{"questionId":432,"tagId":2262}},{"id":2263,"name":"3d","slug":"3d","createdAt":"2022-07-09T17:32:43.000Z","updatedAt":"2022-07-09T17:32:43.000Z","Questions_Tags":{"questionId":432,"tagId":2263}}],"relatedQuestions":[{"title":"How do I compose a rotation matrix with human readable angles from scratch?","slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457","tags":[{"name":"opengl","Questions_Tags":{"questionId":432,"tagId":2260}},{"name":"matrix","Questions_Tags":{"questionId":432,"tagId":2262}},{"name":"3d","Questions_Tags":{"questionId":432,"tagId":2263}}]}]},"randomQuestions":[{"title":"The Definitive C Book Guide and List","slug":"the-definitive-c-book-guide-and-list-1657384747653"},{"title":"How to use SharedPreferences in Android to store, fetch and edit values [closed]","slug":"how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values-closed-1657387683057"},{"title":"Is there any way to kill a Thread?","slug":"is-there-any-way-to-kill-a-thread-1657387859831"},{"title":"What is the difference between const int*, const int * const, and int const *?","slug":"what-is-the-difference-between-const-int*-const-int-*-const-and-int-const-*-1657388184604"},{"title":"What's the meaning of \"=>\" (an arrow formed from equals & greater than) in JavaScript?","slug":"what's-the-meaning-of-\"greater\"-(an-arrow-formed-from-equals-and-greater-than)-in-javascript-1657387977118"},{"title":"How can I save an activity state using the save instance state?","slug":"how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981"},{"title":"Firebase query if child of child contains a value","slug":"firebase-query-if-child-of-child-contains-a-value-1657387841291"},{"title":"What is a debugger and how can it help me diagnose problems?","slug":"what-is-a-debugger-and-how-can-it-help-me-diagnose-problems-1657384472469"},{"title":"Is floating point math broken?","slug":"is-floating-point-math-broken-1657384238910"},{"title":"Difference between single and double quotes in Bash","slug":"difference-between-single-and-double-quotes-in-bash-1657385460827"},{"title":"Can PHP PDO Statements accept the table or column name as parameter?","slug":"can-php-pdo-statements-accept-the-table-or-column-name-as-parameter-1657387478588"},{"title":"Asking the user for input until they give a valid response","slug":"asking-the-user-for-input-until-they-give-a-valid-response-1657384376162"},{"title":"Persist variables between page loads","slug":"persist-variables-between-page-loads-1657388558452"},{"title":"Daylight saving time and time zone best practices [closed]","slug":"daylight-saving-time-and-time-zone-best-practices-closed-1657387973687"},{"title":"My regex is matching too much. How do I make it stop? [duplicate]","slug":"my-regex-is-matching-too-much.-how-do-i-make-it-stop-duplicate-1657384845028"},{"title":"Is there a JavaScript / jQuery DOM change listener?","slug":"is-there-a-javascript-jquery-dom-change-listener-1657387961200"},{"title":"Sort (order) data frame rows by multiple columns","slug":"sort-(order)-data-frame-rows-by-multiple-columns-1657388355671"},{"title":"Is it safe to expose Firebase apiKey to the public?","slug":"is-it-safe-to-expose-firebase-apikey-to-the-public-1657388268111"},{"title":"What is an efficient way to implement a singleton pattern in Java? [closed]","slug":"what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java-closed-1657387970474"},{"title":"Correctly allocating multi-dimensional arrays","slug":"correctly-allocating-multi-dimensional-arrays-1657387733756"}]},"__N_SSG":true}