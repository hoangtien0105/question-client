<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>What is the most efficient way to deep clone an object in JavaScript? | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="
            
        
            
                    
                        
                    
                
                    
                        This question&#x27;s answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.
                        
                    
                
            
        


    

What is the most efficient way to clone a JavaScript object? I&#x27;ve seen obj = eval(uneval(o)); being used, but that&#x27;s non-standard and only supported by Firefox. I&#x27;ve done things like obj = JSON.parse(JSON.stringify(o)); but question the efficiency.  I&#x27;ve also seen recursive copying functions with various flaws.

I&#x27;m surprised no canonical solution exists.
    "/><meta property="og:title" content="What is the most efficient way to deep clone an object in JavaScript? | Solutions Checker"/><meta property="og:description" content="
            
        
            
                    
                        
                    
                
                    
                        This question&#x27;s answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.
                        
                    
                
            
        


    

What is the most efficient way to clone a JavaScript object? I&#x27;ve seen obj = eval(uneval(o)); being used, but that&#x27;s non-standard and only supported by Firefox. I&#x27;ve done things like obj = JSON.parse(JSON.stringify(o)); but question the efficiency.  I&#x27;ve also seen recursive copying functions with various flaws.

I&#x27;m surprised no canonical solution exists.
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"What is the most efficient way to deep clone an object in JavaScript?","text":"\n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        This question&apos;s answers are a community effort. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \n                \n            \n        \n\n\n    \n\nWhat is the most efficient way to clone a JavaScript object? I&apos;ve seen obj = eval(uneval(o)); being used, but that&apos;s non-standard and only supported by Firefox. I&apos;ve done things like obj = JSON.parse(JSON.stringify(o)); but question the efficiency.  I&apos;ve also seen recursive copying functions with various flaws.\n\nI&apos;m surprised no canonical solution exists.\n    ","answerCount":30,"upVoteCount":500,"suggestedAnswer":[{"text":"Native deep cloning\nThere&apos;s now a JS standard called &quot;structured cloning&quot;, that works experimentally in Node 11 and later, will land in browsers, and which has polyfills for existing systems.\nstructuredClone(value)\n\nIf needed, loading the polyfill first:\nimport structuredClone from &apos;@ungap/structured-clone&apos;;\n\nSee this answer for more details.\nOlder answers\nFast cloning with data loss - JSON.parse/stringify\nIf you do not use Dates, functions, undefined, Infinity, RegExps, Maps, Sets, Blobs, FileLists, ImageDatas, sparse Arrays, Typed Arrays or other complex types within your object, a very simple one liner to deep clone an object is:\nJSON.parse(JSON.stringify(object))\n\n\nconst a = {\n  string: &apos;string&apos;,\n  number: 123,\n  bool: false,\n  nul: null,\n  date: new Date(),  // stringified\n  undef: undefined,  // lost\n  inf: Infinity,  // forced to &apos;null&apos;\n  re: /.*/,  // lost\n}\nconsole.log(a);\nconsole.log(typeof a.date);  // Date object\nconst clone = JSON.parse(JSON.stringify(a));\nconsole.log(clone);\nconsole.log(typeof clone.date);  // result of .toISOString()\n Run code snippetHide resultsExpand snippet\n\n\nSee Corban&apos;s answer for benchmarks.\nReliable cloning using a library\nSince cloning objects is not trivial (complex types, circular references, function etc.), most major libraries provide function to clone objects. Don&apos;t reinvent the wheel - if you&apos;re already using a library, check if it has an object cloning function. For example,\n\nlodash - cloneDeep; can be imported separately via the lodash.clonedeep module and is probably your best choice if you&apos;re not already using a library that provides a deep cloning function\nAngularJS - angular.copy\njQuery - jQuery.extend(true, { }, oldObject); .clone() only clones DOM elements\njust library - just-clone; Part of a library of zero-dependency npm modules that do just do one thing.\nGuilt-free utilities for every occasion.\n\nES6 (shallow copy)\nFor completeness, note that ES6 offers two shallow copy mechanisms: Object.assign() and the spread syntax.\nwhich copies values of all enumerable own properties from one object to another. For example:\nvar A1 = {a: &quot;2&quot;};\nvar A2 = Object.assign({}, A1);\nvar A3 = {...A1};  // Spread Syntax\n\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"Checkout this benchmark: http://jsben.ch/#/bWfk9\n\nIn my previous tests where speed was a main concern I found \n\nJSON.parse(JSON.stringify(obj))\n\n\nto be the slowest way to deep clone an object (it is slower than jQuery.extend with deep flag set true by 10-20%).\n\njQuery.extend is pretty fast when the deep flag is set to false (shallow clone). It is a good option, because it includes some extra logic for type validation and doesn&apos;t copy over undefined properties, etc., but this will also slow you down a little.\n\nIf you know the structure of the objects you are trying to clone or can avoid deep nested arrays you can write a simple for (var i in obj) loop to clone your object while checking hasOwnProperty and it will be much much faster than jQuery.\n\nLastly if you are attempting to clone a known object structure in a hot loop you can get MUCH MUCH MORE PERFORMANCE by simply in-lining the clone procedure and manually constructing the object.\n\nJavaScript trace engines suck at optimizing for..in loops and checking hasOwnProperty will slow you down as well. Manual clone when speed is an absolute must.\n\nvar clonedObject = {\n  knownProp: obj.knownProp,\n  ..\n}\n\n\nBeware using the JSON.parse(JSON.stringify(obj)) method on Date objects - JSON.stringify(new Date()) returns a string representation of the date in ISO format, which JSON.parse() doesn&apos;t convert back to a Date object. See this answer for more details.\n\nAdditionally, please note that, in Chrome 65 at least, native cloning is not the way to go. According to JSPerf, performing native cloning by creating a new function is nearly 800x slower than using JSON.stringify which is incredibly fast all the way across the board.\n\nUpdate for ES6\n\nIf you are using Javascript ES6 try this native method for cloning or shallow copy.\n\nObject.assign({}, obj);\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Structured Cloning\n2022 update: The structuredClone global function is already available in Firefox 94, Node 17 and Deno 1.14\nThe HTML standard includes an internal structured cloning/serialization algorithm that can create deep clones of objects. It is still limited to certain built-in types, but in addition to the few types supported by JSON it also supports Dates, RegExps, Maps, Sets, Blobs, FileLists, ImageDatas, sparse Arrays, Typed Arrays, and probably more in the future. It also preserves references within the cloned data, allowing it to support cyclical and recursive structures that would cause errors for JSON.\nSupport in Node.js:\nThe structuredClone global function is provided by Node 17.0:\nconst clone = structuredClone(original);\n\nPrevious versions: The v8 module in Node.js (as of Node 11) exposes the structured serialization API directly, but this functionality is still marked as &quot;experimental&quot;, and subject to change or removal in future versions. If you&apos;re using a compatible version, cloning an object is as simple as:\nconst v8 = require(&apos;v8&apos;);\n\nconst structuredClone = obj =&gt; {\n  return v8.deserialize(v8.serialize(obj));\n};\n\nDirect Support in Browsers: Available in Firefox 94\nThe structuredClone global function will soon be provided by all major browsers (having previously been discussed in whatwg/html#793 on GitHub). It looks / will look like this:\nconst clone = structuredClone(original);\n\nUntil this is shipped, browsers&apos; structured clone implementations are only exposed indirectly.\nAsynchronous Workaround: Usable. \nThe lower-overhead way to create a structured clone with existing APIs is to post the data through one port of a MessageChannels. The other port will emit a message event with a structured clone of the attached .data. Unfortunately, listening for these events is necessarily asynchronous, and the synchronous alternatives are less practical.\nclass StructuredCloner {\n  constructor() {\n    this.pendingClones_ = new Map();\n    this.nextKey_ = 0;\n    \n    const channel = new MessageChannel();\n    this.inPort_ = channel.port1;\n    this.outPort_ = channel.port2;\n    \n    this.outPort_.onmessage = ({data: {key, value}}) =&gt; {\n      const resolve = this.pendingClones_.get(key);\n      resolve(value);\n      this.pendingClones_.delete(key);\n    };\n    this.outPort_.start();\n  }\n\n  cloneAsync(value) {\n    return new Promise(resolve =&gt; {\n      const key = this.nextKey_++;\n      this.pendingClones_.set(key, resolve);\n      this.inPort_.postMessage({key, value});\n    });\n  }\n}\n\nconst structuredCloneAsync = window.structuredCloneAsync =\n    StructuredCloner.prototype.cloneAsync.bind(new StructuredCloner);\n\nExample Use:\nconst main = async () =&gt; {\n  const original = { date: new Date(), number: Math.random() };\n  original.self = original;\n\n  const clone = await structuredCloneAsync(original);\n\n  // They&apos;re different objects:\n  console.assert(original !== clone);\n  console.assert(original.date !== clone.date);\n\n  // They&apos;re cyclical:\n  console.assert(original.self === original);\n  console.assert(clone.self === clone);\n\n  // They contain equivalent values:\n  console.assert(original.number === clone.number);\n  console.assert(Number(original.date) === Number(clone.date));\n  \n  console.log(&quot;Assertions complete.&quot;);\n};\n\nmain();\n\nSynchronous Workarounds: Awful! \nThere are no good options for creating structured clones synchronously. Here are a couple of impractical hacks instead.\nhistory.pushState() and history.replaceState() both create a structured clone of their first argument, and assign that value to history.state. You can use this to create a structured clone of any object like this:\nconst structuredClone = obj =&gt; {\n  const oldState = history.state;\n  history.replaceState(obj, null);\n  const clonedObj = history.state;\n  history.replaceState(oldState, null);\n  return clonedObj;\n};\n\nExample Use:\nShow code snippet\n\n&apos;use strict&apos;;\n\nconst main = () =&gt; {\n  const original = { date: new Date(), number: Math.random() };\n  original.self = original;\n\n  const clone = structuredClone(original);\n  \n  // They&apos;re different objects:\n  console.assert(original !== clone);\n  console.assert(original.date !== clone.date);\n\n  // They&apos;re cyclical:\n  console.assert(original.self === original);\n  console.assert(clone.self === clone);\n\n  // They contain equivalent values:\n  console.assert(original.number === clone.number);\n  console.assert(Number(original.date) === Number(clone.date));\n  \n  console.log(&quot;Assertions complete.&quot;);\n};\n\nconst structuredClone = obj =&gt; {\n  const oldState = history.state;\n  history.replaceState(obj, null);\n  const clonedObj = history.state;\n  history.replaceState(oldState, null);\n  return clonedObj;\n};\n\nmain();\n Run code snippetHide resultsExpand snippet\n\n\nThough synchronous, this can be extremely slow. It incurs all of the overhead associated with manipulating the browser history. Calling this method repeatedly can cause Chrome to become temporarily unresponsive.\nThe Notification constructor creates a structured clone of its associated data. It also attempts to display a browser notification to the user, but this will silently fail unless you have requested notification permission. In case you have the permission for other purposes, we&apos;ll immediately close the notification we&apos;ve created.\nconst structuredClone = obj =&gt; {\n  const n = new Notification(&apos;&apos;, {data: obj, silent: true});\n  n.onshow = n.close.bind(n);\n  return n.data;\n};\n\nExample Use:\nShow code snippet\n\n&apos;use strict&apos;;\n\nconst main = () =&gt; {\n  const original = { date: new Date(), number: Math.random() };\n  original.self = original;\n\n  const clone = structuredClone(original);\n  \n  // They&apos;re different objects:\n  console.assert(original !== clone);\n  console.assert(original.date !== clone.date);\n\n  // They&apos;re cyclical:\n  console.assert(original.self === original);\n  console.assert(clone.self === clone);\n\n  // They contain equivalent values:\n  console.assert(original.number === clone.number);\n  console.assert(Number(original.date) === Number(clone.date));\n  \n  console.log(&quot;Assertions complete.&quot;);\n};\n\nconst structuredClone = obj =&gt; {\n  const n = new Notification(&apos;&apos;, {data: obj, silent: true});\n  n.close();\n  return n.data;\n};\n\nmain();\n Run code snippetHide resultsExpand snippet\n\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Assuming that you have only properties and not any functions in your object, you can  just use:\nvar newObject = JSON.parse(JSON.stringify(oldObject));\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"If there wasn&apos;t any builtin one, you could try:\n\nfunction clone(obj) {\n    if (obj === null || typeof (obj) !== &apos;object&apos; || &apos;isActiveClone&apos; in obj)\n        return obj;\n\n    if (obj instanceof Date)\n        var temp = new obj.constructor(); //or new Date(obj);\n    else\n        var temp = obj.constructor();\n\n    for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            obj[&apos;isActiveClone&apos;] = null;\n            temp[key] = clone(obj[key]);\n            delete obj[&apos;isActiveClone&apos;];\n        }\n    }\n    return temp;\n}\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"The efficient way to clone(not deep-clone) an object in one line of code\nAn Object.assign method is part of the ECMAScript 2015 (ES6) standard and does exactly what you need.\nvar clone = Object.assign({}, obj);\n\n\nThe Object.assign() method is used to copy the values of all enumerable own properties from one or more source objects to a target object.\n\nRead more...\nThe polyfill to support older browsers:\nif (!Object.assign) {\n  Object.defineProperty(Object, &apos;assign&apos;, {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function(target) {\n      &apos;use strict&apos;;\n      if (target === undefined || target === null) {\n        throw new TypeError(&apos;Cannot convert first argument to object&apos;);\n      }\n\n      var to = Object(target);\n      for (var i = 1; i &lt; arguments.length; i++) {\n        var nextSource = arguments[i];\n        if (nextSource === undefined || nextSource === null) {\n          continue;\n        }\n        nextSource = Object(nextSource);\n\n        var keysArray = Object.keys(nextSource);\n        for (var nextIndex = 0, len = keysArray.length; nextIndex &lt; len; nextIndex++) {\n          var nextKey = keysArray[nextIndex];\n          var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n          if (desc !== undefined &amp;&amp; desc.enumerable) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n      return to;\n    }\n  });\n}\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"Deep copy by performance:\nRanked from best to worst\n\nspread operator ... (primitive arrays - only)\nsplice(0) (primitive arrays - only)\nslice() (primitive arrays - only)\nconcat() (primitive arrays - only)\ncustom function, as seen below (any array)\njQuery&apos;s $.extend() (any array)\nJSON.parse(JSON.stringify()) (primitive and literal arrays - only)\nUnderscore&apos;s _.clone() (primitive and literal arrays - only)\nLodash&apos;s _.cloneDeep() (any array)\n\nWhere:\n\nprimitives = strings, numbers, and booleans\nliterals = object literals {}, array literals []\nany = primitives, literals, and prototypes\n\nDeep copy an array of primitives:\nlet arr1a = [1, &apos;a&apos;, true];\n\nTo deep copy arrays with primitives only (i.e. numbers, strings, and booleans), reassignment, slice(), concat(), and Underscore&apos;s clone() can be used.\nWhere spread has the fastest performance:\nlet arr1b = [...arr1a];\n\nAnd where slice() has better performance than concat(): https://jsbench.me/x5ktn7o94d/\nlet arr1c = arr1a.splice(0);\nlet arr1d = arr1a.slice();\nlet arr1e = arr1a.concat();\n\nDeep copy an array of primitive and object literals:\nlet arr2a = [1, &apos;a&apos;, true, {}, []];\nlet arr2b = JSON.parse(JSON.stringify(arr2a));\n\nDeep copy an array of primitive, object literals, and prototypes:\nlet arr3a = [1, &apos;a&apos;, true, {}, [], new Object()];\n\nWrite a custom function (has faster performance than $.extend() or JSON.parse):\nfunction copy(aObject) {\n  // Prevent undefined objects\n  // if (!aObject) return aObject;\n\n  let bObject = Array.isArray(aObject) ? [] : {};\n\n  let value;\n  for (const key in aObject) {\n\n    // Prevent self-references to parent object\n    // if (Object.is(aObject[key], aObject)) continue;\n    \n    value = aObject[key];\n\n    bObject[key] = (typeof value === &quot;object&quot;) ? copy(value) : value;\n  }\n\n  return bObject;\n}\n\nlet arr3b = copy(arr3a);\n\nOr use third-party utility functions:\nlet arr3c = $.extend(true, [], arr3a); // jQuery Extend\nlet arr3d = _.cloneDeep(arr3a); // Lodash\n\nNote: jQuery&apos;s $.extend also has better performance than JSON.parse(JSON.stringify()):\n\njs-deep-copy\njquery-extend-vs-json-parse\n\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"This is what I&apos;m using:\n\nfunction cloneObject(obj) {\n    var clone = {};\n    for(var i in obj) {\n        if(typeof(obj[i])==&quot;object&quot; &amp;&amp; obj[i] != null)\n            clone[i] = cloneObject(obj[i]);\n        else\n            clone[i] = obj[i];\n    }\n    return clone;\n}\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"Code:\n\n// extends &apos;from&apos; object with members from &apos;to&apos;. If &apos;to&apos; is null, a deep clone of &apos;from&apos; is returned\nfunction extend(from, to)\n{\n    if (from == null || typeof from != &quot;object&quot;) return from;\n    if (from.constructor != Object &amp;&amp; from.constructor != Array) return from;\n    if (from.constructor == Date || from.constructor == RegExp || from.constructor == Function ||\n        from.constructor == String || from.constructor == Number || from.constructor == Boolean)\n        return new from.constructor(from);\n\n    to = to || new from.constructor();\n\n    for (var name in from)\n    {\n        to[name] = typeof to[name] == &quot;undefined&quot; ? extend(from[name], null) : to[name];\n    }\n\n    return to;\n}\n\n\nTest:\n\nvar obj =\n{\n    date: new Date(),\n    func: function(q) { return 1 + q; },\n    num: 123,\n    text: &quot;asdasd&quot;,\n    array: [1, &quot;asd&quot;],\n    regex: new RegExp(/aaa/i),\n    subobj:\n    {\n        num: 234,\n        text: &quot;asdsaD&quot;\n    }\n}\n\nvar clone = extend(obj);\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"Deep copying objects in JavaScript (I think the best and the simplest)\n\n1. Using JSON.parse(JSON.stringify(object));\n\nvar obj = { \n  a: 1,\n  b: { \n    c: 2\n  }\n}\nvar newObj = JSON.parse(JSON.stringify(obj));\nobj.b.c = 20;\nconsole.log(obj); // { a: 1, b: { c: 20 } }\nconsole.log(newObj); // { a: 1, b: { c: 2 } } \n\n\n2.Using created method\n\nfunction cloneObject(obj) {\n    var clone = {};\n    for(var i in obj) {\n        if(obj[i] != null &amp;&amp;  typeof(obj[i])==&quot;object&quot;)\n            clone[i] = cloneObject(obj[i]);\n        else\n            clone[i] = obj[i];\n    }\n    return clone;\n}\n\nvar obj = { \n  a: 1,\n  b: { \n    c: 2\n  }\n}\nvar newObj = cloneObject(obj);\nobj.b.c = 20;\n\nconsole.log(obj); // { a: 1, b: { c: 20 } }\nconsole.log(newObj); // { a: 1, b: { c: 2 } } \n\n\n3. Using Lo-Dash&apos;s _.cloneDeep link lodash\n\nvar obj = { \n  a: 1,\n  b: { \n    c: 2\n  }\n}\n\nvar newObj = _.cloneDeep(obj);\nobj.b.c = 20;\nconsole.log(obj); // { a: 1, b: { c: 20 } }\nconsole.log(newObj); // { a: 1, b: { c: 2 } } \n\n\n4. Using Object.assign() method\n\nvar obj = { \n  a: 1,\n  b: 2\n}\n\nvar newObj = _.clone(obj);\nobj.b = 20;\nconsole.log(obj); // { a: 1, b: 20 }\nconsole.log(newObj); // { a: 1, b: 2 }  \n\n\nBUT WRONG WHEN\n\nvar obj = { \n  a: 1,\n  b: { \n    c: 2\n  }\n}\n\nvar newObj = Object.assign({}, obj);\nobj.b.c = 20;\nconsole.log(obj); // { a: 1, b: { c: 20 } }\nconsole.log(newObj); // { a: 1, b: { c: 20 } } --&gt; WRONG\n// Note: Properties on the prototype chain and non-enumerable properties cannot be copied.\n\n\n5.Using Underscore.js _.clone link Underscore.js\n\nvar obj = { \n  a: 1,\n  b: 2\n}\n\nvar newObj = _.clone(obj);\nobj.b = 20;\nconsole.log(obj); // { a: 1, b: 20 }\nconsole.log(newObj); // { a: 1, b: 2 }  \n\n\nBUT WRONG WHEN\n\nvar obj = { \n  a: 1,\n  b: { \n    c: 2\n  }\n}\n\nvar newObj = _.cloneDeep(obj);\nobj.b.c = 20;\nconsole.log(obj); // { a: 1, b: { c: 20 } }\nconsole.log(newObj); // { a: 1, b: { c: 20 } } --&gt; WRONG\n// (Create a shallow-copied clone of the provided plain object. Any nested objects or arrays will be copied by reference, not duplicated.)\n\n\nJSBEN.CH Performance Benchmarking Playground 1~3 http://jsben.ch/KVQLd\n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"Cloning an object was always a concern in JS, but it was all about before ES6, I list different ways of copying an object in JavaScript below, imagine you have the Object below and would like to have a deep copy of that:\nvar obj = {a:1, b:2, c:3, d:4};\n\nThere are few ways to copy this object, without changing the origin:\n\nES5+, Using a simple function to do the copy for you:\nfunction deepCopyObj(obj) {\n    if (null == obj || &quot;object&quot; != typeof obj) return obj;\n    if (obj instanceof Date) {\n        var copy = new Date();\n        copy.setTime(obj.getTime());\n        return copy;\n    }\n    if (obj instanceof Array) {\n        var copy = [];\n        for (var i = 0, len = obj.length; i &lt; len; i++) {\n            copy[i] = deepCopyObj(obj[i]);\n        }\n        return copy;\n    }\n    if (obj instanceof Object) {\n        var copy = {};\n        for (var attr in obj) {\n            if (obj.hasOwnProperty(attr)) copy[attr] = deepCopyObj(obj[attr]);\n        }\n        return copy;\n    }\n    throw new Error(&quot;Unable to copy obj this object.&quot;);\n}\n\n\nES5+, using JSON.parse and JSON.stringify.\nvar deepCopyObj = JSON.parse(JSON.stringify(obj));\n\n\nAngular:\nvar deepCopyObj = angular.copy(obj);\n\n\njQuery:\nvar deepCopyObj = jQuery.extend(true, {}, obj);\n\n\nUnderscore.js &amp; Lodash:\nvar deepCopyObj = _.cloneDeep(obj); //latest version of Underscore.js makes shallow copy\n\n\n\nHope these help\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"var clone = function() {\n    var newObj = (this instanceof Array) ? [] : {};\n    for (var i in this) {\n        if (this[i] &amp;&amp; typeof this[i] == &quot;object&quot;) {\n            newObj[i] = this[i].clone();\n        }\n        else\n        {\n            newObj[i] = this[i];\n        }\n    }\n    return newObj;\n}; \n\nObject.defineProperty( Object.prototype, &quot;clone&quot;, {value: clone, enumerable: false});\n\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"Theres a library (called clone), that does this quite well. It provides the most complete recursive cloning/copying of arbitrary objects that I know of. It also supports circular references, which is not covered by the other answers, yet.\n\nYou can find it on npm, too. It can be used for the browser as well as Node.js.\n\nHere is an example on how to use it:\n\nInstall it with\n\nnpm install clone\n\n\nor package it with Ender.\n\nender build clone [...]\n\n\nYou can also download the source code manually.\n\nThen you can use it in your source code.\n\nvar clone = require(&apos;clone&apos;);\n\nvar a = { foo: { bar: &apos;baz&apos; } };  // inital value of a\nvar b = clone(a);                 // clone a -&gt; b\na.foo.bar = &apos;foo&apos;;                // change a\n\nconsole.log(a);                   // { foo: { bar: &apos;foo&apos; } }\nconsole.log(b);                   // { foo: { bar: &apos;baz&apos; } }\n\n\n(Disclaimer: Im the author of the library.)\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"I know this is an old post, but I thought this may be of some help to the next person who stumbles along.\n\nAs long as you don&apos;t assign an object to anything it maintains no reference in memory.  So to make an object that you want to share among other objects, you&apos;ll have to create a factory like so:\n\nvar a = function(){\n    return {\n        father:&apos;zacharias&apos;\n    };\n},\nb = a(),\nc = a();\nc.father = &apos;johndoe&apos;;\nalert(b.father);\n\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"If you&apos;re using it, the Underscore.js library has a clone method.\nvar newObject = _.clone(oldObject);\n\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"Here&apos;s a version of ConroyP&apos;s answer above that works even if the constructor has required parameters:\n\n//If Object.create isn&apos;t already defined, we just do the simple shim,\n//without the second argument, since that&apos;s all we need here\nvar object_create = Object.create;\nif (typeof object_create !== &apos;function&apos;) {\n    object_create = function(o) {\n        function F() {}\n        F.prototype = o;\n        return new F();\n    };\n}\n\nfunction deepCopy(obj) {\n    if(obj == null || typeof(obj) !== &apos;object&apos;){\n        return obj;\n    }\n    //make sure the returned object has the same prototype as the original\n    var ret = object_create(obj.constructor.prototype);\n    for(var key in obj){\n        ret[key] = deepCopy(obj[key]);\n    }\n    return ret;\n}\n\n\nThis function is also available in my simpleoo library.\n\nEdit:\n\nHere&apos;s a more robust version (thanks to Justin McCandless this now supports cyclic references as well):\n\n/**\n * Deep copy an object (make copies of all its object properties, sub-properties, etc.)\n * An improved version of http://keithdevens.com/weblog/archive/2007/Jun/07/javascript.clone\n * that doesn&apos;t break if the constructor has required parameters\n * \n * It also borrows some code from http://stackoverflow.com/a/11621004/560114\n */ \nfunction deepCopy(src, /* INTERNAL */ _visited, _copiesVisited) {\n    if(src === null || typeof(src) !== &apos;object&apos;){\n        return src;\n    }\n\n    //Honor native/custom clone methods\n    if(typeof src.clone == &apos;function&apos;){\n        return src.clone(true);\n    }\n\n    //Special cases:\n    //Date\n    if(src instanceof Date){\n        return new Date(src.getTime());\n    }\n    //RegExp\n    if(src instanceof RegExp){\n        return new RegExp(src);\n    }\n    //DOM Element\n    if(src.nodeType &amp;&amp; typeof src.cloneNode == &apos;function&apos;){\n        return src.cloneNode(true);\n    }\n\n    // Initialize the visited objects arrays if needed.\n    // This is used to detect cyclic references.\n    if (_visited === undefined){\n        _visited = [];\n        _copiesVisited = [];\n    }\n\n    // Check if this object has already been visited\n    var i, len = _visited.length;\n    for (i = 0; i &lt; len; i++) {\n        // If so, get the copy we already made\n        if (src === _visited[i]) {\n            return _copiesVisited[i];\n        }\n    }\n\n    //Array\n    if (Object.prototype.toString.call(src) == &apos;[object Array]&apos;) {\n        //[].slice() by itself would soft clone\n        var ret = src.slice();\n\n        //add it to the visited array\n        _visited.push(src);\n        _copiesVisited.push(ret);\n\n        var i = ret.length;\n        while (i--) {\n            ret[i] = deepCopy(ret[i], _visited, _copiesVisited);\n        }\n        return ret;\n    }\n\n    //If we&apos;ve reached here, we have a regular object\n\n    //make sure the returned object has the same prototype as the original\n    var proto = (Object.getPrototypeOf ? Object.getPrototypeOf(src): src.__proto__);\n    if (!proto) {\n        proto = src.constructor.prototype; //this line would probably only be reached by very old browsers \n    }\n    var dest = object_create(proto);\n\n    //add this object to the visited array\n    _visited.push(src);\n    _copiesVisited.push(dest);\n\n    for (var key in src) {\n        //Note: this does NOT preserve ES5 property attributes like &apos;writable&apos;, &apos;enumerable&apos;, etc.\n        //For an example of how this could be modified to do so, see the singleMixin() function\n        dest[key] = deepCopy(src[key], _visited, _copiesVisited);\n    }\n    return dest;\n}\n\n//If Object.create isn&apos;t already defined, we just do the simple shim,\n//without the second argument, since that&apos;s all we need here\nvar object_create = Object.create;\nif (typeof object_create !== &apos;function&apos;) {\n    object_create = function(o) {\n        function F() {}\n        F.prototype = o;\n        return new F();\n    };\n}\n\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"The following creates two instances of the same object. I found it and am using it currently. It&apos;s simple and easy to use.\n\nvar objToCreate = JSON.parse(JSON.stringify(cloneThis));\n\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"Crockford suggests (and I prefer) using this function:\n\nfunction object(o) {\n    function F() {}\n    F.prototype = o;\n    return new F();\n}\n\nvar newObject = object(oldObject);\n\n\nIt&apos;s terse, works as expected and you don&apos;t need a library.\n\n\n\nEDIT:\n\nThis is a polyfill for Object.create, so you also can use this.\n\nvar newObject = Object.create(oldObject);\n\n\nNOTE:  If you use some of this, you may have problems with some iteration who use hasOwnProperty. Because, create create new empty object who inherits oldObject. But it is still useful and practical for cloning objects.\n\nFor exemple if  oldObject.a = 5;\n\nnewObject.a; // is 5\n\n\nbut:\n\noldObject.hasOwnProperty(a); // is true\nnewObject.hasOwnProperty(a); // is false\n\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"Lodash has a nice _.cloneDeep(value) method:\n\nvar objects = [{ &apos;a&apos;: 1 }, { &apos;b&apos;: 2 }];\n\nvar deep = _.cloneDeep(objects);\nconsole.log(deep[0] === objects[0]);\n// =&gt; false\n\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"function clone(obj)\n { var clone = {};\n   clone.prototype = obj.prototype;\n   for (property in obj) clone[property] = obj[property];\n   return clone;\n }\n\n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0},{"text":"Shallow copy one-liner (ECMAScript 5th edition):\nvar origin = { foo : {} };\nvar copy = Object.keys(origin).reduce(function(c,k){c[k]=origin[k];return c;},{});\n\nconsole.log(origin, copy);\nconsole.log(origin == copy); // false\nconsole.log(origin.foo == copy.foo); // true\n\nAnd shallow copy one-liner (ECMAScript 6th edition, 2015):\nvar origin = { foo : {} };\nvar copy = Object.assign({}, origin);\n\nconsole.log(origin, copy);\nconsole.log(origin == copy); // false\nconsole.log(origin.foo == copy.foo); // true\n\n    ","url":"/questions/[slug]#solution21","@type":"Answer","upvoteCount":0},{"text":"There seems to be no ideal deep clone operator yet for array-like objects.  As the code below illustrates, John Resig&apos;s jQuery cloner turns arrays with non-numeric properties into objects that are not arrays, and RegDwight&apos;s JSON cloner drops the non-numeric properties. The following tests illustrate these points on multiple browsers:\n\nfunction jQueryClone(obj) {\n   return jQuery.extend(true, {}, obj)\n}\n\nfunction JSONClone(obj) {\n   return JSON.parse(JSON.stringify(obj))\n}\n\nvar arrayLikeObj = [[1, &quot;a&quot;, &quot;b&quot;], [2, &quot;b&quot;, &quot;a&quot;]];\narrayLikeObj.names = [&quot;m&quot;, &quot;n&quot;, &quot;o&quot;];\nvar JSONCopy = JSONClone(arrayLikeObj);\nvar jQueryCopy = jQueryClone(arrayLikeObj);\n\nalert(&quot;Is arrayLikeObj an array instance?&quot; + (arrayLikeObj instanceof Array) +\n      &quot;\\nIs the jQueryClone an array instance? &quot; + (jQueryCopy instanceof Array) +\n      &quot;\\nWhat are the arrayLikeObj names? &quot; + arrayLikeObj.names +\n      &quot;\\nAnd what are the JSONClone names? &quot; + JSONCopy.names)\n\n    ","url":"/questions/[slug]#solution22","@type":"Answer","upvoteCount":0},{"text":"Just because I didn&apos;t see AngularJS mentioned and thought that people might want to know...\n\nangular.copy also provides a method of deep copying objects and arrays.\n    ","url":"/questions/[slug]#solution23","@type":"Answer","upvoteCount":0},{"text":"I have two good answers depending on whether your objective is to clone a &quot;plain old JavaScript object&quot; or not.\n\nLet&apos;s also assume that your intention is to create a complete clone with no prototype references back to the source object. If you&apos;re not interested in a complete clone, then you can use many of the Object.clone() routines provided in some of the other answers (Crockford&apos;s pattern).\n\nFor plain old JavaScript objects, a tried and true good way to clone an object in modern runtimes is quite simply:\n\nvar clone = JSON.parse(JSON.stringify(obj));\n\n\nNote that the source object must be a pure JSON object. This is to say, all of its nested properties must be scalars (like boolean, string, array, object, etc). Any functions or special objects like RegExp or Date will not be cloned.\n\nIs it efficient? Heck yes. We&apos;ve tried all kinds of cloning methods and this works best. I&apos;m sure some ninja could conjure up a faster method. But I suspect we&apos;re talking about marginal gains.\n\nThis approach is just simple and easy to implement. Wrap it into a convenience function and if you really need to squeeze out some gain, go for at a later time.\n\nNow, for non-plain JavaScript objects, there isn&apos;t a really simple answer.  In fact, there can&apos;t be because of the dynamic nature of JavaScript functions and inner object state. Deep cloning a JSON structure with functions inside requires you recreate those functions and their inner context. And JavaScript simply doesn&apos;t have a standardized way of doing that.\n\nThe correct way to do this, once again, is via a convenience method that you declare and reuse within your code. The convenience method can be endowed with some understanding of your own objects so you can make sure to properly recreate the graph within the new object.\n\nWe&apos;re written our own, but the best general approach I&apos;ve seen is covered here:\n\nhttp://davidwalsh.name/javascript-clone\n\nThis is the right idea. The author (David Walsh) has commented out the cloning of generalized functions. This is something you might choose to do, depending on your use case.\n\nThe main idea is that you need to special handle the instantiation of your functions (or prototypal classes, so to speak) on a per-type basis. Here, he&apos;s provided a few examples for RegExp and Date.\n\nNot only is this code brief, but it&apos;s also very readable. It&apos;s pretty easy to extend.\n\nIs this efficient? Heck yes. Given that the goal is to produce a true deep-copy clone, then you&apos;re going to have to walk the members of the source object graph. With this approach, you can tweak exactly which child members to treat and how to manually handle custom types.\n\nSo there you go. Two approaches. Both are efficient in my view.\n    ","url":"/questions/[slug]#solution24","@type":"Answer","upvoteCount":0},{"text":"I am late to answer this question, but I have an another way of cloning the object:\nfunction cloneObject(obj) {\n    if (obj === null || typeof(obj) !== &apos;object&apos;)\n        return obj;\n    var temp = obj.constructor(); // changed\n    for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            obj[&apos;isActiveClone&apos;] = null;\n            temp[key] = cloneObject(obj[key]);\n            delete obj[&apos;isActiveClone&apos;];\n        }\n    }\n    return temp;\n}\n\nvar b = cloneObject({&quot;a&quot;:1,&quot;b&quot;:2});   // calling\n\nwhich is much better and faster then:\nvar a = {&quot;a&quot;:1,&quot;b&quot;:2};\nvar b = JSON.parse(JSON.stringify(a));  \n\nand\nvar a = {&quot;a&quot;:1,&quot;b&quot;:2};\n\n// Deep copy\nvar newObject = jQuery.extend(true, {}, a);\n\nI have bench-marked the code and you can test the results here:\nand sharing the results:\n\nReferences: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty\n    ","url":"/questions/[slug]#solution25","@type":"Answer","upvoteCount":0},{"text":"This isn&apos;t generally the most efficient solution, but it does what I need. Simple test cases below...\n\nfunction clone(obj, clones) {\n    // Makes a deep copy of &apos;obj&apos;. Handles cyclic structures by\n    // tracking cloned obj&apos;s in the &apos;clones&apos; parameter. Functions \n    // are included, but not cloned. Functions members are cloned.\n    var new_obj,\n        already_cloned,\n        t = typeof obj,\n        i = 0,\n        l,\n        pair; \n\n    clones = clones || [];\n\n    if (obj === null) {\n        return obj;\n    }\n\n    if (t === &quot;object&quot; || t === &quot;function&quot;) {\n\n        // check to see if we&apos;ve already cloned obj\n        for (i = 0, l = clones.length; i &lt; l; i++) {\n            pair = clones[i];\n            if (pair[0] === obj) {\n                already_cloned = pair[1];\n                break;\n            }\n        }\n\n        if (already_cloned) {\n            return already_cloned; \n        } else {\n            if (t === &quot;object&quot;) { // create new object\n                new_obj = new obj.constructor();\n            } else { // Just use functions as is\n                new_obj = obj;\n            }\n\n            clones.push([obj, new_obj]); // keep track of objects we&apos;ve cloned\n\n            for (key in obj) { // clone object members\n                if (obj.hasOwnProperty(key)) {\n                    new_obj[key] = clone(obj[key], clones);\n                }\n            }\n        }\n    }\n    return new_obj || obj;\n}\n\n\nCyclic array test...\n\na = []\na.push(&quot;b&quot;, &quot;c&quot;, a)\naa = clone(a)\naa === a //=&gt; false\naa[2] === a //=&gt; false\naa[2] === a[2] //=&gt; false\naa[2] === aa //=&gt; true\n\n\nFunction test...\n\nf = new Function\nf.a = a\nff = clone(f)\nff === f //=&gt; true\nff.a === a //=&gt; false\n\n    ","url":"/questions/[slug]#solution26","@type":"Answer","upvoteCount":0},{"text":"Only when you can use ECMAScript 6 or transpilers.\nFeatures:\n\nWon&apos;t trigger getter/setter while copying.\nPreserves getter/setter.\nPreserves prototype informations.\nWorks with both object-literal and functional OO writing styles.\n\nCode:\nfunction clone(target, source){\n\n    for(let key in source){\n\n        // Use getOwnPropertyDescriptor instead of source[key] to prevent from trigering setter/getter.\n        let descriptor = Object.getOwnPropertyDescriptor(source, key);\n        if(descriptor.value instanceof String){\n            target[key] = new String(descriptor.value);\n        }\n        else if(descriptor.value instanceof Array){\n            target[key] = clone([], descriptor.value);\n        }\n        else if(descriptor.value instanceof Object){\n            let prototype = Reflect.getPrototypeOf(descriptor.value);\n            let cloneObject = clone({}, descriptor.value);\n            Reflect.setPrototypeOf(cloneObject, prototype);\n            target[key] = cloneObject;\n        }\n        else {\n            Object.defineProperty(target, key, descriptor);\n        }\n    }\n    let prototype = Reflect.getPrototypeOf(source);\n    Reflect.setPrototypeOf(target, prototype);\n    return target;\n}\n\n    ","url":"/questions/[slug]#solution27","@type":"Answer","upvoteCount":0},{"text":"For the people who want to use the JSON.parse(JSON.stringify(obj)) version, but without losing the Date objects, you can use the second argument of parse method to convert the strings back to Date:\n\n\nfunction clone(obj) {\n  var regExp = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/;\n  return JSON.parse(JSON.stringify(obj), function(k, v) {\n    if (typeof v === &apos;string&apos; &amp;&amp; regExp.test(v))\n      return new Date(v)\n    return v;\n  })\n}\n\n// usage:\nvar original = {\n a: [1, null, undefined, 0, {a:null}, new Date()],\n b: {\n   c(){ return 0 }\n }\n}\n\nvar cloned = clone(original)\n\nconsole.log(cloned)\n Run code snippetHide resultsExpand snippet\n\n\n    ","url":"/questions/[slug]#solution28","@type":"Answer","upvoteCount":0},{"text":"I disagree with the answer with the greatest votes here. A Recursive Deep Clone is much faster than the JSON.parse(JSON.stringify(obj)) approach mentioned. \n\n\nJsperf ranks it number one here: https://jsperf.com/deep-copy-vs-json-stringify-json-parse/5\nJsben from the answer above updated to show that a recursive deep clone beats all the others mentioned: http://jsben.ch/13YKQ\n\n\nAnd here&apos;s the function for quick reference:\n\nfunction cloneDeep (o) {\n  let newO\n  let i\n\n  if (typeof o !== &apos;object&apos;) return o\n\n  if (!o) return o\n\n  if (Object.prototype.toString.apply(o) === &apos;[object Array]&apos;) {\n    newO = []\n    for (i = 0; i &lt; o.length; i += 1) {\n      newO[i] = cloneDeep(o[i])\n    }\n    return newO\n  }\n\n  newO = {}\n  for (i in o) {\n    if (o.hasOwnProperty(i)) {\n      newO[i] = cloneDeep(o[i])\n    }\n  }\n  return newO\n}\n\n    ","url":"/questions/[slug]#solution29","@type":"Answer","upvoteCount":0},{"text":"Here is a comprehensive clone() method that can clone any JavaScript object. It handles almost all the cases:\n\nfunction clone(src, deep) {\n\n    var toString = Object.prototype.toString;\n    if (!src &amp;&amp; typeof src != &quot;object&quot;) {\n        // Any non-object (Boolean, String, Number), null, undefined, NaN\n        return src;\n    }\n\n    // Honor native/custom clone methods\n    if (src.clone &amp;&amp; toString.call(src.clone) == &quot;[object Function]&quot;) {\n        return src.clone(deep);\n    }\n\n    // DOM elements\n    if (src.nodeType &amp;&amp; toString.call(src.cloneNode) == &quot;[object Function]&quot;) {\n        return src.cloneNode(deep);\n    }\n\n    // Date\n    if (toString.call(src) == &quot;[object Date]&quot;) {\n        return new Date(src.getTime());\n    }\n\n    // RegExp\n    if (toString.call(src) == &quot;[object RegExp]&quot;) {\n        return new RegExp(src);\n    }\n\n    // Function\n    if (toString.call(src) == &quot;[object Function]&quot;) {\n\n        //Wrap in another method to make sure == is not true;\n        //Note: Huge performance issue due to closures, comment this :)\n        return (function(){\n            src.apply(this, arguments);\n        });\n    }\n\n    var ret, index;\n    //Array\n    if (toString.call(src) == &quot;[object Array]&quot;) {\n        //[].slice(0) would soft clone\n        ret = src.slice();\n        if (deep) {\n            index = ret.length;\n            while (index--) {\n                ret[index] = clone(ret[index], true);\n            }\n        }\n    }\n    //Object\n    else {\n        ret = src.constructor ? new src.constructor() : {};\n        for (var prop in src) {\n            ret[prop] = deep\n                ? clone(src[prop], true)\n                : src[prop];\n        }\n    }\n    return ret;\n};\n\n    ","url":"/questions/[slug]#solution30","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-b06815e21c943e0d.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-79a1437acf654019.js" defer=""></script><script src="/_next/static/Zo3C7AOWQzKM9qqyzx2hf/_buildManifest.js" defer=""></script><script src="/_next/static/Zo3C7AOWQzKM9qqyzx2hf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript-1657384601026#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript-1657384601026"><h1>What is the most efficient way to deep clone an object in JavaScript?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                    <div>
            <aside class="s-notice s-notice__info post-notice js-post-notice mb16" role="status">
        <div class="d-flex fd-column fw-nowrap">
            <div class="d-flex fw-nowrap">
                    <div class="flex--item mr8">
                        <svg aria-hidden="true" class="svg-icon iconLock" width="18" height="18" viewBox="0 0 18 18"><path d="M16 9a2 2 0 0 0-2-2V6A5 5 0 0 0 4 6v1a2 2 0 0 0-2 2v6c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9Zm-7 5a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm3.1-7H5.9V6a3.1 3.1 0 0 1 6.2 0v1Z"></path></svg>
                    </div>
                <div class="flex--item wmn0 fl1 lh-lg">
                    <div class="flex--item fl1 lh-lg">
                        <b>This question's answers are a <a href="/help/privileges/edit-community-wiki">community effort</a></b>. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.
                        
                    </div>
                </div>
            </div>
        </div>
</aside>

    </div>

<p>What is the most efficient way to clone a JavaScript object? I've seen <code>obj = eval(uneval(o));</code> being used, but <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/uneval" rel="noreferrer">that's non-standard and only supported by Firefox</a>.<br><br> I've done things like <code>obj = JSON.parse(JSON.stringify(o));</code> but question the efficiency. <br><br> I've also seen recursive copying functions with various flaws.
<br>
I'm surprised no canonical solution exists.</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li><li class="pagination-solution-item"><span data-id="#solution21" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">21</span></li><li class="pagination-solution-item"><span data-id="#solution22" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">22</span></li><li class="pagination-solution-item"><span data-id="#solution23" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">23</span></li><li class="pagination-solution-item"><span data-id="#solution24" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">24</span></li><li class="pagination-solution-item"><span data-id="#solution25" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">25</span></li><li class="pagination-solution-item"><span data-id="#solution26" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">26</span></li><li class="pagination-solution-item"><span data-id="#solution27" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">27</span></li><li class="pagination-solution-item"><span data-id="#solution28" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">28</span></li><li class="pagination-solution-item"><span data-id="#solution29" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">29</span></li><li class="pagination-solution-item"><span data-id="#solution30" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">30</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Native deep cloning</h1>
<p>There's now a JS standard called <a href="https://developer.mozilla.org/en-US/docs/Web/API/structuredClone" rel="noreferrer">"structured cloning"</a>, that works experimentally in Node 11 and later, will land in browsers, and which has <a href="https://www.npmjs.com/package/@ungap/structured-clone" rel="noreferrer">polyfills for existing systems</a>.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title function_">structuredClone</span>(value)
</code></pre>
<p>If needed, loading the polyfill first:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">import</span> structuredClone <span class="hljs-keyword">from</span> <span class="hljs-string">'@ungap/structured-clone'</span>;
</code></pre>
<p>See <a href="https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript/10916838#10916838">this answer</a> for more details.</p>
<h1>Older answers</h1>
<h2>Fast cloning with data loss - JSON.parse/stringify</h2>
<p>If you do not use <code>Date</code>s, functions, <code>undefined</code>, <code>Infinity</code>, RegExps, Maps, Sets, Blobs, FileLists, ImageDatas, sparse Arrays, Typed Arrays or other complex types within your object, a very simple one liner to deep clone an object is:</p>
<p><code>JSON.parse(JSON.stringify(object))</code></p>
<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> a = {
  <span class="hljs-attr">string</span>: <span class="hljs-string">'string'</span>,
  <span class="hljs-attr">number</span>: <span class="hljs-number">123</span>,
  <span class="hljs-attr">bool</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">nul</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),  <span class="hljs-comment">// stringified</span>
  <span class="hljs-attr">undef</span>: <span class="hljs-literal">undefined</span>,  <span class="hljs-comment">// lost</span>
  <span class="hljs-attr">inf</span>: <span class="hljs-title class_">Infinity</span>,  <span class="hljs-comment">// forced to 'null'</span>
  <span class="hljs-attr">re</span>: <span class="hljs-regexp">/.*/</span>,  <span class="hljs-comment">// lost</span>
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> a.<span class="hljs-property">date</span>);  <span class="hljs-comment">// Date object</span>
<span class="hljs-keyword">const</span> clone = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(a));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(clone);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> clone.<span class="hljs-property">date</span>);  <span class="hljs-comment">// result of .toISOString()</span></code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif1" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
<p>See <a href="https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript/5344074#5344074">Corban's answer</a> for benchmarks.</p>
<h2>Reliable cloning using a library</h2>
<p>Since cloning objects is not trivial (complex types, circular references, function etc.), most major libraries provide function to clone objects. <strong>Don't reinvent the wheel</strong> - if you're already using a library, check if it has an object cloning function. For example,</p>
<ul>
<li>lodash - <a href="https://lodash.com/docs#cloneDeep" rel="noreferrer"><code>cloneDeep</code></a>; can be imported separately via the <a href="https://www.npmjs.com/package/lodash.clonedeep" rel="noreferrer">lodash.clonedeep</a> module and is probably your best choice if you're not already using a library that provides a deep cloning function</li>
<li>AngularJS - <a href="https://docs.angularjs.org/api/ng/function/angular.copy" rel="noreferrer"><code>angular.copy</code></a></li>
<li>jQuery - <a href="https://api.jquery.com/jquery.extend/#jQuery-extend-deep-target-object1-objectN" rel="noreferrer"><code>jQuery.extend(true, { }, oldObject)</code></a>; <code>.clone()</code> only clones DOM elements</li>
<li>just library - <a href="https://www.npmjs.com/package/just-clone" rel="noreferrer"><code>just-clone</code></a>; Part of a library of zero-dependency npm modules that do just do one thing.
Guilt-free utilities for every occasion.</li>
</ul>
<h2>ES6 (<em>shallow</em> copy)</h2>
<p>For completeness, note that ES6 offers two shallow copy mechanisms: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" rel="noreferrer"><code>Object.assign()</code></a> and the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" rel="noreferrer">spread syntax</a>.
which copies values of all enumerable own properties from one object to another. For example:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> <span class="hljs-variable constant_">A1</span> = {<span class="hljs-attr">a</span>: <span class="hljs-string">"2"</span>};
<span class="hljs-keyword">var</span> <span class="hljs-variable constant_">A2</span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, <span class="hljs-variable constant_">A1</span>);
<span class="hljs-keyword">var</span> <span class="hljs-variable constant_">A3</span> = {...<span class="hljs-variable constant_">A1</span>};  <span class="hljs-comment">// Spread Syntax</span>
</code></pre>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Checkout this benchmark: <a href="http://jsben.ch/#/bWfk9" rel="noreferrer">http://jsben.ch/#/bWfk9</a></p>

<p>In my previous tests where speed was a main concern I found </p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj))
</code></pre>

<p>to be the slowest way to deep clone an object (it is slower than <a href="https://api.jquery.com/jQuery.extend/" rel="noreferrer">jQuery.extend</a> with <code>deep</code> flag set true by 10-20%).</p>

<p>jQuery.extend is pretty fast when the <code>deep</code> flag is set to <code>false</code> (shallow clone). It is a good option, because it includes some extra logic for type validation and doesn't copy over undefined properties, etc., but this will also slow you down a little.</p>

<p>If you know the structure of the objects you are trying to clone or can avoid deep nested arrays you can write a simple <code>for (var i in obj)</code> loop to clone your object while checking hasOwnProperty and it will be much much faster than jQuery.</p>

<p>Lastly if you are attempting to clone a known object structure in a hot loop you can get MUCH MUCH MORE PERFORMANCE by simply in-lining the clone procedure and manually constructing the object.</p>

<p>JavaScript trace engines suck at optimizing <code>for..in</code> loops and checking hasOwnProperty will slow you down as well. Manual clone when speed is an absolute must.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> clonedObject = {
  <span class="hljs-attr">knownProp</span>: obj.<span class="hljs-property">knownProp</span>,
  ..
}
</code></pre>

<p>Beware using the <code>JSON.parse(JSON.stringify(obj))</code> method on <code>Date</code> objects - <code>JSON.stringify(new Date())</code> returns a string representation of the date in ISO format, which <code>JSON.parse()</code> <strong>doesn't</strong> convert back to a <code>Date</code> object. <a href="https://stackoverflow.com/questions/11491938/issues-with-date-when-using-json-stringify-and-json-parse/11491993#11491993">See this answer for more details</a>.</p>

<p>Additionally, please note that, in Chrome 65 at least, native cloning is not the way to go. According to JSPerf, performing native cloning by creating a new function is nearly <strong>800x</strong> slower than using JSON.stringify which is incredibly fast all the way across the board.</p>

<p><strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" rel="noreferrer">Update for ES6</a></strong></p>

<p>If you are using Javascript ES6 try this native method for cloning or shallow copy.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, obj);
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Structured Cloning</h1>
<p><strong>2022 update:</strong> The <a href="https://developer.mozilla.org/en-US/docs/Web/API/structuredClone" rel="noreferrer"><code>structuredClone</code> global function</a> is already available in Firefox 94, Node 17 and Deno 1.14</p>
<p>The HTML standard includes <a href="https://html.spec.whatwg.org/multipage/structured-data.html#safe-passing-of-structured-data" rel="noreferrer"><strong>an internal structured cloning/serialization algorithm</strong></a> that can create deep clones of objects. It is still limited to certain built-in types, but in addition to the few types supported by JSON it also supports Dates, RegExps, Maps, Sets, Blobs, FileLists, ImageDatas, sparse Arrays, Typed Arrays, and probably more in the future. It also preserves references within the cloned data, allowing it to support cyclical and recursive structures that would cause errors for JSON.</p>
<h2>Support in Node.js:</h2>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/structuredClone" rel="noreferrer"><code>structuredClone</code> global function</a> is provided by Node 17.0:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> clone = <span class="hljs-title function_">structuredClone</span>(original);
</code></pre>
<p>Previous versions: The <code>v8</code> module in Node.js (as of Node 11) <a href="https://nodejs.org/api/all.html#v8_serialization_api" rel="noreferrer">exposes the structured serialization API directly</a>, but this functionality is still marked as "experimental", and subject to change or removal in future versions. If you're using a compatible version, cloning an object is as simple as:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> v8 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'v8'</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">structuredClone</span> = obj =&gt; {
  <span class="hljs-keyword">return</span> v8.<span class="hljs-title function_">deserialize</span>(v8.<span class="hljs-title function_">serialize</span>(obj));
};
</code></pre>
<h2>Direct Support in Browsers: Available in Firefox 94</h2>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/structuredClone" rel="noreferrer"><code>structuredClone</code> global function</a> will soon be provided by all major browsers (having previously been discussed in <a href="https://github.com/whatwg/html/issues/793" rel="noreferrer">whatwg/html#793 on GitHub</a>). It looks / will look like this:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> clone = <span class="hljs-title function_">structuredClone</span>(original);
</code></pre>
<p>Until this is shipped, browsers' structured clone implementations are only exposed indirectly.</p>
<h2>Asynchronous Workaround: Usable. </h2>
<p>The lower-overhead way to create a structured clone with existing APIs is to post the data through one port of a <a href="https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel" rel="noreferrer">MessageChannels</a>. The other port will emit a <code>message</code> event with a structured clone of the attached <code>.data</code>. Unfortunately, listening for these events is necessarily asynchronous, and the synchronous alternatives are less practical.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StructuredCloner</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingClones_</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">nextKey_</span> = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">inPort_</span> = channel.<span class="hljs-property">port1</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">outPort_</span> = channel.<span class="hljs-property">port2</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">outPort_</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">{data: {key, value}}</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> resolve = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingClones_</span>.<span class="hljs-title function_">get</span>(key);
      <span class="hljs-title function_">resolve</span>(value);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingClones_</span>.<span class="hljs-title function_">delete</span>(key);
    };
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">outPort_</span>.<span class="hljs-title function_">start</span>();
  }

  <span class="hljs-title function_">cloneAsync</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> key = <span class="hljs-variable language_">this</span>.<span class="hljs-property">nextKey_</span>++;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingClones_</span>.<span class="hljs-title function_">set</span>(key, resolve);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">inPort_</span>.<span class="hljs-title function_">postMessage</span>({key, value});
    });
  }
}

<span class="hljs-keyword">const</span> structuredCloneAsync = <span class="hljs-variable language_">window</span>.<span class="hljs-property">structuredCloneAsync</span> =
    <span class="hljs-title class_">StructuredCloner</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">cloneAsync</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StructuredCloner</span>);
</code></pre>
<h3>Example Use:</h3>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> original = { <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(), <span class="hljs-attr">number</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() };
  original.<span class="hljs-property">self</span> = original;

  <span class="hljs-keyword">const</span> clone = <span class="hljs-keyword">await</span> <span class="hljs-title function_">structuredCloneAsync</span>(original);

  <span class="hljs-comment">// They're different objects:</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original !== clone);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original.<span class="hljs-property">date</span> !== clone.<span class="hljs-property">date</span>);

  <span class="hljs-comment">// They're cyclical:</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original.<span class="hljs-property">self</span> === original);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(clone.<span class="hljs-property">self</span> === clone);

  <span class="hljs-comment">// They contain equivalent values:</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original.<span class="hljs-property">number</span> === clone.<span class="hljs-property">number</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title class_">Number</span>(original.<span class="hljs-property">date</span>) === <span class="hljs-title class_">Number</span>(clone.<span class="hljs-property">date</span>));
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Assertions complete."</span>);
};

<span class="hljs-title function_">main</span>();
</code></pre>
<h2>Synchronous Workarounds: Awful! </h2>
<p>There are no good options for creating structured clones synchronously. Here are a couple of impractical hacks instead.</p>
<p><code>history.pushState()</code> and <code>history.replaceState()</code> both create a structured clone of their first argument, and assign that value to <code>history.state</code>. You can use this to create a structured clone of any object like this:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">structuredClone</span> = obj =&gt; {
  <span class="hljs-keyword">const</span> oldState = history.<span class="hljs-property">state</span>;
  history.<span class="hljs-title function_">replaceState</span>(obj, <span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> clonedObj = history.<span class="hljs-property">state</span>;
  history.<span class="hljs-title function_">replaceState</span>(oldState, <span class="hljs-literal">null</span>);
  <span class="hljs-keyword">return</span> clonedObj;
};
</code></pre>
<h3>Example Use:</h3>
<p></p><div class="snippet" data-lang="js" data-hide="true" data-console="false" data-babel="false"><div class="snippet-display" style="vertical-align: center"><p><a class="snippet-show-link-chevron"><span class="expander-arrow-hide" style="vertical-align: middle;"></span></a><a class="snippet-show-link"><span class="show-hide" data-ishidden="true" style="vertical-align: middle">Show code snippet</span></a></p></div>
<div class="snippet-code snippet-currently-hidden" style="display: none;">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> original = { <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(), <span class="hljs-attr">number</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() };
  original.<span class="hljs-property">self</span> = original;

  <span class="hljs-keyword">const</span> clone = <span class="hljs-title function_">structuredClone</span>(original);
  
  <span class="hljs-comment">// They're different objects:</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original !== clone);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original.<span class="hljs-property">date</span> !== clone.<span class="hljs-property">date</span>);

  <span class="hljs-comment">// They're cyclical:</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original.<span class="hljs-property">self</span> === original);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(clone.<span class="hljs-property">self</span> === clone);

  <span class="hljs-comment">// They contain equivalent values:</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original.<span class="hljs-property">number</span> === clone.<span class="hljs-property">number</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title class_">Number</span>(original.<span class="hljs-property">date</span>) === <span class="hljs-title class_">Number</span>(clone.<span class="hljs-property">date</span>));
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Assertions complete."</span>);
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">structuredClone</span> = obj =&gt; {
  <span class="hljs-keyword">const</span> oldState = history.<span class="hljs-property">state</span>;
  history.<span class="hljs-title function_">replaceState</span>(obj, <span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> clonedObj = history.<span class="hljs-property">state</span>;
  history.<span class="hljs-title function_">replaceState</span>(oldState, <span class="hljs-literal">null</span>);
  <span class="hljs-keyword">return</span> clonedObj;
};

<span class="hljs-title function_">main</span>();</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif2" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
<p>Though synchronous, this can be extremely slow. It incurs all of the overhead associated with manipulating the browser history. Calling this method repeatedly can cause Chrome to become temporarily unresponsive.</p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Notification/Notification" rel="noreferrer"><code>Notification</code> constructor</a> creates a structured clone of its associated data. It also attempts to display a browser notification to the user, but this will silently fail unless you have requested notification permission. In case you have the permission for other purposes, we'll immediately close the notification we've created.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">structuredClone</span> = obj =&gt; {
  <span class="hljs-keyword">const</span> n = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Notification</span>(<span class="hljs-string">''</span>, {<span class="hljs-attr">data</span>: obj, <span class="hljs-attr">silent</span>: <span class="hljs-literal">true</span>});
  n.<span class="hljs-property">onshow</span> = n.<span class="hljs-property">close</span>.<span class="hljs-title function_">bind</span>(n);
  <span class="hljs-keyword">return</span> n.<span class="hljs-property">data</span>;
};
</code></pre>
<h3>Example Use:</h3>
<p></p><div class="snippet" data-lang="js" data-hide="true" data-console="false" data-babel="false"><div class="snippet-display" style="vertical-align: center"><p><a class="snippet-show-link-chevron"><span class="expander-arrow-hide" style="vertical-align: middle;"></span></a><a class="snippet-show-link"><span class="show-hide" data-ishidden="true" style="vertical-align: middle">Show code snippet</span></a></p></div>
<div class="snippet-code snippet-currently-hidden" style="display: none;">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> original = { <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(), <span class="hljs-attr">number</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() };
  original.<span class="hljs-property">self</span> = original;

  <span class="hljs-keyword">const</span> clone = <span class="hljs-title function_">structuredClone</span>(original);
  
  <span class="hljs-comment">// They're different objects:</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original !== clone);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original.<span class="hljs-property">date</span> !== clone.<span class="hljs-property">date</span>);

  <span class="hljs-comment">// They're cyclical:</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original.<span class="hljs-property">self</span> === original);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(clone.<span class="hljs-property">self</span> === clone);

  <span class="hljs-comment">// They contain equivalent values:</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(original.<span class="hljs-property">number</span> === clone.<span class="hljs-property">number</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">assert</span>(<span class="hljs-title class_">Number</span>(original.<span class="hljs-property">date</span>) === <span class="hljs-title class_">Number</span>(clone.<span class="hljs-property">date</span>));
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Assertions complete."</span>);
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">structuredClone</span> = obj =&gt; {
  <span class="hljs-keyword">const</span> n = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Notification</span>(<span class="hljs-string">''</span>, {<span class="hljs-attr">data</span>: obj, <span class="hljs-attr">silent</span>: <span class="hljs-literal">true</span>});
  n.<span class="hljs-title function_">close</span>();
  <span class="hljs-keyword">return</span> n.<span class="hljs-property">data</span>;
};

<span class="hljs-title function_">main</span>();</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif3" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Assuming that you have only properties and not any functions in your object, you can  just use:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> newObject = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(oldObject));
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If there wasn't any builtin one, you could try:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> (obj) !== <span class="hljs-string">'object'</span> || <span class="hljs-string">'isActiveClone'</span> <span class="hljs-keyword">in</span> obj)
        <span class="hljs-keyword">return</span> obj;

    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>)
        <span class="hljs-keyword">var</span> temp = <span class="hljs-keyword">new</span> obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>); <span class="hljs-comment">//or new Date(obj);</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">var</span> temp = obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(obj, key)) {
            obj[<span class="hljs-string">'isActiveClone'</span>] = <span class="hljs-literal">null</span>;
            temp[key] = <span class="hljs-title function_">clone</span>(obj[key]);
            <span class="hljs-keyword">delete</span> obj[<span class="hljs-string">'isActiveClone'</span>];
        }
    }
    <span class="hljs-keyword">return</span> temp;
}
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>The efficient way to clone(not deep-clone) an object in one line of code</h1>
<p>An <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" rel="noreferrer"><code>Object.assign</code></a> method is part of the ECMAScript 2015 (ES6) standard and does exactly what you need.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> clone = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, obj);
</code></pre>
<blockquote>
<p>The Object.assign() method is used to copy the values of all enumerable own properties from one or more source objects to a target object.</p>
</blockquote>
<p><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" rel="noreferrer">Read more...</a></p>
<p>The <strong>polyfill</strong> to support older browsers:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Object</span>.<span class="hljs-property">assign</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-title class_">Object</span>, <span class="hljs-string">'assign'</span>, {
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">target</span>) {
      <span class="hljs-string">'use strict'</span>;
      <span class="hljs-keyword">if</span> (target === <span class="hljs-literal">undefined</span> || target === <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Cannot convert first argument to object'</span>);
      }

      <span class="hljs-keyword">var</span> to = <span class="hljs-title class_">Object</span>(target);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">var</span> nextSource = <span class="hljs-variable language_">arguments</span>[i];
        <span class="hljs-keyword">if</span> (nextSource === <span class="hljs-literal">undefined</span> || nextSource === <span class="hljs-literal">null</span>) {
          <span class="hljs-keyword">continue</span>;
        }
        nextSource = <span class="hljs-title class_">Object</span>(nextSource);

        <span class="hljs-keyword">var</span> keysArray = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(nextSource);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> nextIndex = <span class="hljs-number">0</span>, len = keysArray.<span class="hljs-property">length</span>; nextIndex &lt; len; nextIndex++) {
          <span class="hljs-keyword">var</span> nextKey = keysArray[nextIndex];
          <span class="hljs-keyword">var</span> desc = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(nextSource, nextKey);
          <span class="hljs-keyword">if</span> (desc !== <span class="hljs-literal">undefined</span> &amp;&amp; desc.<span class="hljs-property">enumerable</span>) {
            to[nextKey] = nextSource[nextKey];
          }
        }
      }
      <span class="hljs-keyword">return</span> to;
    }
  });
}
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Deep copy by performance:</strong>
Ranked from best to worst</p>
<ul>
<li>spread operator <code>...</code> (primitive arrays - only)</li>
<li><code>splice(0)</code> (primitive arrays - only)</li>
<li><code>slice()</code> (primitive arrays - only)</li>
<li><code>concat()</code> (primitive arrays - only)</li>
<li>custom function, as seen below (any array)</li>
<li>jQuery's <code>$.extend()</code> (any array)</li>
<li><code>JSON.parse(JSON.stringify())</code> (primitive and literal arrays - only)</li>
<li>Underscore's <code>_.clone()</code> (primitive and literal arrays - only)</li>
<li>Lodash's <code>_.cloneDeep()</code> (any array)</li>
</ul>
<p>Where:</p>
<ul>
<li>primitives = strings, numbers, and booleans</li>
<li>literals = object literals <code>{}</code>, array literals <code>[]</code></li>
<li>any = primitives, literals, and prototypes</li>
</ul>
<p><strong>Deep copy an array of primitives:</strong></p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> arr1a = [<span class="hljs-number">1</span>, <span class="hljs-string">'a'</span>, <span class="hljs-literal">true</span>];
</code></pre>
<p>To deep copy arrays with primitives only (i.e. numbers, strings, and booleans), reassignment, <code>slice()</code>, <code>concat()</code>, and Underscore's <code>clone()</code> can be used.</p>
<p>Where spread has the fastest performance:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> arr1b = [...arr1a];
</code></pre>
<p>And where <code>slice()</code> has better performance than <code>concat()</code>: <a href="https://jsbench.me/x5ktn7o94d/" rel="noreferrer">https://jsbench.me/x5ktn7o94d/</a></p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> arr1c = arr1a.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">let</span> arr1d = arr1a.<span class="hljs-title function_">slice</span>();
<span class="hljs-keyword">let</span> arr1e = arr1a.<span class="hljs-title function_">concat</span>();
</code></pre>
<p><strong>Deep copy an array of primitive and object literals:</strong></p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> arr2a = [<span class="hljs-number">1</span>, <span class="hljs-string">'a'</span>, <span class="hljs-literal">true</span>, {}, []];
<span class="hljs-keyword">let</span> arr2b = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(arr2a));
</code></pre>
<p><strong>Deep copy an array of primitive, object literals, and prototypes:</strong></p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> arr3a = [<span class="hljs-number">1</span>, <span class="hljs-string">'a'</span>, <span class="hljs-literal">true</span>, {}, [], <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>()];
</code></pre>
<p>Write a custom function (has faster performance than <code>$.extend()</code> or <code>JSON.parse</code>):</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">copy</span>(<span class="hljs-params">aObject</span>) {
  <span class="hljs-comment">// Prevent undefined objects</span>
  <span class="hljs-comment">// if (!aObject) return aObject;</span>

  <span class="hljs-keyword">let</span> bObject = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(aObject) ? [] : {};

  <span class="hljs-keyword">let</span> value;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> aObject) {

    <span class="hljs-comment">// Prevent self-references to parent object</span>
    <span class="hljs-comment">// if (Object.is(aObject[key], aObject)) continue;</span>
    
    value = aObject[key];

    bObject[key] = (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span>) ? <span class="hljs-title function_">copy</span>(value) : value;
  }

  <span class="hljs-keyword">return</span> bObject;
}

<span class="hljs-keyword">let</span> arr3b = <span class="hljs-title function_">copy</span>(arr3a);
</code></pre>
<p>Or use third-party utility functions:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">let</span> arr3c = $.<span class="hljs-title function_">extend</span>(<span class="hljs-literal">true</span>, [], arr3a); <span class="hljs-comment">// jQuery Extend</span>
<span class="hljs-keyword">let</span> arr3d = _.<span class="hljs-title function_">cloneDeep</span>(arr3a); <span class="hljs-comment">// Lodash</span>
</code></pre>
<p>Note: jQuery's <code>$.extend</code> also has better performance than <code>JSON.parse(JSON.stringify())</code>:</p>
<ul>
<li><a href="https://jsbench.me/5kktn8f3ss" rel="noreferrer">js-deep-copy</a></li>
<li><a href="https://jsbench.me/imktn8ppco" rel="noreferrer">jquery-extend-vs-json-parse</a></li>
</ul>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is what I'm using:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">cloneObject</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">var</span> clone = {};
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> obj) {
        <span class="hljs-keyword">if</span>(<span class="hljs-title function_">typeof</span>(obj[i])==<span class="hljs-string">"object"</span> &amp;&amp; obj[i] != <span class="hljs-literal">null</span>)
            clone[i] = <span class="hljs-title function_">cloneObject</span>(obj[i]);
        <span class="hljs-keyword">else</span>
            clone[i] = obj[i];
    }
    <span class="hljs-keyword">return</span> clone;
}
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Code:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">// extends 'from' object with members from 'to'. If 'to' is null, a deep clone of 'from' is returned</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">extend</span>(<span class="hljs-params"><span class="hljs-keyword">from</span>, to</span>)
{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">from</span> == <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">from</span> != <span class="hljs-string">"object"</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">from</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">from</span>.<span class="hljs-property">constructor</span> != <span class="hljs-title class_">Object</span> &amp;&amp; <span class="hljs-keyword">from</span>.<span class="hljs-property">constructor</span> != <span class="hljs-title class_">Array</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">from</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">from</span>.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">Date</span> || <span class="hljs-keyword">from</span>.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">RegExp</span> || <span class="hljs-keyword">from</span>.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">Function</span> ||
        <span class="hljs-keyword">from</span>.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">String</span> || <span class="hljs-keyword">from</span>.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">Number</span> || <span class="hljs-keyword">from</span>.<span class="hljs-property">constructor</span> == <span class="hljs-title class_">Boolean</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">from</span>.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">from</span></span>);

    to = to || <span class="hljs-keyword">new</span> <span class="hljs-keyword">from</span>.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> <span class="hljs-keyword">from</span>)
    {
        to[name] = <span class="hljs-keyword">typeof</span> to[name] == <span class="hljs-string">"undefined"</span> ? <span class="hljs-title function_">extend</span>(<span class="hljs-keyword">from</span>[name], <span class="hljs-literal">null</span>) : to[name];
    }

    <span class="hljs-keyword">return</span> to;
}
</code></pre>

<p>Test:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj =
{
    <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
    <span class="hljs-attr">func</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">q</span>) { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + q; },
    <span class="hljs-attr">num</span>: <span class="hljs-number">123</span>,
    <span class="hljs-attr">text</span>: <span class="hljs-string">"asdasd"</span>,
    <span class="hljs-attr">array</span>: [<span class="hljs-number">1</span>, <span class="hljs-string">"asd"</span>],
    <span class="hljs-attr">regex</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-regexp">/aaa/i</span>),
    <span class="hljs-attr">subobj</span>:
    {
        <span class="hljs-attr">num</span>: <span class="hljs-number">234</span>,
        <span class="hljs-attr">text</span>: <span class="hljs-string">"asdsaD"</span>
    }
}

<span class="hljs-keyword">var</span> clone = <span class="hljs-title function_">extend</span>(obj);
</code></pre>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Deep copying objects in JavaScript (I think the best and the simplest)</strong></p>

<p><strong>1. Using JSON.parse(JSON.stringify(object));</strong></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj = { 
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">b</span>: { 
    <span class="hljs-attr">c</span>: <span class="hljs-number">2</span>
  }
}
<span class="hljs-keyword">var</span> newObj = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj));
obj.<span class="hljs-property">b</span>.<span class="hljs-property">c</span> = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj); <span class="hljs-comment">// { a: 1, b: { c: 20 } }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj); <span class="hljs-comment">// { a: 1, b: { c: 2 } } </span>
</code></pre>

<p><strong>2.Using created method</strong></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">cloneObject</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">var</span> clone = {};
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> obj) {
        <span class="hljs-keyword">if</span>(obj[i] != <span class="hljs-literal">null</span> &amp;&amp;  <span class="hljs-title function_">typeof</span>(obj[i])==<span class="hljs-string">"object"</span>)
            clone[i] = <span class="hljs-title function_">cloneObject</span>(obj[i]);
        <span class="hljs-keyword">else</span>
            clone[i] = obj[i];
    }
    <span class="hljs-keyword">return</span> clone;
}

<span class="hljs-keyword">var</span> obj = { 
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">b</span>: { 
    <span class="hljs-attr">c</span>: <span class="hljs-number">2</span>
  }
}
<span class="hljs-keyword">var</span> newObj = <span class="hljs-title function_">cloneObject</span>(obj);
obj.<span class="hljs-property">b</span>.<span class="hljs-property">c</span> = <span class="hljs-number">20</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj); <span class="hljs-comment">// { a: 1, b: { c: 20 } }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj); <span class="hljs-comment">// { a: 1, b: { c: 2 } } </span>
</code></pre>

<p><strong>3. Using Lo-Dash's _.cloneDeep</strong> link <a href="https://lodash.com/docs/4.17.10#cloneDeep" rel="noreferrer">lodash</a></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj = { 
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">b</span>: { 
    <span class="hljs-attr">c</span>: <span class="hljs-number">2</span>
  }
}

<span class="hljs-keyword">var</span> newObj = _.<span class="hljs-title function_">cloneDeep</span>(obj);
obj.<span class="hljs-property">b</span>.<span class="hljs-property">c</span> = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj); <span class="hljs-comment">// { a: 1, b: { c: 20 } }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj); <span class="hljs-comment">// { a: 1, b: { c: 2 } } </span>
</code></pre>

<p><strong>4. Using Object.assign() method</strong></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj = { 
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>
}

<span class="hljs-keyword">var</span> newObj = _.<span class="hljs-title function_">clone</span>(obj);
obj.<span class="hljs-property">b</span> = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj); <span class="hljs-comment">// { a: 1, b: 20 }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj); <span class="hljs-comment">// { a: 1, b: 2 }  </span>
</code></pre>

<p><strong>BUT WRONG WHEN</strong></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj = { 
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">b</span>: { 
    <span class="hljs-attr">c</span>: <span class="hljs-number">2</span>
  }
}

<span class="hljs-keyword">var</span> newObj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, obj);
obj.<span class="hljs-property">b</span>.<span class="hljs-property">c</span> = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj); <span class="hljs-comment">// { a: 1, b: { c: 20 } }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj); <span class="hljs-comment">// { a: 1, b: { c: 20 } } --&gt; WRONG</span>
<span class="hljs-comment">// Note: Properties on the prototype chain and non-enumerable properties cannot be copied.</span>
</code></pre>

<p><strong>5.Using Underscore.js _.clone</strong> link <a href="https://underscorejs.org/#clone" rel="noreferrer">Underscore.js</a></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj = { 
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>
}

<span class="hljs-keyword">var</span> newObj = _.<span class="hljs-title function_">clone</span>(obj);
obj.<span class="hljs-property">b</span> = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj); <span class="hljs-comment">// { a: 1, b: 20 }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj); <span class="hljs-comment">// { a: 1, b: 2 }  </span>
</code></pre>

<p><strong>BUT WRONG WHEN</strong></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj = { 
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">b</span>: { 
    <span class="hljs-attr">c</span>: <span class="hljs-number">2</span>
  }
}

<span class="hljs-keyword">var</span> newObj = _.<span class="hljs-title function_">cloneDeep</span>(obj);
obj.<span class="hljs-property">b</span>.<span class="hljs-property">c</span> = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj); <span class="hljs-comment">// { a: 1, b: { c: 20 } }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj); <span class="hljs-comment">// { a: 1, b: { c: 20 } } --&gt; WRONG</span>
<span class="hljs-comment">// (Create a shallow-copied clone of the provided plain object. Any nested objects or arrays will be copied by reference, not duplicated.)</span>
</code></pre>

<p><strong>JSBEN.CH Performance Benchmarking Playground 1~3 <a href="http://jsben.ch/KVQLd" rel="noreferrer">http://jsben.ch/KVQLd</a></strong>
<a href="https://i.stack.imgur.com/Assgk.png" rel="noreferrer"><img src="https://i.stack.imgur.com/Assgk.png" alt="Performance Deep copying objects in JavaScript"></a></p>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Cloning an object was always a concern in JS, but it was all about before ES6, I list different ways of copying an object in JavaScript below, imagine you have the Object below and would like to have a deep copy of that:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj = {<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">b</span>:<span class="hljs-number">2</span>, <span class="hljs-attr">c</span>:<span class="hljs-number">3</span>, <span class="hljs-attr">d</span>:<span class="hljs-number">4</span>};
</code></pre>
<p>There are few ways to copy this object, without changing the origin:</p>
<ol>
<li><p>ES5+, Using a simple function to do the copy for you:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deepCopyObj</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == obj || <span class="hljs-string">"object"</span> != <span class="hljs-keyword">typeof</span> obj) <span class="hljs-keyword">return</span> obj;
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) {
        <span class="hljs-keyword">var</span> copy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
        copy.<span class="hljs-title function_">setTime</span>(obj.<span class="hljs-title function_">getTime</span>());
        <span class="hljs-keyword">return</span> copy;
    }
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) {
        <span class="hljs-keyword">var</span> copy = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = obj.<span class="hljs-property">length</span>; i &lt; len; i++) {
            copy[i] = <span class="hljs-title function_">deepCopyObj</span>(obj[i]);
        }
        <span class="hljs-keyword">return</span> copy;
    }
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>) {
        <span class="hljs-keyword">var</span> copy = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> obj) {
            <span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(attr)) copy[attr] = <span class="hljs-title function_">deepCopyObj</span>(obj[attr]);
        }
        <span class="hljs-keyword">return</span> copy;
    }
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Unable to copy obj this object."</span>);
}
</code></pre>
</li>
<li><p>ES5+, using <code>JSON.parse</code> and <code>JSON.stringify</code>.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> deepCopyObj = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj));
</code></pre>
</li>
<li><p>Angular:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> deepCopyObj = angular.<span class="hljs-title function_">copy</span>(obj);
</code></pre>
</li>
<li><p>jQuery:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> deepCopyObj = jQuery.<span class="hljs-title function_">extend</span>(<span class="hljs-literal">true</span>, {}, obj);
</code></pre>
</li>
<li><p>Underscore.js &amp; Lodash:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> deepCopyObj = _.<span class="hljs-title function_">cloneDeep</span>(obj); <span class="hljs-comment">//latest version of Underscore.js makes shallow copy</span>
</code></pre>
</li>
</ol>
<p>Hope these help</p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> clone = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">var</span> newObj = (<span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) ? [] : {};
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> <span class="hljs-variable language_">this</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>[i] &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">this</span>[i] == <span class="hljs-string">"object"</span>) {
            newObj[i] = <span class="hljs-variable language_">this</span>[i].<span class="hljs-title function_">clone</span>();
        }
        <span class="hljs-keyword">else</span>
        {
            newObj[i] = <span class="hljs-variable language_">this</span>[i];
        }
    }
    <span class="hljs-keyword">return</span> newObj;
}; 

<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>( <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, <span class="hljs-string">"clone"</span>, {<span class="hljs-attr">value</span>: clone, <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>});
</code></pre>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Theres a <a href="https://github.com/pvorb/node-clone" rel="noreferrer">library (called clone)</a>, that does this quite well. It provides the most complete recursive cloning/copying of arbitrary objects that I know of. It also supports circular references, which is not covered by the other answers, yet.</p>

<p>You can <a href="https://npmjs.org/package/clone" rel="noreferrer">find it on npm</a>, too. It can be used for the browser as well as Node.js.</p>

<p>Here is an example on how to use it:</p>

<p>Install it with</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">npm install clone
</code></pre>

<p>or package it with <a href="https://github.com/ender-js/Ender" rel="noreferrer">Ender</a>.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">ender build clone [...]
</code></pre>

<p>You can also download the source code manually.</p>

<p>Then you can use it in your source code.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> clone = <span class="hljs-built_in">require</span>(<span class="hljs-string">'clone'</span>);

<span class="hljs-keyword">var</span> a = { <span class="hljs-attr">foo</span>: { <span class="hljs-attr">bar</span>: <span class="hljs-string">'baz'</span> } };  <span class="hljs-comment">// inital value of a</span>
<span class="hljs-keyword">var</span> b = <span class="hljs-title function_">clone</span>(a);                 <span class="hljs-comment">// clone a -&gt; b</span>
a.<span class="hljs-property">foo</span>.<span class="hljs-property">bar</span> = <span class="hljs-string">'foo'</span>;                <span class="hljs-comment">// change a</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);                   <span class="hljs-comment">// { foo: { bar: 'foo' } }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b);                   <span class="hljs-comment">// { foo: { bar: 'baz' } }</span>
</code></pre>

<p>(Disclaimer: Im the author of the library.)</p>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I know this is an old post, but I thought this may be of some help to the next person who stumbles along.</p>

<p>As long as you don't assign an object to anything it maintains no reference in memory.  So to make an object that you want to share among other objects, you'll have to create a factory like so:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> a = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">father</span>:<span class="hljs-string">'zacharias'</span>
    };
},
b = <span class="hljs-title function_">a</span>(),
c = <span class="hljs-title function_">a</span>();
c.<span class="hljs-property">father</span> = <span class="hljs-string">'johndoe'</span>;
<span class="hljs-title function_">alert</span>(b.<span class="hljs-property">father</span>);
</code></pre>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you're using it, the <a href="https://underscorejs.org/" rel="nofollow noreferrer">Underscore.js</a> library has a <a href="https://underscorejs.org/#clone" rel="nofollow noreferrer">clone</a> method.</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> newObject = _.<span class="hljs-title function_">clone</span>(oldObject);
</code></pre>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's a version of ConroyP's answer above that works even if the constructor has required parameters:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">//If Object.create isn't already defined, we just do the simple shim,</span>
<span class="hljs-comment">//without the second argument, since that's all we need here</span>
<span class="hljs-keyword">var</span> object_create = <span class="hljs-title class_">Object</span>.<span class="hljs-property">create</span>;
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> object_create !== <span class="hljs-string">'function'</span>) {
    object_create = <span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) {
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params"></span>) {}
        F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = o;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
    };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">deepCopy</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span>(obj == <span class="hljs-literal">null</span> || <span class="hljs-title function_">typeof</span>(obj) !== <span class="hljs-string">'object'</span>){
        <span class="hljs-keyword">return</span> obj;
    }
    <span class="hljs-comment">//make sure the returned object has the same prototype as the original</span>
    <span class="hljs-keyword">var</span> ret = <span class="hljs-title function_">object_create</span>(obj.<span class="hljs-property">constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj){
        ret[key] = <span class="hljs-title function_">deepCopy</span>(obj[key]);
    }
    <span class="hljs-keyword">return</span> ret;
}
</code></pre>

<p>This function is also available in my <a href="https://github.com/mbrowne/simpleoo.js" rel="noreferrer">simpleoo</a> library.</p>

<p><strong>Edit:</strong></p>

<p>Here's a more robust version (thanks to Justin McCandless this now supports cyclic references as well):</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">/**
 * Deep copy an object (make copies of all its object properties, sub-properties, etc.)
 * An improved version of http://keithdevens.com/weblog/archive/2007/Jun/07/javascript.clone
 * that doesn't break if the constructor has required parameters
 * 
 * It also borrows some code from http://stackoverflow.com/a/11621004/560114
 */</span> 
<span class="hljs-keyword">function</span> <span class="hljs-title function_">deepCopy</span>(<span class="hljs-params">src, <span class="hljs-comment">/* INTERNAL */</span> _visited, _copiesVisited</span>) {
    <span class="hljs-keyword">if</span>(src === <span class="hljs-literal">null</span> || <span class="hljs-title function_">typeof</span>(src) !== <span class="hljs-string">'object'</span>){
        <span class="hljs-keyword">return</span> src;
    }

    <span class="hljs-comment">//Honor native/custom clone methods</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> src.<span class="hljs-property">clone</span> == <span class="hljs-string">'function'</span>){
        <span class="hljs-keyword">return</span> src.<span class="hljs-title function_">clone</span>(<span class="hljs-literal">true</span>);
    }

    <span class="hljs-comment">//Special cases:</span>
    <span class="hljs-comment">//Date</span>
    <span class="hljs-keyword">if</span>(src <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(src.<span class="hljs-title function_">getTime</span>());
    }
    <span class="hljs-comment">//RegExp</span>
    <span class="hljs-keyword">if</span>(src <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">RegExp</span>){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(src);
    }
    <span class="hljs-comment">//DOM Element</span>
    <span class="hljs-keyword">if</span>(src.<span class="hljs-property">nodeType</span> &amp;&amp; <span class="hljs-keyword">typeof</span> src.<span class="hljs-property">cloneNode</span> == <span class="hljs-string">'function'</span>){
        <span class="hljs-keyword">return</span> src.<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>);
    }

    <span class="hljs-comment">// Initialize the visited objects arrays if needed.</span>
    <span class="hljs-comment">// This is used to detect cyclic references.</span>
    <span class="hljs-keyword">if</span> (_visited === <span class="hljs-literal">undefined</span>){
        _visited = [];
        _copiesVisited = [];
    }

    <span class="hljs-comment">// Check if this object has already been visited</span>
    <span class="hljs-keyword">var</span> i, len = _visited.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i++) {
        <span class="hljs-comment">// If so, get the copy we already made</span>
        <span class="hljs-keyword">if</span> (src === _visited[i]) {
            <span class="hljs-keyword">return</span> _copiesVisited[i];
        }
    }

    <span class="hljs-comment">//Array</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(src) == <span class="hljs-string">'[object Array]'</span>) {
        <span class="hljs-comment">//[].slice() by itself would soft clone</span>
        <span class="hljs-keyword">var</span> ret = src.<span class="hljs-title function_">slice</span>();

        <span class="hljs-comment">//add it to the visited array</span>
        _visited.<span class="hljs-title function_">push</span>(src);
        _copiesVisited.<span class="hljs-title function_">push</span>(ret);

        <span class="hljs-keyword">var</span> i = ret.<span class="hljs-property">length</span>;
        <span class="hljs-keyword">while</span> (i--) {
            ret[i] = <span class="hljs-title function_">deepCopy</span>(ret[i], _visited, _copiesVisited);
        }
        <span class="hljs-keyword">return</span> ret;
    }

    <span class="hljs-comment">//If we've reached here, we have a regular object</span>

    <span class="hljs-comment">//make sure the returned object has the same prototype as the original</span>
    <span class="hljs-keyword">var</span> proto = (<span class="hljs-title class_">Object</span>.<span class="hljs-property">getPrototypeOf</span> ? <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(src): src.<span class="hljs-property">__proto__</span>);
    <span class="hljs-keyword">if</span> (!proto) {
        proto = src.<span class="hljs-property">constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">//this line would probably only be reached by very old browsers </span>
    }
    <span class="hljs-keyword">var</span> dest = <span class="hljs-title function_">object_create</span>(proto);

    <span class="hljs-comment">//add this object to the visited array</span>
    _visited.<span class="hljs-title function_">push</span>(src);
    _copiesVisited.<span class="hljs-title function_">push</span>(dest);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> src) {
        <span class="hljs-comment">//Note: this does NOT preserve ES5 property attributes like 'writable', 'enumerable', etc.</span>
        <span class="hljs-comment">//For an example of how this could be modified to do so, see the singleMixin() function</span>
        dest[key] = <span class="hljs-title function_">deepCopy</span>(src[key], _visited, _copiesVisited);
    }
    <span class="hljs-keyword">return</span> dest;
}

<span class="hljs-comment">//If Object.create isn't already defined, we just do the simple shim,</span>
<span class="hljs-comment">//without the second argument, since that's all we need here</span>
<span class="hljs-keyword">var</span> object_create = <span class="hljs-title class_">Object</span>.<span class="hljs-property">create</span>;
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> object_create !== <span class="hljs-string">'function'</span>) {
    object_create = <span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) {
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params"></span>) {}
        F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = o;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
    };
}
</code></pre>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The following creates two instances of the same object. I found it and am using it currently. It's simple and easy to use.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> objToCreate = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(cloneThis));
</code></pre>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Crockford suggests (and I prefer) using this function:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">object</span>(<span class="hljs-params">o</span>) {
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params"></span>) {}
    F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = o;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
}

<span class="hljs-keyword">var</span> newObject = <span class="hljs-title function_">object</span>(oldObject);
</code></pre>

<p>It's terse, works as expected and you don't need a library.</p>

<hr>

<p><strong>EDIT:</strong></p>

<p>This is a polyfill for <code>Object.create</code>, so you also can use this.</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> newObject = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(oldObject);
</code></pre>

<p><strong>NOTE:</strong>  If you use some of this, you may have problems with some iteration who use <code>hasOwnProperty</code>. Because, <code>create</code> create new empty object who inherits <code>oldObject</code>. But it is still useful and practical for cloning objects.</p>

<p>For exemple if  <code>oldObject.a = 5;</code></p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">newObject.<span class="hljs-property">a</span>; <span class="hljs-comment">// is 5</span>
</code></pre>

<p>but:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">oldObject.<span class="hljs-title function_">hasOwnProperty</span>(a); <span class="hljs-comment">// is true</span>
newObject.<span class="hljs-title function_">hasOwnProperty</span>(a); <span class="hljs-comment">// is false</span>
</code></pre>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Lodash has a nice <a href="http://lodash.com/docs#cloneDeep" rel="noreferrer">_.cloneDeep(value)</a> method:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> objects = [{ <span class="hljs-string">'a'</span>: <span class="hljs-number">1</span> }, { <span class="hljs-string">'b'</span>: <span class="hljs-number">2</span> }];

<span class="hljs-keyword">var</span> deep = _.<span class="hljs-title function_">cloneDeep</span>(objects);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(deep[<span class="hljs-number">0</span>] === objects[<span class="hljs-number">0</span>]);
<span class="hljs-comment">// =&gt; false</span>
</code></pre>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">obj</span>)
 { <span class="hljs-keyword">var</span> clone = {};
   clone.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = obj.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
   <span class="hljs-keyword">for</span> (property <span class="hljs-keyword">in</span> obj) clone[property] = obj[property];
   <span class="hljs-keyword">return</span> clone;
 }
</code></pre>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 21</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Shallow copy one-liner (<a href="https://en.wikipedia.org/wiki/ECMAScript#5th_Edition" rel="nofollow noreferrer">ECMAScript 5th edition</a>):</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> origin = { foo : {} };
<span class="hljs-keyword">var</span> copy = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(origin).<span class="hljs-title function_">reduce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">c,k</span>){c[k]=origin[k];<span class="hljs-keyword">return</span> c;},{});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(origin, copy);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(origin == copy); <span class="hljs-comment">// false</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(origin.<span class="hljs-property">foo</span> == copy.<span class="hljs-property">foo</span>); <span class="hljs-comment">// true</span>
</code></pre>
<p>And shallow copy one-liner (<a href="https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015" rel="nofollow noreferrer">ECMAScript 6th edition</a>, 2015):</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> origin = { foo : {} };
<span class="hljs-keyword">var</span> copy = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, origin);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(origin, copy);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(origin == copy); <span class="hljs-comment">// false</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(origin.<span class="hljs-property">foo</span> == copy.<span class="hljs-property">foo</span>); <span class="hljs-comment">// true</span>
</code></pre>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 22</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There seems to be no ideal deep clone operator yet for array-like objects.  As the code below illustrates, John Resig's jQuery cloner turns arrays with non-numeric properties into objects that are not arrays, and RegDwight's JSON cloner drops the non-numeric properties. The following tests illustrate these points on multiple browsers:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">jQueryClone</span>(<span class="hljs-params">obj</span>) {
   <span class="hljs-keyword">return</span> jQuery.<span class="hljs-title function_">extend</span>(<span class="hljs-literal">true</span>, {}, obj)
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">JSONClone</span>(<span class="hljs-params">obj</span>) {
   <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj))
}

<span class="hljs-keyword">var</span> arrayLikeObj = [[<span class="hljs-number">1</span>, <span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>], [<span class="hljs-number">2</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"a"</span>]];
arrayLikeObj.<span class="hljs-property">names</span> = [<span class="hljs-string">"m"</span>, <span class="hljs-string">"n"</span>, <span class="hljs-string">"o"</span>];
<span class="hljs-keyword">var</span> <span class="hljs-title class_">JSON</span>Copy = <span class="hljs-title class_">JSON</span>Clone(arrayLikeObj);
<span class="hljs-keyword">var</span> jQueryCopy = <span class="hljs-title function_">jQueryClone</span>(arrayLikeObj);

<span class="hljs-title function_">alert</span>(<span class="hljs-string">"Is arrayLikeObj an array instance?"</span> + (arrayLikeObj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) +
      <span class="hljs-string">"\nIs the jQueryClone an array instance? "</span> + (jQueryCopy <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) +
      <span class="hljs-string">"\nWhat are the arrayLikeObj names? "</span> + arrayLikeObj.<span class="hljs-property">names</span> +
      <span class="hljs-string">"\nAnd what are the JSONClone names? "</span> + <span class="hljs-title class_">JSON</span>Copy.<span class="hljs-property">names</span>)
</code></pre>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 23</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Just because I didn't see <a href="http://en.wikipedia.org/wiki/AngularJS" rel="noreferrer">AngularJS</a> mentioned and thought that people might want to know...</p>

<p><a href="https://docs.angularjs.org/api/ng/function/angular.copy" rel="noreferrer"><code>angular.copy</code></a> also provides a method of deep copying objects and arrays.</p>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 24</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I have two good answers depending on whether your objective is to clone a "plain old JavaScript object" or not.</p>

<p>Let's also assume that your intention is to create a complete clone with no prototype references back to the source object. If you're not interested in a complete clone, then you can use many of the Object.clone() routines provided in some of the other answers (Crockford's pattern).</p>

<p>For plain old JavaScript objects, a tried and true good way to clone an object in modern runtimes is quite simply:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> clone = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj));
</code></pre>

<p>Note that the source object must be a pure JSON object. This is to say, all of its nested properties must be scalars (like boolean, string, array, object, etc). Any functions or special objects like RegExp or Date will not be cloned.</p>

<p>Is it efficient? Heck yes. We've tried all kinds of cloning methods and this works best. I'm sure some ninja could conjure up a faster method. But I suspect we're talking about marginal gains.</p>

<p>This approach is just simple and easy to implement. Wrap it into a convenience function and if you really need to squeeze out some gain, go for at a later time.</p>

<p>Now, for non-plain JavaScript objects, there isn't a really simple answer.  In fact, there can't be because of the dynamic nature of JavaScript functions and inner object state. Deep cloning a JSON structure with functions inside requires you recreate those functions and their inner context. And JavaScript simply doesn't have a standardized way of doing that.</p>

<p>The correct way to do this, once again, is via a convenience method that you declare and reuse within your code. The convenience method can be endowed with some understanding of your own objects so you can make sure to properly recreate the graph within the new object.</p>

<p>We're written our own, but the best general approach I've seen is covered here:</p>

<p><a href="http://davidwalsh.name/javascript-clone" rel="noreferrer">http://davidwalsh.name/javascript-clone</a></p>

<p>This is the right idea. The author (David Walsh) has commented out the cloning of generalized functions. This is something you might choose to do, depending on your use case.</p>

<p>The main idea is that you need to special handle the instantiation of your functions (or prototypal classes, so to speak) on a per-type basis. Here, he's provided a few examples for RegExp and Date.</p>

<p>Not only is this code brief, but it's also very readable. It's pretty easy to extend.</p>

<p>Is this efficient? Heck yes. Given that the goal is to produce a true deep-copy clone, then you're going to have to walk the members of the source object graph. With this approach, you can tweak exactly which child members to treat and how to manually handle custom types.</p>

<p>So there you go. Two approaches. Both are efficient in my view.</p>
    </div></div></div></div><div id="solution25" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 25</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I am late to answer this question, but I have an another way of cloning the object:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">cloneObject</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span> || <span class="hljs-title function_">typeof</span>(obj) !== <span class="hljs-string">'object'</span>)
        <span class="hljs-keyword">return</span> obj;
    <span class="hljs-keyword">var</span> temp = obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>); <span class="hljs-comment">// changed</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(obj, key)) {
            obj[<span class="hljs-string">'isActiveClone'</span>] = <span class="hljs-literal">null</span>;
            temp[key] = <span class="hljs-title function_">cloneObject</span>(obj[key]);
            <span class="hljs-keyword">delete</span> obj[<span class="hljs-string">'isActiveClone'</span>];
        }
    }
    <span class="hljs-keyword">return</span> temp;
}

<span class="hljs-keyword">var</span> b = <span class="hljs-title function_">cloneObject</span>({<span class="hljs-string">"a"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"b"</span>:<span class="hljs-number">2</span>});   <span class="hljs-comment">// calling</span>
</code></pre>
<p>which is much better and faster then:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> a = {<span class="hljs-string">"a"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"b"</span>:<span class="hljs-number">2</span>};
<span class="hljs-keyword">var</span> b = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(a));  
</code></pre>
<p>and</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> a = {<span class="hljs-string">"a"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"b"</span>:<span class="hljs-number">2</span>};

<span class="hljs-comment">// Deep copy</span>
<span class="hljs-keyword">var</span> newObject = jQuery.<span class="hljs-title function_">extend</span>(<span class="hljs-literal">true</span>, {}, a);
</code></pre>
<p>I have bench-marked the code and you can test the results <a href="http://jsben.ch/vyEky" rel="noreferrer">here</a>:</p>
<p>and sharing the results:
<a href="https://i.stack.imgur.com/K8ztO.png" rel="noreferrer"><img src="https://i.stack.imgur.com/K8ztO.png" alt="enter image description here"></a>
References: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty</a></p>
    </div></div></div></div><div id="solution26" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 26</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This isn't generally the most efficient solution, but it does what I need. Simple test cases below...</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">obj, clones</span>) {
    <span class="hljs-comment">// Makes a deep copy of 'obj'. Handles cyclic structures by</span>
    <span class="hljs-comment">// tracking cloned obj's in the 'clones' parameter. Functions </span>
    <span class="hljs-comment">// are included, but not cloned. Functions members are cloned.</span>
    <span class="hljs-keyword">var</span> new_obj,
        already_cloned,
        t = <span class="hljs-keyword">typeof</span> obj,
        i = <span class="hljs-number">0</span>,
        l,
        pair; 

    clones = clones || [];

    <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> obj;
    }

    <span class="hljs-keyword">if</span> (t === <span class="hljs-string">"object"</span> || t === <span class="hljs-string">"function"</span>) {

        <span class="hljs-comment">// check to see if we've already cloned obj</span>
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, l = clones.<span class="hljs-property">length</span>; i &lt; l; i++) {
            pair = clones[i];
            <span class="hljs-keyword">if</span> (pair[<span class="hljs-number">0</span>] === obj) {
                already_cloned = pair[<span class="hljs-number">1</span>];
                <span class="hljs-keyword">break</span>;
            }
        }

        <span class="hljs-keyword">if</span> (already_cloned) {
            <span class="hljs-keyword">return</span> already_cloned; 
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (t === <span class="hljs-string">"object"</span>) { <span class="hljs-comment">// create new object</span>
                new_obj = <span class="hljs-keyword">new</span> obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>);
            } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// Just use functions as is</span>
                new_obj = obj;
            }

            clones.<span class="hljs-title function_">push</span>([obj, new_obj]); <span class="hljs-comment">// keep track of objects we've cloned</span>

            <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> obj) { <span class="hljs-comment">// clone object members</span>
                <span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(key)) {
                    new_obj[key] = <span class="hljs-title function_">clone</span>(obj[key], clones);
                }
            }
        }
    }
    <span class="hljs-keyword">return</span> new_obj || obj;
}
</code></pre>

<p>Cyclic array test...</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">a = []
a.<span class="hljs-title function_">push</span>(<span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>, a)
aa = <span class="hljs-title function_">clone</span>(a)
aa === a <span class="hljs-comment">//=&gt; false</span>
aa[<span class="hljs-number">2</span>] === a <span class="hljs-comment">//=&gt; false</span>
aa[<span class="hljs-number">2</span>] === a[<span class="hljs-number">2</span>] <span class="hljs-comment">//=&gt; false</span>
aa[<span class="hljs-number">2</span>] === aa <span class="hljs-comment">//=&gt; true</span>
</code></pre>

<p>Function test...</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript">f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>
f.<span class="hljs-property">a</span> = a
ff = <span class="hljs-title function_">clone</span>(f)
ff === f <span class="hljs-comment">//=&gt; true</span>
ff.<span class="hljs-property">a</span> === a <span class="hljs-comment">//=&gt; false</span>
</code></pre>
    </div></div></div></div><div id="solution27" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 27</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Only when you can use <a href="https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015" rel="nofollow noreferrer">ECMAScript 6</a> or <a href="https://en.wikipedia.org/wiki/Source-to-source_compiler" rel="nofollow noreferrer">transpilers</a>.</p>
<p>Features:</p>
<ul>
<li>Won't trigger getter/setter while copying.</li>
<li>Preserves getter/setter.</li>
<li>Preserves prototype informations.</li>
<li>Works with both <strong>object-literal</strong> and <strong>functional</strong> <a href="https://en.wikipedia.org/wiki/Object-oriented_programming" rel="nofollow noreferrer">OO</a> writing styles.</li>
</ul>
<p>Code:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">target, source</span>){

    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> source){

        <span class="hljs-comment">// Use getOwnPropertyDescriptor instead of source[key] to prevent from trigering setter/getter.</span>
        <span class="hljs-keyword">let</span> descriptor = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(source, key);
        <span class="hljs-keyword">if</span>(descriptor.<span class="hljs-property">value</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">String</span>){
            target[key] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(descriptor.<span class="hljs-property">value</span>);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(descriptor.<span class="hljs-property">value</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>){
            target[key] = <span class="hljs-title function_">clone</span>([], descriptor.<span class="hljs-property">value</span>);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(descriptor.<span class="hljs-property">value</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>){
            <span class="hljs-keyword">let</span> prototype = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getPrototypeOf</span>(descriptor.<span class="hljs-property">value</span>);
            <span class="hljs-keyword">let</span> cloneObject = <span class="hljs-title function_">clone</span>({}, descriptor.<span class="hljs-property">value</span>);
            <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">setPrototypeOf</span>(cloneObject, prototype);
            target[key] = cloneObject;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target, key, descriptor);
        }
    }
    <span class="hljs-keyword">let</span> prototype = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">getPrototypeOf</span>(source);
    <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">setPrototypeOf</span>(target, prototype);
    <span class="hljs-keyword">return</span> target;
}
</code></pre>
    </div></div></div></div><div id="solution28" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 28</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For the people who want to use the <code>JSON.parse(JSON.stringify(obj))</code> version, but without losing the Date objects, you can use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse#Using_the_reviver_parameter" rel="nofollow noreferrer">second argument of <code>parse</code> method</a> to convert the strings back to Date:</p>
<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">var</span> regExp = <span class="hljs-regexp">/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj), <span class="hljs-keyword">function</span>(<span class="hljs-params">k, v</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> v === <span class="hljs-string">'string'</span> &amp;&amp; regExp.<span class="hljs-title function_">test</span>(v))
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(v)
    <span class="hljs-keyword">return</span> v;
  })
}

<span class="hljs-comment">// usage:</span>
<span class="hljs-keyword">var</span> original = {
 <span class="hljs-attr">a</span>: [<span class="hljs-number">1</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-number">0</span>, {<span class="hljs-attr">a</span>:<span class="hljs-literal">null</span>}, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()],
 <span class="hljs-attr">b</span>: {
   <span class="hljs-title function_">c</span>(<span class="hljs-params"></span>){ <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> }
 }
}

<span class="hljs-keyword">var</span> cloned = <span class="hljs-title function_">clone</span>(original)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(cloned)</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif4" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
    </div></div></div></div><div id="solution29" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 29</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I disagree with the answer with the greatest votes <a href="https://stackoverflow.com/a/5344074/1110941">here</a>. A <strong>Recursive Deep Clone</strong> is <strong>much faster</strong> than the <em>JSON.parse(JSON.stringify(obj))</em> approach mentioned. </p>

<ul>
<li><strong>Jsperf</strong> ranks it number one here: <a href="https://jsperf.com/deep-copy-vs-json-stringify-json-parse/5" rel="noreferrer">https://jsperf.com/deep-copy-vs-json-stringify-json-parse/5</a></li>
<li><strong>Jsben</strong> from the answer above updated to show that a recursive deep clone beats all the others mentioned: <a href="http://jsben.ch/13YKQ" rel="noreferrer">http://jsben.ch/13YKQ</a></li>
</ul>

<p>And here's the function for quick reference:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">cloneDeep</span> (o) {
  <span class="hljs-keyword">let</span> newO
  <span class="hljs-keyword">let</span> i

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> o !== <span class="hljs-string">'object'</span>) <span class="hljs-keyword">return</span> o

  <span class="hljs-keyword">if</span> (!o) <span class="hljs-keyword">return</span> o

  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">apply</span>(o) === <span class="hljs-string">'[object Array]'</span>) {
    newO = []
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; o.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
      newO[i] = <span class="hljs-title function_">cloneDeep</span>(o[i])
    }
    <span class="hljs-keyword">return</span> newO
  }

  newO = {}
  <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> o) {
    <span class="hljs-keyword">if</span> (o.<span class="hljs-title function_">hasOwnProperty</span>(i)) {
      newO[i] = <span class="hljs-title function_">cloneDeep</span>(o[i])
    }
  }
  <span class="hljs-keyword">return</span> newO
}
</code></pre>
    </div></div></div></div><div id="solution30" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 30</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is a comprehensive clone() method that can clone any JavaScript object. It handles almost all the cases:</p>

<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">clone</span>(<span class="hljs-params">src, deep</span>) {

    <span class="hljs-keyword">var</span> toString = <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>;
    <span class="hljs-keyword">if</span> (!src &amp;&amp; <span class="hljs-keyword">typeof</span> src != <span class="hljs-string">"object"</span>) {
        <span class="hljs-comment">// Any non-object (Boolean, String, Number), null, undefined, NaN</span>
        <span class="hljs-keyword">return</span> src;
    }

    <span class="hljs-comment">// Honor native/custom clone methods</span>
    <span class="hljs-keyword">if</span> (src.<span class="hljs-property">clone</span> &amp;&amp; toString.<span class="hljs-title function_">call</span>(src.<span class="hljs-property">clone</span>) == <span class="hljs-string">"[object Function]"</span>) {
        <span class="hljs-keyword">return</span> src.<span class="hljs-title function_">clone</span>(deep);
    }

    <span class="hljs-comment">// DOM elements</span>
    <span class="hljs-keyword">if</span> (src.<span class="hljs-property">nodeType</span> &amp;&amp; toString.<span class="hljs-title function_">call</span>(src.<span class="hljs-property">cloneNode</span>) == <span class="hljs-string">"[object Function]"</span>) {
        <span class="hljs-keyword">return</span> src.<span class="hljs-title function_">cloneNode</span>(deep);
    }

    <span class="hljs-comment">// Date</span>
    <span class="hljs-keyword">if</span> (toString.<span class="hljs-title function_">call</span>(src) == <span class="hljs-string">"[object Date]"</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(src.<span class="hljs-title function_">getTime</span>());
    }

    <span class="hljs-comment">// RegExp</span>
    <span class="hljs-keyword">if</span> (toString.<span class="hljs-title function_">call</span>(src) == <span class="hljs-string">"[object RegExp]"</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(src);
    }

    <span class="hljs-comment">// Function</span>
    <span class="hljs-keyword">if</span> (toString.<span class="hljs-title function_">call</span>(src) == <span class="hljs-string">"[object Function]"</span>) {

        <span class="hljs-comment">//Wrap in another method to make sure == is not true;</span>
        <span class="hljs-comment">//Note: Huge performance issue due to closures, comment this :)</span>
        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
            src.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
        });
    }

    <span class="hljs-keyword">var</span> ret, index;
    <span class="hljs-comment">//Array</span>
    <span class="hljs-keyword">if</span> (toString.<span class="hljs-title function_">call</span>(src) == <span class="hljs-string">"[object Array]"</span>) {
        <span class="hljs-comment">//[].slice(0) would soft clone</span>
        ret = src.<span class="hljs-title function_">slice</span>();
        <span class="hljs-keyword">if</span> (deep) {
            index = ret.<span class="hljs-property">length</span>;
            <span class="hljs-keyword">while</span> (index--) {
                ret[index] = <span class="hljs-title function_">clone</span>(ret[index], <span class="hljs-literal">true</span>);
            }
        }
    }
    <span class="hljs-comment">//Object</span>
    <span class="hljs-keyword">else</span> {
        ret = src.<span class="hljs-property">constructor</span> ? <span class="hljs-keyword">new</span> src.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) : {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> src) {
            ret[prop] = deep
                ? <span class="hljs-title function_">clone</span>(src[prop], <span class="hljs-literal">true</span>)
                : src[prop];
        }
    }
    <span class="hljs-keyword">return</span> ret;
};
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-to-sort-a-multi-dimensional-array-by-value-1657387746110">How to Sort a Multi-dimensional Array by Value</a><a href="/questions/how-do-i-clone-a-list-so-that-it-doesn&#x27;t-change-unexpectedly-after-assignment-1657384423195">How do I clone a list so that it doesn&#x27;t change unexpectedly after assignment?</a><a href="/questions/commandbuttoncommandlinkajax-actionlistener-method-not-invoked-or-input-value-not-setupdated-1657384667519">commandButton/commandLink/ajax action/listener method not invoked or input value not set/updated</a><a href="/questions/why-shouldn&#x27;t-i-use-mysql_*-functions-in-php-1657384260352">Why shouldn&#x27;t I use mysql_* functions in PHP?</a><a href="/questions/why-does-my-recursive-function-return-none-1657387792894">Why does my recursive function return None?</a><a href="/questions/how-do-i-use-shell-variables-in-an-awk-script-1657387754261">How do I use shell variables in an awk script?</a><a href="/questions/how-to-create-a-generic-array-in-java-1657387532298">How to create a generic array in Java?</a><a href="/questions/scroll-to-an-element-with-jquery-1657388523178">Scroll to an element with jQuery</a><a href="/questions/what-are-drawbacks-or-disadvantages-of-singleton-pattern-closed-1657387360749">What are drawbacks or disadvantages of singleton pattern? [closed]</a><a href="/questions/how-do-i-use-reflection-to-call-a-generic-method-1657387256751">How do I use reflection to call a generic method?</a><a href="/questions/what-are-copy-elision-and-return-value-optimization-1657385455976">What are copy elision and return value optimization?</a><a href="/questions/what&#x27;s-the-simplest-way-to-print-a-java-array-1657384702397">What&#x27;s the simplest way to print a Java array?</a><a href="/questions/javascript-closure-inside-loops-simple-practical-example-1657384278449">JavaScript closure inside loops  simple practical example</a><a href="/questions/how-to-remove-all-duplicates-from-an-array-of-objects-1657388256190">How to remove all duplicates from an array of objects?</a><a href="/questions/removing-trailing-newline-character-from-fgets()-input-1657387308069">Removing trailing newline character from fgets() input</a><a href="/questions/why-are-global-variables-evil-closed-1657388260006">Why are global variables evil? [closed]</a><a href="/questions/what-is-the-%22n+1-selects-problem%22-in-orm-(object-relational-mapping)-1657388055597">What is the &quot;N+1 selects problem&quot; in ORM (Object-Relational Mapping)?</a><a href="/questions/is-there-any-way-to-kill-a-thread-1657387859831">Is there any way to kill a Thread?</a><a href="/questions/retrieving-the-last-record-in-each-group-mysql-1657384887369">Retrieving the last record in each group - MySQL</a><a href="/questions/aggregate-summarize-multiple-variables-per-group-(e.g.-sum-mean)-1657387764061">Aggregate / summarize multiple variables per group (e.g. sum, mean)</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;h1\u0026gt;Native deep cloning\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;There\u0026apos;s now a JS standard called \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/structuredClone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026quot;structured cloning\u0026quot;\u0026lt;/a\u0026gt;, that works experimentally in Node 11 and later, will land in browsers, and which has \u0026lt;a href=\u0026quot;https://www.npmjs.com/package/@ungap/structured-clone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;polyfills for existing systems\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt;(value)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If needed, loading the polyfill first:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; structuredClone \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;@ungap/structured-clone\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;See \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript/10916838#10916838\u0026quot;\u0026gt;this answer\u0026lt;/a\u0026gt; for more details.\u0026lt;/p\u0026gt;\n\u0026lt;h1\u0026gt;Older answers\u0026lt;/h1\u0026gt;\n\u0026lt;h2\u0026gt;Fast cloning with data loss - JSON.parse/stringify\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;If you do not use \u0026lt;code\u0026gt;Date\u0026lt;/code\u0026gt;s, functions, \u0026lt;code\u0026gt;undefined\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;Infinity\u0026lt;/code\u0026gt;, RegExps, Maps, Sets, Blobs, FileLists, ImageDatas, sparse Arrays, Typed Arrays or other complex types within your object, a very simple one liner to deep clone an object is:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;JSON.parse(JSON.stringify(object))\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;false\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; a = {\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;string\u0026apos;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;nul\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(),  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// stringified\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;undef\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;,  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// lost\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;inf\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Infinity\u0026lt;/span\u0026gt;,  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// forced to \u0026apos;null\u0026apos;\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;re\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/.*/\u0026lt;/span\u0026gt;,  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// lost\u0026lt;/span\u0026gt;\n}\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; a.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Date object\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(a));\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(clone);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// result of .toISOString()\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif1\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;See \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript/5344074#5344074\u0026quot;\u0026gt;Corban\u0026apos;s answer\u0026lt;/a\u0026gt; for benchmarks.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Reliable cloning using a library\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Since cloning objects is not trivial (complex types, circular references, function etc.), most major libraries provide function to clone objects. \u0026lt;strong\u0026gt;Don\u0026apos;t reinvent the wheel\u0026lt;/strong\u0026gt; - if you\u0026apos;re already using a library, check if it has an object cloning function. For example,\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;lodash - \u0026lt;a href=\u0026quot;https://lodash.com/docs#cloneDeep\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;cloneDeep\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;; can be imported separately via the \u0026lt;a href=\u0026quot;https://www.npmjs.com/package/lodash.clonedeep\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;lodash.clonedeep\u0026lt;/a\u0026gt; module and is probably your best choice if you\u0026apos;re not already using a library that provides a deep cloning function\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;AngularJS - \u0026lt;a href=\u0026quot;https://docs.angularjs.org/api/ng/function/angular.copy\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;angular.copy\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;jQuery - \u0026lt;a href=\u0026quot;https://api.jquery.com/jquery.extend/#jQuery-extend-deep-target-object1-objectN\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;jQuery.extend(true, { }, oldObject)\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;; \u0026lt;code\u0026gt;.clone()\u0026lt;/code\u0026gt; only clones DOM elements\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;just library - \u0026lt;a href=\u0026quot;https://www.npmjs.com/package/just-clone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;just-clone\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;; Part of a library of zero-dependency npm modules that do just do one thing.\nGuilt-free utilities for every occasion.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;ES6 (\u0026lt;em\u0026gt;shallow\u0026lt;/em\u0026gt; copy)\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;For completeness, note that ES6 offers two shallow copy mechanisms: \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Object.assign()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; and the \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;spread syntax\u0026lt;/a\u0026gt;.\nwhich copies values of all enumerable own properties from one object to another. For example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;A1\u0026lt;/span\u0026gt; = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;2\u0026quot;\u0026lt;/span\u0026gt;};\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;A2\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;A1\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;A3\u0026lt;/span\u0026gt; = {...\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;A1\u0026lt;/span\u0026gt;};  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Spread Syntax\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Checkout this benchmark: \u0026lt;a href=\u0026quot;http://jsben.ch/#/bWfk9\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://jsben.ch/#/bWfk9\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In my previous tests where speed was a main concern I found \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;to be the slowest way to deep clone an object (it is slower than \u0026lt;a href=\u0026quot;https://api.jquery.com/jQuery.extend/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;jQuery.extend\u0026lt;/a\u0026gt; with \u0026lt;code\u0026gt;deep\u0026lt;/code\u0026gt; flag set true by 10-20%).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;jQuery.extend is pretty fast when the \u0026lt;code\u0026gt;deep\u0026lt;/code\u0026gt; flag is set to \u0026lt;code\u0026gt;false\u0026lt;/code\u0026gt; (shallow clone). It is a good option, because it includes some extra logic for type validation and doesn\u0026apos;t copy over undefined properties, etc., but this will also slow you down a little.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you know the structure of the objects you are trying to clone or can avoid deep nested arrays you can write a simple \u0026lt;code\u0026gt;for (var i in obj)\u0026lt;/code\u0026gt; loop to clone your object while checking hasOwnProperty and it will be much much faster than jQuery.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Lastly if you are attempting to clone a known object structure in a hot loop you can get MUCH MUCH MORE PERFORMANCE by simply in-lining the clone procedure and manually constructing the object.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;JavaScript trace engines suck at optimizing \u0026lt;code\u0026gt;for..in\u0026lt;/code\u0026gt; loops and checking hasOwnProperty will slow you down as well. Manual clone when speed is an absolute must.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clonedObject = {\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;knownProp\u0026lt;/span\u0026gt;: obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;knownProp\u0026lt;/span\u0026gt;,\n  ..\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Beware using the \u0026lt;code\u0026gt;JSON.parse(JSON.stringify(obj))\u0026lt;/code\u0026gt; method on \u0026lt;code\u0026gt;Date\u0026lt;/code\u0026gt; objects - \u0026lt;code\u0026gt;JSON.stringify(new Date())\u0026lt;/code\u0026gt; returns a string representation of the date in ISO format, which \u0026lt;code\u0026gt;JSON.parse()\u0026lt;/code\u0026gt; \u0026lt;strong\u0026gt;doesn\u0026apos;t\u0026lt;/strong\u0026gt; convert back to a \u0026lt;code\u0026gt;Date\u0026lt;/code\u0026gt; object. \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/11491938/issues-with-date-when-using-json-stringify-and-json-parse/11491993#11491993\u0026quot;\u0026gt;See this answer for more details\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Additionally, please note that, in Chrome 65 at least, native cloning is not the way to go. According to JSPerf, performing native cloning by creating a new function is nearly \u0026lt;strong\u0026gt;800x\u0026lt;/strong\u0026gt; slower than using JSON.stringify which is incredibly fast all the way across the board.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Update for ES6\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you are using Javascript ES6 try this native method for cloning or shallow copy.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, obj);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;Structured Cloning\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;2022 update:\u0026lt;/strong\u0026gt; The \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/structuredClone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;structuredClone\u0026lt;/code\u0026gt; global function\u0026lt;/a\u0026gt; is already available in Firefox 94, Node 17 and Deno 1.14\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The HTML standard includes \u0026lt;a href=\u0026quot;https://html.spec.whatwg.org/multipage/structured-data.html#safe-passing-of-structured-data\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;an internal structured cloning/serialization algorithm\u0026lt;/strong\u0026gt;\u0026lt;/a\u0026gt; that can create deep clones of objects. It is still limited to certain built-in types, but in addition to the few types supported by JSON it also supports Dates, RegExps, Maps, Sets, Blobs, FileLists, ImageDatas, sparse Arrays, Typed Arrays, and probably more in the future. It also preserves references within the cloned data, allowing it to support cyclical and recursive structures that would cause errors for JSON.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Support in Node.js:\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/structuredClone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;structuredClone\u0026lt;/code\u0026gt; global function\u0026lt;/a\u0026gt; is provided by Node 17.0:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt;(original);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Previous versions: The \u0026lt;code\u0026gt;v8\u0026lt;/code\u0026gt; module in Node.js (as of Node 11) \u0026lt;a href=\u0026quot;https://nodejs.org/api/all.html#v8_serialization_api\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;exposes the structured serialization API directly\u0026lt;/a\u0026gt;, but this functionality is still marked as \u0026quot;experimental\u0026quot;, and subject to change or removal in future versions. If you\u0026apos;re using a compatible version, cloning an object is as simple as:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; v8 = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;require\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;v8\u0026apos;\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt; = obj =\u0026amp;gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; v8.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deserialize\u0026lt;/span\u0026gt;(v8.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;serialize\u0026lt;/span\u0026gt;(obj));\n};\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Direct Support in Browsers: Available in Firefox 94\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/structuredClone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;structuredClone\u0026lt;/code\u0026gt; global function\u0026lt;/a\u0026gt; will soon be provided by all major browsers (having previously been discussed in \u0026lt;a href=\u0026quot;https://github.com/whatwg/html/issues/793\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;whatwg/html#793 on GitHub\u0026lt;/a\u0026gt;). It looks / will look like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt;(original);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Until this is shipped, browsers\u0026apos; structured clone implementations are only exposed indirectly.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Asynchronous Workaround: Usable. \u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;The lower-overhead way to create a structured clone with existing APIs is to post the data through one port of a \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;MessageChannels\u0026lt;/a\u0026gt;. The other port will emit a \u0026lt;code\u0026gt;message\u0026lt;/code\u0026gt; event with a structured clone of the attached \u0026lt;code\u0026gt;.data\u0026lt;/code\u0026gt;. Unfortunately, listening for these events is necessarily asynchronous, and the synchronous alternatives are less practical.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StructuredCloner\u0026lt;/span\u0026gt; {\n  \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;pendingClones_\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Map\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;nextKey_\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; channel = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MessageChannel\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;inPort_\u0026lt;/span\u0026gt; = channel.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;port1\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;outPort_\u0026lt;/span\u0026gt; = channel.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;port2\u0026lt;/span\u0026gt;;\n    \n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;outPort_\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;onmessage\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;{data: {key, value}}\u0026lt;/span\u0026gt;) =\u0026amp;gt;\u0026lt;/span\u0026gt; {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; resolve = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;pendingClones_\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(key);\n      \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;resolve\u0026lt;/span\u0026gt;(value);\n      \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;pendingClones_\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt;(key);\n    };\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;outPort_\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;start\u0026lt;/span\u0026gt;();\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneAsync\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Promise\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;resolve\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; key = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;nextKey_\u0026lt;/span\u0026gt;++;\n      \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;pendingClones_\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(key, resolve);\n      \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;inPort_\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;postMessage\u0026lt;/span\u0026gt;({key, value});\n    });\n  }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; structuredCloneAsync = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;structuredCloneAsync\u0026lt;/span\u0026gt; =\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StructuredCloner\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;cloneAsync\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;bind\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;StructuredCloner\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Example Use:\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;async\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) =\u0026amp;gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; original = { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(), \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Math\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;random\u0026lt;/span\u0026gt;() };\n  original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; = original;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;await\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredCloneAsync\u0026lt;/span\u0026gt;(original);\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// They\u0026apos;re different objects:\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original !== clone);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt; !== clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;);\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// They\u0026apos;re cyclical:\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; === original);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; === clone);\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// They contain equivalent values:\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt; === clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Number\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;) === \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Number\u0026lt;/span\u0026gt;(clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;));\n  \n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Assertions complete.\u0026quot;\u0026lt;/span\u0026gt;);\n};\n\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Synchronous Workarounds: Awful! \u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;There are no good options for creating structured clones synchronously. Here are a couple of impractical hacks instead.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;history.pushState()\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;history.replaceState()\u0026lt;/code\u0026gt; both create a structured clone of their first argument, and assign that value to \u0026lt;code\u0026gt;history.state\u0026lt;/code\u0026gt;. You can use this to create a structured clone of any object like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt; = obj =\u0026amp;gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; oldState = history.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;state\u0026lt;/span\u0026gt;;\n  history.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replaceState\u0026lt;/span\u0026gt;(obj, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clonedObj = history.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;state\u0026lt;/span\u0026gt;;\n  history.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replaceState\u0026lt;/span\u0026gt;(oldState, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; clonedObj;\n};\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Example Use:\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;true\u0026quot; data-console=\u0026quot;false\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-display\u0026quot; style=\u0026quot;vertical-align: center\u0026quot;\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link-chevron\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;expander-arrow-hide\u0026quot; style=\u0026quot;vertical-align: middle;\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;show-hide\u0026quot; data-ishidden=\u0026quot;true\u0026quot; style=\u0026quot;vertical-align: middle\u0026quot;\u0026gt;Show code snippet\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code snippet-currently-hidden\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026apos;use strict\u0026apos;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt; = (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) =\u0026amp;gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; original = { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(), \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Math\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;random\u0026lt;/span\u0026gt;() };\n  original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; = original;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt;(original);\n  \n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// They\u0026apos;re different objects:\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original !== clone);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt; !== clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;);\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// They\u0026apos;re cyclical:\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; === original);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; === clone);\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// They contain equivalent values:\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt; === clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Number\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;) === \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Number\u0026lt;/span\u0026gt;(clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;));\n  \n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Assertions complete.\u0026quot;\u0026lt;/span\u0026gt;);\n};\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt; = obj =\u0026amp;gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; oldState = history.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;state\u0026lt;/span\u0026gt;;\n  history.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replaceState\u0026lt;/span\u0026gt;(obj, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clonedObj = history.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;state\u0026lt;/span\u0026gt;;\n  history.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replaceState\u0026lt;/span\u0026gt;(oldState, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; clonedObj;\n};\n\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;();\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif2\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Though synchronous, this can be extremely slow. It incurs all of the overhead associated with manipulating the browser history. Calling this method repeatedly can cause Chrome to become temporarily unresponsive.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/Notification/Notification\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Notification\u0026lt;/code\u0026gt; constructor\u0026lt;/a\u0026gt; creates a structured clone of its associated data. It also attempts to display a browser notification to the user, but this will silently fail unless you have requested notification permission. In case you have the permission for other purposes, we\u0026apos;ll immediately close the notification we\u0026apos;ve created.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt; = obj =\u0026amp;gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; n = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Notification\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;, {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;: obj, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;silent\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;});\n  n.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;onshow\u0026lt;/span\u0026gt; = n.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;close\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;bind\u0026lt;/span\u0026gt;(n);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; n.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;;\n};\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Example Use:\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;true\u0026quot; data-console=\u0026quot;false\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-display\u0026quot; style=\u0026quot;vertical-align: center\u0026quot;\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link-chevron\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;expander-arrow-hide\u0026quot; style=\u0026quot;vertical-align: middle;\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;show-hide\u0026quot; data-ishidden=\u0026quot;true\u0026quot; style=\u0026quot;vertical-align: middle\u0026quot;\u0026gt;Show code snippet\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code snippet-currently-hidden\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026apos;use strict\u0026apos;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt; = (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) =\u0026amp;gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; original = { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(), \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Math\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;random\u0026lt;/span\u0026gt;() };\n  original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; = original;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt;(original);\n  \n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// They\u0026apos;re different objects:\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original !== clone);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt; !== clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;);\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// They\u0026apos;re cyclical:\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; === original);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;self\u0026lt;/span\u0026gt; === clone);\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// They contain equivalent values:\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt; === clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Number\u0026lt;/span\u0026gt;(original.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;) === \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Number\u0026lt;/span\u0026gt;(clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;));\n  \n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Assertions complete.\u0026quot;\u0026lt;/span\u0026gt;);\n};\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;structuredClone\u0026lt;/span\u0026gt; = obj =\u0026amp;gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; n = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Notification\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;, {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;: obj, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;silent\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;});\n  n.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;close\u0026lt;/span\u0026gt;();\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; n.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;;\n};\n\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;();\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif3\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Assuming that you have only properties and not any functions in your object, you can  just use:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObject = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(oldObject));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If there wasn\u0026apos;t any builtin one, you could try:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; (obj) !== \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;object\u0026apos;\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;isActiveClone\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; temp = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//or new Date(obj);\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; temp = obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(obj, key)) {\n            obj[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;isActiveClone\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n            temp[key] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj[key]);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; obj[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;isActiveClone\u0026apos;\u0026lt;/span\u0026gt;];\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; temp;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;The efficient way to clone(not deep-clone) an object in one line of code\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;An \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Object.assign\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; method is part of the ECMAScript 2015 (ES6) standard and does exactly what you need.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, obj);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;The Object.assign() method is used to copy the values of all enumerable own properties from one or more source objects to a target object.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Read more...\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;strong\u0026gt;polyfill\u0026lt;/strong\u0026gt; to support older browsers:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperty\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;assign\u0026apos;\u0026lt;/span\u0026gt;, {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;enumerable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;configurable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;writable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;target\u0026lt;/span\u0026gt;) {\n      \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;use strict\u0026apos;\u0026lt;/span\u0026gt;;\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (target === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt; || target === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;TypeError\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Cannot convert first argument to object\u0026apos;\u0026lt;/span\u0026gt;);\n      }\n\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; to = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;(target);\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;; i \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;arguments\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i++) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; nextSource = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;arguments\u0026lt;/span\u0026gt;[i];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (nextSource === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt; || nextSource === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;continue\u0026lt;/span\u0026gt;;\n        }\n        nextSource = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;(nextSource);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; keysArray = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;(nextSource);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; nextIndex = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, len = keysArray.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; nextIndex \u0026amp;lt; len; nextIndex++) {\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; nextKey = keysArray[nextIndex];\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; desc = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptor\u0026lt;/span\u0026gt;(nextSource, nextKey);\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (desc !== \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; desc.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;enumerable\u0026lt;/span\u0026gt;) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; to;\n    }\n  });\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Deep copy by performance:\u0026lt;/strong\u0026gt;\nRanked from best to worst\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;spread operator \u0026lt;code\u0026gt;...\u0026lt;/code\u0026gt; (primitive arrays - only)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;splice(0)\u0026lt;/code\u0026gt; (primitive arrays - only)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;slice()\u0026lt;/code\u0026gt; (primitive arrays - only)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;concat()\u0026lt;/code\u0026gt; (primitive arrays - only)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;custom function, as seen below (any array)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;jQuery\u0026apos;s \u0026lt;code\u0026gt;$.extend()\u0026lt;/code\u0026gt; (any array)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;JSON.parse(JSON.stringify())\u0026lt;/code\u0026gt; (primitive and literal arrays - only)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Underscore\u0026apos;s \u0026lt;code\u0026gt;_.clone()\u0026lt;/code\u0026gt; (primitive and literal arrays - only)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Lodash\u0026apos;s \u0026lt;code\u0026gt;_.cloneDeep()\u0026lt;/code\u0026gt; (any array)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;Where:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;primitives = strings, numbers, and booleans\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;literals = object literals \u0026lt;code\u0026gt;{}\u0026lt;/code\u0026gt;, array literals \u0026lt;code\u0026gt;[]\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;any = primitives, literals, and prototypes\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Deep copy an array of primitives:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr1a = [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;];\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;To deep copy arrays with primitives only (i.e. numbers, strings, and booleans), reassignment, \u0026lt;code\u0026gt;slice()\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;concat()\u0026lt;/code\u0026gt;, and Underscore\u0026apos;s \u0026lt;code\u0026gt;clone()\u0026lt;/code\u0026gt; can be used.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Where spread has the fastest performance:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr1b = [...arr1a];\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And where \u0026lt;code\u0026gt;slice()\u0026lt;/code\u0026gt; has better performance than \u0026lt;code\u0026gt;concat()\u0026lt;/code\u0026gt;: \u0026lt;a href=\u0026quot;https://jsbench.me/x5ktn7o94d/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://jsbench.me/x5ktn7o94d/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr1c = arr1a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;splice\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr1d = arr1a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr1e = arr1a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;concat\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Deep copy an array of primitive and object literals:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr2a = [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, {}, []];\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr2b = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(arr2a));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Deep copy an array of primitive, object literals, and prototypes:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr3a = [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, {}, [], \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;()];\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Write a custom function (has faster performance than \u0026lt;code\u0026gt;$.extend()\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;JSON.parse\u0026lt;/code\u0026gt;):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copy\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;aObject\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Prevent undefined objects\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// if (!aObject) return aObject;\u0026lt;/span\u0026gt;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; bObject = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isArray\u0026lt;/span\u0026gt;(aObject) ? [] : {};\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; value;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; aObject) {\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Prevent self-references to parent object\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// if (Object.is(aObject[key], aObject)) continue;\u0026lt;/span\u0026gt;\n    \n    value = aObject[key];\n\n    bObject[key] = (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; value === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt;) ? \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copy\u0026lt;/span\u0026gt;(value) : value;\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; bObject;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr3b = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copy\u0026lt;/span\u0026gt;(arr3a);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Or use third-party utility functions:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr3c = $.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, [], arr3a); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// jQuery Extend\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; arr3d = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDeep\u0026lt;/span\u0026gt;(arr3a); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Lodash\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Note: jQuery\u0026apos;s \u0026lt;code\u0026gt;$.extend\u0026lt;/code\u0026gt; also has better performance than \u0026lt;code\u0026gt;JSON.parse(JSON.stringify())\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://jsbench.me/5kktn8f3ss\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;js-deep-copy\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://jsbench.me/imktn8ppco\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;jquery-extend-vs-json-parse\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is what I\u0026apos;m using:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clone = {};\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt;(obj[i])==\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; obj[i] != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;)\n            clone[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(obj[i]);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n            clone[i] = obj[i];\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; clone;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Code:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// extends \u0026apos;from\u0026apos; object with members from \u0026apos;to\u0026apos;. If \u0026apos;to\u0026apos; is null, a deep clone of \u0026apos;from\u0026apos; is returned\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;, to\u0026lt;/span\u0026gt;)\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Function\u0026lt;/span\u0026gt; ||\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Number\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Boolean\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;);\n\n    to = to || \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; name \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;)\n    {\n        to[name] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; to[name] == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;undefined\u0026quot;\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt;[name], \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) : to[name];\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; to;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Test:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj =\n{\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(),\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;q\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; + q; },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;text\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;asdasd\u0026quot;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;asd\u0026quot;\u0026lt;/span\u0026gt;],\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;regex\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/aaa/i\u0026lt;/span\u0026gt;),\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;subobj\u0026lt;/span\u0026gt;:\n    {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;234\u0026lt;/span\u0026gt;,\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;text\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;asdsaD\u0026quot;\u0026lt;/span\u0026gt;\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;(obj);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Deep copying objects in JavaScript (I think the best and the simplest)\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;1. Using JSON.parse(JSON.stringify(object));\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = { \n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: { \n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n  }\n}\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObj = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj));\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(obj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: { c: 20 } }\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(newObj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: { c: 2 } } \u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;2.Using created method\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clone = {};\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(obj[i] != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp;  \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt;(obj[i])==\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt;)\n            clone[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(obj[i]);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n            clone[i] = obj[i];\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; clone;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = { \n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: { \n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n  }\n}\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObj = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(obj);\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(obj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: { c: 20 } }\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(newObj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: { c: 2 } } \u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;3. Using Lo-Dash\u0026apos;s _.cloneDeep\u0026lt;/strong\u0026gt; link \u0026lt;a href=\u0026quot;https://lodash.com/docs/4.17.10#cloneDeep\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;lodash\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = { \n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: { \n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n  }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObj = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDeep\u0026lt;/span\u0026gt;(obj);\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(obj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: { c: 20 } }\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(newObj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: { c: 2 } } \u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;4. Using Object.assign() method\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = { \n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObj = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj);\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(obj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: 20 }\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(newObj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: 2 }  \u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;BUT WRONG WHEN\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = { \n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: { \n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n  }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObj = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, obj);\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(obj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: { c: 20 } }\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(newObj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: { c: 20 } } --\u0026amp;gt; WRONG\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Note: Properties on the prototype chain and non-enumerable properties cannot be copied.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;5.Using Underscore.js _.clone\u0026lt;/strong\u0026gt; link \u0026lt;a href=\u0026quot;https://underscorejs.org/#clone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Underscore.js\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = { \n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObj = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj);\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(obj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: 20 }\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(newObj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: 2 }  \u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;BUT WRONG WHEN\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = { \n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: { \n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n  }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObj = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDeep\u0026lt;/span\u0026gt;(obj);\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(obj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: { c: 20 } }\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(newObj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { a: 1, b: { c: 20 } } --\u0026amp;gt; WRONG\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// (Create a shallow-copied clone of the provided plain object. Any nested objects or arrays will be copied by reference, not duplicated.)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;JSBEN.CH Performance Benchmarking Playground 1~3 \u0026lt;a href=\u0026quot;http://jsben.ch/KVQLd\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://jsben.ch/KVQLd\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;\n\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/Assgk.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/Assgk.png\u0026quot; alt=\u0026quot;Performance Deep copying objects in JavaScript\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Cloning an object was always a concern in JS, but it was all about before ES6, I list different ways of copying an object in JavaScript below, imagine you have the Object below and would like to have a deep copy of that:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;d\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;};\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;There are few ways to copy this object, without changing the origin:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;ES5+, Using a simple function to do the copy for you:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCopyObj\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; == obj || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;();\n        copy.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setTime\u0026lt;/span\u0026gt;(obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTime\u0026lt;/span\u0026gt;());\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = [];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, len = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i \u0026amp;lt; len; i++) {\n            copy[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCopyObj\u0026lt;/span\u0026gt;(obj[i]);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = {};\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; attr \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(attr)) copy[attr] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCopyObj\u0026lt;/span\u0026gt;(obj[attr]);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; copy;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Error\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Unable to copy obj this object.\u0026quot;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;ES5+, using \u0026lt;code\u0026gt;JSON.parse\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;JSON.stringify\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; deepCopyObj = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Angular:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; deepCopyObj = angular.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;copy\u0026lt;/span\u0026gt;(obj);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;jQuery:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; deepCopyObj = jQuery.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, {}, obj);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Underscore.js \u0026amp;amp; Lodash:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; deepCopyObj = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDeep\u0026lt;/span\u0026gt;(obj); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//latest version of Underscore.js makes shallow copy\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;Hope these help\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObj = (\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) ? [] : {};\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[i] \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[i] == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt;) {\n            newObj[i] = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[i].\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;();\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n        {\n            newObj[i] = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;[i];\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newObj;\n}; \n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperty\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;clone\u0026quot;\u0026lt;/span\u0026gt;, {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;: clone, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;enumerable\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Theres a \u0026lt;a href=\u0026quot;https://github.com/pvorb/node-clone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;library (called clone)\u0026lt;/a\u0026gt;, that does this quite well. It provides the most complete recursive cloning/copying of arbitrary objects that I know of. It also supports circular references, which is not covered by the other answers, yet.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can \u0026lt;a href=\u0026quot;https://npmjs.org/package/clone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;find it on npm\u0026lt;/a\u0026gt;, too. It can be used for the browser as well as Node.js.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here is an example on how to use it:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Install it with\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;npm install clone\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or package it with \u0026lt;a href=\u0026quot;https://github.com/ender-js/Ender\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Ender\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;ender build clone [...]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can also download the source code manually.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Then you can use it in your source code.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;require\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;clone\u0026apos;\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; a = { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bar\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;baz\u0026apos;\u0026lt;/span\u0026gt; } };  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// inital value of a\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; b = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(a);                 \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// clone a -\u0026amp;gt; b\u0026lt;/span\u0026gt;\na.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;bar\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;foo\u0026apos;\u0026lt;/span\u0026gt;;                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// change a\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(a);                   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { foo: { bar: \u0026apos;foo\u0026apos; } }\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(b);                   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// { foo: { bar: \u0026apos;baz\u0026apos; } }\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;(Disclaimer: Im the author of the library.)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I know this is an old post, but I thought this may be of some help to the next person who stumbles along.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;As long as you don\u0026apos;t assign an object to anything it maintains no reference in memory.  So to make an object that you want to share among other objects, you\u0026apos;ll have to create a factory like so:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; a = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;father\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;zacharias\u0026apos;\u0026lt;/span\u0026gt;\n    };\n},\nb = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;(),\nc = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;();\nc.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;father\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;johndoe\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(b.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;father\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you\u0026apos;re using it, the \u0026lt;a href=\u0026quot;https://underscorejs.org/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Underscore.js\u0026lt;/a\u0026gt; library has a \u0026lt;a href=\u0026quot;https://underscorejs.org/#clone\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;clone\u0026lt;/a\u0026gt; method.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObject = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(oldObject);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here\u0026apos;s a version of ConroyP\u0026apos;s answer above that works even if the constructor has required parameters:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//If Object.create isn\u0026apos;t already defined, we just do the simple shim,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//without the second argument, since that\u0026apos;s all we need here\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; object_create = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; object_create !== \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;function\u0026apos;\u0026lt;/span\u0026gt;) {\n    object_create = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;F\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {}\n        F.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; = o;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;F\u0026lt;/span\u0026gt;();\n    };\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCopy\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(obj == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt;(obj) !== \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;object\u0026apos;\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n    }\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//make sure the returned object has the same prototype as the original\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; ret = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;object_create\u0026lt;/span\u0026gt;(obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj){\n        ret[key] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCopy\u0026lt;/span\u0026gt;(obj[key]);\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ret;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This function is also available in my \u0026lt;a href=\u0026quot;https://github.com/mbrowne/simpleoo.js\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;simpleoo\u0026lt;/a\u0026gt; library.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Edit:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here\u0026apos;s a more robust version (thanks to Justin McCandless this now supports cyclic references as well):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n * Deep copy an object (make copies of all its object properties, sub-properties, etc.)\n * An improved version of http://keithdevens.com/weblog/archive/2007/Jun/07/javascript.clone\n * that doesn\u0026apos;t break if the constructor has required parameters\n * \n * It also borrows some code from http://stackoverflow.com/a/11621004/560114\n */\u0026lt;/span\u0026gt; \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCopy\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;src, \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* INTERNAL */\u0026lt;/span\u0026gt; _visited, _copiesVisited\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(src === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt;(src) !== \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;object\u0026apos;\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; src;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Honor native/custom clone methods\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; src.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;function\u0026apos;\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; src.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Special cases:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Date\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(src \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(src.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTime\u0026lt;/span\u0026gt;());\n    }\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//RegExp\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(src \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(src);\n    }\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//DOM Element\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(src.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;nodeType\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; src.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;cloneNode\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;function\u0026apos;\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; src.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneNode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Initialize the visited objects arrays if needed.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This is used to detect cyclic references.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (_visited === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;){\n        _visited = [];\n        _copiesVisited = [];\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Check if this object has already been visited\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i, len = _visited.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; len; i++) {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// If so, get the copy we already made\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (src === _visited[i]) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; _copiesVisited[i];\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Array\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;toString\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(src) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;[object Array]\u0026apos;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//[].slice() by itself would soft clone\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; ret = src.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;();\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//add it to the visited array\u0026lt;/span\u0026gt;\n        _visited.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(src);\n        _copiesVisited.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(ret);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (i--) {\n            ret[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCopy\u0026lt;/span\u0026gt;(ret[i], _visited, _copiesVisited);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ret;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//If we\u0026apos;ve reached here, we have a regular object\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//make sure the returned object has the same prototype as the original\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; proto = (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt;(src): src.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;__proto__\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!proto) {\n        proto = src.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//this line would probably only be reached by very old browsers \u0026lt;/span\u0026gt;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; dest = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;object_create\u0026lt;/span\u0026gt;(proto);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//add this object to the visited array\u0026lt;/span\u0026gt;\n    _visited.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(src);\n    _copiesVisited.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(dest);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; src) {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Note: this does NOT preserve ES5 property attributes like \u0026apos;writable\u0026apos;, \u0026apos;enumerable\u0026apos;, etc.\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//For an example of how this could be modified to do so, see the singleMixin() function\u0026lt;/span\u0026gt;\n        dest[key] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deepCopy\u0026lt;/span\u0026gt;(src[key], _visited, _copiesVisited);\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; dest;\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//If Object.create isn\u0026apos;t already defined, we just do the simple shim,\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//without the second argument, since that\u0026apos;s all we need here\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; object_create = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; object_create !== \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;function\u0026apos;\u0026lt;/span\u0026gt;) {\n    object_create = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;F\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {}\n        F.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; = o;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;F\u0026lt;/span\u0026gt;();\n    };\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The following creates two instances of the same object. I found it and am using it currently. It\u0026apos;s simple and easy to use.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; objToCreate = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(cloneThis));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Crockford suggests (and I prefer) using this function:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;o\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;F\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {}\n    F.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; = o;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;F\u0026lt;/span\u0026gt;();\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObject = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;(oldObject);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It\u0026apos;s terse, works as expected and you don\u0026apos;t need a library.\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;EDIT:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is a polyfill for \u0026lt;code\u0026gt;Object.create\u0026lt;/code\u0026gt;, so you also can use this.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObject = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;create\u0026lt;/span\u0026gt;(oldObject);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;NOTE:\u0026lt;/strong\u0026gt;  If you use some of this, you may have problems with some iteration who use \u0026lt;code\u0026gt;hasOwnProperty\u0026lt;/code\u0026gt;. Because, \u0026lt;code\u0026gt;create\u0026lt;/code\u0026gt; create new empty object who inherits \u0026lt;code\u0026gt;oldObject\u0026lt;/code\u0026gt;. But it is still useful and practical for cloning objects.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For exemple if  \u0026lt;code\u0026gt;oldObject.a = 5;\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;newObject.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// is 5\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;but:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;oldObject.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(a); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// is true\u0026lt;/span\u0026gt;\nnewObject.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(a); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// is false\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Lodash has a nice \u0026lt;a href=\u0026quot;http://lodash.com/docs#cloneDeep\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;_.cloneDeep(value)\u0026lt;/a\u0026gt; method:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; objects = [{ \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; }, { \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;b\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; }];\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; deep = _.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDeep\u0026lt;/span\u0026gt;(objects);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(deep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] === objects[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// =\u0026amp;gt; false\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;)\n { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clone = {};\n   clone.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (property \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) clone[property] = obj[property];\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; clone;\n }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Shallow copy one-liner (\u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/ECMAScript#5th_Edition\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;ECMAScript 5th edition\u0026lt;/a\u0026gt;):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; origin = { foo : {} };\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;(origin).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;reduce\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;c,k\u0026lt;/span\u0026gt;){c[k]=origin[k];\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; c;},{});\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(origin, copy);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(origin == copy); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// false\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(origin.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt; == copy.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// true\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And shallow copy one-liner (\u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;ECMAScript 6th edition\u0026lt;/a\u0026gt;, 2015):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; origin = { foo : {} };\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; copy = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;assign\u0026lt;/span\u0026gt;({}, origin);\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(origin, copy);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(origin == copy); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// false\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(origin.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt; == copy.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// true\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There seems to be no ideal deep clone operator yet for array-like objects.  As the code below illustrates, John Resig\u0026apos;s jQuery cloner turns arrays with non-numeric properties into objects that are not arrays, and RegDwight\u0026apos;s JSON cloner drops the non-numeric properties. The following tests illustrate these points on multiple browsers:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;jQueryClone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; jQuery.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, {}, obj)\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;JSONClone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj))\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; arrayLikeObj = [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;], [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;]];\narrayLikeObj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;names\u0026lt;/span\u0026gt; = [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;m\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;n\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;o\u0026quot;\u0026lt;/span\u0026gt;];\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;Copy = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;Clone(arrayLikeObj);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; jQueryCopy = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;jQueryClone\u0026lt;/span\u0026gt;(arrayLikeObj);\n\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Is arrayLikeObj an array instance?\u0026quot;\u0026lt;/span\u0026gt; + (arrayLikeObj \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) +\n      \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\nIs the jQueryClone an array instance? \u0026quot;\u0026lt;/span\u0026gt; + (jQueryCopy \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;) +\n      \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\nWhat are the arrayLikeObj names? \u0026quot;\u0026lt;/span\u0026gt; + arrayLikeObj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;names\u0026lt;/span\u0026gt; +\n      \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\nAnd what are the JSONClone names? \u0026quot;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;Copy.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;names\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Just because I didn\u0026apos;t see \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/AngularJS\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;AngularJS\u0026lt;/a\u0026gt; mentioned and thought that people might want to know...\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://docs.angularjs.org/api/ng/function/angular.copy\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;angular.copy\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; also provides a method of deep copying objects and arrays.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I have two good answers depending on whether your objective is to clone a \u0026quot;plain old JavaScript object\u0026quot; or not.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Let\u0026apos;s also assume that your intention is to create a complete clone with no prototype references back to the source object. If you\u0026apos;re not interested in a complete clone, then you can use many of the Object.clone() routines provided in some of the other answers (Crockford\u0026apos;s pattern).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For plain old JavaScript objects, a tried and true good way to clone an object in modern runtimes is quite simply:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; clone = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note that the source object must be a pure JSON object. This is to say, all of its nested properties must be scalars (like boolean, string, array, object, etc). Any functions or special objects like RegExp or Date will not be cloned.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Is it efficient? Heck yes. We\u0026apos;ve tried all kinds of cloning methods and this works best. I\u0026apos;m sure some ninja could conjure up a faster method. But I suspect we\u0026apos;re talking about marginal gains.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This approach is just simple and easy to implement. Wrap it into a convenience function and if you really need to squeeze out some gain, go for at a later time.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Now, for non-plain JavaScript objects, there isn\u0026apos;t a really simple answer.  In fact, there can\u0026apos;t be because of the dynamic nature of JavaScript functions and inner object state. Deep cloning a JSON structure with functions inside requires you recreate those functions and their inner context. And JavaScript simply doesn\u0026apos;t have a standardized way of doing that.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The correct way to do this, once again, is via a convenience method that you declare and reuse within your code. The convenience method can be endowed with some understanding of your own objects so you can make sure to properly recreate the graph within the new object.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;We\u0026apos;re written our own, but the best general approach I\u0026apos;ve seen is covered here:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://davidwalsh.name/javascript-clone\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://davidwalsh.name/javascript-clone\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This is the right idea. The author (David Walsh) has commented out the cloning of generalized functions. This is something you might choose to do, depending on your use case.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The main idea is that you need to special handle the instantiation of your functions (or prototypal classes, so to speak) on a per-type basis. Here, he\u0026apos;s provided a few examples for RegExp and Date.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Not only is this code brief, but it\u0026apos;s also very readable. It\u0026apos;s pretty easy to extend.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Is this efficient? Heck yes. Given that the goal is to produce a true deep-copy clone, then you\u0026apos;re going to have to walk the members of the source object graph. With this approach, you can tweak exactly which child members to treat and how to manually handle custom types.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So there you go. Two approaches. Both are efficient in my view.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I am late to answer this question, but I have an another way of cloning the object:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; || \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt;(obj) !== \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;object\u0026apos;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; temp = obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// changed\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(obj, key)) {\n            obj[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;isActiveClone\u0026apos;\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n            temp[key] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;(obj[key]);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; obj[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;isActiveClone\u0026apos;\u0026lt;/span\u0026gt;];\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; temp;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; b = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneObject\u0026lt;/span\u0026gt;({\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;});   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// calling\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;which is much better and faster then:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; a = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;};\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; b = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(a));  \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;and\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; a = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;a\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;};\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Deep copy\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newObject = jQuery.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extend\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, {}, a);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I have bench-marked the code and you can test the results \u0026lt;a href=\u0026quot;http://jsben.ch/vyEky\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;and sharing the results:\n\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/K8ztO.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/K8ztO.png\u0026quot; alt=\u0026quot;enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\nReferences: \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This isn\u0026apos;t generally the most efficient solution, but it does what I need. Simple test cases below...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj, clones\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Makes a deep copy of \u0026apos;obj\u0026apos;. Handles cyclic structures by\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// tracking cloned obj\u0026apos;s in the \u0026apos;clones\u0026apos; parameter. Functions \u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// are included, but not cloned. Functions members are cloned.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; new_obj,\n        already_cloned,\n        t = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; obj,\n        i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n        l,\n        pair; \n\n    clones = clones || [];\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; obj;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (t === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt; || t === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;function\u0026quot;\u0026lt;/span\u0026gt;) {\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// check to see if we\u0026apos;ve already cloned obj\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, l = clones.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i \u0026amp;lt; l; i++) {\n            pair = clones[i];\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (pair[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] === obj) {\n                already_cloned = pair[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n            }\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (already_cloned) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; already_cloned; \n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (t === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// create new object\u0026lt;/span\u0026gt;\n                new_obj = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Just use functions as is\u0026lt;/span\u0026gt;\n                new_obj = obj;\n            }\n\n            clones.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;([obj, new_obj]); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// keep track of objects we\u0026apos;ve cloned\u0026lt;/span\u0026gt;\n\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// clone object members\u0026lt;/span\u0026gt;\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(key)) {\n                    new_obj[key] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(obj[key], clones);\n                }\n            }\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; new_obj || obj;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Cyclic array test...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;a = []\na.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;c\u0026quot;\u0026lt;/span\u0026gt;, a)\naa = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(a)\naa === a \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//=\u0026amp;gt; false\u0026lt;/span\u0026gt;\naa[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] === a \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//=\u0026amp;gt; false\u0026lt;/span\u0026gt;\naa[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] === a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//=\u0026amp;gt; false\u0026lt;/span\u0026gt;\naa[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] === aa \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//=\u0026amp;gt; true\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Function test...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;f = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Function\u0026lt;/span\u0026gt;\nf.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; = a\nff = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(f)\nff === f \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//=\u0026amp;gt; true\u0026lt;/span\u0026gt;\nff.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt; === a \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//=\u0026amp;gt; false\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Only when you can use \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;ECMAScript 6\u0026lt;/a\u0026gt; or \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Source-to-source_compiler\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;transpilers\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Features:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Won\u0026apos;t trigger getter/setter while copying.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Preserves getter/setter.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Preserves prototype informations.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Works with both \u0026lt;strong\u0026gt;object-literal\u0026lt;/strong\u0026gt; and \u0026lt;strong\u0026gt;functional\u0026lt;/strong\u0026gt; \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Object-oriented_programming\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;OO\u0026lt;/a\u0026gt; writing styles.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;Code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;target, source\u0026lt;/span\u0026gt;){\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; source){\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Use getOwnPropertyDescriptor instead of source[key] to prevent from trigering setter/getter.\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; descriptor = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getOwnPropertyDescriptor\u0026lt;/span\u0026gt;(source, key);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;){\n            target[key] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;(descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;){\n            target[key] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;([], descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;){\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; prototype = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt;(descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; cloneObject = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;({}, descriptor.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setPrototypeOf\u0026lt;/span\u0026gt;(cloneObject, prototype);\n            target[key] = cloneObject;\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperty\u0026lt;/span\u0026gt;(target, key, descriptor);\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; prototype = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getPrototypeOf\u0026lt;/span\u0026gt;(source);\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setPrototypeOf\u0026lt;/span\u0026gt;(target, prototype);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; target;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For the people who want to use the \u0026lt;code\u0026gt;JSON.parse(JSON.stringify(obj))\u0026lt;/code\u0026gt; version, but without losing the Date objects, you can use the \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse#Using_the_reviver_parameter\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;second argument of \u0026lt;code\u0026gt;parse\u0026lt;/code\u0026gt; method\u0026lt;/a\u0026gt; to convert the strings back to Date:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;false\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; regExp = \u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj), \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;k, v\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; v === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;string\u0026apos;\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; regExp.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;test\u0026lt;/span\u0026gt;(v))\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(v)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; v;\n  })\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// usage:\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; original = {\n \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;}, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;()],\n \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: {\n   \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;){ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt; }\n }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; cloned = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(original)\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(cloned)\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif4\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I disagree with the answer with the greatest votes \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/5344074/1110941\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;. A \u0026lt;strong\u0026gt;Recursive Deep Clone\u0026lt;/strong\u0026gt; is \u0026lt;strong\u0026gt;much faster\u0026lt;/strong\u0026gt; than the \u0026lt;em\u0026gt;JSON.parse(JSON.stringify(obj))\u0026lt;/em\u0026gt; approach mentioned. \u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Jsperf\u0026lt;/strong\u0026gt; ranks it number one here: \u0026lt;a href=\u0026quot;https://jsperf.com/deep-copy-vs-json-stringify-json-parse/5\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://jsperf.com/deep-copy-vs-json-stringify-json-parse/5\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Jsben\u0026lt;/strong\u0026gt; from the answer above updated to show that a recursive deep clone beats all the others mentioned: \u0026lt;a href=\u0026quot;http://jsben.ch/13YKQ\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://jsben.ch/13YKQ\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;And here\u0026apos;s the function for quick reference:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDeep\u0026lt;/span\u0026gt; (o) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; newO\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; i\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; o !== \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;object\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; o\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!o) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; o\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;toString\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;apply\u0026lt;/span\u0026gt;(o) === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;[object Array]\u0026apos;\u0026lt;/span\u0026gt;) {\n    newO = []\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; o.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i += \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) {\n      newO[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDeep\u0026lt;/span\u0026gt;(o[i])\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newO\n  }\n\n  newO = {}\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; o) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (o.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(i)) {\n      newO[i] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneDeep\u0026lt;/span\u0026gt;(o[i])\n    }\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newO\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is a comprehensive clone() method that can clone any JavaScript object. It handles almost all the cases:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;src, deep\u0026lt;/span\u0026gt;) {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; toString = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;toString\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!src \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; src != \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Any non-object (Boolean, String, Number), null, undefined, NaN\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; src;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Honor native/custom clone methods\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (src.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; toString.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(src.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[object Function]\u0026quot;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; src.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(deep);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// DOM elements\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (src.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;nodeType\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; toString.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(src.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;cloneNode\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[object Function]\u0026quot;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; src.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;cloneNode\u0026lt;/span\u0026gt;(deep);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Date\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (toString.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(src) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[object Date]\u0026quot;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(src.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTime\u0026lt;/span\u0026gt;());\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// RegExp\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (toString.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(src) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[object RegExp]\u0026quot;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(src);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Function\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (toString.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(src) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[object Function]\u0026quot;\u0026lt;/span\u0026gt;) {\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Wrap in another method to make sure == is not true;\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Note: Huge performance issue due to closures, comment this :)\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;){\n            src.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;apply\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;arguments\u0026lt;/span\u0026gt;);\n        });\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; ret, index;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Array\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (toString.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;call\u0026lt;/span\u0026gt;(src) == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;[object Array]\u0026quot;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//[].slice(0) would soft clone\u0026lt;/span\u0026gt;\n        ret = src.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;slice\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (deep) {\n            index = ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (index--) {\n                ret[index] = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(ret[index], \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n            }\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Object\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        ret = src.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; src.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;constructor\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) : {};\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; prop \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; src) {\n            ret[prop] = deep\n                ? \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clone\u0026lt;/span\u0026gt;(src[prop], \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n                : src[prop];\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ret;\n};\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":100,"title":"What is the most efficient way to deep clone an object in JavaScript?","content":"\n                    \u0026lt;div\u0026gt;\n            \u0026lt;aside class=\u0026quot;s-notice s-notice__info post-notice js-post-notice mb16\u0026quot; role=\u0026quot;status\u0026quot;\u0026gt;\n        \u0026lt;div class=\u0026quot;d-flex fd-column fw-nowrap\u0026quot;\u0026gt;\n            \u0026lt;div class=\u0026quot;d-flex fw-nowrap\u0026quot;\u0026gt;\n                    \u0026lt;div class=\u0026quot;flex--item mr8\u0026quot;\u0026gt;\n                        \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;svg-icon iconLock\u0026quot; width=\u0026quot;18\u0026quot; height=\u0026quot;18\u0026quot; viewBox=\u0026quot;0 0 18 18\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;M16 9a2 2 0 0 0-2-2V6A5 5 0 0 0 4 6v1a2 2 0 0 0-2 2v6c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9Zm-7 5a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm3.1-7H5.9V6a3.1 3.1 0 0 1 6.2 0v1Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                    \u0026lt;/div\u0026gt;\n                \u0026lt;div class=\u0026quot;flex--item wmn0 fl1 lh-lg\u0026quot;\u0026gt;\n                    \u0026lt;div class=\u0026quot;flex--item fl1 lh-lg\u0026quot;\u0026gt;\n                        \u0026lt;b\u0026gt;This question\u0026apos;s answers are a \u0026lt;a href=\u0026quot;/help/privileges/edit-community-wiki\u0026quot;\u0026gt;community effort\u0026lt;/a\u0026gt;\u0026lt;/b\u0026gt;. Edit existing answers to improve this post. It is not currently accepting new answers or interactions.\n                        \n                    \u0026lt;/div\u0026gt;\n                \u0026lt;/div\u0026gt;\n            \u0026lt;/div\u0026gt;\n        \u0026lt;/div\u0026gt;\n\u0026lt;/aside\u0026gt;\n\n    \u0026lt;/div\u0026gt;\n\n\u0026lt;p\u0026gt;What is the most efficient way to clone a JavaScript object? I\u0026apos;ve seen \u0026lt;code\u0026gt;obj = eval(uneval(o));\u0026lt;/code\u0026gt; being used, but \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/uneval\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;that\u0026apos;s non-standard and only supported by Firefox\u0026lt;/a\u0026gt;.\u0026lt;br\u0026gt;\u0026lt;br\u0026gt; I\u0026apos;ve done things like \u0026lt;code\u0026gt;obj = JSON.parse(JSON.stringify(o));\u0026lt;/code\u0026gt; but question the efficiency. \u0026lt;br\u0026gt;\u0026lt;br\u0026gt; I\u0026apos;ve also seen recursive copying functions with various flaws.\n\u0026lt;br\u0026gt;\nI\u0026apos;m surprised no canonical solution exists.\u0026lt;/p\u0026gt;\n    ","slug":"what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript-1657384601026","postType":"QUESTION","createdAt":"2022-07-09T16:36:41.000Z","updatedAt":"2022-07-09T16:36:41.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"How to Sort a Multi-dimensional Array by Value","slug":"how-to-sort-a-multi-dimensional-array-by-value-1657387746110"},{"title":"How do I clone a list so that it doesn't change unexpectedly after assignment?","slug":"how-do-i-clone-a-list-so-that-it-doesn't-change-unexpectedly-after-assignment-1657384423195"},{"title":"commandButton/commandLink/ajax action/listener method not invoked or input value not set/updated","slug":"commandbuttoncommandlinkajax-actionlistener-method-not-invoked-or-input-value-not-setupdated-1657384667519"},{"title":"Why shouldn't I use mysql_* functions in PHP?","slug":"why-shouldn't-i-use-mysql_*-functions-in-php-1657384260352"},{"title":"Why does my recursive function return None?","slug":"why-does-my-recursive-function-return-none-1657387792894"},{"title":"How do I use shell variables in an awk script?","slug":"how-do-i-use-shell-variables-in-an-awk-script-1657387754261"},{"title":"How to create a generic array in Java?","slug":"how-to-create-a-generic-array-in-java-1657387532298"},{"title":"Scroll to an element with jQuery","slug":"scroll-to-an-element-with-jquery-1657388523178"},{"title":"What are drawbacks or disadvantages of singleton pattern? [closed]","slug":"what-are-drawbacks-or-disadvantages-of-singleton-pattern-closed-1657387360749"},{"title":"How do I use reflection to call a generic method?","slug":"how-do-i-use-reflection-to-call-a-generic-method-1657387256751"},{"title":"What are copy elision and return value optimization?","slug":"what-are-copy-elision-and-return-value-optimization-1657385455976"},{"title":"What's the simplest way to print a Java array?","slug":"what's-the-simplest-way-to-print-a-java-array-1657384702397"},{"title":"JavaScript closure inside loops  simple practical example","slug":"javascript-closure-inside-loops-simple-practical-example-1657384278449"},{"title":"How to remove all duplicates from an array of objects?","slug":"how-to-remove-all-duplicates-from-an-array-of-objects-1657388256190"},{"title":"Removing trailing newline character from fgets() input","slug":"removing-trailing-newline-character-from-fgets()-input-1657387308069"},{"title":"Why are global variables evil? [closed]","slug":"why-are-global-variables-evil-closed-1657388260006"},{"title":"What is the \"N+1 selects problem\" in ORM (Object-Relational Mapping)?","slug":"what-is-the-\"n+1-selects-problem\"-in-orm-(object-relational-mapping)-1657388055597"},{"title":"Is there any way to kill a Thread?","slug":"is-there-any-way-to-kill-a-thread-1657387859831"},{"title":"Retrieving the last record in each group - MySQL","slug":"retrieving-the-last-record-in-each-group-mysql-1657384887369"},{"title":"Aggregate / summarize multiple variables per group (e.g. sum, mean)","slug":"aggregate-summarize-multiple-variables-per-group-(e.g.-sum-mean)-1657387764061"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript-1657384601026"},"buildId":"Zo3C7AOWQzKM9qqyzx2hf","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>