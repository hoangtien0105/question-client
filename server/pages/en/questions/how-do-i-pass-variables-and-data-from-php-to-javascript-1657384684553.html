<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/how-do-i-pass-variables-and-data-from-php-to-javascript-1657384684553","name":"Questions"}}]}</script><title>How do I pass variables and data from PHP to JavaScript? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="
            
        
            
                    
                        
                    
                
                    
                        Want to improve this post? Provide detailed answers to this question, including citations and an explanation of why your answer is correct. Answers without enough detail may be edited or deleted.
                        
                    
                
            
        


    

I have a variable in PHP, and I need its value in my JavaScript code. How can I get my variable from PHP to JavaScript?
I have code that looks like this:
&lt;?php
$val = $myService-&gt;getValue(); // Makes an API and database call

On the same page, I have JavaScript code that needs the value of the $val variable to be passed as a parameter:
&lt;script&gt;
    myPlugin.start($val); // I tried this, but it didn&#x27;t work
    &lt;?php myPlugin.start($val); ?&gt; // This didn&#x27;t work either
    myPlugin.start(&lt;?=$val?&gt;); // This works sometimes, but sometimes it fails
&lt;/script&gt;

    "/><meta property="og:title" content="How do I pass variables and data from PHP to JavaScript? | Solution Checker"/><meta property="og:description" content="
            
        
            
                    
                        
                    
                
                    
                        Want to improve this post? Provide detailed answers to this question, including citations and an explanation of why your answer is correct. Answers without enough detail may be edited or deleted.
                        
                    
                
            
        


    

I have a variable in PHP, and I need its value in my JavaScript code. How can I get my variable from PHP to JavaScript?
I have code that looks like this:
&lt;?php
$val = $myService-&gt;getValue(); // Makes an API and database call

On the same page, I have JavaScript code that needs the value of the $val variable to be passed as a parameter:
&lt;script&gt;
    myPlugin.start($val); // I tried this, but it didn&#x27;t work
    &lt;?php myPlugin.start($val); ?&gt; // This didn&#x27;t work either
    myPlugin.start(&lt;?=$val?&gt;); // This works sometimes, but sometimes it fails
&lt;/script&gt;

    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How do I pass variables and data from PHP to JavaScript?","text":"\n            \n        \n            \n                    \n                        \n                    \n                \n                    \n                        Want to improve this post? Provide detailed answers to this question, including citations and an explanation of why your answer is correct. Answers without enough detail may be edited or deleted.\n                        \n                    \n                \n            \n        \n\n\n    \n\nI have a variable in PHP, and I need its value in my JavaScript code. How can I get my variable from PHP to JavaScript?\nI have code that looks like this:\n&lt;?php\n$val = $myService-&gt;getValue(); // Makes an API and database call\n\nOn the same page, I have JavaScript code that needs the value of the $val variable to be passed as a parameter:\n&lt;script&gt;\n    myPlugin.start($val); // I tried this, but it didn&apos;t work\n    &lt;?php myPlugin.start($val); ?&gt; // This didn&apos;t work either\n    myPlugin.start(&lt;?=$val?&gt;); // This works sometimes, but sometimes it fails\n&lt;/script&gt;\n\n    ","answerCount":19,"upVoteCount":500,"suggestedAnswer":[{"text":"There are actually several approaches to do this. Some require more overhead than others, and some are considered better than others.\n\nIn no particular order:\n\n\nUse AJAX to get the data you need from the server.\nEcho the data into the page somewhere, and use JavaScript to get the information from the DOM.\nEcho the data directly to JavaScript.\n\n\nIn this post, we&apos;ll examine each of the above methods, and see the pros and cons of each, as well as how to implement them.\n\n1. Use AJAX to get the data you need from the server\n\nThis method is considered the best, because your server side and client side scripts are completely separate.\n\nPros\n\n\nBetter separation between layers - If tomorrow you stop using PHP, and want to move to a servlet, a REST API, or some other service, you don&apos;t have to change much of the JavaScript code.\nMore readable - JavaScript is JavaScript, PHP is PHP. Without mixing the two, you get more readable code on both languages.\nAllows for asynchronous data transfer - Getting the information from PHP might be time/resources expensive. Sometimes you just don&apos;t want to wait for the information, load the page, and have the information reach whenever.\nData is not directly found on the markup - This means that your markup is kept clean of any additional data, and only JavaScript sees it.\n\n\nCons\n\n\nLatency - AJAX creates an HTTP request, and HTTP requests are carried over network and have network latencies.\nState - Data fetched via a separate HTTP request won&apos;t include any information from the HTTP request that fetched the HTML document. You may need this information (e.g., if the HTML document is generated in response to a form submission) and, if you do, will have to transfer it across somehow. If you have ruled out embedding the data in the page (which you have if you are using this technique) then that limits you to cookies/sessions which may be subject to race conditions.\n\n\nImplementation Example\n\nWith AJAX, you need two pages, one is where PHP generates the output, and the second is where JavaScript gets that output:\n\nget-data.php\n\n/* Do some operation here, like talk to the database, the file-session\n * The world beyond, limbo, the city of shimmers, and Canada.\n *\n * AJAX generally uses strings, but you can output JSON, HTML and XML as well.\n * It all depends on the Content-type header that you send with your AJAX\n * request. */\n\necho json_encode(42); // In the end, you need to echo the result.\n                      // All data should be json_encode()d.\n\n                      // You can json_encode() any value in PHP, arrays, strings,\n                      //even objects.\n\n\n\nindex.php (or whatever the actual page is named like)\n\n&lt;!-- snip --&gt;\n&lt;script&gt;\n    function reqListener () {\n      console.log(this.responseText);\n    }\n\n    var oReq = new XMLHttpRequest(); // New request object\n    oReq.onload = function() {\n        // This is where you handle what to do with the response.\n        // The actual data is found on this.responseText\n        alert(this.responseText); // Will alert: 42\n    };\n    oReq.open(&quot;get&quot;, &quot;get-data.php&quot;, true);\n    //                               ^ Don&apos;t block the rest of the execution.\n    //                                 Don&apos;t wait until the request finishes to\n    //                                 continue.\n    oReq.send();\n&lt;/script&gt;\n&lt;!-- snip --&gt;\n\n\nThe above combination of the two files will alert 42 when the file finishes loading.\n\nSome more reading material\n\n\nUsing XMLHttpRequest - MDN\nXMLHttpRequest object reference - MDN\nHow do I return the response from an asynchronous call?\n\n\n2. Echo the data into the page somewhere, and use JavaScript to get the information from the DOM\n\nThis method is less preferable to AJAX, but it still has its advantages. It&apos;s still relatively separated between PHP and JavaScript in a sense that there is no PHP directly in the JavaScript.\n\nPros\n\n\nFast - DOM operations are often quick, and you can store and access a lot of data relatively quickly.\n\n\nCons\n\n\nPotentially Unsemantic Markup - Usually, what happens is that you use some sort of &lt;input type=hidden&gt; to store the information, because it&apos;s easier to get the information out of inputNode.value, but doing so means that you have a meaningless element in your HTML. HTML has the &lt;meta&gt; element for data about the document, and HTML 5 introduces data-* attributes for data specifically for reading with JavaScript that can be associated with particular elements.\nDirties up the Source - Data that PHP generates is outputted directly to the HTML source, meaning that you get a bigger and less focused HTML source.\nHarder to get structured data - Structured data will have to be valid HTML, otherwise you&apos;ll have to escape and convert strings yourself.\nTightly couples PHP to your data logic - Because PHP is used in presentation, you can&apos;t separate the two cleanly.\n\n\nImplementation Example\n\nWith this, the idea is to create some sort of element which will not be displayed to the user, but is visible to JavaScript.\n\nindex.php\n\n&lt;!-- snip --&gt;\n&lt;div id=&quot;dom-target&quot; style=&quot;display: none;&quot;&gt;\n    &lt;?php\n        $output = &quot;42&quot;; // Again, do some operation, get the output.\n        echo htmlspecialchars($output); /* You have to escape because the result\n                                           will not be valid HTML otherwise. */\n    ?&gt;\n&lt;/div&gt;\n&lt;script&gt;\n    var div = document.getElementById(&quot;dom-target&quot;);\n    var myData = div.textContent;\n&lt;/script&gt;\n&lt;!-- snip --&gt;\n\n\n3. Echo the data directly to JavaScript\n\nThis is probably the easiest to understand.\n\nPros\n\n\nVery easily implemented - It takes very little to implement this, and understand.\nDoes not dirty source - Variables are outputted directly to JavaScript, so the DOM is not affected.\n\n\nCons\n\n\nTightly couples PHP to your data logic - Because PHP is used in presentation, you can&apos;t separate the two cleanly.\n\n\nImplementation Example\n\nImplementation is relatively straightforward:\n\n&lt;!-- snip --&gt;\n&lt;script&gt;\n    var data = &lt;?php echo json_encode(&quot;42&quot;, JSON_HEX_TAG); ?&gt;; // Don&apos;t forget the extra semicolon!\n&lt;/script&gt;\n&lt;!-- snip --&gt;\n\n\nGood luck!\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"I usually use data-* attributes in HTML.\n&lt;div\n    class=&quot;service-container&quot;\n    data-service=&quot;&lt;?= htmlspecialchars($myService-&gt;getValue()) ?&gt;&quot;\n&gt;\n\n&lt;/div&gt;\n\n&lt;script&gt;\n    $(document).ready(function() {\n        $(&apos;.service-container&apos;).each(function() {\n            var container = $(this);\n            var service = container.data(&apos;service&apos;);\n\n            // Var &quot;service&quot; now contains the value of $myService-&gt;getValue();\n        });\n    });\n&lt;/script&gt;\n\nThis example uses jQuery, but it can be adapted for another library or vanilla JavaScript.\nYou can read more about the dataset property here: https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.dataset\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"I&apos;m going to try a simpler answer:\nExplanation of the problem\nFirst, let&apos;s understand the flow of events when a page is served from our server:\n\nFirst PHP is run, it generates the HTML that is served to the client.\nThen, the HTML is delivered to the client, after PHP is done with it, I&apos;d like to emphasize that once the code leaves the server - PHP is done with it and can no longer access it.\nThen, the HTML with JavaScript reaches the client, which can execute JavaScript on that HTML.\n\nSo really, the core thing to remember here is that HTTP is stateless. Once a request left the server, the server can not touch it. So, that leaves our options to:\n\nSend more requests from the client after the initial request is done.\nEncode what the server had to say in the initial request.\n\nSolutions\nThat&apos;s the core question you should be asking yourself is:\nAm I writing a website or an application?\nWebsites are mainly page based, and the page load times needs to be as fast as possible (for example - Wikipedia). Web applications are more AJAX heavy and perform a lot of round trips to get the client fast information (for example - a stock dashboard).\nWebsite\nSending more requests from the client after the initial request is done is slow as it requires more HTTP requests which have significant overhead. Moreover, it requires asynchronousity as making an AJAX request requires a handler for when it&apos;s complete.\nI would not recommend making another request unless your site is an application for getting that information from the server.\nYou want fast response times which have a huge impact on conversion and load times. Making Ajax requests is slow for the initial uptime in this case and unneeded.\nYou have two ways to tackle the issue\n\nSet a cookie - cookies are headers sent in HTTP requests that both the server and client can read.\nEncode the variable as JSON - JSON looks very close to JavaScript objects and most JSON objects are valid JavaScript variables.\n\nSetting a cookie is really not very difficult, you just assign it a value:\nsetcookie(&quot;MyCookie&quot;, $value); // Sets the cookie to the value, remember, do not\n                               // Set it with HTTP only to true.\n\nThen, you can read it with JavaScript using document.cookie:\nHere is a short hand rolled parser, but the answer I linked to right above this has better tested ones:\nvar cookies = document.cookie.split(&quot;;&quot;).\n    map(function(el){ return el.split(&quot;=&quot;); }).\n    reduce(function(prev,cur){ prev[cur[0]] = cur[1]; return prev },{});\nalert(cookies[&quot;MyCookie&quot;]); // Value set with PHP.\n\nCookies are good for a little data. This is what tracking services often do.\nOnce we have more data, we can encode it with JSON inside a JavaScript variable instead:\n&lt;script&gt;\n    var myServerData = &lt;?=json_encode($value)?&gt;; // Don&apos;t forget to sanitize\n                                                 //server data\n&lt;/script&gt;\n\nAssuming $value is json_encodeable on the PHP side (it usually is). This technique is what Stack Overflow does with its chat for example (only using .NET instead of PHP).\nApplication\nIf you&apos;re writing an application - suddenly the initial load time isn&apos;t always as important as the ongoing performance of the application, and it starts to pay off to load data and code separately.\nMy answer here explains how to load data using AJAX in JavaScript:\nfunction callback(data){\n    // What do I do with the response?\n}\n\nvar httpRequest = new XMLHttpRequest;\nhttpRequest.onreadystatechange = function(){\n    if (httpRequest.readyState === 4) { // Request is done\n        if (httpRequest.status === 200) { // successfully\n            callback(httpRequest.responseText); // We&apos;re calling our method\n        }\n    }\n};\nhttpRequest.open(&apos;GET&apos;, &quot;/echo/json&quot;);\nhttpRequest.send();\n\nOr with jQuery:\n$.get(&quot;/your/url&quot;).done(function(data){\n    // What do I do with the data?\n});\n\nNow, the server just needs to contain a /your/url route/file that contains code that grabs the data and does something with it, in your case:\n&lt;?php\n$val = myService-&gt;getValue(); // Makes an API and database call\nheader(&quot;Content-Type: application/json&quot;); // Advise client of response type\necho json_encode($val); // Write it to the output\n\nThis way, our JavaScript file asks for the data and shows it rather than asking for code or for layout. This is cleaner and starts to pay off as the application gets higher. It&apos;s also better separation of concerns and it allows testing the client side code without any server side technology involved which is another plus.\nPostscript: You have to be very aware of XSS attack vectors when you inject anything from PHP to JavaScript. It&apos;s very hard to escape values properly and it&apos;s context sensitive. If you&apos;re unsure how to deal with XSS, or unaware of it - please read this OWASP article, this one and this question.\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"&lt;script&gt;\n  var jsvar = &lt;?php echo json_encode($PHPVar); ?&gt;;\n&lt;/script&gt;\n\n\njson_encode() requires:\n\n\nPHP 5.2.0 or more\n$PHPVar encoded as UTF-8, Unicode.\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"Simply use one of the following methods.\n\n&lt;script type=&quot;text/javascript&quot;&gt;\nvar js_variable  = &apos;&lt;?php echo $php_variable;?&gt;&apos;;\n&lt;script&gt;\n\n\nOR \n\n&lt;script type=&quot;text/javascript&quot;&gt;\n    var js_variable = &lt;?php echo json_encode($php_variable); ?&gt;; \n&lt;/script&gt;\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"I quite like the way the WordPress works with its enqueue and localize functions, so following that model, I wrote a simple class for putting a scripts into page according to the script dependencies, and for making additional data available for the script.\n\nclass mHeader {\n\n    private $scripts = array();\n\n    /**\n     * @param string $id        Unique script identifier\n     * @param string $src      Script src attribute\n     * @param array  $deps       An array of dependencies ( script identifiers ).\n     * @param array  $data       An array, data that will be json_encoded and available to the script.\n     */\n    function enqueue_script($id, $src, $deps = array(), $data = array()) {\n        $this-&gt;scripts[$id] = array(&apos;src&apos; =&gt; $src, &apos;deps&apos; =&gt; $deps, &apos;data&apos; =&gt; $data);\n    }\n\n    private function dependencies($script) {\n        if ($script[&apos;deps&apos;]) {\n            return array_map(array($this, &apos;dependencies&apos;), array_intersect_key($this-&gt;scripts, array_flip($script[&apos;deps&apos;])));\n        }\n    }\n\n    private function _unset($key, &amp;$deps, &amp;$out) {\n        $out[$key] = $this-&gt;scripts[$key];\n        unset($deps[$key]);\n    }\n\n    private function flattern(&amp;$deps, &amp;$out = array()) {\n\n        foreach($deps as $key =&gt; $value) {\n            empty($value) ? $this-&gt;_unset($key, $deps, $out) : $this-&gt;flattern( $deps[$key], $out);\n        }\n    }\n\n    function print_scripts() {\n\n        if (!$this-&gt;scripts)\n            return;\n\n        $deps = array_map(array($this, &apos;dependencies&apos;), $this-&gt;scripts);\n        while ($deps)\n            $this-&gt;flattern($deps, $js);\n\n        foreach($js as $key =&gt; $script) {\n            $script[&apos;data&apos;] &amp;&amp; printf(&quot;&lt;script&gt; var %s = %s; &lt;/script&gt;&quot; . PHP_EOL, key($script[&apos;data&apos;]), json_encode(current( $script[&apos;data&apos;])));\n            echo &quot;&lt;script id=\\&quot;$key-js\\&quot; src=\\&quot;$script[src]\\&quot; type=\\&quot;text/javascript\\&quot;&gt;&lt;/script&gt;&quot; . PHP_EOL;\n        }\n    }\n}\n\n\nThe call to the enqueue_script() function is for adding script, setting the source and dependencies on other scripts, and additional data needed for the script.\n\n$header = new mHeader();\n\n$header-&gt;enqueue_script(&apos;jquery-ui&apos;, &apos;//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js&apos;, array(&apos;jquery&apos;));\n$header-&gt;enqueue_script(&apos;jquery&apos;, &apos;//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js&apos;);\n$header-&gt;enqueue_script(&apos;custom-script&apos;, &apos;//custom-script.min.js&apos;, array(&apos;jquery-ui&apos;), array(&apos;mydata&apos; =&gt; array(&apos;value&apos; =&gt; 20)));\n\n$header-&gt;print_scripts();\n\n\nAnd, print_scripts() method of the above example will send this output:\n\n&lt;script id=&quot;jquery-js&quot; src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;\n&lt;script id=&quot;jquery-ui-js&quot; src=&quot;//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;\n&lt;script&gt; var mydata = {&quot;value&quot;:20}; &lt;/script&gt;\n&lt;script id=&quot;custom-script-js&quot; src=&quot;//custom-script.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;\n\n\nRegardless the fact that the script &apos;jquery&apos; is enqueued after the &apos;jquery-ui&apos;, it is printed before because it is defined in &apos;jquery-ui&apos; that it depends on &apos;jquery&apos;.\nAdditional data for the &apos;custom-script&apos; are inside a new script block and are placed in front of it, it contains mydata object that holds additional data, now available to &apos;custom-script&apos;.\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"Try this:\n\n&lt;?php\n    echo &quot;&lt;script&gt; var x = &quot; . json_encode($phpVariable) . &quot;&lt;/script&gt;&quot;;\n?&gt;\n\n\n--\n\n-After trying this for a while\n\nAlthough it works, however it slows down the performance. As PHP is a server-side script while JavaScript is a user side.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"I have come out with an easy method to assign JavaScript variables using PHP.\nIt uses HTML5 data attributes to store PHP variables and then it&apos;s assigned to JavaScript on page load.\nExample:\n&lt;?php\n    $variable_1 = &quot;QNimate&quot;;\n    $variable_2 = &quot;QScutter&quot;;\n?&gt;\n    &lt;span id=&quot;storage&quot; data-variable-one=&quot;&lt;?php echo $variable_1; ?&gt;&quot; data-variable-two=&quot;&lt;?php echo $variable_2; ?&gt;&quot;&gt;&lt;/span&gt;\n&lt;?php\n\nHere is the JavaScript code\nvar variable_1 = undefined;\nvar variable_2 = undefined;\n\nwindow.onload = function(){\n    variable_1 = document.getElementById(&quot;storage&quot;).getAttribute(&quot;data-variable-one&quot;);\n    variable_2 = document.getElementById(&quot;storage&quot;).getAttribute(&quot;data-variable-two&quot;);\n}\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"\nConvert the data into JSON \nCall AJAX to recieve JSON file\nConvert JSON into Javascript object\n\n\nExample:\n\nSTEP 1\n\n&lt;?php\n\n   $servername = &quot;localhost&quot;;\n   $username = &quot;&quot;;\n   $password = &quot;&quot;;\n   $dbname = &quot;&quot;;\n   $conn = new mysqli($servername, $username, $password, $dbname);\n\n   if ($conn-&gt;connect_error) {\n      die(&quot;Connection failed: &quot; . $conn-&gt;connect_error);\n   } \n\n   $sql = &quot;SELECT id, name, image FROM phone&quot;;\n   $result = $conn-&gt;query($sql);\n\n   while($row = $result-&gt;fetch_assoc()){ \n      $v[] = $row;    \n   }\n\n  echo json_encode($v);\n\n  $conn-&gt;close();\n?&gt;\n\n\nSTEP 2\n\nfunction showUser(fnc) {\n   var xhttp = new XMLHttpRequest();\n\n   xhttp.onreadystatechange = function() {\n      if (this.readyState == 4 &amp;&amp; this.status == 200) {\n         // STEP 3    \n         var p = JSON.parse(this.responseText);\n      }\n   }\n}\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"myPlugin.start($val); // Tried this, didn&apos;t work\n\n\nIt doesn&apos;t work because $val is undefined as far as JavaScript is concerned, i.e. the PHP code did not output anything for $val. Try viewing the source in your browser and here is what you&apos;ll see:\n\nmyPlugin.start(); // I tried this, and it didn&apos;t work\n\n\nAnd\n\n&lt;?php myPlugin.start($val); ?&gt; // This didn&apos;t work either\n\n\nThis doesn&apos;t work because PHP will try to treat myPlugin as a constant and when that fails it will try to treat it as the string &apos;myPlugin&apos; which it will try to concatenate with the output of the PHP function start() and since that is undefined it will produce a fatal error.\n\nAnd\n\n myPlugin.start(&lt;?=$val?&gt; // This works sometimes, but sometimes it fails\n\n\nWhile this is most likely to work, since the PHP code is producing valid JavaScript with the expected arguments, if it fails, chances are it&apos;s because myPlugin isn&apos;t ready yet. Check your order of execution.\n\nAlso you should note that the PHP code output is insecure and should be filtered with json_encode().\n\nEDIT\n\nBecause I didn&apos;t notice the missing parenthesis in myPlugin.start(&lt;?=$val?&gt; :-\\\n\nAs @Second Rikudo points out, for it to work correctly $val would need to contain the closing parenthesis, for example: $val=&quot;42);&quot;\n\nMeaning that the PHP will now produce myPlugin.start(42); and will work as expected when executed by the JavaScript code.\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"Here is is the trick:\n\n\nHere is your &apos;PHP&apos; to use that variable:\n\n&lt;?php\n    $name = &apos;PHP variable&apos;;\n    echo &apos;&lt;script&gt;&apos;;\n    echo &apos;var name = &apos; . json_encode($name) . &apos;;&apos;;\n    echo &apos;&lt;/script&gt;&apos;;\n?&gt;\n\nNow you have a JavaScript variable called &apos;name&apos;, and here is your JavaScript code to use that variable:\n\n&lt;script&gt;\n     console.log(&quot;I am everywhere &quot; + name);\n&lt;/script&gt;\n\n\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"Let&apos;s say your variable is always integer. In that case this is easier:\n\n&lt;?PHP\n    $number = 4;\n\n    echo &apos;&lt;script&gt;&apos;;\n    echo &apos;var number = &apos; . $number . &apos;;&apos;;\n    echo &apos;alert(number);&apos;;\n    echo &apos;&lt;/script&gt;&apos;;\n?&gt;\n\n\nOutput:\n\n&lt;script&gt;var number = 4;alert(number);&lt;/script&gt;\n\n\nLet&apos;s say your variable is not an integer, but if you try above method you will get something like this:\n\n&lt;script&gt;var number = abcd;alert(number);&lt;/script&gt;\n\n\nBut in JavaScript this is a syntax error.\n\nSo in PHP we have a function call json_encode that encode string to a JSON object.\n\n&lt;?PHP\n    $number = &apos;abcd&apos;;\n\n    echo &apos;&lt;script&gt;&apos;;\n    echo &apos;var number = &apos; . json_encode($number) . &apos;;&apos;;\n    echo &apos;alert(number);&apos;;\n    echo &apos;&lt;/script&gt;&apos;;\n?&gt;\n\n\nSince abcd in JSON is &quot;abcd&quot;, it looks like this:\n\n&lt;script&gt;var number = &quot;abcd&quot;;alert(number);&lt;/script&gt;\n\n\nYou can use same method for arrays:\n\n&lt;?PHP\n    $details = [\n    &apos;name&apos; =&gt; &apos;supun&apos;,\n    &apos;age&apos; =&gt; 456,\n    &apos;weight&apos; =&gt; &apos;55&apos;\n    ];\n\n    echo &apos;&lt;script&gt;&apos;;\n    echo &apos;var details = &apos; . json_encode($details) . &apos;;&apos;;\n    echo &apos;alert(details);&apos;;\n    echo &apos;console.log(details);&apos;;\n    echo &apos;&lt;/script&gt;&apos;;\n?&gt;\n\n\nAnd your JavaScript code looks like this:\n\n&lt;script&gt;var details = {&quot;name&quot;:&quot;supun&quot;,&quot;age&quot;:456,&quot;weight&quot;:&quot;55&quot;};alert(details);console.log(details);&lt;/script&gt;\n\n\nConsole output\n\n\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"I&apos;ll assume that the data to transmit is a string.\n\nAs other commenters have stated, AJAX is one possible solution, but the cons outweigh the pros: it has a latency and it is harder to program (it needs the code to retrieve the value both server- and client-side), when a simpler escaping function should suffice.\n\nSo, we&apos;re back to escaping. json_encode($string) works if you encode the source string as UTF-8 first in case it is not already, because json_encode requires UTF-8 data. If the string is in ISO-8859-1 then you can simply use json_encode(utf8_encode($string)); otherwise you can always use iconv to do the conversion first.\n\nBut there&apos;s a big gotcha. If you&apos;re using it in events, you need to run htmlspecialchars() on the result in order to make it correct code. And then you have to either be careful to use double quotes to enclose the event, or always add ENT_QUOTES to htmlspecialchars. For example:\n\n&lt;?php\n    $myvar = &quot;I&apos;m in \\&quot;UTF-8\\&quot; encoding and I have &lt;script&gt;script tags&lt;/script&gt; &amp; ampersand!&quot;;\n    // Fails:\n    //echo &apos;&lt;body onload=&quot;alert(&apos;, json_encode($myvar), &apos;);&quot;&gt;&apos;;\n    // Fails:\n    //echo &quot;&lt;body onload=&apos;alert(&quot;, json_encode($myvar), &quot;);&apos;&gt;&quot;;\n    // Fails:\n    //echo &quot;&lt;body onload=&apos;alert(&quot;, htmlspecialchars(json_encode($myvar)), &quot;);&apos;&gt;&quot;;\n\n    // Works:\n    //echo &quot;&lt;body onload=&apos;alert(&quot;, htmlspecialchars(json_encode($myvar), ENT_QUOTES), &quot;);&apos;&gt;&quot;;\n    // Works:\n    echo &apos;&lt;body onload=&quot;alert(&apos;, htmlspecialchars(json_encode($myvar)), &apos;);&quot;&gt;&apos;;\n\n    echo &quot;&lt;/body&gt;&quot;;\n\n\nHowever, you can&apos;t use htmlspecialchars on regular JavaScript code (code enclosed in &lt;script&gt;...&lt;/script&gt; tags). That makes use of this function prone to mistakes, by forgetting to htmlspecialchars the result when writing event code.\n\nIt&apos;s possible to write a function that does not have that problem, and can be used both in events and in regular JavaScript code, as long as you enclose your events always in single quotes, or always in double quotes. Here is my proposal, requiring them to be in double quotes (which I prefer):\n\n&lt;?php\n    // Optionally pass the encoding of the source string, if not UTF-8\n    function escapeJSString($string, $encoding = &apos;UTF-8&apos;)\n    {\n        if ($encoding != &apos;UTF-8&apos;)\n            $string = iconv($encoding, &apos;UTF-8&apos;, $string);\n        $flags = JSON_HEX_TAG|JSON_HEX_AMP|JSON_HEX_APOS|JSON_HEX_QUOT|JSON_UNESCAPED_SLASHES;\n        $string = substr(json_encode($string, $flags), 1, -1);\n        return &quot;&apos;$string&apos;&quot;;\n    }\n\n\nThe function requires PHP 5.4+. Example usage:\n\n&lt;?php\n    $myvar = &quot;I&apos;m in \\&quot;UTF-8\\&quot; encoding and I have &lt;script&gt;script tags&lt;/script&gt; &amp; ampersand!&quot;;\n    // Note use of double quotes to enclose the event definition!\n    echo &apos;&lt;body onload=&quot;alert(&apos;, escapeJSString($myvar), &apos;);&quot;&gt;&apos;;\n    // Example with regular code:\n    echo &apos;&lt;script&gt;alert(&apos;, escapeJSString($myvar), &apos;);&lt;/script&gt;&apos;;\n    echo &apos;&lt;/body&gt;&apos;;\n\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"After much research, I found the easiest method is to pass all kinds of variables easily.\n\nIn the server script, you have two variables, and you are trying to send them to the client scripts:\n\n$php_var1 =&quot;Hello world&quot;;\n$php_var2 =&quot;Helloow&quot;;\necho &apos;&lt;script&gt;&apos;;\necho &apos;var js_variable1= &apos; . json_encode($php_var1) . &apos;;&apos;;\necho &apos;var js_variable2= &apos; . json_encode($php_var2) . &apos;;&apos;;\necho &apos;&lt;/script&gt;&apos;;\n\n\nIn any of your JavaScript code called on the page, simply call those variables.\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"PHP\n\n$fruits = array(&quot;apple&quot; =&gt; &quot;yellow&quot;, &quot;strawberry&quot; =&gt; &quot;red&quot;, &quot;kiwi&quot; =&gt; &quot;green&quot;);\n&lt;script&gt;\n    var color = &lt;?php echo json_encode($fruits) ?&gt;;\n&lt;/script&gt;\n&lt;script src=&quot;../yourexternal.js&quot;&gt;&lt;/script&gt;\n\n\nJS (yourexternal.js)\n\nalert(&quot;The apple color is&quot; + color[&apos;apple&apos;] + &quot;, the strawberry color is &quot; + color[&apos;strawberry&apos;] + &quot; and the kiwi color is &quot; + color[&apos;kiwi&apos;] + &quot;.&quot;);\n\n\nOUTPUT\n\n\n  The apple color is yellow, the strawberry color is red and the kiwi\n  color is green.\n\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"As per your code\n\n&lt;$php\n     $val = $myService-&gt;getValue(); // Makes an API and database call\n     echo &apos;&lt;span id=&quot;value&quot;&gt;&apos;.$val.&apos;&lt;/span&gt;&apos;;\n$&gt;\n\n\nNow you can get value using DOM, use innerHTML of span id, in this case you don&apos;t need to do any call to server, or Ajax or another thing.\n\nYour page will print it using PHP, and you JavaScript will get value using DOM.\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"&lt;?php\n\n    $val = $myService-&gt;getValue(); // Makes an API and database call\n\n    echo &quot;\n        &lt;script&gt;\n            myPlugin.start({$val});\n        &lt;/script&gt; &quot;;\n\n?&gt;\n\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"we also can do it in this way for some usecases:\n&lt;?php\n    \n$inPhpVar = &quot;i am php var&quot;;\n\n$ScriptInline = &lt;&lt;&lt;JS\n&lt;script&gt;\nalert(&apos;{$inPhpVar} that used in js code&apos;);\n&lt;/script&gt;\nJS;\n\necho $ScriptInline;\n\n?&gt;\n\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"If you need to get some important data in your script, that is available in php, you can automatically echo a complete script before your script where the data is needed, with some globals with that information.\nIn your scirpt imports on your html:\n&lt;?php\n    echo &quot;&lt;script&gt;\n                const importantData = &quot;.$php_data.&quot;;\n        &lt;/script&gt;&quot;;\n?&gt;\n&lt;script src=&quot;../assets/js/your_script.js&quot;&gt;&lt;/script&gt;\n\nSo then you can access that information through the const named &apos;importantData&apos; from your_script.js\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-43d1c35cd6eb9b8f.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-50e201fdaa1e0fd1.js" defer=""></script><script src="/_next/static/00bsHgHZki2FteshOatnd/_buildManifest.js" defer=""></script><script src="/_next/static/00bsHgHZki2FteshOatnd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-do-i-pass-variables-and-data-from-php-to-javascript-1657384684553#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-do-i-pass-variables-and-data-from-php-to-javascript-1657384684553"><h1>How do I pass variables and data from PHP to JavaScript?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                    <div>
            <aside class="s-notice s-notice__info post-notice js-post-notice mb16" role="status">
        <div class="d-flex fd-column fw-nowrap">
            <div class="d-flex fw-nowrap">
                    <div class="flex--item mr8">
                        <svg aria-hidden="true" class="svg-icon iconLightbulb" width="18" height="18" viewBox="0 0 18 18"><path d="M15 6.38A6.48 6.48 0 0 0 7.78.04h-.02A6.49 6.49 0 0 0 2.05 5.6a6.31 6.31 0 0 0 2.39 5.75c.49.39.76.93.76 1.5v.24c0 1.07.89 1.9 1.92 1.9h2.75c1.04 0 1.92-.83 1.92-1.9v-.2c0-.6.26-1.15.7-1.48A6.32 6.32 0 0 0 15 6.37ZM4.03 5.85A4.49 4.49 0 0 1 8 2.02a4.48 4.48 0 0 1 5 4.36 4.3 4.3 0 0 1-1.72 3.44c-.98.74-1.5 1.9-1.5 3.08v.1H7.2v-.14c0-1.23-.6-2.34-1.53-3.07a4.32 4.32 0 0 1-1.64-3.94ZM10 18a1 1 0 0 0 0-2H7a1 1 0 1 0 0 2h3Z"></path></svg>
                    </div>
                <div class="flex--item wmn0 fl1 lh-lg">
                    <div class="flex--item fl1 lh-lg">
                        <b>Want to improve this post?</b> Provide detailed answers to this question, including citations and an explanation of why your answer is correct. Answers without enough detail may be edited or deleted.
                        
                    </div>
                </div>
            </div>
        </div>
</aside>

    </div>

<p>I have a variable in PHP, and I need its value in my JavaScript code. How can I get my variable from PHP to JavaScript?</p>
<p>I have code that looks like this:</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-variable">$val</span> = <span class="hljs-variable">$myService</span>-&gt;<span class="hljs-title function_ invoke__">getValue</span>(); <span class="hljs-comment">// Makes an API and database call</span>
</code></pre>
<p>On the same page, I have JavaScript code that needs the value of the <code>$val</code> variable to be passed as a parameter:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">&lt;script&gt;
    myPlugin.<span class="hljs-title function_">start</span>($val); <span class="hljs-comment">// I tried this, but it didn't work</span>
    &lt;?php myPlugin.<span class="hljs-title function_">start</span>($val); ?&gt; <span class="hljs-comment">// This didn't work either</span>
    myPlugin.<span class="hljs-title function_">start</span>(&lt;?=$val?&gt;); <span class="hljs-comment">// This works sometimes, but sometimes it fails</span>
&lt;/script&gt;
</code></pre>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are actually several approaches to do this. Some require more overhead than others, and some are considered better than others.</p>

<p>In no particular order:</p>

<ol>
<li>Use AJAX to get the data you need from the server.</li>
<li>Echo the data into the page somewhere, and use JavaScript to get the information from the DOM.</li>
<li>Echo the data directly to JavaScript.</li>
</ol>

<p>In this post, we'll examine each of the above methods, and see the pros and cons of each, as well as how to implement them.</p>

<h1>1. Use AJAX to get the data you need from the server</h1>

<p>This method is considered the best, because <strong>your server side and client side scripts are completely separate</strong>.</p>

<h3>Pros</h3>

<ul>
<li><strong>Better separation between layers</strong> - If tomorrow you stop using PHP, and want to move to a servlet, a REST API, or some other service, you don't have to change much of the JavaScript code.</li>
<li><strong>More readable</strong> - JavaScript is JavaScript, PHP is PHP. Without mixing the two, you get more readable code on both languages.</li>
<li><strong>Allows for asynchronous data transfer</strong> - Getting the information from PHP might be time/resources expensive. Sometimes you just don't want to wait for the information, load the page, and have the information reach whenever.</li>
<li><strong>Data is not directly found on the markup</strong> - This means that your markup is kept clean of any additional data, and only JavaScript sees it.</li>
</ul>

<h3>Cons</h3>

<ul>
<li><strong>Latency</strong> - AJAX creates an HTTP request, and HTTP requests are carried over network and have network latencies.</li>
<li><strong>State</strong> - Data fetched via a separate HTTP request won't include any information from the HTTP request that fetched the HTML document. You may need this information (e.g., if the HTML document is generated in response to a form submission) and, if you do, will have to transfer it across somehow. If you have ruled out embedding the data in the page (which you have if you are using this technique) then that limits you to cookies/sessions which may be subject to race conditions.</li>
</ul>

<h2>Implementation Example</h2>

<p>With AJAX, you need two pages, one is where PHP generates the output, and the second is where JavaScript gets that output:</p>

<h3>get-data.php</h3>

<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-comment">/* Do some operation here, like talk to the database, the file-session
 * The world beyond, limbo, the city of shimmers, and Canada.
 *
 * AJAX generally uses strings, but you can output JSON, HTML and XML as well.
 * It all depends on the Content-type header that you send with your AJAX
 * request. */</span>

echo <span class="hljs-built_in">json_encode</span>(<span class="hljs-number">42</span>); <span class="hljs-comment">// In the end, you need to echo the result.</span>
                      <span class="hljs-comment">// All data should be json_encode()d.</span>

                      <span class="hljs-comment">// You can json_encode() any value in PHP, arrays, strings,</span>
                      <span class="hljs-comment">//even objects.</span>

</code></pre>

<h3>index.php (or whatever the actual page is named like)</h3>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-comment">&lt;!-- snip --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">reqListener</span> () {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">responseText</span>);
    }

    <span class="hljs-keyword">var</span> oReq = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>(); <span class="hljs-comment">// New request object</span>
    oReq.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
        <span class="hljs-comment">// This is where you handle what to do with the response.</span>
        <span class="hljs-comment">// The actual data is found on this.responseText</span>
        <span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">responseText</span>); <span class="hljs-comment">// Will alert: 42</span>
    };
    oReq.<span class="hljs-title function_">open</span>(<span class="hljs-string">"get"</span>, <span class="hljs-string">"get-data.php"</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-comment">//                               ^ Don't block the rest of the execution.</span>
    <span class="hljs-comment">//                                 Don't wait until the request finishes to</span>
    <span class="hljs-comment">//                                 continue.</span>
    oReq.<span class="hljs-title function_">send</span>();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-comment">&lt;!-- snip --&gt;</span>
</code></pre>

<p>The above combination of the two files will alert <code>42</code> when the file finishes loading.</p>

<h2>Some more reading material</h2>

<ul>
<li><strong><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest" rel="noreferrer">Using XMLHttpRequest - MDN</a></strong></li>
<li><strong><a href="https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest" rel="noreferrer">XMLHttpRequest object reference - MDN</a></strong></li>
<li><strong><a href="https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call">How do I return the response from an asynchronous call?</a></strong></li>
</ul>

<h1>2. Echo the data into the page somewhere, and use JavaScript to get the information from the DOM</h1>

<p>This method is less preferable to AJAX, but it still has its advantages. It's still <em>relatively</em> separated between PHP and JavaScript in a sense that there is no PHP directly in the JavaScript.</p>

<h3>Pros</h3>

<ul>
<li><strong>Fast</strong> - DOM operations are often quick, and you can store and access a lot of data relatively quickly.</li>
</ul>

<h3>Cons</h3>

<ul>
<li><strong>Potentially Unsemantic Markup</strong> - Usually, what happens is that you use some sort of <code>&lt;input type=hidden&gt;</code> to store the information, because it's easier to get the information out of <code>inputNode.value</code>, but doing so means that you have a meaningless element in your HTML. HTML has the <code>&lt;meta&gt;</code> element for data about the document, and HTML 5 introduces <code>data-*</code> attributes for data specifically for reading with JavaScript that can be associated with particular elements.</li>
<li><strong>Dirties up the Source</strong> - Data that PHP generates is outputted directly to the HTML source, meaning that you get a bigger and less focused HTML source.</li>
<li><strong>Harder to get structured data</strong> - Structured data will have to be valid HTML, otherwise you'll have to escape and convert strings yourself.</li>
<li><strong>Tightly couples PHP to your data logic</strong> - Because PHP is used in presentation, you can't separate the two cleanly.</li>
</ul>

<h2>Implementation Example</h2>

<p>With this, the idea is to create some sort of element which will not be displayed to the user, but is visible to JavaScript.</p>

<h3>index.php</h3>

<pre class="default s-code-block"><code class="hljs language-php-template"><span class="language-xml"><span class="hljs-comment">&lt;!-- snip --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dom-target"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: none;"</span>&gt;</span>
    </span><span class="language-php"><span class="hljs-meta">&lt;?php</span>
        <span class="hljs-variable">$output</span> = <span class="hljs-string">"42"</span>; <span class="hljs-comment">// Again, do some operation, get the output.</span>
        <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">htmlspecialchars</span>(<span class="hljs-variable">$output</span>); <span class="hljs-comment">/* You have to escape because the result
                                           will not be valid HTML otherwise. */</span>
    <span class="hljs-meta">?&gt;</span></span><span class="language-xml">
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-keyword">var</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"dom-target"</span>);
    <span class="hljs-keyword">var</span> myData = div.<span class="hljs-property">textContent</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-comment">&lt;!-- snip --&gt;</span>
</span></code></pre>

<h1>3. Echo the data directly to JavaScript</h1>

<p>This is probably the easiest to understand.</p>

<h3>Pros</h3>

<ul>
<li><strong>Very easily implemented</strong> - It takes very little to implement this, and understand.</li>
<li><strong>Does not dirty source</strong> - Variables are outputted directly to JavaScript, so the DOM is not affected.</li>
</ul>

<h3>Cons</h3>

<ul>
<li><strong>Tightly couples PHP to your data logic</strong> - Because PHP is used in presentation, you can't separate the two cleanly.</li>
</ul>

<h2>Implementation Example</h2>

<p>Implementation is relatively straightforward:</p>

<pre class="default s-code-block"><code class="hljs language-php-template"><span class="language-xml"><span class="hljs-comment">&lt;!-- snip --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-keyword">var</span> data = </span></span><span class="language-php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-string">"42"</span>, JSON_HEX_TAG); <span class="hljs-meta">?&gt;</span></span><span class="language-xml"><span class="language-javascript">; <span class="hljs-comment">// Don't forget the extra semicolon!</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-comment">&lt;!-- snip --&gt;</span>
</span></code></pre>

<p>Good luck!</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I usually use data-* attributes in HTML.</p>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"service-container"</span>
    <span class="hljs-attr">data-service</span>=<span class="hljs-string">"&lt;?= htmlspecialchars($myService-&gt;getValue()) ?&gt;"</span>
&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    $(<span class="hljs-variable language_">document</span>).<span class="hljs-title function_">ready</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
        $(<span class="hljs-string">'.service-container'</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
            <span class="hljs-keyword">var</span> container = $(<span class="hljs-variable language_">this</span>);
            <span class="hljs-keyword">var</span> service = container.<span class="hljs-title function_">data</span>(<span class="hljs-string">'service'</span>);

            <span class="hljs-comment">// Var "service" now contains the value of $myService-&gt;getValue();</span>
        });
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>This example uses jQuery, but it can be adapted for another library or vanilla JavaScript.</p>
<p>You can read more about the dataset property here: <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.dataset" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.dataset</a></p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I'm going to try a simpler answer:</p>
<h2>Explanation of the problem</h2>
<p>First, let's understand the flow of events when a page is served from our server:</p>
<ul>
<li>First PHP is run, it generates the HTML that is served to the client.</li>
<li>Then, the HTML is delivered to the client, after PHP is done with it, I'd like to emphasize that once the code leaves the server - PHP is done with it and can no longer access it.</li>
<li>Then, the HTML with JavaScript reaches the client, which can execute JavaScript on that HTML.</li>
</ul>
<p>So really, the core thing to remember here is that <strong>HTTP is stateless</strong>. Once a request left the server, the server can not touch it. So, that leaves our options to:</p>
<ol>
<li>Send more requests from the client <em>after</em> the initial request is done.</li>
<li>Encode what the server had to say in the initial request.</li>
</ol>
<h2>Solutions</h2>
<p>That's the core question you should be asking yourself is:</p>
<h2>Am I writing a website or an application?</h2>
<p>Websites are mainly page based, and the page load times needs to be as fast as possible (for example - Wikipedia). Web applications are more AJAX heavy and perform a lot of round trips to get the client fast information (for example - a stock dashboard).</p>
<h3>Website</h3>
<p>Sending more requests from the client after the initial request is done is <strong>slow</strong> as it requires more HTTP requests which have significant overhead. Moreover, it requires <em>asynchronousity</em> as making an AJAX request requires a handler for when it's complete.</p>
<p>I would <em>not</em> recommend making another request <em>unless your site is an application</em> for getting that information from the server.</p>
<p>You want fast response times which have a <em>huge</em> impact on conversion and load times. Making Ajax requests is slow for the initial uptime in this case and unneeded.</p>
<p>You have two ways to tackle the issue</p>
<ul>
<li><strong>Set a cookie</strong> - cookies are headers sent in HTTP requests that both the server and client can read.</li>
<li><strong>Encode the variable as JSON</strong> - JSON looks very close to JavaScript objects and <em>most</em> JSON objects are valid JavaScript variables.</li>
</ul>
<p><a href="http://www.php.net/manual/en/function.setcookie.php" rel="noreferrer">Setting a cookie</a> is really not very difficult, you just assign it a value:</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-title function_ invoke__">setcookie</span>(<span class="hljs-string">"MyCookie"</span>, <span class="hljs-variable">$value</span>); <span class="hljs-comment">// Sets the cookie to the value, remember, do not</span>
                               <span class="hljs-comment">// Set it with HTTP only to true.</span>
</code></pre>
<p>Then, you can <a href="https://stackoverflow.com/questions/5639346/shortest-function-for-reading-a-cookie-in-javascript">read it with JavaScript</a> using <code>document.cookie</code>:</p>
<p>Here is a short hand rolled parser, but the answer I linked to right above this has better tested ones:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> cookies = <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">";"</span>).
    <span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">el</span>){ <span class="hljs-keyword">return</span> el.<span class="hljs-title function_">split</span>(<span class="hljs-string">"="</span>); }).
    <span class="hljs-title function_">reduce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">prev,cur</span>){ prev[cur[<span class="hljs-number">0</span>]] = cur[<span class="hljs-number">1</span>]; <span class="hljs-keyword">return</span> prev },{});
<span class="hljs-title function_">alert</span>(cookies[<span class="hljs-string">"MyCookie"</span>]); <span class="hljs-comment">// Value set with PHP.</span>
</code></pre>
<p>Cookies are good for a little data. This is what tracking services often do.</p>
<p>Once we have more data, we can encode it with JSON inside a JavaScript variable instead:</p>
<pre class="lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-keyword">var</span> myServerData = &lt;?=<span class="hljs-title function_">json_encode</span>($value)?&gt;; <span class="hljs-comment">// Don't forget to sanitize</span>
                                                 <span class="hljs-comment">//server data</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>Assuming <code>$value</code> is <code>json_encode</code>able on the PHP side (it usually is). This technique is what Stack Overflow does with its chat for example (only using .NET instead of PHP).</p>
<h3>Application</h3>
<p>If you're writing an application - suddenly the initial load time isn't always as important as the ongoing performance of the application, and it starts to pay off to load data and code separately.</p>
<p>My answer <a href="https://stackoverflow.com/questions/14220321/how-do-i-return-the-response-from-an-asynchronous-call/16825593#16825593">here</a> explains how to load data using AJAX in JavaScript:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">callback</span>(<span class="hljs-params">data</span>){
    <span class="hljs-comment">// What do I do with the response?</span>
}

<span class="hljs-keyword">var</span> httpRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>;
httpRequest.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">if</span> (httpRequest.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span>) { <span class="hljs-comment">// Request is done</span>
        <span class="hljs-keyword">if</span> (httpRequest.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) { <span class="hljs-comment">// successfully</span>
            <span class="hljs-title function_">callback</span>(httpRequest.<span class="hljs-property">responseText</span>); <span class="hljs-comment">// We're calling our method</span>
        }
    }
};
httpRequest.<span class="hljs-title function_">open</span>(<span class="hljs-string">'GET'</span>, <span class="hljs-string">"/echo/json"</span>);
httpRequest.<span class="hljs-title function_">send</span>();
</code></pre>
<p>Or with jQuery:</p>
<pre class="lang-js s-code-block"><code class="hljs language-javascript">$.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/your/url"</span>).<span class="hljs-title function_">done</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>){
    <span class="hljs-comment">// What do I do with the data?</span>
});
</code></pre>
<p>Now, the server just needs to contain a <code>/your/url</code> route/file that contains code that grabs the data and does something with it, in your case:</p>
<pre class="lang-php s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-variable">$val</span> = myService-&gt;<span class="hljs-title function_ invoke__">getValue</span>(); <span class="hljs-comment">// Makes an API and database call</span>
<span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">"Content-Type: application/json"</span>); <span class="hljs-comment">// Advise client of response type</span>
<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$val</span>); <span class="hljs-comment">// Write it to the output</span>
</code></pre>
<p>This way, our JavaScript file asks for the data and shows it rather than asking for code or for layout. This is cleaner and starts to pay off as the application gets higher. It's also better separation of concerns and it allows testing the client side code without any server side technology involved which is another plus.</p>
<p><strong>Postscript:</strong> You have to be <em>very</em> aware of XSS attack vectors when you inject anything from PHP to JavaScript. It's <em>very</em> hard to escape values properly and it's context sensitive. If you're unsure how to deal with XSS, or unaware of it - please read <a href="https://www.owasp.org/index.php/Cross-site_Scripting_(XSS)" rel="noreferrer">this OWASP article</a>, <a href="https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet" rel="noreferrer">this one</a> and <a href="https://stackoverflow.com/questions/71328/what-are-the-best-practices-for-avoiding-xss-attacks-in-a-php-site">this question</a>.</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="default s-code-block"><code class="hljs language-php-template"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">var</span> jsvar = </span></span><span class="language-php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$PHPVar</span>); <span class="hljs-meta">?&gt;</span></span><span class="language-xml">;
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>

<p>json_encode() requires:</p>

<ul>
<li>PHP 5.2.0 or more</li>
<li><code>$PHPVar</code> encoded as UTF-8, Unicode.</li>
</ul>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Simply use one of the following methods.</strong></p>

<pre class="default s-code-block"><code class="hljs language-php-template"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript">
<span class="hljs-keyword">var</span> js_variable  = <span class="hljs-string">'</span></span></span><span class="language-php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">echo</span> <span class="hljs-variable">$php_variable</span>;<span class="hljs-meta">?&gt;</span></span><span class="language-xml"><span class="language-xml">';
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>
</span></span></code></pre>

<p><strong>OR</strong> </p>

<pre class="default s-code-block"><code class="hljs language-php-template"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript">
    <span class="hljs-keyword">var</span> js_variable = </span></span><span class="language-php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$php_variable</span>); <span class="hljs-meta">?&gt;</span></span><span class="language-xml">; 
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I quite like the way the WordPress works with its <a href="http://codex.wordpress.org/Function_Reference/wp_enqueue_script" rel="nofollow noreferrer">enqueue</a> and <a href="http://codex.wordpress.org/Function_Reference/wp_localize_script" rel="nofollow noreferrer">localize</a> functions, so following that model, I wrote a simple class for putting a scripts into page according to the script dependencies, and for making additional data available for the script.</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">mHeader</span> </span>{

    <span class="hljs-keyword">private</span> <span class="hljs-variable">$scripts</span> = <span class="hljs-keyword">array</span>();

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@param</span> string $id        Unique script identifier
     * <span class="hljs-doctag">@param</span> string $src      Script src attribute
     * <span class="hljs-doctag">@param</span> array  $deps       An array of dependencies ( script identifiers ).
     * <span class="hljs-doctag">@param</span> array  $data       An array, data that will be json_encoded and available to the script.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enqueue_script</span>(<span class="hljs-params"><span class="hljs-variable">$id</span>, <span class="hljs-variable">$src</span>, <span class="hljs-variable">$deps</span> = <span class="hljs-keyword">array</span>(<span class="hljs-params"></span>), <span class="hljs-variable">$data</span> = <span class="hljs-keyword">array</span>(<span class="hljs-params"></span>)</span>) </span>{
        <span class="hljs-variable language_">$this</span>-&gt;scripts[<span class="hljs-variable">$id</span>] = <span class="hljs-keyword">array</span>(<span class="hljs-string">'src'</span> =&gt; <span class="hljs-variable">$src</span>, <span class="hljs-string">'deps'</span> =&gt; <span class="hljs-variable">$deps</span>, <span class="hljs-string">'data'</span> =&gt; <span class="hljs-variable">$data</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dependencies</span>(<span class="hljs-params"><span class="hljs-variable">$script</span></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$script</span>[<span class="hljs-string">'deps'</span>]) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">array_map</span>(<span class="hljs-keyword">array</span>(<span class="hljs-variable">$this</span>, <span class="hljs-string">'dependencies'</span>), <span class="hljs-title function_ invoke__">array_intersect_key</span>(<span class="hljs-variable">$this</span>-&gt;scripts, <span class="hljs-title function_ invoke__">array_flip</span>(<span class="hljs-variable">$script</span>[<span class="hljs-string">'deps'</span>])));
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_unset</span>(<span class="hljs-params"><span class="hljs-variable">$key</span>, &amp;<span class="hljs-variable">$deps</span>, &amp;<span class="hljs-variable">$out</span></span>) </span>{
        <span class="hljs-variable">$out</span>[<span class="hljs-variable">$key</span>] = <span class="hljs-variable language_">$this</span>-&gt;scripts[<span class="hljs-variable">$key</span>];
        <span class="hljs-keyword">unset</span>(<span class="hljs-variable">$deps</span>[<span class="hljs-variable">$key</span>]);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flattern</span>(<span class="hljs-params">&amp;<span class="hljs-variable">$deps</span>, &amp;<span class="hljs-variable">$out</span> = <span class="hljs-keyword">array</span>(<span class="hljs-params"></span>)</span>) </span>{

        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$deps</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) {
            <span class="hljs-keyword">empty</span>(<span class="hljs-variable">$value</span>) ? <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">_unset</span>(<span class="hljs-variable">$key</span>, <span class="hljs-variable">$deps</span>, <span class="hljs-variable">$out</span>) : <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">flattern</span>( <span class="hljs-variable">$deps</span>[<span class="hljs-variable">$key</span>], <span class="hljs-variable">$out</span>);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">print_scripts</span>(<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">$this</span>-&gt;scripts)
            <span class="hljs-keyword">return</span>;

        <span class="hljs-variable">$deps</span> = <span class="hljs-title function_ invoke__">array_map</span>(<span class="hljs-keyword">array</span>(<span class="hljs-variable">$this</span>, <span class="hljs-string">'dependencies'</span>), <span class="hljs-variable language_">$this</span>-&gt;scripts);
        <span class="hljs-keyword">while</span> (<span class="hljs-variable">$deps</span>)
            <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">flattern</span>(<span class="hljs-variable">$deps</span>, <span class="hljs-variable">$js</span>);

        <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$js</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$script</span>) {
            <span class="hljs-variable">$script</span>[<span class="hljs-string">'data'</span>] &amp;&amp; <span class="hljs-title function_ invoke__">printf</span>(<span class="hljs-string">"&lt;script&gt; var %s = %s; &lt;/script&gt;"</span> . PHP_EOL, <span class="hljs-title function_ invoke__">key</span>(<span class="hljs-variable">$script</span>[<span class="hljs-string">'data'</span>]), <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-title function_ invoke__">current</span>( <span class="hljs-variable">$script</span>[<span class="hljs-string">'data'</span>])));
            <span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;script id=\"<span class="hljs-subst">$key</span>-js\" src=\"<span class="hljs-subst">$script</span>[src]\" type=\"text/javascript\"&gt;&lt;/script&gt;"</span> . PHP_EOL;
        }
    }
}
</code></pre>

<p>The call to the <code>enqueue_script()</code> function is for adding script, setting the source and dependencies on other scripts, and additional data needed for the script.</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-variable">$header</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">mHeader</span>();

<span class="hljs-variable">$header</span>-&gt;<span class="hljs-title function_ invoke__">enqueue_script</span>(<span class="hljs-string">'jquery-ui'</span>, <span class="hljs-string">'//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js'</span>, <span class="hljs-keyword">array</span>(<span class="hljs-string">'jquery'</span>));
<span class="hljs-variable">$header</span>-&gt;<span class="hljs-title function_ invoke__">enqueue_script</span>(<span class="hljs-string">'jquery'</span>, <span class="hljs-string">'//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'</span>);
<span class="hljs-variable">$header</span>-&gt;<span class="hljs-title function_ invoke__">enqueue_script</span>(<span class="hljs-string">'custom-script'</span>, <span class="hljs-string">'//custom-script.min.js'</span>, <span class="hljs-keyword">array</span>(<span class="hljs-string">'jquery-ui'</span>), <span class="hljs-keyword">array</span>(<span class="hljs-string">'mydata'</span> =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'value'</span> =&gt; <span class="hljs-number">20</span>)));

<span class="hljs-variable">$header</span>-&gt;<span class="hljs-title function_ invoke__">print_scripts</span>();
</code></pre>

<p>And, <code>print_scripts()</code> method of the above example will send this output:</p>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jquery-js"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"jquery-ui-js"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"> <span class="hljs-keyword">var</span> mydata = {<span class="hljs-string">"value"</span>:<span class="hljs-number">20</span>}; </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"custom-script-js"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"//custom-script.min.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>

<p>Regardless the fact that the script 'jquery' is enqueued after the 'jquery-ui', it is printed before because it is defined in 'jquery-ui' that it depends on 'jquery'.
Additional data for the 'custom-script' are inside a new script block and are placed in front of it, it contains <code>mydata</code> object that holds additional data, now available to 'custom-script'.</p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Try this:</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;script&gt; var x = "</span> . <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$phpVariable</span>) . <span class="hljs-string">"&lt;/script&gt;"</span>;
<span class="hljs-meta">?&gt;</span>
</code></pre>

<p>--</p>

<p>-After trying this for a while</p>

<p>Although it works, however it slows down the performance. As PHP is a server-side script while JavaScript is a user side.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I have come out with an easy method to assign JavaScript variables using PHP.</p>
<p>It uses HTML5 data attributes to store PHP variables and then it's assigned to JavaScript on page load.</p>
<p>Example:</p>
<pre class="default s-code-block"><code class="hljs language-php-template"><span class="language-php"><span class="hljs-meta">&lt;?php</span>
    <span class="hljs-variable">$variable_1</span> = <span class="hljs-string">"QNimate"</span>;
    <span class="hljs-variable">$variable_2</span> = <span class="hljs-string">"QScutter"</span>;
<span class="hljs-meta">?&gt;</span></span><span class="language-xml">
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"storage"</span> <span class="hljs-attr">data-variable-one</span>=<span class="hljs-string">"</span></span></span><span class="language-php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">echo</span> <span class="hljs-variable">$variable_1</span>; <span class="hljs-meta">?&gt;</span></span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">"</span> <span class="hljs-attr">data-variable-two</span>=<span class="hljs-string">"</span></span></span><span class="language-php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">echo</span> <span class="hljs-variable">$variable_2</span>; <span class="hljs-meta">?&gt;</span></span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
</span><span class="language-php"><span class="hljs-meta">&lt;?php</span>
</span></code></pre>
<p>Here is the JavaScript code</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> variable_1 = <span class="hljs-literal">undefined</span>;
<span class="hljs-keyword">var</span> variable_2 = <span class="hljs-literal">undefined</span>;

<span class="hljs-variable language_">window</span>.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
    variable_1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"storage"</span>).<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">"data-variable-one"</span>);
    variable_2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"storage"</span>).<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">"data-variable-two"</span>);
}
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 9</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<ol>
<li>Convert the data into <em>JSON</em> </li>
<li>Call <em>AJAX</em> to recieve <em>JSON</em> file</li>
<li>Convert <em>JSON</em> into <em>Javascript</em> object</li>
</ol>

<p>Example:</p>

<p><strong>STEP 1</strong></p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>

   <span class="hljs-variable">$servername</span> = <span class="hljs-string">"localhost"</span>;
   <span class="hljs-variable">$username</span> = <span class="hljs-string">""</span>;
   <span class="hljs-variable">$password</span> = <span class="hljs-string">""</span>;
   <span class="hljs-variable">$dbname</span> = <span class="hljs-string">""</span>;
   <span class="hljs-variable">$conn</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">mysqli</span>(<span class="hljs-variable">$servername</span>, <span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span>, <span class="hljs-variable">$dbname</span>);

   <span class="hljs-keyword">if</span> (<span class="hljs-variable">$conn</span>-&gt;connect_error) {
      <span class="hljs-keyword">die</span>(<span class="hljs-string">"Connection failed: "</span> . <span class="hljs-variable">$conn</span>-&gt;connect_error);
   } 

   <span class="hljs-variable">$sql</span> = <span class="hljs-string">"SELECT id, name, image FROM phone"</span>;
   <span class="hljs-variable">$result</span> = <span class="hljs-variable">$conn</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-variable">$sql</span>);

   <span class="hljs-keyword">while</span>(<span class="hljs-variable">$row</span> = <span class="hljs-variable">$result</span>-&gt;<span class="hljs-title function_ invoke__">fetch_assoc</span>()){ 
      <span class="hljs-variable">$v</span>[] = <span class="hljs-variable">$row</span>;    
   }

  <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$v</span>);

  <span class="hljs-variable">$conn</span>-&gt;<span class="hljs-title function_ invoke__">close</span>();
<span class="hljs-meta">?&gt;</span>
</code></pre>

<p><strong>STEP 2</strong></p>

<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">showUser</span>(<span class="hljs-params">fnc</span>) {
   <span class="hljs-keyword">var</span> xhttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();

   xhttp.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> == <span class="hljs-number">200</span>) {
         <span class="hljs-comment">// STEP 3    </span>
         <span class="hljs-keyword">var</span> p = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">responseText</span>);
      }
   }
}
</code></pre>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 10</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="default s-code-block"><code class="hljs language-kotlin">myPlugin.start($<span class="hljs-keyword">val</span>); <span class="hljs-comment">// Tried this, didn't work</span>
</code></pre>

<p>It doesn't work because <code>$val</code> is undefined as far as JavaScript is concerned, i.e. the PHP code did not output anything for <code>$val</code>. Try viewing the source in your browser and here is what you'll see:</p>

<pre class="default s-code-block"><code class="hljs language-scss">myPlugin<span class="hljs-selector-class">.start</span>(); <span class="hljs-comment">// I tried this, and it didn't work</span>
</code></pre>

<p>And</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span> myPlugin.<span class="hljs-title function_ invoke__">start</span>(<span class="hljs-variable">$val</span>); <span class="hljs-meta">?&gt;</span> <span class="hljs-comment">// This didn't work either</span>
</code></pre>

<p>This doesn't work because PHP will try to treat <code>myPlugin</code> as a constant and when that fails it will try to treat it as the string <code>'myPlugin'</code> which it will try to concatenate with the output of the PHP function <code>start()</code> and since that is undefined it will produce a fatal error.</p>

<p>And</p>

<pre class="default s-code-block"><code class="hljs language-kotlin"> myPlugin.start(&lt;?=$<span class="hljs-keyword">val</span>?&gt; <span class="hljs-comment">// This works sometimes, but sometimes it fails</span>
</code></pre>

<p>While this is most likely to work, since the PHP code is producing valid JavaScript with the expected arguments, if it fails, chances are it's because <code>myPlugin</code> isn't ready yet. Check your order of execution.</p>

<p>Also you should note that the PHP code output is insecure and should be filtered with <code>json_encode()</code>.</p>

<p><strong>EDIT</strong></p>

<p>Because I didn't notice the missing parenthesis in <code>myPlugin.start(&lt;?=$val?&gt;</code> :-\</p>

<p>As @Second Rikudo points out, for it to work correctly <code>$val</code> would need to contain the closing parenthesis, for example: <code>$val="42);"</code></p>

<p>Meaning that the PHP will now produce <code>myPlugin.start(42);</code> and will work as expected when executed by the JavaScript code.</p>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 11</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is is the trick:</p>

<ol>
<li><p>Here is your <strong>'PHP'</strong> to use that variable:</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
    <span class="hljs-variable">$name</span> = <span class="hljs-string">'PHP variable'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;script&gt;'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'var name = '</span> . <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$name</span>) . <span class="hljs-string">';'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;/script&gt;'</span>;
<span class="hljs-meta">?&gt;</span>
</code></pre></li>
<li><p>Now you have a JavaScript variable called <code>'name'</code>, and here is your JavaScript code to use that variable:</p>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"I am everywhere "</span> + name);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre></li>
</ol>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 12</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Let's say your variable is always integer. In that case this is easier:</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?</span>PHP
    <span class="hljs-variable">$number</span> = <span class="hljs-number">4</span>;

    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;script&gt;'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'var number = '</span> . <span class="hljs-variable">$number</span> . <span class="hljs-string">';'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'alert(number);'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;/script&gt;'</span>;
<span class="hljs-meta">?&gt;</span>
</code></pre>

<p><strong>Output</strong>:</p>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-keyword">var</span> number = <span class="hljs-number">4</span>;<span class="hljs-title function_">alert</span>(number);</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>

<p>Let's say your variable is not an integer, but if you try above method you will get something like this:</p>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-keyword">var</span> number = abcd;<span class="hljs-title function_">alert</span>(number);</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>

<p>But in JavaScript this is a syntax error.</p>

<p>So in PHP we have a function call <code>json_encode</code> that encode string to a JSON object.</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?</span>PHP
    <span class="hljs-variable">$number</span> = <span class="hljs-string">'abcd'</span>;

    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;script&gt;'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'var number = '</span> . <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$number</span>) . <span class="hljs-string">';'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'alert(number);'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;/script&gt;'</span>;
<span class="hljs-meta">?&gt;</span>
</code></pre>

<p>Since <code>abcd</code> in JSON is <code>"abcd"</code>, it looks like this:</p>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-keyword">var</span> number = <span class="hljs-string">"abcd"</span>;<span class="hljs-title function_">alert</span>(number);</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>

<p>You can use same method for arrays:</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?</span>PHP
    <span class="hljs-variable">$details</span> = [
    <span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'supun'</span>,
    <span class="hljs-string">'age'</span> =&gt; <span class="hljs-number">456</span>,
    <span class="hljs-string">'weight'</span> =&gt; <span class="hljs-string">'55'</span>
    ];

    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;script&gt;'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'var details = '</span> . <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$details</span>) . <span class="hljs-string">';'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'alert(details);'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'console.log(details);'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;/script&gt;'</span>;
<span class="hljs-meta">?&gt;</span>
</code></pre>

<p>And your JavaScript code looks like this:</p>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-keyword">var</span> details = {<span class="hljs-string">"name"</span>:<span class="hljs-string">"supun"</span>,<span class="hljs-string">"age"</span>:<span class="hljs-number">456</span>,<span class="hljs-string">"weight"</span>:<span class="hljs-string">"55"</span>};<span class="hljs-title function_">alert</span>(details);<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(details);</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>

<p>Console output</p>

<p><a href="https://i.stack.imgur.com/q4sHw.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/q4sHw.png" alt="Enter image description here"></a></p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 13</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I'll assume that the data to transmit is a string.</p>

<p>As other commenters have stated, AJAX is one possible solution, but the cons outweigh the pros: it has a latency and it is harder to program (it needs the code to retrieve the value both server- and client-side), when a simpler escaping function should suffice.</p>

<p>So, we're back to escaping. <code>json_encode($string)</code> works <em>if</em> you encode the source string as UTF-8 first in case it is not already, because <code>json_encode</code> requires UTF-8 data. If the string is in ISO-8859-1 then you can simply use <code>json_encode(utf8_encode($string))</code>; otherwise you can always use <code>iconv</code> to do the conversion first.</p>

<p>But there's a big gotcha. If you're using it in events, you need to run <code>htmlspecialchars()</code> on the result in order to make it correct code. And then you have to either be careful to use double quotes to enclose the event, or always add <code>ENT_QUOTES</code> to htmlspecialchars. For example:</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
    <span class="hljs-variable">$myvar</span> = <span class="hljs-string">"I'm in \"UTF-8\" encoding and I have &lt;script&gt;script tags&lt;/script&gt; &amp; ampersand!"</span>;
    <span class="hljs-comment">// Fails:</span>
    <span class="hljs-comment">//echo '&lt;body onload="alert(', json_encode($myvar), ');"&gt;';</span>
    <span class="hljs-comment">// Fails:</span>
    <span class="hljs-comment">//echo "&lt;body onload='alert(", json_encode($myvar), ");'&gt;";</span>
    <span class="hljs-comment">// Fails:</span>
    <span class="hljs-comment">//echo "&lt;body onload='alert(", htmlspecialchars(json_encode($myvar)), ");'&gt;";</span>

    <span class="hljs-comment">// Works:</span>
    <span class="hljs-comment">//echo "&lt;body onload='alert(", htmlspecialchars(json_encode($myvar), ENT_QUOTES), ");'&gt;";</span>
    <span class="hljs-comment">// Works:</span>
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;body onload="alert('</span>, <span class="hljs-title function_ invoke__">htmlspecialchars</span>(<span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$myvar</span>)), <span class="hljs-string">');"&gt;'</span>;

    <span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;/body&gt;"</span>;
</code></pre>

<p>However, you can't use <code>htmlspecialchars</code> on regular JavaScript code (code enclosed in <code>&lt;script&gt;</code>...<code>&lt;/script&gt;</code> tags). That makes use of this function prone to mistakes, by forgetting to <code>htmlspecialchars</code> the result when writing event code.</p>

<p>It's possible to write a function that does not have that problem, and can be used both in events and in regular JavaScript code, as long as you enclose your events always in single quotes, or always in double quotes. Here is my proposal, requiring them to be in double quotes (which I prefer):</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
    <span class="hljs-comment">// Optionally pass the encoding of the source string, if not UTF-8</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escapeJSString</span>(<span class="hljs-params"><span class="hljs-variable">$string</span>, <span class="hljs-variable">$encoding</span> = <span class="hljs-string">'UTF-8'</span></span>)
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$encoding</span> != <span class="hljs-string">'UTF-8'</span>)
            <span class="hljs-variable">$string</span> = <span class="hljs-title function_ invoke__">iconv</span>(<span class="hljs-variable">$encoding</span>, <span class="hljs-string">'UTF-8'</span>, <span class="hljs-variable">$string</span>);
        <span class="hljs-variable">$flags</span> = JSON_HEX_TAG|JSON_HEX_AMP|JSON_HEX_APOS|JSON_HEX_QUOT|JSON_UNESCAPED_SLASHES;
        <span class="hljs-variable">$string</span> = <span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$string</span>, <span class="hljs-variable">$flags</span>), <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"'<span class="hljs-subst">$string</span>'"</span>;
    }
</code></pre>

<p>The function requires PHP 5.4+. Example usage:</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
    <span class="hljs-variable">$myvar</span> = <span class="hljs-string">"I'm in \"UTF-8\" encoding and I have &lt;script&gt;script tags&lt;/script&gt; &amp; ampersand!"</span>;
    <span class="hljs-comment">// Note use of double quotes to enclose the event definition!</span>
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;body onload="alert('</span>, <span class="hljs-title function_ invoke__">escapeJSString</span>(<span class="hljs-variable">$myvar</span>), <span class="hljs-string">');"&gt;'</span>;
    <span class="hljs-comment">// Example with regular code:</span>
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;script&gt;alert('</span>, <span class="hljs-title function_ invoke__">escapeJSString</span>(<span class="hljs-variable">$myvar</span>), <span class="hljs-string">');&lt;/script&gt;'</span>;
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;/body&gt;'</span>;
</code></pre>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 14</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>After much research, I found the easiest method is to pass all kinds of variables easily.</p>

<p>In the server script, you have two variables, and you are trying to send them to the client scripts:</p>

<pre class="default s-code-block"><code class="hljs language-bash"><span class="hljs-variable">$php_var1</span> =<span class="hljs-string">"Hello world"</span>;
<span class="hljs-variable">$php_var2</span> =<span class="hljs-string">"Helloow"</span>;
<span class="hljs-built_in">echo</span> <span class="hljs-string">'&lt;script&gt;'</span>;
<span class="hljs-built_in">echo</span> <span class="hljs-string">'var js_variable1= '</span> . json_encode(<span class="hljs-variable">$php_var1</span>) . <span class="hljs-string">';'</span>;
<span class="hljs-built_in">echo</span> <span class="hljs-string">'var js_variable2= '</span> . json_encode(<span class="hljs-variable">$php_var2</span>) . <span class="hljs-string">';'</span>;
<span class="hljs-built_in">echo</span> <span class="hljs-string">'&lt;/script&gt;'</span>;
</code></pre>

<p>In any of your JavaScript code called on the page, simply call those variables.</p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 15</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>PHP</strong></p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-variable">$fruits</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">"apple"</span> =&gt; <span class="hljs-string">"yellow"</span>, <span class="hljs-string">"strawberry"</span> =&gt; <span class="hljs-string">"red"</span>, <span class="hljs-string">"kiwi"</span> =&gt; <span class="hljs-string">"green"</span>);
&lt;script&gt;
    <span class="hljs-keyword">var</span> color = <span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$fruits</span>) <span class="hljs-meta">?&gt;</span>;
&lt;/script&gt;
&lt;script src=<span class="hljs-string">"../yourexternal.js"</span>&gt;&lt;/script&gt;
</code></pre>

<p><strong>JS</strong> <em>(yourexternal.js)</em></p>

<pre class="default s-code-block"><code class="hljs language-css">alert("The apple <span class="hljs-attribute">color</span> is" + <span class="hljs-attribute">color</span><span class="hljs-selector-attr">[<span class="hljs-string">'apple'</span>]</span> + ", the strawberry <span class="hljs-attribute">color</span> is " + <span class="hljs-attribute">color</span><span class="hljs-selector-attr">[<span class="hljs-string">'strawberry'</span>]</span> + " and the kiwi <span class="hljs-attribute">color</span> is " + <span class="hljs-attribute">color</span><span class="hljs-selector-attr">[<span class="hljs-string">'kiwi'</span>]</span> + ".");
</code></pre>

<p><strong>OUTPUT</strong></p>

<blockquote>
  <p>The apple color is yellow, the strawberry color is red and the kiwi
  color is green.</p>
</blockquote>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 16</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As per your code</p>

<pre class="default s-code-block"><code class="hljs language-php">&lt;<span class="hljs-variable">$php</span>
     <span class="hljs-variable">$val</span> = <span class="hljs-variable">$myService</span>-&gt;<span class="hljs-title function_ invoke__">getValue</span>(); <span class="hljs-comment">// Makes an API and database call</span>
     <span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;span id="value"&gt;'</span>.<span class="hljs-variable">$val</span>.<span class="hljs-string">'&lt;/span&gt;'</span>;
$&gt;
</code></pre>

<p>Now you can get value using DOM, use innerHTML of span id, in this case you don't need to do any call to server, or Ajax or another thing.</p>

<p>Your page will print it using PHP, and you JavaScript will get value using DOM.</p>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 17</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>

    <span class="hljs-variable">$val</span> = <span class="hljs-variable">$myService</span>-&gt;<span class="hljs-title function_ invoke__">getValue</span>(); <span class="hljs-comment">// Makes an API and database call</span>

    <span class="hljs-keyword">echo</span> <span class="hljs-string">"
        &lt;script&gt;
            myPlugin.start(<span class="hljs-subst">{$val}</span>);
        &lt;/script&gt; "</span>;

<span class="hljs-meta">?&gt;</span>
</code></pre>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 18</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>we also can do it in this way for some usecases:</p>
<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-meta">&lt;?php</span>
    
<span class="hljs-variable">$inPhpVar</span> = <span class="hljs-string">"i am php var"</span>;

<span class="hljs-variable">$ScriptInline</span> = <span class="hljs-string">&lt;&lt;&lt;JS
&lt;script&gt;
alert('<span class="hljs-subst">{$inPhpVar}</span> that used in js code');
&lt;/script&gt;
JS</span>;

<span class="hljs-keyword">echo</span> <span class="hljs-variable">$ScriptInline</span>;

<span class="hljs-meta">?&gt;</span>
</code></pre>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 19</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you need to get some important data in your script, that is available in php, you can automatically echo a complete script before your script where the data is needed, with some globals with that information.</p>
<p>In your scirpt imports on your html:</p>
<pre class="default s-code-block"><code class="hljs language-php-template"><span class="language-php"><span class="hljs-meta">&lt;?php</span>
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;script&gt;
                const importantData = "</span>.<span class="hljs-variable">$php_data</span>.<span class="hljs-string">";
        &lt;/script&gt;"</span>;
<span class="hljs-meta">?&gt;</span></span><span class="language-xml">
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../assets/js/your_script.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<p>So then you can access that information through the const named 'importantData' from your_script.js</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/deep-cloning-objects-1657387930865">Deep cloning objects</a><a href="/questions/how-to-filter-pandas-dataframe-using-&#x27;in&#x27;-and-&#x27;not-in&#x27;-like-in-sql-1657387371355">How to filter Pandas dataframe using &#x27;in&#x27; and &#x27;not in&#x27; like in SQL</a><a href="/questions/undefined-unspecified-and-implementation-defined-behavior-1657384516085">Undefined, unspecified and implementation-defined behavior</a><a href="/questions/creating-multiline-strings-in-javascript-1657388025414">Creating multiline strings in JavaScript</a><a href="/questions/official-locator-strategies-for-the-webdriver-1657384353174">Official locator strategies for the webdriver</a><a href="/questions/what-is-the-difference-between-public-protected-package-private-and-private-in-java-1657387376262">What is the difference between public, protected, package-private and private in Java?</a><a href="/questions/how-can-i-vertically-align-elements-in-a-div-1657385504431">How can I vertically align elements in a div?</a><a href="/questions/how-should-i-use-servlets-and-ajax-1657385492684">How should I use servlets and Ajax?</a><a href="/questions/split-array-into-chunks-1657387896420">Split array into chunks</a><a href="/questions/how-can-i-read-inputs-as-numbers-1657384503324">How can I read inputs as numbers?</a><a href="/questions/change-the-maximum-upload-file-size-1657388495156">Change the maximum upload file size</a><a href="/questions/download-a-file-by-jquery.ajax-1657388220611">Download a file by jQuery.Ajax</a><a href="/questions/how-do-i-format-a-date-in-javascript-1657384649498">How do I format a date in JavaScript?</a><a href="/questions/what-is-the-purpose-of-the-var-keyword-and-when-should-i-use-it-(or-omit-it)-1657387525538">What is the purpose of the var keyword and when should I use it (or omit it)?</a><a href="/questions/how-do-i-use-extern-to-share-variables-between-source-files-1657387453605">How do I use extern to share variables between source files?</a><a href="/questions/ways-to-circumvent-the-same-origin-policy-1657384763316">Ways to circumvent the same-origin policy</a><a href="/questions/what-is-move-semantics-1657387702625">What is move semantics?</a><a href="/questions/default-constructor-with-empty-brackets-1657388246967">Default constructor with empty brackets</a><a href="/questions/selenium-%22selenium.common.exceptions.nosuchelementexception%22-when-using-chrome-1657388136699">Selenium &quot;selenium.common.exceptions.NoSuchElementException&quot; when using Chrome</a><a href="/questions/what-is-sql-injection-duplicate-1657387944486">What is SQL injection? [duplicate]</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;There are actually several approaches to do this. Some require more overhead than others, and some are considered better than others.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In no particular order:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Use AJAX to get the data you need from the server.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Echo the data into the page somewhere, and use JavaScript to get the information from the DOM.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Echo the data directly to JavaScript.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;In this post, we\u0026apos;ll examine each of the above methods, and see the pros and cons of each, as well as how to implement them.\u0026lt;/p\u0026gt;\n\n\u0026lt;h1\u0026gt;1. Use AJAX to get the data you need from the server\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;This method is considered the best, because \u0026lt;strong\u0026gt;your server side and client side scripts are completely separate\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;Pros\u0026lt;/h3\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Better separation between layers\u0026lt;/strong\u0026gt; - If tomorrow you stop using PHP, and want to move to a servlet, a REST API, or some other service, you don\u0026apos;t have to change much of the JavaScript code.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;More readable\u0026lt;/strong\u0026gt; - JavaScript is JavaScript, PHP is PHP. Without mixing the two, you get more readable code on both languages.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Allows for asynchronous data transfer\u0026lt;/strong\u0026gt; - Getting the information from PHP might be time/resources expensive. Sometimes you just don\u0026apos;t want to wait for the information, load the page, and have the information reach whenever.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Data is not directly found on the markup\u0026lt;/strong\u0026gt; - This means that your markup is kept clean of any additional data, and only JavaScript sees it.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h3\u0026gt;Cons\u0026lt;/h3\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Latency\u0026lt;/strong\u0026gt; - AJAX creates an HTTP request, and HTTP requests are carried over network and have network latencies.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;State\u0026lt;/strong\u0026gt; - Data fetched via a separate HTTP request won\u0026apos;t include any information from the HTTP request that fetched the HTML document. You may need this information (e.g., if the HTML document is generated in response to a form submission) and, if you do, will have to transfer it across somehow. If you have ruled out embedding the data in the page (which you have if you are using this technique) then that limits you to cookies/sessions which may be subject to race conditions.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h2\u0026gt;Implementation Example\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;With AJAX, you need two pages, one is where PHP generates the output, and the second is where JavaScript gets that output:\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;get-data.php\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Do some operation here, like talk to the database, the file-session\n * The world beyond, limbo, the city of shimmers, and Canada.\n *\n * AJAX generally uses strings, but you can output JSON, HTML and XML as well.\n * It all depends on the Content-type header that you send with your AJAX\n * request. */\u0026lt;/span\u0026gt;\n\necho \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;42\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// In the end, you need to echo the result.\u0026lt;/span\u0026gt;\n                      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// All data should be json_encode()d.\u0026lt;/span\u0026gt;\n\n                      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// You can json_encode() any value in PHP, arrays, strings,\u0026lt;/span\u0026gt;\n                      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//even objects.\u0026lt;/span\u0026gt;\n\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h3\u0026gt;index.php (or whatever the actual page is named like)\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;\u0026amp;lt;!-- snip --\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;reqListener\u0026lt;/span\u0026gt; () {\n      \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;responseText\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; oReq = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;XMLHttpRequest\u0026lt;/span\u0026gt;(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// New request object\u0026lt;/span\u0026gt;\n    oReq.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;onload\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This is where you handle what to do with the response.\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// The actual data is found on this.responseText\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;responseText\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Will alert: 42\u0026lt;/span\u0026gt;\n    };\n    oReq.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;open\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;get\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;get-data.php\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//                               ^ Don\u0026apos;t block the rest of the execution.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//                                 Don\u0026apos;t wait until the request finishes to\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//                                 continue.\u0026lt;/span\u0026gt;\n    oReq.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;send\u0026lt;/span\u0026gt;();\n\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;\u0026amp;lt;!-- snip --\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The above combination of the two files will alert \u0026lt;code\u0026gt;42\u0026lt;/code\u0026gt; when the file finishes loading.\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;Some more reading material\u0026lt;/h2\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Using XMLHttpRequest - MDN\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;XMLHttpRequest object reference - MDN\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call\u0026quot;\u0026gt;How do I return the response from an asynchronous call?\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h1\u0026gt;2. Echo the data into the page somewhere, and use JavaScript to get the information from the DOM\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;This method is less preferable to AJAX, but it still has its advantages. It\u0026apos;s still \u0026lt;em\u0026gt;relatively\u0026lt;/em\u0026gt; separated between PHP and JavaScript in a sense that there is no PHP directly in the JavaScript.\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;Pros\u0026lt;/h3\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Fast\u0026lt;/strong\u0026gt; - DOM operations are often quick, and you can store and access a lot of data relatively quickly.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h3\u0026gt;Cons\u0026lt;/h3\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Potentially Unsemantic Markup\u0026lt;/strong\u0026gt; - Usually, what happens is that you use some sort of \u0026lt;code\u0026gt;\u0026amp;lt;input type=hidden\u0026amp;gt;\u0026lt;/code\u0026gt; to store the information, because it\u0026apos;s easier to get the information out of \u0026lt;code\u0026gt;inputNode.value\u0026lt;/code\u0026gt;, but doing so means that you have a meaningless element in your HTML. HTML has the \u0026lt;code\u0026gt;\u0026amp;lt;meta\u0026amp;gt;\u0026lt;/code\u0026gt; element for data about the document, and HTML 5 introduces \u0026lt;code\u0026gt;data-*\u0026lt;/code\u0026gt; attributes for data specifically for reading with JavaScript that can be associated with particular elements.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Dirties up the Source\u0026lt;/strong\u0026gt; - Data that PHP generates is outputted directly to the HTML source, meaning that you get a bigger and less focused HTML source.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Harder to get structured data\u0026lt;/strong\u0026gt; - Structured data will have to be valid HTML, otherwise you\u0026apos;ll have to escape and convert strings yourself.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Tightly couples PHP to your data logic\u0026lt;/strong\u0026gt; - Because PHP is used in presentation, you can\u0026apos;t separate the two cleanly.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h2\u0026gt;Implementation Example\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;With this, the idea is to create some sort of element which will not be displayed to the user, but is visible to JavaScript.\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;index.php\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php-template\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;\u0026amp;lt;!-- snip --\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;div\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;dom-target\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;display: none;\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$output\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;42\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Again, do some operation, get the output.\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;htmlspecialchars\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$output\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* You have to escape because the result\n                                           will not be valid HTML otherwise. */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;div\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; div = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;dom-target\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; myData = div.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;textContent\u0026lt;/span\u0026gt;;\n\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;\u0026amp;lt;!-- snip --\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h1\u0026gt;3. Echo the data directly to JavaScript\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;This is probably the easiest to understand.\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;Pros\u0026lt;/h3\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Very easily implemented\u0026lt;/strong\u0026gt; - It takes very little to implement this, and understand.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Does not dirty source\u0026lt;/strong\u0026gt; - Variables are outputted directly to JavaScript, so the DOM is not affected.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h3\u0026gt;Cons\u0026lt;/h3\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Tightly couples PHP to your data logic\u0026lt;/strong\u0026gt; - Because PHP is used in presentation, you can\u0026apos;t separate the two cleanly.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h2\u0026gt;Implementation Example\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;Implementation is relatively straightforward:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php-template\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;\u0026amp;lt;!-- snip --\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; data = \u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;42\u0026quot;\u0026lt;/span\u0026gt;, JSON_HEX_TAG); \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Don\u0026apos;t forget the extra semicolon!\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;\u0026amp;lt;!-- snip --\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Good luck!\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I usually use data-* attributes in HTML.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;div\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;service-container\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;data-service\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;?= htmlspecialchars($myService-\u0026amp;gt;getValue()) ?\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;div\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\n    $(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;ready\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n        $(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.service-container\u0026apos;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;each\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; container = $(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; service = container.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;service\u0026apos;\u0026lt;/span\u0026gt;);\n\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Var \u0026quot;service\u0026quot; now contains the value of $myService-\u0026amp;gt;getValue();\u0026lt;/span\u0026gt;\n        });\n    });\n\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This example uses jQuery, but it can be adapted for another library or vanilla JavaScript.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You can read more about the dataset property here: \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.dataset\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.dataset\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;m going to try a simpler answer:\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Explanation of the problem\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;First, let\u0026apos;s understand the flow of events when a page is served from our server:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;First PHP is run, it generates the HTML that is served to the client.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Then, the HTML is delivered to the client, after PHP is done with it, I\u0026apos;d like to emphasize that once the code leaves the server - PHP is done with it and can no longer access it.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Then, the HTML with JavaScript reaches the client, which can execute JavaScript on that HTML.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;So really, the core thing to remember here is that \u0026lt;strong\u0026gt;HTTP is stateless\u0026lt;/strong\u0026gt;. Once a request left the server, the server can not touch it. So, that leaves our options to:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Send more requests from the client \u0026lt;em\u0026gt;after\u0026lt;/em\u0026gt; the initial request is done.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Encode what the server had to say in the initial request.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;h2\u0026gt;Solutions\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;That\u0026apos;s the core question you should be asking yourself is:\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Am I writing a website or an application?\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Websites are mainly page based, and the page load times needs to be as fast as possible (for example - Wikipedia). Web applications are more AJAX heavy and perform a lot of round trips to get the client fast information (for example - a stock dashboard).\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Website\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Sending more requests from the client after the initial request is done is \u0026lt;strong\u0026gt;slow\u0026lt;/strong\u0026gt; as it requires more HTTP requests which have significant overhead. Moreover, it requires \u0026lt;em\u0026gt;asynchronousity\u0026lt;/em\u0026gt; as making an AJAX request requires a handler for when it\u0026apos;s complete.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I would \u0026lt;em\u0026gt;not\u0026lt;/em\u0026gt; recommend making another request \u0026lt;em\u0026gt;unless your site is an application\u0026lt;/em\u0026gt; for getting that information from the server.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You want fast response times which have a \u0026lt;em\u0026gt;huge\u0026lt;/em\u0026gt; impact on conversion and load times. Making Ajax requests is slow for the initial uptime in this case and unneeded.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You have two ways to tackle the issue\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Set a cookie\u0026lt;/strong\u0026gt; - cookies are headers sent in HTTP requests that both the server and client can read.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;strong\u0026gt;Encode the variable as JSON\u0026lt;/strong\u0026gt; - JSON looks very close to JavaScript objects and \u0026lt;em\u0026gt;most\u0026lt;/em\u0026gt; JSON objects are valid JavaScript variables.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://www.php.net/manual/en/function.setcookie.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Setting a cookie\u0026lt;/a\u0026gt; is really not very difficult, you just assign it a value:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;setcookie\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyCookie\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Sets the cookie to the value, remember, do not\u0026lt;/span\u0026gt;\n                               \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Set it with HTTP only to true.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then, you can \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/5639346/shortest-function-for-reading-a-cookie-in-javascript\u0026quot;\u0026gt;read it with JavaScript\u0026lt;/a\u0026gt; using \u0026lt;code\u0026gt;document.cookie\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Here is a short hand rolled parser, but the answer I linked to right above this has better tested ones:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; cookies = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;cookie\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;split\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;;\u0026quot;\u0026lt;/span\u0026gt;).\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;el\u0026lt;/span\u0026gt;){ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; el.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;split\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;=\u0026quot;\u0026lt;/span\u0026gt;); }).\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;reduce\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;prev,cur\u0026lt;/span\u0026gt;){ prev[cur[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]] = cur[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; prev },{});\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(cookies[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyCookie\u0026quot;\u0026lt;/span\u0026gt;]); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Value set with PHP.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Cookies are good for a little data. This is what tracking services often do.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Once we have more data, we can encode it with JSON inside a JavaScript variable instead:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; myServerData = \u0026amp;lt;?=\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;($value)?\u0026amp;gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Don\u0026apos;t forget to sanitize\u0026lt;/span\u0026gt;\n                                                 \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//server data\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Assuming \u0026lt;code\u0026gt;$value\u0026lt;/code\u0026gt; is \u0026lt;code\u0026gt;json_encode\u0026lt;/code\u0026gt;able on the PHP side (it usually is). This technique is what Stack Overflow does with its chat for example (only using .NET instead of PHP).\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Application\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;If you\u0026apos;re writing an application - suddenly the initial load time isn\u0026apos;t always as important as the ongoing performance of the application, and it starts to pay off to load data and code separately.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;My answer \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/14220321/how-do-i-return-the-response-from-an-asynchronous-call/16825593#16825593\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt; explains how to load data using AJAX in JavaScript:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;callback\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// What do I do with the response?\u0026lt;/span\u0026gt;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; httpRequest = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;XMLHttpRequest\u0026lt;/span\u0026gt;;\nhttpRequest.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;onreadystatechange\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (httpRequest.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;readyState\u0026lt;/span\u0026gt; === \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Request is done\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (httpRequest.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;status\u0026lt;/span\u0026gt; === \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;200\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// successfully\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;callback\u0026lt;/span\u0026gt;(httpRequest.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;responseText\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// We\u0026apos;re calling our method\u0026lt;/span\u0026gt;\n        }\n    }\n};\nhttpRequest.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;open\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;GET\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/echo/json\u0026quot;\u0026lt;/span\u0026gt;);\nhttpRequest.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;send\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Or with jQuery:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;$.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/your/url\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;done\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// What do I do with the data?\u0026lt;/span\u0026gt;\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Now, the server just needs to contain a \u0026lt;code\u0026gt;/your/url\u0026lt;/code\u0026gt; route/file that contains code that grabs the data and does something with it, in your case:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt; = myService-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;getValue\u0026lt;/span\u0026gt;(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Makes an API and database call\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;header\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type: application/json\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Advise client of response type\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Write it to the output\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This way, our JavaScript file asks for the data and shows it rather than asking for code or for layout. This is cleaner and starts to pay off as the application gets higher. It\u0026apos;s also better separation of concerns and it allows testing the client side code without any server side technology involved which is another plus.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Postscript:\u0026lt;/strong\u0026gt; You have to be \u0026lt;em\u0026gt;very\u0026lt;/em\u0026gt; aware of XSS attack vectors when you inject anything from PHP to JavaScript. It\u0026apos;s \u0026lt;em\u0026gt;very\u0026lt;/em\u0026gt; hard to escape values properly and it\u0026apos;s context sensitive. If you\u0026apos;re unsure how to deal with XSS, or unaware of it - please read \u0026lt;a href=\u0026quot;https://www.owasp.org/index.php/Cross-site_Scripting_(XSS)\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;this OWASP article\u0026lt;/a\u0026gt;, \u0026lt;a href=\u0026quot;https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;this one\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/71328/what-are-the-best-practices-for-avoiding-xss-attacks-in-a-php-site\u0026quot;\u0026gt;this question\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php-template\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; jsvar = \u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$PHPVar\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;json_encode() requires:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;PHP 5.2.0 or more\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;$PHPVar\u0026lt;/code\u0026gt; encoded as UTF-8, Unicode.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Simply use one of the following methods.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php-template\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/javascript\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; js_variable  = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$php_variable\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026apos;;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;OR\u0026lt;/strong\u0026gt; \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php-template\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/javascript\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; js_variable = \u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$php_variable\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;; \n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I quite like the way the WordPress works with its \u0026lt;a href=\u0026quot;http://codex.wordpress.org/Function_Reference/wp_enqueue_script\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;enqueue\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;http://codex.wordpress.org/Function_Reference/wp_localize_script\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;localize\u0026lt;/a\u0026gt; functions, so following that model, I wrote a simple class for putting a scripts into page according to the script dependencies, and for making additional data available for the script.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;mHeader\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$scripts\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;();\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; string $id        Unique script identifier\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; string $src      Script src attribute\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; array  $deps       An array of dependencies ( script identifiers ).\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; array  $data       An array, data that will be json_encoded and available to the script.\n     */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;enqueue_script\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$src\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;) \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;scripts[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$id\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;src\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$src\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;deps\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;data\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$data\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;dependencies\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$script\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;) \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$script\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;deps\u0026apos;\u0026lt;/span\u0026gt;]) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dependencies\u0026apos;\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_intersect_key\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;scripts, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_flip\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$script\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;deps\u0026apos;\u0026lt;/span\u0026gt;])));\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;_unset\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;, \u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt;, \u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$out\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;) \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$out\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;scripts[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;unset\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;]);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;flattern\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt;, \u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$out\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;) \u0026lt;/span\u0026gt;{\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;empty\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$value\u0026lt;/span\u0026gt;) ? \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;_unset\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$out\u0026lt;/span\u0026gt;) : \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;flattern\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$out\u0026lt;/span\u0026gt;);\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;print_scripts\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) \u0026lt;/span\u0026gt;{\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;scripts)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;array_map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dependencies\u0026apos;\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;scripts);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt;)\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;$this\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;flattern\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$deps\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$js\u0026lt;/span\u0026gt;);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;foreach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$js\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;as\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$script\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$script\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;data\u0026apos;\u0026lt;/span\u0026gt;] \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;script\u0026amp;gt; var %s = %s; \u0026amp;lt;/script\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; . PHP_EOL, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$script\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;data\u0026apos;\u0026lt;/span\u0026gt;]), \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;current\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$script\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;data\u0026apos;\u0026lt;/span\u0026gt;])));\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;script id=\\\u0026quot;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$key\u0026lt;/span\u0026gt;-js\\\u0026quot; src=\\\u0026quot;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$script\u0026lt;/span\u0026gt;[src]\\\u0026quot; type=\\\u0026quot;text/javascript\\\u0026quot;\u0026amp;gt;\u0026amp;lt;/script\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt; . PHP_EOL;\n        }\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The call to the \u0026lt;code\u0026gt;enqueue_script()\u0026lt;/code\u0026gt; function is for adding script, setting the source and dependencies on other scripts, and additional data needed for the script.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$header\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;mHeader\u0026lt;/span\u0026gt;();\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$header\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;enqueue_script\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;jquery-ui\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;jquery\u0026apos;\u0026lt;/span\u0026gt;));\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$header\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;enqueue_script\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;jquery\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$header\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;enqueue_script\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;custom-script\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;//custom-script.min.js\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;jquery-ui\u0026apos;\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;mydata\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;)));\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$header\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;print_scripts\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And, \u0026lt;code\u0026gt;print_scripts()\u0026lt;/code\u0026gt; method of the above example will send this output:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;jquery-js\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/javascript\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;jquery-ui-js\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/javascript\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; mydata = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;}; \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;custom-script-js\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;//custom-script.min.js\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;type\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/javascript\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Regardless the fact that the script \u0026apos;jquery\u0026apos; is enqueued after the \u0026apos;jquery-ui\u0026apos;, it is printed before because it is defined in \u0026apos;jquery-ui\u0026apos; that it depends on \u0026apos;jquery\u0026apos;.\nAdditional data for the \u0026apos;custom-script\u0026apos; are inside a new script block and are placed in front of it, it contains \u0026lt;code\u0026gt;mydata\u0026lt;/code\u0026gt; object that holds additional data, now available to \u0026apos;custom-script\u0026apos;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Try this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;script\u0026amp;gt; var x = \u0026quot;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$phpVariable\u0026lt;/span\u0026gt;) . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/script\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;--\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;-After trying this for a while\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Although it works, however it slows down the performance. As PHP is a server-side script while JavaScript is a user side.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I have come out with an easy method to assign JavaScript variables using PHP.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;It uses HTML5 data attributes to store PHP variables and then it\u0026apos;s assigned to JavaScript on page load.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php-template\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$variable_1\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;QNimate\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$variable_2\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;QScutter\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;span\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;storage\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;data-variable-one\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$variable_1\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;data-variable-two\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$variable_2\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;span\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Here is the JavaScript code\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; variable_1 = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; variable_2 = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;onload\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;){\n    variable_1 = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;storage\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getAttribute\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;data-variable-one\u0026quot;\u0026lt;/span\u0026gt;);\n    variable_2 = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;storage\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getAttribute\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;data-variable-two\u0026quot;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Convert the data into \u0026lt;em\u0026gt;JSON\u0026lt;/em\u0026gt; \u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Call \u0026lt;em\u0026gt;AJAX\u0026lt;/em\u0026gt; to recieve \u0026lt;em\u0026gt;JSON\u0026lt;/em\u0026gt; file\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Convert \u0026lt;em\u0026gt;JSON\u0026lt;/em\u0026gt; into \u0026lt;em\u0026gt;Javascript\u0026lt;/em\u0026gt; object\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;Example:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;STEP 1\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\n   \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$servername\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;localhost\u0026quot;\u0026lt;/span\u0026gt;;\n   \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$username\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;;\n   \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$password\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;;\n   \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dbname\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;;\n   \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$conn\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;mysqli\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$servername\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$username\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$password\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$dbname\u0026lt;/span\u0026gt;);\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$conn\u0026lt;/span\u0026gt;-\u0026amp;gt;connect_error) {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;die\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Connection failed: \u0026quot;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$conn\u0026lt;/span\u0026gt;-\u0026amp;gt;connect_error);\n   } \n\n   \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT id, name, image FROM phone\u0026quot;\u0026lt;/span\u0026gt;;\n   \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$result\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$conn\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;query\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt;);\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$row\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$result\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;fetch_assoc\u0026lt;/span\u0026gt;()){ \n      \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$v\u0026lt;/span\u0026gt;[] = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$row\u0026lt;/span\u0026gt;;    \n   }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$v\u0026lt;/span\u0026gt;);\n\n  \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$conn\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;close\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;STEP 2\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;showUser\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;fnc\u0026lt;/span\u0026gt;) {\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; xhttp = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;XMLHttpRequest\u0026lt;/span\u0026gt;();\n\n   xhttp.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;onreadystatechange\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;readyState\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;status\u0026lt;/span\u0026gt; == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;200\u0026lt;/span\u0026gt;) {\n         \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// STEP 3    \u0026lt;/span\u0026gt;\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; p = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;responseText\u0026lt;/span\u0026gt;);\n      }\n   }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-kotlin\u0026quot;\u0026gt;myPlugin.start($\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Tried this, didn\u0026apos;t work\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It doesn\u0026apos;t work because \u0026lt;code\u0026gt;$val\u0026lt;/code\u0026gt; is undefined as far as JavaScript is concerned, i.e. the PHP code did not output anything for \u0026lt;code\u0026gt;$val\u0026lt;/code\u0026gt;. Try viewing the source in your browser and here is what you\u0026apos;ll see:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;myPlugin\u0026lt;span class=\u0026quot;hljs-selector-class\u0026quot;\u0026gt;.start\u0026lt;/span\u0026gt;(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// I tried this, and it didn\u0026apos;t work\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt; myPlugin.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;start\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This didn\u0026apos;t work either\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This doesn\u0026apos;t work because PHP will try to treat \u0026lt;code\u0026gt;myPlugin\u0026lt;/code\u0026gt; as a constant and when that fails it will try to treat it as the string \u0026lt;code\u0026gt;\u0026apos;myPlugin\u0026apos;\u0026lt;/code\u0026gt; which it will try to concatenate with the output of the PHP function \u0026lt;code\u0026gt;start()\u0026lt;/code\u0026gt; and since that is undefined it will produce a fatal error.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;And\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-kotlin\u0026quot;\u0026gt; myPlugin.start(\u0026amp;lt;?=$\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;?\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This works sometimes, but sometimes it fails\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;While this is most likely to work, since the PHP code is producing valid JavaScript with the expected arguments, if it fails, chances are it\u0026apos;s because \u0026lt;code\u0026gt;myPlugin\u0026lt;/code\u0026gt; isn\u0026apos;t ready yet. Check your order of execution.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Also you should note that the PHP code output is insecure and should be filtered with \u0026lt;code\u0026gt;json_encode()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;EDIT\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Because I didn\u0026apos;t notice the missing parenthesis in \u0026lt;code\u0026gt;myPlugin.start(\u0026amp;lt;?=$val?\u0026amp;gt;\u0026lt;/code\u0026gt; :-\\\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;As @Second Rikudo points out, for it to work correctly \u0026lt;code\u0026gt;$val\u0026lt;/code\u0026gt; would need to contain the closing parenthesis, for example: \u0026lt;code\u0026gt;$val=\u0026quot;42);\u0026quot;\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Meaning that the PHP will now produce \u0026lt;code\u0026gt;myPlugin.start(42);\u0026lt;/code\u0026gt; and will work as expected when executed by the JavaScript code.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is is the trick:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Here is your \u0026lt;strong\u0026gt;\u0026apos;PHP\u0026apos;\u0026lt;/strong\u0026gt; to use that variable:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$name\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;PHP variable\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;var name = \u0026apos;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$name\u0026lt;/span\u0026gt;) . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Now you have a JavaScript variable called \u0026lt;code\u0026gt;\u0026apos;name\u0026apos;\u0026lt;/code\u0026gt;, and here is your JavaScript code to use that variable:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I am everywhere \u0026quot;\u0026lt;/span\u0026gt; + name);\n\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Let\u0026apos;s say your variable is always integer. In that case this is easier:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?\u0026lt;/span\u0026gt;PHP\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$number\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;var number = \u0026apos;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$number\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;alert(number);\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Output\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; number = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(number);\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Let\u0026apos;s say your variable is not an integer, but if you try above method you will get something like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; number = abcd;\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(number);\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;But in JavaScript this is a syntax error.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So in PHP we have a function call \u0026lt;code\u0026gt;json_encode\u0026lt;/code\u0026gt; that encode string to a JSON object.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?\u0026lt;/span\u0026gt;PHP\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$number\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;abcd\u0026apos;\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;var number = \u0026apos;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$number\u0026lt;/span\u0026gt;) . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;alert(number);\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Since \u0026lt;code\u0026gt;abcd\u0026lt;/code\u0026gt; in JSON is \u0026lt;code\u0026gt;\u0026quot;abcd\u0026quot;\u0026lt;/code\u0026gt;, it looks like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; number = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;abcd\u0026quot;\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(number);\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can use same method for arrays:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?\u0026lt;/span\u0026gt;PHP\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$details\u0026lt;/span\u0026gt; = [\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;name\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;supun\u0026apos;\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;age\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;456\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;weight\u0026apos;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;55\u0026apos;\u0026lt;/span\u0026gt;\n    ];\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;var details = \u0026apos;\u0026lt;/span\u0026gt; . \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$details\u0026lt;/span\u0026gt;) . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;alert(details);\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;console.log(details);\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And your JavaScript code looks like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; details = {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;name\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;supun\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;age\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;456\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;weight\u0026quot;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;55\u0026quot;\u0026lt;/span\u0026gt;};\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;alert\u0026lt;/span\u0026gt;(details);\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(details);\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Console output\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/q4sHw.png\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/q4sHw.png\u0026quot; alt=\u0026quot;Enter image description here\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;ll assume that the data to transmit is a string.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;As other commenters have stated, AJAX is one possible solution, but the cons outweigh the pros: it has a latency and it is harder to program (it needs the code to retrieve the value both server- and client-side), when a simpler escaping function should suffice.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So, we\u0026apos;re back to escaping. \u0026lt;code\u0026gt;json_encode($string)\u0026lt;/code\u0026gt; works \u0026lt;em\u0026gt;if\u0026lt;/em\u0026gt; you encode the source string as UTF-8 first in case it is not already, because \u0026lt;code\u0026gt;json_encode\u0026lt;/code\u0026gt; requires UTF-8 data. If the string is in ISO-8859-1 then you can simply use \u0026lt;code\u0026gt;json_encode(utf8_encode($string))\u0026lt;/code\u0026gt;; otherwise you can always use \u0026lt;code\u0026gt;iconv\u0026lt;/code\u0026gt; to do the conversion first.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;But there\u0026apos;s a big gotcha. If you\u0026apos;re using it in events, you need to run \u0026lt;code\u0026gt;htmlspecialchars()\u0026lt;/code\u0026gt; on the result in order to make it correct code. And then you have to either be careful to use double quotes to enclose the event, or always add \u0026lt;code\u0026gt;ENT_QUOTES\u0026lt;/code\u0026gt; to htmlspecialchars. For example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myvar\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I\u0026apos;m in \\\u0026quot;UTF-8\\\u0026quot; encoding and I have \u0026amp;lt;script\u0026amp;gt;script tags\u0026amp;lt;/script\u0026amp;gt; \u0026amp;amp; ampersand!\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Fails:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//echo \u0026apos;\u0026amp;lt;body onload=\u0026quot;alert(\u0026apos;, json_encode($myvar), \u0026apos;);\u0026quot;\u0026amp;gt;\u0026apos;;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Fails:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//echo \u0026quot;\u0026amp;lt;body onload=\u0026apos;alert(\u0026quot;, json_encode($myvar), \u0026quot;);\u0026apos;\u0026amp;gt;\u0026quot;;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Fails:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//echo \u0026quot;\u0026amp;lt;body onload=\u0026apos;alert(\u0026quot;, htmlspecialchars(json_encode($myvar)), \u0026quot;);\u0026apos;\u0026amp;gt;\u0026quot;;\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Works:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//echo \u0026quot;\u0026amp;lt;body onload=\u0026apos;alert(\u0026quot;, htmlspecialchars(json_encode($myvar), ENT_QUOTES), \u0026quot;);\u0026apos;\u0026amp;gt;\u0026quot;;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Works:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;body onload=\u0026quot;alert(\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;htmlspecialchars\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myvar\u0026lt;/span\u0026gt;)), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;);\u0026quot;\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;/body\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;However, you can\u0026apos;t use \u0026lt;code\u0026gt;htmlspecialchars\u0026lt;/code\u0026gt; on regular JavaScript code (code enclosed in \u0026lt;code\u0026gt;\u0026amp;lt;script\u0026amp;gt;\u0026lt;/code\u0026gt;...\u0026lt;code\u0026gt;\u0026amp;lt;/script\u0026amp;gt;\u0026lt;/code\u0026gt; tags). That makes use of this function prone to mistakes, by forgetting to \u0026lt;code\u0026gt;htmlspecialchars\u0026lt;/code\u0026gt; the result when writing event code.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It\u0026apos;s possible to write a function that does not have that problem, and can be used both in events and in regular JavaScript code, as long as you enclose your events always in single quotes, or always in double quotes. Here is my proposal, requiring them to be in double quotes (which I prefer):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Optionally pass the encoding of the source string, if not UTF-8\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;escapeJSString\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$encoding\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;UTF-8\u0026apos;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\n    \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$encoding\u0026lt;/span\u0026gt; != \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;UTF-8\u0026apos;\u0026lt;/span\u0026gt;)\n            \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;iconv\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$encoding\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;UTF-8\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$flags\u0026lt;/span\u0026gt; = JSON_HEX_TAG|JSON_HEX_AMP|JSON_HEX_APOS|JSON_HEX_QUOT|JSON_UNESCAPED_SLASHES;\n        \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;substr\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$flags\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, -\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;$string\u0026lt;/span\u0026gt;\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;;\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The function requires PHP 5.4+. Example usage:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myvar\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;I\u0026apos;m in \\\u0026quot;UTF-8\\\u0026quot; encoding and I have \u0026amp;lt;script\u0026amp;gt;script tags\u0026amp;lt;/script\u0026amp;gt; \u0026amp;amp; ampersand!\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Note use of double quotes to enclose the event definition!\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;body onload=\u0026quot;alert(\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;escapeJSString\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myvar\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;);\u0026quot;\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Example with regular code:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;script\u0026amp;gt;alert(\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;escapeJSString\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myvar\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;);\u0026amp;lt;/script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/body\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;After much research, I found the easiest method is to pass all kinds of variables easily.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In the server script, you have two variables, and you are trying to send them to the client scripts:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$php_var1\u0026lt;/span\u0026gt; =\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello world\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$php_var2\u0026lt;/span\u0026gt; =\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Helloow\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;var js_variable1= \u0026apos;\u0026lt;/span\u0026gt; . json_encode(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$php_var1\u0026lt;/span\u0026gt;) . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;var js_variable2= \u0026apos;\u0026lt;/span\u0026gt; . json_encode(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$php_var2\u0026lt;/span\u0026gt;) . \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/script\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;In any of your JavaScript code called on the page, simply call those variables.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;PHP\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$fruits\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;apple\u0026quot;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;yellow\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;strawberry\u0026quot;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;red\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;kiwi\u0026quot;\u0026lt;/span\u0026gt; =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;green\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026amp;lt;script\u0026amp;gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; color = \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;json_encode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$fruits\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;;\n\u0026amp;lt;/script\u0026amp;gt;\n\u0026amp;lt;script src=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;../yourexternal.js\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026amp;lt;/script\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;JS\u0026lt;/strong\u0026gt; \u0026lt;em\u0026gt;(yourexternal.js)\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-css\u0026quot;\u0026gt;alert(\u0026quot;The apple \u0026lt;span class=\u0026quot;hljs-attribute\u0026quot;\u0026gt;color\u0026lt;/span\u0026gt; is\u0026quot; + \u0026lt;span class=\u0026quot;hljs-attribute\u0026quot;\u0026gt;color\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-selector-attr\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;apple\u0026apos;\u0026lt;/span\u0026gt;]\u0026lt;/span\u0026gt; + \u0026quot;, the strawberry \u0026lt;span class=\u0026quot;hljs-attribute\u0026quot;\u0026gt;color\u0026lt;/span\u0026gt; is \u0026quot; + \u0026lt;span class=\u0026quot;hljs-attribute\u0026quot;\u0026gt;color\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-selector-attr\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;strawberry\u0026apos;\u0026lt;/span\u0026gt;]\u0026lt;/span\u0026gt; + \u0026quot; and the kiwi \u0026lt;span class=\u0026quot;hljs-attribute\u0026quot;\u0026gt;color\u0026lt;/span\u0026gt; is \u0026quot; + \u0026lt;span class=\u0026quot;hljs-attribute\u0026quot;\u0026gt;color\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-selector-attr\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;kiwi\u0026apos;\u0026lt;/span\u0026gt;]\u0026lt;/span\u0026gt; + \u0026quot;.\u0026quot;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;OUTPUT\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;The apple color is yellow, the strawberry color is red and the kiwi\n  color is green.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As per your code\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$php\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myService\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;getValue\u0026lt;/span\u0026gt;(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Makes an API and database call\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;span id=\u0026quot;value\u0026quot;\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;/span\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n$\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Now you can get value using DOM, use innerHTML of span id, in this case you don\u0026apos;t need to do any call to server, or Ajax or another thing.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Your page will print it using PHP, and you JavaScript will get value using DOM.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myService\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;getValue\u0026lt;/span\u0026gt;(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Makes an API and database call\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\n        \u0026amp;lt;script\u0026amp;gt;\n            myPlugin.start(\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{$val}\u0026lt;/span\u0026gt;);\n        \u0026amp;lt;/script\u0026amp;gt; \u0026quot;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;we also can do it in this way for some usecases:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n    \n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$inPhpVar\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;i am php var\u0026quot;\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ScriptInline\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;\u0026amp;lt;\u0026amp;lt;JS\n\u0026amp;lt;script\u0026amp;gt;\nalert(\u0026apos;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;{$inPhpVar}\u0026lt;/span\u0026gt; that used in js code\u0026apos;);\n\u0026amp;lt;/script\u0026amp;gt;\nJS\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$ScriptInline\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you need to get some important data in your script, that is available in php, you can automatically echo a complete script before your script where the data is needed, with some globals with that information.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In your scirpt imports on your html:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php-template\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;echo\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026amp;lt;script\u0026amp;gt;\n                const importantData = \u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$php_data\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;;\n        \u0026amp;lt;/script\u0026amp;gt;\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;?\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-xml\u0026quot;\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;src\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;../assets/js/your_script.js\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;script\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;So then you can access that information through the const named \u0026apos;importantData\u0026apos; from your_script.js\u0026lt;/p\u0026gt;\n    "],"id":121,"title":"How do I pass variables and data from PHP to JavaScript?","content":"\n                    \u0026lt;div\u0026gt;\n            \u0026lt;aside class=\u0026quot;s-notice s-notice__info post-notice js-post-notice mb16\u0026quot; role=\u0026quot;status\u0026quot;\u0026gt;\n        \u0026lt;div class=\u0026quot;d-flex fd-column fw-nowrap\u0026quot;\u0026gt;\n            \u0026lt;div class=\u0026quot;d-flex fw-nowrap\u0026quot;\u0026gt;\n                    \u0026lt;div class=\u0026quot;flex--item mr8\u0026quot;\u0026gt;\n                        \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;svg-icon iconLightbulb\u0026quot; width=\u0026quot;18\u0026quot; height=\u0026quot;18\u0026quot; viewBox=\u0026quot;0 0 18 18\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;M15 6.38A6.48 6.48 0 0 0 7.78.04h-.02A6.49 6.49 0 0 0 2.05 5.6a6.31 6.31 0 0 0 2.39 5.75c.49.39.76.93.76 1.5v.24c0 1.07.89 1.9 1.92 1.9h2.75c1.04 0 1.92-.83 1.92-1.9v-.2c0-.6.26-1.15.7-1.48A6.32 6.32 0 0 0 15 6.37ZM4.03 5.85A4.49 4.49 0 0 1 8 2.02a4.48 4.48 0 0 1 5 4.36 4.3 4.3 0 0 1-1.72 3.44c-.98.74-1.5 1.9-1.5 3.08v.1H7.2v-.14c0-1.23-.6-2.34-1.53-3.07a4.32 4.32 0 0 1-1.64-3.94ZM10 18a1 1 0 0 0 0-2H7a1 1 0 1 0 0 2h3Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                    \u0026lt;/div\u0026gt;\n                \u0026lt;div class=\u0026quot;flex--item wmn0 fl1 lh-lg\u0026quot;\u0026gt;\n                    \u0026lt;div class=\u0026quot;flex--item fl1 lh-lg\u0026quot;\u0026gt;\n                        \u0026lt;b\u0026gt;Want to improve this post?\u0026lt;/b\u0026gt; Provide detailed answers to this question, including citations and an explanation of why your answer is correct. Answers without enough detail may be edited or deleted.\n                        \n                    \u0026lt;/div\u0026gt;\n                \u0026lt;/div\u0026gt;\n            \u0026lt;/div\u0026gt;\n        \u0026lt;/div\u0026gt;\n\u0026lt;/aside\u0026gt;\n\n    \u0026lt;/div\u0026gt;\n\n\u0026lt;p\u0026gt;I have a variable in PHP, and I need its value in my JavaScript code. How can I get my variable from PHP to JavaScript?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I have code that looks like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-php s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;\u0026amp;lt;?php\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$val\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$myService\u0026lt;/span\u0026gt;-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;getValue\u0026lt;/span\u0026gt;(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Makes an API and database call\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;On the same page, I have JavaScript code that needs the value of the \u0026lt;code\u0026gt;$val\u0026lt;/code\u0026gt; variable to be passed as a parameter:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026amp;lt;script\u0026amp;gt;\n    myPlugin.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;start\u0026lt;/span\u0026gt;($val); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// I tried this, but it didn\u0026apos;t work\u0026lt;/span\u0026gt;\n    \u0026amp;lt;?php myPlugin.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;start\u0026lt;/span\u0026gt;($val); ?\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This didn\u0026apos;t work either\u0026lt;/span\u0026gt;\n    myPlugin.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;start\u0026lt;/span\u0026gt;(\u0026amp;lt;?=$val?\u0026amp;gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This works sometimes, but sometimes it fails\u0026lt;/span\u0026gt;\n\u0026amp;lt;/script\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","slug":"how-do-i-pass-variables-and-data-from-php-to-javascript-1657384684553","postType":"QUESTION","createdAt":"2022-07-09T16:38:04.000Z","updatedAt":"2022-07-09T16:38:04.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"Deep cloning objects","slug":"deep-cloning-objects-1657387930865"},{"title":"How to filter Pandas dataframe using 'in' and 'not in' like in SQL","slug":"how-to-filter-pandas-dataframe-using-'in'-and-'not-in'-like-in-sql-1657387371355"},{"title":"Undefined, unspecified and implementation-defined behavior","slug":"undefined-unspecified-and-implementation-defined-behavior-1657384516085"},{"title":"Creating multiline strings in JavaScript","slug":"creating-multiline-strings-in-javascript-1657388025414"},{"title":"Official locator strategies for the webdriver","slug":"official-locator-strategies-for-the-webdriver-1657384353174"},{"title":"What is the difference between public, protected, package-private and private in Java?","slug":"what-is-the-difference-between-public-protected-package-private-and-private-in-java-1657387376262"},{"title":"How can I vertically align elements in a div?","slug":"how-can-i-vertically-align-elements-in-a-div-1657385504431"},{"title":"How should I use servlets and Ajax?","slug":"how-should-i-use-servlets-and-ajax-1657385492684"},{"title":"Split array into chunks","slug":"split-array-into-chunks-1657387896420"},{"title":"How can I read inputs as numbers?","slug":"how-can-i-read-inputs-as-numbers-1657384503324"},{"title":"Change the maximum upload file size","slug":"change-the-maximum-upload-file-size-1657388495156"},{"title":"Download a file by jQuery.Ajax","slug":"download-a-file-by-jquery.ajax-1657388220611"},{"title":"How do I format a date in JavaScript?","slug":"how-do-i-format-a-date-in-javascript-1657384649498"},{"title":"What is the purpose of the var keyword and when should I use it (or omit it)?","slug":"what-is-the-purpose-of-the-var-keyword-and-when-should-i-use-it-(or-omit-it)-1657387525538"},{"title":"How do I use extern to share variables between source files?","slug":"how-do-i-use-extern-to-share-variables-between-source-files-1657387453605"},{"title":"Ways to circumvent the same-origin policy","slug":"ways-to-circumvent-the-same-origin-policy-1657384763316"},{"title":"What is move semantics?","slug":"what-is-move-semantics-1657387702625"},{"title":"Default constructor with empty brackets","slug":"default-constructor-with-empty-brackets-1657388246967"},{"title":"Selenium \"selenium.common.exceptions.NoSuchElementException\" when using Chrome","slug":"selenium-\"selenium.common.exceptions.nosuchelementexception\"-when-using-chrome-1657388136699"},{"title":"What is SQL injection? [duplicate]","slug":"what-is-sql-injection-duplicate-1657387944486"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-do-i-pass-variables-and-data-from-php-to-javascript-1657384684553"},"buildId":"00bsHgHZki2FteshOatnd","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>