{"pageProps":{"data":{"count":1,"rows":[{"id":547,"title":"Can I bind an array to an IN() condition in a PDO query?","slug":"can-i-bind-an-array-to-an-in()-condition-in-a-pdo-query-1657388382858","postType":"QUESTION","createdAt":"2022-07-09T17:39:42.000Z","updatedAt":"2022-07-09T17:39:42.000Z","tags":[{"id":2665,"name":"prepared-statement","slug":"prepared-statement","createdAt":"2022-07-09T17:39:42.000Z","updatedAt":"2022-07-09T17:39:42.000Z","Questions_Tags":{"questionId":547,"tagId":2665}}]}]},"slug":"prepared-statement","page":1,"answers":{"547":["\n&lt;p&gt;You&apos;ll have to construct the query-string.&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;     = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$inQuery&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_fill&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;), &lt;span class=&quot;hljs-string&quot;&gt;&apos;?&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;PDO&lt;/span&gt;(...);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;SELECT *\n     FROM table\n     WHERE id IN(&apos;&lt;/span&gt; . &lt;span class=&quot;hljs-variable&quot;&gt;$inQuery&lt;/span&gt; . &lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;\n);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// bindvalue is 1-indexed, so $k+1&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$k&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$id&lt;/span&gt;)\n    &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindValue&lt;/span&gt;((&lt;span class=&quot;hljs-variable&quot;&gt;$k&lt;/span&gt;+&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;hljs-variable&quot;&gt;$id&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;span class=&quot;hljs-meta&quot;&gt;?&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Both chris (comments) and somebodyisintrouble suggested that the foreach-loop ...&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;(...)\n&lt;span class=&quot;hljs-comment&quot;&gt;// bindvalue is 1-indexed, so $k+1&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$k&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$id&lt;/span&gt;)\n    &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindValue&lt;/span&gt;((&lt;span class=&quot;hljs-variable&quot;&gt;$k&lt;/span&gt;+&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;hljs-variable&quot;&gt;$id&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;... might be redundant, so the &lt;code&gt;foreach&lt;/code&gt; loop and the &lt;code&gt;$stmt-&amp;gt;execute&lt;/code&gt; could be replaced by just ...&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt; \n  (...)\n  &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;For something quick:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//$db = new PDO(...);&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//$ids = array(...);&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$qMarks&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;str_repeat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;?,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;) - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) . &lt;span class=&quot;hljs-string&quot;&gt;&apos;?&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable&quot;&gt;$sth&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT * FROM myTable WHERE id IN (&lt;span class=&quot;hljs-subst&quot;&gt;$qMarks&lt;/span&gt;)&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$sth&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Is it so important to use &lt;code&gt;IN&lt;/code&gt; statement? Try to use &lt;code&gt;FIND_IN_SET&lt;/code&gt; op.&lt;/p&gt;\n\n&lt;p&gt;For example, there is a query in PDO like that &lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;SELECT * FROM table WHERE &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;FIND_IN_SET&lt;/span&gt;(id, :&lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then you only need to bind an array of values, imploded with comma, like this one &lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$ids_string&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$array_of_smth&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// WITHOUT WHITESPACES BEFORE AND AFTER THE COMMA&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindParam&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;array&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$ids_string&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and it&apos;s done.&lt;/p&gt;\n\n&lt;p&gt;UPD: As some people pointed out in comments to this answer, there are some issues which should be stated explciitly. &lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;code&gt;FIND_IN_SET&lt;/code&gt; doesn&apos;t use index in a table, and it is still not implemented yet - see &lt;a href=&quot;http://bugs.mysql.com/bug.php?id=37564&quot;&gt;this record in the MYSQL bug tracker&lt;/a&gt;. Thanks to @BillKarwin for the notice.&lt;/li&gt;\n&lt;li&gt;You can&apos;t use a string with comma inside as a value of the array for search. It is impossible to parse such string in the right way after &lt;code&gt;implode&lt;/code&gt; since you use comma symbol as a separator. Thanks to @VaL for the note.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;In fine, if you are not heavily dependent on indexes and do not use strings with comma for search, my solution will be much easier, simpler, and faster than solutions listed above.&lt;/p&gt;\n    ","\n&lt;p&gt;Since I do a lot of dynamic queries, this is a super simple helper function I made. &lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;bindParamArray&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$prefix&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$values&lt;/span&gt;, &amp;amp;&lt;span class=&quot;hljs-variable&quot;&gt;$bindArray&lt;/span&gt;&lt;/span&gt;)\n&lt;/span&gt;{\n    &lt;span class=&quot;hljs-variable&quot;&gt;$str&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$values&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$index&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;){\n        &lt;span class=&quot;hljs-variable&quot;&gt;$str&lt;/span&gt; .= &lt;span class=&quot;hljs-string&quot;&gt;&quot;:&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$prefix&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$index&lt;/span&gt;.&lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;;\n        &lt;span class=&quot;hljs-variable&quot;&gt;$bindArray&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$prefix&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$index&lt;/span&gt;] = &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;rtrim&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$str&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;);     \n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Use it like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$bindString&lt;/span&gt; = helper::&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindParamArray&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;id&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$_GET&lt;/span&gt;[&lt;span class=&quot;hljs-string&quot;&gt;&apos;ids&apos;&lt;/span&gt;], &lt;span class=&quot;hljs-variable&quot;&gt;$bindArray&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$userConditions&lt;/span&gt; .= &lt;span class=&quot;hljs-string&quot;&gt;&quot; AND users.id IN(&lt;span class=&quot;hljs-subst&quot;&gt;$bindString&lt;/span&gt;)&quot;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Returns a string &lt;code&gt;:id1,:id2,:id3&lt;/code&gt; and also updates your &lt;code&gt;$bindArray&lt;/code&gt; of bindings that you will need when it&apos;s time to run your query. Easy!&lt;/p&gt;\n    ","\n&lt;p&gt;very clean way for postgres is using the postgres-array (&quot;{}&quot;):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;45&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$param&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;{&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;, &apos;&lt;/span&gt;,&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;).&lt;span class=&quot;hljs-string&quot;&gt;&quot;}&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable&quot;&gt;$cmd&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT * FROM table WHERE id = ANY (?)&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$result&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$cmd&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$param&lt;/span&gt;));\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Solution from EvilRygy didn&apos;t worked for me. In Postgres you can do another workaround:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;PDO&lt;/span&gt;(...);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;SELECT *\n     FROM table\n     WHERE id = ANY (string_to_array(:an_array, &apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;))&apos;&lt;/span&gt;\n);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindParam&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;:an_array&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Here is my solution:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$total_items&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$array_of_items&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$question_marks&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_fill&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$total_items&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;?&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$sql&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;SELECT * FROM foo WHERE bar IN (&apos;&lt;/span&gt; . &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$question_marks&lt;/span&gt; ). &lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$dbh&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$sql&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;(&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_values&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$array_of_items&lt;/span&gt;));\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note the use of array_values.  This can fix key ordering issues.&lt;/p&gt;\n\n&lt;p&gt;I was merging arrays of ids and then removing duplicate items.  I had something like:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;47&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;17&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And that was failing.&lt;/p&gt;\n    ","\n&lt;p&gt;When you have other parameter, you may do like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;PDO&lt;/span&gt;(...);\n&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;SELECT *\n            FROM table\n           WHERE X = :x\n             AND id IN(&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable&quot;&gt;$comma&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;); &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;++){\n  &lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt; .= &lt;span class=&quot;hljs-variable&quot;&gt;$comma&lt;/span&gt;.&lt;span class=&quot;hljs-string&quot;&gt;&apos;:p&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;;       &lt;span class=&quot;hljs-comment&quot;&gt;// :p0, :p1, ...&lt;/span&gt;\n  &lt;span class=&quot;hljs-variable&quot;&gt;$comma&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt; .= &lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindValue&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;:x&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;123&lt;/span&gt;);  &lt;span class=&quot;hljs-comment&quot;&gt;// some value&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;); &lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;++){\n  &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindValue&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;:p&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;]);\n}\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I extended PDO to do something similar to what stefs suggests, and it was easier for me in the long run:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Array_Capable_PDO&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;PDO&lt;/span&gt; &lt;/span&gt;{\n    &lt;span class=&quot;hljs-comment&quot;&gt;/**\n     * Both prepare a statement and bind array values to it\n     * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; string $statement mysql query with colon-prefixed tokens\n     * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; array $arrays associatve array with string tokens as keys and integer-indexed data arrays as values \n     * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; array $driver_options see php documention\n     * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt; PDOStatement with given array values already bound \n     */&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;prepare_with_arrays&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$statement&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$arrays&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$driver_options&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;) &lt;/span&gt;{\n\n        &lt;span class=&quot;hljs-variable&quot;&gt;$replace_strings&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;();\n        &lt;span class=&quot;hljs-variable&quot;&gt;$x&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$arrays&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$token&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-comment&quot;&gt;// just for testing...&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//// tokens should be legit&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//assert(&apos;is_string($token)&apos;);&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//assert(&apos;$token !== &quot;&quot;&apos;);&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//// a given token shouldn&apos;t appear more than once in the query&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//assert(&apos;substr_count($statement, $token) === 1&apos;);&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//// there should be an array of values for each token&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//assert(&apos;is_array($data)&apos;);&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//// empty data arrays aren&apos;t okay, they&apos;re a SQL syntax error&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//assert(&apos;count($data) &amp;gt; 0&apos;);&lt;/span&gt;\n\n            &lt;span class=&quot;hljs-comment&quot;&gt;// replace array tokens with a list of value tokens&lt;/span&gt;\n            &lt;span class=&quot;hljs-variable&quot;&gt;$replace_string_pieces&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;();\n            &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$y&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;) {\n                &lt;span class=&quot;hljs-comment&quot;&gt;//// the data arrays have to be integer-indexed&lt;/span&gt;\n                &lt;span class=&quot;hljs-comment&quot;&gt;//assert(&apos;is_int($y)&apos;);&lt;/span&gt;\n                &lt;span class=&quot;hljs-variable&quot;&gt;$replace_string_pieces&lt;/span&gt;[] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;:&lt;span class=&quot;hljs-subst&quot;&gt;{$x}&lt;/span&gt;_&lt;span class=&quot;hljs-subst&quot;&gt;{$y}&lt;/span&gt;&quot;&lt;/span&gt;;\n            }\n            &lt;span class=&quot;hljs-variable&quot;&gt;$replace_strings&lt;/span&gt;[] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;(&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;, &apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$replace_string_pieces&lt;/span&gt;).&lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;;\n            &lt;span class=&quot;hljs-variable&quot;&gt;$x&lt;/span&gt;++;\n        }\n        &lt;span class=&quot;hljs-variable&quot;&gt;$statement&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;str_replace&lt;/span&gt;(&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_keys&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$arrays&lt;/span&gt;), &lt;span class=&quot;hljs-variable&quot;&gt;$replace_strings&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$statement&lt;/span&gt;);\n        &lt;span class=&quot;hljs-variable&quot;&gt;$prepared_statement&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$statement&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$driver_options&lt;/span&gt;);\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// bind values to the value tokens&lt;/span&gt;\n        &lt;span class=&quot;hljs-variable&quot;&gt;$x&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$arrays&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$token&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$data&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$y&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;) {\n                &lt;span class=&quot;hljs-variable&quot;&gt;$prepared_statement&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindValue&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;:&lt;span class=&quot;hljs-subst&quot;&gt;{$x}&lt;/span&gt;_&lt;span class=&quot;hljs-subst&quot;&gt;{$y}&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;);\n            }\n            &lt;span class=&quot;hljs-variable&quot;&gt;$x&lt;/span&gt;++;\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$prepared_statement&lt;/span&gt;;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You can use it like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$db_link&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array_Capable&lt;/span&gt;_PDO(&lt;span class=&quot;hljs-variable&quot;&gt;$dsn&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$password&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;\n    SELECT     *\n    FROM       test\n    WHERE      field1 IN :array1\n     OR        field2 IN :array2\n     OR        field3 = :value\n&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$pdo_query&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db_link&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare_with_arrays&lt;/span&gt;(\n    &lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;,\n    &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;:array1&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;),\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;:array2&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;)\n    )\n);\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$pdo_query&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindValue&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;:value&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;10&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$pdo_query&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;For me the sexier solution is to construct a dynamic associative array &amp;amp; use it&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// A dirty array sent by user&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$dirtyArray&lt;/span&gt; = [&lt;span class=&quot;hljs-string&quot;&gt;&apos;Cecile&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Gilles&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Andre&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Claude&apos;&lt;/span&gt;];\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// we construct an associative array like this&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// [ &apos;:name_0&apos; =&amp;gt; &apos;Cecile&apos;, ... , &apos;:name_3&apos; =&amp;gt; &apos;Claude&apos; ]&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$params&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_combine&lt;/span&gt;(\n    &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_map&lt;/span&gt;(\n        // construct param name according to &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt; index\n        function (&lt;span class=&quot;hljs-variable&quot;&gt;$v&lt;/span&gt;) {&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;:name_&lt;span class=&quot;hljs-subst&quot;&gt;{$v}&lt;/span&gt;&quot;&lt;/span&gt;;},\n        // get values of users\n        &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_keys&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$dirtyArray&lt;/span&gt;)\n    ),\n    &lt;span class=&quot;hljs-variable&quot;&gt;$dirtyArray&lt;/span&gt;\n);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// construct the query like `.. WHERE name IN ( :name_1, .. , :name_3 )`&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT * FROM user WHERE name IN( &quot;&lt;/span&gt; . &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_keys&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$params&lt;/span&gt;)) . &lt;span class=&quot;hljs-string&quot;&gt;&quot; )&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;// here we go&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;  = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$params&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Looking at  &lt;a href=&quot;http://uk.php.net/manual/en/pdo.constants.php&quot; rel=&quot;noreferrer&quot;&gt;PDO :Predefined Constants&lt;/a&gt; there is no PDO::PARAM_ARRAY which you would need as is listed on &lt;a href=&quot;http://uk.php.net/manual/en/pdostatement.bindparam.php&quot; rel=&quot;noreferrer&quot;&gt;PDOStatement-&amp;gt;bindParam&lt;/a&gt; &lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;bool PDOStatement::bindParam ( mixed $parameter , mixed &amp;amp;$variable [, &lt;strong&gt;int $data_type&lt;/strong&gt; [, int $length [, mixed $driver_options ]]] )&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;So I don&apos;t think it is achievable. &lt;/p&gt;\n    ","\n&lt;p&gt;I also realise this thread is old but I had a unique problem where, while converting the soon-to-be deprecated mysql driver to the PDO driver I had to make a function which could build, dynamically, both normal params and INs from the same param array. So I quickly built this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * mysql::pdo_query(&apos;SELECT * FROM TBL_WHOOP WHERE type_of_whoop IN :param AND siz_of_whoop = :size&apos;, array(&apos;:param&apos; =&amp;gt; array(1,2,3), &apos;:size&apos; =&amp;gt; 3))\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; $query\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; $params\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;pdo_query&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$params&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;)&lt;/span&gt;{\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(!&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;)\n        &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;trigger_error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Could not query nothing&apos;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Lets get our IN fields first&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable&quot;&gt;$in_fields&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$params&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$field&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;){\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;is_array&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;)){\n            &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-variable&quot;&gt;$size&lt;/span&gt;=&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;sizeof&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;);&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-variable&quot;&gt;$size&lt;/span&gt;;&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;++)\n                &lt;span class=&quot;hljs-variable&quot;&gt;$in_array&lt;/span&gt;[] = &lt;span class=&quot;hljs-variable&quot;&gt;$field&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;;\n\n            &lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;str_replace&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$field&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;(&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$in_array&lt;/span&gt;).&lt;span class=&quot;hljs-string&quot;&gt;&quot;)&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Lets replace the position in the query string with the full version&lt;/span&gt;\n            &lt;span class=&quot;hljs-variable&quot;&gt;$in_fields&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$field&lt;/span&gt;] = &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Lets add this field to an array for use later&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;unset&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$params&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$field&lt;/span&gt;]); &lt;span class=&quot;hljs-comment&quot;&gt;// Lets unset so we don&apos;t bind the param later down the line&lt;/span&gt;\n        }\n    }\n\n    &lt;span class=&quot;hljs-variable&quot;&gt;$query_obj&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt;-&amp;gt;pdo_link-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable&quot;&gt;$query_obj&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;setFetchMode&lt;/span&gt;(PDO::&lt;span class=&quot;hljs-variable constant_&quot;&gt;FETCH_ASSOC&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Now lets bind normal params.&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$params&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$field&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;) &lt;span class=&quot;hljs-variable&quot;&gt;$query_obj&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindValue&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$field&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Now lets bind the IN params&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$in_fields&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$field&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;){\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-variable&quot;&gt;$size&lt;/span&gt;=&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;sizeof&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;);&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-variable&quot;&gt;$size&lt;/span&gt;;&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;++)\n            &lt;span class=&quot;hljs-variable&quot;&gt;$query_obj&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindValue&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$field&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;]); &lt;span class=&quot;hljs-comment&quot;&gt;// Both the named param index and this index are based off the array index which has not changed...hopefully&lt;/span&gt;\n    }\n\n    &lt;span class=&quot;hljs-variable&quot;&gt;$query_obj&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$query_obj&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;rowCount&lt;/span&gt;() &amp;lt;= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$query_obj&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It is still untested however the logic seems to be there.&lt;/p&gt;\n\n&lt;p&gt;Hope it helps someone in the same position,&lt;/p&gt;\n\n&lt;p&gt;Edit: After some testing I found out:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;PDO does not like &apos;.&apos; in their names (which is kinda stupid if you ask me)&lt;/li&gt;\n&lt;li&gt;bindParam is the wrong function, bindValue is the right function.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Code edited to working version.&lt;/p&gt;\n    ","\n&lt;p&gt;A little editing about the code of Schnalle&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;     = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$inQuery&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_fill&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;)-&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;?&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;   = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;PDO&lt;/span&gt;(...);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;SELECT *\n     FROM table\n     WHERE id IN(&apos;&lt;/span&gt; . &lt;span class=&quot;hljs-variable&quot;&gt;$inQuery&lt;/span&gt; . &lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;\n);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$k&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$id&lt;/span&gt;)\n    &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindValue&lt;/span&gt;((&lt;span class=&quot;hljs-variable&quot;&gt;$k&lt;/span&gt;+&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;hljs-variable&quot;&gt;$id&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;span class=&quot;hljs-meta&quot;&gt;?&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//implode(&apos;,&apos;, array_fill(0, count($ids)-1), &apos;?&apos;)); &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//&apos;?&apos; this should be inside the array_fill&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//$stmt-&amp;gt;bindValue(($k+1), $in); &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// instead of $in, it should be $id&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;What database are you using? In PostgreSQL I like using ANY(array). So to reuse your example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;=&lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;PDO&lt;/span&gt;(...);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;SELECT *\n     FROM table\n     WHERE id = ANY (:an_array)&apos;&lt;/span&gt;\n);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindParam&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;an_array&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;span class=&quot;hljs-meta&quot;&gt;?&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Unfortunately this is pretty non-portable. &lt;/p&gt;\n\n&lt;p&gt;On other databases you&apos;ll need to make up your own magic as others have been mentioning. You&apos;ll want to put that logic into a class/function to make it reusable throughout your program of course. Take a look at the comments on &lt;code&gt;mysql_query&lt;/code&gt; page on PHP.NET for some more thoughts on the subject and examples of this scenario.&lt;/p&gt;\n    ","\n&lt;p&gt;If the column can only contain integers, you could probably do this without placeholders and just put the ids in the query directly. You just have to cast all the values of the array to integers. Like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$listOfIds&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_map&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;intval&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT *\n     FROM table\n     WHERE id IN(&lt;span class=&quot;hljs-subst&quot;&gt;$listOfIds&lt;/span&gt;)&quot;&lt;/span&gt;\n);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This shouldn&apos;t be vulnerable to any SQL injection.&lt;/p&gt;\n    ","\n&lt;p&gt;As I know there is no any possibility to bind an array into PDO statement.&lt;/p&gt;\n\n&lt;p&gt;But exists 2 common solutions:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;Use Positional Placeholders (?,?,?,?) or Named Placeholders (:id1, :id2, :id3)&lt;/p&gt;\n\n&lt;p&gt;$whereIn = implode(&apos;,&apos;, array_fill(0, count($ids), &apos;?&apos;));&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Quote array earlier&lt;/p&gt;\n\n&lt;p&gt;$whereIn = array_map(array($db, &apos;quote&apos;), $ids);&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Both options are good and safe. \nI prefer second one because it&apos;s shorter and I can var_dump parameters if I need it.\nUsing placeholders you must bind values and in the end your SQL code will be the same.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$sql&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT * FROM table WHERE id IN (&lt;span class=&quot;hljs-subst&quot;&gt;$whereIn&lt;/span&gt;)&quot;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And the last and important for me is avoiding error &quot;number of bound variables does not match number of tokens&quot;&lt;/p&gt;\n\n&lt;p&gt;Doctrine it&apos;s great example of using positional placeholders, only because it has internal control over incoming parameters.&lt;/p&gt;\n    ","\n&lt;p&gt;After going through the same problem, i went to a simpler solution (although still not as elegant as an &lt;code&gt;PDO::PARAM_ARRAY&lt;/code&gt; would be) : &lt;/p&gt;\n\n&lt;p&gt;given the array &lt;code&gt;$ids = array(2, 4, 32)&lt;/code&gt;: &lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$newparams&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;();\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$n&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;){ &lt;span class=&quot;hljs-variable&quot;&gt;$newparams&lt;/span&gt;[] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;:id_&lt;span class=&quot;hljs-subst&quot;&gt;$n&lt;/span&gt;&quot;&lt;/span&gt;; }\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n    &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$conn&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;DELETE FROM &lt;span class=&quot;hljs-subst&quot;&gt;$table&lt;/span&gt; WHERE (&lt;span class=&quot;hljs-subst&quot;&gt;$table&lt;/span&gt;.id IN (&quot;&lt;/span&gt; . &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;, &quot;&lt;/span&gt;,&lt;span class=&quot;hljs-variable&quot;&gt;$newparams&lt;/span&gt;). &lt;span class=&quot;hljs-string&quot;&gt;&quot;))&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$n&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;){\n        &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindParam&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;:id_&lt;span class=&quot;hljs-subst&quot;&gt;$n&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;intval&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;), PDO::&lt;span class=&quot;hljs-variable constant_&quot;&gt;PARAM_INT&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;... and so on&lt;/p&gt;\n\n&lt;p&gt;So if you are using a mixed values array, you will need more code to test your values before assigning the type param:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// inside second foreach..&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$valuevar&lt;/span&gt; = (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;is_float&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;) ? &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;floatval&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;) : &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;is_int&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;) ? &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;intval&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;) :  &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;is_string&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;) ? &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;strval&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;) : &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt; );\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindParam&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;:id_&lt;span class=&quot;hljs-subst&quot;&gt;$n&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$valuevar&lt;/span&gt;, (&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;is_int&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;) ? PDO::&lt;span class=&quot;hljs-variable constant_&quot;&gt;PARAM_INT&lt;/span&gt; :  &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;is_string&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;) ? PDO::&lt;span class=&quot;hljs-variable constant_&quot;&gt;PARAM_STR&lt;/span&gt; : &lt;span class=&quot;hljs-literal&quot;&gt;NULL&lt;/span&gt; ));\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;But i have not tested this one.&lt;/p&gt;\n    ","\n&lt;p&gt;It&apos;s not possible to use an array like that in PDO.&lt;/p&gt;\n\n&lt;p&gt;You need to build a string with a parameter (or use ?) for each value, for instance:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;:an_array_0, :an_array_1, :an_array_2, :an_array_3, :an_array_4, :an_array_5&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;Here&apos;s an example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$sqlAnArray&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;join&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;, &apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_map&lt;/span&gt;(\n        function(&lt;span class=&quot;hljs-variable&quot;&gt;$index&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;:an_array_&lt;span class=&quot;hljs-subst&quot;&gt;$index&lt;/span&gt;&quot;&lt;/span&gt;;\n        },\n        &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_keys&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;)\n    )\n);\n&lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;PDO&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;mysql:dbname=mydb;host=localhost&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;user&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;passwd&apos;&lt;/span&gt;\n);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;SELECT *\n     FROM table\n     WHERE id IN(&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$sqlAnArray&lt;/span&gt;.&lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;\n);\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$index&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$id&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindValue&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;an_array_&lt;span class=&quot;hljs-subst&quot;&gt;$index&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$id&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If you want to keep using &lt;code&gt;bindParam&lt;/code&gt;, you may do this instead:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$index&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$id&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindParam&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;an_array_&lt;span class=&quot;hljs-subst&quot;&gt;$index&lt;/span&gt;&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$id&lt;/span&gt;]);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If you want to use &lt;code&gt;?&lt;/code&gt; placeholders, you may do it like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$sqlAnArray&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;?&apos;&lt;/span&gt; . &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;str_repeat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;, ?&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;)-&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;PDO&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;mysql:dbname=dbname;host=localhost&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;user&apos;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;passwd&apos;&lt;/span&gt;\n);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&apos;SELECT *\n     FROM phone_number_lookup\n     WHERE country_code IN(&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$sqlAnArray&lt;/span&gt;.&lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;\n);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If you don&apos;t know if &lt;code&gt;$ids&lt;/code&gt; is empty, you should test it and handle that case accordingly (return an empty array, or return a Null Object, or throw an exception, ...).&lt;/p&gt;\n    ","\n&lt;p&gt;here is my solution. I have also extended the PDO class:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Db&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;PDO&lt;/span&gt;\n&lt;/span&gt;{\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;/**\n     * SELECT ... WHERE fieldName IN (:paramName) workaround\n     *\n     * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; array  $array\n     * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; string $prefix\n     *\n     * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt; string\n     */&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;CreateArrayBindParamNames&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$prefix&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;id_&apos;&lt;/span&gt;&lt;/span&gt;)\n    &lt;/span&gt;{\n        &lt;span class=&quot;hljs-variable&quot;&gt;$newparams&lt;/span&gt; = [];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$n&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;)\n        {\n            &lt;span class=&quot;hljs-variable&quot;&gt;$newparams&lt;/span&gt;[] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;:&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$prefix&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$n&lt;/span&gt;;\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;implode&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;, &quot;&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$newparams&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;/**\n     * Bind every array element to the proper named parameter\n     *\n     * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; PDOStatement $stmt\n     * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; array        $array\n     * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; string       $prefix\n     */&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;BindArrayParam&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;PDOStatement &amp;amp;&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$prefix&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;id_&apos;&lt;/span&gt;&lt;/span&gt;)\n    &lt;/span&gt;{\n        &lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$n&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;)\n        {\n            &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;intval&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;);\n            &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; -&amp;gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindParam&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;:&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$prefix&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$n&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$val&lt;/span&gt;, PDO::&lt;span class=&quot;hljs-variable constant_&quot;&gt;PARAM_INT&lt;/span&gt;);\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here is a sample usage for the above code:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$idList&lt;/span&gt; = [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;];\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt; -&amp;gt; db -&amp;gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\n  SELECT\n    `Name`\n  FROM\n    `User`\n  WHERE\n    (`ID` IN (&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-variable&quot;&gt;$this&lt;/span&gt; -&amp;gt; db -&amp;gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;CreateArrayBindParamNames&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$idList&lt;/span&gt;).&lt;span class=&quot;hljs-string&quot;&gt;&quot;))&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;$this&lt;/span&gt; -&amp;gt; db -&amp;gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;BindArrayParam&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$idList&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; -&amp;gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$row&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$row&lt;/span&gt;[&lt;span class=&quot;hljs-string&quot;&gt;&apos;Name&apos;&lt;/span&gt;];\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Let me know what you think&lt;/p&gt;\n    ","\n&lt;p&gt;With MySQL and PDO we can use a JSON array and &lt;code&gt;JSON_CONTAINS()&lt;/code&gt; (&lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-contains&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-contains&lt;/a&gt;) to search in.&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; = [&lt;span class=&quot;hljs-number&quot;&gt;123&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;234&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;345&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;456&lt;/span&gt;]; &lt;span class=&quot;hljs-comment&quot;&gt;// Array of users I search&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;json_encode&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// JSON conversion&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$sql&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;&amp;lt;&amp;lt;SQL\n    SELECT ALL user_id, user_login\n    FROM users\n    -- Cast is mandatory beaucause JSON_CONTAINS() waits JSON doc candidate\n    WHERE JSON_CONTAINS(:ids, CAST(user_id AS JSON))\n    SQL&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$search&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$pdo&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$sql&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$search&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;([&lt;span class=&quot;hljs-string&quot;&gt;&apos;:ids&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$ids&lt;/span&gt;]);\n&lt;span class=&quot;hljs-variable&quot;&gt;$users&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$search&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;fetchAll&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Whe can also use &lt;code&gt;JSON_TABLE()&lt;/code&gt; (&lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/json-table-functions.html#function_json-table&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://dev.mysql.com/doc/refman/8.0/en/json-table-functions.html#function_json-table&lt;/a&gt;) for more complex cases and JSON data exploration :&lt;/p&gt;\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$users&lt;/span&gt; = [\n    [&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;123&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;bday&apos;&lt;/span&gt; =&amp;gt; ..., &lt;span class=&quot;hljs-string&quot;&gt;&apos;address&apos;&lt;/span&gt; =&amp;gt; ...],\n    [&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;234&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;bday&apos;&lt;/span&gt; =&amp;gt; ..., &lt;span class=&quot;hljs-string&quot;&gt;&apos;address&apos;&lt;/span&gt; =&amp;gt; ...],\n    [&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;345&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;bday&apos;&lt;/span&gt; =&amp;gt; ..., &lt;span class=&quot;hljs-string&quot;&gt;&apos;address&apos;&lt;/span&gt; =&amp;gt; ...],\n]; &lt;span class=&quot;hljs-comment&quot;&gt;// I&apos;d like to know their login&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$users&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;json_encode&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$users&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$sql&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;&amp;lt;&amp;lt;SQL\n    SELECT ALL user_id, user_login\n    FROM users\n    WHERE user_id IN (\n        SELECT ALL user_id\n        FROM JSON_TABLE(:users, &apos;$[*]&apos; COLUMNS (\n            -- Data exploration...\n            -- (if needed I can explore really deeply with NESTED kword)\n            user_id INT PATH &apos;$.id&apos;,\n            -- I could skip these :\n            user_bday DATE PATH &apos;$.bday&apos;,\n            user_address TINYTEXT PATH &apos;$.address&apos;\n        )) AS _\n    )\n    SQL&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$search&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$pdo&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$sql&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$search&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;([&lt;span class=&quot;hljs-string&quot;&gt;&apos;:users&apos;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-variable&quot;&gt;$users&lt;/span&gt;]);\n...\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I took it a bit further to get the answer closer to the original question of using placeholders to bind the params.  &lt;/p&gt;\n\n&lt;p&gt;This answer will have to make two loops through the array to be used in the query.  But it does solve the issue of having other column placeholders for more selective queries. &lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//builds placeholders to insert in IN()&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$key&lt;/span&gt;=&amp;gt;&lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable&quot;&gt;$in_query&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$in_query&lt;/span&gt; . &lt;span class=&quot;hljs-string&quot;&gt;&apos; :val_&apos;&lt;/span&gt; . &lt;span class=&quot;hljs-variable&quot;&gt;$key&lt;/span&gt; . &lt;span class=&quot;hljs-string&quot;&gt;&apos;, &apos;&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//gets rid of trailing comma and space&lt;/span&gt;\n&lt;span class=&quot;hljs-variable&quot;&gt;$in_query&lt;/span&gt; = &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$in_query&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, -&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt; = &lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT *\n     WHERE id IN(&lt;span class=&quot;hljs-subst&quot;&gt;$in_query&lt;/span&gt;)&quot;&lt;/span&gt;;\n\n//pind params &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; your placeholders.\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$key&lt;/span&gt;=&amp;gt;&lt;span class=&quot;hljs-variable&quot;&gt;$value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindParam&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;:val_&quot;&lt;/span&gt; . &lt;span class=&quot;hljs-variable&quot;&gt;$key&lt;/span&gt;, &lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$key&lt;/span&gt;])\n}\n\n&lt;span class=&quot;hljs-variable&quot;&gt;$stmt&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;you first set number of &quot;?&quot; in query  and then by a &quot;for&quot; send parameters\nlike this :&lt;/p&gt;\n\n&lt;pre class=&quot;lang-php s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;dbConnect.php&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;=&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;dbConnect&lt;/span&gt;();\n&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt;=[];\n&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_push&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;value1&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;array_push&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;value2&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;SELECT * FROM sites WHERE kind IN (&quot;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$field&lt;/span&gt;){\n    &lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;.=&lt;span class=&quot;hljs-string&quot;&gt;&quot;?,&quot;&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;=&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;strlen&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;)-&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;.=&lt;span class=&quot;hljs-string&quot;&gt;&quot;)&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable&quot;&gt;$tbl&lt;/span&gt;=&lt;span class=&quot;hljs-variable&quot;&gt;$db&lt;/span&gt;-&amp;gt;connection-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;prepare&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$query&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;=&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;&amp;lt;=&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt;);&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;++)\n    &lt;span class=&quot;hljs-variable&quot;&gt;$tbl&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;bindParam&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;,&lt;span class=&quot;hljs-variable&quot;&gt;$array&lt;/span&gt;[&lt;span class=&quot;hljs-variable&quot;&gt;$i&lt;/span&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;],PDO::&lt;span class=&quot;hljs-variable constant_&quot;&gt;PARAM_STR&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable&quot;&gt;$tbl&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;execute&lt;/span&gt;();\n&lt;span class=&quot;hljs-variable&quot;&gt;$row&lt;/span&gt;=&lt;span class=&quot;hljs-variable&quot;&gt;$tbl&lt;/span&gt;-&amp;gt;&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;fetchAll&lt;/span&gt;(PDO::&lt;span class=&quot;hljs-variable constant_&quot;&gt;FETCH_OBJ&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;var_dump&lt;/span&gt;(&lt;span class=&quot;hljs-variable&quot;&gt;$row&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    "]},"randomTags":[{"name":"mysql-error-1093","slug":"mysql-error-1093"},{"name":"content-script","slug":"content-script"},{"name":"bounded-wildcard","slug":"bounded-wildcard"},{"name":"utc","slug":"utc"},{"name":"facelets","slug":"facelets"},{"name":"most-vexing-parse","slug":"most-vexing-parse"},{"name":"autowired","slug":"autowired"},{"name":"database-normalization","slug":"database-normalization"},{"name":"aggregation","slug":"aggregation"},{"name":"twitter-bootstrap","slug":"twitter-bootstrap"},{"name":"incompatibility","slug":"incompatibility"},{"name":"linux","slug":"linux"},{"name":"pageload","slug":"pageload"},{"name":"methods","slug":"methods"},{"name":"multiline","slug":"multiline"},{"name":"system.in","slug":"system.in"},{"name":"dependent-name","slug":"dependent-name"},{"name":"url","slug":"url"},{"name":"object-slicing","slug":"object-slicing"},{"name":"aggregate-functions","slug":"aggregate-functions"}]},"__N_SSG":true}