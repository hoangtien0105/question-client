{"pageProps":{"data":{"count":1,"rows":[{"id":505,"title":"How to close/hide the Android soft keyboard programmatically?","slug":"how-to-closehide-the-android-soft-keyboard-programmatically-1657388217420","postType":"QUESTION","createdAt":"2022-07-09T17:36:57.000Z","updatedAt":"2022-07-09T17:36:57.000Z","tags":[{"id":2515,"name":"soft-keyboard","slug":"soft-keyboard","createdAt":"2022-07-09T17:36:57.000Z","updatedAt":"2022-07-09T17:36:57.000Z","Questions_Tags":{"questionId":505,"tagId":2515}}]}]},"slug":"soft-keyboard","page":"1","answers":{"505":["\n&lt;p&gt;You can force Android to hide the virtual keyboard using the &lt;a href=&quot;http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html&quot; rel=&quot;noreferrer&quot;&gt;InputMethodManager&lt;/a&gt;, calling &lt;a href=&quot;http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html#hideSoftInputFromWindow%28android.os.IBinder,%20int%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;hideSoftInputFromWindow&lt;/code&gt;&lt;/a&gt;, passing in the token of the window containing your focused view.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Check if no view has focus:&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getCurrentFocus();\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (view != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {  \n    &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\n    imm.hideSoftInputFromWindow(view.getWindowToken(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This will force the keyboard to be hidden in all situations. In some cases, you will want to pass in &lt;code&gt;InputMethodManager.HIDE_IMPLICIT_ONLY&lt;/code&gt; as the second parameter to ensure you only hide the keyboard when the user didn&apos;t explicitly force it to appear (by holding down the menu).&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; If you want to do this in Kotlin, use:\n&lt;code&gt;context?.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Kotlin Syntax&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-kotlin s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Only runs if there is a view that is currently focused&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.currentFocus?.let { view -&amp;gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;val&lt;/span&gt; imm = getSystemService(Context.INPUT_METHOD_SERVICE) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt;? InputMethodManager\n    imm?.hideSoftInputFromWindow(view.windowToken, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;To help clarify this madness, I&apos;d like to begin by apologizing on behalf of all Android users for Google&apos;s downright ridiculous treatment of the soft keyboard. The reason there are so many answers, each different, for the same simple question is that this API, like many others in Android, is horribly designed. I can think of no polite way to state it.&lt;/p&gt;\n&lt;p&gt;I want to hide the keyboard.  I expect to provide Android with the following statement: &lt;code&gt;Keyboard.hide()&lt;/code&gt;. The end. Thank you very much.  But Android has a problem.  You must use the &lt;code&gt;InputMethodManager&lt;/code&gt; to hide the keyboard. OK, fine, this is Android&apos;s API to the keyboard. BUT! You are required to have a &lt;code&gt;Context&lt;/code&gt; in order to get access to the IMM. Now we have a problem.  I may want to hide the keyboard from a static or utility class that has no use or need for any &lt;code&gt;Context&lt;/code&gt;. or And FAR worse, the IMM requires that you specify what &lt;code&gt;View&lt;/code&gt; (or even worse, what &lt;code&gt;Window&lt;/code&gt;) you want to hide the keyboard FROM.&lt;/p&gt;\n&lt;p&gt;This is what makes hiding the keyboard so challenging. Dear Google: When I&apos;m looking up the recipe for a cake, there is no &lt;code&gt;RecipeProvider&lt;/code&gt; on Earth that would refuse to provide me with the recipe unless I first answer WHO the cake will be eaten by AND where it will be eaten!!&lt;/p&gt;\n&lt;p&gt;This sad story ends with the ugly truth: to hide the Android keyboard, you will be required to provide 2 forms of identification: a &lt;code&gt;Context&lt;/code&gt; and either a &lt;code&gt;View&lt;/code&gt; or a &lt;code&gt;Window&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;I have created a static utility method that can do the job VERY solidly, provided you call it from an &lt;code&gt;Activity&lt;/code&gt;.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Activity activity)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) activity.getSystemService(Activity.INPUT_METHOD_SERVICE);\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Find the currently focused view, so we can grab the correct window token from it.&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; activity.getCurrentFocus();\n    &lt;span class=&quot;hljs-comment&quot;&gt;//If no view currently has focus, create a new one, just so we can grab a window token from it&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (view == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        view = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;View&lt;/span&gt;(activity);\n    }\n    imm.hideSoftInputFromWindow(view.getWindowToken(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Be aware that this utility method ONLY works when called from an &lt;code&gt;Activity&lt;/code&gt;! The above method calls &lt;code&gt;getCurrentFocus&lt;/code&gt; of the target &lt;code&gt;Activity&lt;/code&gt; to fetch the proper window token.&lt;/p&gt;\n&lt;p&gt;But suppose you want to hide the keyboard from an &lt;code&gt;EditText&lt;/code&gt; hosted in a &lt;code&gt;DialogFragment&lt;/code&gt;? You can&apos;t use the method above for that:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;hideKeyboard&lt;/span&gt;(getActivity()); &lt;span class=&quot;hljs-comment&quot;&gt;//won&apos;t work&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This won&apos;t work because you&apos;ll be passing a reference to the &lt;code&gt;Fragment&lt;/code&gt;&apos;s host &lt;code&gt;Activity&lt;/code&gt;, which will have no focused control while the &lt;code&gt;Fragment&lt;/code&gt; is shown! Wow! So, for hiding the keyboard from fragments, I resort to the lower-level, more common, and uglier:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hideKeyboardFrom&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Context context, View view)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) context.getSystemService(Activity.INPUT_METHOD_SERVICE);\n    imm.hideSoftInputFromWindow(view.getWindowToken(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Below is some additional information gleaned from more time wasted chasing this solution:&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;About windowSoftInputMode&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;There&apos;s yet another point of contention to be aware of. By default, Android will automatically assign initial focus to the first &lt;code&gt;EditText&lt;/code&gt; or focusable control in your &lt;code&gt;Activity&lt;/code&gt;.  It naturally follows that the InputMethod (typically the soft keyboard) will respond to the focus event by showing itself. The &lt;code&gt;windowSoftInputMode&lt;/code&gt; attribute in &lt;code&gt;AndroidManifest.xml&lt;/code&gt;, when set to &lt;code&gt;stateAlwaysHidden&lt;/code&gt;, instructs the keyboard to ignore this automatically-assigned initial focus.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;activity&lt;/span&gt;\n    &lt;span class=&quot;hljs-attr&quot;&gt;android:name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;.MyActivity&quot;&lt;/span&gt;\n    &lt;span class=&quot;hljs-attr&quot;&gt;android:windowSoftInputMode&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;stateAlwaysHidden&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Almost unbelievably, it appears to do nothing to prevent the keyboard from opening when you touch the control (unless &lt;code&gt;focusable=&quot;false&quot;&lt;/code&gt; and/or &lt;code&gt;focusableInTouchMode=&quot;false&quot;&lt;/code&gt; are assigned to the control). Apparently, the windowSoftInputMode setting applies only to automatic focus events, not to focus events triggered by touch events.&lt;/p&gt;\n&lt;p&gt;Therefore, &lt;code&gt;stateAlwaysHidden&lt;/code&gt; is VERY poorly named indeed. It should perhaps be called &lt;code&gt;ignoreInitialFocus&lt;/code&gt; instead.&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;&lt;strong&gt;UPDATE: More ways to get a window token&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;If there is no focused view (e.g. can happen if you just changed fragments), there are other views that will supply a useful window token.&lt;/p&gt;\n&lt;p&gt;These are alternatives for the above code &lt;code&gt;if (view == null)   view = new View(activity);&lt;/code&gt;  These don&apos;t refer explicitly to your activity.&lt;/p&gt;\n&lt;p&gt;Inside a fragment class:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;view&lt;/span&gt; = getView().getRootView().getWindowToken()&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Given a fragment &lt;code&gt;fragment&lt;/code&gt; as a parameter:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;view&lt;/span&gt; = fragment.getView().getRootView().getWindowToken()&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Starting from your content body:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;view&lt;/span&gt; = findViewById(android.R.id.content).getRootView().getWindowToken()&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;&lt;strong&gt;UPDATE 2: Clear focus to avoid showing keyboard again if you open the app from the background&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Add this line to the end of the method:&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;view.clearFocus();&lt;/code&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Also useful for hiding the soft-keyboard is:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;getWindow&lt;/span&gt;()&lt;span class=&quot;hljs-selector-class&quot;&gt;.setSoftInputMode&lt;/span&gt;(\n    WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN\n);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This can be used to suppress the soft-keyboard until the user actually touches the editText View.&lt;/p&gt;\n    ","\n&lt;p&gt;I got one more solution to hide keyboard:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) getSystemService(Activity.INPUT_METHOD_SERVICE);\nimm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here pass &lt;code&gt;HIDE_IMPLICIT_ONLY&lt;/code&gt; at the position of &lt;code&gt;showFlag&lt;/code&gt; and &lt;code&gt;0&lt;/code&gt; at the position of &lt;code&gt;hiddenFlag&lt;/code&gt;. It will forcefully close soft Keyboard.&lt;/p&gt;\n    ","\n&lt;p&gt;Meier&apos;s solution works for me too. In my case, the top level of my App is a tab host and I want to hide the keyword when switching tabs - I get the window token from the tab host View.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;tabHost.&lt;span class=&quot;hljs-title function_&quot;&gt;setOnTabChangedListener&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;OnTabChangeListener&lt;/span&gt;() {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onTabChanged&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;String&lt;/span&gt; tabId&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-title class_&quot;&gt;InputMethodManager&lt;/span&gt; imm = (&lt;span class=&quot;hljs-title class_&quot;&gt;InputMethodManager&lt;/span&gt;) &lt;span class=&quot;hljs-title function_&quot;&gt;getSystemService&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Context&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;INPUT_METHOD_SERVICE&lt;/span&gt;);\n        imm.&lt;span class=&quot;hljs-title function_&quot;&gt;hideSoftInputFromWindow&lt;/span&gt;(tabHost.&lt;span class=&quot;hljs-title function_&quot;&gt;getApplicationWindowToken&lt;/span&gt;(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Please try this below code in  &lt;code&gt;onCreate()&lt;/code&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;EditText&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;edtView&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (EditText) findViewById(R.id.editTextConvertValue);\nedtView.setInputType(InputType.TYPE_NULL);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Update:&lt;/strong&gt;\nI don&apos;t know why this solution is not work any more ( I just tested on Android 23). Please use the solution of &lt;a href=&quot;https://stackoverflow.com/a/9494042/523325&quot;&gt;Saurabh Pareek&lt;/a&gt; instead. Here it is:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) getSystemService(Activity.INPUT_METHOD_SERVICE);\n&lt;span class=&quot;hljs-comment&quot;&gt;//Hide:&lt;/span&gt;\nimm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n&lt;span class=&quot;hljs-comment&quot;&gt;//Show&lt;/span&gt;\nimm.toggleSoftInput(InputMethodManager.SHOW_IMPLICIT, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Old answer:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//Show soft-keyboard:&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;getWindow&lt;/span&gt;()&lt;span class=&quot;hljs-selector-class&quot;&gt;.setSoftInputMode&lt;/span&gt;(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);\n&lt;span class=&quot;hljs-comment&quot;&gt;//hide keyboard :&lt;/span&gt;\n &lt;span class=&quot;hljs-built_in&quot;&gt;getWindow&lt;/span&gt;()&lt;span class=&quot;hljs-selector-class&quot;&gt;.setSoftInputMode&lt;/span&gt;(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hideSoftKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(EditText input)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n    imm.hideSoftInputFromWindow(input.getWindowToken(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);    \n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If all the other answers here don&apos;t work for you as you would like them to, there&apos;s another way of manually controlling the keyboard.&lt;/p&gt;\n\n&lt;p&gt;Create a function with that will manage some of the &lt;code&gt;EditText&lt;/code&gt;&apos;s properties:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;public void &lt;span class=&quot;hljs-built_in&quot;&gt;setEditTextFocus&lt;/span&gt;(boolean isFocused) {\n    searchEditText&lt;span class=&quot;hljs-selector-class&quot;&gt;.setCursorVisible&lt;/span&gt;(isFocused);\n    searchEditText&lt;span class=&quot;hljs-selector-class&quot;&gt;.setFocusable&lt;/span&gt;(isFocused);\n    searchEditText&lt;span class=&quot;hljs-selector-class&quot;&gt;.setFocusableInTouchMode&lt;/span&gt;(isFocused);\n\n    if (isFocused) {\n        searchEditText&lt;span class=&quot;hljs-selector-class&quot;&gt;.requestFocus&lt;/span&gt;();\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then, make sure that onFocus of the &lt;code&gt;EditText&lt;/code&gt; you open/close the keyboard:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;searchEditText&lt;span class=&quot;hljs-selector-class&quot;&gt;.setOnFocusChangeListener&lt;/span&gt;(new OnFocusChangeListener() {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;@Override&lt;/span&gt;\n    public void onFocusChange(View v, boolean hasFocus) {\n        if (v == searchEditText) {\n            if (hasFocus) {\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Open keyboard&lt;/span&gt;\n                ((InputMethodManager) context&lt;span class=&quot;hljs-selector-class&quot;&gt;.getSystemService&lt;/span&gt;(Context.INPUT_METHOD_SERVICE))&lt;span class=&quot;hljs-selector-class&quot;&gt;.showSoftInput&lt;/span&gt;(searchEditText, InputMethodManager.SHOW_FORCED);\n            } else {\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Close keyboard&lt;/span&gt;\n                ((InputMethodManager) context&lt;span class=&quot;hljs-selector-class&quot;&gt;.getSystemService&lt;/span&gt;(Context.INPUT_METHOD_SERVICE))&lt;span class=&quot;hljs-selector-class&quot;&gt;.hideSoftInputFromWindow&lt;/span&gt;(searchEditText.getWindowToken(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n            }\n        }\n    }\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now, whenever you want to open the keyboard manually call: &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;setEditTextFocus&lt;/span&gt;(true);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And for closing call:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;setEditTextFocus&lt;/span&gt;(false);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/a/9494042/197359&quot;&gt;Saurabh Pareek&lt;/a&gt; has the best answer so far.&lt;/p&gt;\n\n&lt;p&gt;Might as well use the correct flags, though.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/* hide keyboard */&lt;/span&gt;\n((InputMethodManager) &lt;span class=&quot;hljs-built_in&quot;&gt;getSystemService&lt;/span&gt;(Activity.INPUT_METHOD_SERVICE))\n    &lt;span class=&quot;hljs-selector-class&quot;&gt;.toggleSoftInput&lt;/span&gt;(InputMethodManager.SHOW_IMPLICIT, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/* show keyboard */&lt;/span&gt;\n((InputMethodManager) &lt;span class=&quot;hljs-built_in&quot;&gt;getSystemService&lt;/span&gt;(Activity.INPUT_METHOD_SERVICE))\n    &lt;span class=&quot;hljs-selector-class&quot;&gt;.toggleSoftInput&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, InputMethodManager.HIDE_IMPLICIT_ONLY);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Example of real use&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/* click button */&lt;/span&gt;\npublic void &lt;span class=&quot;hljs-built_in&quot;&gt;onClick&lt;/span&gt;(View view) {      \n  &lt;span class=&quot;hljs-comment&quot;&gt;/* hide keyboard */&lt;/span&gt;\n  ((InputMethodManager) &lt;span class=&quot;hljs-built_in&quot;&gt;getSystemService&lt;/span&gt;(Activity.INPUT_METHOD_SERVICE))\n      &lt;span class=&quot;hljs-selector-class&quot;&gt;.toggleSoftInput&lt;/span&gt;(InputMethodManager.SHOW_IMPLICIT, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;/* start loader to check parameters ... */&lt;/span&gt;\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/* loader finished */&lt;/span&gt;\npublic void &lt;span class=&quot;hljs-built_in&quot;&gt;onLoadFinished&lt;/span&gt;(Loader&amp;lt;Object&amp;gt; loader, Object data) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;/* parameters not valid ... */&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;/* show keyboard */&lt;/span&gt;\n    ((InputMethodManager) &lt;span class=&quot;hljs-built_in&quot;&gt;getSystemService&lt;/span&gt;(Activity.INPUT_METHOD_SERVICE))\n        &lt;span class=&quot;hljs-selector-class&quot;&gt;.toggleSoftInput&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, InputMethodManager.HIDE_IMPLICIT_ONLY);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;/* parameters valid ... */&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;from so searching, here I found an answer that works for me&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;// Show soft-keyboard:\nInputMethodManager imm = (InputMethodManager) &lt;span class=&quot;hljs-built_in&quot;&gt;getSystemService&lt;/span&gt;(Context.INPUT_METHOD_SERVICE);\nimm&lt;span class=&quot;hljs-selector-class&quot;&gt;.toggleSoftInput&lt;/span&gt;(InputMethodManager&lt;span class=&quot;hljs-selector-class&quot;&gt;.SHOW_FORCED&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n\n// Hide soft-keyboard:\n&lt;span class=&quot;hljs-built_in&quot;&gt;getWindow&lt;/span&gt;().&lt;span class=&quot;hljs-built_in&quot;&gt;setSoftInputMode&lt;/span&gt;(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h2&gt;The short answer&lt;/h2&gt;\n\n&lt;p&gt;In your &lt;code&gt;OnClick&lt;/code&gt; listener call the &lt;code&gt;onEditorAction&lt;/code&gt; of the &lt;code&gt;EditText&lt;/code&gt; with &lt;code&gt;IME_ACTION_DONE&lt;/code&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;button.&lt;span class=&quot;hljs-title function_&quot;&gt;setOnClickListener&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;OnClickListener&lt;/span&gt;() {\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onClick&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;View v&lt;/span&gt;) {\n        someEditText.&lt;span class=&quot;hljs-title function_&quot;&gt;onEditorAction&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;EditorInfo&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;IME_ACTION_DONE&lt;/span&gt;)\n    }\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h2&gt;The drill-down&lt;/h2&gt;\n\n&lt;p&gt;I feel this method is better, simpler and more aligned with Android&apos;s design pattern.\nIn the simple example above (and usually in most of the common cases) you&apos;ll have an &lt;code&gt;EditText&lt;/code&gt; that has/had focus and it also usually was the one to invoke the keyboard in the first place (it is definitely able to invoke it in many common scenarios). In that same way, &lt;strong&gt;it&lt;/strong&gt; should be the one to release the keyboard, usually that can be done by an &lt;code&gt;ImeAction&lt;/code&gt;. Just see how an &lt;code&gt;EditText&lt;/code&gt; with &lt;code&gt;android:imeOptions=&quot;actionDone&quot;&lt;/code&gt; behaves, you want to achieve the same behavior by the same means.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Check this &lt;a href=&quot;https://stackoverflow.com/a/3449616/2837443&quot;&gt;related answer&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;This should work:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;KeyBoard&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Activity activity)&lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) activity.getSystemService(Activity.INPUT_METHOD_SERVICE);\n        imm.toggleSoftInput(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, InputMethodManager.HIDE_IMPLICIT_ONLY); &lt;span class=&quot;hljs-comment&quot;&gt;// show&lt;/span&gt;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hide&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Activity activity)&lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) activity.getSystemService(Activity.INPUT_METHOD_SERVICE);\n        imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// hide&lt;/span&gt;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;toggle&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Activity activity)&lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) activity.getSystemService(Activity.INPUT_METHOD_SERVICE);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (imm.isActive()){\n            hide(activity); \n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            show(activity); \n        }\n    }\n}\n\nKeyBoard.toggle(activity);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I&apos;m using a custom keyboard to input an Hex number so I can&apos;t have the IMM keyboard show up...&lt;/p&gt;\n\n&lt;p&gt;In v3.2.4_r1 &lt;code&gt;setSoftInputShownOnFocus(boolean show)&lt;/code&gt; was added to control weather or not to display the keyboard when a TextView gets focus, but its still hidden so reflection must be used:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (Build.VERSION.SDK_INT &amp;gt;= Build.VERSION_CODES.HONEYCOMB_MR2) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        Method method = TextView.&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt;.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;getMethod&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;setSoftInputShownOnFocus&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;boolean&lt;/span&gt;.&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt;);\n        method.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;invoke&lt;/span&gt;(mEditText, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;Exception&lt;/span&gt; e) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Fallback to the second method&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;For older versions, I got very good results (but far from perfect) with a &lt;code&gt;OnGlobalLayoutListener&lt;/code&gt;, added with the aid of a &lt;code&gt;ViewTreeObserver&lt;/code&gt; from my root view and then checking if the keyboard is shown like this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onGlobalLayout&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;Configuration&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getResources().getConfiguration();\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Dont allow the default keyboard to show up&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (config.keyboardHidden != Configuration.KEYBOARDHIDDEN_YES) {\n        &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n        imm.hideSoftInputFromWindow(mRootView.getWindowToken(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This last solution may show the keyboard for a split second and messes with the selection handles.&lt;/p&gt;\n\n&lt;p&gt;When in the keyboard enters full screen, onGlobalLayout isn&apos;t called. To avoid that, use &lt;a href=&quot;https://developer.android.com/reference/android/widget/TextView.html#setImeOptions%28int%29&quot; rel=&quot;noreferrer&quot;&gt;TextView#setImeOptions(int)&lt;/a&gt; or in the TextView XML declaration:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-vbnet&quot;&gt;&lt;span class=&quot;hljs-symbol&quot;&gt;android:&lt;/span&gt;imeOptions=&lt;span class=&quot;hljs-string&quot;&gt;&quot;actionNone|actionUnspecified|flagNoFullscreen|flagNoExtractUi&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Update:&lt;/strong&gt; Just found what dialogs use to never show the keyboard and works in all versions:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;getWindow&lt;/span&gt;()&lt;span class=&quot;hljs-selector-class&quot;&gt;.setFlags&lt;/span&gt;(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,\n        WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setKeyboardVisibility&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; show)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(show){\n        imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    }&lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;{\n        imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(),&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I have spent more than two days working through all of the solutions posted in the thread and have found them lacking in one way or another.  My exact requirement is to have a button that will with 100% reliability show or hide the on screen keyboard.  When the keyboard is in its hidden state is should not re-appear, no matter what input fields the user clicks on.  When it is in its visible state the keyboard should not disappear no matter what buttons the user clicks.  This needs to work on Android 2.2+ all the way up to the latest devices.&lt;/p&gt;\n\n&lt;p&gt;You can see a working implementation of this in my app &lt;a href=&quot;https://play.google.com/store/apps/details?id=au.com.lukesleeman.rpn&amp;amp;hl=en&quot; rel=&quot;noreferrer&quot;&gt;clean RPN&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;After testing many of the suggested answers on a number of different phones (including froyo and gingerbread devices) it became apparent that android apps can reliably:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Temporarily hide the keyboard.  It will re-appear again when a user\nfocuses a new text field.&lt;/li&gt;\n&lt;li&gt;Show the keyboard when an activity starts\nand set a flag on the activity indicating that they keyboard should\nalways be visible.  This flag can only be set when an activity is\ninitialising.&lt;/li&gt;\n&lt;li&gt;Mark an activity to never show or allow the use of the\nkeyboard.  This flag can only be set when an activity is\ninitialising.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;For me, temporarily hiding the keyboard is not enough.  On some devices it will re-appear as soon as a new text field is focused.  As my app uses multiple text fields on one page, focusing a new text field will cause the hidden keyboard to pop back up again.&lt;/p&gt;\n\n&lt;p&gt;Unfortunately item 2 and 3 on the list only work reliability when an activity is being started.  Once the activity has become visible you cannot permanently hide or show the keyboard.  The trick is to actually restart your activity when the user presses the keyboard toggle button.  In my app when the user presses on the toggle keyboard button, the following code runs:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;toggleKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;{\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(keypadPager.getVisibility() == View.VISIBLE){\n        &lt;span class=&quot;hljs-type&quot;&gt;Intent&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intent&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;, MainActivity.class);\n        i.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);\n        &lt;span class=&quot;hljs-type&quot;&gt;Bundle&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Bundle&lt;/span&gt;();\n        onSaveInstanceState(state);\n        state.putBoolean(SHOW_KEYBOARD, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n        i.putExtras(state);\n\n        startActivity(i);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;Intent&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intent&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;, MainActivity.class);\n        i.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);\n        &lt;span class=&quot;hljs-type&quot;&gt;Bundle&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Bundle&lt;/span&gt;();\n        onSaveInstanceState(state);\n        state.putBoolean(SHOW_KEYBOARD, &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);\n        i.putExtras(state);\n\n        startActivity(i);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This causes the current activity to have its state saved into a Bundle, and then the activity is started, passing through an boolean which indicates if the keyboard should be shown or hidden.&lt;/p&gt;\n\n&lt;p&gt;Inside the onCreate method the following code is run:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;if&lt;/span&gt;(bundle.getBoolean(SHOW_KEYBOARD)){\n    ((InputMethodManager) &lt;span class=&quot;hljs-built_in&quot;&gt;getSystemService&lt;/span&gt;(Context.INPUT_METHOD_SERVICE))&lt;span class=&quot;hljs-selector-class&quot;&gt;.showSoftInput&lt;/span&gt;(newEquationText,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    &lt;span class=&quot;hljs-built_in&quot;&gt;getWindow&lt;/span&gt;()&lt;span class=&quot;hljs-selector-class&quot;&gt;.setSoftInputMode&lt;/span&gt;(LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);\n}\nelse{\n    &lt;span class=&quot;hljs-built_in&quot;&gt;getWindow&lt;/span&gt;()&lt;span class=&quot;hljs-selector-class&quot;&gt;.setFlags&lt;/span&gt;(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,\n            WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If the soft keyboard should be shown, then the InputMethodManager is told to show the keyboard and the window is instructed to make the soft input always visible. If the soft keyboard should be hidden then the WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM is set.&lt;/p&gt;\n\n&lt;p&gt;This approach works reliably on all devices I have tested on - from a 4 year old HTC phone running android 2.2 up to a nexus 7 running 4.2.2.  The only disadvantage with this approach is you need to be careful with handling the back button.  As my app essentially only has one screen (its a calculator) I can override onBackPressed() and return to the devices home screen.&lt;/p&gt;\n    ","\n&lt;p&gt;Alternatively to &lt;a href=&quot;https://stackoverflow.com/a/9494042/451962&quot;&gt;this all around solution&lt;/a&gt;, if you wanted to close the soft keyboard &lt;strong&gt;from anywhere&lt;/strong&gt; without having a reference to the (EditText) field that was used to open the keyboard, but still wanted to do it if the field was focused, you could use this (from an Activity):&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (getCurrentFocus() != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n    imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Thank God its officially supported &lt;a href=&quot;https://www.youtube.com/watch?v=acC7SR1EXsI&quot; rel=&quot;noreferrer&quot;&gt;after 11 years&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;First add dependency &lt;code&gt;implementation &apos;androidx.core:core-ktx:1.7.0&apos;&lt;/code&gt; to app gradle&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Here is the simple &lt;a href=&quot;https://github.com/sergchil/KeyboardTest&quot; rel=&quot;noreferrer&quot;&gt;project&lt;/a&gt; on github&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.app.Activity\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.content.Context\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.view.View\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; androidx.core.view.WindowInsetsCompat\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; androidx.core.view.WindowInsetsControllerCompat\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; androidx.fragment.app.Fragment\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; androidx.fragment.app.FragmentActivity\n\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; View.&lt;span class=&quot;hljs-title&quot;&gt;showKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; = (&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.context &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt;? Activity)?.showKeyboard()\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; View.&lt;span class=&quot;hljs-title&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; = (&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.context &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt;? Activity)?.hideKeyboard()\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; Fragment.&lt;span class=&quot;hljs-title&quot;&gt;showKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; = activity?.let(FragmentActivity::showKeyboard)\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; Fragment.&lt;span class=&quot;hljs-title&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; = activity?.hideKeyboard()\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; Context.&lt;span class=&quot;hljs-title&quot;&gt;showKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; = (&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt;? Activity)?.showKeyboard()\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; Context.&lt;span class=&quot;hljs-title&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; = (&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt;? Activity)?.hideKeyboard()\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; Activity.&lt;span class=&quot;hljs-title&quot;&gt;showKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; = WindowInsetsControllerCompat(window, window.decorView).show(WindowInsetsCompat.Type.ime())\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; Activity.&lt;span class=&quot;hljs-title&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; = WindowInsetsControllerCompat(window, window.decorView).hide(WindowInsetsCompat.Type.ime())\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Thanks to &lt;a href=&quot;https://stackoverflow.com/a/7696791/1617737&quot;&gt;this SO answer&lt;/a&gt;, I derived the following which, in my case, works nicely when scrolling through the the fragments of a ViewPager...&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {   \n    &lt;span class=&quot;hljs-comment&quot;&gt;// Check if no view has focus:&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getCurrentFocus();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (view != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;inputManager&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getSystemService(Context.INPUT_METHOD_SERVICE);\n        inputManager.hideSoftInputFromWindow(view.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;showKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {   \n    &lt;span class=&quot;hljs-comment&quot;&gt;// Check if no view has focus:&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getCurrentFocus();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (view != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;inputManager&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.getSystemService(Context.INPUT_METHOD_SERVICE);\n        inputManager.showSoftInput(view, InputMethodManager.SHOW_IMPLICIT);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Above answers work for different scenario&apos;s but  &lt;strong&gt;If you want to hide the keyboard inside a view and struggling to get the right context try this:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;setOnClickListener&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;OnClickListener&lt;/span&gt;() {\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onClick&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;View v&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-title function_&quot;&gt;hideSoftKeyBoardOnTabClicked&lt;/span&gt;(v);\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hideSoftKeyBoardOnTabClicked&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;View v&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (v != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; context != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-title class_&quot;&gt;InputMethodManager&lt;/span&gt; imm = (&lt;span class=&quot;hljs-title class_&quot;&gt;InputMethodManager&lt;/span&gt;) context.&lt;span class=&quot;hljs-title function_&quot;&gt;getSystemService&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Context&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;INPUT_METHOD_SERVICE&lt;/span&gt;);\n        imm.&lt;span class=&quot;hljs-title function_&quot;&gt;hideSoftInputFromWindow&lt;/span&gt;(v.&lt;span class=&quot;hljs-title function_&quot;&gt;getApplicationWindowToken&lt;/span&gt;(), &lt;span class=&quot;hljs-title class_&quot;&gt;InputMethodManager&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;HIDE_NOT_ALWAYS&lt;/span&gt;);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and to get the context fetch it from constructor:) &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; View/RelativeLayout/&lt;span class=&quot;hljs-function&quot;&gt;so &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;so&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;Context context, AttributeSet attrs, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; defStyle&lt;/span&gt;)&lt;/span&gt; {\n    super(context, attrs, defStyle);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.context = context;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;init&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you want to close the soft keyboard during a unit or functional test, you can do so by clicking the &quot;back button&quot; from your test:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Close the soft keyboard from a Test&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;getInstrumentation&lt;/span&gt;()&lt;span class=&quot;hljs-selector-class&quot;&gt;.sendKeyDownUpSync&lt;/span&gt;(KeyEvent.KEYCODE_BACK);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I put &quot;back button&quot; in quotes, since the above doesn&apos;t trigger the &lt;code&gt;onBackPressed()&lt;/code&gt; for the Activity in question. It just closes the keyboard.&lt;/p&gt;\n\n&lt;p&gt;Make sure to pause for a little while before moving on, since it takes a little while to close the back button, so subsequent clicks to Views, etc., won&apos;t be registered until after a short pause (1 second is long enough ime).&lt;/p&gt;\n    ","\n&lt;p&gt;Now, almost 12 years later, we finally have an official, backwards compatible way to do this with &lt;a href=&quot;https://developer.android.com/jetpack/androidx/releases/core#1.5.0&quot; rel=&quot;noreferrer&quot;&gt;AndroidX Core 1.5+&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; View.&lt;span class=&quot;hljs-title&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; = ViewCompat.getWindowInsetsController(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;)\n    ?.hide(WindowInsetsCompat.Type.ime())\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;or specifically for Fragment:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; Fragment.&lt;span class=&quot;hljs-title&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; = ViewCompat.getWindowInsetsController(requireView())\n    ?.hide(WindowInsetsCompat.Type.ime())\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Here&apos;s how you do it in Mono for Android (AKA MonoDroid)&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;InputMethodManager imm = GetSystemService (Context.InputMethodService) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; InputMethodManager;\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (imm != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;)\n    imm.HideSoftInputFromWindow (searchbox.WindowToken , &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This worked for me for all the bizarre keyboard behavior&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;isKeyboardVisible&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;Rect&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Rect&lt;/span&gt;();\n    &lt;span class=&quot;hljs-comment&quot;&gt;//r will be populated with the coordinates of your view that area still visible.&lt;/span&gt;\n    mRootView.getWindowVisibleDisplayFrame(r);\n\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;heightDiff&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; mRootView.getRootView().getHeight() - (r.bottom - r.top);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; heightDiff &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// if more than 100 pixels, its probably a keyboard...&lt;/span&gt;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;showKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (isKeyboardVisible())\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n    &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;inputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (getCurrentFocus() == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        inputMethodManager.toggleSoftInput(InputMethodManager.SHOW_FORCED, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-type&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getCurrentFocus();\n        inputMethodManager.showSoftInput(view, InputMethodManager.SHOW_FORCED);\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!isKeyboardVisible())\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n    &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;inputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n    &lt;span class=&quot;hljs-type&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getCurrentFocus();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (view == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (inputMethodManager.isAcceptingText())\n            inputMethodManager.toggleSoftInput(InputMethodManager.HIDE_NOT_ALWAYS, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (view &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; EditText)\n            ((EditText) view).setText(((EditText) view).getText().toString()); &lt;span class=&quot;hljs-comment&quot;&gt;// reset edit text bug on some keyboards bug&lt;/span&gt;\n        inputMethodManager.hideSoftInputFromInputMethod(view.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Simple and Easy to use method, just call &lt;strong&gt;hideKeyboardFrom(YourActivity.this);&lt;/strong&gt; to hide keyboard&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * This method is used to hide keyboard\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; activity\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hideKeyboardFrom&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Activity activity)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) activity.getSystemService(Activity.INPUT_METHOD_SERVICE);\n    imm.hideSoftInputFromWindow(activity.getCurrentFocus().getWindowToken(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Just use this optimized code in your activity:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.getCurrentFocus() != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n    InputMethodManager inputManager = (InputMethodManager) &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.getSystemService(Context.INPUT_METHOD_SERVICE);\n    inputManager.hideSoftInputFromWindow(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Add to your activity    &lt;code&gt;android:windowSoftInputMode=&quot;stateHidden&quot;&lt;/code&gt; in Manifest file. Example:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;activity&lt;/span&gt;\n            &lt;span class=&quot;hljs-attr&quot;&gt;android:name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;.ui.activity.MainActivity&quot;&lt;/span&gt;\n            &lt;span class=&quot;hljs-attr&quot;&gt;android:label&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@string/mainactivity&quot;&lt;/span&gt;\n            &lt;span class=&quot;hljs-attr&quot;&gt;android:windowSoftInputMode&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;stateHidden&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h2&gt; &lt;code&gt;Kotlin Version&lt;/code&gt; via &lt;code&gt;Extension Function&lt;/code&gt;&lt;/h2&gt;\n&lt;p&gt;Using kotlin extension functions, it&apos;d be so simple to show and hide the soft keyboard.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;ExtensionFunctions.kt&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.app.Activity\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.view.View\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.view.inputmethod.InputMethodManager\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.widget.EditText\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; androidx.fragment.app.Fragment\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; Activity.&lt;span class=&quot;hljs-title&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;Boolean&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (getSystemService(Activity.INPUT_METHOD_SERVICE) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; InputMethodManager)\n        .hideSoftInputFromWindow((currentFocus ?: View(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;)).windowToken, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; Fragment.&lt;span class=&quot;hljs-title&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;Boolean&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (context?.getSystemService(Activity.INPUT_METHOD_SERVICE) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; InputMethodManager)\n        .hideSoftInputFromWindow((activity?.currentFocus ?: View(context)).windowToken, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; EditText.&lt;span class=&quot;hljs-title&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;Boolean&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (context.getSystemService(Activity.INPUT_METHOD_SERVICE) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; InputMethodManager)\n        .hideSoftInputFromWindow(windowToken, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;fun&lt;/span&gt; EditText.&lt;span class=&quot;hljs-title&quot;&gt;showKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;Boolean&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (context.getSystemService(Activity.INPUT_METHOD_SERVICE) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; InputMethodManager)\n        .showSoftInput(&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt; Usage&lt;/h3&gt;\n&lt;p&gt;Now in your &lt;code&gt;Activity&lt;/code&gt; or &lt;code&gt;Fragment&lt;/code&gt;, &lt;code&gt;hideKeyboard()&lt;/code&gt; is clearly accessible as well as calling it from an instance of &lt;code&gt;EditText&lt;/code&gt; like:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;editText&lt;span class=&quot;hljs-selector-class&quot;&gt;.hideKeyboard&lt;/span&gt;()\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;For Open Keyboard :&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\nimm.showSoftInput(edtView, InputMethodManager.SHOW_IMPLICIT);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;For Close/Hide Keyboard :&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt; &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\n imm.hideSoftInputFromWindow(edtView.getWindowToken(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I have the case, where my &lt;code&gt;EditText&lt;/code&gt; can be located also in an &lt;code&gt;AlertDialog&lt;/code&gt;, so the keyboard should be closed on dismiss. The following code seems to be working anywhere:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hideKeyboard&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( Activity activity )&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;InputMethodManager&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (InputMethodManager)activity.getSystemService( Context.INPUT_METHOD_SERVICE );\n    &lt;span class=&quot;hljs-type&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; activity.getCurrentFocus();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;( &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; != f &amp;amp;&amp;amp; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; != f.getWindowToken() &amp;amp;&amp;amp; EditText.class.isAssignableFrom( f.getClass() ) )\n        imm.hideSoftInputFromWindow( f.getWindowToken(), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; );\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; \n        activity.getWindow().setSoftInputMode( WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN );\n}\n&lt;/code&gt;&lt;/pre&gt;\n    "]},"randomTags":[{"name":"loops","slug":"loops"},{"name":"android-activity","slug":"android-activity"},{"name":"autolayout","slug":"autolayout"},{"name":"asp.net-mvc-5","slug":"asp.net-mvc-5"},{"name":"es6-promise","slug":"es6-promise"},{"name":"session","slug":"session"},{"name":"clang","slug":"clang"},{"name":"servlets","slug":"servlets"},{"name":"cpu-architecture","slug":"cpu-architecture"},{"name":"deep-copy","slug":"deep-copy"},{"name":"android-permissions","slug":"android-permissions"},{"name":"complexity-theory","slug":"complexity-theory"},{"name":"unity3d","slug":"unity3d"},{"name":"python-2.7","slug":"python-2.7"},{"name":"mysql-error-1093","slug":"mysql-error-1093"},{"name":"copy-elision","slug":"copy-elision"},{"name":"magic-methods","slug":"magic-methods"},{"name":"php-password-hash","slug":"php-password-hash"},{"name":"clone","slug":"clone"},{"name":"incompatibility","slug":"incompatibility"}]},"__N_SSG":true}