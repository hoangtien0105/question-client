{"pageProps":{"data":{"count":1,"rows":[{"id":89,"title":"What are the rules about using an underscore in a C++ identifier?","slug":"what-are-the-rules-about-using-an-underscore-in-a-c++-identifier-1657384557197","postType":"QUESTION","createdAt":"2022-07-09T16:35:57.000Z","updatedAt":"2022-07-09T16:35:57.000Z","tags":[{"id":325,"name":"standards","slug":"standards","createdAt":"2022-07-09T16:35:57.000Z","updatedAt":"2022-07-09T16:35:57.000Z","Questions_Tags":{"questionId":89,"tagId":325}}]}]},"slug":"standards","page":"1","answers":{"89":["\n&lt;p&gt;The rules (which did not change in C++11):&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Reserved in any scope, including for use as &lt;a href=&quot;https://stackoverflow.com/questions/4297933/c-implementation#4297974&quot;&gt;implementation&lt;/a&gt; macros:\n\n&lt;ul&gt;\n&lt;li&gt;identifiers beginning with an underscore followed immediately by an uppercase letter&lt;/li&gt;\n&lt;li&gt;identifiers containing adjacent underscores (or &quot;double underscore&quot;)&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Reserved in the global namespace:\n\n&lt;ul&gt;\n&lt;li&gt;identifiers beginning with an underscore&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Also, everything in the &lt;code&gt;std&lt;/code&gt; namespace is reserved. (You are allowed to add template specializations, though.) &lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;From the 2003 C++ Standard:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;h3&gt;17.4.3.1.2 Global names [lib.global.names]&lt;/h3&gt;\n  \n  &lt;p&gt;Certain sets of names and function signatures are always reserved to the implementation:&lt;/p&gt;\n  \n  &lt;ul&gt;\n  &lt;li&gt;Each name that contains a double underscore (&lt;code&gt;__&lt;/code&gt;) or begins with an underscore followed by an uppercase letter (2.11) is reserved to the implementation for any use.&lt;/li&gt;\n  &lt;li&gt;Each name that begins with an underscore is reserved to the implementation for use as a name in the global namespace.&lt;sup&gt;165&lt;/sup&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n  \n  &lt;p&gt;&lt;sup&gt;165)&lt;/sup&gt; Such names are also reserved in namespace &lt;code&gt;::std&lt;/code&gt; (17.4.3.1). &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Because C++ is based on the C standard (1.1/2, C++03) and C99 is a normative reference (1.2/1, C++03) these also apply, from the 1999 C Standard:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;h3&gt;7.1.3 Reserved identifiers&lt;/h3&gt;\n  \n  &lt;p&gt;Each header declares or defines all identifiers listed in its associated subclause, and\n  optionally declares or defines identifiers listed in its associated future library directions subclause and identifiers which are always reserved either for any use or for use as file scope identifiers.&lt;/p&gt;\n  \n  &lt;ul&gt;\n  &lt;li&gt;All identifiers that begin with an underscore and either an uppercase letter or another\n  underscore are always reserved for any use.&lt;/li&gt;\n  &lt;li&gt;All identifiers that begin with an underscore are always reserved for use as identifiers\n  with file scope in both the ordinary and tag name spaces.&lt;/li&gt;\n  &lt;li&gt;Each macro name in any of the following subclauses (including the future library\n  directions) is reserved for use as specified if any of its associated headers is included;\n  unless explicitly stated otherwise (see 7.1.4).&lt;/li&gt;\n  &lt;li&gt;All identifiers with external linkage in any of the following subclauses (including the\n  future library directions) are always reserved for use as identifiers with external\n  linkage.&lt;sup&gt;154&lt;/sup&gt;&lt;/li&gt;\n  &lt;li&gt;Each identifier with file scope listed in any of the following subclauses (including the\n  future library directions) is reserved for use as a macro name and as an identifier with\n  file scope in the same name space if any of its associated headers is included.&lt;/li&gt;\n  &lt;/ul&gt;\n  \n  &lt;p&gt;No other identifiers are reserved. If the program declares or defines an identifier in a\n  context in which it is reserved (other than as allowed by 7.1.4), or defines a reserved\n  identifier as a macro name, the behavior is undefined.&lt;/p&gt;\n  \n  &lt;p&gt;If the program removes (with &lt;code&gt;#undef&lt;/code&gt;) any macro definition of an identifier in the first\n  group listed above, the behavior is undefined.&lt;/p&gt;\n  \n  &lt;p&gt;&lt;sup&gt;154)&lt;/sup&gt; The list of reserved identifiers with external linkage includes &lt;code&gt;errno&lt;/code&gt;, &lt;code&gt;math_errhandling&lt;/code&gt;, &lt;code&gt;setjmp&lt;/code&gt;, and &lt;code&gt;va_end&lt;/code&gt;.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Other restrictions might apply. For example, the POSIX standard reserves a lot of identifiers that are likely to show up in normal code:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Names beginning with a capital &lt;code&gt;E&lt;/code&gt; followed a digit or uppercase letter:\n\n&lt;ul&gt;\n&lt;li&gt;may be used for additional error code names.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Names that begin with either &lt;code&gt;is&lt;/code&gt; or &lt;code&gt;to&lt;/code&gt; followed by a lowercase letter\n\n&lt;ul&gt;\n&lt;li&gt;may be used for additional character testing and conversion functions.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Names that begin with &lt;code&gt;LC_&lt;/code&gt; followed by an uppercase letter\n\n&lt;ul&gt;\n&lt;li&gt;may be used for additional macros specifying locale attributes.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Names of all existing mathematics functions suffixed with &lt;code&gt;f&lt;/code&gt; or &lt;code&gt;l&lt;/code&gt; are reserved\n\n&lt;ul&gt;\n&lt;li&gt;for corresponding functions that operate on float and long double arguments, respectively.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Names that begin with &lt;code&gt;SIG&lt;/code&gt; followed by an uppercase letter are reserved\n\n&lt;ul&gt;\n&lt;li&gt;for additional signal names.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Names that begin with &lt;code&gt;SIG_&lt;/code&gt; followed by an uppercase letter are reserved\n\n&lt;ul&gt;\n&lt;li&gt;for additional signal actions.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Names beginning with &lt;code&gt;str&lt;/code&gt;, &lt;code&gt;mem&lt;/code&gt;, or &lt;code&gt;wcs&lt;/code&gt; followed by a lowercase letter are reserved\n\n&lt;ul&gt;\n&lt;li&gt;for additional string and array functions.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Names beginning with &lt;code&gt;PRI&lt;/code&gt; or &lt;code&gt;SCN&lt;/code&gt; followed by any lowercase letter or &lt;code&gt;X&lt;/code&gt; are reserved\n\n&lt;ul&gt;\n&lt;li&gt;for additional format specifier macros&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;Names that end with &lt;code&gt;_t&lt;/code&gt; are reserved\n\n&lt;ul&gt;\n&lt;li&gt;for additional type names.&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;While using these names for your own purposes right now might not cause a problem, they do raise the possibility of conflict with future versions of that standard.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Personally I just don&apos;t start identifiers with underscores. New addition to my rule: Don&apos;t use double underscores anywhere, which is easy as I rarely use underscore.&lt;/p&gt;\n\n&lt;p&gt;After doing research on this article I no longer end my identifiers with &lt;code&gt;_t&lt;/code&gt;\nas this is reserved by the POSIX standard.&lt;/p&gt;\n\n&lt;p&gt;The rule about any identifier ending with &lt;code&gt;_t&lt;/code&gt; surprised me a lot. I think that is a POSIX standard (not sure yet) looking for clarification and official chapter and verse. This is from the &lt;a href=&quot;http://www.gnu.org/software/libtool/manual/libc/Reserved-Names.html&quot; rel=&quot;noreferrer&quot;&gt;GNU libtool manual&lt;/a&gt;, listing reserved names.&lt;/p&gt;\n\n&lt;p&gt;CesarB provided the following link to the &lt;a href=&quot;http://www.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_02.html&quot; rel=&quot;noreferrer&quot;&gt;POSIX 2004&lt;/a&gt; reserved symbols and notes &apos;that many other reserved prefixes and suffixes ... can be found there&apos;.  The\n&lt;a href=&quot;http://www.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html&quot; rel=&quot;noreferrer&quot;&gt;POSIX 2008&lt;/a&gt; reserved symbols are defined here.  The restrictions are somewhat more nuanced than those above.&lt;/p&gt;\n    ","\n&lt;p&gt;The rules to avoid collision of names are both in the C++ standard (see Stroustrup book) and mentioned by C++ gurus (Sutter, etc.).&lt;/p&gt;\n\n&lt;h2&gt;Personal rule&lt;/h2&gt;\n\n&lt;p&gt;Because I did not want to deal with cases, and wanted a simple rule, I have designed a &lt;strong&gt;personal&lt;/strong&gt; one that is both simple and correct:&lt;/p&gt;\n\n&lt;p&gt;&lt;b&gt;\nWhen naming a symbol, you will avoid collision with compiler/OS/standard libraries if you:&lt;/b&gt;&lt;/p&gt;&lt;b&gt;\n\n&lt;/b&gt;&lt;ul&gt;&lt;b&gt;\n&lt;li&gt;never start a symbol with an underscore&lt;/li&gt;\n&lt;/b&gt;&lt;li&gt;&lt;b&gt;never name a symbol with two consecutive underscores inside.\n&lt;/b&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Of course, putting your code in an unique namespace helps to avoid collision, too (but won&apos;t protect against evil macros)&lt;/p&gt;\n\n&lt;h2&gt;Some examples&lt;/h2&gt;\n\n&lt;p&gt;(I use macros because they are the more code-polluting of C/C++ symbols, but it could be anything from variable name to class name)&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; _WRONG&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; __WRONG_AGAIN&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; RIGHT_&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; WRONG__WRONG&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; RIGHT_RIGHT&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; RIGHT_x_RIGHT&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h2&gt;Extracts from C++0x draft&lt;/h2&gt;\n\n&lt;p&gt;From the &lt;a href=&quot;http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf&quot; rel=&quot;noreferrer&quot;&gt;n3242.pdf&lt;/a&gt; file (I expect the final standard text to be similar):&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;&lt;b&gt;17.6.3.3.2 Global names [global.names]&lt;/b&gt;&lt;/p&gt;\n  \n  &lt;p&gt;Certain sets of names and function signatures are always reserved to the implementation:&lt;/p&gt;\n  \n  &lt;p&gt; Each name that contains a double underscore _ _ or begins with an underscore followed by an uppercase letter (2.12) is reserved to the implementation for any use.&lt;/p&gt;\n  \n  &lt;p&gt; Each name that begins with an underscore is reserved to the implementation for use as a name in the global namespace.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;But also:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;&lt;b&gt;17.6.3.3.5 User-defined literal suffixes [usrlit.suffix]&lt;/b&gt;&lt;/p&gt;\n  \n  &lt;p&gt;Literal suffix identifiers that do not start with an underscore are reserved for future standardization.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;This last clause is confusing, unless you consider that a name starting with one underscore and followed by a lowercase letter would be Ok if &lt;i&gt;not&lt;/i&gt; defined in the global namespace...&lt;/p&gt;\n    ","\n&lt;p&gt;From &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/565w213d.aspx&quot; rel=&quot;noreferrer&quot;&gt;MSDN&lt;/a&gt;:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Use of two sequential underscore characters ( __ ) at the beginning of an identifier, or a single leading underscore followed by a capital letter, is reserved for C++ implementations in all scopes. You should avoid using one leading underscore followed by a lowercase letter for names with file scope because of possible conflicts with current or future reserved identifiers.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;This means that you can use a single underscore as a member variable prefix, as long as it&apos;s followed by a lower-case letter.&lt;/p&gt;\n\n&lt;p&gt;This is apparently taken from section 17.4.3.1.2 of the C++ standard, but I can&apos;t find an original source for the full standard online.&lt;/p&gt;\n\n&lt;p&gt;See also &lt;a href=&quot;https://stackoverflow.com/questions/224397/why-do-people-use-double-underscore-so-much-in-c&quot;&gt;this question&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;As for the other part of the question, it&apos;s common to put the underscore at the &lt;em&gt;end&lt;/em&gt; of the variable name to not clash with anything internal.&lt;/p&gt;\n\n&lt;p&gt;I do this even inside classes and namespaces because I then only have to remember one rule (compared to &quot;at the end of the name in global scope, and the beginning of the name everywhere else&quot;).&lt;/p&gt;\n    ","\n&lt;p&gt;Yes, underscores may be used anywhere in an identifier. I believe the rules are: any of a-z, A-Z, _ in the first character and those +0-9 for the following characters.&lt;/p&gt;\n\n&lt;p&gt;Underscore prefixes are common in C code -- a single underscore means &quot;private&quot;, and double underscores are usually reserved for use by the compiler.&lt;/p&gt;\n    "]},"randomTags":[{"name":"observable","slug":"observable"},{"name":"time-format","slug":"time-format"},{"name":"recursion","slug":"recursion"},{"name":"quotes","slug":"quotes"},{"name":"dom-events","slug":"dom-events"},{"name":"css-transitions","slug":"css-transitions"},{"name":"http-get","slug":"http-get"},{"name":"single-quotes","slug":"single-quotes"},{"name":"copy-and-swap","slug":"copy-and-swap"},{"name":"python-3.6","slug":"python-3.6"},{"name":"preflight","slug":"preflight"},{"name":"grouping","slug":"grouping"},{"name":"pygame","slug":"pygame"},{"name":"public","slug":"public"},{"name":"click","slug":"click"},{"name":"heap-memory","slug":"heap-memory"},{"name":"html-parsing","slug":"html-parsing"},{"name":"formatting","slug":"formatting"},{"name":"language-features","slug":"language-features"},{"name":"currency","slug":"currency"}]},"__N_SSG":true}