{"pageProps":{"data":{"count":1,"rows":[{"id":246,"title":"Why does Tkinter image not show up if created in a function?","slug":"why-does-tkinter-image-not-show-up-if-created-in-a-function-1657387388233","postType":"QUESTION","createdAt":"2022-07-09T17:23:08.000Z","updatedAt":"2022-07-09T17:23:08.000Z","tags":[{"id":1610,"name":"tkinter-canvas","slug":"tkinter-canvas","createdAt":"2022-07-09T17:23:08.000Z","updatedAt":"2022-07-09T17:23:08.000Z","Questions_Tags":{"questionId":246,"tagId":1610}}]}]},"slug":"tkinter-canvas","page":"1","answers":{"246":["\n&lt;p&gt;The variable &lt;code&gt;photo&lt;/code&gt; is a local variable which gets garbage collected after the class is instantiated. Save a reference to the photo, for example:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;self.photo = tkinter.PhotoImage(...)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;If you do a Google search on &quot;tkinter image doesn&apos;t display&quot;, the first result is this:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://web.archive.org/web/20201111190625id_/http://effbot.org/pyfaq/why-do-my-tkinter-images-not-appear.htm&quot; rel=&quot;noreferrer&quot;&gt;Why do my Tkinter images not appear?&lt;/a&gt; (The FAQ answer is currently &lt;em&gt;not&lt;/em&gt; outdated)&lt;/p&gt;\n    ","\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; tkinter &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; *\n&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; PIL &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; ImageTk, Image\n\nroot = Tk()\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;open_img&lt;/span&gt;():\n    &lt;span class=&quot;hljs-keyword&quot;&gt;global&lt;/span&gt; img\n    path = &lt;span class=&quot;hljs-string&quot;&gt;r&quot;C:\\.....\\\\&quot;&lt;/span&gt;\n    img = ImageTk.PhotoImage(Image.&lt;span class=&quot;hljs-built_in&quot;&gt;open&lt;/span&gt;(path))\n    panel = Label(root, image=img)\n    panel.pack(side=&lt;span class=&quot;hljs-string&quot;&gt;&quot;bottom&quot;&lt;/span&gt;, fill=&lt;span class=&quot;hljs-string&quot;&gt;&quot;both&quot;&lt;/span&gt;)\nbut1 = Button(root, text=&lt;span class=&quot;hljs-string&quot;&gt;&quot;click to get the image&quot;&lt;/span&gt;, command=open_img)\nbut1.pack()\nroot.mainloop() \n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Just add global to the img definition and it will work&lt;/p&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;p&gt;The problem is Python automatically deletes the references to the variable by a process known as &lt;a href=&quot;https://www.tutorialspoint.com/How-does-garbage-collection-work-in-Python&quot; rel=&quot;nofollow noreferrer&quot;&gt;Garbage Collection&lt;/a&gt;. The solution is to save the reference or to create a new reference.&lt;/p&gt;\n&lt;p&gt;The following are the ways:&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;Using &lt;code&gt;self&lt;/code&gt; to increase the reference count and to save the reference.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; tkinter\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Test&lt;/span&gt;:\n    &lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;__init__&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;self, master&lt;/span&gt;):\n        canvas = tkinter.Canvas(master)\n        canvas.grid(row = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, column = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n        self.photo = tkinter.PhotoImage(file = &lt;span class=&quot;hljs-string&quot;&gt;&apos;./test.gif&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;# Changes here&lt;/span&gt;\n        canvas.create_image(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, image=self.photo) &lt;span class=&quot;hljs-comment&quot;&gt;# Changes here&lt;/span&gt;\n\nroot = tkinter.Tk()\ntest = Test(root)\nroot.mainloop()\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=&quot;2&quot;&gt;\n&lt;li&gt;Saving it to a list to increase the reference count and to save the reference.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; tkinter\nl=[]\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Test&lt;/span&gt;:\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;__init__&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;self, master&lt;/span&gt;):\n        canvas = tkinter.Canvas(master)\n        canvas.grid(row = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, column = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n        photo = tkinter.PhotoImage(file = &lt;span class=&quot;hljs-string&quot;&gt;&apos;./test.gif&apos;&lt;/span&gt;)\n        l.append(photo)\n        canvas.create_image(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, image=photo)\n\nroot = tkinter.Tk()\ntest = Test(root)\nroot.mainloop()\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;While using method 2, you can either make a global list as i did or use list inside the class. Both would work.&lt;/p&gt;\n&lt;p&gt;Some useful links:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://www.tutorialspoint.com/How-does-garbage-collection-work-in-Python&quot; rel=&quot;nofollow noreferrer&quot;&gt;About Garbage Collection 1&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://towardsdatascience.com/memory-management-and-garbage-collection-in-python-c1cb51d1612c&quot; rel=&quot;nofollow noreferrer&quot;&gt;About Garbage Collection 2 (&lt;em&gt;More useful&lt;/em&gt;)&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;Just add &lt;code&gt;global photo&lt;/code&gt; as the first line inside the function.&lt;/p&gt;\n    "]},"randomTags":[{"name":"generics","slug":"generics"},{"name":"password-protection","slug":"password-protection"},{"name":"el","slug":"el"},{"name":"footer","slug":"footer"},{"name":"python-packaging","slug":"python-packaging"},{"name":"oop","slug":"oop"},{"name":"plugins","slug":"plugins"},{"name":"css","slug":"css"},{"name":"dynamic-allocation","slug":"dynamic-allocation"},{"name":"spl","slug":"spl"},{"name":"node.js","slug":"node.js"},{"name":"constants","slug":"constants"},{"name":"local-variables","slug":"local-variables"},{"name":"event-loop","slug":"event-loop"},{"name":"interop","slug":"interop"},{"name":"mongodb-query","slug":"mongodb-query"},{"name":"scroll","slug":"scroll"},{"name":"password-hash","slug":"password-hash"},{"name":"c-strings","slug":"c-strings"},{"name":"multidimensional-array","slug":"multidimensional-array"}]},"__N_SSG":true}