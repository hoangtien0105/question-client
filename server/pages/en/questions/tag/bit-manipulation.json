{"pageProps":{"data":{"count":1,"rows":[{"id":508,"title":"How do I set, clear, and toggle a single bit?","slug":"how-do-i-set-clear-and-toggle-a-single-bit-1657388227052","postType":"QUESTION","createdAt":"2022-07-09T17:37:07.000Z","updatedAt":"2022-07-09T17:37:07.000Z","tags":[{"id":2528,"name":"bit-manipulation","slug":"bit-manipulation","createdAt":"2022-07-09T17:37:07.000Z","updatedAt":"2022-07-09T17:37:07.000Z","Questions_Tags":{"questionId":508,"tagId":2528}}]}]},"slug":"bit-manipulation","page":1,"answers":{"508":["\n&lt;h1&gt;Setting a bit&lt;/h1&gt;\n&lt;p&gt;Use the bitwise OR operator (&lt;code&gt;|&lt;/code&gt;) to set a bit.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number |= 1UL &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;That will set the &lt;code&gt;n&lt;/code&gt;th bit of &lt;code&gt;number&lt;/code&gt;. &lt;code&gt;n&lt;/code&gt; should be zero, if you want to set the &lt;code&gt;1&lt;/code&gt;st bit and so on upto &lt;code&gt;n-1&lt;/code&gt;, if you want to set the &lt;code&gt;n&lt;/code&gt;th bit.&lt;/p&gt;\n&lt;p&gt;Use &lt;code&gt;1ULL&lt;/code&gt; if &lt;code&gt;number&lt;/code&gt; is wider than &lt;code&gt;unsigned long&lt;/code&gt;; promotion of &lt;code&gt;1UL &amp;lt;&amp;lt; n&lt;/code&gt; doesn&apos;t happen until after evaluating &lt;code&gt;1UL &amp;lt;&amp;lt; n&lt;/code&gt; where it&apos;s undefined behaviour to shift by more than the width of a &lt;code&gt;long&lt;/code&gt;.  The same applies to all the rest of the examples.&lt;/p&gt;\n&lt;h1&gt;Clearing a bit&lt;/h1&gt;\n&lt;p&gt;Use the bitwise AND operator (&lt;code&gt;&amp;amp;&lt;/code&gt;) to clear a bit.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number &amp;amp;= ~(1UL &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n);\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;That will clear the &lt;code&gt;n&lt;/code&gt;th bit of &lt;code&gt;number&lt;/code&gt;. You must invert the bit string with the bitwise NOT operator (&lt;code&gt;~&lt;/code&gt;), then AND it.&lt;/p&gt;\n&lt;h1&gt;Toggling a bit&lt;/h1&gt;\n&lt;p&gt;The XOR operator (&lt;code&gt;^&lt;/code&gt;) can be used to toggle a bit.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number ^= 1UL &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;That will toggle the &lt;code&gt;n&lt;/code&gt;th bit of &lt;code&gt;number&lt;/code&gt;.&lt;/p&gt;\n&lt;h1&gt;Checking a bit&lt;/h1&gt;\n&lt;p&gt;You didn&apos;t ask for this, but I might as well add it.&lt;/p&gt;\n&lt;p&gt;To check a bit, shift the number n to the right, then bitwise AND it:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;bit&lt;/span&gt; = (number &amp;gt;&amp;gt; n) &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;U&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;That will put the value of the &lt;code&gt;n&lt;/code&gt;th bit of &lt;code&gt;number&lt;/code&gt; into the variable &lt;code&gt;bit&lt;/code&gt;.&lt;/p&gt;\n&lt;h1&gt;Changing the &lt;em&gt;n&lt;/em&gt;th bit to &lt;em&gt;x&lt;/em&gt;&lt;/h1&gt;\n&lt;p&gt;Setting the &lt;code&gt;n&lt;/code&gt;th bit to either &lt;code&gt;1&lt;/code&gt; or &lt;code&gt;0&lt;/code&gt; can be achieved with the following on a 2&apos;s complement C++ implementation:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; ^= (-x ^ &lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt;) &amp;amp; (1UL &amp;lt;&amp;lt; n);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Bit &lt;code&gt;n&lt;/code&gt; will be set if &lt;code&gt;x&lt;/code&gt; is &lt;code&gt;1&lt;/code&gt;, and cleared if &lt;code&gt;x&lt;/code&gt; is &lt;code&gt;0&lt;/code&gt;.  If &lt;code&gt;x&lt;/code&gt; has some other value, you get garbage.  &lt;code&gt;x = !!x&lt;/code&gt; will booleanize it to 0 or 1.&lt;/p&gt;\n&lt;p&gt;To make this independent of 2&apos;s complement negation behaviour (where &lt;code&gt;-1&lt;/code&gt; has all bits set, unlike on a 1&apos;s complement or sign/magnitude C++ implementation), use unsigned negation.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;number ^= (-(&lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt;)x ^ number) &amp;amp; (&lt;span class=&quot;hljs-number&quot;&gt;1UL&lt;/span&gt; &amp;lt;&amp;lt; n);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;or&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; newbit = !!x;    &lt;span class=&quot;hljs-comment&quot;&gt;// Also booleanize to force 0 or 1&lt;/span&gt;\nnumber ^= (-newbit ^ number) &amp;amp; (&lt;span class=&quot;hljs-number&quot;&gt;1UL&lt;/span&gt; &amp;lt;&amp;lt; n);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It&apos;s generally a good idea to use unsigned types for portable bit manipulation.&lt;/p&gt;\n&lt;p&gt;or&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number = (number &amp;amp; ~(1UL &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n)) | (x &amp;lt;&amp;lt; n&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;code&gt;(number &amp;amp; ~(1UL &amp;lt;&amp;lt; n))&lt;/code&gt; will clear the &lt;code&gt;n&lt;/code&gt;th bit and &lt;code&gt;(x &amp;lt;&amp;lt; n)&lt;/code&gt; will set the &lt;code&gt;n&lt;/code&gt;th bit to &lt;code&gt;x&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;It&apos;s also generally a good idea to not to copy/paste code in general and so many people use preprocessor macros (like &lt;a href=&quot;https://stackoverflow.com/a/263738/52074&quot;&gt;the community wiki answer further down&lt;/a&gt;) or some sort of encapsulation.&lt;/p&gt;\n    ","\n&lt;p&gt;Using the Standard C++ Library: &lt;a href=&quot;http://en.cppreference.com/w/cpp/utility/bitset&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;std::bitset&amp;lt;N&amp;gt;&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;Or the &lt;a href=&quot;http://en.wikipedia.org/wiki/Boost_%28C%2B%2B_libraries%29&quot; rel=&quot;noreferrer&quot;&gt;Boost&lt;/a&gt; version: &lt;a href=&quot;http://www.boost.org/doc/libs/release/libs/dynamic_bitset/dynamic_bitset.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;boost::dynamic_bitset&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;There is no need to roll your own:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;bitset&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n    std::bitset&amp;lt;5&amp;gt; x;\n\n    x[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    x[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;] = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Note x[0-4]  valid&lt;/span&gt;\n\n    std::cout &amp;lt;&amp;lt; x &amp;lt;&amp;lt; std::endl;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;[&lt;span class=&quot;hljs-meta&quot;&gt;Alpha:&lt;/span&gt;] &amp;gt; ./a.&lt;span class=&quot;hljs-keyword&quot;&gt;out&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;00010&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The Boost version allows a runtime sized bitset compared with a &lt;a href=&quot;https://en.wikipedia.org/wiki/C%2B%2B_Standard_Library&quot; rel=&quot;noreferrer&quot;&gt;standard library&lt;/a&gt; compile-time sized bitset.&lt;/p&gt;\n    ","\n&lt;p&gt;The other option is to use bit fields:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;bits&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; a:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; b:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; c:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;bits&lt;/span&gt; mybits;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;defines a 3-bit field (actually, it&apos;s three 1-bit felds). Bit operations now become a bit (haha) simpler:&lt;/p&gt;\n\n&lt;p&gt;To set or clear a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;mybits.b&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;mybits.c&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To toggle a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;mybits.a = !mybits.a;\nmybits.b = ~mybits.b;\nmybits.c ^= &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;  &lt;span class=&quot;hljs-comment&quot;&gt;/* all work */&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Checking a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;if (mybits.c)  &lt;span class=&quot;hljs-comment&quot;&gt;//if mybits.c is non zero the next line below will execute&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This only works with fixed-size bit fields. Otherwise you have to resort to the bit-twiddling techniques described in previous posts.&lt;/p&gt;\n    ","\n&lt;p&gt;I use macros defined in a header file to handle bit set and clear:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/* a=target variable, b=bit number to act upon 0-n */&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BIT_SET(a,b) ((a) |= (1ULL&amp;lt;&amp;lt;(b)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BIT_CLEAR(a,b) ((a) &amp;amp;= ~(1ULL&amp;lt;&amp;lt;(b)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BIT_FLIP(a,b) ((a) ^= (1ULL&amp;lt;&amp;lt;(b)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BIT_CHECK(a,b) (!!((a) &amp;amp; (1ULL&amp;lt;&amp;lt;(b))))        &lt;span class=&quot;hljs-comment&quot;&gt;// &apos;!!&apos; to make sure this returns 0 or 1&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BITMASK_SET(x, mask) ((x) |= (mask))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BITMASK_CLEAR(x, mask) ((x) &amp;amp;= (~(mask)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BITMASK_FLIP(x, mask) ((x) ^= (mask))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BITMASK_CHECK_ALL(x, mask) (!(~(x) &amp;amp; (mask)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BITMASK_CHECK_ANY(x, mask) ((x) &amp;amp; (mask))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;It is sometimes worth using an &lt;code&gt;enum&lt;/code&gt; to &lt;em&gt;name&lt;/em&gt; the bits:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;enum ThingFlags = {\n  ThingMask  = 0x0000,\n  ThingFlag0 = 1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;0,\n  ThingFlag1 = 1 &amp;lt;&amp;lt; 1,\n  ThingError = 1 &amp;lt;&amp;lt; 8,\n}\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then use the &lt;em&gt;names&lt;/em&gt; later on. I.e. write &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-erlang&quot;&gt;thingstate |= ThingFlag1;\nthingstate &amp;amp;= ~ThingFlag0;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(thing &amp;amp; ThingError)&lt;/span&gt; {...}\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;to set, clear and test. This way you hide the magic numbers from the rest of your code. &lt;/p&gt;\n\n&lt;p&gt;Other than that I endorse Jeremy&apos;s solution.&lt;/p&gt;\n    ","\n&lt;h2&gt;From &lt;a href=&quot;http://snippets.org/code/temp/snip-c.zip&quot; rel=&quot;noreferrer&quot;&gt;snip-c.zip&lt;/a&gt;&apos;s bitops.h:&lt;/h2&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-objectivec&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/*\n**  Bit set, clear, and test operations\n**\n**  public domain snippet by Bob Stout\n*/&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;enum&lt;/span&gt; {ERROR = &lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;} LOGICAL;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BOOL(x) (!(!(x)))&lt;/span&gt;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitSet(arg,posn) ((arg) | (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitClr(arg,posn) ((arg) &amp;amp; ~(1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitTst(arg,posn) BOOL((arg) &amp;amp; (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitFlp(arg,posn) ((arg) ^ (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;OK, let&apos;s analyze things...&lt;/p&gt;\n\n&lt;p&gt;The common expression that you seem to be having problems with in all of these is &quot;(1L &amp;lt;&amp;lt; (posn))&quot;. All this does is create a mask with a single bit on\nand which will work with any integer type. The &quot;posn&quot; argument specifies the\nposition where you want the bit. If posn==0, then this expression will\nevaluate to:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;binary.&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If posn==8, it will evaluate to:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;binary.&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;In other words, it simply creates a field of 0&apos;s with a 1 at the specified\nposition. The only tricky part is in the BitClr() macro where we need to set\na single 0 bit in a field of 1&apos;s. This is accomplished by using the 1&apos;s\ncomplement of the same expression as denoted by the tilde (~) operator.&lt;/p&gt;\n\n&lt;p&gt;Once the mask is created it&apos;s applied to the argument just as you suggest,\nby use of the bitwise and (&amp;amp;), or (|), and xor (^) operators. Since the mask\nis of type long, the macros will work just as well on char&apos;s, short&apos;s, int&apos;s,\nor long&apos;s.&lt;/p&gt;\n\n&lt;p&gt;The bottom line is that this is a general solution to an entire class of\nproblems. It is, of course, possible and even appropriate to rewrite the\nequivalent of any of these macros with explicit mask values every time you\nneed one, but why do it? Remember, the macro substitution occurs in the\npreprocessor and so the generated code will reflect the fact that the values\nare considered constant by the compiler - i.e. it&apos;s just as efficient to use\nthe generalized macros as to &quot;reinvent the wheel&quot; every time you need to do\nbit manipulation. &lt;/p&gt;\n\n&lt;p&gt;Unconvinced? Here&apos;s some test code - I used Watcom C with full optimization\nand without using _cdecl so the resulting disassembly would be as clean as\npossible:&lt;/p&gt;\n\n&lt;p&gt;----[ TEST.C ]----------------------------------------------------------------&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BOOL(x) (!(!(x)))&lt;/span&gt;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitSet(arg,posn) ((arg) | (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitClr(arg,posn) ((arg) &amp;amp; ~(1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitTst(arg,posn) BOOL((arg) &amp;amp; (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; BitFlp(arg,posn) ((arg) ^ (1L &amp;lt;&amp;lt; (posn)))&lt;/span&gt;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;bitmanip&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; word&lt;/span&gt;)&lt;/span&gt;\n{\n      word = BitSet(word, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n      word = BitSet(word, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;);\n      word = BitClr(word, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;);\n      word = BitFlp(word, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; word;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;----[ TEST.OUT (disassembled) ]-----------------------------------------------&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;Module:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;C:\\BINK\\tst.c&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;Group:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;DGROUP&apos;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;CONST,CONST2,_DATA,_BSS&lt;/span&gt;\n\n&lt;span class=&quot;hljs-attr&quot;&gt;Segment:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;_TEXT&lt;/span&gt;  &lt;span class=&quot;hljs-string&quot;&gt;BYTE&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;00000008&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bytes&lt;/span&gt;  \n &lt;span class=&quot;hljs-number&quot;&gt;0000  &lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;0c&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;84&lt;/span&gt;             &lt;span class=&quot;hljs-string&quot;&gt;bitmanip_&lt;/span&gt;       &lt;span class=&quot;hljs-string&quot;&gt;or&lt;/span&gt;      &lt;span class=&quot;hljs-string&quot;&gt;al,84H&lt;/span&gt;    &lt;span class=&quot;hljs-string&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bits&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;0002  &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;80&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;f4&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;02&lt;/span&gt;                          &lt;span class=&quot;hljs-string&quot;&gt;xor&lt;/span&gt;     &lt;span class=&quot;hljs-string&quot;&gt;ah,02H&lt;/span&gt;    &lt;span class=&quot;hljs-string&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;flip&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;EAX&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(bit&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;AH)&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;0005  &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;f7&lt;/span&gt;                             &lt;span class=&quot;hljs-string&quot;&gt;and&lt;/span&gt;     &lt;span class=&quot;hljs-string&quot;&gt;al,0f7H&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;0007  &lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;c3&lt;/span&gt;                                &lt;span class=&quot;hljs-string&quot;&gt;ret&lt;/span&gt;     \n\n&lt;span class=&quot;hljs-literal&quot;&gt;No&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;disassembly&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;errors&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;----[ finis ]----------------------------------------------------------------- &lt;/p&gt;\n    ","\n&lt;p&gt;For the beginner I would like to explain a bit more with an example:&lt;/p&gt;\n\n&lt;p&gt;Example:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0x55&lt;/span&gt;;\nbitnum : &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;rd.\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The &lt;code&gt;&amp;amp;&lt;/code&gt; operator is used check the bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&amp;amp;&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;___________&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(mean&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;0:&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;).&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;It&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;will&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;work&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;fine&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;third&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(then&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;answer&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;will&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;be&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Toggle or Flip:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;^&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;___________&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0101 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1101&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(Flip&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;third&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;without&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;affecting&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;other&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bits)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;code&gt;|&lt;/code&gt; operator: set the bit&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0101&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;|&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;___________&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0101 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1101&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(set&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;third&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;without&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;affecting&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;other&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bits)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;As this is tagged &quot;embedded&quot; I&apos;ll assume you&apos;re using a microcontroller. All of the above suggestions are valid &amp;amp; work (read-modify-write, unions, structs, etc.).&lt;/p&gt;\n\n&lt;p&gt;However, during a bout of oscilloscope-based debugging I was amazed to find that these methods have a considerable overhead in CPU cycles compared to writing a value directly to the micro&apos;s PORTnSET / PORTnCLEAR registers which makes a real difference where there are tight loops / high-frequency ISR&apos;s toggling pins.&lt;/p&gt;\n\n&lt;p&gt;For those unfamiliar: In my example, the micro has a general pin-state register PORTn which reflects the output pins, so doing PORTn |= BIT_TO_SET results in a read-modify-write to that register. However, the PORTnSET / PORTnCLEAR registers take a &apos;1&apos; to mean &quot;please make this bit 1&quot; (SET) or &quot;please make this bit zero&quot; (CLEAR) and a &apos;0&apos; to mean &quot;leave the pin alone&quot;. so, you end up with two port addresses depending whether you&apos;re setting or clearing the bit (not always convenient) but a &lt;em&gt;much&lt;/em&gt; faster reaction and smaller assembled code.&lt;/p&gt;\n    ","\n&lt;p&gt;Here&apos;s my favorite bit arithmetic macro, which works for any type of unsigned integer array from &lt;code&gt;unsigned char&lt;/code&gt; up to &lt;code&gt;size_t&lt;/code&gt; (which is the biggest type that should be efficient to work with):&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;BITOP&lt;/span&gt;(a,b,op) \\\n ((a)&lt;span class=&quot;hljs-selector-attr&quot;&gt;[(size_t)(b)/(8*sizeof *(a))]&lt;/span&gt; op ((size_t)&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&amp;lt;&amp;lt;((size_t)(b)%(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;*sizeof *(a)))))\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To set a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;BITOP&lt;/span&gt;(array, bit, |=);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To clear a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;BITOP&lt;/span&gt;(array, bit, &amp;amp;=~);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To toggle a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;BITOP&lt;/span&gt;(array, bit, ^=);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To test a bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-vhdl&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (BITOP(&lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt;, &amp;amp;)) ...\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;etc.&lt;/p&gt;\n    ","\n&lt;p&gt;The bitfield approach has other advantages in the embedded arena. You can define a struct that maps directly onto the bits in a particular hardware register.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HwRegister&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; errorFlag:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;  &lt;span class=&quot;hljs-comment&quot;&gt;// one-bit flag field&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; Mode:&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;       &lt;span class=&quot;hljs-comment&quot;&gt;// three-bit mode field&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; StatusCode:&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;  &lt;span class=&quot;hljs-comment&quot;&gt;// four-bit status code&lt;/span&gt;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HwRegister&lt;/span&gt; CR3342_AReg;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You need to be aware of the bit packing order - I think it&apos;s MSB first, but this may be implementation-dependent. Also, verify how your compiler handlers fields crossing byte boundaries.&lt;/p&gt;\n\n&lt;p&gt;You can then read, write, test the individual values as before.&lt;/p&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;&lt;strong&gt;Let suppose few things first&lt;/strong&gt;&lt;br&gt;\n  &lt;code&gt;num = 55&lt;/code&gt; Integer to perform bitwise operations (set, get, clear, toggle).&lt;br&gt;\n  &lt;code&gt;n = 4&lt;/code&gt; 0 based bit position to perform bitwise operations.   &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;h1&gt;How to get a bit?&lt;/h1&gt;\n\n&lt;ol&gt;\n&lt;li&gt;To get the &lt;code&gt;nth&lt;/code&gt; bit of num right shift &lt;code&gt;num&lt;/code&gt;, &lt;code&gt;n&lt;/code&gt; times. Then perform bitwise AND &lt;code&gt;&amp;amp;&lt;/code&gt; with 1.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;bit&lt;/span&gt; = (num &amp;gt;&amp;gt; n) &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-comment&quot;&gt;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;How it works?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;       &lt;span class=&quot;hljs-number&quot;&gt;0011 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(55&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;         &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(right&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;shift&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;times)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n       &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0011&lt;/span&gt;\n     &lt;span class=&quot;hljs-string&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(final&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;result)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h1&gt;How to set a bit?&lt;/h1&gt;\n\n&lt;ol&gt;\n&lt;li&gt;To set a particular bit of number. Left shift 1 &lt;code&gt;n&lt;/code&gt; times. Then perform bitwise OR &lt;code&gt;|&lt;/code&gt; operation with &lt;code&gt;num&lt;/code&gt;.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;num |= (1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n);    // Equivalent to; num = (1 &amp;lt;&amp;lt; n&lt;/span&gt;) | num;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;How it works?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;       &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;         &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(left&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;shift&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;times)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n       &lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000&lt;/span&gt;\n     &lt;span class=&quot;hljs-string&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0011 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(55&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(final&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;result)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h1&gt;How to clear a bit?&lt;/h1&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Left shift 1, &lt;code&gt;n&lt;/code&gt; times i.e. &lt;code&gt;1 &amp;lt;&amp;lt; n&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Perform bitwise complement with the above result. So that the nth bit becomes unset and rest of bit becomes set i.e. &lt;code&gt;~ (1 &amp;lt;&amp;lt; n)&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Finally, perform bitwise AND &lt;code&gt;&amp;amp;&lt;/code&gt; operation with the above result and &lt;code&gt;num&lt;/code&gt;. The above three steps together can be written as &lt;code&gt;num &amp;amp; (~ (1 &amp;lt;&amp;lt; n))&lt;/code&gt;;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/mf8hm.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/mf8hm.png&quot; alt=&quot;Steps to clear a bit&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;num &amp;amp;= (~(1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n));    // Equivalent to; num = num &amp;amp; (~(1 &amp;lt;&amp;lt; n&lt;/span&gt;));\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;How it works?&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;       &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;         &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(left&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;shift&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;times)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n     &lt;span class=&quot;hljs-string&quot;&gt;~&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n       &lt;span class=&quot;hljs-number&quot;&gt;1110 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1111&lt;/span&gt;\n     &lt;span class=&quot;hljs-string&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0011 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(55&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0010 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(final&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;result)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h1&gt;How to toggle a bit?&lt;/h1&gt;\n\n&lt;p&gt;To toggle a bit we use bitwise XOR &lt;code&gt;^&lt;/code&gt; operator. Bitwise XOR operator evaluates to 1 if corresponding bit of both operands are different, otherwise evaluates to 0.  &lt;/p&gt;\n\n&lt;p&gt;Which means to toggle a bit, we need to perform XOR operation with the bit you want to toggle and 1. &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;num ^= (1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n);    // Equivalent to; num = num ^ (1 &amp;lt;&amp;lt; n&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;How it works?&lt;/strong&gt; &lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;If the bit to toggle is 0 then, &lt;code&gt;0 ^ 1 =&amp;gt; 1&lt;/code&gt;.  &lt;/li&gt;\n&lt;li&gt;If the bit to toggle is 1 then, &lt;code&gt;1 ^ 1 =&amp;gt; 0&lt;/code&gt;.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;       &lt;span class=&quot;hljs-number&quot;&gt;0000 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0001&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(1&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;         &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(left&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;shift&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;times)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n       &lt;span class=&quot;hljs-number&quot;&gt;0001 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0000&lt;/span&gt;\n     &lt;span class=&quot;hljs-string&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0011 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(55&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;decimal)&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;-----------------&lt;/span&gt;\n    &lt;span class=&quot;hljs-string&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0010 &lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0111&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(final&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;result)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Recommended reading - &lt;a href=&quot;https://codeforwin.org/2016/01/bitwise-operator-programming-exercises-and-solutions-in-c.html&quot; rel=&quot;noreferrer&quot;&gt;Bitwise operator exercises&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;h2&gt;Check a bit at an arbitrary location in a variable of arbitrary type:&lt;/h2&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-lisp&quot;&gt;#define bit_test(&lt;span class=&quot;hljs-name&quot;&gt;x&lt;/span&gt;, y)  ( ( ((&lt;span class=&quot;hljs-name&quot;&gt;const&lt;/span&gt; char*)&amp;amp;(&lt;span class=&quot;hljs-name&quot;&gt;x&lt;/span&gt;))[(&lt;span class=&quot;hljs-name&quot;&gt;y&lt;/span&gt;)&amp;gt;&amp;gt;3] &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;x80 &amp;gt;&amp;gt; ((&lt;span class=&quot;hljs-name&quot;&gt;y&lt;/span&gt;)&amp;amp;0x07)) &amp;gt;&amp;gt; (&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;-((&lt;span class=&quot;hljs-name&quot;&gt;y&lt;/span&gt;)&amp;amp;0x07) ) )\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Sample usage:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;)&lt;/span&gt;\n&lt;/span&gt;{\n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; arr[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;] = { &lt;span class=&quot;hljs-number&quot;&gt;0x01&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x23&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x45&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x67&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x89&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0xAB&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0xCD&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0xEF&lt;/span&gt; };\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; ix = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; ix &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;64&lt;/span&gt;; ++ix)\n        &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;bit %d is %d\\n&quot;&lt;/span&gt;, ix, &lt;span class=&quot;hljs-built_in&quot;&gt;bit_test&lt;/span&gt;(arr, ix));\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Notes:&lt;/strong&gt;\nThis is designed to be fast (given its flexibility) and non-branchy.  It results in efficient SPARC machine code when compiled Sun Studio 8; I&apos;ve also tested it using MSVC++ 2008 on amd64.  It&apos;s possible to make similar macros for setting and clearing bits.  The key difference of this solution compared with many others here is that it works for any location in pretty much any type of variable.&lt;/p&gt;\n    ","\n&lt;p&gt;More general, for arbitrary sized bitmaps:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-lisp&quot;&gt;#define BITS &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;\n#define BIT_SET(  &lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;, n) (&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;[(&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)/BITS] |=  (&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;x80&amp;gt;&amp;gt;((&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)%BITS)))\n#define BIT_CLEAR(&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;, n) (&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;[(&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)/BITS] &lt;span class=&quot;hljs-symbol&quot;&gt;&amp;amp;=&lt;/span&gt; ~(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;x80&amp;gt;&amp;gt;((&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)%BITS)))\n#define BIT_ISSET(&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;, n) (&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;[(&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)/BITS] &amp;amp;   (&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;x80&amp;gt;&amp;gt;((&lt;span class=&quot;hljs-name&quot;&gt;n&lt;/span&gt;)%BITS)))\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This program is to change any data bit from 0 to 1 or 1 to 0:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-haskell&quot;&gt;{\n    unsigned int &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt; = 0x000000F0;&lt;/span&gt;\n    int bitpos = &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;\n    int bitvalue = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    unsigned int bit = &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;;&lt;/span&gt;\n    bit = (bit&amp;gt;&amp;gt;bitpos)&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0x00000001&lt;/span&gt;;\n    int invbitvalue = &lt;span class=&quot;hljs-number&quot;&gt;0x00000001&lt;/span&gt;&amp;amp;(~bitvalue);\n    printf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;%x\\n&quot;&lt;/span&gt;,bit);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bitvalue == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bit == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n            printf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;%x\\n&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;);&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        {\n             &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt; = (&lt;span class=&quot;hljs-title&quot;&gt;data&lt;/span&gt;^(&lt;span class=&quot;hljs-title&quot;&gt;invbitvalue&lt;/span&gt;&amp;lt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;bitpos&lt;/span&gt;));&lt;/span&gt;\n             printf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;%x\\n&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;);&lt;/span&gt;\n        }\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n    {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bit == &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;)\n            printf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;elseif %x\\n&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;);&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        {\n            &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt; = (&lt;span class=&quot;hljs-title&quot;&gt;data&lt;/span&gt;|(&lt;span class=&quot;hljs-title&quot;&gt;bitvalue&lt;/span&gt;&amp;lt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;bitpos&lt;/span&gt;));&lt;/span&gt;\n            printf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;else %x\\n&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;);&lt;/span&gt;\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you&apos;re doing a lot of bit twiddling you might want to use masks which will make the whole thing quicker. The following functions are very fast and are still flexible (they allow bit twiddling in bit maps of any size).&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;const unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; TQuickByteMask[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;] =\n{\n   &lt;span class=&quot;hljs-number&quot;&gt;0x01&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x02&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x04&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x08&lt;/span&gt;,\n   &lt;span class=&quot;hljs-number&quot;&gt;0x10&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x20&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x40&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0x80&lt;/span&gt;,\n};\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Set bit in any sized bit mask.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;    none\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;     bit    - Bit number.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;     bitmap - Pointer to bitmap.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TSetBit&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; bit, unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; n, x;\n\n    x = bit / &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Index to byte.&lt;/span&gt;\n    n = bit % &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Specific bit in byte.&lt;/span&gt;\n\n    bitmap[x] |= TQuickByteMask[n];        &lt;span class=&quot;hljs-comment&quot;&gt;// Set bit.&lt;/span&gt;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Reset bit in any sized mask.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;  None\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bit    - Bit number.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bitmap - Pointer to bitmap.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TResetBit&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; bit, unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; n, x;\n\n    x = bit / &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Index to byte.&lt;/span&gt;\n    n = bit % &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Specific bit in byte.&lt;/span&gt;\n\n    bitmap[x] &amp;amp;= (~TQuickByteMask[n]);    &lt;span class=&quot;hljs-comment&quot;&gt;// Reset bit.&lt;/span&gt;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Toggle bit in any sized bit mask.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;   none\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bit    - Bit number.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bitmap - Pointer to bitmap.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TToggleBit&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; bit, unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; n, x;\n\n    x = bit / &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Index to byte.&lt;/span&gt;\n    n = bit % &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;        &lt;span class=&quot;hljs-comment&quot;&gt;// Specific bit in byte.&lt;/span&gt;\n\n    bitmap[x] ^= TQuickByteMask[n];        &lt;span class=&quot;hljs-comment&quot;&gt;// Toggle bit.&lt;/span&gt;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Checks specified bit.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;  1 if bit set else 0.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bit    - Bit number.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bitmap - Pointer to bitmap.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TIsBitSet&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; bit, const unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; n, x;\n\n    x = bit / &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;    &lt;span class=&quot;hljs-comment&quot;&gt;// Index to byte.&lt;/span&gt;\n    n = bit % &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;    &lt;span class=&quot;hljs-comment&quot;&gt;// Specific bit in byte.&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Test bit (logigal AND).&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bitmap[x] &amp;amp; TQuickByteMask[n])\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Checks specified bit.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;  1 if bit reset else 0.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bit    - Bit number.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;   bitmap - Pointer to bitmap.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TIsBitReset&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-type&quot;&gt;short&lt;/span&gt; bit, const unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; TIsBitSet(bit, bitmap) ^ &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/** Count number of bits set in a bitmap.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;   Number of bits set.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;    bitmap - Pointer to bitmap.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;    size   - Bitmap size (in bits).\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@note&lt;/span&gt;    Not very efficient in terms of execution speed. If you are doing\n *        some computationally intense stuff you may need a more complex\n *        implementation which would be faster (especially for big bitmaps).\n *        See (http://graphics.stanford.edu/~seander/bithacks.html).\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;TCountBits&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( const unsigned &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; *bitmap, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; size)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; i, count = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;size; i++)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (TIsBitSet(i, bitmap))\n            count++;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; count;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note, to set bit &apos;n&apos; in a 16 bit integer you do the following:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;TSetBit&lt;/span&gt;( n, &amp;amp;my_int);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It&apos;s up to you to ensure that the bit number is within the range of the bit map that you pass. Note that for little endian processors that bytes, words, dwords, qwords, etc., map correctly to each other in memory (main reason that little endian processors are &apos;better&apos; than big-endian processors, ah, I feel a flame war coming on...).&lt;/p&gt;\n    ","\n&lt;p&gt;Use this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-dart&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; ToggleNthBit ( unsigned char n, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; )\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; &amp;amp; (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n))\n        &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; &amp;amp;= ~(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; |= (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Expanding on the &lt;code&gt;bitset&lt;/code&gt; answer:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;bitset&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{\n  &lt;span class=&quot;hljs-function&quot;&gt;bitset&amp;lt;8&amp;gt; &lt;span class=&quot;hljs-title&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(std::string(&lt;span class=&quot;hljs-string&quot;&gt;&quot;10010011&quot;&lt;/span&gt;);\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Set Bit&lt;/span&gt;\n  byte.set(&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// 10010111&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Clear Bit&lt;/span&gt;\n  byte.reset(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// 10010101&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Toggle Bit&lt;/span&gt;\n  byte.flip(&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// 00010101&lt;/span&gt;\n\n  cout &amp;lt;&amp;lt; byte &amp;lt;&amp;lt; endl;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you want to perform this all operation with C programming in the &lt;strong&gt;Linux kernel&lt;/strong&gt; then I suggest to use standard APIs of the Linux kernel.&lt;/p&gt;\n\n&lt;p&gt;See &lt;a href=&quot;https://www.kernel.org/doc/htmldocs/kernel-api/ch02s03.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://www.kernel.org/doc/htmldocs/kernel-api/ch02s03.html&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-vhdl&quot;&gt;set_bit  Atomically set a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; memory\nclear_bit  Clears a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; memory\nchange_bit  Toggle a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; memory\ntest_and_set_bit  Set a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; its old value\ntest_and_clear_bit  Clear a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; its old value\ntest_and_change_bit  Change a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; its old value\ntest_bit  Determine whether a &lt;span class=&quot;hljs-built_in&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; set\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note: Here the whole operation happens in a single step. So these all are  guaranteed to be &lt;strong&gt;atomic&lt;/strong&gt; even on SMP computers and are useful\nto keep coherence across processors.&lt;/p&gt;\n    ","\n&lt;p&gt;Visual C 2010, and perhaps many other compilers, have direct support for boolean operations built in. A bit has two possible values, just like a boolean, so we can use booleans instead - even if they take up more space than a single bit in memory in this representation. This works, even the &lt;code&gt;sizeof()&lt;/code&gt; operator works properly. &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt;    IsGph[&lt;span class=&quot;hljs-number&quot;&gt;256&lt;/span&gt;], IsNotGph[&lt;span class=&quot;hljs-number&quot;&gt;256&lt;/span&gt;];\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//  Initialize boolean array to detect printable characters&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;&lt;span class=&quot;hljs-built_in&quot;&gt;sizeof&lt;/span&gt;(IsGph); i++)  {\n    IsGph[i] = &lt;span class=&quot;hljs-built_in&quot;&gt;isgraph&lt;/span&gt;((&lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;)i);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So, to your question, &lt;code&gt;IsGph[i] =1&lt;/code&gt;, or &lt;code&gt;IsGph[i] =0&lt;/code&gt; make setting and clearing bools easy.&lt;/p&gt;\n\n&lt;p&gt;To find unprintable characters:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//  Initialize boolean array to detect UN-printable characters, &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//  then call function to toggle required bits true, while initializing a 2nd&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//  boolean array as the complement of the 1st.&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;sizeof&lt;/span&gt;(IsGph); i++)  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(IsGph[i])    {\n         IsNotGph[i] = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    }   &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;   {\n         IsNotGph[i] = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note there is nothing &quot;special&quot; about this code. It treats a bit like an integer - which technically, it is. A 1 bit integer that can hold 2 values, and 2 values only.&lt;/p&gt;\n\n&lt;p&gt;I once used this approach to find duplicate loan records, where loan_number was the ISAM key, using the 6-digit loan number as an index into the bit array. Savagely fast, and after 8 months, proved that the mainframe system we were getting the data from was in fact malfunctioning. The simplicity of bit arrays makes confidence in their correctness very high - vs a searching approach for example.&lt;/p&gt;\n    ","\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-dart&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; set_nth_bit(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n){    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n}\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; clear_nth_bit(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n){    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; &amp;amp; ~( &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n));\n}\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; toggle_nth_bit(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n){    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; ^ (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n}\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; check_nth_bit(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n){    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;num&lt;/span&gt; &amp;amp; (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Here are some macros I use:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-lisp&quot;&gt;SET_FLAG(&lt;span class=&quot;hljs-name&quot;&gt;Status&lt;/span&gt;, Flag)            ((&lt;span class=&quot;hljs-name&quot;&gt;Status&lt;/span&gt;) |= (&lt;span class=&quot;hljs-name&quot;&gt;Flag&lt;/span&gt;))\nCLEAR_FLAG(&lt;span class=&quot;hljs-name&quot;&gt;Status&lt;/span&gt;, Flag)          ((&lt;span class=&quot;hljs-name&quot;&gt;Status&lt;/span&gt;) &lt;span class=&quot;hljs-symbol&quot;&gt;&amp;amp;=&lt;/span&gt; ~(&lt;span class=&quot;hljs-name&quot;&gt;Flag&lt;/span&gt;))\nINVALID_FLAGS(&lt;span class=&quot;hljs-name&quot;&gt;ulFlags&lt;/span&gt;, ulAllowed) ((&lt;span class=&quot;hljs-name&quot;&gt;ulFlags&lt;/span&gt;) &amp;amp; ~(&lt;span class=&quot;hljs-name&quot;&gt;ulAllowed&lt;/span&gt;))\nTEST_FLAGS(&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;,ulMask, ulBit)       (((&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;)&amp;amp;(&lt;span class=&quot;hljs-name&quot;&gt;ulMask&lt;/span&gt;)) == (&lt;span class=&quot;hljs-name&quot;&gt;ulBit&lt;/span&gt;))\nIS_FLAG_SET(&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;,ulMask)             TEST_FLAGS(&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;,ulMask,ulMask)\nIS_FLAG_CLEAR(&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;,ulMask)           TEST_FLAGS(&lt;span class=&quot;hljs-name&quot;&gt;t&lt;/span&gt;,ulMask,&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;How do you set, clear, and toggle a single bit?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;To address a common coding pitfall when attempting to form the mask:&lt;br&gt;\n&lt;strong&gt;&lt;code&gt;1&lt;/code&gt; is not always wide enough&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;What problems happen when &lt;code&gt;number&lt;/code&gt; is a wider type than &lt;code&gt;1&lt;/code&gt;?&lt;br&gt;\n&lt;code&gt;x&lt;/code&gt; may be too great for the shift &lt;code&gt;1 &amp;lt;&amp;lt; x&lt;/code&gt; leading to &lt;em&gt;undefined behavior&lt;/em&gt; (UB).  Even if &lt;code&gt;x&lt;/code&gt; is not too great, &lt;code&gt;~&lt;/code&gt; may not flip enough most-significant-bits.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// assume 32 bit int/unsigned&lt;/span&gt;\nunsigned long long &lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;foo&lt;/span&gt;();\n\nunsigned x = &lt;span class=&quot;hljs-number&quot;&gt;40&lt;/span&gt;; \n&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; |= (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; x);  &lt;span class=&quot;hljs-comment&quot;&gt;// UB&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; ^= (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; x);  &lt;span class=&quot;hljs-comment&quot;&gt;// UB&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; &amp;amp;= ~(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; x); &lt;span class=&quot;hljs-comment&quot;&gt;// UB&lt;/span&gt;\n\nx = &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;;\n&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; &amp;amp;= ~(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; x); &lt;span class=&quot;hljs-comment&quot;&gt;// Wrong mask, not wide enough&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;&lt;strong&gt;To insure 1 is wide enough:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Code could use &lt;code&gt;1ull&lt;/code&gt; or pedantically &lt;code&gt;(uintmax_t)1&lt;/code&gt; and let the compiler optimize.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number |= (1ull &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;x);\nnumber |= ((uintmax_t)1 &amp;lt;&amp;lt; x&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or cast - which makes for coding/review/maintenance issues keeping the cast correct and up-to-date.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number |= (type_of_number)1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;x;\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or gently promote the &lt;code&gt;1&lt;/code&gt; by forcing a math operation that is as least as wide as the type of &lt;code&gt;number&lt;/code&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt; |= (&lt;span class=&quot;hljs-built_in&quot;&gt;number&lt;/span&gt;*&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) &amp;lt;&amp;lt; x;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;As with most bit manipulations, best to work with &lt;em&gt;unsigned&lt;/em&gt; types rather than &lt;em&gt;signed&lt;/em&gt; ones&lt;/p&gt;\n    ","\n&lt;p&gt;This program is based out of @Jeremy&apos;s above solution. If someone wish to quickly play around.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;BitwiseOperations&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;String args[]&lt;/span&gt;)&lt;/span&gt; {\n\n        setABit(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// set the 4th bit, 0000 -&amp;gt; 1000 [8]&lt;/span&gt;\n        clearABit(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// clear the 5th bit, 10000 -&amp;gt; 00000 [0]&lt;/span&gt;\n        toggleABit(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// toggle the 4th bit, 1000 -&amp;gt; 0000 [0]&lt;/span&gt;\n        checkABit(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// check the 4th bit 1000 -&amp;gt; true &lt;/span&gt;\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;setABit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; input, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n&lt;/span&gt;)&lt;/span&gt; {\n        input = input | ( &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;);\n        System.&lt;span class=&quot;hljs-keyword&quot;&gt;out&lt;/span&gt;.println(input);\n    }\n\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;clearABit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; input, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n&lt;/span&gt;)&lt;/span&gt; {\n        input = input &amp;amp; ~(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;);\n        System.&lt;span class=&quot;hljs-keyword&quot;&gt;out&lt;/span&gt;.println(input);\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;toggleABit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; input, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n&lt;/span&gt;)&lt;/span&gt; {\n        input = input ^ (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;);\n        System.&lt;span class=&quot;hljs-keyword&quot;&gt;out&lt;/span&gt;.println(input);\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;checkABit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; input, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n&lt;/span&gt;)&lt;/span&gt; {\n        boolean isSet = ((input &amp;gt;&amp;gt; n&lt;span class=&quot;hljs-number&quot;&gt;-1&lt;/span&gt;) &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) == &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; \n        System.&lt;span class=&quot;hljs-keyword&quot;&gt;out&lt;/span&gt;.println(isSet);\n    }\n}\n\n\nOutput :\n&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;A templated version (put in a header file) with support for changing multiple bits (works on AVR microcontrollers btw):&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; bit {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; T1 &lt;span class=&quot;hljs-title&quot;&gt;bitmask&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(T2 bit)&lt;/span&gt; \n  &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (T1)&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; bit;}\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T3, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; T1 &lt;span class=&quot;hljs-title&quot;&gt;bitmask&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(T3 bit, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ((T1)&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; bit) | &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Set these bits (others retain their state) */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{variable |= &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Set only these bits (others will be cleared) */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;setOnly&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{variable = &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Clear these bits (others retain their state) */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;clear&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{variable &amp;amp;= ~&lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Flip these bits (others retain their state) */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;flip&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{variable ^= &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Check if any of these bits are set */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;isAnySet&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; variable &amp;amp; &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...);}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Check if all these bits are set */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;isSet&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ((variable &amp;amp; &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...)) == &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...));}\n  &lt;span class=&quot;hljs-comment&quot;&gt;/** Check if all these bits are not set */&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;template&lt;/span&gt; &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; T1, &lt;span class=&quot;hljs-keyword&quot;&gt;typename&lt;/span&gt; ...T2&amp;gt;\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;isNotSet&lt;/span&gt; &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; T1 &amp;amp;variable, T2 ...bits)&lt;/span&gt; \n  &lt;/span&gt;{&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ((variable &amp;amp; &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...)) != &lt;span class=&quot;hljs-built_in&quot;&gt;bitmask&lt;/span&gt;&amp;lt;T1&amp;gt;(bits...));}\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Example of use:&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;bitset&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// for console output of binary values&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// and include the code above of course&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{\n  &lt;span class=&quot;hljs-type&quot;&gt;uint8_t&lt;/span&gt; v = &lt;span class=&quot;hljs-number&quot;&gt;0b1111&apos;1100&lt;/span&gt;;\n  bit::&lt;span class=&quot;hljs-built_in&quot;&gt;set&lt;/span&gt;(v, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n  cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;bitset&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;gt;(v) &amp;lt;&amp;lt; endl;\n\n  bit::&lt;span class=&quot;hljs-built_in&quot;&gt;clear&lt;/span&gt;(v, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n  cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;bitset&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;gt;(v) &amp;lt;&amp;lt; endl;\n\n  bit::&lt;span class=&quot;hljs-built_in&quot;&gt;flip&lt;/span&gt;(v, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n  cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;bitset&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;gt;(v) &amp;lt;&amp;lt; endl;\n\n  bit::&lt;span class=&quot;hljs-built_in&quot;&gt;clear&lt;/span&gt;(v, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;);\n  cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;bitset&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;gt;(v) &amp;lt;&amp;lt; endl;\n\n  bit::&lt;span class=&quot;hljs-built_in&quot;&gt;flip&lt;/span&gt;(v, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;);\n  cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;bitset&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;gt;(v) &amp;lt;&amp;lt; endl;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;BTW: It turns out that constexpr and inline is not used if not sending the optimizer argument (e.g.: -O3) to the compiler. Feel free to try the code at &lt;a href=&quot;https://godbolt.org/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://godbolt.org/&lt;/a&gt; and look at the ASM output.&lt;/p&gt;\n    ","\n&lt;p&gt;Here is a routine in C to perform the basic bitwise operations:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;define&lt;/span&gt; INT_BIT (unsigned int) (sizeof(unsigned int) * 8U) &lt;span class=&quot;hljs-comment&quot;&gt;//number of bits in unsigned int&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt;)&lt;/span&gt;\n&lt;/span&gt;{\n    \n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; k = &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;//k is the bit position; here it is the 5th bit from the LSb (0th bit)&lt;/span&gt;\n    \n    &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; regA = &lt;span class=&quot;hljs-number&quot;&gt;0x00007C7C&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;//we perform bitwise operations on regA&lt;/span&gt;\n    \n    regA |= (&lt;span class=&quot;hljs-number&quot;&gt;1U&lt;/span&gt; &amp;lt;&amp;lt; k);    &lt;span class=&quot;hljs-comment&quot;&gt;//Set kth bit&lt;/span&gt;\n    \n    regA &amp;amp;= ~(&lt;span class=&quot;hljs-number&quot;&gt;1U&lt;/span&gt; &amp;lt;&amp;lt; k);   &lt;span class=&quot;hljs-comment&quot;&gt;//Clear kth bit&lt;/span&gt;\n    \n    regA ^= (&lt;span class=&quot;hljs-number&quot;&gt;1U&lt;/span&gt; &amp;lt;&amp;lt; k);    &lt;span class=&quot;hljs-comment&quot;&gt;//Toggle kth bit&lt;/span&gt;\n    \n    regA = (regA &amp;lt;&amp;lt; k) | regA &amp;gt;&amp;gt; (INT_BIT - k); &lt;span class=&quot;hljs-comment&quot;&gt;//Rotate left by k bits&lt;/span&gt;\n    \n    regA = (regA &amp;gt;&amp;gt; k) | regA &amp;lt;&amp;lt; (INT_BIT - k); &lt;span class=&quot;hljs-comment&quot;&gt;//Rotate right by k bits&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;   \n}\n\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h1&gt;Setting the nth bit to x (bit value) without using -1&lt;/h1&gt;\n&lt;p&gt;Sometimes when you are not sure what -1 or the like will result in, you may wish to set the nth bit without using -1:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;number = (((number | (1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n)) ^ (1 &amp;lt;&amp;lt; n&lt;/span&gt;))) | (x &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n);\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Explanation: &lt;code&gt;((number | (1 &amp;lt;&amp;lt; n)&lt;/code&gt; sets the nth bit to 1 (where &lt;code&gt;|&lt;/code&gt; denotes bitwise OR), then with &lt;code&gt;(...) ^ (1 &amp;lt;&amp;lt; n)&lt;/code&gt; we set the nth bit to 0, and finally with &lt;code&gt;(...) | x &amp;lt;&amp;lt; n)&lt;/code&gt; we set the nth bit that was 0, to (bit value) &lt;code&gt;x&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;This also works in &lt;code&gt;golang&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;Try one of these functions in the C language to change n bit:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;char&lt;/span&gt; bitfield;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Start at 0th position&lt;/span&gt;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;chang_n_bit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;\n{\n    bitfield = (bitfield | (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n)) &amp;amp; (~( (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n) ^ (&lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt; &amp;lt;&amp;lt; n) ));\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;void chang_n_bit(int n, int value)\n{\n    bitfield = (bitfield | (1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n)) &amp;amp; ((value &amp;lt;&amp;lt; n&lt;/span&gt;) | ((~0) ^ (1 &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;n)));\n}\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;chang_n_bit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n, &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;)\n        bitfield |= &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        bitfield &amp;amp;= ~&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; ^ (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n);\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;get_n_bit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; n&lt;/span&gt;)&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (bitfield &amp;amp; (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; n)) ? &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    "]},"randomTags":[{"name":"sql-injection","slug":"sql-injection"},{"name":"jframe","slug":"jframe"},{"name":"http-redirect","slug":"http-redirect"},{"name":"multidimensional-array","slug":"multidimensional-array"},{"name":"ssl","slug":"ssl"},{"name":"stack-trace","slug":"stack-trace"},{"name":"haversine","slug":"haversine"},{"name":"platform-detection","slug":"platform-detection"},{"name":"email-validation","slug":"email-validation"},{"name":"dynamic-allocation","slug":"dynamic-allocation"},{"name":"ios","slug":"ios"},{"name":"tapply","slug":"tapply"},{"name":"storage","slug":"storage"},{"name":"pointers","slug":"pointers"},{"name":"formatting","slug":"formatting"},{"name":"responsive-design","slug":"responsive-design"},{"name":"python-packaging","slug":"python-packaging"},{"name":"command","slug":"command"},{"name":"naming-conventions","slug":"naming-conventions"},{"name":"callback","slug":"callback"}]},"__N_SSG":true}