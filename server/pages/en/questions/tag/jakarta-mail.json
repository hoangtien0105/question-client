{"pageProps":{"data":{"count":1,"rows":[{"id":408,"title":"Sending Email in Android using JavaMail API without using the default/built-in app","slug":"sending-email-in-android-using-javamail-api-without-using-the-defaultbuilt-in-app-1657387883400","postType":"QUESTION","createdAt":"2022-07-09T17:31:23.000Z","updatedAt":"2022-07-09T17:31:23.000Z","tags":[{"id":2182,"name":"jakarta-mail","slug":"jakarta-mail","createdAt":"2022-07-09T17:31:23.000Z","updatedAt":"2022-07-09T17:31:23.000Z","Questions_Tags":{"questionId":408,"tagId":2182}}]}]},"slug":"jakarta-mail","page":1,"answers":{"408":["\n&lt;p&gt;Send e-mail in Android using the JavaMail API using Gmail authentication.&lt;/p&gt;\n&lt;h3&gt;Steps to create a sample Project:&lt;/h3&gt;\n&lt;p&gt;&lt;strong&gt;MailSenderActivity.java:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MailSenderActivity&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Activity&lt;/span&gt; {\n    \n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Bundle savedInstanceState)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n        \n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;send&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (Button) &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.findViewById(R.id.send);\n        send.setOnClickListener(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;View&lt;/span&gt;.OnClickListener() {\n            \n            &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(View v)&lt;/span&gt; {\n                &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {   \n                    &lt;span class=&quot;hljs-type&quot;&gt;GMailSender&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;sender&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;GMailSender&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;username@gmail.com&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;password&quot;&lt;/span&gt;);\n                    sender.sendMail(&lt;span class=&quot;hljs-string&quot;&gt;&quot;This is Subject&quot;&lt;/span&gt;,   \n                            &lt;span class=&quot;hljs-string&quot;&gt;&quot;This is Body&quot;&lt;/span&gt;,   \n                            &lt;span class=&quot;hljs-string&quot;&gt;&quot;user@gmail.com&quot;&lt;/span&gt;,   \n                            &lt;span class=&quot;hljs-string&quot;&gt;&quot;user@yahoo.com&quot;&lt;/span&gt;);   \n                } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {   \n                    Log.e(&lt;span class=&quot;hljs-string&quot;&gt;&quot;SendMail&quot;&lt;/span&gt;, e.getMessage(), e);   \n                } \n                \n            }\n        });\n        \n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;GMailSender.java:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;GMailSender&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;javax&lt;/span&gt;.mail.Authenticator {   \n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;mailhost&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;;   \n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String user;   \n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String password;   \n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; Session session;   \n  \n    &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; {   \n        Security.addProvider(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;com&lt;/span&gt;.provider.JSSEProvider());   \n    }  \n  \n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;GMailSender&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String user, String password)&lt;/span&gt; {   \n        &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.user = user;   \n        &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.password = password;   \n  \n        &lt;span class=&quot;hljs-type&quot;&gt;Properties&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;props&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Properties&lt;/span&gt;();   \n        props.setProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.transport.protocol&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp&quot;&lt;/span&gt;);   \n        props.setProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.host&quot;&lt;/span&gt;, mailhost);   \n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.auth&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;);   \n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.port&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;465&quot;&lt;/span&gt;);   \n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.port&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;465&quot;&lt;/span&gt;);   \n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.class&quot;&lt;/span&gt;,   \n                &lt;span class=&quot;hljs-string&quot;&gt;&quot;javax.net.ssl.SSLSocketFactory&quot;&lt;/span&gt;);   \n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.fallback&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;false&quot;&lt;/span&gt;);   \n        props.setProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.quitwait&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;false&quot;&lt;/span&gt;);   \n  \n        session = Session.getDefaultInstance(props, &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;);   \n    }   \n  \n    &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; PasswordAuthentication &lt;span class=&quot;hljs-title function_&quot;&gt;getPasswordAuthentication&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {   \n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PasswordAuthentication&lt;/span&gt;(user, password);   \n    }   \n  \n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;sendMail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String subject, String body, String sender, String recipients)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; Exception {   \n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;{\n        &lt;span class=&quot;hljs-type&quot;&gt;MimeMessage&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeMessage&lt;/span&gt;(session);   \n        &lt;span class=&quot;hljs-type&quot;&gt;DataHandler&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DataHandler&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ByteArrayDataSource&lt;/span&gt;(body.getBytes(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;));   \n        message.setSender(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(sender));   \n        message.setSubject(subject);   \n        message.setDataHandler(handler);   \n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (recipients.indexOf(&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;) &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)   \n            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   \n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;  \n            message.setRecipient(Message.RecipientType.TO, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(recipients));   \n        Transport.send(message);   \n        }&lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(Exception e){\n            \n        }\n    }   \n  \n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ByteArrayDataSource&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DataSource&lt;/span&gt; {   \n        &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;byte&lt;/span&gt;[] data;   \n        &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String type;   \n  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ByteArrayDataSource&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;byte&lt;/span&gt;[] data, String type)&lt;/span&gt; {   \n            &lt;span class=&quot;hljs-built_in&quot;&gt;super&lt;/span&gt;();   \n            &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.data = data;   \n            &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.type = type;   \n        }   \n  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ByteArrayDataSource&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;byte&lt;/span&gt;[] data)&lt;/span&gt; {   \n            &lt;span class=&quot;hljs-built_in&quot;&gt;super&lt;/span&gt;();   \n            &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.data = data;   \n        }   \n  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setType&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String type)&lt;/span&gt; {   \n            &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.type = type;   \n        }   \n  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;getContentType&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {   \n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (type == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;)   \n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/octet-stream&quot;&lt;/span&gt;;   \n            &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;  \n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; type;   \n        }   \n  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; InputStream &lt;span class=&quot;hljs-title function_&quot;&gt;getInputStream&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; IOException {   \n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ByteArrayInputStream&lt;/span&gt;(data);   \n        }   \n  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {   \n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;ByteArrayDataSource&quot;&lt;/span&gt;;   \n        }   \n  \n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; OutputStream &lt;span class=&quot;hljs-title function_&quot;&gt;getOutputStream&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; IOException {   \n            &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;IOException&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Not Supported&quot;&lt;/span&gt;);   \n        }   \n    }   \n}  \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;JSSEProvider.java:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/*\n *  Licensed to the Apache Software Foundation (ASF) under one or more\n *  contributor license agreements.  See the NOTICE file distributed with\n *  this work for additional information regarding copyright ownership.\n *  The ASF licenses this file to You under the Apache License, Version 2.0\n *  (the &quot;License&quot;); you may not use this file except in compliance with\n *  the License.  You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@author&lt;/span&gt; Alexander Y. Kleymenov\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@version&lt;/span&gt; $Revision$\n */&lt;/span&gt;\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.security.AccessController;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.security.Provider;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSSEProvider&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Provider&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;JSSEProvider&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;super&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;HarmonyJSSE&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1.0&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Harmony JSSE Provider&quot;&lt;/span&gt;);\n        AccessController.doPrivileged(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;java&lt;/span&gt;.security.PrivilegedAction&amp;lt;Void&amp;gt;() {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Void &lt;span class=&quot;hljs-title function_&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n                put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;SSLContext.TLS&quot;&lt;/span&gt;,\n                        &lt;span class=&quot;hljs-string&quot;&gt;&quot;org.apache.harmony.xnet.provider.jsse.SSLContextImpl&quot;&lt;/span&gt;);\n                put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Alg.Alias.SSLContext.TLSv1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;TLS&quot;&lt;/span&gt;);\n                put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;KeyManagerFactory.X509&quot;&lt;/span&gt;,\n                        &lt;span class=&quot;hljs-string&quot;&gt;&quot;org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl&quot;&lt;/span&gt;);\n                put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;TrustManagerFactory.X509&quot;&lt;/span&gt;,\n                        &lt;span class=&quot;hljs-string&quot;&gt;&quot;org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl&quot;&lt;/span&gt;);\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n            }\n        });\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;ADD 3 jars found in the following link to your Android Project&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/mail.jar&quot; rel=&quot;noreferrer&quot;&gt;mail.jar&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/activation.jar&quot; rel=&quot;noreferrer&quot;&gt;activation.jar&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/additionnal.jar&quot; rel=&quot;noreferrer&quot;&gt;additional.jar&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/a/6859020/28557&quot;&gt;Click here - How to add External Jars&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;And don&apos;t forget to add this line in your manifest:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;uses-permission android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.INTERNET&quot;&lt;/span&gt; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Just click below link to change account access for less secure apps&lt;/strong&gt;\n&lt;a href=&quot;https://www.google.com/settings/security/lesssecureapps&quot; rel=&quot;noreferrer&quot;&gt;https://www.google.com/settings/security/lesssecureapps&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;Run the project and check your recipient mail account for the mail.\nCheers!&lt;/p&gt;\n&lt;p&gt;P.S. And don&apos;t forget that you cannot do network operation from any Activity in android.\nHence it is recommended to use &lt;code&gt;AsyncTask&lt;/code&gt; or &lt;code&gt;IntentService&lt;/code&gt; to avoid network on main thread exception.&lt;/p&gt;\n&lt;p&gt;Jar files: &lt;a href=&quot;https://code.google.com/archive/p/javamail-android/&quot; rel=&quot;noreferrer&quot;&gt;https://code.google.com/archive/p/javamail-android/&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Thank you for your valuable information. Code is working fine. I am able to add attachment also by adding following code.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; Multipart _multipart; \n_multipart = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeMultipart&lt;/span&gt;(); \n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;addAttachment&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String filename,String subject)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; Exception { \n    &lt;span class=&quot;hljs-type&quot;&gt;BodyPart&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;messageBodyPart&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeBodyPart&lt;/span&gt;(); \n    &lt;span class=&quot;hljs-type&quot;&gt;DataSource&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FileDataSource&lt;/span&gt;(filename); \n    messageBodyPart.setDataHandler(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DataHandler&lt;/span&gt;(source)); \n    messageBodyPart.setFileName(filename); \n    _multipart.addBodyPart(messageBodyPart);\n\n    &lt;span class=&quot;hljs-type&quot;&gt;BodyPart&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;messageBodyPart2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeBodyPart&lt;/span&gt;(); \n    messageBodyPart2.setText(subject); \n\n    _multipart.addBodyPart(messageBodyPart2); \n} \n\n\n\nmessage.setContent(_multipart);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;Could not connect to SMTP host:\n  smtp.gmail.com, port: 465&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Add this line in your manifest:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;uses-permission android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.INTERNET&quot;&lt;/span&gt; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can use JavaMail API to handle your email tasks. JavaMail API is available in JavaEE package and its jar is available for download. Sadly it cannot be used directly in an Android application since it uses AWT components which are completely incompatible  in Android.&lt;/p&gt;\n\n&lt;p&gt;You can find the Android port for JavaMail at the following location:\n&lt;a href=&quot;http://code.google.com/p/javamail-android/&quot; rel=&quot;noreferrer&quot;&gt;http://code.google.com/p/javamail-android/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Add the jars to your application and use the SMTP method&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;100% working code with demo You can also send multiple emails using this answer.&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Download Project &lt;strong&gt;&lt;a href=&quot;https://github.com/arpit999/SendMail&quot; rel=&quot;nofollow noreferrer&quot;&gt;HERE&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Step 1:&lt;/strong&gt;  Download mail, activation, additional jar files and add in your &lt;strong&gt;project libs folder&lt;/strong&gt; in android studio. I added a screenshot see below &lt;strong&gt;&lt;a href=&quot;https://code.google.com/archive/p/javamail-android/downloads&quot; rel=&quot;nofollow noreferrer&quot;&gt;Download link&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/CCnFj.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/CCnFj.png&quot; alt=&quot;libs add&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;Login with gmail (&lt;strong&gt;using your from mail&lt;/strong&gt;) and &lt;strong&gt;TURN ON&lt;/strong&gt;  toggle button &lt;a href=&quot;https://www.google.com/settings/u/1/security/lesssecureapps&quot; rel=&quot;nofollow noreferrer&quot;&gt;LINK&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;Most of the people forget about this step i hope you will not.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Step 2 :&lt;/strong&gt;  After completing this process.  Copy and past this classes into your project.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;GMail.java&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.util.Log;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.io.UnsupportedEncodingException;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.List;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Properties;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Message;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.MessagingException;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Session;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Transport;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.AddressException;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.InternetAddress;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeMessage;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;GMail&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;emailPort&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;587&quot;&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot;&gt;// gmail&apos;s smtp port&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;smtpAuth&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;starttls&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;emailHost&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;;\n\n\n    String fromEmail;\n    String fromPassword;\n    List&amp;lt;String&amp;gt; toEmailList;\n    String emailSubject;\n    String emailBody;\n\n    Properties emailProperties;\n    Session mailSession;\n    MimeMessage emailMessage;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;GMail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;GMail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String fromEmail, String fromPassword,\n            List&amp;lt;String&amp;gt; toEmailList, String emailSubject, String emailBody)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.fromEmail = fromEmail;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.fromPassword = fromPassword;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.toEmailList = toEmailList;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.emailSubject = emailSubject;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.emailBody = emailBody;\n\n        emailProperties = System.getProperties();\n        emailProperties.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.port&quot;&lt;/span&gt;, emailPort);\n        emailProperties.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.auth&quot;&lt;/span&gt;, smtpAuth);\n        emailProperties.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.starttls.enable&quot;&lt;/span&gt;, starttls);\n        Log.i(&lt;span class=&quot;hljs-string&quot;&gt;&quot;GMail&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Mail server properties set.&quot;&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; MimeMessage &lt;span class=&quot;hljs-title function_&quot;&gt;createEmailMessage&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; AddressException,\n            MessagingException, UnsupportedEncodingException {\n\n        mailSession = Session.getDefaultInstance(emailProperties, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;);\n        emailMessage = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeMessage&lt;/span&gt;(mailSession);\n\n        emailMessage.setFrom(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(fromEmail, fromEmail));\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (String toEmail : toEmailList) {\n            Log.i(&lt;span class=&quot;hljs-string&quot;&gt;&quot;GMail&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;toEmail: &quot;&lt;/span&gt; + toEmail);\n            emailMessage.addRecipient(Message.RecipientType.TO,\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(toEmail));\n        }\n\n        emailMessage.setSubject(emailSubject);\n        emailMessage.setContent(emailBody, &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/html&quot;&lt;/span&gt;);&lt;span class=&quot;hljs-comment&quot;&gt;// for a html email&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// emailMessage.setText(emailBody);// for a text email&lt;/span&gt;\n        Log.i(&lt;span class=&quot;hljs-string&quot;&gt;&quot;GMail&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Email Message created.&quot;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; emailMessage;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;sendEmail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; AddressException, MessagingException {\n\n        &lt;span class=&quot;hljs-type&quot;&gt;Transport&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;transport&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; mailSession.getTransport(&lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp&quot;&lt;/span&gt;);\n        transport.connect(emailHost, fromEmail, fromPassword);\n        Log.i(&lt;span class=&quot;hljs-string&quot;&gt;&quot;GMail&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;allrecipients: &quot;&lt;/span&gt; + emailMessage.getAllRecipients());\n        transport.sendMessage(emailMessage, emailMessage.getAllRecipients());\n        transport.close();\n        Log.i(&lt;span class=&quot;hljs-string&quot;&gt;&quot;GMail&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Email sent successfully.&quot;&lt;/span&gt;);\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;SendMailTask.java&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.app.Activity;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.app.ProgressDialog;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.os.AsyncTask;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.util.Log;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.List;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SendMailTask&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;AsyncTask&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; ProgressDialog statusDialog;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; Activity sendMailActivity;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;SendMailTask&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Activity activity)&lt;/span&gt; {\n        sendMailActivity = activity;\n\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onPreExecute&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n        statusDialog = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ProgressDialog&lt;/span&gt;(sendMailActivity);\n        statusDialog.setMessage(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Getting ready...&quot;&lt;/span&gt;);\n        statusDialog.setIndeterminate(&lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);\n        statusDialog.setCancelable(&lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;);\n        statusDialog.show();\n    }\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; Object &lt;span class=&quot;hljs-title function_&quot;&gt;doInBackground&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Object... args)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n            Log.i(&lt;span class=&quot;hljs-string&quot;&gt;&quot;SendMailTask&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;About to instantiate GMail...&quot;&lt;/span&gt;);\n            publishProgress(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Processing input....&quot;&lt;/span&gt;);\n            &lt;span class=&quot;hljs-type&quot;&gt;GMail&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;androidEmail&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;GMail&lt;/span&gt;(args[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].toString(),\n                    args[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;].toString(), (List) args[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;], args[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;].toString(),\n                    args[&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;].toString());\n            publishProgress(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Preparing mail message....&quot;&lt;/span&gt;);\n            androidEmail.createEmailMessage();\n            publishProgress(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Sending email....&quot;&lt;/span&gt;);\n            androidEmail.sendEmail();\n            publishProgress(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Email Sent.&quot;&lt;/span&gt;);\n            Log.i(&lt;span class=&quot;hljs-string&quot;&gt;&quot;SendMailTask&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Mail Sent.&quot;&lt;/span&gt;);\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {\n            publishProgress(e.getMessage());\n            Log.e(&lt;span class=&quot;hljs-string&quot;&gt;&quot;SendMailTask&quot;&lt;/span&gt;, e.getMessage(), e);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onProgressUpdate&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Object... values)&lt;/span&gt; {\n        statusDialog.setMessage(values[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].toString());\n\n    }\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onPostExecute&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Object result)&lt;/span&gt; {\n        statusDialog.dismiss();\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Step 3 :&lt;/strong&gt;\nNow you can change this  class according to your needs also you can send multiple mail using this class. i provide xml and java file both.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;activity_main.xml&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;hljs-string&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;hljs-string&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;?&amp;gt;\n&amp;lt;LinearLayout xmlns:android=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://schemas.android.com/apk/res/android&quot;&lt;/span&gt;\n    xmlns:tools=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://schemas.android.com/tools&quot;&lt;/span&gt;\n    android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;match_parent&quot;&lt;/span&gt;\n    android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;match_parent&quot;&lt;/span&gt;\n    android:orientation=&lt;span class=&quot;hljs-string&quot;&gt;&quot;vertical&quot;&lt;/span&gt;\n    android:paddingLeft=&lt;span class=&quot;hljs-string&quot;&gt;&quot;20dp&quot;&lt;/span&gt;\n    android:paddingRight=&lt;span class=&quot;hljs-string&quot;&gt;&quot;20dp&quot;&lt;/span&gt;\n    android:paddingTop=&lt;span class=&quot;hljs-string&quot;&gt;&quot;30dp&quot;&lt;/span&gt;&amp;gt;\n\n    &amp;lt;TextView\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/textView1&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:paddingTop=&lt;span class=&quot;hljs-string&quot;&gt;&quot;10dp&quot;&lt;/span&gt;\n        android:text=&lt;span class=&quot;hljs-string&quot;&gt;&quot;From Email&quot;&lt;/span&gt; /&amp;gt;\n\n    &amp;lt;EditText\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/editText1&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;match_parent&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:background=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#FFFFFF&quot;&lt;/span&gt;\n        android:cursorVisible=&lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;\n        android:editable=&lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;\n        android:ems=&lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt;\n        android:enabled=&lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;\n        android:inputType=&lt;span class=&quot;hljs-string&quot;&gt;&quot;textEmailAddress&quot;&lt;/span&gt;\n        android:padding=&lt;span class=&quot;hljs-string&quot;&gt;&quot;5dp&quot;&lt;/span&gt;\n        android:textColor=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#000000&quot;&lt;/span&gt;&amp;gt;\n\n        &amp;lt;requestFocus /&amp;gt;\n    &amp;lt;/EditText&amp;gt;\n\n    &amp;lt;TextView\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/textView2&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:paddingTop=&lt;span class=&quot;hljs-string&quot;&gt;&quot;10dp&quot;&lt;/span&gt;\n        android:text=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Password (For from email)&quot;&lt;/span&gt; /&amp;gt;\n\n    &amp;lt;EditText\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/editText2&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;match_parent&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:background=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#FFFFFF&quot;&lt;/span&gt;\n        android:ems=&lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt;\n        android:inputType=&lt;span class=&quot;hljs-string&quot;&gt;&quot;textPassword&quot;&lt;/span&gt;\n        android:padding=&lt;span class=&quot;hljs-string&quot;&gt;&quot;5dp&quot;&lt;/span&gt;\n        android:textColor=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#000000&quot;&lt;/span&gt; /&amp;gt;\n\n    &amp;lt;TextView\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/textView3&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:paddingTop=&lt;span class=&quot;hljs-string&quot;&gt;&quot;10dp&quot;&lt;/span&gt;\n        android:text=&lt;span class=&quot;hljs-string&quot;&gt;&quot;To Email&quot;&lt;/span&gt; /&amp;gt;\n\n    &amp;lt;EditText\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/editText3&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;match_parent&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:background=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#ffffff&quot;&lt;/span&gt;\n        android:ems=&lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt;\n        android:inputType=&lt;span class=&quot;hljs-string&quot;&gt;&quot;textEmailAddress&quot;&lt;/span&gt;\n        android:padding=&lt;span class=&quot;hljs-string&quot;&gt;&quot;5dp&quot;&lt;/span&gt;\n        android:textColor=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#000000&quot;&lt;/span&gt; /&amp;gt;\n\n    &amp;lt;TextView\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/textView4&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:paddingTop=&lt;span class=&quot;hljs-string&quot;&gt;&quot;10dp&quot;&lt;/span&gt;\n        android:text=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Subject&quot;&lt;/span&gt; /&amp;gt;\n\n    &amp;lt;EditText\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/editText4&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;match_parent&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:background=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#ffffff&quot;&lt;/span&gt;\n        android:ems=&lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt;\n        android:padding=&lt;span class=&quot;hljs-string&quot;&gt;&quot;5dp&quot;&lt;/span&gt;\n        android:textColor=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#000000&quot;&lt;/span&gt; /&amp;gt;\n\n    &amp;lt;TextView\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/textView5&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:paddingTop=&lt;span class=&quot;hljs-string&quot;&gt;&quot;10dp&quot;&lt;/span&gt;\n        android:text=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Body&quot;&lt;/span&gt; /&amp;gt;\n\n    &amp;lt;EditText\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/editText5&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;match_parent&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:background=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#ffffff&quot;&lt;/span&gt;\n        android:ems=&lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt;\n        android:inputType=&lt;span class=&quot;hljs-string&quot;&gt;&quot;textMultiLine&quot;&lt;/span&gt;\n        android:padding=&lt;span class=&quot;hljs-string&quot;&gt;&quot;35dp&quot;&lt;/span&gt;\n        android:textColor=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#000000&quot;&lt;/span&gt; /&amp;gt;\n\n    &amp;lt;Button\n        android:id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;@+id/button1&quot;&lt;/span&gt;\n        android:layout_width=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:layout_height=&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrap_content&quot;&lt;/span&gt;\n        android:text=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Send Email&quot;&lt;/span&gt; /&amp;gt;\n\n&amp;lt;/LinearLayout&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;SendMailActivity.java&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.app.Activity;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.os.Bundle;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.util.Log;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.view.View;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.widget.Button;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.widget.TextView;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Arrays;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.List;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SendMailActivity&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Activity&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Bundle savedInstanceState)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;send&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (Button) &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.findViewById(R.id.button1);\n\n        send.setOnClickListener(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;View&lt;/span&gt;.OnClickListener() {\n\n            &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(View v)&lt;/span&gt; {\n                Log.i(&lt;span class=&quot;hljs-string&quot;&gt;&quot;SendMailActivity&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Send Button Clicked.&quot;&lt;/span&gt;);\n\n                &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fromEmail&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; ((TextView) findViewById(R.id.editText1))\n                        .getText().toString();\n                &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fromPassword&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; ((TextView) findViewById(R.id.editText2))\n                        .getText().toString();\n                &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;toEmails&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; ((TextView) findViewById(R.id.editText3))\n                        .getText().toString();\n                List&amp;lt;String&amp;gt; toEmailList = Arrays.asList(toEmails\n                        .split(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\\\s*,\\\\s*&quot;&lt;/span&gt;));\n                Log.i(&lt;span class=&quot;hljs-string&quot;&gt;&quot;SendMailActivity&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;To List: &quot;&lt;/span&gt; + toEmailList);\n                &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;emailSubject&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; ((TextView) findViewById(R.id.editText4))\n                        .getText().toString();\n                &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;emailBody&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; ((TextView) findViewById(R.id.editText5))\n                        .getText().toString();\n                &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SendMailTask&lt;/span&gt;(SendMailActivity.&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;).execute(fromEmail,\n                        fromPassword, toEmailList, emailSubject, emailBody);\n            }\n        });\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt; Dont forget to add &lt;strong&gt;internet&lt;/strong&gt; permission in your AndroidManifest.xml file&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&amp;gt;&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Hope it work if it not then just comment down below.&lt;/p&gt;\n    ","\n&lt;p&gt;In order to help those getting a Network On Main Thread Exception with an SDK Target &amp;gt;9. This is using droopie&apos;s code above but will work similarly for any.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;StrictMode.&lt;span class=&quot;hljs-type&quot;&gt;ThreadPolicy&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;policy&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;StrictMode&lt;/span&gt;.ThreadPolicy.Builder().permitAll().build();\n\nStrictMode.setThreadPolicy(policy); \n\nandroid.os.NetworkOnMainThreadException\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You can use AsyncTask as below&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onClickMail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(View view)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SendEmailAsyncTask&lt;/span&gt;().execute();\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SendEmailAsyncTask&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;AsyncTask&lt;/span&gt; &amp;lt;Void, Void, Boolean&amp;gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;Mail&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Mail&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;from@gmail.com&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;my password&quot;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;SendEmailAsyncTask&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (BuildConfig.DEBUG) Log.v(SendEmailAsyncTask.class.getName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;SendEmailAsyncTask()&quot;&lt;/span&gt;);\n        String[] toArr = { &lt;span class=&quot;hljs-string&quot;&gt;&quot;to mail@gmail.com&quot;&lt;/span&gt;};\n        m.setTo(toArr);\n        m.setFrom(&lt;span class=&quot;hljs-string&quot;&gt;&quot;from mail@gmail.com&quot;&lt;/span&gt;);\n        m.setSubject(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Email from Android&quot;&lt;/span&gt;);\n        m.setBody(&lt;span class=&quot;hljs-string&quot;&gt;&quot;body.&quot;&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; Boolean &lt;span class=&quot;hljs-title function_&quot;&gt;doInBackground&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Void... params)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (BuildConfig.DEBUG) Log.v(SendEmailAsyncTask.class.getName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;doInBackground()&quot;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n            m.send();\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (AuthenticationFailedException e) {\n            Log.e(SendEmailAsyncTask.class.getName(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;Bad account details&quot;&lt;/span&gt;);\n            e.printStackTrace();\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (MessagingException e) {\n            Log.e(SendEmailAsyncTask.class.getName(), m.getTo(&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) + &lt;span class=&quot;hljs-string&quot;&gt;&quot;failed&quot;&lt;/span&gt;);\n            e.printStackTrace();\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {\n            e.printStackTrace();\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n        }\n    }\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h2&gt;SMTP&lt;/h2&gt;\n\n&lt;p&gt;Using SMTP is one way to go, and the others have already pointed out ways how to do it. Just note that while doing this, you completely circumvent the built in mail app, and you will have to provide the address of the SMTP server, the user name and password for that server, either statically in your code, or query it from the user.&lt;/p&gt;\n\n&lt;h2&gt;HTTP&lt;/h2&gt;\n\n&lt;p&gt;Another way would involve a simple server side script, like php, that takes some URL parameters and uses them to send a mail. This way, you only need to make an HTTP request from the device (easily possible with the built in libraries) and don&apos;t need to store the SMTP login data on the device. This is one more indirection compared to direct SMTP usage, but because it&apos;s so very easy to make HTTP request and send mails from PHP, it might even be simpler than the direct way.&lt;/p&gt;\n\n&lt;h2&gt;Mail Application&lt;/h2&gt;\n\n&lt;p&gt;If the mail shall be send from the users default mail account that he already registered with the phone, you&apos;d have to take some other approach. If you have enough time and experience, you might want to check the source code of the Android Email application to see if it offers some entry point to send a mail without user interaction (I don&apos;t know, but maybe there is one).&lt;/p&gt;\n\n&lt;p&gt;Maybe you even find a way to query the users account details (so you can use them for SMTP), though I highly doubt that this is possible, because it would be a huge security risk and Android is built rather securely.&lt;/p&gt;\n    ","\n&lt;p&gt;here is an alt version that also works for me and has attachments (posted already above but complete version unlike the source link, which people posted they cant get it to work since its missing data)&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Date; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Properties; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.CommandMap; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.DataHandler; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.DataSource; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.FileDataSource; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.MailcapCommandMap; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.BodyPart; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Multipart; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.PasswordAuthentication; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Session; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Transport; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.InternetAddress; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeBodyPart; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeMessage; \n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeMultipart; \n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Mail&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;javax&lt;/span&gt;.mail.Authenticator { \n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _user; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _pass; \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String[] _to; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _from; \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _port; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _sport; \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _host; \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _subject; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _body; \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; _auth; \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; _debuggable; \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; Multipart _multipart; \n\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Mail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; { \n    _host = &lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// default smtp server &lt;/span&gt;\n    _port = &lt;span class=&quot;hljs-string&quot;&gt;&quot;465&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// default smtp port &lt;/span&gt;\n    _sport = &lt;span class=&quot;hljs-string&quot;&gt;&quot;465&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// default socketfactory port &lt;/span&gt;\n\n    _user = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// username &lt;/span&gt;\n    _pass = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// password &lt;/span&gt;\n    _from = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// email sent from &lt;/span&gt;\n    _subject = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// email subject &lt;/span&gt;\n    _body = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// email body &lt;/span&gt;\n\n    _debuggable = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// debug mode on or off - default off &lt;/span&gt;\n    _auth = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// smtp authentication - default on &lt;/span&gt;\n\n    _multipart = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeMultipart&lt;/span&gt;(); \n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. &lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;MailcapCommandMap&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;mc&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (MailcapCommandMap) CommandMap.getDefaultCommandMap(); \n    mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/html;; x-java-content-handler=com.sun.mail.handlers.text_html&quot;&lt;/span&gt;); \n    mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml&quot;&lt;/span&gt;); \n    mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain&quot;&lt;/span&gt;); \n    mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed&quot;&lt;/span&gt;); \n    mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822&quot;&lt;/span&gt;); \n    CommandMap.setDefaultCommandMap(mc); \n  } \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Mail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String user, String pass)&lt;/span&gt; { \n    &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;(); \n\n    _user = user; \n    _pass = pass; \n  } \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; Exception { \n    &lt;span class=&quot;hljs-type&quot;&gt;Properties&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;props&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; _setProperties(); \n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(!_user.equals(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) &amp;amp;&amp;amp; !_pass.equals(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) &amp;amp;&amp;amp; _to.length &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; !_from.equals(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) &amp;amp;&amp;amp; !_subject.equals(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) &amp;amp;&amp;amp; !_body.equals(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;)) { \n      &lt;span class=&quot;hljs-type&quot;&gt;Session&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Session.getInstance(props, &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;); \n\n      &lt;span class=&quot;hljs-type&quot;&gt;MimeMessage&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeMessage&lt;/span&gt;(session); \n\n      msg.setFrom(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(_from)); \n\n      InternetAddress[] addressTo = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;[_to.length]; \n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; _to.length; i++) { \n        addressTo[i] = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(_to[i]); \n      } \n        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); \n\n      msg.setSubject(_subject); \n      msg.setSentDate(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;()); \n\n      &lt;span class=&quot;hljs-comment&quot;&gt;// setup message body &lt;/span&gt;\n      &lt;span class=&quot;hljs-type&quot;&gt;BodyPart&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;messageBodyPart&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeBodyPart&lt;/span&gt;(); \n      messageBodyPart.setText(_body); \n      _multipart.addBodyPart(messageBodyPart); \n\n      &lt;span class=&quot;hljs-comment&quot;&gt;// Put parts in message &lt;/span&gt;\n      msg.setContent(_multipart); \n\n      &lt;span class=&quot;hljs-comment&quot;&gt;// send email &lt;/span&gt;\n      Transport.send(msg); \n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;; \n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; { \n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;; \n    } \n  } \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;addAttachment&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String filename)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; Exception { \n    &lt;span class=&quot;hljs-type&quot;&gt;BodyPart&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;messageBodyPart&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeBodyPart&lt;/span&gt;(); \n    &lt;span class=&quot;hljs-type&quot;&gt;DataSource&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FileDataSource&lt;/span&gt;(filename); \n    messageBodyPart.setDataHandler(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DataHandler&lt;/span&gt;(source)); \n    messageBodyPart.setFileName(filename); \n\n    _multipart.addBodyPart(messageBodyPart); \n  } \n\n  &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; PasswordAuthentication &lt;span class=&quot;hljs-title function_&quot;&gt;getPasswordAuthentication&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; { \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PasswordAuthentication&lt;/span&gt;(_user, _pass); \n  } \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; Properties &lt;span class=&quot;hljs-title function_&quot;&gt;_setProperties&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; { \n    &lt;span class=&quot;hljs-type&quot;&gt;Properties&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;props&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Properties&lt;/span&gt;(); \n\n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.host&quot;&lt;/span&gt;, _host); \n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(_debuggable) { \n      props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.debug&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;); \n    } \n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(_auth) { \n      props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.auth&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;); \n    } \n\n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.port&quot;&lt;/span&gt;, _port); \n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.port&quot;&lt;/span&gt;, _sport); \n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.class&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;javax.net.ssl.SSLSocketFactory&quot;&lt;/span&gt;); \n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.fallback&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;false&quot;&lt;/span&gt;); \n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; props; \n  } \n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// the getters and setters &lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;getBody&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; { \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _body; \n  } \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setBody&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String _body)&lt;/span&gt; { \n    &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;._body = _body; \n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setTo&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String[] toArr)&lt;/span&gt; {\n      &lt;span class=&quot;hljs-comment&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;\n      &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;._to=toArr;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setFrom&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String string)&lt;/span&gt; {\n      &lt;span class=&quot;hljs-comment&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;\n      &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;._from=string;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setSubject&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String string)&lt;/span&gt; {\n      &lt;span class=&quot;hljs-comment&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;\n      &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;._subject=string;\n  }  \n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// more of the getters and setters .. &lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and to call it in an activity...&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt; \n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Bundle icicle)&lt;/span&gt; { \n  &lt;span class=&quot;hljs-built_in&quot;&gt;super&lt;/span&gt;.onCreate(icicle); \n  setContentView(R.layout.main); \n\n  &lt;span class=&quot;hljs-type&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;addImage&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (Button) findViewById(R.id.send_email); \n  addImage.setOnClickListener(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;View&lt;/span&gt;.OnClickListener() { \n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(View view)&lt;/span&gt; { \n      &lt;span class=&quot;hljs-type&quot;&gt;Mail&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Mail&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;gmailusername@gmail.com&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;password&quot;&lt;/span&gt;); \n\n      String[] toArr = {&lt;span class=&quot;hljs-string&quot;&gt;&quot;bla@bla.com&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;lala@lala.com&quot;&lt;/span&gt;}; \n      m.setTo(toArr); \n      m.setFrom(&lt;span class=&quot;hljs-string&quot;&gt;&quot;wooo@wooo.com&quot;&lt;/span&gt;); \n      m.setSubject(&lt;span class=&quot;hljs-string&quot;&gt;&quot;This is an email sent using my Mail JavaMail wrapper from an Android device.&quot;&lt;/span&gt;); \n      m.setBody(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Email body.&quot;&lt;/span&gt;); \n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; { \n        m.addAttachment(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/sdcard/filelocation&quot;&lt;/span&gt;); \n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(m.send()) { \n          Toast.makeText(MailApp.&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Email was sent successfully.&quot;&lt;/span&gt;, Toast.LENGTH_LONG).show(); \n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; { \n          Toast.makeText(MailApp.&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Email was not sent.&quot;&lt;/span&gt;, Toast.LENGTH_LONG).show(); \n        } \n      } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(Exception e) { \n        &lt;span class=&quot;hljs-comment&quot;&gt;//Toast.makeText(MailApp.this, &quot;There was a problem sending the email.&quot;, Toast.LENGTH_LONG).show(); &lt;/span&gt;\n        Log.e(&lt;span class=&quot;hljs-string&quot;&gt;&quot;MailApp&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Could not send email&quot;&lt;/span&gt;, e); \n      } \n    } \n  }); \n} \n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;GmailBackground is small library to send an email in background without user interaction :&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Usage:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;    BackgroundMail.newBuilder(&lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;)\n            .withUsername(&lt;span class=&quot;hljs-string&quot;&gt;&quot;username@gmail.com&quot;&lt;/span&gt;)\n            .withPassword(&lt;span class=&quot;hljs-string&quot;&gt;&quot;password12345&quot;&lt;/span&gt;)\n            .withMailto(&lt;span class=&quot;hljs-string&quot;&gt;&quot;toemail@gmail.com&quot;&lt;/span&gt;)\n            .withType(BackgroundMail.TYPE_PLAIN)\n            .withSubject(&lt;span class=&quot;hljs-string&quot;&gt;&quot;this is the subject&quot;&lt;/span&gt;)\n            .withBody(&lt;span class=&quot;hljs-string&quot;&gt;&quot;this is the body&quot;&lt;/span&gt;)\n            .withOnSuccessCallback(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;BackgroundMail&lt;/span&gt;.OnSuccessCallback() {\n                &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n                &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onSuccess&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n                    &lt;span class=&quot;hljs-comment&quot;&gt;//do some magic&lt;/span&gt;\n                }\n            })\n            .withOnFailCallback(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;BackgroundMail&lt;/span&gt;.OnFailCallback() {\n                &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n                &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onFail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n                    &lt;span class=&quot;hljs-comment&quot;&gt;//do some magic&lt;/span&gt;\n                }\n            })\n            .send();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Configuration:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;repositories {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n    maven { url &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://jitpack.io&quot;&lt;/span&gt; }\n }\n dependencies {\n            compile &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.github.yesidlazaro:GmailBackground:1.2.0&apos;&lt;/span&gt;\n    }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Permissions:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;uses-permission android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.ACCESS_NETWORK_STATE&quot;&lt;/span&gt;/&amp;gt;\n&amp;lt;uses-permission android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.INTERNET&quot;&lt;/span&gt;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Also for attachments, you need to set READ_EXTERNAL_STORAGE permission:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;uses-permission android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.READ_EXTERNAL_STORAGE&quot;&lt;/span&gt;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/yesidlazaro/GmailBackground&quot; rel=&quot;noreferrer&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;(I&apos;ve tested it myself)&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Word of warning if using &quot;smtp.gmail.com&quot; as the default smtp server. &lt;/p&gt;\n\n&lt;p&gt;Google will force you to change your linked email account password frequently due to their over zealous &quot;suspicious activity&quot; polices. In essence it treats repeated smtp requests from different countries within a short time frame as &quot;suspicious activity&quot;. As they assume you (the email account holder) can only be in one country at a time.&lt;/p&gt;\n\n&lt;p&gt;When google systems detect &quot;suspicious activity&quot; it will prevent further emails until you change the password. As you will have hard coded the password into the app you have to re-release the app each time this happens, not ideal. This happened 3 times in a week to me, I even stored the password on another server and dynamically fetched the password each time google forced me to change it.&lt;/p&gt;\n\n&lt;p&gt;So I recommend using one of the many free smtp providers instead of &quot;smtp.gmail.com&quot; to avoid this security problem. Use the same code but change &quot;smtp.gmail.com&quot; to your new smtp forwarding host.&lt;/p&gt;\n    ","\n&lt;p&gt;Edit: JavaMail 1.5.5 &lt;a href=&quot;https://java.net/projects/javamail/pages/Android&quot; rel=&quot;nofollow noreferrer&quot;&gt;claims to support Android&lt;/a&gt;, so you shouldn&apos;t need anything else.&lt;/p&gt;\n\n&lt;p&gt;&lt;strike&gt;\nI&apos;ve ported the latest JavaMail (1.5.4) to Android. It&apos;s available in Maven Central, just add the following to &lt;code&gt;build.gradle&lt;/code&gt;~~&lt;/strike&gt;&lt;/p&gt;&lt;strike&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;compile &lt;span class=&quot;hljs-string&quot;&gt;&apos;eu.ocathain.com.sun.mail:javax.mail:1.5.4&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You can then follow the official &lt;a href=&quot;http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/javamail/javamail.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;tutorial&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;Source code is available here: &lt;a href=&quot;https://bitbucket.org/artbristol/javamail-forked-android&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://bitbucket.org/artbristol/javamail-forked-android&lt;/a&gt;&lt;/p&gt;\n\n&lt;/strike&gt;&lt;p&gt;&lt;strike&gt;&lt;/strike&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I found a shorter alternative for others who need help. The code is:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;package&lt;/span&gt; com.example.mail;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Properties;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Message;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.MessagingException;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.PasswordAuthentication;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Session;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Transport;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.InternetAddress;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeMessage;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SendMailTLS&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String[] args)&lt;/span&gt; {\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;username@gmail.com&quot;&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;password&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;password&quot;&lt;/span&gt;;\n\n        &lt;span class=&quot;hljs-type&quot;&gt;Properties&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;props&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Properties&lt;/span&gt;();\n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.auth&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;);\n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.starttls.enable&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;);\n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.host&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;);\n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.port&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;587&quot;&lt;/span&gt;);\n\n        &lt;span class=&quot;hljs-type&quot;&gt;Session&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Session.getInstance(props,\n          &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;javax&lt;/span&gt;.mail.Authenticator() {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; PasswordAuthentication &lt;span class=&quot;hljs-title function_&quot;&gt;getPasswordAuthentication&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PasswordAuthentication&lt;/span&gt;(username, password);\n            }\n          });\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n\n            &lt;span class=&quot;hljs-type&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeMessage&lt;/span&gt;(session);\n            message.setFrom(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;from-email@gmail.com&quot;&lt;/span&gt;));\n            message.setRecipients(Message.RecipientType.TO,\n                InternetAddress.parse(&lt;span class=&quot;hljs-string&quot;&gt;&quot;to-email@gmail.com&quot;&lt;/span&gt;));\n            message.setSubject(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Testing Subject&quot;&lt;/span&gt;);\n            message.setText(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Dear Mail Crawler,&quot;&lt;/span&gt;\n                + &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n\\n No spam to my email, please!&quot;&lt;/span&gt;);\n\n            Transport.send(message);\n\n            System.out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Done&quot;&lt;/span&gt;);\n\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (MessagingException e) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RuntimeException&lt;/span&gt;(e);\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Source: &lt;a href=&quot;https://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/&quot; rel=&quot;nofollow noreferrer&quot;&gt;Sending Email via JavaMail API&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;Hope this Helps! Good Luck!&lt;/p&gt;\n    ","\n&lt;p&gt;For sending a mail with attachment..&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SendAttachment&lt;/span&gt;{\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String [] args)&lt;/span&gt;{ \n             &lt;span class=&quot;hljs-comment&quot;&gt;//to address&lt;/span&gt;\n                    String to=&lt;span class=&quot;hljs-string&quot;&gt;&quot;abc@abc.com&quot;&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot;&gt;//change accordingly&lt;/span&gt;\n                    &lt;span class=&quot;hljs-comment&quot;&gt;//from address&lt;/span&gt;\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String user=&lt;span class=&quot;hljs-string&quot;&gt;&quot;efg@efg.com&quot;&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot;&gt;//change accordingly&lt;/span&gt;\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String password=&lt;span class=&quot;hljs-string&quot;&gt;&quot;password&quot;&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot;&gt;//change accordingly &lt;/span&gt;\n                     &lt;span class=&quot;hljs-type&quot;&gt;MailcapCommandMap&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;mc&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (MailcapCommandMap) CommandMap.getDefaultCommandMap();\n                   mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/html;; x-java-content-handler=com.sun.mail.handlers.text_html&quot;&lt;/span&gt;);\n                  mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml&quot;&lt;/span&gt;);\n                  mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain&quot;&lt;/span&gt;);\n                  mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed&quot;&lt;/span&gt;);\n                  mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822&quot;&lt;/span&gt;);\n                  CommandMap.setDefaultCommandMap(mc); \n                  &lt;span class=&quot;hljs-comment&quot;&gt;//1) get the session object   &lt;/span&gt;\n                  &lt;span class=&quot;hljs-type&quot;&gt;Properties&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;properties&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; System.getProperties();\n                  properties.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.port&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;465&quot;&lt;/span&gt;); \n                  properties.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.host&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;);\n                    properties.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.port&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;465&quot;&lt;/span&gt;);\n                    properties.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.class&quot;&lt;/span&gt;,\n                            &lt;span class=&quot;hljs-string&quot;&gt;&quot;javax.net.ssl.SSLSocketFactory&quot;&lt;/span&gt;);\n                    properties.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.auth&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;);\n                    properties.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.port&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;465&quot;&lt;/span&gt;);\n\n                  &lt;span class=&quot;hljs-type&quot;&gt;Session&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Session.getDefaultInstance(properties,\n                   &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;javax&lt;/span&gt;.mail.Authenticator() {\n                   &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; PasswordAuthentication &lt;span class=&quot;hljs-title function_&quot;&gt;getPasswordAuthentication&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n                   &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PasswordAuthentication&lt;/span&gt;(user,password);\n                   }\n                  });\n\n                  &lt;span class=&quot;hljs-comment&quot;&gt;//2) compose message   &lt;/span&gt;\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;{ \n                    &lt;span class=&quot;hljs-type&quot;&gt;MimeMessage&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeMessage&lt;/span&gt;(session);\n                    message.setFrom(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(user));\n                    message.addRecipient(Message.RecipientType.TO,&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(to));\n                    message.setSubject(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Hii&quot;&lt;/span&gt;); \n                    &lt;span class=&quot;hljs-comment&quot;&gt;//3) create MimeBodyPart object and set your message content    &lt;/span&gt;\n                    &lt;span class=&quot;hljs-type&quot;&gt;BodyPart&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;messageBodyPart1&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeBodyPart&lt;/span&gt;();\n                    messageBodyPart1.setText(&lt;span class=&quot;hljs-string&quot;&gt;&quot;How is This&quot;&lt;/span&gt;); \n                    &lt;span class=&quot;hljs-comment&quot;&gt;//4) create new MimeBodyPart object and set DataHandler object to this object    &lt;/span&gt;\n                    &lt;span class=&quot;hljs-type&quot;&gt;MimeBodyPart&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;messageBodyPart2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeBodyPart&lt;/span&gt;();\n                &lt;span class=&quot;hljs-comment&quot;&gt;//Location of file to be attached&lt;/span&gt;\n                    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Environment.getExternalStorageDirectory().getPath()+&lt;span class=&quot;hljs-string&quot;&gt;&quot;/R2832.zip&quot;&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot;&gt;//change accordingly&lt;/span&gt;\n                    &lt;span class=&quot;hljs-type&quot;&gt;DataSource&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FileDataSource&lt;/span&gt;(filename);\n                    messageBodyPart2.setDataHandler(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DataHandler&lt;/span&gt;(source));\n                    messageBodyPart2.setFileName(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Hello&quot;&lt;/span&gt;); \n                    &lt;span class=&quot;hljs-comment&quot;&gt;//5) create Multipart object and add MimeBodyPart objects to this object    &lt;/span&gt;\n                    &lt;span class=&quot;hljs-type&quot;&gt;Multipart&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;multipart&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeMultipart&lt;/span&gt;();\n                    multipart.addBodyPart(messageBodyPart1);\n                    multipart.addBodyPart(messageBodyPart2); \n                    &lt;span class=&quot;hljs-comment&quot;&gt;//6) set the multiplart object to the message object&lt;/span&gt;\n                    message.setContent(multipart ); \n                    &lt;span class=&quot;hljs-comment&quot;&gt;//7) send message &lt;/span&gt;\n                    Transport.send(message); \n                   System.out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;MESSAGE SENT....&quot;&lt;/span&gt;);\n                   }&lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (MessagingException ex) {ex.printStackTrace();}\n                  }\n                }\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Those who are getting &lt;code&gt;ClassDefNotFoundError&lt;/code&gt; try to move that Three jar files to lib folder of your Project,it worked for me!!&lt;/p&gt;\n    ","\n&lt;p&gt;I am unable to run Vinayak B&apos;s code. Finally i solved this issue by following :&lt;/p&gt;\n\n&lt;p&gt;1.Using this&lt;/p&gt;\n\n&lt;p&gt;2.Applying AsyncTask.&lt;/p&gt;\n\n&lt;p&gt;3.Changing security issue of sender gmail account.(Change to &quot;TURN ON&quot;) in &lt;a href=&quot;https://www.google.com/settings/security/lesssecureapps&quot; rel=&quot;nofollow noreferrer&quot;&gt;this&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Did you consider using Apache Commons Net ? Since 3.3, just one jar (and you can depend on it using gradle or maven) and you&apos;re done : &lt;a href=&quot;http://blog.dahanne.net/2013/06/17/sending-a-mail-in-java-and-android-with-apache-commons-net/&quot; rel=&quot;nofollow&quot;&gt;http://blog.dahanne.net/2013/06/17/sending-a-mail-in-java-and-android-with-apache-commons-net/&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Without user intervention, you can send as follows:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;Send email from client apk. Here mail.jar, activation.jar is required to send java email. If these jars are added, it might increase the APK Size. &lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Alternatively, You can use a web-service at the server side code, which will use the same mail.jar and activation.jar to send email. You can call the web-service via asynctask and send email. Refer same link. &lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;(But, you will need to know the credentials of the mail account)&lt;/p&gt;\n    ","\n&lt;p&gt;In case that you are demanded to keep the jar library as small as possible, you can include the SMTP/POP3/IMAP function separately to avoid the &quot;too many methods in the dex&quot; problem. &lt;/p&gt;\n\n&lt;p&gt;You can choose the wanted jar libraries from &lt;a href=&quot;https://java.net/projects/javamail/pages/Home&quot; rel=&quot;nofollow&quot;&gt;the javanet web page&lt;/a&gt;, for example, mailapi.jar + imap.jar can enable you to access icloud, hotmail mail server in IMAP protocol. (with the help of additional.jar and activation.jar)&lt;/p&gt;\n    ","\n&lt;p&gt;I tried using the code that @Vinayak B submitted. However I&apos;m getting an error saying: No provider for smtp&lt;/p&gt;\n\n&lt;p&gt;I created a new question for this with more information &lt;a href=&quot;https://stackoverflow.com/questions/28693325/sending-email-in-google-glass&quot;&gt;&lt;strong&gt;HERE&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;I was able to fix it myself after all. I had to use an other &lt;a href=&quot;http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-eeplat-419426.html#javamail-1.4.7-oth-JPR&quot; rel=&quot;nofollow noreferrer&quot;&gt;mail.jar&lt;/a&gt;\nand I had to make sure my &quot;&lt;a href=&quot;https://www.google.com/settings/security/lesssecureapps&quot; rel=&quot;nofollow noreferrer&quot;&gt;access for less secure apps&lt;/a&gt;&quot; was turned on.&lt;/p&gt;\n\n&lt;p&gt;I hope this helps anyone who has the same problem. With this done, this piece of code works on the google glass too.&lt;/p&gt;\n    ","\n&lt;p&gt;All the code provided in the other answers is correct and is working fine, but a bit messy, so I decided to publish a library (still in development though) to use it in a easier way: &lt;strong&gt;&lt;a href=&quot;https://github.com/enrichman/androidmail&quot; rel=&quot;nofollow&quot;&gt;AndroidMail&lt;/a&gt;&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;You have just to create a MailSender, build a mail and send it (already handled in background with an AsyncTask).&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;MailSender&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;mailSender&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MailSender&lt;/span&gt;(email, password);\n\nMail.&lt;span class=&quot;hljs-type&quot;&gt;MailBuilder&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;builder&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Mail&lt;/span&gt;.MailBuilder();\n&lt;span class=&quot;hljs-type&quot;&gt;Mail&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;mail&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; builder\n    .setSender(senderMail)\n    .addRecipient(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Recipient&lt;/span&gt;(recipient))\n    .setText(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Hello&quot;&lt;/span&gt;)\n    .build();\n\nmailSender.sendMail(mail);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You can receive a notification for the email sent and it has also the support for different Recipients types (TO, CC and BCC), attachments and html:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;MailSender&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;mailSender&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MailSender&lt;/span&gt;(email, password);\n\nMail.&lt;span class=&quot;hljs-type&quot;&gt;MailBuilder&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;builder&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Mail&lt;/span&gt;.MailBuilder();\n&lt;span class=&quot;hljs-type&quot;&gt;Mail&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;mail&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; builder\n    .setSender(senderMail)\n    .addRecipient(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Recipient&lt;/span&gt;(recipient))\n    .addRecipient(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Recipient&lt;/span&gt;(Recipient.TYPE.CC, recipientCC))\n    .setText(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Hello&quot;&lt;/span&gt;)\n    .setHtml(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;h1 style=\\&quot;color:red;\\&quot;&amp;gt;Hello&amp;lt;/h1&amp;gt;&quot;&lt;/span&gt;)\n    .addAttachment(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Attachment&lt;/span&gt;(filePath, fileName))\n    .build();\n\nmailSender.sendMail(mail, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MailSender&lt;/span&gt;.OnMailSentListener() {\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onSuccess&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// mail sent!&lt;/span&gt;\n    }\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onError&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Exception error)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// something bad happened :(&lt;/span&gt;\n    }\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You can get it via Gradle or Maven:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;compile &lt;span class=&quot;hljs-string&quot;&gt;&apos;it.enricocandino:androidmail:1.0.0-SNAPSHOT&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Please let me know if you have any issue with it! :)&lt;/p&gt;\n    ","\n&lt;p&gt;Here are a lot solutions. However I think we must change the configuration of the GMail to allow accessing from less secure devices. Go to the link below and enable it. It works for me&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://myaccount.google.com/lesssecureapps?pli=1&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://myaccount.google.com/lesssecureapps?pli=1&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Sending email programmatically with Kotlin.&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;simple email sending, not all the other features (like attachments).&lt;/li&gt;\n&lt;li&gt;TLS is always on&lt;/li&gt;\n&lt;li&gt;Only 1 gradle email dependency needed also.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;I also found this list of email POP services really helpful:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://support.office.com/en-gb/article/pop-and-imap-email-settings-for-outlook-8361e398-8af4-4e97-b147-6c6c4ac95353&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://support.office.com/en-gb/article/pop-and-imap-email-settings-for-outlook-8361e398-8af4-4e97-b147-6c6c4ac95353&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;How to use:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;    &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;auth&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; EmailService.UserPassAuthenticator(&lt;span class=&quot;hljs-string&quot;&gt;&quot;you@gmail.com&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;yourPassword&quot;&lt;/span&gt;)\n    &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; listOf(InternetAddress(&lt;span class=&quot;hljs-string&quot;&gt;&quot;to@email.com&quot;&lt;/span&gt;))\n    &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; InternetAddress(&lt;span class=&quot;hljs-string&quot;&gt;&quot;you@gmail.com&quot;&lt;/span&gt;)\n    &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;email&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; EmailService.Email(auth, to, from, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Test Subject&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Hello Body World&quot;&lt;/span&gt;)\n    &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;emailService&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; EmailService(&lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;465&lt;/span&gt;)\n    \n    GlobalScope.launch { &lt;span class=&quot;hljs-comment&quot;&gt;// or however you do background threads&lt;/span&gt;\n        emailService.send(email)\n    }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The code:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.*\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.*\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.InternetAddress\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeBodyPart\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeMessage\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeMultipart\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;EmailService&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; val server: String, &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; val port: Int) {\n\n    data &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Email&lt;/span&gt;(\n        val auth: Authenticator,\n        val toList: List&amp;lt;InternetAddress&amp;gt;,\n        val from: Address,\n        val subject: String,\n        val body: String\n    )\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;UserPassAuthenticator&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; val username: String, &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; val password: String) : Authenticator() {\n        override fun &lt;span class=&quot;hljs-title function_&quot;&gt;getPasswordAuthentication&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;: PasswordAuthentication {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; PasswordAuthentication(username, password)\n        }\n    }\n\n    fun &lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(email: Email)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;props&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Properties()\n        props[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.auth&quot;&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;\n        props[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.user&quot;&lt;/span&gt;] = email.from\n        props[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.host&quot;&lt;/span&gt;] = server\n        props[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.port&quot;&lt;/span&gt;] = port\n        props[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.starttls.enable&quot;&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;\n        props[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.ssl.trust&quot;&lt;/span&gt;] = server\n        props[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.mime.charset&quot;&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;\n        val msg: Message = MimeMessage(Session.getDefaultInstance(props, email.auth))\n        msg.setFrom(email.from)\n        msg.sentDate = Calendar.getInstance().time\n        msg.setRecipients(Message.RecipientType.TO, email.toList.toTypedArray())\n&lt;span class=&quot;hljs-comment&quot;&gt;//      msg.setRecipients(Message.RecipientType.CC, email.ccList.toTypedArray())&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//      msg.setRecipients(Message.RecipientType.BCC, email.bccList.toTypedArray())&lt;/span&gt;\n        msg.replyTo = arrayOf(email.from)\n\n        msg.addHeader(&lt;span class=&quot;hljs-string&quot;&gt;&quot;X-Mailer&quot;&lt;/span&gt;, CLIENT_NAME)\n        msg.addHeader(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Precedence&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;bulk&quot;&lt;/span&gt;)\n        msg.subject = email.subject\n\n        msg.setContent(MimeMultipart().apply {\n            addBodyPart(MimeBodyPart().apply {\n                setText(email.body, &lt;span class=&quot;hljs-string&quot;&gt;&quot;iso-8859-1&quot;&lt;/span&gt;)\n                &lt;span class=&quot;hljs-comment&quot;&gt;//setContent(email.htmlBody, &quot;text/html; charset=UTF-8&quot;)&lt;/span&gt;\n            })\n        })\n        Transport.send(msg)\n    }\n\n    companion object {\n        const &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;CLIENT_NAME&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Android StackOverflow programmatic email&quot;&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Gradle:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;dependencies {\n    implementation &lt;span class=&quot;hljs-string&quot;&gt;&apos;com.sun.mail:android-mail:1.6.4&apos;&lt;/span&gt;\n    implementation &lt;span class=&quot;hljs-string&quot;&gt;&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.3&quot;&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;AndroidManifest:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;uses-permission android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.INTERNET&quot;&lt;/span&gt; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt; Add jar files mail.jar,activation.jar,additionnal.jar\n\n String sub=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Thank you for your online registration&quot;&lt;/span&gt; ; \n &lt;span class=&quot;hljs-type&quot;&gt;Mail&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Mail&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;emailid&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;password&quot;&lt;/span&gt;); \n\n String[] toArr = {&lt;span class=&quot;hljs-string&quot;&gt;&quot;ekkatrainfo@gmail.com&quot;&lt;/span&gt;,sEmailId};\n m.setFrom(&lt;span class=&quot;hljs-string&quot;&gt;&quot;ekkatrainfo@gmail.com&quot;&lt;/span&gt;); \n\n     m.setTo(toArr);\n     m.setSubject(sub);\n    m.setBody(msg);\n\n\n\n                     &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;{\n\n\n                            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(m.send()) { \n\n                            } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; { \n\n                            } \n                          } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(Exception e) { \n\n                            Log.e(&lt;span class=&quot;hljs-string&quot;&gt;&quot;MailApp&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Could not send email&quot;&lt;/span&gt;, e); \n                          } \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;package&lt;/span&gt; com.example.ekktra;\n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Date;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Properties;\n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.CommandMap;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.DataHandler;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.DataSource;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.FileDataSource;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.MailcapCommandMap;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.BodyPart;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Multipart;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.PasswordAuthentication;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Session;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.Transport;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.InternetAddress;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeBodyPart;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeMessage;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.MimeMultipart;\n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Mail&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;javax&lt;/span&gt;.mail.Authenticator { \n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _user; \n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _pass; \n\n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String[] _to; \n\n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _from; \n\n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _port; \n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _sport; \n\n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _host; \n\n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _subject; \n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String _body; \n\n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; _auth; \n\n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; _debuggable; \n\n     &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; Multipart _multipart; \n\n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Mail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; { \n      _host = &lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// default smtp server &lt;/span&gt;\n      _port = &lt;span class=&quot;hljs-string&quot;&gt;&quot;465&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// default smtp port &lt;/span&gt;\n      _sport = &lt;span class=&quot;hljs-string&quot;&gt;&quot;465&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// default socketfactory port &lt;/span&gt;\n\n      _user = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// username &lt;/span&gt;\n      _pass = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// password &lt;/span&gt;\n      _from = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// email sent from &lt;/span&gt;\n      _subject = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// email subject &lt;/span&gt;\n      _body = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// email body &lt;/span&gt;\n\n      _debuggable = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// debug mode on or off - default off &lt;/span&gt;\n      _auth = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// smtp authentication - default on &lt;/span&gt;\n\n      _multipart = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeMultipart&lt;/span&gt;(); \n\n      &lt;span class=&quot;hljs-comment&quot;&gt;// There is something wrong with MailCap, javamail can not find a handler for the        multipart/mixed part, so this bit needs to be added. &lt;/span&gt;\n      &lt;span class=&quot;hljs-type&quot;&gt;MailcapCommandMap&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;mc&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (MailcapCommandMap) CommandMap.getDefaultCommandMap(); \n   mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/html;; x-java-content-handler=com.sun.mail.handlers.text_html&quot;&lt;/span&gt;); \n   mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml&quot;&lt;/span&gt;); \n   mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain;; x-java-content-  handler=com.sun.mail.handlers.text_plain&quot;&lt;/span&gt;); \n   mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed&quot;&lt;/span&gt;); \n   mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;message/rfc822;; x-java-content- handler=com.sun.mail.handlers.message_rfc822&quot;&lt;/span&gt;); \n    CommandMap.setDefaultCommandMap(mc); \n   } \n\n &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Mail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String user, String pass)&lt;/span&gt; { \n  &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;(); \n\n  _user = user; \n   _pass = pass; \n } \n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; Exception { \n   &lt;span class=&quot;hljs-type&quot;&gt;Properties&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;props&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; _setProperties(); \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(!_user.equals(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) &amp;amp;&amp;amp; !_pass.equals(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) &amp;amp;&amp;amp; _to.length &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; !_from.equals(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) &amp;amp;&amp;amp;   !_subject.equals(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;/*&amp;amp;&amp;amp; !_body.equals(&quot;&quot;)*/&lt;/span&gt;) { \n    &lt;span class=&quot;hljs-type&quot;&gt;Session&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Session.getInstance(props, &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;); \n\n    &lt;span class=&quot;hljs-type&quot;&gt;MimeMessage&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeMessage&lt;/span&gt;(session); \n\n     msg.setFrom(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(_from)); \n\n    InternetAddress[] addressTo = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;[_to.length]; \n     &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; _to.length; i++) { \n      addressTo[i] = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InternetAddress&lt;/span&gt;(_to[i]); \n    } \n      msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); \n\n    msg.setSubject(_subject); \n    msg.setSentDate(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;()); \n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// setup message body &lt;/span&gt;\n  &lt;span class=&quot;hljs-type&quot;&gt;BodyPart&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;messageBodyPart&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeBodyPart&lt;/span&gt;(); \n    messageBodyPart.setText(_body); \n    _multipart.addBodyPart(messageBodyPart); \n\n     &lt;span class=&quot;hljs-comment&quot;&gt;// Put parts in message &lt;/span&gt;\n    msg.setContent(_multipart); \n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// send email &lt;/span&gt;\n    Transport.send(msg); \n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;; \n   } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; { \n     &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;; \n   } \n  } \n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;addAttachment&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String filename)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; Exception { \n    &lt;span class=&quot;hljs-type&quot;&gt;BodyPart&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;messageBodyPart&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MimeBodyPart&lt;/span&gt;(); \n    &lt;span class=&quot;hljs-type&quot;&gt;DataSource&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FileDataSource&lt;/span&gt;(filename); \n      messageBodyPart.setDataHandler(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DataHandler&lt;/span&gt;(source)); \n    messageBodyPart.setFileName(filename); \n\n   _multipart.addBodyPart(messageBodyPart); \n } \n\n  &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt; \n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; PasswordAuthentication &lt;span class=&quot;hljs-title function_&quot;&gt;getPasswordAuthentication&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; { \n     &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PasswordAuthentication&lt;/span&gt;(_user, _pass); \n  } \n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; Properties &lt;span class=&quot;hljs-title function_&quot;&gt;_setProperties&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; { \n   &lt;span class=&quot;hljs-type&quot;&gt;Properties&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;props&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Properties&lt;/span&gt;(); \n\n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.host&quot;&lt;/span&gt;, _host); \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(_debuggable) { \n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.debug&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;); \n  } \n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(_auth) { \n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.auth&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;); \n   } \n\n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.port&quot;&lt;/span&gt;, _port); \n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.port&quot;&lt;/span&gt;, _sport); \n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.class&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;javax.net.ssl.SSLSocketFactory&quot;&lt;/span&gt;); \n    props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.socketFactory.fallback&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;false&quot;&lt;/span&gt;); \n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; props; \n   } \n\n   &lt;span class=&quot;hljs-comment&quot;&gt;// the getters and setters &lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;getBody&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; { \n   &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _body; \n } \n\n &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setBody&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String _body)&lt;/span&gt; { \n  &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;._body = _body; \n }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setTo&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String[] toArr)&lt;/span&gt; {\n     &lt;span class=&quot;hljs-comment&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;._to=toArr;\n }\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setFrom&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String string)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;._from=string;\n}\n\n &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setSubject&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String string)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;._subject=string;\n  }  \n\n\n   }\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;For those who want to use JavaMail with Kotlin in 2020:&lt;/p&gt;\n&lt;h2&gt;First: Add these dependencies to your build.gradle file (official JavaMail Maven Dependencies)&lt;/h2&gt;\n&lt;blockquote&gt;\n&lt;p&gt;implementation &apos;com.sun.mail:android-mail:1.6.5&apos;&lt;/p&gt;\n&lt;p&gt;implementation &apos;com.sun.mail:android-activation:1.6.5&apos;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;implementation &quot;org.bouncycastle:bcmail-jdk15on:1.65&quot;&lt;/p&gt;\n&lt;p&gt;implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.7&quot;&lt;/p&gt;\n&lt;p&gt;implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.7&quot;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;BouncyCastle is for security reasons.&lt;/p&gt;\n&lt;h2&gt;Second: Add these permissions to your AndroidManifest.xml&lt;/h2&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;uses-permission android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.INTERNET&quot;&lt;/span&gt; /&amp;gt;\n&amp;lt;uses-permission android:name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;android.permission.ACCESS_NETWORK_STATE&quot;&lt;/span&gt; /&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Third: When using SMTP, create a Config file&lt;/h2&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;object Config {\n    const &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;EMAIL_FROM&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;You_Sender_Email@email.com&quot;&lt;/span&gt;\n    const &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;PASS_FROM&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Your_Sender_Password&quot;&lt;/span&gt;\n\n    const &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;EMAIL_TO&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Your_Destination_Email@email.com&quot;&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Fourth: Create your Mailer Object&lt;/h2&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;object Mailer {\n\ninit {\n    Security.addProvider(BouncyCastleProvider())\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; fun &lt;span class=&quot;hljs-title function_&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;: Properties = Properties().also {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Smtp server&lt;/span&gt;\n        it[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.host&quot;&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Change when necessary&lt;/span&gt;\n        it[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.auth&quot;&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;\n        it[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.port&quot;&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;465&quot;&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Easy and fast way to enable ssl in JavaMail&lt;/span&gt;\n        it[&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.ssl.enable&quot;&lt;/span&gt;] = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n    }\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Dont ever use &quot;getDefaultInstance&quot; like other examples do!&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; fun &lt;span class=&quot;hljs-title function_&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(emailFrom: String, emailPass: String)&lt;/span&gt;: Session = Session.getInstance(props(), object : Authenticator() {\n    override fun &lt;span class=&quot;hljs-title function_&quot;&gt;getPasswordAuthentication&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;: PasswordAuthentication {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; PasswordAuthentication(emailFrom, emailPass)\n    }\n})\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; fun &lt;span class=&quot;hljs-title function_&quot;&gt;builtMessage&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(firstName: String, surName: String)&lt;/span&gt;: String {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&quot;\n            &amp;lt;b&amp;gt;Name:&amp;lt;/b&amp;gt; $firstName  &amp;lt;br/&amp;gt;\n            &amp;lt;b&amp;gt;Surname:&amp;lt;/b&amp;gt; $surName &amp;lt;br/&amp;gt;\n        &quot;&quot;&quot;&lt;/span&gt;.trimIndent()\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; fun &lt;span class=&quot;hljs-title function_&quot;&gt;builtSubject&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(issue: String, firstName: String, surName: String)&lt;/span&gt;:String {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&quot;\n            $issue | $firstName, $surName\n        &quot;&quot;&quot;&lt;/span&gt;.trimIndent()\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; fun &lt;span class=&quot;hljs-title function_&quot;&gt;sendMessageTo&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(emailFrom: String, session: Session, message: String, subject: String)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        MimeMessage(session).let { mime -&amp;gt;\n            mime.setFrom(InternetAddress(emailFrom))\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Adding receiver&lt;/span&gt;\n            mime.addRecipient(Message.RecipientType.TO, InternetAddress(Config.EMAIL_TO))\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Adding subject&lt;/span&gt;\n            mime.subject = subject\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Adding message&lt;/span&gt;\n            mime.setText(message)\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Set Content of Message to Html if needed&lt;/span&gt;\n            mime.setContent(message, &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/html&quot;&lt;/span&gt;)\n            &lt;span class=&quot;hljs-comment&quot;&gt;// send mail&lt;/span&gt;\n            Transport.send(mime)\n        }\n\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (e: MessagingException) {\n        Log.e(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;// Or use timber, it really doesn&apos;t matter&lt;/span&gt;\n    }\n}\n\nfun &lt;span class=&quot;hljs-title function_&quot;&gt;sendMail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(firstName: String, surName: String)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Open a session&lt;/span&gt;\n        &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; session(Config.EMAIL_FROM, Config.PASSWORD_FROM)\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Create a message&lt;/span&gt;\n        &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; builtMessage(firstName, surName)\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Create subject&lt;/span&gt;\n        &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;subject&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; builtSubject(firstName, surName)\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Send Email&lt;/span&gt;\n        CoroutineScope(Dispatchers.IO).launch { sendMessageTo(Config.EMAIL_FROM, session, message, subject) }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Note&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;If you want a more secure way to send your email (and you want a more secure way!), use http as mentioned in the solutions before (I will maybe add it later in this answer)&lt;/li&gt;\n&lt;li&gt;You have to properly check, if the users phone has internet access, otherwise the app will crash.&lt;/li&gt;\n&lt;li&gt;When using gmail, enable &quot;less secure apps&quot; (this will not work, when you gmail has two factors enabled) &lt;a href=&quot;https://myaccount.google.com/lesssecureapps?pli=1&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://myaccount.google.com/lesssecureapps?pli=1&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Some credits belong to: &lt;a href=&quot;https://medium.com/@chetan.garg36/android-send-mails-not-intent-642d2a71d2ee&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://medium.com/@chetan.garg36/android-send-mails-not-intent-642d2a71d2ee&lt;/a&gt; (he used RxJava for his solution)&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;package&lt;/span&gt; io.formics.tourguide\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.annotation.SuppressLint\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.content.Intent\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.net.Credentials\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.net.Uri\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; androidx.appcompat.app.AppCompatActivity\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.os.Bundle\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.util.Log\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; android.widget.Toast\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; kotlinx.android.synthetic.main.activity_feedback.*\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; org.jetbrains.annotations.Async\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.lang.Exception\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Properties;\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.DataHandler;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.activation.FileDataSource\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.*\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.mail.internet.*\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FeedbackActivity&lt;/span&gt; : AppCompatActivity()  {\n  \n    &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;props&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Properties()\n\n\n    override fun &lt;span class=&quot;hljs-title function_&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(savedInstanceState: Bundle?)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_feedback)\n\n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.auth&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;);\n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.starttls.enable&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;);\n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.host&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;);\n        props.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;mail.smtp.port&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;587&quot;&lt;/span&gt;);\n\n        btnSendEmail.setOnClickListener {\n            Thread {\n                &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n                    sendEmail()\n                    &lt;span class=&quot;hljs-comment&quot;&gt;// Your implementation&lt;/span&gt;\n                } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (ex: Exception) {\n                    ex.printStackTrace()\n                }\n            }.start()\n\n\n        }\n    }\n\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; fun &lt;span class=&quot;hljs-title function_&quot;&gt;sendEmail&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n\n\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n\n            &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Session.getInstance(props,\n                object : javax.mail.Authenticator() {\n                    &lt;span class=&quot;hljs-comment&quot;&gt;//Authenticating the password&lt;/span&gt;\n                    override fun &lt;span class=&quot;hljs-title function_&quot;&gt;getPasswordAuthentication&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;: javax.mail.PasswordAuthentication {\n                        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; PasswordAuthentication(&lt;span class=&quot;hljs-string&quot;&gt;&quot;abc@xyz.com&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;password&quot;&lt;/span&gt;)\n                    }\n                })\n\n            &lt;span class=&quot;hljs-type&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; MimeMessage(session);\n            message.setFrom(InternetAddress(&lt;span class=&quot;hljs-string&quot;&gt;&quot;abc@xyz.com&quot;&lt;/span&gt;));\n            message.setRecipients(\n                Message.RecipientType.TO,\n                InternetAddress.parse(editCC.text.toString())\n            )\n            message.subject = editSubject.text.toString()\n            message.setText(\n                &lt;span class=&quot;hljs-string&quot;&gt;&quot;Dear Mail Crawler,&quot;&lt;/span&gt;\n                        + &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n\\n No spam to my email, please!&quot;&lt;/span&gt;\n            );\n\n            &lt;span class=&quot;hljs-comment&quot;&gt;//val messageBodyPart = MimeBodyPart();&lt;/span&gt;\n\n            &lt;span class=&quot;hljs-comment&quot;&gt;//val multipart = MimeMultipart();&lt;/span&gt;\n\n            &lt;span class=&quot;hljs-comment&quot;&gt;//val file = &quot;path of file to be attached&quot;;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//            val fileName = &quot;attachmentName&quot;&lt;/span&gt;\n           &lt;span class=&quot;hljs-comment&quot;&gt;// val source = FileDataSource(file);&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//messageBodyPart.setDataHandler(DataHandler(source));&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//messageBodyPart.setFileName(fileName);&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;//multipart.addBodyPart(messageBodyPart);&lt;/span&gt;\n\n            &lt;span class=&quot;hljs-comment&quot;&gt;//message.setContent(multipart);&lt;/span&gt;\n\n            Transport.send(message);\n            System.out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Done&quot;&lt;/span&gt;);\n\n\n\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (e: MessagingException) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt;  RuntimeException(e);\n        }\n\n           }\n}\n\n\n\n\n \n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;To add attachment, don&apos;t forget to add. &lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;MailcapCommandMap&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;mc&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (MailcapCommandMap) CommandMap\n            .getDefaultCommandMap();\n    mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/html;; x-java-content-handler=com.sun.mail.handlers.text_html&quot;&lt;/span&gt;);\n    mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml&quot;&lt;/span&gt;);\n    mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain&quot;&lt;/span&gt;);\n    mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed&quot;&lt;/span&gt;);\n    mc.addMailcap(&lt;span class=&quot;hljs-string&quot;&gt;&quot;message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822&quot;&lt;/span&gt;);\n    CommandMap.setDefaultCommandMap(mc);\n&lt;/code&gt;&lt;/pre&gt;\n    "]},"randomTags":[{"name":"startactivityforresult","slug":"startactivityforresult"},{"name":"terminal","slug":"terminal"},{"name":"object-literal","slug":"object-literal"},{"name":"javascript","slug":"javascript"},{"name":"scroll","slug":"scroll"},{"name":"android-input-method","slug":"android-input-method"},{"name":"permutation","slug":"permutation"},{"name":"client-side","slug":"client-side"},{"name":"android-activity","slug":"android-activity"},{"name":"system.in","slug":"system.in"},{"name":"c++","slug":"c++"},{"name":"main","slug":"main"},{"name":"mysql","slug":"mysql"},{"name":"nullreferenceexception","slug":"nullreferenceexception"},{"name":"user-interface","slug":"user-interface"},{"name":"equality-operator","slug":"equality-operator"},{"name":"jvm","slug":"jvm"},{"name":"git","slug":"git"},{"name":"compiler-errors","slug":"compiler-errors"},{"name":"chunks","slug":"chunks"}]},"__N_SSG":true}