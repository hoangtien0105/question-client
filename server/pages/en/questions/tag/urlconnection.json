{"pageProps":{"data":{"count":1,"rows":[{"id":210,"title":"How to use java.net.URLConnection to fire and handle HTTP requests","slug":"how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934","postType":"QUESTION","createdAt":"2022-07-09T17:20:45.000Z","updatedAt":"2022-07-09T17:20:45.000Z","tags":[{"id":1472,"name":"urlconnection","slug":"urlconnection","createdAt":"2022-07-09T17:20:46.000Z","updatedAt":"2022-07-09T17:20:46.000Z","Questions_Tags":{"questionId":210,"tagId":1472}}]}]},"slug":"urlconnection","page":1,"answers":{"210":["\n&lt;p&gt;&lt;sup&gt;&lt;em&gt;First a disclaimer beforehand: the posted code snippets are all basic examples. You&apos;ll need to handle trivial &lt;code&gt;IOException&lt;/code&gt;s and &lt;code&gt;RuntimeException&lt;/code&gt;s like &lt;code&gt;NullPointerException&lt;/code&gt;, &lt;code&gt;ArrayIndexOutOfBoundsException&lt;/code&gt; and consorts yourself.&lt;/em&gt;&lt;/sup&gt;&lt;/p&gt;\n&lt;p&gt;&lt;sup&gt;&lt;em&gt;In case you&apos;re developing for Android instead of Java, note also that since introduction of API level 28, cleartext HTTP requests are &lt;a href=&quot;https://developer.android.com/about/versions/pie/android-9.0-changes-28#tls-enabled&quot; rel=&quot;noreferrer&quot;&gt;disabled by default&lt;/a&gt;. You are encouraged to use &lt;code&gt;HttpsURLConnection&lt;/code&gt;, but if it is really necessary, cleartext can be enabled in the Application Manifest.&lt;/em&gt;&lt;/sup&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;h3&gt;Preparing&lt;/h3&gt;\n&lt;p&gt;We first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;http://example.com&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;charset&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;;  &lt;span class=&quot;hljs-comment&quot;&gt;// Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;param1&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;value1&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;param2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;value2&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;query&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; String.format(&lt;span class=&quot;hljs-string&quot;&gt;&quot;param1=%s&amp;amp;param2=%s&quot;&lt;/span&gt;,\n    URLEncoder.encode(param1, charset),\n    URLEncoder.encode(param2, charset));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The query parameters must be in &lt;code&gt;name=value&lt;/code&gt; format and be concatenated by &lt;code&gt;&amp;amp;&lt;/code&gt;. You would normally also &lt;a href=&quot;http://en.wikipedia.org/wiki/Percent-encoding&quot; rel=&quot;noreferrer&quot;&gt;URL-encode&lt;/a&gt; the query parameters with the specified charset using &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html#encode-java.lang.String-java.lang.String-&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;URLEncoder#encode()&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;sup&gt;The &lt;code&gt;String#format()&lt;/code&gt; is just for convenience. I prefer it when I would need the String concatenation operator &lt;code&gt;+&lt;/code&gt; more than twice.&lt;/sup&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;h3&gt;Firing an &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3&quot; rel=&quot;noreferrer&quot;&gt;HTTP GET&lt;/a&gt; request with (optionally) query parameters&lt;/h3&gt;\n&lt;p&gt;It&apos;s a trivial task. It&apos;s the default request method.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;URLConnection&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url + &lt;span class=&quot;hljs-string&quot;&gt;&quot;?&quot;&lt;/span&gt; + query).openConnection();\nconnection.setRequestProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Accept-Charset&quot;&lt;/span&gt;, charset);\n&lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; connection.getInputStream();\n&lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Any query string should be concatenated to the URL using &lt;code&gt;?&lt;/code&gt;. The &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;Accept-Charset&lt;/code&gt;&lt;/a&gt; header may hint the server what encoding the parameters are in. If you don&apos;t send any query string, then you can leave the &lt;code&gt;Accept-Charset&lt;/code&gt; header away. If you don&apos;t need to set any headers, then you can even use the &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#openStream%28%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;URL#openStream()&lt;/code&gt;&lt;/a&gt; shortcut method.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openStream();\n&lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Either way, if the other side is an &lt;a href=&quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpServlet&lt;/code&gt;&lt;/a&gt;, then its &lt;a href=&quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;doGet()&lt;/code&gt;&lt;/a&gt; method will be called and the parameters will be available by &lt;a href=&quot;http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpServletRequest#getParameter()&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;For testing purposes, you can print the response body to &lt;a href=&quot;https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29&quot; rel=&quot;noreferrer&quot;&gt;standard output&lt;/a&gt; as below:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;Scanner&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;scanner&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Scanner&lt;/span&gt;(response)) {\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;responseBody&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; scanner.useDelimiter(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\\\A&quot;&lt;/span&gt;).next();\n    System.out.println(responseBody);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;h3&gt;Firing an &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5&quot; rel=&quot;noreferrer&quot;&gt;HTTP POST&lt;/a&gt; request with query parameters&lt;/h3&gt;\n&lt;p&gt;Setting the &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;URLConnection#setDoOutput()&lt;/code&gt;&lt;/a&gt; to &lt;code&gt;true&lt;/code&gt; implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt; wherein the query string is written to the request body.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;URLConnection&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openConnection();\nconnection.setDoOutput(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Triggers POST.&lt;/span&gt;\nconnection.setRequestProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Accept-Charset&quot;&lt;/span&gt;, charset);\nconnection.setRequestProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/x-www-form-urlencoded;charset=&quot;&lt;/span&gt; + charset);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;OutputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; connection.getOutputStream()) {\n    output.write(query.getBytes(charset));\n}\n\n&lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; connection.getInputStream();\n&lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note: whenever you&apos;d like to submit a HTML form programmatically, don&apos;t forget to take the &lt;code&gt;name=value&lt;/code&gt; pairs of any &lt;code&gt;&amp;lt;input type=&quot;hidden&quot;&amp;gt;&lt;/code&gt; elements into the query string and of course also the &lt;code&gt;name=value&lt;/code&gt; pair of the &lt;code&gt;&amp;lt;input type=&quot;submit&quot;&amp;gt;&lt;/code&gt; element which you&apos;d like to &quot;press&quot; programmatically (because that&apos;s usually been used in the server side to distinguish if a button was pressed and if so, which one).&lt;/p&gt;\n&lt;p&gt;You can also cast the obtained &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;URLConnection&lt;/code&gt;&lt;/a&gt; to &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpURLConnection&lt;/code&gt;&lt;/a&gt; and use its &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpURLConnection#setRequestMethod()&lt;/code&gt;&lt;/a&gt; instead. But if you&apos;re trying to use the connection for output you still need to set &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;URLConnection#setDoOutput()&lt;/code&gt;&lt;/a&gt; to &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;HttpURLConnection&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;httpConnection&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (HttpURLConnection) &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openConnection();\nhttpConnection.setRequestMethod(&lt;span class=&quot;hljs-string&quot;&gt;&quot;POST&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Either way, if the other side is an &lt;a href=&quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpServlet&lt;/code&gt;&lt;/a&gt;, then its &lt;a href=&quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;doPost()&lt;/code&gt;&lt;/a&gt; method will be called and the parameters will be available by &lt;a href=&quot;http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpServletRequest#getParameter()&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;hr&gt;\n&lt;h3&gt;Actually firing the HTTP request&lt;/h3&gt;\n&lt;p&gt;You can fire the HTTP request explicitly with &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#connect%28%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;URLConnection#connect()&lt;/code&gt;&lt;/a&gt;, but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#getInputStream%28%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;URLConnection#getInputStream()&lt;/code&gt;&lt;/a&gt; and so on. The above examples does exactly that, so the &lt;code&gt;connect()&lt;/code&gt; call is in fact superfluous.&lt;/p&gt;\n&lt;hr&gt;\n&lt;h3&gt;Gathering HTTP response information&lt;/h3&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html&quot; rel=&quot;noreferrer&quot;&gt;HTTP response status&lt;/a&gt;:&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;You need an &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpURLConnection&lt;/code&gt;&lt;/a&gt; here. Cast it first if necessary.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; httpConnection.getResponseCode();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=&quot;2&quot;&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html&quot; rel=&quot;noreferrer&quot;&gt;HTTP response headers&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (Entry&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt; header : connection.getHeaderFields().entrySet()) {\n     System.out.println(header.getKey() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;=&quot;&lt;/span&gt; + header.getValue());\n }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17&quot; rel=&quot;noreferrer&quot;&gt;HTTP response encoding&lt;/a&gt;:&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;When the &lt;code&gt;Content-Type&lt;/code&gt; contains a &lt;code&gt;charset&lt;/code&gt; parameter, then the response body is likely text based and we&apos;d like to process the response body with the server-side specified character encoding then.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;contentType&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; connection.getHeaderField(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;charset&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (String param : contentType.replace(&lt;span class=&quot;hljs-string&quot;&gt;&quot; &quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;).split(&lt;span class=&quot;hljs-string&quot;&gt;&quot;;&quot;&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (param.startsWith(&lt;span class=&quot;hljs-string&quot;&gt;&quot;charset=&quot;&lt;/span&gt;)) {\n            charset = param.split(&lt;span class=&quot;hljs-string&quot;&gt;&quot;=&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;];\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n        }\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (charset != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;BufferedReader&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;reader&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;BufferedReader&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InputStreamReader&lt;/span&gt;(response, charset))) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (String line; (line = reader.readLine()) != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;) {\n                &lt;span class=&quot;hljs-comment&quot;&gt;// ... System.out.println(line)?&lt;/span&gt;\n            }\n        }\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// It&apos;s likely binary content, use InputStream/OutputStream.&lt;/span&gt;\n    }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;h3&gt;Maintaining the session&lt;/h3&gt;\n&lt;p&gt;The server side session is usually backed by a cookie. Some web forms require that you&apos;re logged in and/or are tracked by a session. You can use the &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;CookieHandler&lt;/code&gt;&lt;/a&gt; API to maintain cookies. You need to prepare a &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;CookieManager&lt;/code&gt;&lt;/a&gt; with a &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;CookiePolicy&lt;/code&gt;&lt;/a&gt; of &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html#ACCEPT_ALL&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;ACCEPT_ALL&lt;/code&gt;&lt;/a&gt; before sending all HTTP requests.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// First set the default cookie manager.&lt;/span&gt;\nCookieHandler.setDefault(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;CookieManager&lt;/span&gt;(&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, CookiePolicy.ACCEPT_ALL));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// All the following subsequent URLConnections will use the same cookie manager.&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;URLConnection&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openConnection();\n&lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n\nconnection = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openConnection();\n&lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n\nconnection = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openConnection();\n&lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all &lt;code&gt;Set-Cookie&lt;/code&gt; headers from the response of the login or the first &lt;code&gt;GET&lt;/code&gt; request and then pass this through the subsequent requests.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Gather all cookies on the first request.&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;URLConnection&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openConnection();\nList&amp;lt;String&amp;gt; cookies = connection.getHeaderFields().get(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Set-Cookie&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Then use the same cookies on all subsequent requests.&lt;/span&gt;\nconnection = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openConnection();\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (String cookie : cookies) {\n    connection.addRequestProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Cookie&quot;&lt;/span&gt;, cookie.split(&lt;span class=&quot;hljs-string&quot;&gt;&quot;;&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]);\n}\n&lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The &lt;code&gt;split(&quot;;&quot;, 2)[0]&lt;/code&gt; is there to get rid of cookie attributes which are irrelevant for the server side like &lt;code&gt;expires&lt;/code&gt;, &lt;code&gt;path&lt;/code&gt;, etc. Alternatively, you could also use &lt;code&gt;cookie.substring(0, cookie.indexOf(&apos;;&apos;))&lt;/code&gt; instead of &lt;code&gt;split()&lt;/code&gt;.&lt;/p&gt;\n&lt;hr&gt;\n&lt;h3&gt;Streaming mode&lt;/h3&gt;\n&lt;p&gt;The &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpURLConnection&lt;/code&gt;&lt;/a&gt; will by default buffer the &lt;em&gt;entire&lt;/em&gt; request body before actually sending it, regardless of whether you&apos;ve set a fixed content length yourself using &lt;code&gt;connection.setRequestProperty(&quot;Content-Length&quot;, contentLength);&lt;/code&gt;. This may cause &lt;code&gt;OutOfMemoryException&lt;/code&gt;s whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpURLConnection#setFixedLengthStreamingMode()&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;httpConnection.setFixedLengthStreamingMode(contentLength);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;But if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpURLConnection#setChunkedStreamingMode()&lt;/code&gt;&lt;/a&gt; accordingly. This will set the HTTP &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;Transfer-Encoding&lt;/code&gt;&lt;/a&gt; header to &lt;code&gt;chunked&lt;/code&gt; which will force the request body being sent in chunks. The below example will send the body in chunks of 1&amp;nbsp;KB.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;httpConnection.setChunkedStreamingMode(&lt;span class=&quot;hljs-number&quot;&gt;1024&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;h3&gt;User-Agent&lt;/h3&gt;\n&lt;p&gt;It can happen that &lt;a href=&quot;https://stackoverflow.com/questions/13670692/403-forbidden-with-java-but-not-web-browser&quot;&gt;a request returns an unexpected response, while it works fine with a real web browser&lt;/a&gt;. The server side is probably blocking requests based on the &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;User-Agent&lt;/code&gt;&lt;/a&gt; request header. The &lt;code&gt;URLConnection&lt;/code&gt; will by default set it to &lt;code&gt;Java/1.6.0_19&lt;/code&gt; where the last part is obviously the JRE version. You can override this as follows:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;connection.setRequestProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;User-Agent&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36&quot;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Do as if you&apos;re using Chrome 41 on Windows 7.&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Use the User-Agent string from a &lt;a href=&quot;http://www.useragentstring.com/pages/useragentstring.php&quot; rel=&quot;noreferrer&quot;&gt;recent browser&lt;/a&gt;.&lt;/p&gt;\n&lt;hr&gt;\n&lt;h3&gt;Error handling&lt;/h3&gt;\n&lt;p&gt;If the HTTP response code is &lt;code&gt;4nn&lt;/code&gt; (Client Error) or &lt;code&gt;5nn&lt;/code&gt; (Server Error), then you may want to read the &lt;code&gt;HttpURLConnection#getErrorStream()&lt;/code&gt; to see if the server has sent any useful error information.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; ((HttpURLConnection) connection).getErrorStream();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;If the HTTP response code is -1, then something went wrong with connection and response handling. The &lt;code&gt;HttpURLConnection&lt;/code&gt; implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the &lt;code&gt;http.keepAlive&lt;/code&gt; system property to &lt;code&gt;false&lt;/code&gt;. You can do this programmatically in the beginning of your application by:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;System.setProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http.keepAlive&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;false&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;h3&gt;Uploading files&lt;/h3&gt;\n&lt;p&gt;You&apos;d normally use &lt;a href=&quot;http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;multipart/form-data&lt;/code&gt;&lt;/a&gt; encoding for mixed POST content (binary and character data). The encoding is in more detail described in &lt;a href=&quot;http://www.faqs.org/rfcs/rfc2388.html&quot; rel=&quot;noreferrer&quot;&gt;RFC2388&lt;/a&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;param&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-type&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;textFile&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/path/to/file.txt&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-type&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;binaryFile&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/path/to/file.bin&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;boundary&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Long.toHexString(System.currentTimeMillis()); &lt;span class=&quot;hljs-comment&quot;&gt;// Just generate some unique random value.&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;CRLF&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\r\\n&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Line separator required by multipart/form-data.&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;URLConnection&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openConnection();\nconnection.setDoOutput(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\nconnection.setRequestProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/form-data; boundary=&quot;&lt;/span&gt; + boundary);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; (\n    &lt;span class=&quot;hljs-type&quot;&gt;OutputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; connection.getOutputStream();\n    &lt;span class=&quot;hljs-type&quot;&gt;PrintWriter&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;writer&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PrintWriter&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;OutputStreamWriter&lt;/span&gt;(output, charset), &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Send normal param.&lt;/span&gt;\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;--&quot;&lt;/span&gt; + boundary).append(CRLF);\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Disposition: form-data; name=\\&quot;param\\&quot;&quot;&lt;/span&gt;).append(CRLF);\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type: text/plain; charset=&quot;&lt;/span&gt; + charset).append(CRLF);\n    writer.append(CRLF).append(param).append(CRLF).flush();\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Send text file.&lt;/span&gt;\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;--&quot;&lt;/span&gt; + boundary).append(CRLF);\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Disposition: form-data; name=\\&quot;textFile\\&quot;; filename=\\&quot;&quot;&lt;/span&gt; + textFile.getName() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\&quot;&quot;&lt;/span&gt;).append(CRLF);\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type: text/plain; charset=&quot;&lt;/span&gt; + charset).append(CRLF); &lt;span class=&quot;hljs-comment&quot;&gt;// Text file itself must be saved in this charset!&lt;/span&gt;\n    writer.append(CRLF).flush();\n    Files.copy(textFile.toPath(), output);\n    output.flush(); &lt;span class=&quot;hljs-comment&quot;&gt;// Important before continuing with writer!&lt;/span&gt;\n    writer.append(CRLF).flush(); &lt;span class=&quot;hljs-comment&quot;&gt;// CRLF is important! It indicates end of boundary.&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Send binary file.&lt;/span&gt;\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;--&quot;&lt;/span&gt; + boundary).append(CRLF);\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Disposition: form-data; name=\\&quot;binaryFile\\&quot;; filename=\\&quot;&quot;&lt;/span&gt; + binaryFile.getName() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\&quot;&quot;&lt;/span&gt;).append(CRLF);\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type: &quot;&lt;/span&gt; + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Transfer-Encoding: binary&quot;&lt;/span&gt;).append(CRLF);\n    writer.append(CRLF).flush();\n    Files.copy(binaryFile.toPath(), output);\n    output.flush(); &lt;span class=&quot;hljs-comment&quot;&gt;// Important before continuing with writer!&lt;/span&gt;\n    writer.append(CRLF).flush(); &lt;span class=&quot;hljs-comment&quot;&gt;// CRLF is important! It indicates end of boundary.&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// End of multipart/form-data.&lt;/span&gt;\n    writer.append(&lt;span class=&quot;hljs-string&quot;&gt;&quot;--&quot;&lt;/span&gt; + boundary + &lt;span class=&quot;hljs-string&quot;&gt;&quot;--&quot;&lt;/span&gt;).append(CRLF).flush();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;If the other side is an &lt;a href=&quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpServlet&lt;/code&gt;&lt;/a&gt;, then its &lt;a href=&quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;doPost()&lt;/code&gt;&lt;/a&gt; method will be called and the parts will be available by &lt;a href=&quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpServletRequest#getPart()&lt;/code&gt;&lt;/a&gt; (note, thus &lt;strong&gt;not&lt;/strong&gt; &lt;code&gt;getParameter()&lt;/code&gt; and so on!). The &lt;code&gt;getPart()&lt;/code&gt; method is however relatively new, it&apos;s introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc.). Prior to Servlet 3.0, your best choice is using &lt;a href=&quot;http://commons.apache.org/fileupload&quot; rel=&quot;noreferrer&quot;&gt;Apache Commons FileUpload&lt;/a&gt; to parse a &lt;code&gt;multipart/form-data&lt;/code&gt; request. Also see &lt;a href=&quot;https://stackoverflow.com/questions/2422468/upload-big-file-to-servlet/2424824#2424824&quot;&gt;this answer&lt;/a&gt; for examples of both the FileUpload and the Servelt 3.0 approaches.&lt;/p&gt;\n&lt;hr&gt;\n&lt;h3&gt;Dealing with untrusted or misconfigured HTTPS sites&lt;/h3&gt;\n&lt;p&gt;&lt;sup&gt;&lt;em&gt;In case you&apos;re developing for Android instead of Java, &lt;strong&gt;be careful&lt;/strong&gt;: the workaround below may save your day if you don&apos;t have correct certificates deployed during development. But you should not use it for production. These days (April 2021) Google will not allow your app be distributed on Play Store if they detect insecure hostname verifier, see &lt;a href=&quot;https://support.google.com/faqs/answer/7188426.&quot; rel=&quot;noreferrer&quot;&gt;https://support.google.com/faqs/answer/7188426.&lt;/a&gt;&lt;/em&gt;&lt;/sup&gt;&lt;/p&gt;\n&lt;p&gt;Sometimes you need to connect an HTTPS URL, perhaps because you&apos;re writing a web scraper. In that case, you may likely face a &lt;code&gt;javax.net.ssl.SSLException: Not trusted server certificate&lt;/code&gt; on some HTTPS sites who doesn&apos;t keep their SSL certificates up to date, or a &lt;code&gt;java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found&lt;/code&gt; or &lt;code&gt;javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name&lt;/code&gt; on some misconfigured HTTPS sites.&lt;/p&gt;\n&lt;p&gt;The following one-time-run &lt;code&gt;static&lt;/code&gt; initializer in your web scraper class should make &lt;code&gt;HttpsURLConnection&lt;/code&gt; more lenient as to those HTTPS sites and thus not throw those exceptions anymore.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; {\n    TrustManager[] trustAllCertificates = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;TrustManager&lt;/span&gt;[] {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;X509TrustManager&lt;/span&gt;() {\n            &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; X509Certificate[] getAcceptedIssuers() {\n                &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Not relevant.&lt;/span&gt;\n            }\n            &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;checkClientTrusted&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(X509Certificate[] certs, String authType)&lt;/span&gt; {\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Do nothing. Just allow them all.&lt;/span&gt;\n            }\n            &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;checkServerTrusted&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(X509Certificate[] certs, String authType)&lt;/span&gt; {\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Do nothing. Just allow them all.&lt;/span&gt;\n            }\n        }\n    };\n\n    &lt;span class=&quot;hljs-type&quot;&gt;HostnameVerifier&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;trustAllHostnames&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HostnameVerifier&lt;/span&gt;() {\n        &lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;verify&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String hostname, SSLSession session)&lt;/span&gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Just allow them all.&lt;/span&gt;\n        }\n    };\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        System.setProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;jsse.enableSNIExtension&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;false&quot;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-type&quot;&gt;SSLContext&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;sc&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; SSLContext.getInstance(&lt;span class=&quot;hljs-string&quot;&gt;&quot;SSL&quot;&lt;/span&gt;);\n        sc.init(&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, trustAllCertificates, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SecureRandom&lt;/span&gt;());\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n        HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (GeneralSecurityException e) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ExceptionInInitializerError&lt;/span&gt;(e);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;h3&gt;Last words&lt;/h3&gt;\n&lt;p&gt;The &lt;a href=&quot;http://hc.apache.org/httpcomponents-client-ga/&quot; rel=&quot;noreferrer&quot;&gt;Apache HttpComponents HttpClient&lt;/a&gt; is &lt;em&gt;much&lt;/em&gt; more convenient in this all :)&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;http://hc.apache.org/httpcomponents-client-ga/tutorial/html/&quot; rel=&quot;noreferrer&quot;&gt;HttpClient Tutorial&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://hc.apache.org/httpcomponents-client-ga/examples.html&quot; rel=&quot;noreferrer&quot;&gt;HttpClient Examples&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr&gt;\n&lt;h3&gt;Parsing and extracting HTML&lt;/h3&gt;\n&lt;p&gt;If all you want is parsing and extracting data from HTML, then better use a HTML parser like &lt;a href=&quot;http://jsoup.org&quot; rel=&quot;noreferrer&quot;&gt;Jsoup&lt;/a&gt;.&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281&quot;&gt;What are the pros/cons of leading HTML parsers in Java&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/2835505/how-to-scan-a-website-or-page-for-info-and-bring-it-into-my-program/2835555#2835555&quot;&gt;How to scan and extract a webpage in Java&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;When working with HTTP it&apos;s almost always more useful to refer to &lt;code&gt;HttpURLConnection&lt;/code&gt; rather than the base class &lt;code&gt;URLConnection&lt;/code&gt; (since &lt;code&gt;URLConnection&lt;/code&gt; is an abstract class when you ask for &lt;code&gt;URLConnection.openConnection()&lt;/code&gt; on a HTTP URL that&apos;s what you&apos;ll get back anyway).&lt;/p&gt;\n\n&lt;p&gt;Then you can instead of relying on &lt;code&gt;URLConnection#setDoOutput(true)&lt;/code&gt; to implicitly set the request method to &lt;em&gt;POST&lt;/em&gt; instead do &lt;code&gt;httpURLConnection.setRequestMethod(&quot;POST&quot;)&lt;/code&gt; which some might find more natural (and which also allows you to specify other request methods such as &lt;em&gt;PUT&lt;/em&gt;, &lt;em&gt;DELETE&lt;/em&gt;, ...).&lt;/p&gt;\n\n&lt;p&gt;It also provides useful HTTP constants so you can do:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;responseCode&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; httpURLConnection.getResponseCode();\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (responseCode == HttpURLConnection.HTTP_OK) {\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Inspired by this and other questions on Stack&amp;nbsp;Overflow, I&apos;ve created a minimal open source &lt;a href=&quot;http://code.google.com/p/basic-http-client/&quot; rel=&quot;nofollow noreferrer&quot;&gt;basic-http-client&lt;/a&gt; that embodies most of the techniques found here.&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://code.google.com/p/google-http-java-client/&quot; rel=&quot;nofollow noreferrer&quot;&gt;google-http-java-client&lt;/a&gt; is also a great open source resource.&lt;/p&gt;\n    ","\n&lt;p&gt;I suggest you take a look at the code on &lt;a href=&quot;https://github.com/kevinsawicki/http-request&quot;&gt;kevinsawicki/http-request&lt;/a&gt;, its basically a wrapper on top of &lt;code&gt;HttpUrlConnection&lt;/code&gt; it provides a much simpler API in case you just want to make the requests right now or you can take a look at the sources (it&apos;s not too big) to take a look at how connections are handled.&lt;/p&gt;\n\n&lt;p&gt;Example: Make a &lt;code&gt;GET&lt;/code&gt; request with content type &lt;code&gt;application/json&lt;/code&gt; and some query parameters:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// GET http://google.com?q=baseball%20gloves&amp;amp;size=100&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HttpRequest.get(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://google.com&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;q&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;baseball gloves&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;size&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;)\n        .accept(&lt;span class=&quot;hljs-string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;)\n        .body();\nSystem.out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Response was: &quot;&lt;/span&gt; + response);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h2&gt;Update&lt;/h2&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;The new HTTP Client shipped with Java 9 but as part of an\n  Incubator module named &lt;code&gt;jdk.incubator.httpclient&lt;/code&gt;. Incubator modules are\n  a means of putting non-final APIs in the hands of developers while the\n  APIs progress towards either finalization or removal in a future\n  release.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;In Java 9, you can send a &lt;code&gt;GET&lt;/code&gt; request like:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// GET&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;HttpResponse&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HttpRequest\n    .create(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URI&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://www.stackoverflow.com&quot;&lt;/span&gt;))\n    .headers(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Foo&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;foovalue&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Bar&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;barvalue&quot;&lt;/span&gt;)\n    .GET()\n    .response();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then you can examine the returned &lt;code&gt;HttpResponse&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;statusCode&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; response.statusCode();\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;responseBody&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; response.body(HttpResponse.asString());\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Since this new HTTP Client is in &lt;del&gt;&lt;code&gt;java.httpclient&lt;/code&gt;&lt;/del&gt; &lt;code&gt;jdk.incubator.httpclient&lt;/code&gt; module, you should declare this dependency in your &lt;code&gt;module-info.java&lt;/code&gt; file:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;module&lt;/span&gt; com.foo.bar {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;requires&lt;/span&gt; jdk.incubator.httpclient;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;There are two options you can go with HTTP URL Hits : GET / POST&lt;/p&gt;\n&lt;p&gt;GET Request:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;HttpURLConnection.setFollowRedirects(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Defaults to true&lt;/span&gt;\n\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://name_of_the_url&quot;&lt;/span&gt;;\n&lt;span class=&quot;hljs-type&quot;&gt;URL&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;request_url&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url);\n&lt;span class=&quot;hljs-type&quot;&gt;HttpURLConnection&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;http_conn&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(&lt;span class=&quot;hljs-number&quot;&gt;100000&lt;/span&gt;);\nhttp_conn.setReadTimeout(&lt;span class=&quot;hljs-number&quot;&gt;100000&lt;/span&gt;);\nhttp_conn.setInstanceFollowRedirects(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;POST request:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;HttpURLConnection.setFollowRedirects(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Defaults to true&lt;/span&gt;\n\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://name_of_the_url&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;URL&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;request_url&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url);\n&lt;span class=&quot;hljs-type&quot;&gt;HttpURLConnection&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;http_conn&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(&lt;span class=&quot;hljs-number&quot;&gt;100000&lt;/span&gt;);\nhttp_conn.setReadTimeout(&lt;span class=&quot;hljs-number&quot;&gt;100000&lt;/span&gt;);\nhttp_conn.setInstanceFollowRedirects(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\nhttp_conn.setDoOutput(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n&lt;span class=&quot;hljs-type&quot;&gt;PrintWriter&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;PrintWriter&lt;/span&gt;(http_conn.getOutputStream());\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (urlparameter != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n   out.println(urlparameter);\n}\nout.close();\nout = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I was also very inspired by this response.&lt;/p&gt;\n&lt;p&gt;I am often on projects where I need to do some HTTP, and I may not want to bring in a lot of third-party dependencies (which bring in others and so on and so on, etc.)&lt;/p&gt;\n&lt;p&gt;I started to write my own utilities based on some of this conversation (not any where done):&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;package&lt;/span&gt; org.boon.utils;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.io.InputStream;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.net.HttpURLConnection;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.net.URL;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.net.URLConnection;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.Map;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; org.boon.utils.IO.read;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HTTP&lt;/span&gt; {\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Then there are just a bunch or static methods.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String url)&lt;/span&gt; {\n\n    Exceptions.tryIt(() -&amp;gt; {\n        URLConnection connection;\n        connection = doGet(url, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; extractResponseString(connection);\n    });\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;getWithHeaders&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String url,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;String, ? extends Object&amp;gt; headers)&lt;/span&gt; {\n    URLConnection connection;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        connection = doGet(url, headers, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; extractResponseString(connection);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {\n        Exceptions.handle(ex);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;getWithContentType&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String url,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;String, ? extends Object&amp;gt; headers,\n        String contentType)&lt;/span&gt; {\n    URLConnection connection;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        connection = doGet(url, headers, contentType, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; extractResponseString(connection);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {\n        Exceptions.handle(ex);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;getWithCharSet&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String url,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;String, ? extends Object&amp;gt; headers,\n        String contentType,\n        String charSet)&lt;/span&gt; {\n    URLConnection connection;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        connection = doGet(url, headers, contentType, charSet);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; extractResponseString(connection);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {\n        Exceptions.handle(ex);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Then post...&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;postBody&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String url,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String body)&lt;/span&gt; {\n    URLConnection connection;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        connection = doPost(url, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, body);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; extractResponseString(connection);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {\n        Exceptions.handle(ex);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;postBodyWithHeaders&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String url,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;String, ? extends Object&amp;gt; headers,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String body)&lt;/span&gt; {\n    URLConnection connection;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        connection = doPost(url, headers, &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, body);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; extractResponseString(connection);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {\n        Exceptions.handle(ex);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n}\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;postBodyWithContentType&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String url,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;String, ? extends Object&amp;gt; headers,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String contentType,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String body)&lt;/span&gt; {\n\n    URLConnection connection;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        connection = doPost(url, headers, contentType, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, body);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; extractResponseString(connection);\n\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {\n        Exceptions.handle(ex);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n\n}\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;postBodyWithCharset&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String url,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;String, ? extends Object&amp;gt; headers,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String contentType,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String charSet,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; String body)&lt;/span&gt; {\n\n    URLConnection connection;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        connection = doPost(url, headers, contentType, charSet, body);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; extractResponseString(connection);\n\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {\n        Exceptions.handle(ex);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; URLConnection &lt;span class=&quot;hljs-title function_&quot;&gt;doPost&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String url, Map&amp;lt;String, ? extends Object&amp;gt; headers,\n                                    String contentType, String charset, String body\n                                    )&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; IOException {\n    URLConnection connection;&lt;span class=&quot;hljs-comment&quot;&gt;/* Handle output. */&lt;/span&gt;\n    connection = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openConnection();\n    connection.setDoOutput(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    IO.write(connection.getOutputStream(), body, IO.CHARSET);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; connection;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;manageHeaders&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Map&amp;lt;String, ? extends Object&amp;gt; headers, URLConnection connection)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (headers != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (Map.Entry&amp;lt;String, ? &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;&amp;gt; entry : headers.entrySet()) {\n            connection.setRequestProperty(entry.getKey(), entry.getValue().toString());\n        }\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;manageContentTypeHeaders&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String contentType, String charset, URLConnection connection)&lt;/span&gt; {\n    connection.setRequestProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Accept-Charset&quot;&lt;/span&gt;, charset == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ? IO.CHARSET : charset);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (contentType!=&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !contentType.isEmpty()) {\n        connection.setRequestProperty(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;, contentType);\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; URLConnection &lt;span class=&quot;hljs-title function_&quot;&gt;doGet&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String url, Map&amp;lt;String, ? extends Object&amp;gt; headers,\n                                    String contentType, String charset)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; IOException {\n    URLConnection connection;&lt;span class=&quot;hljs-comment&quot;&gt;/* Handle output. */&lt;/span&gt;\n    connection = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;URL&lt;/span&gt;(url).openConnection();\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; connection;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;extractResponseString&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(URLConnection connection)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; IOException {\n&lt;span class=&quot;hljs-comment&quot;&gt;/* Handle input. */&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;HttpURLConnection&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;http&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (HttpURLConnection)connection;\n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; http.getResponseCode();\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;charset&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getCharset(connection.getHeaderField(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;));\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (status==&lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; readResponseBody(http, charset);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; readErrorResponseBody(http, status, charset);\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;readErrorResponseBody&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpURLConnection http, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; status, String charset)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;errorStream&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; http.getErrorStream();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ( errorStream!=&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ) {\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; charset== &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ? read( errorStream ) :\n            read( errorStream, charset );\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RuntimeException&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;STATUS CODE =&quot;&lt;/span&gt; + status + &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n\\n&quot;&lt;/span&gt; + error);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RuntimeException&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;STATUS CODE =&quot;&lt;/span&gt; + status);\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;readResponseBody&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpURLConnection http, String charset)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; IOException {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (charset != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; read(http.getInputStream(), charset);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; read(http.getInputStream());\n    }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;getCharset&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(String contentType)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (contentType==&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;)  {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    }\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;charset&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (String param : contentType.replace(&lt;span class=&quot;hljs-string&quot;&gt;&quot; &quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;).split(&lt;span class=&quot;hljs-string&quot;&gt;&quot;;&quot;&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (param.startsWith(&lt;span class=&quot;hljs-string&quot;&gt;&quot;charset=&quot;&lt;/span&gt;)) {\n            charset = param.split(&lt;span class=&quot;hljs-string&quot;&gt;&quot;=&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;];\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n        }\n    }\n    charset = charset == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ? IO.CHARSET : charset;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; charset;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Well, you get the idea....&lt;/p&gt;\n&lt;p&gt;Here are the tests:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyHandler&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpHandler&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpExchange t)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; IOException {\n\n        &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;requestBody&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; t.getRequestBody();\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; IO.read(requestBody);\n        &lt;span class=&quot;hljs-type&quot;&gt;Headers&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;requestHeaders&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; t.getRequestHeaders();\n        body = body + &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt; + copy(requestHeaders).toString();\n        t.sendResponseHeaders(&lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;, body.length());\n        &lt;span class=&quot;hljs-type&quot;&gt;OutputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;os&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; t.getResponseBody();\n        os.write(body.getBytes());\n        os.close();\n    }\n}\n\n\n&lt;span class=&quot;hljs-meta&quot;&gt;@Test&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;testHappy&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; Exception {\n\n    &lt;span class=&quot;hljs-type&quot;&gt;HttpServer&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HttpServer.create(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InetSocketAddress&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;9212&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    server.createContext(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/test&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyHandler&lt;/span&gt;());\n    server.setExecutor(&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// creates a default executor&lt;/span&gt;\n    server.start();\n\n    Thread.sleep(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;);\n\n    Map&amp;lt;String,String&amp;gt; headers = map(&lt;span class=&quot;hljs-string&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;bar&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;fun&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;sun&quot;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HTTP.postBodyWithContentType(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:9212/test&quot;&lt;/span&gt;, headers, &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;hi mom&quot;&lt;/span&gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hi mom&quot;&lt;/span&gt;));\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Fun=[sun], Foo=[bar]&quot;&lt;/span&gt;));\n\n    response = HTTP.postBodyWithCharset(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:9212/test&quot;&lt;/span&gt;, headers, &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;hi mom&quot;&lt;/span&gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hi mom&quot;&lt;/span&gt;));\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Fun=[sun], Foo=[bar]&quot;&lt;/span&gt;));\n\n    response = HTTP.postBodyWithHeaders(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:9212/test&quot;&lt;/span&gt;, headers, &lt;span class=&quot;hljs-string&quot;&gt;&quot;hi mom&quot;&lt;/span&gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hi mom&quot;&lt;/span&gt;));\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Fun=[sun], Foo=[bar]&quot;&lt;/span&gt;));\n\n    response = HTTP.get(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:9212/test&quot;&lt;/span&gt;);\n\n    System.out.println(response);\n\n    response = HTTP.getWithHeaders(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:9212/test&quot;&lt;/span&gt;, headers);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Fun=[sun], Foo=[bar]&quot;&lt;/span&gt;));\n\n    response = HTTP.getWithContentType(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:9212/test&quot;&lt;/span&gt;, headers, &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Fun=[sun], Foo=[bar]&quot;&lt;/span&gt;));\n\n    response = HTTP.getWithCharSet(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:9212/test&quot;&lt;/span&gt;, headers, &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Fun=[sun], Foo=[bar]&quot;&lt;/span&gt;));\n\n    Thread.sleep(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;);\n\n    server.stop(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-meta&quot;&gt;@Test&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;testPostBody&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; Exception {\n\n    &lt;span class=&quot;hljs-type&quot;&gt;HttpServer&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HttpServer.create(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InetSocketAddress&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;9220&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    server.createContext(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/test&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyHandler&lt;/span&gt;());\n    server.setExecutor(&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// creates a default executor&lt;/span&gt;\n    server.start();\n\n    Thread.sleep(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;);\n\n    Map&amp;lt;String,String&amp;gt; headers = map(&lt;span class=&quot;hljs-string&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;bar&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;fun&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;sun&quot;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HTTP.postBody(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:9220/test&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;hi mom&quot;&lt;/span&gt;);\n\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hi mom&quot;&lt;/span&gt;));\n\n    Thread.sleep(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;);\n\n    server.stop(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-meta&quot;&gt;@Test(expected = RuntimeException.class)&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;testSad&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; Exception {\n\n    &lt;span class=&quot;hljs-type&quot;&gt;HttpServer&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HttpServer.create(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InetSocketAddress&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;9213&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    server.createContext(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/test&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyHandler&lt;/span&gt;());\n    server.setExecutor(&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// creates a default executor&lt;/span&gt;\n    server.start();\n\n    Thread.sleep(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;);\n\n    Map&amp;lt;String,String&amp;gt; headers = map(&lt;span class=&quot;hljs-string&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;bar&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;fun&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;sun&quot;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HTTP.postBodyWithContentType(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:9213/foo&quot;&lt;/span&gt;, headers, &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;hi mom&quot;&lt;/span&gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hi mom&quot;&lt;/span&gt;));\n    assertTrue(response.contains(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Fun=[sun], Foo=[bar]&quot;&lt;/span&gt;));\n\n    Thread.sleep(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;);\n\n    server.stop(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;You can find the rest here:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://github.com/RichardHightower/boon&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://github.com/RichardHightower/boon&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;My goal is to provide the common things one would want to do in a bit more easier way then....&lt;/p&gt;\n    ","\n&lt;p&gt;Initially I was misled by &lt;a href=&quot;http://www.innovation.ch/java/HTTPClient/urlcon_vs_httpclient.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;this article&lt;/a&gt; which favours &lt;code&gt;HttpClient&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;Later I have realized that &lt;code&gt;HttpURLConnection&lt;/code&gt; is going to stay from &lt;a href=&quot;https://github.com/loopj/android-async-http/issues/75&quot; rel=&quot;nofollow noreferrer&quot;&gt;this article&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;As per the Google blog&lt;/strong&gt;:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Apache HTTP client has fewer bugs on Eclair and Froyo. It is the best choice for these releases. For Gingerbread , HttpURLConnection is the best choice. Its simple API and small size makes it great fit for Android.&lt;/p&gt;\n&lt;p&gt;Transparent compression and response caching reduce network use, improve speed and save battery. New applications should use HttpURLConnection; it is where we will be spending our energy going forward.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;After reading &lt;a href=&quot;http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/&quot; rel=&quot;nofollow noreferrer&quot;&gt;this article&lt;/a&gt; and some other stack over flow questions, I am convinced that &lt;code&gt;HttpURLConnection&lt;/code&gt; is going to stay for longer durations.&lt;/p&gt;\n&lt;p&gt;Some of the SE questions favouring &lt;code&gt;HttpURLConnections&lt;/code&gt;:&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;&lt;a href=&quot;https://stackoverflow.com/questions/4330392/on-android-make-a-post-request-with-url-encoded-form-data-without-using-urlenco/4794289#4794289&quot;&gt;On Android, make a POST request with URL Encoded Form data without using UrlEncodedFormEntity&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;&lt;a href=&quot;https://stackoverflow.com/questions/4221420/httppost-works-in-java-project-not-in-android&quot;&gt;HttpPost works in Java project, but not on Android&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;There is also &lt;a href=&quot;http://square.github.io/okhttp/&quot;&gt;OkHttp&lt;/a&gt;, which is an HTTP client thats efficient by default:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;ul&gt;\n  &lt;li&gt;HTTP/2 support allows all requests to the same host to share a    socket.&lt;/li&gt;\n  &lt;li&gt;Connection pooling reduces request latency (if HTTP/2 isnt    available).&lt;/li&gt;\n  &lt;li&gt;Transparent GZIP shrinks download sizes.&lt;/li&gt;\n  &lt;li&gt;Response caching avoids the network completely for repeat requests.&lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;First create an instance of &lt;code&gt;OkHttpClient&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;OkHttpClient&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;OkHttpClient&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then, prepare your &lt;code&gt;GET&lt;/code&gt; request:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;Request&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Request&lt;/span&gt;.Builder()\n      .url(url)\n      .build();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;finally, use &lt;code&gt;OkHttpClient&lt;/code&gt; to send prepared &lt;code&gt;Request&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;Response&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; client.newCall(request).execute();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;For more details, you can consult the &lt;a href=&quot;https://github.com/square/okhttp/wiki&quot;&gt;OkHttp&apos;s documentation&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;If you are using HTTP &lt;a href=&quot;https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods&quot; rel=&quot;nofollow noreferrer&quot;&gt;GET&lt;/a&gt;, please remove this line:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;urlConnection.setDoOutput(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can also use &lt;a href=&quot;http://http.jcabi.com/apidocs-1.0/com/jcabi/http/request/JdkRequest.html&quot;&gt;&lt;code&gt;JdkRequest&lt;/code&gt;&lt;/a&gt; from &lt;a href=&quot;http://http.jcabi.com&quot;&gt;jcabi-http&lt;/a&gt; (I&apos;m a developer), which does all this work for you, decorating HttpURLConnection, firing HTTP requests and parsing responses, for example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JdkRequest&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://www.google.com&quot;&lt;/span&gt;).fetch().body();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Check this blog post for more info: &lt;a href=&quot;http://www.yegor256.com/2014/04/11/jcabi-http-intro.html&quot;&gt;http://www.yegor256.com/2014/04/11/jcabi-http-intro.html&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;If you are using &lt;strong&gt;Java 11&lt;/strong&gt; (&lt;a href=&quot;https://stackoverflow.com/q/65363995/8583692&quot;&gt;except on Android&lt;/a&gt;), instead of the legacy &lt;em&gt;HttpUrlConnection&lt;/em&gt; class, you can use Java 11 new &lt;a href=&quot;https://openjdk.java.net/groups/net/httpclient/intro.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;HTTP Client API&lt;/a&gt;.&lt;/p&gt;\n&lt;h4&gt;An example &lt;em&gt;GET&lt;/em&gt; request:&lt;/h4&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;uri&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; URI.create(&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://httpbin.org/get?age=26&amp;amp;isHappy=true&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-type&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HttpClient.newHttpClient();\n&lt;span class=&quot;hljs-type&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .header(&lt;span class=&quot;hljs-string&quot;&gt;&quot;accept&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;)\n        .GET()\n        .build();\n&lt;span class=&quot;hljs-type&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; client.send(request, HttpResponse.BodyHandlers.ofString());\nSystem.out.println(response.statusCode());\nSystem.out.println(response.body());\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The same request executed asynchronously:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;responseAsync&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; client\n        .sendAsync(request, HttpResponse.BodyHandlers.ofString())\n        .thenApply(HttpResponse::body)\n        .thenAccept(System.out::println);\n&lt;span class=&quot;hljs-comment&quot;&gt;// responseAsync.join(); // Wait for completion&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4&gt;An example &lt;em&gt;POST&lt;/em&gt; request:&lt;/h4&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .version(HttpClient.Version.HTTP_2)\n        .timeout(Duration.ofMinutes(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;))\n        .header(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;)\n        .header(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Authorization&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Bearer fake&quot;&lt;/span&gt;)\n        .POST(BodyPublishers.ofString(&lt;span class=&quot;hljs-string&quot;&gt;&quot;{ title: &apos;This is cool&apos; }&quot;&lt;/span&gt;))\n        .build();\n&lt;span class=&quot;hljs-type&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; client.send(request, HttpResponse.BodyHandlers.ofString());\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For sending form data as multipart (&lt;code&gt;multipart/form-data&lt;/code&gt;) or url-encoded (&lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;) format, see &lt;a href=&quot;https://stackoverflow.com/a/56482187/8583692&quot;&gt;this solution&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;See &lt;a href=&quot;https://www.baeldung.com/java-9-http-client&quot; rel=&quot;nofollow noreferrer&quot;&gt;this article&lt;/a&gt; for examples and more information about HTTP Client API.&lt;/p&gt;\n&lt;h2&gt;Sidenote&lt;/h2&gt;\n&lt;p&gt;For Java standard library HTTP server, see &lt;a href=&quot;https://stackoverflow.com/a/71635295/8583692&quot;&gt;this post&lt;/a&gt;.&lt;/p&gt;\n    "]},"randomTags":[{"name":"python-3.x","slug":"python-3.x"},{"name":"nullpointerexception","slug":"nullpointerexception"},{"name":"uitableview","slug":"uitableview"},{"name":"data.table","slug":"data.table"},{"name":"python-3.6","slug":"python-3.6"},{"name":"portability","slug":"portability"},{"name":"ggplot2","slug":"ggplot2"},{"name":"variable-variables","slug":"variable-variables"},{"name":"naming-conventions","slug":"naming-conventions"},{"name":"dynamic-variables","slug":"dynamic-variables"},{"name":"twitter-bootstrap","slug":"twitter-bootstrap"},{"name":"constants","slug":"constants"},{"name":"sql-server-2008","slug":"sql-server-2008"},{"name":"subprocess","slug":"subprocess"},{"name":"jquery","slug":"jquery"},{"name":"default-constructor","slug":"default-constructor"},{"name":"fflush","slug":"fflush"},{"name":"easy-install","slug":"easy-install"},{"name":"user-input","slug":"user-input"},{"name":"sharedpreferences","slug":"sharedpreferences"}]},"__N_SSG":true}