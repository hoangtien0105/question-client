{"pageProps":{"data":{"count":1,"rows":[{"id":366,"title":"Transitions on the CSS display property","slug":"transitions-on-the-css-display-property-1657387761601","postType":"QUESTION","createdAt":"2022-07-09T17:29:21.000Z","updatedAt":"2022-07-09T17:29:21.000Z","tags":[{"id":2026,"name":"css-transitions","slug":"css-transitions","createdAt":"2022-07-09T17:29:21.000Z","updatedAt":"2022-07-09T17:29:21.000Z","Questions_Tags":{"questionId":366,"tagId":2026}}]}]},"slug":"css-transitions","page":1,"answers":{"366":["\n&lt;p&gt;You can concatenate two transitions or more, and &lt;code&gt;visibility&lt;/code&gt; is what comes handy this time.&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;border&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1px&lt;/span&gt; solid &lt;span class=&quot;hljs-number&quot;&gt;#eee&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: hidden;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: visibility &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt; linear;\n}\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: visible;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Item 1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Item 2&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Item 3&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;(Don&apos;t forget the vendor prefixes to the &lt;code&gt;transition&lt;/code&gt; property.)&lt;/p&gt;\n\n&lt;p&gt;More details are in &lt;a href=&quot;http://www.greywyvern.com/?post=337&quot; rel=&quot;noreferrer&quot;&gt;this article&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;You need to hide the element by other means in order to get this to work.&lt;/p&gt;\n\n&lt;p&gt;I accomplished the effect by positioning both &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;s absolutely and setting the hidden one to &lt;code&gt;opacity: 0&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;If you even toggle the &lt;code&gt;display&lt;/code&gt; property from &lt;code&gt;none&lt;/code&gt; to &lt;code&gt;block&lt;/code&gt;, your transition on other elements will not occur.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;To work around this, always allow the element to be &lt;code&gt;display: block&lt;/code&gt;, but hide the element by adjusting any of these means:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Set the &lt;code&gt;height&lt;/code&gt; to &lt;code&gt;0&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Set the &lt;code&gt;opacity&lt;/code&gt; to &lt;code&gt;0&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Position the element outside of the frame of another element that has &lt;code&gt;overflow: hidden&lt;/code&gt;.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;There are likely more solutions, but you cannot perform a transition if you toggle the element to &lt;code&gt;display: none&lt;/code&gt;. For example, you may attempt to try something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: opacity &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.active&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;But that will &lt;strong&gt;not&lt;/strong&gt; work. From my experience, I have found this to do nothing.&lt;/p&gt;\n\n&lt;p&gt;Because of this, you will always need to keep the element &lt;code&gt;display: block&lt;/code&gt; - but you could get around it by doing something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: opacity &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;overflow&lt;/span&gt;: hidden;\n}\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.active&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: auto;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;At the time of this post all major browsers disable CSS transitions if you try to change the &lt;code&gt;display&lt;/code&gt; property, but CSS animations still work fine so we can use them as a workaround.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Example Code&lt;/strong&gt; (you can apply it to your menu accordingly) &lt;a href=&quot;http://cssdesk.com/7WPCT&quot; rel=&quot;noreferrer&quot;&gt;Demo&lt;/a&gt;:&lt;/p&gt;\n\n&lt;p&gt;Add the following CSS to your stylesheet:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@-webkit-keyframes&lt;/span&gt; fadeIn {\n    &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; }\n      &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; }\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fadeIn {\n    &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; }\n      &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then apply the &lt;code&gt;fadeIn&lt;/code&gt; animation to the child on parent hover (and of course set &lt;code&gt;display: block&lt;/code&gt;):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.parent&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.child&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fadeIn &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fadeIn &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;h1&gt;Update 2019 - Method that also supports fading out:&lt;/h1&gt;\n\n&lt;p&gt;(Some JavaScript code is required)&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;false&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// We need to keep track of faded in elements so we can apply fade out later in CSS&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;animationstart&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;e&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (e.&lt;span class=&quot;hljs-property&quot;&gt;animationName&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;fade-in&apos;&lt;/span&gt;) {\n      e.&lt;span class=&quot;hljs-property&quot;&gt;target&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;did-fade-in&apos;&lt;/span&gt;);\n  }\n});\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;animationend&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;e&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (e.&lt;span class=&quot;hljs-property&quot;&gt;animationName&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;fade-out&apos;&lt;/span&gt;) {\n      e.&lt;span class=&quot;hljs-property&quot;&gt;target&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;remove&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;did-fade-in&apos;&lt;/span&gt;);\n   }\n});&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;border&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;5px&lt;/span&gt; solid;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;padding&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10px&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;border-color&lt;/span&gt;: red;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.parent&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.child&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.parent&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.child&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fade-in &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.parent&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:not&lt;/span&gt;(&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt;) &lt;span class=&quot;hljs-selector-class&quot;&gt;.child&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.did-fade-in&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fade-out &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fade-in {\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fade-out {\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  }\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;parent&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    Parent\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;child&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        Child\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Instead of callbacks, which don&apos;t exist in CSS, we can use &lt;code&gt;transition-delay&lt;/code&gt; property.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#selector&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;overflow&lt;/span&gt;: hidden;  &lt;span class=&quot;hljs-comment&quot;&gt;/* Hide the element content, while height = 0 */&lt;/span&gt;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0ms&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;400ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;400ms&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0ms&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-selector-id&quot;&gt;#selector&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.visible&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: auto; &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0ms&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;600ms&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0ms&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So, what&apos;s going on here?&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;When &lt;code&gt;visible&lt;/code&gt; class is added, both &lt;code&gt;height&lt;/code&gt; and &lt;code&gt;opacity&lt;/code&gt; start animation without delay (0&amp;nbsp;ms), though &lt;code&gt;height&lt;/code&gt; takes 0&amp;nbsp;ms to complete animation (equivalent of &lt;code&gt;display: block&lt;/code&gt;) and &lt;code&gt;opacity&lt;/code&gt; takes 600&amp;nbsp;ms.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;When &lt;code&gt;visible&lt;/code&gt; class is removed, &lt;code&gt;opacity&lt;/code&gt; starts animation (0&amp;nbsp;ms delay, 400&amp;nbsp;ms duration), and height waits 400&amp;nbsp;ms and only then instantly (0&amp;nbsp;ms) restores initial value (equivalent of &lt;code&gt;display: none&lt;/code&gt; in the animation callback).&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Note, this approach is better than ones using &lt;code&gt;visibility&lt;/code&gt;. In such cases, the element still occupies the space on the page, and it&apos;s not always suitable.&lt;/p&gt;\n&lt;p&gt;For more examples please refer to &lt;a href=&quot;https://medium.com/@joethedave/achieving-ui-animations-with-react-the-right-way-562fa8a91935&quot; rel=&quot;noreferrer&quot;&gt;this article&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;I suspect that the &lt;em&gt;reason&lt;/em&gt; that transitions are disabled if &lt;code&gt;display&lt;/code&gt; is changed is because of what display actually does. It does &lt;em&gt;not&lt;/em&gt; change anything that could conceivably be smoothly animated.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;display: none;&lt;/code&gt; and &lt;code&gt;visibility: hidden;&lt;/code&gt; are two &lt;em&gt;entirely&lt;/em&gt; different things.&lt;br&gt;\nBoth do have the effect of making the element invisible, but with &lt;code&gt;visibility: hidden;&lt;/code&gt; its still rendered in the layout, but just not &lt;em&gt;visibly&lt;/em&gt; so.&lt;br&gt;\nThe hidden element still takes up space, and is still rendered inline or as a block or block-inline or table or whatever the &lt;code&gt;display&lt;/code&gt; element tells it to render as, and takes up space accordingly.&lt;br&gt;\nOther elements do &lt;em&gt;not&lt;/em&gt; automatically move to occupy that space. The hidden element just doesnt render its actual pixels to the output.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;display: none&lt;/code&gt; on the other hand actually &lt;em&gt;prevents&lt;/em&gt; the element from rendering &lt;em&gt;entirely&lt;/em&gt;.&lt;br&gt;\nIt does not take up &lt;em&gt;any&lt;/em&gt; layout space.&lt;br&gt;\nOther elements that wouldve occupied some or all of the space taken up by this element now adjust to occupy that space, as if the element simply &lt;em&gt;did not exist at all&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;display&lt;/code&gt; is not just another visual attribute.&lt;br&gt;\nIt establishes the entire rendering mode of the element, such as whether its a &lt;code&gt;block&lt;/code&gt;, &lt;code&gt;inline&lt;/code&gt;, &lt;code&gt;inline-block&lt;/code&gt;, &lt;code&gt;table&lt;/code&gt;, &lt;code&gt;table-row&lt;/code&gt;, &lt;code&gt;table-cell&lt;/code&gt;, &lt;code&gt;list-item&lt;/code&gt;, or whatever!&lt;br&gt;\nEach of those have very different layout ramifications, and there would be no reasonable way to animate or smoothly transition them (try to imagine a smooth transition from &lt;code&gt;block&lt;/code&gt; to &lt;code&gt;inline&lt;/code&gt; or vice-versa, for instance!).&lt;/p&gt;\n\n&lt;p&gt;This is why transitions are disabled if display changes (even if the change is to or from &lt;code&gt;none&lt;/code&gt;  &lt;code&gt;none&lt;/code&gt; isnt merely invisibility, its its own element rendering mode that means no rendering at all!).&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;code&gt;display&lt;/code&gt; is not one of the properties that transition works upon.&lt;/p&gt;\n\n&lt;p&gt;See &lt;em&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties&quot; rel=&quot;noreferrer&quot;&gt;Animatable CSS properties&lt;/a&gt;&lt;/em&gt; for the list of CSS properties that can have transitions applied to them. See &lt;em&gt;&lt;a href=&quot;https://drafts.csswg.org/css-values-4/#combining-values&quot; rel=&quot;noreferrer&quot;&gt;CSS Values and Units Module Level 4, Combining Values: Interpolation, Addition, and Accumulation&lt;/a&gt;&lt;/em&gt; for how they are interpolated.&lt;/p&gt;\n\n&lt;p&gt;Up to CSS&amp;nbsp;3 was listed in &lt;em&gt;&lt;a href=&quot;https://www.w3.org/TR/2017/WD-css-transitions-1-20171130/#animatable-css&quot; rel=&quot;noreferrer&quot;&gt;9.1. Properties from CSS&lt;/a&gt;&lt;/em&gt; (just close the warning popup)&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;I&apos;ve also tried using height, but that just failed miserably.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Last time I had to do this, I used &lt;code&gt;max-height&lt;/code&gt; instead, which is an animatable property (although it was a bit of a hack, it did work), but beware that it may be very janky for complex pages or users with low-end mobile devices.&lt;/p&gt;\n    ","\n&lt;p&gt;I found better way for this issue, you can use CSS Animation and make your awesome effect for showing items.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.item&lt;/span&gt; {\n     &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.item&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; {\n     &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n     &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fade_in_show &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fade_in_show {\n     &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {\n          &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n          &lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n     }\n\n     &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {\n          &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n          &lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;)\n     }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can add a custom animation to the block property now.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; showNav {\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;}\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;}\n}\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.subnav-is-opened&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.main-nav__secondary-nav&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: showNav &lt;span class=&quot;hljs-number&quot;&gt;250ms&lt;/span&gt; ease-in-out both;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://developers.google.com/web/fundamentals/&quot; rel=&quot;noreferrer&quot;&gt;Demo&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;In this demo the sub-menu changes from &lt;code&gt;display:none&lt;/code&gt; to &lt;code&gt;display:block&lt;/code&gt; and still manages to fade.&lt;/p&gt;\n    ","\n&lt;p&gt;According to &lt;a href=&quot;http://www.w3.org/TR/css3-transitions/#animatable-properties&quot; rel=&quot;noreferrer&quot;&gt;W3C Working Draft 19 November 2013&lt;/a&gt; &lt;code&gt;display&lt;/code&gt; is not an &lt;em&gt;animatable property&lt;/em&gt;. Fortunately, &lt;code&gt;visibility&lt;/code&gt; is animatable. You may chain its transition with a transition of opacity (&lt;a href=&quot;http://jsfiddle.net/feklee/6UkVH/&quot; rel=&quot;noreferrer&quot;&gt;JSFiddle&lt;/a&gt;):&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;HTML:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&amp;lt;a href=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://example.com&quot;&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;foo&quot;&lt;/span&gt;&amp;gt;Foo&amp;lt;/a&amp;gt;\n&amp;lt;button &lt;span class=&quot;hljs-built_in&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;hide-button&quot;&lt;/span&gt;&amp;gt;Hide&amp;lt;/button&amp;gt;\n&amp;lt;button &lt;span class=&quot;hljs-built_in&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;show-button&quot;&lt;/span&gt;&amp;gt;Show&amp;lt;/button&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;CSS:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#foo&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition-property&lt;/span&gt;: visibility, opacity;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition-duration&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-id&quot;&gt;#foo&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: hidden;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition-property&lt;/span&gt;: opacity, visibility;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition-duration&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition-delay&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;JavaScript for testing:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; foo = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hide-button&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;onclick&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    foo.&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;;\n};\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;show-button&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;onclick&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    foo.&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n};\n&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Note that if you just make the link transparent, without setting &lt;code&gt;visibility: hidden&lt;/code&gt;, then it would stay clickable.&lt;/p&gt;\n    ","\n&lt;p&gt;Edit: display none is not being applied in this example.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; hide {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;99%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;What&apos;s happening above is that through 99% of the animation display is set to block while the opacity fades out. In the last moment display property is set to none.&lt;/p&gt;\n\n&lt;p&gt;And the most important bit is to retain the last frame after the animation ends using animation-fill-mode: forwards&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.hide&lt;/span&gt; {\n   &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: hide &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; linear;\n   &lt;span class=&quot;hljs-attribute&quot;&gt;animation-fill-mode&lt;/span&gt;: forwards;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here are two examples: &lt;a href=&quot;https://jsfiddle.net/qwnz9tqg/3/&quot; rel=&quot;noreferrer&quot;&gt;https://jsfiddle.net/qwnz9tqg/3/&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;My neat JavaScript trick is &lt;strong&gt;to separate the entire scenario into two different functions&lt;/strong&gt;!&lt;/p&gt;\n\n&lt;p&gt;To prepare things, one global variable is declared and one event handler is defined:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tTimeout;\n  element.addEventListener(&lt;span class=&quot;hljs-string&quot;&gt;&quot;transitionend&quot;&lt;/span&gt;, afterTransition, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);&lt;span class=&quot;hljs-comment&quot;&gt;//firefox&lt;/span&gt;\n  element.addEventListener(&lt;span class=&quot;hljs-string&quot;&gt;&quot;webkitTransitionEnd&quot;&lt;/span&gt;, afterTransition, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);&lt;span class=&quot;hljs-comment&quot;&gt;//chrome&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then, when hiding element, I use something like this: &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;function &lt;span class=&quot;hljs-title&quot;&gt;hide&lt;/span&gt;()&lt;/span&gt;{\n  element.style.opacity = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;function &lt;span class=&quot;hljs-title&quot;&gt;afterTransition&lt;/span&gt;()&lt;/span&gt;{\n  element.style.display = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;For reappearing the element, I am doing something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;show&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n  element.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;block&apos;&lt;/span&gt;;\n  tTimeout = &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(timeoutShow, &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;timeoutShow&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n  element.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;opacity&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It works, so far!&lt;/p&gt;\n    ","\n&lt;p&gt;Fade it in with &lt;a href=&quot;https://www.w3schools.com/css/css3_animations.asp&quot; rel=&quot;noreferrer&quot;&gt;CSS Animations&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.item&lt;/span&gt; {\n     &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.item&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; {\n     &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n     &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fadeIn &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fadeIn {\n     &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; {\n          &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n     }\n\n     &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; {\n          &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n     }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I ran into this today, with a &lt;code&gt;position: fixed&lt;/code&gt; modal that I was reusing. I couldn&apos;t keep it &lt;code&gt;display: none&lt;/code&gt; and then animate it, as it just jumped into appearance, and and &lt;code&gt;z-index&lt;/code&gt; (negative values, etc) did weird things as well.&lt;/p&gt;\n\n&lt;p&gt;I was also using a &lt;code&gt;height: 0&lt;/code&gt; to &lt;code&gt;height: 100%&lt;/code&gt;, but it only worked when the modal appeared. This is the same as if you used &lt;code&gt;left: -100%&lt;/code&gt; or something.&lt;/p&gt;\n\n&lt;p&gt;Then it struck me that there was a simple answer. Et voila:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;First,&lt;/strong&gt; your hidden modal. Notice the &lt;code&gt;height&lt;/code&gt; is &lt;code&gt;0&lt;/code&gt;, and check out the &lt;code&gt;height&lt;/code&gt; declaration in transitions... it has a &lt;code&gt;500ms&lt;/code&gt;, &lt;em&gt;which is longer than my &lt;code&gt;opacity&lt;/code&gt; transition&lt;/em&gt;. Remember, this affects the out-going fade-out transition: returning the modal to its default state.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#modal-overlay&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;background&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;#999&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;background&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;33&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;33&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;33&lt;/span&gt;,.&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;overflow&lt;/span&gt;: hidden;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: fixed;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;top&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;left&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;z-index&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n       -moz-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n            -ms-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n         -o-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n        &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Second,&lt;/strong&gt; your visible modal. Say you&apos;re setting a &lt;code&gt;.modal-active&lt;/code&gt; to the &lt;code&gt;body&lt;/code&gt;. Now the &lt;code&gt;height&lt;/code&gt; is &lt;code&gt;100%&lt;/code&gt;, and my transition has also changed. I want the &lt;code&gt;height&lt;/code&gt; to be instantly changed, and the &lt;code&gt;opacity&lt;/code&gt; to take &lt;code&gt;300ms&lt;/code&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.modal-active&lt;/span&gt; &lt;span class=&quot;hljs-selector-id&quot;&gt;#modal-overlay&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;z-index&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;90000&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n       -moz-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n        -ms-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n         -o-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n            &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;That&apos;s it, it works like a charm.&lt;/p&gt;\n    ","\n&lt;p&gt;Taking from a few of these answers and some suggestions elsewhere, the following works great for hover menus (I&apos;m using this with &lt;a href=&quot;https://en.wikipedia.org/wiki/Bootstrap_%28front-end_framework%29&quot; rel=&quot;nofollow noreferrer&quot;&gt;Bootstrap&lt;/a&gt;&amp;nbsp;3, specifically):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;nav&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.dropdown-menu&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;overflow&lt;/span&gt;: hidden;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: max-height &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: max-height &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;nav&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.dropdown&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.dropdown-menu&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;500px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: max-height &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: max-height &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You could also use &lt;code&gt;height&lt;/code&gt; in place of &lt;code&gt;max-height&lt;/code&gt; if you specify both values since &lt;code&gt;height:auto&lt;/code&gt; is not allowed with &lt;code&gt;transition&lt;/code&gt;s. The hover value of &lt;code&gt;max-height&lt;/code&gt; needs to be greater than the &lt;code&gt;height&lt;/code&gt; of the menu can possibly be.&lt;/p&gt;\n    ","\n&lt;p&gt;I&apos;ve came across this issue multiple times and now simply went with:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.block&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: opacity &lt;span class=&quot;hljs-number&quot;&gt;250ms&lt;/span&gt; ease;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.block--invisible&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;pointer-events&lt;/span&gt;: none;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;By adding the class &lt;code&gt;block--invisible&lt;/code&gt; the whole Elements will not be clickable but all Elements behind it will be because of the &lt;code&gt;pointer-events:none&lt;/code&gt; which is supported by all major browsers (no IE &amp;lt; 11).&lt;/p&gt;\n    ","\n&lt;p&gt;Change &lt;code&gt;overflow:hidden&lt;/code&gt; to &lt;code&gt;overflow:visible&lt;/code&gt;. It works better. I use like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#menu&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;li&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;#fe1c1c&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;85px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;box-shadow&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3px&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;10px&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;#000000&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;border-radius&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;3px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;z-index&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;:all &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt; ease;\n    -moz-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;:all &lt;span class=&quot;hljs-number&quot;&gt;0.6s&lt;/span&gt; ease;\n}\n\n&lt;span class=&quot;hljs-selector-id&quot;&gt;#menu&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt;  {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;overflow&lt;/span&gt;:visible;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;140px&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;code&gt;visible&lt;/code&gt; is better because &lt;code&gt;overflow:hidden&lt;/code&gt; act exactly like a &lt;code&gt;display:none&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;It is as simple as the following :)&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fadeout {\n    &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: auto; }\n    &lt;span class=&quot;hljs-number&quot;&gt;90%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: auto; }\n    &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fadeout linear &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; normal forwards &lt;span class=&quot;hljs-meta&quot;&gt;!important&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Get it to fade away, and then make it &lt;code&gt;height 0;&lt;/code&gt;. Also make sure to use forwards so that it stays in the final state.&lt;/p&gt;\n    ","\n&lt;p&gt;I appreciate all the answers. Here is what I&apos;m using for similar purposes: transition vs animation.&lt;/p&gt;\n&lt;p&gt;Example: &lt;a href=&quot;https://jsfiddle.net/grinevri/tcod87Le/22/&quot; rel=&quot;noreferrer&quot;&gt;https://jsfiddle.net/grinevri/tcod87Le/22/&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;animation&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;transition&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; animationTo {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.1&lt;/span&gt;); }\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;); }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; animationFrom {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;); }\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.1&lt;/span&gt;); }\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.animation&lt;/span&gt;,\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.transition&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;margin&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;5px&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100px&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100px&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.1&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.animation&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: animationFrom &lt;span class=&quot;hljs-number&quot;&gt;250ms&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.animation&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;);\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: animationTo &lt;span class=&quot;hljs-number&quot;&gt;250ms&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.transition&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: background-color &lt;span class=&quot;hljs-number&quot;&gt;250ms&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.transition&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I finally found a solution for me, by combining &lt;code&gt;opacity&lt;/code&gt; with &lt;code&gt;position absolute&lt;/code&gt; (not to occupy space when hidden).&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.toggle&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: absolute;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: opacity &lt;span class=&quot;hljs-number&quot;&gt;0.8s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.parent&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.toggle&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: static;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;JavaScript is not required, and no outrageously huge max-height is needed. Instead, set your &lt;code&gt;max-height&lt;/code&gt; on your text elements, and use a font relative unit such as &lt;code&gt;rem&lt;/code&gt; or &lt;code&gt;em&lt;/code&gt;. This way, you can set a maximum height larger than your container, while avoiding a delay or &quot;popping&quot; when the menu closes:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;HTML&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;nav&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;checkbox&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Link 1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Link 1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Link 1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Link 1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;nav&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;CSS&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;nav&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;input&lt;/span&gt; + &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;li&lt;/span&gt; { // Notice &lt;span class=&quot;hljs-selector-tag&quot;&gt;I&lt;/span&gt; set &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt; on &lt;span class=&quot;hljs-selector-tag&quot;&gt;li&lt;/span&gt;, not &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt;\n   &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;nav&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:checked&lt;/span&gt; + &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;li&lt;/span&gt; {\n   &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3rem&lt;/span&gt;; // &lt;span class=&quot;hljs-selector-tag&quot;&gt;A&lt;/span&gt; little bigger &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; allow for text-wrapping - but not outrageous\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;See an example here:\n&lt;a href=&quot;http://codepen.io/mindfullsilence/pen/DtzjE&quot; rel=&quot;nofollow noreferrer&quot;&gt;http://codepen.io/mindfullsilence/pen/DtzjE&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;After the accepted answer from Guillermo was written, the CSS\ntransition specification of 2012-04-03 changed the behavior of the visibility transition and &lt;strong&gt;now it is possible to solve this problem in a shorter way&lt;/strong&gt;, without the use of transition-delay:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.myclass&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; {\n                   &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;:visibility &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n                   &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;:hidden;  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n               }\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.myclass&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;\n               {   &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;:visible; &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The run time specified for both transitions should usually be\nidentical (although a slightly longer time for visibility is not a problem).&lt;/p&gt;\n\n&lt;p&gt;For a running version, see my blog post &lt;em&gt;&lt;a href=&quot;http://www.taccgl.org/blog/css-transition-visibility.html#visibility-opacity&quot; rel=&quot;nofollow noreferrer&quot;&gt;CSS Transition Visibility&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;W.r.t. the title of the question &lt;em&gt;&quot;Transitions on the display: property&quot;&lt;/em&gt; and in response to comments from Rui Marques and josh to the accepted answer:&lt;/p&gt;\n\n&lt;p&gt;This solution works in cases &lt;strong&gt;where it is irrelevant if the display or\nvisibility property is used&lt;/strong&gt; (as it probably was the case in this question).&lt;/p&gt;\n\n&lt;p&gt;It will not completely remove the element as &lt;code&gt;display:none&lt;/code&gt;, just make it invisible, but it still stays in the document flow and influences the position of the following elements.&lt;/p&gt;\n\n&lt;p&gt;Transitions that completely remove the element similar to &lt;code&gt;display:none&lt;/code&gt; can be done using height (as indicated by other answers and comments), max-height, or margin-top/bottom, but also see\n&lt;em&gt;&lt;a href=&quot;https://stackoverflow.com/questions/3508605/css-transition-height-0-to-height-auto/&quot;&gt;How can I transition height: 0; to height: auto; using CSS?&lt;/a&gt;&lt;/em&gt; and my blog post &lt;em&gt;&lt;a href=&quot;https://www.taccgl.org/blog/css_transition_display.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;Workarounds for CSS Transitions on the Display and Height Properties&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;In response to comment from GeorgeMillo:\nBoth properties and both transitions are needed: The opacity property\nis used to create a fade-in and fade-out animation and the visibility\nproperty to avoid the element still reacting on mouse\nevents. Transitions are needed on opacity for the visual effect and on\nvisibility to delay hiding until the fade-out is finished.&lt;/p&gt;\n    ","\n&lt;p&gt;I suspect anyone just starting CSS transitions quickly discovers that they don&apos;t work if you&apos;re modifying the display property (block/none) at the same time. One workaround that hasn&apos;t yet been mentioned is that you can continue to use &lt;code&gt;display:block/none&lt;/code&gt; to hide/show the element, but set its opacity to 0 so that even when it&apos;s &lt;code&gt;display:block&lt;/code&gt;, it&apos;s still invisible.&lt;/p&gt;\n\n&lt;p&gt;Then to fade it in, add another CSS class such as &quot;on&quot; which sets the opacity to 1 and defines the transition for opacity. As you may have imagined, you&apos;ll have to use JavaScript to add that &quot;on&quot; class to the element, but at least you&apos;re still using CSS for the actual transition.&lt;/p&gt;\n\n&lt;p&gt;P.S. If you find yourself in a situation where you need to do both &lt;code&gt;display:block&lt;/code&gt;, and add class &quot;on&quot;, at the same time, defer the latter using setTimeout. Otherwise, the browser just sees both things as happening at once and disables the transition.&lt;/p&gt;\n    ","\n&lt;p&gt;You can get this to work the natural way you expected - using display - but you have to throttle the browser to get it to work, using either Javascript or as others have suggested a fancy trick with one tag inside another. I don&apos;t care for the inner tag as it further complicates CSS and dimensions, so here&apos;s the Javascript solution:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://jsfiddle.net/b9chris/hweyecu4/17/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://jsfiddle.net/b9chris/hweyecu4/17/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;Starting with a box like:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&amp;lt;div &lt;span class=&quot;hljs-built_in&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;box&quot;&lt;/span&gt; class=&lt;span class=&quot;hljs-string&quot;&gt;&quot;hidden&quot;&lt;/span&gt;&amp;gt;Lorem&amp;lt;/div&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;A hidden box.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n&lt;span class=&quot;hljs-selector-id&quot;&gt;#box&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: opacity &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n    \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;We&apos;re going to use a trick found in a related q/a, checking offsetHeight to throttle the browser instantaneously:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/a/16575811/176877&quot;&gt;https://stackoverflow.com/a/16575811/176877&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;First, a library formalizing the above trick:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.fn.&lt;span class=&quot;hljs-property&quot;&gt;noTrnsn&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;i, tag&lt;/span&gt;) {\n        tag.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;transition&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n    });\n};\n$.fn.&lt;span class=&quot;hljs-property&quot;&gt;resumeTrnsn&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;i, tag&lt;/span&gt;) {\n        tag.&lt;span class=&quot;hljs-property&quot;&gt;offsetHeight&lt;/span&gt;;    \n        tag.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;transition&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    });\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Next, we&apos;re going to use it to reveal a box, and fade it in:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#button&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tag = $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#box&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (tag.&lt;span class=&quot;hljs-title function_&quot;&gt;hasClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;))\n        tag.&lt;span class=&quot;hljs-title function_&quot;&gt;noTrnsn&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;removeClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;)\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; })\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;resumeTrnsn&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; });\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        tag.&lt;span class=&quot;hljs-title function_&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; });\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This fades the box in and out. So, &lt;code&gt;.noTrnsn()&lt;/code&gt; turns off transitions, then we remove the &lt;code&gt;hidden&lt;/code&gt; class, which flips &lt;code&gt;display&lt;/code&gt; from &lt;code&gt;none&lt;/code&gt; to its default, &lt;code&gt;block&lt;/code&gt;. We then set opacity to 0 to get ready for fading in. Now that we&apos;ve set the stage, we turn transitions back on, with &lt;code&gt;.resumeTrnsn()&lt;/code&gt;. And finally, kick off the transition by setting opacity to 1.&lt;/p&gt;\n&lt;p&gt;Without the library, both the change to display and the change to opacity would&apos;ve gotten us undesirable results. If we simply removed the library calls, we&apos;d get no transitions at all.&lt;/p&gt;\n&lt;p&gt;Note that the above does not set display to none again at the end of the fadeout animation. We can get fancier though. Let&apos;s do so with one that fades in and grows in height from 0.&lt;/p&gt;\n&lt;h2&gt;Fancy!&lt;/h2&gt;\n&lt;p&gt;&lt;a href=&quot;https://jsfiddle.net/b9chris/hweyecu4/22/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://jsfiddle.net/b9chris/hweyecu4/22/&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#box&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;We&apos;re now transitioning both height and opacity. Note that we are not setting height, which means it is the default, &lt;code&gt;auto&lt;/code&gt;. Conventionally this cannot be transitioned - moving from auto to a pixel value (like 0) will get you no transition. We&apos;re going to work around that with the library, and one more library method:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;$.fn.wait = function (time, fn) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (time)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.delay(time);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!fn)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; _this = &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.queue(function (n) {\n        fn.call(_this);\n        n();\n    });\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This is a convenience method that lets us participate in jQuery&apos;s existing fx/animation queue, without requiring any of the animation framework that&apos;s now excluded in jQuery 3.x. I&apos;m not going to explain how jQuery works, but suffice to say, the &lt;code&gt;.queue()&lt;/code&gt; and &lt;code&gt;.stop()&lt;/code&gt; plumbing that jQuery provides help us prevent our animations from stepping on each other.&lt;/p&gt;\n&lt;p&gt;Let&apos;s animate the slide down effect.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#button&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, function() {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tag = $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#box&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;hasClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Open it&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Measure it&lt;/span&gt;\n        tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;stop&lt;/span&gt;().&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;noTrnsn&lt;/span&gt;().&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;removeClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({\n            &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;auto&apos;&lt;/span&gt;\n        });\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; h = tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;height&lt;/span&gt;();\n        tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; }).&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;resumeTrnsn&lt;/span&gt;()\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Animate it&lt;/span&gt;\n        .&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: h })\n        .&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;wait&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;, function() {\n            tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;auto&apos;&lt;/span&gt; });\n        });\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Close it&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Measure it&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; h = tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;noTrnsn&lt;/span&gt;().&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;height&lt;/span&gt;();\n        tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;stop&lt;/span&gt;().&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: h })\n        .&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;resumeTrnsn&lt;/span&gt;()\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Animate it&lt;/span&gt;\n        .&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; })\n        .&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;wait&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;, function() {\n            tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;addClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;);\n        });\n    }\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This code begins by checking on &lt;code&gt;#box&lt;/code&gt; and whether it&apos;s currently hidden, by checking on its class. But it accomplishes more using the &lt;code&gt;wait()&lt;/code&gt; library call, by adding the &lt;code&gt;hidden&lt;/code&gt; class at the end of the slideout/fade animation, which you&apos;d expect to find if it is in fact hidden - something the above simpler example could not do. This happens to also enable display/hiding the element over and over, which was a bug in the previous example, because the hidden class was never restored.&lt;/p&gt;\n&lt;p&gt;You can also see CSS and class changes being called after &lt;code&gt;.noTrnsn()&lt;/code&gt; to generally set the stage for animations, including taking measurements, like measuring what will be the final height of &lt;code&gt;#box&lt;/code&gt; without showing that to the user, before calling &lt;code&gt;.resumeTrnsn()&lt;/code&gt;, and animating it from that fully-set stage to its goal CSS values.&lt;/p&gt;\n&lt;h1&gt;Old Answer&lt;/h1&gt;\n&lt;p&gt;&lt;a href=&quot;https://jsfiddle.net/b9chris/hweyecu4/1/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://jsfiddle.net/b9chris/hweyecu4/1/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;You can have it transition on click with:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;toggleTransition&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; el = $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;div.box1&quot;&lt;/span&gt;);\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (el.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;) {\n    el[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;box&quot;&lt;/span&gt;;\n    el.&lt;span class=&quot;hljs-title function_&quot;&gt;stop&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;css&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;maxWidth&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt;}).&lt;span class=&quot;hljs-title function_&quot;&gt;animate&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;maxWidth&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10001&lt;/span&gt;}, &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        el[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;box hidden&quot;&lt;/span&gt;;\n    });\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n    el = $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;div.box&quot;&lt;/span&gt;);\n    el[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;box&quot;&lt;/span&gt;;\n    el.&lt;span class=&quot;hljs-title function_&quot;&gt;stop&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;css&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;maxWidth&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10001&lt;/span&gt;}).&lt;span class=&quot;hljs-title function_&quot;&gt;animate&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;maxWidth&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt;}, &lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        el[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;box box1&quot;&lt;/span&gt;;\n    });\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; el;\n}\n\nsomeTag.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;(toggleTransition);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The CSS is what you&apos;d guess:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.box&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: blue;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;color&lt;/span&gt;: yellow;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;font-size&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;18px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;left&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;top&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: absolute;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transform-origin&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;50%&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transform-origin&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;50%&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(.&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(.&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: transform &lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: transform &lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.box1&lt;/span&gt;{\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The key is throttling the display property. By removing the hidden class and then waiting 50&amp;nbsp;ms, &lt;em&gt;then&lt;/em&gt; starting the transition via the added class, we get it to appear and then expand like we wanted, instead of it just blipping onto the screen without any animation. Similar occurs going the other way, except we wait till the animation is over before applying hidden.&lt;/p&gt;\n&lt;p&gt;Note: I&apos;m abusing &lt;code&gt;.animate(maxWidth)&lt;/code&gt; here to avoid &lt;code&gt;setTimeout&lt;/code&gt; race conditions. &lt;code&gt;setTimeout&lt;/code&gt; is quick to introduce hidden bugs when you or someone else picks up code unaware of it. &lt;code&gt;.animate()&lt;/code&gt; can easily be killed with &lt;code&gt;.stop()&lt;/code&gt;. I&apos;m just using it to put a 50&amp;nbsp;ms or 2000&amp;nbsp;ms delay on the standard fx queue where it&apos;s easy to find/resolve by other coders building on top of this.&lt;/p&gt;\n    ","\n&lt;p&gt;Well another way to apply transition in this situation &lt;strong&gt;without using keyframes&lt;/strong&gt; is to set the &lt;strong&gt;width&lt;/strong&gt; of your element to &lt;strong&gt;zero&lt;/strong&gt; and then unset it on hover&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.className&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;:hidden;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: .&lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.className&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;:visible;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;margin-right&lt;/span&gt;: .&lt;span class=&quot;hljs-number&quot;&gt;5rem&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;:unset;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I had a similar issue that I couldn&apos;t find the answer to. A few Google searches later led me here. Considering I didn&apos;t find the simple answer I was hoping for, I stumbled upon a solution that is both elegant and effective.&lt;/p&gt;\n\n&lt;p&gt;It turns out the &lt;code&gt;visibility&lt;/code&gt; CSS property has a value &lt;code&gt;collapse&lt;/code&gt; which is generally used for table items. However, if used on any other elements it effectively renders them as &lt;em&gt;hidden&lt;/em&gt;, pretty much the same as &lt;code&gt;display: hidden&lt;/code&gt; but with the added ability that the element doesn&apos;t take up any space and you can still animate the element in question.&lt;/p&gt;\n\n&lt;p&gt;Below is a simple example of this in action.&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;toggleVisibility&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; exampleElement = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;querySelector&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;span&apos;&lt;/span&gt;);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;contains&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;visible&apos;&lt;/span&gt;)) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n  }\n  exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;innerHTML&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;I will not take up space!&apos;&lt;/span&gt;;\n  exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;toggle&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;);\n  exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;toggle&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;visible&apos;&lt;/span&gt;);\n  &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {\n    exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;toggle&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;visible&apos;&lt;/span&gt;);\n    exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;toggle&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;);\n  }, &lt;span class=&quot;hljs-number&quot;&gt;3000&lt;/span&gt;);\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#main&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: flex;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;flex-direction&lt;/span&gt;: column;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;300px&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;text-align&lt;/span&gt;: center;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: collapse;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: visibility &lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt; linear;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.visible&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: visible;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: visibility &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt; linear;\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;main&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;toggleVisibility()&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Click Me!&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;span&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;hidden&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;span&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;span&lt;/span&gt;&amp;gt;&lt;/span&gt;I will get pushed back up...&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;span&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;The simplest universal solution to the problem is: feel free to specify &lt;code&gt;display:none&lt;/code&gt; in your CSS, however you will have change it to &lt;code&gt;block&lt;/code&gt; (or whatever else) using JavaScript, and then you&apos;ll also have to add a class to your element in question that actually does the transition &lt;em&gt;with setTimeout()&lt;/em&gt;. That&apos;s all.&lt;/p&gt;\n\n&lt;p&gt;I.e.:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-css&quot;&gt;\n    &lt;span class=&quot;hljs-selector-id&quot;&gt;#el&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n        &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    }\n    &lt;span class=&quot;hljs-selector-id&quot;&gt;#el&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.auto-fade-in&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n        &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: all &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out; &lt;span class=&quot;hljs-comment&quot;&gt;/* Future, future, please come sooner! */&lt;/span&gt;\n        -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: all &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out;\n        -moz-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: all &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out;\n        -o-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: all &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out;\n    }\n&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;el&lt;/span&gt;&amp;gt;&lt;/span&gt;Well, well, well&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; el = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;el&apos;&lt;/span&gt;);\n    el.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;block&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { el.&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;auto-fade-in&apos;&lt;/span&gt; }, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This was tested in the latest sane browsers. Obviously it shouldn&apos;t work in Internet&amp;nbsp;Explorer&amp;nbsp;9 or earlier.&lt;/p&gt;\n    ","\n&lt;p&gt;I think SalmanPK has the closest answer. It does fade an item in or out, with the following CSS animations. However, the display property does not animate smoothly, only the opacity.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@-webkit-keyframes&lt;/span&gt; fadeIn {\n    &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; }\n      &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@-webkit-keyframes&lt;/span&gt; fadeOut {\n    &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; }\n      &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If you want to animate the element moving from display block to display none, I can&apos;t see that it is currently possible just with CSS. You have to get the height and use a CSS animation to decrease the height. This is possible with CSS as shown in the example below, but it would be tricky to know the exact height values you need to animate for an element.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;http://jsfiddle.net/StevenIseki/v2nup35t/&quot; rel=&quot;nofollow noreferrer&quot;&gt;jsFiddle&lt;/a&gt; &lt;b&gt;example&lt;/b&gt;&lt;/p&gt;\n\n&lt;h3&gt;CSS&lt;/h3&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@-webkit-keyframes&lt;/span&gt; pushDown {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10em&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;25%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;7.5em&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;50%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;5em&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;75%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2.5em&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0em&lt;/span&gt;;\n  }\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.push-down&lt;/span&gt; {\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: pushDown &lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt; forwards linear;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h3&gt;JavaScript&lt;/h3&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; element = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;element&quot;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Push item down&lt;/span&gt;\nelement.&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = element.&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot; push-down&quot;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This solution has excellent compatibility, and I haven&apos;t seen it yet:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden-element&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: absolute;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;z-index&lt;/span&gt;: -&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;pointer-events&lt;/span&gt;: none;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: hidden;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: visibility &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity .&lt;span class=&quot;hljs-number&quot;&gt;5s&lt;/span&gt; ease-out;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden-element&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.visible&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: static;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;z-index&lt;/span&gt;: auto;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;pointer-events&lt;/span&gt;: auto;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: visible;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Explanation&lt;/strong&gt;: it uses the &lt;code&gt;visibility: hidden&lt;/code&gt; trick (which is compatible with show-and-animate in one step), but it uses the combination &lt;code&gt;position: absolute; z-index: -1; pointer-events: none;&lt;/code&gt; to make sure that the hidden container &lt;strong&gt;does not take space&lt;/strong&gt; and &lt;strong&gt;does not answer to user interactions&lt;/strong&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;You can do this with transition events, so you build two CSS classes for the transition, one holding the animation other, holding the display none state. And you switch them after the animation is ended? In my case I can display the divs again if I press a button, and remove both classes.&lt;/p&gt;\n\n&lt;p&gt;Try the snippet below...&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;ready&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Assign transition event&lt;/span&gt;\n  $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;table&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;animationend webkitAnimationEnd&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;.visibility_switch_off&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;event&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// We check if this is the same animation we want&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (event.&lt;span class=&quot;hljs-property&quot;&gt;originalEvent&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;animationName&lt;/span&gt; == &lt;span class=&quot;hljs-string&quot;&gt;&quot;col_hide_anim&quot;&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-comment&quot;&gt;// After the animation we assign this new class that basically hides the elements.&lt;/span&gt;\n      $(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;addClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;animation-helper-display-none&quot;&lt;/span&gt;);\n    }\n\n  });\n\n  $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;event&lt;/span&gt;) {\n\n    $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;table tr .hide-col&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toggleClass&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-comment&quot;&gt;// We switch the animation class in a toggle fashion...&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// and we know in that after the animation end, there&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// is will the animation-helper-display-none extra&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// class, that we nee to remove, when we want to&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// show the elements again, depending on the toggle&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// state, so we create a relation between them.&lt;/span&gt;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ($(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;is&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.animation-helper-display-none&quot;&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// I&apos;m toggling and there is already the above class, then&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// what we want it to show the elements , so we remove&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// both classes...&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;visibility_switch_off animation-helper-display-none&quot;&lt;/span&gt;;\n      }\n      &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Here we just want to hide the elements, so we just&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// add the animation class, the other will be added&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// later be the animationend event...&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;visibility_switch_off&quot;&lt;/span&gt;;\n      }\n    });\n  });\n});&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;th&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: grey;\n}\n\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;td&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: white;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;padding&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;5px&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.animation-helper-display-none&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.visibility_switch_off&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation-fill-mode&lt;/span&gt;: forwards;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation-name&lt;/span&gt;: col_hide_anim;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation-duration&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@-webkit-keyframes&lt;/span&gt; col_hide_anim {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;}\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;}\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@-moz-keyframes&lt;/span&gt; col_hide_anim {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;}\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;}\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@-o-keyframes&lt;/span&gt; col_hide_anim {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;}\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;}\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; col_hide_anim {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt;   {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;}\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;}\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;table&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;theader&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;tr&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt;&amp;gt;&lt;/span&gt;Name&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;hide-col&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;Age&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt;&amp;gt;&lt;/span&gt;Country&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;tr&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;theader&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;tbody&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;tr&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt;&amp;gt;&lt;/span&gt;Name&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;hide-col&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;Age&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt;&amp;gt;&lt;/span&gt;Country&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;tr&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;tbody&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;table&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;Switch - Hide Age column with fadeout animation and display none after&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif4&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Instead of using &lt;code&gt;display&lt;/code&gt; you could store the element &apos;off-screen&apos; until you needed it, and then set its position to where you want it and transform it at the same time. This brings up a whole host of other design issues though, so your mileage may vary.&lt;/p&gt;\n\n&lt;p&gt;You probably wouldn&apos;t want to use &lt;code&gt;display&lt;/code&gt; anyway, as you&apos;d want the content to be accessible to screen readers, which for the most part try to obey rules for visibility - i.e., if it shouldn&apos;t be visible to the eye, it won&apos;t show up as content to the agent.&lt;/p&gt;\n    "]},"randomTags":[{"name":"language-features","slug":"language-features"},{"name":"awt","slug":"awt"},{"name":"least-astonishment","slug":"least-astonishment"},{"name":"header-files","slug":"header-files"},{"name":"servlets","slug":"servlets"},{"name":"recursive-query","slug":"recursive-query"},{"name":"file-io","slug":"file-io"},{"name":"flask-restless","slug":"flask-restless"},{"name":"sql-injection","slug":"sql-injection"},{"name":"char","slug":"char"},{"name":"jvm-hotspot","slug":"jvm-hotspot"},{"name":"row-height","slug":"row-height"},{"name":"q","slug":"q"},{"name":"syntax-error","slug":"syntax-error"},{"name":"excel","slug":"excel"},{"name":"firebase-realtime-database","slug":"firebase-realtime-database"},{"name":"null","slug":"null"},{"name":"unique","slug":"unique"},{"name":"iostream","slug":"iostream"},{"name":"same-origin-policy","slug":"same-origin-policy"}]},"__N_SSG":true}