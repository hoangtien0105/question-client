{"pageProps":{"data":{"count":1,"rows":[{"id":362,"title":"How to create a GUID / UUID","slug":"how-to-create-a-guid-uuid-1657387749530","postType":"QUESTION","createdAt":"2022-07-09T17:29:09.000Z","updatedAt":"2022-07-09T17:29:09.000Z","tags":[{"id":2013,"name":"guid","slug":"guid","createdAt":"2022-07-09T17:29:09.000Z","updatedAt":"2022-07-09T17:29:09.000Z","Questions_Tags":{"questionId":362,"tagId":2013}}]}]},"slug":"guid","page":"1","answers":{"362":["\n&lt;p&gt;&lt;em&gt;[Edited 2021-10-16 to reflect latest best-practices for producing RFC4122-compliant UUIDs]&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;Most readers here will want to use &lt;a href=&quot;https://www.npmjs.com/package/uuid&quot; rel=&quot;noreferrer&quot;&gt;the &lt;code&gt;uuid&lt;/code&gt; module&lt;/a&gt;.  It is well-tested and supported.&lt;/p&gt;\n&lt;p&gt;The &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;crypto.randomUUID()&lt;/code&gt;&lt;/a&gt; function is an emerging standard that is supported in &lt;a href=&quot;https://nodejs.org/dist/latest-v16.x/docs/api/crypto.html#cryptorandomuuidoptions&quot; rel=&quot;noreferrer&quot;&gt;Node.js&lt;/a&gt; and &lt;a href=&quot;https://caniuse.com/mdn-api_crypto_randomuuid&quot; rel=&quot;noreferrer&quot;&gt;an increasing number of browsers&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;If neither of those work for you, there is this method (based on the original answer to this question):\n&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;uuidv4&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ([&lt;span class=&quot;hljs-number&quot;&gt;1e7&lt;/span&gt;]+-&lt;span class=&quot;hljs-number&quot;&gt;1e3&lt;/span&gt;+-&lt;span class=&quot;hljs-number&quot;&gt;4e3&lt;/span&gt;+-&lt;span class=&quot;hljs-number&quot;&gt;8e3&lt;/span&gt;+-&lt;span class=&quot;hljs-number&quot;&gt;1e11&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[018]/g&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;c&lt;/span&gt; =&amp;gt;&lt;/span&gt;\n    (c ^ crypto.&lt;span class=&quot;hljs-title function_&quot;&gt;getRandomValues&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Uint8Array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;))[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt; &amp;gt;&amp;gt; c / &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;)\n  );\n}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;uuidv4&lt;/span&gt;());&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Note: &lt;strong&gt;The use of &lt;em&gt;any&lt;/em&gt; UUID generator that relies on Math.random() is strongly discouraged&lt;/strong&gt; (including snippets featured in previous versions of this answer) for &lt;a href=&quot;https://bocoup.com/blog/random-numbers&quot; rel=&quot;noreferrer&quot;&gt;reasons best-explained here&lt;/a&gt;. TL;DR: Math.random()-based solutions do not provide good uniqueness guarantees.&lt;/p&gt;\n    ","\n&lt;p&gt;UUIDs (Universally Unique IDentifier), also known as GUIDs (Globally Unique IDentifier), according to &lt;a href=&quot;https://www.ietf.org/rfc/rfc4122.txt&quot; rel=&quot;noreferrer&quot;&gt;RFC 4122&lt;/a&gt;, are identifiers designed to provide certain uniqueness guarantees.&lt;/p&gt;\n&lt;p&gt;While it is possible to implement RFC-compliant UUIDs in a few lines of JavaScript code (e.g., see &lt;a href=&quot;https://stackoverflow.com/a/2117523/109538&quot;&gt;@broofa&apos;s answer&lt;/a&gt;, below) there are several common pitfalls:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Invalid id format (UUIDs must be of the form &quot;&lt;code&gt;xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx&lt;/code&gt;&quot;, where x is one of [0-9, a-f] &lt;em&gt;M&lt;/em&gt; is one of [1-5], and &lt;em&gt;N&lt;/em&gt; is [8, 9, a, or b]&lt;/li&gt;\n&lt;li&gt;Use of a low-quality source of randomness (such as &lt;code&gt;Math.random&lt;/code&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Thus, developers writing code for production environments are encouraged to use a rigorous, well-maintained implementation such as the &lt;a href=&quot;https://github.com/uuidjs/uuid&quot; rel=&quot;noreferrer&quot;&gt;uuid&lt;/a&gt; module.&lt;/p&gt;\n    ","\n&lt;p&gt;I really like how clean &lt;a href=&quot;https://stackoverflow.com/a/2117523/508537&quot;&gt;Broofa&apos;s answer&lt;/a&gt; is, but it&apos;s unfortunate that &lt;a href=&quot;https://stackoverflow.com/q/6906916/508537&quot;&gt;poor implementations of &lt;code&gt;Math.random&lt;/code&gt;&lt;/a&gt; leave the chance for collision.&lt;/p&gt;\n&lt;p&gt;Here&apos;s a similar &lt;a href=&quot;http://www.ietf.org/rfc/rfc4122.txt&quot; rel=&quot;noreferrer&quot;&gt;RFC4122&lt;/a&gt; version 4 compliant solution that solves that issue by offsetting the first 13 hex numbers by a hex portion of the timestamp, and once depleted offsets by a hex portion of the microseconds since pageload.  That way, even if &lt;code&gt;Math.random&lt;/code&gt; is on the same seed, both clients would have to generate the UUID the exact same number of microseconds since pageload (if high-perfomance time is supported) AND at the exact same millisecond (or 10,000+ years later) to get the same UUID:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;generateUUID&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { &lt;span class=&quot;hljs-comment&quot;&gt;// Public Domain/MIT&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; d = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;getTime&lt;/span&gt;();&lt;span class=&quot;hljs-comment&quot;&gt;//Timestamp&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; d2 = ((&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; performance !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;) &amp;amp;&amp;amp; performance.&lt;span class=&quot;hljs-property&quot;&gt;now&lt;/span&gt; &amp;amp;&amp;amp; (performance.&lt;span class=&quot;hljs-title function_&quot;&gt;now&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;)) || &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot;&gt;//Time in microseconds since page-load or 0 if unsupported&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[xy]/g&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;c&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; r = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot;&gt;//random number between 0 and 16&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(d &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;){&lt;span class=&quot;hljs-comment&quot;&gt;//Use timestamp until depleted&lt;/span&gt;\n            r = (d + r)%&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n            d = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(d/&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {&lt;span class=&quot;hljs-comment&quot;&gt;//Use microseconds since page-load if supported&lt;/span&gt;\n            r = (d2 + r)%&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n            d2 = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(d2/&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (c === &lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt; ? r : (r &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x3&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0x8&lt;/span&gt;)).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n    });\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; onClick = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;uuid&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;generateUUID&lt;/span&gt;();\n}\n&lt;span class=&quot;hljs-title function_&quot;&gt;onClick&lt;/span&gt;();&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#uuid&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;font-family&lt;/span&gt;: monospace; &lt;span class=&quot;hljs-attribute&quot;&gt;font-size&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1.5em&lt;/span&gt;; }&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;uuid&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;generateUUID&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;onClick();&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Generate UUID&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://jsfiddle.net/briguy37/8eacgpnq/&quot; rel=&quot;noreferrer&quot;&gt;Here&apos;s a fiddle to test.&lt;/a&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;h3&gt;Modernized snippet for ES6&lt;/h3&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;generateUUID&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt;\n    d = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;getTime&lt;/span&gt;(),\n    d2 = (performance &amp;amp;&amp;amp; performance.&lt;span class=&quot;hljs-property&quot;&gt;now&lt;/span&gt; &amp;amp;&amp;amp; (performance.&lt;span class=&quot;hljs-title function_&quot;&gt;now&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;)) || &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[xy]/g&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;c&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; r = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (d &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n      r = (d + r) % &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n      d = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(d / &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n      r = (d2 + r) % &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n      d2 = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(d2 / &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (c == &lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt; ? r : (r &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x7&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0x8&lt;/span&gt;)).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n  });\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onClick&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;e&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;uuid&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;generateUUID&lt;/span&gt;();\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;generateUUID&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, onClick);\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;onClick&lt;/span&gt;();&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#uuid&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;font-family&lt;/span&gt;: monospace; &lt;span class=&quot;hljs-attribute&quot;&gt;font-size&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1.5em&lt;/span&gt;; }&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;uuid&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;generateUUID&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Generate UUID&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid/2117523#2117523&quot;&gt;broofa&apos;s answer&lt;/a&gt; is pretty slick, indeed - impressively clever, really...  RFC4122 compliant, somewhat readable, and compact. Awesome!&lt;/p&gt;\n&lt;p&gt;But if you&apos;re looking at that regular expression, those many &lt;code&gt;replace()&lt;/code&gt; callbacks, &lt;code&gt;toString()&lt;/code&gt;&apos;s and &lt;code&gt;Math.random()&lt;/code&gt; function calls (where he&apos;s only using four bits of the result and wasting the rest), you may start to wonder about performance. Indeed, joelpt even decided to toss out an RFC for generic GUID speed with &lt;code&gt;generateQuickGUID&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;But, can we get speed &lt;em&gt;and&lt;/em&gt; RFC compliance? I say, YES!&lt;/strong&gt; Can we maintain readability? Well... Not really, but it&apos;s easy if you follow along.&lt;/p&gt;\n&lt;p&gt;But first, my results, compared to broofa, &lt;code&gt;guid&lt;/code&gt; (the accepted answer), and the non-rfc-compliant &lt;code&gt;generateQuickGuid&lt;/code&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;                  &lt;span class=&quot;hljs-title class_&quot;&gt;Desktop&lt;/span&gt;   &lt;span class=&quot;hljs-title class_&quot;&gt;Android&lt;/span&gt;\n           &lt;span class=&quot;hljs-attr&quot;&gt;broofa&lt;/span&gt;: 1617ms   12869ms\n               &lt;span class=&quot;hljs-attr&quot;&gt;e1&lt;/span&gt;:  636ms    5778ms\n               &lt;span class=&quot;hljs-attr&quot;&gt;e2&lt;/span&gt;:  606ms    4754ms\n               &lt;span class=&quot;hljs-attr&quot;&gt;e3&lt;/span&gt;:  364ms    3003ms\n               &lt;span class=&quot;hljs-attr&quot;&gt;e4&lt;/span&gt;:  329ms    2015ms\n               &lt;span class=&quot;hljs-attr&quot;&gt;e5&lt;/span&gt;:  147ms    1156ms\n               &lt;span class=&quot;hljs-attr&quot;&gt;e6&lt;/span&gt;:  146ms    1035ms\n               &lt;span class=&quot;hljs-attr&quot;&gt;e7&lt;/span&gt;:  105ms     726ms\n             &lt;span class=&quot;hljs-attr&quot;&gt;guid&lt;/span&gt;:  962ms   10762ms\n&lt;span class=&quot;hljs-attr&quot;&gt;generateQuickGuid&lt;/span&gt;:  292ms    2961ms\n  - &lt;span class=&quot;hljs-title class_&quot;&gt;Note&lt;/span&gt;: 500k iterations, results will vary by browser/&lt;span class=&quot;hljs-variable constant_&quot;&gt;CPU&lt;/span&gt;.\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;So by my 6th iteration of optimizations, I beat the most popular answer by over &lt;strong&gt;12 times&lt;/strong&gt;, the accepted answer by over &lt;strong&gt;9 times&lt;/strong&gt;, and the fast-non-compliant answer by &lt;strong&gt;2-3 times&lt;/strong&gt;. And I&apos;m still RFC&amp;nbsp;4122 compliant.&lt;/p&gt;\n&lt;p&gt;Interested in how? I&apos;ve put the full source on &lt;a href=&quot;http://jsfiddle.net/jcward/7hyaC/3/&quot; rel=&quot;noreferrer&quot;&gt;http://jsfiddle.net/jcward/7hyaC/3/&lt;/a&gt; and on &lt;a href=&quot;https://jsben.ch/xczxS&quot; rel=&quot;noreferrer&quot;&gt;https://jsben.ch/xczxS&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;For an explanation, let&apos;s start with broofa&apos;s code:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;broofa&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[xy]/g&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;c&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; r = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, v = c == &lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt; ? r : (r&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0x3&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0x8&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; v.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n    });\n}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;broofa&lt;/span&gt;())&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif4&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;So it replaces &lt;code&gt;x&lt;/code&gt; with any random hexadecimal digit, &lt;code&gt;y&lt;/code&gt; with random data (except forcing the top two bits to &lt;code&gt;10&lt;/code&gt; per the RFC spec), and the regex doesn&apos;t match the &lt;code&gt;-&lt;/code&gt; or &lt;code&gt;4&lt;/code&gt; characters, so he doesn&apos;t have to deal with them.  Very, very slick.&lt;/p&gt;\n&lt;p&gt;The first thing to know is that function calls are expensive, as are regular expressions (though he only uses 1, it has 32 callbacks, one for each match, and in each of the 32 callbacks it calls Math.random() and v.toString(16)).&lt;/p&gt;\n&lt;p&gt;The first step toward performance is to eliminate the RegEx and its callback functions and use a simple loop instead.  This means we have to deal with the &lt;code&gt;-&lt;/code&gt; and &lt;code&gt;4&lt;/code&gt; characters whereas broofa did not.  Also, note that we can use String Array indexing to keep his slick String template architecture:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;e1&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; u=&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;,i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(i++&lt;span class=&quot;language-xml&quot;&gt;&amp;lt;36) {\n        var c=&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;[i-1],r=Math.random()*16|0,v=c==&apos;x&apos;?r:(r&amp;amp;0x3|0x8);\n        u+=(c==&apos;-&apos;||c==&apos;4&apos;)?c:v.toString(16)\n    }\n    return u;\n}\n\nconsole.log(e1())&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif5&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Basically, the same inner logic, except we check for &lt;code&gt;-&lt;/code&gt; or &lt;code&gt;4&lt;/code&gt;, and using a while loop (instead of &lt;code&gt;replace()&lt;/code&gt; callbacks) gets us an almost 3X improvement!&lt;/p&gt;\n&lt;p&gt;The next step is a small one on the desktop but makes a decent difference on mobile.  Let&apos;s make fewer Math.random() calls and utilize all those random bits instead of throwing 87% of them away with a random buffer that gets shifted out each iteration.  Let&apos;s also move that template definition out of the loop, just in case it helps:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;e2&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; u=&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;,m=&lt;span class=&quot;hljs-string&quot;&gt;&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;&lt;/span&gt;,i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,rb=&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;0xffffffff&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(i++&lt;span class=&quot;language-xml&quot;&gt;&amp;lt;36) {\n        var c=m[i-1],r=rb&amp;amp;0xf,v=c==&apos;x&apos;?r:(r&amp;amp;0x3|0x8);\n        u+=(c==&apos;-&apos;||c==&apos;4&apos;)?c:v.toString(16);rb=i%8==0?Math.random()*0xffffffff|0:rb&amp;gt;&amp;gt;4\n    }\n    return u\n}\n\nconsole.log(e2())&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif6&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;This saves us 10-30% depending on platform.  Not bad.  But the next big step gets rid of the toString function calls altogether with an optimization classic - the look-up table.  A simple 16-element lookup table will perform the job of toString(16) in much less time:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;e3&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; h=&lt;span class=&quot;hljs-string&quot;&gt;&apos;0123456789abcdef&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; k=&lt;span class=&quot;hljs-string&quot;&gt;&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-comment&quot;&gt;/* same as e4() below */&lt;/span&gt;\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;e4&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; h=[&lt;span class=&quot;hljs-string&quot;&gt;&apos;0&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;1&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;2&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;3&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;4&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;5&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;6&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;7&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;8&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;9&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;b&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;c&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;d&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;e&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;f&apos;&lt;/span&gt;];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; k=[&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;4&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;y&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; u=&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;,i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,rb=&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;0xffffffff&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(i++&lt;span class=&quot;language-xml&quot;&gt;&amp;lt;36) {\n        var c=k[i-1],r=rb&amp;amp;0xf,v=c==&apos;x&apos;?r:(r&amp;amp;0x3|0x8);\n        u+=(c==&apos;-&apos;||c==&apos;4&apos;)?c:h[v];rb=i%8==0?Math.random()*0xffffffff|0:rb&amp;gt;&amp;gt;4\n    }\n    return u\n}\n\nconsole.log(e4())&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif7&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;The next optimization is another classic.  Since we&apos;re only handling four bits of output in each loop iteration, let&apos;s cut the number of loops in half and process eight bits in each iteration.  This is tricky since we still have to handle the RFC compliant bit positions, but it&apos;s not too hard.  We then have to make a larger lookup table (16x16, or 256) to store 0x00 - 0xFF, and we build it only once, outside the e5() function.&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; lut = []; &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;256&lt;/span&gt;; i++) { lut[i] = (i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;?&lt;span class=&quot;hljs-string&quot;&gt;&apos;0&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;)+(i).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;); }\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;e5&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; k=[&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;4&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;y&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; u=&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;,i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,rb=&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;0xffffffff&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(i++&lt;span class=&quot;language-xml&quot;&gt;&amp;lt;20) {\n        var c=k[i-1],r=rb&amp;amp;0xff,v=c==&apos;x&apos;?r:(c==&apos;y&apos;?(r&amp;amp;0x3f|0x80):(r&amp;amp;0xf|0x40));\n        u+=(c==&apos;-&apos;)?c:lut[v];rb=i%4==0?Math.random()*0xffffffff|0:rb&amp;gt;&amp;gt;8\n    }\n    return u\n}\n\nconsole.log(e5())&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif8&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;I tried an e6() that processes 16-bits at a time, still using the 256-element &lt;a href=&quot;https://en.wikipedia.org/wiki/Lookup_table&quot; rel=&quot;noreferrer&quot;&gt;LUT&lt;/a&gt;, and it showed the diminishing returns of optimization.  Though it had fewer iterations, the inner logic was complicated by the increased processing, and it performed the same on desktop, and only ~10% faster on mobile.&lt;/p&gt;\n&lt;p&gt;The final optimization technique to apply - unroll the loop.  Since we&apos;re looping a fixed number of times, we can technically write this all out by hand.  I tried this once with a single random variable, &lt;code&gt;r&lt;/code&gt;, that I kept reassigning, and performance tanked.  But with four variables assigned random data up front, then using the lookup table, and applying the proper RFC bits, this version smokes them all:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; lut = []; &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;256&lt;/span&gt;; i++) { lut[i] = (i&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;?&lt;span class=&quot;hljs-string&quot;&gt;&apos;0&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;)+(i).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;); }\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;e7&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; d0 = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;0xffffffff&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; d1 = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;0xffffffff&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; d2 = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;0xffffffff&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; d3 = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;0xffffffff&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; lut[d0&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+lut[d0&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+lut[d0&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+lut[d0&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;+\n    lut[d1&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+lut[d1&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;+lut[d1&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0x0f&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0x40&lt;/span&gt;]+lut[d1&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;+\n    lut[d2&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0x3f&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0x80&lt;/span&gt;]+lut[d2&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;+lut[d2&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+lut[d2&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+\n    lut[d3&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+lut[d3&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+lut[d3&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;]+lut[d3&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0xff&lt;/span&gt;];\n}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;e7&lt;/span&gt;())&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif9&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Modualized:  &lt;a href=&quot;http://jcward.com/UUID.js&quot; rel=&quot;noreferrer&quot;&gt;http://jcward.com/UUID.js&lt;/a&gt; - &lt;code&gt;UUID.generate()&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;The funny thing is, generating 16 bytes of random data is the easy part.  The whole trick is expressing it in &lt;em&gt;string&lt;/em&gt; format with RFC compliance, and it&apos;s most tightly accomplished with 16 bytes of random data, an unrolled loop and lookup table.&lt;/p&gt;\n&lt;p&gt;I hope my logic is correct -- it&apos;s very easy to make a mistake in this kind of tedious bit work. But the outputs look good to me. I hope you enjoyed this mad ride through code optimization!&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Be advised:&lt;/strong&gt; my primary goal was to show and teach potential optimization strategies.  Other answers cover important topics such as collisions and truly random numbers, which are important for generating good UUIDs.&lt;/p&gt;\n    ","\n&lt;p&gt;Use:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; uniqueId = &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;now&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;36&lt;/span&gt;) + &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;36&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;false&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;unique&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;innerHTML&lt;/span&gt; =\n  &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;36&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;) + (&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;()).&lt;span class=&quot;hljs-title function_&quot;&gt;getTime&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;36&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;unique&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif10&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;If IDs are generated more than 1 millisecond apart, they are 100% unique.&lt;/p&gt;\n&lt;p&gt;If two IDs are generated at shorter intervals, and assuming that the random method is truly random, this would generate IDs that are 99.99999999999999% likely to be globally unique (collision in 1 of 10^15).&lt;/p&gt;\n&lt;p&gt;You can increase this number by adding more digits, but to generate 100% unique IDs you will need to use a global counter.&lt;/p&gt;\n&lt;p&gt;If you need RFC compatibility, this formatting will pass as a valid version 4 GUID:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; u = &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;now&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;) + &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;) + &lt;span class=&quot;hljs-string&quot;&gt;&apos;0&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;repeat&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; guid = [u.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;), u.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;), &lt;span class=&quot;hljs-string&quot;&gt;&apos;4000-8&apos;&lt;/span&gt; + u.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;), u.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;)].&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;false&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; u = &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;now&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;)+&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;)+&lt;span class=&quot;hljs-string&quot;&gt;&apos;0&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;repeat&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; guid = [u.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;), u.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;), &lt;span class=&quot;hljs-string&quot;&gt;&apos;4000-8&apos;&lt;/span&gt; + u.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;), u.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;)].&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;unique&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;innerHTML&lt;/span&gt; = guid;&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;unique&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif11&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;The above code follow the intention, but not the letter of the RFC. Among other discrepancies it&apos;s a few random digits short. (Add more random digits if you need it) The upside is that this is really fast :)\nYou can &lt;a href=&quot;https://www.freecodeformat.com/validate-uuid-guid.php&quot; rel=&quot;noreferrer&quot;&gt;test validity of your GUID here&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Here&apos;s some code based on &lt;a href=&quot;http://www.ietf.org/rfc/rfc4122.txt&quot; rel=&quot;noreferrer&quot;&gt;RFC 4122&lt;/a&gt;, section 4.4 (Algorithms for Creating a UUID from Truly Random or Pseudo-Random Number).&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;createUUID&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// http://www.ietf.org/rfc/rfc4122.txt&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; s = [];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; hexDigits = &lt;span class=&quot;hljs-string&quot;&gt;&quot;0123456789abcdef&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;36&lt;/span&gt;; i++) {\n        s[i] = hexDigits.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;0x10&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n    }\n    s[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;4&quot;&lt;/span&gt;;  &lt;span class=&quot;hljs-comment&quot;&gt;// bits 12-15 of the time_hi_and_version field to 0010&lt;/span&gt;\n    s[&lt;span class=&quot;hljs-number&quot;&gt;19&lt;/span&gt;] = hexDigits.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;((s[&lt;span class=&quot;hljs-number&quot;&gt;19&lt;/span&gt;] &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x3&lt;/span&gt;) | &lt;span class=&quot;hljs-number&quot;&gt;0x8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);  &lt;span class=&quot;hljs-comment&quot;&gt;// bits 6-7 of the clock_seq_hi_and_reserved to 01&lt;/span&gt;\n    s[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;] = s[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;] = s[&lt;span class=&quot;hljs-number&quot;&gt;18&lt;/span&gt;] = s[&lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; uuid = s.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; uuid;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This is the fastest GUID-like string generator method in the format &lt;code&gt;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&lt;/code&gt;. It does not generate a standard-compliant GUID.&lt;/p&gt;\n&lt;p&gt;Ten million executions of this implementation take just 32.5 seconds, which is the fastest I&apos;ve ever seen in a browser (the only solution without loops/iterations).&lt;/p&gt;\n&lt;p&gt;The function is as simple as:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Generates a GUID string.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@returns&lt;/span&gt; {&lt;span class=&quot;hljs-type&quot;&gt;string&lt;/span&gt;} The generated GUID.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@example&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;af8a8416&lt;/span&gt;-6e18-a307-bd9c-f2c947bbb3aa\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@author&lt;/span&gt; Slavik Meltser.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@link&lt;/span&gt; http://slavik.meltser.info/?p=142\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;guid&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;_p8&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;s&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; p = (&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;)+&lt;span class=&quot;hljs-string&quot;&gt;&quot;000000000&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; s ? &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt; + p.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;) + &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt; + p.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;) : p ;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;_p8&lt;/span&gt;() + &lt;span class=&quot;hljs-title function_&quot;&gt;_p8&lt;/span&gt;(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;) + &lt;span class=&quot;hljs-title function_&quot;&gt;_p8&lt;/span&gt;(&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;) + &lt;span class=&quot;hljs-title function_&quot;&gt;_p8&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;To test the performance, you can run this code:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;time&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;t&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;10000000&lt;/span&gt;; i++) {\n    &lt;span class=&quot;hljs-title function_&quot;&gt;guid&lt;/span&gt;();\n};\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;timeEnd&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;t&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;I&apos;m sure most of you will understand what I did there, but maybe there is at least one person that will need an explanation:&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;The algorithm:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;The &lt;code&gt;Math.random()&lt;/code&gt; function returns a decimal number between 0 and 1 with 16 digits after the decimal fraction point (for\nexample &lt;code&gt;0.4363923368509859&lt;/code&gt;).&lt;/li&gt;\n&lt;li&gt;Then we take this number and convert\nit to a string with base 16 (from the example above we&apos;ll get\n&lt;code&gt;0.6fb7687f&lt;/code&gt;).\n&lt;code&gt;Math.random().toString(16)&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Then we cut off the &lt;code&gt;0.&lt;/code&gt; prefix (&lt;code&gt;0.6fb7687f&lt;/code&gt; =&amp;gt;\n&lt;code&gt;6fb7687f&lt;/code&gt;) and get a string with eight hexadecimal\ncharacters long.\n&lt;code&gt;(Math.random().toString(16).substr(2,8)&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Sometimes the &lt;code&gt;Math.random()&lt;/code&gt; function will return\nshorter number (for example &lt;code&gt;0.4363&lt;/code&gt;), due to zeros at the end (from the example above, actually the number is &lt;code&gt;0.4363000000000000&lt;/code&gt;). That&apos;s why I&apos;m appending to this string &lt;code&gt;&quot;000000000&quot;&lt;/code&gt; (a string with nine zeros) and then cutting it off with &lt;code&gt;substr()&lt;/code&gt; function to make it nine characters exactly (filling zeros to the right).&lt;/li&gt;\n&lt;li&gt;The reason for adding exactly nine zeros is because of the worse case scenario, which is when the &lt;code&gt;Math.random()&lt;/code&gt; function will return exactly 0 or 1 (probability of 1/10^16 for each one of them). That&apos;s why we needed to add nine zeros to it (&lt;code&gt;&quot;0&quot;+&quot;000000000&quot;&lt;/code&gt; or &lt;code&gt;&quot;1&quot;+&quot;000000000&quot;&lt;/code&gt;), and then cutting it off from the second index (third character) with a length of eight characters. For the rest of the cases, the addition of zeros will not harm the result because it is cutting it off anyway.\n&lt;code&gt;Math.random().toString(16)+&quot;000000000&quot;).substr(2,8)&lt;/code&gt;.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;The assembly:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;The GUID is in the following format &lt;code&gt;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;I divided the GUID into four pieces, each piece divided into two types (or formats): &lt;code&gt;XXXXXXXX&lt;/code&gt; and &lt;code&gt;-XXXX-XXXX&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Now I&apos;m building the GUID using these two types to assemble the GUID with call four pieces, as follows: &lt;code&gt;XXXXXXXX&lt;/code&gt; &lt;code&gt;-XXXX-XXXX&lt;/code&gt; &lt;code&gt;-XXXX-XXXX&lt;/code&gt; &lt;code&gt;XXXXXXXX&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;To differ between these two types, I added a flag parameter to a pair creator function &lt;code&gt;_p8(s)&lt;/code&gt;, the &lt;code&gt;s&lt;/code&gt; parameter tells the function whether to add dashes or not.&lt;/li&gt;\n&lt;li&gt;Eventually we build the GUID with the following chaining: &lt;code&gt;_p8() + _p8(true) + _p8(true) + _p8()&lt;/code&gt;, and return it.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;a href=&quot;http://slavik.meltser.info/the-efficient-way-to-create-guid-uuid-in-javascript/&quot; rel=&quot;nofollow noreferrer&quot;&gt;Link to this post on my blog&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Enjoy! :-)&lt;/strong&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Here is a totally non-compliant but very performant implementation to generate an ASCII-safe GUID-like unique identifier.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;generateQuickGuid&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;36&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;) +\n        &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;36&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Generates 26 [a-z0-9] characters, yielding a UID that is both shorter and more unique than RFC compliant GUIDs. Dashes can be trivially added if human-readability matters.&lt;/p&gt;\n\n&lt;p&gt;Here are usage examples and timings for this function and several of this question&apos;s other answers. The timing was performed under Chrome m25, 10 million iterations each.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;generateQuickGuid&lt;/span&gt;()\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;nvcjf1hs7tf8yyk4lmlijqkuo9&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;yq6gipxqta4kui8z05tgh9qeel&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;36dh5sec7zdj90sk2rx7pjswi2&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;32.&lt;/span&gt;5s\n\n&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;GUID&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// John Millikin&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;7a342ca2-e79f-528e-6302-8f901b0b6888&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;57.&lt;/span&gt;8s\n\n&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;regexGuid&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// broofa&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;396e0c46-09e4-4b19-97db-bd423774a4b3&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;91.&lt;/span&gt;2s\n\n&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;createUUID&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// Kevin Hakanson&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;403aa1ab-9f70-44ec-bc08-5d5ac56bd8a5&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;65.&lt;/span&gt;9s\n\n&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;UUIDv4&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// Jed Schmidt&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;f4d7d31f-fa83-431a-b30c-3e6cc37cc6ee&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;282.&lt;/span&gt;4s\n\n&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;uuid&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// broofa&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;5BD52F55-E68F-40FC-93C2-90EE069CE545&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;225.&lt;/span&gt;8s\n\n&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;uuidFast&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// broofa&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;6CB97A68-23A2-473E-B75B-11263781BBE6&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;92.&lt;/span&gt;0s\n\n&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;uuidCompact&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// broofa&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;3d7b7a06-0a67-4b67-825c-e5c43ff8c1e8&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;229.&lt;/span&gt;0s\n\n&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;bitwiseGUID&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// jablko&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;baeaa2f-7587-4ff1-af23-eeab3e92&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;79.&lt;/span&gt;6s\n\n&amp;gt;&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;betterWayGUID&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// Andrea Turri&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;383585b0-9753-498d-99c3-416582e9662c&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;60.&lt;/span&gt;0s\n\n&amp;gt;&amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;UUID&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// John Fowler&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;855f997b-4369-4cdb-b7c9-7142ceaf39e8&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;runtime&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;62.&lt;/span&gt;2s\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here is the timing code.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; r;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;time&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;t&apos;&lt;/span&gt;); \n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;10000000&lt;/span&gt;; i++) { \n    r = &lt;span class=&quot;hljs-title class_&quot;&gt;FuncToTest&lt;/span&gt;(); \n};\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;timeEnd&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;t&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;From &lt;a href=&quot;http://blog.shkedy.com/2007/01/createing-guids-with-client-side.html&quot; rel=&quot;noreferrer&quot;&gt;sagi shkedy&apos;s technical blog&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;generateGuid&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result, i, j;\n  result = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(j=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; j&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;; j++) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;( j == &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt; || j == &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt; || j == &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt; || j == &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;)\n      result = result + &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;;\n    i = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toUpperCase&lt;/span&gt;();\n    result = result + i;\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;There are other methods that involve using an &lt;a href=&quot;https://en.wikipedia.org/wiki/ActiveX&quot; rel=&quot;noreferrer&quot;&gt;ActiveX&lt;/a&gt; control, but stay away from these!&lt;/p&gt;\n&lt;p&gt;I thought it was worth pointing out that no GUID generator can guarantee unique keys (check the &lt;a href=&quot;http://en.wikipedia.org/wiki/Globally_Unique_Identifier&quot; rel=&quot;noreferrer&quot;&gt;Wikipedia article&lt;/a&gt;). There is always a chance of collisions. A GUID simply offers a large enough universe of keys to reduce the change of collisions to almost nil.&lt;/p&gt;\n    ","\n&lt;p&gt;Here is a combination of the &lt;a href=&quot;https://stackoverflow.com/a/2117523/11236&quot;&gt;top voted answer&lt;/a&gt;, with a workaround for &lt;a href=&quot;https://stackoverflow.com/questions/6906916/collisions-when-generating-uuids-in-javascript&quot;&gt;Chrome&apos;s collisions&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;generateGUID = (&lt;span class=&quot;hljs-title function_&quot;&gt;typeof&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;crypto&lt;/span&gt;) != &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; &amp;amp;&amp;amp;\n                &lt;span class=&quot;hljs-title function_&quot;&gt;typeof&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;crypto&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getRandomValues&lt;/span&gt;) != &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;) ?\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// If we have a cryptographically secure PRNG, use that&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// https://stackoverflow.com/questions/6906916/collisions-when-generating-uuids-in-javascript&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; buf = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Uint16Array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;);\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;crypto&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getRandomValues&lt;/span&gt;(buf);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;S4&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;num&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ret = num.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(ret.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;){\n                ret = &lt;span class=&quot;hljs-string&quot;&gt;&quot;0&quot;&lt;/span&gt;+ret;\n            }\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ret;\n        };\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;S4&lt;/span&gt;(buf[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])+&lt;span class=&quot;hljs-title function_&quot;&gt;S4&lt;/span&gt;(buf[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])+&lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;+&lt;span class=&quot;hljs-title function_&quot;&gt;S4&lt;/span&gt;(buf[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;])+&lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;+&lt;span class=&quot;hljs-title function_&quot;&gt;S4&lt;/span&gt;(buf[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;])+&lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;+&lt;span class=&quot;hljs-title function_&quot;&gt;S4&lt;/span&gt;(buf[&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;])+&lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;+&lt;span class=&quot;hljs-title function_&quot;&gt;S4&lt;/span&gt;(buf[&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;])+&lt;span class=&quot;hljs-title function_&quot;&gt;S4&lt;/span&gt;(buf[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;])+&lt;span class=&quot;hljs-title function_&quot;&gt;S4&lt;/span&gt;(buf[&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;]));\n    }\n\n    :\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Otherwise, just use Math.random&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[xy]/g&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;c&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; r = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, v = c == &lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt; ? r : (r&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0x3&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0x8&lt;/span&gt;);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; v.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n        });\n    };\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It is &lt;a href=&quot;http://jsbin.com/uqives/3&quot; rel=&quot;nofollow noreferrer&quot;&gt;on jsbin&lt;/a&gt; if you want to test it.&lt;/p&gt;\n    ","\n&lt;p&gt;Here&apos;s a solution dated Oct. 9, 2011 from a comment by user &lt;em&gt;jed&lt;/em&gt; at &lt;a href=&quot;https://gist.github.com/982883&quot; rel=&quot;noreferrer&quot;&gt;https://gist.github.com/982883&lt;/a&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;UUIDv4&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;b&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;){&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a?(a^&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;&amp;gt;&amp;gt;a/&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;):([&lt;span class=&quot;hljs-number&quot;&gt;1e7&lt;/span&gt;]+-&lt;span class=&quot;hljs-number&quot;&gt;1e3&lt;/span&gt;+-&lt;span class=&quot;hljs-number&quot;&gt;4e3&lt;/span&gt;+-&lt;span class=&quot;hljs-number&quot;&gt;8e3&lt;/span&gt;+-&lt;span class=&quot;hljs-number&quot;&gt;1e11&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[018]/g&lt;/span&gt;,b)}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This accomplishes the same goal as the &lt;a href=&quot;https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523&quot;&gt;current highest-rated answer&lt;/a&gt;, but in 50+ fewer bytes by exploiting coercion, recursion, and exponential notation. For those curious how it works, here&apos;s the annotated form of an older version of the function:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;UUIDv4&lt;/span&gt; =\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;b&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;\n  a &lt;span class=&quot;hljs-comment&quot;&gt;// placeholder&lt;/span&gt;\n&lt;/span&gt;){\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a &lt;span class=&quot;hljs-comment&quot;&gt;// if the placeholder was passed, return&lt;/span&gt;\n    ? ( &lt;span class=&quot;hljs-comment&quot;&gt;// a random number from 0 to 15&lt;/span&gt;\n      a ^ &lt;span class=&quot;hljs-comment&quot;&gt;// unless b is 8,&lt;/span&gt;\n      &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// in which case&lt;/span&gt;\n      * &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// a random number from&lt;/span&gt;\n      &amp;gt;&amp;gt; a/&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// 8 to 11&lt;/span&gt;\n      ).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;// in hexadecimal&lt;/span&gt;\n    : ( &lt;span class=&quot;hljs-comment&quot;&gt;// or otherwise a concatenated string:&lt;/span&gt;\n      [&lt;span class=&quot;hljs-number&quot;&gt;1e7&lt;/span&gt;] + &lt;span class=&quot;hljs-comment&quot;&gt;// 10000000 +&lt;/span&gt;\n      -&lt;span class=&quot;hljs-number&quot;&gt;1e3&lt;/span&gt; + &lt;span class=&quot;hljs-comment&quot;&gt;// -1000 +&lt;/span&gt;\n      -&lt;span class=&quot;hljs-number&quot;&gt;4e3&lt;/span&gt; + &lt;span class=&quot;hljs-comment&quot;&gt;// -4000 +&lt;/span&gt;\n      -&lt;span class=&quot;hljs-number&quot;&gt;8e3&lt;/span&gt; + &lt;span class=&quot;hljs-comment&quot;&gt;// -80000000 +&lt;/span&gt;\n      -&lt;span class=&quot;hljs-number&quot;&gt;1e11&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// -100000000000,&lt;/span&gt;\n      ).&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;( &lt;span class=&quot;hljs-comment&quot;&gt;// replacing&lt;/span&gt;\n        &lt;span class=&quot;hljs-regexp&quot;&gt;/[018]/g&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// zeroes, ones, and eights with&lt;/span&gt;\n        b &lt;span class=&quot;hljs-comment&quot;&gt;// random hex digits&lt;/span&gt;\n      )\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can use &lt;a href=&quot;https://github.com/kelektiv/node-uuid&quot; rel=&quot;noreferrer&quot;&gt;node-uuid&lt;/a&gt;. It provides simple, fast generation of &lt;a href=&quot;http://www.ietf.org/rfc/rfc4122.txt&quot; rel=&quot;noreferrer&quot;&gt;RFC4122&lt;/a&gt; UUIDS.&lt;/p&gt;\n&lt;p&gt;Features:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Generate RFC4122 version 1 or version 4 UUIDs&lt;/li&gt;\n&lt;li&gt;Runs in &lt;a href=&quot;https://en.wikipedia.org/wiki/Node.js&quot; rel=&quot;noreferrer&quot;&gt;Node.js&lt;/a&gt; and browsers.&lt;/li&gt;\n&lt;li&gt;Cryptographically strong random # generation on supporting platforms.&lt;/li&gt;\n&lt;li&gt;Small footprint (Want something smaller? &lt;a href=&quot;https://gist.github.com/982883&quot; rel=&quot;noreferrer&quot;&gt;Check this out!&lt;/a&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr&gt;\n&lt;p&gt;&lt;strong&gt;Install Using NPM:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;npm install uuid\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;&lt;strong&gt;Or using uuid via a browser:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Download Raw File (uuid v1): &lt;a href=&quot;https://raw.githubusercontent.com/kelektiv/node-uuid/master/v1.js&quot; rel=&quot;noreferrer&quot;&gt;https://raw.githubusercontent.com/kelektiv/node-uuid/master/v1.js&lt;/a&gt;\nDownload Raw File (uuid v4): &lt;a href=&quot;https://raw.githubusercontent.com/kelektiv/node-uuid/master/v4.js&quot; rel=&quot;noreferrer&quot;&gt;https://raw.githubusercontent.com/kelektiv/node-uuid/master/v4.js&lt;/a&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;Want even smaller? Check this out: &lt;a href=&quot;https://gist.github.com/jed/982883&quot; rel=&quot;noreferrer&quot;&gt;https://gist.github.com/jed/982883&lt;/a&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;&lt;strong&gt;Usage:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Generate a v1 UUID (time-based)&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; uuidV1 = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;uuid/v1&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;uuidV1&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// -&amp;gt; &apos;6c84fb90-12c4-11e1-840d-7b25c5ee775a&apos;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Generate a v4 UUID (random)&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; uuidV4 = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;uuid/v4&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;uuidV4&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// -&amp;gt; &apos;110ec58a-a0f2-4ac4-8393-c866d813b8d1&apos;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Generate a v5 UUID (namespace)&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; uuidV5 = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;uuid/v5&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ... using predefined DNS namespace (for domain names)&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;uuidV5&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hello.example.com&apos;&lt;/span&gt;, v5.&lt;span class=&quot;hljs-property&quot;&gt;DNS&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// -&amp;gt; &apos;fdda765f-fc57-5604-a269-52a7df8164ec&apos;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ... using predefined URL namespace (for, well, URLs)&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;uuidV5&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;http://example.com/hello&apos;&lt;/span&gt;, v5.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// -&amp;gt; &apos;3bbcee75-cecc-5b56-8031-b6641c1ed1f1&apos;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ... using a custom namespace&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;MY_NAMESPACE&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;(previously generated unique uuid string)&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-title function_&quot;&gt;uuidV5&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hello&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-variable constant_&quot;&gt;MY_NAMESPACE&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// -&amp;gt; &apos;90123e1c-7512-523e-bb28-76fab9f2f73d&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;&lt;strong&gt;ECMAScript&amp;nbsp;2015 (ES6):&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; uuid &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;uuid/v4&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; id = &lt;span class=&quot;hljs-title function_&quot;&gt;uuid&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; uuid = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; buf = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Uint32Array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;crypto&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getRandomValues&lt;/span&gt;(buf);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; idx = -&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[xy]/g&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;c&lt;/span&gt;) {\n        idx++;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; r = (buf[idx&amp;gt;&amp;gt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;] &amp;gt;&amp;gt; ((idx%&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;)*&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;))&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; v = c == &lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt; ? r : (r&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;0x3&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0x8&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; v.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n    });\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This version is based on Briguy37&apos;s answer and some bitwise operators to extract nibble sized windows from the buffer.&lt;/p&gt;\n&lt;p&gt;It should adhere to the RFC Type 4 (random) schema, since I had &lt;em&gt;problems&lt;/em&gt; last time parsing non-compliant UUIDs with Java&apos;s UUID.&lt;/p&gt;\n    ","\n&lt;p&gt;This creates a version 4 UUID (created from pseudo random numbers):&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;uuid&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)\n{\n   &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; chars = &lt;span class=&quot;hljs-string&quot;&gt;&apos;0123456789abcdef&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;);\n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; uuid = [], rnd = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;random&lt;/span&gt;, r;\n   uuid[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;] = uuid[&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;] = uuid[&lt;span class=&quot;hljs-number&quot;&gt;18&lt;/span&gt;] = uuid[&lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;;\n   uuid[&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;4&apos;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// version 4&lt;/span&gt;\n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;36&lt;/span&gt;; i++)\n   {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!uuid[i])\n      {\n         r = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; | &lt;span class=&quot;hljs-title function_&quot;&gt;rnd&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;;\n\n         uuid[i] = chars[(i == &lt;span class=&quot;hljs-number&quot;&gt;19&lt;/span&gt;) ? (r &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x3&lt;/span&gt;) | &lt;span class=&quot;hljs-number&quot;&gt;0x8&lt;/span&gt; : r &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0xf&lt;/span&gt;];\n      }\n   }\n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; uuid.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Here is a sample of the UUIDs generated:&lt;/p&gt;\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;682db637-0f31-4847-9cdf-25ba9613a75c\n97d19478-3ab2-4aa1-b8cc-a1c3540f54aa\n2eed04c9-2692-456d-a0fd-51012f947136\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Simple JavaScript module as a combination of best answers in this question.&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; crypto = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;crypto&lt;/span&gt; || &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;msCrypto&lt;/span&gt; || &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// IE11 fix&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Guid&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;Guid&lt;/span&gt; || (&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;EMPTY&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;00000000-0000-0000-0000-000000000000&apos;&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; _padLeft = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;paddingString, width, replacementChar&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; paddingString.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt;= width ? paddingString : &lt;span class=&quot;hljs-title function_&quot;&gt;_padLeft&lt;/span&gt;(replacementChar + paddingString, width, replacementChar || &lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;);\n  };\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; _s4 = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;number&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; hexadecimalResult = number.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;_padLeft&lt;/span&gt;(hexadecimalResult, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;0&apos;&lt;/span&gt;);\n  };\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; _cryptoGuid = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; buffer = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;Uint16Array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;);\n    crypto.&lt;span class=&quot;hljs-title function_&quot;&gt;getRandomValues&lt;/span&gt;(buffer);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;hljs-title function_&quot;&gt;_s4&lt;/span&gt;(buffer[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]) + &lt;span class=&quot;hljs-title function_&quot;&gt;_s4&lt;/span&gt;(buffer[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]), &lt;span class=&quot;hljs-title function_&quot;&gt;_s4&lt;/span&gt;(buffer[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]), &lt;span class=&quot;hljs-title function_&quot;&gt;_s4&lt;/span&gt;(buffer[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]), &lt;span class=&quot;hljs-title function_&quot;&gt;_s4&lt;/span&gt;(buffer[&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]), &lt;span class=&quot;hljs-title function_&quot;&gt;_s4&lt;/span&gt;(buffer[&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]) + &lt;span class=&quot;hljs-title function_&quot;&gt;_s4&lt;/span&gt;(buffer[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]) + &lt;span class=&quot;hljs-title function_&quot;&gt;_s4&lt;/span&gt;(buffer[&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;])].&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;);\n  };\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; _guid = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; currentDateMilliseconds = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;getTime&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[xy]/g&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;currentChar&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; randomChar = (currentDateMilliseconds + &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;) % &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n      currentDateMilliseconds = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(currentDateMilliseconds / &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (currentChar === &lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt; ? randomChar : (randomChar &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x7&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0x8&lt;/span&gt;)).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n    });\n  };\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; create = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; hasCrypto = crypto != &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; &amp;amp;&amp;amp; crypto !== &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;,\n      hasRandomValues = &lt;span class=&quot;hljs-title function_&quot;&gt;typeof&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;crypto&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getRandomValues&lt;/span&gt;) != &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (hasCrypto &amp;amp;&amp;amp; hasRandomValues) ? &lt;span class=&quot;hljs-title function_&quot;&gt;_cryptoGuid&lt;/span&gt;() : &lt;span class=&quot;hljs-title function_&quot;&gt;_guid&lt;/span&gt;();\n  };\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;newGuid&lt;/span&gt;: create,\n    &lt;span class=&quot;hljs-attr&quot;&gt;empty&lt;/span&gt;: &lt;span class=&quot;hljs-variable constant_&quot;&gt;EMPTY&lt;/span&gt;\n  };\n})();\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// DEMO: Create and show GUID&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1. New Guid:   &apos;&lt;/span&gt; + &lt;span class=&quot;hljs-title class_&quot;&gt;Guid&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;newGuid&lt;/span&gt;());\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// DEMO: Show empty GUID&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;2. Empty Guid: &apos;&lt;/span&gt; + &lt;span class=&quot;hljs-title class_&quot;&gt;Guid&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;empty&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif12&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Usage:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;Guid.newGuid()&lt;/strong&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&quot;c6c2d12f-d76b-5739-e551-07e6de5b0807&quot;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;Guid.empty&lt;/strong&gt;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;/blockquote&gt;\n&lt;blockquote&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&quot;00000000-0000-0000-0000-000000000000&quot;&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;p&gt;The version below is an adaptation of &lt;a href=&quot;https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid/2117523#2117523&quot;&gt;broofa&apos;s answer&lt;/a&gt;, but updated to include a &quot;true&quot; random function that uses crypto libraries where available, and the Alea() function as a fallback.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;  &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;log2&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;log2&lt;/span&gt; || &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;n&lt;/span&gt;){ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(n) / &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;); }\n  &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;trueRandom&lt;/span&gt; = (&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; crypt = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;crypto&lt;/span&gt; || &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;msCrypto&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (crypt &amp;amp;&amp;amp; crypt.&lt;span class=&quot;hljs-property&quot;&gt;getRandomValues&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-comment&quot;&gt;// If we have a crypto library, use it&lt;/span&gt;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; random = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;min, max&lt;/span&gt;) {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; rval = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; range = max - min;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (range &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;) {\n              &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; min;\n          }\n\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bits_needed = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;ceil&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log2&lt;/span&gt;(range));\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (bits_needed &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;53&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Exception&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;We cannot generate numbers larger than 53 bits.&quot;&lt;/span&gt;);\n          }\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bytes_needed = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;ceil&lt;/span&gt;(bits_needed / &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;);\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; mask = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;pow&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, bits_needed) - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n          &lt;span class=&quot;hljs-comment&quot;&gt;// 7776 -&amp;gt; (2^13 = 8192) -1 == 8191 or 0x00001111 11111111&lt;/span&gt;\n\n          &lt;span class=&quot;hljs-comment&quot;&gt;// Create byte array and fill with N random numbers&lt;/span&gt;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; byteArray = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Uint8Array&lt;/span&gt;(bytes_needed);\n          crypt.&lt;span class=&quot;hljs-title function_&quot;&gt;getRandomValues&lt;/span&gt;(byteArray);\n\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; p = (bytes_needed - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) * &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; bytes_needed; i++ ) {\n              rval += byteArray[i] * &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;pow&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, p);\n              p -= &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;\n          }\n\n          &lt;span class=&quot;hljs-comment&quot;&gt;// Use &amp;amp; to apply the mask and reduce the number of recursive lookups&lt;/span&gt;\n          rval = rval &amp;amp; mask;\n\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (rval &amp;gt;= range) {\n              &lt;span class=&quot;hljs-comment&quot;&gt;// Integer out of acceptable range&lt;/span&gt;\n              &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;(min, max);\n          }\n          &lt;span class=&quot;hljs-comment&quot;&gt;// Return an integer that falls within the range&lt;/span&gt;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; min + rval;\n      }\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; r = &lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1000000000&lt;/span&gt;) / &lt;span class=&quot;hljs-number&quot;&gt;1000000000&lt;/span&gt;;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; r;\n      };\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n      &lt;span class=&quot;hljs-comment&quot;&gt;// From https://web.archive.org/web/20120502223108/http://baagoe.com/en/RandomMusings/javascript/&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// Johannes Baage &amp;lt;baagoe@baagoe.com&amp;gt;, 2010&lt;/span&gt;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Mash&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; n = &lt;span class=&quot;hljs-number&quot;&gt;0xefc8249d&lt;/span&gt;;\n\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; mash = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;) {\n              data = data.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;();\n              &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; data.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n                  n += data.&lt;span class=&quot;hljs-title function_&quot;&gt;charCodeAt&lt;/span&gt;(i);\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; h = &lt;span class=&quot;hljs-number&quot;&gt;0.02519603282416938&lt;/span&gt; * n;\n                  n = h &amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n                  h -= n;\n                  h *= n;\n                  n = h &amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n                  h -= n;\n                  n += h * &lt;span class=&quot;hljs-number&quot;&gt;0x100000000&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// 2^32&lt;/span&gt;\n              }\n              &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (n &amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) * &lt;span class=&quot;hljs-number&quot;&gt;2.3283064365386963e-10&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// 2^-32&lt;/span&gt;\n          };\n\n          mash.&lt;span class=&quot;hljs-property&quot;&gt;version&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;Mash 0.9&apos;&lt;/span&gt;;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; mash;\n      }\n\n      &lt;span class=&quot;hljs-comment&quot;&gt;// From http://baagoe.com/en/RandomMusings/javascript/&lt;/span&gt;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;Alea&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;args&lt;/span&gt;) {\n              &lt;span class=&quot;hljs-comment&quot;&gt;// Johannes Baage &amp;lt;baagoe@baagoe.com&amp;gt;, 2010&lt;/span&gt;\n              &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; s0 = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n              &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; s1 = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n              &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; s2 = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n              &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; c = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n\n              &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (args.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n                  args = [+&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;()];\n              }\n              &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; mash = &lt;span class=&quot;hljs-title class_&quot;&gt;Mash&lt;/span&gt;();\n              s0 = &lt;span class=&quot;hljs-title function_&quot;&gt;mash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;);\n              s1 = &lt;span class=&quot;hljs-title function_&quot;&gt;mash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;);\n              s2 = &lt;span class=&quot;hljs-title function_&quot;&gt;mash&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;);\n\n              &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; args.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n                  s0 -= &lt;span class=&quot;hljs-title function_&quot;&gt;mash&lt;/span&gt;(args[i]);\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (s0 &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n                      s0 += &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n                  }\n                  s1 -= &lt;span class=&quot;hljs-title function_&quot;&gt;mash&lt;/span&gt;(args[i]);\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (s1 &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n                      s1 += &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n                  }\n                  s2 -= &lt;span class=&quot;hljs-title function_&quot;&gt;mash&lt;/span&gt;(args[i]);\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (s2 &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n                      s2 += &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n                  }\n              }\n              mash = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n\n              &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; random = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; t = &lt;span class=&quot;hljs-number&quot;&gt;2091639&lt;/span&gt; * s0 + c * &lt;span class=&quot;hljs-number&quot;&gt;2.3283064365386963e-10&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// 2^-32&lt;/span&gt;\n                  s0 = s1;\n                  s1 = s2;\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; s2 = t - (c = t | &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n              };\n              random.&lt;span class=&quot;hljs-property&quot;&gt;uint32&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;0x100000000&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// 2^32&lt;/span&gt;\n              };\n              random.&lt;span class=&quot;hljs-property&quot;&gt;fract53&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n                  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() +\n                      (&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;0x200000&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) * &lt;span class=&quot;hljs-number&quot;&gt;1.1102230246251565e-16&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// 2^-53&lt;/span&gt;\n              };\n              random.&lt;span class=&quot;hljs-property&quot;&gt;version&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;Alea 0.9&apos;&lt;/span&gt;;\n              random.&lt;span class=&quot;hljs-property&quot;&gt;args&lt;/span&gt; = args;\n              &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; random;\n\n          }(&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;slice&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;call&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;arguments&lt;/span&gt;)));\n      };\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Alea&lt;/span&gt;();\n  }\n}());\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;guid&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[xy]/g&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;c&lt;/span&gt;)    {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; r = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;trueRandom&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,\n          v = c == &lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt; ? r : (r &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x3&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0x8&lt;/span&gt;);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; v.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n  });\n};\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;JavaScript project on GitHub - &lt;a href=&quot;https://github.com/LiosK/UUID.js&quot;&gt;https://github.com/LiosK/UUID.js&lt;/a&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;&lt;strong&gt;UUID.js The RFC-compliant UUID generator for JavaScript.&lt;/strong&gt;&lt;/p&gt;\n  \n  &lt;p&gt;See RFC 4122 &lt;a href=&quot;http://www.ietf.org/rfc/rfc4122.txt&quot;&gt;http://www.ietf.org/rfc/rfc4122.txt&lt;/a&gt;.&lt;/p&gt;\n  \n  &lt;p&gt;&lt;strong&gt;Features Generates RFC 4122 compliant UUIDs.&lt;/strong&gt;&lt;/p&gt;\n  \n  &lt;p&gt;Version 4 UUIDs (UUIDs from random numbers) and version 1 UUIDs\n  (time-based UUIDs) are available.&lt;/p&gt;\n  \n  &lt;p&gt;UUID object allows a variety of access to the UUID including access to\n  the UUID fields.&lt;/p&gt;\n  \n  &lt;p&gt;Low timestamp resolution of JavaScript is compensated by random\n  numbers.&lt;/p&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;  &lt;span class=&quot;hljs-comment&quot;&gt;// RFC 4122&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;//&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// A UUID is 128 bits long&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;//&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// String representation is five fields of 4, 2, 2, 2, and 6 bytes.&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Fields represented as lowercase, zero-filled, hexadecimal strings, and&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// are separated by dash characters&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;//&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// A version 4 UUID is generated by setting all but six bits to randomly&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// chosen values&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; uuid = [\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;),\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;),\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Set the four most significant bits (bits 12 through 15) of the&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// time_hi_and_version field to the 4-bit version number from Section&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// 4.1.3&lt;/span&gt;\n    (&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;.0625&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;/* 0x.1 */&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;.25&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;/* 0x.4 */&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;),\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Set the two most significant bits (bits 6 and 7) of the&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// clock_seq_hi_and_reserved to zero and one, respectively&lt;/span&gt;\n    (&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;.25&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;/* 0x.4 */&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;.5&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;/* 0x.8 */&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;),\n\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;)].&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;One line solution using Blobs.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;([])).&lt;span class=&quot;hljs-title function_&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;31&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The value at the end (31) depends on the length of the URL.&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;&lt;strong&gt;EDIT:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;A more compact and universal solution, as suggested by &lt;a href=&quot;https://stackoverflow.com/users/114558/rinogo&quot;&gt;rinogo&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable constant_&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;([])).&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(-&lt;span class=&quot;hljs-number&quot;&gt;36&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;For those wanting an &lt;a href=&quot;https://en.wikipedia.org/wiki/Universally_unique_identifier#History&quot; rel=&quot;nofollow noreferrer&quot;&gt;RFC 4122&lt;/a&gt; version 4 compliant solution with speed considerations (few calls to Math.random()):&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; rand = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;random&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;UUID&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; nbr, randStr = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;do&lt;/span&gt; {\n        randStr += (nbr = &lt;span class=&quot;hljs-title function_&quot;&gt;rand&lt;/span&gt;()).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;);\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (randStr.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (\n        randStr.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;) + &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt; +\n        randStr.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;) + &lt;span class=&quot;hljs-string&quot;&gt;&quot;-4&quot;&lt;/span&gt; +\n        randStr.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;) + &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt; +\n        ((nbr*&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)+&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;) + &lt;span class=&quot;hljs-comment&quot;&gt;// [89ab]&lt;/span&gt;\n        randStr.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;) + &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt; +\n        randStr.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;18&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;)\n    );\n}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;( &lt;span class=&quot;hljs-title function_&quot;&gt;UUID&lt;/span&gt;() );&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif13&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;The above function should have a decent balance between speed and randomness.&lt;/p&gt;\n    ","\n&lt;p&gt;I wanted to understand &lt;a href=&quot;https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid/2117523#2117523&quot;&gt;broofa&apos;s answer&lt;/a&gt;, so I expanded it and added comments:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; uuid = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(\n        &lt;span class=&quot;hljs-regexp&quot;&gt;/[xy]/g&lt;/span&gt;,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;match&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-comment&quot;&gt;/*\n            * Create a random nibble. The two clever bits of this code:\n            *\n            * - Bitwise operations will truncate floating point numbers\n            * - For a bitwise OR of any x, x | 0 = x\n            *\n            * So:\n            *\n            * Math.random * 16\n            *\n            * creates a random floating point number\n            * between 0 (inclusive) and 16 (exclusive) and\n            *\n            * | 0\n            *\n            * truncates the floating point number into an integer.\n            */&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; randomNibble = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n\n            &lt;span class=&quot;hljs-comment&quot;&gt;/*\n            * Resolves the variant field. If the variant field (delineated\n            * as y in the initial string) is matched, the nibble must\n            * match the mask (where x is a do-not-care bit):\n            *\n            * 10xx\n            *\n            * This is achieved by performing the following operations in\n            * sequence (where x is an intermediate result):\n            *\n            * - x &amp;amp; 0x3, which is equivalent to x % 3\n            * - x | 0x8, which is equivalent to x + 8\n            *\n            * This results in a nibble between 8 inclusive and 11 exclusive,\n            * (or 1000 and 1011 in binary), all of which satisfy the variant\n            * field mask above.\n            */&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; nibble = (match == &lt;span class=&quot;hljs-string&quot;&gt;&apos;y&apos;&lt;/span&gt;) ?\n                (randomNibble &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x3&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0x8&lt;/span&gt;) :\n                randomNibble;\n\n            &lt;span class=&quot;hljs-comment&quot;&gt;/*\n            * Ensure the nibble integer is encoded as base 16 (hexadecimal).\n            */&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; nibble.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n        }\n    );\n};\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I adjusted my own UUID/GUID generator with some extras &lt;a href=&quot;http://frugalcoder.us/post/2012/01/13/javascript-guid-uuid-generator.aspx&quot; rel=&quot;nofollow noreferrer&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;I&apos;m using &lt;a href=&quot;http://baagoe.com/en/RandomMusings/javascript/&quot; rel=&quot;nofollow noreferrer&quot;&gt;the following Kybos&lt;/a&gt; random number generator to be a bit more cryptographically sound.&lt;/p&gt;\n&lt;p&gt;Below is my script with the Mash and Kybos methods from baagoe.com excluded.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;//UUID/Guid Generator&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// use: UUID.create() or UUID.createSequential()&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// convenience:  UUID.empty, UUID.tryParse(string)&lt;/span&gt;\n(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;w&lt;/span&gt;){\n  &lt;span class=&quot;hljs-comment&quot;&gt;// From http://baagoe.com/en/RandomMusings/javascript/&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Johannes Baage &amp;lt;baagoe@baagoe.com&amp;gt;, 2010&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;//function Mash() {...};&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// From http://baagoe.com/en/RandomMusings/javascript/&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;//function Kybos() {...};&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; rnd = &lt;span class=&quot;hljs-title class_&quot;&gt;Kybos&lt;/span&gt;();\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;//UUID/GUID Implementation from http://frugalcoder.us/post/2012/01/13/javascript-guid-uuid-generator.aspx&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;UUID&lt;/span&gt; = {\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;empty&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;00000000-0000-0000-0000-000000000000&quot;&lt;/span&gt;\n    ,&lt;span class=&quot;hljs-string&quot;&gt;&quot;parse&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;input&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ret = input.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;trim&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toLowerCase&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/^[\\s\\r\\n]+|[\\{\\}]|[\\s\\r\\n]+$/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ((&lt;span class=&quot;hljs-regexp&quot;&gt;/[a-f0-9]{8}\\-[a-f0-9]{4}\\-[a-f0-9]{4}\\-[a-f0-9]{4}\\-[a-f0-9]{12}/&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(ret))\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ret;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Unable to parse UUID&quot;&lt;/span&gt;);\n    }\n    ,&lt;span class=&quot;hljs-string&quot;&gt;&quot;createSequential&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ret = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;valueOf&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;)\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (;ret.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;; ret = &lt;span class=&quot;hljs-string&quot;&gt;&quot;0&quot;&lt;/span&gt; + ret);\n      ret = ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(ret.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;-&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;//only least significant part&lt;/span&gt;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (;ret.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;;ret += &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;rnd&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;0xffffffff&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;));\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;), ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;), &lt;span class=&quot;hljs-string&quot;&gt;&quot;4&quot;&lt;/span&gt; + ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;), &lt;span class=&quot;hljs-string&quot;&gt;&quot;89AB&quot;&lt;/span&gt;[&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;)] + ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;),  ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;)].&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;);\n    }\n    ,&lt;span class=&quot;hljs-string&quot;&gt;&quot;create&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ret = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (;ret.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;;ret += &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;rnd&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;0xffffffff&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;));\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;), ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;), &lt;span class=&quot;hljs-string&quot;&gt;&quot;4&quot;&lt;/span&gt; + ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;), &lt;span class=&quot;hljs-string&quot;&gt;&quot;89AB&quot;&lt;/span&gt;[&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()*&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;)] + ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;),  ret.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;)].&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;);\n    }\n    ,&lt;span class=&quot;hljs-string&quot;&gt;&quot;random&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;rnd&lt;/span&gt;();\n    }\n    ,&lt;span class=&quot;hljs-string&quot;&gt;&quot;tryParse&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;input&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;UUID&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(input);\n      } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(ex) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;UUID&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;empty&lt;/span&gt;;\n      }\n    }\n  };\n  &lt;span class=&quot;hljs-variable constant_&quot;&gt;UUID&lt;/span&gt;[&lt;span class=&quot;hljs-string&quot;&gt;&quot;new&quot;&lt;/span&gt;] = &lt;span class=&quot;hljs-variable constant_&quot;&gt;UUID&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;create&lt;/span&gt;;\n\n  w.&lt;span class=&quot;hljs-property&quot;&gt;UUID&lt;/span&gt; = w.&lt;span class=&quot;hljs-property&quot;&gt;Guid&lt;/span&gt; = &lt;span class=&quot;hljs-variable constant_&quot;&gt;UUID&lt;/span&gt;;\n}(&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt; || &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Added in: v15.6.0, v14.17.0 there is a built-in &lt;a href=&quot;https://nodejs.org/api/crypto.html#crypto_crypto_randomuuid_options&quot; rel=&quot;noreferrer&quot;&gt;crypto.randomUUID()&lt;/a&gt; function.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; * &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; crypto &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;crypto&quot;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; uuid = crypto.&lt;span class=&quot;hljs-title function_&quot;&gt;randomUUID&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In the browser, &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;crypto.randomUUID()&lt;/code&gt;&lt;/a&gt; is currently supported in Chromium 92+ and Firefox 95+.&lt;/p&gt;\n    ","\n&lt;p&gt;ES6 sample&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;guid&lt;/span&gt;=(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)=&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;s4&lt;/span&gt;=(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)=&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;((&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; + &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;()) * &lt;span class=&quot;hljs-number&quot;&gt;0x10000&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);     \n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${s4() + s4()}&lt;/span&gt;-&lt;span class=&quot;hljs-subst&quot;&gt;${s4()}&lt;/span&gt;-&lt;span class=&quot;hljs-subst&quot;&gt;${s4()}&lt;/span&gt;-&lt;span class=&quot;hljs-subst&quot;&gt;${s4()}&lt;/span&gt;-&lt;span class=&quot;hljs-subst&quot;&gt;${s4() + s4() + s4()}&lt;/span&gt;`&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The native &lt;code&gt;URL.createObjectURL&lt;/code&gt; is generating an UUID. You can take advantage of this.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;uuid&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; url = &lt;span class=&quot;hljs-variable constant_&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createObjectURL&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Blob&lt;/span&gt;())\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; [id] = url.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;reverse&lt;/span&gt;()\n  &lt;span class=&quot;hljs-variable constant_&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;revokeObjectURL&lt;/span&gt;(url)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; id\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The better way:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;\n  a, b               &lt;span class=&quot;hljs-comment&quot;&gt;// Placeholders&lt;/span&gt;\n&lt;/span&gt;){\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(               &lt;span class=&quot;hljs-comment&quot;&gt;// Loop :)&lt;/span&gt;\n      b = a = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;    &lt;span class=&quot;hljs-comment&quot;&gt;// b - result , a - numeric variable&lt;/span&gt;\n      a++ &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;36&lt;/span&gt;;      &lt;span class=&quot;hljs-comment&quot;&gt;//&lt;/span&gt;\n      b += a*&lt;span class=&quot;hljs-number&quot;&gt;51&lt;/span&gt;&amp;amp;&lt;span class=&quot;hljs-number&quot;&gt;52&lt;/span&gt;   &lt;span class=&quot;hljs-comment&quot;&gt;// If &quot;a&quot; is not 9 or 14 or 19 or 24&lt;/span&gt;\n                  ?  &lt;span class=&quot;hljs-comment&quot;&gt;//  return a random number or 4&lt;/span&gt;\n           (\n               a^&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;              &lt;span class=&quot;hljs-comment&quot;&gt;// If &quot;a&quot; is not 15,&lt;/span&gt;\n                  ?              &lt;span class=&quot;hljs-comment&quot;&gt;// generate a random number from 0 to 15&lt;/span&gt;\n               &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;^&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() *\n               (a^&lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt; ? &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;)   &lt;span class=&quot;hljs-comment&quot;&gt;// unless &quot;a&quot; is 20, in which case a random number from 8 to 11,&lt;/span&gt;\n                  :\n               &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;                 &lt;span class=&quot;hljs-comment&quot;&gt;//  otherwise 4&lt;/span&gt;\n           ).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;)\n                  :\n         &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;                     &lt;span class=&quot;hljs-comment&quot;&gt;//  In other cases, (if &quot;a&quot; is 9,14,19,24) insert &quot;-&quot;&lt;/span&gt;\n      );\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; b\n }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Minimized:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a,b&lt;/span&gt;){&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(b=a=&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;a++&lt;span class=&quot;language-xml&quot;&gt;&amp;lt;36;b+=a*51&amp;amp;52?(a^15?8^Math.random()*(a^20?16:4):4).toString(16):&apos;-&apos;);return b}\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you just need a random 128 bit string in no particular format, you can use:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;uuid&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; crypto.&lt;span class=&quot;hljs-title function_&quot;&gt;getRandomValues&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Uint32Array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;)).&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Which will return something like &lt;code&gt;2350143528-4164020887-938913176-2513998651&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;I couldn&apos;t find any answer that uses a single 16-octet &lt;code&gt;TypedArray&lt;/code&gt; and a &lt;code&gt;DataView&lt;/code&gt;, so I think the following solution for generating a version 4 UUID per &lt;a href=&quot;https://www.ietf.org/rfc/rfc4122.txt&quot; rel=&quot;nofollow noreferrer&quot;&gt;the RFC&lt;/a&gt; will stand on its own here:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;uuid4&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ho&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;n, p&lt;/span&gt;) =&amp;gt; n.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;padStart&lt;/span&gt;(p, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;/// Return the hexadecimal text representation of number `n`, padded with zeroes to be of length `p`&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; data = crypto.&lt;span class=&quot;hljs-title function_&quot;&gt;getRandomValues&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Uint8Array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;/// Fill the buffer with random data&lt;/span&gt;\n    data[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;] = (data[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;] &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0xf&lt;/span&gt;) | &lt;span class=&quot;hljs-number&quot;&gt;0x40&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;/// Patch the 6th byte to reflect a version 4 UUID&lt;/span&gt;\n    data[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;] = (data[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;] &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0x3f&lt;/span&gt;) | &lt;span class=&quot;hljs-number&quot;&gt;0x80&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;/// Patch the 8th byte to reflect a variant 1 UUID (version 4 UUIDs are)&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; view = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DataView&lt;/span&gt;(data.&lt;span class=&quot;hljs-property&quot;&gt;buffer&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;/// Create a view backed by a 16-byte buffer&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${ho(view.getUint32(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;)}&lt;/span&gt;-&lt;span class=&quot;hljs-subst&quot;&gt;${ho(view.getUint16(&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;)}&lt;/span&gt;-&lt;span class=&quot;hljs-subst&quot;&gt;${ho(view.getUint16(&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;)}&lt;/span&gt;-&lt;span class=&quot;hljs-subst&quot;&gt;${ho(view.getUint16(&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;)}&lt;/span&gt;-&lt;span class=&quot;hljs-subst&quot;&gt;${ho(view.getUint32(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;)}&lt;/span&gt;&lt;span class=&quot;hljs-subst&quot;&gt;${ho(view.getUint16(&lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;)}&lt;/span&gt;`&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;/// Compile the canonical textual form from the array data&lt;/span&gt;\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;I prefer it because it only relies on functions available to the standard ECMAScript platform, where possible -- which is all but one procedure.&lt;/p&gt;\n&lt;p&gt;At the time of writing this, &lt;code&gt;getRandomValues&lt;/code&gt; is not something implemented for the &lt;code&gt;crypto&lt;/code&gt; object in Node.js. However, it has the equivalent &lt;code&gt;randomBytes&lt;/code&gt; function which may be used instead.&lt;/p&gt;\n    ","\n&lt;p&gt;Just another more readable variant with just two mutations.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;uuid4&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)\n{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hex&lt;/span&gt; (s, b)\n  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; s +\n      (b &amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;   ).&lt;span class=&quot;hljs-property&quot;&gt;toString&lt;/span&gt; (&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;) +  &lt;span class=&quot;hljs-comment&quot;&gt;// high nibble&lt;/span&gt;\n      (b &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0b1111&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;toString&lt;/span&gt; (&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);   &lt;span class=&quot;hljs-comment&quot;&gt;// low nibble&lt;/span&gt;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; r = crypto.&lt;span class=&quot;hljs-property&quot;&gt;getRandomValues&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Uint8Array&lt;/span&gt; (&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;));\n\n  r[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;] = r[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;] &amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0b01000000&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Set type 4: 0100&lt;/span&gt;\n  r[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;] = r[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;] &amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;0b10000000&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Set variant: 100&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; r.&lt;span class=&quot;hljs-property&quot;&gt;slice&lt;/span&gt; ( &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,  &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;reduce&lt;/span&gt; (hex, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt; ) +\n         r.&lt;span class=&quot;hljs-property&quot;&gt;slice&lt;/span&gt; ( &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,  &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;reduce&lt;/span&gt; (hex, &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;) +\n         r.&lt;span class=&quot;hljs-property&quot;&gt;slice&lt;/span&gt; ( &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;,  &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;reduce&lt;/span&gt; (hex, &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;) +\n         r.&lt;span class=&quot;hljs-property&quot;&gt;slice&lt;/span&gt; ( &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;reduce&lt;/span&gt; (hex, &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;) +\n         r.&lt;span class=&quot;hljs-property&quot;&gt;slice&lt;/span&gt; (&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;reduce&lt;/span&gt; (hex, &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If your environment is SharePoint, there is a utility function called &lt;code&gt;SP.Guid.newGuid&lt;/code&gt; (&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ee659495(v=office.14).aspx&quot; rel=&quot;nofollow noreferrer&quot;&gt;MSDN link&lt;/a&gt; which creates a new GUID. This function is inside the sp.init.js file. If you rewrite this function (to remove some other dependencies from other private functions), and it looks like this:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; newGuid = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; hexcodes = &lt;span class=&quot;hljs-string&quot;&gt;&quot;0123456789abcdef&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; index = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; index &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;; index++) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; value = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (index) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;:\n            result += &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;:\n            value = &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;\n            result += &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;:\n            value = value &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; | &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;;\n            result += &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;:\n            result += &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n        }\n        result += hexcodes[value];\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n};\n&lt;/code&gt;&lt;/pre&gt;\n    "]},"randomTags":[{"name":"password-hash","slug":"password-hash"},{"name":"gethashcode","slug":"gethashcode"},{"name":"unresolved-external","slug":"unresolved-external"},{"name":"unicode","slug":"unicode"},{"name":"jtable","slug":"jtable"},{"name":"responsive-design","slug":"responsive-design"},{"name":"gitignore","slug":"gitignore"},{"name":"setter","slug":"setter"},{"name":"copy-constructor","slug":"copy-constructor"},{"name":"numbers","slug":"numbers"},{"name":"sql-server","slug":"sql-server"},{"name":"file","slug":"file"},{"name":"stdin","slug":"stdin"},{"name":"system-calls","slug":"system-calls"},{"name":"expected-condition","slug":"expected-condition"},{"name":"commandbutton","slug":"commandbutton"},{"name":"json.net","slug":"json.net"},{"name":"nosuchelementexception","slug":"nosuchelementexception"},{"name":"language-agnostic","slug":"language-agnostic"},{"name":"data.table","slug":"data.table"}]},"__N_SSG":true}