{"pageProps":{"data":{"count":1,"rows":[{"id":435,"title":"Daylight saving time and time zone best practices [closed]","slug":"daylight-saving-time-and-time-zone-best-practices-closed-1657387973687","postType":"QUESTION","createdAt":"2022-07-09T17:32:53.000Z","updatedAt":"2022-07-09T17:32:53.000Z","tags":[{"id":2274,"name":"utc","slug":"utc","createdAt":"2022-07-09T17:32:53.000Z","updatedAt":"2022-07-09T17:32:53.000Z","Questions_Tags":{"questionId":435,"tagId":2274}}]}]},"slug":"utc","page":"1","answers":{"435":["\n&lt;h2&gt;Summary of answers and other data: (please add yours)&lt;/h2&gt;\n&lt;p&gt;&lt;strong&gt;Do:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Whenever you are referring to an exact moment in time, persist the time according to a unified standard that is not affected by daylight savings. (GMT and UTC are equivalent with this regard, but it is preferred to use the term UTC. Notice that UTC is also known as &lt;em&gt;Zulu&lt;/em&gt; or &lt;em&gt;Z&lt;/em&gt; time.)&lt;/li&gt;\n&lt;li&gt;If instead you choose to persist a (past) time using a local time value, include the local time offset for this particular time from UTC (this offset may change throughout the year), such that the timestamp can later be interpreted unambiguously.&lt;/li&gt;\n&lt;li&gt;In some cases, you may need to store &lt;em&gt;both&lt;/em&gt; the UTC time and the equivalent local time.  Often this is done with two separate fields, but some platforms support a &lt;code&gt;datetimeoffset&lt;/code&gt; type that can store both in a single field.&lt;/li&gt;\n&lt;li&gt;When storing timestamps as a numeric value, use &lt;a href=&quot;http://en.wikipedia.org/wiki/Unix_time&quot; rel=&quot;noreferrer&quot;&gt;Unix time&lt;/a&gt; - which is the number of whole seconds since &lt;code&gt;1970-01-01T00:00:00Z&lt;/code&gt; (excluding leap seconds).  If you require higher precision, use milliseconds instead.  This value should always be based on UTC, without any time zone adjustment.&lt;/li&gt;\n&lt;li&gt;If you might later need to modify the timestamp, include the original time zone ID so you can determine if the offset may have changed from the original value recorded.&lt;/li&gt;\n&lt;li&gt;When scheduling future events, usually local time is preferred instead of UTC, as it is common for the offset to change.  &lt;a href=&quot;https://stackoverflow.com/a/19627330/634824&quot;&gt;See answer&lt;/a&gt;, and &lt;a href=&quot;http://www.creativedeletion.com/2015/03/19/persisting_future_datetimes.html&quot; rel=&quot;noreferrer&quot;&gt;blog post&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;When storing whole dates, such as birthdays and anniversaries, do not convert to UTC or any other time zone.\n&lt;ul&gt;\n&lt;li&gt;When possible, store in a date-only data type that does not include a time of day.&lt;/li&gt;\n&lt;li&gt;If such a type is not available, be sure to always ignore the time-of-day when interpreting the value.  If you cannot be assured that the time-of-day will be ignored, choose 12:00 Noon, rather than 00:00 Midnight as a more safe representative time on that day.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Remember that time zone offsets are not always an integer number of hours (for example, Indian Standard Time is UTC+05:30, and Nepal uses UTC+05:45).&lt;/li&gt;\n&lt;li&gt;If using Java, use &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;java.time&lt;/em&gt;&lt;/a&gt; for Java 8 and later.&lt;/li&gt;\n&lt;li&gt;Much of that &lt;em&gt;java.time&lt;/em&gt; functionality is back-ported to Java 6 &amp;amp; 7 in the &lt;a href=&quot;https://www.threeten.org/threetenbp/&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;ThreeTen-Backport&lt;/em&gt;&lt;/a&gt; library.&lt;/li&gt;\n&lt;li&gt;Further adapted for early Android (&amp;lt; 26) in the &lt;a href=&quot;https://github.com/JakeWharton/ThreeTenABP&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;ThreeTenABP&lt;/em&gt;&lt;/a&gt; library.&lt;/li&gt;\n&lt;li&gt;These projects officially supplant the venerable &lt;a href=&quot;https://www.joda.org/joda-time/&quot; rel=&quot;noreferrer&quot;&gt;Joda-Time&lt;/a&gt;, now in &lt;a href=&quot;https://en.wikipedia.org/wiki/Maintenance_mode&quot; rel=&quot;noreferrer&quot;&gt;maintenance-mode&lt;/a&gt;. Joda-Time, ThreeTen-Backport, &lt;a href=&quot;https://www.threeten.org/threeten-extra/&quot; rel=&quot;noreferrer&quot;&gt;ThreeTen-Extra&lt;/a&gt;, &lt;em&gt;java.time&lt;/em&gt; classes, and &lt;a href=&quot;https://jcp.org/en/jsr/detail?id=310&quot; rel=&quot;noreferrer&quot;&gt;JSR 310&lt;/a&gt; are led by the same man, &lt;a href=&quot;https://stackoverflow.com/users/38896/jodastephen&quot;&gt;Stephen Colebourne&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;If using &lt;a href=&quot;http://en.wikipedia.org/wiki/.NET_Framework&quot; rel=&quot;noreferrer&quot;&gt;.NET&lt;/a&gt;, consider using &lt;a href=&quot;http://nodatime.org&quot; rel=&quot;noreferrer&quot;&gt;Noda Time&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;If using .NET without Noda Time, consider that &lt;code&gt;DateTimeOffset&lt;/code&gt; is often a better choice than &lt;code&gt;DateTime&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;If using Perl, use &lt;a href=&quot;https://metacpan.org/module/DateTime&quot; rel=&quot;noreferrer&quot;&gt;DateTime&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;If using Python 3.9 or later, use the built-in &lt;a href=&quot;https://docs.python.org/3/library/zoneinfo.html&quot; rel=&quot;noreferrer&quot;&gt;zoneinfo&lt;/a&gt; for working with time zones.  Otherwise, use &lt;a href=&quot;https://dateutil.readthedocs.org/en/latest/&quot; rel=&quot;noreferrer&quot;&gt;dateutil&lt;/a&gt; or &lt;a href=&quot;https://arrow.readthedocs.io&quot; rel=&quot;noreferrer&quot;&gt;arrow&lt;/a&gt;.  The older &lt;a href=&quot;http://pytz.sourceforge.net/&quot; rel=&quot;noreferrer&quot;&gt;pytz&lt;/a&gt; library can generally be avoided.&lt;/li&gt;\n&lt;li&gt;If using JavaScript, avoid using the older &lt;a href=&quot;http://momentjs.com/&quot; rel=&quot;noreferrer&quot;&gt;moment.js&lt;/a&gt; or &lt;a href=&quot;http://momentjs.com/timezone/&quot; rel=&quot;noreferrer&quot;&gt;moment-timezone&lt;/a&gt; libraries, as they are no longer actively maintained.  See the &lt;a href=&quot;https://momentjs.com/docs/#/-project-status/&quot; rel=&quot;noreferrer&quot;&gt;Moment.js project status&lt;/a&gt; for more details.  Instead, consider &lt;a href=&quot;https://moment.github.io/luxon/#/&quot; rel=&quot;noreferrer&quot;&gt;Luxon&lt;/a&gt;, &lt;a href=&quot;https://date-fns.org/&quot; rel=&quot;noreferrer&quot;&gt;date-fns&lt;/a&gt;, &lt;a href=&quot;https://day.js.org/&quot; rel=&quot;noreferrer&quot;&gt;day.js&lt;/a&gt;, or &lt;a href=&quot;https://js-joda.github.io/js-joda/&quot; rel=&quot;noreferrer&quot;&gt;js-joda&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;If using PHP &amp;gt; 5.2, use the native time zones conversions provided by &lt;code&gt;DateTime&lt;/code&gt;, and &lt;code&gt;DateTimeZone&lt;/code&gt; classes. Be careful when using &lt;code&gt;DateTimeZone::listAbbreviations()&lt;/code&gt; - &lt;a href=&quot;https://stackoverflow.com/questions/2532729/daylight-saving-time-and-time-zone-best-practices/21198159#21198159&quot;&gt;see answer&lt;/a&gt;. To keep PHP with up to date Olson data, install periodically &lt;a href=&quot;http://pecl.php.net/package/timezonedb&quot; rel=&quot;noreferrer&quot;&gt;the timezonedb&lt;/a&gt; PECL package; &lt;a href=&quot;https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices/7338519#7338519&quot;&gt;see answer&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;If using C++, be sure to use a library that uses the properly implements the &lt;a href=&quot;http://www.iana.org/time-zones&quot; rel=&quot;noreferrer&quot;&gt;IANA timezone database&lt;/a&gt;.  These include &lt;a href=&quot;https://github.com/google/cctz&quot; rel=&quot;noreferrer&quot;&gt;cctz&lt;/a&gt;, &lt;a href=&quot;http://site.icu-project.org/&quot; rel=&quot;noreferrer&quot;&gt;ICU&lt;/a&gt;, and &lt;a href=&quot;http://howardhinnant.github.io/date/tz.html&quot; rel=&quot;noreferrer&quot;&gt;Howard Hinnant&apos;s &quot;tz&quot; library&lt;/a&gt;.  In C++20 the latter is adopted into the standard &lt;code&gt;&amp;lt;chrono&amp;gt;&lt;/code&gt; library.\n&lt;ul&gt;\n&lt;li&gt;Do not use &lt;a href=&quot;http://www.boost.org/&quot; rel=&quot;noreferrer&quot;&gt;Boost&lt;/a&gt; for time zone conversions.  While &lt;a href=&quot;http://www.boost.org/doc/libs/1_44_0/doc/html/date_time/local_time.html#date_time.local_time.tz_database&quot; rel=&quot;noreferrer&quot;&gt;its API&lt;/a&gt; claims to support standard IANA (aka &quot;zoneinfo&quot;) identifiers, it &lt;a href=&quot;https://github.com/boost-vault/date_time/blob/master/date_time_zonespec.csv&quot; rel=&quot;noreferrer&quot;&gt;crudely maps them&lt;/a&gt; to POSIX-style data, without considering the rich history of changes each zone may have had.  (Also, the file has fallen out of maintenance.)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;If using Rust, use &lt;a href=&quot;https://github.com/chronotope/chrono&quot; rel=&quot;noreferrer&quot;&gt;chrono&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;Most business rules use civil time, rather than UTC or GMT.  Therefore, plan to convert UTC timestamps to a local time zone before applying application logic.&lt;/li&gt;\n&lt;li&gt;Remember that time zones and offsets are not fixed and may change. For instance, historically US and UK used the same dates to &apos;spring forward&apos; and &apos;fall back&apos;. However, in 2007 the US changed the dates that the clocks get changed on. This now means that for 48 weeks of the year the difference between London time and New York time is 5 hours and for 4 weeks (3 in the spring, 1 in the autumn) it is 4 hours. Be aware of items like this in any calculations that involve multiple zones.&lt;/li&gt;\n&lt;li&gt;Consider the type of time (actual event time, broadcast time, relative time, historical time, recurring time) what elements (timestamp, time zone offset and time zone name) you need to store for correct retrieval - see &quot;Types of Time&quot; in &lt;a href=&quot;https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices/3269325#3269325&quot;&gt;this answer&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;Keep your OS, database and application tzdata files in sync, between themselves and the rest of the world.&lt;/li&gt;\n&lt;li&gt;On servers, set hardware clocks and OS clocks to UTC rather than a local time zone.&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;Regardless of the previous bullet point,&lt;/em&gt; server-side code, including web sites, should &lt;em&gt;never&lt;/em&gt; expect the local time zone of the server to be anything in particular.  &lt;a href=&quot;https://stackoverflow.com/a/30897258/634824&quot;&gt;see answer&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;Prefer working with time zones on a case-by-case basis in your application code, rather than globally through config file settings or defaults.&lt;/li&gt;\n&lt;li&gt;Use &lt;a href=&quot;http://en.wikipedia.org/wiki/Network_Time_Protocol&quot; rel=&quot;noreferrer&quot;&gt;NTP&lt;/a&gt; services on all servers.&lt;/li&gt;\n&lt;li&gt;If using &lt;a href=&quot;http://en.wikipedia.org/wiki/File_Allocation_Table#FAT32&quot; rel=&quot;noreferrer&quot;&gt;FAT32&lt;/a&gt;, remember that timestamps are stored in local time, not UTC.&lt;/li&gt;\n&lt;li&gt;When dealing with recurring events (weekly TV show, for example), remember that the time changes with DST and will be different across time zones.&lt;/li&gt;\n&lt;li&gt;Always query date-time values as &lt;a href=&quot;https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common&quot; rel=&quot;noreferrer&quot;&gt;lower-bound inclusive, upper-bound exclusive&lt;/a&gt; (&lt;code&gt;&amp;gt;=&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;).&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Don&apos;t:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Do not confuse a &quot;time zone&quot;, such as &lt;code&gt;America/New_York&lt;/code&gt; with a &quot;time zone offset&quot;, such as &lt;code&gt;-05:00&lt;/code&gt;.  They are two different things.  See &lt;a href=&quot;https://stackoverflow.com/tags/timezone/info&quot;&gt;the timezone tag wiki&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;Do not use JavaScript&apos;s &lt;code&gt;Date&lt;/code&gt; object to perform date and time calculations in older web browsers, as ECMAScript 5.1 and lower has &lt;a href=&quot;https://stackoverflow.com/a/16951442/634824&quot;&gt;a design flaw&lt;/a&gt; that may use daylight saving time incorrectly.  (This was fixed in ECMAScript 6 / 2015).&lt;/li&gt;\n&lt;li&gt;Never trust the client&apos;s clock. It may very well be incorrect.&lt;/li&gt;\n&lt;li&gt;Don&apos;t tell people to &quot;always use UTC everywhere&quot;.  This widespread advice is shortsighted of several valid scenarios that are described earlier in this document.  Instead, use the appropriate time reference for the data you are working with.  (&lt;em&gt;Timestamping&lt;/em&gt; can use UTC, but future time scheduling and date-only values should not.)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Testing:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;When testing, make sure you test countries in the Western, Eastern, Northern and &lt;a href=&quot;https://www.betaarchive.com/wiki/index.php?title=Microsoft_KB_Archive/913551&quot; rel=&quot;noreferrer&quot;&gt;Southern&lt;/a&gt; hemispheres (in fact in each quarter of the globe, so 4 regions), with both DST in progress and not (gives 8), and a country that does not use DST (another 4 to cover all regions, making 12 in total).&lt;/li&gt;\n&lt;li&gt;Test transition of DST, i.e. when you are currently in summer time, select a time value from winter.&lt;/li&gt;\n&lt;li&gt;Test boundary cases, such as a timezone that is UTC+12, with DST, making the local time &lt;a href=&quot;http://en.wikipedia.org/wiki/UTC%2B13:00&quot; rel=&quot;noreferrer&quot;&gt;UTC+13 in summer and even places that are UTC+13 in winter&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Test all third-party libraries and applications and make sure they handle time zone data correctly.&lt;/li&gt;\n&lt;li&gt;Test half-hour time zones, at least.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/tags/timezone/info&quot;&gt;The detailed &lt;code&gt;timezone&lt;/code&gt; tag wiki page on Stack Overflow&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://www.iana.org/time-zones&quot; rel=&quot;noreferrer&quot;&gt;Olson database, aka Tz_database&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://datatracker.ietf.org/doc/html/draft-lear-iana-timezone-database-02.html&quot; rel=&quot;noreferrer&quot;&gt;IETF draft procedures for maintaining the Olson database&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://www.twinsun.com/tz/tz-link.htm&quot; rel=&quot;noreferrer&quot;&gt;Sources for Time Zone and DST&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_8601&quot; rel=&quot;noreferrer&quot;&gt;ISO format (ISO 8601)&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://www.unicode.org/cldr/charts/supplemental/zone_tzid.html&quot; rel=&quot;noreferrer&quot;&gt;Mapping between Olson database and Windows Time Zone Ids, from the Unicode Consortium&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Tz_database&quot; rel=&quot;noreferrer&quot;&gt;Time Zone page on Wikipedia&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/tagged/dst&quot;&gt;StackOverflow questions tagged &lt;code&gt;dst&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/tagged/timezone&quot;&gt;StackOverflow questions tagged &lt;code&gt;timezone&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms973825.aspx#datetime_topic6&quot; rel=&quot;noreferrer&quot;&gt;Dealing with DST - Microsoft DateTime best practices&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Network_Time_Protocol&quot; rel=&quot;noreferrer&quot;&gt;Network Time Protocol on Wikipedia&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Other:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Lobby your representative to end the abomination that is DST. We can always hope...&lt;/li&gt;\n&lt;li&gt;Lobby for &lt;a href=&quot;http://xkcd.com/1061/&quot; rel=&quot;noreferrer&quot;&gt;Earth Standard Time&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;I&apos;m not sure what I can add to the answers above, but here are a few points from me:&lt;/p&gt;\n\n&lt;h2&gt;Types of times&lt;/h2&gt;\n\n&lt;p&gt;There are four different times you should consider:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Event time: eg, the time when an international sporting event happens, or a coronation/death/etc.  This is dependent on the timezone of the event and not of the viewer.&lt;/li&gt;\n&lt;li&gt;Television time: eg, a particular TV show is broadcast at 9pm local time all around the world.  Important when thinking about publishing the results (of say American Idol) on your website&lt;/li&gt;\n&lt;li&gt;Relative time: eg: This question has an open bounty closing in 21 hours.  This is easy to display&lt;/li&gt;\n&lt;li&gt;Recurring time: eg: A TV show is on every Monday at 9pm, even when DST changes.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;There is also Historic/alternate time.  These are annoying because they may not map back to standard time.  Eg: Julian dates, dates according to a Lunar calendar on Saturn, The Klingon calendar.&lt;/p&gt;\n\n&lt;p&gt;Storing start/end timestamps in UTC works well.  For 1, you need an event timezone name + offset stored along with the event.  For 2, you need a local time identifier stored with each region and a local timezone name + offset stored for every viewer (it&apos;s possible to derive this from the IP if you&apos;re in a crunch).  For 3, store in UTC seconds and no need for timezones.  4 is a special case of 1 or 2 depending on whether it&apos;s a global or a local event, but you also need to store a &lt;em&gt;created at&lt;/em&gt; timestamp so you can tell if a timezone definition changed before or after this event was created.  This is necessary if you need to show historic data.&lt;/p&gt;\n\n&lt;h2&gt;Storing times&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Always store time in UTC&lt;/li&gt;\n&lt;li&gt;Convert to local time on display (local being defined by the user looking at the data)&lt;/li&gt;\n&lt;li&gt;When storing a timezone, you need the name, timestamp and the offset.  This is required because governments sometimes change the meanings of their timezones (eg: the US govt changed DST dates), and your application needs to handle things gracefully... eg: The exact timestamp when episodes of LOST showed both before and after DST rules changed.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;h3&gt;Offsets and names&lt;/h3&gt;\n\n&lt;p&gt;An example of the above would be:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;The soccer world cup finals game\n  happened in South Africa (UTC+2--SAST)\n  on July 11, 2010 at 19:00 UTC.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;With this information, we can historically determine the exact time when the 2010 WCS finals took place even if the South African timezone definition changes, &lt;strong&gt;and&lt;/strong&gt; be able to display that to viewers in their local timezone at the time when they query the database.&lt;/p&gt;\n\n&lt;h2&gt;System Time&lt;/h2&gt;\n\n&lt;p&gt;You also need to keep your OS, database and application tzdata files in sync, both with each other, and with the rest of the world, and test extensively when you upgrade.  It&apos;s not unheard of that a third party app that you depend on did not handle a TZ change correctly.&lt;/p&gt;\n\n&lt;p&gt;Make sure hardware clocks are set to UTC, and if you&apos;re running servers around the world, make sure their OSes are configured to use UTC as well.  This becomes apparent when you need to copy hourly rotated apache log files from servers in multiple timezones.  Sorting them by filename only works if all files are named with the same timezone.  It also means that you don&apos;t have to do date math in your head when you ssh from one box to another and need to compare timestamps.&lt;/p&gt;\n\n&lt;p&gt;Also, run ntpd on all boxes.&lt;/p&gt;\n\n&lt;h2&gt;Clients&lt;/h2&gt;\n\n&lt;p&gt;Never trust the timestamp you get from a client machine as valid.  For example, the Date: HTTP headers, or a javascript &lt;code&gt;Date.getTime()&lt;/code&gt; call.  These are fine when used as opaque identifiers, or when doing date math during a single session on the same client, but don&apos;t try to cross-reference these values with something you have on the server.  Your clients don&apos;t run NTP, and may not necessarily have a working battery for their BIOS clock.&lt;/p&gt;\n\n&lt;h2&gt;Trivia&lt;/h2&gt;\n\n&lt;p&gt;Finally, governments will sometimes do very weird things:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Standard time in the Netherlands was\n  exactly 19 minutes and 32.13 seconds\n  ahead of UTC by law from 1909-05-01\n  through 1937-06-30. This time zone\n  cannot be represented exactly using\n  the HH:MM format.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Ok, I think I&apos;m done.&lt;/p&gt;\n    ","\n&lt;p&gt;This is an important and surprisingly tough issue. The truth is that there is no completely satisfying standard for persisting time. For example, the SQL standard and the ISO format (ISO 8601) are clearly not enough.&lt;/p&gt;\n\n&lt;p&gt;From the conceptual point of view, one usually deals with two types of time-date data, and it&apos;s convenient to distinguish them (the above standards do not) : &quot;&lt;strong&gt;physical time&lt;/strong&gt;&quot; and &quot;&lt;strong&gt;civil time&lt;/strong&gt;&quot;. &lt;/p&gt;\n\n&lt;p&gt;A &quot;physical&quot; instant of time is a point in the continuous universal timeline that physics deal with (ignoring relativity, of course). This concept can be adequately coded-persisted in UTC, for example (if you can ignore leap seconds). &lt;/p&gt;\n\n&lt;p&gt;A &quot;civil&quot; time is a datetime specification that follows civil norms: a point of time here is fully specified by a set of datetime fields (Y,M,D,H,MM,S,FS) plus a TZ (timezone specification) (also a &quot;calendar&quot;, actually; but lets assume we restrict the discussion to Gregorian calendar). A timezone and a calendar jointly allow (in principle) to map from one representation to another. But civil and physical time instants are fundamentally different types of magnitudes, and they should be kept conceptually separated and treated differently  (an analogy: arrays of bytes and character strings).&lt;/p&gt;\n\n&lt;p&gt;The issue is confusing because we speak of these types events interchangeably, and because the civil times are subject to political changes. The problem (and the need to distinguish these concepts) becomes more evident for events in the future. Example (taken from my discussion &lt;a href=&quot;http://www.mail-archive.com/pgsql-hackers@postgresql.org/msg139634.html&quot; rel=&quot;noreferrer&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;John records in his calendar a reminder for some event at datetime\n&lt;code&gt;2019-Jul-27, 10:30:00&lt;/code&gt;, TZ=&lt;code&gt;Chile/Santiago&lt;/code&gt;,  (which has offset GMT-4,\nhence it corresponds to  UTC &lt;code&gt;2019-Jul-27 14:30:00&lt;/code&gt;). But some day\nin the future, the country decides to change the TZ offset to GMT-5.&lt;/p&gt;\n\n&lt;p&gt;Now, when the day comes... should that reminder trigger at&lt;/p&gt;\n\n&lt;p&gt;A) &lt;code&gt;2019-Jul-27 10:30:00  Chile/Santiago&lt;/code&gt;  = &lt;code&gt;UTC time  2019-Jul-27 15:30:00&lt;/code&gt; ?&lt;/p&gt;\n\n&lt;p&gt;or&lt;/p&gt;\n\n&lt;p&gt;B) &lt;code&gt;2019-Jul-27  9:30:00  Chile/Santiago&lt;/code&gt;  = &lt;code&gt;UTC time  2019-Jul-27 14:30:00&lt;/code&gt; ?&lt;/p&gt;\n\n&lt;p&gt;There is no correct answer, unless one knows what John conceptually meant\nwhen he told the calendar &quot;Please ring me at &lt;code&gt;2019-Jul-27, 10:30:00\nTZ=Chile/Santiago&lt;/code&gt;&quot;.&lt;/p&gt;\n\n&lt;p&gt;Did he mean a &quot;civil date-time&quot; (&quot;when the clocks in my city tell\n10:30&quot;)? In that case, A) is the correct answer.&lt;/p&gt;\n\n&lt;p&gt;Or did he mean a  &quot;physical instant of time&quot;, a point in the continuus\nline of time of our universe, say, &quot;when the next solar eclipse\nhappens&quot;. In that case, answer B) is the correct one.&lt;/p&gt;\n\n&lt;p&gt;A few Date/Time APIs get this distinction right: among them, &lt;a href=&quot;http://www.joda.org/joda-time/&quot; rel=&quot;noreferrer&quot;&gt;Jodatime&lt;/a&gt;, which is the foundation of the next (third!) Java DateTime API (JSR  310).&lt;/p&gt;\n    ","\n&lt;p&gt;Make clear architectural separation of concerns - to know exactly which tier interacts with users, and has to change date-time for/from canonical representation (UTC). &lt;strong&gt;Non-UTC date-time is presentation&lt;/strong&gt; (follows users local timezone), &lt;strong&gt;UTC time is model&lt;/strong&gt; (remains unique for back-end and mid tiers).&lt;/p&gt;\n\n&lt;p&gt;Also, &lt;strong&gt;decide what&apos;s your actual audience, what you don&apos;t have to serve and where do you draw the line&lt;/strong&gt;. Don&apos;t touch exotic calendars unless you actually have important customers there and then consider separate user-facing server(s) just for that region.&lt;/p&gt;\n\n&lt;p&gt;If you can acquire and maintain user&apos;s location, use location for systematic date-time conversion (say .NET culture or a SQL table) but provide a way for end-user to choose overrides if date-time is critical for your users.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;If there are historical audit obligations&lt;/strong&gt; involved (like telling exactly when Jo in AZ paid a bill 2 yrs ago in September) &lt;strong&gt;then keep both UTC and local time&lt;/strong&gt; for the record (your conversion tables will change in a course of time).&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Define the time referential time zone for data that comes in bulk&lt;/strong&gt; - like files, web services etc. Say East Coast company has data center in CA - you need to ask and know what they use as a standard instead of assuming one or the other.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Don&apos;t trust time-zone offsets embedded in textual representation of the date-time and&lt;/strong&gt; don&apos;t accept to parse and follow them. &lt;strong&gt;Instead always request that time zone and/or reference zone have to be explicitly defined&lt;/strong&gt;. You can easily receive time with PST offset but the time is actually EST since that&apos;s the client&apos;s reference time and records were just exported at a server which is in PST.&lt;/p&gt;\n    ","\n&lt;p&gt;You need to know about the Olson &lt;a href=&quot;https://en.wikipedia.org/wiki/Tz_database&quot; rel=&quot;noreferrer&quot;&gt;tz database&lt;/a&gt;, which is available from &lt;s&gt;&lt;a href=&quot;ftp://elsie.nci.nih.gov/pub&quot; rel=&quot;noreferrer&quot;&gt;ftp://elsie.nci.nih.gov/pub&lt;/a&gt;&lt;/s&gt; &lt;a href=&quot;http://iana.org/time-zones/&quot; rel=&quot;noreferrer&quot;&gt;http://iana.org/time-zones/&lt;/a&gt;.  It is updated multiple times per year to deal with the often last-minute changes in when (and whether) to switch between winter and summer (standard and daylight saving) time in different countries around the world.  In 2009, the last release was 2009s; in 2010, it was 2010n; in 2011, it was 2011n; at the end of May 2012, the release was 2012c.  Note that there is a set of code to manage the data and the actual time zone data itself, in two separate archives (tzcode20xxy.tar.gz and tzdata20xxy.tar.gz).  Both code and data are in the public domain.&lt;/p&gt;\n\n&lt;p&gt;This is the source of time zone names such as America/Los_Angeles (and synonyms such as US/Pacific).&lt;/p&gt;\n\n&lt;p&gt;If you need to keep track of different zones, then you need the Olson database.  As others have advised, you also want to store the data in a fixed format  UTC is normally the one chosen  along with a record of the time zone in which the data was generated.  You may want to distinguish between the offset from UTC at the time and the time zone name; that can make a difference later.  Also, knowing that it is currently 2010-03-28T23:47:00-07:00 (US/Pacific) may or may not help you with interpreting the value 2010-11-15T12:30  which is presumably specified in PST (Pacific Standard Time) rather than PDT (Pacific Daylight Saving Time).&lt;/p&gt;\n\n&lt;p&gt;The standard C library interfaces are not dreadfully helpful with this sort of stuff.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;The Olson data has moved, in part because A D Olson will be retiring soon, and in part because there was a (now dismissed) law suit against the maintainers for copyright infringement.  The time zone database is now managed under the auspices of &lt;a href=&quot;http://iana.org/&quot; rel=&quot;noreferrer&quot;&gt;IANA&lt;/a&gt;, the Internet Assigned Numbers Authority, and there&apos;s a link on the front page to &lt;a href=&quot;http://www.iana.org/time-zones&quot; rel=&quot;noreferrer&quot;&gt;&apos;Time Zone Database&apos;&lt;/a&gt;.  The discussion mailing list is now &lt;code&gt;tz@iana.org&lt;/code&gt;; the announcement list is &lt;code&gt;tz-announce@iana.org&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;In general, &lt;strong&gt;include the local time offset (including DST offset)&lt;/strong&gt; in stored timestamps: UTC alone is not enough if you later want to display the timestamp in its original timezone (and DST setting).&lt;/p&gt;\n\n&lt;p&gt;Keep in mind that the offset is not always an integer number of hours (e.g. Indian Standard Time is UTC+05:30).&lt;/p&gt;\n\n&lt;p&gt;For example, suitable formats are a tuple (unix time, offset in minutes) or &lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_8601&quot; rel=&quot;noreferrer&quot;&gt;ISO 8601&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;Crossing the boundary of &quot;computer time&quot; and &quot;people time&quot; is a nightmare. The main one being that there is no sort of standard for the rules governing timezones and daylight saving times. Countries are free to change their timezone and DST rules at any time, and they do.&lt;/p&gt;\n\n&lt;p&gt;Some countries e.g. Israel, Brazil, decide each year when to have their daylight saving times, so it is impossible to know in advance when (if) DST will be in effect. Others have fixed(ish)  rules as to when DST is in effect. Other countries do not use DST as all.&lt;/p&gt;\n\n&lt;p&gt;Timezones do not have to be full hour differences from GMT. Nepal is +5.45. There are even timezones that are +13. That means that:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;SUN 23:00 in Howland Island (-12)\nMON 11:00 GMT \nTUE 00:00 in Tonga (+13)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;are all the same time, yet 3 different days!&lt;/p&gt;\n\n&lt;p&gt;There is also no clear standard on the abbreviations for timezones, and how they change when in DST so you end up with things like this:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;AST Arab Standard Time     UTC+03\nAST Arabian Standard Time  UTC+04\nAST Arabic Standard Time   UTC+03\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The best advice is to stay away from local times as much as possible and stick to UTC where you can. Only convert to local times at the last possible moment.&lt;/p&gt;\n\n&lt;p&gt;When testing make sure you test countries in the Western and Eastern hemispheres, with both DST in progress and not and a country that does not use DST (6 in total).&lt;/p&gt;\n    ","\n&lt;p&gt;For PHP:&lt;/p&gt;\n\n&lt;p&gt;The DateTimeZone class in PHP &amp;gt; 5.2 is already based on the Olson DB which others mention, so if you are doing timezone conversions in PHP and not in the DB, you are exempt of working with (the hard-to-understand) Olson files. &lt;/p&gt;\n\n&lt;p&gt;However, PHP is not updated as frequently as the Olson DB, so just using PHPs time zone conversions may leave you with outdated DST information and influence the correctness of your data. While this is not expected to happen frequently, it may happen, and &lt;em&gt;will&lt;/em&gt; happen if you have a large base of users worldwide. &lt;/p&gt;\n\n&lt;p&gt;To cope with the above issue, use the &lt;a href=&quot;https://pecl.php.net/package/timezonedb&quot; rel=&quot;nofollow noreferrer&quot;&gt;timezonedb pecl package&lt;/a&gt;.  Its function is to update PHP&apos;s timezone data. Install this package as frequently as it is updated. (I&apos;m not sure if the updates to this package follow Olson updates exactly, but it seems to be updated at a frequency which is at least very close to the frequency of Olson updates.)&lt;/p&gt;\n    ","\n&lt;p&gt;If your design can accommodate it, &lt;strong&gt;avoid local time conversion all together!&lt;/strong&gt; &lt;/p&gt;\n\n&lt;p&gt;I know to some this might sound insane but think about UX: users process near, relative dates (today, yesterday, next Monday) faster than absolute dates (2010.09.17, Friday Sept 17) on glance. And when you think about it more, the accuracy of timezones (and DST) is more important the closer the date is to &lt;code&gt;now()&lt;/code&gt;, so if you can express dates/datetimes in a relative format for +/- 1 or 2 weeks, the rest of the dates can be UTC and it wont matter too much to 95% of users.&lt;/p&gt;\n\n&lt;p&gt;This way you can store all dates in UTC and do the relative comparisons in UTC and simply show the user UTC dates outside of your Relative Date Threshold.&lt;/p&gt;\n\n&lt;p&gt;This can also apply to user input too (but generally in a more limited fashion). Selecting from a drop down that only has { Yesterday, Today, Tomorrow, Next Monday, Next Thursday } is so much simpler and easier for the user than a date picker. Date pickers are some of the most pain inducing components of form filling. Of course this will not work for all cases but you can see that it only takes a little clever design to make it very powerful.&lt;/p&gt;\n    ","\n&lt;p&gt;I recently had a problem in a web application where on an Ajax post-back the datetime coming back to my server-side code was different from the datetime served out.&lt;/p&gt;\n\n&lt;p&gt;It most likely had to do with my JavaScript code on the client that built up the date for posting back to the client as string, because JavaScript was adjusting for time zone and daylight savings, and in some browsers the calculation for when to apply daylight savings seemed to be different than in others.&lt;/p&gt;\n\n&lt;p&gt;In the end I opted to remove date and time calculations on the client entirely, and posted back to my server on an integer key which then got translated to date time on the server, to allow for consistent transformations.&lt;/p&gt;\n\n&lt;p&gt;My learning from this:\nDo not use JavaScript date and time calculations in web applications unless you ABSOLUTELY have to.&lt;/p&gt;\n    ","\n&lt;p&gt;While I haven&apos;t tried it, an approach to time zone adjustments I would find compelling would be as follows:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;Store everything in UTC.&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Create a table &lt;code&gt;TZOffsets&lt;/code&gt; with three columns: RegionClassId, StartDateTime, and OffsetMinutes (int, in minutes).&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;In the table, store a list of dates and times &lt;em&gt;when&lt;/em&gt; the local time changed, and by how much. The number of regions in the table and the number of dates would depend on what range of dates and areas of the world you need to support. Think of this as if it is &quot;historical&quot; date, even though the dates should include the future to some practical limit.&lt;/p&gt;\n\n&lt;p&gt;When you need to compute the local time of any UTC time, just do this:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;SELECT DATEADD(&apos;m&apos;, SUM(OffsetMinutes), @inputdatetime) AS LocalDateTime\nFROM   TZOffsets\nWHERE  StartDateTime &amp;lt;= @inputdatetime\n       AND RegionClassId = @RegionClassId;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You might want to cache this table in your app and use LINQ or some similar means to do the queries rather than hitting the database.&lt;/p&gt;\n\n&lt;p&gt;This data can be distilled from the &lt;a href=&quot;http://www.twinsun.com/tz/tz-link.htm&quot; rel=&quot;nofollow noreferrer&quot;&gt;public domain tz database&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;Advantages and footnotes of this approach:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;No rules are baked into code, you can adjust the offsets for new regions or date ranges readily.&lt;/li&gt;\n&lt;li&gt;You don&apos;t have to support every range of dates or regions, you can add them as needed.&lt;/li&gt;\n&lt;li&gt;Regions don&apos;t have to correspond directly to geopolitical boundaries, and to avoid duplication of rows (for instance, most states in the US handle DST the same way), you can have broad RegionClass entries that link in another table to more traditional lists of states, countries, etc.&lt;/li&gt;\n&lt;li&gt;For situations like the US where the start and end date of DST has changed over the past few years, this is pretty easy to deal with.&lt;/li&gt;\n&lt;li&gt;Since the StartDateTime field can store a time as well, the 2:00 AM standard change-over time is handled easily.&lt;/li&gt;\n&lt;li&gt;Not everywhere in the world uses a 1-hour DST. This handles those cases easily.&lt;/li&gt;\n&lt;li&gt;The data table is cross-platform and could be a separate open-source project that could be used by developers who use nearly any database platform or programming language.&lt;/li&gt;\n&lt;li&gt;This can be used for offsets that have nothing to do with time zones. For instance, the 1-second adjustments that happen from time to time to adjust for the Earth&apos;s rotation, historical adjustments to and within the Gregorian calendar, etc.&lt;/li&gt;\n&lt;li&gt;Since this is in a database table, standard report queries, etc. can take advantage of the data without a trip through business logic code.&lt;/li&gt;\n&lt;li&gt;This handles time zone offsets as well if you want it to, and can even account for special historical cases where a region is assigned to another time zone. All you need is an initial date that assigns a time zone offset to each region with a minimal start date. This would require creating at least one region for each time zone, but would allow you to ask interesting questions like: &quot;What is the difference in local time between Yuma, Arizona and Seattle, Washington on February 2, 1989 at 5:00am?&quot; (Just subtract one SUM() from the other).&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Now, the only disadvantage of this approach &lt;em&gt;or any other&lt;/em&gt; is that conversions &lt;em&gt;from&lt;/em&gt; local time to GMT are not perfect, since any DST change that has a negative offset to the clock &lt;em&gt;repeats&lt;/em&gt; a given local time. No easy way to deal with that one, I&apos;m afraid, which is one reason storing local times is bad news in the first place.&lt;/p&gt;\n    ","\n&lt;p&gt;I have hit this on two types of systems, shift planning systems (e.g. factory workers) and gas depend management systems)&lt;/p&gt;\n\n&lt;p&gt;23 and 25 hour long days are a pain to cope with, so are 8hr shifts that take 7hr or 9hr.  The problem is you will find that each customers, or even department of the customer have different rules they have created (often without documenting) on what they do in these special cases.&lt;/p&gt;\n\n&lt;p&gt;Some questions are best not asked of the customers until after they have paid for your off the shelf software.  It is very rare to find a customer that thinks about this type of issue up front when buying software.&lt;/p&gt;\n\n&lt;p&gt;I think in all cases you should record time in UTC and convert to/from local time before storing the date/time.   However even know which take a given time is in can be hard with Daylight saving and time zones.&lt;/p&gt;\n    ","\n&lt;p&gt;For the web, the rules aren&apos;t that complicated...&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Server-side, use UTC&lt;/strong&gt; &lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Client-side, use &lt;a href=&quot;http://en.wikipedia.org/wiki/Tz_database&quot;&gt;Olson&lt;/a&gt;&lt;/strong&gt;\n&lt;ul&gt;\n&lt;li&gt;Reason: UTC-offsets are not daylight savings-safe (e.g. New York is EST (UTC - 5 Hours) part of the year, EDT (UTC - 4 Hours) rest of the year).&lt;/li&gt;\n&lt;li&gt;For client-side time zone determination, you have two options:\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;1) Have user set zone (Safer)&lt;/strong&gt;\n&lt;ul&gt;\n&lt;li&gt;Resources: Web-ready Olson tz &lt;a href=&quot;https://gist.github.com/3349954&quot;&gt;HTML Dropdown&lt;/a&gt; and &lt;a href=&quot;https://gist.github.com/3349960&quot;&gt;JSON&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;2) Auto-detect zone&lt;/strong&gt;\n&lt;ul&gt;\n&lt;li&gt;Resource: &lt;a href=&quot;https://bitbucket.org/pellepim/jstimezonedetect/&quot;&gt;jsTimezoneDetect&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;The rest is just UTC/local conversion using your server-side datetime libraries. Good to go...&lt;/p&gt;\n    ","\n&lt;p&gt;When it comes to applications that run on a &lt;em&gt;server&lt;/em&gt;, including web sites and other back-end services, the time zone setting of the server should be ignored by the application.&lt;/p&gt;\n\n&lt;p&gt;The common advice is to set the server&apos;s time zone to UTC.  This is indeed a good best practice, but it&apos;s there as a band-aid for applications that do not follow other best practices.  For example, a service might be writing to log files with local timestamps instead of UTC-based timestamps, thus creating ambiguities during the daylight saving time fall-back transition.  Setting the server&apos;s time zone to UTC will fix &lt;em&gt;that&lt;/em&gt; application.  However the real fix would be for the application to log using UTC to begin with.&lt;/p&gt;\n\n&lt;p&gt;Server-side code, including web sites, should &lt;em&gt;never&lt;/em&gt; expect the local time zone of the server to be anything in particular.&lt;/p&gt;\n\n&lt;p&gt;In some languages, the local time zone can easily creep in to application code.  For example, the &lt;code&gt;DateTime.ToUniversalTime&lt;/code&gt; method in .NET will convert &lt;em&gt;from&lt;/em&gt; the local time zone to UTC, and the &lt;code&gt;DateTime.Now&lt;/code&gt; property returns the current time in the local time zone.   Also, the &lt;code&gt;Date&lt;/code&gt; constructor in JavaScript uses the computer&apos;s local time zone.  There are many other examples like this.   It is important to practice defensive programming, avoiding any code that uses the computer&apos;s local time zone setting.&lt;/p&gt;\n\n&lt;p&gt;Reserve using the local time zone for client-side code, such as desktop applications, mobile applications, and client-side JavaScript.&lt;/p&gt;\n    ","\n&lt;p&gt;Keep your servers set to UTC, and make sure they all are configured for ntp or the equivalent.&lt;/p&gt;\n\n&lt;p&gt;UTC avoids daylight savings time issues, and out-of-sync servers can cause unpredictable results that take a while to diagnose.&lt;/p&gt;\n    ","\n&lt;p&gt;Be careful when dealing with timestamps stored in the FAT32 filesystem - it is always persisted in local time coordinates (which include DST - see &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms724290(VS.85).aspx&quot; rel=&quot;noreferrer&quot;&gt;msdn article&lt;/a&gt;).  Got burned on that one.&lt;/p&gt;\n    ","\n&lt;p&gt;One other thing, make sure the servers have the up to date daylight savings patch applied.&lt;/p&gt;\n\n&lt;p&gt;We had a situation last year where our times were consistently out by one hour for a three-week period for North American users, even though we were using a UTC based system.&lt;/p&gt;\n\n&lt;p&gt;It turns out in the end it was the servers. They just needed an up-to-date patch applied (&lt;a href=&quot;http://en.wikipedia.org/wiki/Windows_Server_2003&quot; rel=&quot;nofollow noreferrer&quot;&gt;Windows Server 2003&lt;/a&gt;).&lt;/p&gt;\n    ","\n&lt;h1&gt;PHP&apos;s &lt;a href=&quot;http://www.php.net/manual/en/datetimezone.listabbreviations.php&quot;&gt;&lt;code&gt;DateTimeZone::listAbbreviations()&lt;/code&gt;&lt;/a&gt; output&lt;/h1&gt;\n\n&lt;p&gt;This PHP method returns an associative array containing some &apos;major&apos; timezones (like CEST), which on their own contain more specific &apos;geographic&apos; timezones (like Europe/Amsterdam).&lt;/p&gt;\n\n&lt;p&gt;If you&apos;re using these timezones and their offset/DST information, it&apos;s extremely important to realize the following:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;It seems like &lt;em&gt;all different offset/DST configurations&lt;/em&gt; (including historical configurations) of each timezone are included!&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;For example, Europe/Amsterdam can be found six times in the output of this function. Two occurrences (offset 1172/4772) are for the Amsterdam time used until 1937; two (1200/4800) are for the time that was used between 1937 and 1940; and two (3600/4800) are for the time used since 1940.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Therefore, &lt;em&gt;you cannot rely on the offset/DST information returned by this function&lt;/em&gt; as being currently correct/in use!&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;If you want to know the current offset/DST of a certain timezone, you&apos;ll have to do something like this:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;&amp;lt;?php\n$now = new DateTime(null, new DateTimeZone(&apos;Europe/Amsterdam&apos;));\necho $now-&amp;gt;getOffset();\n?&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you happen to maintain database systems that are running with DST active, check carefully whether they need to be shut down during the transition in fall. Mandy DBS (or other systems as well) don&apos;t like passing the same point in (local) time twice, which is exactly what happens when you turn back the clock in fall. SAP has solved this with a (IMHO really neat) workaround - instead of turning back the clock, they just let the internal clock run at half the usual speed for two hours...&lt;/p&gt;\n    ","\n&lt;p&gt;Are you using the &lt;strong&gt;.NET framework&lt;/strong&gt;?\nIf so, let me introduce you to the &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx&quot; rel=&quot;nofollow&quot;&gt;DateTimeOffset&lt;/a&gt; type, added with .NET 3.5.&lt;/p&gt;\n\n&lt;p&gt;This structure holds both a &lt;code&gt;DateTime&lt;/code&gt; and an Offset (&lt;code&gt;TimeSpan&lt;/code&gt;), which specifies the difference between the &lt;code&gt;DateTimeOffset&lt;/code&gt; instance&apos;s date and time and Coordinated Universal Time (UTC).&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;The &lt;code&gt;DateTimeOffset.Now&lt;/code&gt; static method will return a &lt;code&gt;DateTimeOffset&lt;/code&gt;\ninstance consisting of the current (local) time, and the local offset\n(as defined in the operating system&apos;s regional info).&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;The &lt;code&gt;DateTimeOffset.UtcNow&lt;/code&gt; static method will return a\n&lt;code&gt;DateTimeOffset&lt;/code&gt; instance consisting of the current time in UTC (as\nif you were in Greenwich).&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Other helpful types are the &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/system.timezone.aspx&quot; rel=&quot;nofollow&quot;&gt;TimeZone&lt;/a&gt; and &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx&quot; rel=&quot;nofollow&quot;&gt;TimeZoneInfo&lt;/a&gt; classes. &lt;/p&gt;\n    ","\n&lt;p&gt;For those struggling with this on &lt;a href=&quot;http://en.wikipedia.org/wiki/.NET_Framework&quot; rel=&quot;nofollow&quot;&gt;.NET&lt;/a&gt;, see if using &lt;code&gt;DateTimeOffset&lt;/code&gt; and/or &lt;code&gt;TimeZoneInfo&lt;/code&gt; are worth your while.&lt;/p&gt;\n\n&lt;p&gt;If you want to use &lt;a href=&quot;http://en.wikipedia.org/wiki/Tz_database&quot; rel=&quot;nofollow&quot;&gt;IANA/Olson time zones&lt;/a&gt;, or find the built in types are insufficient for your needs, check out &lt;a href=&quot;http://nodatime.org&quot; rel=&quot;nofollow&quot;&gt;Noda Time&lt;/a&gt;, which offers a much smarter date and time API for .NET. &lt;/p&gt;\n    ","\n&lt;p&gt;Business rules should always work on &lt;a href=&quot;https://en.wikipedia.org/wiki/Civil_time&quot; rel=&quot;nofollow noreferrer&quot;&gt;civil time&lt;/a&gt; (unless there&apos;s legislation that says otherwise). Be aware that civil time is a mess, but it&apos;s what people use so it&apos;s what is important.&lt;/p&gt;\n\n&lt;p&gt;Internally, keep timestamps in something like civil-time-seconds-from-epoch. The &lt;a href=&quot;https://en.wikipedia.org/wiki/Epoch_%28reference_date%29&quot; rel=&quot;nofollow noreferrer&quot;&gt;epoch&lt;/a&gt; doesn&apos;t matter particularly (I favour the &lt;a href=&quot;https://en.wikipedia.org/wiki/Unix_time&quot; rel=&quot;nofollow noreferrer&quot;&gt;Unix epoch&lt;/a&gt;) but it does make things easier than the alternative. Pretend that &lt;a href=&quot;https://en.wikipedia.org/wiki/Leap_second&quot; rel=&quot;nofollow noreferrer&quot;&gt;leap-seconds&lt;/a&gt; don&apos;t exist unless you&apos;re doing something that &lt;em&gt;really&lt;/em&gt; needs them (e.g., satellite tracking). The mapping between timestamps and displayed time is the only point where &lt;a href=&quot;https://en.wikipedia.org/wiki/Daylight_saving_time&quot; rel=&quot;nofollow noreferrer&quot;&gt;DST&lt;/a&gt; rules should be applied; the rules change frequently (on a global level, several times a year; blame politicians) so you should make sure that you do not hard-code the mapping. Olson&apos;s &lt;a href=&quot;https://en.wikipedia.org/wiki/Tz_database&quot; rel=&quot;nofollow noreferrer&quot;&gt;TZ database&lt;/a&gt; is invaluable.&lt;/p&gt;\n    ","\n&lt;p&gt;Just wanted to point out two things that seem inaccurate or at least confusing:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Always persist time according to a unified standard that is not\n  affected by daylight savings. GMT and UTC have been mentioned by\n  different people, though UTC seems to be mentioned most often.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;For (almost) all practical computing purposes, UTC is, in fact, GMT. Unless you see a timestamps with a fractional second, you&apos;re dealing with GMT which makes this distinction redundant.&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Include the local time offset as is (including DST offset) when\n  storing timestamps.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;A timestamp is always represented in GMT and thus has no offset.&lt;/p&gt;\n    ","\n&lt;p&gt;Here is my experience:-&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;(Does not require any third-party library)&lt;/strong&gt;&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;On server-side, store times in UTC format so that all date/time values in database are in a single standard regardless of location of users, servers, timezones or DST.&lt;/li&gt;\n&lt;li&gt;On the UI layer or in emails sent out to user, you need to show times according to user. For that matter, you need to have user&apos;s timezone offset so that you can add this offset to your database&apos;s UTC value which will result in user&apos;s local time. You can either take user&apos;s timezone offset when they are signing up or you can auto-detect them in web and mobile platforms. For websites, JavaScript&apos;s function getTimezoneOffset() method is a standard since version 1.0 and compatible with all browsers. (Ref: &lt;a href=&quot;http://www.w3schools.com/jsref/jsref_getTimezoneOffset.asp&quot; rel=&quot;nofollow&quot;&gt;http://www.w3schools.com/jsref/jsref_getTimezoneOffset.asp&lt;/a&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Tom Scott&apos;s&lt;/strong&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=-5wpm-gesOY&quot; rel=&quot;nofollow&quot;&gt;video about timezones on YouTube&lt;/a&gt; on the Computerphile channel has also a nice and entertaining description of the topic. \nExamples include: &lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Samoa&lt;/strong&gt; (an island in the Pacific Ocean) shifting its time zone forward by 24 hours to make trading easier with Australia and New Zealand, &lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;West Bank&lt;/strong&gt;, where 2 populations of people are following different time zones,&lt;/li&gt;\n&lt;li&gt;18th century changes from the &lt;strong&gt;Julian&lt;/strong&gt; calendar to the &lt;strong&gt;Gregorian&lt;/strong&gt;\ncalendar (which happened in the 20th century in Russia).&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;Just one example to prove that handling time is the huge mess described, and that you can never be complacent. In several spots on this page leap-seconds have been ignored. &lt;/p&gt;\n\n&lt;p&gt;Several years ago, the Android operating system used GPS satellites to get a UTC time reference, but ignored the fact that GPS satellites do not use leap-seconds. No one noticed until there was confusion on New Year&apos;s Eve, when the Apple phone users and Android phone users did their count-downs about 15 seconds apart. &lt;/p&gt;\n\n&lt;p&gt;I think it has since been fixed, but you never know when these &apos;minor details&apos; will come back to haunt you. &lt;/p&gt;\n    ","\n&lt;p&gt;Actually, kernel32.dll does not export SystemTimeToTzSpecificLocation.  It does however export the following two:  SystemTimeToTzSpecificLocalTime and TzSpecificLocalTimeToSystemTime...&lt;/p&gt;\n    ","\n&lt;p&gt;Never rely only on constructors like &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt; new DateTime(int year, int month, int day, int hour, int minute, TimeZone timezone)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;They can throw exceptions when a certain date time does not exist due to DST. Instead, build your own methods for creating such dates. In them, catch any exceptions that occur due to DST, and adjust the time is needed with the transition offset. DST may occur on different dates and at different hours (even at midnight for Brazil) according to the timezone.&lt;/p&gt;\n    ","\n&lt;ul&gt;\n&lt;li&gt;Never, ever store local time without its UTC offset (or a reference to the time zone)examples of how not to do it include FAT32 and &lt;code&gt;struct tm&lt;/code&gt; in C.¹&lt;/li&gt;\n&lt;li&gt;Understand that a time zone is a combination of\n\n&lt;ul&gt;\n&lt;li&gt;a set of UTC offsets (e.g. +0100 in winter, +0200 in summer)&lt;/li&gt;\n&lt;li&gt;rules for when the switchover happens (which may change over time: for example, in the 1990s the EU harmonized the switchover as being on the last Sundays in March and October, at 02:00 standard time/03:00 DST; previously this differed between member states).&lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;¹ Some implementations of &lt;code&gt;struct tm&lt;/code&gt; do store the UTC offset, but this has not made it into the standard.&lt;/p&gt;\n    ","\n&lt;p&gt;In dealing with databases (in particular &lt;a href=&quot;http://en.wikipedia.org/wiki/MySQL&quot; rel=&quot;nofollow&quot;&gt;MySQL&lt;/a&gt;, but this applies to most databases), I found it hard to store UTC.&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Databases usually work with server datetime by default (that is, CURRENT_TIMESTAMP).&lt;/li&gt;\n&lt;li&gt;You may not be able to change the server timezone.&lt;/li&gt;\n&lt;li&gt;Even if you are able to change the timezone, you may have third-party code that expects server timezone to be local.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;I found it easier to just store server datetime in the database, then let the database convert the stored datetime back to UTC (that is, UNIX_TIMESTAMP()) in the SQL statements. After that you can use the datetime as UTC in your code.&lt;/p&gt;\n\n&lt;p&gt;If you have 100% control over the server and all code, it&apos;s probably better to change server timezone to UTC.&lt;/p&gt;\n    "]},"randomTags":[{"name":"python-module","slug":"python-module"},{"name":"smart-pointers","slug":"smart-pointers"},{"name":"subquery","slug":"subquery"},{"name":"global-variables","slug":"global-variables"},{"name":"linker-errors","slug":"linker-errors"},{"name":"memory-leaks","slug":"memory-leaks"},{"name":"event-bubbling","slug":"event-bubbling"},{"name":"lambda","slug":"lambda"},{"name":"undefined-behavior","slug":"undefined-behavior"},{"name":"firebase-realtime-database","slug":"firebase-realtime-database"},{"name":"object-slicing","slug":"object-slicing"},{"name":"quoting","slug":"quoting"},{"name":"package","slug":"package"},{"name":"kotlin","slug":"kotlin"},{"name":"directory","slug":"directory"},{"name":"jsf","slug":"jsf"},{"name":"std","slug":"std"},{"name":"importerror","slug":"importerror"},{"name":"listview","slug":"listview"},{"name":"easy-install","slug":"easy-install"}]},"__N_SSG":true}