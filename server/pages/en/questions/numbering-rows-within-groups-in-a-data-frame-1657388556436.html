<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/numbering-rows-within-groups-in-a-data-frame-1657388556436","name":"Questions"}}]}</script><title>Numbering rows within groups in a data frame | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="Working with a data frame similar to this:  

set.seed(100)  
df &lt;- data.frame(cat = c(rep(&quot;aaa&quot;, 5), rep(&quot;bbb&quot;, 5), rep(&quot;ccc&quot;, 5)), val = runif(15))             
df &lt;- df[order(df$cat, df$val), ]  
df  

   cat        val  
1  aaa 0.05638315  
2  aaa 0.25767250  
3  aaa 0.30776611  
4  aaa 0.46854928  
5  aaa 0.55232243  
6  bbb 0.17026205  
7  bbb 0.37032054  
8  bbb 0.48377074  
9  bbb 0.54655860  
10 bbb 0.81240262  
11 ccc 0.28035384  
12 ccc 0.39848790  
13 ccc 0.62499648  
14 ccc 0.76255108  
15 ccc 0.88216552 


I am trying to add a column with numbering within each group. Doing it this way obviously isn&#x27;t using the powers of R:  

 df$num &lt;- 1  
 for (i in 2:(length(df[,1]))) {  
   if (df[i,&quot;cat&quot;]==df[(i-1),&quot;cat&quot;]) {  
     df[i,&quot;num&quot;]&lt;-df[i-1,&quot;num&quot;]+1  
     }  
 }  
 df  

   cat        val num  
1  aaa 0.05638315   1  
2  aaa 0.25767250   2  
3  aaa 0.30776611   3  
4  aaa 0.46854928   4  
5  aaa 0.55232243   5  
6  bbb 0.17026205   1  
7  bbb 0.37032054   2  
8  bbb 0.48377074   3  
9  bbb 0.54655860   4  
10 bbb 0.81240262   5  
11 ccc 0.28035384   1  
12 ccc 0.39848790   2  
13 ccc 0.62499648   3  
14 ccc 0.76255108   4  
15 ccc 0.88216552   5  


What would be a good way to do this?
    "/><meta property="og:title" content="Numbering rows within groups in a data frame | Solution Checker"/><meta property="og:description" content="Working with a data frame similar to this:  

set.seed(100)  
df &lt;- data.frame(cat = c(rep(&quot;aaa&quot;, 5), rep(&quot;bbb&quot;, 5), rep(&quot;ccc&quot;, 5)), val = runif(15))             
df &lt;- df[order(df$cat, df$val), ]  
df  

   cat        val  
1  aaa 0.05638315  
2  aaa 0.25767250  
3  aaa 0.30776611  
4  aaa 0.46854928  
5  aaa 0.55232243  
6  bbb 0.17026205  
7  bbb 0.37032054  
8  bbb 0.48377074  
9  bbb 0.54655860  
10 bbb 0.81240262  
11 ccc 0.28035384  
12 ccc 0.39848790  
13 ccc 0.62499648  
14 ccc 0.76255108  
15 ccc 0.88216552 


I am trying to add a column with numbering within each group. Doing it this way obviously isn&#x27;t using the powers of R:  

 df$num &lt;- 1  
 for (i in 2:(length(df[,1]))) {  
   if (df[i,&quot;cat&quot;]==df[(i-1),&quot;cat&quot;]) {  
     df[i,&quot;num&quot;]&lt;-df[i-1,&quot;num&quot;]+1  
     }  
 }  
 df  

   cat        val num  
1  aaa 0.05638315   1  
2  aaa 0.25767250   2  
3  aaa 0.30776611   3  
4  aaa 0.46854928   4  
5  aaa 0.55232243   5  
6  bbb 0.17026205   1  
7  bbb 0.37032054   2  
8  bbb 0.48377074   3  
9  bbb 0.54655860   4  
10 bbb 0.81240262   5  
11 ccc 0.28035384   1  
12 ccc 0.39848790   2  
13 ccc 0.62499648   3  
14 ccc 0.76255108   4  
15 ccc 0.88216552   5  


What would be a good way to do this?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Numbering rows within groups in a data frame","text":"Working with a data frame similar to this:  \n\nset.seed(100)  \ndf &lt;- data.frame(cat = c(rep(&quot;aaa&quot;, 5), rep(&quot;bbb&quot;, 5), rep(&quot;ccc&quot;, 5)), val = runif(15))             \ndf &lt;- df[order(df$cat, df$val), ]  \ndf  \n\n   cat        val  \n1  aaa 0.05638315  \n2  aaa 0.25767250  \n3  aaa 0.30776611  \n4  aaa 0.46854928  \n5  aaa 0.55232243  \n6  bbb 0.17026205  \n7  bbb 0.37032054  \n8  bbb 0.48377074  \n9  bbb 0.54655860  \n10 bbb 0.81240262  \n11 ccc 0.28035384  \n12 ccc 0.39848790  \n13 ccc 0.62499648  \n14 ccc 0.76255108  \n15 ccc 0.88216552 \n\n\nI am trying to add a column with numbering within each group. Doing it this way obviously isn&apos;t using the powers of R:  \n\n df$num &lt;- 1  \n for (i in 2:(length(df[,1]))) {  \n   if (df[i,&quot;cat&quot;]==df[(i-1),&quot;cat&quot;]) {  \n     df[i,&quot;num&quot;]&lt;-df[i-1,&quot;num&quot;]+1  \n     }  \n }  \n df  \n\n   cat        val num  \n1  aaa 0.05638315   1  \n2  aaa 0.25767250   2  \n3  aaa 0.30776611   3  \n4  aaa 0.46854928   4  \n5  aaa 0.55232243   5  \n6  bbb 0.17026205   1  \n7  bbb 0.37032054   2  \n8  bbb 0.48377074   3  \n9  bbb 0.54655860   4  \n10 bbb 0.81240262   5  \n11 ccc 0.28035384   1  \n12 ccc 0.39848790   2  \n13 ccc 0.62499648   3  \n14 ccc 0.76255108   4  \n15 ccc 0.88216552   5  \n\n\nWhat would be a good way to do this?\n    ","answerCount":9,"upVoteCount":500,"suggestedAnswer":[{"text":"Use ave, ddply, dplyr or data.table:\n\ndf$num &lt;- ave(df$val, df$cat, FUN = seq_along)\n\n\nor:\n\nlibrary(plyr)\nddply(df, .(cat), mutate, id = seq_along(val))\n\n\nor:\n\nlibrary(dplyr)\ndf %&gt;% group_by(cat) %&gt;% mutate(id = row_number())\n\n\nor (the most memory efficient, as it assigns by reference within DT):\n\nlibrary(data.table)\nDT &lt;- data.table(df)\n\nDT[, id := seq_len(.N), by = cat]\nDT[, id := rowid(cat)]\n\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"For making this r-faq question more complete, a base R alternative with sequence and rle:\n\ndf$num &lt;- sequence(rle(df$cat)$lengths)\n\n\nwhich gives the intended result:\n\n\n&gt; df\n   cat        val num\n4  aaa 0.05638315   1\n2  aaa 0.25767250   2\n1  aaa 0.30776611   3\n5  aaa 0.46854928   4\n3  aaa 0.55232243   5\n10 bbb 0.17026205   1\n8  bbb 0.37032054   2\n6  bbb 0.48377074   3\n9  bbb 0.54655860   4\n7  bbb 0.81240262   5\n13 ccc 0.28035384   1\n14 ccc 0.39848790   2\n11 ccc 0.62499648   3\n15 ccc 0.76255108   4\n12 ccc 0.88216552   5\n\n\n\nIf df$cat is a factor variable, you need to wrap it in as.character first:\n\ndf$num &lt;- sequence(rle(as.character(df$cat))$lengths)\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Here is a small improvement trick that allows sort &apos;val&apos; inside the groups:\n\n# 1. Data set\nset.seed(100)\ndf &lt;- data.frame(\n  cat = c(rep(&quot;aaa&quot;, 5), rep(&quot;ccc&quot;, 5), rep(&quot;bbb&quot;, 5)), \n  val = runif(15))             \n\n# 2. &apos;dplyr&apos; approach\ndf %&gt;% \n  arrange(cat, val) %&gt;% \n  group_by(cat) %&gt;% \n  mutate(id = row_number())\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Another dplyr possibility could be:\n\ndf %&gt;%\n group_by(cat) %&gt;%\n mutate(num = 1:n())\n\n   cat      val   num\n   &lt;fct&gt;  &lt;dbl&gt; &lt;int&gt;\n 1 aaa   0.0564     1\n 2 aaa   0.258      2\n 3 aaa   0.308      3\n 4 aaa   0.469      4\n 5 aaa   0.552      5\n 6 bbb   0.170      1\n 7 bbb   0.370      2\n 8 bbb   0.484      3\n 9 bbb   0.547      4\n10 bbb   0.812      5\n11 ccc   0.280      1\n12 ccc   0.398      2\n13 ccc   0.625      3\n14 ccc   0.763      4\n15 ccc   0.882      5\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"I would like to add a data.table variant using the rank() function which provides the additional possibility to change the ordering and thus makes it a bit more flexible than the seq_len() solution and is pretty similar to row_number functions in RDBMS.\n# Variant with ascending ordering\nlibrary(data.table)\ndt &lt;- data.table(df)\ndt[, .( val\n   , num = rank(val))\n    , by = list(cat)][order(cat, num),]\n\n    cat        val num\n 1: aaa 0.05638315   1\n 2: aaa 0.25767250   2\n 3: aaa 0.30776611   3\n 4: aaa 0.46854928   4\n 5: aaa 0.55232243   5\n 6: bbb 0.17026205   1\n 7: bbb 0.37032054   2\n 8: bbb 0.48377074   3\n 9: bbb 0.54655860   4\n10: bbb 0.81240262   5\n11: ccc 0.28035384   1\n12: ccc 0.39848790   2\n13: ccc 0.62499648   3\n14: ccc 0.76255108   4\n\n# Variant with descending ordering\ndt[, .( val\n   , num = rank(desc(val)))\n    , by = list(cat)][order(cat, num),]\n\nEdit on 2021-04-16 to make the switch between descending and ascending order more fail-safe\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"Here is an option using a for loop by groups rather by rows (like OP did)\n\nfor (i in unique(df$cat)) df$num[df$cat == i] &lt;- seq_len(sum(df$cat == i))\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"Using the rowid() function in data.table:\n\n&gt; set.seed(100)  \n&gt; df &lt;- data.frame(cat = c(rep(&quot;aaa&quot;, 5), rep(&quot;bbb&quot;, 5), rep(&quot;ccc&quot;, 5)), val = runif(15))\n&gt; df &lt;- df[order(df$cat, df$val), ]  \n&gt; df$num &lt;- data.table::rowid(df$cat)\n&gt; df\n   cat        val num\n4  aaa 0.05638315   1\n2  aaa 0.25767250   2\n1  aaa 0.30776611   3\n5  aaa 0.46854928   4\n3  aaa 0.55232243   5\n10 bbb 0.17026205   1\n8  bbb 0.37032054   2\n6  bbb 0.48377074   3\n9  bbb 0.54655860   4\n7  bbb 0.81240262   5\n13 ccc 0.28035384   1\n14 ccc 0.39848790   2\n11 ccc 0.62499648   3\n15 ccc 0.76255108   4\n12 ccc 0.88216552   5\n\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"Very simple, tidy solutions.\nRow number for entire data.frame\nlibrary(tidyverse)\n\niris %&gt;%\n  mutate(row_num = seq_along(Sepal.Length)) %&gt;%\n  head\n\n    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species row_num\n1            5.1         3.5          1.4         0.2     setosa       1\n2            4.9         3.0          1.4         0.2     setosa       2\n3            4.7         3.2          1.3         0.2     setosa       3\n..           ...         ...          ...         ...     ......     ...\n148          6.5         3.0          5.2         2.0  virginica     148\n149          6.2         3.4          5.4         2.3  virginica     149\n150          5.9         3.0          5.1         1.8  virginica     150\n\nRow number by group in data.frame\niris %&gt;% \n  group_by(Species) %&gt;% \n  mutate(num_in_group=seq_along(Species)) %&gt;% \n  as.data.frame\n\n\n    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species num_in_group\n1            5.1         3.5          1.4         0.2     setosa            1\n2            4.9         3.0          1.4         0.2     setosa            2\n3            4.7         3.2          1.3         0.2     setosa            3\n..           ...         ...          ...         ...     ......           ..\n48           4.6         3.2          1.4         0.2     setosa           48\n49           5.3         3.7          1.5         0.2     setosa           49\n50           5.0         3.3          1.4         0.2     setosa           50\n51           7.0         3.2          4.7         1.4 versicolor            1\n52           6.4         3.2          4.5         1.5 versicolor            2\n53           6.9         3.1          4.9         1.5 versicolor            3\n..           ...         ...          ...         ...     ......           ..\n98           6.2         2.9          4.3         1.3 versicolor           48\n99           5.1         2.5          3.0         1.1 versicolor           49\n100          5.7         2.8          4.1         1.3 versicolor           50\n101          6.3         3.3          6.0         2.5  virginica            1\n102          5.8         2.7          5.1         1.9  virginica            2\n103          7.1         3.0          5.9         2.1  virginica            3\n..           ...         ...          ...         ...     ......           ..\n148          6.5         3.0          5.2         2.0  virginica           48\n149          6.2         3.4          5.4         2.3  virginica           49\n150          5.9         3.0          5.1         1.8  virginica           50\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"Another base R solution would be to split the data frame per cat, after that using lapply: add a column with number 1:nrow(x). The last step is to have your final data frame back with do.call, that is:\n        df_split &lt;- split(df, df$cat)\n        df_lapply &lt;- lapply(df_split, function(x) {\n          x$num &lt;- seq_len(nrow(x))\n          return(x)\n        })\n        df &lt;- do.call(rbind, df_lapply)\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/4f7b2847abfe82c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4f7b2847abfe82c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c0d2dcb5e85faf18.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-50e201fdaa1e0fd1.js" defer=""></script><script src="/_next/static/eGqQHYKGZKE-nXShFn8wX/_buildManifest.js" defer=""></script><script src="/_next/static/eGqQHYKGZKE-nXShFn8wX/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/numbering-rows-within-groups-in-a-data-frame-1657388556436#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/numbering-rows-within-groups-in-a-data-frame-1657388556436"><h1>Numbering rows within groups in a data frame</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>Working with a data frame similar to this:  </p>

<pre class="lang-r s-code-block"><code class="hljs language-r">set.seed<span class="hljs-punctuation">(</span><span class="hljs-number">100</span><span class="hljs-punctuation">)</span>  
df <span class="hljs-operator">&lt;-</span> data.frame<span class="hljs-punctuation">(</span>cat <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-string">"aaa"</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-string">"bbb"</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-string">"ccc"</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> val <span class="hljs-operator">=</span> runif<span class="hljs-punctuation">(</span><span class="hljs-number">15</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>             
df <span class="hljs-operator">&lt;-</span> df<span class="hljs-punctuation">[</span>order<span class="hljs-punctuation">(</span>df<span class="hljs-operator">$</span>cat<span class="hljs-punctuation">,</span> df<span class="hljs-operator">$</span>val<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">]</span>  
df  

   cat        val  
<span class="hljs-number">1</span>  aaa <span class="hljs-number">0.05638315</span>  
<span class="hljs-number">2</span>  aaa <span class="hljs-number">0.25767250</span>  
<span class="hljs-number">3</span>  aaa <span class="hljs-number">0.30776611</span>  
<span class="hljs-number">4</span>  aaa <span class="hljs-number">0.46854928</span>  
<span class="hljs-number">5</span>  aaa <span class="hljs-number">0.55232243</span>  
<span class="hljs-number">6</span>  bbb <span class="hljs-number">0.17026205</span>  
<span class="hljs-number">7</span>  bbb <span class="hljs-number">0.37032054</span>  
<span class="hljs-number">8</span>  bbb <span class="hljs-number">0.48377074</span>  
<span class="hljs-number">9</span>  bbb <span class="hljs-number">0.54655860</span>  
<span class="hljs-number">10</span> bbb <span class="hljs-number">0.81240262</span>  
<span class="hljs-number">11</span> ccc <span class="hljs-number">0.28035384</span>  
<span class="hljs-number">12</span> ccc <span class="hljs-number">0.39848790</span>  
<span class="hljs-number">13</span> ccc <span class="hljs-number">0.62499648</span>  
<span class="hljs-number">14</span> ccc <span class="hljs-number">0.76255108</span>  
<span class="hljs-number">15</span> ccc <span class="hljs-number">0.88216552</span> 
</code></pre>

<p>I am trying to add a column with numbering within each group. Doing it this way obviously isn't using the powers of R:  </p>

<pre class="lang-r s-code-block"><code class="hljs language-r"> df<span class="hljs-operator">$</span>num <span class="hljs-operator">&lt;-</span> 1  
 <span class="hljs-keyword">for</span> <span class="hljs-punctuation">(</span>i <span class="hljs-keyword">in</span> <span class="hljs-number">2</span><span class="hljs-operator">:</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">length</span><span class="hljs-punctuation">(</span>df<span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>  
   <span class="hljs-keyword">if</span> <span class="hljs-punctuation">(</span>df<span class="hljs-punctuation">[</span>i<span class="hljs-punctuation">,</span><span class="hljs-string">"cat"</span><span class="hljs-punctuation">]</span><span class="hljs-operator">==</span>df<span class="hljs-punctuation">[</span><span class="hljs-punctuation">(</span>i<span class="hljs-operator">-</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span><span class="hljs-string">"cat"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>  
     df<span class="hljs-punctuation">[</span>i<span class="hljs-punctuation">,</span><span class="hljs-string">"num"</span><span class="hljs-punctuation">]</span><span class="hljs-operator">&lt;-</span>df<span class="hljs-punctuation">[</span>i<span class="hljs-operator">-</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-string">"num"</span><span class="hljs-punctuation">]</span><span class="hljs-operator">+</span><span class="hljs-number">1</span>  
     <span class="hljs-punctuation">}</span>  
 <span class="hljs-punctuation">}</span>  
 df  

   cat        val num  
<span class="hljs-number">1</span>  aaa <span class="hljs-number">0.05638315</span>   <span class="hljs-number">1</span>  
<span class="hljs-number">2</span>  aaa <span class="hljs-number">0.25767250</span>   <span class="hljs-number">2</span>  
<span class="hljs-number">3</span>  aaa <span class="hljs-number">0.30776611</span>   <span class="hljs-number">3</span>  
<span class="hljs-number">4</span>  aaa <span class="hljs-number">0.46854928</span>   <span class="hljs-number">4</span>  
<span class="hljs-number">5</span>  aaa <span class="hljs-number">0.55232243</span>   <span class="hljs-number">5</span>  
<span class="hljs-number">6</span>  bbb <span class="hljs-number">0.17026205</span>   <span class="hljs-number">1</span>  
<span class="hljs-number">7</span>  bbb <span class="hljs-number">0.37032054</span>   <span class="hljs-number">2</span>  
<span class="hljs-number">8</span>  bbb <span class="hljs-number">0.48377074</span>   <span class="hljs-number">3</span>  
<span class="hljs-number">9</span>  bbb <span class="hljs-number">0.54655860</span>   <span class="hljs-number">4</span>  
<span class="hljs-number">10</span> bbb <span class="hljs-number">0.81240262</span>   <span class="hljs-number">5</span>  
<span class="hljs-number">11</span> ccc <span class="hljs-number">0.28035384</span>   <span class="hljs-number">1</span>  
<span class="hljs-number">12</span> ccc <span class="hljs-number">0.39848790</span>   <span class="hljs-number">2</span>  
<span class="hljs-number">13</span> ccc <span class="hljs-number">0.62499648</span>   <span class="hljs-number">3</span>  
<span class="hljs-number">14</span> ccc <span class="hljs-number">0.76255108</span>   <span class="hljs-number">4</span>  
<span class="hljs-number">15</span> ccc <span class="hljs-number">0.88216552</span>   <span class="hljs-number">5</span>  
</code></pre>

<p>What would be a good way to do this?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Use <code>ave</code>, <code>ddply</code>, <code>dplyr</code> or <code>data.table</code>:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">df<span class="hljs-operator">$</span>num <span class="hljs-operator">&lt;-</span> ave<span class="hljs-punctuation">(</span>df<span class="hljs-operator">$</span>val<span class="hljs-punctuation">,</span> df<span class="hljs-operator">$</span>cat<span class="hljs-punctuation">,</span> FUN <span class="hljs-operator">=</span> <span class="hljs-built_in">seq_along</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>or:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>plyr<span class="hljs-punctuation">)</span>
ddply<span class="hljs-punctuation">(</span>df<span class="hljs-punctuation">,</span> .<span class="hljs-punctuation">(</span>cat<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> mutate<span class="hljs-punctuation">,</span> id <span class="hljs-operator">=</span> <span class="hljs-built_in">seq_along</span><span class="hljs-punctuation">(</span>val<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>or:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>dplyr<span class="hljs-punctuation">)</span>
df <span class="hljs-operator">%&gt;%</span> group_by<span class="hljs-punctuation">(</span>cat<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> mutate<span class="hljs-punctuation">(</span>id <span class="hljs-operator">=</span> row_number<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>or (the most memory efficient, as it assigns by reference within <code>DT</code>):</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>data.table<span class="hljs-punctuation">)</span>
DT <span class="hljs-operator">&lt;-</span> data.table<span class="hljs-punctuation">(</span>df<span class="hljs-punctuation">)</span>

DT<span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span> id <span class="hljs-operator">:=</span> <span class="hljs-built_in">seq_len</span><span class="hljs-punctuation">(</span>.N<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> by <span class="hljs-operator">=</span> cat<span class="hljs-punctuation">]</span>
DT<span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span> id <span class="hljs-operator">:=</span> rowid<span class="hljs-punctuation">(</span>cat<span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span>
</code></pre>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For making this <a href="/questions/tagged/r-faq" class="post-tag" title="show questions tagged 'r-faq'" rel="tag">r-faq</a> question more complete, a base R alternative with <code>sequence</code> and <code>rle</code>:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">df<span class="hljs-operator">$</span>num <span class="hljs-operator">&lt;-</span> sequence<span class="hljs-punctuation">(</span>rle<span class="hljs-punctuation">(</span>df<span class="hljs-operator">$</span>cat<span class="hljs-punctuation">)</span><span class="hljs-operator">$</span>lengths<span class="hljs-punctuation">)</span>
</code></pre>

<p>which gives the intended result:</p>

<blockquote>
<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-operator">&gt;</span> df
   cat        val num
<span class="hljs-number">4</span>  aaa <span class="hljs-number">0.05638315</span>   <span class="hljs-number">1</span>
<span class="hljs-number">2</span>  aaa <span class="hljs-number">0.25767250</span>   <span class="hljs-number">2</span>
<span class="hljs-number">1</span>  aaa <span class="hljs-number">0.30776611</span>   <span class="hljs-number">3</span>
<span class="hljs-number">5</span>  aaa <span class="hljs-number">0.46854928</span>   <span class="hljs-number">4</span>
<span class="hljs-number">3</span>  aaa <span class="hljs-number">0.55232243</span>   <span class="hljs-number">5</span>
<span class="hljs-number">10</span> bbb <span class="hljs-number">0.17026205</span>   <span class="hljs-number">1</span>
<span class="hljs-number">8</span>  bbb <span class="hljs-number">0.37032054</span>   <span class="hljs-number">2</span>
<span class="hljs-number">6</span>  bbb <span class="hljs-number">0.48377074</span>   <span class="hljs-number">3</span>
<span class="hljs-number">9</span>  bbb <span class="hljs-number">0.54655860</span>   <span class="hljs-number">4</span>
<span class="hljs-number">7</span>  bbb <span class="hljs-number">0.81240262</span>   <span class="hljs-number">5</span>
<span class="hljs-number">13</span> ccc <span class="hljs-number">0.28035384</span>   <span class="hljs-number">1</span>
<span class="hljs-number">14</span> ccc <span class="hljs-number">0.39848790</span>   <span class="hljs-number">2</span>
<span class="hljs-number">11</span> ccc <span class="hljs-number">0.62499648</span>   <span class="hljs-number">3</span>
<span class="hljs-number">15</span> ccc <span class="hljs-number">0.76255108</span>   <span class="hljs-number">4</span>
<span class="hljs-number">12</span> ccc <span class="hljs-number">0.88216552</span>   <span class="hljs-number">5</span>
</code></pre>
</blockquote>

<p>If <code>df$cat</code> is a factor variable, you need to wrap it in <code>as.character</code> first:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">df<span class="hljs-operator">$</span>num <span class="hljs-operator">&lt;-</span> sequence<span class="hljs-punctuation">(</span>rle<span class="hljs-punctuation">(</span><span class="hljs-built_in">as.character</span><span class="hljs-punctuation">(</span>df<span class="hljs-operator">$</span>cat<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-operator">$</span>lengths<span class="hljs-punctuation">)</span>
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is a small improvement trick that allows sort 'val' inside the groups:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-comment"># 1. Data set</span>
set.seed<span class="hljs-punctuation">(</span><span class="hljs-number">100</span><span class="hljs-punctuation">)</span>
df <span class="hljs-operator">&lt;-</span> data.frame<span class="hljs-punctuation">(</span>
  cat <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-string">"aaa"</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-string">"ccc"</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-string">"bbb"</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> 
  val <span class="hljs-operator">=</span> runif<span class="hljs-punctuation">(</span><span class="hljs-number">15</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>             

<span class="hljs-comment"># 2. 'dplyr' approach</span>
df <span class="hljs-operator">%&gt;%</span> 
  arrange<span class="hljs-punctuation">(</span>cat<span class="hljs-punctuation">,</span> val<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> 
  group_by<span class="hljs-punctuation">(</span>cat<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> 
  mutate<span class="hljs-punctuation">(</span>id <span class="hljs-operator">=</span> row_number<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Another <code>dplyr</code> possibility could be:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">df <span class="hljs-operator">%&gt;%</span>
 group_by<span class="hljs-punctuation">(</span>cat<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span>
 mutate<span class="hljs-punctuation">(</span>num <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-operator">:</span>n<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>

   cat      val   num
   <span class="hljs-operator">&lt;</span>fct<span class="hljs-operator">&gt;</span>  <span class="hljs-operator">&lt;</span>dbl<span class="hljs-operator">&gt;</span> <span class="hljs-operator">&lt;</span>int<span class="hljs-operator">&gt;</span>
 <span class="hljs-number">1</span> aaa   <span class="hljs-number">0.0564</span>     <span class="hljs-number">1</span>
 <span class="hljs-number">2</span> aaa   <span class="hljs-number">0.258</span>      <span class="hljs-number">2</span>
 <span class="hljs-number">3</span> aaa   <span class="hljs-number">0.308</span>      <span class="hljs-number">3</span>
 <span class="hljs-number">4</span> aaa   <span class="hljs-number">0.469</span>      <span class="hljs-number">4</span>
 <span class="hljs-number">5</span> aaa   <span class="hljs-number">0.552</span>      <span class="hljs-number">5</span>
 <span class="hljs-number">6</span> bbb   <span class="hljs-number">0.170</span>      <span class="hljs-number">1</span>
 <span class="hljs-number">7</span> bbb   <span class="hljs-number">0.370</span>      <span class="hljs-number">2</span>
 <span class="hljs-number">8</span> bbb   <span class="hljs-number">0.484</span>      <span class="hljs-number">3</span>
 <span class="hljs-number">9</span> bbb   <span class="hljs-number">0.547</span>      <span class="hljs-number">4</span>
<span class="hljs-number">10</span> bbb   <span class="hljs-number">0.812</span>      <span class="hljs-number">5</span>
<span class="hljs-number">11</span> ccc   <span class="hljs-number">0.280</span>      <span class="hljs-number">1</span>
<span class="hljs-number">12</span> ccc   <span class="hljs-number">0.398</span>      <span class="hljs-number">2</span>
<span class="hljs-number">13</span> ccc   <span class="hljs-number">0.625</span>      <span class="hljs-number">3</span>
<span class="hljs-number">14</span> ccc   <span class="hljs-number">0.763</span>      <span class="hljs-number">4</span>
<span class="hljs-number">15</span> ccc   <span class="hljs-number">0.882</span>      <span class="hljs-number">5</span>
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I would like to add a <code>data.table</code> variant using the <code>rank()</code> function which provides the additional possibility to change the ordering and thus makes it a bit more flexible than the <code>seq_len()</code> solution and is pretty similar to row_number functions in RDBMS.</p>
<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-comment"># Variant with ascending ordering</span>
library<span class="hljs-punctuation">(</span>data.table<span class="hljs-punctuation">)</span>
dt <span class="hljs-operator">&lt;-</span> data.table<span class="hljs-punctuation">(</span>df<span class="hljs-punctuation">)</span>
dt<span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span> .<span class="hljs-punctuation">(</span> val
   <span class="hljs-punctuation">,</span> num <span class="hljs-operator">=</span> rank<span class="hljs-punctuation">(</span>val<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
    <span class="hljs-punctuation">,</span> by <span class="hljs-operator">=</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>cat<span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">[</span>order<span class="hljs-punctuation">(</span>cat<span class="hljs-punctuation">,</span> num<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span>

    cat        val num
 <span class="hljs-number">1</span><span class="hljs-operator">:</span> aaa <span class="hljs-number">0.05638315</span>   <span class="hljs-number">1</span>
 <span class="hljs-number">2</span><span class="hljs-operator">:</span> aaa <span class="hljs-number">0.25767250</span>   <span class="hljs-number">2</span>
 <span class="hljs-number">3</span><span class="hljs-operator">:</span> aaa <span class="hljs-number">0.30776611</span>   <span class="hljs-number">3</span>
 <span class="hljs-number">4</span><span class="hljs-operator">:</span> aaa <span class="hljs-number">0.46854928</span>   <span class="hljs-number">4</span>
 <span class="hljs-number">5</span><span class="hljs-operator">:</span> aaa <span class="hljs-number">0.55232243</span>   <span class="hljs-number">5</span>
 <span class="hljs-number">6</span><span class="hljs-operator">:</span> bbb <span class="hljs-number">0.17026205</span>   <span class="hljs-number">1</span>
 <span class="hljs-number">7</span><span class="hljs-operator">:</span> bbb <span class="hljs-number">0.37032054</span>   <span class="hljs-number">2</span>
 <span class="hljs-number">8</span><span class="hljs-operator">:</span> bbb <span class="hljs-number">0.48377074</span>   <span class="hljs-number">3</span>
 <span class="hljs-number">9</span><span class="hljs-operator">:</span> bbb <span class="hljs-number">0.54655860</span>   <span class="hljs-number">4</span>
<span class="hljs-number">10</span><span class="hljs-operator">:</span> bbb <span class="hljs-number">0.81240262</span>   <span class="hljs-number">5</span>
<span class="hljs-number">11</span><span class="hljs-operator">:</span> ccc <span class="hljs-number">0.28035384</span>   <span class="hljs-number">1</span>
<span class="hljs-number">12</span><span class="hljs-operator">:</span> ccc <span class="hljs-number">0.39848790</span>   <span class="hljs-number">2</span>
<span class="hljs-number">13</span><span class="hljs-operator">:</span> ccc <span class="hljs-number">0.62499648</span>   <span class="hljs-number">3</span>
<span class="hljs-number">14</span><span class="hljs-operator">:</span> ccc <span class="hljs-number">0.76255108</span>   <span class="hljs-number">4</span>

<span class="hljs-comment"># Variant with descending ordering</span>
dt<span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span> .<span class="hljs-punctuation">(</span> val
   <span class="hljs-punctuation">,</span> num <span class="hljs-operator">=</span> rank<span class="hljs-punctuation">(</span>desc<span class="hljs-punctuation">(</span>val<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
    <span class="hljs-punctuation">,</span> by <span class="hljs-operator">=</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>cat<span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">[</span>order<span class="hljs-punctuation">(</span>cat<span class="hljs-punctuation">,</span> num<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span><span class="hljs-punctuation">]</span>
</code></pre>
<p>Edit on 2021-04-16 to make the switch between descending and ascending order more fail-safe</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is an option using a <code>for</code> loop by groups rather by rows (like OP did)</p>

<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-keyword">for</span> <span class="hljs-punctuation">(</span>i <span class="hljs-keyword">in</span> unique<span class="hljs-punctuation">(</span>df<span class="hljs-operator">$</span>cat<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> df<span class="hljs-operator">$</span>num<span class="hljs-punctuation">[</span>df<span class="hljs-operator">$</span>cat <span class="hljs-operator">==</span> i<span class="hljs-punctuation">]</span> <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">seq_len</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">sum</span><span class="hljs-punctuation">(</span>df<span class="hljs-operator">$</span>cat <span class="hljs-operator">==</span> i<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using the <code>rowid()</code> function in <code>data.table</code>:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-operator">&gt;</span> set.seed<span class="hljs-punctuation">(</span><span class="hljs-number">100</span><span class="hljs-punctuation">)</span>  
<span class="hljs-operator">&gt;</span> df <span class="hljs-operator">&lt;-</span> data.frame<span class="hljs-punctuation">(</span>cat <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-string">"aaa"</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-string">"bbb"</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">rep</span><span class="hljs-punctuation">(</span><span class="hljs-string">"ccc"</span><span class="hljs-punctuation">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> val <span class="hljs-operator">=</span> runif<span class="hljs-punctuation">(</span><span class="hljs-number">15</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
<span class="hljs-operator">&gt;</span> df <span class="hljs-operator">&lt;-</span> df<span class="hljs-punctuation">[</span>order<span class="hljs-punctuation">(</span>df<span class="hljs-operator">$</span>cat<span class="hljs-punctuation">,</span> df<span class="hljs-operator">$</span>val<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">]</span>  
<span class="hljs-operator">&gt;</span> df<span class="hljs-operator">$</span>num <span class="hljs-operator">&lt;-</span> data.table<span class="hljs-operator">::</span>rowid<span class="hljs-punctuation">(</span>df<span class="hljs-operator">$</span>cat<span class="hljs-punctuation">)</span>
<span class="hljs-operator">&gt;</span> df
   cat        val num
<span class="hljs-number">4</span>  aaa <span class="hljs-number">0.05638315</span>   <span class="hljs-number">1</span>
<span class="hljs-number">2</span>  aaa <span class="hljs-number">0.25767250</span>   <span class="hljs-number">2</span>
<span class="hljs-number">1</span>  aaa <span class="hljs-number">0.30776611</span>   <span class="hljs-number">3</span>
<span class="hljs-number">5</span>  aaa <span class="hljs-number">0.46854928</span>   <span class="hljs-number">4</span>
<span class="hljs-number">3</span>  aaa <span class="hljs-number">0.55232243</span>   <span class="hljs-number">5</span>
<span class="hljs-number">10</span> bbb <span class="hljs-number">0.17026205</span>   <span class="hljs-number">1</span>
<span class="hljs-number">8</span>  bbb <span class="hljs-number">0.37032054</span>   <span class="hljs-number">2</span>
<span class="hljs-number">6</span>  bbb <span class="hljs-number">0.48377074</span>   <span class="hljs-number">3</span>
<span class="hljs-number">9</span>  bbb <span class="hljs-number">0.54655860</span>   <span class="hljs-number">4</span>
<span class="hljs-number">7</span>  bbb <span class="hljs-number">0.81240262</span>   <span class="hljs-number">5</span>
<span class="hljs-number">13</span> ccc <span class="hljs-number">0.28035384</span>   <span class="hljs-number">1</span>
<span class="hljs-number">14</span> ccc <span class="hljs-number">0.39848790</span>   <span class="hljs-number">2</span>
<span class="hljs-number">11</span> ccc <span class="hljs-number">0.62499648</span>   <span class="hljs-number">3</span>
<span class="hljs-number">15</span> ccc <span class="hljs-number">0.76255108</span>   <span class="hljs-number">4</span>
<span class="hljs-number">12</span> ccc <span class="hljs-number">0.88216552</span>   <span class="hljs-number">5</span>
</code></pre>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Very simple, tidy solutions.</p>
<p><strong>Row number for entire data.frame</strong></p>
<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>tidyverse<span class="hljs-punctuation">)</span>

iris <span class="hljs-operator">%&gt;%</span>
  mutate<span class="hljs-punctuation">(</span>row_num <span class="hljs-operator">=</span> <span class="hljs-built_in">seq_along</span><span class="hljs-punctuation">(</span>Sepal.Length<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span>
  head

    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species row_num
<span class="hljs-number">1</span>            <span class="hljs-number">5.1</span>         <span class="hljs-number">3.5</span>          <span class="hljs-number">1.4</span>         <span class="hljs-number">0.2</span>     setosa       <span class="hljs-number">1</span>
<span class="hljs-number">2</span>            <span class="hljs-number">4.9</span>         <span class="hljs-number">3.0</span>          <span class="hljs-number">1.4</span>         <span class="hljs-number">0.2</span>     setosa       <span class="hljs-number">2</span>
<span class="hljs-number">3</span>            <span class="hljs-number">4.7</span>         <span class="hljs-number">3.2</span>          <span class="hljs-number">1.3</span>         <span class="hljs-number">0.2</span>     setosa       <span class="hljs-number">3</span>
..           ...         ...          ...         ...     ......     ...
<span class="hljs-number">148</span>          <span class="hljs-number">6.5</span>         <span class="hljs-number">3.0</span>          <span class="hljs-number">5.2</span>         <span class="hljs-number">2.0</span>  virginica     <span class="hljs-number">148</span>
<span class="hljs-number">149</span>          <span class="hljs-number">6.2</span>         <span class="hljs-number">3.4</span>          <span class="hljs-number">5.4</span>         <span class="hljs-number">2.3</span>  virginica     <span class="hljs-number">149</span>
<span class="hljs-number">150</span>          <span class="hljs-number">5.9</span>         <span class="hljs-number">3.0</span>          <span class="hljs-number">5.1</span>         <span class="hljs-number">1.8</span>  virginica     <span class="hljs-number">150</span>
</code></pre>
<p><strong>Row number by group in data.frame</strong></p>
<pre class="lang-r s-code-block"><code class="hljs language-r">iris <span class="hljs-operator">%&gt;%</span> 
  group_by<span class="hljs-punctuation">(</span>Species<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> 
  mutate<span class="hljs-punctuation">(</span>num_in_group<span class="hljs-operator">=</span><span class="hljs-built_in">seq_along</span><span class="hljs-punctuation">(</span>Species<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> 
  as.data.frame


    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species num_in_group
<span class="hljs-number">1</span>            <span class="hljs-number">5.1</span>         <span class="hljs-number">3.5</span>          <span class="hljs-number">1.4</span>         <span class="hljs-number">0.2</span>     setosa            <span class="hljs-number">1</span>
<span class="hljs-number">2</span>            <span class="hljs-number">4.9</span>         <span class="hljs-number">3.0</span>          <span class="hljs-number">1.4</span>         <span class="hljs-number">0.2</span>     setosa            <span class="hljs-number">2</span>
<span class="hljs-number">3</span>            <span class="hljs-number">4.7</span>         <span class="hljs-number">3.2</span>          <span class="hljs-number">1.3</span>         <span class="hljs-number">0.2</span>     setosa            <span class="hljs-number">3</span>
..           ...         ...          ...         ...     ......           ..
<span class="hljs-number">48</span>           <span class="hljs-number">4.6</span>         <span class="hljs-number">3.2</span>          <span class="hljs-number">1.4</span>         <span class="hljs-number">0.2</span>     setosa           <span class="hljs-number">48</span>
<span class="hljs-number">49</span>           <span class="hljs-number">5.3</span>         <span class="hljs-number">3.7</span>          <span class="hljs-number">1.5</span>         <span class="hljs-number">0.2</span>     setosa           <span class="hljs-number">49</span>
<span class="hljs-number">50</span>           <span class="hljs-number">5.0</span>         <span class="hljs-number">3.3</span>          <span class="hljs-number">1.4</span>         <span class="hljs-number">0.2</span>     setosa           <span class="hljs-number">50</span>
<span class="hljs-number">51</span>           <span class="hljs-number">7.0</span>         <span class="hljs-number">3.2</span>          <span class="hljs-number">4.7</span>         <span class="hljs-number">1.4</span> versicolor            <span class="hljs-number">1</span>
<span class="hljs-number">52</span>           <span class="hljs-number">6.4</span>         <span class="hljs-number">3.2</span>          <span class="hljs-number">4.5</span>         <span class="hljs-number">1.5</span> versicolor            <span class="hljs-number">2</span>
<span class="hljs-number">53</span>           <span class="hljs-number">6.9</span>         <span class="hljs-number">3.1</span>          <span class="hljs-number">4.9</span>         <span class="hljs-number">1.5</span> versicolor            <span class="hljs-number">3</span>
..           ...         ...          ...         ...     ......           ..
<span class="hljs-number">98</span>           <span class="hljs-number">6.2</span>         <span class="hljs-number">2.9</span>          <span class="hljs-number">4.3</span>         <span class="hljs-number">1.3</span> versicolor           <span class="hljs-number">48</span>
<span class="hljs-number">99</span>           <span class="hljs-number">5.1</span>         <span class="hljs-number">2.5</span>          <span class="hljs-number">3.0</span>         <span class="hljs-number">1.1</span> versicolor           <span class="hljs-number">49</span>
<span class="hljs-number">100</span>          <span class="hljs-number">5.7</span>         <span class="hljs-number">2.8</span>          <span class="hljs-number">4.1</span>         <span class="hljs-number">1.3</span> versicolor           <span class="hljs-number">50</span>
<span class="hljs-number">101</span>          <span class="hljs-number">6.3</span>         <span class="hljs-number">3.3</span>          <span class="hljs-number">6.0</span>         <span class="hljs-number">2.5</span>  virginica            <span class="hljs-number">1</span>
<span class="hljs-number">102</span>          <span class="hljs-number">5.8</span>         <span class="hljs-number">2.7</span>          <span class="hljs-number">5.1</span>         <span class="hljs-number">1.9</span>  virginica            <span class="hljs-number">2</span>
<span class="hljs-number">103</span>          <span class="hljs-number">7.1</span>         <span class="hljs-number">3.0</span>          <span class="hljs-number">5.9</span>         <span class="hljs-number">2.1</span>  virginica            <span class="hljs-number">3</span>
..           ...         ...          ...         ...     ......           ..
<span class="hljs-number">148</span>          <span class="hljs-number">6.5</span>         <span class="hljs-number">3.0</span>          <span class="hljs-number">5.2</span>         <span class="hljs-number">2.0</span>  virginica           <span class="hljs-number">48</span>
<span class="hljs-number">149</span>          <span class="hljs-number">6.2</span>         <span class="hljs-number">3.4</span>          <span class="hljs-number">5.4</span>         <span class="hljs-number">2.3</span>  virginica           <span class="hljs-number">49</span>
<span class="hljs-number">150</span>          <span class="hljs-number">5.9</span>         <span class="hljs-number">3.0</span>          <span class="hljs-number">5.1</span>         <span class="hljs-number">1.8</span>  virginica           <span class="hljs-number">50</span>
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 9</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Another <strong>base R solution</strong> would be to <code>split</code> the data frame per <code>cat</code>, after that using <code>lapply</code>: add a column with number <code>1:nrow(x)</code>. The last step is to have your final data frame back with <code>do.call</code>, that is:</p>
<pre class="lang-r s-code-block"><code class="hljs language-r">        df_split <span class="hljs-operator">&lt;-</span> split<span class="hljs-punctuation">(</span>df<span class="hljs-punctuation">,</span> df<span class="hljs-operator">$</span>cat<span class="hljs-punctuation">)</span>
        df_lapply <span class="hljs-operator">&lt;-</span> lapply<span class="hljs-punctuation">(</span>df_split<span class="hljs-punctuation">,</span> <span class="hljs-keyword">function</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
          x<span class="hljs-operator">$</span>num <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">seq_len</span><span class="hljs-punctuation">(</span>nrow<span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
          <span class="hljs-built_in">return</span><span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">)</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">)</span>
        df <span class="hljs-operator">&lt;-</span> do.call<span class="hljs-punctuation">(</span>rbind<span class="hljs-punctuation">,</span> df_lapply<span class="hljs-punctuation">)</span>
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-do-i-pass-data-between-activities-in-android-application-1657384739839">How do I pass data between Activities in Android application?</a><a href="/questions/getcontactsfromfirebase()-method-return-an-empty-list-1657388433928">getContactsFromFirebase() method return an empty list</a><a href="/questions/how-to-store-objects-in-html5-localstorage-1657387568907">How to store objects in HTML5 localStorage</a><a href="/questions/how-do-servlets-work-instantiation-sessions-shared-variables-and-multithreading-1657387540375">How do servlets work? Instantiation, sessions, shared variables and multithreading</a><a href="/questions/how-do-you-convert-a-byte-array-to-a-hexadecimal-string-and-vice-versa-1657388010428">How do you convert a byte array to a hexadecimal string, and vice versa?</a><a href="/questions/identifying-and-solving-javax.el.propertynotfoundexception:-target-unreachable-1657388164753">Identifying and solving javax.el.PropertyNotFoundException: Target Unreachable</a><a href="/questions/how-to-access-the-correct-this-inside-a-callback-1657384283261">How to access the correct `this` inside a callback</a><a href="/questions/what-is-the-difference-between-single-quoted-and-double-quoted-strings-in-php-1657384624345">What is the difference between single-quoted and double-quoted strings in PHP?</a><a href="/questions/methods-in-es6-objects:-using-arrow-functions-1657388249058">Methods in ES6 objects: using arrow functions</a><a href="/questions/is-there-a-difference-between-%22%22-and-%22is%22-1657387902231">Is there a difference between &quot;==&quot; and &quot;is&quot;?</a><a href="/questions/how-can-i-validate-an-email-address-in-javascript-1657385475959">How can I validate an email address in JavaScript?</a><a href="/questions/what-does-%22fatal-error:-unexpectedly-found-nil-while-unwrapping-an-optional-value%22-mean-1657384593944">What does &quot;Fatal error: Unexpectedly found nil while unwrapping an Optional value&quot; mean?</a><a href="/questions/how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934">How to use java.net.URLConnection to fire and handle HTTP requests</a><a href="/questions/why-does-date.parse-give-incorrect-results-1657384642821">Why does Date.parse give incorrect results?</a><a href="/questions/what-is-a-nullpointerexception-and-how-do-i-fix-it-1657384201768">What is a NullPointerException, and how do I fix it?</a><a href="/questions/how-do-i-expire-a-php-session-after-30-minutes-1657387990658">How do I expire a PHP session after 30 minutes?</a><a href="/questions/how-to-create-a-guid-uuid-1657387749530">How to create a GUID / UUID</a><a href="/questions/what-are-metaclasses-in-python-1657387811608">What are metaclasses in Python?</a><a href="/questions/what-is-the-rule-of-three-1657384390295">What is The Rule of Three?</a><a href="/questions/how-do-i-convert-an-existing-callback-api-to-promises-1657384694006">How do I convert an existing callback API to promises?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;Use \u0026lt;code\u0026gt;ave\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;ddply\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;dplyr\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;data.table\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;num \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; ave\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;val\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; FUN \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;seq_along\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;plyr\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nddply\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; .\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; mutate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;seq_along\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;val\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;dplyr\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; mutate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; row_number\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or (the most memory efficient, as it assigns by reference within \u0026lt;code\u0026gt;DT\u0026lt;/code\u0026gt;):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;data.table\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nDT \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; data.table\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\nDT\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;seq_len\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;.N\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; by \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\nDT\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:=\u0026lt;/span\u0026gt; rowid\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For making this \u0026lt;a href=\u0026quot;/questions/tagged/r-faq\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;r-faq\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;r-faq\u0026lt;/a\u0026gt; question more complete, a base R alternative with \u0026lt;code\u0026gt;sequence\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;rle\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;num \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; sequence\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;rle\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;lengths\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;which gives the intended result:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; df\n   cat        val num\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.05638315\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.25767250\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.30776611\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.46854928\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.55232243\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt; bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.17026205\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.37032054\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.48377074\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.54655860\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.81240262\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.28035384\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.39848790\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.62499648\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.76255108\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.88216552\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;If \u0026lt;code\u0026gt;df$cat\u0026lt;/code\u0026gt; is a factor variable, you need to wrap it in \u0026lt;code\u0026gt;as.character\u0026lt;/code\u0026gt; first:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;num \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; sequence\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;rle\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;as.character\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;lengths\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is a small improvement trick that allows sort \u0026apos;val\u0026apos; inside the groups:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 1. Data set\u0026lt;/span\u0026gt;\nset.seed\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndf \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; data.frame\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\n  cat \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;rep\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;aaa\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;rep\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ccc\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;rep\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bbb\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \n  val \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; runif\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;             \n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 2. \u0026apos;dplyr\u0026apos; approach\u0026lt;/span\u0026gt;\ndf \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; \n  arrange\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; val\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; \n  group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; \n  mutate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; row_number\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Another \u0026lt;code\u0026gt;dplyr\u0026lt;/code\u0026gt; possibility could be:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;df \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt;\n group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt;\n mutate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;num \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;n\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n   cat      val   num\n   \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;/span\u0026gt;fct\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;/span\u0026gt;dbl\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;/span\u0026gt;int\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; aaa   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0564\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; aaa   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.258\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; aaa   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.308\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; aaa   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.469\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt; aaa   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.552\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; bbb   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.170\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt; bbb   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.370\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt; bbb   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.484\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt; bbb   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.547\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt; bbb   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.812\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt; ccc   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.280\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt; ccc   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.398\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt; ccc   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.625\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt; ccc   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.763\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt; ccc   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.882\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I would like to add a \u0026lt;code\u0026gt;data.table\u0026lt;/code\u0026gt; variant using the \u0026lt;code\u0026gt;rank()\u0026lt;/code\u0026gt; function which provides the additional possibility to change the ordering and thus makes it a bit more flexible than the \u0026lt;code\u0026gt;seq_len()\u0026lt;/code\u0026gt; solution and is pretty similar to row_number functions in RDBMS.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Variant with ascending ordering\u0026lt;/span\u0026gt;\nlibrary\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;data.table\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndt \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; data.table\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; .\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt; val\n   \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; num \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; rank\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;val\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; by \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;order\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; num\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\n\n    cat        val num\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.05638315\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.25767250\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.30776611\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.46854928\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.55232243\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.17026205\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.37032054\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.48377074\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.54655860\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.81240262\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.28035384\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.39848790\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.62499648\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.76255108\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Variant with descending ordering\u0026lt;/span\u0026gt;\ndt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; .\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt; val\n   \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; num \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; rank\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;desc\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;val\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; by \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;order\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; num\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Edit on 2021-04-16 to make the switch between descending and ascending order more fail-safe\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is an option using a \u0026lt;code\u0026gt;for\u0026lt;/code\u0026gt; loop by groups rather by rows (like OP did)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; unique\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;num\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;cat \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;==\u0026lt;/span\u0026gt; i\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;seq_len\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sum\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;cat \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;==\u0026lt;/span\u0026gt; i\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Using the \u0026lt;code\u0026gt;rowid()\u0026lt;/code\u0026gt; function in \u0026lt;code\u0026gt;data.table\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; set.seed\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; df \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; data.frame\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;rep\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;aaa\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;rep\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bbb\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;rep\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ccc\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; val \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; runif\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; df \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;order\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;val\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;num \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; data.table\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;::\u0026lt;/span\u0026gt;rowid\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; df\n   cat        val num\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.05638315\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.25767250\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.30776611\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.46854928\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.55232243\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt; bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.17026205\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.37032054\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.48377074\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.54655860\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.81240262\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.28035384\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.39848790\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.62499648\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.76255108\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.88216552\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Very simple, tidy solutions.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Row number for entire data.frame\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;tidyverse\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\niris \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt;\n  mutate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;row_num \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;seq_along\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Sepal.Length\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt;\n  head\n\n    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species row_num\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.1\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.5\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.4\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;     setosa       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.9\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.0\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.4\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;     setosa       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.7\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.2\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.3\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;     setosa       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n..           ...         ...          ...         ...     ......     ...\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;148\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6.5\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.0\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.2\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.0\u0026lt;/span\u0026gt;  virginica     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;148\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;149\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6.2\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.4\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.4\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.3\u0026lt;/span\u0026gt;  virginica     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;149\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;150\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.9\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.0\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.1\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.8\u0026lt;/span\u0026gt;  virginica     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;150\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Row number by group in data.frame\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;iris \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; \n  group_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Species\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; \n  mutate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;num_in_group\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;seq_along\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Species\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; \n  as.data.frame\n\n\n    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species num_in_group\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.1\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.5\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.4\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;     setosa            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.9\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.0\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.4\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;     setosa            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.7\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.2\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.3\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;     setosa            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n..           ...         ...          ...         ...     ......           ..\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;48\u0026lt;/span\u0026gt;           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.6\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.2\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.4\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;     setosa           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;48\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;49\u0026lt;/span\u0026gt;           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.3\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.7\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.5\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;     setosa           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;49\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.0\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.3\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.4\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.2\u0026lt;/span\u0026gt;     setosa           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;51\u0026lt;/span\u0026gt;           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7.0\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.2\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.7\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.4\u0026lt;/span\u0026gt; versicolor            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;52\u0026lt;/span\u0026gt;           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6.4\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.2\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.5\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.5\u0026lt;/span\u0026gt; versicolor            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;53\u0026lt;/span\u0026gt;           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6.9\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.1\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.9\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.5\u0026lt;/span\u0026gt; versicolor            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n..           ...         ...          ...         ...     ......           ..\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;98\u0026lt;/span\u0026gt;           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6.2\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.9\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.3\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.3\u0026lt;/span\u0026gt; versicolor           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;48\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;99\u0026lt;/span\u0026gt;           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.1\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.5\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.0\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.1\u0026lt;/span\u0026gt; versicolor           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;49\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.7\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.8\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.1\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.3\u0026lt;/span\u0026gt; versicolor           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;101\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6.3\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.3\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6.0\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.5\u0026lt;/span\u0026gt;  virginica            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;102\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.8\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.7\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.1\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.9\u0026lt;/span\u0026gt;  virginica            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;103\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7.1\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.0\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.9\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.1\u0026lt;/span\u0026gt;  virginica            \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\n..           ...         ...          ...         ...     ......           ..\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;148\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6.5\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.0\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.2\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.0\u0026lt;/span\u0026gt;  virginica           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;48\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;149\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6.2\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.4\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.4\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2.3\u0026lt;/span\u0026gt;  virginica           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;49\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;150\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.9\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3.0\u0026lt;/span\u0026gt;          \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.1\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.8\u0026lt;/span\u0026gt;  virginica           \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Another \u0026lt;strong\u0026gt;base R solution\u0026lt;/strong\u0026gt; would be to \u0026lt;code\u0026gt;split\u0026lt;/code\u0026gt; the data frame per \u0026lt;code\u0026gt;cat\u0026lt;/code\u0026gt;, after that using \u0026lt;code\u0026gt;lapply\u0026lt;/code\u0026gt;: add a column with number \u0026lt;code\u0026gt;1:nrow(x)\u0026lt;/code\u0026gt;. The last step is to have your final data frame back with \u0026lt;code\u0026gt;do.call\u0026lt;/code\u0026gt;, that is:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;        df_split \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; split\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n        df_lapply \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; lapply\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df_split\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;x\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;\n          x\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;num \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;seq_len\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;nrow\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;x\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;x\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n        df \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; do.call\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;rbind\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; df_lapply\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":606,"title":"Numbering rows within groups in a data frame","content":"\n                \n\u0026lt;p\u0026gt;Working with a data frame similar to this:  \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;set.seed\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;  \ndf \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; data.frame\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cat \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;rep\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;aaa\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;rep\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bbb\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;rep\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ccc\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; val \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; runif\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;             \ndf \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;order\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;cat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;val\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;  \ndf  \n\n   cat        val  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.05638315\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.25767250\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.30776611\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.46854928\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.55232243\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.17026205\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.37032054\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.48377074\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.54655860\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt; bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.81240262\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.28035384\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.39848790\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.62499648\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.76255108\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.88216552\u0026lt;/span\u0026gt; \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I am trying to add a column with numbering within each group. Doing it this way obviously isn\u0026apos;t using the powers of R:  \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt; df\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;num \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; 1  \n \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;i \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;  \n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;i\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;cat\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;==\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;i\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;cat\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;{\u0026lt;/span\u0026gt;  \n     df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;i\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;num\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt;df\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;i\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;num\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \n     \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;  \n \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;  \n df  \n\n   cat        val num  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.05638315\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.25767250\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.30776611\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.46854928\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  aaa \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.55232243\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.17026205\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.37032054\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.48377074\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;  bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.54655860\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt; bbb \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.81240262\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.28035384\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.39848790\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.62499648\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.76255108\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;  \n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt; ccc \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.88216552\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;  \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;What would be a good way to do this?\u0026lt;/p\u0026gt;\n    ","slug":"numbering-rows-within-groups-in-a-data-frame-1657388556436","postType":"QUESTION","createdAt":"2022-07-09T17:42:36.000Z","updatedAt":"2022-07-09T17:42:36.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"How do I pass data between Activities in Android application?","slug":"how-do-i-pass-data-between-activities-in-android-application-1657384739839"},{"title":"getContactsFromFirebase() method return an empty list","slug":"getcontactsfromfirebase()-method-return-an-empty-list-1657388433928"},{"title":"How to store objects in HTML5 localStorage","slug":"how-to-store-objects-in-html5-localstorage-1657387568907"},{"title":"How do servlets work? Instantiation, sessions, shared variables and multithreading","slug":"how-do-servlets-work-instantiation-sessions-shared-variables-and-multithreading-1657387540375"},{"title":"How do you convert a byte array to a hexadecimal string, and vice versa?","slug":"how-do-you-convert-a-byte-array-to-a-hexadecimal-string-and-vice-versa-1657388010428"},{"title":"Identifying and solving javax.el.PropertyNotFoundException: Target Unreachable","slug":"identifying-and-solving-javax.el.propertynotfoundexception:-target-unreachable-1657388164753"},{"title":"How to access the correct `this` inside a callback","slug":"how-to-access-the-correct-this-inside-a-callback-1657384283261"},{"title":"What is the difference between single-quoted and double-quoted strings in PHP?","slug":"what-is-the-difference-between-single-quoted-and-double-quoted-strings-in-php-1657384624345"},{"title":"Methods in ES6 objects: using arrow functions","slug":"methods-in-es6-objects:-using-arrow-functions-1657388249058"},{"title":"Is there a difference between \"==\" and \"is\"?","slug":"is-there-a-difference-between-\"\"-and-\"is\"-1657387902231"},{"title":"How can I validate an email address in JavaScript?","slug":"how-can-i-validate-an-email-address-in-javascript-1657385475959"},{"title":"What does \"Fatal error: Unexpectedly found nil while unwrapping an Optional value\" mean?","slug":"what-does-\"fatal-error:-unexpectedly-found-nil-while-unwrapping-an-optional-value\"-mean-1657384593944"},{"title":"How to use java.net.URLConnection to fire and handle HTTP requests","slug":"how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934"},{"title":"Why does Date.parse give incorrect results?","slug":"why-does-date.parse-give-incorrect-results-1657384642821"},{"title":"What is a NullPointerException, and how do I fix it?","slug":"what-is-a-nullpointerexception-and-how-do-i-fix-it-1657384201768"},{"title":"How do I expire a PHP session after 30 minutes?","slug":"how-do-i-expire-a-php-session-after-30-minutes-1657387990658"},{"title":"How to create a GUID / UUID","slug":"how-to-create-a-guid-uuid-1657387749530"},{"title":"What are metaclasses in Python?","slug":"what-are-metaclasses-in-python-1657387811608"},{"title":"What is The Rule of Three?","slug":"what-is-the-rule-of-three-1657384390295"},{"title":"How do I convert an existing callback API to promises?","slug":"how-do-i-convert-an-existing-callback-api-to-promises-1657384694006"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"numbering-rows-within-groups-in-a-data-frame-1657388556436"},"buildId":"eGqQHYKGZKE-nXShFn8wX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>