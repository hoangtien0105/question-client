<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>How can you represent inheritance in a database? | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I&#x27;m thinking about how to represent a complex structure in a SQL Server database.

Consider an application that needs to store details of a family of objects, which share some attributes, but have many others not common. For example, a commercial insurance package may include liability, motor, property and indemnity cover within the same policy record.

It is trivial to implement this in C#, etc, as you can create a Policy with a collection of Sections, where Section is inherited as required for the various types of cover. However, relational databases don&#x27;t seem to allow this easily.

I can see that there are two main choices:


Create a Policy table, then a Sections table, with all the fields required, for all possible variations, most of which would be null.  
Create a Policy table and numerous Section tables, one for each kind of cover.


Both of these alternatives seem unsatisfactory, especially as it is necessary to write queries across all Sections, which would involve numerous joins, or numerous null-checks.

What is the best practice for this scenario?
    "/><meta property="og:title" content="How can you represent inheritance in a database? | Solutions Checker"/><meta property="og:description" content="I&#x27;m thinking about how to represent a complex structure in a SQL Server database.

Consider an application that needs to store details of a family of objects, which share some attributes, but have many others not common. For example, a commercial insurance package may include liability, motor, property and indemnity cover within the same policy record.

It is trivial to implement this in C#, etc, as you can create a Policy with a collection of Sections, where Section is inherited as required for the various types of cover. However, relational databases don&#x27;t seem to allow this easily.

I can see that there are two main choices:


Create a Policy table, then a Sections table, with all the fields required, for all possible variations, most of which would be null.  
Create a Policy table and numerous Section tables, one for each kind of cover.


Both of these alternatives seem unsatisfactory, especially as it is necessary to write queries across all Sections, which would involve numerous joins, or numerous null-checks.

What is the best practice for this scenario?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How can you represent inheritance in a database?","text":"I&apos;m thinking about how to represent a complex structure in a SQL Server database.\n\nConsider an application that needs to store details of a family of objects, which share some attributes, but have many others not common. For example, a commercial insurance package may include liability, motor, property and indemnity cover within the same policy record.\n\nIt is trivial to implement this in C#, etc, as you can create a Policy with a collection of Sections, where Section is inherited as required for the various types of cover. However, relational databases don&apos;t seem to allow this easily.\n\nI can see that there are two main choices:\n\n\nCreate a Policy table, then a Sections table, with all the fields required, for all possible variations, most of which would be null.  \nCreate a Policy table and numerous Section tables, one for each kind of cover.\n\n\nBoth of these alternatives seem unsatisfactory, especially as it is necessary to write queries across all Sections, which would involve numerous joins, or numerous null-checks.\n\nWhat is the best practice for this scenario?\n    ","answerCount":7,"upVoteCount":500,"suggestedAnswer":[{"text":"@Bill Karwin describes three inheritance models in his SQL Antipatterns book, when proposing solutions to the SQL Entity-Attribute-Value antipattern. This is a brief overview:\nSingle Table Inheritance (aka Table Per Hierarchy Inheritance):\nUsing a single table as in your first option is probably the simplest design. As you mentioned, many attributes that are subtype-specific will have to be given a NULL value on rows where these attributes do not apply. With this model, you would have one policies table, which would look something like this:\n+------+---------------------+----------+----------------+------------------+\n| id   | date_issued         | type     | vehicle_reg_no | property_address |\n+------+---------------------+----------+----------------+------------------+\n|    1 | 2010-08-20 12:00:00 | MOTOR    | 01-A-04004     | NULL             |\n|    2 | 2010-08-20 13:00:00 | MOTOR    | 02-B-01010     | NULL             |\n|    3 | 2010-08-20 14:00:00 | PROPERTY | NULL           | Oxford Street    |\n|    4 | 2010-08-20 15:00:00 | MOTOR    | 03-C-02020     | NULL             |\n+------+---------------------+----------+----------------+------------------+\n\n\\------ COMMON FIELDS -------/          \\----- SUBTYPE SPECIFIC FIELDS -----/\n\nKeeping the design simple is a plus, but the main problems with this approach are the following:\n\nWhen it comes to adding new subtypes, you would have to alter the table to accommodate the attributes that describe these new objects. This can quickly become problematic when you have many subtypes, or if you plan to add subtypes on a regular basis.\n\nThe database will not be able to enforce which attributes apply and which don&apos;t, since there is no metadata to define which attributes belong to which subtypes.\n\nYou also cannot enforce NOT NULL on attributes of a subtype that should be mandatory. You would have to handle this in your application, which in general is not ideal.\n\n\nConcrete Table Inheritance:\nAnother approach to tackle inheritance is to create a new table for each subtype, repeating all the common attributes in each table. For example:\n--// Table: policies_motor\n+------+---------------------+----------------+\n| id   | date_issued         | vehicle_reg_no |\n+------+---------------------+----------------+\n|    1 | 2010-08-20 12:00:00 | 01-A-04004     |\n|    2 | 2010-08-20 13:00:00 | 02-B-01010     |\n|    3 | 2010-08-20 15:00:00 | 03-C-02020     |\n+------+---------------------+----------------+\n                          \n--// Table: policies_property    \n+------+---------------------+------------------+\n| id   | date_issued         | property_address |\n+------+---------------------+------------------+\n|    1 | 2010-08-20 14:00:00 | Oxford Street    |   \n+------+---------------------+------------------+\n\nThis design will basically solve the problems identified for the single table method:\n\nMandatory attributes can now be enforced with NOT NULL.\n\nAdding a new subtype requires adding a new table instead of adding columns to an existing one.\n\nThere is also no risk that an inappropriate attribute is set for a particular subtype, such as the vehicle_reg_no field for a property policy.\n\nThere is no need for the type attribute as in the single table method. The type is now defined by the metadata: the table name.\n\n\nHowever this model also comes with a few disadvantages:\n\nThe common attributes are mixed with the subtype specific attributes, and there is no easy way to identify them. The database will not know either.\n\nWhen defining the tables, you would have to repeat the common attributes for each subtype table. That&apos;s definitely not DRY.\n\nSearching for all the policies regardless of the subtype becomes difficult, and would require a bunch of UNIONs.\n\n\nThis is how you would have to query all the policies regardless of the type:\nSELECT     date_issued, other_common_fields, &apos;MOTOR&apos; AS type\nFROM       policies_motor\nUNION ALL\nSELECT     date_issued, other_common_fields, &apos;PROPERTY&apos; AS type\nFROM       policies_property;\n\nNote how adding new subtypes would require the above query to be modified with an additional UNION ALL for each subtype. This can easily lead to bugs in your application if this operation is forgotten.\nClass Table Inheritance (aka Table Per Type Inheritance):\nThis is the solution that @David mentions in the other answer. You create a single table for your base class, which includes all the common attributes. Then you would create specific tables for each subtype, whose primary key also serves as a foreign key to the base table. Example:\nCREATE TABLE policies (\n   policy_id          int,\n   date_issued        datetime,\n\n   -- // other common attributes ...\n);\n\nCREATE TABLE policy_motor (\n    policy_id         int,\n    vehicle_reg_no    varchar(20),\n\n   -- // other attributes specific to motor insurance ...\n\n   FOREIGN KEY (policy_id) REFERENCES policies (policy_id)\n);\n\nCREATE TABLE policy_property (\n    policy_id         int,\n    property_address  varchar(20),\n\n   -- // other attributes specific to property insurance ...\n\n   FOREIGN KEY (policy_id) REFERENCES policies (policy_id)\n);\n\nThis solution solves the problems identified in the other two designs:\n\nMandatory attributes can be enforced with NOT NULL.\n\nAdding a new subtype requires adding a new table instead of adding columns to an existing one.\n\nNo risk that an inappropriate attribute is set for a particular subtype.\n\nNo need for the type attribute.\n\nNow the common attributes are not mixed with the subtype specific attributes anymore.\n\nWe can stay DRY, finally. There is no need to repeat the common attributes for each subtype table when creating the tables.\n\nManaging an auto incrementing id for the policies becomes easier, because this can be handled by the base table, instead of each subtype table generating them independently.\n\nSearching for all the policies regardless of the subtype now becomes very easy: No UNIONs needed - just a SELECT * FROM policies.\n\n\nI consider the class table approach as the most suitable in most situations.\n\nThe names of these three models come from Martin Fowler&apos;s book Patterns of Enterprise Application Architecture.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"The 3rd option is to create a &quot;Policy&quot; table, then a &quot;SectionsMain&quot; table that stores all of the fields that are in common across the types of sections.  Then create other tables for each type of section that only contain the fields that are not in common.\n\nDeciding which is best depends mostly on how many fields you have and how you want to write your SQL.  They would all work.  If you have just a few fields then I would probably go with #1.  With &quot;lots&quot; of fields I would lean towards #2 or #3.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"With the information provided, I&apos;d model the database to have the following:\n\nPOLICIES\n\n\nPOLICY_ID (primary key)\n\n\nLIABILITIES\n\n\nLIABILITY_ID (primary key)\nPOLICY_ID (foreign key)\n\n\nPROPERTIES\n\n\nPROPERTY_ID (primary key)\nPOLICY_ID (foreign key)\n\n\n...and so on, because I&apos;d expect there to be different attributes associated with each section of the policy.  Otherwise, there could be a single SECTIONS table and in addition to the policy_id, there&apos;d be a section_type_code...\n\nEither way, this would allow you to support optional sections per policy...\n\nI don&apos;t understand what you find unsatisfactory about this approach - this is how you store data while maintaining referential integrity and not duplicating data.  The term is &quot;normalized&quot;...\n\nBecause SQL is SET based, it&apos;s rather alien to procedural/OO programming concepts &amp; requires code to transition from one realm to the other.  ORMs are often considered, but they don&apos;t work well in high volume, complex systems.\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"In addition at the Daniel Vassallo solution, if you use SQL Server 2016+, there is another solution that I used in some cases without considerable lost of performances.\n\nYou can create just a table with only the common field and add a single column with the JSON string that contains all the subtype specific fields.\n\nI have tested this design for manage inheritance and I am very happy for the flexibility that I can use in the relative application.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"The another way to do it, is using the INHERITS component. For example:\n\nCREATE TABLE person (\n    id int ,\n    name varchar(20),\n    CONSTRAINT pessoa_pkey PRIMARY KEY (id)\n);\n\nCREATE TABLE natural_person (\n    social_security_number varchar(11),\n    CONSTRAINT pessoaf_pkey PRIMARY KEY (id)\n) INHERITS (person);\n\n\nCREATE TABLE juridical_person (\n    tin_number varchar(14),\n    CONSTRAINT pessoaj_pkey PRIMARY KEY (id)\n) INHERITS (person);\n\n\nThus it&apos;s possible to define a inheritance between tables.\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"I lean towards method #1 (a unified Section table), for the sake of efficiently retrieving entire policies with all their sections (which I assume your system will be doing a lot).\n\nFurther, I don&apos;t know what version of SQL Server you&apos;re using, but in 2008+ Sparse Columns help optimize performance in situations where many of the values in a column will be NULL. \n\nUltimately, you&apos;ll have to decide just how &quot;similar&quot; the policy sections are. Unless they differ substantially, I think a more-normalized solution might be more trouble than it&apos;s worth... but only you can make that call. :)\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"Alternatively, consider using a document databases (such as MongoDB) which natively support rich data structures and nesting.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-b06815e21c943e0d.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-79a1437acf654019.js" defer=""></script><script src="/_next/static/Zo3C7AOWQzKM9qqyzx2hf/_buildManifest.js" defer=""></script><script src="/_next/static/Zo3C7AOWQzKM9qqyzx2hf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-can-you-represent-inheritance-in-a-database-1657388076553#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-can-you-represent-inheritance-in-a-database-1657388076553"><h1>How can you represent inheritance in a database?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/class-table-inheritance">class-table-inheritance</a></div></div><div class="question-content mt-5">
                
<p>I'm thinking about how to represent a complex structure in a SQL Server database.</p>

<p>Consider an application that needs to store details of a family of objects, which share some attributes, but have many others not common. For example, a commercial insurance package may include liability, motor, property and indemnity cover within the same policy record.</p>

<p>It is trivial to implement this in C#, etc, as you can create a Policy with a collection of Sections, where Section is inherited as required for the various types of cover. However, relational databases don't seem to allow this easily.</p>

<p>I can see that there are two main choices:</p>

<ol>
<li><p>Create a Policy table, then a Sections table, with all the fields required, for all possible variations, most of which would be null.  </p></li>
<li><p>Create a Policy table and numerous Section tables, one for each kind of cover.</p></li>
</ol>

<p>Both of these alternatives seem unsatisfactory, especially as it is necessary to write queries across all Sections, which would involve numerous joins, or numerous null-checks.</p>

<p>What is the best practice for this scenario?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/class-table-inheritance">class-table-inheritance</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="https://stackoverflow.com/users/20860/bill-karwin">@Bill Karwin</a> describes three inheritance models in his <a href="http://pragprog.com/titles/bksqla/sql-antipatterns" rel="noreferrer">SQL Antipatterns</a> book, when proposing solutions to the SQL <a href="http://en.wikipedia.org/wiki/Entity-attribute-value_model" rel="noreferrer">Entity-Attribute-Value</a> antipattern. This is a brief overview:</p>
<h2>Single Table Inheritance (aka Table Per Hierarchy Inheritance):</h2>
<p>Using a single table as in your first option is probably the simplest design. As you mentioned, many attributes that are subtype-specific will have to be given a <code>NULL</code> value on rows where these attributes do not apply. With this model, you would have one policies table, which would look something like this:</p>
<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+----------+----------------+------------------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> date_issued         <span class="hljs-operator">|</span> type     <span class="hljs-operator">|</span> vehicle_reg_no <span class="hljs-operator">|</span> property_address <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+----------+----------------+------------------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">2010</span><span class="hljs-number">-08</span><span class="hljs-number">-20</span> <span class="hljs-number">12</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> MOTOR    <span class="hljs-operator">|</span> <span class="hljs-number">01</span><span class="hljs-operator">-</span>A<span class="hljs-number">-04004</span>     <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>             <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">2010</span><span class="hljs-number">-08</span><span class="hljs-number">-20</span> <span class="hljs-number">13</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> MOTOR    <span class="hljs-operator">|</span> <span class="hljs-number">02</span><span class="hljs-operator">-</span>B<span class="hljs-number">-01010</span>     <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>             <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span> <span class="hljs-number">2010</span><span class="hljs-number">-08</span><span class="hljs-number">-20</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> PROPERTY <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>           <span class="hljs-operator">|</span> Oxford Street    <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">4</span> <span class="hljs-operator">|</span> <span class="hljs-number">2010</span><span class="hljs-number">-08</span><span class="hljs-number">-20</span> <span class="hljs-number">15</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> MOTOR    <span class="hljs-operator">|</span> <span class="hljs-number">03</span><span class="hljs-operator">-</span>C<span class="hljs-number">-02020</span>     <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>             <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+----------+----------------+------------------+</span>

\<span class="hljs-comment">------ COMMON FIELDS -------/          \----- SUBTYPE SPECIFIC FIELDS -----/</span>
</code></pre>
<p>Keeping the design simple is a plus, but the main problems with this approach are the following:</p>
<ul>
<li><p>When it comes to adding new subtypes, you would have to alter the table to accommodate the attributes that describe these new objects. This can quickly become problematic when you have many subtypes, or if you plan to add subtypes on a regular basis.</p>
</li>
<li><p>The database will not be able to enforce which attributes apply and which don't, since there is no metadata to define which attributes belong to which subtypes.</p>
</li>
<li><p>You also cannot enforce <code>NOT NULL</code> on attributes of a subtype that should be mandatory. You would have to handle this in your application, which in general is not ideal.</p>
</li>
</ul>
<h2>Concrete Table Inheritance:</h2>
<p>Another approach to tackle inheritance is to create a new table for each subtype, repeating all the common attributes in each table. For example:</p>
<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-comment">--// Table: policies_motor</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+----------------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> date_issued         <span class="hljs-operator">|</span> vehicle_reg_no <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+----------------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">2010</span><span class="hljs-number">-08</span><span class="hljs-number">-20</span> <span class="hljs-number">12</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> <span class="hljs-number">01</span><span class="hljs-operator">-</span>A<span class="hljs-number">-04004</span>     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span> <span class="hljs-number">2010</span><span class="hljs-number">-08</span><span class="hljs-number">-20</span> <span class="hljs-number">13</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> <span class="hljs-number">02</span><span class="hljs-operator">-</span>B<span class="hljs-number">-01010</span>     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span> <span class="hljs-number">2010</span><span class="hljs-number">-08</span><span class="hljs-number">-20</span> <span class="hljs-number">15</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> <span class="hljs-number">03</span><span class="hljs-operator">-</span>C<span class="hljs-number">-02020</span>     <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+----------------+</span>
                          
<span class="hljs-comment">--// Table: policies_property    </span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------------------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> date_issued         <span class="hljs-operator">|</span> property_address <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------------------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> <span class="hljs-number">2010</span><span class="hljs-number">-08</span><span class="hljs-number">-20</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-operator">|</span> Oxford Street    <span class="hljs-operator">|</span>   
<span class="hljs-operator">+</span><span class="hljs-comment">------+---------------------+------------------+</span>
</code></pre>
<p>This design will basically solve the problems identified for the single table method:</p>
<ul>
<li><p>Mandatory attributes can now be enforced with <code>NOT NULL</code>.</p>
</li>
<li><p>Adding a new subtype requires adding a new table instead of adding columns to an existing one.</p>
</li>
<li><p>There is also no risk that an inappropriate attribute is set for a particular subtype, such as the <code>vehicle_reg_no</code> field for a property policy.</p>
</li>
<li><p>There is no need for the <code>type</code> attribute as in the single table method. The type is now defined by the metadata: the table name.</p>
</li>
</ul>
<p>However this model also comes with a few disadvantages:</p>
<ul>
<li><p>The common attributes are mixed with the subtype specific attributes, and there is no easy way to identify them. The database will not know either.</p>
</li>
<li><p>When defining the tables, you would have to repeat the common attributes for each subtype table. That's definitely not <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noreferrer">DRY</a>.</p>
</li>
<li><p>Searching for all the policies regardless of the subtype becomes difficult, and would require a bunch of <code>UNION</code>s.</p>
</li>
</ul>
<p>This is how you would have to query all the policies regardless of the type:</p>
<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span>     date_issued, other_common_fields, <span class="hljs-string">'MOTOR'</span> <span class="hljs-keyword">AS</span> type
<span class="hljs-keyword">FROM</span>       policies_motor
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span>     date_issued, other_common_fields, <span class="hljs-string">'PROPERTY'</span> <span class="hljs-keyword">AS</span> type
<span class="hljs-keyword">FROM</span>       policies_property;
</code></pre>
<p>Note how adding new subtypes would require the above query to be modified with an additional <code>UNION ALL</code> for each subtype. This can easily lead to bugs in your application if this operation is forgotten.</p>
<h2>Class Table Inheritance (aka Table Per Type Inheritance):</h2>
<p>This is the solution that <a href="https://stackoverflow.com/questions/3579079/how-can-you-represent-inheritance-in-a-database/3579139#3579139">@David mentions in the other answer</a>. You create a single table for your base class, which includes all the common attributes. Then you would create specific tables for each subtype, whose primary key also serves as a <a href="http://en.wikipedia.org/wiki/Foreign_key" rel="noreferrer">foreign key</a> to the base table. Example:</p>
<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> policies (
   policy_id          <span class="hljs-type">int</span>,
   date_issued        datetime,

   <span class="hljs-comment">-- // other common attributes ...</span>
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> policy_motor (
    policy_id         <span class="hljs-type">int</span>,
    vehicle_reg_no    <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>),

   <span class="hljs-comment">-- // other attributes specific to motor insurance ...</span>

   <span class="hljs-keyword">FOREIGN</span> KEY (policy_id) <span class="hljs-keyword">REFERENCES</span> policies (policy_id)
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> policy_property (
    policy_id         <span class="hljs-type">int</span>,
    property_address  <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>),

   <span class="hljs-comment">-- // other attributes specific to property insurance ...</span>

   <span class="hljs-keyword">FOREIGN</span> KEY (policy_id) <span class="hljs-keyword">REFERENCES</span> policies (policy_id)
);
</code></pre>
<p>This solution solves the problems identified in the other two designs:</p>
<ul>
<li><p>Mandatory attributes can be enforced with <code>NOT NULL</code>.</p>
</li>
<li><p>Adding a new subtype requires adding a new table instead of adding columns to an existing one.</p>
</li>
<li><p>No risk that an inappropriate attribute is set for a particular subtype.</p>
</li>
<li><p>No need for the <code>type</code> attribute.</p>
</li>
<li><p>Now the common attributes are not mixed with the subtype specific attributes anymore.</p>
</li>
<li><p>We can stay DRY, finally. There is no need to repeat the common attributes for each subtype table when creating the tables.</p>
</li>
<li><p>Managing an auto incrementing <code>id</code> for the policies becomes easier, because this can be handled by the base table, instead of each subtype table generating them independently.</p>
</li>
<li><p>Searching for all the policies regardless of the subtype now becomes very easy: No <code>UNION</code>s needed - just a <code>SELECT * FROM policies</code>.</p>
</li>
</ul>
<p>I consider the class table approach as the most suitable in most situations.</p>
<hr>
<p>The names of these three models come from <a href="http://martinfowler.com/" rel="noreferrer">Martin Fowler's</a> book <a href="https://rads.stackoverflow.com/amzn/click/com/0321127420" rel="noreferrer">Patterns of Enterprise Application Architecture</a>.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/class-table-inheritance">class-table-inheritance</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The 3rd option is to create a "Policy" table, then a "SectionsMain" table that stores all of the fields that are in common across the types of sections.  Then create other tables for each type of section that only contain the fields that are not in common.</p>

<p>Deciding which is best depends mostly on how many fields you have and how you want to write your SQL.  They would all work.  If you have just a few fields then I would probably go with #1.  With "lots" of fields I would lean towards #2 or #3.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/class-table-inheritance">class-table-inheritance</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>With the information provided, I'd model the database to have the following:</p>

<h2>POLICIES</h2>

<ul>
<li>POLICY_ID (primary key)</li>
</ul>

<h2>LIABILITIES</h2>

<ul>
<li>LIABILITY_ID (primary key)</li>
<li>POLICY_ID (foreign key)</li>
</ul>

<h2>PROPERTIES</h2>

<ul>
<li>PROPERTY_ID (primary key)</li>
<li>POLICY_ID (foreign key)</li>
</ul>

<p>...and so on, because I'd expect there to be different attributes associated with each section of the policy.  Otherwise, there could be a single <code>SECTIONS</code> table and in addition to the <code>policy_id</code>, there'd be a <code>section_type_code</code>...</p>

<p>Either way, this would allow you to support optional sections per policy...</p>

<p>I don't understand what you find unsatisfactory about this approach - this is how you store data while maintaining referential integrity and not duplicating data.  The term is "normalized"...</p>

<p>Because SQL is SET based, it's rather alien to procedural/OO programming concepts &amp; requires code to transition from one realm to the other.  ORMs are often considered, but they don't work well in high volume, complex systems.</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/class-table-inheritance">class-table-inheritance</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In addition at the Daniel Vassallo solution, if you use SQL Server 2016+, there is another solution that I used in some cases without considerable lost of performances.</p>

<p>You can create just a table with only the common field and add a single column with the <a href="https://docs.microsoft.com/en-us/sql/relational-databases/json/json-data-sql-server" rel="noreferrer">JSON</a> string that contains all the subtype specific fields.</p>

<p>I have tested this design for manage inheritance and I am very happy for the flexibility that I can use in the relative application.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/class-table-inheritance">class-table-inheritance</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The another way to do it, is using the <code>INHERITS</code> component. For example:</p>

<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> person (
    id <span class="hljs-type">int</span> ,
    name <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>),
    <span class="hljs-keyword">CONSTRAINT</span> pessoa_pkey <span class="hljs-keyword">PRIMARY</span> KEY (id)
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> natural_person (
    social_security_number <span class="hljs-type">varchar</span>(<span class="hljs-number">11</span>),
    <span class="hljs-keyword">CONSTRAINT</span> pessoaf_pkey <span class="hljs-keyword">PRIMARY</span> KEY (id)
) INHERITS (person);


<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> juridical_person (
    tin_number <span class="hljs-type">varchar</span>(<span class="hljs-number">14</span>),
    <span class="hljs-keyword">CONSTRAINT</span> pessoaj_pkey <span class="hljs-keyword">PRIMARY</span> KEY (id)
) INHERITS (person);
</code></pre>

<p>Thus it's possible to define a inheritance between tables.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/class-table-inheritance">class-table-inheritance</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I lean towards method #1 (a unified Section table), for the sake of efficiently retrieving entire policies with all their sections (which I assume your system will be doing a lot).</p>

<p>Further, I don't know what version of SQL Server you're using, but in 2008+ <a href="http://msdn.microsoft.com/en-us/library/cc280604(v=SQL.100).aspx" rel="nofollow noreferrer">Sparse Columns</a> help optimize performance in situations where many of the values in a column will be NULL. </p>

<p>Ultimately, you'll have to decide just how "similar" the policy sections are. Unless they differ substantially, I think a more-normalized solution might be more trouble than it's worth... but only you can make that call. :)</p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/class-table-inheritance">class-table-inheritance</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Alternatively, consider using a document databases (such as MongoDB) which natively support rich data structures and nesting.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-can-i-pivot-a-dataframe-1657384433802">How can I pivot a dataframe?</a><a href="/questions/captured-variable-in-a-loop-in-c-1657387696779">Captured variable in a loop in C#</a><a href="/questions/retrieve-only-the-queried-element-in-an-object-array-in-mongodb-collection-1657384890457">Retrieve only the queried element in an object array in MongoDB collection</a><a href="/questions/mysql-pivot-row-into-dynamic-number-of-columns-1657387981930">MySQL pivot row into dynamic number of columns</a><a href="/questions/input()-error-nameerror:-name-&#x27;...&#x27;-is-not-defined-1657388497243">input() error - NameError: name &#x27;...&#x27; is not defined</a><a href="/questions/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy-1657388445063">What is the difference between a deep copy and a shallow copy?</a><a href="/questions/can-i-mix-mysql-apis-in-php-1657384597444">Can I mix MySQL APIs in PHP?</a><a href="/questions/how-do-i-properly-compare-strings-in-c-1657387467202">How do I properly compare strings in C?</a><a href="/questions/copy-array-by-value-1657387649531">Copy array by value</a><a href="/questions/why-does-my-javascript-code-receive-a-%22no-&#x27;access-control-allow-origin&#x27;-header-is-present-on-the-requested-resource%22-error-while-postman-does-not-1657384636363">Why does my JavaScript code receive a &quot;No &#x27;Access-Control-Allow-Origin&#x27; header is present on the requested resource&quot; error, while Postman does not?</a><a href="/questions/how-do-i-redirect-to-another-webpage-1657384869767">How do I redirect to another webpage?</a><a href="/questions/how-to-randomize-(shuffle)-a-javascript-array-1657384790171">How to randomize (shuffle) a JavaScript array?</a><a href="/questions/swing-gui-listeners-without-awt-1657387522426">Swing GUI listeners without AWT</a><a href="/questions/when-should-i-wrap-quotes-around-a-shell-variable-1657384659265">When should I wrap quotes around a shell variable?</a><a href="/questions/can-php-pdo-statements-accept-the-table-or-column-name-as-parameter-1657387478588">Can PHP PDO Statements accept the table or column name as parameter?</a><a href="/questions/order-bars-in-ggplot2-bar-graph-1657388099080">Order Bars in ggplot2 bar graph</a><a href="/questions/how-to-affect-other-elements-when-one-element-is-hovered-1657387832363">How to affect other elements when one element is hovered</a><a href="/questions/how-to-extract-and-access-data-from-json-with-php-1657384483259">How to extract and access data from JSON with PHP?</a><a href="/questions/default-constructor-with-empty-brackets-1657388246967">Default constructor with empty brackets</a><a href="/questions/how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658">How can I upload files to a server using JSP/Servlet?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/users/20860/bill-karwin\u0026quot;\u0026gt;@Bill Karwin\u0026lt;/a\u0026gt; describes three inheritance models in his \u0026lt;a href=\u0026quot;http://pragprog.com/titles/bksqla/sql-antipatterns\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;SQL Antipatterns\u0026lt;/a\u0026gt; book, when proposing solutions to the SQL \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Entity-attribute-value_model\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Entity-Attribute-Value\u0026lt;/a\u0026gt; antipattern. This is a brief overview:\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Single Table Inheritance (aka Table Per Hierarchy Inheritance):\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Using a single table as in your first option is probably the simplest design. As you mentioned, many attributes that are subtype-specific will have to be given a \u0026lt;code\u0026gt;NULL\u0026lt;/code\u0026gt; value on rows where these attributes do not apply. With this model, you would have one policies table, which would look something like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;------+---------------------+----------+----------------+------------------+\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; id   \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; date_issued         \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; type     \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; vehicle_reg_no \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; property_address \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;------+---------------------+----------+----------------+------------------+\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2010\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-08\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-20\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; MOTOR    \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;A\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-04004\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;             \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2010\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-08\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-20\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; MOTOR    \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;02\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;B\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-01010\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;             \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2010\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-08\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-20\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; PROPERTY \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;           \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; Oxford Street    \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2010\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-08\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-20\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; MOTOR    \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;03\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;C\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-02020\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;             \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;------+---------------------+----------+----------------+------------------+\u0026lt;/span\u0026gt;\n\n\\\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;------ COMMON FIELDS -------/          \\----- SUBTYPE SPECIFIC FIELDS -----/\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Keeping the design simple is a plus, but the main problems with this approach are the following:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;When it comes to adding new subtypes, you would have to alter the table to accommodate the attributes that describe these new objects. This can quickly become problematic when you have many subtypes, or if you plan to add subtypes on a regular basis.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The database will not be able to enforce which attributes apply and which don\u0026apos;t, since there is no metadata to define which attributes belong to which subtypes.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;You also cannot enforce \u0026lt;code\u0026gt;NOT NULL\u0026lt;/code\u0026gt; on attributes of a subtype that should be mandatory. You would have to handle this in your application, which in general is not ideal.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;h2\u0026gt;Concrete Table Inheritance:\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Another approach to tackle inheritance is to create a new table for each subtype, repeating all the common attributes in each table. For example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;--// Table: policies_motor\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;------+---------------------+----------------+\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; id   \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; date_issued         \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; vehicle_reg_no \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;------+---------------------+----------------+\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2010\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-08\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-20\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;01\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;A\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-04004\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2010\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-08\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-20\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;02\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;B\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-01010\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2010\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-08\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-20\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;03\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;C\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-02020\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;------+---------------------+----------------+\u0026lt;/span\u0026gt;\n                          \n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;--// Table: policies_property    \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;------+---------------------+------------------+\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; id   \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; date_issued         \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; property_address \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;------+---------------------+------------------+\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2010\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-08\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-20\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; Oxford Street    \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;   \n\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;+\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;------+---------------------+------------------+\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This design will basically solve the problems identified for the single table method:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Mandatory attributes can now be enforced with \u0026lt;code\u0026gt;NOT NULL\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Adding a new subtype requires adding a new table instead of adding columns to an existing one.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;There is also no risk that an inappropriate attribute is set for a particular subtype, such as the \u0026lt;code\u0026gt;vehicle_reg_no\u0026lt;/code\u0026gt; field for a property policy.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;There is no need for the \u0026lt;code\u0026gt;type\u0026lt;/code\u0026gt; attribute as in the single table method. The type is now defined by the metadata: the table name.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;However this model also comes with a few disadvantages:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;The common attributes are mixed with the subtype specific attributes, and there is no easy way to identify them. The database will not know either.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;When defining the tables, you would have to repeat the common attributes for each subtype table. That\u0026apos;s definitely not \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Don%27t_repeat_yourself\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;DRY\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Searching for all the policies regardless of the subtype becomes difficult, and would require a bunch of \u0026lt;code\u0026gt;UNION\u0026lt;/code\u0026gt;s.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;This is how you would have to query all the policies regardless of the type:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt;     date_issued, other_common_fields, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;MOTOR\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; type\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt;       policies_motor\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;UNION\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ALL\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;SELECT\u0026lt;/span\u0026gt;     date_issued, other_common_fields, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;PROPERTY\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;AS\u0026lt;/span\u0026gt; type\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FROM\u0026lt;/span\u0026gt;       policies_property;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Note how adding new subtypes would require the above query to be modified with an additional \u0026lt;code\u0026gt;UNION ALL\u0026lt;/code\u0026gt; for each subtype. This can easily lead to bugs in your application if this operation is forgotten.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Class Table Inheritance (aka Table Per Type Inheritance):\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;This is the solution that \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/3579079/how-can-you-represent-inheritance-in-a-database/3579139#3579139\u0026quot;\u0026gt;@David mentions in the other answer\u0026lt;/a\u0026gt;. You create a single table for your base class, which includes all the common attributes. Then you would create specific tables for each subtype, whose primary key also serves as a \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Foreign_key\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;foreign key\u0026lt;/a\u0026gt; to the base table. Example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;CREATE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;TABLE\u0026lt;/span\u0026gt; policies (\n   policy_id          \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;,\n   date_issued        datetime,\n\n   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;-- // other common attributes ...\u0026lt;/span\u0026gt;\n);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;CREATE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;TABLE\u0026lt;/span\u0026gt; policy_motor (\n    policy_id         \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;,\n    vehicle_reg_no    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;varchar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;),\n\n   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;-- // other attributes specific to motor insurance ...\u0026lt;/span\u0026gt;\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FOREIGN\u0026lt;/span\u0026gt; KEY (policy_id) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;REFERENCES\u0026lt;/span\u0026gt; policies (policy_id)\n);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;CREATE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;TABLE\u0026lt;/span\u0026gt; policy_property (\n    policy_id         \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;,\n    property_address  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;varchar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;),\n\n   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;-- // other attributes specific to property insurance ...\u0026lt;/span\u0026gt;\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;FOREIGN\u0026lt;/span\u0026gt; KEY (policy_id) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;REFERENCES\u0026lt;/span\u0026gt; policies (policy_id)\n);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This solution solves the problems identified in the other two designs:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Mandatory attributes can be enforced with \u0026lt;code\u0026gt;NOT NULL\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Adding a new subtype requires adding a new table instead of adding columns to an existing one.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;No risk that an inappropriate attribute is set for a particular subtype.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;No need for the \u0026lt;code\u0026gt;type\u0026lt;/code\u0026gt; attribute.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Now the common attributes are not mixed with the subtype specific attributes anymore.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;We can stay DRY, finally. There is no need to repeat the common attributes for each subtype table when creating the tables.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Managing an auto incrementing \u0026lt;code\u0026gt;id\u0026lt;/code\u0026gt; for the policies becomes easier, because this can be handled by the base table, instead of each subtype table generating them independently.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Searching for all the policies regardless of the subtype now becomes very easy: No \u0026lt;code\u0026gt;UNION\u0026lt;/code\u0026gt;s needed - just a \u0026lt;code\u0026gt;SELECT * FROM policies\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;I consider the class table approach as the most suitable in most situations.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;The names of these three models come from \u0026lt;a href=\u0026quot;http://martinfowler.com/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Martin Fowler\u0026apos;s\u0026lt;/a\u0026gt; book \u0026lt;a href=\u0026quot;https://rads.stackoverflow.com/amzn/click/com/0321127420\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Patterns of Enterprise Application Architecture\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The 3rd option is to create a \u0026quot;Policy\u0026quot; table, then a \u0026quot;SectionsMain\u0026quot; table that stores all of the fields that are in common across the types of sections.  Then create other tables for each type of section that only contain the fields that are not in common.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Deciding which is best depends mostly on how many fields you have and how you want to write your SQL.  They would all work.  If you have just a few fields then I would probably go with #1.  With \u0026quot;lots\u0026quot; of fields I would lean towards #2 or #3.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;With the information provided, I\u0026apos;d model the database to have the following:\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;POLICIES\u0026lt;/h2\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;POLICY_ID (primary key)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h2\u0026gt;LIABILITIES\u0026lt;/h2\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;LIABILITY_ID (primary key)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;POLICY_ID (foreign key)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;h2\u0026gt;PROPERTIES\u0026lt;/h2\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;PROPERTY_ID (primary key)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;POLICY_ID (foreign key)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;...and so on, because I\u0026apos;d expect there to be different attributes associated with each section of the policy.  Otherwise, there could be a single \u0026lt;code\u0026gt;SECTIONS\u0026lt;/code\u0026gt; table and in addition to the \u0026lt;code\u0026gt;policy_id\u0026lt;/code\u0026gt;, there\u0026apos;d be a \u0026lt;code\u0026gt;section_type_code\u0026lt;/code\u0026gt;...\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Either way, this would allow you to support optional sections per policy...\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I don\u0026apos;t understand what you find unsatisfactory about this approach - this is how you store data while maintaining referential integrity and not duplicating data.  The term is \u0026quot;normalized\u0026quot;...\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Because SQL is SET based, it\u0026apos;s rather alien to procedural/OO programming concepts \u0026amp;amp; requires code to transition from one realm to the other.  ORMs are often considered, but they don\u0026apos;t work well in high volume, complex systems.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In addition at the Daniel Vassallo solution, if you use SQL Server 2016+, there is another solution that I used in some cases without considerable lost of performances.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can create just a table with only the common field and add a single column with the \u0026lt;a href=\u0026quot;https://docs.microsoft.com/en-us/sql/relational-databases/json/json-data-sql-server\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;JSON\u0026lt;/a\u0026gt; string that contains all the subtype specific fields.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I have tested this design for manage inheritance and I am very happy for the flexibility that I can use in the relative application.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The another way to do it, is using the \u0026lt;code\u0026gt;INHERITS\u0026lt;/code\u0026gt; component. For example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;CREATE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;TABLE\u0026lt;/span\u0026gt; person (\n    id \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; ,\n    name \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;varchar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;),\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;CONSTRAINT\u0026lt;/span\u0026gt; pessoa_pkey \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;PRIMARY\u0026lt;/span\u0026gt; KEY (id)\n);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;CREATE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;TABLE\u0026lt;/span\u0026gt; natural_person (\n    social_security_number \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;varchar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;),\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;CONSTRAINT\u0026lt;/span\u0026gt; pessoaf_pkey \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;PRIMARY\u0026lt;/span\u0026gt; KEY (id)\n) INHERITS (person);\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;CREATE\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;TABLE\u0026lt;/span\u0026gt; juridical_person (\n    tin_number \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;varchar\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;),\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;CONSTRAINT\u0026lt;/span\u0026gt; pessoaj_pkey \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;PRIMARY\u0026lt;/span\u0026gt; KEY (id)\n) INHERITS (person);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Thus it\u0026apos;s possible to define a inheritance between tables.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I lean towards method #1 (a unified Section table), for the sake of efficiently retrieving entire policies with all their sections (which I assume your system will be doing a lot).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Further, I don\u0026apos;t know what version of SQL Server you\u0026apos;re using, but in 2008+ \u0026lt;a href=\u0026quot;http://msdn.microsoft.com/en-us/library/cc280604(v=SQL.100).aspx\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Sparse Columns\u0026lt;/a\u0026gt; help optimize performance in situations where many of the values in a column will be NULL. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Ultimately, you\u0026apos;ll have to decide just how \u0026quot;similar\u0026quot; the policy sections are. Unless they differ substantially, I think a more-normalized solution might be more trouble than it\u0026apos;s worth... but only you can make that call. :)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Alternatively, consider using a document databases (such as MongoDB) which natively support rich data structures and nesting.\u0026lt;/p\u0026gt;\n    "],"id":465,"title":"How can you represent inheritance in a database?","content":"\n                \n\u0026lt;p\u0026gt;I\u0026apos;m thinking about how to represent a complex structure in a SQL Server database.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Consider an application that needs to store details of a family of objects, which share some attributes, but have many others not common. For example, a commercial insurance package may include liability, motor, property and indemnity cover within the same policy record.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It is trivial to implement this in C#, etc, as you can create a Policy with a collection of Sections, where Section is inherited as required for the various types of cover. However, relational databases don\u0026apos;t seem to allow this easily.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I can see that there are two main choices:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Create a Policy table, then a Sections table, with all the fields required, for all possible variations, most of which would be null.  \u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Create a Policy table and numerous Section tables, one for each kind of cover.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;Both of these alternatives seem unsatisfactory, especially as it is necessary to write queries across all Sections, which would involve numerous joins, or numerous null-checks.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;What is the best practice for this scenario?\u0026lt;/p\u0026gt;\n    ","slug":"how-can-you-represent-inheritance-in-a-database-1657388076553","postType":"QUESTION","createdAt":"2022-07-09T17:34:36.000Z","updatedAt":"2022-07-09T17:34:36.000Z","tags":[{"id":2371,"name":"class-table-inheritance","slug":"class-table-inheritance","createdAt":"2022-07-09T17:34:36.000Z","updatedAt":"2022-07-09T17:34:36.000Z","Questions_Tags":{"questionId":465,"tagId":2371}}],"relatedQuestions":[{"title":"How can you represent inheritance in a database?","slug":"how-can-you-represent-inheritance-in-a-database-1657388076553","tags":[{"name":"class-table-inheritance","Questions_Tags":{"questionId":465,"tagId":2371}}]}]},"randomQuestions":[{"title":"How can I pivot a dataframe?","slug":"how-can-i-pivot-a-dataframe-1657384433802"},{"title":"Captured variable in a loop in C#","slug":"captured-variable-in-a-loop-in-c-1657387696779"},{"title":"Retrieve only the queried element in an object array in MongoDB collection","slug":"retrieve-only-the-queried-element-in-an-object-array-in-mongodb-collection-1657384890457"},{"title":"MySQL pivot row into dynamic number of columns","slug":"mysql-pivot-row-into-dynamic-number-of-columns-1657387981930"},{"title":"input() error - NameError: name '...' is not defined","slug":"input()-error-nameerror:-name-'...'-is-not-defined-1657388497243"},{"title":"What is the difference between a deep copy and a shallow copy?","slug":"what-is-the-difference-between-a-deep-copy-and-a-shallow-copy-1657388445063"},{"title":"Can I mix MySQL APIs in PHP?","slug":"can-i-mix-mysql-apis-in-php-1657384597444"},{"title":"How do I properly compare strings in C?","slug":"how-do-i-properly-compare-strings-in-c-1657387467202"},{"title":"Copy array by value","slug":"copy-array-by-value-1657387649531"},{"title":"Why does my JavaScript code receive a \"No 'Access-Control-Allow-Origin' header is present on the requested resource\" error, while Postman does not?","slug":"why-does-my-javascript-code-receive-a-\"no-'access-control-allow-origin'-header-is-present-on-the-requested-resource\"-error-while-postman-does-not-1657384636363"},{"title":"How do I redirect to another webpage?","slug":"how-do-i-redirect-to-another-webpage-1657384869767"},{"title":"How to randomize (shuffle) a JavaScript array?","slug":"how-to-randomize-(shuffle)-a-javascript-array-1657384790171"},{"title":"Swing GUI listeners without AWT","slug":"swing-gui-listeners-without-awt-1657387522426"},{"title":"When should I wrap quotes around a shell variable?","slug":"when-should-i-wrap-quotes-around-a-shell-variable-1657384659265"},{"title":"Can PHP PDO Statements accept the table or column name as parameter?","slug":"can-php-pdo-statements-accept-the-table-or-column-name-as-parameter-1657387478588"},{"title":"Order Bars in ggplot2 bar graph","slug":"order-bars-in-ggplot2-bar-graph-1657388099080"},{"title":"How to affect other elements when one element is hovered","slug":"how-to-affect-other-elements-when-one-element-is-hovered-1657387832363"},{"title":"How to extract and access data from JSON with PHP?","slug":"how-to-extract-and-access-data-from-json-with-php-1657384483259"},{"title":"Default constructor with empty brackets","slug":"default-constructor-with-empty-brackets-1657388246967"},{"title":"How can I upload files to a server using JSP/Servlet?","slug":"how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-can-you-represent-inheritance-in-a-database-1657388076553"},"buildId":"Zo3C7AOWQzKM9qqyzx2hf","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>