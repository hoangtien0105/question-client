{"pageProps":{"data":{"answer":["\n&lt;h2&gt;Introduction&lt;/h2&gt;\n&lt;p&gt;To browse and select a file for upload you need a HTML &lt;code&gt;&amp;lt;input type=&quot;file&quot;&amp;gt;&lt;/code&gt; field in the form. As stated in the &lt;a href=&quot;http://www.w3.org/TR/html4/interact/forms.html&quot; rel=&quot;noreferrer&quot;&gt;HTML specification&lt;/a&gt; you have to use the &lt;code&gt;POST&lt;/code&gt; method and the &lt;code&gt;enctype&lt;/code&gt; attribute of the form has to be set to &lt;code&gt;&quot;multipart/form-data&quot;&lt;/code&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;upload&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;enctype&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;description&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;submit&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;After submitting such a form, the binary multipart form data is available in the request body in &lt;a href=&quot;https://stackoverflow.com/questions/13372775/servlet-handling-file-upload-why-bigger-than-the-original/13399437#13399437&quot;&gt;a different format&lt;/a&gt; than when the &lt;code&gt;enctype&lt;/code&gt; isn&apos;t set.&lt;/p&gt;\n&lt;p&gt;Before Servlet 3.0 (Dec 2009), the Servlet API didn&apos;t natively support &lt;code&gt;multipart/form-data&lt;/code&gt;. It supports only the default form enctype of &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;. The &lt;code&gt;request.getParameter()&lt;/code&gt; and consorts would all return &lt;code&gt;null&lt;/code&gt; when using multipart form data. This is where the well known &lt;a href=&quot;http://commons.apache.org/fileupload&quot; rel=&quot;noreferrer&quot;&gt;Apache Commons FileUpload&lt;/a&gt; came into the picture.&lt;/p&gt;\n&lt;h2&gt;Don&apos;t manually parse it!&lt;/h2&gt;\n&lt;p&gt;You can in theory parse the request body yourself based on &lt;a href=&quot;http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getInputStream%28%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;ServletRequest#getInputStream()&lt;/code&gt;&lt;/a&gt;. However, this is a precise and tedious work which requires precise knowledge of &lt;a href=&quot;http://www.faqs.org/rfcs/rfc2388.html&quot; rel=&quot;noreferrer&quot;&gt;RFC2388&lt;/a&gt;. You shouldn&apos;t try to do this on your own or copypaste some homegrown library-less code found elsewhere on the Internet. Many online sources have failed hard in this, such as roseindia.net. See also &lt;a href=&quot;https://stackoverflow.com/questions/5038798/uploading-of-pdf-file&quot;&gt;uploading of pdf file&lt;/a&gt;. You should rather use a real library which is used (and implicitly tested!) by millions of users for years. Such a library has proven its robustness.&lt;/p&gt;\n&lt;h2&gt;When you&apos;re already on Servlet 3.0 or newer, use native API&lt;/h2&gt;\n&lt;p&gt;If you&apos;re using at least Servlet 3.0 (Tomcat 7, Jetty 9, JBoss AS 6, GlassFish 3, etc, they exist already since 2010), then you can just use standard API provided &lt;a href=&quot;http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getParts()&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;HttpServletRequest#getPart()&lt;/code&gt;&lt;/a&gt; to collect the individual multipart form data items (most Servlet 3.0 implementations &lt;em&gt;actually&lt;/em&gt; use Apache Commons FileUpload under the covers for this!). Also, normal form fields are available by &lt;code&gt;getParameter()&lt;/code&gt; the usual way.&lt;/p&gt;\n&lt;p&gt;First annotate your servlet with &lt;a href=&quot;http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/MultipartConfig.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;@MultipartConfig&lt;/code&gt;&lt;/a&gt; in order to let it recognize and support &lt;code&gt;multipart/form-data&lt;/code&gt; requests and thus get &lt;code&gt;getPart()&lt;/code&gt; to work:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@WebServlet(&quot;/upload&quot;)&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;@MultipartConfig&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;UploadServlet&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServlet&lt;/span&gt; {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Then, implement its &lt;code&gt;doPost()&lt;/code&gt; as follows:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;doPost&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpServletRequest request, HttpServletResponse response)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; ServletException, IOException {\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; request.getParameter(&lt;span class=&quot;hljs-string&quot;&gt;&quot;description&quot;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Retrieves &amp;lt;input type=&quot;text&quot; name=&quot;description&quot;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;Part&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;filePart&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; request.getPart(&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Retrieves &amp;lt;input type=&quot;file&quot; name=&quot;file&quot;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Paths.get(filePart.getSubmittedFileName()).getFileName().toString(); &lt;span class=&quot;hljs-comment&quot;&gt;// MSIE fix.&lt;/span&gt;\n    &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileContent&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; filePart.getInputStream();\n    &lt;span class=&quot;hljs-comment&quot;&gt;// ... (do your job here)&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note the &lt;code&gt;Path#getFileName()&lt;/code&gt;. This is a MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.&lt;/p&gt;\n&lt;p&gt;In case you want to upload multiple files via either &lt;code&gt;multiple=&quot;true&quot;&lt;/code&gt;,&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;files&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;multiple&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;or the old-fashioned way with multiple inputs,&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;files&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;files&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;files&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n...\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;then you can collect them as below (unfortunately there is no such method as &lt;code&gt;request.getParts(&quot;files&quot;)&lt;/code&gt;):&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;doPost&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpServletRequest request, HttpServletResponse response)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; ServletException, IOException {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n    List&amp;lt;Part&amp;gt; fileParts = request.getParts().stream().filter(part -&amp;gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;files&quot;&lt;/span&gt;.equals(part.getName()) &amp;amp;&amp;amp; part.getSize() &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;).collect(Collectors.toList()); &lt;span class=&quot;hljs-comment&quot;&gt;// Retrieves &amp;lt;input type=&quot;file&quot; name=&quot;files&quot; multiple=&quot;true&quot;&amp;gt;&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (Part filePart : fileParts) {\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Paths.get(filePart.getSubmittedFileName()).getFileName().toString(); &lt;span class=&quot;hljs-comment&quot;&gt;// MSIE fix.&lt;/span&gt;\n        &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileContent&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; filePart.getInputStream();\n        &lt;span class=&quot;hljs-comment&quot;&gt;// ... (do your job here)&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;When you&apos;re not on Servlet 3.1 yet, manually get submitted file name&lt;/h2&gt;\n&lt;p&gt;Note that &lt;a href=&quot;https://docs.oracle.com/javaee/7/api/javax/servlet/http/Part.html#getSubmittedFileName()&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;Part#getSubmittedFileName()&lt;/code&gt;&lt;/a&gt; was introduced in Servlet 3.1 (Tomcat 8, Jetty 9, WildFly 8, GlassFish 4, etc, they exist since 2013 already). If you&apos;re not on Servlet 3.1 yet (really?), then you need an additional utility method to obtain the submitted file name.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;getSubmittedFileName&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Part part)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (String cd : part.getHeader(&lt;span class=&quot;hljs-string&quot;&gt;&quot;content-disposition&quot;&lt;/span&gt;).split(&lt;span class=&quot;hljs-string&quot;&gt;&quot;;&quot;&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (cd.trim().startsWith(&lt;span class=&quot;hljs-string&quot;&gt;&quot;filename&quot;&lt;/span&gt;)) {\n            &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; cd.substring(cd.indexOf(&lt;span class=&quot;hljs-string&quot;&gt;&apos;=&apos;&lt;/span&gt;) + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;).trim().replace(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\&quot;&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; fileName.substring(fileName.lastIndexOf(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/&apos;&lt;/span&gt;) + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;).substring(fileName.lastIndexOf(&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\\\&apos;&lt;/span&gt;) + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// MSIE fix.&lt;/span&gt;\n        }\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getSubmittedFileName(filePart);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note the MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.&lt;/p&gt;\n&lt;h2&gt;When you&apos;re not on Servlet 3.0 yet, use Apache Commons FileUpload&lt;/h2&gt;\n&lt;p&gt;If you&apos;re not on Servlet 3.0 yet (isn&apos;t it about time to upgrade? it&apos;s released over a decade ago!), the common practice is to make use of &lt;a href=&quot;http://commons.apache.org/fileupload&quot; rel=&quot;noreferrer&quot;&gt;Apache Commons FileUpload&lt;/a&gt; to parse the multpart form data requests. It has an excellent &lt;a href=&quot;http://commons.apache.org/fileupload/using.html&quot; rel=&quot;noreferrer&quot;&gt;User Guide&lt;/a&gt; and &lt;a href=&quot;http://commons.apache.org/fileupload/faq.html&quot; rel=&quot;noreferrer&quot;&gt;FAQ&lt;/a&gt; (carefully go through both). There&apos;s also the O&apos;Reilly (&quot;&lt;a href=&quot;http://www.servlets.com/cos/&quot; rel=&quot;noreferrer&quot;&gt;cos&lt;/a&gt;&quot;) &lt;code&gt;MultipartRequest&lt;/code&gt;, but it has some (minor) bugs and isn&apos;t actively maintained anymore for years. I wouldn&apos;t recommend using it. Apache Commons FileUpload is still actively maintained and currently very mature.&lt;/p&gt;\n&lt;p&gt;In order to use Apache Commons FileUpload, you need to have at least the following files in your webapp&apos;s &lt;code&gt;/WEB-INF/lib&lt;/code&gt;:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;http://commons.apache.org/proper/commons-fileupload/download_fileupload.cgi&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;commons-fileupload.jar&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;http://commons.apache.org/proper/commons-io/download_io.cgi&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;commons-io.jar&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Your initial attempt failed most likely because you forgot the commons IO.&lt;/p&gt;\n&lt;p&gt;Here&apos;s a kickoff example how the &lt;code&gt;doPost()&lt;/code&gt; of your &lt;code&gt;UploadServlet&lt;/code&gt; may look like when using Apache Commons FileUpload:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;doPost&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpServletRequest request, HttpServletResponse response)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; ServletException, IOException {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n        List&amp;lt;FileItem&amp;gt; items = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ServletFileUpload&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DiskFileItemFactory&lt;/span&gt;()).parseRequest(request);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (FileItem item : items) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (item.isFormField()) {\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Process regular form field (input type=&quot;text|radio|checkbox|etc&quot;, select, etc).&lt;/span&gt;\n                &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fieldName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; item.getFieldName();\n                &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fieldValue&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; item.getString();\n                &lt;span class=&quot;hljs-comment&quot;&gt;// ... (do your job here)&lt;/span&gt;\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Process form file field (input type=&quot;file&quot;).&lt;/span&gt;\n                &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fieldName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; item.getFieldName();\n                &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; FilenameUtils.getName(item.getName());\n                &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileContent&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; item.getInputStream();\n                &lt;span class=&quot;hljs-comment&quot;&gt;// ... (do your job here)&lt;/span&gt;\n            }\n        }\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (FileUploadException e) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ServletException&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Cannot parse multipart request.&quot;&lt;/span&gt;, e);\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It&apos;s very important that you don&apos;t call &lt;code&gt;getParameter()&lt;/code&gt;, &lt;code&gt;getParameterMap()&lt;/code&gt;, &lt;code&gt;getParameterValues()&lt;/code&gt;, &lt;code&gt;getInputStream()&lt;/code&gt;, &lt;code&gt;getReader()&lt;/code&gt;, etc on the same request beforehand. Otherwise the servlet container will read and parse the request body and thus Apache Commons FileUpload will get an empty request body. See also a.o. &lt;a href=&quot;https://stackoverflow.com/questions/13881272/servletfileuploadparserequestrequest-returns-an-empty-list&quot;&gt;ServletFileUpload#parseRequest(request) returns an empty list&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;Note the &lt;code&gt;FilenameUtils#getName()&lt;/code&gt;. This is a MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.&lt;/p&gt;\n&lt;p&gt;Alternatively you can also wrap this all in a &lt;code&gt;Filter&lt;/code&gt; which parses it all automagically and put the stuff back in the parametermap of the request so that you can continue using &lt;code&gt;request.getParameter()&lt;/code&gt; the usual way and retrieve the uploaded file by &lt;code&gt;request.getAttribute()&lt;/code&gt;. &lt;a href=&quot;http://balusc.blogspot.com/2007/11/multipartfilter.html&quot; rel=&quot;noreferrer&quot;&gt;You can find an example in this blog article&lt;/a&gt;.&lt;/p&gt;\n&lt;h2&gt;Workaround for GlassFish3 bug of &lt;code&gt;getParameter()&lt;/code&gt; still returning &lt;code&gt;null&lt;/code&gt;&lt;/h2&gt;\n&lt;p&gt;Note that Glassfish versions older than 3.1.2 had &lt;a href=&quot;http://java.net/jira/browse/GLASSFISH-16740&quot; rel=&quot;noreferrer&quot;&gt;a bug&lt;/a&gt; wherein the &lt;code&gt;getParameter()&lt;/code&gt; still returns &lt;code&gt;null&lt;/code&gt;. If you are targeting such a container and can&apos;t upgrade it, then you need to extract the value from &lt;code&gt;getPart()&lt;/code&gt; with help of this utility method:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;hljs-title function_&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Part part)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; IOException {\n    &lt;span class=&quot;hljs-type&quot;&gt;BufferedReader&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;reader&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;BufferedReader&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InputStreamReader&lt;/span&gt;(part.getInputStream(), &lt;span class=&quot;hljs-string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;));\n    &lt;span class=&quot;hljs-type&quot;&gt;StringBuilder&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;StringBuilder&lt;/span&gt;();\n    &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;[] buffer = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;char&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1024&lt;/span&gt;];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; (length = reader.read(buffer)) &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;) {\n        value.append(buffer, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, length);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value.toString();\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; getValue(request.getPart(&lt;span class=&quot;hljs-string&quot;&gt;&quot;description&quot;&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// Retrieves &amp;lt;input type=&quot;text&quot; name=&quot;description&quot;&amp;gt;&lt;/span&gt;\n    \n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Saving uploaded file (don&apos;t use &lt;code&gt;getRealPath()&lt;/code&gt; nor &lt;code&gt;part.write()&lt;/code&gt;!)&lt;/h2&gt;\n&lt;p&gt;Head to the following answers for detail on properly saving the obtained &lt;code&gt;InputStream&lt;/code&gt; (the &lt;code&gt;fileContent&lt;/code&gt; variable as shown in the above code snippets) to disk or database:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/18664579/recommended-way-to-save-files-uploaded-to-a-tomcat-servlet/18664715#18664715&quot;&gt;Recommended way to save uploaded files in a servlet application&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/7033676/how-to-upload-an-image-and-save-it-in-database/7033945#7033945&quot;&gt;How to upload an image and save it in database?&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/19138706/how-to-convert-part-to-blob-so-i-can-store-it-in-mysql/19139125#19139125&quot;&gt;How to convert Part to Blob, so I can store it in MySQL?&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;Serving uploaded file&lt;/h2&gt;\n&lt;p&gt;Head to the following answers for detail on properly serving the saved file from disk or database back to the client:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/4543936/load-images-from-outside-of-webapps-webcontext-deploy-folder-using-hgraphi/4543951#4543951&quot;&gt;Load images from outside of webapps / webcontext / deploy folder using &amp;lt;h:graphicImage&amp;gt; or &amp;lt;img&amp;gt; tag&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/2340406/how-to-retrieve-and-display-images-from-a-database-in-a-jsp-page/2341322#2341322&quot;&gt;How to retrieve and display images from a database in a JSP page?&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/1812244/simplest-way-to-serve-static-data-from-outside-the-application-server-in-a-java/1812356#1812356&quot;&gt;Simplest way to serve static data from outside the application server in a Java web application&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/132052/servlet-for-serving-static-content/29991447#29991447&quot;&gt;Abstract template for static resource servlet supporting HTTP caching&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;Ajaxifying the form&lt;/h2&gt;\n&lt;p&gt;Head to the following answers how to upload using Ajax (and jQuery). Do note that the servlet code to collect the form data does not need to be changed for this! Only the way how you respond may be changed, but this is rather trivial (i.e. instead of forwarding to JSP, just print some JSON or XML or even plain text depending on whatever the script responsible for the Ajax call is expecting).&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/6914152/how-to-upload-files-to-server-using-jsp-servlet-and-ajax&quot;&gt;How can I upload files to a server using JSP/Servlet and Ajax?&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/9395911/sending-a-file-as-multipart-through-xmlhttprequest&quot;&gt;Send a file as multipart through XMLHttpRequest&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/7114087/html5-file-upload-to-java-servlet&quot;&gt;HTML5 drag and drop file upload to Java Servlet&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr&gt;\n&lt;p&gt;Hope this all helps :)&lt;/p&gt;\n    ","\n&lt;p&gt;If you happen to use &lt;a href=&quot;https://en.wikipedia.org/wiki/Spring_Framework#Model-view-controller_framework&quot; rel=&quot;nofollow noreferrer&quot;&gt;Spring MVC&lt;/a&gt;, this is how to (I&apos;m leaving this here in case someone find it useful):&lt;/p&gt;\n&lt;p&gt;Use a form with &lt;code&gt;enctype&lt;/code&gt; attribute set to &quot;&lt;code&gt;multipart/form-data&lt;/code&gt;&quot; (the same as &lt;a href=&quot;https://stackoverflow.com/questions/2422468/how-can-i-upload-files-to-a-server-using-jsp-servlet/2424824#2424824&quot;&gt;BalusC&apos;s answer&lt;/a&gt;):&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;upload&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;enctype&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;submit&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Upload&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In your controller, map the request parameter &lt;code&gt;file&lt;/code&gt; to &lt;code&gt;MultipartFile&lt;/code&gt; type as follows:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;handleUpload&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-meta&quot;&gt;@RequestParam(&quot;file&quot;)&lt;/span&gt; MultipartFile file)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; IOException {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!file.isEmpty()) {\n            &lt;span class=&quot;hljs-type&quot;&gt;byte&lt;/span&gt;[] bytes = file.getBytes(); &lt;span class=&quot;hljs-comment&quot;&gt;// alternatively, file.getInputStream();&lt;/span&gt;\n            &lt;span class=&quot;hljs-comment&quot;&gt;// application logic&lt;/span&gt;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;You can get the filename and size using &lt;code&gt;MultipartFile&lt;/code&gt;&apos;s &lt;code&gt;getOriginalFilename()&lt;/code&gt; and &lt;code&gt;getSize()&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;I&apos;ve tested this with Spring version &lt;code&gt;4.1.1.RELEASE&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Without components or external libraries in Tomcat 6 or Tomcat 7&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Enabling upload in the &lt;strong&gt;web.xml&lt;/strong&gt; file:&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;&lt;a href=&quot;http://joseluisbz.wordpress.com/2014/01/17/manually-installing-php-tomcat-and-httpd-lounge/#Enabling%20File%20Uploads&quot; rel=&quot;nofollow noreferrer&quot;&gt;Manually Installing PHP, Tomcat and Httpd Lounge&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-xml s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;servlet&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;servlet-name&lt;/span&gt;&amp;gt;&lt;/span&gt;jsp&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;servlet-name&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;servlet-class&lt;/span&gt;&amp;gt;&lt;/span&gt;org.apache.jasper.servlet.JspServlet&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;servlet-class&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;multipart-config&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;max-file-size&lt;/span&gt;&amp;gt;&lt;/span&gt;3145728&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;max-file-size&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;max-request-size&lt;/span&gt;&amp;gt;&lt;/span&gt;5242880&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;max-request-size&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;multipart-config&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;init-param&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param-name&lt;/span&gt;&amp;gt;&lt;/span&gt;fork&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param-name&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param-value&lt;/span&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param-value&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;init-param&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;init-param&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param-name&lt;/span&gt;&amp;gt;&lt;/span&gt;xpoweredBy&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param-name&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;param-value&lt;/span&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;param-value&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;init-param&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;load-on-startup&lt;/span&gt;&amp;gt;&lt;/span&gt;3&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;load-on-startup&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;servlet&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;em&gt;As you can see&lt;/em&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-xml s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;multipart-config&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;max-file-size&lt;/span&gt;&amp;gt;&lt;/span&gt;3145728&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;max-file-size&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;max-request-size&lt;/span&gt;&amp;gt;&lt;/span&gt;5242880&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;max-request-size&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;multipart-config&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Uploading files using JSP. files:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;In the HTML file&lt;/em&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;form method=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt; enctype=&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt; name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Form&quot;&lt;/span&gt; &amp;gt;\n\n  &amp;lt;input type=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;fFoto&quot;&lt;/span&gt; id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;fFoto&quot;&lt;/span&gt; value=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt; /&amp;gt;&amp;lt;/td&amp;gt;\n  &amp;lt;input type=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;fResumen&quot;&lt;/span&gt; id=&lt;span class=&quot;hljs-string&quot;&gt;&quot;fResumen&quot;&lt;/span&gt; value=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;em&gt;In the JSP File&lt;/em&gt; or &lt;em&gt;Servlet&lt;/em&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;isFoto&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; request.getPart(&lt;span class=&quot;hljs-string&quot;&gt;&quot;fFoto&quot;&lt;/span&gt;).getInputStream();\n&lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;isResu&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; request.getPart(&lt;span class=&quot;hljs-string&quot;&gt;&quot;fResumen&quot;&lt;/span&gt;).getInputStream();\n&lt;span class=&quot;hljs-type&quot;&gt;ByteArrayOutputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;baos&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ByteArrayOutputStream&lt;/span&gt;();\n&lt;span class=&quot;hljs-type&quot;&gt;byte&lt;/span&gt; buf[] = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;byte&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;8192&lt;/span&gt;];\n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;qt&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; ((qt = isResu.read(buf)) != -&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) {\n  baos.write(buf, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, qt);\n}\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;sResumen&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; baos.toString();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Edit your code to servlet requirements, like &lt;em&gt;max-file-size&lt;/em&gt;, &lt;em&gt;max-request-size&lt;/em&gt; and other options that you can to set...&lt;/p&gt;\n    ","\n&lt;p&gt;You need the &lt;code&gt;common-io.1.4.jar&lt;/code&gt; file to be included in your &lt;code&gt;lib&lt;/code&gt; directory, or if you&apos;re working in any editor, like NetBeans, then you need to go to project properties and just add the JAR file and you will be done. &lt;/p&gt;\n\n&lt;p&gt;To get the &lt;code&gt;common.io.jar&lt;/code&gt; file just google it or just go to the Apache &lt;a href=&quot;http://en.wikipedia.org/wiki/Apache_Tomcat&quot;&gt;Tomcat&lt;/a&gt; website where you get the option for a free download of this file. But remember one thing: download the binary ZIP file if you&apos;re a Windows user.&lt;/p&gt;\n    ","\n&lt;p&gt;I am using a common Servlet for &lt;strong&gt;every&lt;/strong&gt; HTML form whether it has attachments or not.&lt;/p&gt;\n&lt;p&gt;This Servlet returns a &lt;code&gt;TreeMap&lt;/code&gt; where the keys are JSP name parameters and values are user inputs and saves all attachments in a fixed directory and later you rename the directory of your choice. Here &lt;em&gt;Connections&lt;/em&gt; is our custom interface having a connection object.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ServletCommonfunctions&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServlet&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;implements&lt;/span&gt;\n        &lt;span class=&quot;hljs-title class_&quot;&gt;Connections&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;serialVersionUID&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ServletCommonfunctions&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {}\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;doPost&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpServletRequest request,\n                          HttpServletResponse response)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; ServletException,\n                          IOException {}\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; SortedMap&amp;lt;String, String&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;savefilesindirectory&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(\n            HttpServletRequest request, HttpServletResponse response)&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; IOException {\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Map&amp;lt;String, String&amp;gt; key_values = Collections.synchronizedMap(new&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// TreeMap&amp;lt;String, String&amp;gt;());&lt;/span&gt;\n        SortedMap&amp;lt;String, String&amp;gt; key_values = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;TreeMap&lt;/span&gt;&amp;lt;String, String&amp;gt;();\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;dist&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, fact = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n        &lt;span class=&quot;hljs-type&quot;&gt;PrintWriter&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; response.getWriter();\n        File file;\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;E:\\\\FSPATH1\\\\2KL06CS048\\\\&quot;&lt;/span&gt;;\n        System.out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Directory Created   ????????????&quot;&lt;/span&gt;\n            + &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(filePath).mkdir());\n        &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;maxFileSize&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;5000&lt;/span&gt; * &lt;span class=&quot;hljs-number&quot;&gt;1024&lt;/span&gt;;\n        &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;maxMemSize&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;5000&lt;/span&gt; * &lt;span class=&quot;hljs-number&quot;&gt;1024&lt;/span&gt;;\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Verify the content type&lt;/span&gt;\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;contentType&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; request.getContentType();\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ((contentType.indexOf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt;) &amp;gt;= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)) {\n            &lt;span class=&quot;hljs-type&quot;&gt;DiskFileItemFactory&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;factory&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DiskFileItemFactory&lt;/span&gt;();\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Maximum size that will be stored in memory&lt;/span&gt;\n            factory.setSizeThreshold(maxMemSize);\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Location to save data that is larger than maxMemSize.&lt;/span&gt;\n            factory.setRepository(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(filePath));\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Create a new file upload handler&lt;/span&gt;\n            &lt;span class=&quot;hljs-type&quot;&gt;ServletFileUpload&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;upload&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ServletFileUpload&lt;/span&gt;(factory);\n            &lt;span class=&quot;hljs-comment&quot;&gt;// maximum file size to be uploaded.&lt;/span&gt;\n            upload.setSizeMax(maxFileSize);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Parse the request to get file items.&lt;/span&gt;\n                &lt;span class=&quot;hljs-meta&quot;&gt;@SuppressWarnings(&quot;unchecked&quot;)&lt;/span&gt;\n                List&amp;lt;FileItem&amp;gt; fileItems = upload.parseRequest(request);\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Process the uploaded file items&lt;/span&gt;\n                Iterator&amp;lt;FileItem&amp;gt; i = fileItems.iterator();\n                &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (i.hasNext()) {\n                    &lt;span class=&quot;hljs-type&quot;&gt;FileItem&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fi&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (FileItem) i.next();\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!fi.isFormField()) {\n                        &lt;span class=&quot;hljs-comment&quot;&gt;// Get the uploaded file parameters&lt;/span&gt;\n                        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fi.getName();\n                        &lt;span class=&quot;hljs-comment&quot;&gt;// Write the file&lt;/span&gt;\n                        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (fileName.lastIndexOf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\\\&quot;&lt;/span&gt;) &amp;gt;= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n                            file = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(filePath\n                                + fileName.substring(fileName\n                                        .lastIndexOf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\\\&quot;&lt;/span&gt;)));\n                        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n                            file = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(filePath\n                                + fileName.substring(fileName\n                                        .lastIndexOf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\\\&quot;&lt;/span&gt;) + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;));\n                        }\n                        fi.write(file);\n                    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n                        key_values.put(fi.getFieldName(), fi.getString());\n                    }\n                }\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {\n                System.out.println(ex);\n            }\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; key_values;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;For Spring MVC&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;I managed to have a simpler version that worked for taking form input, both data and images.&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;/handleform&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;enctype&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;submit&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;Controller to handle&lt;/h3&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@Controller&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FormController&lt;/span&gt; {\n    &lt;span class=&quot;hljs-meta&quot;&gt;@RequestMapping(value=&quot;/handleform&quot;,method= RequestMethod.POST)&lt;/span&gt;\n    ModelAndView &lt;span class=&quot;hljs-title function_&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-meta&quot;&gt;@RequestParam&lt;/span&gt; String name, &lt;span class=&quot;hljs-meta&quot;&gt;@RequestParam&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; age, &lt;span class=&quot;hljs-meta&quot;&gt;@RequestParam&lt;/span&gt; MultipartFile file)&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; ServletException, IOException {\n\n        System.out.println(name);\n        System.out.println(age);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(!file.isEmpty()){\n            &lt;span class=&quot;hljs-type&quot;&gt;byte&lt;/span&gt;[] bytes = file.getBytes();\n            &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; file.getOriginalFilename();\n            &lt;span class=&quot;hljs-type&quot;&gt;BufferedOutputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;stream&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;BufferedOutputStream&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FileOutputStream&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;D:/&quot;&lt;/span&gt; + filename)));\n            stream.write(bytes);\n            stream.flush();\n            stream.close();\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ModelAndView&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;index&quot;&lt;/span&gt;);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Another source of this problem occurs if you are using &lt;a href=&quot;https://en.wikipedia.org/wiki/Apache_Geronimo&quot; rel=&quot;nofollow noreferrer&quot;&gt;Geronimo&lt;/a&gt; with its embedded Tomcat. In this case, after many iterations of testing &lt;a href=&quot;https://commons.apache.org/proper/commons-io/&quot; rel=&quot;nofollow noreferrer&quot;&gt;Commons IO&lt;/a&gt; and commons-fileupload, the problem arises from a parent classloader handling the commons-xxx JAR files. This has to be prevented. The crash always occurred at:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;fileItems = uploader.parseRequest(request);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note that the List type of fileItems has changed with the current version of commons-fileupload to be specifically &lt;code&gt;List&amp;lt;FileItem&amp;gt;&lt;/code&gt; as opposed to prior versions where it was generic &lt;code&gt;List&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;I added the source code for commons-fileupload and Commons IO into my &lt;a href=&quot;https://en.wikipedia.org/wiki/Eclipse_%28software%29&quot; rel=&quot;nofollow noreferrer&quot;&gt;Eclipse&lt;/a&gt; project to trace the actual error and finally got some insight. First, the exception thrown is of type Throwable not the stated FileIOException nor even Exception (these will not be trapped). Second, the error message is obfuscatory in that it stated class not found because axis2 could not find commons-io.  Axis2 is not used in my project at all, but it exists as a folder in the Geronimo repository subdirectory as part of standard installation.&lt;/p&gt;\n&lt;p&gt;Finally, I found one place that posed a working solution which successfully solved my problem. You must hide the JAR files from the parent loader in the deployment plan. This was put into the &lt;em&gt;geronimo-web.xml&lt;/em&gt; file with my full file shown below.&lt;/p&gt;\n&lt;p&gt;Pasted from &lt;em&gt;&lt;a href=&quot;http://osdir.com/ml/user-geronimo-apache/2011-03/msg00026.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;http://osdir.com/ml/user-geronimo-apache/2011-03/msg00026.html&lt;/a&gt;&lt;/em&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-xml s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;hljs-string&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;hljs-string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt; standalone=&lt;span class=&quot;hljs-string&quot;&gt;&quot;no&quot;&lt;/span&gt;?&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;web:web-app&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:app&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://geronimo.apache.org/xml/ns/j2ee/application-2.0&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:client&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://geronimo.apache.org/xml/ns/j2ee/application-client-2.0&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:conn&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://geronimo.apache.org/xml/ns/j2ee/connector-1.2&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:dep&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://geronimo.apache.org/xml/ns/deployment-1.2&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:ejb&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://openejb.apache.org/xml/ns/openejb-jar-2.2&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:log&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://geronimo.apache.org/xml/ns/loginconfig-2.0&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://geronimo.apache.org/xml/ns/naming-1.2&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:pers&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://java.sun.com/xml/ns/persistence&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:pkgen&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://openejb.apache.org/xml/ns/pkgen-2.1&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:sec&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://geronimo.apache.org/xml/ns/security-2.0&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns:web&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;dep:environment&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;dep:moduleId&lt;/span&gt;&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;dep:groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;DataStar&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;dep:groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;dep:artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;DataStar&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;dep:artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;dep:version&lt;/span&gt;&amp;gt;&lt;/span&gt;1.0&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;dep:version&lt;/span&gt;&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;dep:type&lt;/span&gt;&amp;gt;&lt;/span&gt;car&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;dep:type&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;dep:moduleId&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- Don&apos;t load commons-io or fileupload from parent classloaders --&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;dep:hidden-classes&lt;/span&gt;&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;dep:filter&lt;/span&gt;&amp;gt;&lt;/span&gt;org.apache.commons.io&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;dep:filter&lt;/span&gt;&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;dep:filter&lt;/span&gt;&amp;gt;&lt;/span&gt;org.apache.commons.fileupload&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;dep:filter&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;dep:hidden-classes&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;dep:inverse-classloading&lt;/span&gt;/&amp;gt;&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;dep:environment&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;web:context-root&lt;/span&gt;&amp;gt;&lt;/span&gt;/DataStar&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;web:context-root&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;web:web-app&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Here&apos;s an example using apache commons-fileupload:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// apache commons-fileupload to handle file upload&lt;/span&gt;\n&lt;span class=&quot;hljs-type&quot;&gt;DiskFileItemFactory&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;factory&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DiskFileItemFactory&lt;/span&gt;();\nfactory.setRepository(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(DataSources.TORRENTS_DIR()));\n&lt;span class=&quot;hljs-type&quot;&gt;ServletFileUpload&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileUpload&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ServletFileUpload&lt;/span&gt;(factory);\n\nList&amp;lt;FileItem&amp;gt; items = fileUpload.parseRequest(req.raw());\n&lt;span class=&quot;hljs-type&quot;&gt;FileItem&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; items.stream()\n  .filter(e -&amp;gt;\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;the_upload_name&quot;&lt;/span&gt;.equals(e.getFieldName()))\n  .findFirst().get();\n&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; item.getName();\n\nitem.write(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(dir, fileName));\nlog.info(fileName);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You first have to set the enctype attribute of the form to &quot;multipart/form-data&quot;&lt;/p&gt;\n&lt;p&gt;This is shown below.&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Controller&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;enctype&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n     &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;label&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file-upload&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt; Click here to upload an Image &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;label&lt;/span&gt;&amp;gt;&lt;/span&gt;\n     &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;required&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;And then, in the Servlet &quot;Controller&quot; add the Annotation for a Multi-part to indicate multipart data is processed in the servlet.&lt;/p&gt;\n&lt;p&gt;After doing this, retrieve the part sent through the form and then retrieve the file name (with path)of the submitted file. Use this to create a new file in the desired path and write the parts of the file to the newly created file to recreate the file.&lt;/p&gt;\n&lt;p&gt;As shown below:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@MultipartConfig&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Controller&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServlet&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;doPost&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpServletRequest request, HttpServletResponse response)&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; ServletException, IOException {\n        insertImage(request, response);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;addProduct&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpServletRequest request, HttpServletResponse response)&lt;/span&gt; {\n        &lt;span class=&quot;hljs-type&quot;&gt;Part&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;filePart&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; request.getPart(&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imageName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Paths.get(filePart.getSubmittedFileName()).getFileName().toString();\n\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;imageSavePath&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;specify image path to save image&quot;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;//path to save image&lt;/span&gt;\n        &lt;span class=&quot;hljs-type&quot;&gt;FileOutputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;outputStream&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n        &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileContent&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n            outputStream = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;FileOutputStream&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(imageSavePath + File.separator + imageName));\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Creating a new file with file path and the file name&lt;/span&gt;\n            fileContent = filePart.getInputStream();\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Getting the input stream&lt;/span&gt;\n            &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;readBytes&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n            &lt;span class=&quot;hljs-type&quot;&gt;byte&lt;/span&gt;[] readArray = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;byte&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1024&lt;/span&gt;];\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Initializing a byte array with size 1024&lt;/span&gt;\n\n            &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; ((readBytes = fileContent.read(readArray)) != -&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) {\n                outputStream.write(readArray, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, readBytes);\n            } &lt;span class=&quot;hljs-comment&quot;&gt;// This loop will write the contents of the byte array unitl the end to the output stream&lt;/span&gt;\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {\n            System.out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Error Writing File: &quot;&lt;/span&gt; + ex);\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;finally&lt;/span&gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (outputStream != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n                outputStream.close();\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Closing the output stream&lt;/span&gt;\n            }\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (fileContent != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n                fileContent.close();\n                &lt;span class=&quot;hljs-comment&quot;&gt;// Closing the input stream&lt;/span&gt;\n            }\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The simplest way I could come up with for files and input controls, without a billion libraries:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;  &amp;lt;%\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (request.getContentType() == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;)\n          &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// For input type=text controls&lt;/span&gt;\n      &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;v_Text&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;\n          (&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;BufferedReader&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InputStreamReader&lt;/span&gt;(request.getPart(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Text1&quot;&lt;/span&gt;).getInputStream()))).readLine();\n\n      &lt;span class=&quot;hljs-comment&quot;&gt;// For input type=file controls&lt;/span&gt;\n      &lt;span class=&quot;hljs-type&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;inStr&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; request.getPart(&lt;span class=&quot;hljs-string&quot;&gt;&quot;File1&quot;&lt;/span&gt;).getInputStream();\n      &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; charArray[] = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;char&lt;/span&gt;[inStr.available()];\n      &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;InputStreamReader&lt;/span&gt;(inStr).read(charArray);\n      &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;contents&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(charArray);\n  %&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Use:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;DiskFileUpload&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;upload&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DiskFileUpload&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;From this object you have to get the file items and fields, and then you can store into the server like the following:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;loc&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;./webapps/prjct name/server folder/&quot;&lt;/span&gt; + contentid + extension;\n&lt;span class=&quot;hljs-type&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;uploadFile&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(loc);\nitem.write(uploadFile);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can upload a file using JSP /servlet.&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;UploadFileServlet&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;description&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;submit&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;On the other hand, on the server side, use the following code.&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;package&lt;/span&gt; com.abc..servlet;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.io.File;\n---------\n--------\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Servlet implementation class UploadFileServlet\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;UploadFileServlet&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServlet&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;serialVersionUID&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1L&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;UploadFileServlet&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;super&lt;/span&gt;();\n        &lt;span class=&quot;hljs-comment&quot;&gt;// TODO Auto-generated constructor stub&lt;/span&gt;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;doGet&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpServletRequest request, HttpServletResponse response)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; ServletException, IOException {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;\n        response.sendRedirect(&lt;span class=&quot;hljs-string&quot;&gt;&quot;../jsp/ErrorPage.jsp&quot;&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;doPost&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpServletRequest request, HttpServletResponse response)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; ServletException, IOException {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// TODO Auto-generated method stub&lt;/span&gt;\n\n        &lt;span class=&quot;hljs-type&quot;&gt;PrintWriter&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; response.getWriter();\n        &lt;span class=&quot;hljs-type&quot;&gt;HttpSession&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;httpSession&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; request.getSession();\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;filePathUpload&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (String) httpSession.getAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;path&quot;&lt;/span&gt;) != &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ? httpSession.getAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;path&quot;&lt;/span&gt;).toString() : &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt; ;\n\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;path1&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; filePathUpload;\n        &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n        &lt;span class=&quot;hljs-type&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n        &lt;span class=&quot;hljs-type&quot;&gt;FileItem&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n\n\n        &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;isMultipart&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; ServletFileUpload.isMultipartContent(request);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (isMultipart) {\n            &lt;span class=&quot;hljs-type&quot;&gt;FileItemFactory&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;factory&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DiskFileItemFactory&lt;/span&gt;();\n            &lt;span class=&quot;hljs-type&quot;&gt;ServletFileUpload&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;upload&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ServletFileUpload&lt;/span&gt;(factory);\n            &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;FieldName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n                &lt;span class=&quot;hljs-type&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;items&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; upload.parseRequest(request);\n                &lt;span class=&quot;hljs-type&quot;&gt;Iterator&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;iterator&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; items.iterator();\n                &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (iterator.hasNext()) {\n                     item = (FileItem) iterator.next();\n\n                        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (fieldname.equals(&lt;span class=&quot;hljs-string&quot;&gt;&quot;description&quot;&lt;/span&gt;)) {\n                            description = item.getString();\n                        }\n                    }\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!item.isFormField()) {\n                        filename = item.getName();\n                        path = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(path1 + File.separator);\n                        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!path.exists()) {\n                            &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; path.mkdirs();\n                        }\n                        &lt;span class=&quot;hljs-comment&quot;&gt;/* Start of code fro privilege */&lt;/span&gt;\n\n                        &lt;span class=&quot;hljs-type&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;uploadedFile&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(path + Filename);  &lt;span class=&quot;hljs-comment&quot;&gt;// for copy file&lt;/span&gt;\n                        item.write(uploadedFile);\n                        }\n                    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n                        f1 = item.getName();\n                    }\n\n                } &lt;span class=&quot;hljs-comment&quot;&gt;// END OF WHILE&lt;/span&gt;\n                response.sendRedirect(&lt;span class=&quot;hljs-string&quot;&gt;&quot;welcome.jsp&quot;&lt;/span&gt;);\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (FileUploadException e) {\n                e.printStackTrace();\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h3&gt;HTML page&lt;/h3&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;File Uploading Form&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h3&lt;/span&gt;&amp;gt;&lt;/span&gt;File Upload:&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h3&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        Select a file to upload: &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;UploadServlet&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt;\n              &lt;span class=&quot;hljs-attr&quot;&gt;enctype&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;size&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;50&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;submit&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Upload File&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;Servlet file&lt;/h3&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Import required java libraries&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.io.*;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; java.util.*;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.servlet.ServletConfig;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.servlet.ServletException;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.servlet.http.HttpServlet;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.servlet.http.HttpServletRequest;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; javax.servlet.http.HttpServletResponse;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.fileupload.FileItem;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.fileupload.FileUploadException;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.fileupload.disk.DiskFileItemFactory;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.fileupload.servlet.ServletFileUpload;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.io.output.*;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;UploadServlet&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HttpServlet&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; isMultipart;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String filePath;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;maxFileSize&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt; * &lt;span class=&quot;hljs-number&quot;&gt;1024&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;maxMemSize&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; * &lt;span class=&quot;hljs-number&quot;&gt;1024&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; File file;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Get the file location where it would be stored.&lt;/span&gt;\n        filePath =\n               getServletContext().getInitParameter(&lt;span class=&quot;hljs-string&quot;&gt;&quot;file-upload&quot;&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;doPost&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpServletRequest request,\n                       HttpServletResponse response)&lt;/span&gt;\n               &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; ServletException, java.io.IOException {\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Check that we have a file upload request&lt;/span&gt;\n        isMultipart = ServletFileUpload.isMultipartContent(request);\n        response.setContentType(&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/html&quot;&lt;/span&gt;);\n        java.io.&lt;span class=&quot;hljs-type&quot;&gt;PrintWriter&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; response.getWriter();\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!isMultipart) {\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;html&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;head&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;title&amp;gt;Servlet upload&amp;lt;/title&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;/head&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;body&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;p&amp;gt;No file uploaded&amp;lt;/p&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;/body&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;/html&amp;gt;&quot;&lt;/span&gt;);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n        }\n\n        &lt;span class=&quot;hljs-type&quot;&gt;DiskFileItemFactory&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;factory&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DiskFileItemFactory&lt;/span&gt;();\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Maximum size that will be stored in memory&lt;/span&gt;\n        factory.setSizeThreshold(maxMemSize);\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Location to save data that is larger than maxMemSize.&lt;/span&gt;\n        factory.setRepository(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;c:\\\\temp&quot;&lt;/span&gt;));\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Create a new file upload handler&lt;/span&gt;\n        &lt;span class=&quot;hljs-type&quot;&gt;ServletFileUpload&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;upload&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ServletFileUpload&lt;/span&gt;(factory);\n        &lt;span class=&quot;hljs-comment&quot;&gt;// maximum file size to be uploaded.&lt;/span&gt;\n        upload.setSizeMax(maxFileSize);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt; {\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Parse the request to get file items.&lt;/span&gt;\n            &lt;span class=&quot;hljs-type&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileItems&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; upload.parseRequest(request);\n\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Process the uploaded file items&lt;/span&gt;\n            &lt;span class=&quot;hljs-type&quot;&gt;Iterator&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fileItems.iterator();\n\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;html&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;head&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;title&amp;gt;Servlet upload&amp;lt;/title&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;/head&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;body&amp;gt;&quot;&lt;/span&gt;);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (i.hasNext())\n            {\n                &lt;span class=&quot;hljs-type&quot;&gt;FileItem&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fi&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; (FileItem)i.next();\n                &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!fi.isFormField())\n                {\n                     &lt;span class=&quot;hljs-comment&quot;&gt;// Get the uploaded file parameters&lt;/span&gt;\n                     &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fieldName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fi.getFieldName();\n                     &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fi.getName();\n                     &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;contentType&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fi.getContentType();\n                     &lt;span class=&quot;hljs-type&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;isInMemory&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fi.isInMemory();\n                     &lt;span class=&quot;hljs-type&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;sizeInBytes&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fi.getSize();\n\n                     &lt;span class=&quot;hljs-comment&quot;&gt;// Write the file&lt;/span&gt;\n                     &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (fileName.lastIndexOf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\\\&quot;&lt;/span&gt;) &amp;gt;= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n                         file = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(filePath +\n                         fileName.substring(fileName.lastIndexOf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\\\&quot;&lt;/span&gt;)));\n                     }\n                     &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n                         file = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;(filePath +\n                         fileName.substring(fileName.lastIndexOf(&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\\\&quot;&lt;/span&gt;) + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;));\n                     }\n                     fi.write(file);\n                     out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Uploaded Filename: &quot;&lt;/span&gt; + fileName + &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;br&amp;gt;&quot;&lt;/span&gt;);\n                }\n            }\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;/body&amp;gt;&quot;&lt;/span&gt;);\n            out.println(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;/html&amp;gt;&quot;&lt;/span&gt;);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(Exception ex) {\n            System.out.println(ex);\n        }\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;doGet&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(HttpServletRequest request,\n                        HttpServletResponse response)&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; ServletException, java.io.IOException {\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ServletException&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;GET method used with &quot;&lt;/span&gt; +\n                 getClass().getName() + &lt;span class=&quot;hljs-string&quot;&gt;&quot;: POST method required.&quot;&lt;/span&gt;);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;File &lt;em&gt;web.xml&lt;/em&gt;&lt;/h3&gt;\n&lt;p&gt;Compile the above servlet UploadServlet and create the required entry in the &lt;em&gt;web.xml&lt;/em&gt; file as follows.&lt;/p&gt;\n&lt;pre class=&quot;lang-xml s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;servlet&lt;/span&gt;&amp;gt;&lt;/span&gt;\n   &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;servlet-name&lt;/span&gt;&amp;gt;&lt;/span&gt;UploadServlet&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;servlet-name&lt;/span&gt;&amp;gt;&lt;/span&gt;\n   &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;servlet-class&lt;/span&gt;&amp;gt;&lt;/span&gt;UploadServlet&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;servlet-class&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;servlet&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;servlet-mapping&lt;/span&gt;&amp;gt;&lt;/span&gt;\n   &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;servlet-name&lt;/span&gt;&amp;gt;&lt;/span&gt;UploadServlet&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;servlet-name&lt;/span&gt;&amp;gt;&lt;/span&gt;\n   &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;url-pattern&lt;/span&gt;&amp;gt;&lt;/span&gt;/UploadServlet&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;url-pattern&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;servlet-mapping&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Sending multiple files for file, we have to use &lt;code&gt;enctype=&quot;multipart/form-data&quot;&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;And to send multiple files, use &lt;code&gt;multiple=&quot;multiple&quot;&lt;/code&gt; in the &lt;em&gt;input&lt;/em&gt; tag:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&amp;lt;form action=&lt;span class=&quot;hljs-string&quot;&gt;&quot;upload&quot;&lt;/span&gt; method=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt; enctype=&lt;span class=&quot;hljs-string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt;&amp;gt;\n    &amp;lt;input type=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;fileattachments&quot;&lt;/span&gt;  multiple=&lt;span class=&quot;hljs-string&quot;&gt;&quot;multiple&quot;&lt;/span&gt;/&amp;gt;\n    &amp;lt;input type=&lt;span class=&quot;hljs-string&quot;&gt;&quot;submit&quot;&lt;/span&gt; /&amp;gt;\n&amp;lt;/form&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n    "],"id":170,"title":"How can I upload files to a server using JSP/Servlet?","content":"\n                \n&lt;p&gt;How can I upload files to server using JSP/Servlet?&lt;/p&gt;\n&lt;p&gt;I tried this:&lt;/p&gt;\n&lt;pre class=&quot;lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;action&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;upload&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;method&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;post&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;description&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;file&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;submit&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;form&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;However, I only get the file name, not the file content. When I add  &lt;code&gt;enctype=&quot;multipart/form-data&quot;&lt;/code&gt; to the &lt;code&gt;&amp;lt;form&amp;gt;&lt;/code&gt;, then &lt;code&gt;request.getParameter()&lt;/code&gt; returns &lt;code&gt;null&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;During research I stumbled upon &lt;a href=&quot;http://commons.apache.org/fileupload&quot; rel=&quot;noreferrer&quot;&gt;Apache Common FileUpload&lt;/a&gt;. I tried this:&lt;/p&gt;\n&lt;pre class=&quot;lang-java s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;FileItemFactory&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;factory&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DiskFileItemFactory&lt;/span&gt;();\n&lt;span class=&quot;hljs-type&quot;&gt;ServletFileUpload&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;upload&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ServletFileUpload&lt;/span&gt;(factory);\n&lt;span class=&quot;hljs-type&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;items&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; upload.parseRequest(request); &lt;span class=&quot;hljs-comment&quot;&gt;// This line is where it died.&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Unfortunately, the servlet threw an exception without a clear message and cause. Here is the stacktrace:&lt;/p&gt;\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;SEVERE: Servlet.service() for servlet UploadServlet threw exception\njavax.servlet.ServletException: Servlet execution threw an exception\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:313)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n    at java.lang.Thread.run(Thread.java:637)\n&lt;/code&gt;&lt;/pre&gt;\n    ","slug":"how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658","postType":"QUESTION","createdAt":"2022-07-09T16:40:47.000Z","updatedAt":"2022-07-09T16:40:47.000Z","tags":[{"id":624,"name":"servlets","slug":"servlets","createdAt":"2022-07-09T16:40:47.000Z","updatedAt":"2022-07-09T16:40:47.000Z","Questions_Tags":{"questionId":170,"tagId":624}},{"id":625,"name":"jakarta-ee","slug":"jakarta-ee","createdAt":"2022-07-09T16:40:47.000Z","updatedAt":"2022-07-09T16:40:47.000Z","Questions_Tags":{"questionId":170,"tagId":625}},{"id":626,"name":"file-upload","slug":"file-upload","createdAt":"2022-07-09T16:40:47.000Z","updatedAt":"2022-07-09T16:40:47.000Z","Questions_Tags":{"questionId":170,"tagId":626}}],"relatedQuestions":[{"title":"How can I upload files to a server using JSP/Servlet?","slug":"how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658","tags":[{"name":"servlets","Questions_Tags":{"questionId":170,"tagId":624}},{"name":"jakarta-ee","Questions_Tags":{"questionId":170,"tagId":625}},{"name":"file-upload","Questions_Tags":{"questionId":170,"tagId":626}}]}]},"randomQuestions":[{"title":"How can I sort arrays and data in PHP?","slug":"how-can-i-sort-arrays-and-data-in-php-1657384726665"},{"title":"The Use of Multiple JFrames: Good or Bad Practice? [closed]","slug":"the-use-of-multiple-jframes:-good-or-bad-practice-closed-1657384478184"},{"title":"My attempt at value initialization is interpreted as a function declaration, and why doesn't A a(()); solve it?","slug":"my-attempt-at-value-initialization-is-interpreted-as-a-function-declaration-and-why-doesn't-a-a(())-solve-it-1657388474057"},{"title":"Aggregate / summarize multiple variables per group (e.g. sum, mean)","slug":"aggregate-summarize-multiple-variables-per-group-(e.g.-sum-mean)-1657387764061"},{"title":"Providing white space in a Swing GUI","slug":"providing-white-space-in-a-swing-gui-1657384734588"},{"title":"How to remove the space between inline/inline-block elements?","slug":"how-to-remove-the-space-between-inlineinline-block-elements-1657384532273"},{"title":"How do function pointers in C work?","slug":"how-do-function-pointers-in-c-work-1657388332074"},{"title":"What is the canonical way to check for errors using the CUDA runtime API?","slug":"what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api-1657387302698"},{"title":"Are dictionaries ordered in Python 3.6+?","slug":"are-dictionaries-ordered-in-python-3.6+-1657387834234"},{"title":"What is The Rule of Three?","slug":"what-is-the-rule-of-three-1657384390295"},{"title":"How can I read inputs as numbers?","slug":"how-can-i-read-inputs-as-numbers-1657384503324"},{"title":"What is the best way to detect a mobile device?","slug":"what-is-the-best-way-to-detect-a-mobile-device-1657387665025"},{"title":"What is the meaning of single and double underscore before an object name?","slug":"what-is-the-meaning-of-single-and-double-underscore-before-an-object-name-1657387926929"},{"title":"Captured variable in a loop in C#","slug":"captured-variable-in-a-loop-in-c-1657387696779"},{"title":"Can a local variable's memory be accessed outside its scope?","slug":"can-a-local-variable's-memory-be-accessed-outside-its-scope-1657384460386"},{"title":"How to remove items from a list while iterating?","slug":"how-to-remove-items-from-a-list-while-iterating-1657384496375"},{"title":"Why can templates only be implemented in the header file?","slug":"why-can-templates-only-be-implemented-in-the-header-file-1657384341933"},{"title":"Download a file by jQuery.Ajax","slug":"download-a-file-by-jquery.ajax-1657388220611"},{"title":"Is there a CSS parent selector?","slug":"is-there-a-css-parent-selector-1657384430692"},{"title":"How can I combine two strings together in PHP?","slug":"how-can-i-combine-two-strings-together-in-php-1657388279401"}]},"__N_SSG":true}