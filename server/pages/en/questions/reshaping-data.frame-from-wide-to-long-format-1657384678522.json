{"pageProps":{"data":{"answer":["\n&lt;p&gt;Three alternative solutions:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;1) With &lt;a href=&quot;/questions/tagged/data.table&quot; class=&quot;post-tag&quot; title=&quot;show questions tagged &apos;data.table&apos;&quot; rel=&quot;tag&quot;&gt;data.table&lt;/a&gt;:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;You can use the same &lt;code&gt;melt&lt;/code&gt; function as in the &lt;code&gt;reshape2&lt;/code&gt; package (which is an extended &amp;amp; improved implementation). &lt;code&gt;melt&lt;/code&gt; from &lt;code&gt;data.table&lt;/code&gt; has also more parameters that the &lt;code&gt;melt&lt;/code&gt;-function from &lt;code&gt;reshape2&lt;/code&gt;. You can for example also specify the name of the variable-column:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nlong &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;setDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; id.vars &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Code&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Country&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; variable.name &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;which gives:&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; long\n    Code     Country year  value\n &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;  AFG Afghanistan &lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;249&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;  ALB     Albania &lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;097&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;  AFG Afghanistan &lt;span class=&quot;hljs-number&quot;&gt;1951&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;352&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;  ALB     Albania &lt;span class=&quot;hljs-number&quot;&gt;1951&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;986&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;  AFG Afghanistan &lt;span class=&quot;hljs-number&quot;&gt;1952&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;532&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;  ALB     Albania &lt;span class=&quot;hljs-number&quot;&gt;1952&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;058&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;  AFG Afghanistan &lt;span class=&quot;hljs-number&quot;&gt;1953&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;557&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;  ALB     Albania &lt;span class=&quot;hljs-number&quot;&gt;1953&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;123&lt;/span&gt;\n &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;  AFG Afghanistan &lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;555&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;  ALB     Albania &lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;246&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Some alternative notations:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;melt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;setDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; id.vars &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; variable.name &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nmelt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;setDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; measure.vars &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; variable.name &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nmelt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;setDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; measure.vars &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.character&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; variable.name &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;2) With &lt;a href=&quot;/questions/tagged/tidyr&quot; class=&quot;post-tag&quot; title=&quot;show questions tagged &apos;tidyr&apos;&quot; rel=&quot;tag&quot;&gt;tidyr&lt;/a&gt;:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;tidyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nlong &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; wide &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; gather&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;Code&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; Country&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Some alternative notations:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;wide &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; gather&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;Code&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;Country&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nwide &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; gather&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nwide &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; gather&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nwide &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; gather&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nwide &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; gather&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nwide &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; gather&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; `&lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;`:`1954`)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;3) With &lt;a href=&quot;/questions/tagged/reshape2&quot; class=&quot;post-tag&quot; title=&quot;show questions tagged &apos;reshape2&apos;&quot; rel=&quot;tag&quot;&gt;reshape2&lt;/a&gt;:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;reshape2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nlong &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; id.vars &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Code&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Country&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Some alternative notations that give the same result:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;# you can also define the id-variables by column number&lt;/span&gt;\nmelt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; id.vars &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# as an alternative you can also specify the measure-variables&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# all other variables will then be used as id-variables&lt;/span&gt;\nmelt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; measure.vars &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nmelt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; measure.vars &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.character&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;NOTES:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;/questions/tagged/reshape2&quot; class=&quot;post-tag&quot; title=&quot;show questions tagged &apos;reshape2&apos;&quot; rel=&quot;tag&quot;&gt;reshape2&lt;/a&gt; is retired. Only changes necessary to keep it on CRAN will be made. (&lt;a href=&quot;https://github.com/hadley/reshape#status&quot; rel=&quot;noreferrer&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;If you want to exclude &lt;code&gt;NA&lt;/code&gt; values, you can add &lt;code&gt;na.rm = TRUE&lt;/code&gt; to the &lt;code&gt;melt&lt;/code&gt; as well as the &lt;code&gt;gather&lt;/code&gt; functions.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Another problem with the data is that the values will be read by R as character-values (as a result of the &lt;code&gt;,&lt;/code&gt; in the numbers). You can repair that with &lt;code&gt;gsub&lt;/code&gt; and &lt;code&gt;as.numeric&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;long&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;value &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.numeric&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;gsub&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; long&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;value&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or directly with &lt;code&gt;data.table&lt;/code&gt; or &lt;code&gt;dplyr&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;# data.table&lt;/span&gt;\nlong &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;setDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n             id.vars &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Code&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Country&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n             variable.name &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value &lt;span class=&quot;hljs-operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.numeric&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;gsub&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# tidyr and dplyr&lt;/span&gt;\nlong &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; wide &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; gather&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;Code&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;Country&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; \n  mutate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.numeric&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;gsub&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;&lt;strong&gt;Data:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;wide &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; read.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;text&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Code Country        1950    1951    1952    1953    1954\nAFG  Afghanistan    20,249  21,352  22,532  23,557  24,555\nALB  Albania        8,097   8,986   10,058  11,123  12,246&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; header&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; check.names&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;code&gt;reshape()&lt;/code&gt; takes a while to get used to, just as &lt;code&gt;melt&lt;/code&gt;/&lt;code&gt;cast&lt;/code&gt;. Here is a solution with reshape, assuming your data frame is called &lt;code&gt;d&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;reshape&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;d&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; \n        direction &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;long&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        varying &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;d&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        v.names &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Value&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        idvar &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Code&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Country&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        timevar &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n        times &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;With &lt;code&gt;tidyr_1.0.0&lt;/code&gt;, another option is &lt;code&gt;pivot_longer&lt;/code&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;tidyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\npivot_longer&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;Code&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; Country&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; values_to &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Value&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; names_to &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# A tibble: 10 x 4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#   Code  Country     Year  Value &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#   &amp;lt;fct&amp;gt; &amp;lt;fct&amp;gt;       &amp;lt;chr&amp;gt; &amp;lt;fct&amp;gt; &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1 AFG   Afghanistan 1950  20,249&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2 AFG   Afghanistan 1951  21,352&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 3 AFG   Afghanistan 1952  22,532&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 4 AFG   Afghanistan 1953  23,557&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 5 AFG   Afghanistan 1954  24,555&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 6 ALB   Albania     1950  8,097 &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 7 ALB   Albania     1951  8,986 &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 8 ALB   Albania     1952  10,058&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 9 ALB   Albania     1953  11,123&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#10 ALB   Albania     1954  12,246&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h3&gt;data&lt;/h3&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;df1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; structure&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;Code &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; structure&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; .Label &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;AFG&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;ALB&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;factor&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; \n    Country &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; structure&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; .Label &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Afghanistan&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Albania&quot;&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;factor&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; `&lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;` = structure(1:2, .Label = c(&quot;20,249&quot;, \n    &quot;8,097&quot;), class = &quot;factor&quot;), `1951` = structure(1:2, .Label = c(&quot;21,352&quot;, \n    &quot;8,986&quot;), class = &quot;factor&quot;), `1952` = structure(2:1, .Label = c(&quot;10,058&quot;, \n    &quot;22,532&quot;), class = &quot;factor&quot;), `1953` = structure(2:1, .Label = c(&quot;11,123&quot;, \n    &quot;23,557&quot;), class = &quot;factor&quot;), `1954` = structure(2:1, .Label = c(&quot;12,246&quot;, \n    &quot;24,555&quot;), class = &quot;factor&quot;)), class = &quot;data.frame&quot;, row.names = c(NA, \n-2L))\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Using &lt;em&gt;reshape&lt;/em&gt; package:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;#data&lt;/span&gt;\nx &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; read.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;textConnection&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;Code Country        1950    1951    1952    1953    1954\nAFG  Afghanistan    20,249  21,352  22,532  23,557  24,555\nALB  Albania        8,097   8,986   10,058  11,123  12,246&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; header&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;reshape&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\nx2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; id &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Code&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Country&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; variable_name &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nx2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.numeric&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;gsub&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;X&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; x2&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Since this answer is tagged with &lt;a href=&quot;/questions/tagged/r-faq&quot; class=&quot;post-tag&quot; title=&quot;show questions tagged &apos;r-faq&apos;&quot; rel=&quot;tag&quot;&gt;r-faq&lt;/a&gt;, I felt it would be useful to share another alternative from base R: &lt;code&gt;stack&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;Note, however, that &lt;code&gt;stack&lt;/code&gt; does not work with &lt;code&gt;factor&lt;/code&gt;s--it only works if &lt;code&gt;is.vector&lt;/code&gt; is &lt;code&gt;TRUE&lt;/code&gt;, and from the documentation for &lt;code&gt;is.vector&lt;/code&gt;, we find that:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;&lt;code&gt;is.vector&lt;/code&gt; returns &lt;code&gt;TRUE&lt;/code&gt; if x is a vector of the specified mode having no attributes &lt;em&gt;other than names&lt;/em&gt;. It returns &lt;code&gt;FALSE&lt;/code&gt; otherwise.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;I&apos;m using the sample data &lt;a href=&quot;https://stackoverflow.com/a/25856135/1270695&quot;&gt;from @Jaap&apos;s answer&lt;/a&gt;, where the values in the year columns are &lt;code&gt;factor&lt;/code&gt;s.&lt;/p&gt;\n\n&lt;p&gt;Here&apos;s the &lt;code&gt;stack&lt;/code&gt; approach:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;cbind&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; stack&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;lapply&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;as.character&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;##    Code     Country values  ind&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 1   AFG Afghanistan 20,249 1950&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 2   ALB     Albania  8,097 1950&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 3   AFG Afghanistan 21,352 1951&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 4   ALB     Albania  8,986 1951&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 5   AFG Afghanistan 22,532 1952&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 6   ALB     Albania 10,058 1952&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 7   AFG Afghanistan 23,557 1953&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 8   ALB     Albania 11,123 1953&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 9   AFG Afghanistan 24,555 1954&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;## 10  ALB     Albania 12,246 1954&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Here is another example showing the use of &lt;code&gt;gather&lt;/code&gt; from &lt;code&gt;tidyr&lt;/code&gt;. You can select the columns to &lt;code&gt;gather&lt;/code&gt; either by removing them individually (as I do here), or by including the years you want explicitly.&lt;/p&gt;\n\n&lt;p&gt;Note that, to handle the commas (and X&apos;s added if &lt;code&gt;check.names = FALSE&lt;/code&gt; is not set), I am also using &lt;code&gt;dplyr&lt;/code&gt;&apos;s mutate with &lt;code&gt;parse_number&lt;/code&gt; from &lt;code&gt;readr&lt;/code&gt; to convert the text values back to numbers. These are all part of the &lt;code&gt;tidyverse&lt;/code&gt; and so can be loaded together with &lt;code&gt;library(tidyverse)&lt;/code&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;wide &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt;\n  gather&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;Year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; Value&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;Code&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;Country&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt;\n  mutate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;Year &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; parse_number&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;Year&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n         &lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; Value &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; parse_number&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;Value&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Returns:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;   Code     Country Year Value\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;   AFG Afghanistan &lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;20249&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;   ALB     Albania &lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;8097&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;   AFG Afghanistan &lt;span class=&quot;hljs-number&quot;&gt;1951&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;21352&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;   ALB     Albania &lt;span class=&quot;hljs-number&quot;&gt;1951&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;8986&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;   AFG Afghanistan &lt;span class=&quot;hljs-number&quot;&gt;1952&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;22532&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;   ALB     Albania &lt;span class=&quot;hljs-number&quot;&gt;1952&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;10058&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;   AFG Afghanistan &lt;span class=&quot;hljs-number&quot;&gt;1953&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;23557&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;   ALB     Albania &lt;span class=&quot;hljs-number&quot;&gt;1953&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;11123&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;   AFG Afghanistan &lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;24555&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;  ALB     Albania &lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;12246&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Here&apos;s a &lt;a href=&quot;/questions/tagged/sqldf&quot; class=&quot;post-tag&quot; title=&quot;show questions tagged &apos;sqldf&apos;&quot; rel=&quot;tag&quot;&gt;sqldf&lt;/a&gt; solution:&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Select Code, Country, &apos;1950&apos; As Year, `1950` As Value From wide\n        Union All\n       Select Code, Country, &apos;1951&apos; As Year, `1951` As Value From wide\n        Union All\n       Select Code, Country, &apos;1952&apos; As Year, `1952` As Value From wide\n        Union All\n       Select Code, Country, &apos;1953&apos; As Year, `1953` As Value From wide\n        Union All\n       Select Code, Country, &apos;1954&apos; As Year, `1954` As Value From wide;&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;To make the query without typing in everything, you can use the following:&lt;/p&gt;\n&lt;p&gt;&lt;sup&gt;Thanks to G. Grothendieck for implementing it.&lt;/sup&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;ValCol &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; tail&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wide&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\ns &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; sprintf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Select Code, Country, &apos;%s&apos; As Year, `%s` As Value from wide&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; ValCol&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; ValCol&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nmquery &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; paste&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; collapse &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n Union All\\n&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\ncat&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;mquery&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;#just to show the query&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; Select Code, Country, &apos;1950&apos; As Year, `1950` As Value from wide&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  Union All&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; Select Code, Country, &apos;1951&apos; As Year, `1951` As Value from wide&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  Union All&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; Select Code, Country, &apos;1952&apos; As Year, `1952` As Value from wide&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  Union All&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; Select Code, Country, &apos;1953&apos; As Year, `1953` As Value from wide&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  Union All&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; Select Code, Country, &apos;1954&apos; As Year, `1954` As Value from wide&lt;/span&gt;\n\nsqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;mquery&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt; &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;    Code     Country Year  Value&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 1   AFG Afghanistan 1950 20,249&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 2   ALB     Albania 1950  8,097&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 3   AFG Afghanistan 1951 21,352&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 4   ALB     Albania 1951  8,986&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 5   AFG Afghanistan 1952 22,532&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 6   ALB     Albania 1952 10,058&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 7   AFG Afghanistan 1953 23,557&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 8   ALB     Albania 1953 11,123&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 9   AFG Afghanistan 1954 24,555&lt;/span&gt;\n &lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 10  ALB     Albania 1954 12,246&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Unfortunately, I don&apos;t think that &lt;code&gt;PIVOT&lt;/code&gt; and &lt;code&gt;UNPIVOT&lt;/code&gt; would work for &lt;code&gt;R&lt;/code&gt; &lt;code&gt;SQLite&lt;/code&gt;. If you want to write up your query in a more sophisticated manner, you can also take a look at these posts:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/40432590/r-sprintf-list-of-variables-of-mixed-type&quot;&gt;Using &lt;code&gt;sprintf&lt;/code&gt; writing up sql queries&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/7547950/how-can-i-pass-r-variable-into-sqldf&quot;&gt;Pass variables to &lt;code&gt;sqldf&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;You can also use the &lt;code&gt;cdata&lt;/code&gt; package, which uses the concept of (transformation) control table:&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;# data&lt;/span&gt;\nwide &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; read.table&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;text&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Code Country        1950    1951    1952    1953    1954\nAFG  Afghanistan    20,249  21,352  22,532  23,557  24,555\nALB  Albania        8,097   8,986   10,058  11,123  12,246&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; header&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; check.names&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;cdata&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# build control table&lt;/span&gt;\ndrec &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n    Year&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;as.character&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    Value&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;as.character&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    stringsAsFactors&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndrec &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; cdata&lt;span class=&quot;hljs-operator&quot;&gt;::&lt;/span&gt;rowrecs_to_blocks_spec&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;drec&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; recordKeys&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;Code&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Country&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# apply control table&lt;/span&gt;\ncdata&lt;span class=&quot;hljs-operator&quot;&gt;::&lt;/span&gt;layout_by&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;drec&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; wide&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;I am currently exploring that package and find it quite accessible. It is designed for much more complicated transformations and includes the backtransformation. There is &lt;a href=&quot;https://win-vector.com/2019/04/16/controlling-data-layout-with-cdata/&quot; rel=&quot;nofollow noreferrer&quot;&gt;a tutorial&lt;/a&gt; available.&lt;/p&gt;\n    "],"id":120,"title":"Reshaping data.frame from wide to long format","content":"\n                \n&lt;p&gt;I have some trouble to convert my &lt;code&gt;data.frame&lt;/code&gt; from a wide table to a long table.\nAt the moment it looks like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;Code Country        &lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;1951&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;1952&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;1953&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt;\nAFG  Afghanistan    &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;249&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;352&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;532&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;557&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;555&lt;/span&gt;\nALB  Albania        &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;097&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;986&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;058&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;123&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;246&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now I would like to transform this &lt;code&gt;data.frame&lt;/code&gt; into a long &lt;code&gt;data.frame&lt;/code&gt;.\nSomething like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;Code Country        Year    Value\nAFG  Afghanistan    &lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;249&lt;/span&gt;\nAFG  Afghanistan    &lt;span class=&quot;hljs-number&quot;&gt;1951&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;352&lt;/span&gt;\nAFG  Afghanistan    &lt;span class=&quot;hljs-number&quot;&gt;1952&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;532&lt;/span&gt;\nAFG  Afghanistan    &lt;span class=&quot;hljs-number&quot;&gt;1953&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;557&lt;/span&gt;\nAFG  Afghanistan    &lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;555&lt;/span&gt;\nALB  Albania        &lt;span class=&quot;hljs-number&quot;&gt;1950&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;097&lt;/span&gt;\nALB  Albania        &lt;span class=&quot;hljs-number&quot;&gt;1951&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;986&lt;/span&gt;\nALB  Albania        &lt;span class=&quot;hljs-number&quot;&gt;1952&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;058&lt;/span&gt;\nALB  Albania        &lt;span class=&quot;hljs-number&quot;&gt;1953&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;123&lt;/span&gt;\nALB  Albania        &lt;span class=&quot;hljs-number&quot;&gt;1954&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;246&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I have looked at and already tried using the &lt;code&gt;melt()&lt;/code&gt; and the &lt;code&gt;reshape()&lt;/code&gt; functions\nas some people were suggesting in similar questions.\nHowever, so far I only get messy results.&lt;/p&gt;\n\n&lt;p&gt;If it is possible I would like to do it with the &lt;code&gt;reshape()&lt;/code&gt; function since\nit looks a little bit nicer to handle.&lt;/p&gt;\n    ","slug":"reshaping-data.frame-from-wide-to-long-format-1657384678522","postType":"QUESTION","createdAt":"2022-07-09T16:37:58.000Z","updatedAt":"2022-07-09T16:37:58.000Z","tags":[{"id":440,"name":"dataframe","slug":"dataframe","createdAt":"2022-07-09T16:37:58.000Z","updatedAt":"2022-07-09T16:37:58.000Z","Questions_Tags":{"questionId":120,"tagId":440}}],"relatedQuestions":[{"title":"Reshaping data.frame from wide to long format","slug":"reshaping-data.frame-from-wide-to-long-format-1657384678522","tags":[{"name":"dataframe","Questions_Tags":{"questionId":120,"tagId":440}}]}]},"randomQuestions":[{"title":"GUI not working after rewriting to MVC","slug":"gui-not-working-after-rewriting-to-mvc-1657388388035"},{"title":"Parsing a string to a date in JavaScript","slug":"parsing-a-string-to-a-date-in-javascript-1657387782497"},{"title":"Get the values from the \"GET\" parameters (JavaScript) [duplicate]","slug":"get-the-values-from-the-\"get\"-parameters-(javascript)-duplicate-1657387656693"},{"title":"Why do I need to override the equals and hashCode methods in Java?","slug":"why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877"},{"title":"Why do regex constructors need to be double escaped?","slug":"why-do-regex-constructors-need-to-be-double-escaped-1657388004942"},{"title":"Get the data received in a Flask request","slug":"get-the-data-received-in-a-flask-request-1657387804432"},{"title":"re.findall behaves weird","slug":"re.findall-behaves-weird-1657388408049"},{"title":"How to calculate the difference between two dates using PHP?","slug":"how-to-calculate-the-difference-between-two-dates-using-php-1657387409560"},{"title":"Using regular expressions to parse HTML: why not?","slug":"using-regular-expressions-to-parse-html:-why-not-1657387543969"},{"title":"How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?","slug":"how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other-resources-needed-by-my-javafx-application-1657388143988"},{"title":"How to add to the PYTHONPATH in Windows, so it finds my modules/packages?","slug":"how-to-add-to-the-pythonpath-in-windows-so-it-finds-my-modulespackages-1657388540360"},{"title":"Does JavaScript guarantee object property order?","slug":"does-javascript-guarantee-object-property-order-1657384822587"},{"title":"Sort array of objects by string property value","slug":"sort-array-of-objects-by-string-property-value-1657384860090"},{"title":"How to read a file line-by-line into a list?","slug":"how-to-read-a-file-line-by-line-into-a-list-1657387865894"},{"title":"Truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all()","slug":"truth-value-of-a-series-is-ambiguous.-use-a.empty-a.bool()-a.item()-a.any()-or-a.all()-1657387724259"},{"title":"How do I copy to the clipboard in JavaScript?","slug":"how-do-i-copy-to-the-clipboard-in-javascript-1657385501223"},{"title":"How can I convert ereg expressions to preg in PHP?","slug":"how-can-i-convert-ereg-expressions-to-preg-in-php-1657387652855"},{"title":"Make container shrink-to-fit child elements as they wrap","slug":"make-container-shrink-to-fit-child-elements-as-they-wrap-1657388134549"},{"title":"Storing Images in DB - Yea or Nay?","slug":"storing-images-in-db-yea-or-nay-1657387248067"},{"title":"What is event bubbling and capturing?","slug":"what-is-event-bubbling-and-capturing-1657388059203"}]},"__N_SSG":true}