<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>How to generate a self-signed SSL certificate using OpenSSL? [closed] | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="
            
        
            
                
                    
                        Closed. This question does not meet Stack Overflow guidelines. It is not currently accepting answers.
                        
                    
                
            
        
            
        
            
                
                        
                            
                        
                     We don’t allow questions about professional server or networking-related infrastructure administration on Stack Overflow. You can edit the question so it’s on-topic for Stack Overflow.
                
                    
                        Closed last month.
                    
                
            The community is reviewing whether to reopen this question as of 2 hours ago.

                
            
        
            
                    
                        Improve this question
                    
            


    

I&#x27;m adding HTTPS support to an embedded Linux device. I have tried to generate a self-signed certificate with these steps:

openssl req -new &gt; cert.csr
openssl rsa -in privkey.pem -out key.pem
openssl x509 -in cert.csr -out cert.pem -req -signkey key.pem -days 1001
cat key.pem&gt;&gt;cert.pem


This works, but I get some errors with, for example, Google Chrome:


  This is probably not the site you are looking for!
  The site&#x27;s security certificate is not trusted!


Am I missing something? Is this the correct way to build a self-signed certificate?
    "/><meta property="og:title" content="How to generate a self-signed SSL certificate using OpenSSL? [closed] | Solutions Checker"/><meta property="og:description" content="
            
        
            
                
                    
                        Closed. This question does not meet Stack Overflow guidelines. It is not currently accepting answers.
                        
                    
                
            
        
            
        
            
                
                        
                            
                        
                     We don’t allow questions about professional server or networking-related infrastructure administration on Stack Overflow. You can edit the question so it’s on-topic for Stack Overflow.
                
                    
                        Closed last month.
                    
                
            The community is reviewing whether to reopen this question as of 2 hours ago.

                
            
        
            
                    
                        Improve this question
                    
            


    

I&#x27;m adding HTTPS support to an embedded Linux device. I have tried to generate a self-signed certificate with these steps:

openssl req -new &gt; cert.csr
openssl rsa -in privkey.pem -out key.pem
openssl x509 -in cert.csr -out cert.pem -req -signkey key.pem -days 1001
cat key.pem&gt;&gt;cert.pem


This works, but I get some errors with, for example, Google Chrome:


  This is probably not the site you are looking for!
  The site&#x27;s security certificate is not trusted!


Am I missing something? Is this the correct way to build a self-signed certificate?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How to generate a self-signed SSL certificate using OpenSSL? [closed]","text":"\n            \n        \n            \n                \n                    \n                        Closed. This question does not meet Stack Overflow guidelines. It is not currently accepting answers.\n                        \n                    \n                \n            \n        \n            \n        \n            \n                \n                        \n                            \n                        \n                     We don’t allow questions about professional server or networking-related infrastructure administration on Stack Overflow. You can edit the question so it’s on-topic for Stack Overflow.\n                \n                    \n                        Closed last month.\n                    \n                \n            The community is reviewing whether to reopen this question as of 2 hours ago.\n\n                \n            \n        \n            \n                    \n                        Improve this question\n                    \n            \n\n\n    \n\nI&apos;m adding HTTPS support to an embedded Linux device. I have tried to generate a self-signed certificate with these steps:\n\nopenssl req -new &gt; cert.csr\nopenssl rsa -in privkey.pem -out key.pem\nopenssl x509 -in cert.csr -out cert.pem -req -signkey key.pem -days 1001\ncat key.pem&gt;&gt;cert.pem\n\n\nThis works, but I get some errors with, for example, Google Chrome:\n\n\n  This is probably not the site you are looking for!\n  The site&apos;s security certificate is not trusted!\n\n\nAm I missing something? Is this the correct way to build a self-signed certificate?\n    ","answerCount":20,"upVoteCount":500,"suggestedAnswer":[{"text":"You can do that in one command:\nopenssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -sha256 -days 365\n\nYou can also add -nodes (short for &quot;no DES&quot;) if you don&apos;t want to protect your private key with a passphrase. Otherwise it will prompt you for &quot;at least a 4 character&quot; password.\nThe days parameter (365) you can replace with any number to affect the expiration date. It will then prompt you for things like &quot;Country Name&quot;, but you can just hit Enter and accept the defaults.\nAdd -subj &apos;/CN=localhost&apos; to suppress questions about the contents of the certificate (replace localhost with your desired domain).\nSelf-signed certificates are not validated with any third party unless you import them to the browsers previously. If you need more security, you should use a certificate signed by a certificate authority (CA).\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"\nAm I missing something? Is this the correct way to build a self-signed certificate?\n\nIt&apos;s easy to create a self-signed certificate. You just use the openssl req command. It can be tricky to create one that can be consumed by the largest selection of clients, like browsers and command line tools.\nIt&apos;s difficult because the browsers have their own set of requirements, and they are more restrictive than the IETF. The requirements used by browsers are documented at the CA/Browser Forums (see references below). The restrictions arise in two key areas: (1) trust anchors, and (2) DNS names.\nModern browsers (like the warez we&apos;re using in 2014/2015) want a certificate that chains back to a trust anchor, and they want DNS names to be presented in particular ways in the certificate. And browsers are actively moving against self-signed server certificates.\nSome browsers don&apos;t exactly make it easy to import a self-signed server certificate. In fact, you can&apos;t with some browsers, like Android&apos;s browser. So the complete solution is to become your own authority.\nIn the absence of becoming your own authority, you have to get the DNS names right to give the certificate the greatest chance of success. But I would encourage you to become your own authority. It&apos;s easy to become your own authority, and it will sidestep all the trust issues (who better to trust than yourself?).\n\n\nThis is probably not the site you are looking for!\nThe site&apos;s security certificate is not trusted!\n\nThis is because browsers use a predefined list of trust anchors to validate server certificates. A self-signed certificate does not chain back to a trusted anchor.\nThe best way to avoid this is:\n\nCreate your own authority (i.e., become a CA)\nCreate a certificate signing request (CSR) for the server\nSign the server&apos;s CSR with your CA key\nInstall the server certificate on the server\nInstall the CA certificate on the client\n\nStep 1 - Create your own authority just means to create a self-signed certificate with CA: true and proper key usage. That means the Subject and Issuer are the same entity, CA is set to true in Basic Constraints (it should also be marked as critical), key usage is keyCertSign and crlSign (if you are using CRLs), and the Subject Key Identifier (SKI) is the same as the Authority Key Identifier (AKI).\nTo become your own certificate authority, see *How do you sign a certificate signing request with your certification authority? on Stack Overflow. Then, import your CA into the Trust Store used by the browser.\nSteps 2 - 4 are roughly what you do now for a public facing server when you enlist the services of a CA like Startcom or CAcert. Steps 1 and 5 allows you to avoid the third-party authority, and act as your own authority (who better to trust than yourself?).\nThe next best way to avoid the browser warning is to trust the server&apos;s certificate. But some browsers, like Android&apos;s default browser, do not let you do it. So it will never work on the platform.\nThe issue of browsers (and other similar user agents) not trusting self-signed certificates is going to be a big problem in the Internet of Things (IoT). For example, what is going to happen when you connect to your thermostat or refrigerator to program it? The answer is, nothing good as far as the user experience is concerned.\nThe W3C&apos;s WebAppSec Working Group is starting to look at the issue.  See, for example, Proposal: Marking HTTP As Non-Secure.\n\n\nHow to create a self-signed certificate with OpenSSL\n\nThe commands below and the configuration file create a self-signed certificate (it also shows you how to create a signing request). They differ from other answers in one respect: the DNS names used for the self signed certificate are in the Subject Alternate Name (SAN), and not the Common Name (CN).\nThe DNS names are placed in the SAN through the configuration file with the line subjectAltName = @alternate_names (there&apos;s no way to do it through the command line). Then there&apos;s an alternate_names section in the configuration file (you should tune this to suit your taste):\n[ alternate_names ]\n\nDNS.1       = example.com\nDNS.2       = www.example.com\nDNS.3       = mail.example.com\nDNS.4       = ftp.example.com\n\n# Add these if you need them. But usually you don&apos;t want them or\n#   need them in production. You may need them for development.\n# DNS.5       = localhost\n# DNS.6       = localhost.localdomain\n# IP.1        = 127.0.0.1\n# IP.2        = ::1\n\nIt&apos;s important to put DNS name in the SAN and not the CN, because both the IETF and the CA/Browser Forums specify the practice. They also specify that DNS names in the CN are deprecated (but not prohibited). If you put a DNS name in the CN, then it must be included in the SAN under the CA/B policies. So you can&apos;t avoid using the Subject Alternate Name.\nIf you don&apos;t do put DNS names in the SAN, then the certificate will fail to validate under a browser and other user agents which follow the CA/Browser Forum guidelines.\nRelated: browsers follow the CA/Browser Forum policies; and not the IETF policies. That&apos;s one of the reasons a certificate created with OpenSSL (which generally follows the IETF) sometimes does not validate under a browser (browsers follow the CA/B). They are different standards, they have different issuing policies and different validation requirements.\n\nCreate a self signed certificate (notice the addition of -x509 option):\nopenssl req -config example-com.conf -new -x509 -sha256 -newkey rsa:2048 -nodes \\\n    -keyout example-com.key.pem -days 365 -out example-com.cert.pem\n\nCreate a signing request (notice the lack of -x509 option):\nopenssl req -config example-com.conf -new -sha256 -newkey rsa:2048 -nodes \\\n    -keyout example-com.key.pem -days 365 -out example-com.req.pem\n\nPrint a self-signed certificate:\nopenssl x509 -in example-com.cert.pem -text -noout\n\nPrint a signing request:\nopenssl req -in example-com.req.pem -text -noout\n\nConfiguration file (passed via -config option)\n[ req ]\ndefault_bits        = 2048\ndefault_keyfile     = server-key.pem\ndistinguished_name  = subject\nreq_extensions      = req_ext\nx509_extensions     = x509_ext\nstring_mask         = utf8only\n\n# The Subject DN can be formed using X501 or RFC 4514 (see RFC 4519 for a description).\n#   Its sort of a mashup. For example, RFC 4514 does not provide emailAddress.\n[ subject ]\ncountryName         = Country Name (2 letter code)\ncountryName_default     = US\n\nstateOrProvinceName     = State or Province Name (full name)\nstateOrProvinceName_default = NY\n\nlocalityName            = Locality Name (eg, city)\nlocalityName_default        = New York\n\norganizationName         = Organization Name (eg, company)\norganizationName_default    = Example, LLC\n\n# Use a friendly name here because it&apos;s presented to the user. The server&apos;s DNS\n#   names are placed in Subject Alternate Names. Plus, DNS names here is deprecated\n#   by both IETF and CA/Browser Forums. If you place a DNS name here, then you\n#   must include the DNS name in the SAN too (otherwise, Chrome and others that\n#   strictly follow the CA/Browser Baseline Requirements will fail).\ncommonName          = Common Name (e.g. server FQDN or YOUR name)\ncommonName_default      = Example Company\n\nemailAddress            = Email Address\nemailAddress_default        = test@example.com\n\n# Section x509_ext is used when generating a self-signed certificate. I.e., openssl req -x509 ...\n[ x509_ext ]\n\nsubjectKeyIdentifier        = hash\nauthorityKeyIdentifier    = keyid,issuer\n\n# You only need digitalSignature below. *If* you don&apos;t allow\n#   RSA Key transport (i.e., you use ephemeral cipher suites), then\n#   omit keyEncipherment because that&apos;s key transport.\nbasicConstraints        = CA:FALSE\nkeyUsage            = digitalSignature, keyEncipherment\nsubjectAltName          = @alternate_names\nnsComment           = &quot;OpenSSL Generated Certificate&quot;\n\n# RFC 5280, Section 4.2.1.12 makes EKU optional\n#   CA/Browser Baseline Requirements, Appendix (B)(3)(G) makes me confused\n#   In either case, you probably only need serverAuth.\n# extendedKeyUsage    = serverAuth, clientAuth\n\n# Section req_ext is used when generating a certificate signing request. I.e., openssl req ...\n[ req_ext ]\n\nsubjectKeyIdentifier        = hash\n\nbasicConstraints        = CA:FALSE\nkeyUsage            = digitalSignature, keyEncipherment\nsubjectAltName          = @alternate_names\nnsComment           = &quot;OpenSSL Generated Certificate&quot;\n\n# RFC 5280, Section 4.2.1.12 makes EKU optional\n#   CA/Browser Baseline Requirements, Appendix (B)(3)(G) makes me confused\n#   In either case, you probably only need serverAuth.\n# extendedKeyUsage    = serverAuth, clientAuth\n\n[ alternate_names ]\n\nDNS.1       = example.com\nDNS.2       = www.example.com\nDNS.3       = mail.example.com\nDNS.4       = ftp.example.com\n\n# Add these if you need them. But usually you don&apos;t want them or\n#   need them in production. You may need them for development.\n# DNS.5       = localhost\n# DNS.6       = localhost.localdomain\n# DNS.7       = 127.0.0.1\n\n# IPv6 localhost\n# DNS.8     = ::1\n\nYou may need to do the following for Chrome. Otherwise Chrome may complain a Common Name is invalid (ERR_CERT_COMMON_NAME_INVALID). I&apos;m not sure what the relationship is between an IP address in the SAN and a CN in this instance.\n# IPv4 localhost\n# IP.1       = 127.0.0.1\n\n# IPv6 localhost\n# IP.2     = ::1\n\n\nThere are other rules concerning the handling of DNS names in X.509/PKIX certificates. Refer to these documents for the rules:\n\nRFC 5280, Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile\nRFC 6125, Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)\nRFC 6797, Appendix A, HTTP Strict Transport Security (HSTS)\nRFC 7469, Public Key Pinning Extension for HTTP\nCA/Browser Forum Baseline Requirements\nCA/Browser Forum Extended Validation Guidelines\n\nRFC 6797 and RFC 7469 are listed, because they are more restrictive than the other RFCs and CA/B documents. RFCs 6797 and 7469 do not allow an IP address, either.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"As of 2022 with OpenSSL  1.1.1, the following command serves all your needs, including Subject Alternate Name (SAN):\nopenssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \\\n  -keyout example.key -out example.crt -subj &quot;/CN=example.com&quot; \\\n  -addext &quot;subjectAltName=DNS:example.com,DNS:www.example.net,IP:10.0.0.1&quot;\n\n\nOn old systems with OpenSSL  1.1.0, such as Debian  9 or CentOS  7, a longer version of this command needs to be used:\nopenssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \\\n  -keyout example.key -out example.crt -extensions san -config \\\n  &lt;(echo &quot;[req]&quot;; \n    echo distinguished_name=req; \n    echo &quot;[san]&quot;; \n    echo subjectAltName=DNS:example.com,DNS:www.example.net,IP:10.0.0.1\n    ) \\\n  -subj &quot;/CN=example.com&quot;\n\nEither command creates a certificate that is\n\nvalid for the (sub)domains example.com and www.example.net (SAN),\nalso valid for the IP address 10.0.0.1 (SAN),\nrelatively strong (as of 2022) and\nvalid for 3650 days (~10 years).\n\nThe following files are generated:\n\nPrivate key: example.key\nCertificate: example.crt\n\nAll information is provided at the command line. There is no interactive input that annoys you. There are no config files you have to mess around with. All necessary steps are executed by a single OpenSSL invocation: from private key generation up to the self-signed certificate.\n\nRemark #1: Crypto parameters\nSince the certificate is self-signed and needs to be accepted by users manually, it doesn&apos;t make sense to use a short expiration or weak cryptography.\nIn the future, you might want to use more than 4096 bits for the RSA key and a hash algorithm stronger than sha256, but as of 2022 these are sane values. They are sufficiently strong while being supported by all modern browsers.\nRemark #2: Parameter &quot;-nodes&quot;\nTheoretically you could leave out the -nodes parameter (which means &quot;no DES encryption&quot;), in which case example.key would be encrypted with a password. However, this is almost never useful for a server installation, because you would either have to store the password on the server as well, or you&apos;d have to enter it manually on each reboot.\nRemark #3: See also\n\nProvide subjectAltName to openssl directly on command line\nHow to add multiple email addresses to an SSL certificate via the command line?\nMore information about MSYS_NO_PATHCONV\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Here are the options described in @diegows&apos;s answer, described in more detail, from the documentation:\n\nopenssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days XXX\n\n\n\nreq\n\n  \n  PKCS#10 certificate request and certificate generating utility.\n\n-x509\n\n  \n  this option outputs a self signed certificate instead of a certificate request.\n  This is typically used to generate a test certificate or a self signed root CA.\n\n-newkey arg\n\n  \n  this option creates a new certificate request and a new private key. The argument\n  takes one of several forms. rsa:nbits, where nbits is the number of bits,\n  generates an RSA key nbits in size.\n\n-keyout filename\n\n  \n  this gives the filename to write the newly created private key to.\n\n-out filename\n\n  \n  This specifies the output filename to write to or standard output by default.\n\n-days n\n\n  \n  when the -x509 option is being used this specifies the number of days to certify\n  the certificate for. The default is 30 days.\n\n-nodes\n\n  \n  if this option is specified then if a private key is created it will not be encrypted.\n\n\nThe documentation is actually more detailed than the above; I just summarized it here.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"I can&apos;t comment, so I will put this as a separate answer. I found a few issues with the accepted one-liner answer:\n\n\nThe one-liner includes a passphrase in the key.\nThe one-liner uses SHA-1 which in many browsers throws warnings in console.\n\n\nHere is a simplified version that removes the passphrase, ups the security to suppress warnings and includes a suggestion in comments to pass in -subj to remove the full question list:\n\nopenssl genrsa -out server.key 2048\nopenssl rsa -in server.key -out server.key\nopenssl req -sha256 -new -key server.key -out server.csr -subj &apos;/CN=localhost&apos;\nopenssl x509 -req -sha256 -days 365 -in server.csr -signkey server.key -out server.crt\n\n\nReplace &apos;localhost&apos; with whatever domain you require.  You will need to run the first two commands one by one as OpenSSL will prompt for a passphrase.\n\nTo combine the two into a .pem file:\n\ncat server.crt server.key &gt; cert.pem\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"Modern browsers now throw a security error for otherwise well-formed self-signed certificates if they are missing a SAN (Subject Alternate Name). OpenSSL does not provide a command-line way to specify this, so many developers&apos; tutorials and bookmarks are suddenly outdated.\n\nThe quickest way to get running again is a short, stand-alone conf file:\n\n\nCreate an OpenSSL config file (example: req.cnf)\n\n[req]\ndistinguished_name = req_distinguished_name\nx509_extensions = v3_req\nprompt = no\n[req_distinguished_name]\nC = US\nST = VA\nL = SomeCity\nO = MyCompany\nOU = MyDivision\nCN = www.company.com\n[v3_req]\nkeyUsage = critical, digitalSignature, keyAgreement\nextendedKeyUsage = serverAuth\nsubjectAltName = @alt_names\n[alt_names]\nDNS.1 = www.company.com\nDNS.2 = company.com\nDNS.3 = company.net\n\nCreate the certificate referencing this config file\n\nopenssl req -x509 -nodes -days 730 -newkey rsa:2048 \\\n -keyout cert.key -out cert.pem -config req.cnf -sha256\n\n\n\nExample config from https://support.citrix.com/article/CTX135602\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"I would recommend to add the -sha256 parameter, to use the SHA-2 hash algorithm, because major browsers are considering to show &quot;SHA-1 certificates&quot; as not secure.\n\nThe same command line from the accepted answer - @diegows with added -sha256\n\n\n  openssl req -x509 -sha256 -newkey rsa:2048 -keyout key.pem -out cert.pem -days XXX\n\n\nMore information in Google Security blog.\n\nUpdate May 2018. As many noted in the comments that using SHA-2 does not add any security to a self-signed certificate. But I still recommend using it as a good habit of not using outdated / insecure cryptographic hash functions. Full explanation is available in Why is it fine for certificates above the end-entity certificate to be SHA-1 based?.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"I can`t comment so I add a separate answer.\nI tried to create a self-signed certificate for NGINX and it was easy, but when I wanted to add it to Chrome white list I had a problem. And my solution was to create a Root certificate and signed a child certificate by it.\nSo step by step.\nCreate file config_ssl_ca.cnf\nNotice, config file has an option basicConstraints=CA:true which means that this certificate is supposed to be root.\n\nThis is a good practice, because you create it once and can reuse.\n\n[ req ]\ndefault_bits = 2048\n\nprompt = no\ndistinguished_name=req_distinguished_name\nreq_extensions = v3_req\n\n[ req_distinguished_name ]\ncountryName=UA\nstateOrProvinceName=root region\nlocalityName=root city\norganizationName=Market(localhost)\norganizationalUnitName=roote department\ncommonName=market.localhost\nemailAddress=root_email@root.localhost\n\n[ alternate_names ]\nDNS.1        = market.localhost\nDNS.2        = www.market.localhost\nDNS.3        = mail.market.localhost\nDNS.4        = ftp.market.localhost\nDNS.5        = *.market.localhost\n\n[ v3_req ]\nkeyUsage=digitalSignature\nbasicConstraints=CA:true\nsubjectKeyIdentifier = hash\nsubjectAltName = @alternate_names\n\nNext config file for your child certificate will be call config_ssl.cnf.\n[ req ]\ndefault_bits = 2048\n\nprompt = no\ndistinguished_name=req_distinguished_name\nreq_extensions = v3_req\n\n[ req_distinguished_name ]\ncountryName=UA\nstateOrProvinceName=Kyiv region\nlocalityName=Kyiv\norganizationName=market place\norganizationalUnitName=market place department\ncommonName=market.localhost\nemailAddress=email@market.localhost\n\n[ alternate_names ]\nDNS.1        = market.localhost\nDNS.2        = www.market.localhost\nDNS.3        = mail.market.localhost\nDNS.4        = ftp.market.localhost\nDNS.5        = *.market.localhost\n\n[ v3_req ]\nkeyUsage=digitalSignature\nbasicConstraints=CA:false\nsubjectAltName = @alternate_names\nsubjectKeyIdentifier = hash\n\nThe first step - create Root key and certificate\nopenssl genrsa -out ca.key 2048\nopenssl req -new -x509 -key ca.key -out ca.crt -days 365 -config config_ssl_ca.cnf\n\nThe second step creates child key and file CSR - Certificate Signing Request. Because the idea is to sign the child certificate by root and get a correct certificate\nopenssl genrsa -out market.key 2048\nopenssl req -new -sha256 -key market.key -config config_ssl.cnf -out market.csr\n\nOpen Linux terminal and do this command\necho 00 &gt; ca.srl\ntouch index.txt\n\nThe ca.srl text file containing the next serial number to use in hex.\nMandatory.  This file must be present and contain a valid serial number.\nLast Step, create one more config file and call it config_ca.cnf\n# we use &apos;ca&apos; as the default section because we&apos;re usign the ca command\n[ ca ]\ndefault_ca = my_ca\n\n[ my_ca ]\n#  a text file containing the next serial number to use in hex. Mandatory.\n#  This file must be present and contain a valid serial number.\nserial = ./ca.srl\n\n# the text database file to use. Mandatory. This file must be present though\n# initially it will be empty.\ndatabase = ./index.txt\n\n# specifies the directory where new certificates will be placed. Mandatory.\nnew_certs_dir = ./\n\n# the file containing the CA certificate. Mandatory\ncertificate = ./ca.crt\n\n# the file contaning the CA private key. Mandatory\nprivate_key = ./ca.key\n\n# the message digest algorithm. Remember to not use MD5\ndefault_md = sha256\n\n# for how many days will the signed certificate be valid\ndefault_days = 365\n\n# a section with a set of variables corresponding to DN fields\npolicy = my_policy\n\n# MOST IMPORTANT PART OF THIS CONFIG\ncopy_extensions = copy\n\n[ my_policy ]\n# if the value is &quot;match&quot; then the field value must match the same field in the\n# CA certificate. If the value is &quot;supplied&quot; then it must be present.\n# Optional means it may be present. Any fields not mentioned are silently\n# deleted.\ncountryName = match\nstateOrProvinceName = supplied\norganizationName = supplied\ncommonName = market.localhost\norganizationalUnitName = optional\ncommonName = supplied\n\nYou may ask, why so difficult, why we must create one more config to sign child certificate by root. The answer is simple because child certificate must have a SAN block - Subject Alternative Names.\nIf we sign the child certificate by &quot;openssl x509&quot; utils, the Root certificate will delete the SAN field in child certificate.\nSo we use &quot;openssl ca&quot; instead of &quot;openssl x509&quot; to avoid the deleting of the SAN field. We create a new config file and tell it to copy all extended fields copy_extensions = copy.\nopenssl ca -config config_ca.cnf -out market.crt -in market.csr\n\nThe program asks you 2 questions:\n\nSign the certificate? Say &quot;Y&quot;\n1 out of 1 certificate requests certified, commit? Say &quot;Y&quot;\n\nIn terminal you can see a sentence with the word &quot;Database&quot;, it means file index.txt which you create by the command &quot;touch&quot;. It will contain all information by all certificates you create by &quot;openssl ca&quot; util.\nTo check the certificate valid use:\nopenssl rsa -in market.key -check\n\nIf you want to see what inside in CRT:\nopenssl x509 -in market.crt -text -noout\n\nIf you want to see what inside in CSR:\nopenssl req -in market.csr -noout -text \n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"This is the script I use on local boxes to set the SAN (subjectAltName) in self-signed certificates. \n\nThis script takes the domain name (example.com) and generates the SAN for *.example.com and example.com in the same certificate. The sections below are commented. Name the script (e.g. generate-ssl.sh) and give it executable permissions. The files will be written to the same directory as the script.\n\nChrome 58 an onward requires SAN to be set in self-signed certificates.\n\n#!/usr/bin/env bash\n\n# Set the TLD domain we want to use\nBASE_DOMAIN=&quot;example.com&quot;\n\n# Days for the cert to live\nDAYS=1095\n\n# A blank passphrase\nPASSPHRASE=&quot;&quot;\n\n# Generated configuration file\nCONFIG_FILE=&quot;config.txt&quot;\n\ncat &gt; $CONFIG_FILE &lt;&lt;-EOF\n[req]\ndefault_bits = 2048\nprompt = no\ndefault_md = sha256\nx509_extensions = v3_req\ndistinguished_name = dn\n\n[dn]\nC = CA\nST = BC\nL = Vancouver\nO = Example Corp\nOU = Testing Domain\nemailAddress = webmaster@$BASE_DOMAIN\nCN = $BASE_DOMAIN\n\n[v3_req]\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = *.$BASE_DOMAIN\nDNS.2 = $BASE_DOMAIN\nEOF\n\n# The file name can be anything\nFILE_NAME=&quot;$BASE_DOMAIN&quot;\n\n# Remove previous keys\necho &quot;Removing existing certs like $FILE_NAME.*&quot;\nchmod 770 $FILE_NAME.*\nrm $FILE_NAME.*\n\necho &quot;Generating certs for $BASE_DOMAIN&quot;\n\n# Generate our Private Key, CSR and Certificate\n# Use SHA-2 as SHA-1 is unsupported from Jan 1, 2017\n\nopenssl req -new -x509 -newkey rsa:2048 -sha256 -nodes -keyout &quot;$FILE_NAME.key&quot; -days $DAYS -out &quot;$FILE_NAME.crt&quot; -passin pass:$PASSPHRASE -config &quot;$CONFIG_FILE&quot;\n\n# OPTIONAL - write an info to see the details of the generated crt\nopenssl x509 -noout -fingerprint -text &lt; &quot;$FILE_NAME.crt&quot; &gt; &quot;$FILE_NAME.info&quot;\n\n# Protect the key\nchmod 400 &quot;$FILE_NAME.key&quot;\n\n\nThis script also writes an information file, so you can inspect the new certificate and verify the SAN is set properly.\n\n                ...\n                28:dd:b8:1e:34:b5:b1:44:1a:60:6d:e3:3c:5a:c4:\n                da:3d\n            Exponent: 65537 (0x10001)\n    X509v3 extensions:\n        X509v3 Subject Alternative Name: \n            DNS:*.example.com, DNS:example.com\nSignature Algorithm: sha256WithRSAEncryption\n     3b:35:5a:d6:9e:92:4f:fc:f4:f4:87:78:cd:c7:8d:cd:8c:cc:\n     ...\n\n\nIf you are using Apache, then you can reference the above certificate in your configuration file like so:\n\n&lt;VirtualHost _default_:443&gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/htdocs\n\n    SSLEngine on\n    SSLCertificateFile path/to/your/example.com.crt\n    SSLCertificateKeyFile path/to/your/example.com.key\n&lt;/VirtualHost&gt;\n\n\nRemember to restart your Apache (or Nginx, or IIS) server for the new certificate to take effect.\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"2017 one-liner:\n\nopenssl req \\\n-newkey rsa:2048 \\\n-x509 \\\n-nodes \\\n-keyout server.pem \\\n-new \\\n-out server.pem \\\n-subj /CN=localhost \\\n-reqexts SAN \\\n-extensions SAN \\\n-config &lt;(cat /System/Library/OpenSSL/openssl.cnf \\\n    &lt;(printf &apos;[SAN]\\nsubjectAltName=DNS:localhost&apos;)) \\\n-sha256 \\\n-days 3650\n\n\nThis also works in Chrome 57, as it provides the SAN, without having another configuration file.\nIt was taken from an answer here.\n\nThis creates a single .pem file that contains both the private key and cert. You can move them to separate .pem files if needed.\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"One-liner version 2017:\n\nCentOS:\n\nopenssl req -x509 -nodes -sha256 -newkey rsa:2048 \\\n-keyout localhost.key -out localhost.crt \\\n-days 3650 \\\n-subj &quot;CN=localhost&quot; \\\n-reqexts SAN -extensions SAN \\\n-config &lt;(cat /etc/pki/tls/openssl.cnf &lt;(printf &quot;\\n[SAN]\\nsubjectAltName=IP:127.0.0.1,DNS:localhost&quot;))\n\n\nUbuntu:\n\nopenssl req -x509 -nodes -sha256 -newkey rsa:2048 \\\n-keyout localhost.key -out localhost.crt \\\n-days 3650 \\\n-subj &quot;/CN=localhost&quot; \\\n-reqexts SAN -extensions SAN \\\n-config &lt;(cat /etc/ssl/openssl.cnf &lt;(printf &quot;\\n[SAN]\\nsubjectAltName=IP:127.0.0.1,DNS:localhost&quot;))\n\n\nEdit: added prepending Slash to &apos;subj&apos; option for Ubuntu.\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"One liner FTW. I like to keep it simple. Why not use one command that contains ALL the arguments needed? This is how I like it - this creates an x509 certificate and its PEM key:\n\nopenssl req -x509 \\\n -nodes -days 365 -newkey rsa:4096 \\\n -keyout self.key.pem \\\n -out self-x509.crt \\\n -subj &quot;/C=US/ST=WA/L=Seattle/CN=example.com/emailAddress=someEmail@gmail.com&quot;\n\n\nThat single command contains all the answers you would normally provide for the certificate details.  This way you can set the parameters and run the command, get your output - then go for coffee.\n\n&gt;&gt; More here &lt;&lt;\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"openssl allows to generate self-signed certificate by a single command (-newkey\ninstructs to generate a private key and -x509 instructs to issue a self-signed\ncertificate instead of a signing request)::\nopenssl req -x509 -newkey rsa:4096 \\\n-keyout my.key -passout pass:123456 -out my.crt \\\n-days 365 \\\n-subj /CN=localhost/O=home/C=US/emailAddress=me@mail.internal \\\n-addext &quot;subjectAltName = DNS:localhost,DNS:web.internal,email:me@mail.internal&quot; \\\n-addext keyUsage=digitalSignature -addext extendedKeyUsage=serverAuth\n\nYou can generate a private key and construct a self-signing certificate in separate steps::\nopenssl genrsa -out my.key -passout pass:123456 2048\n\nopenssl req -x509 \\\n-key my.key -passin pass:123456 -out my.csr \\\n-days 3650 \\\n-subj /CN=localhost/O=home/C=US/emailAddress=me@mail.internal \\\n-addext &quot;subjectAltName = DNS:localhost,DNS:web.internal,email:me@mail.internal&quot; \\\n-addext keyUsage=digitalSignature -addext extendedKeyUsage=serverAuth\n\nReview the resulting certificate::\nopenssl x509 -text -noout -in my.crt\n\nJava keytool creates PKCS#12 store::\nkeytool -genkeypair -keystore my.p12 -alias master \\\n-storetype pkcs12 -keyalg RSA -keysize 2048 -validity 3650 \\\n-storepass 123456 \\\n-dname &quot;CN=localhost,O=home,C=US&quot; \\\n-ext &apos;san=dns:localhost,dns:web.internal,email:me@mail.internal&apos;\n\nTo export the self-signed certificate::\nkeytool -exportcert -keystore my.p12 -file my.crt \\\n-alias master -rfc -storepass 123456\n\nReview the resulting certificate::\nkeytool -printcert -file my.crt\n\ncerttool from GnuTLS doesn&apos;t allow passing different attributes from CLI. I don&apos;t like to mess with config files ((\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"You have the general procedure correct. The syntax for the command is below.\n\nopenssl req -new -key {private key file} -out {output file}\n\n\nHowever, the warnings are displayed, because the browser was not able to verify the identify by validating the certificate with a known Certificate Authority (CA). \n\nAs this is a self-signed certificate there is no CA and you can safely ignore the warning and proceed. Should you want to get a real certificate that will be recognizable by anyone on the public Internet then the procedure is below.\n\n\nGenerate a private key\nUse that private key to create a CSR file\nSubmit CSR to CA (Verisign or others, etc.)\nInstall received cert from CA on web server\nAdd other certs to authentication chain depending on the type cert\n\n\nI have more details about this in a post at Securing the Connection: Creating a Security Certificate with OpenSSL\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"\n  Generate keys\n  \n  I am using /etc/mysql for cert storage because /etc/apparmor.d/usr.sbin.mysqld contains /etc/mysql/*.pem r.\n\nsudo su -\ncd /etc/mysql\nopenssl genrsa -out ca-key.pem 2048;\nopenssl req -new -x509 -nodes -days 1000 -key ca-key.pem -out ca-cert.pem;\nopenssl req -newkey rsa:2048 -days 1000 -nodes -keyout server-key.pem -out server-req.pem;\nopenssl x509 -req -in server-req.pem -days 1000 -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 -out server-cert.pem;\nopenssl req -newkey rsa:2048 -days 1000 -nodes -keyout client-key.pem -out client-req.pem;\nopenssl x509 -req -in client-req.pem -days 1000 -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 -out client-cert.pem;\n\n  \n  Add configuration\n  \n  /etc/mysql/my.cnf\n\n[client]\nssl-ca=/etc/mysql/ca-cert.pem\nssl-cert=/etc/mysql/client-cert.pem\nssl-key=/etc/mysql/client-key.pem\n\n[mysqld]\nssl-ca=/etc/mysql/ca-cert.pem\nssl-cert=/etc/mysql/server-cert.pem\nssl-key=/etc/mysql/server-key.pem\n\n\n\nOn my setup, Ubuntu server logged to: /var/log/mysql/error.log\n\nFollow up notes:\n\n\nSSL error: Unable to get certificate from &apos;...&apos;\n\nMySQL might be denied read access to your certificate file if it is not in apparmors configuration. As mentioned in the previous steps^, save all our certificates as .pem files in the /etc/mysql/ directory which is approved by default by apparmor (or modify your apparmor/SELinux to allow access to wherever you stored them.)\nSSL error: Unable to get private key\n\nYour MySQL server version may not support the default rsa:2048 format\n\nConvert generated rsa:2048 to plain rsa with:\n\nopenssl rsa -in server-key.pem -out server-key.pem\nopenssl rsa -in client-key.pem -out client-key.pem\n\nCheck if local server supports SSL:\n\n\nmysql -u root -p\nmysql&gt; show variables like &quot;%ssl%&quot;;\n+---------------+----------------------------+\n| Variable_name | Value                      |\n+---------------+----------------------------+\n| have_openssl  | YES                        |\n| have_ssl      | YES                        |\n| ssl_ca        | /etc/mysql/ca-cert.pem     |\n| ssl_capath    |                            |\n| ssl_cert      | /etc/mysql/server-cert.pem |\n| ssl_cipher    |                            |\n| ssl_key       | /etc/mysql/server-key.pem  |\n+---------------+----------------------------+\n\n\nVerifying a connection to the database is SSL encrypted:\n\n\n  Verifying connection\n  \n  When logged in to the MySQL instance, you can issue the query:\n\nshow status like &apos;Ssl_cipher&apos;;\n\n  \n  If your connection is not encrypted, the result will be blank:\n\nmysql&gt; show status like &apos;Ssl_cipher&apos;;\n+---------------+-------+\n| Variable_name | Value |\n+---------------+-------+\n| Ssl_cipher    |       |\n+---------------+-------+\n1 row in set (0.00 sec)\n\n  \n  Otherwise, it would show a non-zero length string for the cypher in use:\n\nmysql&gt; show status like &apos;Ssl_cipher&apos;;\n+---------------+--------------------+\n| Variable_name | Value              |\n+---------------+--------------------+\n| Ssl_cipher    | DHE-RSA-AES256-SHA |\n+---------------+--------------------+\n1 row in set (0.00 sec)\n\n\nRequire ssl for specific user&apos;s connection (&apos;require ssl&apos;):\n\n\n  \n  SSL\n  \n  \n  Tells the server to permit only SSL-encrypted connections for the account.\n\nGRANT ALL PRIVILEGES ON test.* TO &apos;root&apos;@&apos;localhost&apos;\n  REQUIRE SSL;\n\n  \n  To connect, the client must specify the --ssl-ca option to authenticate the server certificate, and may additionally specify the --ssl-key and --ssl-cert options. If neither --ssl-ca option nor --ssl-capath option is specified, the client does not authenticate the server certificate.\n\n\n\n\n\nAlternate link: Lengthy tutorial in Secure PHP Connections to MySQL with SSL.\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"As has been discussed in detail, self-signed certificates are not trusted for the Internet. You can add your self-signed certificate to many but not all browsers. Alternatively you can become your own certificate authority.\n\nThe primary reason one does not want to get a signed certificate from a certificate authority is cost -- Symantec charges between $995 - $1,999 per year for certificates -- just for a certificate intended for internal network, Symantec charges $399 per year. That cost is easy to justify if you are processing credit card payments or work for the profit center of a highly profitable company. It is more than many can afford for a personal project one is creating on the internet, or for a non-profit running on a minimal budget, or if one works in a cost center of an organization -- cost centers always try to do more with less.\n\nAn alternative is to use certbot (see about certbot). Certbot is an easy-to-use automatic client that fetches and deploys SSL/TLS certificates for your web server.\n\nIf you setup certbot, you can enable it to create and maintain a certificate for you issued by the Lets Encrypt certificate authority.\n\nI did this over the weekend for my organization. I installed the required packages for certbot on my server (Ubuntu 16.04) and then ran the command necessary to setup and enable certbot. One likely needs a DNS plugin for certbot - we are presently using DigitalOcean though may be migrating to another service soon.\n\nNote that some of the instructions were not quite right and took a little poking and time with Google to figure out. This took a fair amount of my time the first time but now I think I could do it in minutes.\n\nFor DigitalOcean, one area I struggled was when I was prompted to input the path to your DigitalOcean credentials INI file. What the script is referring to is the Applications &amp; API page and the Tokens/Key tab on that page. You need to have or generate a personal access token (read and write) for DigitalOcean&apos;s API -- this is a 65 character hexadecimal string. This string then needs to be put into a file on the webserver from which you are running certbot. That file can have a comment as its first line (comments start with #). The seccond line is:\n\ndns_digitalocean_token = 0000111122223333444455556666777788889999aaaabbbbccccddddeeeeffff\n\n\nOnce I figured out how to set up a read+write token for DigitalOcean&apos;s API, it was pretty easy to use certbot to setup a wildcard certificate. Note that one does not have to setup a wildcard certificate, one may instead specify each domain and sub-domain that one wants the certificate to appply to. It was the wildcard certificate that required the credentials INI file that contained the personal access token from DigitalOcean.\n\nNote that public key certificates (also known as identity certificates or SSL certificates) expire and require renewal. Thus you will need to renew your certificate on a periodic (reoccurring) basis. The certbot documentation covers renewing certificates.\n\nMy plan is to write a script to use the openssl command to get my certificate&apos;s expiration date and to trigger renewal when it is 30 days or less until it expires. I will then add this script to cron and run it once per day.\n\nHere is the command to read your certificate&apos;s expiration date:\n\nroot@prod-host:~# /usr/bin/openssl x509 -enddate -noout -in path-to-certificate-pem-file\nnotAfter=May 25 19:24:12 2019 GMT\n\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"this worked for me\nopenssl req -x509 -nodes -subj &apos;/CN=localhost&apos;  -newkey rsa:4096 -keyout ./sslcert/key.pem -out ./sslcert/cert.pem -days 365\n\nserver.js\nvar fs = require(&apos;fs&apos;);\nvar path = require(&apos;path&apos;);\nvar http = require(&apos;http&apos;);\nvar https = require(&apos;https&apos;);\nvar compression = require(&apos;compression&apos;);\nvar express = require(&apos;express&apos;);\nvar app = express();\n\napp.use(compression());\napp.use(express.static(__dirname + &apos;/www&apos;));    \n\napp.get(&apos;/*&apos;, function(req,res) {\n  res.sendFile(path.join(__dirname+&apos;/www/index.html&apos;));\n});\n\n// your express configuration here\n\nvar httpServer = http.createServer(app);\nvar credentials = {\n    key: fs.readFileSync(&apos;./sslcert/key.pem&apos;, &apos;utf8&apos;),\n    cert: fs.readFileSync(&apos;./sslcert/cert.pem&apos;, &apos;utf8&apos;)\n};\nvar httpsServer = https.createServer(credentials, app);\n\nhttpServer.listen(8080);\nhttpsServer.listen(8443);\n\nconsole.log(`RUNNING ON  http://127.0.0.1:8080`);\nconsole.log(`RUNNING ON  http://127.0.0.1:8443`);\n\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"After much of going around, playing with various solutions, still I faced the problem that issuing a self-signed certificate for localhost, gave me error\nERR_CERT_INVALID\nWhen expanding the details, chrome said:\n\nYou cannot visit localhost right now because the website sent\nscrambled credentials...\n\nAnd the only ugly way to get through is to type (directly in this screen, without seeing any cursor for the text) :\n(type in the keyboard) thisisunsafe\nWhich let me proceed.\nUntil I found extendedKeyUsage = serverAuth, clientAuth\nTL;DR\n\nopenssl genrsa -out localhost.key 2048\n\nopenssl req -key localhost.key -new -out localhost.csr\n\n(click enter on everything and just fill in the common name (CN) with localhost or your other FQDN.\n\nput the following in a file named v3.ext (edit whatever you need):\n\n\nsubjectKeyIdentifier   = hash\nauthorityKeyIdentifier = keyid:always,issuer:always\nbasicConstraints       = CA:TRUE\nkeyUsage               = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment, keyAgreement, keyCertSign\nextendedKeyUsage       = serverAuth, clientAuth\nsubjectAltName         = DNS:localhost, DNS:localhost.localdomain\nissuerAltName          = issuer:copy\n\n\nopenssl x509 -req -in localhost.csr -signkey localhost.key -out localhost.pem -days 3650 -sha256 -extfile v3.ext\n\nAnd voilà!\nYou can visit the website, expand &quot;Advanced&quot; and click &quot;Proceed to localhost (unsafe)&quot;.\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"Generate a key without password and certificate for 10 years, the short way:\nopenssl req  -x509 -nodes -new  -keyout server.key -out server.crt -days 3650 -subj &quot;/C=/ST=/L=/O=/OU=web/CN=www.server.com&quot;\n\nfor the flag -subj | -subject empty values are permitted -subj &quot;/C=/ST=/L=/O=/OU=web/CN=www.server.com&quot;, but you can sets more details as you like:\n\nC - Country Name (2 letter code)\nST - State\nL - Locality Name (eg, city)\nO - Organization Name\nOU - Organizational Unit Name\nCN - Common Name - required!\n\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"This very simple Python app that creates a self-signed certificate.\nCode:\nfrom OpenSSL import crypto, SSL\nfrom secrets import randbelow\nprint(&quot;Please know, if you make a mistake, you must restart the program.&quot;)\ndef cert_gen(\n    emailAddress=input(&quot;Enter Email Address: &quot;),\n    commonName=input(&quot;Enter Common Name: &quot;),\n    countryName=input(&quot;Enter Country Name (2 characters): &quot;),\n    localityName=input(&quot;Enter Locality Name: &quot;),\n    stateOrProvinceName=input(&quot;Enter State of Province Name: &quot;),\n    organizationName=input(&quot;Enter Organization Name: &quot;),\n    organizationUnitName=input(&quot;Enter Organization Unit Name: &quot;),\n    serialNumber=randbelow(1000000),\n    validityStartInSeconds=0,\n    validityEndInSeconds=10*365*24*60*60,\n    KEY_FILE = &quot;private.key&quot;,\n    CERT_FILE=&quot;selfsigned.crt&quot;):\n    #can look at generated file using openssl:\n    #openssl x509 -inform pem -in selfsigned.crt -noout -text\n    # create a key pair\n    k = crypto.PKey()\n    k.generate_key(crypto.TYPE_RSA, 4096)\n    # create a self-signed cert\n    cert = crypto.X509()\n    cert.get_subject().C = countryName\n    cert.get_subject().ST = stateOrProvinceName\n    cert.get_subject().L = localityName\n    cert.get_subject().O = organizationName\n    cert.get_subject().OU = organizationUnitName\n    cert.get_subject().CN = commonName\n    cert.get_subject().emailAddress = emailAddress\n    cert.set_serial_number(serialNumber)\n    cert.gmtime_adj_notBefore(0)\n    cert.gmtime_adj_notAfter(validityEndInSeconds)\n    cert.set_issuer(cert.get_subject())\n    cert.set_pubkey(k)\n    cert.sign(k, &apos;sha512&apos;)\n    with open(CERT_FILE, &quot;wt&quot;) as f:\n        f.write(crypto.dump_certificate(crypto.FILETYPE_PEM, cert).decode(&quot;utf-8&quot;))\n    with open(KEY_FILE, &quot;wt&quot;) as f:\n        f.write(crypto.dump_privatekey(crypto.FILETYPE_PEM, k).decode(&quot;utf-8&quot;))\n    print(&quot;GENERATED&quot;)\n    input(&quot;Press enter to close program.&quot;)\ncert_gen()\n\nHowever, you still get the &quot;certificate is not trusted&quot; error. This is because of a few reasons:\n\nIt is self-signed/not verified (a verified certificate would need a CA (Certificate Authority), like Let&apos;s Encrypt to be trusted on all devices).\nIt is not trusted on your machine. (this answer shows how you can make Windows trust your certificate).\n\n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-b06815e21c943e0d.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-79a1437acf654019.js" defer=""></script><script src="/_next/static/TQ2eYlCSdocSK-hq6gkM0/_buildManifest.js" defer=""></script><script src="/_next/static/TQ2eYlCSdocSK-hq6gkM0/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-to-generate-a-self-signed-ssl-certificate-using-openssl-closed-1657388298626#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-to-generate-a-self-signed-ssl-certificate-using-openssl-closed-1657388298626"><h1>How to generate a self-signed SSL certificate using OpenSSL? [closed]</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/x509certificate">x509certificate</a></div></div><div class="question-content mt-5">
                    <div>
            <aside class="s-notice s-notice__info post-notice js-post-notice mb16" role="status">
        <div class="d-flex fd-column fw-nowrap">
            <div class="d-flex fw-nowrap">
                <div class="flex--item wmn0 fl1 lh-lg">
                    <div class="flex--item fl1 lh-lg">
                        <b>Closed.</b> This question does not meet <a href="/help/closed-questions">Stack Overflow guidelines</a>. It is not currently accepting answers.
                        
                    </div>
                </div>
            </div>
        </div>
            <hr class="my12 outline-none baw0 bb bc-powder-400">
        <div class="fw-nowrap fc-black-600">
            <div class="d-flex fd-column lh-md">
                <div class="mb0 d-flex">
                        <div class="flex--item mr8">
                            <svg aria-hidden="true" class="svg-icon iconLightbulb" width="18" height="18" viewBox="0 0 18 18"><path d="M15 6.38A6.48 6.48 0 0 0 7.78.04h-.02A6.49 6.49 0 0 0 2.05 5.6a6.31 6.31 0 0 0 2.39 5.75c.49.39.76.93.76 1.5v.24c0 1.07.89 1.9 1.92 1.9h2.75c1.04 0 1.92-.83 1.92-1.9v-.2c0-.6.26-1.15.7-1.48A6.32 6.32 0 0 0 15 6.37ZM4.03 5.85A4.49 4.49 0 0 1 8 2.02a4.48 4.48 0 0 1 5 4.36 4.3 4.3 0 0 1-1.72 3.44c-.98.74-1.5 1.9-1.5 3.08v.1H7.2v-.14c0-1.23-.6-2.34-1.53-3.07a4.32 4.32 0 0 1-1.64-3.94ZM10 18a1 1 0 0 0 0-2H7a1 1 0 1 0 0 2h3Z"></path></svg>
                        </div>
                    <p> We don’t allow questions about professional server or networking-related infrastructure administration on Stack Overflow. You can edit the question so it’s <a href="/help/on-topic">on-topic</a> for Stack Overflow.</p>
                </div>
                    <div class="mb0 mt6 d-flex">
                        <p class="ml24 pl2">Closed <span title="2022-05-26 19:57:59Z" class="relativetime">last month</span>.</p>
                    </div>
                <div class="ml24 pl2">
            <p class="mb0 mt12">The community is reviewing whether to reopen this question as of <span title="2022-07-09 14:38:13Z" class="relativetime">2 hours ago</span>.</p>

                </div>
            </div>
        </div>
            <div class="mt24 d-flex gsx gs8">
                    <a class="s-btn s-btn__outlined flex--item js-post-notice-edit-post" href="/posts/10175812/edit">
                        Improve this question
                    </a>
            </div>
</aside>

    </div>

<p>I'm adding HTTPS support to an embedded Linux device. I have tried to generate a self-signed certificate with these steps:</p>

<pre><code>openssl req -new &gt; cert.csr
openssl rsa -in privkey.pem -out key.pem
openssl x509 -in cert.csr -out cert.pem -req -signkey key.pem -days 1001
cat key.pem&gt;&gt;cert.pem
</code></pre>

<p>This works, but I get some errors with, for example, Google Chrome:</p>

<blockquote>
  <p>This is probably not the site you are looking for!<br>
  The site's security certificate is not trusted!</p>
</blockquote>

<p>Am I missing something? Is this the correct way to build a self-signed certificate?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can do that in one command:</p>
<pre><code>openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -sha256 -days 365
</code></pre>
<p>You can also add <code>-nodes</code> (short for "no DES") if you don't want to protect your private key with a passphrase. Otherwise it will prompt you for "at least a 4 character" password.</p>
<p>The <code>days</code> parameter (365) you can replace with any number to affect the expiration date. It will then prompt you for things like "Country Name", but you can just hit <kbd>Enter</kbd> and accept the defaults.</p>
<p>Add <code>-subj '/CN=localhost'</code> to suppress questions about the contents of the certificate (replace <code>localhost</code> with your desired domain).</p>
<p>Self-signed certificates are not validated with any third party unless you import them to the browsers previously. If you need more security, you should use a certificate signed by a <a href="https://en.wikipedia.org/wiki/Certificate_authority" rel="nofollow noreferrer">certificate authority</a> (CA).</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
<p>Am I missing something? Is this the correct way to build a self-signed certificate?</p>
</blockquote>
<p>It's easy to create a self-signed certificate. You just use the <code>openssl req</code> command. It can be tricky to create one that can be consumed by the largest selection of clients, like browsers and command line tools.</p>
<p>It's difficult because the browsers have their own set of requirements, and they are more restrictive than the <a href="https://en.wikipedia.org/wiki/Internet_Engineering_Task_Force" rel="noreferrer">IETF</a>. The requirements used by browsers are documented at the <a href="https://cabforum.org/" rel="noreferrer">CA/Browser Forums</a> (see references below). The restrictions arise in two key areas: (1) trust anchors, and (2) DNS names.</p>
<p>Modern browsers (like the warez we're using in 2014/2015) want a certificate that chains back to a trust anchor, and they want DNS names to be presented in particular ways in the certificate. And browsers are actively moving against self-signed server certificates.</p>
<p>Some browsers don't exactly make it easy to import a self-signed server certificate. In fact, you can't with some browsers, like Android's browser. So the complete solution is to become your own authority.</p>
<p>In the absence of becoming your own authority, you have to get the DNS names right to give the certificate the greatest chance of success. But I would encourage you to become your own authority. It's easy to become your own authority, and it will sidestep all the trust issues (who better to trust than yourself?).</p>
<hr>
<blockquote>
<p>This is probably not the site you are looking for!<br>
The site's security certificate is not trusted!</p>
</blockquote>
<p>This is because browsers use a predefined list of trust anchors to validate server certificates. A self-signed certificate does not chain back to a trusted anchor.</p>
<p>The best way to avoid this is:</p>
<ol>
<li>Create your own authority (i.e., become a <a href="https://en.wikipedia.org/wiki/Certificate_authority" rel="noreferrer">CA</a>)</li>
<li>Create a certificate signing request (CSR) for the server</li>
<li>Sign the server's CSR with your CA key</li>
<li>Install the server certificate on the server</li>
<li>Install the CA certificate on the client</li>
</ol>
<p>Step 1 - <em>Create your own authority</em> just means to create a self-signed certificate with <code>CA: true</code> and proper key usage. That means the <em>Subject</em> and <em>Issuer</em> are the same entity, CA is set to true in <em>Basic Constraints</em> (it should also be marked as critical), key usage is <code>keyCertSign</code> and <code>crlSign</code> (if you are using CRLs), and the <em>Subject Key Identifier</em> (SKI) is the same as the <em>Authority Key Identifier</em> (AKI).</p>
<p>To become your own certificate authority, see *<a href="https://stackoverflow.com/questions/21297139/how-do-you-sign-a-certificate-signing-request-with-your-certification-authority/21340898#21340898">How do you sign a certificate signing request with your certification authority?</a> on Stack Overflow. Then, import your CA into the Trust Store used by the browser.</p>
<p>Steps 2 - 4 are roughly what you do now for a public facing server when you enlist the services of a CA like <a href="https://www.startssl.com/" rel="noreferrer">Startcom</a> or <a href="https://www.cacert.org/" rel="noreferrer">CAcert</a>. Steps 1 and 5 allows you to avoid the third-party authority, and act as your own authority (who better to trust than yourself?).</p>
<p>The next best way to avoid the browser warning is to trust the server's certificate. But some browsers, like Android's default browser, do not let you do it. So it will never work on the platform.</p>
<p>The issue of browsers (and other similar user agents) <em>not</em> trusting self-signed certificates is going to be a big problem in the Internet of Things (IoT). For example, what is going to happen when you connect to your thermostat or refrigerator to program it? The answer is, nothing good as far as the user experience is concerned.</p>
<p>The W3C's WebAppSec Working Group is starting to look at the issue.  See, for example, <a href="http://lists.w3.org/Archives/Public/public-webappsec/2014Dec/0203.html" rel="noreferrer">Proposal: Marking HTTP As Non-Secure</a>.</p>
<hr>
<blockquote>
<p>How to create a self-signed certificate with OpenSSL</p>
</blockquote>
<p>The commands below and the configuration file create a self-signed certificate (it also shows you how to create a signing request). They differ from other answers in one respect: the DNS names used for the self signed certificate are in the <em>Subject Alternate Name (SAN)</em>, and not the <em>Common Name (CN)</em>.</p>
<p>The DNS names are placed in the SAN through the configuration file with the line <code>subjectAltName = @alternate_names</code> (there's no way to do it through the command line). Then there's an <code>alternate_names</code> section in the configuration file (you should tune this to suit your taste):</p>
<pre><code>[ alternate_names ]

DNS.1       = example.com
DNS.2       = www.example.com
DNS.3       = mail.example.com
DNS.4       = ftp.example.com

# Add these if you need them. But usually you don't want them or
#   need them in production. You may need them for development.
# DNS.5       = localhost
# DNS.6       = localhost.localdomain
# IP.1        = 127.0.0.1
# IP.2        = ::1
</code></pre>
<p>It's important to put DNS name in the SAN and not the CN, because <em>both</em> the IETF and the CA/Browser Forums specify the practice. They also specify that DNS names in the CN are deprecated (but not prohibited). <em>If</em> you put a DNS name in the CN, then it <em>must</em> be included in the SAN under the CA/B policies. So you can't avoid using the Subject Alternate Name.</p>
<p>If you don't do put DNS names in the SAN, then the certificate will fail to validate under a browser and other user agents which follow the CA/Browser Forum guidelines.</p>
<p>Related: browsers follow the CA/Browser Forum policies; and not the IETF policies. That's one of the reasons a certificate created with OpenSSL (which generally follows the IETF) sometimes does not validate under a browser (browsers follow the CA/B). They are different standards, they have different issuing policies and different validation requirements.</p>
<hr>
<p><strong>Create a self signed certificate</strong> (notice the addition of <code>-x509</code> option):</p>
<pre><code>openssl req -config example-com.conf -new -x509 -sha256 -newkey rsa:2048 -nodes \
    -keyout example-com.key.pem -days 365 -out example-com.cert.pem
</code></pre>
<p><strong>Create a signing request</strong> (notice the lack of <code>-x509</code> option):</p>
<pre><code>openssl req -config example-com.conf -new -sha256 -newkey rsa:2048 -nodes \
    -keyout example-com.key.pem -days 365 -out example-com.req.pem
</code></pre>
<p><strong>Print a self-signed certificate</strong>:</p>
<pre><code>openssl x509 -in example-com.cert.pem -text -noout
</code></pre>
<p><strong>Print a signing request</strong>:</p>
<pre><code>openssl req -in example-com.req.pem -text -noout
</code></pre>
<p><strong>Configuration file (passed via <code>-config</code> option)</strong></p>
<pre><code>[ req ]
default_bits        = 2048
default_keyfile     = server-key.pem
distinguished_name  = subject
req_extensions      = req_ext
x509_extensions     = x509_ext
string_mask         = utf8only

# The Subject DN can be formed using X501 or RFC 4514 (see RFC 4519 for a description).
#   Its sort of a mashup. For example, RFC 4514 does not provide emailAddress.
[ subject ]
countryName         = Country Name (2 letter code)
countryName_default     = US

stateOrProvinceName     = State or Province Name (full name)
stateOrProvinceName_default = NY

localityName            = Locality Name (eg, city)
localityName_default        = New York

organizationName         = Organization Name (eg, company)
organizationName_default    = Example, LLC

# Use a friendly name here because it's presented to the user. The server's DNS
#   names are placed in Subject Alternate Names. Plus, DNS names here is deprecated
#   by both IETF and CA/Browser Forums. If you place a DNS name here, then you
#   must include the DNS name in the SAN too (otherwise, Chrome and others that
#   strictly follow the CA/Browser Baseline Requirements will fail).
commonName          = Common Name (e.g. server FQDN or YOUR name)
commonName_default      = Example Company

emailAddress            = Email Address
emailAddress_default        = test@example.com

# Section x509_ext is used when generating a self-signed certificate. I.e., openssl req -x509 ...
[ x509_ext ]

subjectKeyIdentifier        = hash
authorityKeyIdentifier    = keyid,issuer

# You only need digitalSignature below. *If* you don't allow
#   RSA Key transport (i.e., you use ephemeral cipher suites), then
#   omit keyEncipherment because that's key transport.
basicConstraints        = CA:FALSE
keyUsage            = digitalSignature, keyEncipherment
subjectAltName          = @alternate_names
nsComment           = "OpenSSL Generated Certificate"

# RFC 5280, Section 4.2.1.12 makes EKU optional
#   CA/Browser Baseline Requirements, Appendix (B)(3)(G) makes me confused
#   In either case, you probably only need serverAuth.
# extendedKeyUsage    = serverAuth, clientAuth

# Section req_ext is used when generating a certificate signing request. I.e., openssl req ...
[ req_ext ]

subjectKeyIdentifier        = hash

basicConstraints        = CA:FALSE
keyUsage            = digitalSignature, keyEncipherment
subjectAltName          = @alternate_names
nsComment           = "OpenSSL Generated Certificate"

# RFC 5280, Section 4.2.1.12 makes EKU optional
#   CA/Browser Baseline Requirements, Appendix (B)(3)(G) makes me confused
#   In either case, you probably only need serverAuth.
# extendedKeyUsage    = serverAuth, clientAuth

[ alternate_names ]

DNS.1       = example.com
DNS.2       = www.example.com
DNS.3       = mail.example.com
DNS.4       = ftp.example.com

# Add these if you need them. But usually you don't want them or
#   need them in production. You may need them for development.
# DNS.5       = localhost
# DNS.6       = localhost.localdomain
# DNS.7       = 127.0.0.1

# IPv6 localhost
# DNS.8     = ::1
</code></pre>
<p>You may need to do the following for Chrome. Otherwise <a href="https://superuser.com/questions/1202498/create-self-signed-certificate-with-subjectaltname-to-fix-missing-subjectaltnam/1202506#1202506">Chrome may complain a <em>Common Name</em> is invalid (<code>ERR_CERT_COMMON_NAME_INVALID</code>)</a>. I'm not sure what the relationship is between an IP address in the SAN and a CN in this instance.</p>
<pre><code># IPv4 localhost
# IP.1       = 127.0.0.1

# IPv6 localhost
# IP.2     = ::1
</code></pre>
<hr>
<p>There are other rules concerning the handling of DNS names in X.509/PKIX certificates. Refer to these documents for the rules:</p>
<ul>
<li>RFC 5280, <a href="https://www.rfc-editor.org/rfc/rfc5280" rel="noreferrer">Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile</a></li>
<li>RFC 6125, <a href="https://www.rfc-editor.org/rfc/rfc6125" rel="noreferrer">Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)</a></li>
<li>RFC 6797, Appendix A, <a href="https://www.rfc-editor.org/rfc/rfc6797" rel="noreferrer">HTTP Strict Transport Security (HSTS)</a></li>
<li>RFC 7469, <a href="https://www.rfc-editor.org/rfc/rfc7469" rel="noreferrer">Public Key Pinning Extension for HTTP</a></li>
<li>CA/Browser Forum <a href="https://cabforum.org/baseline-requirements-documents/" rel="noreferrer">Baseline Requirements</a></li>
<li>CA/Browser Forum <a href="https://cabforum.org/extended-validation-2/" rel="noreferrer">Extended Validation Guidelines</a></li>
</ul>
<p>RFC 6797 and RFC 7469 are listed, because they are more restrictive than the other RFCs and CA/B documents. RFCs 6797 and 7469 <em>do not</em> allow an IP address, either.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As of 2022 with OpenSSL  1.1.1, the following command serves all your needs, including <a href="https://www.openssl.org/docs/manmaster/man5/x509v3_config.html#Subject-Alternative-Name" rel="noreferrer">Subject Alternate Name (SAN)</a>:</p>
<pre><code>openssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \
  -keyout example.key -out example.crt -subj "/CN=example.com" \
  -addext "subjectAltName=DNS:example.com,DNS:www.example.net,IP:10.0.0.1"
</code></pre>
<hr>
<p>On old systems with OpenSSL  1.1.0, such as Debian  9 or CentOS  7, a longer version of this command needs to be used:</p>
<pre><code>openssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \
  -keyout example.key -out example.crt -extensions san -config \
  &lt;(echo "[req]"; 
    echo distinguished_name=req; 
    echo "[san]"; 
    echo subjectAltName=DNS:example.com,DNS:www.example.net,IP:10.0.0.1
    ) \
  -subj "/CN=example.com"
</code></pre>
<p>Either command creates a certificate that is</p>
<ul>
<li>valid for the (sub)domains <code>example.com</code> and <code>www.example.net</code> (SAN),</li>
<li>also valid for the IP address <code>10.0.0.1</code> (SAN),</li>
<li>relatively strong (as of 2022) and</li>
<li>valid for <code>3650</code> days (~10 years).</li>
</ul>
<p>The following files are generated:</p>
<ul>
<li>Private key: <code>example.key</code></li>
<li>Certificate: <code>example.crt</code></li>
</ul>
<p>All information is provided at the command line. There is <strong>no interactive input</strong> that annoys you. There are <strong>no config files</strong> you have to mess around with. All necessary steps are executed by a <strong>single OpenSSL invocation</strong>: from private key generation up to the self-signed certificate.</p>
<hr>
<h3>Remark #1: Crypto parameters</h3>
<p>Since the certificate is self-signed and needs to be accepted by users manually, it doesn't make sense to use a short expiration or weak cryptography.</p>
<p>In the future, you might want to use more than <code>4096</code> bits for the RSA key and a hash algorithm stronger than <code>sha256</code>, but as of 2022 these are sane values. They are sufficiently strong while being supported by all modern browsers.</p>
<h3>Remark #2: Parameter "<code>-nodes</code>"</h3>
<p>Theoretically you could leave out the <code>-nodes</code> parameter (which means "no DES encryption"), in which case <code>example.key</code> would be encrypted with a password. However, this is almost never useful for a server installation, because you would either have to store the password on the server as well, or you'd have to enter it manually on each reboot.</p>
<h3>Remark #3: See also</h3>
<ul>
<li><a href="https://security.stackexchange.com/a/198409/133603">Provide subjectAltName to openssl directly on command line</a></li>
<li><a href="https://unix.stackexchange.com/a/333325/20407">How to add multiple email addresses to an SSL certificate via the command line?</a></li>
<li><a href="https://stackoverflow.com/a/34386471/19163">More information about MSYS_NO_PATHCONV</a></li>
</ul>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here are the options described in <a href="https://stackoverflow.com/a/10176685/456814">@diegows's answer</a>, described in more detail, from <a href="https://www.openssl.org/docs/apps/req.html" rel="noreferrer">the documentation</a>:</p>

<pre><code>openssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days XXX
</code></pre>

<blockquote>
<pre><code>req
</code></pre>
  
  <p>PKCS#10 certificate request and certificate generating utility.</p>

<pre><code>-x509
</code></pre>
  
  <p>this option outputs a self signed certificate instead of a certificate request.
  This is typically used to generate a test certificate or a self signed root CA.</p>

<pre><code>-newkey arg
</code></pre>
  
  <p>this option creates a new certificate request and a new private key. The argument
  takes one of several forms. <strong>rsa:nbits</strong>, where <strong>nbits</strong> is the number of bits,
  generates an RSA key <strong>nbits</strong> in size.</p>

<pre><code>-keyout filename
</code></pre>
  
  <p>this gives the filename to write the newly created private key to.</p>

<pre><code>-out filename
</code></pre>
  
  <p>This specifies the output filename to write to or standard output by default.</p>

<pre><code>-days n
</code></pre>
  
  <p>when the <strong>-x509</strong> option is being used this specifies the number of days to certify
  the certificate for. The default is 30 days.</p>

<pre><code>-nodes
</code></pre>
  
  <p>if this option is specified then if a private key is created it will not be encrypted.</p>
</blockquote>

<p>The documentation is actually more detailed than the above; I just summarized it here.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I can't comment, so I will put this as a separate answer. I found a few issues with the accepted one-liner answer:</p>

<ul>
<li>The one-liner includes a passphrase in the key.</li>
<li>The one-liner uses SHA-1 which in many browsers throws warnings in console.</li>
</ul>

<p>Here is a simplified version that removes the passphrase, ups the security to suppress warnings and includes a suggestion in comments to pass in -subj to remove the full question list:</p>

<pre><code>openssl genrsa -out server.key 2048
openssl rsa -in server.key -out server.key
openssl req -sha256 -new -key server.key -out server.csr -subj '/CN=localhost'
openssl x509 -req -sha256 -days 365 -in server.csr -signkey server.key -out server.crt
</code></pre>

<p>Replace 'localhost' with whatever domain you require.  You will need to run the first two commands one by one as OpenSSL will prompt for a passphrase.</p>

<p>To combine the two into a .pem file:</p>

<pre><code>cat server.crt server.key &gt; cert.pem
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Modern browsers now throw a security error for otherwise well-formed self-signed certificates if they are missing a SAN (Subject Alternate Name). <strong><em>OpenSSL does not provide a command-line way to specify this</em></strong>, so many developers' tutorials and bookmarks are suddenly outdated.</p>

<p>The quickest way to get running again is a short, stand-alone conf file:</p>

<ol>
<li><p>Create an OpenSSL config file (example: <code>req.cnf</code>)</p>

<pre><code>[req]
distinguished_name = req_distinguished_name
x509_extensions = v3_req
prompt = no
[req_distinguished_name]
C = US
ST = VA
L = SomeCity
O = MyCompany
OU = MyDivision
CN = www.company.com
[v3_req]
keyUsage = critical, digitalSignature, keyAgreement
extendedKeyUsage = serverAuth
subjectAltName = @alt_names
[alt_names]
DNS.1 = www.company.com
DNS.2 = company.com
DNS.3 = company.net
</code></pre></li>
<li><p>Create the certificate referencing this config file</p>

<pre><code>openssl req -x509 -nodes -days 730 -newkey rsa:2048 \
 -keyout cert.key -out cert.pem -config req.cnf -sha256
</code></pre></li>
</ol>

<p><em>Example config from <a href="https://support.citrix.com/article/CTX135602_" rel="noreferrer">https://support.citrix.com/article/CTX135602</a></em></p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I would recommend to add the <strong>-sha256</strong> parameter, to use the SHA-2 hash algorithm, because major browsers are considering to show "SHA-1 certificates" as not secure.</p>

<p>The same command line from the accepted answer - @diegows with added -sha256</p>

<blockquote>
  <p>openssl req -x509 <strong>-sha256</strong> -newkey rsa:2048 -keyout key.pem -out cert.pem -days XXX</p>
</blockquote>

<p>More information in <a href="http://googleonlinesecurity.blogspot.com/2014/09/gradually-sunsetting-sha-1.html" rel="noreferrer">Google Security blog</a>.</p>

<p><strong>Update May 2018.</strong> As many noted in the comments that using SHA-2 does not add any security to a self-signed certificate. But I still recommend using it as a good habit of not using outdated / insecure cryptographic hash functions. Full explanation is available in <em><a href="https://security.stackexchange.com/questions/91913/why-is-it-fine-for-certificates-above-the-end-entity-certificate-to-be-sha1-base">Why is it fine for certificates above the end-entity certificate to be SHA-1 based?</a></em>.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I can`t comment so I add a separate answer.
I tried to create a self-signed certificate for NGINX and it was easy, but when I wanted to add it to Chrome white list I had a problem. And my solution was to create a Root certificate and signed a child certificate by it.</p>
<p>So step by step.
Create file <strong>config_ssl_ca.cnf</strong>
Notice, config file has an option <strong>basicConstraints=CA:true</strong> which means that this certificate is supposed to be root.</p>
<blockquote>
<p>This is a good practice, because you create it once and can reuse.</p>
</blockquote>
<pre><code>[ req ]
default_bits = 2048

prompt = no
distinguished_name=req_distinguished_name
req_extensions = v3_req

[ req_distinguished_name ]
countryName=UA
stateOrProvinceName=root region
localityName=root city
organizationName=Market(localhost)
organizationalUnitName=roote department
commonName=market.localhost
emailAddress=root_email@root.localhost

[ alternate_names ]
DNS.1        = market.localhost
DNS.2        = www.market.localhost
DNS.3        = mail.market.localhost
DNS.4        = ftp.market.localhost
DNS.5        = *.market.localhost

[ v3_req ]
keyUsage=digitalSignature
basicConstraints=CA:true
subjectKeyIdentifier = hash
subjectAltName = @alternate_names
</code></pre>
<p>Next config file for your child certificate will be call <strong>config_ssl.cnf</strong>.</p>
<pre><code>[ req ]
default_bits = 2048

prompt = no
distinguished_name=req_distinguished_name
req_extensions = v3_req

[ req_distinguished_name ]
countryName=UA
stateOrProvinceName=Kyiv region
localityName=Kyiv
organizationName=market place
organizationalUnitName=market place department
commonName=market.localhost
emailAddress=email@market.localhost

[ alternate_names ]
DNS.1        = market.localhost
DNS.2        = www.market.localhost
DNS.3        = mail.market.localhost
DNS.4        = ftp.market.localhost
DNS.5        = *.market.localhost

[ v3_req ]
keyUsage=digitalSignature
basicConstraints=CA:false
subjectAltName = @alternate_names
subjectKeyIdentifier = hash
</code></pre>
<p>The first step - create Root key and certificate</p>
<pre><code>openssl genrsa -out ca.key 2048
openssl req -new -x509 -key ca.key -out ca.crt -days 365 -config config_ssl_ca.cnf
</code></pre>
<p>The second step creates child key and file CSR - Certificate Signing Request. Because the idea is to sign the child certificate by root and get a correct certificate</p>
<pre><code>openssl genrsa -out market.key 2048
openssl req -new -sha256 -key market.key -config config_ssl.cnf -out market.csr
</code></pre>
<p>Open Linux terminal and do this command</p>
<pre><code>echo 00 &gt; ca.srl
touch index.txt
</code></pre>
<p>The <strong>ca.srl</strong> text file containing the next serial number to use in hex.
Mandatory.  This file must be present and contain a valid serial number.</p>
<p>Last Step, create one more config file and call it <strong>config_ca.cnf</strong></p>
<pre><code># we use 'ca' as the default section because we're usign the ca command
[ ca ]
default_ca = my_ca

[ my_ca ]
#  a text file containing the next serial number to use in hex. Mandatory.
#  This file must be present and contain a valid serial number.
serial = ./ca.srl

# the text database file to use. Mandatory. This file must be present though
# initially it will be empty.
database = ./index.txt

# specifies the directory where new certificates will be placed. Mandatory.
new_certs_dir = ./

# the file containing the CA certificate. Mandatory
certificate = ./ca.crt

# the file contaning the CA private key. Mandatory
private_key = ./ca.key

# the message digest algorithm. Remember to not use MD5
default_md = sha256

# for how many days will the signed certificate be valid
default_days = 365

# a section with a set of variables corresponding to DN fields
policy = my_policy

# MOST IMPORTANT PART OF THIS CONFIG
copy_extensions = copy

[ my_policy ]
# if the value is "match" then the field value must match the same field in the
# CA certificate. If the value is "supplied" then it must be present.
# Optional means it may be present. Any fields not mentioned are silently
# deleted.
countryName = match
stateOrProvinceName = supplied
organizationName = supplied
commonName = market.localhost
organizationalUnitName = optional
commonName = supplied
</code></pre>
<p>You may ask, why so difficult, why we must create one more config to sign child certificate by root. The answer is simple because child certificate must have a SAN block - Subject Alternative Names.
If we sign the child certificate by "openssl x509" utils, the Root certificate will delete the SAN field in child certificate.
So we use "openssl ca" instead of "openssl x509" to avoid the deleting of the SAN field. We create a new config file and tell it to copy all extended fields <strong>copy_extensions = copy</strong>.</p>
<pre><code>openssl ca -config config_ca.cnf -out market.crt -in market.csr
</code></pre>
<p>The program asks you 2 questions:</p>
<ol>
<li>Sign the certificate? Say "Y"</li>
<li>1 out of 1 certificate requests certified, commit? Say "Y"</li>
</ol>
<p>In terminal you can see a sentence with the word "Database", it means file index.txt which you create by the command "touch". It will contain all information by all certificates you create by "openssl ca" util.
To check the certificate valid use:</p>
<pre><code>openssl rsa -in market.key -check
</code></pre>
<p>If you want to see what inside in CRT:</p>
<pre><code>openssl x509 -in market.crt -text -noout
</code></pre>
<p>If you want to see what inside in CSR:</p>
<pre><code>openssl req -in market.csr -noout -text 
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is the script I use on local boxes to set the SAN (subjectAltName) in self-signed certificates. </p>

<p>This script takes the domain name (example.com) and generates the SAN for *.example.com and example.com in the same certificate. The sections below are commented. Name the script (e.g. <code>generate-ssl.sh</code>) and give it executable permissions. The files will be written to the same directory as the script.</p>

<p>Chrome 58 an onward requires SAN to be set in self-signed certificates.</p>

<pre><code>#!/usr/bin/env bash

# Set the TLD domain we want to use
BASE_DOMAIN="example.com"

# Days for the cert to live
DAYS=1095

# A blank passphrase
PASSPHRASE=""

# Generated configuration file
CONFIG_FILE="config.txt"

cat &gt; $CONFIG_FILE &lt;&lt;-EOF
[req]
default_bits = 2048
prompt = no
default_md = sha256
x509_extensions = v3_req
distinguished_name = dn

[dn]
C = CA
ST = BC
L = Vancouver
O = Example Corp
OU = Testing Domain
emailAddress = webmaster@$BASE_DOMAIN
CN = $BASE_DOMAIN

[v3_req]
subjectAltName = @alt_names

[alt_names]
DNS.1 = *.$BASE_DOMAIN
DNS.2 = $BASE_DOMAIN
EOF

# The file name can be anything
FILE_NAME="$BASE_DOMAIN"

# Remove previous keys
echo "Removing existing certs like $FILE_NAME.*"
chmod 770 $FILE_NAME.*
rm $FILE_NAME.*

echo "Generating certs for $BASE_DOMAIN"

# Generate our Private Key, CSR and Certificate
# Use SHA-2 as SHA-1 is unsupported from Jan 1, 2017

openssl req -new -x509 -newkey rsa:2048 -sha256 -nodes -keyout "$FILE_NAME.key" -days $DAYS -out "$FILE_NAME.crt" -passin pass:$PASSPHRASE -config "$CONFIG_FILE"

# OPTIONAL - write an info to see the details of the generated crt
openssl x509 -noout -fingerprint -text &lt; "$FILE_NAME.crt" &gt; "$FILE_NAME.info"

# Protect the key
chmod 400 "$FILE_NAME.key"
</code></pre>

<p>This script also writes an information file, so you can inspect the new certificate and verify the SAN is set properly.</p>

<pre><code>                ...
                28:dd:b8:1e:34:b5:b1:44:1a:60:6d:e3:3c:5a:c4:
                da:3d
            Exponent: 65537 (0x10001)
    X509v3 extensions:
        X509v3 Subject Alternative Name: 
            DNS:*.example.com, DNS:example.com
Signature Algorithm: sha256WithRSAEncryption
     3b:35:5a:d6:9e:92:4f:fc:f4:f4:87:78:cd:c7:8d:cd:8c:cc:
     ...
</code></pre>

<p>If you are using Apache, then you can reference the above certificate in your configuration file like so:</p>

<pre><code>&lt;VirtualHost _default_:443&gt;
    ServerName example.com
    ServerAlias www.example.com
    DocumentRoot /var/www/htdocs

    SSLEngine on
    SSLCertificateFile path/to/your/example.com.crt
    SSLCertificateKeyFile path/to/your/example.com.key
&lt;/VirtualHost&gt;
</code></pre>

<p>Remember to restart your Apache (or Nginx, or IIS) server for the new certificate to take effect.</p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>2017 one-liner:</p>

<pre><code>openssl req \
-newkey rsa:2048 \
-x509 \
-nodes \
-keyout server.pem \
-new \
-out server.pem \
-subj /CN=localhost \
-reqexts SAN \
-extensions SAN \
-config &lt;(cat /System/Library/OpenSSL/openssl.cnf \
    &lt;(printf '[SAN]\nsubjectAltName=DNS:localhost')) \
-sha256 \
-days 3650
</code></pre>

<p>This also works in Chrome 57, as it provides the SAN, without having another configuration file.
It was taken from an answer <a href="https://github.com/webpack/webpack-dev-server/issues/854" rel="nofollow noreferrer">here</a>.</p>

<p>This creates a single .pem file that contains both the private key and cert. You can move them to separate .pem files if needed.</p>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>One-liner version 2017:</p>

<p><strong>CentOS:</strong></p>

<pre><code>openssl req -x509 -nodes -sha256 -newkey rsa:2048 \
-keyout localhost.key -out localhost.crt \
-days 3650 \
-subj "CN=localhost" \
-reqexts SAN -extensions SAN \
-config &lt;(cat /etc/pki/tls/openssl.cnf &lt;(printf "\n[SAN]\nsubjectAltName=IP:127.0.0.1,DNS:localhost"))
</code></pre>

<p><strong>Ubuntu:</strong></p>

<pre><code>openssl req -x509 -nodes -sha256 -newkey rsa:2048 \
-keyout localhost.key -out localhost.crt \
-days 3650 \
-subj "/CN=localhost" \
-reqexts SAN -extensions SAN \
-config &lt;(cat /etc/ssl/openssl.cnf &lt;(printf "\n[SAN]\nsubjectAltName=IP:127.0.0.1,DNS:localhost"))
</code></pre>

<p>Edit: added prepending Slash to 'subj' option for Ubuntu.</p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>One liner FTW. I like to keep it simple. Why not use one command that contains ALL the arguments needed? This is how I like it - this creates an x509 certificate and its PEM key:</p>

<pre><code>openssl req -x509 \
 -nodes -days 365 -newkey rsa:4096 \
 -keyout self.key.pem \
 -out self-x509.crt \
 -subj "/C=US/ST=WA/L=Seattle/CN=example.com/emailAddress=someEmail@gmail.com"
</code></pre>

<p>That single command contains all the answers you would normally provide for the certificate details.  This way you can set the parameters and run the command, get your output - then go for coffee.</p>

<p><a href="http://scaleup.us/2017/09/10/create-self-signed-tls-certificates-pkcs8-key-x509-cert-graylog-gelf/" rel="nofollow noreferrer">&gt;&gt; More here &lt;&lt;</a></p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><code>openssl</code> allows to generate self-signed certificate by a single command (<code>-newkey</code>
instructs to generate a private key and <code>-x509</code> instructs to issue a self-signed
certificate instead of a signing request)::</p>
<pre><code>openssl req -x509 -newkey rsa:4096 \
-keyout my.key -passout pass:123456 -out my.crt \
-days 365 \
-subj /CN=localhost/O=home/C=US/emailAddress=me@mail.internal \
-addext "subjectAltName = DNS:localhost,DNS:web.internal,email:me@mail.internal" \
-addext keyUsage=digitalSignature -addext extendedKeyUsage=serverAuth
</code></pre>
<p>You can generate a private key and construct a self-signing certificate in separate steps::</p>
<pre><code>openssl genrsa -out my.key -passout pass:123456 2048

openssl req -x509 \
-key my.key -passin pass:123456 -out my.csr \
-days 3650 \
-subj /CN=localhost/O=home/C=US/emailAddress=me@mail.internal \
-addext "subjectAltName = DNS:localhost,DNS:web.internal,email:me@mail.internal" \
-addext keyUsage=digitalSignature -addext extendedKeyUsage=serverAuth
</code></pre>
<p>Review the resulting certificate::</p>
<pre><code>openssl x509 -text -noout -in my.crt
</code></pre>
<p>Java <code>keytool</code> creates PKCS#12 store::</p>
<pre><code>keytool -genkeypair -keystore my.p12 -alias master \
-storetype pkcs12 -keyalg RSA -keysize 2048 -validity 3650 \
-storepass 123456 \
-dname "CN=localhost,O=home,C=US" \
-ext 'san=dns:localhost,dns:web.internal,email:me@mail.internal'
</code></pre>
<p>To export the self-signed certificate::</p>
<pre><code>keytool -exportcert -keystore my.p12 -file my.crt \
-alias master -rfc -storepass 123456
</code></pre>
<p>Review the resulting certificate::</p>
<pre><code>keytool -printcert -file my.crt
</code></pre>
<p><code>certtool</code> from GnuTLS doesn't allow passing different attributes from CLI. I don't like to mess with config files ((</p>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 14</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You have the general procedure correct. The syntax for the command is below.</p>

<pre><code>openssl req -new -key {private key file} -out {output file}
</code></pre>

<p>However, the warnings are displayed, because the browser was not able to verify the identify by validating the certificate with a known Certificate Authority (CA). </p>

<p>As this is a self-signed certificate there is no CA and you can safely ignore the warning and proceed. Should you want to get a real certificate that will be recognizable by anyone on the public Internet then the procedure is below.</p>

<ol>
<li>Generate a private key</li>
<li>Use that private key to create a CSR file</li>
<li>Submit CSR to CA (Verisign or others, etc.)</li>
<li>Install received cert from CA on web server</li>
<li>Add other certs to authentication chain depending on the type cert</li>
</ol>

<p>I have more details about this in a post at <em><a href="https://bigthinkingapplied.com/secure-the-connection-installing-certificates-on-3-common-web-servers/" rel="nofollow noreferrer">Securing the Connection: Creating a Security Certificate with OpenSSL</a></em></p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 15</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
  <h2>Generate keys</h2>
  
  <p>I am using <code>/etc/mysql</code> for cert storage because <code>/etc/apparmor.d/usr.sbin.mysqld</code> contains <code>/etc/mysql/*.pem r</code>.</p>

<pre><code>sudo su -
cd /etc/mysql
openssl genrsa -out ca-key.pem 2048;
openssl req -new -x509 -nodes -days 1000 -key ca-key.pem -out ca-cert.pem;
openssl req -newkey rsa:2048 -days 1000 -nodes -keyout server-key.pem -out server-req.pem;
openssl x509 -req -in server-req.pem -days 1000 -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 -out server-cert.pem;
openssl req -newkey rsa:2048 -days 1000 -nodes -keyout client-key.pem -out client-req.pem;
openssl x509 -req -in client-req.pem -days 1000 -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 -out client-cert.pem;
</code></pre>
  
  <h2>Add configuration</h2>
  
  <p><code>/etc/mysql/my.cnf</code></p>

<pre><code>[client]
ssl-ca=/etc/mysql/ca-cert.pem
ssl-cert=/etc/mysql/client-cert.pem
ssl-key=/etc/mysql/client-key.pem

[mysqld]
ssl-ca=/etc/mysql/ca-cert.pem
ssl-cert=/etc/mysql/server-cert.pem
ssl-key=/etc/mysql/server-key.pem
</code></pre>
</blockquote>

<p>On my setup, Ubuntu server logged to: <code>/var/log/mysql/error.log</code></p>

<h1>Follow up notes:</h1>

<ul>
<li><p><code>SSL error: Unable to get certificate from '...'</code></p>

<p><a href="http://ubuntuforums.org/showthread.php?t=1121458&amp;p=7048357#post7048357" rel="nofollow noreferrer">MySQL might be denied read access to your certificate file if it is not in apparmors configuration</a>. As mentioned in the previous steps^, save all our certificates as <code>.pem</code> files in the <code>/etc/mysql/</code> directory which is approved by default by apparmor (or modify your apparmor/SELinux to allow access to wherever you stored them.)</p></li>
<li><p><code>SSL error: Unable to get private key</code></p>

<p><a href="https://askubuntu.com/a/439274/250556">Your MySQL server version may not support the default <code>rsa:2048</code> format</a></p>

<p>Convert generated <code>rsa:2048</code> to plain <code>rsa</code> with:</p>

<pre><code>openssl rsa -in server-key.pem -out server-key.pem
openssl rsa -in client-key.pem -out client-key.pem
</code></pre></li>
<li><p><a href="https://mifosforge.jira.com/wiki/display/MIFOS/How+to+enable+MySQL+SSL+on+Ubuntu" rel="nofollow noreferrer">Check if local server supports SSL</a>:</p>

<blockquote>
<pre><code>mysql -u root -p
mysql&gt; show variables like "%ssl%";
+---------------+----------------------------+
| Variable_name | Value                      |
+---------------+----------------------------+
| have_openssl  | YES                        |
| have_ssl      | YES                        |
| ssl_ca        | /etc/mysql/ca-cert.pem     |
| ssl_capath    |                            |
| ssl_cert      | /etc/mysql/server-cert.pem |
| ssl_cipher    |                            |
| ssl_key       | /etc/mysql/server-key.pem  |
+---------------+----------------------------+
</code></pre>
</blockquote></li>
<li><p><a href="https://kb.berkeley.edu/page.php?id=23112" rel="nofollow noreferrer">Verifying a connection to the database is SSL encrypted</a>:</p>

<blockquote>
  <h2>Verifying connection</h2>
  
  <p>When logged in to the MySQL instance, you can issue the query:</p>

<pre><code>show status like 'Ssl_cipher';
</code></pre>
  
  <p>If your connection is not encrypted, the result will be blank:</p>

<pre><code>mysql&gt; show status like 'Ssl_cipher';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| Ssl_cipher    |       |
+---------------+-------+
1 row in set (0.00 sec)
</code></pre>
  
  <p>Otherwise, it would show a non-zero length string for the cypher in use:</p>

<pre><code>mysql&gt; show status like 'Ssl_cipher';
+---------------+--------------------+
| Variable_name | Value              |
+---------------+--------------------+
| Ssl_cipher    | DHE-RSA-AES256-SHA |
+---------------+--------------------+
1 row in set (0.00 sec)
</code></pre>
</blockquote></li>
<li><p><a href="http://dev.mysql.com/doc/refman/5.0/en/grant.html" rel="nofollow noreferrer">Require ssl for specific user's connection</a> ('require ssl'):</p>

<blockquote>
  <ul>
  <li>SSL</li>
  </ul>
  
  <p>Tells the server to permit only SSL-encrypted connections for the account.</p>

<pre><code>GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  REQUIRE SSL;
</code></pre>
  
  <p>To connect, the client must specify the --ssl-ca option to authenticate the server certificate, and may additionally specify the --ssl-key and --ssl-cert options. If neither --ssl-ca option nor --ssl-capath option is specified, the client does not authenticate the server certificate.</p>
</blockquote></li>
</ul>

<hr>

<p>Alternate link: Lengthy tutorial in <em><a href="http://www.madirish.net/214" rel="nofollow noreferrer">Secure PHP Connections to MySQL with SSL</a></em>.</p>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 16</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As has been discussed in detail, <a href="https://en.wikipedia.org/wiki/Self-signed_certificate" rel="nofollow noreferrer">self-signed certificates</a> <a href="https://www.globalsign.com/en/ssl-information-center/dangers-self-signed-certificates/" rel="nofollow noreferrer">are not trusted for the Internet</a>. You can <a href="https://stackoverflow.com/questions/7580508/getting-chrome-to-accept-self-signed-localhost-certificate">add your self-signed certificate to many but not all browsers</a>. Alternatively you can <a href="https://stackoverflow.com/questions/21297139/how-do-you-sign-a-certificate-signing-request-with-your-certification-authority/21340898#21340898">become your own certificate authority</a>.</p>

<p>The primary reason one does not want to get a signed certificate from a certificate authority is cost -- <a href="https://www.websecurity.symantec.com/buy-renew?ef_id=Cj0KCQiAwc7jBRD8ARIsAKSUBHL3u_wl0kyXRrvQM3Fj2H9j9T6FogZsQVjmxinnw6KIf9xVvUP9O64aAj0KEALw_wcB:G:s&amp;s_kwcid=AL!6100!3!225648135095!e!!g!!symantec%20ssl%20certificate&amp;gclid=Cj0KCQiAwc7jBRD8ARIsAKSUBHL3u_wl0kyXRrvQM3Fj2H9j9T6FogZsQVjmxinnw6KIf9xVvUP9O64aAj0KEALw_wcB" rel="nofollow noreferrer">Symantec charges between $995 - $1,999 per year for certificates -- just for a certificate intended for internal network, Symantec charges $399 per year</a>. That cost is easy to justify if you are processing credit card payments or work for the profit center of a highly profitable company. It is more than many can afford for a personal project one is creating on the internet, or for a non-profit running on a minimal budget, or if one works in a cost center of an organization -- cost centers always try to do more with less.</p>

<p>An alternative is to use <a href="https://certbot.eff.org/" rel="nofollow noreferrer">certbot</a> (see <a href="https://certbot.eff.org/about/" rel="nofollow noreferrer">about certbot</a>). Certbot is an easy-to-use automatic client that fetches and deploys SSL/TLS certificates for your web server.</p>

<p>If you setup certbot, you can enable it to create and maintain a certificate for you issued by the <a href="https://letsencrypt.org/" rel="nofollow noreferrer">Lets Encrypt</a> certificate authority.</p>

<p>I did this over the weekend for my organization. I installed the required packages for certbot on my server (Ubuntu 16.04) and then ran the command necessary to setup and enable certbot. One likely needs a <a href="https://certbot.eff.org/docs/using.html#dns-plugins" rel="nofollow noreferrer">DNS plugin</a> for certbot - we are presently using <a href="https://certbot-dns-digitalocean.readthedocs.io/en/stable/" rel="nofollow noreferrer">DigitalOcean</a> though may be migrating to another service soon.</p>

<p>Note that some of the instructions were not quite right and took a little poking and time with Google to figure out. This took a fair amount of my time the first time but now I think I could do it in minutes.</p>

<p>For DigitalOcean, one area I struggled was when I was prompted to input the path to your DigitalOcean credentials INI file. What the script is referring to is the <a href="https://cloud.digitalocean.com/account/api/tokens" rel="nofollow noreferrer">Applications &amp; API</a> page and the Tokens/Key tab on that page. You need to have or generate a personal access token (read and write) for DigitalOcean's API -- this is a 65 character hexadecimal string. This string then needs to be put into a file on the webserver from which you are running certbot. That file can have a comment as its first line (comments start with #). The seccond line is:</p>

<pre><code>dns_digitalocean_token = 0000111122223333444455556666777788889999aaaabbbbccccddddeeeeffff
</code></pre>

<p>Once I figured out how to set up a read+write token for DigitalOcean's API, it was pretty easy to use certbot to setup a <a href="https://en.wikipedia.org/wiki/Wildcard_certificate" rel="nofollow noreferrer">wildcard certificate</a>. Note that one does not have to setup a wildcard certificate, one may instead specify each domain and sub-domain that one wants the certificate to appply to. It was the wildcard certificate that required the credentials INI file that contained the personal access token from DigitalOcean.</p>

<p>Note that public key certificates (also known as identity certificates or SSL certificates) expire and require renewal. Thus you will need to renew your certificate on a periodic (reoccurring) basis. The certbot documentation covers <a href="https://certbot.eff.org/docs/using.html#renewing-certificates" rel="nofollow noreferrer">renewing certificates</a>.</p>

<p>My plan is to write a script to use the openssl command to get my certificate's expiration date and to trigger renewal when it is 30 days or less until it expires. I will then add this script to cron and run it once per day.</p>

<p>Here is the command to read your certificate's expiration date:</p>

<pre><code>root@prod-host:~# /usr/bin/openssl x509 -enddate -noout -in path-to-certificate-pem-file
notAfter=May 25 19:24:12 2019 GMT
</code></pre>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 17</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>this worked for me</p>
<pre><code>openssl req -x509 -nodes -subj '/CN=localhost'  -newkey rsa:4096 -keyout ./sslcert/key.pem -out ./sslcert/cert.pem -days 365
</code></pre>
<p>server.js</p>
<pre><code>var fs = require('fs');
var path = require('path');
var http = require('http');
var https = require('https');
var compression = require('compression');
var express = require('express');
var app = express();

app.use(compression());
app.use(express.static(__dirname + '/www'));    

app.get('/*', function(req,res) {
  res.sendFile(path.join(__dirname+'/www/index.html'));
});

// your express configuration here

var httpServer = http.createServer(app);
var credentials = {
    key: fs.readFileSync('./sslcert/key.pem', 'utf8'),
    cert: fs.readFileSync('./sslcert/cert.pem', 'utf8')
};
var httpsServer = https.createServer(credentials, app);

httpServer.listen(8080);
httpsServer.listen(8443);

console.log(`RUNNING ON  http://127.0.0.1:8080`);
console.log(`RUNNING ON  http://127.0.0.1:8443`);
</code></pre>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 18</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>After much of going around, playing with various solutions, still I faced the problem that issuing a self-signed certificate for localhost, gave me error</p>
<p><code>ERR_CERT_INVALID</code></p>
<p>When expanding the details, chrome said:</p>
<blockquote>
<p>You cannot visit localhost right now because the website sent
scrambled credentials...</p>
</blockquote>
<p>And the only ugly way to get through is to type (directly in this screen, without seeing any cursor for the text) :</p>
<p>(type in the keyboard) <em><strong>thisisunsafe</strong></em></p>
<p>Which let me proceed.</p>
<h4>Until I found <code>extendedKeyUsage = serverAuth, clientAuth</code></h4>
<p><strong>TL;DR</strong></p>
<ol>
<li><p><code>openssl genrsa -out localhost.key 2048</code></p>
</li>
<li><p><code>openssl req -key localhost.key -new -out localhost.csr</code></p>
</li>
<li><p>(click enter on everything and just fill in the common name (CN) with localhost or your other FQDN.</p>
</li>
<li><p>put the following in a file named <code>v3.ext</code> (edit whatever you need):</p>
</li>
</ol>
<pre><code>subjectKeyIdentifier   = hash
authorityKeyIdentifier = keyid:always,issuer:always
basicConstraints       = CA:TRUE
keyUsage               = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment, keyAgreement, keyCertSign
extendedKeyUsage       = serverAuth, clientAuth
subjectAltName         = DNS:localhost, DNS:localhost.localdomain
issuerAltName          = issuer:copy
</code></pre>
<ol start="5">
<li><code>openssl x509 -req -in localhost.csr -signkey localhost.key -out localhost.pem -days 3650 -sha256 -extfile v3.ext</code></li>
</ol>
<p>And voilà!
You can visit the website, expand "Advanced" and click "Proceed to localhost (unsafe)".</p>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 19</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Generate a key without password and certificate for 10 years, the short way:</p>
<pre><code>openssl req  -x509 -nodes -new  -keyout server.key -out server.crt -days 3650 -subj "/C=/ST=/L=/O=/OU=web/CN=www.server.com"
</code></pre>
<p>for the flag <code>-subj | -subject</code> <strong>empty values are permitted</strong> <code>-subj "/C=/ST=/L=/O=/OU=web/CN=www.server.com"</code>, but you can sets more details as you like:</p>
<ul>
<li>C - Country Name (2 letter code)</li>
<li>ST - State</li>
<li>L - Locality Name (eg, city)</li>
<li>O - Organization Name</li>
<li>OU - Organizational Unit Name</li>
<li>CN - Common Name - <strong>required!</strong></li>
</ul>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 20</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl">ssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/openssl">openssl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/certificate">certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/ssl-certificate">ssl-certificate</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/x509certificate">x509certificate</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This very simple Python app that creates a self-signed certificate.
Code:</p>
<pre><code>from OpenSSL import crypto, SSL
from secrets import randbelow
print("Please know, if you make a mistake, you must restart the program.")
def cert_gen(
    emailAddress=input("Enter Email Address: "),
    commonName=input("Enter Common Name: "),
    countryName=input("Enter Country Name (2 characters): "),
    localityName=input("Enter Locality Name: "),
    stateOrProvinceName=input("Enter State of Province Name: "),
    organizationName=input("Enter Organization Name: "),
    organizationUnitName=input("Enter Organization Unit Name: "),
    serialNumber=randbelow(1000000),
    validityStartInSeconds=0,
    validityEndInSeconds=10*365*24*60*60,
    KEY_FILE = "private.key",
    CERT_FILE="selfsigned.crt"):
    #can look at generated file using openssl:
    #openssl x509 -inform pem -in selfsigned.crt -noout -text
    # create a key pair
    k = crypto.PKey()
    k.generate_key(crypto.TYPE_RSA, 4096)
    # create a self-signed cert
    cert = crypto.X509()
    cert.get_subject().C = countryName
    cert.get_subject().ST = stateOrProvinceName
    cert.get_subject().L = localityName
    cert.get_subject().O = organizationName
    cert.get_subject().OU = organizationUnitName
    cert.get_subject().CN = commonName
    cert.get_subject().emailAddress = emailAddress
    cert.set_serial_number(serialNumber)
    cert.gmtime_adj_notBefore(0)
    cert.gmtime_adj_notAfter(validityEndInSeconds)
    cert.set_issuer(cert.get_subject())
    cert.set_pubkey(k)
    cert.sign(k, 'sha512')
    with open(CERT_FILE, "wt") as f:
        f.write(crypto.dump_certificate(crypto.FILETYPE_PEM, cert).decode("utf-8"))
    with open(KEY_FILE, "wt") as f:
        f.write(crypto.dump_privatekey(crypto.FILETYPE_PEM, k).decode("utf-8"))
    print("GENERATED")
    input("Press enter to close program.")
cert_gen()
</code></pre>
<p>However, you still get the "certificate is not trusted" error. This is because of a few reasons:</p>
<ol>
<li>It is self-signed/not verified (a verified certificate would need a CA (Certificate Authority), like Let's Encrypt to be trusted on all devices).</li>
<li>It is not trusted on your machine. (<a href="https://stackoverflow.com/a/48790088/14739273">this</a> answer shows how you can make Windows trust your certificate).</li>
</ol>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/cleansing-user-passwords-1657387365583">Cleansing User Passwords</a><a href="/questions/srand()-why-call-it-only-once-1657387794760">srand() — why call it only once?</a><a href="/questions/what-is-a-nullpointerexception-and-how-do-i-fix-it-1657384201768">What is a NullPointerException, and how do I fix it?</a><a href="/questions/why-does-this-unboundlocalerror-occur-(closure)-duplicate-1657388531538">Why does this UnboundLocalError occur (closure)? [duplicate]</a><a href="/questions/how-can-i-access-an-arrayobject-1657387395541">How can I access an array/object?</a><a href="/questions/big-o-how-do-you-calculateapproximate-it-1657387856392">Big O, how do you calculate/approximate it?</a><a href="/questions/how-do-i-make-a-list-of-data-frames-1657385480437">How do I make a list of data frames?</a><a href="/questions/mysql-pivot-row-into-dynamic-number-of-columns-1657387981930">MySQL pivot row into dynamic number of columns</a><a href="/questions/what-is-the-copy-and-swap-idiom-1657384840329">What is the copy-and-swap idiom?</a><a href="/questions/what-is-the-difference-between-client-side-and-server-side-programming-1657384372926">What is the difference between client-side and server-side programming?</a><a href="/questions/selenium-wait-until-element-is-present-visible-and-interactable-1657384820071">Selenium - wait until element is present, visible and interactable</a><a href="/questions/when-to-use-linkedlist-over-arraylist-in-java-1657388107480">When to use LinkedList over ArrayList in Java?</a><a href="/questions/how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981">How can I save an activity state using the save instance state?</a><a href="/questions/how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934">How to use java.net.URLConnection to fire and handle HTTP requests</a><a href="/questions/variables-are-not-behaving-as-expected-1657384865672">Variables are not behaving as expected</a><a href="/questions/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values-closed-1657387683057">How to use SharedPreferences in Android to store, fetch and edit values [closed]</a><a href="/questions/using-global-variables-in-a-function-1657384796002">Using global variables in a function</a><a href="/questions/dynamically-select-data-frame-columns-using-dollar-and-a-character-value-1657387836662">Dynamically select data frame columns using $ and a character value</a><a href="/questions/how-to-sort-a-multi-dimensional-array-by-value-1657387746110">How to Sort a Multi-dimensional Array by Value</a><a href="/questions/what-is-an-indexoutofrangeexception-argumentoutofrangeexception-and-how-do-i-fix-it-1657384697159">What is an IndexOutOfRangeException / ArgumentOutOfRangeException and how do I fix it?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;You can do that in one command:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -sha256 -days 365\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You can also add \u0026lt;code\u0026gt;-nodes\u0026lt;/code\u0026gt; (short for \u0026quot;no DES\u0026quot;) if you don\u0026apos;t want to protect your private key with a passphrase. Otherwise it will prompt you for \u0026quot;at least a 4 character\u0026quot; password.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;days\u0026lt;/code\u0026gt; parameter (365) you can replace with any number to affect the expiration date. It will then prompt you for things like \u0026quot;Country Name\u0026quot;, but you can just hit \u0026lt;kbd\u0026gt;Enter\u0026lt;/kbd\u0026gt; and accept the defaults.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Add \u0026lt;code\u0026gt;-subj \u0026apos;/CN=localhost\u0026apos;\u0026lt;/code\u0026gt; to suppress questions about the contents of the certificate (replace \u0026lt;code\u0026gt;localhost\u0026lt;/code\u0026gt; with your desired domain).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Self-signed certificates are not validated with any third party unless you import them to the browsers previously. If you need more security, you should use a certificate signed by a \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Certificate_authority\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;certificate authority\u0026lt;/a\u0026gt; (CA).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Am I missing something? Is this the correct way to build a self-signed certificate?\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;It\u0026apos;s easy to create a self-signed certificate. You just use the \u0026lt;code\u0026gt;openssl req\u0026lt;/code\u0026gt; command. It can be tricky to create one that can be consumed by the largest selection of clients, like browsers and command line tools.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;It\u0026apos;s difficult because the browsers have their own set of requirements, and they are more restrictive than the \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Internet_Engineering_Task_Force\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;IETF\u0026lt;/a\u0026gt;. The requirements used by browsers are documented at the \u0026lt;a href=\u0026quot;https://cabforum.org/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;CA/Browser Forums\u0026lt;/a\u0026gt; (see references below). The restrictions arise in two key areas: (1) trust anchors, and (2) DNS names.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Modern browsers (like the warez we\u0026apos;re using in 2014/2015) want a certificate that chains back to a trust anchor, and they want DNS names to be presented in particular ways in the certificate. And browsers are actively moving against self-signed server certificates.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Some browsers don\u0026apos;t exactly make it easy to import a self-signed server certificate. In fact, you can\u0026apos;t with some browsers, like Android\u0026apos;s browser. So the complete solution is to become your own authority.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In the absence of becoming your own authority, you have to get the DNS names right to give the certificate the greatest chance of success. But I would encourage you to become your own authority. It\u0026apos;s easy to become your own authority, and it will sidestep all the trust issues (who better to trust than yourself?).\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;This is probably not the site you are looking for!\u0026lt;br\u0026gt;\nThe site\u0026apos;s security certificate is not trusted!\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;This is because browsers use a predefined list of trust anchors to validate server certificates. A self-signed certificate does not chain back to a trusted anchor.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The best way to avoid this is:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Create your own authority (i.e., become a \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Certificate_authority\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;CA\u0026lt;/a\u0026gt;)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Create a certificate signing request (CSR) for the server\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Sign the server\u0026apos;s CSR with your CA key\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Install the server certificate on the server\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Install the CA certificate on the client\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;Step 1 - \u0026lt;em\u0026gt;Create your own authority\u0026lt;/em\u0026gt; just means to create a self-signed certificate with \u0026lt;code\u0026gt;CA: true\u0026lt;/code\u0026gt; and proper key usage. That means the \u0026lt;em\u0026gt;Subject\u0026lt;/em\u0026gt; and \u0026lt;em\u0026gt;Issuer\u0026lt;/em\u0026gt; are the same entity, CA is set to true in \u0026lt;em\u0026gt;Basic Constraints\u0026lt;/em\u0026gt; (it should also be marked as critical), key usage is \u0026lt;code\u0026gt;keyCertSign\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;crlSign\u0026lt;/code\u0026gt; (if you are using CRLs), and the \u0026lt;em\u0026gt;Subject Key Identifier\u0026lt;/em\u0026gt; (SKI) is the same as the \u0026lt;em\u0026gt;Authority Key Identifier\u0026lt;/em\u0026gt; (AKI).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;To become your own certificate authority, see *\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/21297139/how-do-you-sign-a-certificate-signing-request-with-your-certification-authority/21340898#21340898\u0026quot;\u0026gt;How do you sign a certificate signing request with your certification authority?\u0026lt;/a\u0026gt; on Stack Overflow. Then, import your CA into the Trust Store used by the browser.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Steps 2 - 4 are roughly what you do now for a public facing server when you enlist the services of a CA like \u0026lt;a href=\u0026quot;https://www.startssl.com/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Startcom\u0026lt;/a\u0026gt; or \u0026lt;a href=\u0026quot;https://www.cacert.org/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;CAcert\u0026lt;/a\u0026gt;. Steps 1 and 5 allows you to avoid the third-party authority, and act as your own authority (who better to trust than yourself?).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The next best way to avoid the browser warning is to trust the server\u0026apos;s certificate. But some browsers, like Android\u0026apos;s default browser, do not let you do it. So it will never work on the platform.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The issue of browsers (and other similar user agents) \u0026lt;em\u0026gt;not\u0026lt;/em\u0026gt; trusting self-signed certificates is going to be a big problem in the Internet of Things (IoT). For example, what is going to happen when you connect to your thermostat or refrigerator to program it? The answer is, nothing good as far as the user experience is concerned.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The W3C\u0026apos;s WebAppSec Working Group is starting to look at the issue.  See, for example, \u0026lt;a href=\u0026quot;http://lists.w3.org/Archives/Public/public-webappsec/2014Dec/0203.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Proposal: Marking HTTP As Non-Secure\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;How to create a self-signed certificate with OpenSSL\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;The commands below and the configuration file create a self-signed certificate (it also shows you how to create a signing request). They differ from other answers in one respect: the DNS names used for the self signed certificate are in the \u0026lt;em\u0026gt;Subject Alternate Name (SAN)\u0026lt;/em\u0026gt;, and not the \u0026lt;em\u0026gt;Common Name (CN)\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The DNS names are placed in the SAN through the configuration file with the line \u0026lt;code\u0026gt;subjectAltName = @alternate_names\u0026lt;/code\u0026gt; (there\u0026apos;s no way to do it through the command line). Then there\u0026apos;s an \u0026lt;code\u0026gt;alternate_names\u0026lt;/code\u0026gt; section in the configuration file (you should tune this to suit your taste):\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;[ alternate_names ]\n\nDNS.1       = example.com\nDNS.2       = www.example.com\nDNS.3       = mail.example.com\nDNS.4       = ftp.example.com\n\n# Add these if you need them. But usually you don\u0026apos;t want them or\n#   need them in production. You may need them for development.\n# DNS.5       = localhost\n# DNS.6       = localhost.localdomain\n# IP.1        = 127.0.0.1\n# IP.2        = ::1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;It\u0026apos;s important to put DNS name in the SAN and not the CN, because \u0026lt;em\u0026gt;both\u0026lt;/em\u0026gt; the IETF and the CA/Browser Forums specify the practice. They also specify that DNS names in the CN are deprecated (but not prohibited). \u0026lt;em\u0026gt;If\u0026lt;/em\u0026gt; you put a DNS name in the CN, then it \u0026lt;em\u0026gt;must\u0026lt;/em\u0026gt; be included in the SAN under the CA/B policies. So you can\u0026apos;t avoid using the Subject Alternate Name.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you don\u0026apos;t do put DNS names in the SAN, then the certificate will fail to validate under a browser and other user agents which follow the CA/Browser Forum guidelines.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Related: browsers follow the CA/Browser Forum policies; and not the IETF policies. That\u0026apos;s one of the reasons a certificate created with OpenSSL (which generally follows the IETF) sometimes does not validate under a browser (browsers follow the CA/B). They are different standards, they have different issuing policies and different validation requirements.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Create a self signed certificate\u0026lt;/strong\u0026gt; (notice the addition of \u0026lt;code\u0026gt;-x509\u0026lt;/code\u0026gt; option):\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -config example-com.conf -new -x509 -sha256 -newkey rsa:2048 -nodes \\\n    -keyout example-com.key.pem -days 365 -out example-com.cert.pem\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Create a signing request\u0026lt;/strong\u0026gt; (notice the lack of \u0026lt;code\u0026gt;-x509\u0026lt;/code\u0026gt; option):\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -config example-com.conf -new -sha256 -newkey rsa:2048 -nodes \\\n    -keyout example-com.key.pem -days 365 -out example-com.req.pem\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Print a self-signed certificate\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl x509 -in example-com.cert.pem -text -noout\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Print a signing request\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -in example-com.req.pem -text -noout\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Configuration file (passed via \u0026lt;code\u0026gt;-config\u0026lt;/code\u0026gt; option)\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;[ req ]\ndefault_bits        = 2048\ndefault_keyfile     = server-key.pem\ndistinguished_name  = subject\nreq_extensions      = req_ext\nx509_extensions     = x509_ext\nstring_mask         = utf8only\n\n# The Subject DN can be formed using X501 or RFC 4514 (see RFC 4519 for a description).\n#   Its sort of a mashup. For example, RFC 4514 does not provide emailAddress.\n[ subject ]\ncountryName         = Country Name (2 letter code)\ncountryName_default     = US\n\nstateOrProvinceName     = State or Province Name (full name)\nstateOrProvinceName_default = NY\n\nlocalityName            = Locality Name (eg, city)\nlocalityName_default        = New York\n\norganizationName         = Organization Name (eg, company)\norganizationName_default    = Example, LLC\n\n# Use a friendly name here because it\u0026apos;s presented to the user. The server\u0026apos;s DNS\n#   names are placed in Subject Alternate Names. Plus, DNS names here is deprecated\n#   by both IETF and CA/Browser Forums. If you place a DNS name here, then you\n#   must include the DNS name in the SAN too (otherwise, Chrome and others that\n#   strictly follow the CA/Browser Baseline Requirements will fail).\ncommonName          = Common Name (e.g. server FQDN or YOUR name)\ncommonName_default      = Example Company\n\nemailAddress            = Email Address\nemailAddress_default        = test@example.com\n\n# Section x509_ext is used when generating a self-signed certificate. I.e., openssl req -x509 ...\n[ x509_ext ]\n\nsubjectKeyIdentifier        = hash\nauthorityKeyIdentifier    = keyid,issuer\n\n# You only need digitalSignature below. *If* you don\u0026apos;t allow\n#   RSA Key transport (i.e., you use ephemeral cipher suites), then\n#   omit keyEncipherment because that\u0026apos;s key transport.\nbasicConstraints        = CA:FALSE\nkeyUsage            = digitalSignature, keyEncipherment\nsubjectAltName          = @alternate_names\nnsComment           = \u0026quot;OpenSSL Generated Certificate\u0026quot;\n\n# RFC 5280, Section 4.2.1.12 makes EKU optional\n#   CA/Browser Baseline Requirements, Appendix (B)(3)(G) makes me confused\n#   In either case, you probably only need serverAuth.\n# extendedKeyUsage    = serverAuth, clientAuth\n\n# Section req_ext is used when generating a certificate signing request. I.e., openssl req ...\n[ req_ext ]\n\nsubjectKeyIdentifier        = hash\n\nbasicConstraints        = CA:FALSE\nkeyUsage            = digitalSignature, keyEncipherment\nsubjectAltName          = @alternate_names\nnsComment           = \u0026quot;OpenSSL Generated Certificate\u0026quot;\n\n# RFC 5280, Section 4.2.1.12 makes EKU optional\n#   CA/Browser Baseline Requirements, Appendix (B)(3)(G) makes me confused\n#   In either case, you probably only need serverAuth.\n# extendedKeyUsage    = serverAuth, clientAuth\n\n[ alternate_names ]\n\nDNS.1       = example.com\nDNS.2       = www.example.com\nDNS.3       = mail.example.com\nDNS.4       = ftp.example.com\n\n# Add these if you need them. But usually you don\u0026apos;t want them or\n#   need them in production. You may need them for development.\n# DNS.5       = localhost\n# DNS.6       = localhost.localdomain\n# DNS.7       = 127.0.0.1\n\n# IPv6 localhost\n# DNS.8     = ::1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You may need to do the following for Chrome. Otherwise \u0026lt;a href=\u0026quot;https://superuser.com/questions/1202498/create-self-signed-certificate-with-subjectaltname-to-fix-missing-subjectaltnam/1202506#1202506\u0026quot;\u0026gt;Chrome may complain a \u0026lt;em\u0026gt;Common Name\u0026lt;/em\u0026gt; is invalid (\u0026lt;code\u0026gt;ERR_CERT_COMMON_NAME_INVALID\u0026lt;/code\u0026gt;)\u0026lt;/a\u0026gt;. I\u0026apos;m not sure what the relationship is between an IP address in the SAN and a CN in this instance.\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;# IPv4 localhost\n# IP.1       = 127.0.0.1\n\n# IPv6 localhost\n# IP.2     = ::1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;There are other rules concerning the handling of DNS names in X.509/PKIX certificates. Refer to these documents for the rules:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;RFC 5280, \u0026lt;a href=\u0026quot;https://www.rfc-editor.org/rfc/rfc5280\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;RFC 6125, \u0026lt;a href=\u0026quot;https://www.rfc-editor.org/rfc/rfc6125\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;RFC 6797, Appendix A, \u0026lt;a href=\u0026quot;https://www.rfc-editor.org/rfc/rfc6797\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP Strict Transport Security (HSTS)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;RFC 7469, \u0026lt;a href=\u0026quot;https://www.rfc-editor.org/rfc/rfc7469\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Public Key Pinning Extension for HTTP\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;CA/Browser Forum \u0026lt;a href=\u0026quot;https://cabforum.org/baseline-requirements-documents/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Baseline Requirements\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;CA/Browser Forum \u0026lt;a href=\u0026quot;https://cabforum.org/extended-validation-2/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Extended Validation Guidelines\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;RFC 6797 and RFC 7469 are listed, because they are more restrictive than the other RFCs and CA/B documents. RFCs 6797 and 7469 \u0026lt;em\u0026gt;do not\u0026lt;/em\u0026gt; allow an IP address, either.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As of 2022 with OpenSSL  1.1.1, the following command serves all your needs, including \u0026lt;a href=\u0026quot;https://www.openssl.org/docs/manmaster/man5/x509v3_config.html#Subject-Alternative-Name\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Subject Alternate Name (SAN)\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \\\n  -keyout example.key -out example.crt -subj \u0026quot;/CN=example.com\u0026quot; \\\n  -addext \u0026quot;subjectAltName=DNS:example.com,DNS:www.example.net,IP:10.0.0.1\u0026quot;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;On old systems with OpenSSL  1.1.0, such as Debian  9 or CentOS  7, a longer version of this command needs to be used:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \\\n  -keyout example.key -out example.crt -extensions san -config \\\n  \u0026amp;lt;(echo \u0026quot;[req]\u0026quot;; \n    echo distinguished_name=req; \n    echo \u0026quot;[san]\u0026quot;; \n    echo subjectAltName=DNS:example.com,DNS:www.example.net,IP:10.0.0.1\n    ) \\\n  -subj \u0026quot;/CN=example.com\u0026quot;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Either command creates a certificate that is\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;valid for the (sub)domains \u0026lt;code\u0026gt;example.com\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;www.example.net\u0026lt;/code\u0026gt; (SAN),\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;also valid for the IP address \u0026lt;code\u0026gt;10.0.0.1\u0026lt;/code\u0026gt; (SAN),\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;relatively strong (as of 2022) and\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;valid for \u0026lt;code\u0026gt;3650\u0026lt;/code\u0026gt; days (~10 years).\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;The following files are generated:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Private key: \u0026lt;code\u0026gt;example.key\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Certificate: \u0026lt;code\u0026gt;example.crt\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;All information is provided at the command line. There is \u0026lt;strong\u0026gt;no interactive input\u0026lt;/strong\u0026gt; that annoys you. There are \u0026lt;strong\u0026gt;no config files\u0026lt;/strong\u0026gt; you have to mess around with. All necessary steps are executed by a \u0026lt;strong\u0026gt;single OpenSSL invocation\u0026lt;/strong\u0026gt;: from private key generation up to the self-signed certificate.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Remark #1: Crypto parameters\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Since the certificate is self-signed and needs to be accepted by users manually, it doesn\u0026apos;t make sense to use a short expiration or weak cryptography.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In the future, you might want to use more than \u0026lt;code\u0026gt;4096\u0026lt;/code\u0026gt; bits for the RSA key and a hash algorithm stronger than \u0026lt;code\u0026gt;sha256\u0026lt;/code\u0026gt;, but as of 2022 these are sane values. They are sufficiently strong while being supported by all modern browsers.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Remark #2: Parameter \u0026quot;\u0026lt;code\u0026gt;-nodes\u0026lt;/code\u0026gt;\u0026quot;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Theoretically you could leave out the \u0026lt;code\u0026gt;-nodes\u0026lt;/code\u0026gt; parameter (which means \u0026quot;no DES encryption\u0026quot;), in which case \u0026lt;code\u0026gt;example.key\u0026lt;/code\u0026gt; would be encrypted with a password. However, this is almost never useful for a server installation, because you would either have to store the password on the server as well, or you\u0026apos;d have to enter it manually on each reboot.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Remark #3: See also\u0026lt;/h3\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://security.stackexchange.com/a/198409/133603\u0026quot;\u0026gt;Provide subjectAltName to openssl directly on command line\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://unix.stackexchange.com/a/333325/20407\u0026quot;\u0026gt;How to add multiple email addresses to an SSL certificate via the command line?\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/34386471/19163\u0026quot;\u0026gt;More information about MSYS_NO_PATHCONV\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here are the options described in \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/10176685/456814\u0026quot;\u0026gt;@diegows\u0026apos;s answer\u0026lt;/a\u0026gt;, described in more detail, from \u0026lt;a href=\u0026quot;https://www.openssl.org/docs/apps/req.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;the documentation\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days XXX\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;req\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;PKCS#10 certificate request and certificate generating utility.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;-x509\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;this option outputs a self signed certificate instead of a certificate request.\n  This is typically used to generate a test certificate or a self signed root CA.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;-newkey arg\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;this option creates a new certificate request and a new private key. The argument\n  takes one of several forms. \u0026lt;strong\u0026gt;rsa:nbits\u0026lt;/strong\u0026gt;, where \u0026lt;strong\u0026gt;nbits\u0026lt;/strong\u0026gt; is the number of bits,\n  generates an RSA key \u0026lt;strong\u0026gt;nbits\u0026lt;/strong\u0026gt; in size.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;-keyout filename\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;this gives the filename to write the newly created private key to.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;-out filename\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;This specifies the output filename to write to or standard output by default.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;-days n\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;when the \u0026lt;strong\u0026gt;-x509\u0026lt;/strong\u0026gt; option is being used this specifies the number of days to certify\n  the certificate for. The default is 30 days.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;-nodes\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;if this option is specified then if a private key is created it will not be encrypted.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;The documentation is actually more detailed than the above; I just summarized it here.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I can\u0026apos;t comment, so I will put this as a separate answer. I found a few issues with the accepted one-liner answer:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;The one-liner includes a passphrase in the key.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;The one-liner uses SHA-1 which in many browsers throws warnings in console.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Here is a simplified version that removes the passphrase, ups the security to suppress warnings and includes a suggestion in comments to pass in -subj to remove the full question list:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl genrsa -out server.key 2048\nopenssl rsa -in server.key -out server.key\nopenssl req -sha256 -new -key server.key -out server.csr -subj \u0026apos;/CN=localhost\u0026apos;\nopenssl x509 -req -sha256 -days 365 -in server.csr -signkey server.key -out server.crt\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Replace \u0026apos;localhost\u0026apos; with whatever domain you require.  You will need to run the first two commands one by one as OpenSSL will prompt for a passphrase.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To combine the two into a .pem file:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;cat server.crt server.key \u0026amp;gt; cert.pem\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Modern browsers now throw a security error for otherwise well-formed self-signed certificates if they are missing a SAN (Subject Alternate Name). \u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;OpenSSL does not provide a command-line way to specify this\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt;, so many developers\u0026apos; tutorials and bookmarks are suddenly outdated.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The quickest way to get running again is a short, stand-alone conf file:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Create an OpenSSL config file (example: \u0026lt;code\u0026gt;req.cnf\u0026lt;/code\u0026gt;)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;[req]\ndistinguished_name = req_distinguished_name\nx509_extensions = v3_req\nprompt = no\n[req_distinguished_name]\nC = US\nST = VA\nL = SomeCity\nO = MyCompany\nOU = MyDivision\nCN = www.company.com\n[v3_req]\nkeyUsage = critical, digitalSignature, keyAgreement\nextendedKeyUsage = serverAuth\nsubjectAltName = @alt_names\n[alt_names]\nDNS.1 = www.company.com\nDNS.2 = company.com\nDNS.3 = company.net\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Create the certificate referencing this config file\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -x509 -nodes -days 730 -newkey rsa:2048 \\\n -keyout cert.key -out cert.pem -config req.cnf -sha256\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Example config from \u0026lt;a href=\u0026quot;https://support.citrix.com/article/CTX135602_\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://support.citrix.com/article/CTX135602\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I would recommend to add the \u0026lt;strong\u0026gt;-sha256\u0026lt;/strong\u0026gt; parameter, to use the SHA-2 hash algorithm, because major browsers are considering to show \u0026quot;SHA-1 certificates\u0026quot; as not secure.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The same command line from the accepted answer - @diegows with added -sha256\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;openssl req -x509 \u0026lt;strong\u0026gt;-sha256\u0026lt;/strong\u0026gt; -newkey rsa:2048 -keyout key.pem -out cert.pem -days XXX\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;More information in \u0026lt;a href=\u0026quot;http://googleonlinesecurity.blogspot.com/2014/09/gradually-sunsetting-sha-1.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Google Security blog\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Update May 2018.\u0026lt;/strong\u0026gt; As many noted in the comments that using SHA-2 does not add any security to a self-signed certificate. But I still recommend using it as a good habit of not using outdated / insecure cryptographic hash functions. Full explanation is available in \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://security.stackexchange.com/questions/91913/why-is-it-fine-for-certificates-above-the-end-entity-certificate-to-be-sha1-base\u0026quot;\u0026gt;Why is it fine for certificates above the end-entity certificate to be SHA-1 based?\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I can`t comment so I add a separate answer.\nI tried to create a self-signed certificate for NGINX and it was easy, but when I wanted to add it to Chrome white list I had a problem. And my solution was to create a Root certificate and signed a child certificate by it.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So step by step.\nCreate file \u0026lt;strong\u0026gt;config_ssl_ca.cnf\u0026lt;/strong\u0026gt;\nNotice, config file has an option \u0026lt;strong\u0026gt;basicConstraints=CA:true\u0026lt;/strong\u0026gt; which means that this certificate is supposed to be root.\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;This is a good practice, because you create it once and can reuse.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;[ req ]\ndefault_bits = 2048\n\nprompt = no\ndistinguished_name=req_distinguished_name\nreq_extensions = v3_req\n\n[ req_distinguished_name ]\ncountryName=UA\nstateOrProvinceName=root region\nlocalityName=root city\norganizationName=Market(localhost)\norganizationalUnitName=roote department\ncommonName=market.localhost\nemailAddress=root_email@root.localhost\n\n[ alternate_names ]\nDNS.1        = market.localhost\nDNS.2        = www.market.localhost\nDNS.3        = mail.market.localhost\nDNS.4        = ftp.market.localhost\nDNS.5        = *.market.localhost\n\n[ v3_req ]\nkeyUsage=digitalSignature\nbasicConstraints=CA:true\nsubjectKeyIdentifier = hash\nsubjectAltName = @alternate_names\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Next config file for your child certificate will be call \u0026lt;strong\u0026gt;config_ssl.cnf\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;[ req ]\ndefault_bits = 2048\n\nprompt = no\ndistinguished_name=req_distinguished_name\nreq_extensions = v3_req\n\n[ req_distinguished_name ]\ncountryName=UA\nstateOrProvinceName=Kyiv region\nlocalityName=Kyiv\norganizationName=market place\norganizationalUnitName=market place department\ncommonName=market.localhost\nemailAddress=email@market.localhost\n\n[ alternate_names ]\nDNS.1        = market.localhost\nDNS.2        = www.market.localhost\nDNS.3        = mail.market.localhost\nDNS.4        = ftp.market.localhost\nDNS.5        = *.market.localhost\n\n[ v3_req ]\nkeyUsage=digitalSignature\nbasicConstraints=CA:false\nsubjectAltName = @alternate_names\nsubjectKeyIdentifier = hash\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The first step - create Root key and certificate\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl genrsa -out ca.key 2048\nopenssl req -new -x509 -key ca.key -out ca.crt -days 365 -config config_ssl_ca.cnf\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The second step creates child key and file CSR - Certificate Signing Request. Because the idea is to sign the child certificate by root and get a correct certificate\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl genrsa -out market.key 2048\nopenssl req -new -sha256 -key market.key -config config_ssl.cnf -out market.csr\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Open Linux terminal and do this command\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;echo 00 \u0026amp;gt; ca.srl\ntouch index.txt\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;strong\u0026gt;ca.srl\u0026lt;/strong\u0026gt; text file containing the next serial number to use in hex.\nMandatory.  This file must be present and contain a valid serial number.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Last Step, create one more config file and call it \u0026lt;strong\u0026gt;config_ca.cnf\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;# we use \u0026apos;ca\u0026apos; as the default section because we\u0026apos;re usign the ca command\n[ ca ]\ndefault_ca = my_ca\n\n[ my_ca ]\n#  a text file containing the next serial number to use in hex. Mandatory.\n#  This file must be present and contain a valid serial number.\nserial = ./ca.srl\n\n# the text database file to use. Mandatory. This file must be present though\n# initially it will be empty.\ndatabase = ./index.txt\n\n# specifies the directory where new certificates will be placed. Mandatory.\nnew_certs_dir = ./\n\n# the file containing the CA certificate. Mandatory\ncertificate = ./ca.crt\n\n# the file contaning the CA private key. Mandatory\nprivate_key = ./ca.key\n\n# the message digest algorithm. Remember to not use MD5\ndefault_md = sha256\n\n# for how many days will the signed certificate be valid\ndefault_days = 365\n\n# a section with a set of variables corresponding to DN fields\npolicy = my_policy\n\n# MOST IMPORTANT PART OF THIS CONFIG\ncopy_extensions = copy\n\n[ my_policy ]\n# if the value is \u0026quot;match\u0026quot; then the field value must match the same field in the\n# CA certificate. If the value is \u0026quot;supplied\u0026quot; then it must be present.\n# Optional means it may be present. Any fields not mentioned are silently\n# deleted.\ncountryName = match\nstateOrProvinceName = supplied\norganizationName = supplied\ncommonName = market.localhost\norganizationalUnitName = optional\ncommonName = supplied\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You may ask, why so difficult, why we must create one more config to sign child certificate by root. The answer is simple because child certificate must have a SAN block - Subject Alternative Names.\nIf we sign the child certificate by \u0026quot;openssl x509\u0026quot; utils, the Root certificate will delete the SAN field in child certificate.\nSo we use \u0026quot;openssl ca\u0026quot; instead of \u0026quot;openssl x509\u0026quot; to avoid the deleting of the SAN field. We create a new config file and tell it to copy all extended fields \u0026lt;strong\u0026gt;copy_extensions = copy\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl ca -config config_ca.cnf -out market.crt -in market.csr\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The program asks you 2 questions:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Sign the certificate? Say \u0026quot;Y\u0026quot;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;1 out of 1 certificate requests certified, commit? Say \u0026quot;Y\u0026quot;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;In terminal you can see a sentence with the word \u0026quot;Database\u0026quot;, it means file index.txt which you create by the command \u0026quot;touch\u0026quot;. It will contain all information by all certificates you create by \u0026quot;openssl ca\u0026quot; util.\nTo check the certificate valid use:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl rsa -in market.key -check\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If you want to see what inside in CRT:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl x509 -in market.crt -text -noout\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If you want to see what inside in CSR:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -in market.csr -noout -text \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is the script I use on local boxes to set the SAN (subjectAltName) in self-signed certificates. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This script takes the domain name (example.com) and generates the SAN for *.example.com and example.com in the same certificate. The sections below are commented. Name the script (e.g. \u0026lt;code\u0026gt;generate-ssl.sh\u0026lt;/code\u0026gt;) and give it executable permissions. The files will be written to the same directory as the script.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Chrome 58 an onward requires SAN to be set in self-signed certificates.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;#!/usr/bin/env bash\n\n# Set the TLD domain we want to use\nBASE_DOMAIN=\u0026quot;example.com\u0026quot;\n\n# Days for the cert to live\nDAYS=1095\n\n# A blank passphrase\nPASSPHRASE=\u0026quot;\u0026quot;\n\n# Generated configuration file\nCONFIG_FILE=\u0026quot;config.txt\u0026quot;\n\ncat \u0026amp;gt; $CONFIG_FILE \u0026amp;lt;\u0026amp;lt;-EOF\n[req]\ndefault_bits = 2048\nprompt = no\ndefault_md = sha256\nx509_extensions = v3_req\ndistinguished_name = dn\n\n[dn]\nC = CA\nST = BC\nL = Vancouver\nO = Example Corp\nOU = Testing Domain\nemailAddress = webmaster@$BASE_DOMAIN\nCN = $BASE_DOMAIN\n\n[v3_req]\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = *.$BASE_DOMAIN\nDNS.2 = $BASE_DOMAIN\nEOF\n\n# The file name can be anything\nFILE_NAME=\u0026quot;$BASE_DOMAIN\u0026quot;\n\n# Remove previous keys\necho \u0026quot;Removing existing certs like $FILE_NAME.*\u0026quot;\nchmod 770 $FILE_NAME.*\nrm $FILE_NAME.*\n\necho \u0026quot;Generating certs for $BASE_DOMAIN\u0026quot;\n\n# Generate our Private Key, CSR and Certificate\n# Use SHA-2 as SHA-1 is unsupported from Jan 1, 2017\n\nopenssl req -new -x509 -newkey rsa:2048 -sha256 -nodes -keyout \u0026quot;$FILE_NAME.key\u0026quot; -days $DAYS -out \u0026quot;$FILE_NAME.crt\u0026quot; -passin pass:$PASSPHRASE -config \u0026quot;$CONFIG_FILE\u0026quot;\n\n# OPTIONAL - write an info to see the details of the generated crt\nopenssl x509 -noout -fingerprint -text \u0026amp;lt; \u0026quot;$FILE_NAME.crt\u0026quot; \u0026amp;gt; \u0026quot;$FILE_NAME.info\u0026quot;\n\n# Protect the key\nchmod 400 \u0026quot;$FILE_NAME.key\u0026quot;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This script also writes an information file, so you can inspect the new certificate and verify the SAN is set properly.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;                ...\n                28:dd:b8:1e:34:b5:b1:44:1a:60:6d:e3:3c:5a:c4:\n                da:3d\n            Exponent: 65537 (0x10001)\n    X509v3 extensions:\n        X509v3 Subject Alternative Name: \n            DNS:*.example.com, DNS:example.com\nSignature Algorithm: sha256WithRSAEncryption\n     3b:35:5a:d6:9e:92:4f:fc:f4:f4:87:78:cd:c7:8d:cd:8c:cc:\n     ...\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If you are using Apache, then you can reference the above certificate in your configuration file like so:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;\u0026amp;lt;VirtualHost _default_:443\u0026amp;gt;\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/htdocs\n\n    SSLEngine on\n    SSLCertificateFile path/to/your/example.com.crt\n    SSLCertificateKeyFile path/to/your/example.com.key\n\u0026amp;lt;/VirtualHost\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Remember to restart your Apache (or Nginx, or IIS) server for the new certificate to take effect.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;2017 one-liner:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req \\\n-newkey rsa:2048 \\\n-x509 \\\n-nodes \\\n-keyout server.pem \\\n-new \\\n-out server.pem \\\n-subj /CN=localhost \\\n-reqexts SAN \\\n-extensions SAN \\\n-config \u0026amp;lt;(cat /System/Library/OpenSSL/openssl.cnf \\\n    \u0026amp;lt;(printf \u0026apos;[SAN]\\nsubjectAltName=DNS:localhost\u0026apos;)) \\\n-sha256 \\\n-days 3650\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This also works in Chrome 57, as it provides the SAN, without having another configuration file.\nIt was taken from an answer \u0026lt;a href=\u0026quot;https://github.com/webpack/webpack-dev-server/issues/854\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This creates a single .pem file that contains both the private key and cert. You can move them to separate .pem files if needed.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;One-liner version 2017:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;CentOS:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -x509 -nodes -sha256 -newkey rsa:2048 \\\n-keyout localhost.key -out localhost.crt \\\n-days 3650 \\\n-subj \u0026quot;CN=localhost\u0026quot; \\\n-reqexts SAN -extensions SAN \\\n-config \u0026amp;lt;(cat /etc/pki/tls/openssl.cnf \u0026amp;lt;(printf \u0026quot;\\n[SAN]\\nsubjectAltName=IP:127.0.0.1,DNS:localhost\u0026quot;))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Ubuntu:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -x509 -nodes -sha256 -newkey rsa:2048 \\\n-keyout localhost.key -out localhost.crt \\\n-days 3650 \\\n-subj \u0026quot;/CN=localhost\u0026quot; \\\n-reqexts SAN -extensions SAN \\\n-config \u0026amp;lt;(cat /etc/ssl/openssl.cnf \u0026amp;lt;(printf \u0026quot;\\n[SAN]\\nsubjectAltName=IP:127.0.0.1,DNS:localhost\u0026quot;))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Edit: added prepending Slash to \u0026apos;subj\u0026apos; option for Ubuntu.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;One liner FTW. I like to keep it simple. Why not use one command that contains ALL the arguments needed? This is how I like it - this creates an x509 certificate and its PEM key:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -x509 \\\n -nodes -days 365 -newkey rsa:4096 \\\n -keyout self.key.pem \\\n -out self-x509.crt \\\n -subj \u0026quot;/C=US/ST=WA/L=Seattle/CN=example.com/emailAddress=someEmail@gmail.com\u0026quot;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;That single command contains all the answers you would normally provide for the certificate details.  This way you can set the parameters and run the command, get your output - then go for coffee.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://scaleup.us/2017/09/10/create-self-signed-tls-certificates-pkcs8-key-x509-cert-graylog-gelf/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt; More here \u0026amp;lt;\u0026amp;lt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;openssl\u0026lt;/code\u0026gt; allows to generate self-signed certificate by a single command (\u0026lt;code\u0026gt;-newkey\u0026lt;/code\u0026gt;\ninstructs to generate a private key and \u0026lt;code\u0026gt;-x509\u0026lt;/code\u0026gt; instructs to issue a self-signed\ncertificate instead of a signing request)::\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -x509 -newkey rsa:4096 \\\n-keyout my.key -passout pass:123456 -out my.crt \\\n-days 365 \\\n-subj /CN=localhost/O=home/C=US/emailAddress=me@mail.internal \\\n-addext \u0026quot;subjectAltName = DNS:localhost,DNS:web.internal,email:me@mail.internal\u0026quot; \\\n-addext keyUsage=digitalSignature -addext extendedKeyUsage=serverAuth\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You can generate a private key and construct a self-signing certificate in separate steps::\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl genrsa -out my.key -passout pass:123456 2048\n\nopenssl req -x509 \\\n-key my.key -passin pass:123456 -out my.csr \\\n-days 3650 \\\n-subj /CN=localhost/O=home/C=US/emailAddress=me@mail.internal \\\n-addext \u0026quot;subjectAltName = DNS:localhost,DNS:web.internal,email:me@mail.internal\u0026quot; \\\n-addext keyUsage=digitalSignature -addext extendedKeyUsage=serverAuth\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Review the resulting certificate::\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl x509 -text -noout -in my.crt\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Java \u0026lt;code\u0026gt;keytool\u0026lt;/code\u0026gt; creates PKCS#12 store::\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;keytool -genkeypair -keystore my.p12 -alias master \\\n-storetype pkcs12 -keyalg RSA -keysize 2048 -validity 3650 \\\n-storepass 123456 \\\n-dname \u0026quot;CN=localhost,O=home,C=US\u0026quot; \\\n-ext \u0026apos;san=dns:localhost,dns:web.internal,email:me@mail.internal\u0026apos;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;To export the self-signed certificate::\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;keytool -exportcert -keystore my.p12 -file my.crt \\\n-alias master -rfc -storepass 123456\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Review the resulting certificate::\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;keytool -printcert -file my.crt\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;certtool\u0026lt;/code\u0026gt; from GnuTLS doesn\u0026apos;t allow passing different attributes from CLI. I don\u0026apos;t like to mess with config files ((\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You have the general procedure correct. The syntax for the command is below.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -new -key {private key file} -out {output file}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;However, the warnings are displayed, because the browser was not able to verify the identify by validating the certificate with a known Certificate Authority (CA). \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;As this is a self-signed certificate there is no CA and you can safely ignore the warning and proceed. Should you want to get a real certificate that will be recognizable by anyone on the public Internet then the procedure is below.\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Generate a private key\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Use that private key to create a CSR file\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Submit CSR to CA (Verisign or others, etc.)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Install received cert from CA on web server\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Add other certs to authentication chain depending on the type cert\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;I have more details about this in a post at \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://bigthinkingapplied.com/secure-the-connection-installing-certificates-on-3-common-web-servers/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Securing the Connection: Creating a Security Certificate with OpenSSL\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;h2\u0026gt;Generate keys\u0026lt;/h2\u0026gt;\n  \n  \u0026lt;p\u0026gt;I am using \u0026lt;code\u0026gt;/etc/mysql\u0026lt;/code\u0026gt; for cert storage because \u0026lt;code\u0026gt;/etc/apparmor.d/usr.sbin.mysqld\u0026lt;/code\u0026gt; contains \u0026lt;code\u0026gt;/etc/mysql/*.pem r\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;sudo su -\ncd /etc/mysql\nopenssl genrsa -out ca-key.pem 2048;\nopenssl req -new -x509 -nodes -days 1000 -key ca-key.pem -out ca-cert.pem;\nopenssl req -newkey rsa:2048 -days 1000 -nodes -keyout server-key.pem -out server-req.pem;\nopenssl x509 -req -in server-req.pem -days 1000 -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 -out server-cert.pem;\nopenssl req -newkey rsa:2048 -days 1000 -nodes -keyout client-key.pem -out client-req.pem;\nopenssl x509 -req -in client-req.pem -days 1000 -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 -out client-cert.pem;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;h2\u0026gt;Add configuration\u0026lt;/h2\u0026gt;\n  \n  \u0026lt;p\u0026gt;\u0026lt;code\u0026gt;/etc/mysql/my.cnf\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;[client]\nssl-ca=/etc/mysql/ca-cert.pem\nssl-cert=/etc/mysql/client-cert.pem\nssl-key=/etc/mysql/client-key.pem\n\n[mysqld]\nssl-ca=/etc/mysql/ca-cert.pem\nssl-cert=/etc/mysql/server-cert.pem\nssl-key=/etc/mysql/server-key.pem\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;On my setup, Ubuntu server logged to: \u0026lt;code\u0026gt;/var/log/mysql/error.log\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h1\u0026gt;Follow up notes:\u0026lt;/h1\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;SSL error: Unable to get certificate from \u0026apos;...\u0026apos;\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://ubuntuforums.org/showthread.php?t=1121458\u0026amp;amp;p=7048357#post7048357\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;MySQL might be denied read access to your certificate file if it is not in apparmors configuration\u0026lt;/a\u0026gt;. As mentioned in the previous steps^, save all our certificates as \u0026lt;code\u0026gt;.pem\u0026lt;/code\u0026gt; files in the \u0026lt;code\u0026gt;/etc/mysql/\u0026lt;/code\u0026gt; directory which is approved by default by apparmor (or modify your apparmor/SELinux to allow access to wherever you stored them.)\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;SSL error: Unable to get private key\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://askubuntu.com/a/439274/250556\u0026quot;\u0026gt;Your MySQL server version may not support the default \u0026lt;code\u0026gt;rsa:2048\u0026lt;/code\u0026gt; format\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Convert generated \u0026lt;code\u0026gt;rsa:2048\u0026lt;/code\u0026gt; to plain \u0026lt;code\u0026gt;rsa\u0026lt;/code\u0026gt; with:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl rsa -in server-key.pem -out server-key.pem\nopenssl rsa -in client-key.pem -out client-key.pem\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://mifosforge.jira.com/wiki/display/MIFOS/How+to+enable+MySQL+SSL+on+Ubuntu\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Check if local server supports SSL\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;mysql -u root -p\nmysql\u0026amp;gt; show variables like \u0026quot;%ssl%\u0026quot;;\n+---------------+----------------------------+\n| Variable_name | Value                      |\n+---------------+----------------------------+\n| have_openssl  | YES                        |\n| have_ssl      | YES                        |\n| ssl_ca        | /etc/mysql/ca-cert.pem     |\n| ssl_capath    |                            |\n| ssl_cert      | /etc/mysql/server-cert.pem |\n| ssl_cipher    |                            |\n| ssl_key       | /etc/mysql/server-key.pem  |\n+---------------+----------------------------+\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://kb.berkeley.edu/page.php?id=23112\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Verifying a connection to the database is SSL encrypted\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;h2\u0026gt;Verifying connection\u0026lt;/h2\u0026gt;\n  \n  \u0026lt;p\u0026gt;When logged in to the MySQL instance, you can issue the query:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;show status like \u0026apos;Ssl_cipher\u0026apos;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;If your connection is not encrypted, the result will be blank:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;mysql\u0026amp;gt; show status like \u0026apos;Ssl_cipher\u0026apos;;\n+---------------+-------+\n| Variable_name | Value |\n+---------------+-------+\n| Ssl_cipher    |       |\n+---------------+-------+\n1 row in set (0.00 sec)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;Otherwise, it would show a non-zero length string for the cypher in use:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;mysql\u0026amp;gt; show status like \u0026apos;Ssl_cipher\u0026apos;;\n+---------------+--------------------+\n| Variable_name | Value              |\n+---------------+--------------------+\n| Ssl_cipher    | DHE-RSA-AES256-SHA |\n+---------------+--------------------+\n1 row in set (0.00 sec)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://dev.mysql.com/doc/refman/5.0/en/grant.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Require ssl for specific user\u0026apos;s connection\u0026lt;/a\u0026gt; (\u0026apos;require ssl\u0026apos;):\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;ul\u0026gt;\n  \u0026lt;li\u0026gt;SSL\u0026lt;/li\u0026gt;\n  \u0026lt;/ul\u0026gt;\n  \n  \u0026lt;p\u0026gt;Tells the server to permit only SSL-encrypted connections for the account.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;GRANT ALL PRIVILEGES ON test.* TO \u0026apos;root\u0026apos;@\u0026apos;localhost\u0026apos;\n  REQUIRE SSL;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n  \n  \u0026lt;p\u0026gt;To connect, the client must specify the --ssl-ca option to authenticate the server certificate, and may additionally specify the --ssl-key and --ssl-cert options. If neither --ssl-ca option nor --ssl-capath option is specified, the client does not authenticate the server certificate.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;Alternate link: Lengthy tutorial in \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;http://www.madirish.net/214\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Secure PHP Connections to MySQL with SSL\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As has been discussed in detail, \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Self-signed_certificate\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;self-signed certificates\u0026lt;/a\u0026gt; \u0026lt;a href=\u0026quot;https://www.globalsign.com/en/ssl-information-center/dangers-self-signed-certificates/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;are not trusted for the Internet\u0026lt;/a\u0026gt;. You can \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/7580508/getting-chrome-to-accept-self-signed-localhost-certificate\u0026quot;\u0026gt;add your self-signed certificate to many but not all browsers\u0026lt;/a\u0026gt;. Alternatively you can \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/21297139/how-do-you-sign-a-certificate-signing-request-with-your-certification-authority/21340898#21340898\u0026quot;\u0026gt;become your own certificate authority\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The primary reason one does not want to get a signed certificate from a certificate authority is cost -- \u0026lt;a href=\u0026quot;https://www.websecurity.symantec.com/buy-renew?ef_id=Cj0KCQiAwc7jBRD8ARIsAKSUBHL3u_wl0kyXRrvQM3Fj2H9j9T6FogZsQVjmxinnw6KIf9xVvUP9O64aAj0KEALw_wcB:G:s\u0026amp;amp;s_kwcid=AL!6100!3!225648135095!e!!g!!symantec%20ssl%20certificate\u0026amp;amp;gclid=Cj0KCQiAwc7jBRD8ARIsAKSUBHL3u_wl0kyXRrvQM3Fj2H9j9T6FogZsQVjmxinnw6KIf9xVvUP9O64aAj0KEALw_wcB\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Symantec charges between $995 - $1,999 per year for certificates -- just for a certificate intended for internal network, Symantec charges $399 per year\u0026lt;/a\u0026gt;. That cost is easy to justify if you are processing credit card payments or work for the profit center of a highly profitable company. It is more than many can afford for a personal project one is creating on the internet, or for a non-profit running on a minimal budget, or if one works in a cost center of an organization -- cost centers always try to do more with less.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;An alternative is to use \u0026lt;a href=\u0026quot;https://certbot.eff.org/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;certbot\u0026lt;/a\u0026gt; (see \u0026lt;a href=\u0026quot;https://certbot.eff.org/about/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;about certbot\u0026lt;/a\u0026gt;). Certbot is an easy-to-use automatic client that fetches and deploys SSL/TLS certificates for your web server.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you setup certbot, you can enable it to create and maintain a certificate for you issued by the \u0026lt;a href=\u0026quot;https://letsencrypt.org/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Lets Encrypt\u0026lt;/a\u0026gt; certificate authority.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I did this over the weekend for my organization. I installed the required packages for certbot on my server (Ubuntu 16.04) and then ran the command necessary to setup and enable certbot. One likely needs a \u0026lt;a href=\u0026quot;https://certbot.eff.org/docs/using.html#dns-plugins\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;DNS plugin\u0026lt;/a\u0026gt; for certbot - we are presently using \u0026lt;a href=\u0026quot;https://certbot-dns-digitalocean.readthedocs.io/en/stable/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;DigitalOcean\u0026lt;/a\u0026gt; though may be migrating to another service soon.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Note that some of the instructions were not quite right and took a little poking and time with Google to figure out. This took a fair amount of my time the first time but now I think I could do it in minutes.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For DigitalOcean, one area I struggled was when I was prompted to input the path to your DigitalOcean credentials INI file. What the script is referring to is the \u0026lt;a href=\u0026quot;https://cloud.digitalocean.com/account/api/tokens\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Applications \u0026amp;amp; API\u0026lt;/a\u0026gt; page and the Tokens/Key tab on that page. You need to have or generate a personal access token (read and write) for DigitalOcean\u0026apos;s API -- this is a 65 character hexadecimal string. This string then needs to be put into a file on the webserver from which you are running certbot. That file can have a comment as its first line (comments start with #). The seccond line is:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;dns_digitalocean_token = 0000111122223333444455556666777788889999aaaabbbbccccddddeeeeffff\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Once I figured out how to set up a read+write token for DigitalOcean\u0026apos;s API, it was pretty easy to use certbot to setup a \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Wildcard_certificate\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;wildcard certificate\u0026lt;/a\u0026gt;. Note that one does not have to setup a wildcard certificate, one may instead specify each domain and sub-domain that one wants the certificate to appply to. It was the wildcard certificate that required the credentials INI file that contained the personal access token from DigitalOcean.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Note that public key certificates (also known as identity certificates or SSL certificates) expire and require renewal. Thus you will need to renew your certificate on a periodic (reoccurring) basis. The certbot documentation covers \u0026lt;a href=\u0026quot;https://certbot.eff.org/docs/using.html#renewing-certificates\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;renewing certificates\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;My plan is to write a script to use the openssl command to get my certificate\u0026apos;s expiration date and to trigger renewal when it is 30 days or less until it expires. I will then add this script to cron and run it once per day.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here is the command to read your certificate\u0026apos;s expiration date:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;root@prod-host:~# /usr/bin/openssl x509 -enddate -noout -in path-to-certificate-pem-file\nnotAfter=May 25 19:24:12 2019 GMT\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;this worked for me\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -x509 -nodes -subj \u0026apos;/CN=localhost\u0026apos;  -newkey rsa:4096 -keyout ./sslcert/key.pem -out ./sslcert/cert.pem -days 365\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;server.js\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;var fs = require(\u0026apos;fs\u0026apos;);\nvar path = require(\u0026apos;path\u0026apos;);\nvar http = require(\u0026apos;http\u0026apos;);\nvar https = require(\u0026apos;https\u0026apos;);\nvar compression = require(\u0026apos;compression\u0026apos;);\nvar express = require(\u0026apos;express\u0026apos;);\nvar app = express();\n\napp.use(compression());\napp.use(express.static(__dirname + \u0026apos;/www\u0026apos;));    \n\napp.get(\u0026apos;/*\u0026apos;, function(req,res) {\n  res.sendFile(path.join(__dirname+\u0026apos;/www/index.html\u0026apos;));\n});\n\n// your express configuration here\n\nvar httpServer = http.createServer(app);\nvar credentials = {\n    key: fs.readFileSync(\u0026apos;./sslcert/key.pem\u0026apos;, \u0026apos;utf8\u0026apos;),\n    cert: fs.readFileSync(\u0026apos;./sslcert/cert.pem\u0026apos;, \u0026apos;utf8\u0026apos;)\n};\nvar httpsServer = https.createServer(credentials, app);\n\nhttpServer.listen(8080);\nhttpsServer.listen(8443);\n\nconsole.log(`RUNNING ON  http://127.0.0.1:8080`);\nconsole.log(`RUNNING ON  http://127.0.0.1:8443`);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;After much of going around, playing with various solutions, still I faced the problem that issuing a self-signed certificate for localhost, gave me error\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;ERR_CERT_INVALID\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;When expanding the details, chrome said:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;You cannot visit localhost right now because the website sent\nscrambled credentials...\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;And the only ugly way to get through is to type (directly in this screen, without seeing any cursor for the text) :\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;(type in the keyboard) \u0026lt;em\u0026gt;\u0026lt;strong\u0026gt;thisisunsafe\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Which let me proceed.\u0026lt;/p\u0026gt;\n\u0026lt;h4\u0026gt;Until I found \u0026lt;code\u0026gt;extendedKeyUsage = serverAuth, clientAuth\u0026lt;/code\u0026gt;\u0026lt;/h4\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;TL;DR\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;openssl genrsa -out localhost.key 2048\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;openssl req -key localhost.key -new -out localhost.csr\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;(click enter on everything and just fill in the common name (CN) with localhost or your other FQDN.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;put the following in a file named \u0026lt;code\u0026gt;v3.ext\u0026lt;/code\u0026gt; (edit whatever you need):\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;subjectKeyIdentifier   = hash\nauthorityKeyIdentifier = keyid:always,issuer:always\nbasicConstraints       = CA:TRUE\nkeyUsage               = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment, keyAgreement, keyCertSign\nextendedKeyUsage       = serverAuth, clientAuth\nsubjectAltName         = DNS:localhost, DNS:localhost.localdomain\nissuerAltName          = issuer:copy\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;ol start=\u0026quot;5\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;openssl x509 -req -in localhost.csr -signkey localhost.key -out localhost.pem -days 3650 -sha256 -extfile v3.ext\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;And voilà!\nYou can visit the website, expand \u0026quot;Advanced\u0026quot; and click \u0026quot;Proceed to localhost (unsafe)\u0026quot;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Generate a key without password and certificate for 10 years, the short way:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req  -x509 -nodes -new  -keyout server.key -out server.crt -days 3650 -subj \u0026quot;/C=/ST=/L=/O=/OU=web/CN=www.server.com\u0026quot;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;for the flag \u0026lt;code\u0026gt;-subj | -subject\u0026lt;/code\u0026gt; \u0026lt;strong\u0026gt;empty values are permitted\u0026lt;/strong\u0026gt; \u0026lt;code\u0026gt;-subj \u0026quot;/C=/ST=/L=/O=/OU=web/CN=www.server.com\u0026quot;\u0026lt;/code\u0026gt;, but you can sets more details as you like:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;C - Country Name (2 letter code)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;ST - State\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;L - Locality Name (eg, city)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;O - Organization Name\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;OU - Organizational Unit Name\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;CN - Common Name - \u0026lt;strong\u0026gt;required!\u0026lt;/strong\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This very simple Python app that creates a self-signed certificate.\nCode:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;from OpenSSL import crypto, SSL\nfrom secrets import randbelow\nprint(\u0026quot;Please know, if you make a mistake, you must restart the program.\u0026quot;)\ndef cert_gen(\n    emailAddress=input(\u0026quot;Enter Email Address: \u0026quot;),\n    commonName=input(\u0026quot;Enter Common Name: \u0026quot;),\n    countryName=input(\u0026quot;Enter Country Name (2 characters): \u0026quot;),\n    localityName=input(\u0026quot;Enter Locality Name: \u0026quot;),\n    stateOrProvinceName=input(\u0026quot;Enter State of Province Name: \u0026quot;),\n    organizationName=input(\u0026quot;Enter Organization Name: \u0026quot;),\n    organizationUnitName=input(\u0026quot;Enter Organization Unit Name: \u0026quot;),\n    serialNumber=randbelow(1000000),\n    validityStartInSeconds=0,\n    validityEndInSeconds=10*365*24*60*60,\n    KEY_FILE = \u0026quot;private.key\u0026quot;,\n    CERT_FILE=\u0026quot;selfsigned.crt\u0026quot;):\n    #can look at generated file using openssl:\n    #openssl x509 -inform pem -in selfsigned.crt -noout -text\n    # create a key pair\n    k = crypto.PKey()\n    k.generate_key(crypto.TYPE_RSA, 4096)\n    # create a self-signed cert\n    cert = crypto.X509()\n    cert.get_subject().C = countryName\n    cert.get_subject().ST = stateOrProvinceName\n    cert.get_subject().L = localityName\n    cert.get_subject().O = organizationName\n    cert.get_subject().OU = organizationUnitName\n    cert.get_subject().CN = commonName\n    cert.get_subject().emailAddress = emailAddress\n    cert.set_serial_number(serialNumber)\n    cert.gmtime_adj_notBefore(0)\n    cert.gmtime_adj_notAfter(validityEndInSeconds)\n    cert.set_issuer(cert.get_subject())\n    cert.set_pubkey(k)\n    cert.sign(k, \u0026apos;sha512\u0026apos;)\n    with open(CERT_FILE, \u0026quot;wt\u0026quot;) as f:\n        f.write(crypto.dump_certificate(crypto.FILETYPE_PEM, cert).decode(\u0026quot;utf-8\u0026quot;))\n    with open(KEY_FILE, \u0026quot;wt\u0026quot;) as f:\n        f.write(crypto.dump_privatekey(crypto.FILETYPE_PEM, k).decode(\u0026quot;utf-8\u0026quot;))\n    print(\u0026quot;GENERATED\u0026quot;)\n    input(\u0026quot;Press enter to close program.\u0026quot;)\ncert_gen()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;However, you still get the \u0026quot;certificate is not trusted\u0026quot; error. This is because of a few reasons:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;It is self-signed/not verified (a verified certificate would need a CA (Certificate Authority), like Let\u0026apos;s Encrypt to be trusted on all devices).\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;It is not trusted on your machine. (\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/48790088/14739273\u0026quot;\u0026gt;this\u0026lt;/a\u0026gt; answer shows how you can make Windows trust your certificate).\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    "],"id":526,"title":"How to generate a self-signed SSL certificate using OpenSSL? [closed]","content":"\n                    \u0026lt;div\u0026gt;\n            \u0026lt;aside class=\u0026quot;s-notice s-notice__info post-notice js-post-notice mb16\u0026quot; role=\u0026quot;status\u0026quot;\u0026gt;\n        \u0026lt;div class=\u0026quot;d-flex fd-column fw-nowrap\u0026quot;\u0026gt;\n            \u0026lt;div class=\u0026quot;d-flex fw-nowrap\u0026quot;\u0026gt;\n                \u0026lt;div class=\u0026quot;flex--item wmn0 fl1 lh-lg\u0026quot;\u0026gt;\n                    \u0026lt;div class=\u0026quot;flex--item fl1 lh-lg\u0026quot;\u0026gt;\n                        \u0026lt;b\u0026gt;Closed.\u0026lt;/b\u0026gt; This question does not meet \u0026lt;a href=\u0026quot;/help/closed-questions\u0026quot;\u0026gt;Stack Overflow guidelines\u0026lt;/a\u0026gt;. It is not currently accepting answers.\n                        \n                    \u0026lt;/div\u0026gt;\n                \u0026lt;/div\u0026gt;\n            \u0026lt;/div\u0026gt;\n        \u0026lt;/div\u0026gt;\n            \u0026lt;hr class=\u0026quot;my12 outline-none baw0 bb bc-powder-400\u0026quot;\u0026gt;\n        \u0026lt;div class=\u0026quot;fw-nowrap fc-black-600\u0026quot;\u0026gt;\n            \u0026lt;div class=\u0026quot;d-flex fd-column lh-md\u0026quot;\u0026gt;\n                \u0026lt;div class=\u0026quot;mb0 d-flex\u0026quot;\u0026gt;\n                        \u0026lt;div class=\u0026quot;flex--item mr8\u0026quot;\u0026gt;\n                            \u0026lt;svg aria-hidden=\u0026quot;true\u0026quot; class=\u0026quot;svg-icon iconLightbulb\u0026quot; width=\u0026quot;18\u0026quot; height=\u0026quot;18\u0026quot; viewBox=\u0026quot;0 0 18 18\u0026quot;\u0026gt;\u0026lt;path d=\u0026quot;M15 6.38A6.48 6.48 0 0 0 7.78.04h-.02A6.49 6.49 0 0 0 2.05 5.6a6.31 6.31 0 0 0 2.39 5.75c.49.39.76.93.76 1.5v.24c0 1.07.89 1.9 1.92 1.9h2.75c1.04 0 1.92-.83 1.92-1.9v-.2c0-.6.26-1.15.7-1.48A6.32 6.32 0 0 0 15 6.37ZM4.03 5.85A4.49 4.49 0 0 1 8 2.02a4.48 4.48 0 0 1 5 4.36 4.3 4.3 0 0 1-1.72 3.44c-.98.74-1.5 1.9-1.5 3.08v.1H7.2v-.14c0-1.23-.6-2.34-1.53-3.07a4.32 4.32 0 0 1-1.64-3.94ZM10 18a1 1 0 0 0 0-2H7a1 1 0 1 0 0 2h3Z\u0026quot;\u0026gt;\u0026lt;/path\u0026gt;\u0026lt;/svg\u0026gt;\n                        \u0026lt;/div\u0026gt;\n                    \u0026lt;p\u0026gt; We don’t allow questions about professional server or networking-related infrastructure administration on Stack Overflow. You can edit the question so it’s \u0026lt;a href=\u0026quot;/help/on-topic\u0026quot;\u0026gt;on-topic\u0026lt;/a\u0026gt; for Stack Overflow.\u0026lt;/p\u0026gt;\n                \u0026lt;/div\u0026gt;\n                    \u0026lt;div class=\u0026quot;mb0 mt6 d-flex\u0026quot;\u0026gt;\n                        \u0026lt;p class=\u0026quot;ml24 pl2\u0026quot;\u0026gt;Closed \u0026lt;span title=\u0026quot;2022-05-26 19:57:59Z\u0026quot; class=\u0026quot;relativetime\u0026quot;\u0026gt;last month\u0026lt;/span\u0026gt;.\u0026lt;/p\u0026gt;\n                    \u0026lt;/div\u0026gt;\n                \u0026lt;div class=\u0026quot;ml24 pl2\u0026quot;\u0026gt;\n            \u0026lt;p class=\u0026quot;mb0 mt12\u0026quot;\u0026gt;The community is reviewing whether to reopen this question as of \u0026lt;span title=\u0026quot;2022-07-09 14:38:13Z\u0026quot; class=\u0026quot;relativetime\u0026quot;\u0026gt;2 hours ago\u0026lt;/span\u0026gt;.\u0026lt;/p\u0026gt;\n\n                \u0026lt;/div\u0026gt;\n            \u0026lt;/div\u0026gt;\n        \u0026lt;/div\u0026gt;\n            \u0026lt;div class=\u0026quot;mt24 d-flex gsx gs8\u0026quot;\u0026gt;\n                    \u0026lt;a class=\u0026quot;s-btn s-btn__outlined flex--item js-post-notice-edit-post\u0026quot; href=\u0026quot;/posts/10175812/edit\u0026quot;\u0026gt;\n                        Improve this question\n                    \u0026lt;/a\u0026gt;\n            \u0026lt;/div\u0026gt;\n\u0026lt;/aside\u0026gt;\n\n    \u0026lt;/div\u0026gt;\n\n\u0026lt;p\u0026gt;I\u0026apos;m adding HTTPS support to an embedded Linux device. I have tried to generate a self-signed certificate with these steps:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;openssl req -new \u0026amp;gt; cert.csr\nopenssl rsa -in privkey.pem -out key.pem\nopenssl x509 -in cert.csr -out cert.pem -req -signkey key.pem -days 1001\ncat key.pem\u0026amp;gt;\u0026amp;gt;cert.pem\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This works, but I get some errors with, for example, Google Chrome:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;This is probably not the site you are looking for!\u0026lt;br\u0026gt;\n  The site\u0026apos;s security certificate is not trusted!\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;Am I missing something? Is this the correct way to build a self-signed certificate?\u0026lt;/p\u0026gt;\n    ","slug":"how-to-generate-a-self-signed-ssl-certificate-using-openssl-closed-1657388298626","postType":"QUESTION","createdAt":"2022-07-09T17:38:18.000Z","updatedAt":"2022-07-09T17:38:18.000Z","tags":[{"id":2585,"name":"ssl","slug":"ssl","createdAt":"2022-07-09T17:38:18.000Z","updatedAt":"2022-07-09T17:38:18.000Z","Questions_Tags":{"questionId":526,"tagId":2585}},{"id":2586,"name":"openssl","slug":"openssl","createdAt":"2022-07-09T17:38:18.000Z","updatedAt":"2022-07-09T17:38:18.000Z","Questions_Tags":{"questionId":526,"tagId":2586}},{"id":2587,"name":"certificate","slug":"certificate","createdAt":"2022-07-09T17:38:18.000Z","updatedAt":"2022-07-09T17:38:18.000Z","Questions_Tags":{"questionId":526,"tagId":2587}},{"id":2588,"name":"ssl-certificate","slug":"ssl-certificate","createdAt":"2022-07-09T17:38:18.000Z","updatedAt":"2022-07-09T17:38:18.000Z","Questions_Tags":{"questionId":526,"tagId":2588}},{"id":2589,"name":"x509certificate","slug":"x509certificate","createdAt":"2022-07-09T17:38:18.000Z","updatedAt":"2022-07-09T17:38:18.000Z","Questions_Tags":{"questionId":526,"tagId":2589}}],"relatedQuestions":[{"title":"How to generate a self-signed SSL certificate using OpenSSL? [closed]","slug":"how-to-generate-a-self-signed-ssl-certificate-using-openssl-closed-1657388298626","tags":[{"name":"ssl","Questions_Tags":{"questionId":526,"tagId":2585}},{"name":"openssl","Questions_Tags":{"questionId":526,"tagId":2586}},{"name":"certificate","Questions_Tags":{"questionId":526,"tagId":2587}},{"name":"ssl-certificate","Questions_Tags":{"questionId":526,"tagId":2588}},{"name":"x509certificate","Questions_Tags":{"questionId":526,"tagId":2589}}]}]},"randomQuestions":[{"title":"Cleansing User Passwords","slug":"cleansing-user-passwords-1657387365583"},{"title":"srand() — why call it only once?","slug":"srand()-why-call-it-only-once-1657387794760"},{"title":"What is a NullPointerException, and how do I fix it?","slug":"what-is-a-nullpointerexception-and-how-do-i-fix-it-1657384201768"},{"title":"Why does this UnboundLocalError occur (closure)? [duplicate]","slug":"why-does-this-unboundlocalerror-occur-(closure)-duplicate-1657388531538"},{"title":"How can I access an array/object?","slug":"how-can-i-access-an-arrayobject-1657387395541"},{"title":"Big O, how do you calculate/approximate it?","slug":"big-o-how-do-you-calculateapproximate-it-1657387856392"},{"title":"How do I make a list of data frames?","slug":"how-do-i-make-a-list-of-data-frames-1657385480437"},{"title":"MySQL pivot row into dynamic number of columns","slug":"mysql-pivot-row-into-dynamic-number-of-columns-1657387981930"},{"title":"What is the copy-and-swap idiom?","slug":"what-is-the-copy-and-swap-idiom-1657384840329"},{"title":"What is the difference between client-side and server-side programming?","slug":"what-is-the-difference-between-client-side-and-server-side-programming-1657384372926"},{"title":"Selenium - wait until element is present, visible and interactable","slug":"selenium-wait-until-element-is-present-visible-and-interactable-1657384820071"},{"title":"When to use LinkedList over ArrayList in Java?","slug":"when-to-use-linkedlist-over-arraylist-in-java-1657388107480"},{"title":"How can I save an activity state using the save instance state?","slug":"how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981"},{"title":"How to use java.net.URLConnection to fire and handle HTTP requests","slug":"how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934"},{"title":"Variables are not behaving as expected","slug":"variables-are-not-behaving-as-expected-1657384865672"},{"title":"How to use SharedPreferences in Android to store, fetch and edit values [closed]","slug":"how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values-closed-1657387683057"},{"title":"Using global variables in a function","slug":"using-global-variables-in-a-function-1657384796002"},{"title":"Dynamically select data frame columns using $ and a character value","slug":"dynamically-select-data-frame-columns-using-dollar-and-a-character-value-1657387836662"},{"title":"How to Sort a Multi-dimensional Array by Value","slug":"how-to-sort-a-multi-dimensional-array-by-value-1657387746110"},{"title":"What is an IndexOutOfRangeException / ArgumentOutOfRangeException and how do I fix it?","slug":"what-is-an-indexoutofrangeexception-argumentoutofrangeexception-and-how-do-i-fix-it-1657384697159"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-to-generate-a-self-signed-ssl-certificate-using-openssl-closed-1657388298626"},"buildId":"TQ2eYlCSdocSK-hq6gkM0","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>