<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>Crash or &quot;segmentation fault&quot; when data is copied/scanned/read to an uninitialized pointer | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="This question is meant to be used as reference for all frequently asked questions of the nature:

Why do I get a mysterious crash or &quot;segmentation fault&quot; when I copy/scan data to the address where an uninitialised pointer points to?

For example:

char* ptr;
strcpy(ptr, &quot;hello world&quot;); // crash here!


or

char* ptr;
scanf(&quot;%s&quot;, ptr); // crash here!

    "/><meta property="og:title" content="Crash or &quot;segmentation fault&quot; when data is copied/scanned/read to an uninitialized pointer | Solutions Checker"/><meta property="og:description" content="This question is meant to be used as reference for all frequently asked questions of the nature:

Why do I get a mysterious crash or &quot;segmentation fault&quot; when I copy/scan data to the address where an uninitialised pointer points to?

For example:

char* ptr;
strcpy(ptr, &quot;hello world&quot;); // crash here!


or

char* ptr;
scanf(&quot;%s&quot;, ptr); // crash here!

    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Crash or &quot;segmentation fault&quot; when data is copied/scanned/read to an uninitialized pointer","text":"This question is meant to be used as reference for all frequently asked questions of the nature:\n\nWhy do I get a mysterious crash or &quot;segmentation fault&quot; when I copy/scan data to the address where an uninitialised pointer points to?\n\nFor example:\n\nchar* ptr;\nstrcpy(ptr, &quot;hello world&quot;); // crash here!\n\n\nor\n\nchar* ptr;\nscanf(&quot;%s&quot;, ptr); // crash here!\n\n    ","answerCount":5,"upVoteCount":500,"suggestedAnswer":[{"text":"A pointer is a special type of variable, which can only contain an address of another variable. It cannot contain any data. You cannot &quot;copy/store data into a pointer&quot; - that doesn&apos;t make any sense. You can only set a pointer to point at data allocated elsewhere.\n\nThis means that in order for a pointer to be meaningful, it must always point at a valid memory location. For example it could point at memory allocated on the stack:\n\n{\n  int data = 0;\n  int* ptr = &amp;data;\n  ...\n}\n\n\nOr memory allocated dynamically on the heap:\n\nint* ptr = malloc(sizeof(int));\n\n\nIt is always a bug to use a pointer before it has been initialized. It does not yet point at valid memory. \n\nThese examples could all lead to program crashes or other kinds of unexpected behavior, such as &quot;segmentation faults&quot;:\n\n/*** examples of incorrect use of pointers ***/\n\n// 1.\nint* bad;\n*bad = 42;\n\n// 2.\nchar* bad;\nstrcpy(bad, &quot;hello&quot;);\n\n\nInstead, you must ensure that the pointer points at (enough) allocated memory:\n\n/*** examples of correct use of pointers ***/\n\n// 1.\nint var;\nint* good = &amp;var;\n*good = 42;\n\n// 2.\nchar* good = malloc(5 + 1); // allocates memory for 5 characters *and*  the null terminator\nstrcpy(good, &quot;hello&quot;);\n\n\n\n\nNote that you can also set a pointer to point at a well-defined &quot;nowhere&quot;, by letting it point to NULL. This makes it a null pointer, which is a pointer that is guaranteed not to point at any valid memory. This is different from leaving the pointer completely uninitialized.\n\nint* p1 = NULL; // pointer to nowhere\nint* p2;        // uninitialized pointer, pointer to &quot;anywhere&quot;, cannot be used yet\n\n\nYet, should you attempt to access the memory pointed at by a null pointer, you can get similar problems as when using an uninitialized pointer: crashes or segmentation faults. In the best case, your system notices that you are trying to access the address null and then throws a &quot;null pointer exception&quot;. \n\nThe solution for null pointer exception bugs is the same: you must set the pointer to point at valid memory before using it.\n\n\n\nFurther reading:\n\nPointers pointing at invalid data\nHow to access a local variable from a different function using pointers?\nCan a local variable&apos;s memory be accessed outside its scope?\n\nSegmentation fault and causes\nWhat is a segmentation fault?\nWhy do I get a segmentation fault when writing to a string initialized with &quot;char *s&quot; but not &quot;char s[]&quot;?\nWhat is the difference between char s[] and char *s?\nDefinitive List of Common Reasons for Segmentation Faults\nWhat is a bus error? \n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"\nPointers only point to a memory location. You created a pointer but you did not bind to a memory location yet. strcpy wants you to pass two pointers (first one mustn&apos;t be constant) that point to two character arrays like this signature:\n\nchar * strcpy ( char * destination, const char * source );\n\n\nsample usage:\n\nchar* ptr = malloc(32);  \nstrcpy(ptr, &quot;hello world&quot;);\n\n\n \n\nchar str[32];  \nstrcpy(str, &quot;hello world&quot;);\n\nYou can try the following code snippet to read string until reaching newline character (*you can also add other whitespace characters like &quot;%[^\\t\\n]s&quot;(tab, newline) or &quot;%[^ \\t\\n]s&quot; (space, tab, newline)).\n\nchar *ptr = malloc(32);\nscanf(&quot;%31[^\\n]&quot;, ptr);\n\n\n(In real life, don&apos;t forget to check the return value from scanf()!)\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"One situation that frequently occurs while learning C is trying to use single quotes to denote a string literal:\n\nchar ptr[5];\nstrcpy(ptr, &apos;hello&apos;); // crash here!\n//            ^     ^   because of &apos; instead of &quot;\n\n\nIn C, &apos;h&apos; is a single character literal, while &quot;h&quot; is a string literal containing an &apos;h&apos; and a null terminator \\0 (that is, a 2 char array). Also, in C, the type of a character literal is int, that is, sizeof(&apos;h&apos;) is equivalent to sizeof(int), while sizeof(char) is 1.\n\nchar h = &apos;h&apos;;\nprintf(&quot;Size: %zu\\n&quot;, sizeof(h));     // Size: 1\nprintf(&quot;Size: %zu\\n&quot;, sizeof(&apos;h&apos;));   // likely output: Size: 4\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"This happens because you have not allocated memory for the pointer char* ptr .\nIn this case you have to dynamically allocate memory for the pointer.\n\nTwo functions malloc() and calloc() can be used for dynamic memory allocation.\n\nTry this code :-\n\nchar* ptr;\nptr = malloc(50); // allocate space for 50 characters.\nstrcpy(ptr, &quot;hello world&quot;);\n\n\nWhen the use of *ptr over don&apos;t forget to deallocate memory allocated for *ptr .This can be done using free() function.\n\nfree(ptr);  // deallocating memory.\n\n\nSize of dynamically allocated memory can be changed by using realloc().\n\nchar *tmp = realloc(ptr, 100); // allocate space for 100 characters.\nif (! tmp) {\n    // reallocation failed, ptr not freed\n    perror(&quot;Resize failed&quot;);\n    exit(1);       \n}\nelse {\n    // reallocation succeeded, old ptr freed\n    ptr = tmp;\n}\n\n\nIn most cases &quot;segmentation fault&quot; happens due to error in memory allocation or array out of bound cases.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"For making a modifiable copy of a string, instead of using malloc, strlen and strcpy, the POSIX C library has a handy function called strdup in &lt;string.h&gt; that will return a copy of the passed-in null-terminated string with allocated storage duration. After use the pointer should be released with free:\n\nchar* ptr;\nptr = strdup(&quot;hello world&quot;);\nptr[0] = &apos;H&apos;;\nputs(ptr);\nfree(ptr);\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-b06815e21c943e0d.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-79a1437acf654019.js" defer=""></script><script src="/_next/static/TQ2eYlCSdocSK-hq6gkM0/_buildManifest.js" defer=""></script><script src="/_next/static/TQ2eYlCSdocSK-hq6gkM0/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/crash-or-%22segmentation-fault%22-when-data-is-copiedscannedread-to-an-uninitialized-pointer-1657387520581#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/crash-or-%22segmentation-fault%22-when-data-is-copiedscannedread-to-an-uninitialized-pointer-1657387520581"><h1>Crash or &quot;segmentation fault&quot; when data is copied/scanned/read to an uninitialized pointer</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>This question is meant to be used as reference for all frequently asked questions of the nature:</p>

<p>Why do I get a mysterious crash or "segmentation fault" when I copy/scan data to the address where an uninitialised pointer points to?</p>

<p>For example:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span>* ptr;
<span class="hljs-built_in">strcpy</span>(ptr, <span class="hljs-string">"hello world"</span>); <span class="hljs-comment">// crash here!</span>
</code></pre>

<p>or</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span>* ptr;
<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, ptr); <span class="hljs-comment">// crash here!</span>
</code></pre>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A pointer is a special type of variable, which can only contain an address of another variable. It cannot contain any data. You cannot "copy/store data into a pointer" - that doesn't make any sense. You can only set a pointer to point at data allocated elsewhere.</p>

<p>This means that in order for a pointer to be meaningful, it must always point at a valid memory location. For example it could point at memory allocated on the stack:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c">{
  <span class="hljs-type">int</span> data = <span class="hljs-number">0</span>;
  <span class="hljs-type">int</span>* ptr = &amp;data;
  ...
}
</code></pre>

<p>Or memory allocated dynamically on the heap:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">int</span>* ptr = <span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>));
</code></pre>

<p>It is always a bug to use a pointer before it has been initialized. It does not yet point at valid memory. </p>

<p>These examples could all lead to program crashes or other kinds of unexpected behavior, such as "segmentation faults":</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-comment">/*** examples of incorrect use of pointers ***/</span>

<span class="hljs-comment">// 1.</span>
<span class="hljs-type">int</span>* bad;
*bad = <span class="hljs-number">42</span>;

<span class="hljs-comment">// 2.</span>
<span class="hljs-type">char</span>* bad;
<span class="hljs-built_in">strcpy</span>(bad, <span class="hljs-string">"hello"</span>);
</code></pre>

<p>Instead, you must ensure that the pointer points at (enough) allocated memory:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-comment">/*** examples of correct use of pointers ***/</span>

<span class="hljs-comment">// 1.</span>
<span class="hljs-type">int</span> var;
<span class="hljs-type">int</span>* good = &amp;var;
*good = <span class="hljs-number">42</span>;

<span class="hljs-comment">// 2.</span>
<span class="hljs-type">char</span>* good = <span class="hljs-built_in">malloc</span>(<span class="hljs-number">5</span> + <span class="hljs-number">1</span>); <span class="hljs-comment">// allocates memory for 5 characters *and*  the null terminator</span>
<span class="hljs-built_in">strcpy</span>(good, <span class="hljs-string">"hello"</span>);
</code></pre>

<hr>

<p>Note that you can also set a pointer to point at a well-defined "nowhere", by letting it point to <code>NULL</code>. This makes it a <em>null pointer</em>, which is a pointer that is guaranteed not to point at any valid memory. This is different from leaving the pointer completely uninitialized.</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">int</span>* p1 = <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// pointer to nowhere</span>
<span class="hljs-type">int</span>* p2;        <span class="hljs-comment">// uninitialized pointer, pointer to "anywhere", cannot be used yet</span>
</code></pre>

<p>Yet, should you attempt to access the memory pointed at by a null pointer, you can get similar problems as when using an uninitialized pointer: crashes or segmentation faults. In the best case, your system notices that you are trying to access the address null and then throws a "null pointer exception". </p>

<p>The solution for null pointer exception bugs is the same: you must set the pointer to point at valid memory before using it.</p>

<hr>

<p><em>Further reading:</em></p>

<p><strong>Pointers pointing at invalid data</strong><br>
<a href="https://stackoverflow.com/questions/4570366/pointer-to-local-variable">How to access a local variable from a different function using pointers?</a><br>
<a href="https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope">Can a local variable's memory be accessed outside its scope?</a></p>

<p><strong>Segmentation fault and causes</strong><br>
<a href="https://stackoverflow.com/questions/2346806/what-is-segmentation-fault">What is a segmentation fault?</a><br>
<a href="https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string-initialized-with-cha">Why do I get a segmentation fault when writing to a string initialized with "char *s" but not "char s[]"?</a><br>
<a href="https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c">What is the difference between char s[] and char *s?</a><br>
<a href="https://stackoverflow.com/questions/33047452/definitive-list-of-common-reasons-for-segmentation-faults">Definitive List of Common Reasons for Segmentation Faults</a><br>
<a href="https://stackoverflow.com/questions/212466/what-is-a-bus-error">What is a bus error?</a> </p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<ol>
<li><p>Pointers only point to a memory location. You created a pointer but you did not bind to a memory location yet. <code>strcpy</code> wants you to pass two pointers (<em>first one mustn't be constant</em>) that point to two character arrays like this signature:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span> * <span class="hljs-title function_">strcpy</span> <span class="hljs-params">( <span class="hljs-type">char</span> * destination, <span class="hljs-type">const</span> <span class="hljs-type">char</span> * source )</span>;
</code></pre>

<h3>sample usage:</h3>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span>* ptr = <span class="hljs-built_in">malloc</span>(<span class="hljs-number">32</span>);  
<span class="hljs-built_in">strcpy</span>(ptr, <span class="hljs-string">"hello world"</span>);
</code></pre>

 

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span> str[<span class="hljs-number">32</span>];  
<span class="hljs-built_in">strcpy</span>(str, <span class="hljs-string">"hello world"</span>);
</code></pre></li>
<li><p>You can try the following code snippet to read string until reaching newline character (*you can also add other whitespace characters like <code>"%[^\t\n]s"</code>(<em>tab, newline</em>) or <code>"%[^ \t\n]s"</code> (<em>space, tab, newline</em>)).</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span> *ptr = <span class="hljs-built_in">malloc</span>(<span class="hljs-number">32</span>);
<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%31[^\n]"</span>, ptr);
</code></pre>

<p>(In real life, don't forget to check the return value from <code>scanf()</code>!)</p></li>
</ol>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>One situation that frequently occurs while learning C is trying to use single quotes to denote a string literal:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span> ptr[<span class="hljs-number">5</span>];
<span class="hljs-built_in">strcpy</span>(ptr, <span class="hljs-string">'hello'</span>); <span class="hljs-comment">// crash here!</span>
<span class="hljs-comment">//            ^     ^   because of ' instead of "</span>
</code></pre>

<p>In C, <code>'h'</code> is a single character literal, while <code>"h"</code> is a string literal containing an <code>'h'</code> and a null terminator <code>\0</code> (that is, a 2 char array). Also, in C, the type of a character literal is <code>int</code>, that is, <code>sizeof('h')</code> is equivalent to <code>sizeof(int)</code>, while <code>sizeof(char)</code> is <code>1</code>.</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span> h = <span class="hljs-string">'h'</span>;
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Size: %zu\n"</span>, <span class="hljs-keyword">sizeof</span>(h));     <span class="hljs-comment">// Size: 1</span>
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Size: %zu\n"</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-string">'h'</span>));   <span class="hljs-comment">// likely output: Size: 4</span>
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This happens because you have <strong>not allocated</strong> memory for the <strong>pointer</strong> <code>char* ptr</code> .
In this case you have to <em>dynamically allocate</em> memory for the pointer.</p>

<p>Two functions <code>malloc()</code> and <code>calloc()</code> can be used for <code>dynamic memory allocation</code>.</p>

<p>Try this code :-</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span>* ptr;
ptr = <span class="hljs-built_in">malloc</span>(<span class="hljs-number">50</span>); <span class="hljs-comment">// allocate space for 50 characters.</span>
<span class="hljs-built_in">strcpy</span>(ptr, <span class="hljs-string">"hello world"</span>);
</code></pre>

<p>When the use of <code>*ptr</code> over don't forget to <em>deallocate memory</em> allocated for <code>*ptr</code> .This can be done using <code>free()</code> function.</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-built_in">free</span>(ptr);  <span class="hljs-comment">// deallocating memory.</span>
</code></pre>

<p>Size of <em>dynamically allocated memory</em> can be changed by using <code>realloc()</code>.</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span> *tmp = <span class="hljs-built_in">realloc</span>(ptr, <span class="hljs-number">100</span>); <span class="hljs-comment">// allocate space for 100 characters.</span>
<span class="hljs-keyword">if</span> (! tmp) {
    <span class="hljs-comment">// reallocation failed, ptr not freed</span>
    perror(<span class="hljs-string">"Resize failed"</span>);
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);       
}
<span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// reallocation succeeded, old ptr freed</span>
    ptr = tmp;
}
</code></pre>

<p>In most cases <strong>"segmentation fault"</strong> happens due to error in <em>memory allocation</em> or <em>array out of bound</em> cases.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For making a modifiable copy of a string, instead of using <code>malloc</code>, <code>strlen</code> and <code>strcpy</code>, the POSIX C library has a handy function called <code>strdup</code> in <code>&lt;string.h&gt;</code> that will return a copy of the passed-in null-terminated string with allocated storage duration. After use the pointer should be released with <code>free</code>:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">char</span>* ptr;
ptr = strdup(<span class="hljs-string">"hello world"</span>);
ptr[<span class="hljs-number">0</span>] = <span class="hljs-string">'H'</span>;
<span class="hljs-built_in">puts</span>(ptr);
<span class="hljs-built_in">free</span>(ptr);
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/what-is-a-lambda-expression-in-c++11-1657387999252">What is a lambda expression in C++11?</a><a href="/questions/what-are-copy-elision-and-return-value-optimization-1657385455976">What are copy elision and return value optimization?</a><a href="/questions/download-a-file-by-jquery.ajax-1657388220611">Download a file by jQuery.Ajax</a><a href="/questions/webdriverwait-not-working-as-expected-1657387373148">WebDriverWait not working as expected</a><a href="/questions/how-do-i-make-git-forget-about-a-file-that-was-tracked-but-is-now-in-.gitignore-1657387328843">How do I make Git forget about a file that was tracked, but is now in .gitignore?</a><a href="/questions/reference:-mod_rewrite-url-rewriting-and-%22pretty-links%22-explained-1657384905504">Reference: mod_rewrite, URL rewriting and &quot;pretty links&quot; explained</a><a href="/questions/reshaping-multiple-sets-of-measurement-columns-(wide-format)-into-single-columns-(long-format)-1657388016983">Reshaping multiple sets of measurement columns (wide format) into single columns (long format)</a><a href="/questions/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc-1657387609554">Why does the order in which libraries are linked sometimes cause errors in GCC?</a><a href="/questions/how-to-deal-with-settingwithcopywarning-in-pandas-1657384778377">How to deal with SettingWithCopyWarning in Pandas</a><a href="/questions/deep-cloning-objects-1657387930865">Deep cloning objects</a><a href="/questions/how-to-get-the-difference-between-two-arrays-in-javascript-1657388463384">How to get the difference between two arrays in JavaScript?</a><a href="/questions/what-is-__init__.py-for-1657388415243">What is __init__.py for?</a><a href="/questions/what-is-the-strict-aliasing-rule-1657384742852">What is the strict aliasing rule?</a><a href="/questions/pandas-conditional-creation-of-a-seriesdataframe-column-1657387461003">Pandas conditional creation of a series/dataframe column</a><a href="/questions/how-to-append-text-to-an-existing-file-in-java-1657388492377">How to append text to an existing file in Java?</a><a href="/questions/how-to-check-whether-a-string-contains-a-substring-in-javascript-1657388080698">How to check whether a string contains a substring in JavaScript?</a><a href="/questions/the-viewdata-item-that-has-the-key-&#x27;xxx&#x27;-is-of-type-&#x27;system.int32&#x27;-but-must-be-of-type-&#x27;ienumerablelessselectlistitemgreater&#x27;-1657388454191">The ViewData item that has the key &#x27;XXX&#x27; is of type &#x27;System.Int32&#x27; but must be of type &#x27;IEnumerable&lt;SelectListItem&gt;&#x27;</a><a href="/questions/how-do-i-split-a-delimited-string-so-i-can-access-individual-items-1657388042385">How do I split a delimited string so I can access individual items?</a><a href="/questions/short-description-of-the-scoping-rules-1657384853121">Short description of the scoping rules?</a><a href="/questions/int-division:-why-is-the-result-of-13-0-1657387547814">Int division: Why is the result of 1/3 == 0?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;A pointer is a special type of variable, which can only contain an address of another variable. It cannot contain any data. You cannot \u0026quot;copy/store data into a pointer\u0026quot; - that doesn\u0026apos;t make any sense. You can only set a pointer to point at data allocated elsewhere.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This means that in order for a pointer to be meaningful, it must always point at a valid memory location. For example it could point at memory allocated on the stack:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;{\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; data = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;* ptr = \u0026amp;amp;data;\n  ...\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or memory allocated dynamically on the heap:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;* ptr = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;malloc\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;sizeof\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It is always a bug to use a pointer before it has been initialized. It does not yet point at valid memory. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;These examples could all lead to program crashes or other kinds of unexpected behavior, such as \u0026quot;segmentation faults\u0026quot;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*** examples of incorrect use of pointers ***/\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 1.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;* bad;\n*bad = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;42\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 2.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;* bad;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;strcpy\u0026lt;/span\u0026gt;(bad, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Instead, you must ensure that the pointer points at (enough) allocated memory:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*** examples of correct use of pointers ***/\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 1.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; var;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;* good = \u0026amp;amp;var;\n*good = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;42\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 2.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;* good = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;malloc\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// allocates memory for 5 characters *and*  the null terminator\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;strcpy\u0026lt;/span\u0026gt;(good, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;Note that you can also set a pointer to point at a well-defined \u0026quot;nowhere\u0026quot;, by letting it point to \u0026lt;code\u0026gt;NULL\u0026lt;/code\u0026gt;. This makes it a \u0026lt;em\u0026gt;null pointer\u0026lt;/em\u0026gt;, which is a pointer that is guaranteed not to point at any valid memory. This is different from leaving the pointer completely uninitialized.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;* p1 = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// pointer to nowhere\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;* p2;        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// uninitialized pointer, pointer to \u0026quot;anywhere\u0026quot;, cannot be used yet\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Yet, should you attempt to access the memory pointed at by a null pointer, you can get similar problems as when using an uninitialized pointer: crashes or segmentation faults. In the best case, your system notices that you are trying to access the address null and then throws a \u0026quot;null pointer exception\u0026quot;. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The solution for null pointer exception bugs is the same: you must set the pointer to point at valid memory before using it.\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Further reading:\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Pointers pointing at invalid data\u0026lt;/strong\u0026gt;\u0026lt;br\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/4570366/pointer-to-local-variable\u0026quot;\u0026gt;How to access a local variable from a different function using pointers?\u0026lt;/a\u0026gt;\u0026lt;br\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope\u0026quot;\u0026gt;Can a local variable\u0026apos;s memory be accessed outside its scope?\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Segmentation fault and causes\u0026lt;/strong\u0026gt;\u0026lt;br\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/2346806/what-is-segmentation-fault\u0026quot;\u0026gt;What is a segmentation fault?\u0026lt;/a\u0026gt;\u0026lt;br\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string-initialized-with-cha\u0026quot;\u0026gt;Why do I get a segmentation fault when writing to a string initialized with \u0026quot;char *s\u0026quot; but not \u0026quot;char s[]\u0026quot;?\u0026lt;/a\u0026gt;\u0026lt;br\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c\u0026quot;\u0026gt;What is the difference between char s[] and char *s?\u0026lt;/a\u0026gt;\u0026lt;br\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/33047452/definitive-list-of-common-reasons-for-segmentation-faults\u0026quot;\u0026gt;Definitive List of Common Reasons for Segmentation Faults\u0026lt;/a\u0026gt;\u0026lt;br\u0026gt;\n\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/212466/what-is-a-bus-error\u0026quot;\u0026gt;What is a bus error?\u0026lt;/a\u0026gt; \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Pointers only point to a memory location. You created a pointer but you did not bind to a memory location yet. \u0026lt;code\u0026gt;strcpy\u0026lt;/code\u0026gt; wants you to pass two pointers (\u0026lt;em\u0026gt;first one mustn\u0026apos;t be constant\u0026lt;/em\u0026gt;) that point to two character arrays like this signature:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;strcpy\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;( \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; * destination, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; * source )\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h3\u0026gt;sample usage:\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;* ptr = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;malloc\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;32\u0026lt;/span\u0026gt;);  \n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;strcpy\u0026lt;/span\u0026gt;(ptr, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello world\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n \n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; str[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;32\u0026lt;/span\u0026gt;];  \n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;strcpy\u0026lt;/span\u0026gt;(str, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello world\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;You can try the following code snippet to read string until reaching newline character (*you can also add other whitespace characters like \u0026lt;code\u0026gt;\u0026quot;%[^\\t\\n]s\u0026quot;\u0026lt;/code\u0026gt;(\u0026lt;em\u0026gt;tab, newline\u0026lt;/em\u0026gt;) or \u0026lt;code\u0026gt;\u0026quot;%[^ \\t\\n]s\u0026quot;\u0026lt;/code\u0026gt; (\u0026lt;em\u0026gt;space, tab, newline\u0026lt;/em\u0026gt;)).\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *ptr = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;malloc\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;32\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;scanf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%31[^\\n]\u0026quot;\u0026lt;/span\u0026gt;, ptr);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;(In real life, don\u0026apos;t forget to check the return value from \u0026lt;code\u0026gt;scanf()\u0026lt;/code\u0026gt;!)\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;One situation that frequently occurs while learning C is trying to use single quotes to denote a string literal:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; ptr[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;];\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;strcpy\u0026lt;/span\u0026gt;(ptr, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;hello\u0026apos;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// crash here!\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//            ^     ^   because of \u0026apos; instead of \u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;In C, \u0026lt;code\u0026gt;\u0026apos;h\u0026apos;\u0026lt;/code\u0026gt; is a single character literal, while \u0026lt;code\u0026gt;\u0026quot;h\u0026quot;\u0026lt;/code\u0026gt; is a string literal containing an \u0026lt;code\u0026gt;\u0026apos;h\u0026apos;\u0026lt;/code\u0026gt; and a null terminator \u0026lt;code\u0026gt;\\0\u0026lt;/code\u0026gt; (that is, a 2 char array). Also, in C, the type of a character literal is \u0026lt;code\u0026gt;int\u0026lt;/code\u0026gt;, that is, \u0026lt;code\u0026gt;sizeof(\u0026apos;h\u0026apos;)\u0026lt;/code\u0026gt; is equivalent to \u0026lt;code\u0026gt;sizeof(int)\u0026lt;/code\u0026gt;, while \u0026lt;code\u0026gt;sizeof(char)\u0026lt;/code\u0026gt; is \u0026lt;code\u0026gt;1\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; h = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;h\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Size: %zu\\n\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;sizeof\u0026lt;/span\u0026gt;(h));     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Size: 1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Size: %zu\\n\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;sizeof\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;h\u0026apos;\u0026lt;/span\u0026gt;));   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// likely output: Size: 4\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This happens because you have \u0026lt;strong\u0026gt;not allocated\u0026lt;/strong\u0026gt; memory for the \u0026lt;strong\u0026gt;pointer\u0026lt;/strong\u0026gt; \u0026lt;code\u0026gt;char* ptr\u0026lt;/code\u0026gt; .\nIn this case you have to \u0026lt;em\u0026gt;dynamically allocate\u0026lt;/em\u0026gt; memory for the pointer.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Two functions \u0026lt;code\u0026gt;malloc()\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;calloc()\u0026lt;/code\u0026gt; can be used for \u0026lt;code\u0026gt;dynamic memory allocation\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Try this code :-\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;* ptr;\nptr = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;malloc\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// allocate space for 50 characters.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;strcpy\u0026lt;/span\u0026gt;(ptr, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello world\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;When the use of \u0026lt;code\u0026gt;*ptr\u0026lt;/code\u0026gt; over don\u0026apos;t forget to \u0026lt;em\u0026gt;deallocate memory\u0026lt;/em\u0026gt; allocated for \u0026lt;code\u0026gt;*ptr\u0026lt;/code\u0026gt; .This can be done using \u0026lt;code\u0026gt;free()\u0026lt;/code\u0026gt; function.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;free\u0026lt;/span\u0026gt;(ptr);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// deallocating memory.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Size of \u0026lt;em\u0026gt;dynamically allocated memory\u0026lt;/em\u0026gt; can be changed by using \u0026lt;code\u0026gt;realloc()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *tmp = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;realloc\u0026lt;/span\u0026gt;(ptr, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// allocate space for 100 characters.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (! tmp) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// reallocation failed, ptr not freed\u0026lt;/span\u0026gt;\n    perror(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Resize failed\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;exit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);       \n}\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// reallocation succeeded, old ptr freed\u0026lt;/span\u0026gt;\n    ptr = tmp;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;In most cases \u0026lt;strong\u0026gt;\u0026quot;segmentation fault\u0026quot;\u0026lt;/strong\u0026gt; happens due to error in \u0026lt;em\u0026gt;memory allocation\u0026lt;/em\u0026gt; or \u0026lt;em\u0026gt;array out of bound\u0026lt;/em\u0026gt; cases.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For making a modifiable copy of a string, instead of using \u0026lt;code\u0026gt;malloc\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;strlen\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;strcpy\u0026lt;/code\u0026gt;, the POSIX C library has a handy function called \u0026lt;code\u0026gt;strdup\u0026lt;/code\u0026gt; in \u0026lt;code\u0026gt;\u0026amp;lt;string.h\u0026amp;gt;\u0026lt;/code\u0026gt; that will return a copy of the passed-in null-terminated string with allocated storage duration. After use the pointer should be released with \u0026lt;code\u0026gt;free\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;* ptr;\nptr = strdup(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello world\u0026quot;\u0026lt;/span\u0026gt;);\nptr[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;H\u0026apos;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;puts\u0026lt;/span\u0026gt;(ptr);\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;free\u0026lt;/span\u0026gt;(ptr);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":290,"title":"Crash or \"segmentation fault\" when data is copied/scanned/read to an uninitialized pointer","content":"\n                \n\u0026lt;p\u0026gt;This question is meant to be used as reference for all frequently asked questions of the nature:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Why do I get a mysterious crash or \u0026quot;segmentation fault\u0026quot; when I copy/scan data to the address where an uninitialised pointer points to?\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;* ptr;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;strcpy\u0026lt;/span\u0026gt;(ptr, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello world\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// crash here!\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;* ptr;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;scanf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%s\u0026quot;\u0026lt;/span\u0026gt;, ptr); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// crash here!\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","slug":"crash-or-\"segmentation-fault\"-when-data-is-copiedscannedread-to-an-uninitialized-pointer-1657387520581","postType":"QUESTION","createdAt":"2022-07-09T17:25:20.000Z","updatedAt":"2022-07-09T17:25:20.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"What is a lambda expression in C++11?","slug":"what-is-a-lambda-expression-in-c++11-1657387999252"},{"title":"What are copy elision and return value optimization?","slug":"what-are-copy-elision-and-return-value-optimization-1657385455976"},{"title":"Download a file by jQuery.Ajax","slug":"download-a-file-by-jquery.ajax-1657388220611"},{"title":"WebDriverWait not working as expected","slug":"webdriverwait-not-working-as-expected-1657387373148"},{"title":"How do I make Git forget about a file that was tracked, but is now in .gitignore?","slug":"how-do-i-make-git-forget-about-a-file-that-was-tracked-but-is-now-in-.gitignore-1657387328843"},{"title":"Reference: mod_rewrite, URL rewriting and \"pretty links\" explained","slug":"reference:-mod_rewrite-url-rewriting-and-\"pretty-links\"-explained-1657384905504"},{"title":"Reshaping multiple sets of measurement columns (wide format) into single columns (long format)","slug":"reshaping-multiple-sets-of-measurement-columns-(wide-format)-into-single-columns-(long-format)-1657388016983"},{"title":"Why does the order in which libraries are linked sometimes cause errors in GCC?","slug":"why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc-1657387609554"},{"title":"How to deal with SettingWithCopyWarning in Pandas","slug":"how-to-deal-with-settingwithcopywarning-in-pandas-1657384778377"},{"title":"Deep cloning objects","slug":"deep-cloning-objects-1657387930865"},{"title":"How to get the difference between two arrays in JavaScript?","slug":"how-to-get-the-difference-between-two-arrays-in-javascript-1657388463384"},{"title":"What is __init__.py for?","slug":"what-is-__init__.py-for-1657388415243"},{"title":"What is the strict aliasing rule?","slug":"what-is-the-strict-aliasing-rule-1657384742852"},{"title":"Pandas conditional creation of a series/dataframe column","slug":"pandas-conditional-creation-of-a-seriesdataframe-column-1657387461003"},{"title":"How to append text to an existing file in Java?","slug":"how-to-append-text-to-an-existing-file-in-java-1657388492377"},{"title":"How to check whether a string contains a substring in JavaScript?","slug":"how-to-check-whether-a-string-contains-a-substring-in-javascript-1657388080698"},{"title":"The ViewData item that has the key 'XXX' is of type 'System.Int32' but must be of type 'IEnumerable\u003cSelectListItem\u003e'","slug":"the-viewdata-item-that-has-the-key-'xxx'-is-of-type-'system.int32'-but-must-be-of-type-'ienumerablelessselectlistitemgreater'-1657388454191"},{"title":"How do I split a delimited string so I can access individual items?","slug":"how-do-i-split-a-delimited-string-so-i-can-access-individual-items-1657388042385"},{"title":"Short description of the scoping rules?","slug":"short-description-of-the-scoping-rules-1657384853121"},{"title":"Int division: Why is the result of 1/3 == 0?","slug":"int-division:-why-is-the-result-of-13-0-1657387547814"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"crash-or-\"segmentation-fault\"-when-data-is-copiedscannedread-to-an-uninitialized-pointer-1657387520581"},"buildId":"TQ2eYlCSdocSK-hq6gkM0","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>