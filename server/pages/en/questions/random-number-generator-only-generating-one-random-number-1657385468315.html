<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/random-number-generator-only-generating-one-random-number-1657385468315","name":"Questions"}}]}</script><title>Random number generator only generating one random number | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I have the following function:

//Function to get random number
public static int RandomNumber(int min, int max)
{
    Random random = new Random();
    return random.Next(min, max);
}


How I call it:

byte[] mac = new byte[6];
for (int x = 0; x &lt; 6; ++x)
    mac[x] = (byte)(Misc.RandomNumber((int)0xFFFF, (int)0xFFFFFF) % 256);


If I step that loop with the debugger during runtime I get different values (which is what I want).
However, if I put a breakpoint two lines below that code, all members of the mac array have equal value.

Why does that happen?
    "/><meta property="og:title" content="Random number generator only generating one random number | Solutions Checker"/><meta property="og:description" content="I have the following function:

//Function to get random number
public static int RandomNumber(int min, int max)
{
    Random random = new Random();
    return random.Next(min, max);
}


How I call it:

byte[] mac = new byte[6];
for (int x = 0; x &lt; 6; ++x)
    mac[x] = (byte)(Misc.RandomNumber((int)0xFFFF, (int)0xFFFFFF) % 256);


If I step that loop with the debugger during runtime I get different values (which is what I want).
However, if I put a breakpoint two lines below that code, all members of the mac array have equal value.

Why does that happen?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Random number generator only generating one random number","text":"I have the following function:\n\n//Function to get random number\npublic static int RandomNumber(int min, int max)\n{\n    Random random = new Random();\n    return random.Next(min, max);\n}\n\n\nHow I call it:\n\nbyte[] mac = new byte[6];\nfor (int x = 0; x &lt; 6; ++x)\n    mac[x] = (byte)(Misc.RandomNumber((int)0xFFFF, (int)0xFFFFFF) % 256);\n\n\nIf I step that loop with the debugger during runtime I get different values (which is what I want).\nHowever, if I put a breakpoint two lines below that code, all members of the mac array have equal value.\n\nWhy does that happen?\n    ","answerCount":13,"upVoteCount":500,"suggestedAnswer":[{"text":"Every time you do new Random() it is initialized using the clock. This means that in a tight loop you get the same value lots of times. You should keep a single Random instance and keep using Next on the same instance.\n\n//Function to get a random number \nprivate static readonly Random random = new Random(); \nprivate static readonly object syncLock = new object(); \npublic static int RandomNumber(int min, int max)\n{\n    lock(syncLock) { // synchronize\n        return random.Next(min, max);\n    }\n}\n\n\n\n\nEdit (see comments): why do we need a lock here?\n\nBasically, Next is going to change the internal state of the Random instance. If we do that at the same time from multiple threads, you could argue &quot;we&apos;ve just made the outcome even more random&quot;, but what we are actually doing is potentially breaking the internal implementation, and we could also start getting the same numbers from different threads, which might be a problem - and might not. The guarantee of what happens internally is the bigger issue, though; since Random does not make any guarantees of thread-safety. Thus there are two valid approaches:\n\n\nSynchronize so that we don&apos;t access it at the same time from different threads\nUse different Random instances per thread\n\n\nEither can be fine; but mutexing a single instance from multiple callers at the same time is just asking for trouble.\n\nThe lock achieves the first (and simpler) of these approaches; however, another approach might be: \n\nprivate static readonly ThreadLocal&lt;Random&gt; appRandom\n     = new ThreadLocal&lt;Random&gt;(() =&gt; new Random());\n\n\nthis is then per-thread, so you don&apos;t need to synchronize. \n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"For ease of re-use throughout your application a static class may help.\n\npublic static class StaticRandom\n{\n    private static int seed;\n\n    private static ThreadLocal&lt;Random&gt; threadLocal = new ThreadLocal&lt;Random&gt;\n        (() =&gt; new Random(Interlocked.Increment(ref seed)));\n\n    static StaticRandom()\n    {\n        seed = Environment.TickCount;\n    }\n\n    public static Random Instance { get { return threadLocal.Value; } }\n}\n\n\nYou can use then use static random instance with code such as\n\nStaticRandom.Instance.Next(1, 100);\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Mark&apos;s solution can be quite expensive since it needs to synchronize everytime.\n\nWe can get around the need for synchronization by using the thread-specific storage pattern:\n\n\npublic class RandomNumber : IRandomNumber\n{\n    private static readonly Random Global = new Random();\n    [ThreadStatic] private static Random _local;\n\n    public int Next(int max)\n    {\n        var localBuffer = _local;\n        if (localBuffer == null) \n        {\n            int seed;\n            lock(Global) seed = Global.Next();\n            localBuffer = new Random(seed);\n            _local = localBuffer;\n        }\n        return localBuffer.Next(max);\n    }\n}\n\n\n\nMeasure the two implementations and you should see a significant difference.\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"My answer from here:\n\nJust reiterating the right solution:\n\nnamespace mySpace\n{\n    public static class Util\n    {\n        private static rnd = new Random();\n        public static int GetRandom()\n        {\n            return rnd.Next();\n        }\n    }\n}\n\n\nSo you can call:\n\nvar i = Util.GetRandom();\n\n\nall throughout. \n\nIf you strictly need a true stateless static method to generate random numbers, you can rely on a Guid.\n\npublic static class Util\n{\n    public static int GetRandom()\n    {\n        return Guid.NewGuid().GetHashCode();\n    }\n}\n\n\nIt&apos;s going to be a wee bit slower, but can be much more random than Random.Next, at least from my experience.\n\nBut not:\n\nnew Random(Guid.NewGuid().GetHashCode()).Next();\n\n\nThe unnecessary object creation is going to make it slower especially under a loop.\n\nAnd never:\n\nnew Random().Next();\n\n\nNot only it&apos;s slower (inside a loop), its randomness is... well not really good according to me..\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"I would rather use the following class to generate random numbers:\n\nbyte[] random;\nSystem.Security.Cryptography.RNGCryptoServiceProvider prov = new System.Security.Cryptography.RNGCryptoServiceProvider();\nprov.GetBytes(random);\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"1) As Marc Gravell said, try to use ONE random-generator. It&apos;s always cool to add this to the constructor: System.Environment.TickCount.\n\n2) One tip. Let&apos;s say you want to create 100 objects and suppose each of them should have its-own random-generator (handy if you calculate LOADS of random numbers in a very short period of time). If you would do this in a loop (generation of 100 objects), you could do this like that (to assure fully-randomness):\n\nint inMyRandSeed;\n\nfor(int i=0;i&lt;100;i++)\n{\n   inMyRandSeed = System.Environment.TickCount + i;\n   .\n   .\n   .\n   myNewObject = new MyNewObject(inMyRandSeed);  \n   .\n   .\n   .\n}\n\n// Usage: Random m_rndGen = new Random(inMyRandSeed);\n\n\nCheers.\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"Every time you execute\n\nRandom random = new Random (15);\n\n\nIt does not matter if you execute it millions of times, you will always use the same seed.\n\nIf you use \n\nRandom random = new Random ();\n\n\nYou get different random number sequence, if a hacker guesses the seed and your algorithm is related to the security of your system - your algorithm is broken. I you execute mult. In this constructor the seed is specified by the system clock and if several instances are created in a very short period of time (milliseconds) it is possible that they may have the same seed.\n\nIf you need safe random numbers you must use the class\n\n\n  System.Security.Cryptography.RNGCryptoServiceProvider\n\n\npublic static int Next(int min, int max)\n{\n    if(min &gt;= max)\n    {\n        throw new ArgumentException(&quot;Min value is greater or equals than Max value.&quot;);\n    }\n    byte[] intBytes = new byte[4];\n    using(RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider())\n    {\n        rng.GetNonZeroBytes(intBytes);\n    }\n    return  min +  Math.Abs(BitConverter.ToInt32(intBytes, 0)) % (max - min + 1);\n}\n\n\nUsage:\n\nint randomNumber = Next(1,100);\n\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"You can use code like this:\npublic static class ThreadSafeRandom\n{\n    private static readonly Random _global = new Random();\n    private static readonly ThreadLocal&lt;Random&gt; _local = new ThreadLocal&lt;Random&gt;(() =&gt;\n    {\n        int seed;\n        lock (_global)\n        {\n            seed = _global.Next();\n        }\n        return new Random(seed);\n    });\n\n    public static Random Instance =&gt; _local.Value;\n}\n\nThis code can be used as is or via the NuGet package ThreadSafeRandomizer.\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"I use this:\nint randomNumber = int.Parse(Guid.NewGuid().ToString().FirstOrDefault(Char.IsDigit).ToString().Replace(&quot;\\0&quot;, &quot;0&quot;));\n\nPerformance: Generating 1 million random number on my PC: 711 ms.\nIf the Guid not contains any number (i don&apos;t know that&apos;s possible or not) then 0 will be used as the result.\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"There are a lot of solutions, here one: if you want only number erase the letters and the method receives a random and the result length.\n\npublic String GenerateRandom(Random oRandom, int iLongitudPin)\n{\n    String sCharacters = &quot;123456789ABCDEFGHIJKLMNPQRSTUVWXYZ123456789&quot;;\n    int iLength = sCharacters.Length;\n    char cCharacter;\n    int iLongitudNuevaCadena = iLongitudPin; \n    String sRandomResult = &quot;&quot;;\n    for (int i = 0; i &lt; iLongitudNuevaCadena; i++)\n    {\n        cCharacter = sCharacters[oRandom.Next(iLength)];\n        sRandomResult += cCharacter.ToString();\n    }\n    return (sRandomResult);\n}\n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"I solved the problem by using the Rnd() function:\nFunction RollD6() As UInteger\n        RollD6 = (Math.Floor(6 * Rnd())) + 1\n        Return RollD6\nEnd Function\n\nWhen the form loads, I use the Randomize() method to make sure I don&apos;t always get the same sequence of random numbers from run to run.\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"In Visual Basic this works (probably can be translated to C#, if not a DLL reference can be a solution):\nPrivate Function GetRandomInt(ByVal Min As Integer, ByVal Max As Integer) As Integer\n     Static Generator As System.Random = New System.Random()\n     Return Generator.Next(Min, Max)\nEnd Function\n\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"Always get a positive random number.\n var nexnumber = Guid.NewGuid().GetHashCode();\n        if (nexnumber &lt; 0)\n        {\n            nexnumber *= -1;\n        }\n\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-7e79b78ef884195a.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-c1a73f3e758d48b9.js" defer=""></script><script src="/_next/static/XDXakEY6gSPdgAODPxtjg/_buildManifest.js" defer=""></script><script src="/_next/static/XDXakEY6gSPdgAODPxtjg/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/random-number-generator-only-generating-one-random-number-1657385468315#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/random-number-generator-only-generating-one-random-number-1657385468315"><h1>Random number generator only generating one random number</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>I have the following function:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-comment">//Function to get random number</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">RandomNumber</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> min, <span class="hljs-built_in">int</span> max</span>)</span>
{
    Random random = <span class="hljs-keyword">new</span> Random();
    <span class="hljs-keyword">return</span> random.Next(min, max);
}
</code></pre>

<p>How I call it:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-built_in">byte</span>[] mac = <span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[<span class="hljs-number">6</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt; <span class="hljs-number">6</span>; ++x)
    mac[x] = (<span class="hljs-built_in">byte</span>)(Misc.RandomNumber((<span class="hljs-built_in">int</span>)<span class="hljs-number">0xFFFF</span>, (<span class="hljs-built_in">int</span>)<span class="hljs-number">0xFFFFFF</span>) % <span class="hljs-number">256</span>);
</code></pre>

<p>If I step that loop with the debugger during runtime I get different values (which is what I want).
However, if I put a breakpoint two lines below that code, all members of the <code>mac</code> array have equal value.</p>

<p>Why does that happen?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Every time you do <code>new Random()</code> it is initialized using the clock. This means that in a tight loop you get the same value lots of times. You should keep a single <a href="https://docs.microsoft.com/en-us/dotnet/api/system.random?view=netframework-4.8" rel="noreferrer">Random</a> instance and keep using <a href="https://docs.microsoft.com/en-us/dotnet/api/system.random.next?view=netframework-4.8#System_Random_Next" rel="noreferrer">Next</a> on the <strong>same</strong> instance.</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-comment">//Function to get a random number </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> Random random = <span class="hljs-keyword">new</span> Random(); 
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">object</span> syncLock = <span class="hljs-keyword">new</span> <span class="hljs-built_in">object</span>(); 
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">RandomNumber</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> min, <span class="hljs-built_in">int</span> max</span>)</span>
{
    <span class="hljs-keyword">lock</span>(syncLock) { <span class="hljs-comment">// synchronize</span>
        <span class="hljs-keyword">return</span> random.Next(min, max);
    }
}
</code></pre>

<hr>

<p>Edit (see comments): why do we need a <code>lock</code> here?</p>

<p>Basically, <code>Next</code> is going to change the internal state of the <code>Random</code> instance. If we do that at the same time from multiple threads, you <em>could</em> argue "we've just made the outcome even more random", but what we are <em>actually</em> doing is potentially breaking the internal implementation, and we could also start getting the same numbers from different threads, which <em>might</em> be a problem - and might not. The guarantee of what happens internally is the bigger issue, though; since <code>Random</code> does <strong>not</strong> make any guarantees of thread-safety. Thus there are two valid approaches:</p>

<ul>
<li>Synchronize so that we don't access it at the same time from different threads</li>
<li>Use different <code>Random</code> instances per thread</li>
</ul>

<p>Either can be fine; but mutexing a <strong>single</strong> instance from multiple callers at the same time is just asking for trouble.</p>

<p>The <code>lock</code> achieves the first (and simpler) of these approaches; however, another approach might be: </p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> ThreadLocal&lt;Random&gt; appRandom
     = <span class="hljs-keyword">new</span> ThreadLocal&lt;Random&gt;(() =&gt; <span class="hljs-keyword">new</span> Random());
</code></pre>

<p>this is then per-thread, so you don't need to synchronize. </p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For ease of re-use throughout your application a static class may help.</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">StaticRandom</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> seed;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ThreadLocal&lt;Random&gt; threadLocal = <span class="hljs-keyword">new</span> ThreadLocal&lt;Random&gt;
        (() =&gt; <span class="hljs-keyword">new</span> Random(Interlocked.Increment(<span class="hljs-keyword">ref</span> seed)));

    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-title">StaticRandom</span>()</span>
    {
        seed = Environment.TickCount;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Random Instance { <span class="hljs-keyword">get</span> { <span class="hljs-keyword">return</span> threadLocal.Value; } }
}
</code></pre>

<p>You can use then use static random instance with code such as</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp">StaticRandom.Instance.Next(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>);
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Mark's solution can be quite expensive since it needs to synchronize everytime.</p>

<p>We can get around the need for synchronization by using the thread-specific storage pattern:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RandomNumber</span> : <span class="hljs-title">IRandomNumber</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> Random Global = <span class="hljs-keyword">new</span> Random();
    [<span class="hljs-meta">ThreadStatic</span>] <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Random _local;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Next</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> max</span>)</span>
    {
        <span class="hljs-keyword">var</span> localBuffer = _local;
        <span class="hljs-keyword">if</span> (localBuffer == <span class="hljs-literal">null</span>) 
        {
            <span class="hljs-built_in">int</span> seed;
            <span class="hljs-keyword">lock</span>(Global) seed = Global.Next();
            localBuffer = <span class="hljs-keyword">new</span> Random(seed);
            _local = localBuffer;
        }
        <span class="hljs-keyword">return</span> localBuffer.Next(max);
    }
}

</code></pre>

<p>Measure the two implementations and you should see a significant difference.</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>My answer from <a href="https://stackoverflow.com/a/15729385/661933">here</a>:</p>

<p>Just reiterating <strong>the right solution</strong>:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">namespace</span> <span class="hljs-title">mySpace</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Util</span>
    {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> rnd = <span class="hljs-keyword">new</span> Random();
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">GetRandom</span>()</span>
        {
            <span class="hljs-keyword">return</span> rnd.Next();
        }
    }
}
</code></pre>

<p>So you can call:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">var</span> i = Util.GetRandom();
</code></pre>

<p>all throughout. </p>

<p><strong>If you strictly need a true stateless static method</strong> to generate random numbers, you can rely on a <code>Guid</code>.</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Util</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">GetRandom</span>()</span>
    {
        <span class="hljs-keyword">return</span> Guid.NewGuid().GetHashCode();
    }
}
</code></pre>

<p><em>It's going to be a wee bit slower, but can be much more random</em> than <code>Random.Next</code>, at least from my experience.</p>

<p>But <strong>not</strong>:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">new</span> Random(Guid.NewGuid().GetHashCode()).Next();
</code></pre>

<p>The unnecessary object creation is going to make it slower especially under a loop.</p>

<p>And <strong>never</strong>:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">new</span> Random().Next();
</code></pre>

<p>Not only it's slower (inside a loop), its randomness is... well not really good according to me..</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I would rather use the following class to generate random numbers:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-built_in">byte</span>[] random;
System.Security.Cryptography.RNGCryptoServiceProvider prov = <span class="hljs-keyword">new</span> System.Security.Cryptography.RNGCryptoServiceProvider();
prov.GetBytes(random);
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>1) As Marc Gravell said, try to use ONE random-generator. It's always cool to add this to the constructor: System.Environment.TickCount.</p>

<p>2) One tip. Let's say you want to create 100 objects and suppose each of them should have its-own random-generator (handy if you calculate LOADS of random numbers in a very short period of time). If you would do this in a loop (generation of 100 objects), you could do this like that (to assure fully-randomness):</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-built_in">int</span> inMyRandSeed;

<span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">100</span>;i++)
{
   inMyRandSeed = System.Environment.TickCount + i;
   .
   .
   .
   myNewObject = <span class="hljs-keyword">new</span> MyNewObject(inMyRandSeed);  
   .
   .
   .
}

<span class="hljs-comment">// Usage: Random m_rndGen = new Random(inMyRandSeed);</span>
</code></pre>

<p>Cheers.</p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Every time you execute</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp">Random random = <span class="hljs-keyword">new</span> Random (<span class="hljs-number">15</span>);
</code></pre>

<p>It does not matter if you execute it millions of times, you will always use the same seed.</p>

<p>If you use </p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp">Random random = <span class="hljs-keyword">new</span> Random ();
</code></pre>

<p>You get different random number sequence, if a hacker guesses the seed and your algorithm is related to the security of your system - your algorithm is broken. I you execute mult. In this constructor the seed is specified by the system clock and if several instances are created in a very short period of time (milliseconds) it is possible that they may have the same seed.</p>

<p>If you need safe random numbers you must use the class</p>

<blockquote>
  <p>System.Security.Cryptography.RNGCryptoServiceProvider</p>
</blockquote>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Next</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> min, <span class="hljs-built_in">int</span> max</span>)</span>
{
    <span class="hljs-keyword">if</span>(min &gt;= max)
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentException(<span class="hljs-string">"Min value is greater or equals than Max value."</span>);
    }
    <span class="hljs-built_in">byte</span>[] intBytes = <span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[<span class="hljs-number">4</span>];
    <span class="hljs-keyword">using</span>(RNGCryptoServiceProvider rng = <span class="hljs-keyword">new</span> RNGCryptoServiceProvider())
    {
        rng.GetNonZeroBytes(intBytes);
    }
    <span class="hljs-keyword">return</span>  min +  Math.Abs(BitConverter.ToInt32(intBytes, <span class="hljs-number">0</span>)) % (max - min + <span class="hljs-number">1</span>);
}
</code></pre>

<p>Usage:</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-built_in">int</span> randomNumber = Next(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>);
</code></pre>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can use code like this:</p>
<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ThreadSafeRandom</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> Random _global = <span class="hljs-keyword">new</span> Random();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> ThreadLocal&lt;Random&gt; _local = <span class="hljs-keyword">new</span> ThreadLocal&lt;Random&gt;(() =&gt;
    {
        <span class="hljs-built_in">int</span> seed;
        <span class="hljs-keyword">lock</span> (_global)
        {
            seed = _global.Next();
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Random(seed);
    });

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Random Instance =&gt; _local.Value;
}
</code></pre>
<p>This code can be used as is or via the NuGet package <a href="https://www.nuget.org/packages/ThreadSafeRandomizer/" rel="nofollow noreferrer">ThreadSafeRandomizer</a>.</p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I use this:</p>
<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-built_in">int</span> randomNumber = <span class="hljs-built_in">int</span>.Parse(Guid.NewGuid().ToString().FirstOrDefault(Char.IsDigit).ToString().Replace(<span class="hljs-string">"\0"</span>, <span class="hljs-string">"0"</span>));
</code></pre>
<p>Performance: Generating 1 million random number on my PC: 711 ms.</p>
<p>If the Guid not contains any number (i don't know that's possible or not) then 0 will be used as the result.</p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are a lot of solutions, here one: if you want only number erase the letters and the method receives a random and the result length.</p>

<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">GenerateRandom</span>(<span class="hljs-params">Random oRandom, <span class="hljs-built_in">int</span> iLongitudPin</span>)</span>
{
    String sCharacters = <span class="hljs-string">"123456789ABCDEFGHIJKLMNPQRSTUVWXYZ123456789"</span>;
    <span class="hljs-built_in">int</span> iLength = sCharacters.Length;
    <span class="hljs-built_in">char</span> cCharacter;
    <span class="hljs-built_in">int</span> iLongitudNuevaCadena = iLongitudPin; 
    String sRandomResult = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; iLongitudNuevaCadena; i++)
    {
        cCharacter = sCharacters[oRandom.Next(iLength)];
        sRandomResult += cCharacter.ToString();
    }
    <span class="hljs-keyword">return</span> (sRandomResult);
}
</code></pre>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I solved the problem by using the Rnd() function:</p>
<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-function">Function <span class="hljs-title">RollD6</span>() As UInteger
        RollD6</span> = (Math.Floor(<span class="hljs-number">6</span> * Rnd())) + <span class="hljs-number">1</span>
        Return RollD6
End Function
</code></pre>
<p>When the form loads, I use the Randomize() method to make sure I don't always get the same sequence of random numbers from run to run.</p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In Visual Basic this works (probably can be translated to C#, if not a DLL reference can be a solution):</p>
<pre class="lang-cs s-code-block"><code class="hljs language-csharp"><span class="hljs-function">Private Function <span class="hljs-title">GetRandomInt</span>(<span class="hljs-params">ByVal Min As Integer, ByVal Max As Integer</span>) As Integer
     Static Generator As System.Random</span> = New System.Random()
     Return Generator.Next(Min, Max)
End Function
</code></pre>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 13</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Always get a positive random number.</p>
<pre class="lang-cs s-code-block"><code class="hljs language-csharp"> <span class="hljs-keyword">var</span> nexnumber = Guid.NewGuid().GetHashCode();
        <span class="hljs-keyword">if</span> (nexnumber &lt; <span class="hljs-number">0</span>)
        {
            nexnumber *= <span class="hljs-number">-1</span>;
        }
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-do-i-get-php-errors-to-display-1657384570095">How do I get PHP errors to display?</a><a href="/questions/why-is-the-command-bound-to-a-button-or-event-executed-when-declared-1657384872054">Why is the command bound to a Button or event executed when declared?</a><a href="/questions/how-can-i-avoid-java-code-in-jsp-files-using-jsp-2-1657384618866">How can I avoid Java code in JSP files, using JSP 2?</a><a href="/questions/secure-hash-and-salt-for-php-passwords-1657387363258">Secure hash and salt for PHP passwords</a><a href="/questions/how-do-i-select-rows-from-a-dataframe-based-on-column-values-1657384901065">How do I select rows from a DataFrame based on column values?</a><a href="/questions/how-can-i-vertically-align-elements-in-a-div-1657385504431">How can I vertically align elements in a div?</a><a href="/questions/how-to-print-without-a-newline-or-space-1657387814213">How to print without a newline or space</a><a href="/questions/how-can-i-access-and-process-nested-objects-arrays-or-json-1657384332823">How can I access and process nested objects, arrays, or JSON?</a><a href="/questions/how-do-i-list-all-files-of-a-directory-1657388340404">How do I list all files of a directory?</a><a href="/questions/why-can&#x27;t-i-store-a-value-and-a-reference-to-that-value-in-the-same-struct-1657387506828">Why can&#x27;t I store a value and a reference to that value in the same struct?</a><a href="/questions/how-to-join-(merge)-data-frames-(inner-outer-left-right)-1657384406445">How to join (merge) data frames (inner, outer, left, right)</a><a href="/questions/get-all-unique-values-in-a-javascript-array-(remove-duplicates)-1657387435296">Get all unique values in a JavaScript array (remove duplicates)</a><a href="/questions/how-do-i-properly-clean-up-excel-interop-objects-1657388329706">How do I properly clean up Excel interop objects?</a><a href="/questions/asynctask-android-example-1657388127898">AsyncTask Android example</a><a href="/questions/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors-1657384750732">What is a stack trace, and how can I use it to debug my application errors?</a><a href="/questions/how-can-i-make-bootstrap-columns-all-the-same-height-1657388551403">How can I make Bootstrap columns all the same height?</a><a href="/questions/why-is-settimeout(fn-0)-sometimes-useful-1657388379869">Why is setTimeout(fn, 0) sometimes useful?</a><a href="/questions/how-can-i-find-the-time-complexity-of-an-algorithm-1657388486001">How can I find the time complexity of an algorithm?</a><a href="/questions/what-are-metaclasses-in-python-1657387811608">What are metaclasses in Python?</a><a href="/questions/is-there-a-javascript-jquery-dom-change-listener-1657387961200">Is there a JavaScript / jQuery DOM change listener?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;Every time you do \u0026lt;code\u0026gt;new Random()\u0026lt;/code\u0026gt; it is initialized using the clock. This means that in a tight loop you get the same value lots of times. You should keep a single \u0026lt;a href=\u0026quot;https://docs.microsoft.com/en-us/dotnet/api/system.random?view=netframework-4.8\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Random\u0026lt;/a\u0026gt; instance and keep using \u0026lt;a href=\u0026quot;https://docs.microsoft.com/en-us/dotnet/api/system.random.next?view=netframework-4.8#System_Random_Next\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Next\u0026lt;/a\u0026gt; on the \u0026lt;strong\u0026gt;same\u0026lt;/strong\u0026gt; instance.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Function to get a random number \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;readonly\u0026lt;/span\u0026gt; Random random = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random(); \n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;readonly\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; syncLock = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;(); \n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;RandomNumber\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; min, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; max\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lock\u0026lt;/span\u0026gt;(syncLock) { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// synchronize\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; random.Next(min, max);\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;Edit (see comments): why do we need a \u0026lt;code\u0026gt;lock\u0026lt;/code\u0026gt; here?\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Basically, \u0026lt;code\u0026gt;Next\u0026lt;/code\u0026gt; is going to change the internal state of the \u0026lt;code\u0026gt;Random\u0026lt;/code\u0026gt; instance. If we do that at the same time from multiple threads, you \u0026lt;em\u0026gt;could\u0026lt;/em\u0026gt; argue \u0026quot;we\u0026apos;ve just made the outcome even more random\u0026quot;, but what we are \u0026lt;em\u0026gt;actually\u0026lt;/em\u0026gt; doing is potentially breaking the internal implementation, and we could also start getting the same numbers from different threads, which \u0026lt;em\u0026gt;might\u0026lt;/em\u0026gt; be a problem - and might not. The guarantee of what happens internally is the bigger issue, though; since \u0026lt;code\u0026gt;Random\u0026lt;/code\u0026gt; does \u0026lt;strong\u0026gt;not\u0026lt;/strong\u0026gt; make any guarantees of thread-safety. Thus there are two valid approaches:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Synchronize so that we don\u0026apos;t access it at the same time from different threads\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Use different \u0026lt;code\u0026gt;Random\u0026lt;/code\u0026gt; instances per thread\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Either can be fine; but mutexing a \u0026lt;strong\u0026gt;single\u0026lt;/strong\u0026gt; instance from multiple callers at the same time is just asking for trouble.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;lock\u0026lt;/code\u0026gt; achieves the first (and simpler) of these approaches; however, another approach might be: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;readonly\u0026lt;/span\u0026gt; ThreadLocal\u0026amp;lt;Random\u0026amp;gt; appRandom\n     = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; ThreadLocal\u0026amp;lt;Random\u0026amp;gt;(() =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random());\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;this is then per-thread, so you don\u0026apos;t need to synchronize. \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For ease of re-use throughout your application a static class may help.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;StaticRandom\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; seed;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; ThreadLocal\u0026amp;lt;Random\u0026amp;gt; threadLocal = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; ThreadLocal\u0026amp;lt;Random\u0026amp;gt;\n        (() =\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random(Interlocked.Increment(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;ref\u0026lt;/span\u0026gt; seed)));\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;StaticRandom\u0026lt;/span\u0026gt;()\u0026lt;/span\u0026gt;\n    {\n        seed = Environment.TickCount;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; Random Instance { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; threadLocal.Value; } }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can use then use static random instance with code such as\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;StaticRandom.Instance.Next(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Mark\u0026apos;s solution can be quite expensive since it needs to synchronize everytime.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;We can get around the need for synchronization by using the thread-specific storage pattern:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;RandomNumber\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;IRandomNumber\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;readonly\u0026lt;/span\u0026gt; Random Global = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random();\n    [\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;ThreadStatic\u0026lt;/span\u0026gt;] \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; Random _local;\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Next\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; max\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n    {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; localBuffer = _local;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (localBuffer == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) \n        {\n            \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; seed;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lock\u0026lt;/span\u0026gt;(Global) seed = Global.Next();\n            localBuffer = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random(seed);\n            _local = localBuffer;\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; localBuffer.Next(max);\n    }\n}\n\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Measure the two implementations and you should see a significant difference.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;My answer from \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/15729385/661933\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Just reiterating \u0026lt;strong\u0026gt;the right solution\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;namespace\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;mySpace\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Util\u0026lt;/span\u0026gt;\n    {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; rnd = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random();\n        \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;GetRandom\u0026lt;/span\u0026gt;()\u0026lt;/span\u0026gt;\n        {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; rnd.Next();\n        }\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So you can call:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = Util.GetRandom();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;all throughout. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;If you strictly need a true stateless static method\u0026lt;/strong\u0026gt; to generate random numbers, you can rely on a \u0026lt;code\u0026gt;Guid\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Util\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;GetRandom\u0026lt;/span\u0026gt;()\u0026lt;/span\u0026gt;\n    {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; Guid.NewGuid().GetHashCode();\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;It\u0026apos;s going to be a wee bit slower, but can be much more random\u0026lt;/em\u0026gt; than \u0026lt;code\u0026gt;Random.Next\u0026lt;/code\u0026gt;, at least from my experience.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;But \u0026lt;strong\u0026gt;not\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random(Guid.NewGuid().GetHashCode()).Next();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The unnecessary object creation is going to make it slower especially under a loop.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;And \u0026lt;strong\u0026gt;never\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random().Next();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Not only it\u0026apos;s slower (inside a loop), its randomness is... well not really good according to me..\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I would rather use the following class to generate random numbers:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] random;\nSystem.Security.Cryptography.RNGCryptoServiceProvider prov = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; System.Security.Cryptography.RNGCryptoServiceProvider();\nprov.GetBytes(random);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;1) As Marc Gravell said, try to use ONE random-generator. It\u0026apos;s always cool to add this to the constructor: System.Environment.TickCount.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;2) One tip. Let\u0026apos;s say you want to create 100 objects and suppose each of them should have its-own random-generator (handy if you calculate LOADS of random numbers in a very short period of time). If you would do this in a loop (generation of 100 objects), you could do this like that (to assure fully-randomness):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; inMyRandSeed;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;;i++)\n{\n   inMyRandSeed = System.Environment.TickCount + i;\n   .\n   .\n   .\n   myNewObject = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; MyNewObject(inMyRandSeed);  \n   .\n   .\n   .\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Usage: Random m_rndGen = new Random(inMyRandSeed);\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Cheers.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Every time you execute\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;Random random = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It does not matter if you execute it millions of times, you will always use the same seed.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you use \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;Random random = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random ();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You get different random number sequence, if a hacker guesses the seed and your algorithm is related to the security of your system - your algorithm is broken. I you execute mult. In this constructor the seed is specified by the system clock and if several instances are created in a very short period of time (milliseconds) it is possible that they may have the same seed.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you need safe random numbers you must use the class\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;System.Security.Cryptography.RNGCryptoServiceProvider\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Next\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; min, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; max\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(min \u0026amp;gt;= max)\n    {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; ArgumentException(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Min value is greater or equals than Max value.\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] intBytes = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;using\u0026lt;/span\u0026gt;(RNGCryptoServiceProvider rng = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; RNGCryptoServiceProvider())\n    {\n        rng.GetNonZeroBytes(intBytes);\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;  min +  Math.Abs(BitConverter.ToInt32(intBytes, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)) % (max - min + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Usage:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; randomNumber = Next(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can use code like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;ThreadSafeRandom\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;readonly\u0026lt;/span\u0026gt; Random _global = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random();\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;readonly\u0026lt;/span\u0026gt; ThreadLocal\u0026amp;lt;Random\u0026amp;gt; _local = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; ThreadLocal\u0026amp;lt;Random\u0026amp;gt;(() =\u0026amp;gt;\n    {\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; seed;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;lock\u0026lt;/span\u0026gt; (_global)\n        {\n            seed = _global.Next();\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random(seed);\n    });\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; Random Instance =\u0026amp;gt; _local.Value;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This code can be used as is or via the NuGet package \u0026lt;a href=\u0026quot;https://www.nuget.org/packages/ThreadSafeRandomizer/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;ThreadSafeRandomizer\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I use this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; randomNumber = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;.Parse(Guid.NewGuid().ToString().FirstOrDefault(Char.IsDigit).ToString().Replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\0\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;0\u0026quot;\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Performance: Generating 1 million random number on my PC: 711 ms.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If the Guid not contains any number (i don\u0026apos;t know that\u0026apos;s possible or not) then 0 will be used as the result.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are a lot of solutions, here one: if you want only number erase the letters and the method receives a random and the result length.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;GenerateRandom\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Random oRandom, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; iLongitudPin\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n    String sCharacters = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;123456789ABCDEFGHIJKLMNPQRSTUVWXYZ123456789\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; iLength = sCharacters.Length;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; cCharacter;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; iLongitudNuevaCadena = iLongitudPin; \n    String sRandomResult = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; iLongitudNuevaCadena; i++)\n    {\n        cCharacter = sCharacters[oRandom.Next(iLength)];\n        sRandomResult += cCharacter.ToString();\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (sRandomResult);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I solved the problem by using the Rnd() function:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;Function \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;RollD6\u0026lt;/span\u0026gt;() As UInteger\n        RollD6\u0026lt;/span\u0026gt; = (Math.Floor(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt; * Rnd())) + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\n        Return RollD6\nEnd Function\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;When the form loads, I use the Randomize() method to make sure I don\u0026apos;t always get the same sequence of random numbers from run to run.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In Visual Basic this works (probably can be translated to C#, if not a DLL reference can be a solution):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;Private Function \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;GetRandomInt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;ByVal Min As Integer, ByVal Max As Integer\u0026lt;/span\u0026gt;) As Integer\n     Static Generator As System.Random\u0026lt;/span\u0026gt; = New System.Random()\n     Return Generator.Next(Min, Max)\nEnd Function\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Always get a positive random number.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; nexnumber = Guid.NewGuid().GetHashCode();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (nexnumber \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n        {\n            nexnumber *= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-1\u0026lt;/span\u0026gt;;\n        }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":195,"title":"Random number generator only generating one random number","content":"\n                \n\u0026lt;p\u0026gt;I have the following function:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Function to get random number\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;RandomNumber\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; min, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; max\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n    Random random = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Random();\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; random.Next(min, max);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;How I call it:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-cs s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[] mac = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;];\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; x = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; x \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;; ++x)\n    mac[x] = (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;)(Misc.RandomNumber((\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;)\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0xFFFF\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;)\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0xFFFFFF\u0026lt;/span\u0026gt;) % \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;256\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If I step that loop with the debugger during runtime I get different values (which is what I want).\nHowever, if I put a breakpoint two lines below that code, all members of the \u0026lt;code\u0026gt;mac\u0026lt;/code\u0026gt; array have equal value.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Why does that happen?\u0026lt;/p\u0026gt;\n    ","slug":"random-number-generator-only-generating-one-random-number-1657385468315","postType":"QUESTION","createdAt":"2022-07-09T16:51:08.000Z","updatedAt":"2022-07-09T16:51:08.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"How do I get PHP errors to display?","slug":"how-do-i-get-php-errors-to-display-1657384570095"},{"title":"Why is the command bound to a Button or event executed when declared?","slug":"why-is-the-command-bound-to-a-button-or-event-executed-when-declared-1657384872054"},{"title":"How can I avoid Java code in JSP files, using JSP 2?","slug":"how-can-i-avoid-java-code-in-jsp-files-using-jsp-2-1657384618866"},{"title":"Secure hash and salt for PHP passwords","slug":"secure-hash-and-salt-for-php-passwords-1657387363258"},{"title":"How do I select rows from a DataFrame based on column values?","slug":"how-do-i-select-rows-from-a-dataframe-based-on-column-values-1657384901065"},{"title":"How can I vertically align elements in a div?","slug":"how-can-i-vertically-align-elements-in-a-div-1657385504431"},{"title":"How to print without a newline or space","slug":"how-to-print-without-a-newline-or-space-1657387814213"},{"title":"How can I access and process nested objects, arrays, or JSON?","slug":"how-can-i-access-and-process-nested-objects-arrays-or-json-1657384332823"},{"title":"How do I list all files of a directory?","slug":"how-do-i-list-all-files-of-a-directory-1657388340404"},{"title":"Why can't I store a value and a reference to that value in the same struct?","slug":"why-can't-i-store-a-value-and-a-reference-to-that-value-in-the-same-struct-1657387506828"},{"title":"How to join (merge) data frames (inner, outer, left, right)","slug":"how-to-join-(merge)-data-frames-(inner-outer-left-right)-1657384406445"},{"title":"Get all unique values in a JavaScript array (remove duplicates)","slug":"get-all-unique-values-in-a-javascript-array-(remove-duplicates)-1657387435296"},{"title":"How do I properly clean up Excel interop objects?","slug":"how-do-i-properly-clean-up-excel-interop-objects-1657388329706"},{"title":"AsyncTask Android example","slug":"asynctask-android-example-1657388127898"},{"title":"What is a stack trace, and how can I use it to debug my application errors?","slug":"what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors-1657384750732"},{"title":"How can I make Bootstrap columns all the same height?","slug":"how-can-i-make-bootstrap-columns-all-the-same-height-1657388551403"},{"title":"Why is setTimeout(fn, 0) sometimes useful?","slug":"why-is-settimeout(fn-0)-sometimes-useful-1657388379869"},{"title":"How can I find the time complexity of an algorithm?","slug":"how-can-i-find-the-time-complexity-of-an-algorithm-1657388486001"},{"title":"What are metaclasses in Python?","slug":"what-are-metaclasses-in-python-1657387811608"},{"title":"Is there a JavaScript / jQuery DOM change listener?","slug":"is-there-a-javascript-jquery-dom-change-listener-1657387961200"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"random-number-generator-only-generating-one-random-number-1657385468315"},"buildId":"XDXakEY6gSPdgAODPxtjg","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>