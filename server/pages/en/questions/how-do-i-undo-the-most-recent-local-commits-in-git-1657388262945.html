<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="undo,git-commit,solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/how-do-i-undo-the-most-recent-local-commits-in-git-1657388262945","name":"Questions"}}]}</script><title>How do I undo the most recent local commits in Git? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I accidentally committed the wrong files to Git, but didn&#x27;t push the commit to the server yet. How do I undo those commits from the local repository?
    "/><meta property="og:title" content="How do I undo the most recent local commits in Git? | Solution Checker"/><meta property="og:description" content="I accidentally committed the wrong files to Git, but didn&#x27;t push the commit to the server yet. How do I undo those commits from the local repository?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How do I undo the most recent local commits in Git?","text":"I accidentally committed the wrong files to Git, but didn&apos;t push the commit to the server yet. How do I undo those commits from the local repository?\n    ","answerCount":30,"upVoteCount":500,"suggestedAnswer":[{"text":"Undo a commit &amp; redo\n$ git commit -m &quot;Something terribly misguided&quot; # (0: Your Accident)\n$ git reset HEAD~                              # (1)\n[ edit files as necessary ]                    # (2)\n$ git add .                                    # (3)\n$ git commit -c ORIG_HEAD                      # (4)\n\n\ngit reset is the command responsible for the undo. It will undo your last commit while leaving your working tree (the state of your files on disk) untouched. You&apos;ll need to add them again before you can commit them again).\nMake corrections to working tree files.\ngit add anything that you want to include in your new commit.\nCommit the changes, reusing the old commit message. reset copied the old head to .git/ORIG_HEAD; commit with -c ORIG_HEAD will open an editor, which initially contains the log message from the old commit and allows you to edit it. If you do not need to edit the message, you could use the -C option.\n\nAlternatively, to edit the previous commit (or just its commit message), commit --amend will add changes within the current index to the previous commit.\nTo remove (not revert) a commit that has been pushed to the server, rewriting history with git push origin main --force[-with-lease] is necessary. It&apos;s almost always a bad idea to use --force; prefer --force-with-lease instead, and as noted in the git manual:\n\nYou should understand the implications of rewriting history if you [rewrite history] has already been published.\n\n\nFurther Reading\nYou can use git reflog to determine the SHA-1 for the commit to which you wish to revert. Once you have this value, use the sequence of commands as explained above.\n\nHEAD~ is the same as HEAD~1. The article What is the HEAD in git? is helpful if you want to uncommit multiple commits.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"Undoing a commit is a little scary if you don&apos;t know how it works.  But it&apos;s actually amazingly easy if you do understand. I&apos;ll show you the 4 different ways you can undo a commit.\nSay you have this, where C is your HEAD and (F) is the state of your files.\n   (F)\nA-B-C\n    \n  master\n\nOption 1: git reset --hard\nYou want to destroy commit C and also throw away any uncommitted changes.  You do this:\ngit reset --hard HEAD~1\n\nThe result is:\n (F)\nA-B\n  \nmaster\n\nNow B is the HEAD.  Because you used --hard, your files are reset to their state at commit B.\nOption 2: git reset\nMaybe commit C wasn&apos;t a disaster, but just a bit off.  You want to undo the commit but keep your changes for a bit of editing before you do a better commit.  Starting again from here, with C as your HEAD:\n   (F)\nA-B-C\n    \n  master\n\nDo this, leaving off the --hard:\ngit reset HEAD~1\n\nIn this case the result is:\n   (F)\nA-B-C\n  \nmaster\n\nIn both cases, HEAD is just a pointer to the latest commit.  When you do a git reset HEAD~1, you tell Git to move the HEAD pointer back one commit.  But (unless you use --hard) you leave your files as they were.  So now git status shows the changes you had checked into C.  You haven&apos;t lost a thing!\nOption 3: git reset --soft\nFor the lightest touch, you can even undo your commit but leave your files and your index:\ngit reset --soft HEAD~1\n\nThis not only leaves your files alone, it even leaves your index alone.  When you do git status, you&apos;ll see that the same files are in the index as before.  In fact, right after this command, you could do git commit and you&apos;d be redoing the same commit you just had.\nOption 4: you did git reset --hard and need to get that code back\nOne more thing: Suppose you destroy a commit as in the first example, but then discover you needed it after all?  Tough luck, right?\nNope, there&apos;s still a way to get it back.  Type this\ngit reflog\n\nand you&apos;ll see a list of (partial) commit shas (that is, hashes) that you&apos;ve moved around in.  Find the commit you destroyed, and do this:\ngit checkout -b someNewBranchName shaYouDestroyed\n\nYou&apos;ve now resurrected that commit.  Commits don&apos;t actually get destroyed in Git for some 90 days, so you can usually go back and rescue one you didn&apos;t mean to get rid of.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"There are two ways to &quot;undo&quot; your last commit, depending on whether or not you have already made your commit public (pushed to your remote repository):\nHow to undo a local commit\nLet&apos;s say I committed locally, but now I want to remove that commit.\ngit log\n    commit 101: bad commit    # Latest commit. This would be called &apos;HEAD&apos;.\n    commit 100: good commit   # Second to last commit. This is the one we want.\n\nTo restore everything back to the way it was prior to the last commit, we need to reset to the commit before HEAD:\ngit reset --soft HEAD^     # Use --soft if you want to keep your changes\ngit reset --hard HEAD^     # Use --hard if you don&apos;t care about keeping the changes you made\n\nNow git log will show that our last commit has been removed.\nHow to undo a public commit\nIf you have already made your commits public, you will want to create a new commit which will &quot;revert&quot; the changes you made in your previous commit (current HEAD).\ngit revert HEAD\n\nYour changes will now be reverted and ready for you to commit:\ngit commit -m &apos;restoring the file I removed by accident&apos;\ngit log\n    commit 102: restoring the file I removed by accident\n    commit 101: removing a file we don&apos;t need\n    commit 100: adding a file that we need\n\nFor more information, check out Git Basics - Undoing Things.\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Add/remove files to get things the way you want:\n\ngit rm classdir\ngit add sourcedir\n\n\nThen amend the commit:\n\ngit commit --amend\n\n\nThe previous, erroneous commit will be edited to reflect the new index state - in other words, it&apos;ll be like you never made the mistake in the first place.\n\nNote that you should only do this if you haven&apos;t pushed yet. If you have pushed, then you&apos;ll just have to commit a fix normally.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"git rm yourfiles/*.class\ngit commit -a -m &quot;deleted all class files in folder &apos;yourfiles&apos;&quot;\n\n\nor\n\ngit reset --hard HEAD~1\n\n\nWarning: The above command will permanently remove the modifications to the .java files (and any other files) that you wanted to commit.\n\nThe hard reset to HEAD-1 will set your working copy to the state of the commit before your wrong commit.\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"To change the last commit\nReplace the files in the index:\ngit rm --cached *.class\ngit add *.java\n\nThen, if it&apos;s a private branch, amend the commit:\ngit commit --amend\n\nOr, if it&apos;s a shared branch, make a new commit:\ngit commit -m &apos;Replace .class files with .java files&apos;\n\n\n(To change a previous commit, use the awesome interactive rebase.)\n\nProTip: Add *.class to a gitignore to stop this happening again.\n\nTo revert a commit\nAmending a commit is the ideal solution if you need to change the last commit, but a more general solution is reset.\nYou can reset Git to any commit with:\ngit reset @~N\n\nWhere N is the number of commits before HEAD, and @~ resets to the previous commit.\nInstead of amending the commit, you could use:\ngit reset @~\ngit add *.java\ngit commit -m &quot;Add .java files&quot;\n\nCheck out git help reset, specifically the sections on --soft --mixed and --hard, for a better understanding of what this does.\nReflog\nIf you mess up, you can always use the reflog to find dropped commits:\n$ git reset @~\n$ git reflog\nc4f708b HEAD@{0}: reset: moving to @~\n2c52489 HEAD@{1}: commit: added some .class files\n$ git reset 2c52489\n... and you&apos;re back where you started\n\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"Use git revert &lt;commit-id&gt;.\n\nTo get the commit ID, just use git log.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"If you are planning to undo a local commit entirely, whatever you change you did on the commit, and if you don&apos;t worry anything about that, just do the following command.\ngit reset --hard HEAD^1\n\n(This command will ignore your entire commit and your changes will be lost completely from your local working tree). If you want to undo your commit, but you want your changes in the staging area (before commit just like after git add) then do the following command.\ngit reset --soft HEAD^1\n\nNow your committed files come into the staging area. Suppose if you want to upstage the files, because you need to edit some wrong content, then do the following command\ngit reset HEAD\n\nNow committed files to come from the staged area into the unstaged area. Now files are ready to edit, so whatever you change, you want to go edit and added it and make a fresh/new commit.\nMore (link broken) (Archived version)\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"If you have Git Extras installed, you can run git undo to undo the latest commit. git undo 3 will undo the last three commits.\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"I wanted to undo the latest five commits in our shared repository. I looked up the revision id that I wanted to rollback to. Then I typed in the following.\n\nprompt&gt; git reset --hard 5a7404742c85\nHEAD is now at 5a74047 Added one more page to catalogue\nprompt&gt; git push origin master --force\nTotal 0 (delta 0), reused 0 (delta 0)\nremote: bb/acl: neoneye is allowed. accepted payload.\nTo git@bitbucket.org:thecompany/prometheus.git\n + 09a6480...5a74047 master -&gt; master (forced update)\nprompt&gt;\n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"I prefer to use git rebase -i for this job, because a nice list pops up where I can choose the commits to get rid of. It might not be as direct as some other answers here, but it just feels right.\n\nChoose how many commits you want to list, then invoke like this (to enlist last three)\n\ngit rebase -i HEAD~3\n\n\nSample list\n\npick aa28ba7 Sanity check for RtmpSrv port\npick c26c541 RtmpSrv version option\npick 58d6909 Better URL decoding support\n\n\nThen Git will remove commits for any line that you remove.\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"How to fix the previous local commit\n\nUse git-gui (or similar) to perform a git commit --amend. From the GUI you can add or remove individual files from the commit. You can also modify the commit message. \n\nHow to undo the previous local commit\n\nJust reset your branch to the previous location (for example, using gitk or git rebase). Then reapply your changes from a saved copy. After garbage collection in your local repository, it will be like the unwanted commit never happened. To do all of that in a single command, use git reset HEAD~1.\n\nWord of warning: Careless use of git reset is a good way to get your working copy into a confusing state. I recommend that Git novices avoid this if they can.\n\nHow to undo a public commit\n\nPerform a reverse cherry pick (git-revert) to undo the changes.\n\nIf you haven&apos;t yet pulled other changes onto your branch, you can simply do...\n\ngit revert --no-edit HEAD\n\n\nThen push your updated branch to the shared repository.\n\nThe commit history will show both commits, separately.\n\n\n\nAdvanced: Correction of the private branch in public repository\n\nThis can be dangerous -- be sure you have a local copy of the branch to repush.\n\nAlso note: You don&apos;t want to do this if someone else may be working on the branch.\n\ngit push --delete (branch_name) ## remove public version of branch\n\n\nClean up your branch locally then repush...\n\ngit push origin (branch_name)\n\n\nIn the normal case, you probably needn&apos;t worry about your private-branch commit history being pristine.  Just push a followup commit (see &apos;How to undo a public commit&apos; above), and later, do a squash-merge to hide the history.\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"If you want to permanently undo it and you have cloned some repository.\nThe commit id can be seen by:\ngit log \n\nThen you can do like:\ngit reset --hard &lt;commit_id&gt;\n\ngit push origin &lt;branch_name&gt; -f\n\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"If you have committed junk but not pushed,\n\ngit reset --soft HEAD~1\n\n\n\n  HEAD~1 is a shorthand for the commit before head. Alternatively you can refer to the SHA-1 of the hash if you want to reset to. --soft option will delete the commit but it will leave all your changed files &quot;Changes to be committed&quot;, as git status would put it.\n  \n  If you want to get rid of any changes to tracked files in the working tree since the commit before head use &quot;--hard&quot; instead.\n\n\nOR\n\n\n  If you already pushed and someone pulled which is usually my case, you can&apos;t use git reset. You can however do a git revert,\n\n\ngit revert HEAD\n\n\n\n  This will create a new commit that reverses everything introduced by the accidental commit.\n\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"On SourceTree (GUI for GitHub), you may right-click the commit and do a &apos;Reverse Commit&apos;. This should undo your changes.\n\nOn the terminal:\n\nYou may alternatively use:\n\ngit revert\n\n\nOr:\n\ngit reset --soft HEAD^ # Use --soft if you want to keep your changes.\ngit reset --hard HEAD^ # Use --hard if you don&apos;t care about keeping your changes.\n\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"A single command:\n\ngit reset --soft &apos;HEAD^&apos; \n\n\nIt works great to undo the last local commit!\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"Just reset it doing the command below using git:\n\ngit reset --soft HEAD~1\n\n\nExplain: what git reset does, it&apos;s basically reset to any commit you&apos;d like to go back to, then if you combine it with --soft key, it will go back, but keep the  changes in your file(s), so you get back to the stage which the file was just added, HEAD is the head of the branch and if you combine with ~1 (in this case you also use HEAD^), it will go back only one commit which what you want...\n\nI create the steps in the image below in more details for you, including all steps that may happens in real situations and committing the code:\n\n\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"&quot;Reset the working tree to the last commit&quot;\ngit reset --hard HEAD^ \n\n&quot;Clean unknown files from the working tree&quot;\ngit clean    \n\nsee - Git Quick Reference\nNOTE: This command will delete your previous commit, so use with caution! git reset --hard is safer.\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"How to undo the last Git commit?\n\nTo restore everything back to the way it was prior to the last commit, we need to reset to the commit before HEAD.\n\n\nIf you don&apos;t want to keep your changes that you made:\n\ngit reset --hard HEAD^\n\nIf you want to keep your changes:\n\ngit reset --soft HEAD^\n\n\n\nNow check your git log. It will show that our last commit has been removed.\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"Use reflog to find a correct state\n\ngit reflog\n\n\n\nREFLOG BEFORE RESET\n\nSelect the correct reflog (f3cb6e2 in my case) and type \n\ngit reset --hard f3cb6e2\n\n\nAfter that the repo HEAD will be reset to that HEADid\n\nLOG AFTER RESET\n\nFinally the reflog looks like the picture below\n\n\nREFLOG FINAL\n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0},{"text":"First run: \n\ngit reflog\n\n\nIt will show you all the possible actions you have performed on your repository, for example, commit, merge, pull, etc.\n\nThen do:\n\ngit reset --hard ActionIdFromRefLog\n\n    ","url":"/questions/[slug]#solution21","@type":"Answer","upvoteCount":0},{"text":"Undo last commit:\n\ngit reset --soft HEAD^ or git reset --soft HEAD~\n\nThis will undo the last commit.\n\nHere --soft means reset into staging.\n\nHEAD~ or HEAD^ means to move to commit before HEAD.\n\n\n\nReplace last commit to new commit:\n\ngit commit --amend -m &quot;message&quot;\n\n\nIt will replace the last commit with the new commit.\n    ","url":"/questions/[slug]#solution22","@type":"Answer","upvoteCount":0},{"text":"Another way:\n\nCheckout the branch you want to revert, then reset your local working copy back to the commit that you want to be the latest one on the remote server (everything after it will go bye-bye). To do this, in SourceTree I right-clicked on the and selected &quot;Reset BRANCHNAME to this commit&quot;.\n\nThen navigate to your repository&apos;s local directory and run this command:\n\ngit -c diff.mnemonicprefix=false -c core.quotepath=false push -v -f --tags REPOSITORY_NAME BRANCHNAME:BRANCHNAME\n\n\nThis will erase all commits after the current one in your local repository but only for that one branch.\n    ","url":"/questions/[slug]#solution23","@type":"Answer","upvoteCount":0},{"text":"Type git log and find the last commit hash code and then enter:\n\ngit reset &lt;the previous co&gt;\n\n    ","url":"/questions/[slug]#solution24","@type":"Answer","upvoteCount":0},{"text":"In my case I accidentally committed some files I did not want to. So I did the following and it worked:\n\ngit reset --soft HEAD^\ngit rm --cached [files you do not need]\ngit add [files you need]\ngit commit -c ORIG_HEAD\n\n\nVerify the results with gitk or git log --stat\n    ","url":"/questions/[slug]#solution25","@type":"Answer","upvoteCount":0},{"text":"Simple, run this in your command line:\n\ngit reset --soft HEAD~ \n\n    ","url":"/questions/[slug]#solution26","@type":"Answer","upvoteCount":0},{"text":"There are two main scenarios\n\nYou haven&apos;t pushed the commit yet\n\nIf the problem was extra files you commited (and you don&apos;t want those on repository), you can remove them using git rm and then commiting with --amend\n\ngit rm &lt;pathToFile&gt;\n\n\nYou can also remove entire directories with -r, or even combine with other Bash commands\n\ngit rm -r &lt;pathToDirectory&gt;\ngit rm $(find -name &apos;*.class&apos;)\n\n\nAfter removing the files, you can commit, with --amend option\n\ngit commit --amend -C HEAD # the -C option is to use the same commit message\n\n\nThis will rewrite your recent local commit removing the extra files, so, these files will never be sent on push and also will be removed from your local .git repository by GC.\n\nYou already pushed the commit\n\nYou can apply the same solution of the other scenario and then doing git push with the -f option, but it is not recommended since it overwrites the remote history with a divergent change (it can mess your repository).\n\nInstead, you have to do the commit without --amend (remember this about -amend`: That option rewrites the history on the last commit).\n    ","url":"/questions/[slug]#solution27","@type":"Answer","upvoteCount":0},{"text":"For a local commit\n\ngit reset --soft HEAD~1\n\n\nor if you do not remember exactly in which commit it is, you might use\n\ngit rm --cached &lt;file&gt;\n\n\nFor a pushed commit\n\nThe proper way of removing files from the repository history is using git filter-branch. That is,\n\ngit filter-branch --index-filter &apos;git rm --cached &lt;file&gt;&apos; HEAD\n\n\nBut I recomnend you use this command with care. Read more at git-filter-branch(1) Manual Page.\n    ","url":"/questions/[slug]#solution28","@type":"Answer","upvoteCount":0},{"text":"To reset to the previous revision, permanently deleting all uncommitted changes: \n\ngit reset --hard HEAD~1\n\n    ","url":"/questions/[slug]#solution29","@type":"Answer","upvoteCount":0},{"text":"There are many ways to do it:\n\nGit command to undo the last commit/ previous commits:\n\nWarning: Do Not use --hard if you do not know what you are doing.\n--hard is too dangerous, and it might delete your files.\n\nBasic command to revert the commit in Git is:\n\n$ git reset --hard &lt;COMMIT -ID&gt;\n\n\nor\n\n$ git reset --hard HEAD~&lt;n&gt;\n\n\nCOMMIT-ID: ID for the commit\n\nn:  is number of last commits you want to revert\n\nYou can get the commit id as shown below:\n\n$ **git log --oneline**\n\nd81d3f1 function to subtract two numbers\n\nbe20eb8 function to add two numbers\n\nbedgfgg function to mulitply two numbers\n\n\nwhere d81d3f1 and be20eb8 are commit id.\n\nNow let&apos;s see some cases:\n\nSuppose you want to revert the last commit &apos;d81d3f1&apos;.  Here are two options:\n\n$ git reset --hard d81d3f1\n\n\nor\n\n$ git reset --hard HEAD~1\n\n\nSuppose you want to revert the commit &apos;be20eb8&apos;:\n\n$ git reset --hard be20eb8\n\n\nFor more detailed information you can refer and try out some other commands too for resetting head to a specified state:\n\n$ git reset --help\n\n    ","url":"/questions/[slug]#solution30","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-43d1c35cd6eb9b8f.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-50e201fdaa1e0fd1.js" defer=""></script><script src="/_next/static/00bsHgHZki2FteshOatnd/_buildManifest.js" defer=""></script><script src="/_next/static/00bsHgHZki2FteshOatnd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-do-i-undo-the-most-recent-local-commits-in-git-1657388262945#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-do-i-undo-the-most-recent-local-commits-in-git-1657388262945"><h1>How do I undo the most recent local commits in Git?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/git-commit">git-commit</a></div></div><div class="question-content mt-5">
                
<p>I accidentally committed the wrong files to <a href="https://en.wikipedia.org/wiki/Git" rel="noreferrer">Git</a>, but didn't push the commit to the server yet. How do I undo those commits from the <em>local</em> repository?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li><li class="pagination-solution-item"><span data-id="#solution21" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">21</span></li><li class="pagination-solution-item"><span data-id="#solution22" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">22</span></li><li class="pagination-solution-item"><span data-id="#solution23" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">23</span></li><li class="pagination-solution-item"><span data-id="#solution24" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">24</span></li><li class="pagination-solution-item"><span data-id="#solution25" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">25</span></li><li class="pagination-solution-item"><span data-id="#solution26" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">26</span></li><li class="pagination-solution-item"><span data-id="#solution27" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">27</span></li><li class="pagination-solution-item"><span data-id="#solution28" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">28</span></li><li class="pagination-solution-item"><span data-id="#solution29" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">29</span></li><li class="pagination-solution-item"><span data-id="#solution30" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">30</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Undo a commit &amp; redo</h1>
<pre class="lang-sh s-code-block"><code class="hljs language-bash">$ git commit -m <span class="hljs-string">"Something terribly misguided"</span> <span class="hljs-comment"># (0: Your Accident)</span>
$ git reset HEAD~                              <span class="hljs-comment"># (1)</span>
[ edit files as necessary ]                    <span class="hljs-comment"># (2)</span>
$ git add .                                    <span class="hljs-comment"># (3)</span>
$ git commit -c ORIG_HEAD                      <span class="hljs-comment"># (4)</span>
</code></pre>
<ol>
<li><a href="https://git-scm.com/docs/git-reset" rel="noreferrer"><code>git reset</code></a> is the command responsible for the <strong>undo</strong>. It will undo your last commit while <strong>leaving your working tree (the state of your files on disk) untouched.</strong> You'll need to add them again before you can commit them again).</li>
<li>Make corrections to <a href="https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified#_the_working_directory" rel="noreferrer">working tree</a> files.</li>
<li><a href="https://git-scm.com/docs/git-add" rel="noreferrer"><code>git add</code></a> anything that you want to include in your new commit.</li>
<li>Commit the changes, reusing the old commit message. <code>reset</code> copied the old head to <code>.git/ORIG_HEAD</code>; <a href="https://git-scm.com/docs/git-commit#Documentation/git-commit.txt--cltcommitgt" rel="noreferrer"><code>commit</code> with <code>-c ORIG_HEAD</code></a> will open an editor, which initially contains the log message from the old commit and allows you to edit it. If you do not need to edit the message, you could use the <a href="https://git-scm.com/docs/git-commit#Documentation/git-commit.txt--Cltcommitgt" rel="noreferrer"><code>-C</code></a> option.</li>
</ol>
<p><strong>Alternatively, to edit the previous commit (or just its commit message)</strong>, <a href="https://stackoverflow.com/q/179123/1146608"><code>commit --amend</code></a> will add changes within the current index to the previous commit.</p>
<p><strong>To remove (not revert) a commit that has been pushed to the server</strong>, rewriting history with <code>git push origin main --force[-with-lease]</code> is necessary. <a href="https://stackoverflow.com/q/52823692/4096791">It's <em>almost always</em> a bad idea to use <code>--force</code>; prefer <code>--force-with-lease</code></a> instead, and as noted in <a href="https://git-scm.com/docs" rel="noreferrer">the git manual</a>:</p>
<blockquote>
<p>You should understand the implications of rewriting history if you [rewrite history] has already been published.</p>
</blockquote>
<hr>
<h2>Further Reading</h2>
<p><a href="https://stackoverflow.com/questions/34519665/how-to-move-head-back-to-a-previous-location-detached-head/34519716#34519716">You can use <code>git reflog</code> to determine the SHA-1</a> for the commit to which you wish to revert. Once you have this value, use the sequence of commands as explained above.</p>
<hr>
<p><code>HEAD~</code> is the same as <code>HEAD~1</code>. The article <a href="https://stackoverflow.com/a/46350644/5175709">What is the HEAD in git?</a> is helpful if you want to uncommit multiple commits.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Undoing a commit is a little scary if you don't know how it works.  But it's actually amazingly easy if you do understand. I'll show you the 4 different ways you can undo a commit.</p>
<p>Say you have this, where C is your HEAD and (F) is the state of your files.</p>
<pre><code>   (F)
A-B-C
    
  master
</code></pre>
<h3>Option 1: <code>git reset --hard</code></h3>
<p>You want to <strong>destroy commit C and also throw away any uncommitted changes</strong>.  You do this:</p>
<pre><code>git reset --hard HEAD~1
</code></pre>
<p>The result is:</p>
<pre><code> (F)
A-B
  
master
</code></pre>
<p>Now B is the HEAD.  Because you used <code>--hard</code>, your files are reset to their state at commit B.</p>
<h3>Option 2: <code>git reset</code></h3>
<p>Maybe commit C wasn't a disaster, but just a bit off.  You want to <strong>undo the commit but keep your changes</strong> for a bit of editing before you do a better commit.  Starting again from here, with C as your HEAD:</p>
<pre><code>   (F)
A-B-C
    
  master
</code></pre>
<p>Do this, leaving off the <code>--hard</code>:</p>
<pre><code>git reset HEAD~1
</code></pre>
<p>In this case the result is:</p>
<pre><code>   (F)
A-B-C
  
master
</code></pre>
<p>In both cases, HEAD is just a pointer to the latest commit.  When you do a <code>git reset HEAD~1</code>, you tell Git to move the HEAD pointer back one commit.  But (unless you use <code>--hard</code>) you leave your files as they were.  So now <code>git status</code> shows the changes you had checked into C.  You haven't lost a thing!</p>
<h3>Option 3: <code>git reset --soft</code></h3>
<p>For the lightest touch, you can even <strong>undo your commit but leave your files and your <a href="https://git.wiki.kernel.org/index.php/WhatIsTheIndex" rel="noreferrer">index</a></strong>:</p>
<pre><code>git reset --soft HEAD~1
</code></pre>
<p>This not only leaves your files alone, it even leaves your <em>index</em> alone.  When you do <code>git status</code>, you'll see that the same files are in the index as before.  In fact, right after this command, you could do <code>git commit</code> and you'd be redoing the same commit you just had.</p>
<h3>Option 4: you did <code>git reset --hard</code> and need to get that code back</h3>
<p>One more thing: Suppose you <strong>destroy a commit</strong> as in the first example, <strong>but then discover you needed it after all</strong>?  Tough luck, right?</p>
<p>Nope, there's <em>still</em> a way to get it back.  Type this</p>
<pre><code>git reflog
</code></pre>
<p>and you'll see a list of (partial) commit <a href="https://en.wikipedia.org/wiki/SHA-1#Data_integrity" rel="noreferrer">shas</a> (that is, hashes) that you've moved around in.  Find the commit you destroyed, and do this:</p>
<pre><code>git checkout -b someNewBranchName shaYouDestroyed
</code></pre>
<p>You've now resurrected that commit.  Commits don't actually get destroyed in Git for some 90 days, so you can usually go back and rescue one you didn't mean to get rid of.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are two ways to "undo" your last commit, depending on whether or not you have already made your commit public (pushed to your remote repository):</p>
<h2>How to undo a local commit</h2>
<p>Let's say I committed locally, but now I want to remove that commit.</p>
<pre><code>git log
    commit 101: bad commit    # Latest commit. This would be called 'HEAD'.
    commit 100: good commit   # Second to last commit. This is the one we want.
</code></pre>
<p>To restore everything back to the way it was prior to the last commit, we need to <code>reset</code> to the commit before <code>HEAD</code>:</p>
<pre><code>git reset --soft HEAD^     # Use --soft if you want to keep your changes
git reset --hard HEAD^     # Use --hard if you don't care about keeping the changes you made
</code></pre>
<p>Now <code>git log</code> will show that our last commit has been removed.</p>
<h2>How to undo a public commit</h2>
<p>If you have already made your commits public, you will want to create a new commit which will "revert" the changes you made in your previous commit (current HEAD).</p>
<pre><code>git revert HEAD
</code></pre>
<p>Your changes will now be reverted and ready for you to commit:</p>
<pre><code>git commit -m 'restoring the file I removed by accident'
git log
    commit 102: restoring the file I removed by accident
    commit 101: removing a file we don't need
    commit 100: adding a file that we need
</code></pre>
<p>For more information, check out <em><a href="https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things" rel="noreferrer">Git Basics - Undoing Things</a></em>.</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Add/remove files to get things the way you want:</p>

<pre><code>git rm classdir
git add sourcedir
</code></pre>

<p>Then amend the commit:</p>

<pre><code>git commit --amend
</code></pre>

<p>The previous, erroneous commit will be edited to reflect the new index state - in other words, it'll be like you never made the mistake in the first place.</p>

<p>Note that you should only do this if you haven't pushed yet. If you have pushed, then you'll just have to commit a fix normally.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="lang-bash s-code-block"><code class="hljs language-bash">git <span class="hljs-built_in">rm</span> yourfiles/*.class
git commit -a -m <span class="hljs-string">"deleted all class files in folder 'yourfiles'"</span>
</code></pre>

<p>or</p>

<pre><code>git reset --hard HEAD~1
</code></pre>

<p><strong>Warning: The above command will permanently remove the modifications to the <code>.java</code> files (and any other files) that you wanted to commit.</strong></p>

<p>The <code>hard reset</code> to <code>HEAD-1</code> will set your working copy to the state of the commit before your wrong commit.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2 id="to-change-the-last-commit-ayg9">To change the last commit</h2>
<p>Replace the files in the index:</p>
<pre><code>git rm --cached *.class
git add *.java
</code></pre>
<p>Then, if it's a private branch, <strong>amend</strong> the commit:</p>
<pre><code>git commit --amend
</code></pre>
<p>Or, if it's a shared branch, make a new commit:</p>
<pre><code>git commit -m 'Replace .class files with .java files'
</code></pre>
<br>
<p><em>(<strong>To change a previous commit</strong>, use the awesome <a href="https://stackoverflow.com/a/28421811/405550">interactive rebase</a>.)</em></p>
<hr>
<p>ProTip: Add <code>*.class</code> to a <a href="https://help.github.com/articles/ignoring-files" rel="noreferrer">gitignore</a> to stop this happening again.</p>
<hr>
<h2 id="to-revert-a-commit-rotb">To revert a commit</h2>
<p>Amending a commit is the ideal solution if you need to change the last commit, but a more general solution is <code>reset</code>.</p>
<p>You can reset Git to any commit with:</p>
<pre><code>git reset @~N
</code></pre>
<p>Where <code>N</code> is the number of commits before <code>HEAD</code>, and <code>@~</code> resets to the previous commit.</p>
<p>Instead of amending the commit, you could use:</p>
<pre><code>git reset @~
git add *.java
git commit -m "Add .java files"
</code></pre>
<p>Check out <code>git help reset</code>, specifically the sections on <code>--soft</code> <code>--mixed</code> and <code>--hard</code>, for a better understanding of what this does.</p>
<h2 id="reflog-hdrm">Reflog</h2>
<p>If you mess up, you can always use the reflog to find dropped commits:</p>
<pre><code>$ git reset @~
$ git reflog
c4f708b HEAD@{0}: reset: moving to @~
2c52489 HEAD@{1}: commit: added some .class files
$ git reset 2c52489
... and you're back where you started
</code></pre>
<br>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Use <code>git revert &lt;commit-id&gt;</code>.</p>

<p>To get the commit ID, just use <code>git log</code>.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are planning to undo a local commit entirely, whatever you change you did on the commit, and if you don't worry anything about that, just do the following command.</p>
<pre><code>git reset --hard HEAD^1
</code></pre>
<p>(This command will ignore your entire commit and your changes will be lost completely from your local working tree). If you want to undo your commit, but you want your changes in the staging area (before commit just like after <code>git add</code>) then do the following command.</p>
<pre><code>git reset --soft HEAD^1
</code></pre>
<p>Now your committed files come into the staging area. Suppose if you want to upstage the files, because you need to edit some wrong content, then do the following command</p>
<pre><code>git reset HEAD
</code></pre>
<p>Now committed files to come from the staged area into the unstaged area. Now files are ready to edit, so whatever you change, you want to go edit and added it and make a fresh/new commit.</p>
<p><a href="http://madhan-tech-updates.blogspot.in/2013/01/how-to-undo-your-local-git-commit.html" rel="noreferrer">More (link broken)</a> (<a href="https://web.archive.org/web/20170410191943/http://madhan-tech-updates.blogspot.in/2013/01/how-to-undo-your-local-git-commit.html" rel="noreferrer">Archived version</a>)</p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 9</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you have <a href="https://github.com/visionmedia/git-extras" rel="noreferrer">Git Extras</a> installed, you can run <code>git undo</code> to undo the latest commit. <code>git undo 3</code> will undo the last three commits.</p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 10</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I wanted to undo the latest five commits in our shared repository. I looked up the revision id that I wanted to rollback to. Then I typed in the following.</p>

<pre><code>prompt&gt; git reset --hard 5a7404742c85
HEAD is now at 5a74047 Added one more page to catalogue
prompt&gt; git push origin master --force
Total 0 (delta 0), reused 0 (delta 0)
remote: bb/acl: neoneye is allowed. accepted payload.
To git@bitbucket.org:thecompany/prometheus.git
 + 09a6480...5a74047 master -&gt; master (forced update)
prompt&gt;
</code></pre>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 11</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I prefer to use <code>git rebase -i</code> for this job, because a nice list pops up where I can choose the commits to get rid of. It might not be as direct as some other answers here, but it just <em>feels right</em>.</p>

<p>Choose how many commits you want to list, then invoke like this (to enlist last three)</p>

<pre><code>git rebase -i HEAD~3
</code></pre>

<p>Sample list</p>

<pre><code>pick aa28ba7 Sanity check for RtmpSrv port
pick c26c541 RtmpSrv version option
pick 58d6909 Better URL decoding support
</code></pre>

<p>Then Git will remove commits for any line that you remove.</p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 12</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>How to fix the previous local commit</h2>

<p>Use git-gui (or similar) to perform a <code>git commit --amend</code>. From the GUI you can add or remove individual files from the commit. You can also modify the commit message. </p>

<h2>How to undo the previous local commit</h2>

<p>Just reset your branch to the previous location (for example, using <code>gitk</code> or <code>git rebase</code>). Then reapply your changes from a saved copy. After garbage collection in your local repository, it will be like the unwanted commit never happened. To do all of that in a single command, use <code>git reset HEAD~1</code>.</p>

<p><strong>Word of warning</strong>: <em>Careless use of <code>git reset</code> is a good way to get your working copy into a confusing state. I recommend that Git novices avoid this if they can.</em></p>

<h2>How to undo a public commit</h2>

<p>Perform a <a href="https://stackoverflow.com/a/1624724/86967">reverse cherry pick</a> (<a href="http://git-scm.com/docs/git-revert.html" rel="noreferrer">git-revert</a>) to undo the changes.</p>

<p>If you haven't yet pulled other changes onto your branch, you can simply do...</p>

<pre><code>git revert --no-edit HEAD
</code></pre>

<p>Then push your updated branch to the shared repository.</p>

<p><em>The commit history will show both commits, separately</em>.</p>

<hr>

<h2>Advanced: Correction of the <em>private</em> branch in public repository</h2>

<h3><em>This can be dangerous -- be sure you have a local copy of the branch to repush.</em></h3>

<p><em>Also note: You don't want to do this if someone else may be working on the branch.</em></p>

<pre><code>git push --delete (branch_name) ## remove public version of branch
</code></pre>

<p>Clean up your branch locally then repush...</p>

<pre><code>git push origin (branch_name)
</code></pre>

<p><em>In the normal case, you probably needn't worry about your private-branch commit history being pristine.  Just push a followup commit (see 'How to undo a public commit' above), and later, do a <a href="https://stackoverflow.com/a/22417539/86967">squash-merge</a> to hide the history.</em></p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 13</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you want to permanently undo it and you have cloned some repository.</p>
<p>The commit id can be seen by:</p>
<pre><code>git log 
</code></pre>
<p>Then you can do like:</p>
<pre><code>git reset --hard &lt;commit_id&gt;

git push origin &lt;branch_name&gt; -f
</code></pre>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 14</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you have committed junk but not pushed,</p>

<pre><code>git reset --soft HEAD~1
</code></pre>

<blockquote>
  <p><strong>HEAD~1</strong> is a shorthand for the commit before head. Alternatively you can refer to the <strong>SHA-1</strong> of the hash if you want to reset to. <em>--soft</em> option will delete the commit but it will leave all your changed files "Changes to be committed", as git status would put it.</p>
  
  <p>If you want to get rid of any changes to tracked files in the working tree since the commit before head use "<strong>--hard</strong>" instead.</p>
</blockquote>

<p>OR</p>

<blockquote>
  <p>If you already pushed and someone pulled which is usually my case, you can't use <em>git reset</em>. You can however do a <em>git revert</em>,</p>
</blockquote>

<pre><code>git revert HEAD
</code></pre>

<blockquote>
  <p>This will create a new commit that reverses everything introduced by the accidental commit.</p>
</blockquote>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 15</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>On <a href="https://www.atlassian.com/software/sourcetree/overview">SourceTree</a> (GUI for GitHub), you may right-click the commit and do a 'Reverse Commit'. This should undo your changes.</p>

<p>On the terminal:</p>

<p>You may alternatively use:</p>

<pre><code>git revert
</code></pre>

<p>Or:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">git reset --soft HEAD^ <span class="hljs-comment"># Use --soft if you want to keep your changes.</span>
git reset --hard HEAD^ <span class="hljs-comment"># Use --hard if you don't care about keeping your changes.</span>
</code></pre>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 16</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A single command:</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">git reset --soft <span class="hljs-string">'HEAD^'</span> 
</code></pre>

<p>It works great to undo the last local commit!</p>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 17</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Just reset it doing the command below using <code>git</code>:</p>

<pre><code>git reset --soft HEAD~1
</code></pre>

<p><strong>Explain:</strong> what <code>git reset</code> does, it's basically <code>reset</code> to any commit you'd like to go back to, then if you combine it with <code>--soft</code> key, it will go back, but keep the  changes in your file(s), so you get back to the stage which the file was just added, <code>HEAD</code> is the head of the branch and if you combine with <code>~1</code> (in this case you also use <code>HEAD^</code>), it will go back only one commit which what you want...</p>

<p>I create the steps in the image below in more details for you, including all steps that may happens in real situations and committing the code:</p>

<p><a href="https://i.stack.imgur.com/7zrzb.jpg" rel="noreferrer"><img src="https://i.stack.imgur.com/7zrzb.jpg" alt="How to undo the last commits in Git?"></a></p>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 18</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>"Reset the working tree to the last commit"</p>
<pre><code>git reset --hard HEAD^ 
</code></pre>
<p>"Clean unknown files from the working tree"</p>
<pre><code>git clean    
</code></pre>
<p>see - <a href="https://web.archive.org/web/20210515091636/http://jonas.nitro.dk/git/quick-reference.html" rel="noreferrer">Git Quick Reference</a></p>
<p>NOTE: <strong>This command will delete your previous commit</strong>, so use with caution! <code>git reset --hard</code> is safer.</p>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 19</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>How to undo the last Git commit?</strong></p>

<p>To restore everything back to the way it was prior to the last commit, we need to reset to the commit before HEAD.</p>

<ol>
<li><p>If you don't want to keep your changes that you made:</p>

<pre><code>git reset --hard HEAD^
</code></pre></li>
<li><p>If you want to keep your changes:</p>

<pre><code>git reset --soft HEAD^
</code></pre></li>
</ol>

<p>Now check your git log. It will show that our last commit has been removed.</p>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 20</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Use reflog to find a correct state</p>

<pre><code>git reflog
</code></pre>

<p><img src="https://i.stack.imgur.com/c7e7D.png" alt="reflog before">
<em>REFLOG BEFORE RESET</em></p>

<p>Select the correct reflog (f3cb6e2 in my case) and type </p>

<pre><code>git reset --hard f3cb6e2
</code></pre>

<p>After that the repo HEAD will be reset to that HEADid
<img src="https://i.stack.imgur.com/GdnDT.png" alt="reset effect">
<em>LOG AFTER RESET</em></p>

<p>Finally the reflog looks like the picture below</p>

<p><img src="https://i.stack.imgur.com/Fhhub.png" alt="reflog after">
<em>REFLOG FINAL</em></p>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 21</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>First run: </p>

<pre><code>git reflog
</code></pre>

<p>It will show you all the possible actions you have performed on your repository, for example, commit, merge, pull, etc.</p>

<p>Then do:</p>

<pre><code>git reset --hard ActionIdFromRefLog
</code></pre>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 22</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>Undo last commit:</h2>

<p><code>git reset --soft HEAD^</code> or <code>git reset --soft HEAD~</code></p>

<p>This will undo the last commit.</p>

<p>Here <code>--soft</code> means reset into staging.</p>

<p><code>HEAD~</code> or <code>HEAD^</code> means to move to commit before HEAD.</p>

<hr>

<h2>Replace last commit to new commit:</h2>

<pre><code>git commit --amend -m "message"
</code></pre>

<p>It will replace the last commit with the new commit.</p>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 23</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Another way:</p>

<p>Checkout the branch you want to revert, then reset your local working copy back to the commit that you want to be the latest one on the remote server (everything after it will go bye-bye). To do this, in SourceTree I right-clicked on the and selected "Reset BRANCHNAME to this commit".</p>

<p>Then navigate to your repository's local directory and run this command:</p>

<pre><code>git -c diff.mnemonicprefix=false -c core.quotepath=false push -v -f --tags REPOSITORY_NAME BRANCHNAME:BRANCHNAME
</code></pre>

<p>This will erase all commits after the current one in your local repository but only for that one branch.</p>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 24</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Type <code>git log</code> and find the last commit hash code and then enter:</p>

<pre><code>git reset &lt;the previous co&gt;
</code></pre>
    </div></div></div></div><div id="solution25" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 25</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In my case I accidentally committed some files I did not want to. So I did the following and it worked:</p>

<pre><code>git reset --soft HEAD^
git rm --cached [files you do not need]
git add [files you need]
git commit -c ORIG_HEAD
</code></pre>

<p>Verify the results with gitk or git log --stat</p>
    </div></div></div></div><div id="solution26" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 26</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Simple, run this in your command line:</p>

<pre><code>git reset --soft HEAD~ 
</code></pre>
    </div></div></div></div><div id="solution27" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 27</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are two main scenarios</p>

<p><strong>You haven't pushed the commit yet</strong></p>

<p>If the problem was extra files you commited (and you don't want those on repository), you can remove them using <code>git rm</code> and then commiting with <code>--amend</code></p>

<pre><code>git rm &lt;pathToFile&gt;
</code></pre>

<p>You can also remove entire directories with <code>-r</code>, or even combine with other <a href="http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29">Bash</a> commands</p>

<pre><code>git rm -r &lt;pathToDirectory&gt;
git rm $(find -name '*.class')
</code></pre>

<p>After removing the files, you can commit, with <strong>--amend</strong> option</p>

<pre><code>git commit --amend -C HEAD # the -C option is to use the same commit message
</code></pre>

<p>This will rewrite your recent local commit removing the extra files, so, these files will never be sent on push and also will be removed from your local .git repository by GC.</p>

<p><strong>You already pushed the commit</strong></p>

<p>You can apply the same solution of the other scenario and then doing <code>git push</code> with the <code>-f</code> option, but it is <strong>not recommended</strong> since it overwrites the remote history with a divergent change (it can mess your repository).</p>

<p>Instead, you have to do the commit without <code>--amend</code> (remember this about -amend`: That option rewrites the history on the last commit).</p>
    </div></div></div></div><div id="solution28" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 28</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h3>For a local commit</h3>

<pre><code>git reset --soft HEAD~1
</code></pre>

<p>or if you do not remember exactly in which commit it is, you might use</p>

<pre><code>git rm --cached &lt;file&gt;
</code></pre>

<h3>For a pushed commit</h3>

<p>The proper way of removing files from the repository history is using <code>git filter-branch</code>. That is,</p>

<pre class="lang-bash s-code-block"><code class="hljs language-bash">git filter-branch --index-filter <span class="hljs-string">'git rm --cached &lt;file&gt;'</span> HEAD
</code></pre>

<p>But I recomnend you use this command with care. Read more at <em><a href="https://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html">git-filter-branch(1) Manual Page</a></em>.</p>
    </div></div></div></div><div id="solution29" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 29</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>To reset to the previous revision, permanently deleting all uncommitted changes: </p>

<pre><code>git reset --hard HEAD~1
</code></pre>
    </div></div></div></div><div id="solution30" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 30</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/undo">undo</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/git-commit">git-commit</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are many ways to do it:</p>

<p>Git command to undo the last commit/ previous commits:</p>

<p><strong>Warning:</strong> Do Not use --hard if you do not know what you are doing.
--hard is too <strong>dangerous</strong>, and it might <strong>delete your files.</strong></p>

<p><strong>Basic command to revert the commit in Git is:</strong></p>

<pre><code>$ git reset --hard &lt;COMMIT -ID&gt;
</code></pre>

<p>or</p>

<pre><code>$ git reset --hard HEAD~&lt;n&gt;
</code></pre>

<p><strong>COMMIT-ID</strong>: ID for the commit</p>

<p><strong>n:</strong>  is number of last commits you want to revert</p>

<p>You can get the commit id as shown below:</p>

<pre><code>$ **git log --oneline**

d81d3f1 function to subtract two numbers

be20eb8 function to add two numbers

bedgfgg function to mulitply two numbers
</code></pre>

<p>where <strong>d81d3f1</strong> and <strong>be20eb8</strong> are commit id.</p>

<p><strong>Now let's see some cases:</strong></p>

<p><em>Suppose you want to revert the last commit 'd81d3f1'.  Here are two options:</em></p>

<pre><code>$ git reset --hard d81d3f1
</code></pre>

<p>or</p>

<pre><code>$ git reset --hard HEAD~1
</code></pre>

<p><em>Suppose you want to revert the commit 'be20eb8':</em></p>

<pre><code>$ git reset --hard be20eb8
</code></pre>

<p>For more detailed information you can refer and try out some other commands too for resetting head to a specified state:</p>

<pre><code>$ git reset --help
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url-1657387618306">What is the best regular expression to check if a string is a valid URL?</a><a href="/questions/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems-1657384472469">What is a debugger and how can it help me diagnose problems?</a><a href="/questions/javascript-function-doesn&#x27;t-work-when-link-is-clicked-1657387767488">javascript function doesn&#x27;t work when link is clicked</a><a href="/questions/how-can-i-validate-an-email-address-using-a-regular-expression-1657384549233">How can I validate an email address using a regular expression?</a><a href="/questions/no-&#x27;access-control-allow-origin&#x27;-header-is-present-on-the-requested-resourcewhen-trying-to-get-data-from-a-rest-api-1657387628467">No &#x27;Access-Control-Allow-Origin&#x27; header is present on the requested resource—when trying to get data from a REST API</a><a href="/questions/how-do-i-use-arrays-in-c++-1657387456118">How do I use arrays in C++?</a><a href="/questions/when-to-use-virtual-destructors-1657388152135">When to use virtual destructors?</a><a href="/questions/how-to-join-(merge)-data-frames-(inner-outer-left-right)-1657384406445">How to join (merge) data frames (inner, outer, left, right)</a><a href="/questions/srand()-why-call-it-only-once-1657387794760">srand() — why call it only once?</a><a href="/questions/how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909">How do I set a variable to the output of a command in Bash?</a><a href="/questions/scanner-is-skipping-nextline()-after-using-next()-or-nextfoo()-1657384379697">Scanner is skipping nextLine() after using next() or nextFoo()?</a><a href="/questions/creating-multiline-strings-in-javascript-1657388025414">Creating multiline strings in JavaScript</a><a href="/questions/how-to-randomize-(shuffle)-a-javascript-array-1657384790171">How to randomize (shuffle) a JavaScript array?</a><a href="/questions/how-to-parse-json-in-java-1657384575136">How to parse JSON in Java</a><a href="/questions/servlet-returns-%22http-status-404-the-requested-resource-(servlet)-is-not-available%22-1657384850661">Servlet returns &quot;HTTP Status 404 The requested resource (/servlet) is not available&quot;</a><a href="/questions/why-is-%22while(-!feof(file)-)%22-always-wrong-1657384367349">Why is “while( !feof(file) )” always wrong?</a><a href="/questions/how-to-convert-string-representation-of-list-to-a-list-1657387384181">How to convert string representation of list to a list</a><a href="/questions/parsing-a-string-to-a-date-in-javascript-1657387782497">Parsing a string to a date in JavaScript</a><a href="/questions/how-can-i-parse-a-json-file-with-php-duplicate-1657388002325">How can I parse a JSON file with PHP? [duplicate]</a><a href="/questions/download-a-file-by-jquery.ajax-1657388220611">Download a file by jQuery.Ajax</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;h1\u0026gt;Undo a commit \u0026amp;amp; redo\u0026lt;/h1\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-sh s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;$ git commit -m \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Something terribly misguided\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# (0: Your Accident)\u0026lt;/span\u0026gt;\n$ git reset HEAD~                              \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# (1)\u0026lt;/span\u0026gt;\n[ edit files as necessary ]                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# (2)\u0026lt;/span\u0026gt;\n$ git add .                                    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# (3)\u0026lt;/span\u0026gt;\n$ git commit -c ORIG_HEAD                      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# (4)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://git-scm.com/docs/git-reset\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;git reset\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; is the command responsible for the \u0026lt;strong\u0026gt;undo\u0026lt;/strong\u0026gt;. It will undo your last commit while \u0026lt;strong\u0026gt;leaving your working tree (the state of your files on disk) untouched.\u0026lt;/strong\u0026gt; You\u0026apos;ll need to add them again before you can commit them again).\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Make corrections to \u0026lt;a href=\u0026quot;https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified#_the_working_directory\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;working tree\u0026lt;/a\u0026gt; files.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://git-scm.com/docs/git-add\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;git add\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; anything that you want to include in your new commit.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Commit the changes, reusing the old commit message. \u0026lt;code\u0026gt;reset\u0026lt;/code\u0026gt; copied the old head to \u0026lt;code\u0026gt;.git/ORIG_HEAD\u0026lt;/code\u0026gt;; \u0026lt;a href=\u0026quot;https://git-scm.com/docs/git-commit#Documentation/git-commit.txt--cltcommitgt\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;commit\u0026lt;/code\u0026gt; with \u0026lt;code\u0026gt;-c ORIG_HEAD\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; will open an editor, which initially contains the log message from the old commit and allows you to edit it. If you do not need to edit the message, you could use the \u0026lt;a href=\u0026quot;https://git-scm.com/docs/git-commit#Documentation/git-commit.txt--Cltcommitgt\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;-C\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; option.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Alternatively, to edit the previous commit (or just its commit message)\u0026lt;/strong\u0026gt;, \u0026lt;a href=\u0026quot;https://stackoverflow.com/q/179123/1146608\u0026quot;\u0026gt;\u0026lt;code\u0026gt;commit --amend\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; will add changes within the current index to the previous commit.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;To remove (not revert) a commit that has been pushed to the server\u0026lt;/strong\u0026gt;, rewriting history with \u0026lt;code\u0026gt;git push origin main --force[-with-lease]\u0026lt;/code\u0026gt; is necessary. \u0026lt;a href=\u0026quot;https://stackoverflow.com/q/52823692/4096791\u0026quot;\u0026gt;It\u0026apos;s \u0026lt;em\u0026gt;almost always\u0026lt;/em\u0026gt; a bad idea to use \u0026lt;code\u0026gt;--force\u0026lt;/code\u0026gt;; prefer \u0026lt;code\u0026gt;--force-with-lease\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; instead, and as noted in \u0026lt;a href=\u0026quot;https://git-scm.com/docs\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;the git manual\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;You should understand the implications of rewriting history if you [rewrite history] has already been published.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h2\u0026gt;Further Reading\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/34519665/how-to-move-head-back-to-a-previous-location-detached-head/34519716#34519716\u0026quot;\u0026gt;You can use \u0026lt;code\u0026gt;git reflog\u0026lt;/code\u0026gt; to determine the SHA-1\u0026lt;/a\u0026gt; for the commit to which you wish to revert. Once you have this value, use the sequence of commands as explained above.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;HEAD~\u0026lt;/code\u0026gt; is the same as \u0026lt;code\u0026gt;HEAD~1\u0026lt;/code\u0026gt;. The article \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/46350644/5175709\u0026quot;\u0026gt;What is the HEAD in git?\u0026lt;/a\u0026gt; is helpful if you want to uncommit multiple commits.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Undoing a commit is a little scary if you don\u0026apos;t know how it works.  But it\u0026apos;s actually amazingly easy if you do understand. I\u0026apos;ll show you the 4 different ways you can undo a commit.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Say you have this, where C is your HEAD and (F) is the state of your files.\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;   (F)\nA-B-C\n    \n  master\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Option 1: \u0026lt;code\u0026gt;git reset --hard\u0026lt;/code\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;You want to \u0026lt;strong\u0026gt;destroy commit C and also throw away any uncommitted changes\u0026lt;/strong\u0026gt;.  You do this:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --hard HEAD~1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The result is:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt; (F)\nA-B\n  \nmaster\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Now B is the HEAD.  Because you used \u0026lt;code\u0026gt;--hard\u0026lt;/code\u0026gt;, your files are reset to their state at commit B.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Option 2: \u0026lt;code\u0026gt;git reset\u0026lt;/code\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Maybe commit C wasn\u0026apos;t a disaster, but just a bit off.  You want to \u0026lt;strong\u0026gt;undo the commit but keep your changes\u0026lt;/strong\u0026gt; for a bit of editing before you do a better commit.  Starting again from here, with C as your HEAD:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;   (F)\nA-B-C\n    \n  master\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Do this, leaving off the \u0026lt;code\u0026gt;--hard\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset HEAD~1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;In this case the result is:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;   (F)\nA-B-C\n  \nmaster\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;In both cases, HEAD is just a pointer to the latest commit.  When you do a \u0026lt;code\u0026gt;git reset HEAD~1\u0026lt;/code\u0026gt;, you tell Git to move the HEAD pointer back one commit.  But (unless you use \u0026lt;code\u0026gt;--hard\u0026lt;/code\u0026gt;) you leave your files as they were.  So now \u0026lt;code\u0026gt;git status\u0026lt;/code\u0026gt; shows the changes you had checked into C.  You haven\u0026apos;t lost a thing!\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Option 3: \u0026lt;code\u0026gt;git reset --soft\u0026lt;/code\u0026gt;\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;For the lightest touch, you can even \u0026lt;strong\u0026gt;undo your commit but leave your files and your \u0026lt;a href=\u0026quot;https://git.wiki.kernel.org/index.php/WhatIsTheIndex\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;index\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --soft HEAD~1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This not only leaves your files alone, it even leaves your \u0026lt;em\u0026gt;index\u0026lt;/em\u0026gt; alone.  When you do \u0026lt;code\u0026gt;git status\u0026lt;/code\u0026gt;, you\u0026apos;ll see that the same files are in the index as before.  In fact, right after this command, you could do \u0026lt;code\u0026gt;git commit\u0026lt;/code\u0026gt; and you\u0026apos;d be redoing the same commit you just had.\u0026lt;/p\u0026gt;\n\u0026lt;h3\u0026gt;Option 4: you did \u0026lt;code\u0026gt;git reset --hard\u0026lt;/code\u0026gt; and need to get that code back\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;One more thing: Suppose you \u0026lt;strong\u0026gt;destroy a commit\u0026lt;/strong\u0026gt; as in the first example, \u0026lt;strong\u0026gt;but then discover you needed it after all\u0026lt;/strong\u0026gt;?  Tough luck, right?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Nope, there\u0026apos;s \u0026lt;em\u0026gt;still\u0026lt;/em\u0026gt; a way to get it back.  Type this\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reflog\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;and you\u0026apos;ll see a list of (partial) commit \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/SHA-1#Data_integrity\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;shas\u0026lt;/a\u0026gt; (that is, hashes) that you\u0026apos;ve moved around in.  Find the commit you destroyed, and do this:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git checkout -b someNewBranchName shaYouDestroyed\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You\u0026apos;ve now resurrected that commit.  Commits don\u0026apos;t actually get destroyed in Git for some 90 days, so you can usually go back and rescue one you didn\u0026apos;t mean to get rid of.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are two ways to \u0026quot;undo\u0026quot; your last commit, depending on whether or not you have already made your commit public (pushed to your remote repository):\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;How to undo a local commit\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Let\u0026apos;s say I committed locally, but now I want to remove that commit.\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git log\n    commit 101: bad commit    # Latest commit. This would be called \u0026apos;HEAD\u0026apos;.\n    commit 100: good commit   # Second to last commit. This is the one we want.\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;To restore everything back to the way it was prior to the last commit, we need to \u0026lt;code\u0026gt;reset\u0026lt;/code\u0026gt; to the commit before \u0026lt;code\u0026gt;HEAD\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --soft HEAD^     # Use --soft if you want to keep your changes\ngit reset --hard HEAD^     # Use --hard if you don\u0026apos;t care about keeping the changes you made\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Now \u0026lt;code\u0026gt;git log\u0026lt;/code\u0026gt; will show that our last commit has been removed.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;How to undo a public commit\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;If you have already made your commits public, you will want to create a new commit which will \u0026quot;revert\u0026quot; the changes you made in your previous commit (current HEAD).\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git revert HEAD\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Your changes will now be reverted and ready for you to commit:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git commit -m \u0026apos;restoring the file I removed by accident\u0026apos;\ngit log\n    commit 102: restoring the file I removed by accident\n    commit 101: removing a file we don\u0026apos;t need\n    commit 100: adding a file that we need\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;For more information, check out \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Git Basics - Undoing Things\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Add/remove files to get things the way you want:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git rm classdir\ngit add sourcedir\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then amend the commit:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git commit --amend\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The previous, erroneous commit will be edited to reflect the new index state - in other words, it\u0026apos;ll be like you never made the mistake in the first place.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Note that you should only do this if you haven\u0026apos;t pushed yet. If you have pushed, then you\u0026apos;ll just have to commit a fix normally.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;git \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;rm\u0026lt;/span\u0026gt; yourfiles/*.class\ngit commit -a -m \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;deleted all class files in folder \u0026apos;yourfiles\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --hard HEAD~1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Warning: The above command will permanently remove the modifications to the \u0026lt;code\u0026gt;.java\u0026lt;/code\u0026gt; files (and any other files) that you wanted to commit.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;hard reset\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;HEAD-1\u0026lt;/code\u0026gt; will set your working copy to the state of the commit before your wrong commit.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h2 id=\u0026quot;to-change-the-last-commit-ayg9\u0026quot;\u0026gt;To change the last commit\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Replace the files in the index:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git rm --cached *.class\ngit add *.java\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then, if it\u0026apos;s a private branch, \u0026lt;strong\u0026gt;amend\u0026lt;/strong\u0026gt; the commit:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git commit --amend\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Or, if it\u0026apos;s a shared branch, make a new commit:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git commit -m \u0026apos;Replace .class files with .java files\u0026apos;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;br\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;(\u0026lt;strong\u0026gt;To change a previous commit\u0026lt;/strong\u0026gt;, use the awesome \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/28421811/405550\u0026quot;\u0026gt;interactive rebase\u0026lt;/a\u0026gt;.)\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;ProTip: Add \u0026lt;code\u0026gt;*.class\u0026lt;/code\u0026gt; to a \u0026lt;a href=\u0026quot;https://help.github.com/articles/ignoring-files\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;gitignore\u0026lt;/a\u0026gt; to stop this happening again.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h2 id=\u0026quot;to-revert-a-commit-rotb\u0026quot;\u0026gt;To revert a commit\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Amending a commit is the ideal solution if you need to change the last commit, but a more general solution is \u0026lt;code\u0026gt;reset\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You can reset Git to any commit with:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset @~N\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Where \u0026lt;code\u0026gt;N\u0026lt;/code\u0026gt; is the number of commits before \u0026lt;code\u0026gt;HEAD\u0026lt;/code\u0026gt;, and \u0026lt;code\u0026gt;@~\u0026lt;/code\u0026gt; resets to the previous commit.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Instead of amending the commit, you could use:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset @~\ngit add *.java\ngit commit -m \u0026quot;Add .java files\u0026quot;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Check out \u0026lt;code\u0026gt;git help reset\u0026lt;/code\u0026gt;, specifically the sections on \u0026lt;code\u0026gt;--soft\u0026lt;/code\u0026gt; \u0026lt;code\u0026gt;--mixed\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;--hard\u0026lt;/code\u0026gt;, for a better understanding of what this does.\u0026lt;/p\u0026gt;\n\u0026lt;h2 id=\u0026quot;reflog-hdrm\u0026quot;\u0026gt;Reflog\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;If you mess up, you can always use the reflog to find dropped commits:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;$ git reset @~\n$ git reflog\nc4f708b HEAD@{0}: reset: moving to @~\n2c52489 HEAD@{1}: commit: added some .class files\n$ git reset 2c52489\n... and you\u0026apos;re back where you started\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;br\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Use \u0026lt;code\u0026gt;git revert \u0026amp;lt;commit-id\u0026amp;gt;\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To get the commit ID, just use \u0026lt;code\u0026gt;git log\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are planning to undo a local commit entirely, whatever you change you did on the commit, and if you don\u0026apos;t worry anything about that, just do the following command.\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --hard HEAD^1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;(This command will ignore your entire commit and your changes will be lost completely from your local working tree). If you want to undo your commit, but you want your changes in the staging area (before commit just like after \u0026lt;code\u0026gt;git add\u0026lt;/code\u0026gt;) then do the following command.\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --soft HEAD^1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Now your committed files come into the staging area. Suppose if you want to upstage the files, because you need to edit some wrong content, then do the following command\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset HEAD\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Now committed files to come from the staged area into the unstaged area. Now files are ready to edit, so whatever you change, you want to go edit and added it and make a fresh/new commit.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://madhan-tech-updates.blogspot.in/2013/01/how-to-undo-your-local-git-commit.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;More (link broken)\u0026lt;/a\u0026gt; (\u0026lt;a href=\u0026quot;https://web.archive.org/web/20170410191943/http://madhan-tech-updates.blogspot.in/2013/01/how-to-undo-your-local-git-commit.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Archived version\u0026lt;/a\u0026gt;)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you have \u0026lt;a href=\u0026quot;https://github.com/visionmedia/git-extras\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Git Extras\u0026lt;/a\u0026gt; installed, you can run \u0026lt;code\u0026gt;git undo\u0026lt;/code\u0026gt; to undo the latest commit. \u0026lt;code\u0026gt;git undo 3\u0026lt;/code\u0026gt; will undo the last three commits.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I wanted to undo the latest five commits in our shared repository. I looked up the revision id that I wanted to rollback to. Then I typed in the following.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;prompt\u0026amp;gt; git reset --hard 5a7404742c85\nHEAD is now at 5a74047 Added one more page to catalogue\nprompt\u0026amp;gt; git push origin master --force\nTotal 0 (delta 0), reused 0 (delta 0)\nremote: bb/acl: neoneye is allowed. accepted payload.\nTo git@bitbucket.org:thecompany/prometheus.git\n + 09a6480...5a74047 master -\u0026amp;gt; master (forced update)\nprompt\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I prefer to use \u0026lt;code\u0026gt;git rebase -i\u0026lt;/code\u0026gt; for this job, because a nice list pops up where I can choose the commits to get rid of. It might not be as direct as some other answers here, but it just \u0026lt;em\u0026gt;feels right\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Choose how many commits you want to list, then invoke like this (to enlist last three)\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git rebase -i HEAD~3\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Sample list\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;pick aa28ba7 Sanity check for RtmpSrv port\npick c26c541 RtmpSrv version option\npick 58d6909 Better URL decoding support\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then Git will remove commits for any line that you remove.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;How to fix the previous local commit\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;Use git-gui (or similar) to perform a \u0026lt;code\u0026gt;git commit --amend\u0026lt;/code\u0026gt;. From the GUI you can add or remove individual files from the commit. You can also modify the commit message. \u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;How to undo the previous local commit\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;Just reset your branch to the previous location (for example, using \u0026lt;code\u0026gt;gitk\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;git rebase\u0026lt;/code\u0026gt;). Then reapply your changes from a saved copy. After garbage collection in your local repository, it will be like the unwanted commit never happened. To do all of that in a single command, use \u0026lt;code\u0026gt;git reset HEAD~1\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Word of warning\u0026lt;/strong\u0026gt;: \u0026lt;em\u0026gt;Careless use of \u0026lt;code\u0026gt;git reset\u0026lt;/code\u0026gt; is a good way to get your working copy into a confusing state. I recommend that Git novices avoid this if they can.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h2\u0026gt;How to undo a public commit\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;Perform a \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/1624724/86967\u0026quot;\u0026gt;reverse cherry pick\u0026lt;/a\u0026gt; (\u0026lt;a href=\u0026quot;http://git-scm.com/docs/git-revert.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;git-revert\u0026lt;/a\u0026gt;) to undo the changes.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you haven\u0026apos;t yet pulled other changes onto your branch, you can simply do...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git revert --no-edit HEAD\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then push your updated branch to the shared repository.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;The commit history will show both commits, separately\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;h2\u0026gt;Advanced: Correction of the \u0026lt;em\u0026gt;private\u0026lt;/em\u0026gt; branch in public repository\u0026lt;/h2\u0026gt;\n\n\u0026lt;h3\u0026gt;\u0026lt;em\u0026gt;This can be dangerous -- be sure you have a local copy of the branch to repush.\u0026lt;/em\u0026gt;\u0026lt;/h3\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Also note: You don\u0026apos;t want to do this if someone else may be working on the branch.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git push --delete (branch_name) ## remove public version of branch\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Clean up your branch locally then repush...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git push origin (branch_name)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;In the normal case, you probably needn\u0026apos;t worry about your private-branch commit history being pristine.  Just push a followup commit (see \u0026apos;How to undo a public commit\u0026apos; above), and later, do a \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/22417539/86967\u0026quot;\u0026gt;squash-merge\u0026lt;/a\u0026gt; to hide the history.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you want to permanently undo it and you have cloned some repository.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The commit id can be seen by:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git log \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then you can do like:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --hard \u0026amp;lt;commit_id\u0026amp;gt;\n\ngit push origin \u0026amp;lt;branch_name\u0026amp;gt; -f\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you have committed junk but not pushed,\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --soft HEAD~1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;HEAD~1\u0026lt;/strong\u0026gt; is a shorthand for the commit before head. Alternatively you can refer to the \u0026lt;strong\u0026gt;SHA-1\u0026lt;/strong\u0026gt; of the hash if you want to reset to. \u0026lt;em\u0026gt;--soft\u0026lt;/em\u0026gt; option will delete the commit but it will leave all your changed files \u0026quot;Changes to be committed\u0026quot;, as git status would put it.\u0026lt;/p\u0026gt;\n  \n  \u0026lt;p\u0026gt;If you want to get rid of any changes to tracked files in the working tree since the commit before head use \u0026quot;\u0026lt;strong\u0026gt;--hard\u0026lt;/strong\u0026gt;\u0026quot; instead.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;OR\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;If you already pushed and someone pulled which is usually my case, you can\u0026apos;t use \u0026lt;em\u0026gt;git reset\u0026lt;/em\u0026gt;. You can however do a \u0026lt;em\u0026gt;git revert\u0026lt;/em\u0026gt;,\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git revert HEAD\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;This will create a new commit that reverses everything introduced by the accidental commit.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;On \u0026lt;a href=\u0026quot;https://www.atlassian.com/software/sourcetree/overview\u0026quot;\u0026gt;SourceTree\u0026lt;/a\u0026gt; (GUI for GitHub), you may right-click the commit and do a \u0026apos;Reverse Commit\u0026apos;. This should undo your changes.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;On the terminal:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You may alternatively use:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git revert\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;git reset --soft HEAD^ \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Use --soft if you want to keep your changes.\u0026lt;/span\u0026gt;\ngit reset --hard HEAD^ \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Use --hard if you don\u0026apos;t care about keeping your changes.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A single command:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;git reset --soft \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;HEAD^\u0026apos;\u0026lt;/span\u0026gt; \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It works great to undo the last local commit!\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Just reset it doing the command below using \u0026lt;code\u0026gt;git\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --soft HEAD~1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Explain:\u0026lt;/strong\u0026gt; what \u0026lt;code\u0026gt;git reset\u0026lt;/code\u0026gt; does, it\u0026apos;s basically \u0026lt;code\u0026gt;reset\u0026lt;/code\u0026gt; to any commit you\u0026apos;d like to go back to, then if you combine it with \u0026lt;code\u0026gt;--soft\u0026lt;/code\u0026gt; key, it will go back, but keep the  changes in your file(s), so you get back to the stage which the file was just added, \u0026lt;code\u0026gt;HEAD\u0026lt;/code\u0026gt; is the head of the branch and if you combine with \u0026lt;code\u0026gt;~1\u0026lt;/code\u0026gt; (in this case you also use \u0026lt;code\u0026gt;HEAD^\u0026lt;/code\u0026gt;), it will go back only one commit which what you want...\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I create the steps in the image below in more details for you, including all steps that may happens in real situations and committing the code:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/7zrzb.jpg\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/7zrzb.jpg\u0026quot; alt=\u0026quot;How to undo the last commits in Git?\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026quot;Reset the working tree to the last commit\u0026quot;\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --hard HEAD^ \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026quot;Clean unknown files from the working tree\u0026quot;\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git clean    \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;see - \u0026lt;a href=\u0026quot;https://web.archive.org/web/20210515091636/http://jonas.nitro.dk/git/quick-reference.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Git Quick Reference\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;NOTE: \u0026lt;strong\u0026gt;This command will delete your previous commit\u0026lt;/strong\u0026gt;, so use with caution! \u0026lt;code\u0026gt;git reset --hard\u0026lt;/code\u0026gt; is safer.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;How to undo the last Git commit?\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To restore everything back to the way it was prior to the last commit, we need to reset to the commit before HEAD.\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;If you don\u0026apos;t want to keep your changes that you made:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --hard HEAD^\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;If you want to keep your changes:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --soft HEAD^\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;Now check your git log. It will show that our last commit has been removed.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Use reflog to find a correct state\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reflog\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/c7e7D.png\u0026quot; alt=\u0026quot;reflog before\u0026quot;\u0026gt;\n\u0026lt;em\u0026gt;REFLOG BEFORE RESET\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Select the correct reflog (f3cb6e2 in my case) and type \u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --hard f3cb6e2\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;After that the repo HEAD will be reset to that HEADid\n\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/GdnDT.png\u0026quot; alt=\u0026quot;reset effect\u0026quot;\u0026gt;\n\u0026lt;em\u0026gt;LOG AFTER RESET\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Finally the reflog looks like the picture below\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/Fhhub.png\u0026quot; alt=\u0026quot;reflog after\u0026quot;\u0026gt;\n\u0026lt;em\u0026gt;REFLOG FINAL\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;First run: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reflog\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It will show you all the possible actions you have performed on your repository, for example, commit, merge, pull, etc.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Then do:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --hard ActionIdFromRefLog\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;Undo last commit:\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;git reset --soft HEAD^\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;git reset --soft HEAD~\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This will undo the last commit.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here \u0026lt;code\u0026gt;--soft\u0026lt;/code\u0026gt; means reset into staging.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;HEAD~\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;HEAD^\u0026lt;/code\u0026gt; means to move to commit before HEAD.\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;h2\u0026gt;Replace last commit to new commit:\u0026lt;/h2\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git commit --amend -m \u0026quot;message\u0026quot;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It will replace the last commit with the new commit.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Another way:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Checkout the branch you want to revert, then reset your local working copy back to the commit that you want to be the latest one on the remote server (everything after it will go bye-bye). To do this, in SourceTree I right-clicked on the and selected \u0026quot;Reset BRANCHNAME to this commit\u0026quot;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Then navigate to your repository\u0026apos;s local directory and run this command:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git -c diff.mnemonicprefix=false -c core.quotepath=false push -v -f --tags REPOSITORY_NAME BRANCHNAME:BRANCHNAME\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This will erase all commits after the current one in your local repository but only for that one branch.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Type \u0026lt;code\u0026gt;git log\u0026lt;/code\u0026gt; and find the last commit hash code and then enter:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset \u0026amp;lt;the previous co\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In my case I accidentally committed some files I did not want to. So I did the following and it worked:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --soft HEAD^\ngit rm --cached [files you do not need]\ngit add [files you need]\ngit commit -c ORIG_HEAD\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Verify the results with gitk or git log --stat\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Simple, run this in your command line:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --soft HEAD~ \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are two main scenarios\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;You haven\u0026apos;t pushed the commit yet\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If the problem was extra files you commited (and you don\u0026apos;t want those on repository), you can remove them using \u0026lt;code\u0026gt;git rm\u0026lt;/code\u0026gt; and then commiting with \u0026lt;code\u0026gt;--amend\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git rm \u0026amp;lt;pathToFile\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can also remove entire directories with \u0026lt;code\u0026gt;-r\u0026lt;/code\u0026gt;, or even combine with other \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29\u0026quot;\u0026gt;Bash\u0026lt;/a\u0026gt; commands\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git rm -r \u0026amp;lt;pathToDirectory\u0026amp;gt;\ngit rm $(find -name \u0026apos;*.class\u0026apos;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;After removing the files, you can commit, with \u0026lt;strong\u0026gt;--amend\u0026lt;/strong\u0026gt; option\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git commit --amend -C HEAD # the -C option is to use the same commit message\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This will rewrite your recent local commit removing the extra files, so, these files will never be sent on push and also will be removed from your local .git repository by GC.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;You already pushed the commit\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can apply the same solution of the other scenario and then doing \u0026lt;code\u0026gt;git push\u0026lt;/code\u0026gt; with the \u0026lt;code\u0026gt;-f\u0026lt;/code\u0026gt; option, but it is \u0026lt;strong\u0026gt;not recommended\u0026lt;/strong\u0026gt; since it overwrites the remote history with a divergent change (it can mess your repository).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Instead, you have to do the commit without \u0026lt;code\u0026gt;--amend\u0026lt;/code\u0026gt; (remember this about -amend`: That option rewrites the history on the last commit).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h3\u0026gt;For a local commit\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --soft HEAD~1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or if you do not remember exactly in which commit it is, you might use\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git rm --cached \u0026amp;lt;file\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h3\u0026gt;For a pushed commit\u0026lt;/h3\u0026gt;\n\n\u0026lt;p\u0026gt;The proper way of removing files from the repository history is using \u0026lt;code\u0026gt;git filter-branch\u0026lt;/code\u0026gt;. That is,\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-bash s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;git filter-branch --index-filter \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;git rm --cached \u0026amp;lt;file\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt; HEAD\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;But I recomnend you use this command with care. Read more at \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html\u0026quot;\u0026gt;git-filter-branch(1) Manual Page\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To reset to the previous revision, permanently deleting all uncommitted changes: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;git reset --hard HEAD~1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are many ways to do it:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Git command to undo the last commit/ previous commits:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Warning:\u0026lt;/strong\u0026gt; Do Not use --hard if you do not know what you are doing.\n--hard is too \u0026lt;strong\u0026gt;dangerous\u0026lt;/strong\u0026gt;, and it might \u0026lt;strong\u0026gt;delete your files.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Basic command to revert the commit in Git is:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;$ git reset --hard \u0026amp;lt;COMMIT -ID\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;$ git reset --hard HEAD~\u0026amp;lt;n\u0026amp;gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;COMMIT-ID\u0026lt;/strong\u0026gt;: ID for the commit\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;n:\u0026lt;/strong\u0026gt;  is number of last commits you want to revert\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can get the commit id as shown below:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;$ **git log --oneline**\n\nd81d3f1 function to subtract two numbers\n\nbe20eb8 function to add two numbers\n\nbedgfgg function to mulitply two numbers\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;where \u0026lt;strong\u0026gt;d81d3f1\u0026lt;/strong\u0026gt; and \u0026lt;strong\u0026gt;be20eb8\u0026lt;/strong\u0026gt; are commit id.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Now let\u0026apos;s see some cases:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Suppose you want to revert the last commit \u0026apos;d81d3f1\u0026apos;.  Here are two options:\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;$ git reset --hard d81d3f1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;$ git reset --hard HEAD~1\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Suppose you want to revert the commit \u0026apos;be20eb8\u0026apos;:\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;$ git reset --hard be20eb8\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;For more detailed information you can refer and try out some other commands too for resetting head to a specified state:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;$ git reset --help\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":520,"title":"How do I undo the most recent local commits in Git?","content":"\n                \n\u0026lt;p\u0026gt;I accidentally committed the wrong files to \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Git\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Git\u0026lt;/a\u0026gt;, but didn\u0026apos;t push the commit to the server yet. How do I undo those commits from the \u0026lt;em\u0026gt;local\u0026lt;/em\u0026gt; repository?\u0026lt;/p\u0026gt;\n    ","slug":"how-do-i-undo-the-most-recent-local-commits-in-git-1657388262945","postType":"QUESTION","createdAt":"2022-07-09T17:37:42.000Z","updatedAt":"2022-07-09T17:37:42.000Z","tags":[{"id":2569,"name":"undo","slug":"undo","createdAt":"2022-07-09T17:37:43.000Z","updatedAt":"2022-07-09T17:37:43.000Z","Questions_Tags":{"questionId":520,"tagId":2569}},{"id":2570,"name":"git-commit","slug":"git-commit","createdAt":"2022-07-09T17:37:43.000Z","updatedAt":"2022-07-09T17:37:43.000Z","Questions_Tags":{"questionId":520,"tagId":2570}}],"relatedQuestions":[{"title":"How do I undo the most recent local commits in Git?","slug":"how-do-i-undo-the-most-recent-local-commits-in-git-1657388262945","tags":[{"name":"undo","Questions_Tags":{"questionId":520,"tagId":2569}},{"name":"git-commit","Questions_Tags":{"questionId":520,"tagId":2570}}]}]},"randomQuestions":[{"title":"What is the best regular expression to check if a string is a valid URL?","slug":"what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url-1657387618306"},{"title":"What is a debugger and how can it help me diagnose problems?","slug":"what-is-a-debugger-and-how-can-it-help-me-diagnose-problems-1657384472469"},{"title":"javascript function doesn't work when link is clicked","slug":"javascript-function-doesn't-work-when-link-is-clicked-1657387767488"},{"title":"How can I validate an email address using a regular expression?","slug":"how-can-i-validate-an-email-address-using-a-regular-expression-1657384549233"},{"title":"No 'Access-Control-Allow-Origin' header is present on the requested resource—when trying to get data from a REST API","slug":"no-'access-control-allow-origin'-header-is-present-on-the-requested-resourcewhen-trying-to-get-data-from-a-rest-api-1657387628467"},{"title":"How do I use arrays in C++?","slug":"how-do-i-use-arrays-in-c++-1657387456118"},{"title":"When to use virtual destructors?","slug":"when-to-use-virtual-destructors-1657388152135"},{"title":"How to join (merge) data frames (inner, outer, left, right)","slug":"how-to-join-(merge)-data-frames-(inner-outer-left-right)-1657384406445"},{"title":"srand() — why call it only once?","slug":"srand()-why-call-it-only-once-1657387794760"},{"title":"How do I set a variable to the output of a command in Bash?","slug":"how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909"},{"title":"Scanner is skipping nextLine() after using next() or nextFoo()?","slug":"scanner-is-skipping-nextline()-after-using-next()-or-nextfoo()-1657384379697"},{"title":"Creating multiline strings in JavaScript","slug":"creating-multiline-strings-in-javascript-1657388025414"},{"title":"How to randomize (shuffle) a JavaScript array?","slug":"how-to-randomize-(shuffle)-a-javascript-array-1657384790171"},{"title":"How to parse JSON in Java","slug":"how-to-parse-json-in-java-1657384575136"},{"title":"Servlet returns \"HTTP Status 404 The requested resource (/servlet) is not available\"","slug":"servlet-returns-\"http-status-404-the-requested-resource-(servlet)-is-not-available\"-1657384850661"},{"title":"Why is “while( !feof(file) )” always wrong?","slug":"why-is-\"while(-!feof(file)-)\"-always-wrong-1657384367349"},{"title":"How to convert string representation of list to a list","slug":"how-to-convert-string-representation-of-list-to-a-list-1657387384181"},{"title":"Parsing a string to a date in JavaScript","slug":"parsing-a-string-to-a-date-in-javascript-1657387782497"},{"title":"How can I parse a JSON file with PHP? [duplicate]","slug":"how-can-i-parse-a-json-file-with-php-duplicate-1657388002325"},{"title":"Download a file by jQuery.Ajax","slug":"download-a-file-by-jquery.ajax-1657388220611"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-do-i-undo-the-most-recent-local-commits-in-git-1657388262945"},"buildId":"00bsHgHZki2FteshOatnd","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>