<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="comma-operator,solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/what-does-the-comma-operator-do-1657388258021","name":"Questions"}}]}</script><title>What does the comma operator , do? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="What does the , operator do in C?
    "/><meta property="og:title" content="What does the comma operator , do? | Solution Checker"/><meta property="og:description" content="What does the , operator do in C?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"What does the comma operator , do?","text":"What does the , operator do in C?\n    ","answerCount":8,"upVoteCount":500,"suggestedAnswer":[{"text":"The expression:\n(expression1,  expression2)\n\nFirst expression1 is evaluated, then expression2 is evaluated, and the value of expression2 is returned for the whole expression.\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"I&apos;ve seen used most in while loops:\n\nstring s;\nwhile(read_string(s), s.len() &gt; 5)\n{\n   //do something\n}\n\n\nIt will do the operation, then do a test based on a side-effect. The other way would be to do it like this:\n\nstring s;\nread_string(s);\nwhile(s.len() &gt; 5)\n{\n   //do something\n   read_string(s);\n}\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"The comma operator will evaluate the left operand, discard the result and then evaluate the right operand and that will be the result. The idiomatic use as noted in the link is when initializing the variables used in a for loop, and it gives the following example:\n\nvoid rev(char *s, size_t len)\n{\n  char *first;\n  for ( first = s, s += len - 1; s &gt;= first; --s)\n      /*^^^^^^^^^^^^^^^^^^^^^^^*/ \n      putchar(*s);\n}\n\n\nOtherwise there are not many great uses of the comma operator, although it is easy to abuse to generate code that is hard to read and maintain.\n\nFrom the draft C99 standard the grammar is as follows:\n\nexpression:\n  assignment-expression\n  expression , assignment-expression\n\n\nand paragraph 2 says:\n\n\n  The left operand of a comma operator is evaluated as a void expression; there is a sequence point after its evaluation. Then the right operand is evaluated; the result has its type and value. 97) If an attempt is made to modify the result of a comma operator or to access it after the next sequence point, the behavior is undefined.\n\n\nFootnote 97 says:\n\n\n  A comma operator does not yield an lvalue.\n\n\nwhich means you can not assign to the result of the comma operator.\n\nIt is important to note that the comma operator has the lowest precedence and therefore there are cases where using () can make a big difference, for example:\n\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    int x, y ;\n\n    x = 1, 2 ;\n    y = (3,4) ;\n\n    printf( &quot;%d %d\\n&quot;, x, y ) ;\n}\n\n\nwill have the following output:\n\n1 4\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"The comma operator combines the two expressions either side of it into one, evaluating them both in left-to-right order.  The value of the right-hand side is returned as the value of the whole expression.\n (expr1, expr2) is like { expr1; expr2; } but you can use the result of expr2 in a function call or assignment.\n\nIt is often seen in for loops to initialise or maintain multiple variables like this:\n\nfor (low = 0, high = MAXSIZE; low &lt; high; low = newlow, high = newhigh)\n{\n    /* do something with low and high and put new values\n       in newlow and newhigh */\n}\n\n\nApart from this, I&apos;ve only used it &quot;in anger&quot; in one other case, when wrapping up two operations that should always go together in a macro.  We had code that copied various binary values into a byte buffer for sending on a network, and a pointer maintained where we had got up to:\n\nunsigned char outbuff[BUFFSIZE];\nunsigned char *ptr = outbuff;\n\n*ptr++ = first_byte_value;\n*ptr++ = second_byte_value;\n\nsend_buff(outbuff, (int)(ptr - outbuff));\n\n\nWhere the values were shorts or ints we did this:\n\n*((short *)ptr)++ = short_value;\n*((int *)ptr)++ = int_value;\n\n\nLater we read that this was not really valid C, because (short *)ptr is no longer an l-value and can&apos;t be incremented, although our compiler at the time didn&apos;t mind.  To fix this, we split the expression in two:\n\n*(short *)ptr = short_value;\nptr += sizeof(short);\n\n\nHowever, this approach relied on all developers remembering to put both statements in all the time.  We wanted a function where you could pass in the output pointer, the value and and the value&apos;s type.  This being C, not C++ with templates, we couldn&apos;t have a function take an arbitrary type, so we settled on a macro:\n\n#define ASSIGN_INCR(p, val, type)  ((*((type) *)(p) = (val)), (p) += sizeof(type))\n\n\nBy using the comma operator we were able to use this in expressions or as statements as we wished:\n\nif (need_to_output_short)\n    ASSIGN_INCR(ptr, short_value, short);\n\nlatest_pos = ASSIGN_INCR(ptr, int_value, int);\n\nsend_buff(outbuff, (int)(ASSIGN_INCR(ptr, last_value, int) - outbuff));\n\n\nI&apos;m not suggesting any of these examples are good style!  Indeed, I seem to remember Steve McConnell&apos;s Code Complete advising against even using comma operators in a for loop: for readability and maintainability, the loop should be controlled by only one variable, and the expressions in the for line itself should only contain loop-control code, not other extra bits of initialisation or loop maintenance.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"It causes the evaluation of multiple statements, but uses only the last one as a resulting value (rvalue, I think).\n\nSo...\n\nint f() { return 7; }\nint g() { return 8; }\n\nint x = (printf(&quot;assigning x&quot;), f(), g() );\n\n\nshould result in x being set to 8.\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"As earlier answers have stated it evaluates all statements but uses the last one as the value of the expression. Personally I&apos;ve only found it useful in loop expressions:\n\nfor (tmp=0, i = MAX; i &gt; 0; i--)\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"The only place I&apos;ve seen it being useful is when you write a funky loop where you want to do multiple things in one of the expressions (probably the init expression or loop expression. Something like:\n\nbool arraysAreMirrored(int a1[], int a2[], size_t size)\n{\n  size_t i1, i2;\n  for(i1 = 0, i2 = size - 1; i1 &lt; size; i1++, i2--)\n  {\n    if(a1[i1] != a2[i2])\n    {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n\nPardon me if there are any syntax errors or if I mixed in anything that&apos;s not strict C. I&apos;m not arguing that the , operator is good form, but that&apos;s what you could use it for. In the case above I&apos;d probably use a while loop instead so the multiple expressions on init and loop would be more obvious. (And I&apos;d initialize i1 and i2 inline instead of declaring and then initializing.... blah blah blah.)\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"I&apos;m reviving this simply to address questions from @Rajesh and @JeffMercado which i think are very important since this is one of the top search engine hits.\n\nTake the following snippet of code for example \n\nint i = (5,4,3,2,1);\nint j;\nj = 5,4,3,2,1;\nprintf(&quot;%d %d\\n&quot;, i , j);\n\n\nIt will print\n\n1 5\n\n\nThe i case is handled as explained by most answers. All expressions are evaluated in left-to-right order but only the last one is assigned to i. The result of the ( expression )is1`. \n\nThe j case follows different precedence rules since , has the lowest operator precedence. Because of those rules, the compiler sees assignment-expression, constant, constant .... The expressions are again evaluated in left-to-right order and their side-effects stay visible, therefore, j is 5 as a result of j = 5.\n\nInterstingly, int j = 5,4,3,2,1; is not allowed by the language spec. An initializer expects an assignment-expression so a direct , operator is not allowed.\n\nHope this helps.\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/4f7b2847abfe82c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4f7b2847abfe82c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c0d2dcb5e85faf18.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-50e201fdaa1e0fd1.js" defer=""></script><script src="/_next/static/eGqQHYKGZKE-nXShFn8wX/_buildManifest.js" defer=""></script><script src="/_next/static/eGqQHYKGZKE-nXShFn8wX/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/what-does-the-comma-operator-do-1657388258021#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/what-does-the-comma-operator-do-1657388258021"><h1>What does the comma operator , do?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/comma-operator">comma-operator</a></div></div><div class="question-content mt-5">
                
<p>What does the <code>,</code> operator do in C?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/comma-operator">comma-operator</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The expression:</p>
<pre class="lang-c s-code-block"><code class="hljs language-c">(expression1,  expression2)
</code></pre>
<p>First <code>expression1</code> is evaluated, then <code>expression2</code> is evaluated, and the value of <code>expression2</code> is returned for the whole expression.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/comma-operator">comma-operator</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I've seen used most in <code>while</code> loops:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-built_in">string</span> s;
<span class="hljs-keyword">while</span>(read_string(s), s.len() &gt; <span class="hljs-number">5</span>)
{
   <span class="hljs-comment">//do something</span>
}
</code></pre>

<p>It will do the operation, then do a test based on a side-effect. The other way would be to do it like this:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-built_in">string</span> s;
read_string(s);
<span class="hljs-keyword">while</span>(s.len() &gt; <span class="hljs-number">5</span>)
{
   <span class="hljs-comment">//do something</span>
   read_string(s);
}
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/comma-operator">comma-operator</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The <a href="https://en.wikipedia.org/wiki/Comma_operator" rel="noreferrer">comma operator</a> will evaluate the left operand, discard the result and then evaluate the right operand and that will be the result. The <em>idiomatic</em> use as noted in the link is when initializing the variables used in a <code>for</code> loop, and it gives the following example:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">void</span> <span class="hljs-title function_">rev</span><span class="hljs-params">(<span class="hljs-type">char</span> *s, <span class="hljs-type">size_t</span> len)</span>
{
  <span class="hljs-type">char</span> *first;
  <span class="hljs-keyword">for</span> ( first = s, s += len - <span class="hljs-number">1</span>; s &gt;= first; --s)
      <span class="hljs-comment">/*^^^^^^^^^^^^^^^^^^^^^^^*/</span> 
      <span class="hljs-built_in">putchar</span>(*s);
}
</code></pre>

<p>Otherwise there are not many <em>great</em> uses of the <em>comma operator</em>, although it is easy to abuse to generate code that is hard to read and maintain.</p>

<p>From the <a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf" rel="noreferrer">draft C99 standard</a> the grammar is as follows:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c">expression:
  assignment-expression
  expression , assignment-expression
</code></pre>

<p>and <em>paragraph 2</em> says:</p>

<blockquote>
  <p>The <strong>left operand of a comma operator is evaluated as a void expression;</strong> there is a sequence point after its evaluation. Then the <strong>right operand is evaluated; the result has its type and value.</strong> <sup>97)</sup> If an attempt is made to modify the result of a comma operator or to access it after the next sequence point, the behavior is undefined.</p>
</blockquote>

<p><em>Footnote 97</em> says:</p>

<blockquote>
  <p>A comma operator does <strong>not yield an lvalue</strong>.</p>
</blockquote>

<p>which means you can not assign to the result of the <em>comma operator</em>.</p>

<p>It is important to note that the comma operator has the <a href="https://en.cppreference.com/w/c/language/operator_precedence" rel="noreferrer">lowest precedence</a> and therefore there are cases where using <code>()</code> can make a big difference, for example:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
    <span class="hljs-type">int</span> x, y ;

    x = <span class="hljs-number">1</span>, <span class="hljs-number">2</span> ;
    y = (<span class="hljs-number">3</span>,<span class="hljs-number">4</span>) ;

    <span class="hljs-built_in">printf</span>( <span class="hljs-string">"%d %d\n"</span>, x, y ) ;
}
</code></pre>

<p>will have the following output:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-number">1</span> <span class="hljs-number">4</span>
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/comma-operator">comma-operator</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The comma operator combines the two expressions either side of it into one, evaluating them both in left-to-right order.  The value of the right-hand side is returned as the value of the whole expression.
 <code>(expr1, expr2)</code> is like <code>{ expr1; expr2; }</code> but you can use the result of <code>expr2</code> in a function call or assignment.</p>

<p>It is often seen in <code>for</code> loops to initialise or maintain multiple variables like this:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-keyword">for</span> (low = <span class="hljs-number">0</span>, high = MAXSIZE; low &lt; high; low = newlow, high = newhigh)
{
    <span class="hljs-comment">/* do something with low and high and put new values
       in newlow and newhigh */</span>
}
</code></pre>

<p>Apart from this, I've only used it "in anger" in one other case, when wrapping up two operations that should always go together in a macro.  We had code that copied various binary values into a byte buffer for sending on a network, and a pointer maintained where we had got up to:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> outbuff[BUFFSIZE];
<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *ptr = outbuff;

*ptr++ = first_byte_value;
*ptr++ = second_byte_value;

send_buff(outbuff, (<span class="hljs-type">int</span>)(ptr - outbuff));
</code></pre>

<p>Where the values were <code>short</code>s or <code>int</code>s we did this:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c">*((<span class="hljs-type">short</span> *)ptr)++ = short_value;
*((<span class="hljs-type">int</span> *)ptr)++ = int_value;
</code></pre>

<p>Later we read that this was not really valid C, because <code>(short *)ptr</code> is no longer an l-value and can't be incremented, although our compiler at the time didn't mind.  To fix this, we split the expression in two:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c">*(<span class="hljs-type">short</span> *)ptr = short_value;
ptr += <span class="hljs-keyword">sizeof</span>(<span class="hljs-type">short</span>);
</code></pre>

<p>However, this approach relied on all developers remembering to put both statements in all the time.  We wanted a function where you could pass in the output pointer, the value and and the value's type.  This being C, not C++ with templates, we couldn't have a function take an arbitrary type, so we settled on a macro:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> ASSIGN_INCR(p, val, type)  ((*((type) *)(p) = (val)), (p) += sizeof(type))</span>
</code></pre>

<p>By using the comma operator we were able to use this in expressions or as statements as we wished:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-keyword">if</span> (need_to_output_short)
    ASSIGN_INCR(ptr, short_value, <span class="hljs-type">short</span>);

latest_pos = ASSIGN_INCR(ptr, int_value, <span class="hljs-type">int</span>);

send_buff(outbuff, (<span class="hljs-type">int</span>)(ASSIGN_INCR(ptr, last_value, <span class="hljs-type">int</span>) - outbuff));
</code></pre>

<p>I'm not suggesting any of these examples are good style!  Indeed, I seem to remember Steve McConnell's <em>Code Complete</em> advising against even using comma operators in a <code>for</code> loop: for readability and maintainability, the loop should be controlled by only one variable, and the expressions in the <code>for</code> line itself should only contain loop-control code, not other extra bits of initialisation or loop maintenance.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/comma-operator">comma-operator</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It causes the evaluation of multiple statements, but uses only the last one as a resulting value (rvalue, I think).</p>

<p>So...</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">7</span>; }
<span class="hljs-type">int</span> <span class="hljs-title function_">g</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">8</span>; }

<span class="hljs-type">int</span> x = (<span class="hljs-built_in">printf</span>(<span class="hljs-string">"assigning x"</span>), f(), g() );
</code></pre>

<p>should result in x being set to 8.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/comma-operator">comma-operator</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As earlier answers have stated it evaluates all statements but uses the last one as the value of the expression. Personally I've only found it useful in loop expressions:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-keyword">for</span> (tmp=<span class="hljs-number">0</span>, i = MAX; i &gt; <span class="hljs-number">0</span>; i--)
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/comma-operator">comma-operator</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The only place I've seen it being useful is when you write a funky loop where you want to do multiple things in one of the expressions (probably the init expression or loop expression. Something like:</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">bool</span> <span class="hljs-title function_">arraysAreMirrored</span><span class="hljs-params">(<span class="hljs-type">int</span> a1[], <span class="hljs-type">int</span> a2[], <span class="hljs-type">size_t</span> size)</span>
{
  <span class="hljs-type">size_t</span> i1, i2;
  <span class="hljs-keyword">for</span>(i1 = <span class="hljs-number">0</span>, i2 = size - <span class="hljs-number">1</span>; i1 &lt; size; i1++, i2--)
  {
    <span class="hljs-keyword">if</span>(a1[i1] != a2[i2])
    {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>

<p>Pardon me if there are any syntax errors or if I mixed in anything that's not strict C. I'm not arguing that the , operator is good form, but that's what you could use it for. In the case above I'd probably use a <code>while</code> loop instead so the multiple expressions on init and loop would be more obvious. (And I'd initialize i1 and i2 inline instead of declaring and then initializing.... blah blah blah.)</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/comma-operator">comma-operator</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I'm reviving this simply to address questions from @Rajesh and @JeffMercado which i think are very important since this is one of the top search engine hits.</p>

<p>Take the following snippet of code for example </p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-type">int</span> i = (<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>);
<span class="hljs-type">int</span> j;
j = <span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>;
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d %d\n"</span>, i , j);
</code></pre>

<p>It will print</p>

<pre class="lang-c s-code-block"><code class="hljs language-c"><span class="hljs-number">1</span> <span class="hljs-number">5</span>
</code></pre>

<p>The <code>i</code> case is handled as explained by most answers. All expressions are evaluated in left-to-right order but only the last one is assigned to <code>i</code>. The result of the <code>(</code> <em>expression</em> )<code>is</code>1`. </p>

<p>The <code>j</code> case follows different precedence rules since <code>,</code> has the lowest operator precedence. Because of those rules, the compiler sees <em>assignment-expression, constant, constant ...</em>. The expressions are again evaluated in left-to-right order and their side-effects stay visible, therefore, <code>j</code> is <code>5</code> as a result of <code>j = 5</code>.</p>

<p>Interstingly, <code>int j = 5,4,3,2,1;</code> is not allowed by the language spec. An <em>initializer</em> expects an <em>assignment-expression</em> so a direct <code>,</code> operator is not allowed.</p>

<p>Hope this helps.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-can-i-return-pivot-table-output-in-mysql-1657384715043">How can I return pivot table output in MySQL?</a><a href="/questions/what-is-the-difference-between-a-definition-and-a-declaration-1657387851618">What is the difference between a definition and a declaration?</a><a href="/questions/where-can-i-find-documentation-on-formatting-a-date-in-javascript-1657384878157">Where can I find documentation on formatting a date in JavaScript?</a><a href="/questions/how-do-i-use-arrays-in-c++-1657387456118">How do I use arrays in C++?</a><a href="/questions/c++-singleton-design-pattern-1657387830040">C++ Singleton design pattern</a><a href="/questions/why-aren&#x27;t-variable-length-arrays-part-of-the-c++-standard-1657384712975">Why aren&#x27;t variable-length arrays part of the C++ standard?</a><a href="/questions/javascript-closure-inside-loops-simple-practical-example-1657384278449">JavaScript closure inside loops â€“ simple practical example</a><a href="/questions/what-is-array-to-pointer-decay-1657384709608">What is array to pointer decay?</a><a href="/questions/%22cross-origin-requests-are-only-supported-for-http.%22-error-when-loading-a-local-file-1657387942403">&quot;Cross origin requests are only supported for HTTP.&quot; error when loading a local file</a><a href="/questions/is-there-a-css-parent-selector-1657384430692">Is there a CSS parent selector?</a><a href="/questions/why-is-my-spring-@autowired-field-null-1657384705291">Why is my Spring @Autowired field null?</a><a href="/questions/what-are-good-ways-to-prevent-sql-injection-duplicate-1657388431570">What are good ways to prevent SQL injection? [duplicate]</a><a href="/questions/what-is-a-smart-pointer-and-when-should-i-use-one-1657387905461">What is a smart pointer and when should I use one?</a><a href="/questions/when-does-sqliteopenhelper-oncreate()-onupgrade()-run-1657384883864">When does SQLiteOpenHelper onCreate() / onUpgrade() run?</a><a href="/questions/what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript-1657384601026">What is the most efficient way to deep clone an object in JavaScript?</a><a href="/questions/parsing-a-string-to-a-date-in-javascript-1657387782497">Parsing a string to a date in JavaScript</a><a href="/questions/how-to-include-a-php-variable-inside-a-mysql-statement-1657387669365">How to include a PHP variable inside a MySQL statement</a><a href="/questions/how-do-i-get-php-errors-to-display-1657384570095">How do I get PHP errors to display?</a><a href="/questions/ways-to-deal-with-document-under-iframe-1657388403345">Ways to deal with #document under iframe</a><a href="/questions/self-references-in-object-literals-initializers-1657384835356">Self-references in object literals / initializers</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;The expression:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;(expression1,  expression2)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;First \u0026lt;code\u0026gt;expression1\u0026lt;/code\u0026gt; is evaluated, then \u0026lt;code\u0026gt;expression2\u0026lt;/code\u0026gt; is evaluated, and the value of \u0026lt;code\u0026gt;expression2\u0026lt;/code\u0026gt; is returned for the whole expression.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;ve seen used most in \u0026lt;code\u0026gt;while\u0026lt;/code\u0026gt; loops:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; s;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt;(read_string(s), s.len() \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;)\n{\n   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//do something\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It will do the operation, then do a test based on a side-effect. The other way would be to do it like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; s;\nread_string(s);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt;(s.len() \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;)\n{\n   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//do something\u0026lt;/span\u0026gt;\n   read_string(s);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Comma_operator\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;comma operator\u0026lt;/a\u0026gt; will evaluate the left operand, discard the result and then evaluate the right operand and that will be the result. The \u0026lt;em\u0026gt;idiomatic\u0026lt;/em\u0026gt; use as noted in the link is when initializing the variables used in a \u0026lt;code\u0026gt;for\u0026lt;/code\u0026gt; loop, and it gives the following example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;rev\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *s, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;size_t\u0026lt;/span\u0026gt; len)\u0026lt;/span\u0026gt;\n{\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *first;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; ( first = s, s += len - \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;; s \u0026amp;gt;= first; --s)\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*^^^^^^^^^^^^^^^^^^^^^^^*/\u0026lt;/span\u0026gt; \n      \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;putchar\u0026lt;/span\u0026gt;(*s);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Otherwise there are not many \u0026lt;em\u0026gt;great\u0026lt;/em\u0026gt; uses of the \u0026lt;em\u0026gt;comma operator\u0026lt;/em\u0026gt;, although it is easy to abuse to generate code that is hard to read and maintain.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;From the \u0026lt;a href=\u0026quot;http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;draft C99 standard\u0026lt;/a\u0026gt; the grammar is as follows:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;expression:\n  assignment-expression\n  expression , assignment-expression\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and \u0026lt;em\u0026gt;paragraph 2\u0026lt;/em\u0026gt; says:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;The \u0026lt;strong\u0026gt;left operand of a comma operator is evaluated as a void expression;\u0026lt;/strong\u0026gt; there is a sequence point after its evaluation. Then the \u0026lt;strong\u0026gt;right operand is evaluated; the result has its type and value.\u0026lt;/strong\u0026gt; \u0026lt;sup\u0026gt;97)\u0026lt;/sup\u0026gt; If an attempt is made to modify the result of a comma operator or to access it after the next sequence point, the behavior is undefined.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Footnote 97\u0026lt;/em\u0026gt; says:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;A comma operator does \u0026lt;strong\u0026gt;not yield an lvalue\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;which means you can not assign to the result of the \u0026lt;em\u0026gt;comma operator\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It is important to note that the comma operator has the \u0026lt;a href=\u0026quot;https://en.cppreference.com/w/c/language/operator_precedence\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;lowest precedence\u0026lt;/a\u0026gt; and therefore there are cases where using \u0026lt;code\u0026gt;()\u0026lt;/code\u0026gt; can make a big difference, for example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;stdio.h\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; x, y ;\n\n    x = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; ;\n    y = (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;) ;\n\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%d %d\\n\u0026quot;\u0026lt;/span\u0026gt;, x, y ) ;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;will have the following output:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The comma operator combines the two expressions either side of it into one, evaluating them both in left-to-right order.  The value of the right-hand side is returned as the value of the whole expression.\n \u0026lt;code\u0026gt;(expr1, expr2)\u0026lt;/code\u0026gt; is like \u0026lt;code\u0026gt;{ expr1; expr2; }\u0026lt;/code\u0026gt; but you can use the result of \u0026lt;code\u0026gt;expr2\u0026lt;/code\u0026gt; in a function call or assignment.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It is often seen in \u0026lt;code\u0026gt;for\u0026lt;/code\u0026gt; loops to initialise or maintain multiple variables like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (low = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, high = MAXSIZE; low \u0026amp;lt; high; low = newlow, high = newhigh)\n{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* do something with low and high and put new values\n       in newlow and newhigh */\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Apart from this, I\u0026apos;ve only used it \u0026quot;in anger\u0026quot; in one other case, when wrapping up two operations that should always go together in a macro.  We had code that copied various binary values into a byte buffer for sending on a network, and a pointer maintained where we had got up to:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; outbuff[BUFFSIZE];\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *ptr = outbuff;\n\n*ptr++ = first_byte_value;\n*ptr++ = second_byte_value;\n\nsend_buff(outbuff, (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;)(ptr - outbuff));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Where the values were \u0026lt;code\u0026gt;short\u0026lt;/code\u0026gt;s or \u0026lt;code\u0026gt;int\u0026lt;/code\u0026gt;s we did this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;*((\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; *)ptr)++ = short_value;\n*((\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; *)ptr)++ = int_value;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Later we read that this was not really valid C, because \u0026lt;code\u0026gt;(short *)ptr\u0026lt;/code\u0026gt; is no longer an l-value and can\u0026apos;t be incremented, although our compiler at the time didn\u0026apos;t mind.  To fix this, we split the expression in two:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;*(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; *)ptr = short_value;\nptr += \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;sizeof\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;However, this approach relied on all developers remembering to put both statements in all the time.  We wanted a function where you could pass in the output pointer, the value and and the value\u0026apos;s type.  This being C, not C++ with templates, we couldn\u0026apos;t have a function take an arbitrary type, so we settled on a macro:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; ASSIGN_INCR(p, val, type)  ((*((type) *)(p) = (val)), (p) += sizeof(type))\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;By using the comma operator we were able to use this in expressions or as statements as we wished:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (need_to_output_short)\n    ASSIGN_INCR(ptr, short_value, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt;);\n\nlatest_pos = ASSIGN_INCR(ptr, int_value, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;);\n\nsend_buff(outbuff, (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;)(ASSIGN_INCR(ptr, last_value, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;) - outbuff));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I\u0026apos;m not suggesting any of these examples are good style!  Indeed, I seem to remember Steve McConnell\u0026apos;s \u0026lt;em\u0026gt;Code Complete\u0026lt;/em\u0026gt; advising against even using comma operators in a \u0026lt;code\u0026gt;for\u0026lt;/code\u0026gt; loop: for readability and maintainability, the loop should be controlled by only one variable, and the expressions in the \u0026lt;code\u0026gt;for\u0026lt;/code\u0026gt; line itself should only contain loop-control code, not other extra bits of initialisation or loop maintenance.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It causes the evaluation of multiple statements, but uses only the last one as a resulting value (rvalue, I think).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So...\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;; }\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;g\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;; }\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; x = (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;assigning x\u0026quot;\u0026lt;/span\u0026gt;), f(), g() );\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;should result in x being set to 8.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As earlier answers have stated it evaluates all statements but uses the last one as the value of the expression. Personally I\u0026apos;ve only found it useful in loop expressions:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (tmp=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, i = MAX; i \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i--)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The only place I\u0026apos;ve seen it being useful is when you write a funky loop where you want to do multiple things in one of the expressions (probably the init expression or loop expression. Something like:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;arraysAreMirrored\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; a1[], \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; a2[], \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;size_t\u0026lt;/span\u0026gt; size)\u0026lt;/span\u0026gt;\n{\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;size_t\u0026lt;/span\u0026gt; i1, i2;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(i1 = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, i2 = size - \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;; i1 \u0026amp;lt; size; i1++, i2--)\n  {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(a1[i1] != a2[i2])\n    {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n    }\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Pardon me if there are any syntax errors or if I mixed in anything that\u0026apos;s not strict C. I\u0026apos;m not arguing that the , operator is good form, but that\u0026apos;s what you could use it for. In the case above I\u0026apos;d probably use a \u0026lt;code\u0026gt;while\u0026lt;/code\u0026gt; loop instead so the multiple expressions on init and loop would be more obvious. (And I\u0026apos;d initialize i1 and i2 inline instead of declaring and then initializing.... blah blah blah.)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I\u0026apos;m reviving this simply to address questions from @Rajesh and @JeffMercado which i think are very important since this is one of the top search engine hits.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Take the following snippet of code for example \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i = (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; j;\nj = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%d %d\\n\u0026quot;\u0026lt;/span\u0026gt;, i , j);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It will print\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-c s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-c\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;i\u0026lt;/code\u0026gt; case is handled as explained by most answers. All expressions are evaluated in left-to-right order but only the last one is assigned to \u0026lt;code\u0026gt;i\u0026lt;/code\u0026gt;. The result of the \u0026lt;code\u0026gt;(\u0026lt;/code\u0026gt; \u0026lt;em\u0026gt;expression\u0026lt;/em\u0026gt; )\u0026lt;code\u0026gt;is\u0026lt;/code\u0026gt;1`. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;j\u0026lt;/code\u0026gt; case follows different precedence rules since \u0026lt;code\u0026gt;,\u0026lt;/code\u0026gt; has the lowest operator precedence. Because of those rules, the compiler sees \u0026lt;em\u0026gt;assignment-expression, constant, constant ...\u0026lt;/em\u0026gt;. The expressions are again evaluated in left-to-right order and their side-effects stay visible, therefore, \u0026lt;code\u0026gt;j\u0026lt;/code\u0026gt; is \u0026lt;code\u0026gt;5\u0026lt;/code\u0026gt; as a result of \u0026lt;code\u0026gt;j = 5\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Interstingly, \u0026lt;code\u0026gt;int j = 5,4,3,2,1;\u0026lt;/code\u0026gt; is not allowed by the language spec. An \u0026lt;em\u0026gt;initializer\u0026lt;/em\u0026gt; expects an \u0026lt;em\u0026gt;assignment-expression\u0026lt;/em\u0026gt; so a direct \u0026lt;code\u0026gt;,\u0026lt;/code\u0026gt; operator is not allowed.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Hope this helps.\u0026lt;/p\u0026gt;\n    "],"id":518,"title":"What does the comma operator , do?","content":"\n                \n\u0026lt;p\u0026gt;What does the \u0026lt;code\u0026gt;,\u0026lt;/code\u0026gt; operator do in C?\u0026lt;/p\u0026gt;\n    ","slug":"what-does-the-comma-operator-do-1657388258021","postType":"QUESTION","createdAt":"2022-07-09T17:37:38.000Z","updatedAt":"2022-07-09T17:37:38.000Z","tags":[{"id":2563,"name":"comma-operator","slug":"comma-operator","createdAt":"2022-07-09T17:37:38.000Z","updatedAt":"2022-07-09T17:37:38.000Z","Questions_Tags":{"questionId":518,"tagId":2563}}],"relatedQuestions":[{"title":"What does the comma operator , do?","slug":"what-does-the-comma-operator-do-1657388258021","tags":[{"name":"comma-operator","Questions_Tags":{"questionId":518,"tagId":2563}}]}]},"randomQuestions":[{"title":"How can I return pivot table output in MySQL?","slug":"how-can-i-return-pivot-table-output-in-mysql-1657384715043"},{"title":"What is the difference between a definition and a declaration?","slug":"what-is-the-difference-between-a-definition-and-a-declaration-1657387851618"},{"title":"Where can I find documentation on formatting a date in JavaScript?","slug":"where-can-i-find-documentation-on-formatting-a-date-in-javascript-1657384878157"},{"title":"How do I use arrays in C++?","slug":"how-do-i-use-arrays-in-c++-1657387456118"},{"title":"C++ Singleton design pattern","slug":"c++-singleton-design-pattern-1657387830040"},{"title":"Why aren't variable-length arrays part of the C++ standard?","slug":"why-aren't-variable-length-arrays-part-of-the-c++-standard-1657384712975"},{"title":"JavaScript closure inside loops â€“ simple practical example","slug":"javascript-closure-inside-loops-simple-practical-example-1657384278449"},{"title":"What is array to pointer decay?","slug":"what-is-array-to-pointer-decay-1657384709608"},{"title":"\"Cross origin requests are only supported for HTTP.\" error when loading a local file","slug":"\"cross-origin-requests-are-only-supported-for-http.\"-error-when-loading-a-local-file-1657387942403"},{"title":"Is there a CSS parent selector?","slug":"is-there-a-css-parent-selector-1657384430692"},{"title":"Why is my Spring @Autowired field null?","slug":"why-is-my-spring-@autowired-field-null-1657384705291"},{"title":"What are good ways to prevent SQL injection? [duplicate]","slug":"what-are-good-ways-to-prevent-sql-injection-duplicate-1657388431570"},{"title":"What is a smart pointer and when should I use one?","slug":"what-is-a-smart-pointer-and-when-should-i-use-one-1657387905461"},{"title":"When does SQLiteOpenHelper onCreate() / onUpgrade() run?","slug":"when-does-sqliteopenhelper-oncreate()-onupgrade()-run-1657384883864"},{"title":"What is the most efficient way to deep clone an object in JavaScript?","slug":"what-is-the-most-efficient-way-to-deep-clone-an-object-in-javascript-1657384601026"},{"title":"Parsing a string to a date in JavaScript","slug":"parsing-a-string-to-a-date-in-javascript-1657387782497"},{"title":"How to include a PHP variable inside a MySQL statement","slug":"how-to-include-a-php-variable-inside-a-mysql-statement-1657387669365"},{"title":"How do I get PHP errors to display?","slug":"how-do-i-get-php-errors-to-display-1657384570095"},{"title":"Ways to deal with #document under iframe","slug":"ways-to-deal-with-document-under-iframe-1657388403345"},{"title":"Self-references in object literals / initializers","slug":"self-references-in-object-literals-initializers-1657384835356"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"what-does-the-comma-operator-do-1657388258021"},"buildId":"eGqQHYKGZKE-nXShFn8wX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>