<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="opengl,matrix,3d,solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457","name":"Questions"}}]}</script><title>How do I compose a rotation matrix with human readable angles from scratch? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="The one thing that has always hindered me from doing 3D programming is failing to understand how math works. I can go along with math fine in programming flow using methods and functions, then its all clear and logical to me, but in mathematical notation, I just can&#x27;t make heads or tails from it.

I have been reading websites, a watching videos of institutes trying to explain this, but they all use mathematical notation and I simply get lost in it, my mind won&#x27;t translate it to something understandable. I might have a defect there.

Also, Just using someone&#x27;s code isn&#x27;t my interest, I want to understand the mechanics behind it, the logic. I&#x27;d be happy to use someone else&#x27;s code, but I really want to understand how it works.

The question

Can you explain to me in simple terms without mathematical notation, just programming notation/functions/psuedocode, how to implement a matrix transform along all 3 axes?

Ideally what I want is the material/understanding to write a method/object where I can define the angles of 3 axes similar to glRotate to rotate the collection of quads/triangles I have. (I am trying to program a 3D rotation of a cube shapes without having access to OpenGL functions to do it for me because this is done in one draw call every time something changes in the display list.)

What have I done?

I have attempted at making a 90 degrees transform function to get the hang of the math but failed utterly in making a proper matrix which in theory should have been the simplest to do. You can see my failed attempt in all its glory on http://jsfiddle.net/bLfg0tj8/5/

Show code snippet

Vec3 = function(x,y,z) {
    this.x = x;
    this.y = y;
    this.z = z;
}
Matrix = function Matrix() {
    this.matrixPoints = new Array();    
    this.rotationPoint = new Vec3(0,0,0);
    this.rotationAngle = 90;
}
Matrix.prototype.addVector = function(vector) {
    this.matrixPoints.push(vector);
}
Matrix.prototype.setRotationPoint = function(vector) {
    this.rotationPoint = vector; 
}
Matrix.prototype.setRotationAngle = function(angle) {
    this.rotationAngle = angle;
}
Matrix.prototype.populate = function() {
    translateToOrigin =     [[1,0,0-this.rotationPoint.x],
                                  [0,1,0-this.rotationPoint.y],
                                  [0,0,0-this.rotationPoint.z]];
    rotationMatrix =         [[0,-1,0],
                                  [0,1,0],
                                  [0,0,1]];
    translateEnd =         [[1,0,this.rotationPoint.x],
                                  [0,1,this.rotationPoint.y],
                                  [0,0,this.rotationPoint.z]];
    currentColumn = 0;
    currentRow = 0;
    this.combomatrix = this.mergeMatrices(this.mergeMatrices(translateEnd,rotationMatrix),
                                          translateToOrigin);
}
Matrix.prototype.transform = function() {
    newmatrix = new Array();
    for(c = 0;c&lt;this.matrixPoints.length;c++) {
        newmatrix.push(this.applyToVertex(this.matrixPoints[c]));
    }
    return newmatrix;
}
Matrix.prototype.applyToVertex = function(vertex) {
    ret = new Vec3(vertex.x,vertex.y,vertex.z);
    ret.x = ret.x + this.combomatrix[0][0] * vertex.x +
            this.combomatrix[0][1] * vertex.y +
            this.combomatrix[0][2] * vertex.z;
    
    ret.y = ret.y + this.combomatrix[1][0] * vertex.x +
            this.combomatrix[1][1] * vertex.y +
            this.combomatrix[1][2] * vertex.z;
    
    ret.z = ret.z + this.combomatrix[2][0] * vertex.x +
            this.combomatrix[2][1] * vertex.y +
            this.combomatrix[2][2] * vertex.z;
    return ret;
}
Matrix.prototype.mergeMatrices = function(lastStep, oneInFront) {
    step1 = [[0,0,0],[0,0,0],[0,0,0]];
    step1[0][0] =   lastStep[0][0] * oneInFront[0][0] + 
                    lastStep[0][1] * oneInFront[1][0] + 
                    lastStep[0][2] * oneInFront[2][0];
    
    step1[0][1] =   lastStep[0][0] * oneInFront[0][1] + 
                    lastStep[0][1] * oneInFront[1][1] + 
                    lastStep[0][2] * oneInFront[2][1];
    
    step1[0][2] =   lastStep[0][0] * oneInFront[0][2] + 
                    lastStep[0][1] * oneInFront[1][2] + 
                    lastStep[0][2] * oneInFront[2][2];
    //============================================================
    step1[1][0] =   lastStep[1][0] * oneInFront[0][0] + 
                    lastStep[1][1] * oneInFront[1][0] + 
                    lastStep[1][2] * oneInFront[2][0];
    
    step1[1][1] =   lastStep[1][0] * oneInFront[0][1] + 
                    lastStep[1][1] * oneInFront[1][1] + 
                    lastStep[1][2] * oneInFront[2][1];
    
    step1[1][2] =   lastStep[1][0] * oneInFront[0][2] + 
                    lastStep[1][1] * oneInFront[1][2] + 
                    lastStep[1][2] * oneInFront[2][2];
    //============================================================
    step1[2][0] =   lastStep[2][0] * oneInFront[0][0] + 
                    lastStep[2][1] * oneInFront[1][0] + 
                    lastStep[2][2] * oneInFront[2][0];
    
    step1[2][1] =   lastStep[2][0] * oneInFront[0][1] + 
                    lastStep[2][1] * oneInFront[1][1] + 
                    lastStep[2][2] * oneInFront[2][1];
    
    step1[2][2] =   lastStep[2][0] * oneInFront[0][2] + 
                    lastStep[2][1] * oneInFront[1][2] + 
                    lastStep[2][2] * oneInFront[2][2];
    return step1;
}
Matrix.prototype.getCurrentMatrix = function() {
    return this.matrixPoints;
}
myvectors = [new Vec3(50,50,0), new Vec3(20,80,0), new Vec3(80, 80, 0)];

function drawVectors(vectors,color) {
    for(c=0;c&lt;vectors.length;c++) {
        document.getElementById(&quot;whoa&quot;).innerHTML += &#x27;&lt;div style=&quot;color:&#x27;+color+&#x27;;position:absolute;left:&#x27;+vectors[c].x+&#x27;px; top:&#x27;+vectors[c].y+&#x27;px;z-index:&#x27;+vectors[c].z+&#x27;;&quot;&gt;(&#x27;+c+&#x27;).&lt;/div&gt;&#x27;;
    }
}
matrix = new Matrix();
for(c=0;c&lt;myvectors.length;c++) {
    matrix.addVector(myvectors[c]);
}
matrix.setRotationPoint(new Vec3(50,70,0));
matrix.populate();
somematrix = matrix.transform();
drawVectors(matrix.getCurrentMatrix(),&quot;lime&quot;); // draw current matrix that was hand coded
drawVectors([matrix.rotationPoint],&#x27;white&#x27;); // draw rotation point
drawVectors(somematrix,&quot;red&quot;); // transformed matrix... somehow two points merge
&lt;div id=&quot;whoa&quot; style=&quot;position:relative;top:50px;left:150px;background-color:green;color:red;width:400px;height:300px;&quot;&gt;
    &amp;nbsp;
&lt;/div&gt;
 Run code snippetHide resultsExpand snippet



The green text is the original triangle, the white point the center point, the red points the failed transformation(I think, because it isn&#x27;t aligned around the center point). The tutorial I was in thought me how to combine matrices into a combined matrix, but I guess I screwed up somewhere.

As I said, it&#x27;s really really hard for me to understand mathematical notation and speak. And not helping is that most teachers skip parts of the explanation. Took me 2 hours alone to understand when multiplying matrices you need to add each step together instead of just keep on multiplying. Yay for explanations.

A practical example what I work with/want to work with

For example I have a cube, loaded from a wavefront obj file located in the world at 

x = 50
y = 100
z = 200


The cube is drawn using quads and some uv mapping. No problems here. It renders beautifully with all the textures showing correctly.

These are the location coordinates for each &quot;face&quot; of the cube which is drawn using a quad.

// Front face
-1.0, -1.0,  1.0,
 1.0, -1.0,  1.0,
 1.0,  1.0,  1.0,
-1.0,  1.0,  1.0,

// Back face
-1.0, -1.0, -1.0,
-1.0,  1.0, -1.0,
 1.0,  1.0, -1.0,
 1.0, -1.0, -1.0,

// Top face
-1.0,  1.0, -1.0,
-1.0,  1.0,  1.0,
 1.0,  1.0,  1.0,
 1.0,  1.0, -1.0,

// Bottom face
-1.0, -1.0, -1.0,
 1.0, -1.0, -1.0,
 1.0, -1.0,  1.0,
-1.0, -1.0,  1.0,

// Right face
 1.0, -1.0, -1.0,
 1.0,  1.0, -1.0,
 1.0,  1.0,  1.0,
 1.0, -1.0,  1.0,

// Left face
-1.0, -1.0, -1.0,
-1.0, -1.0,  1.0,
-1.0,  1.0,  1.0,
-1.0,  1.0, -1.0


So this works all great. But what if I want this cube rotated 90 degrees along the x axis and 45 degrees around the z axis? I cannot use glRotate because at the moment I pass the data to the tesselator object I cannot do any matrix transforms to it via the opengl functions because it&#x27;s just taking in the data, not actually rendering it per se.

The way the data is stored is as following:

WaveFrontObject()
   |
   |-&gt; Groups(String groupname)
        |
        |-&gt; Faces()
              |
              |-&gt; Vertex(float x, float y, float z)[] 
              |-&gt; Float UVmap[] corresponding to each vertex
              |-&gt; drawFace() // Draws the face as a quad or triangle


So each of the above coordinates I gave is stored as a face of the wavefront object in the group &quot;cube&quot;.

When the cube is added to the tesselator it is translated to the right coordinates in the world and it renders normal.

It always renders the same however. If I would want it to render at an angle I would have to make a seperate wavefront object at this moment to be able to do that. In my opnion that is madness to do when it can be solved with some math.

Needed in the answer


Explanation step by step how to build a translation matrix and an attempt to explain the math to me.
Explanation how to apply the translation matrix to the quads/triangles in the faces whist they keep oriented around the center of their location 

x = 50.5
y = 100.5
z = 200.5
Some example/pseudo code to go along with the explanation.


The used programming language used to explain isn&#x27;t really relevant as long as its in the C family

Please try to stay away from mathematical notation/speak. I don&#x27;t know what alpha beta, thetha is, I do know what x axis, y axis and z axis is. I do know what angles are, but I do not know the names mathematicians find for it.

If you wish to use math names, please explain to me what they are in the 3D world/code and how they are formed/calculated.

I simply want to make a method/object along the lines of

Matrix.transformVertices(vertices[], 90deg x, 45 deg y, 0 deg z);

    "/><meta property="og:title" content="How do I compose a rotation matrix with human readable angles from scratch? | Solution Checker"/><meta property="og:description" content="The one thing that has always hindered me from doing 3D programming is failing to understand how math works. I can go along with math fine in programming flow using methods and functions, then its all clear and logical to me, but in mathematical notation, I just can&#x27;t make heads or tails from it.

I have been reading websites, a watching videos of institutes trying to explain this, but they all use mathematical notation and I simply get lost in it, my mind won&#x27;t translate it to something understandable. I might have a defect there.

Also, Just using someone&#x27;s code isn&#x27;t my interest, I want to understand the mechanics behind it, the logic. I&#x27;d be happy to use someone else&#x27;s code, but I really want to understand how it works.

The question

Can you explain to me in simple terms without mathematical notation, just programming notation/functions/psuedocode, how to implement a matrix transform along all 3 axes?

Ideally what I want is the material/understanding to write a method/object where I can define the angles of 3 axes similar to glRotate to rotate the collection of quads/triangles I have. (I am trying to program a 3D rotation of a cube shapes without having access to OpenGL functions to do it for me because this is done in one draw call every time something changes in the display list.)

What have I done?

I have attempted at making a 90 degrees transform function to get the hang of the math but failed utterly in making a proper matrix which in theory should have been the simplest to do. You can see my failed attempt in all its glory on http://jsfiddle.net/bLfg0tj8/5/

Show code snippet

Vec3 = function(x,y,z) {
    this.x = x;
    this.y = y;
    this.z = z;
}
Matrix = function Matrix() {
    this.matrixPoints = new Array();    
    this.rotationPoint = new Vec3(0,0,0);
    this.rotationAngle = 90;
}
Matrix.prototype.addVector = function(vector) {
    this.matrixPoints.push(vector);
}
Matrix.prototype.setRotationPoint = function(vector) {
    this.rotationPoint = vector; 
}
Matrix.prototype.setRotationAngle = function(angle) {
    this.rotationAngle = angle;
}
Matrix.prototype.populate = function() {
    translateToOrigin =     [[1,0,0-this.rotationPoint.x],
                                  [0,1,0-this.rotationPoint.y],
                                  [0,0,0-this.rotationPoint.z]];
    rotationMatrix =         [[0,-1,0],
                                  [0,1,0],
                                  [0,0,1]];
    translateEnd =         [[1,0,this.rotationPoint.x],
                                  [0,1,this.rotationPoint.y],
                                  [0,0,this.rotationPoint.z]];
    currentColumn = 0;
    currentRow = 0;
    this.combomatrix = this.mergeMatrices(this.mergeMatrices(translateEnd,rotationMatrix),
                                          translateToOrigin);
}
Matrix.prototype.transform = function() {
    newmatrix = new Array();
    for(c = 0;c&lt;this.matrixPoints.length;c++) {
        newmatrix.push(this.applyToVertex(this.matrixPoints[c]));
    }
    return newmatrix;
}
Matrix.prototype.applyToVertex = function(vertex) {
    ret = new Vec3(vertex.x,vertex.y,vertex.z);
    ret.x = ret.x + this.combomatrix[0][0] * vertex.x +
            this.combomatrix[0][1] * vertex.y +
            this.combomatrix[0][2] * vertex.z;
    
    ret.y = ret.y + this.combomatrix[1][0] * vertex.x +
            this.combomatrix[1][1] * vertex.y +
            this.combomatrix[1][2] * vertex.z;
    
    ret.z = ret.z + this.combomatrix[2][0] * vertex.x +
            this.combomatrix[2][1] * vertex.y +
            this.combomatrix[2][2] * vertex.z;
    return ret;
}
Matrix.prototype.mergeMatrices = function(lastStep, oneInFront) {
    step1 = [[0,0,0],[0,0,0],[0,0,0]];
    step1[0][0] =   lastStep[0][0] * oneInFront[0][0] + 
                    lastStep[0][1] * oneInFront[1][0] + 
                    lastStep[0][2] * oneInFront[2][0];
    
    step1[0][1] =   lastStep[0][0] * oneInFront[0][1] + 
                    lastStep[0][1] * oneInFront[1][1] + 
                    lastStep[0][2] * oneInFront[2][1];
    
    step1[0][2] =   lastStep[0][0] * oneInFront[0][2] + 
                    lastStep[0][1] * oneInFront[1][2] + 
                    lastStep[0][2] * oneInFront[2][2];
    //============================================================
    step1[1][0] =   lastStep[1][0] * oneInFront[0][0] + 
                    lastStep[1][1] * oneInFront[1][0] + 
                    lastStep[1][2] * oneInFront[2][0];
    
    step1[1][1] =   lastStep[1][0] * oneInFront[0][1] + 
                    lastStep[1][1] * oneInFront[1][1] + 
                    lastStep[1][2] * oneInFront[2][1];
    
    step1[1][2] =   lastStep[1][0] * oneInFront[0][2] + 
                    lastStep[1][1] * oneInFront[1][2] + 
                    lastStep[1][2] * oneInFront[2][2];
    //============================================================
    step1[2][0] =   lastStep[2][0] * oneInFront[0][0] + 
                    lastStep[2][1] * oneInFront[1][0] + 
                    lastStep[2][2] * oneInFront[2][0];
    
    step1[2][1] =   lastStep[2][0] * oneInFront[0][1] + 
                    lastStep[2][1] * oneInFront[1][1] + 
                    lastStep[2][2] * oneInFront[2][1];
    
    step1[2][2] =   lastStep[2][0] * oneInFront[0][2] + 
                    lastStep[2][1] * oneInFront[1][2] + 
                    lastStep[2][2] * oneInFront[2][2];
    return step1;
}
Matrix.prototype.getCurrentMatrix = function() {
    return this.matrixPoints;
}
myvectors = [new Vec3(50,50,0), new Vec3(20,80,0), new Vec3(80, 80, 0)];

function drawVectors(vectors,color) {
    for(c=0;c&lt;vectors.length;c++) {
        document.getElementById(&quot;whoa&quot;).innerHTML += &#x27;&lt;div style=&quot;color:&#x27;+color+&#x27;;position:absolute;left:&#x27;+vectors[c].x+&#x27;px; top:&#x27;+vectors[c].y+&#x27;px;z-index:&#x27;+vectors[c].z+&#x27;;&quot;&gt;(&#x27;+c+&#x27;).&lt;/div&gt;&#x27;;
    }
}
matrix = new Matrix();
for(c=0;c&lt;myvectors.length;c++) {
    matrix.addVector(myvectors[c]);
}
matrix.setRotationPoint(new Vec3(50,70,0));
matrix.populate();
somematrix = matrix.transform();
drawVectors(matrix.getCurrentMatrix(),&quot;lime&quot;); // draw current matrix that was hand coded
drawVectors([matrix.rotationPoint],&#x27;white&#x27;); // draw rotation point
drawVectors(somematrix,&quot;red&quot;); // transformed matrix... somehow two points merge
&lt;div id=&quot;whoa&quot; style=&quot;position:relative;top:50px;left:150px;background-color:green;color:red;width:400px;height:300px;&quot;&gt;
    &amp;nbsp;
&lt;/div&gt;
 Run code snippetHide resultsExpand snippet



The green text is the original triangle, the white point the center point, the red points the failed transformation(I think, because it isn&#x27;t aligned around the center point). The tutorial I was in thought me how to combine matrices into a combined matrix, but I guess I screwed up somewhere.

As I said, it&#x27;s really really hard for me to understand mathematical notation and speak. And not helping is that most teachers skip parts of the explanation. Took me 2 hours alone to understand when multiplying matrices you need to add each step together instead of just keep on multiplying. Yay for explanations.

A practical example what I work with/want to work with

For example I have a cube, loaded from a wavefront obj file located in the world at 

x = 50
y = 100
z = 200


The cube is drawn using quads and some uv mapping. No problems here. It renders beautifully with all the textures showing correctly.

These are the location coordinates for each &quot;face&quot; of the cube which is drawn using a quad.

// Front face
-1.0, -1.0,  1.0,
 1.0, -1.0,  1.0,
 1.0,  1.0,  1.0,
-1.0,  1.0,  1.0,

// Back face
-1.0, -1.0, -1.0,
-1.0,  1.0, -1.0,
 1.0,  1.0, -1.0,
 1.0, -1.0, -1.0,

// Top face
-1.0,  1.0, -1.0,
-1.0,  1.0,  1.0,
 1.0,  1.0,  1.0,
 1.0,  1.0, -1.0,

// Bottom face
-1.0, -1.0, -1.0,
 1.0, -1.0, -1.0,
 1.0, -1.0,  1.0,
-1.0, -1.0,  1.0,

// Right face
 1.0, -1.0, -1.0,
 1.0,  1.0, -1.0,
 1.0,  1.0,  1.0,
 1.0, -1.0,  1.0,

// Left face
-1.0, -1.0, -1.0,
-1.0, -1.0,  1.0,
-1.0,  1.0,  1.0,
-1.0,  1.0, -1.0


So this works all great. But what if I want this cube rotated 90 degrees along the x axis and 45 degrees around the z axis? I cannot use glRotate because at the moment I pass the data to the tesselator object I cannot do any matrix transforms to it via the opengl functions because it&#x27;s just taking in the data, not actually rendering it per se.

The way the data is stored is as following:

WaveFrontObject()
   |
   |-&gt; Groups(String groupname)
        |
        |-&gt; Faces()
              |
              |-&gt; Vertex(float x, float y, float z)[] 
              |-&gt; Float UVmap[] corresponding to each vertex
              |-&gt; drawFace() // Draws the face as a quad or triangle


So each of the above coordinates I gave is stored as a face of the wavefront object in the group &quot;cube&quot;.

When the cube is added to the tesselator it is translated to the right coordinates in the world and it renders normal.

It always renders the same however. If I would want it to render at an angle I would have to make a seperate wavefront object at this moment to be able to do that. In my opnion that is madness to do when it can be solved with some math.

Needed in the answer


Explanation step by step how to build a translation matrix and an attempt to explain the math to me.
Explanation how to apply the translation matrix to the quads/triangles in the faces whist they keep oriented around the center of their location 

x = 50.5
y = 100.5
z = 200.5
Some example/pseudo code to go along with the explanation.


The used programming language used to explain isn&#x27;t really relevant as long as its in the C family

Please try to stay away from mathematical notation/speak. I don&#x27;t know what alpha beta, thetha is, I do know what x axis, y axis and z axis is. I do know what angles are, but I do not know the names mathematicians find for it.

If you wish to use math names, please explain to me what they are in the 3D world/code and how they are formed/calculated.

I simply want to make a method/object along the lines of

Matrix.transformVertices(vertices[], 90deg x, 45 deg y, 0 deg z);

    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How do I compose a rotation matrix with human readable angles from scratch?","text":"The one thing that has always hindered me from doing 3D programming is failing to understand how math works. I can go along with math fine in programming flow using methods and functions, then its all clear and logical to me, but in mathematical notation, I just can&apos;t make heads or tails from it.\n\nI have been reading websites, a watching videos of institutes trying to explain this, but they all use mathematical notation and I simply get lost in it, my mind won&apos;t translate it to something understandable. I might have a defect there.\n\nAlso, Just using someone&apos;s code isn&apos;t my interest, I want to understand the mechanics behind it, the logic. I&apos;d be happy to use someone else&apos;s code, but I really want to understand how it works.\n\nThe question\n\nCan you explain to me in simple terms without mathematical notation, just programming notation/functions/psuedocode, how to implement a matrix transform along all 3 axes?\n\nIdeally what I want is the material/understanding to write a method/object where I can define the angles of 3 axes similar to glRotate to rotate the collection of quads/triangles I have. (I am trying to program a 3D rotation of a cube shapes without having access to OpenGL functions to do it for me because this is done in one draw call every time something changes in the display list.)\n\nWhat have I done?\n\nI have attempted at making a 90 degrees transform function to get the hang of the math but failed utterly in making a proper matrix which in theory should have been the simplest to do. You can see my failed attempt in all its glory on http://jsfiddle.net/bLfg0tj8/5/\n\nShow code snippet\n\nVec3 = function(x,y,z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n}\nMatrix = function Matrix() {\n    this.matrixPoints = new Array();    \n    this.rotationPoint = new Vec3(0,0,0);\n    this.rotationAngle = 90;\n}\nMatrix.prototype.addVector = function(vector) {\n    this.matrixPoints.push(vector);\n}\nMatrix.prototype.setRotationPoint = function(vector) {\n    this.rotationPoint = vector; \n}\nMatrix.prototype.setRotationAngle = function(angle) {\n    this.rotationAngle = angle;\n}\nMatrix.prototype.populate = function() {\n    translateToOrigin =     [[1,0,0-this.rotationPoint.x],\n                                  [0,1,0-this.rotationPoint.y],\n                                  [0,0,0-this.rotationPoint.z]];\n    rotationMatrix =         [[0,-1,0],\n                                  [0,1,0],\n                                  [0,0,1]];\n    translateEnd =         [[1,0,this.rotationPoint.x],\n                                  [0,1,this.rotationPoint.y],\n                                  [0,0,this.rotationPoint.z]];\n    currentColumn = 0;\n    currentRow = 0;\n    this.combomatrix = this.mergeMatrices(this.mergeMatrices(translateEnd,rotationMatrix),\n                                          translateToOrigin);\n}\nMatrix.prototype.transform = function() {\n    newmatrix = new Array();\n    for(c = 0;c&lt;this.matrixPoints.length;c++) {\n        newmatrix.push(this.applyToVertex(this.matrixPoints[c]));\n    }\n    return newmatrix;\n}\nMatrix.prototype.applyToVertex = function(vertex) {\n    ret = new Vec3(vertex.x,vertex.y,vertex.z);\n    ret.x = ret.x + this.combomatrix[0][0] * vertex.x +\n            this.combomatrix[0][1] * vertex.y +\n            this.combomatrix[0][2] * vertex.z;\n    \n    ret.y = ret.y + this.combomatrix[1][0] * vertex.x +\n            this.combomatrix[1][1] * vertex.y +\n            this.combomatrix[1][2] * vertex.z;\n    \n    ret.z = ret.z + this.combomatrix[2][0] * vertex.x +\n            this.combomatrix[2][1] * vertex.y +\n            this.combomatrix[2][2] * vertex.z;\n    return ret;\n}\nMatrix.prototype.mergeMatrices = function(lastStep, oneInFront) {\n    step1 = [[0,0,0],[0,0,0],[0,0,0]];\n    step1[0][0] =   lastStep[0][0] * oneInFront[0][0] + \n                    lastStep[0][1] * oneInFront[1][0] + \n                    lastStep[0][2] * oneInFront[2][0];\n    \n    step1[0][1] =   lastStep[0][0] * oneInFront[0][1] + \n                    lastStep[0][1] * oneInFront[1][1] + \n                    lastStep[0][2] * oneInFront[2][1];\n    \n    step1[0][2] =   lastStep[0][0] * oneInFront[0][2] + \n                    lastStep[0][1] * oneInFront[1][2] + \n                    lastStep[0][2] * oneInFront[2][2];\n    //============================================================\n    step1[1][0] =   lastStep[1][0] * oneInFront[0][0] + \n                    lastStep[1][1] * oneInFront[1][0] + \n                    lastStep[1][2] * oneInFront[2][0];\n    \n    step1[1][1] =   lastStep[1][0] * oneInFront[0][1] + \n                    lastStep[1][1] * oneInFront[1][1] + \n                    lastStep[1][2] * oneInFront[2][1];\n    \n    step1[1][2] =   lastStep[1][0] * oneInFront[0][2] + \n                    lastStep[1][1] * oneInFront[1][2] + \n                    lastStep[1][2] * oneInFront[2][2];\n    //============================================================\n    step1[2][0] =   lastStep[2][0] * oneInFront[0][0] + \n                    lastStep[2][1] * oneInFront[1][0] + \n                    lastStep[2][2] * oneInFront[2][0];\n    \n    step1[2][1] =   lastStep[2][0] * oneInFront[0][1] + \n                    lastStep[2][1] * oneInFront[1][1] + \n                    lastStep[2][2] * oneInFront[2][1];\n    \n    step1[2][2] =   lastStep[2][0] * oneInFront[0][2] + \n                    lastStep[2][1] * oneInFront[1][2] + \n                    lastStep[2][2] * oneInFront[2][2];\n    return step1;\n}\nMatrix.prototype.getCurrentMatrix = function() {\n    return this.matrixPoints;\n}\nmyvectors = [new Vec3(50,50,0), new Vec3(20,80,0), new Vec3(80, 80, 0)];\n\nfunction drawVectors(vectors,color) {\n    for(c=0;c&lt;vectors.length;c++) {\n        document.getElementById(&quot;whoa&quot;).innerHTML += &apos;&lt;div style=&quot;color:&apos;+color+&apos;;position:absolute;left:&apos;+vectors[c].x+&apos;px; top:&apos;+vectors[c].y+&apos;px;z-index:&apos;+vectors[c].z+&apos;;&quot;&gt;(&apos;+c+&apos;).&lt;/div&gt;&apos;;\n    }\n}\nmatrix = new Matrix();\nfor(c=0;c&lt;myvectors.length;c++) {\n    matrix.addVector(myvectors[c]);\n}\nmatrix.setRotationPoint(new Vec3(50,70,0));\nmatrix.populate();\nsomematrix = matrix.transform();\ndrawVectors(matrix.getCurrentMatrix(),&quot;lime&quot;); // draw current matrix that was hand coded\ndrawVectors([matrix.rotationPoint],&apos;white&apos;); // draw rotation point\ndrawVectors(somematrix,&quot;red&quot;); // transformed matrix... somehow two points merge\n&lt;div id=&quot;whoa&quot; style=&quot;position:relative;top:50px;left:150px;background-color:green;color:red;width:400px;height:300px;&quot;&gt;\n    &amp;nbsp;\n&lt;/div&gt;\n Run code snippetHide resultsExpand snippet\n\n\n\nThe green text is the original triangle, the white point the center point, the red points the failed transformation(I think, because it isn&apos;t aligned around the center point). The tutorial I was in thought me how to combine matrices into a combined matrix, but I guess I screwed up somewhere.\n\nAs I said, it&apos;s really really hard for me to understand mathematical notation and speak. And not helping is that most teachers skip parts of the explanation. Took me 2 hours alone to understand when multiplying matrices you need to add each step together instead of just keep on multiplying. Yay for explanations.\n\nA practical example what I work with/want to work with\n\nFor example I have a cube, loaded from a wavefront obj file located in the world at \n\nx = 50\ny = 100\nz = 200\n\n\nThe cube is drawn using quads and some uv mapping. No problems here. It renders beautifully with all the textures showing correctly.\n\nThese are the location coordinates for each &quot;face&quot; of the cube which is drawn using a quad.\n\n// Front face\n-1.0, -1.0,  1.0,\n 1.0, -1.0,  1.0,\n 1.0,  1.0,  1.0,\n-1.0,  1.0,  1.0,\n\n// Back face\n-1.0, -1.0, -1.0,\n-1.0,  1.0, -1.0,\n 1.0,  1.0, -1.0,\n 1.0, -1.0, -1.0,\n\n// Top face\n-1.0,  1.0, -1.0,\n-1.0,  1.0,  1.0,\n 1.0,  1.0,  1.0,\n 1.0,  1.0, -1.0,\n\n// Bottom face\n-1.0, -1.0, -1.0,\n 1.0, -1.0, -1.0,\n 1.0, -1.0,  1.0,\n-1.0, -1.0,  1.0,\n\n// Right face\n 1.0, -1.0, -1.0,\n 1.0,  1.0, -1.0,\n 1.0,  1.0,  1.0,\n 1.0, -1.0,  1.0,\n\n// Left face\n-1.0, -1.0, -1.0,\n-1.0, -1.0,  1.0,\n-1.0,  1.0,  1.0,\n-1.0,  1.0, -1.0\n\n\nSo this works all great. But what if I want this cube rotated 90 degrees along the x axis and 45 degrees around the z axis? I cannot use glRotate because at the moment I pass the data to the tesselator object I cannot do any matrix transforms to it via the opengl functions because it&apos;s just taking in the data, not actually rendering it per se.\n\nThe way the data is stored is as following:\n\nWaveFrontObject()\n   |\n   |-&gt; Groups(String groupname)\n        |\n        |-&gt; Faces()\n              |\n              |-&gt; Vertex(float x, float y, float z)[] \n              |-&gt; Float UVmap[] corresponding to each vertex\n              |-&gt; drawFace() // Draws the face as a quad or triangle\n\n\nSo each of the above coordinates I gave is stored as a face of the wavefront object in the group &quot;cube&quot;.\n\nWhen the cube is added to the tesselator it is translated to the right coordinates in the world and it renders normal.\n\nIt always renders the same however. If I would want it to render at an angle I would have to make a seperate wavefront object at this moment to be able to do that. In my opnion that is madness to do when it can be solved with some math.\n\nNeeded in the answer\n\n\nExplanation step by step how to build a translation matrix and an attempt to explain the math to me.\nExplanation how to apply the translation matrix to the quads/triangles in the faces whist they keep oriented around the center of their location \n\nx = 50.5\ny = 100.5\nz = 200.5\nSome example/pseudo code to go along with the explanation.\n\n\nThe used programming language used to explain isn&apos;t really relevant as long as its in the C family\n\nPlease try to stay away from mathematical notation/speak. I don&apos;t know what alpha beta, thetha is, I do know what x axis, y axis and z axis is. I do know what angles are, but I do not know the names mathematicians find for it.\n\nIf you wish to use math names, please explain to me what they are in the 3D world/code and how they are formed/calculated.\n\nI simply want to make a method/object along the lines of\n\nMatrix.transformVertices(vertices[], 90deg x, 45 deg y, 0 deg z);\n\n    ","answerCount":1,"upVoteCount":500,"suggestedAnswer":[{"text":"So the question really is Understanding 4x4 homogenous transform matrices\nwell without the math behind the only thing that left is geometric representation/meaning which is far better for human abstraction/understanding.\n\nSo what the 4x4 matrix is?\nIt is representation of some Cartesian coordinate system and it is composed of:\n\n3 basis vectors (one for each axis) red,green,blue\nSo if the red,green,blue vectors are perpendicular to each other then the coordinate system is orthogonal. If they are also unit vectors then it is orthonormal (like for example unit matrix).\n\norigin point gray\n\nprojection and homogenous side (unmarked bottom rest of the matrix)\nThis part is there only for enabling rotation and translation at once, therefore point used must be homogenous that means in form (x,y,z,w=1) for points and (x,y,z,w=0) for direction vectors. If it was just (x,y,z) then the matrix would be 3x3 and that is not enough for translation. I will not use any projections they are uneasy to explain geometrically.\n\n\nThis layout is from OpenGL notation there are also transposed representation out there (vectors are rows not columns)\nnow how to transform any point to/from this coordinate system:\ng=M*l;\nl=Inverse(M)*g;\n\nwhere:\n\nM is transform matrix\nl is M local coordinate system point (LCS)\ng is global coordinate system point (GCS)\n\nfor the transposed version (DirectX) it is:\nl=M*g;\ng=Inverse(M)*l;\n\nThat is because transposed orthogonal rotation matrix is also inverse of itself\n\nfor more info see transform matrix anatomy and 3D graphic pipeline\n\n\n\nhow to visualize it\nYes you can draw the matrix numbers but they do not make sense at first look especially if the numbers are changing so draw the axises vectors as on image above. Where each axis is a line from origin to origin + line_size*axis_vector\n\nhow to construct it\nJust compute axis vectors and origin and put them inside matrix. To ensure orthogonality exploit cross product (but be careful with order of multiplicants to use the right direction) Here example of getting 3 basis vectors from direction\n\neffects\n\nrotation is done by rotating the axises so you can compute each axis by parametric circle equation ...\nscaling is done by multiplying axises by scale factor\nskewing is just using non perpendicular axises\n\n\nrotation\nFor most cases the incremental rotation is used. There are two types\n\nlocal rotation M&apos;=M*rotation_matrix it rotates around local coordinate axises like you will control plane or car or player ... Most engines/games do not use these and fake it with euler angles instead which is a cheap solution (have many quirks and problems) because most people who using OpenGL do not even know this is possible and rather stack list of glRotate/glTranslate calls...\n\nglobal rotation M&apos;=Inverse(Inverse(M)*rotation_matrix) it rotates around global coordinate system axises.\n\n\nwhere rotation_matrix is any standard rotation transform matrix.\nIf you have different matrix layout (transposed) then the rotations local and global are computed the other way around ...\nYou can also compute your rotation_matrix from 3 angles like:\nrotation_matrix=rotation_around_x(ax)*rotation_around_y(ay)*rotation_around_z(az);\n\nsee Wiki rotation matrices the 3D Rx,Ry,Rz from Basic rotations are what you need. As you can see they are just unit circle parametric equation really. The order of multiplication change how the angles converge to target position. This is called Euler angles and I do not use it (I integrate step changes instead which has no restrictions if done properly not to mention it is simpler).\nAnyway if you need you can convert transform matrix into euler angles relatively easily see:\n\nIs there a way to calculate 3D rotation on X and Y axis from a 4x4 matrix\n\n\nglRotate\nIf you want glRotate which is rotation around arbitrary axis not by 3 angles then There is workaround:\n\ncreate transform matrix N for that axis\nthen transform your matrix M to it\nrotate N by angle\nthen transform M back from N to global coordinates\n\nOr you can use Rodrigues_rotation_formula instead\nTo transform Matrix to/from Matrix in this case just transform axises as points and leave the origin as is but the origin of N must be (0,0,0)!!! or the vectors transformed must have w=0 instead.\n\nusage\nTransformations are cumulative that means:\n\np&apos;=M1*M2*M3*M4*p; is the same as M=M1*M2*M3*M4; p&apos;=M*p\n\nSo if you have many points to transform then you precompute all transformations to single matrix and use just it. Do not need to multiply points by all subsequent matrices. OK now the concept:\nyou should have 3 coordinate systems:\n\ncamera C\nworld (usually unit matrix)\nobject O (each object have its own matrix)\n\nso if you have cube with 8 vertexes p0,...,p7 then you have to perform transformation on each point from object local coordinates to camera local coordinates. Some gfx api do some of it so you apply only what you have to so you really need:\n\np(i)&apos;=inverse(C)*unit*M*p(i);\n\nthe transforms are cumulative and unit matrix does not change anything so:\n\nQ=inverse(C)*M; p(i)&apos;=Q*p(i);\n\nso before drawing compute Q for drawed object then take each point p(i) of the object and compute the transformed p(i)&apos; and draw/use the transformed one ... The p(i)&apos; is in local camera coordinate system (x,y of the screen) but there is no perspective there so before drawing you can also add any of the projection matrices and divide by z cordinate at the end ... The projection is also cumulative so it can be also inside Q\n\n\n[edit1] C++ example\n//$$---- Form CPP ----\n//---------------------------------------------------------------------------\n// apart from math.h include you can ignore this machine generated VCL related code\n#include &lt;vcl.h&gt;\n#pragma hdrstop\n#include &quot;win_main.h&quot;\n#include &lt;math.h&gt;\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource &quot;*.dfm&quot;\nTMain *Main; // pointer to main window ...\n//---------------------------------------------------------------------------\n// Here is the important stuff some math first\n//---------------------------------------------------------------------------\nconst double deg=M_PI/180.0;\ndouble divide(double x,double y);\nvoid  matrix_mul       (double *c,double *a,double *b); // c[16] = a[16] * b[16]\nvoid  matrix_mul_vector(double *c,double *a,double *b); // c[ 4] = a[16] * b[ 4]\nvoid  matrix_subdet    (double *c,double *a);           // c[16] = all subdets of a[16]\ndouble matrix_subdet   (          double *a,int r,int s);//      = subdet(r,s) of a[16]\ndouble matrix_det      (          double *a);           //       = det of a[16]\ndouble matrix_det      (          double *a,double *b); //       = det of a[16] and subdets b[16]\nvoid  matrix_inv       (double *c,double *a);           // c[16] = a[16] ^ -1\n//---------------------------------------------------------------------------\ndouble divide(double x,double y)\n        {\n        if (!y) return 0.0;\n        return x/y;\n        }\nvoid  matrix_mul       (double *c,double *a,double *b)\n        {\n        double q[16];\n        q[ 0]=(a[ 0]*b[ 0])+(a[ 1]*b[ 4])+(a[ 2]*b[ 8])+(a[ 3]*b[12]);\n        q[ 1]=(a[ 0]*b[ 1])+(a[ 1]*b[ 5])+(a[ 2]*b[ 9])+(a[ 3]*b[13]);\n        q[ 2]=(a[ 0]*b[ 2])+(a[ 1]*b[ 6])+(a[ 2]*b[10])+(a[ 3]*b[14]);\n        q[ 3]=(a[ 0]*b[ 3])+(a[ 1]*b[ 7])+(a[ 2]*b[11])+(a[ 3]*b[15]);\n        q[ 4]=(a[ 4]*b[ 0])+(a[ 5]*b[ 4])+(a[ 6]*b[ 8])+(a[ 7]*b[12]);\n        q[ 5]=(a[ 4]*b[ 1])+(a[ 5]*b[ 5])+(a[ 6]*b[ 9])+(a[ 7]*b[13]);\n        q[ 6]=(a[ 4]*b[ 2])+(a[ 5]*b[ 6])+(a[ 6]*b[10])+(a[ 7]*b[14]);\n        q[ 7]=(a[ 4]*b[ 3])+(a[ 5]*b[ 7])+(a[ 6]*b[11])+(a[ 7]*b[15]);\n        q[ 8]=(a[ 8]*b[ 0])+(a[ 9]*b[ 4])+(a[10]*b[ 8])+(a[11]*b[12]);\n        q[ 9]=(a[ 8]*b[ 1])+(a[ 9]*b[ 5])+(a[10]*b[ 9])+(a[11]*b[13]);\n        q[10]=(a[ 8]*b[ 2])+(a[ 9]*b[ 6])+(a[10]*b[10])+(a[11]*b[14]);\n        q[11]=(a[ 8]*b[ 3])+(a[ 9]*b[ 7])+(a[10]*b[11])+(a[11]*b[15]);\n        q[12]=(a[12]*b[ 0])+(a[13]*b[ 4])+(a[14]*b[ 8])+(a[15]*b[12]);\n        q[13]=(a[12]*b[ 1])+(a[13]*b[ 5])+(a[14]*b[ 9])+(a[15]*b[13]);\n        q[14]=(a[12]*b[ 2])+(a[13]*b[ 6])+(a[14]*b[10])+(a[15]*b[14]);\n        q[15]=(a[12]*b[ 3])+(a[13]*b[ 7])+(a[14]*b[11])+(a[15]*b[15]);\n        for(int i=0;i&lt;16;i++) c[i]=q[i];\n        }\nvoid  matrix_mul_vector(double *c,double *a,double *b)\n        {\n        double q[3];\n        q[0]=(a[ 0]*b[0])+(a[ 1]*b[1])+(a[ 2]*b[2])+(a[ 3]);\n        q[1]=(a[ 4]*b[0])+(a[ 5]*b[1])+(a[ 6]*b[2])+(a[ 7]);\n        q[2]=(a[ 8]*b[0])+(a[ 9]*b[1])+(a[10]*b[2])+(a[11]);\n        for(int i=0;i&lt;3;i++) c[i]=q[i];\n        }\nvoid  matrix_subdet    (double *c,double *a)\n        {\n        double   q[16];\n        int     i,j;\n        for (i=0;i&lt;4;i++)\n         for (j=0;j&lt;4;j++)\n          q[j+(i&lt;&lt;2)]=matrix_subdet(a,i,j);\n        for (i=0;i&lt;16;i++) c[i]=q[i];\n        }\ndouble matrix_subdet    (         double *a,int r,int s)\n        {\n        double   c,q[9];\n        int     i,j,k;\n        k=0;                            // q = sub matrix\n        for (j=0;j&lt;4;j++)\n         if (j!=s)\n          for (i=0;i&lt;4;i++)\n           if (i!=r)\n                {\n                q[k]=a[i+(j&lt;&lt;2)];\n                k++;\n                }\n        c=0;\n        c+=q[0]*q[4]*q[8];\n        c+=q[1]*q[5]*q[6];\n        c+=q[2]*q[3]*q[7];\n        c-=q[0]*q[5]*q[7];\n        c-=q[1]*q[3]*q[8];\n        c-=q[2]*q[4]*q[6];\n        if (int((r+s)&amp;1)) c=-c;       // add signum\n        return c;\n        }\ndouble matrix_det       (         double *a)\n        {\n        double c=0;\n        c+=a[ 0]*matrix_subdet(a,0,0);\n        c+=a[ 4]*matrix_subdet(a,0,1);\n        c+=a[ 8]*matrix_subdet(a,0,2);\n        c+=a[12]*matrix_subdet(a,0,3);\n        return c;\n        }\ndouble matrix_det       (         double *a,double *b)\n        {\n        double c=0;\n        c+=a[ 0]*b[ 0];\n        c+=a[ 4]*b[ 1];\n        c+=a[ 8]*b[ 2];\n        c+=a[12]*b[ 3];\n        return c;\n        }\nvoid  matrix_inv       (double *c,double *a)\n        {\n        double   d[16],D;\n        matrix_subdet(d,a);\n        D=matrix_det(a,d);\n        if (D) D=1.0/D;\n        for (int i=0;i&lt;16;i++) c[i]=d[i]*D;\n        }\n//---------------------------------------------------------------------------\n// now the object representation\n//---------------------------------------------------------------------------\nconst int pnts=8;\ndouble pnt[pnts*3]=     // Vertexes for 100x100x100 cube centered at (0,0,0)\n    {\n    -100.0,-100.0,-100.0,\n    -100.0,+100.0,-100.0,\n    +100.0,+100.0,-100.0,\n    +100.0,-100.0,-100.0,\n    -100.0,-100.0,+100.0,\n    -100.0,+100.0,+100.0,\n    +100.0,+100.0,+100.0,\n    +100.0,-100.0,+100.0,\n    };\nconst int facs=6;\nint fac[facs*4]=        // faces (index of point used) no winding rule\n    {\n    0,1,2,3,\n    4,5,6,7,\n    0,1,5,4,\n    1,2,6,5,\n    2,3,7,6,\n    3,0,4,7,\n    };\ndouble rep[16]=        // 4x4 transform matrix of object (unit from start) at (0,0,+100)\n    {\n    1.0,0.0,0.0,  0.0,\n    0.0,1.0,0.0,  0.0,\n    0.0,0.0,1.0,100.0,\n    0.0,0.0,0.0,1.0,\n    };\ndouble eye[16]=        // 4x4 transform matrix of camera at (0,0,-150)\n    {\n    1.0,0.0,0.0,   0.0,\n    0.0,1.0,0.0,   0.0,\n    0.0,0.0,1.0,-150.0,\n    0.0,0.0,0.0,1.0,\n    };\n//---------------------------------------------------------------------------\n// this is how to draw it\n//---------------------------------------------------------------------------\nvoid obj(double *pnt,int pnts,int *fac,int facs,double *rep,double *ieye)\n    {\n    // variables for drawing\n    int i;\n    double p0[3],p1[3],p2[3],p3[3],m[16],d;\n    // gfx api variables (change to your stuff) Main is the main form of this application\n    TCanvas *scr=Main-&gt;bmp-&gt;Canvas;\n    double xs2=Main-&gt;ClientWidth/2,ys2=Main-&gt;ClientHeight/2;\n    double v=xs2*tan(30.0*deg); // 60 degree viewing angle perspective projection\n\n    matrix_mul(m,ieye,rep);             // cumulate all needed transforms\n\n    for (i=0;i&lt;facs*4;)                 // go through all faces\n        {\n        // convert all points of face\n        matrix_mul_vector(p0,m,&amp;pnt[fac[i]*3]); i++;\n        matrix_mul_vector(p1,m,&amp;pnt[fac[i]*3]); i++;\n        matrix_mul_vector(p2,m,&amp;pnt[fac[i]*3]); i++;\n        matrix_mul_vector(p3,m,&amp;pnt[fac[i]*3]); i++;\n        // here goes perspective divide by z coordinate if needed\n        d=divide(v,p0[2]); p0[0]*=d; p0[1]*=d;\n        d=divide(v,p1[2]); p1[0]*=d; p1[1]*=d;\n        d=divide(v,p2[2]); p2[0]*=d; p2[1]*=d;\n        d=divide(v,p3[2]); p3[0]*=d; p3[1]*=d;\n        // here is viewport transform (just translate (0,0) to middle of screen in this case\n        p0[0]+=xs2; p0[1]+=ys2;\n        p1[0]+=xs2; p1[1]+=ys2;\n        p2[0]+=xs2; p2[1]+=ys2;\n        p3[0]+=xs2; p3[1]+=ys2;\n        // draw quad\n        // I use VCL GDI TCanvas you use what you have ...\n        // and wireframe only to keep this simple (no Z buffer,winding culling,...)\n        scr-&gt;Pen-&gt;Color=clAqua;     // perimeter wireframe\n        scr-&gt;MoveTo(p0[0],p0[1]);\n        scr-&gt;LineTo(p1[0],p1[1]);\n        scr-&gt;LineTo(p2[0],p2[1]);\n        scr-&gt;LineTo(p3[0],p3[1]);\n        scr-&gt;LineTo(p0[0],p0[1]);\n//      scr-&gt;Pen-&gt;Color=clBlue;     // face cross to visualy check if I correctly generate the fac[]\n//      scr-&gt;MoveTo(p0[0],p0[1]);\n//      scr-&gt;LineTo(p2[0],p2[1]);\n//      scr-&gt;MoveTo(p1[0],p1[1]);\n//      scr-&gt;LineTo(p3[0],p3[1]);\n        }\n    }\n//---------------------------------------------------------------------------\n//---------------------------------------------------------------------------\nvoid TMain::draw()\n    {\n    if (!_redraw) return;\n    bmp-&gt;Canvas-&gt;Brush-&gt;Color=clBlack;\n    bmp-&gt;Canvas-&gt;FillRect(TRect(0,0,xs,ys));\n\n    // compute inverse of camera need to compute just once for all objects\n    double ieye[16];\n    matrix_inv(ieye,eye);\n    // draw all objects\n    obj(pnt,pnts,fac,facs,rep,ieye);\n\n    Main-&gt;Canvas-&gt;Draw(0,0,bmp);\n    _redraw=false;\n    }\n//---------------------------------------------------------------------------\n__fastcall TMain::TMain(TComponent* Owner) : TForm(Owner)\n    {\n    // window constructor you can ignore this ... (just create a backbuffer bitmap here)\n    bmp=new Graphics::TBitmap;\n    bmp-&gt;HandleType=bmDIB;\n    bmp-&gt;PixelFormat=pf32bit;\n    pyx=NULL;\n    }\n//---------------------------------------------------------------------------\nvoid __fastcall TMain::FormDestroy(TObject *Sender)\n    {\n    // window destructor release memory ... also ignoe this\n    if (pyx) delete pyx;\n    delete bmp;\n    }\n//---------------------------------------------------------------------------\nvoid __fastcall TMain::FormResize(TObject *Sender)\n    {\n    // on resize event ... just resize/redraw backbuffer also can ignore this\n    xs=ClientWidth;  xs2=xs&gt;&gt;1;\n    ys=ClientHeight; ys2=ys&gt;&gt;1;\n    bmp-&gt;Width=xs;\n    bmp-&gt;Height=ys;\n    if (pyx) delete pyx;\n    pyx=new int*[ys];\n    for (int y=0;y&lt;ys;y++) pyx[y]=(int*) bmp-&gt;ScanLine[y];\n    _redraw=true;\n    }\n//---------------------------------------------------------------------------\nvoid __fastcall TMain::FormPaint(TObject *Sender)\n    {\n    // repaint event can ignore\n    _redraw=true;\n    }\n//---------------------------------------------------------------------------\nvoid __fastcall TMain::tim_redrawTimer(TObject *Sender)\n    {\n    // timer event to animate the cube ...\n    _redraw=true;\n\n    // rotate the object to see it in motion\n    double ang,c,s;\n\n    ang=5.0*deg; c=cos(ang); s=sin(ang);    // rotate baround z by 5 degrees per timer step\n    double rz[16]= { c, s, 0, 0,\n                    -s, c, 0, 0,\n                     0, 0, 1, 0,\n                     0, 0, 0, 1 };\n\n    ang=1.0*deg; c=cos(ang); s=sin(ang);    // rotate baround x by 1 degrees per timer step\n    double rx[16]= { 1, 0, 0, 0,\n                     0, c, s, 0,\n                     0,-s, c, 0,\n                     0, 0, 0, 1 };\n    matrix_mul(rep,rep,rz);\n    matrix_mul(rep,rep,rx);\n\n    draw();\n    }\n//---------------------------------------------------------------------------\n\nhere is how it looks like:\n\nAnd GIF animation with back face culling:\n\n[notes]\nIf you have more questions then comment me ...\n[Edit2] basic 3D vector operations often needed\nIf you do not know how to compute vector operations like cross/dot products or absolute value see:\n// cross product: W = U x V\nW.x=(U.y*V.z)-(U.z*V.y)\nW.y=(U.z*V.x)-(U.x*V.z)\nW.z=(U.x*V.y)-(U.y*V.x)\n// dot product: a = (U.V)\na=U.x*V.x+U.y*V.y+U.z*V.z\n// abs of vector a = |U|\na=sqrt((U.x*U.x)+(U.y*U.y)+(U.z*U.z))\n\nhere my C++ vector math:\nstatic double vector_tmp[3];\ndouble divide(double x,double y) { if ((y&gt;=-1e-30)&amp;&amp;(y&lt;=+1e-30)) return 0.0; return x/y; }\ndouble* vector_ld(double x,double y,double z)          { double *p=vector_tmp; p[0]=x; p[1]=y; p[2]=z; return p;}\ndouble* vector_ld(double *p,double x,double y,double z) {                      p[0]=x; p[1]=y; p[2]=z; return p;}\nvoid  vector_copy(double *c,double *a)         { for(int i=0;i&lt;3;i++) c[i]=a[i];       }\nvoid  vector_abs(double *c,double *a)          { for(int i=0;i&lt;3;i++) c[i]=fabs(a[i]); }\nvoid  vector_one(double *c,double *a)\n        {\n        double l=divide(1.0,sqrt((a[0]*a[0])+(a[1]*a[1])+(a[2]*a[2])));\n        c[0]=a[0]*l;\n        c[1]=a[1]*l;\n        c[2]=a[2]*l;\n        }\nvoid  vector_len(double *c,double *a,double l)\n        {\n        l=divide(l,sqrt((a[0]*a[0])+(a[1]*a[1])+(a[2]*a[2])));\n        c[0]=a[0]*l;\n        c[1]=a[1]*l;\n        c[2]=a[2]*l;\n        }\nvoid  vector_neg(double *c,double *a)          { for(int i=0;i&lt;3;i++) c[i]=-a[i];      }\nvoid  vector_add(double *c,double *a,double *b) { for(int i=0;i&lt;3;i++) c[i]=a[i]+b[i]; }\nvoid  vector_sub(double *c,double *a,double *b) { for(int i=0;i&lt;3;i++) c[i]=a[i]-b[i]; }\nvoid  vector_mul(double *c,double *a,double *b) // cross\n        {\n        double   q[3];\n        q[0]=(a[1]*b[2])-(a[2]*b[1]);\n        q[1]=(a[2]*b[0])-(a[0]*b[2]);\n        q[2]=(a[0]*b[1])-(a[1]*b[0]);\n        for(int i=0;i&lt;3;i++) c[i]=q[i];\n        }\nvoid  vector_mul(double *c,double *a,double  b) { for(int i=0;i&lt;3;i++) c[i]=a[i]*b; }\nvoid  vector_mul(double *c,double  a,double *b) { for(int i=0;i&lt;3;i++) c[i]=a*b[i]; }\ndouble vector_mul(         double *a,double *b) { double c=0; for(int i=0;i&lt;3;i++) c+=a[i]*b[i]; return c; } // dot\ndouble vector_len(double *a) { return sqrt((a[0]*a[0])+(a[1]*a[1])+(a[2]*a[2])); }\ndouble vector_len2(double *a) { return (a[0]*a[0])+(a[1]*a[1])+(a[2]*a[2]); }\n\n[Edit3] local rotations for camera and object control via keyboard\nAs this has been asked a lot lately here some example answers of mine with demos:\n\nstationary camera view control (partial pseudo inverse matrix)\ncamera and player control (inverse matrix)\nHow to preserve accuracy with cumulative transforms over time (full pseudo inverse matrix)\nrotundus style simple OpenGL/C++/VCL player control example\n\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/4f7b2847abfe82c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4f7b2847abfe82c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c0d2dcb5e85faf18.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-50e201fdaa1e0fd1.js" defer=""></script><script src="/_next/static/eGqQHYKGZKE-nXShFn8wX/_buildManifest.js" defer=""></script><script src="/_next/static/eGqQHYKGZKE-nXShFn8wX/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457"><h1>How do I compose a rotation matrix with human readable angles from scratch?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/opengl">opengl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/matrix">matrix</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/3d">3d</a></div></div><div class="question-content mt-5">
                
<p>The one thing that has always hindered me from doing 3D programming is failing to understand how math works. I can go along with math fine in programming flow using methods and functions, then its all clear and logical to me, but in mathematical notation, I just can't make heads or tails from it.</p>

<p>I have been reading websites, a watching videos of institutes trying to explain this, but they all use mathematical notation and I simply get lost in it, my mind won't translate it to something understandable. I might have a defect there.</p>

<p>Also, Just using someone's code isn't my interest, I want to understand the mechanics behind it, the logic. I'd be happy to use someone else's code, but I really want to understand how it works.</p>

<p><strong>The question</strong></p>

<p>Can you explain to me in simple terms <strong>without</strong> mathematical notation, just programming notation/functions/psuedocode, how to implement a matrix transform along all 3 axes?</p>

<p>Ideally what I want is the material/understanding to write a method/object where I can define the angles of 3 axes similar to glRotate to rotate the collection of quads/triangles I have. (I am trying to program a 3D rotation of a cube shapes without having access to OpenGL functions to do it for me because this is done in one draw call every time something changes in the display list.)</p>

<p><strong>What have I done?</strong></p>

<p>I have attempted at making a 90 degrees transform function to get the hang of the math but failed utterly in making a proper matrix which in theory should have been the simplest to do. You can see my failed attempt in all its glory on <a href="http://jsfiddle.net/bLfg0tj8/5/" rel="noreferrer">http://jsfiddle.net/bLfg0tj8/5/</a></p>

<p></p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false"><div class="snippet-display" style="vertical-align: center"><p><a class="snippet-show-link-chevron"><span class="expander-arrow-hide" style="vertical-align: middle;"></span></a><a class="snippet-show-link"><span class="show-hide" data-ishidden="true" style="vertical-align: middle">Show code snippet</span></a></p></div>
<div class="snippet-code snippet-currently-hidden" style="display: none;">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">Vec3</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">x,y,z</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = x;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = y;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> = z;
}
<span class="hljs-title class_">Matrix</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">Matrix</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixPoints</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotationPoint</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vec3</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotationAngle</span> = <span class="hljs-number">90</span>;
}
<span class="hljs-title class_">Matrix</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addVector</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">vector</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixPoints</span>.<span class="hljs-title function_">push</span>(vector);
}
<span class="hljs-title class_">Matrix</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setRotationPoint</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">vector</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotationPoint</span> = vector; 
}
<span class="hljs-title class_">Matrix</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setRotationAngle</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">angle</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotationAngle</span> = angle;
}
<span class="hljs-title class_">Matrix</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">populate</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    translateToOrigin =     [[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>-<span class="hljs-variable language_">this</span>.<span class="hljs-property">rotationPoint</span>.<span class="hljs-property">x</span>],
                                  [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>-<span class="hljs-variable language_">this</span>.<span class="hljs-property">rotationPoint</span>.<span class="hljs-property">y</span>],
                                  [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>-<span class="hljs-variable language_">this</span>.<span class="hljs-property">rotationPoint</span>.<span class="hljs-property">z</span>]];
    rotationMatrix =         [[<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>],
                                  [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>],
                                  [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>]];
    translateEnd =         [[<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">rotationPoint</span>.<span class="hljs-property">x</span>],
                                  [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">rotationPoint</span>.<span class="hljs-property">y</span>],
                                  [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">rotationPoint</span>.<span class="hljs-property">z</span>]];
    currentColumn = <span class="hljs-number">0</span>;
    currentRow = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">combomatrix</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mergeMatrices</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mergeMatrices</span>(translateEnd,rotationMatrix),
                                          translateToOrigin);
}
<span class="hljs-title class_">Matrix</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">transform</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    newmatrix = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();
    <span class="hljs-keyword">for</span>(c = <span class="hljs-number">0</span>;c&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixPoints</span>.<span class="hljs-property">length</span>;c++) {
        newmatrix.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyToVertex</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixPoints</span>[c]));
    }
    <span class="hljs-keyword">return</span> newmatrix;
}
<span class="hljs-title class_">Matrix</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">applyToVertex</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">vertex</span>) {
    ret = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vec3</span>(vertex.<span class="hljs-property">x</span>,vertex.<span class="hljs-property">y</span>,vertex.<span class="hljs-property">z</span>);
    ret.<span class="hljs-property">x</span> = ret.<span class="hljs-property">x</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">combomatrix</span>[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] * vertex.<span class="hljs-property">x</span> +
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">combomatrix</span>[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] * vertex.<span class="hljs-property">y</span> +
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">combomatrix</span>[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] * vertex.<span class="hljs-property">z</span>;
    
    ret.<span class="hljs-property">y</span> = ret.<span class="hljs-property">y</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">combomatrix</span>[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] * vertex.<span class="hljs-property">x</span> +
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">combomatrix</span>[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] * vertex.<span class="hljs-property">y</span> +
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">combomatrix</span>[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] * vertex.<span class="hljs-property">z</span>;
    
    ret.<span class="hljs-property">z</span> = ret.<span class="hljs-property">z</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">combomatrix</span>[<span class="hljs-number">2</span>][<span class="hljs-number">0</span>] * vertex.<span class="hljs-property">x</span> +
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">combomatrix</span>[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>] * vertex.<span class="hljs-property">y</span> +
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">combomatrix</span>[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>] * vertex.<span class="hljs-property">z</span>;
    <span class="hljs-keyword">return</span> ret;
}
<span class="hljs-title class_">Matrix</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">mergeMatrices</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">lastStep, oneInFront</span>) {
    step1 = [[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]];
    step1[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] =   lastStep[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] * oneInFront[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] + 
                    lastStep[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] * oneInFront[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + 
                    lastStep[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] * oneInFront[<span class="hljs-number">2</span>][<span class="hljs-number">0</span>];
    
    step1[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] =   lastStep[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] * oneInFront[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] + 
                    lastStep[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] * oneInFront[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + 
                    lastStep[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] * oneInFront[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>];
    
    step1[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] =   lastStep[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] * oneInFront[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] + 
                    lastStep[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] * oneInFront[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + 
                    lastStep[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] * oneInFront[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>];
    <span class="hljs-comment">//============================================================</span>
    step1[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] =   lastStep[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] * oneInFront[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] + 
                    lastStep[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] * oneInFront[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + 
                    lastStep[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] * oneInFront[<span class="hljs-number">2</span>][<span class="hljs-number">0</span>];
    
    step1[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] =   lastStep[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] * oneInFront[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] + 
                    lastStep[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] * oneInFront[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + 
                    lastStep[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] * oneInFront[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>];
    
    step1[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] =   lastStep[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] * oneInFront[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] + 
                    lastStep[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] * oneInFront[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + 
                    lastStep[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] * oneInFront[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>];
    <span class="hljs-comment">//============================================================</span>
    step1[<span class="hljs-number">2</span>][<span class="hljs-number">0</span>] =   lastStep[<span class="hljs-number">2</span>][<span class="hljs-number">0</span>] * oneInFront[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] + 
                    lastStep[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>] * oneInFront[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + 
                    lastStep[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>] * oneInFront[<span class="hljs-number">2</span>][<span class="hljs-number">0</span>];
    
    step1[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>] =   lastStep[<span class="hljs-number">2</span>][<span class="hljs-number">0</span>] * oneInFront[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] + 
                    lastStep[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>] * oneInFront[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] + 
                    lastStep[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>] * oneInFront[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>];
    
    step1[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>] =   lastStep[<span class="hljs-number">2</span>][<span class="hljs-number">0</span>] * oneInFront[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] + 
                    lastStep[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>] * oneInFront[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] + 
                    lastStep[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>] * oneInFront[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>];
    <span class="hljs-keyword">return</span> step1;
}
<span class="hljs-title class_">Matrix</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getCurrentMatrix</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixPoints</span>;
}
myvectors = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vec3</span>(<span class="hljs-number">50</span>,<span class="hljs-number">50</span>,<span class="hljs-number">0</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vec3</span>(<span class="hljs-number">20</span>,<span class="hljs-number">80</span>,<span class="hljs-number">0</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vec3</span>(<span class="hljs-number">80</span>, <span class="hljs-number">80</span>, <span class="hljs-number">0</span>)];

<span class="hljs-keyword">function</span> <span class="hljs-title function_">drawVectors</span>(<span class="hljs-params">vectors,color</span>) {
    <span class="hljs-keyword">for</span>(c=<span class="hljs-number">0</span>;c&lt;vectors.<span class="hljs-property">length</span>;c++) {
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"whoa"</span>).<span class="hljs-property">innerHTML</span> += <span class="hljs-string">'&lt;div style="color:'</span>+color+<span class="hljs-string">';position:absolute;left:'</span>+vectors[c].<span class="hljs-property">x</span>+<span class="hljs-string">'px; top:'</span>+vectors[c].<span class="hljs-property">y</span>+<span class="hljs-string">'px;z-index:'</span>+vectors[c].<span class="hljs-property">z</span>+<span class="hljs-string">';"&gt;('</span>+c+<span class="hljs-string">').&lt;/div&gt;'</span>;
    }
}
matrix = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix</span>();
<span class="hljs-keyword">for</span>(c=<span class="hljs-number">0</span>;c&lt;myvectors.<span class="hljs-property">length</span>;c++) {
    matrix.<span class="hljs-title function_">addVector</span>(myvectors[c]);
}
matrix.<span class="hljs-title function_">setRotationPoint</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vec3</span>(<span class="hljs-number">50</span>,<span class="hljs-number">70</span>,<span class="hljs-number">0</span>));
matrix.<span class="hljs-title function_">populate</span>();
somematrix = matrix.<span class="hljs-title function_">transform</span>();
<span class="hljs-title function_">drawVectors</span>(matrix.<span class="hljs-title function_">getCurrentMatrix</span>(),<span class="hljs-string">"lime"</span>); <span class="hljs-comment">// draw current matrix that was hand coded</span>
<span class="hljs-title function_">drawVectors</span>([matrix.<span class="hljs-property">rotationPoint</span>],<span class="hljs-string">'white'</span>); <span class="hljs-comment">// draw rotation point</span>
<span class="hljs-title function_">drawVectors</span>(somematrix,<span class="hljs-string">"red"</span>); <span class="hljs-comment">// transformed matrix... somehow two points merge</span></code></pre>
<pre class="snippet-code-html lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"whoa"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position:relative;top:50px;left:150px;background-color:green;color:red;width:400px;height:300px;"</span>&gt;</span>
    <span class="hljs-symbol">&amp;nbsp;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif1" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>

<p>The green text is the original triangle, the white point the center point, the red points the failed transformation(I think, because it isn't aligned around the center point). The tutorial I was in thought me how to combine matrices into a combined matrix, but I guess I screwed up somewhere.</p>

<p>As I said, it's really really hard for me to understand mathematical notation and speak. And not helping is that most teachers skip parts of the explanation. Took me 2 hours alone to understand when multiplying matrices you need to add each step together instead of just keep on multiplying. Yay for explanations.</p>

<p><strong>A practical example what I work with/want to work with</strong></p>

<p>For example I have a cube, loaded from a wavefront obj file located in the world at </p>

<pre><code>x = 50
y = 100
z = 200
</code></pre>

<p>The cube is drawn using quads and some uv mapping. No problems here. It renders beautifully with all the textures showing correctly.</p>

<p>These are the location coordinates for each "face" of the cube which is drawn using a quad.</p>

<pre><code>// Front face
-1.0, -1.0,  1.0,
 1.0, -1.0,  1.0,
 1.0,  1.0,  1.0,
-1.0,  1.0,  1.0,

// Back face
-1.0, -1.0, -1.0,
-1.0,  1.0, -1.0,
 1.0,  1.0, -1.0,
 1.0, -1.0, -1.0,

// Top face
-1.0,  1.0, -1.0,
-1.0,  1.0,  1.0,
 1.0,  1.0,  1.0,
 1.0,  1.0, -1.0,

// Bottom face
-1.0, -1.0, -1.0,
 1.0, -1.0, -1.0,
 1.0, -1.0,  1.0,
-1.0, -1.0,  1.0,

// Right face
 1.0, -1.0, -1.0,
 1.0,  1.0, -1.0,
 1.0,  1.0,  1.0,
 1.0, -1.0,  1.0,

// Left face
-1.0, -1.0, -1.0,
-1.0, -1.0,  1.0,
-1.0,  1.0,  1.0,
-1.0,  1.0, -1.0
</code></pre>

<p>So this works all great. But what if I want this cube rotated 90 degrees along the x axis and 45 degrees around the z axis? I cannot use glRotate because at the moment I pass the data to the tesselator object I cannot do any matrix transforms to it via the opengl functions because it's just taking in the data, not actually rendering it per se.</p>

<p>The way the data is stored is as following:</p>

<pre><code>WaveFrontObject()
   |
   |-&gt; Groups(String groupname)
        |
        |-&gt; Faces()
              |
              |-&gt; Vertex(float x, float y, float z)[] 
              |-&gt; Float UVmap[] corresponding to each vertex
              |-&gt; drawFace() // Draws the face as a quad or triangle
</code></pre>

<p>So each of the above coordinates I gave is stored as a face of the wavefront object in the group "cube".</p>

<p>When the cube is added to the tesselator it is translated to the right coordinates in the world and it renders normal.</p>

<p>It always renders the same however. If I would want it to render at an angle I would have to make a seperate wavefront object at this moment to be able to do that. In my opnion that is madness to do when it can be solved with some math.</p>

<p><strong>Needed in the answer</strong></p>

<ol>
<li>Explanation step by step how to build a translation matrix and an attempt to explain the math to me.</li>
<li><p>Explanation how to apply the translation matrix to the quads/triangles in the faces whist they keep oriented around the center of their location </p>

<p>x = 50.5
y = 100.5
z = 200.5</p></li>
<li><p>Some example/pseudo code to go along with the explanation.</p></li>
</ol>

<p>The used programming language used to explain isn't really relevant as long as its in the C family</p>

<p>Please try to stay away from mathematical notation/speak. I don't know what alpha beta, thetha is, I do know what x axis, y axis and z axis is. I do know what angles are, but I do not know the names mathematicians find for it.</p>

<p>If you wish to use math names, please explain to me what they are in the 3D world/code and how they are formed/calculated.</p>

<p>I simply want to make a method/object along the lines of</p>

<pre><code>Matrix.transformVertices(vertices[], 90deg x, 45 deg y, 0 deg z);
</code></pre>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/opengl">opengl</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/matrix">matrix</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/3d">3d</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>So the question really is <strong>Understanding 4x4 homogenous transform matrices</strong></p>
<p>well without the math behind the only thing that left is geometric representation/meaning which is far better for human abstraction/understanding.</p>
<ol>
<li><p><strong>So what the 4x4 matrix is?</strong></p>
<p>It is representation of some Cartesian coordinate system and it is composed of:</p>
<ol>
<li><p><strong><code>3</code> basis vectors (one for each axis) red,green,blue</strong></p>
<p>So if the red,green,blue vectors are perpendicular to each other then the coordinate system is <strong>orthogonal</strong>. If they are also unit vectors then it is <strong>orthonormal</strong> (like for example unit matrix).</p>
</li>
<li><p><strong>origin point gray</strong></p>
</li>
<li><p><strong>projection and homogenous side (unmarked bottom rest of the matrix)</strong></p>
<p>This part is there only for enabling rotation and translation at once, therefore point used must be homogenous that means in form <code>(x,y,z,w=1)</code> for points and <code>(x,y,z,w=0)</code> for direction vectors. If it was just <code>(x,y,z)</code> then the matrix would be <code>3x3</code> and that is not enough for translation. I will not use any projections they are uneasy to explain geometrically.</p>
</li>
</ol>
<p>This layout is from <strong>OpenGL notation</strong> there are also transposed representation out there (vectors are rows not columns)</p>
<p>now how to transform any point to/from this coordinate system:</p>
<pre><code>g=M*l;
l=Inverse(M)*g;
</code></pre>
<p>where:</p>
<ul>
<li><code>M</code> is transform matrix</li>
<li><code>l</code> is <code>M</code> local coordinate system point (LCS)</li>
<li><code>g</code> is global coordinate system point (GCS)</li>
</ul>
<p>for the transposed version (<strong>DirectX</strong>) it is:</p>
<pre><code>l=M*g;
g=Inverse(M)*l;
</code></pre>
<p>That is because <strong>transposed orthogonal rotation matrix is also inverse of itself</strong></p>
<ul>
<li>for more info see <a href="https://stackoverflow.com/a/25216549/2521214">transform matrix anatomy</a> and <a href="https://stackoverflow.com/a/21100338/2521214">3D graphic pipeline</a></li>
</ul>
<p><img src="https://i.stack.imgur.com/rayCb.png" alt="OpenGL transform matrix"></p>
</li>
<li><p><strong>how to visualize it</strong></p>
<p>Yes you can draw the matrix numbers but they do not make sense at first look especially if the numbers are changing so draw the axises vectors as on image above. Where each axis is a line from <code>origin</code> to <code>origin + line_size*axis_vector</code></p>
</li>
<li><p><strong>how to construct it</strong></p>
<p>Just compute axis vectors and origin and put them inside matrix. To ensure orthogonality exploit <strong>cross product</strong> (but be careful with order of multiplicants to use the right direction) Here <a href="https://stackoverflow.com/a/41813188/2521214">example of getting 3 basis vectors from direction</a></p>
</li>
<li><p><strong>effects</strong></p>
<ul>
<li>rotation is done by rotating the axises so you can compute each axis by parametric circle equation ...</li>
<li>scaling is done by multiplying axises by scale factor</li>
<li>skewing is just using non perpendicular axises</li>
</ul>
</li>
<li><p><strong>rotation</strong></p>
<p>For most cases the incremental rotation is used. There are two types</p>
<ul>
<li><p><strong>local rotation</strong> <code>M'=M*rotation_matrix</code> it rotates around local coordinate axises like you will control plane or car or player ... Most engines/games do not use these and fake it with <strong>euler angles</strong> instead which is a cheap solution (have many quirks and problems) because most people who using OpenGL do not even know this is possible and rather stack list of <code>glRotate/glTranslate</code> calls...</p>
</li>
<li><p><strong>global rotation</strong> <code>M'=Inverse(Inverse(M)*rotation_matrix)</code> it rotates around global coordinate system axises.</p>
</li>
</ul>
<p>where <code>rotation_matrix</code> is any standard rotation transform matrix.</p>
<p>If you have different matrix layout (transposed) then the rotations local and global are computed the other way around ...</p>
<p>You can also compute your <code>rotation_matrix</code> from <code>3</code> angles like:</p>
<pre><code>rotation_matrix=rotation_around_x(ax)*rotation_around_y(ay)*rotation_around_z(az);
</code></pre>
<p>see <a href="http://en.wikipedia.org/wiki/Rotation_matrix" rel="noreferrer">Wiki rotation matrices</a> the 3D <code>Rx,Ry,Rz</code> from <code>Basic rotations</code> are what you need. As you can see they are just unit circle parametric equation really. The order of multiplication change how the angles converge to target position. This is called <strong>Euler angles</strong> and I do not use it (I integrate step changes instead which has no restrictions if done properly not to mention it is simpler).</p>
<p>Anyway if you need you can convert transform matrix into euler angles relatively easily see:</p>
<ul>
<li><a href="https://stackoverflow.com/a/56950130/2521214">Is there a way to calculate 3D rotation on X and Y axis from a 4x4 matrix</a></li>
</ul>
</li>
<li><p><strong>glRotate</strong></p>
<p>If you want <code>glRotate</code> which is rotation around arbitrary axis not by 3 angles then <a href="https://stackoverflow.com/a/64389606/2521214">There is workaround</a>:</p>
<ol>
<li>create transform matrix <code>N</code> for that axis</li>
<li>then transform your matrix <code>M</code> to it</li>
<li>rotate <code>N</code> by angle</li>
<li>then transform <code>M</code> back from <code>N</code> to global coordinates</li>
</ol>
<p>Or you can use <a href="https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula" rel="noreferrer">Rodrigues_rotation_formula</a> instead</p>
<p>To transform Matrix to/from Matrix in this case just transform axises as points and leave the origin as is but the origin of <code>N</code> <strong>must be (0,0,0)!!!</strong> or the vectors transformed must have <code>w=0</code> instead.</p>
</li>
<li><p><strong>usage</strong></p>
<p>Transformations are cumulative that means:</p>
<ul>
<li><code>p'=M1*M2*M3*M4*p;</code> is the same as <code>M=M1*M2*M3*M4; p'=M*p</code></li>
</ul>
<p>So if you have many points to transform then you precompute all transformations to single matrix and use just it. Do not need to multiply points by all subsequent matrices. OK now the concept:</p>
<p>you should have <code>3</code> coordinate systems:</p>
<ul>
<li>camera <code>C</code></li>
<li>world (usually unit matrix)</li>
<li>object <code>O</code> (each object have its own matrix)</li>
</ul>
<p>so if you have cube with <code>8</code> vertexes <code>p0,...,p7</code> then you have to perform transformation on each point from object local coordinates to camera local coordinates. Some gfx api do some of it so you apply only what you have to so you really need:</p>
<ul>
<li><code>p(i)'=inverse(C)*unit*M*p(i);</code></li>
</ul>
<p>the transforms are cumulative and unit matrix does not change anything so:</p>
<ul>
<li><code>Q=inverse(C)*M; p(i)'=Q*p(i);</code></li>
</ul>
<p>so before drawing compute <code>Q</code> for drawed object then take each point <code>p(i)</code> of the object and compute the transformed <code>p(i)'</code> and draw/use the transformed one ... The <code>p(i)'</code> is in local camera coordinate system (x,y of the screen) but there is no perspective there so before drawing you can also add any of the projection matrices and divide by <code>z</code> cordinate at the end ... The projection is also cumulative so it can be also inside <code>Q</code></p>
</li>
</ol>
<p><strong>[edit1] C++ example</strong></p>
<pre class="lang-cpp s-code-block"><code class="hljs language-cpp"><span class="hljs-comment">//$$---- Form CPP ----</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-comment">// apart from math.h include you can ignore this machine generated VCL related code</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vcl.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">pragma</span> hdrstop</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"win_main.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;math.h&gt;</span></span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-meta">#<span class="hljs-keyword">pragma</span> package(smart_init)</span>
<span class="hljs-meta">#<span class="hljs-keyword">pragma</span> resource <span class="hljs-string">"*.dfm"</span></span>
TMain *Main; <span class="hljs-comment">// pointer to main window ...</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-comment">// Here is the important stuff some math first</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-type">const</span> <span class="hljs-type">double</span> deg=M_PI/<span class="hljs-number">180.0</span>;
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y)</span></span>;
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_mul</span>       <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span></span>; <span class="hljs-comment">// c[16] = a[16] * b[16]</span>
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_mul_vector</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span></span>; <span class="hljs-comment">// c[ 4] = a[16] * b[ 4]</span>
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_subdet</span>    <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span></span>;           <span class="hljs-comment">// c[16] = all subdets of a[16]</span>
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_subdet</span>   <span class="hljs-params">(          <span class="hljs-type">double</span> *a,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> s)</span></span>;<span class="hljs-comment">//      = subdet(r,s) of a[16]</span>
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_det</span>      <span class="hljs-params">(          <span class="hljs-type">double</span> *a)</span></span>;           <span class="hljs-comment">//       = det of a[16]</span>
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_det</span>      <span class="hljs-params">(          <span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span></span>; <span class="hljs-comment">//       = det of a[16] and subdets b[16]</span>
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_inv</span>       <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span></span>;           <span class="hljs-comment">// c[16] = a[16] ^ -1</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y)</span>
        </span>{
        <span class="hljs-keyword">if</span> (!y) <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
        <span class="hljs-keyword">return</span> x/y;
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_mul</span>       <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span>
        </span>{
        <span class="hljs-type">double</span> q[<span class="hljs-number">16</span>];
        q[ <span class="hljs-number">0</span>]=(a[ <span class="hljs-number">0</span>]*b[ <span class="hljs-number">0</span>])+(a[ <span class="hljs-number">1</span>]*b[ <span class="hljs-number">4</span>])+(a[ <span class="hljs-number">2</span>]*b[ <span class="hljs-number">8</span>])+(a[ <span class="hljs-number">3</span>]*b[<span class="hljs-number">12</span>]);
        q[ <span class="hljs-number">1</span>]=(a[ <span class="hljs-number">0</span>]*b[ <span class="hljs-number">1</span>])+(a[ <span class="hljs-number">1</span>]*b[ <span class="hljs-number">5</span>])+(a[ <span class="hljs-number">2</span>]*b[ <span class="hljs-number">9</span>])+(a[ <span class="hljs-number">3</span>]*b[<span class="hljs-number">13</span>]);
        q[ <span class="hljs-number">2</span>]=(a[ <span class="hljs-number">0</span>]*b[ <span class="hljs-number">2</span>])+(a[ <span class="hljs-number">1</span>]*b[ <span class="hljs-number">6</span>])+(a[ <span class="hljs-number">2</span>]*b[<span class="hljs-number">10</span>])+(a[ <span class="hljs-number">3</span>]*b[<span class="hljs-number">14</span>]);
        q[ <span class="hljs-number">3</span>]=(a[ <span class="hljs-number">0</span>]*b[ <span class="hljs-number">3</span>])+(a[ <span class="hljs-number">1</span>]*b[ <span class="hljs-number">7</span>])+(a[ <span class="hljs-number">2</span>]*b[<span class="hljs-number">11</span>])+(a[ <span class="hljs-number">3</span>]*b[<span class="hljs-number">15</span>]);
        q[ <span class="hljs-number">4</span>]=(a[ <span class="hljs-number">4</span>]*b[ <span class="hljs-number">0</span>])+(a[ <span class="hljs-number">5</span>]*b[ <span class="hljs-number">4</span>])+(a[ <span class="hljs-number">6</span>]*b[ <span class="hljs-number">8</span>])+(a[ <span class="hljs-number">7</span>]*b[<span class="hljs-number">12</span>]);
        q[ <span class="hljs-number">5</span>]=(a[ <span class="hljs-number">4</span>]*b[ <span class="hljs-number">1</span>])+(a[ <span class="hljs-number">5</span>]*b[ <span class="hljs-number">5</span>])+(a[ <span class="hljs-number">6</span>]*b[ <span class="hljs-number">9</span>])+(a[ <span class="hljs-number">7</span>]*b[<span class="hljs-number">13</span>]);
        q[ <span class="hljs-number">6</span>]=(a[ <span class="hljs-number">4</span>]*b[ <span class="hljs-number">2</span>])+(a[ <span class="hljs-number">5</span>]*b[ <span class="hljs-number">6</span>])+(a[ <span class="hljs-number">6</span>]*b[<span class="hljs-number">10</span>])+(a[ <span class="hljs-number">7</span>]*b[<span class="hljs-number">14</span>]);
        q[ <span class="hljs-number">7</span>]=(a[ <span class="hljs-number">4</span>]*b[ <span class="hljs-number">3</span>])+(a[ <span class="hljs-number">5</span>]*b[ <span class="hljs-number">7</span>])+(a[ <span class="hljs-number">6</span>]*b[<span class="hljs-number">11</span>])+(a[ <span class="hljs-number">7</span>]*b[<span class="hljs-number">15</span>]);
        q[ <span class="hljs-number">8</span>]=(a[ <span class="hljs-number">8</span>]*b[ <span class="hljs-number">0</span>])+(a[ <span class="hljs-number">9</span>]*b[ <span class="hljs-number">4</span>])+(a[<span class="hljs-number">10</span>]*b[ <span class="hljs-number">8</span>])+(a[<span class="hljs-number">11</span>]*b[<span class="hljs-number">12</span>]);
        q[ <span class="hljs-number">9</span>]=(a[ <span class="hljs-number">8</span>]*b[ <span class="hljs-number">1</span>])+(a[ <span class="hljs-number">9</span>]*b[ <span class="hljs-number">5</span>])+(a[<span class="hljs-number">10</span>]*b[ <span class="hljs-number">9</span>])+(a[<span class="hljs-number">11</span>]*b[<span class="hljs-number">13</span>]);
        q[<span class="hljs-number">10</span>]=(a[ <span class="hljs-number">8</span>]*b[ <span class="hljs-number">2</span>])+(a[ <span class="hljs-number">9</span>]*b[ <span class="hljs-number">6</span>])+(a[<span class="hljs-number">10</span>]*b[<span class="hljs-number">10</span>])+(a[<span class="hljs-number">11</span>]*b[<span class="hljs-number">14</span>]);
        q[<span class="hljs-number">11</span>]=(a[ <span class="hljs-number">8</span>]*b[ <span class="hljs-number">3</span>])+(a[ <span class="hljs-number">9</span>]*b[ <span class="hljs-number">7</span>])+(a[<span class="hljs-number">10</span>]*b[<span class="hljs-number">11</span>])+(a[<span class="hljs-number">11</span>]*b[<span class="hljs-number">15</span>]);
        q[<span class="hljs-number">12</span>]=(a[<span class="hljs-number">12</span>]*b[ <span class="hljs-number">0</span>])+(a[<span class="hljs-number">13</span>]*b[ <span class="hljs-number">4</span>])+(a[<span class="hljs-number">14</span>]*b[ <span class="hljs-number">8</span>])+(a[<span class="hljs-number">15</span>]*b[<span class="hljs-number">12</span>]);
        q[<span class="hljs-number">13</span>]=(a[<span class="hljs-number">12</span>]*b[ <span class="hljs-number">1</span>])+(a[<span class="hljs-number">13</span>]*b[ <span class="hljs-number">5</span>])+(a[<span class="hljs-number">14</span>]*b[ <span class="hljs-number">9</span>])+(a[<span class="hljs-number">15</span>]*b[<span class="hljs-number">13</span>]);
        q[<span class="hljs-number">14</span>]=(a[<span class="hljs-number">12</span>]*b[ <span class="hljs-number">2</span>])+(a[<span class="hljs-number">13</span>]*b[ <span class="hljs-number">6</span>])+(a[<span class="hljs-number">14</span>]*b[<span class="hljs-number">10</span>])+(a[<span class="hljs-number">15</span>]*b[<span class="hljs-number">14</span>]);
        q[<span class="hljs-number">15</span>]=(a[<span class="hljs-number">12</span>]*b[ <span class="hljs-number">3</span>])+(a[<span class="hljs-number">13</span>]*b[ <span class="hljs-number">7</span>])+(a[<span class="hljs-number">14</span>]*b[<span class="hljs-number">11</span>])+(a[<span class="hljs-number">15</span>]*b[<span class="hljs-number">15</span>]);
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">16</span>;i++) c[i]=q[i];
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_mul_vector</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span>
        </span>{
        <span class="hljs-type">double</span> q[<span class="hljs-number">3</span>];
        q[<span class="hljs-number">0</span>]=(a[ <span class="hljs-number">0</span>]*b[<span class="hljs-number">0</span>])+(a[ <span class="hljs-number">1</span>]*b[<span class="hljs-number">1</span>])+(a[ <span class="hljs-number">2</span>]*b[<span class="hljs-number">2</span>])+(a[ <span class="hljs-number">3</span>]);
        q[<span class="hljs-number">1</span>]=(a[ <span class="hljs-number">4</span>]*b[<span class="hljs-number">0</span>])+(a[ <span class="hljs-number">5</span>]*b[<span class="hljs-number">1</span>])+(a[ <span class="hljs-number">6</span>]*b[<span class="hljs-number">2</span>])+(a[ <span class="hljs-number">7</span>]);
        q[<span class="hljs-number">2</span>]=(a[ <span class="hljs-number">8</span>]*b[<span class="hljs-number">0</span>])+(a[ <span class="hljs-number">9</span>]*b[<span class="hljs-number">1</span>])+(a[<span class="hljs-number">10</span>]*b[<span class="hljs-number">2</span>])+(a[<span class="hljs-number">11</span>]);
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=q[i];
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_subdet</span>    <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>
        </span>{
        <span class="hljs-type">double</span>   q[<span class="hljs-number">16</span>];
        <span class="hljs-type">int</span>     i,j;
        <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++)
         <span class="hljs-keyword">for</span> (j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">4</span>;j++)
          q[j+(i&lt;&lt;<span class="hljs-number">2</span>)]=<span class="hljs-built_in">matrix_subdet</span>(a,i,j);
        <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">16</span>;i++) c[i]=q[i];
        }
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_subdet</span>    <span class="hljs-params">(         <span class="hljs-type">double</span> *a,<span class="hljs-type">int</span> r,<span class="hljs-type">int</span> s)</span>
        </span>{
        <span class="hljs-type">double</span>   c,q[<span class="hljs-number">9</span>];
        <span class="hljs-type">int</span>     i,j,k;
        k=<span class="hljs-number">0</span>;                            <span class="hljs-comment">// q = sub matrix</span>
        <span class="hljs-keyword">for</span> (j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">4</span>;j++)
         <span class="hljs-keyword">if</span> (j!=s)
          <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++)
           <span class="hljs-keyword">if</span> (i!=r)
                {
                q[k]=a[i+(j&lt;&lt;<span class="hljs-number">2</span>)];
                k++;
                }
        c=<span class="hljs-number">0</span>;
        c+=q[<span class="hljs-number">0</span>]*q[<span class="hljs-number">4</span>]*q[<span class="hljs-number">8</span>];
        c+=q[<span class="hljs-number">1</span>]*q[<span class="hljs-number">5</span>]*q[<span class="hljs-number">6</span>];
        c+=q[<span class="hljs-number">2</span>]*q[<span class="hljs-number">3</span>]*q[<span class="hljs-number">7</span>];
        c-=q[<span class="hljs-number">0</span>]*q[<span class="hljs-number">5</span>]*q[<span class="hljs-number">7</span>];
        c-=q[<span class="hljs-number">1</span>]*q[<span class="hljs-number">3</span>]*q[<span class="hljs-number">8</span>];
        c-=q[<span class="hljs-number">2</span>]*q[<span class="hljs-number">4</span>]*q[<span class="hljs-number">6</span>];
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">int</span>((r+s)&amp;<span class="hljs-number">1</span>)) c=-c;       <span class="hljs-comment">// add signum</span>
        <span class="hljs-keyword">return</span> c;
        }
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_det</span>       <span class="hljs-params">(         <span class="hljs-type">double</span> *a)</span>
        </span>{
        <span class="hljs-type">double</span> c=<span class="hljs-number">0</span>;
        c+=a[ <span class="hljs-number">0</span>]*<span class="hljs-built_in">matrix_subdet</span>(a,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
        c+=a[ <span class="hljs-number">4</span>]*<span class="hljs-built_in">matrix_subdet</span>(a,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
        c+=a[ <span class="hljs-number">8</span>]*<span class="hljs-built_in">matrix_subdet</span>(a,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>);
        c+=a[<span class="hljs-number">12</span>]*<span class="hljs-built_in">matrix_subdet</span>(a,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>);
        <span class="hljs-keyword">return</span> c;
        }
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">matrix_det</span>       <span class="hljs-params">(         <span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span>
        </span>{
        <span class="hljs-type">double</span> c=<span class="hljs-number">0</span>;
        c+=a[ <span class="hljs-number">0</span>]*b[ <span class="hljs-number">0</span>];
        c+=a[ <span class="hljs-number">4</span>]*b[ <span class="hljs-number">1</span>];
        c+=a[ <span class="hljs-number">8</span>]*b[ <span class="hljs-number">2</span>];
        c+=a[<span class="hljs-number">12</span>]*b[ <span class="hljs-number">3</span>];
        <span class="hljs-keyword">return</span> c;
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">matrix_inv</span>       <span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>
        </span>{
        <span class="hljs-type">double</span>   d[<span class="hljs-number">16</span>],D;
        <span class="hljs-built_in">matrix_subdet</span>(d,a);
        D=<span class="hljs-built_in">matrix_det</span>(a,d);
        <span class="hljs-keyword">if</span> (D) D=<span class="hljs-number">1.0</span>/D;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">16</span>;i++) c[i]=d[i]*D;
        }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-comment">// now the object representation</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> pnts=<span class="hljs-number">8</span>;
<span class="hljs-type">double</span> pnt[pnts*<span class="hljs-number">3</span>]=     <span class="hljs-comment">// Vertexes for 100x100x100 cube centered at (0,0,0)</span>
    {
    <span class="hljs-number">-100.0</span>,<span class="hljs-number">-100.0</span>,<span class="hljs-number">-100.0</span>,
    <span class="hljs-number">-100.0</span>,+<span class="hljs-number">100.0</span>,<span class="hljs-number">-100.0</span>,
    +<span class="hljs-number">100.0</span>,+<span class="hljs-number">100.0</span>,<span class="hljs-number">-100.0</span>,
    +<span class="hljs-number">100.0</span>,<span class="hljs-number">-100.0</span>,<span class="hljs-number">-100.0</span>,
    <span class="hljs-number">-100.0</span>,<span class="hljs-number">-100.0</span>,+<span class="hljs-number">100.0</span>,
    <span class="hljs-number">-100.0</span>,+<span class="hljs-number">100.0</span>,+<span class="hljs-number">100.0</span>,
    +<span class="hljs-number">100.0</span>,+<span class="hljs-number">100.0</span>,+<span class="hljs-number">100.0</span>,
    +<span class="hljs-number">100.0</span>,<span class="hljs-number">-100.0</span>,+<span class="hljs-number">100.0</span>,
    };
<span class="hljs-type">const</span> <span class="hljs-type">int</span> facs=<span class="hljs-number">6</span>;
<span class="hljs-type">int</span> fac[facs*<span class="hljs-number">4</span>]=        <span class="hljs-comment">// faces (index of point used) no winding rule</span>
    {
    <span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,
    <span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,
    <span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,
    <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">6</span>,<span class="hljs-number">5</span>,
    <span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>,
    <span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">7</span>,
    };
<span class="hljs-type">double</span> rep[<span class="hljs-number">16</span>]=        <span class="hljs-comment">// 4x4 transform matrix of object (unit from start) at (0,0,+100)</span>
    {
    <span class="hljs-number">1.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,  <span class="hljs-number">0.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,<span class="hljs-number">0.0</span>,  <span class="hljs-number">0.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,<span class="hljs-number">100.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,
    };
<span class="hljs-type">double</span> eye[<span class="hljs-number">16</span>]=        <span class="hljs-comment">// 4x4 transform matrix of camera at (0,0,-150)</span>
    {
    <span class="hljs-number">1.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,   <span class="hljs-number">0.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,<span class="hljs-number">0.0</span>,   <span class="hljs-number">0.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,<span class="hljs-number">-150.0</span>,
    <span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">1.0</span>,
    };
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-comment">// this is how to draw it</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">obj</span><span class="hljs-params">(<span class="hljs-type">double</span> *pnt,<span class="hljs-type">int</span> pnts,<span class="hljs-type">int</span> *fac,<span class="hljs-type">int</span> facs,<span class="hljs-type">double</span> *rep,<span class="hljs-type">double</span> *ieye)</span>
    </span>{
    <span class="hljs-comment">// variables for drawing</span>
    <span class="hljs-type">int</span> i;
    <span class="hljs-type">double</span> p0[<span class="hljs-number">3</span>],p1[<span class="hljs-number">3</span>],p2[<span class="hljs-number">3</span>],p3[<span class="hljs-number">3</span>],m[<span class="hljs-number">16</span>],d;
    <span class="hljs-comment">// gfx api variables (change to your stuff) Main is the main form of this application</span>
    TCanvas *scr=Main-&gt;bmp-&gt;Canvas;
    <span class="hljs-type">double</span> xs2=Main-&gt;ClientWidth/<span class="hljs-number">2</span>,ys2=Main-&gt;ClientHeight/<span class="hljs-number">2</span>;
    <span class="hljs-type">double</span> v=xs2*<span class="hljs-built_in">tan</span>(<span class="hljs-number">30.0</span>*deg); <span class="hljs-comment">// 60 degree viewing angle perspective projection</span>

    <span class="hljs-built_in">matrix_mul</span>(m,ieye,rep);             <span class="hljs-comment">// cumulate all needed transforms</span>

    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;facs*<span class="hljs-number">4</span>;)                 <span class="hljs-comment">// go through all faces</span>
        {
        <span class="hljs-comment">// convert all points of face</span>
        <span class="hljs-built_in">matrix_mul_vector</span>(p0,m,&amp;pnt[fac[i]*<span class="hljs-number">3</span>]); i++;
        <span class="hljs-built_in">matrix_mul_vector</span>(p1,m,&amp;pnt[fac[i]*<span class="hljs-number">3</span>]); i++;
        <span class="hljs-built_in">matrix_mul_vector</span>(p2,m,&amp;pnt[fac[i]*<span class="hljs-number">3</span>]); i++;
        <span class="hljs-built_in">matrix_mul_vector</span>(p3,m,&amp;pnt[fac[i]*<span class="hljs-number">3</span>]); i++;
        <span class="hljs-comment">// here goes perspective divide by z coordinate if needed</span>
        d=<span class="hljs-built_in">divide</span>(v,p0[<span class="hljs-number">2</span>]); p0[<span class="hljs-number">0</span>]*=d; p0[<span class="hljs-number">1</span>]*=d;
        d=<span class="hljs-built_in">divide</span>(v,p1[<span class="hljs-number">2</span>]); p1[<span class="hljs-number">0</span>]*=d; p1[<span class="hljs-number">1</span>]*=d;
        d=<span class="hljs-built_in">divide</span>(v,p2[<span class="hljs-number">2</span>]); p2[<span class="hljs-number">0</span>]*=d; p2[<span class="hljs-number">1</span>]*=d;
        d=<span class="hljs-built_in">divide</span>(v,p3[<span class="hljs-number">2</span>]); p3[<span class="hljs-number">0</span>]*=d; p3[<span class="hljs-number">1</span>]*=d;
        <span class="hljs-comment">// here is viewport transform (just translate (0,0) to middle of screen in this case</span>
        p0[<span class="hljs-number">0</span>]+=xs2; p0[<span class="hljs-number">1</span>]+=ys2;
        p1[<span class="hljs-number">0</span>]+=xs2; p1[<span class="hljs-number">1</span>]+=ys2;
        p2[<span class="hljs-number">0</span>]+=xs2; p2[<span class="hljs-number">1</span>]+=ys2;
        p3[<span class="hljs-number">0</span>]+=xs2; p3[<span class="hljs-number">1</span>]+=ys2;
        <span class="hljs-comment">// draw quad</span>
        <span class="hljs-comment">// I use VCL GDI TCanvas you use what you have ...</span>
        <span class="hljs-comment">// and wireframe only to keep this simple (no Z buffer,winding culling,...)</span>
        scr-&gt;Pen-&gt;Color=clAqua;     <span class="hljs-comment">// perimeter wireframe</span>
        scr-&gt;<span class="hljs-built_in">MoveTo</span>(p0[<span class="hljs-number">0</span>],p0[<span class="hljs-number">1</span>]);
        scr-&gt;<span class="hljs-built_in">LineTo</span>(p1[<span class="hljs-number">0</span>],p1[<span class="hljs-number">1</span>]);
        scr-&gt;<span class="hljs-built_in">LineTo</span>(p2[<span class="hljs-number">0</span>],p2[<span class="hljs-number">1</span>]);
        scr-&gt;<span class="hljs-built_in">LineTo</span>(p3[<span class="hljs-number">0</span>],p3[<span class="hljs-number">1</span>]);
        scr-&gt;<span class="hljs-built_in">LineTo</span>(p0[<span class="hljs-number">0</span>],p0[<span class="hljs-number">1</span>]);
<span class="hljs-comment">//      scr-&gt;Pen-&gt;Color=clBlue;     // face cross to visualy check if I correctly generate the fac[]</span>
<span class="hljs-comment">//      scr-&gt;MoveTo(p0[0],p0[1]);</span>
<span class="hljs-comment">//      scr-&gt;LineTo(p2[0],p2[1]);</span>
<span class="hljs-comment">//      scr-&gt;MoveTo(p1[0],p1[1]);</span>
<span class="hljs-comment">//      scr-&gt;LineTo(p3[0],p3[1]);</span>
        }
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">TMain::draw</span><span class="hljs-params">()</span>
    </span>{
    <span class="hljs-keyword">if</span> (!_redraw) <span class="hljs-keyword">return</span>;
    bmp-&gt;Canvas-&gt;Brush-&gt;Color=clBlack;
    bmp-&gt;Canvas-&gt;<span class="hljs-built_in">FillRect</span>(<span class="hljs-built_in">TRect</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,xs,ys));

    <span class="hljs-comment">// compute inverse of camera need to compute just once for all objects</span>
    <span class="hljs-type">double</span> ieye[<span class="hljs-number">16</span>];
    <span class="hljs-built_in">matrix_inv</span>(ieye,eye);
    <span class="hljs-comment">// draw all objects</span>
    <span class="hljs-built_in">obj</span>(pnt,pnts,fac,facs,rep,ieye);

    Main-&gt;Canvas-&gt;<span class="hljs-built_in">Draw</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,bmp);
    _redraw=<span class="hljs-literal">false</span>;
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function">__fastcall <span class="hljs-title">TMain::TMain</span><span class="hljs-params">(TComponent* Owner)</span> : TForm(Owner)
    {</span>
    <span class="hljs-comment">// window constructor you can ignore this ... (just create a backbuffer bitmap here)</span>
    bmp=<span class="hljs-keyword">new</span> Graphics::TBitmap;
    bmp-&gt;HandleType=bmDIB;
    bmp-&gt;PixelFormat=pf32bit;
    pyx=<span class="hljs-literal">NULL</span>;
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> __fastcall <span class="hljs-title">TMain::FormDestroy</span><span class="hljs-params">(TObject *Sender)</span>
    </span>{
    <span class="hljs-comment">// window destructor release memory ... also ignoe this</span>
    <span class="hljs-keyword">if</span> (pyx) <span class="hljs-keyword">delete</span> pyx;
    <span class="hljs-keyword">delete</span> bmp;
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> __fastcall <span class="hljs-title">TMain::FormResize</span><span class="hljs-params">(TObject *Sender)</span>
    </span>{
    <span class="hljs-comment">// on resize event ... just resize/redraw backbuffer also can ignore this</span>
    xs=ClientWidth;  xs2=xs&gt;&gt;<span class="hljs-number">1</span>;
    ys=ClientHeight; ys2=ys&gt;&gt;<span class="hljs-number">1</span>;
    bmp-&gt;Width=xs;
    bmp-&gt;Height=ys;
    <span class="hljs-keyword">if</span> (pyx) <span class="hljs-keyword">delete</span> pyx;
    pyx=<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>*[ys];
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y=<span class="hljs-number">0</span>;y&lt;ys;y++) pyx[y]=(<span class="hljs-type">int</span>*) bmp-&gt;ScanLine[y];
    _redraw=<span class="hljs-literal">true</span>;
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> __fastcall <span class="hljs-title">TMain::FormPaint</span><span class="hljs-params">(TObject *Sender)</span>
    </span>{
    <span class="hljs-comment">// repaint event can ignore</span>
    _redraw=<span class="hljs-literal">true</span>;
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
<span class="hljs-function"><span class="hljs-type">void</span> __fastcall <span class="hljs-title">TMain::tim_redrawTimer</span><span class="hljs-params">(TObject *Sender)</span>
    </span>{
    <span class="hljs-comment">// timer event to animate the cube ...</span>
    _redraw=<span class="hljs-literal">true</span>;

    <span class="hljs-comment">// rotate the object to see it in motion</span>
    <span class="hljs-type">double</span> ang,c,s;

    ang=<span class="hljs-number">5.0</span>*deg; c=<span class="hljs-built_in">cos</span>(ang); s=<span class="hljs-built_in">sin</span>(ang);    <span class="hljs-comment">// rotate baround z by 5 degrees per timer step</span>
    <span class="hljs-type">double</span> rz[<span class="hljs-number">16</span>]= { c, s, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
                    -s, c, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
                     <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>,
                     <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> };

    ang=<span class="hljs-number">1.0</span>*deg; c=<span class="hljs-built_in">cos</span>(ang); s=<span class="hljs-built_in">sin</span>(ang);    <span class="hljs-comment">// rotate baround x by 1 degrees per timer step</span>
    <span class="hljs-type">double</span> rx[<span class="hljs-number">16</span>]= { <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
                     <span class="hljs-number">0</span>, c, s, <span class="hljs-number">0</span>,
                     <span class="hljs-number">0</span>,-s, c, <span class="hljs-number">0</span>,
                     <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> };
    <span class="hljs-built_in">matrix_mul</span>(rep,rep,rz);
    <span class="hljs-built_in">matrix_mul</span>(rep,rep,rx);

    <span class="hljs-built_in">draw</span>();
    }
<span class="hljs-comment">//---------------------------------------------------------------------------</span>
</code></pre>
<p>here is how it looks like:</p>
<p><img src="https://i.stack.imgur.com/lgfsw.png" alt="cube example"></p>
<p>And GIF animation with back face culling:</p>
<p><a href="https://i.stack.imgur.com/FGVUb.gif" rel="noreferrer"><img src="https://i.stack.imgur.com/FGVUb.gif" alt="animation"></a></p>
<p><strong>[notes]</strong></p>
<p>If you have more questions then comment me ...</p>
<p><strong>[Edit2] basic 3D vector operations often needed</strong></p>
<p>If you do not know how to compute vector operations like cross/dot products or absolute value see:</p>
<pre class="lang-cpp s-code-block"><code class="hljs language-cpp"><span class="hljs-comment">// cross product: W = U x V</span>
W.x=(U.y*V.z)-(U.z*V.y)
W.y=(U.z*V.x)-(U.x*V.z)
W.z=(U.x*V.y)-(U.y*V.x)
<span class="hljs-comment">// dot product: a = (U.V)</span>
a=U.x*V.x+U.y*V.y+U.z*V.z
<span class="hljs-comment">// abs of vector a = |U|</span>
a=<span class="hljs-built_in">sqrt</span>((U.x*U.x)+(U.y*U.y)+(U.z*U.z))
</code></pre>
<p>here my C++ vector math:</p>
<pre class="lang-cpp s-code-block"><code class="hljs language-cpp"><span class="hljs-type">static</span> <span class="hljs-type">double</span> vector_tmp[<span class="hljs-number">3</span>];
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y)</span> </span>{ <span class="hljs-keyword">if</span> ((y&gt;=<span class="hljs-number">-1e-30</span>)&amp;&amp;(y&lt;=+<span class="hljs-number">1e-30</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>; <span class="hljs-keyword">return</span> x/y; }
<span class="hljs-function"><span class="hljs-type">double</span>* <span class="hljs-title">vector_ld</span><span class="hljs-params">(<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y,<span class="hljs-type">double</span> z)</span>          </span>{ <span class="hljs-type">double</span> *p=vector_tmp; p[<span class="hljs-number">0</span>]=x; p[<span class="hljs-number">1</span>]=y; p[<span class="hljs-number">2</span>]=z; <span class="hljs-keyword">return</span> p;}
<span class="hljs-function"><span class="hljs-type">double</span>* <span class="hljs-title">vector_ld</span><span class="hljs-params">(<span class="hljs-type">double</span> *p,<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y,<span class="hljs-type">double</span> z)</span> </span>{                      p[<span class="hljs-number">0</span>]=x; p[<span class="hljs-number">1</span>]=y; p[<span class="hljs-number">2</span>]=z; <span class="hljs-keyword">return</span> p;}
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_copy</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>         </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=a[i];       }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_abs</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>          </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=<span class="hljs-built_in">fabs</span>(a[i]); }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_one</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>
        </span>{
        <span class="hljs-type">double</span> l=<span class="hljs-built_in">divide</span>(<span class="hljs-number">1.0</span>,<span class="hljs-built_in">sqrt</span>((a[<span class="hljs-number">0</span>]*a[<span class="hljs-number">0</span>])+(a[<span class="hljs-number">1</span>]*a[<span class="hljs-number">1</span>])+(a[<span class="hljs-number">2</span>]*a[<span class="hljs-number">2</span>])));
        c[<span class="hljs-number">0</span>]=a[<span class="hljs-number">0</span>]*l;
        c[<span class="hljs-number">1</span>]=a[<span class="hljs-number">1</span>]*l;
        c[<span class="hljs-number">2</span>]=a[<span class="hljs-number">2</span>]*l;
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_len</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> l)</span>
        </span>{
        l=<span class="hljs-built_in">divide</span>(l,<span class="hljs-built_in">sqrt</span>((a[<span class="hljs-number">0</span>]*a[<span class="hljs-number">0</span>])+(a[<span class="hljs-number">1</span>]*a[<span class="hljs-number">1</span>])+(a[<span class="hljs-number">2</span>]*a[<span class="hljs-number">2</span>])));
        c[<span class="hljs-number">0</span>]=a[<span class="hljs-number">0</span>]*l;
        c[<span class="hljs-number">1</span>]=a[<span class="hljs-number">1</span>]*l;
        c[<span class="hljs-number">2</span>]=a[<span class="hljs-number">2</span>]*l;
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_neg</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a)</span>          </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=-a[i];      }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_add</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span> </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=a[i]+b[i]; }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_sub</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span> </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=a[i]-b[i]; }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_mul</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span> <span class="hljs-comment">// cross</span>
        </span>{
        <span class="hljs-type">double</span>   q[<span class="hljs-number">3</span>];
        q[<span class="hljs-number">0</span>]=(a[<span class="hljs-number">1</span>]*b[<span class="hljs-number">2</span>])-(a[<span class="hljs-number">2</span>]*b[<span class="hljs-number">1</span>]);
        q[<span class="hljs-number">1</span>]=(a[<span class="hljs-number">2</span>]*b[<span class="hljs-number">0</span>])-(a[<span class="hljs-number">0</span>]*b[<span class="hljs-number">2</span>]);
        q[<span class="hljs-number">2</span>]=(a[<span class="hljs-number">0</span>]*b[<span class="hljs-number">1</span>])-(a[<span class="hljs-number">1</span>]*b[<span class="hljs-number">0</span>]);
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=q[i];
        }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_mul</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span> *a,<span class="hljs-type">double</span>  b)</span> </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=a[i]*b; }
<span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">vector_mul</span><span class="hljs-params">(<span class="hljs-type">double</span> *c,<span class="hljs-type">double</span>  a,<span class="hljs-type">double</span> *b)</span> </span>{ <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c[i]=a*b[i]; }
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">vector_mul</span><span class="hljs-params">(         <span class="hljs-type">double</span> *a,<span class="hljs-type">double</span> *b)</span> </span>{ <span class="hljs-type">double</span> c=<span class="hljs-number">0</span>; <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">3</span>;i++) c+=a[i]*b[i]; <span class="hljs-keyword">return</span> c; } <span class="hljs-comment">// dot</span>
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">vector_len</span><span class="hljs-params">(<span class="hljs-type">double</span> *a)</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrt</span>((a[<span class="hljs-number">0</span>]*a[<span class="hljs-number">0</span>])+(a[<span class="hljs-number">1</span>]*a[<span class="hljs-number">1</span>])+(a[<span class="hljs-number">2</span>]*a[<span class="hljs-number">2</span>])); }
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">vector_len2</span><span class="hljs-params">(<span class="hljs-type">double</span> *a)</span> </span>{ <span class="hljs-keyword">return</span> (a[<span class="hljs-number">0</span>]*a[<span class="hljs-number">0</span>])+(a[<span class="hljs-number">1</span>]*a[<span class="hljs-number">1</span>])+(a[<span class="hljs-number">2</span>]*a[<span class="hljs-number">2</span>]); }
</code></pre>
<p><strong>[Edit3] local rotations for camera and object control via keyboard</strong></p>
<p>As this has been asked a lot lately here some example answers of mine with demos:</p>
<ul>
<li><a href="https://stackoverflow.com/a/40171880/2521214">stationary camera view control (partial pseudo inverse matrix)</a></li>
<li><a href="https://stackoverflow.com/a/40104549/2521214">camera and player control (inverse matrix)</a></li>
<li><a href="https://stackoverflow.com/a/42293434/2521214">How to preserve accuracy with cumulative transforms over time (full pseudo inverse matrix)</a></li>
<li><a href="https://stackoverflow.com/a/52801501/2521214">rotundus style simple OpenGL/C++/VCL player control example</a></li>
</ul>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/what-is-the-difference-between-include-lessfilenamegreater-and-include-%22filename%22-1657388489547">What is the difference between #include &lt;filename&gt; and #include &quot;filename&quot;?</a><a href="/questions/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element-1657384326458">Why does jQuery or a DOM method such as getElementById not find the element?</a><a href="/questions/what-is-the-!!-(not-not)-operator-in-javascript-1657387947844">What is the !! (not not) operator in JavaScript?</a><a href="/questions/copy-array-by-value-1657387649531">Copy array by value</a><a href="/questions/how-can-i-do-a-full-outer-join-in-mysql-1657388175444">How can I do a FULL OUTER JOIN in MySQL?</a><a href="/questions/how-to-removedelete-a-large-file-from-commit-history-in-the-git-repository-1657387589093">How to remove/delete a large file from commit history in the Git repository?</a><a href="/questions/how-do-i-merge-two-dictionaries-in-a-single-expression-1657387593160">How do I merge two dictionaries in a single expression?</a><a href="/questions/is-there-a-javascript-jquery-dom-change-listener-1657387961200">Is there a JavaScript / jQuery DOM change listener?</a><a href="/questions/make-a-div-fill-the-height-of-the-remaining-screen-space-1657387482387">Make a div fill the height of the remaining screen space</a><a href="/questions/convert-rows-to-columns-using-&#x27;pivot&#x27;-in-sql-server-1657388372528">Convert Rows to columns using &#x27;Pivot&#x27; in SQL Server</a><a href="/questions/sort-(order)-data-frame-rows-by-multiple-columns-1657388355671">Sort (order) data frame rows by multiple columns</a><a href="/questions/iterator-invalidation-rules-for-c++-containers-1657387561090">Iterator invalidation rules for C++ containers</a><a href="/questions/how-to-choose-the-right-bean-scope-1657387596513">How to choose the right bean scope?</a><a href="/questions/command-not-found-error-in-bash-variable-assignment-1657388326347">Command not found error in Bash variable assignment</a><a href="/questions/what-are-metaclasses-in-python-1657387811608">What are metaclasses in Python?</a><a href="/questions/how-can-i-tell-if-a-dom-element-is-visible-in-the-current-viewport-1657388316510">How can I tell if a DOM element is visible in the current viewport?</a><a href="/questions/prefer-composition-over-inheritance-1657387399409">Prefer composition over inheritance?</a><a href="/questions/ways-to-circumvent-the-same-origin-policy-1657384763316">Ways to circumvent the same-origin policy</a><a href="/questions/how-to-filter-pandas-dataframe-using-&#x27;in&#x27;-and-&#x27;not-in&#x27;-like-in-sql-1657387371355">How to filter Pandas dataframe using &#x27;in&#x27; and &#x27;not in&#x27; like in SQL</a><a href="/questions/the-viewdata-item-that-has-the-key-&#x27;xxx&#x27;-is-of-type-&#x27;system.int32&#x27;-but-must-be-of-type-&#x27;ienumerablelessselectlistitemgreater&#x27;-1657388454191">The ViewData item that has the key &#x27;XXX&#x27; is of type &#x27;System.Int32&#x27; but must be of type &#x27;IEnumerable&lt;SelectListItem&gt;&#x27;</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;So the question really is \u0026lt;strong\u0026gt;Understanding 4x4 homogenous transform matrices\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;well without the math behind the only thing that left is geometric representation/meaning which is far better for human abstraction/understanding.\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;So what the 4x4 matrix is?\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;It is representation of some Cartesian coordinate system and it is composed of:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;3\u0026lt;/code\u0026gt; basis vectors (one for each axis) red,green,blue\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So if the red,green,blue vectors are perpendicular to each other then the coordinate system is \u0026lt;strong\u0026gt;orthogonal\u0026lt;/strong\u0026gt;. If they are also unit vectors then it is \u0026lt;strong\u0026gt;orthonormal\u0026lt;/strong\u0026gt; (like for example unit matrix).\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;origin point gray\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;projection and homogenous side (unmarked bottom rest of the matrix)\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This part is there only for enabling rotation and translation at once, therefore point used must be homogenous that means in form \u0026lt;code\u0026gt;(x,y,z,w=1)\u0026lt;/code\u0026gt; for points and \u0026lt;code\u0026gt;(x,y,z,w=0)\u0026lt;/code\u0026gt; for direction vectors. If it was just \u0026lt;code\u0026gt;(x,y,z)\u0026lt;/code\u0026gt; then the matrix would be \u0026lt;code\u0026gt;3x3\u0026lt;/code\u0026gt; and that is not enough for translation. I will not use any projections they are uneasy to explain geometrically.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;This layout is from \u0026lt;strong\u0026gt;OpenGL notation\u0026lt;/strong\u0026gt; there are also transposed representation out there (vectors are rows not columns)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;now how to transform any point to/from this coordinate system:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;g=M*l;\nl=Inverse(M)*g;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;where:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;M\u0026lt;/code\u0026gt; is transform matrix\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;l\u0026lt;/code\u0026gt; is \u0026lt;code\u0026gt;M\u0026lt;/code\u0026gt; local coordinate system point (LCS)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;g\u0026lt;/code\u0026gt; is global coordinate system point (GCS)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;for the transposed version (\u0026lt;strong\u0026gt;DirectX\u0026lt;/strong\u0026gt;) it is:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;l=M*g;\ng=Inverse(M)*l;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;That is because \u0026lt;strong\u0026gt;transposed orthogonal rotation matrix is also inverse of itself\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;for more info see \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/25216549/2521214\u0026quot;\u0026gt;transform matrix anatomy\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/21100338/2521214\u0026quot;\u0026gt;3D graphic pipeline\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/rayCb.png\u0026quot; alt=\u0026quot;OpenGL transform matrix\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;how to visualize it\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Yes you can draw the matrix numbers but they do not make sense at first look especially if the numbers are changing so draw the axises vectors as on image above. Where each axis is a line from \u0026lt;code\u0026gt;origin\u0026lt;/code\u0026gt; to \u0026lt;code\u0026gt;origin + line_size*axis_vector\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;how to construct it\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Just compute axis vectors and origin and put them inside matrix. To ensure orthogonality exploit \u0026lt;strong\u0026gt;cross product\u0026lt;/strong\u0026gt; (but be careful with order of multiplicants to use the right direction) Here \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/41813188/2521214\u0026quot;\u0026gt;example of getting 3 basis vectors from direction\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;effects\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;rotation is done by rotating the axises so you can compute each axis by parametric circle equation ...\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;scaling is done by multiplying axises by scale factor\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;skewing is just using non perpendicular axises\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;rotation\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For most cases the incremental rotation is used. There are two types\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;local rotation\u0026lt;/strong\u0026gt; \u0026lt;code\u0026gt;M\u0026apos;=M*rotation_matrix\u0026lt;/code\u0026gt; it rotates around local coordinate axises like you will control plane or car or player ... Most engines/games do not use these and fake it with \u0026lt;strong\u0026gt;euler angles\u0026lt;/strong\u0026gt; instead which is a cheap solution (have many quirks and problems) because most people who using OpenGL do not even know this is possible and rather stack list of \u0026lt;code\u0026gt;glRotate/glTranslate\u0026lt;/code\u0026gt; calls...\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;global rotation\u0026lt;/strong\u0026gt; \u0026lt;code\u0026gt;M\u0026apos;=Inverse(Inverse(M)*rotation_matrix)\u0026lt;/code\u0026gt; it rotates around global coordinate system axises.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;where \u0026lt;code\u0026gt;rotation_matrix\u0026lt;/code\u0026gt; is any standard rotation transform matrix.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you have different matrix layout (transposed) then the rotations local and global are computed the other way around ...\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You can also compute your \u0026lt;code\u0026gt;rotation_matrix\u0026lt;/code\u0026gt; from \u0026lt;code\u0026gt;3\u0026lt;/code\u0026gt; angles like:\u0026lt;/p\u0026gt;\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;rotation_matrix=rotation_around_x(ax)*rotation_around_y(ay)*rotation_around_z(az);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;see \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Rotation_matrix\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Wiki rotation matrices\u0026lt;/a\u0026gt; the 3D \u0026lt;code\u0026gt;Rx,Ry,Rz\u0026lt;/code\u0026gt; from \u0026lt;code\u0026gt;Basic rotations\u0026lt;/code\u0026gt; are what you need. As you can see they are just unit circle parametric equation really. The order of multiplication change how the angles converge to target position. This is called \u0026lt;strong\u0026gt;Euler angles\u0026lt;/strong\u0026gt; and I do not use it (I integrate step changes instead which has no restrictions if done properly not to mention it is simpler).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Anyway if you need you can convert transform matrix into euler angles relatively easily see:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/56950130/2521214\u0026quot;\u0026gt;Is there a way to calculate 3D rotation on X and Y axis from a 4x4 matrix\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;glRotate\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you want \u0026lt;code\u0026gt;glRotate\u0026lt;/code\u0026gt; which is rotation around arbitrary axis not by 3 angles then \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/64389606/2521214\u0026quot;\u0026gt;There is workaround\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;create transform matrix \u0026lt;code\u0026gt;N\u0026lt;/code\u0026gt; for that axis\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;then transform your matrix \u0026lt;code\u0026gt;M\u0026lt;/code\u0026gt; to it\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;rotate \u0026lt;code\u0026gt;N\u0026lt;/code\u0026gt; by angle\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;then transform \u0026lt;code\u0026gt;M\u0026lt;/code\u0026gt; back from \u0026lt;code\u0026gt;N\u0026lt;/code\u0026gt; to global coordinates\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;Or you can use \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Rodrigues_rotation_formula\u0026lt;/a\u0026gt; instead\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;To transform Matrix to/from Matrix in this case just transform axises as points and leave the origin as is but the origin of \u0026lt;code\u0026gt;N\u0026lt;/code\u0026gt; \u0026lt;strong\u0026gt;must be (0,0,0)!!!\u0026lt;/strong\u0026gt; or the vectors transformed must have \u0026lt;code\u0026gt;w=0\u0026lt;/code\u0026gt; instead.\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;usage\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Transformations are cumulative that means:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;p\u0026apos;=M1*M2*M3*M4*p;\u0026lt;/code\u0026gt; is the same as \u0026lt;code\u0026gt;M=M1*M2*M3*M4; p\u0026apos;=M*p\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;So if you have many points to transform then you precompute all transformations to single matrix and use just it. Do not need to multiply points by all subsequent matrices. OK now the concept:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;you should have \u0026lt;code\u0026gt;3\u0026lt;/code\u0026gt; coordinate systems:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;camera \u0026lt;code\u0026gt;C\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;world (usually unit matrix)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;object \u0026lt;code\u0026gt;O\u0026lt;/code\u0026gt; (each object have its own matrix)\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;so if you have cube with \u0026lt;code\u0026gt;8\u0026lt;/code\u0026gt; vertexes \u0026lt;code\u0026gt;p0,...,p7\u0026lt;/code\u0026gt; then you have to perform transformation on each point from object local coordinates to camera local coordinates. Some gfx api do some of it so you apply only what you have to so you really need:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;p(i)\u0026apos;=inverse(C)*unit*M*p(i);\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;the transforms are cumulative and unit matrix does not change anything so:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;Q=inverse(C)*M; p(i)\u0026apos;=Q*p(i);\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;so before drawing compute \u0026lt;code\u0026gt;Q\u0026lt;/code\u0026gt; for drawed object then take each point \u0026lt;code\u0026gt;p(i)\u0026lt;/code\u0026gt; of the object and compute the transformed \u0026lt;code\u0026gt;p(i)\u0026apos;\u0026lt;/code\u0026gt; and draw/use the transformed one ... The \u0026lt;code\u0026gt;p(i)\u0026apos;\u0026lt;/code\u0026gt; is in local camera coordinate system (x,y of the screen) but there is no perspective there so before drawing you can also add any of the projection matrices and divide by \u0026lt;code\u0026gt;z\u0026lt;/code\u0026gt; cordinate at the end ... The projection is also cumulative so it can be also inside \u0026lt;code\u0026gt;Q\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;[edit1] C++ example\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cpp s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//$$---- Form CPP ----\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// apart from math.h include you can ignore this machine generated VCL related code\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;vcl.h\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pragma\u0026lt;/span\u0026gt; hdrstop\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;win_main.h\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;math.h\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pragma\u0026lt;/span\u0026gt; package(smart_init)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;pragma\u0026lt;/span\u0026gt; resource \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;*.dfm\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\nTMain *Main; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// pointer to main window ...\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Here is the important stuff some math first\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; deg=M_PI/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;180.0\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; y)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_mul\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// c[16] = a[16] * b[16]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// c[ 4] = a[16] * b[ 4]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;           \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// c[16] = all subdets of a[16]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(          \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; r,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; s)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      = subdet(r,s) of a[16]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_det\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(          \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;           \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//       = det of a[16]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_det\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(          \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//       = det of a[16] and subdets b[16]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_inv\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;;           \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// c[16] = a[16] ^ -1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; y)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!y) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x/y;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_mul\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;];\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]);\n        q[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;13\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;14\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;15\u0026lt;/span\u0026gt;]);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;;i++) c[i]=q[i];\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;];\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;]);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=q[i];\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;   q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;     i,j;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;i++)\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (j=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;j\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;j++)\n          q[j+(i\u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)]=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(a,i,j);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;;i++) c[i]=q[i];\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(         \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; r,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; s)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;   c,q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;     i,j,k;\n        k=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;                            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// q = sub matrix\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (j=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;j\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;j++)\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (j!=s)\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;i++)\n           \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (i!=r)\n                {\n                q[k]=a[i+(j\u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)];\n                k++;\n                }\n        c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n        c+=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;];\n        c+=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;];\n        c+=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;];\n        c-=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;];\n        c-=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;];\n        c-=q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;((r+s)\u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)) c=-c;       \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// add signum\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; c;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_det\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(         \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(a,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(a,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(a,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;);\n        c+=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(a,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; c;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_det\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(         \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n        c+=a[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;];\n        c+=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;]*b[ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; c;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;matrix_inv\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;   d[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;],D;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_subdet\u0026lt;/span\u0026gt;(d,a);\n        D=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_det\u0026lt;/span\u0026gt;(a,d);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (D) D=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;/D;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;;i++) c[i]=d[i]*D;\n        }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// now the object representation\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; pnts=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; pnt[pnts*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]=     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Vertexes for 100x100x100 cube centered at (0,0,0)\u0026lt;/span\u0026gt;\n    {\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\n    +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\n    +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\n    +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\n    +\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-100.0\u0026lt;/span\u0026gt;,+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\n    };\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; facs=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; fac[facs*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;]=        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// faces (index of point used) no winding rule\u0026lt;/span\u0026gt;\n    {\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;,\n    };\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; rep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;]=        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 4x4 transform matrix of object (unit from start) at (0,0,+100)\u0026lt;/span\u0026gt;\n    {\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\n    };\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; eye[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;]=        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 4x4 transform matrix of camera at (0,0,-150)\u0026lt;/span\u0026gt;\n    {\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-150.0\u0026lt;/span\u0026gt;,\n    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\n    };\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// this is how to draw it\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *pnt,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; pnts,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; *fac,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; facs,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *rep,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *ieye)\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// variables for drawing\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;],p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;],p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;],p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;],m[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;],d;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// gfx api variables (change to your stuff) Main is the main form of this application\u0026lt;/span\u0026gt;\n    TCanvas *scr=Main-\u0026amp;gt;bmp-\u0026amp;gt;Canvas;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; xs2=Main-\u0026amp;gt;ClientWidth/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,ys2=Main-\u0026amp;gt;ClientHeight/\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; v=xs2*\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;tan\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;30.0\u0026lt;/span\u0026gt;*deg); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 60 degree viewing angle perspective projection\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul\u0026lt;/span\u0026gt;(m,ieye,rep);             \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cumulate all needed transforms\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;facs*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;)                 \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// go through all faces\u0026lt;/span\u0026gt;\n        {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// convert all points of face\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;(p0,m,\u0026amp;amp;pnt[fac[i]*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]); i++;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;(p1,m,\u0026amp;amp;pnt[fac[i]*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]); i++;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;(p2,m,\u0026amp;amp;pnt[fac[i]*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]); i++;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul_vector\u0026lt;/span\u0026gt;(p3,m,\u0026amp;amp;pnt[fac[i]*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;]); i++;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// here goes perspective divide by z coordinate if needed\u0026lt;/span\u0026gt;\n        d=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(v,p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]); p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*=d; p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*=d;\n        d=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(v,p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]); p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*=d; p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*=d;\n        d=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(v,p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]); p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*=d; p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*=d;\n        d=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(v,p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]); p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*=d; p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*=d;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// here is viewport transform (just translate (0,0) to middle of screen in this case\u0026lt;/span\u0026gt;\n        p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]+=xs2; p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]+=ys2;\n        p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]+=xs2; p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]+=ys2;\n        p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]+=xs2; p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]+=ys2;\n        p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]+=xs2; p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]+=ys2;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// draw quad\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// I use VCL GDI TCanvas you use what you have ...\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// and wireframe only to keep this simple (no Z buffer,winding culling,...)\u0026lt;/span\u0026gt;\n        scr-\u0026amp;gt;Pen-\u0026amp;gt;Color=clAqua;     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// perimeter wireframe\u0026lt;/span\u0026gt;\n        scr-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;MoveTo\u0026lt;/span\u0026gt;(p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n        scr-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;LineTo\u0026lt;/span\u0026gt;(p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],p1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n        scr-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;LineTo\u0026lt;/span\u0026gt;(p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],p2[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n        scr-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;LineTo\u0026lt;/span\u0026gt;(p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],p3[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n        scr-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;LineTo\u0026lt;/span\u0026gt;(p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],p0[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      scr-\u0026amp;gt;Pen-\u0026amp;gt;Color=clBlue;     // face cross to visualy check if I correctly generate the fac[]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      scr-\u0026amp;gt;MoveTo(p0[0],p0[1]);\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      scr-\u0026amp;gt;LineTo(p2[0],p2[1]);\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      scr-\u0026amp;gt;MoveTo(p1[0],p1[1]);\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//      scr-\u0026amp;gt;LineTo(p3[0],p3[1]);\u0026lt;/span\u0026gt;\n        }\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::draw\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!_redraw) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n    bmp-\u0026amp;gt;Canvas-\u0026amp;gt;Brush-\u0026amp;gt;Color=clBlack;\n    bmp-\u0026amp;gt;Canvas-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;FillRect\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;TRect\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,xs,ys));\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// compute inverse of camera need to compute just once for all objects\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; ieye[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_inv\u0026lt;/span\u0026gt;(ieye,eye);\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// draw all objects\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;(pnt,pnts,fac,facs,rep,ieye);\n\n    Main-\u0026amp;gt;Canvas-\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Draw\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,bmp);\n    _redraw=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;__fastcall \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::TMain\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(TComponent* Owner)\u0026lt;/span\u0026gt; : TForm(Owner)\n    {\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// window constructor you can ignore this ... (just create a backbuffer bitmap here)\u0026lt;/span\u0026gt;\n    bmp=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Graphics::TBitmap;\n    bmp-\u0026amp;gt;HandleType=bmDIB;\n    bmp-\u0026amp;gt;PixelFormat=pf32bit;\n    pyx=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;NULL\u0026lt;/span\u0026gt;;\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; __fastcall \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::FormDestroy\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(TObject *Sender)\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// window destructor release memory ... also ignoe this\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (pyx) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; pyx;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; bmp;\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; __fastcall \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::FormResize\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(TObject *Sender)\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// on resize event ... just resize/redraw backbuffer also can ignore this\u0026lt;/span\u0026gt;\n    xs=ClientWidth;  xs2=xs\u0026amp;gt;\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n    ys=ClientHeight; ys2=ys\u0026amp;gt;\u0026amp;gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n    bmp-\u0026amp;gt;Width=xs;\n    bmp-\u0026amp;gt;Height=ys;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (pyx) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; pyx;\n    pyx=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;*[ys];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; y=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;y\u0026amp;lt;ys;y++) pyx[y]=(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt;*) bmp-\u0026amp;gt;ScanLine[y];\n    _redraw=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; __fastcall \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::FormPaint\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(TObject *Sender)\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// repaint event can ignore\u0026lt;/span\u0026gt;\n    _redraw=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; __fastcall \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TMain::tim_redrawTimer\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(TObject *Sender)\u0026lt;/span\u0026gt;\n    \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// timer event to animate the cube ...\u0026lt;/span\u0026gt;\n    _redraw=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// rotate the object to see it in motion\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; ang,c,s;\n\n    ang=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5.0\u0026lt;/span\u0026gt;*deg; c=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cos\u0026lt;/span\u0026gt;(ang); s=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sin\u0026lt;/span\u0026gt;(ang);    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// rotate baround z by 5 degrees per timer step\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; rz[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;]= { c, s, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                    -s, c, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; };\n\n    ang=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;*deg; c=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;cos\u0026lt;/span\u0026gt;(ang); s=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sin\u0026lt;/span\u0026gt;(ang);    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// rotate baround x by 1 degrees per timer step\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; rx[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;]= { \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, c, s, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,-s, c, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\n                     \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; };\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul\u0026lt;/span\u0026gt;(rep,rep,rz);\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;matrix_mul\u0026lt;/span\u0026gt;(rep,rep,rx);\n\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;draw\u0026lt;/span\u0026gt;();\n    }\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//---------------------------------------------------------------------------\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;here is how it looks like:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/lgfsw.png\u0026quot; alt=\u0026quot;cube example\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;And GIF animation with back face culling:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/FGVUb.gif\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/FGVUb.gif\u0026quot; alt=\u0026quot;animation\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;[notes]\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you have more questions then comment me ...\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;[Edit2] basic 3D vector operations often needed\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If you do not know how to compute vector operations like cross/dot products or absolute value see:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cpp s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cross product: W = U x V\u0026lt;/span\u0026gt;\nW.x=(U.y*V.z)-(U.z*V.y)\nW.y=(U.z*V.x)-(U.x*V.z)\nW.z=(U.x*V.y)-(U.y*V.x)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// dot product: a = (U.V)\u0026lt;/span\u0026gt;\na=U.x*V.x+U.y*V.y+U.z*V.z\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// abs of vector a = |U|\u0026lt;/span\u0026gt;\na=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sqrt\u0026lt;/span\u0026gt;((U.x*U.x)+(U.y*U.y)+(U.z*U.z))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;here my C++ vector math:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cpp s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; vector_tmp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;];\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; y)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; ((y\u0026amp;gt;=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-1e-30\u0026lt;/span\u0026gt;)\u0026amp;amp;\u0026amp;amp;(y\u0026amp;lt;=+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1e-30\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0.0\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x/y; }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;* \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_ld\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; y,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; z)\u0026lt;/span\u0026gt;          \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *p=vector_tmp; p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=x; p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=y; p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=z; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; p;}\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;* \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_ld\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *p,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; x,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; y,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; z)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{                      p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=x; p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=y; p[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=z; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; p;}\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_copy\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;         \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=a[i];       }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_abs\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;          \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;fabs\u0026lt;/span\u0026gt;(a[i]); }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_one\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; l=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sqrt\u0026lt;/span\u0026gt;((a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])));\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*l;\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*l;\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*l;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_len\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; l)\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        l=\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;divide\u0026lt;/span\u0026gt;(l,\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sqrt\u0026lt;/span\u0026gt;((a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])));\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*l;\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*l;\n        c[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*l;\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_neg\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt;          \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=-a[i];      }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_add\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=a[i]+b[i]; }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_sub\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=a[i]-b[i]; }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_mul\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// cross\u0026lt;/span\u0026gt;\n        \u0026lt;/span\u0026gt;{\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;   q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;];\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])-(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])-(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]);\n        q[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]=(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])-(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*b[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=q[i];\n        }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_mul\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;  b)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=a[i]*b; }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_mul\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *c,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt;  a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c[i]=a*b[i]; }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_mul\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(         \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a,\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *b)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;i++) c+=a[i]*b[i]; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; c; } \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// dot\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_len\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sqrt\u0026lt;/span\u0026gt;((a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;])); }\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;vector_len2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; *a)\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;])+(a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]*a[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]); }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;[Edit3] local rotations for camera and object control via keyboard\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;As this has been asked a lot lately here some example answers of mine with demos:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/40171880/2521214\u0026quot;\u0026gt;stationary camera view control (partial pseudo inverse matrix)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/40104549/2521214\u0026quot;\u0026gt;camera and player control (inverse matrix)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/42293434/2521214\u0026quot;\u0026gt;How to preserve accuracy with cumulative transforms over time (full pseudo inverse matrix)\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/a/52801501/2521214\u0026quot;\u0026gt;rotundus style simple OpenGL/C++/VCL player control example\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    "],"id":432,"title":"How do I compose a rotation matrix with human readable angles from scratch?","content":"\n                \n\u0026lt;p\u0026gt;The one thing that has always hindered me from doing 3D programming is failing to understand how math works. I can go along with math fine in programming flow using methods and functions, then its all clear and logical to me, but in mathematical notation, I just can\u0026apos;t make heads or tails from it.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I have been reading websites, a watching videos of institutes trying to explain this, but they all use mathematical notation and I simply get lost in it, my mind won\u0026apos;t translate it to something understandable. I might have a defect there.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Also, Just using someone\u0026apos;s code isn\u0026apos;t my interest, I want to understand the mechanics behind it, the logic. I\u0026apos;d be happy to use someone else\u0026apos;s code, but I really want to understand how it works.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;The question\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Can you explain to me in simple terms \u0026lt;strong\u0026gt;without\u0026lt;/strong\u0026gt; mathematical notation, just programming notation/functions/psuedocode, how to implement a matrix transform along all 3 axes?\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Ideally what I want is the material/understanding to write a method/object where I can define the angles of 3 axes similar to glRotate to rotate the collection of quads/triangles I have. (I am trying to program a 3D rotation of a cube shapes without having access to OpenGL functions to do it for me because this is done in one draw call every time something changes in the display list.)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;What have I done?\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I have attempted at making a 90 degrees transform function to get the hang of the math but failed utterly in making a proper matrix which in theory should have been the simplest to do. You can see my failed attempt in all its glory on \u0026lt;a href=\u0026quot;http://jsfiddle.net/bLfg0tj8/5/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://jsfiddle.net/bLfg0tj8/5/\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;true\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-display\u0026quot; style=\u0026quot;vertical-align: center\u0026quot;\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link-chevron\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;expander-arrow-hide\u0026quot; style=\u0026quot;vertical-align: middle;\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;show-hide\u0026quot; data-ishidden=\u0026quot;true\u0026quot; style=\u0026quot;vertical-align: middle\u0026quot;\u0026gt;Show code snippet\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code snippet-currently-hidden\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;x,y,z\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; = x;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = y;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt; = z;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;matrixPoints\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;();    \n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationAngle\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;90\u0026lt;/span\u0026gt;;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;addVector\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;vector\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;matrixPoints\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(vector);\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;setRotationPoint\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;vector\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt; = vector; \n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;setRotationAngle\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;angle\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationAngle\u0026lt;/span\u0026gt; = angle;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;populate\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    translateToOrigin =     [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;-\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;-\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;-\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;]];\n    rotationMatrix =         [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,-\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;]];\n    translateEnd =         [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;],\n                                  [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;]];\n    currentColumn = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n    currentRow = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;mergeMatrices\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;mergeMatrices\u0026lt;/span\u0026gt;(translateEnd,rotationMatrix),\n                                          translateToOrigin);\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;transform\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    newmatrix = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(c = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;c\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;matrixPoints\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;;c++) {\n        newmatrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;applyToVertex\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;matrixPoints\u0026lt;/span\u0026gt;[c]));\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; newmatrix;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;applyToVertex\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;vertex\u0026lt;/span\u0026gt;) {\n    ret = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;,vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;,vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;);\n    ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; = ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;;\n    \n    ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; = ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;;\n    \n    ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt; = ret.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;combomatrix\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * vertex.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ret;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;mergeMatrices\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;lastStep, oneInFront\u0026lt;/span\u0026gt;) {\n    step1 = [[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;],[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]];\n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//============================================================\u0026lt;/span\u0026gt;\n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//============================================================\u0026lt;/span\u0026gt;\n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n    \n    step1[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] =   lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] + \n                    lastStep[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] * oneInFront[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;][\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; step1;\n}\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;getCurrentMatrix\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;matrixPoints\u0026lt;/span\u0026gt;;\n}\nmyvectors = [\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)];\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;drawVectors\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;vectors,color\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;c\u0026amp;lt;vectors.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;;c++) {\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;whoa\u0026quot;\u0026lt;/span\u0026gt;).\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;innerHTML\u0026lt;/span\u0026gt; += \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026amp;lt;div style=\u0026quot;color:\u0026apos;\u0026lt;/span\u0026gt;+color+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;position:absolute;left:\u0026apos;\u0026lt;/span\u0026gt;+vectors[c].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;px; top:\u0026apos;\u0026lt;/span\u0026gt;+vectors[c].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;px;z-index:\u0026apos;\u0026lt;/span\u0026gt;+vectors[c].\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;z\u0026lt;/span\u0026gt;+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;;\u0026quot;\u0026amp;gt;(\u0026apos;\u0026lt;/span\u0026gt;+c+\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;).\u0026amp;lt;/div\u0026amp;gt;\u0026apos;\u0026lt;/span\u0026gt;;\n    }\n}\nmatrix = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Matrix\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(c=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;c\u0026amp;lt;myvectors.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;;c++) {\n    matrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addVector\u0026lt;/span\u0026gt;(myvectors[c]);\n}\nmatrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setRotationPoint\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Vec3\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;50\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;70\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;));\nmatrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;populate\u0026lt;/span\u0026gt;();\nsomematrix = matrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;transform\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;drawVectors\u0026lt;/span\u0026gt;(matrix.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCurrentMatrix\u0026lt;/span\u0026gt;(),\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;lime\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// draw current matrix that was hand coded\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;drawVectors\u0026lt;/span\u0026gt;([matrix.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;rotationPoint\u0026lt;/span\u0026gt;],\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;white\u0026apos;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// draw rotation point\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;drawVectors\u0026lt;/span\u0026gt;(somematrix,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;red\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// transformed matrix... somehow two points merge\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-html lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;div\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;whoa\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;style\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;position:relative;top:50px;left:150px;background-color:green;color:red;width:400px;height:300px;\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-symbol\u0026quot;\u0026gt;\u0026amp;amp;nbsp;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;div\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif1\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The green text is the original triangle, the white point the center point, the red points the failed transformation(I think, because it isn\u0026apos;t aligned around the center point). The tutorial I was in thought me how to combine matrices into a combined matrix, but I guess I screwed up somewhere.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;As I said, it\u0026apos;s really really hard for me to understand mathematical notation and speak. And not helping is that most teachers skip parts of the explanation. Took me 2 hours alone to understand when multiplying matrices you need to add each step together instead of just keep on multiplying. Yay for explanations.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;A practical example what I work with/want to work with\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example I have a cube, loaded from a wavefront obj file located in the world at \u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;x = 50\ny = 100\nz = 200\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The cube is drawn using quads and some uv mapping. No problems here. It renders beautifully with all the textures showing correctly.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;These are the location coordinates for each \u0026quot;face\u0026quot; of the cube which is drawn using a quad.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;// Front face\n-1.0, -1.0,  1.0,\n 1.0, -1.0,  1.0,\n 1.0,  1.0,  1.0,\n-1.0,  1.0,  1.0,\n\n// Back face\n-1.0, -1.0, -1.0,\n-1.0,  1.0, -1.0,\n 1.0,  1.0, -1.0,\n 1.0, -1.0, -1.0,\n\n// Top face\n-1.0,  1.0, -1.0,\n-1.0,  1.0,  1.0,\n 1.0,  1.0,  1.0,\n 1.0,  1.0, -1.0,\n\n// Bottom face\n-1.0, -1.0, -1.0,\n 1.0, -1.0, -1.0,\n 1.0, -1.0,  1.0,\n-1.0, -1.0,  1.0,\n\n// Right face\n 1.0, -1.0, -1.0,\n 1.0,  1.0, -1.0,\n 1.0,  1.0,  1.0,\n 1.0, -1.0,  1.0,\n\n// Left face\n-1.0, -1.0, -1.0,\n-1.0, -1.0,  1.0,\n-1.0,  1.0,  1.0,\n-1.0,  1.0, -1.0\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So this works all great. But what if I want this cube rotated 90 degrees along the x axis and 45 degrees around the z axis? I cannot use glRotate because at the moment I pass the data to the tesselator object I cannot do any matrix transforms to it via the opengl functions because it\u0026apos;s just taking in the data, not actually rendering it per se.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The way the data is stored is as following:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;WaveFrontObject()\n   |\n   |-\u0026amp;gt; Groups(String groupname)\n        |\n        |-\u0026amp;gt; Faces()\n              |\n              |-\u0026amp;gt; Vertex(float x, float y, float z)[] \n              |-\u0026amp;gt; Float UVmap[] corresponding to each vertex\n              |-\u0026amp;gt; drawFace() // Draws the face as a quad or triangle\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So each of the above coordinates I gave is stored as a face of the wavefront object in the group \u0026quot;cube\u0026quot;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;When the cube is added to the tesselator it is translated to the right coordinates in the world and it renders normal.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It always renders the same however. If I would want it to render at an angle I would have to make a seperate wavefront object at this moment to be able to do that. In my opnion that is madness to do when it can be solved with some math.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Needed in the answer\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Explanation step by step how to build a translation matrix and an attempt to explain the math to me.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Explanation how to apply the translation matrix to the quads/triangles in the faces whist they keep oriented around the center of their location \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;x = 50.5\ny = 100.5\nz = 200.5\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;Some example/pseudo code to go along with the explanation.\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;The used programming language used to explain isn\u0026apos;t really relevant as long as its in the C family\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Please try to stay away from mathematical notation/speak. I don\u0026apos;t know what alpha beta, thetha is, I do know what x axis, y axis and z axis is. I do know what angles are, but I do not know the names mathematicians find for it.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you wish to use math names, please explain to me what they are in the 3D world/code and how they are formed/calculated.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I simply want to make a method/object along the lines of\u0026lt;/p\u0026gt;\n\n\u0026lt;pre\u0026gt;\u0026lt;code\u0026gt;Matrix.transformVertices(vertices[], 90deg x, 45 deg y, 0 deg z);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457","postType":"QUESTION","createdAt":"2022-07-09T17:32:43.000Z","updatedAt":"2022-07-09T17:32:43.000Z","tags":[{"id":2260,"name":"opengl","slug":"opengl","createdAt":"2022-07-09T17:32:43.000Z","updatedAt":"2022-07-09T17:32:43.000Z","Questions_Tags":{"questionId":432,"tagId":2260}},{"id":2262,"name":"matrix","slug":"matrix","createdAt":"2022-07-09T17:32:43.000Z","updatedAt":"2022-07-09T17:32:43.000Z","Questions_Tags":{"questionId":432,"tagId":2262}},{"id":2263,"name":"3d","slug":"3d","createdAt":"2022-07-09T17:32:43.000Z","updatedAt":"2022-07-09T17:32:43.000Z","Questions_Tags":{"questionId":432,"tagId":2263}}],"relatedQuestions":[{"title":"How do I compose a rotation matrix with human readable angles from scratch?","slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457","tags":[{"name":"opengl","Questions_Tags":{"questionId":432,"tagId":2260}},{"name":"matrix","Questions_Tags":{"questionId":432,"tagId":2262}},{"name":"3d","Questions_Tags":{"questionId":432,"tagId":2263}}]}]},"randomQuestions":[{"title":"What is the difference between #include \u003cfilename\u003e and #include \"filename\"?","slug":"what-is-the-difference-between-include-lessfilenamegreater-and-include-\"filename\"-1657388489547"},{"title":"Why does jQuery or a DOM method such as getElementById not find the element?","slug":"why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element-1657384326458"},{"title":"What is the !! (not not) operator in JavaScript?","slug":"what-is-the-!!-(not-not)-operator-in-javascript-1657387947844"},{"title":"Copy array by value","slug":"copy-array-by-value-1657387649531"},{"title":"How can I do a FULL OUTER JOIN in MySQL?","slug":"how-can-i-do-a-full-outer-join-in-mysql-1657388175444"},{"title":"How to remove/delete a large file from commit history in the Git repository?","slug":"how-to-removedelete-a-large-file-from-commit-history-in-the-git-repository-1657387589093"},{"title":"How do I merge two dictionaries in a single expression?","slug":"how-do-i-merge-two-dictionaries-in-a-single-expression-1657387593160"},{"title":"Is there a JavaScript / jQuery DOM change listener?","slug":"is-there-a-javascript-jquery-dom-change-listener-1657387961200"},{"title":"Make a div fill the height of the remaining screen space","slug":"make-a-div-fill-the-height-of-the-remaining-screen-space-1657387482387"},{"title":"Convert Rows to columns using 'Pivot' in SQL Server","slug":"convert-rows-to-columns-using-'pivot'-in-sql-server-1657388372528"},{"title":"Sort (order) data frame rows by multiple columns","slug":"sort-(order)-data-frame-rows-by-multiple-columns-1657388355671"},{"title":"Iterator invalidation rules for C++ containers","slug":"iterator-invalidation-rules-for-c++-containers-1657387561090"},{"title":"How to choose the right bean scope?","slug":"how-to-choose-the-right-bean-scope-1657387596513"},{"title":"Command not found error in Bash variable assignment","slug":"command-not-found-error-in-bash-variable-assignment-1657388326347"},{"title":"What are metaclasses in Python?","slug":"what-are-metaclasses-in-python-1657387811608"},{"title":"How can I tell if a DOM element is visible in the current viewport?","slug":"how-can-i-tell-if-a-dom-element-is-visible-in-the-current-viewport-1657388316510"},{"title":"Prefer composition over inheritance?","slug":"prefer-composition-over-inheritance-1657387399409"},{"title":"Ways to circumvent the same-origin policy","slug":"ways-to-circumvent-the-same-origin-policy-1657384763316"},{"title":"How to filter Pandas dataframe using 'in' and 'not in' like in SQL","slug":"how-to-filter-pandas-dataframe-using-'in'-and-'not-in'-like-in-sql-1657387371355"},{"title":"The ViewData item that has the key 'XXX' is of type 'System.Int32' but must be of type 'IEnumerable\u003cSelectListItem\u003e'","slug":"the-viewdata-item-that-has-the-key-'xxx'-is-of-type-'system.int32'-but-must-be-of-type-'ienumerablelessselectlistitemgreater'-1657388454191"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457"},"buildId":"eGqQHYKGZKE-nXShFn8wX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>