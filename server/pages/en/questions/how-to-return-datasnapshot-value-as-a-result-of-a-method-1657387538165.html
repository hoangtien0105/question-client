<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/how-to-return-datasnapshot-value-as-a-result-of-a-method-1657387538165","name":"Questions"}}]}</script><title>How to return DataSnapshot value as a result of a method? | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I don&#x27;t have much experience with Java. I&#x27;m not sure if this question is stupid, but I need to get a user name from Firebase realtime database and return this name as a result of this method. So, I figured out how to get this value, but I don&#x27;t understand how to return it as result of this method. What&#x27;s the best way to do this?

private String getUserName(String uid) {
    databaseReference.child(String.format(&quot;users/%s/name&quot;, uid))
            .addListenerForSingleValueEvent(new ValueEventListener() {
        @Override
        public void onDataChange(DataSnapshot dataSnapshot) {
            // How to return this value?
            dataSnapshot.getValue(String.class);
        }

        @Override
        public void onCancelled(DatabaseError databaseError) {}
    });
}

    "/><meta property="og:title" content="How to return DataSnapshot value as a result of a method? | Solutions Checker"/><meta property="og:description" content="I don&#x27;t have much experience with Java. I&#x27;m not sure if this question is stupid, but I need to get a user name from Firebase realtime database and return this name as a result of this method. So, I figured out how to get this value, but I don&#x27;t understand how to return it as result of this method. What&#x27;s the best way to do this?

private String getUserName(String uid) {
    databaseReference.child(String.format(&quot;users/%s/name&quot;, uid))
            .addListenerForSingleValueEvent(new ValueEventListener() {
        @Override
        public void onDataChange(DataSnapshot dataSnapshot) {
            // How to return this value?
            dataSnapshot.getValue(String.class);
        }

        @Override
        public void onCancelled(DatabaseError databaseError) {}
    });
}

    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How to return DataSnapshot value as a result of a method?","text":"I don&apos;t have much experience with Java. I&apos;m not sure if this question is stupid, but I need to get a user name from Firebase realtime database and return this name as a result of this method. So, I figured out how to get this value, but I don&apos;t understand how to return it as result of this method. What&apos;s the best way to do this?\n\nprivate String getUserName(String uid) {\n    databaseReference.child(String.format(&quot;users/%s/name&quot;, uid))\n            .addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot dataSnapshot) {\n            // How to return this value?\n            dataSnapshot.getValue(String.class);\n        }\n\n        @Override\n        public void onCancelled(DatabaseError databaseError) {}\n    });\n}\n\n    ","answerCount":6,"upVoteCount":500,"suggestedAnswer":[{"text":"This is a classic issue with asynchronous web APIs. You cannot return something now that hasn&apos;t been loaded yet. In other words, you cannot simply create a global variable and use it outside onDataChange() method because it will always be null. This is happening because onDataChange() method is called asynchronous. Depending on your connection speed and the state, it may take from a few hundred milliseconds to a few seconds before that data is available.\nBut not only Firebase Realtime Database loads data asynchronously, but almost all modern web APIs also do, since it may take some time. So instead of waiting for the data (which can lead to unresponsive application dialogs for your users), your main application code continues while the data is loaded on a secondary thread. Then when the data is available, your onDataChange() method is called, and can use the data. In other words, by the time onDataChange() method is called your data is not loaded yet.\nLet&apos;s take an example, by placing a few log statements in the code, to see more clearly what&apos;s going on.\nprivate String getUserName(String uid) {\n    Log.d(&quot;TAG&quot;, &quot;Before attaching the listener!&quot;);\n    databaseReference.child(String.format(&quot;users/%s/name&quot;, uid)).addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot dataSnapshot) {\n            // How to return this value?\n            dataSnapshot.getValue(String.class);\n            Log.d(&quot;TAG&quot;, &quot;Inside onDataChange() method!&quot;);\n        }\n\n        @Override\n        public void onCancelled(DatabaseError databaseError) {}\n    });\n    Log.d(&quot;TAG&quot;, &quot;After attaching the listener!&quot;);\n}\n\nIf we run this code will, the output will be:\n\nBefore attaching the listener!\nAfter attaching the listener!\nInside onDataChange() method!\n\nThis is probably not what you expected, but it explains precisely why your data is null when returning it.\nThe initial response for most developers is to try and &quot;fix&quot; this asynchronous behavior, which I personally recommend against this. The web is asynchronous, and the sooner you accept that the sooner you can learn how to become productive with modern web APIs.\nI&apos;ve found it easiest to reframe problems for this asynchronous paradigm. Instead of saying &quot;First get the data, then log it&quot;, I frame the problem as &quot;Start to get data. When the data is loaded, log it&quot;. This means that any code that requires the data must be inside onDataChange() method or called from inside there, like this:\ndatabaseReference.child(String.format(&quot;users/%s/name&quot;, uid)).addListenerForSingleValueEvent(new ValueEventListener() {\n    @Override\n    public void onDataChange(DataSnapshot dataSnapshot) {\n        // How to return this value?\n        if(dataSnapshot != null) {\n            System.out.println(dataSnapshot.getValue(String.class));\n        }\n    }\n\n    @Override\n    public void onCancelled(DatabaseError databaseError) {}\n});\n\nIf you want to use that outside, there is another approach. You need to create your own callback to wait for Firebase to return you the data. To achieve this, first, you need to create an interface like this:\npublic interface MyCallback {\n    void onCallback(String value);\n}\n\nThen you need to create a method that is actually getting the data from the database. This method should look like this:\npublic void readData(MyCallback myCallback) {\n    databaseReference.child(String.format(&quot;users/%s/name&quot;, uid)).addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot dataSnapshot) {\n            String value = dataSnapshot.getValue(String.class);\n            myCallback.onCallback(value);\n        }\n\n        @Override\n        public void onCancelled(DatabaseError databaseError) {}\n    });\n}\n\nIn the end just simply call readData() method and pass an instance of the MyCallback interface as an argument wherever you need it like this:\nreadData(new MyCallback() {\n    @Override\n    public void onCallback(String value) {\n        Log.d(&quot;TAG&quot;, value);\n    }\n});\n\nThis is the only way in which you can use that value outside onDataChange() method. For more information, you can take also a look at this video.\nEdit: Feb 26th, 2021\nFor more info, you can check the following article:\n\nHow to read data from Firebase Realtime Database using get()?\n\nAnd the following video:\n\nhttps://youtu.be/mOB40wowo6Y\n\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"Starting from the &quot;19.6.0&quot; version, the Firebase Realtime Database SDK contains a new method called get(), that can be called either on a DatabaseReference or a Query object:\n\nAdded DatabaseReference#get() and Query#get(), which return data from the server even when older data is available in the local cache.\n\nAs we already know, Firebase API is asynchronous. So we need to create a callback for that. First, let&apos;s create an interface:\npublic interface FirebaseCallback {\n    void onResponse(String name);\n}\n\nAnd a method that takes as an argument an object of tye FirebaseCallback:\npublic void readFirebaseName(FirebaseCallback callback) {\n    DatabaseReference uidRef = databaseReference.child(String.format(&quot;users/%s/name&quot;, uid))\n    uidRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n            if (task.isSuccessful()) {\n                String name = task.getResult().getValue(String.class);\n                callback.onResponse(name);\n            } else {\n                Log.d(TAG, task.getException().getMessage());\n            }\n        }\n    });\n}\n\nNow, to read the data, you need to simply call the above method passing as an argument an object of type FirebaseCallback:\nreadFirebaseName(new FirebaseCallback() {\n    @Override\n    public void onResponse(String name) {\n        Log.d(&quot;TAG&quot;, name);\n    }\n});\n\nFor more info, you can check the following article:\n\nHow to read data from Firebase Realtime Database using get()?\n\nAnd the following video:\n\nhttps://youtu.be/mOB40wowo6Y\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"I believe I understand what you are asking.  Although you say you want to &quot;return&quot; it (per se) from the fetch method, it may suffice to say you actually just want to be able to use the value retrieved after your fetch has completed.  If so, this is what you need to do:\n\n\nCreate a variable at the top of your class\nRetrieve your value (which you have done mostly correctly)\nSet the public variable in your class equal to value retrieved\n\n\nOnce your fetch succeeds, you could do many things with the variable. 4a and 4b are some simple examples:\n\n4a. Edit:\nAs an example of use, you can trigger whatever else you need to run in your class that uses yourNameVariable (and you can be sure it yourNameVariable not null)\n\n4b. Edit:\nAs an example of use, you can use the variable in a function that is triggered by a button&apos;s onClickListener.\n\n\n\nTry this.\n\n// 1. Create a variable at the top of your class\nprivate String yourNameVariable;\n\n// 2. Retrieve your value (which you have done mostly correctly)\nprivate void getUserName(String uid) {\n    databaseReference.child(String.format(&quot;users/%s/name&quot;, uid))\n            .addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot dataSnapshot) {\n            // 3. Set the public variable in your class equal to value retrieved\n            yourNameVariable = dataSnapshot.getValue(String.class);\n            // 4a. EDIT: now that your fetch succeeded, you can trigger whatever else you need to run in your class that uses `yourNameVariable`, and you can be sure `yourNameVariable` is not null.\n            sayHiToMe();\n        }\n\n        @Override\n        public void onCancelled(DatabaseError databaseError) {}\n    });\n}\n\n// (part of step 4a)\npublic void sayHiToMe() {\n  Log.d(TAG, &quot;hi there, &quot; + yourNameVariable);\n}\n\n// 4b. use the variable in a function triggered by the onClickListener of a button.\npublic void helloButtonWasPressed() {\n  if (yourNameVariable != null) {\n    Log.d(TAG, &quot;hi there, &quot; + yourNameVariable);\n  }\n}\n\n\nThen, you can use yourNameVariable wherever you would like throughout your class.\n\n\n\nNote: just be sure you check that yourNameVariable is not null when using it since onDataChange is asynchronous and may not have completed at the time you attempt to use it elsewhere.\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Here&apos;s a crazy Idea, inside onDataChange, put it inside a TextView with visibility gone \ntextview.setVisiblity(Gone) or something,\nthen do something like \n\ntextview.setText(dataSnapshot.getValue(String.class))\n\n\n\n\nthen later get it with textview.getText().toString()\n\njust a crazy simple Idea.\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"Use LiveData as return type and observe the changes of it&apos;s value to execute desired operation.\n\nprivate MutableLiveData&lt;String&gt; userNameMutableLiveData = new MutableLiveData&lt;&gt;();\n\npublic MutableLiveData&lt;String&gt; getUserName(String uid) {\n\n    databaseReference.child(String.format(&quot;users/%s/name&quot;, uid))\n            .addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot dataSnapshot) {\n            // How to return this value?\n            String userName = dataSnapshot.getValue(String.class);\n            userNameMutableLiveData.setValue(userName);\n        }\n\n        @Override\n        public void onCancelled(DatabaseError databaseError) {}\n    });\n\n    return userNameMutableLiveData;\n}\n\n\nThen from your Activity/Fragment observe the LiveData and inside onChanged do your desired operation.\n\ngetUserName().observe(this, new Observer&lt;String&gt;() {\n    @Override\n    public void onChanged(String userName) {\n        //here, do whatever you want on `userName`\n    }\n});\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"This is NOT a solution, just a way to access the data outside the method for code organization.\n// Get Your Value\nprivate void getValue() {\n\n    fbDbRefRoot.child(&quot;fbValue&quot;).addListenerForSingleValueEvent(new ValueEventListener() {\n\n        @Override\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n\n            String yourValue = (String) dataSnapshot.getValue();\n            useValue(yourValue);\n\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError databaseError) {\n\n        }\n    });\n\n}\n\n// Use Your Value\nprivate void useValue(String yourValue) {\n\n    Log.d(TAG, &quot;countryNameCode: &quot; + yourValue);\n\n}\n\nAnother way of achieving result (but not necessarily a solution)\nDeclare a public variable\npublic static String aPublicVariable;\n\nSet This Variable Inside The Async Method\naPublicVariable = (String) dataSnapshot.getValue();\n     \n\nUse The Variable Anywhere\nLog.d(TAG, &quot;Not Elegant: &quot; + aPublicVariable);\n\nIn the second method if the async call is not long it will nearly work all the time.\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-7e79b78ef884195a.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-c1a73f3e758d48b9.js" defer=""></script><script src="/_next/static/XDXakEY6gSPdgAODPxtjg/_buildManifest.js" defer=""></script><script src="/_next/static/XDXakEY6gSPdgAODPxtjg/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-to-return-datasnapshot-value-as-a-result-of-a-method-1657387538165#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-to-return-datasnapshot-value-as-a-result-of-a-method-1657387538165"><h1>How to return DataSnapshot value as a result of a method?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>I don't have much experience with Java. I'm not sure if this question is stupid, but I need to get a user name from Firebase realtime database and return this name as a result of this method. So, I figured out how to get this value, but I don't understand how to return it as result of this method. What's the best way to do this?</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">private</span> String <span class="hljs-title function_">getUserName</span><span class="hljs-params">(String uid)</span> {
    databaseReference.child(String.format(<span class="hljs-string">"users/%s/name"</span>, uid))
            .addListenerForSingleValueEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ValueEventListener</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDataChange</span><span class="hljs-params">(DataSnapshot dataSnapshot)</span> {
            <span class="hljs-comment">// How to return this value?</span>
            dataSnapshot.getValue(String.class);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCancelled</span><span class="hljs-params">(DatabaseError databaseError)</span> {}
    });
}
</code></pre>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
                
<p>This is a classic issue with asynchronous web APIs. You cannot return something now that hasn't been loaded yet. In other words, you cannot simply create a global variable and use it outside <code>onDataChange()</code> method because it will always be <code>null</code>. This is happening because <code>onDataChange()</code> method is called asynchronous. Depending on your connection speed and the state, it may take from a few hundred milliseconds to a few seconds before that data is available.</p>
<p>But not only Firebase Realtime Database loads data asynchronously, but almost all modern web APIs also do, since it may take some time. So instead of waiting for the data (which can lead to unresponsive application dialogs for your users), your main application code continues while the data is loaded on a secondary thread. Then when the data is available, your onDataChange() method is called, and can use the data. In other words, by the time <code>onDataChange()</code> method is called your data is not loaded yet.</p>
<p>Let's take an example, by placing a few log statements in the code, to see more clearly what's going on.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">private</span> String <span class="hljs-title function_">getUserName</span><span class="hljs-params">(String uid)</span> {
    Log.d(<span class="hljs-string">"TAG"</span>, <span class="hljs-string">"Before attaching the listener!"</span>);
    databaseReference.child(String.format(<span class="hljs-string">"users/%s/name"</span>, uid)).addListenerForSingleValueEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ValueEventListener</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDataChange</span><span class="hljs-params">(DataSnapshot dataSnapshot)</span> {
            <span class="hljs-comment">// How to return this value?</span>
            dataSnapshot.getValue(String.class);
            Log.d(<span class="hljs-string">"TAG"</span>, <span class="hljs-string">"Inside onDataChange() method!"</span>);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCancelled</span><span class="hljs-params">(DatabaseError databaseError)</span> {}
    });
    Log.d(<span class="hljs-string">"TAG"</span>, <span class="hljs-string">"After attaching the listener!"</span>);
}
</code></pre>
<p>If we run this code will, the output will be:</p>
<blockquote>
<p>Before attaching the listener!</p>
<p>After attaching the listener!</p>
<p>Inside onDataChange() method!</p>
</blockquote>
<p>This is probably not what you expected, but it explains precisely why your data is <code>null</code> when returning it.</p>
<p>The initial response for most developers is to try and "fix" this <code>asynchronous behavior</code>, which I personally recommend against this. The web is asynchronous, and the sooner you accept that the sooner you can learn how to become productive with modern web APIs.</p>
<p>I've found it easiest to reframe problems for this asynchronous paradigm. Instead of saying "First get the data, then log it", I frame the problem as "Start to get data. When the data is loaded, log it". This means that any code that requires the data must be inside <code>onDataChange()</code> method or called from inside there, like this:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">databaseReference.child(String.format(<span class="hljs-string">"users/%s/name"</span>, uid)).addListenerForSingleValueEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ValueEventListener</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDataChange</span><span class="hljs-params">(DataSnapshot dataSnapshot)</span> {
        <span class="hljs-comment">// How to return this value?</span>
        <span class="hljs-keyword">if</span>(dataSnapshot != <span class="hljs-literal">null</span>) {
            System.out.println(dataSnapshot.getValue(String.class));
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCancelled</span><span class="hljs-params">(DatabaseError databaseError)</span> {}
});
</code></pre>
<p>If you want to use that outside, there is another approach. You need to create your own callback to wait for Firebase to return you the data. To achieve this, first, you need to create an <code>interface</code> like this:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyCallback</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCallback</span><span class="hljs-params">(String value)</span>;
}
</code></pre>
<p>Then you need to create a method that is actually getting the data from the database. This method should look like this:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readData</span><span class="hljs-params">(MyCallback myCallback)</span> {
    databaseReference.child(String.format(<span class="hljs-string">"users/%s/name"</span>, uid)).addListenerForSingleValueEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ValueEventListener</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDataChange</span><span class="hljs-params">(DataSnapshot dataSnapshot)</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> dataSnapshot.getValue(String.class);
            myCallback.onCallback(value);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCancelled</span><span class="hljs-params">(DatabaseError databaseError)</span> {}
    });
}
</code></pre>
<p>In the end just simply call <code>readData()</code> method and pass an instance of the <code>MyCallback</code> interface as an argument wherever you need it like this:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">readData(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCallback</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCallback</span><span class="hljs-params">(String value)</span> {
        Log.d(<span class="hljs-string">"TAG"</span>, value);
    }
});
</code></pre>
<p>This is the only way in which you can use that value outside <code>onDataChange()</code> method. For more information, you can take also a look at this <strong><a href="https://www.youtube.com/watch?v=OvDZVV5CbQg" rel="noreferrer">video</a></strong>.</p>
<p><strong>Edit:</strong> Feb 26th, 2021</p>
<p>For more info, you can check the following article:</p>
<ul>
<li><a href="https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5" rel="noreferrer">How to read data from Firebase Realtime Database using get()?</a></li>
</ul>
<p>And the following video:</p>
<ul>
<li><a href="https://youtu.be/mOB40wowo6Y" rel="noreferrer">https://youtu.be/mOB40wowo6Y</a></li>
</ul>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Starting from the <a href="https://firebase.google.com/support/release-notes/android#realtime-database_v19-6-0" rel="noreferrer">"19.6.0"</a> version, the Firebase Realtime Database SDK contains a new method called get(), that can be called either on a DatabaseReference or a Query object:</p>
<blockquote>
<p>Added DatabaseReference#get() and Query#get(), which return data from the server even when older data is available in the local cache.</p>
</blockquote>
<p>As we already know, Firebase API is asynchronous. So we need to create a callback for that. First, let's create an interface:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">FirebaseCallback</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onResponse</span><span class="hljs-params">(String name)</span>;
}
</code></pre>
<p>And a method that takes as an argument an object of tye FirebaseCallback:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readFirebaseName</span><span class="hljs-params">(FirebaseCallback callback)</span> {
    <span class="hljs-type">DatabaseReference</span> <span class="hljs-variable">uidRef</span> <span class="hljs-operator">=</span> databaseReference.child(String.format(<span class="hljs-string">"users/%s/name"</span>, uid))
    uidRef.get().addOnCompleteListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OnCompleteListener</span>&lt;DataSnapshot&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onComplete</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Task&lt;DataSnapshot&gt; task)</span> {
            <span class="hljs-keyword">if</span> (task.isSuccessful()) {
                <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> task.getResult().getValue(String.class);
                callback.onResponse(name);
            } <span class="hljs-keyword">else</span> {
                Log.d(TAG, task.getException().getMessage());
            }
        }
    });
}
</code></pre>
<p>Now, to read the data, you need to simply call the above method passing as an argument an object of type FirebaseCallback:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">readFirebaseName(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FirebaseCallback</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onResponse</span><span class="hljs-params">(String name)</span> {
        Log.d(<span class="hljs-string">"TAG"</span>, name);
    }
});
</code></pre>
<p>For more info, you can check the following article:</p>
<ul>
<li><a href="https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5" rel="noreferrer">How to read data from Firebase Realtime Database using get()?</a></li>
</ul>
<p>And the following video:</p>
<ul>
<li><a href="https://youtu.be/mOB40wowo6Y" rel="noreferrer">https://youtu.be/mOB40wowo6Y</a></li>
</ul>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I believe I understand what you are asking.  Although you say you want to "return" it (per se) from the fetch method, it may suffice to say you actually just want to be able to use the value retrieved after your fetch has completed.  If so, this is what you need to do:</p>

<ol>
<li>Create a variable at the top of your class</li>
<li>Retrieve your value (which you have done mostly correctly)</li>
<li>Set the public variable in your class equal to value retrieved</li>
</ol>

<p>Once your fetch succeeds, you could do many things with the variable. 4a and 4b are some simple examples:</p>

<p>4a. <strong>Edit:</strong>
As an example of use, you can trigger whatever else you need to run in your class that uses <code>yourNameVariable</code> (and you can be sure it <code>yourNameVariable</code> not null)</p>

<p>4b. <strong>Edit:</strong>
As an example of use, you can use the variable in a function that is triggered by a button's onClickListener.</p>

<hr>

<p>Try this.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// 1. Create a variable at the top of your class</span>
<span class="hljs-keyword">private</span> String yourNameVariable;

<span class="hljs-comment">// 2. Retrieve your value (which you have done mostly correctly)</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getUserName</span><span class="hljs-params">(String uid)</span> {
    databaseReference.child(String.format(<span class="hljs-string">"users/%s/name"</span>, uid))
            .addListenerForSingleValueEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ValueEventListener</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDataChange</span><span class="hljs-params">(DataSnapshot dataSnapshot)</span> {
            <span class="hljs-comment">// 3. Set the public variable in your class equal to value retrieved</span>
            yourNameVariable = dataSnapshot.getValue(String.class);
            <span class="hljs-comment">// 4a. EDIT: now that your fetch succeeded, you can trigger whatever else you need to run in your class that uses `yourNameVariable`, and you can be sure `yourNameVariable` is not null.</span>
            sayHiToMe();
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCancelled</span><span class="hljs-params">(DatabaseError databaseError)</span> {}
    });
}

<span class="hljs-comment">// (part of step 4a)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayHiToMe</span><span class="hljs-params">()</span> {
  Log.d(TAG, <span class="hljs-string">"hi there, "</span> + yourNameVariable);
}

<span class="hljs-comment">// 4b. use the variable in a function triggered by the onClickListener of a button.</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">helloButtonWasPressed</span><span class="hljs-params">()</span> {
  <span class="hljs-keyword">if</span> (yourNameVariable != <span class="hljs-literal">null</span>) {
    Log.d(TAG, <span class="hljs-string">"hi there, "</span> + yourNameVariable);
  }
}
</code></pre>

<p>Then, you can use <code>yourNameVariable</code> wherever you would like throughout your class.</p>

<hr>

<p><em>Note: just be sure you check that <code>yourNameVariable</code> is not null when using it since <code>onDataChange</code> is asynchronous and may not have completed at the time you attempt to use it elsewhere.</em></p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's a crazy Idea, inside onDataChange, put it inside a TextView with visibility gone 
<code>textview.setVisiblity(Gone)</code> or something,
then do something like </p>

<pre class="lang-java s-code-block"><code class="hljs language-java">textview.setText(dataSnapshot.getValue(String.class))
</code></pre>



<p>then later get it with <code>textview.getText().toString()</code></p>

<p>just a crazy simple Idea.</p>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Use <code>LiveData</code> as return type and observe the changes of it's value to execute desired operation.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">private</span> MutableLiveData&lt;String&gt; userNameMutableLiveData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutableLiveData</span>&lt;&gt;();

<span class="hljs-keyword">public</span> MutableLiveData&lt;String&gt; <span class="hljs-title function_">getUserName</span><span class="hljs-params">(String uid)</span> {

    databaseReference.child(String.format(<span class="hljs-string">"users/%s/name"</span>, uid))
            .addListenerForSingleValueEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ValueEventListener</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDataChange</span><span class="hljs-params">(DataSnapshot dataSnapshot)</span> {
            <span class="hljs-comment">// How to return this value?</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">userName</span> <span class="hljs-operator">=</span> dataSnapshot.getValue(String.class);
            userNameMutableLiveData.setValue(userName);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCancelled</span><span class="hljs-params">(DatabaseError databaseError)</span> {}
    });

    <span class="hljs-keyword">return</span> userNameMutableLiveData;
}
</code></pre>

<p>Then from your <code>Activity/Fragment</code> observe the <code>LiveData</code> and inside <code>onChanged</code> do your desired operation.</p>

<pre class="lang-java s-code-block"><code class="hljs language-java">getUserName().observe(<span class="hljs-built_in">this</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>&lt;String&gt;() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onChanged</span><span class="hljs-params">(String userName)</span> {
        <span class="hljs-comment">//here, do whatever you want on `userName`</span>
    }
});
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>This is NOT a solution, just a way to access the data outside the method for code organization.</strong></p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// Get Your Value</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getValue</span><span class="hljs-params">()</span> {

    fbDbRefRoot.child(<span class="hljs-string">"fbValue"</span>).addListenerForSingleValueEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ValueEventListener</span>() {

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDataChange</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> DataSnapshot dataSnapshot)</span> {

            <span class="hljs-type">String</span> <span class="hljs-variable">yourValue</span> <span class="hljs-operator">=</span> (String) dataSnapshot.getValue();
            useValue(yourValue);

        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCancelled</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> DatabaseError databaseError)</span> {

        }
    });

}

<span class="hljs-comment">// Use Your Value</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">useValue</span><span class="hljs-params">(String yourValue)</span> {

    Log.d(TAG, <span class="hljs-string">"countryNameCode: "</span> + yourValue);

}
</code></pre>
<p><strong>Another way of achieving result (but not necessarily a solution)</strong></p>
<p>Declare a public variable</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String aPublicVariable;
</code></pre>
<p>Set This Variable Inside The Async Method</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">aPublicVariable = (String) dataSnapshot.getValue();
     
</code></pre>
<p><strong>Use The Variable Anywhere</strong></p>
<pre class="lang-java s-code-block"><code class="hljs language-java">Log.d(TAG, <span class="hljs-string">"Not Elegant: "</span> + aPublicVariable);
</code></pre>
<p>In the second method if the async call is not long it will nearly work all the time.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-to-format-numbers-as-currency-strings-1657388399166">How to format numbers as currency strings</a><a href="/questions/how-do-i-select-rows-from-a-dataframe-based-on-column-values-1657384901065">How do I select rows from a DataFrame based on column values?</a><a href="/questions/why-do-we-always-prefer-using-parameters-in-sql-statements-1657388031476">Why do we always prefer using parameters in SQL statements?</a><a href="/questions/what-does-**-(double-starasterisk)-and-*-(starasterisk)-do-for-parameters-1657384800967">What does ** (double star/asterisk) and * (star/asterisk) do for parameters?</a><a href="/questions/what-methods-of-&#x27;clearfix&#x27;-can-i-use-1657387672727">What methods of ‘clearfix’ can I use?</a><a href="/questions/how-does-javascript-.prototype-work-1657388169270">How does JavaScript .prototype work?</a><a href="/questions/what-is-an-indexoutofrangeexception-argumentoutofrangeexception-and-how-do-i-fix-it-1657384697159">What is an IndexOutOfRangeException / ArgumentOutOfRangeException and how do I fix it?</a><a href="/questions/how-can-i-sanitize-user-input-with-php-1657387892329">How can I sanitize user input with PHP?</a><a href="/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522">Reshaping data.frame from wide to long format</a><a href="/questions/%22is%22-operator-behaves-unexpectedly-with-integers-1657387563823">&quot;is&quot; operator behaves unexpectedly with integers</a><a href="/questions/ways-to-circumvent-the-same-origin-policy-1657384763316">Ways to circumvent the same-origin policy</a><a href="/questions/why-does-tkinter-image-not-show-up-if-created-in-a-function-1657387388233">Why does Tkinter image not show up if created in a function?</a><a href="/questions/why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array-1657385497444">Why is processing a sorted array faster than processing an unsorted array?</a><a href="/questions/css-selector-for-first-element-with-class-1657388028765">CSS selector for first element with class</a><a href="/questions/what-is-the-difference-between-and-equals()-in-java-1657387729654">What is the difference between == and equals() in Java?</a><a href="/questions/what-do-&#x27;lazy&#x27;-and-&#x27;greedy&#x27;-mean-in-the-context-of-regular-expressions-1657388200552">What do &#x27;lazy&#x27; and &#x27;greedy&#x27; mean in the context of regular expressions?</a><a href="/questions/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values-closed-1657387683057">How to use SharedPreferences in Android to store, fetch and edit values [closed]</a><a href="/questions/gui-not-working-after-rewriting-to-mvc-1657388388035">GUI not working after rewriting to MVC</a><a href="/questions/how-to-remove-%22noise%22-from-gccclang-assembly-output-1657387612391">How to remove &quot;noise&quot; from GCC/clang assembly output?</a><a href="/questions/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457">How do I compose a rotation matrix with human readable angles from scratch?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n                \n\u0026lt;p\u0026gt;This is a classic issue with asynchronous web APIs. You cannot return something now that hasn\u0026apos;t been loaded yet. In other words, you cannot simply create a global variable and use it outside \u0026lt;code\u0026gt;onDataChange()\u0026lt;/code\u0026gt; method because it will always be \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt;. This is happening because \u0026lt;code\u0026gt;onDataChange()\u0026lt;/code\u0026gt; method is called asynchronous. Depending on your connection speed and the state, it may take from a few hundred milliseconds to a few seconds before that data is available.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;But not only Firebase Realtime Database loads data asynchronously, but almost all modern web APIs also do, since it may take some time. So instead of waiting for the data (which can lead to unresponsive application dialogs for your users), your main application code continues while the data is loaded on a secondary thread. Then when the data is available, your onDataChange() method is called, and can use the data. In other words, by the time \u0026lt;code\u0026gt;onDataChange()\u0026lt;/code\u0026gt; method is called your data is not loaded yet.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Let\u0026apos;s take an example, by placing a few log statements in the code, to see more clearly what\u0026apos;s going on.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getUserName\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String uid)\u0026lt;/span\u0026gt; {\n    Log.d(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;TAG\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Before attaching the listener!\u0026quot;\u0026lt;/span\u0026gt;);\n    databaseReference.child(String.format(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;users/%s/name\u0026quot;\u0026lt;/span\u0026gt;, uid)).addListenerForSingleValueEvent(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ValueEventListener\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onDataChange\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DataSnapshot dataSnapshot)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// How to return this value?\u0026lt;/span\u0026gt;\n            dataSnapshot.getValue(String.class);\n            Log.d(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;TAG\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Inside onDataChange() method!\u0026quot;\u0026lt;/span\u0026gt;);\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCancelled\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DatabaseError databaseError)\u0026lt;/span\u0026gt; {}\n    });\n    Log.d(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;TAG\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;After attaching the listener!\u0026quot;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If we run this code will, the output will be:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Before attaching the listener!\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;After attaching the listener!\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Inside onDataChange() method!\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;This is probably not what you expected, but it explains precisely why your data is \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt; when returning it.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The initial response for most developers is to try and \u0026quot;fix\u0026quot; this \u0026lt;code\u0026gt;asynchronous behavior\u0026lt;/code\u0026gt;, which I personally recommend against this. The web is asynchronous, and the sooner you accept that the sooner you can learn how to become productive with modern web APIs.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I\u0026apos;ve found it easiest to reframe problems for this asynchronous paradigm. Instead of saying \u0026quot;First get the data, then log it\u0026quot;, I frame the problem as \u0026quot;Start to get data. When the data is loaded, log it\u0026quot;. This means that any code that requires the data must be inside \u0026lt;code\u0026gt;onDataChange()\u0026lt;/code\u0026gt; method or called from inside there, like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;databaseReference.child(String.format(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;users/%s/name\u0026quot;\u0026lt;/span\u0026gt;, uid)).addListenerForSingleValueEvent(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ValueEventListener\u0026lt;/span\u0026gt;() {\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onDataChange\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DataSnapshot dataSnapshot)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// How to return this value?\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(dataSnapshot != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            System.out.println(dataSnapshot.getValue(String.class));\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCancelled\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DatabaseError databaseError)\u0026lt;/span\u0026gt; {}\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If you want to use that outside, there is another approach. You need to create your own callback to wait for Firebase to return you the data. To achieve this, first, you need to create an \u0026lt;code\u0026gt;interface\u0026lt;/code\u0026gt; like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;interface\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyCallback\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCallback\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String value)\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then you need to create a method that is actually getting the data from the database. This method should look like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;readData\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(MyCallback myCallback)\u0026lt;/span\u0026gt; {\n    databaseReference.child(String.format(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;users/%s/name\u0026quot;\u0026lt;/span\u0026gt;, uid)).addListenerForSingleValueEvent(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ValueEventListener\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onDataChange\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DataSnapshot dataSnapshot)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; dataSnapshot.getValue(String.class);\n            myCallback.onCallback(value);\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCancelled\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DatabaseError databaseError)\u0026lt;/span\u0026gt; {}\n    });\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;In the end just simply call \u0026lt;code\u0026gt;readData()\u0026lt;/code\u0026gt; method and pass an instance of the \u0026lt;code\u0026gt;MyCallback\u0026lt;/code\u0026gt; interface as an argument wherever you need it like this:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;readData(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyCallback\u0026lt;/span\u0026gt;() {\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCallback\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String value)\u0026lt;/span\u0026gt; {\n        Log.d(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;TAG\u0026quot;\u0026lt;/span\u0026gt;, value);\n    }\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This is the only way in which you can use that value outside \u0026lt;code\u0026gt;onDataChange()\u0026lt;/code\u0026gt; method. For more information, you can take also a look at this \u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;https://www.youtube.com/watch?v=OvDZVV5CbQg\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;video\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Edit:\u0026lt;/strong\u0026gt; Feb 26th, 2021\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For more info, you can check the following article:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;How to read data from Firebase Realtime Database using get()?\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;And the following video:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://youtu.be/mOB40wowo6Y\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://youtu.be/mOB40wowo6Y\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Starting from the \u0026lt;a href=\u0026quot;https://firebase.google.com/support/release-notes/android#realtime-database_v19-6-0\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026quot;19.6.0\u0026quot;\u0026lt;/a\u0026gt; version, the Firebase Realtime Database SDK contains a new method called get(), that can be called either on a DatabaseReference or a Query object:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Added DatabaseReference#get() and Query#get(), which return data from the server even when older data is available in the local cache.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;As we already know, Firebase API is asynchronous. So we need to create a callback for that. First, let\u0026apos;s create an interface:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;interface\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FirebaseCallback\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onResponse\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String name)\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;And a method that takes as an argument an object of tye FirebaseCallback:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;readFirebaseName\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(FirebaseCallback callback)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;DatabaseReference\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;uidRef\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; databaseReference.child(String.format(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;users/%s/name\u0026quot;\u0026lt;/span\u0026gt;, uid))\n    uidRef.get().addOnCompleteListener(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OnCompleteListener\u0026lt;/span\u0026gt;\u0026amp;lt;DataSnapshot\u0026amp;gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onComplete\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@NonNull\u0026lt;/span\u0026gt; Task\u0026amp;lt;DataSnapshot\u0026amp;gt; task)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (task.isSuccessful()) {\n                \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; task.getResult().getValue(String.class);\n                callback.onResponse(name);\n            } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n                Log.d(TAG, task.getException().getMessage());\n            }\n        }\n    });\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Now, to read the data, you need to simply call the above method passing as an argument an object of type FirebaseCallback:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;readFirebaseName(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;FirebaseCallback\u0026lt;/span\u0026gt;() {\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onResponse\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String name)\u0026lt;/span\u0026gt; {\n        Log.d(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;TAG\u0026quot;\u0026lt;/span\u0026gt;, name);\n    }\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;For more info, you can check the following article:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;How to read data from Firebase Realtime Database using get()?\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;And the following video:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://youtu.be/mOB40wowo6Y\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://youtu.be/mOB40wowo6Y\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I believe I understand what you are asking.  Although you say you want to \u0026quot;return\u0026quot; it (per se) from the fetch method, it may suffice to say you actually just want to be able to use the value retrieved after your fetch has completed.  If so, this is what you need to do:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Create a variable at the top of your class\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Retrieve your value (which you have done mostly correctly)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Set the public variable in your class equal to value retrieved\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;Once your fetch succeeds, you could do many things with the variable. 4a and 4b are some simple examples:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;4a. \u0026lt;strong\u0026gt;Edit:\u0026lt;/strong\u0026gt;\nAs an example of use, you can trigger whatever else you need to run in your class that uses \u0026lt;code\u0026gt;yourNameVariable\u0026lt;/code\u0026gt; (and you can be sure it \u0026lt;code\u0026gt;yourNameVariable\u0026lt;/code\u0026gt; not null)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;4b. \u0026lt;strong\u0026gt;Edit:\u0026lt;/strong\u0026gt;\nAs an example of use, you can use the variable in a function that is triggered by a button\u0026apos;s onClickListener.\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;Try this.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 1. Create a variable at the top of your class\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String yourNameVariable;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 2. Retrieve your value (which you have done mostly correctly)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getUserName\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String uid)\u0026lt;/span\u0026gt; {\n    databaseReference.child(String.format(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;users/%s/name\u0026quot;\u0026lt;/span\u0026gt;, uid))\n            .addListenerForSingleValueEvent(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ValueEventListener\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onDataChange\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DataSnapshot dataSnapshot)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 3. Set the public variable in your class equal to value retrieved\u0026lt;/span\u0026gt;\n            yourNameVariable = dataSnapshot.getValue(String.class);\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 4a. EDIT: now that your fetch succeeded, you can trigger whatever else you need to run in your class that uses `yourNameVariable`, and you can be sure `yourNameVariable` is not null.\u0026lt;/span\u0026gt;\n            sayHiToMe();\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCancelled\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DatabaseError databaseError)\u0026lt;/span\u0026gt; {}\n    });\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// (part of step 4a)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;sayHiToMe\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n  Log.d(TAG, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi there, \u0026quot;\u0026lt;/span\u0026gt; + yourNameVariable);\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 4b. use the variable in a function triggered by the onClickListener of a button.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;helloButtonWasPressed\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (yourNameVariable != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n    Log.d(TAG, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi there, \u0026quot;\u0026lt;/span\u0026gt; + yourNameVariable);\n  }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then, you can use \u0026lt;code\u0026gt;yourNameVariable\u0026lt;/code\u0026gt; wherever you would like throughout your class.\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Note: just be sure you check that \u0026lt;code\u0026gt;yourNameVariable\u0026lt;/code\u0026gt; is not null when using it since \u0026lt;code\u0026gt;onDataChange\u0026lt;/code\u0026gt; is asynchronous and may not have completed at the time you attempt to use it elsewhere.\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here\u0026apos;s a crazy Idea, inside onDataChange, put it inside a TextView with visibility gone \n\u0026lt;code\u0026gt;textview.setVisiblity(Gone)\u0026lt;/code\u0026gt; or something,\nthen do something like \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;textview.setText(dataSnapshot.getValue(String.class))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\n\n\u0026lt;p\u0026gt;then later get it with \u0026lt;code\u0026gt;textview.getText().toString()\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;just a crazy simple Idea.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Use \u0026lt;code\u0026gt;LiveData\u0026lt;/code\u0026gt; as return type and observe the changes of it\u0026apos;s value to execute desired operation.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; MutableLiveData\u0026amp;lt;String\u0026amp;gt; userNameMutableLiveData = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MutableLiveData\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026amp;gt;();\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; MutableLiveData\u0026amp;lt;String\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getUserName\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String uid)\u0026lt;/span\u0026gt; {\n\n    databaseReference.child(String.format(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;users/%s/name\u0026quot;\u0026lt;/span\u0026gt;, uid))\n            .addListenerForSingleValueEvent(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ValueEventListener\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onDataChange\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DataSnapshot dataSnapshot)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// How to return this value?\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;userName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; dataSnapshot.getValue(String.class);\n            userNameMutableLiveData.setValue(userName);\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCancelled\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DatabaseError databaseError)\u0026lt;/span\u0026gt; {}\n    });\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; userNameMutableLiveData;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then from your \u0026lt;code\u0026gt;Activity/Fragment\u0026lt;/code\u0026gt; observe the \u0026lt;code\u0026gt;LiveData\u0026lt;/code\u0026gt; and inside \u0026lt;code\u0026gt;onChanged\u0026lt;/code\u0026gt; do your desired operation.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;getUserName().observe(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Observer\u0026lt;/span\u0026gt;\u0026amp;lt;String\u0026amp;gt;() {\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onChanged\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String userName)\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//here, do whatever you want on `userName`\u0026lt;/span\u0026gt;\n    }\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;This is NOT a solution, just a way to access the data outside the method for code organization.\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Get Your Value\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getValue\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; {\n\n    fbDbRefRoot.child(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fbValue\u0026quot;\u0026lt;/span\u0026gt;).addListenerForSingleValueEvent(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ValueEventListener\u0026lt;/span\u0026gt;() {\n\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onDataChange\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@NonNull\u0026lt;/span\u0026gt; DataSnapshot dataSnapshot)\u0026lt;/span\u0026gt; {\n\n            \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;yourValue\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (String) dataSnapshot.getValue();\n            useValue(yourValue);\n\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCancelled\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@NonNull\u0026lt;/span\u0026gt; DatabaseError databaseError)\u0026lt;/span\u0026gt; {\n\n        }\n    });\n\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Use Your Value\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;useValue\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String yourValue)\u0026lt;/span\u0026gt; {\n\n    Log.d(TAG, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;countryNameCode: \u0026quot;\u0026lt;/span\u0026gt; + yourValue);\n\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Another way of achieving result (but not necessarily a solution)\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Declare a public variable\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String aPublicVariable;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Set This Variable Inside The Async Method\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;aPublicVariable = (String) dataSnapshot.getValue();\n     \n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Use The Variable Anywhere\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;Log.d(TAG, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Not Elegant: \u0026quot;\u0026lt;/span\u0026gt; + aPublicVariable);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;In the second method if the async call is not long it will nearly work all the time.\u0026lt;/p\u0026gt;\n    "],"id":296,"title":"How to return DataSnapshot value as a result of a method?","content":"\n                \n\u0026lt;p\u0026gt;I don\u0026apos;t have much experience with Java. I\u0026apos;m not sure if this question is stupid, but I need to get a user name from Firebase realtime database and return this name as a result of this method. So, I figured out how to get this value, but I don\u0026apos;t understand how to return it as result of this method. What\u0026apos;s the best way to do this?\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getUserName\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String uid)\u0026lt;/span\u0026gt; {\n    databaseReference.child(String.format(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;users/%s/name\u0026quot;\u0026lt;/span\u0026gt;, uid))\n            .addListenerForSingleValueEvent(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ValueEventListener\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onDataChange\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DataSnapshot dataSnapshot)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// How to return this value?\u0026lt;/span\u0026gt;\n            dataSnapshot.getValue(String.class);\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCancelled\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(DatabaseError databaseError)\u0026lt;/span\u0026gt; {}\n    });\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","slug":"how-to-return-datasnapshot-value-as-a-result-of-a-method-1657387538165","postType":"QUESTION","createdAt":"2022-07-09T17:25:38.000Z","updatedAt":"2022-07-09T17:25:38.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"How to format numbers as currency strings","slug":"how-to-format-numbers-as-currency-strings-1657388399166"},{"title":"How do I select rows from a DataFrame based on column values?","slug":"how-do-i-select-rows-from-a-dataframe-based-on-column-values-1657384901065"},{"title":"Why do we always prefer using parameters in SQL statements?","slug":"why-do-we-always-prefer-using-parameters-in-sql-statements-1657388031476"},{"title":"What does ** (double star/asterisk) and * (star/asterisk) do for parameters?","slug":"what-does-**-(double-starasterisk)-and-*-(starasterisk)-do-for-parameters-1657384800967"},{"title":"What methods of ‘clearfix’ can I use?","slug":"what-methods-of-'clearfix'-can-i-use-1657387672727"},{"title":"How does JavaScript .prototype work?","slug":"how-does-javascript-.prototype-work-1657388169270"},{"title":"What is an IndexOutOfRangeException / ArgumentOutOfRangeException and how do I fix it?","slug":"what-is-an-indexoutofrangeexception-argumentoutofrangeexception-and-how-do-i-fix-it-1657384697159"},{"title":"How can I sanitize user input with PHP?","slug":"how-can-i-sanitize-user-input-with-php-1657387892329"},{"title":"Reshaping data.frame from wide to long format","slug":"reshaping-data.frame-from-wide-to-long-format-1657384678522"},{"title":"\"is\" operator behaves unexpectedly with integers","slug":"\"is\"-operator-behaves-unexpectedly-with-integers-1657387563823"},{"title":"Ways to circumvent the same-origin policy","slug":"ways-to-circumvent-the-same-origin-policy-1657384763316"},{"title":"Why does Tkinter image not show up if created in a function?","slug":"why-does-tkinter-image-not-show-up-if-created-in-a-function-1657387388233"},{"title":"Why is processing a sorted array faster than processing an unsorted array?","slug":"why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array-1657385497444"},{"title":"CSS selector for first element with class","slug":"css-selector-for-first-element-with-class-1657388028765"},{"title":"What is the difference between == and equals() in Java?","slug":"what-is-the-difference-between-and-equals()-in-java-1657387729654"},{"title":"What do 'lazy' and 'greedy' mean in the context of regular expressions?","slug":"what-do-'lazy'-and-'greedy'-mean-in-the-context-of-regular-expressions-1657388200552"},{"title":"How to use SharedPreferences in Android to store, fetch and edit values [closed]","slug":"how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values-closed-1657387683057"},{"title":"GUI not working after rewriting to MVC","slug":"gui-not-working-after-rewriting-to-mvc-1657388388035"},{"title":"How to remove \"noise\" from GCC/clang assembly output?","slug":"how-to-remove-\"noise\"-from-gccclang-assembly-output-1657387612391"},{"title":"How do I compose a rotation matrix with human readable angles from scratch?","slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-to-return-datasnapshot-value-as-a-result-of-a-method-1657387538165"},"buildId":"XDXakEY6gSPdgAODPxtjg","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>