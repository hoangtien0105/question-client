<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="dataframe,solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522","name":"Questions"}}]}</script><title>Reshaping data.frame from wide to long format | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I have some trouble to convert my data.frame from a wide table to a long table.
At the moment it looks like this:

Code Country        1950    1951    1952    1953    1954
AFG  Afghanistan    20,249  21,352  22,532  23,557  24,555
ALB  Albania        8,097   8,986   10,058  11,123  12,246


Now I would like to transform this data.frame into a long data.frame.
Something like this:

Code Country        Year    Value
AFG  Afghanistan    1950    20,249
AFG  Afghanistan    1951    21,352
AFG  Afghanistan    1952    22,532
AFG  Afghanistan    1953    23,557
AFG  Afghanistan    1954    24,555
ALB  Albania        1950    8,097
ALB  Albania        1951    8,986
ALB  Albania        1952    10,058
ALB  Albania        1953    11,123
ALB  Albania        1954    12,246


I have looked at and already tried using the melt() and the reshape() functions
as some people were suggesting in similar questions.
However, so far I only get messy results.

If it is possible I would like to do it with the reshape() function since
it looks a little bit nicer to handle.
    "/><meta property="og:title" content="Reshaping data.frame from wide to long format | Solution Checker"/><meta property="og:description" content="I have some trouble to convert my data.frame from a wide table to a long table.
At the moment it looks like this:

Code Country        1950    1951    1952    1953    1954
AFG  Afghanistan    20,249  21,352  22,532  23,557  24,555
ALB  Albania        8,097   8,986   10,058  11,123  12,246


Now I would like to transform this data.frame into a long data.frame.
Something like this:

Code Country        Year    Value
AFG  Afghanistan    1950    20,249
AFG  Afghanistan    1951    21,352
AFG  Afghanistan    1952    22,532
AFG  Afghanistan    1953    23,557
AFG  Afghanistan    1954    24,555
ALB  Albania        1950    8,097
ALB  Albania        1951    8,986
ALB  Albania        1952    10,058
ALB  Albania        1953    11,123
ALB  Albania        1954    12,246


I have looked at and already tried using the melt() and the reshape() functions
as some people were suggesting in similar questions.
However, so far I only get messy results.

If it is possible I would like to do it with the reshape() function since
it looks a little bit nicer to handle.
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"Reshaping data.frame from wide to long format","text":"I have some trouble to convert my data.frame from a wide table to a long table.\nAt the moment it looks like this:\n\nCode Country        1950    1951    1952    1953    1954\nAFG  Afghanistan    20,249  21,352  22,532  23,557  24,555\nALB  Albania        8,097   8,986   10,058  11,123  12,246\n\n\nNow I would like to transform this data.frame into a long data.frame.\nSomething like this:\n\nCode Country        Year    Value\nAFG  Afghanistan    1950    20,249\nAFG  Afghanistan    1951    21,352\nAFG  Afghanistan    1952    22,532\nAFG  Afghanistan    1953    23,557\nAFG  Afghanistan    1954    24,555\nALB  Albania        1950    8,097\nALB  Albania        1951    8,986\nALB  Albania        1952    10,058\nALB  Albania        1953    11,123\nALB  Albania        1954    12,246\n\n\nI have looked at and already tried using the melt() and the reshape() functions\nas some people were suggesting in similar questions.\nHowever, so far I only get messy results.\n\nIf it is possible I would like to do it with the reshape() function since\nit looks a little bit nicer to handle.\n    ","answerCount":8,"upVoteCount":500,"suggestedAnswer":[{"text":"Three alternative solutions:\n\n1) With data.table:\n\nYou can use the same melt function as in the reshape2 package (which is an extended &amp; improved implementation). melt from data.table has also more parameters that the melt-function from reshape2. You can for example also specify the name of the variable-column:\n\nlibrary(data.table)\nlong &lt;- melt(setDT(wide), id.vars = c(&quot;Code&quot;,&quot;Country&quot;), variable.name = &quot;year&quot;)\n\n\nwhich gives:\n\n\n&gt; long\n    Code     Country year  value\n 1:  AFG Afghanistan 1950 20,249\n 2:  ALB     Albania 1950  8,097\n 3:  AFG Afghanistan 1951 21,352\n 4:  ALB     Albania 1951  8,986\n 5:  AFG Afghanistan 1952 22,532\n 6:  ALB     Albania 1952 10,058\n 7:  AFG Afghanistan 1953 23,557\n 8:  ALB     Albania 1953 11,123\n 9:  AFG Afghanistan 1954 24,555\n10:  ALB     Albania 1954 12,246\n\n\n\nSome alternative notations:\n\nmelt(setDT(wide), id.vars = 1:2, variable.name = &quot;year&quot;)\nmelt(setDT(wide), measure.vars = 3:7, variable.name = &quot;year&quot;)\nmelt(setDT(wide), measure.vars = as.character(1950:1954), variable.name = &quot;year&quot;)\n\n\n2) With tidyr:\n\nlibrary(tidyr)\nlong &lt;- wide %&gt;% gather(year, value, -c(Code, Country))\n\n\nSome alternative notations:\n\nwide %&gt;% gather(year, value, -Code, -Country)\nwide %&gt;% gather(year, value, -1:-2)\nwide %&gt;% gather(year, value, -(1:2))\nwide %&gt;% gather(year, value, -1, -2)\nwide %&gt;% gather(year, value, 3:7)\nwide %&gt;% gather(year, value, `1950`:`1954`)\n\n\n3) With reshape2:\n\nlibrary(reshape2)\nlong &lt;- melt(wide, id.vars = c(&quot;Code&quot;, &quot;Country&quot;))\n\n\nSome alternative notations that give the same result:\n\n# you can also define the id-variables by column number\nmelt(wide, id.vars = 1:2)\n\n# as an alternative you can also specify the measure-variables\n# all other variables will then be used as id-variables\nmelt(wide, measure.vars = 3:7)\nmelt(wide, measure.vars = as.character(1950:1954))\n\n\n\n\nNOTES:\n\n\nreshape2 is retired. Only changes necessary to keep it on CRAN will be made. (source)\nIf you want to exclude NA values, you can add na.rm = TRUE to the melt as well as the gather functions.\n\n\n\n\nAnother problem with the data is that the values will be read by R as character-values (as a result of the , in the numbers). You can repair that with gsub and as.numeric:\n\nlong$value &lt;- as.numeric(gsub(&quot;,&quot;, &quot;&quot;, long$value))\n\n\nOr directly with data.table or dplyr:\n\n# data.table\nlong &lt;- melt(setDT(wide),\n             id.vars = c(&quot;Code&quot;,&quot;Country&quot;),\n             variable.name = &quot;year&quot;)[, value := as.numeric(gsub(&quot;,&quot;, &quot;&quot;, value))]\n\n# tidyr and dplyr\nlong &lt;- wide %&gt;% gather(year, value, -c(Code,Country)) %&gt;% \n  mutate(value = as.numeric(gsub(&quot;,&quot;, &quot;&quot;, value)))\n\n\n\n\nData:\n\nwide &lt;- read.table(text=&quot;Code Country        1950    1951    1952    1953    1954\nAFG  Afghanistan    20,249  21,352  22,532  23,557  24,555\nALB  Albania        8,097   8,986   10,058  11,123  12,246&quot;, header=TRUE, check.names=FALSE)\n\n    ","url":"https://solutionschecker.com/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522#solution1","@type":"Answer","upvoteCount":0},{"text":"reshape() takes a while to get used to, just as melt/cast. Here is a solution with reshape, assuming your data frame is called d:\n\nreshape(d, \n        direction = &quot;long&quot;,\n        varying = list(names(d)[3:7]),\n        v.names = &quot;Value&quot;,\n        idvar = c(&quot;Code&quot;, &quot;Country&quot;),\n        timevar = &quot;Year&quot;,\n        times = 1950:1954)\n\n    ","url":"https://solutionschecker.com/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522#solution2","@type":"Answer","upvoteCount":0},{"text":"With tidyr_1.0.0, another option is pivot_longer\n\nlibrary(tidyr)\npivot_longer(df1, -c(Code, Country), values_to = &quot;Value&quot;, names_to = &quot;Year&quot;)\n# A tibble: 10 x 4\n#   Code  Country     Year  Value \n#   &lt;fct&gt; &lt;fct&gt;       &lt;chr&gt; &lt;fct&gt; \n# 1 AFG   Afghanistan 1950  20,249\n# 2 AFG   Afghanistan 1951  21,352\n# 3 AFG   Afghanistan 1952  22,532\n# 4 AFG   Afghanistan 1953  23,557\n# 5 AFG   Afghanistan 1954  24,555\n# 6 ALB   Albania     1950  8,097 \n# 7 ALB   Albania     1951  8,986 \n# 8 ALB   Albania     1952  10,058\n# 9 ALB   Albania     1953  11,123\n#10 ALB   Albania     1954  12,246\n\n\ndata\n\ndf1 &lt;- structure(list(Code = structure(1:2, .Label = c(&quot;AFG&quot;, &quot;ALB&quot;), class = &quot;factor&quot;), \n    Country = structure(1:2, .Label = c(&quot;Afghanistan&quot;, &quot;Albania&quot;\n    ), class = &quot;factor&quot;), `1950` = structure(1:2, .Label = c(&quot;20,249&quot;, \n    &quot;8,097&quot;), class = &quot;factor&quot;), `1951` = structure(1:2, .Label = c(&quot;21,352&quot;, \n    &quot;8,986&quot;), class = &quot;factor&quot;), `1952` = structure(2:1, .Label = c(&quot;10,058&quot;, \n    &quot;22,532&quot;), class = &quot;factor&quot;), `1953` = structure(2:1, .Label = c(&quot;11,123&quot;, \n    &quot;23,557&quot;), class = &quot;factor&quot;), `1954` = structure(2:1, .Label = c(&quot;12,246&quot;, \n    &quot;24,555&quot;), class = &quot;factor&quot;)), class = &quot;data.frame&quot;, row.names = c(NA, \n-2L))\n\n    ","url":"https://solutionschecker.com/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522#solution3","@type":"Answer","upvoteCount":0},{"text":"Using reshape package:\n\n#data\nx &lt;- read.table(textConnection(\n&quot;Code Country        1950    1951    1952    1953    1954\nAFG  Afghanistan    20,249  21,352  22,532  23,557  24,555\nALB  Albania        8,097   8,986   10,058  11,123  12,246&quot;), header=TRUE)\n\nlibrary(reshape)\n\nx2 &lt;- melt(x, id = c(&quot;Code&quot;, &quot;Country&quot;), variable_name = &quot;Year&quot;)\nx2[,&quot;Year&quot;] &lt;- as.numeric(gsub(&quot;X&quot;, &quot;&quot; , x2[,&quot;Year&quot;]))\n\n    ","url":"https://solutionschecker.com/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522#solution4","@type":"Answer","upvoteCount":0},{"text":"Since this answer is tagged with r-faq, I felt it would be useful to share another alternative from base R: stack.\n\nNote, however, that stack does not work with factors--it only works if is.vector is TRUE, and from the documentation for is.vector, we find that:\n\n\n  is.vector returns TRUE if x is a vector of the specified mode having no attributes other than names. It returns FALSE otherwise.\n\n\nI&apos;m using the sample data from @Jaap&apos;s answer, where the values in the year columns are factors.\n\nHere&apos;s the stack approach:\n\ncbind(wide[1:2], stack(lapply(wide[-c(1, 2)], as.character)))\n##    Code     Country values  ind\n## 1   AFG Afghanistan 20,249 1950\n## 2   ALB     Albania  8,097 1950\n## 3   AFG Afghanistan 21,352 1951\n## 4   ALB     Albania  8,986 1951\n## 5   AFG Afghanistan 22,532 1952\n## 6   ALB     Albania 10,058 1952\n## 7   AFG Afghanistan 23,557 1953\n## 8   ALB     Albania 11,123 1953\n## 9   AFG Afghanistan 24,555 1954\n## 10  ALB     Albania 12,246 1954\n\n    ","url":"https://solutionschecker.com/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522#solution5","@type":"Answer","upvoteCount":0},{"text":"Here is another example showing the use of gather from tidyr. You can select the columns to gather either by removing them individually (as I do here), or by including the years you want explicitly.\n\nNote that, to handle the commas (and X&apos;s added if check.names = FALSE is not set), I am also using dplyr&apos;s mutate with parse_number from readr to convert the text values back to numbers. These are all part of the tidyverse and so can be loaded together with library(tidyverse)\n\nwide %&gt;%\n  gather(Year, Value, -Code, -Country) %&gt;%\n  mutate(Year = parse_number(Year)\n         , Value = parse_number(Value))\n\n\nReturns:\n\n   Code     Country Year Value\n1   AFG Afghanistan 1950 20249\n2   ALB     Albania 1950  8097\n3   AFG Afghanistan 1951 21352\n4   ALB     Albania 1951  8986\n5   AFG Afghanistan 1952 22532\n6   ALB     Albania 1952 10058\n7   AFG Afghanistan 1953 23557\n8   ALB     Albania 1953 11123\n9   AFG Afghanistan 1954 24555\n10  ALB     Albania 1954 12246\n\n    ","url":"https://solutionschecker.com/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522#solution6","@type":"Answer","upvoteCount":0},{"text":"Here&apos;s a sqldf solution:\nsqldf(&quot;Select Code, Country, &apos;1950&apos; As Year, `1950` As Value From wide\n        Union All\n       Select Code, Country, &apos;1951&apos; As Year, `1951` As Value From wide\n        Union All\n       Select Code, Country, &apos;1952&apos; As Year, `1952` As Value From wide\n        Union All\n       Select Code, Country, &apos;1953&apos; As Year, `1953` As Value From wide\n        Union All\n       Select Code, Country, &apos;1954&apos; As Year, `1954` As Value From wide;&quot;)\n\nTo make the query without typing in everything, you can use the following:\nThanks to G. Grothendieck for implementing it.\nValCol &lt;- tail(names(wide), -2)\n\ns &lt;- sprintf(&quot;Select Code, Country, &apos;%s&apos; As Year, `%s` As Value from wide&quot;, ValCol, ValCol)\nmquery &lt;- paste(s, collapse = &quot;\\n Union All\\n&quot;)\n\ncat(mquery) #just to show the query\n #&gt; Select Code, Country, &apos;1950&apos; As Year, `1950` As Value from wide\n #&gt;  Union All\n #&gt; Select Code, Country, &apos;1951&apos; As Year, `1951` As Value from wide\n #&gt;  Union All\n #&gt; Select Code, Country, &apos;1952&apos; As Year, `1952` As Value from wide\n #&gt;  Union All\n #&gt; Select Code, Country, &apos;1953&apos; As Year, `1953` As Value from wide\n #&gt;  Union All\n #&gt; Select Code, Country, &apos;1954&apos; As Year, `1954` As Value from wide\n\nsqldf(mquery)\n\n #&gt;    Code     Country Year  Value\n #&gt; 1   AFG Afghanistan 1950 20,249\n #&gt; 2   ALB     Albania 1950  8,097\n #&gt; 3   AFG Afghanistan 1951 21,352\n #&gt; 4   ALB     Albania 1951  8,986\n #&gt; 5   AFG Afghanistan 1952 22,532\n #&gt; 6   ALB     Albania 1952 10,058\n #&gt; 7   AFG Afghanistan 1953 23,557\n #&gt; 8   ALB     Albania 1953 11,123\n #&gt; 9   AFG Afghanistan 1954 24,555\n #&gt; 10  ALB     Albania 1954 12,246\n\nUnfortunately, I don&apos;t think that PIVOT and UNPIVOT would work for R SQLite. If you want to write up your query in a more sophisticated manner, you can also take a look at these posts:\n\nUsing sprintf writing up sql queries\n\nPass variables to sqldf\n\n\n    ","url":"https://solutionschecker.com/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522#solution7","@type":"Answer","upvoteCount":0},{"text":"You can also use the cdata package, which uses the concept of (transformation) control table:\n# data\nwide &lt;- read.table(text=&quot;Code Country        1950    1951    1952    1953    1954\nAFG  Afghanistan    20,249  21,352  22,532  23,557  24,555\nALB  Albania        8,097   8,986   10,058  11,123  12,246&quot;, header=TRUE, check.names=FALSE)\n\nlibrary(cdata)\n# build control table\ndrec &lt;- data.frame(\n    Year=as.character(1950:1954),\n    Value=as.character(1950:1954),\n    stringsAsFactors=FALSE\n)\ndrec &lt;- cdata::rowrecs_to_blocks_spec(drec, recordKeys=c(&quot;Code&quot;, &quot;Country&quot;))\n\n# apply control table\ncdata::layout_by(drec, wide)\n\nI am currently exploring that package and find it quite accessible. It is designed for much more complicated transformations and includes the backtransformation. There is a tutorial available.\n    ","url":"https://solutionschecker.com/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522#solution8","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><script id="google-analytics" data-nscript="beforeInteractive">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NXVLL8B');</script><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-862498b6ec7885c3.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-47289857226115f9.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_buildManifest.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_ssgManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXVLL8B"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/reshaping-data.frame-from-wide-to-long-format-1657384678522"><h1>Reshaping data.frame from wide to long format</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/dataframe">dataframe</a></div></div><div class="question-content mt-5">
                
<p>I have some trouble to convert my <code>data.frame</code> from a wide table to a long table.
At the moment it looks like this:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">Code Country        <span class="hljs-number">1950</span>    <span class="hljs-number">1951</span>    <span class="hljs-number">1952</span>    <span class="hljs-number">1953</span>    <span class="hljs-number">1954</span>
AFG  Afghanistan    <span class="hljs-number">20</span><span class="hljs-punctuation">,</span><span class="hljs-number">249</span>  <span class="hljs-number">21</span><span class="hljs-punctuation">,</span><span class="hljs-number">352</span>  <span class="hljs-number">22</span><span class="hljs-punctuation">,</span><span class="hljs-number">532</span>  <span class="hljs-number">23</span><span class="hljs-punctuation">,</span><span class="hljs-number">557</span>  <span class="hljs-number">24</span><span class="hljs-punctuation">,</span><span class="hljs-number">555</span>
ALB  Albania        <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><span class="hljs-number">097</span>   <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><span class="hljs-number">986</span>   <span class="hljs-number">10</span><span class="hljs-punctuation">,</span><span class="hljs-number">058</span>  <span class="hljs-number">11</span><span class="hljs-punctuation">,</span><span class="hljs-number">123</span>  <span class="hljs-number">12</span><span class="hljs-punctuation">,</span><span class="hljs-number">246</span>
</code></pre>

<p>Now I would like to transform this <code>data.frame</code> into a long <code>data.frame</code>.
Something like this:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">Code Country        Year    Value
AFG  Afghanistan    <span class="hljs-number">1950</span>    <span class="hljs-number">20</span><span class="hljs-punctuation">,</span><span class="hljs-number">249</span>
AFG  Afghanistan    <span class="hljs-number">1951</span>    <span class="hljs-number">21</span><span class="hljs-punctuation">,</span><span class="hljs-number">352</span>
AFG  Afghanistan    <span class="hljs-number">1952</span>    <span class="hljs-number">22</span><span class="hljs-punctuation">,</span><span class="hljs-number">532</span>
AFG  Afghanistan    <span class="hljs-number">1953</span>    <span class="hljs-number">23</span><span class="hljs-punctuation">,</span><span class="hljs-number">557</span>
AFG  Afghanistan    <span class="hljs-number">1954</span>    <span class="hljs-number">24</span><span class="hljs-punctuation">,</span><span class="hljs-number">555</span>
ALB  Albania        <span class="hljs-number">1950</span>    <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><span class="hljs-number">097</span>
ALB  Albania        <span class="hljs-number">1951</span>    <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><span class="hljs-number">986</span>
ALB  Albania        <span class="hljs-number">1952</span>    <span class="hljs-number">10</span><span class="hljs-punctuation">,</span><span class="hljs-number">058</span>
ALB  Albania        <span class="hljs-number">1953</span>    <span class="hljs-number">11</span><span class="hljs-punctuation">,</span><span class="hljs-number">123</span>
ALB  Albania        <span class="hljs-number">1954</span>    <span class="hljs-number">12</span><span class="hljs-punctuation">,</span><span class="hljs-number">246</span>
</code></pre>

<p>I have looked at and already tried using the <code>melt()</code> and the <code>reshape()</code> functions
as some people were suggesting in similar questions.
However, so far I only get messy results.</p>

<p>If it is possible I would like to do it with the <code>reshape()</code> function since
it looks a little bit nicer to handle.</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/dataframe">dataframe</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Three alternative solutions:</p>

<p><strong>1) With <a href="/questions/tagged/data.table" class="post-tag" title="show questions tagged 'data.table'" rel="tag">data.table</a>:</strong></p>

<p>You can use the same <code>melt</code> function as in the <code>reshape2</code> package (which is an extended &amp; improved implementation). <code>melt</code> from <code>data.table</code> has also more parameters that the <code>melt</code>-function from <code>reshape2</code>. You can for example also specify the name of the variable-column:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>data.table<span class="hljs-punctuation">)</span>
long <span class="hljs-operator">&lt;-</span> melt<span class="hljs-punctuation">(</span>setDT<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> id.vars <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"Code"</span><span class="hljs-punctuation">,</span><span class="hljs-string">"Country"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> variable.name <span class="hljs-operator">=</span> <span class="hljs-string">"year"</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>which gives:</p>

<blockquote>
<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-operator">&gt;</span> long
    Code     Country year  value
 <span class="hljs-number">1</span><span class="hljs-operator">:</span>  AFG Afghanistan <span class="hljs-number">1950</span> <span class="hljs-number">20</span><span class="hljs-punctuation">,</span><span class="hljs-number">249</span>
 <span class="hljs-number">2</span><span class="hljs-operator">:</span>  ALB     Albania <span class="hljs-number">1950</span>  <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><span class="hljs-number">097</span>
 <span class="hljs-number">3</span><span class="hljs-operator">:</span>  AFG Afghanistan <span class="hljs-number">1951</span> <span class="hljs-number">21</span><span class="hljs-punctuation">,</span><span class="hljs-number">352</span>
 <span class="hljs-number">4</span><span class="hljs-operator">:</span>  ALB     Albania <span class="hljs-number">1951</span>  <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><span class="hljs-number">986</span>
 <span class="hljs-number">5</span><span class="hljs-operator">:</span>  AFG Afghanistan <span class="hljs-number">1952</span> <span class="hljs-number">22</span><span class="hljs-punctuation">,</span><span class="hljs-number">532</span>
 <span class="hljs-number">6</span><span class="hljs-operator">:</span>  ALB     Albania <span class="hljs-number">1952</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span><span class="hljs-number">058</span>
 <span class="hljs-number">7</span><span class="hljs-operator">:</span>  AFG Afghanistan <span class="hljs-number">1953</span> <span class="hljs-number">23</span><span class="hljs-punctuation">,</span><span class="hljs-number">557</span>
 <span class="hljs-number">8</span><span class="hljs-operator">:</span>  ALB     Albania <span class="hljs-number">1953</span> <span class="hljs-number">11</span><span class="hljs-punctuation">,</span><span class="hljs-number">123</span>
 <span class="hljs-number">9</span><span class="hljs-operator">:</span>  AFG Afghanistan <span class="hljs-number">1954</span> <span class="hljs-number">24</span><span class="hljs-punctuation">,</span><span class="hljs-number">555</span>
<span class="hljs-number">10</span><span class="hljs-operator">:</span>  ALB     Albania <span class="hljs-number">1954</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span><span class="hljs-number">246</span>
</code></pre>
</blockquote>

<p>Some alternative notations:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">melt<span class="hljs-punctuation">(</span>setDT<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> id.vars <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span> variable.name <span class="hljs-operator">=</span> <span class="hljs-string">"year"</span><span class="hljs-punctuation">)</span>
melt<span class="hljs-punctuation">(</span>setDT<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> measure.vars <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-operator">:</span><span class="hljs-number">7</span><span class="hljs-punctuation">,</span> variable.name <span class="hljs-operator">=</span> <span class="hljs-string">"year"</span><span class="hljs-punctuation">)</span>
melt<span class="hljs-punctuation">(</span>setDT<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> measure.vars <span class="hljs-operator">=</span> <span class="hljs-built_in">as.character</span><span class="hljs-punctuation">(</span><span class="hljs-number">1950</span><span class="hljs-operator">:</span><span class="hljs-number">1954</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> variable.name <span class="hljs-operator">=</span> <span class="hljs-string">"year"</span><span class="hljs-punctuation">)</span>
</code></pre>

<p><strong>2) With <a href="/questions/tagged/tidyr" class="post-tag" title="show questions tagged 'tidyr'" rel="tag">tidyr</a>:</strong></p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>tidyr<span class="hljs-punctuation">)</span>
long <span class="hljs-operator">&lt;-</span> wide <span class="hljs-operator">%&gt;%</span> gather<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> value<span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span>Code<span class="hljs-punctuation">,</span> Country<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>Some alternative notations:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">wide <span class="hljs-operator">%&gt;%</span> gather<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> value<span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span>Code<span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span>Country<span class="hljs-punctuation">)</span>
wide <span class="hljs-operator">%&gt;%</span> gather<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> value<span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-operator">-</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span>
wide <span class="hljs-operator">%&gt;%</span> gather<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> value<span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
wide <span class="hljs-operator">%&gt;%</span> gather<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> value<span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span>
wide <span class="hljs-operator">%&gt;%</span> gather<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> value<span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-operator">:</span><span class="hljs-number">7</span><span class="hljs-punctuation">)</span>
wide <span class="hljs-operator">%&gt;%</span> gather<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> value<span class="hljs-punctuation">,</span> `<span class="hljs-number">1950</span>`:`1954`)
</code></pre>

<p><strong>3) With <a href="/questions/tagged/reshape2" class="post-tag" title="show questions tagged 'reshape2'" rel="tag">reshape2</a>:</strong></p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>reshape2<span class="hljs-punctuation">)</span>
long <span class="hljs-operator">&lt;-</span> melt<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">,</span> id.vars <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"Code"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"Country"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>Some alternative notations that give the same result:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-comment"># you can also define the id-variables by column number</span>
melt<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">,</span> id.vars <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span>

<span class="hljs-comment"># as an alternative you can also specify the measure-variables</span>
<span class="hljs-comment"># all other variables will then be used as id-variables</span>
melt<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">,</span> measure.vars <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-operator">:</span><span class="hljs-number">7</span><span class="hljs-punctuation">)</span>
melt<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">,</span> measure.vars <span class="hljs-operator">=</span> <span class="hljs-built_in">as.character</span><span class="hljs-punctuation">(</span><span class="hljs-number">1950</span><span class="hljs-operator">:</span><span class="hljs-number">1954</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>

<hr>

<p>NOTES:</p>

<ul>
<li><a href="/questions/tagged/reshape2" class="post-tag" title="show questions tagged 'reshape2'" rel="tag">reshape2</a> is retired. Only changes necessary to keep it on CRAN will be made. (<a href="https://github.com/hadley/reshape#status" rel="noreferrer">source</a>)</li>
<li>If you want to exclude <code>NA</code> values, you can add <code>na.rm = TRUE</code> to the <code>melt</code> as well as the <code>gather</code> functions.</li>
</ul>

<hr>

<p>Another problem with the data is that the values will be read by R as character-values (as a result of the <code>,</code> in the numbers). You can repair that with <code>gsub</code> and <code>as.numeric</code>:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">long<span class="hljs-operator">$</span>value <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">as.numeric</span><span class="hljs-punctuation">(</span>gsub<span class="hljs-punctuation">(</span><span class="hljs-string">","</span><span class="hljs-punctuation">,</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> long<span class="hljs-operator">$</span>value<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>Or directly with <code>data.table</code> or <code>dplyr</code>:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-comment"># data.table</span>
long <span class="hljs-operator">&lt;-</span> melt<span class="hljs-punctuation">(</span>setDT<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span>
             id.vars <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"Code"</span><span class="hljs-punctuation">,</span><span class="hljs-string">"Country"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span>
             variable.name <span class="hljs-operator">=</span> <span class="hljs-string">"year"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span> value <span class="hljs-operator">:=</span> <span class="hljs-built_in">as.numeric</span><span class="hljs-punctuation">(</span>gsub<span class="hljs-punctuation">(</span><span class="hljs-string">","</span><span class="hljs-punctuation">,</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> value<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span>

<span class="hljs-comment"># tidyr and dplyr</span>
long <span class="hljs-operator">&lt;-</span> wide <span class="hljs-operator">%&gt;%</span> gather<span class="hljs-punctuation">(</span>year<span class="hljs-punctuation">,</span> value<span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span>Code<span class="hljs-punctuation">,</span>Country<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span> 
  mutate<span class="hljs-punctuation">(</span>value <span class="hljs-operator">=</span> <span class="hljs-built_in">as.numeric</span><span class="hljs-punctuation">(</span>gsub<span class="hljs-punctuation">(</span><span class="hljs-string">","</span><span class="hljs-punctuation">,</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> value<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>

<hr>

<p><strong>Data:</strong></p>

<pre class="lang-r s-code-block"><code class="hljs language-r">wide <span class="hljs-operator">&lt;-</span> read.table<span class="hljs-punctuation">(</span>text<span class="hljs-operator">=</span><span class="hljs-string">"Code Country        1950    1951    1952    1953    1954
AFG  Afghanistan    20,249  21,352  22,532  23,557  24,555
ALB  Albania        8,097   8,986   10,058  11,123  12,246"</span><span class="hljs-punctuation">,</span> header<span class="hljs-operator">=</span><span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> check.names<span class="hljs-operator">=</span><span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span>
</code></pre>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/dataframe">dataframe</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><code>reshape()</code> takes a while to get used to, just as <code>melt</code>/<code>cast</code>. Here is a solution with reshape, assuming your data frame is called <code>d</code>:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">reshape<span class="hljs-punctuation">(</span>d<span class="hljs-punctuation">,</span> 
        direction <span class="hljs-operator">=</span> <span class="hljs-string">"long"</span><span class="hljs-punctuation">,</span>
        varying <span class="hljs-operator">=</span> <span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">names</span><span class="hljs-punctuation">(</span>d<span class="hljs-punctuation">)</span><span class="hljs-punctuation">[</span><span class="hljs-number">3</span><span class="hljs-operator">:</span><span class="hljs-number">7</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span>
        v.names <span class="hljs-operator">=</span> <span class="hljs-string">"Value"</span><span class="hljs-punctuation">,</span>
        idvar <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"Code"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"Country"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span>
        timevar <span class="hljs-operator">=</span> <span class="hljs-string">"Year"</span><span class="hljs-punctuation">,</span>
        times <span class="hljs-operator">=</span> <span class="hljs-number">1950</span><span class="hljs-operator">:</span><span class="hljs-number">1954</span><span class="hljs-punctuation">)</span>
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/dataframe">dataframe</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>With <code>tidyr_1.0.0</code>, another option is <code>pivot_longer</code></p>

<pre class="lang-r s-code-block"><code class="hljs language-r">library<span class="hljs-punctuation">(</span>tidyr<span class="hljs-punctuation">)</span>
pivot_longer<span class="hljs-punctuation">(</span>df1<span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span>Code<span class="hljs-punctuation">,</span> Country<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> values_to <span class="hljs-operator">=</span> <span class="hljs-string">"Value"</span><span class="hljs-punctuation">,</span> names_to <span class="hljs-operator">=</span> <span class="hljs-string">"Year"</span><span class="hljs-punctuation">)</span>
<span class="hljs-comment"># A tibble: 10 x 4</span>
<span class="hljs-comment">#   Code  Country     Year  Value </span>
<span class="hljs-comment">#   &lt;fct&gt; &lt;fct&gt;       &lt;chr&gt; &lt;fct&gt; </span>
<span class="hljs-comment"># 1 AFG   Afghanistan 1950  20,249</span>
<span class="hljs-comment"># 2 AFG   Afghanistan 1951  21,352</span>
<span class="hljs-comment"># 3 AFG   Afghanistan 1952  22,532</span>
<span class="hljs-comment"># 4 AFG   Afghanistan 1953  23,557</span>
<span class="hljs-comment"># 5 AFG   Afghanistan 1954  24,555</span>
<span class="hljs-comment"># 6 ALB   Albania     1950  8,097 </span>
<span class="hljs-comment"># 7 ALB   Albania     1951  8,986 </span>
<span class="hljs-comment"># 8 ALB   Albania     1952  10,058</span>
<span class="hljs-comment"># 9 ALB   Albania     1953  11,123</span>
<span class="hljs-comment">#10 ALB   Albania     1954  12,246</span>
</code></pre>

<h3>data</h3>

<pre class="lang-r s-code-block"><code class="hljs language-r">df1 <span class="hljs-operator">&lt;-</span> structure<span class="hljs-punctuation">(</span><span class="hljs-built_in">list</span><span class="hljs-punctuation">(</span>Code <span class="hljs-operator">=</span> structure<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span> .Label <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"AFG"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"ALB"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">class</span> <span class="hljs-operator">=</span> <span class="hljs-string">"factor"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> 
    Country <span class="hljs-operator">=</span> structure<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-punctuation">,</span> .Label <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"Afghanistan"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"Albania"</span>
    <span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">class</span> <span class="hljs-operator">=</span> <span class="hljs-string">"factor"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> `<span class="hljs-number">1950</span>` = structure(1:2, .Label = c("20,249", 
    "8,097"), class = "factor"), `1951` = structure(1:2, .Label = c("21,352", 
    "8,986"), class = "factor"), `1952` = structure(2:1, .Label = c("10,058", 
    "22,532"), class = "factor"), `1953` = structure(2:1, .Label = c("11,123", 
    "23,557"), class = "factor"), `1954` = structure(2:1, .Label = c("12,246", 
    "24,555"), class = "factor")), class = "data.frame", row.names = c(NA, 
-2L))
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/dataframe">dataframe</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using <em>reshape</em> package:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-comment">#data</span>
x <span class="hljs-operator">&lt;-</span> read.table<span class="hljs-punctuation">(</span>textConnection<span class="hljs-punctuation">(</span>
<span class="hljs-string">"Code Country        1950    1951    1952    1953    1954
AFG  Afghanistan    20,249  21,352  22,532  23,557  24,555
ALB  Albania        8,097   8,986   10,058  11,123  12,246"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> header<span class="hljs-operator">=</span><span class="hljs-literal">TRUE</span><span class="hljs-punctuation">)</span>

library<span class="hljs-punctuation">(</span>reshape<span class="hljs-punctuation">)</span>

x2 <span class="hljs-operator">&lt;-</span> melt<span class="hljs-punctuation">(</span>x<span class="hljs-punctuation">,</span> id <span class="hljs-operator">=</span> <span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"Code"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"Country"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> variable_name <span class="hljs-operator">=</span> <span class="hljs-string">"Year"</span><span class="hljs-punctuation">)</span>
x2<span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-string">"Year"</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">&lt;-</span> <span class="hljs-built_in">as.numeric</span><span class="hljs-punctuation">(</span>gsub<span class="hljs-punctuation">(</span><span class="hljs-string">"X"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">""</span> <span class="hljs-punctuation">,</span> x2<span class="hljs-punctuation">[</span><span class="hljs-punctuation">,</span><span class="hljs-string">"Year"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/dataframe">dataframe</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Since this answer is tagged with <a href="/questions/tagged/r-faq" class="post-tag" title="show questions tagged 'r-faq'" rel="tag">r-faq</a>, I felt it would be useful to share another alternative from base R: <code>stack</code>.</p>

<p>Note, however, that <code>stack</code> does not work with <code>factor</code>s--it only works if <code>is.vector</code> is <code>TRUE</code>, and from the documentation for <code>is.vector</code>, we find that:</p>

<blockquote>
  <p><code>is.vector</code> returns <code>TRUE</code> if x is a vector of the specified mode having no attributes <em>other than names</em>. It returns <code>FALSE</code> otherwise.</p>
</blockquote>

<p>I'm using the sample data <a href="https://stackoverflow.com/a/25856135/1270695">from @Jaap's answer</a>, where the values in the year columns are <code>factor</code>s.</p>

<p>Here's the <code>stack</code> approach:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">cbind<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-operator">:</span><span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> stack<span class="hljs-punctuation">(</span>lapply<span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">[</span><span class="hljs-operator">-</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-built_in">as.character</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
<span class="hljs-comment">##    Code     Country values  ind</span>
<span class="hljs-comment">## 1   AFG Afghanistan 20,249 1950</span>
<span class="hljs-comment">## 2   ALB     Albania  8,097 1950</span>
<span class="hljs-comment">## 3   AFG Afghanistan 21,352 1951</span>
<span class="hljs-comment">## 4   ALB     Albania  8,986 1951</span>
<span class="hljs-comment">## 5   AFG Afghanistan 22,532 1952</span>
<span class="hljs-comment">## 6   ALB     Albania 10,058 1952</span>
<span class="hljs-comment">## 7   AFG Afghanistan 23,557 1953</span>
<span class="hljs-comment">## 8   ALB     Albania 11,123 1953</span>
<span class="hljs-comment">## 9   AFG Afghanistan 24,555 1954</span>
<span class="hljs-comment">## 10  ALB     Albania 12,246 1954</span>
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/dataframe">dataframe</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is another example showing the use of <code>gather</code> from <code>tidyr</code>. You can select the columns to <code>gather</code> either by removing them individually (as I do here), or by including the years you want explicitly.</p>

<p>Note that, to handle the commas (and X's added if <code>check.names = FALSE</code> is not set), I am also using <code>dplyr</code>'s mutate with <code>parse_number</code> from <code>readr</code> to convert the text values back to numbers. These are all part of the <code>tidyverse</code> and so can be loaded together with <code>library(tidyverse)</code></p>

<pre class="lang-r s-code-block"><code class="hljs language-r">wide <span class="hljs-operator">%&gt;%</span>
  gather<span class="hljs-punctuation">(</span>Year<span class="hljs-punctuation">,</span> Value<span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span>Code<span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span>Country<span class="hljs-punctuation">)</span> <span class="hljs-operator">%&gt;%</span>
  mutate<span class="hljs-punctuation">(</span>Year <span class="hljs-operator">=</span> parse_number<span class="hljs-punctuation">(</span>Year<span class="hljs-punctuation">)</span>
         <span class="hljs-punctuation">,</span> Value <span class="hljs-operator">=</span> parse_number<span class="hljs-punctuation">(</span>Value<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
</code></pre>

<p>Returns:</p>

<pre class="lang-r s-code-block"><code class="hljs language-r">   Code     Country Year Value
<span class="hljs-number">1</span>   AFG Afghanistan <span class="hljs-number">1950</span> <span class="hljs-number">20249</span>
<span class="hljs-number">2</span>   ALB     Albania <span class="hljs-number">1950</span>  <span class="hljs-number">8097</span>
<span class="hljs-number">3</span>   AFG Afghanistan <span class="hljs-number">1951</span> <span class="hljs-number">21352</span>
<span class="hljs-number">4</span>   ALB     Albania <span class="hljs-number">1951</span>  <span class="hljs-number">8986</span>
<span class="hljs-number">5</span>   AFG Afghanistan <span class="hljs-number">1952</span> <span class="hljs-number">22532</span>
<span class="hljs-number">6</span>   ALB     Albania <span class="hljs-number">1952</span> <span class="hljs-number">10058</span>
<span class="hljs-number">7</span>   AFG Afghanistan <span class="hljs-number">1953</span> <span class="hljs-number">23557</span>
<span class="hljs-number">8</span>   ALB     Albania <span class="hljs-number">1953</span> <span class="hljs-number">11123</span>
<span class="hljs-number">9</span>   AFG Afghanistan <span class="hljs-number">1954</span> <span class="hljs-number">24555</span>
<span class="hljs-number">10</span>  ALB     Albania <span class="hljs-number">1954</span> <span class="hljs-number">12246</span>
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/dataframe">dataframe</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's a <a href="/questions/tagged/sqldf" class="post-tag" title="show questions tagged 'sqldf'" rel="tag">sqldf</a> solution:</p>
<pre class="lang-r s-code-block"><code class="hljs language-r">sqldf<span class="hljs-punctuation">(</span><span class="hljs-string">"Select Code, Country, '1950' As Year, `1950` As Value From wide
        Union All
       Select Code, Country, '1951' As Year, `1951` As Value From wide
        Union All
       Select Code, Country, '1952' As Year, `1952` As Value From wide
        Union All
       Select Code, Country, '1953' As Year, `1953` As Value From wide
        Union All
       Select Code, Country, '1954' As Year, `1954` As Value From wide;"</span><span class="hljs-punctuation">)</span>
</code></pre>
<p>To make the query without typing in everything, you can use the following:</p>
<p><sup>Thanks to G. Grothendieck for implementing it.</sup></p>
<pre class="lang-r s-code-block"><code class="hljs language-r">ValCol <span class="hljs-operator">&lt;-</span> tail<span class="hljs-punctuation">(</span><span class="hljs-built_in">names</span><span class="hljs-punctuation">(</span>wide<span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> <span class="hljs-operator">-</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span>

s <span class="hljs-operator">&lt;-</span> sprintf<span class="hljs-punctuation">(</span><span class="hljs-string">"Select Code, Country, '%s' As Year, `%s` As Value from wide"</span><span class="hljs-punctuation">,</span> ValCol<span class="hljs-punctuation">,</span> ValCol<span class="hljs-punctuation">)</span>
mquery <span class="hljs-operator">&lt;-</span> paste<span class="hljs-punctuation">(</span>s<span class="hljs-punctuation">,</span> collapse <span class="hljs-operator">=</span> <span class="hljs-string">"\n Union All\n"</span><span class="hljs-punctuation">)</span>

cat<span class="hljs-punctuation">(</span>mquery<span class="hljs-punctuation">)</span> <span class="hljs-comment">#just to show the query</span>
 <span class="hljs-comment">#&gt; Select Code, Country, '1950' As Year, `1950` As Value from wide</span>
 <span class="hljs-comment">#&gt;  Union All</span>
 <span class="hljs-comment">#&gt; Select Code, Country, '1951' As Year, `1951` As Value from wide</span>
 <span class="hljs-comment">#&gt;  Union All</span>
 <span class="hljs-comment">#&gt; Select Code, Country, '1952' As Year, `1952` As Value from wide</span>
 <span class="hljs-comment">#&gt;  Union All</span>
 <span class="hljs-comment">#&gt; Select Code, Country, '1953' As Year, `1953` As Value from wide</span>
 <span class="hljs-comment">#&gt;  Union All</span>
 <span class="hljs-comment">#&gt; Select Code, Country, '1954' As Year, `1954` As Value from wide</span>

sqldf<span class="hljs-punctuation">(</span>mquery<span class="hljs-punctuation">)</span>
</code></pre>
<pre class="lang-r s-code-block"><code class="hljs language-r"> <span class="hljs-comment">#&gt;    Code     Country Year  Value</span>
 <span class="hljs-comment">#&gt; 1   AFG Afghanistan 1950 20,249</span>
 <span class="hljs-comment">#&gt; 2   ALB     Albania 1950  8,097</span>
 <span class="hljs-comment">#&gt; 3   AFG Afghanistan 1951 21,352</span>
 <span class="hljs-comment">#&gt; 4   ALB     Albania 1951  8,986</span>
 <span class="hljs-comment">#&gt; 5   AFG Afghanistan 1952 22,532</span>
 <span class="hljs-comment">#&gt; 6   ALB     Albania 1952 10,058</span>
 <span class="hljs-comment">#&gt; 7   AFG Afghanistan 1953 23,557</span>
 <span class="hljs-comment">#&gt; 8   ALB     Albania 1953 11,123</span>
 <span class="hljs-comment">#&gt; 9   AFG Afghanistan 1954 24,555</span>
 <span class="hljs-comment">#&gt; 10  ALB     Albania 1954 12,246</span>
</code></pre>
<p>Unfortunately, I don't think that <code>PIVOT</code> and <code>UNPIVOT</code> would work for <code>R</code> <code>SQLite</code>. If you want to write up your query in a more sophisticated manner, you can also take a look at these posts:</p>
<ul>
<li><p><a href="https://stackoverflow.com/questions/40432590/r-sprintf-list-of-variables-of-mixed-type">Using <code>sprintf</code> writing up sql queries</a></p>
</li>
<li><p><a href="https://stackoverflow.com/questions/7547950/how-can-i-pass-r-variable-into-sqldf">Pass variables to <code>sqldf</code></a></p>
</li>
</ul>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/dataframe">dataframe</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can also use the <code>cdata</code> package, which uses the concept of (transformation) control table:</p>
<pre class="lang-r s-code-block"><code class="hljs language-r"><span class="hljs-comment"># data</span>
wide <span class="hljs-operator">&lt;-</span> read.table<span class="hljs-punctuation">(</span>text<span class="hljs-operator">=</span><span class="hljs-string">"Code Country        1950    1951    1952    1953    1954
AFG  Afghanistan    20,249  21,352  22,532  23,557  24,555
ALB  Albania        8,097   8,986   10,058  11,123  12,246"</span><span class="hljs-punctuation">,</span> header<span class="hljs-operator">=</span><span class="hljs-literal">TRUE</span><span class="hljs-punctuation">,</span> check.names<span class="hljs-operator">=</span><span class="hljs-literal">FALSE</span><span class="hljs-punctuation">)</span>

library<span class="hljs-punctuation">(</span>cdata<span class="hljs-punctuation">)</span>
<span class="hljs-comment"># build control table</span>
drec <span class="hljs-operator">&lt;-</span> data.frame<span class="hljs-punctuation">(</span>
    Year<span class="hljs-operator">=</span><span class="hljs-built_in">as.character</span><span class="hljs-punctuation">(</span><span class="hljs-number">1950</span><span class="hljs-operator">:</span><span class="hljs-number">1954</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span>
    Value<span class="hljs-operator">=</span><span class="hljs-built_in">as.character</span><span class="hljs-punctuation">(</span><span class="hljs-number">1950</span><span class="hljs-operator">:</span><span class="hljs-number">1954</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span>
    stringsAsFactors<span class="hljs-operator">=</span><span class="hljs-literal">FALSE</span>
<span class="hljs-punctuation">)</span>
drec <span class="hljs-operator">&lt;-</span> cdata<span class="hljs-operator">::</span>rowrecs_to_blocks_spec<span class="hljs-punctuation">(</span>drec<span class="hljs-punctuation">,</span> recordKeys<span class="hljs-operator">=</span><span class="hljs-built_in">c</span><span class="hljs-punctuation">(</span><span class="hljs-string">"Code"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"Country"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>

<span class="hljs-comment"># apply control table</span>
cdata<span class="hljs-operator">::</span>layout_by<span class="hljs-punctuation">(</span>drec<span class="hljs-punctuation">,</span> wide<span class="hljs-punctuation">)</span>
</code></pre>
<p>I am currently exploring that package and find it quite accessible. It is designed for much more complicated transformations and includes the backtransformation. There is <a href="https://win-vector.com/2019/04/16/controlling-data-layout-with-cdata/" rel="nofollow noreferrer">a tutorial</a> available.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/retrieve-only-the-queried-element-in-an-object-array-in-mongodb-collection-1657384890457">Retrieve only the queried element in an object array in MongoDB collection</a><a href="/questions/i-just-assigned-a-variable-but-echo-dollarvariable-shows-something-else-1657387574561">I just assigned a variable, but echo $variable shows something else</a><a href="/questions/are-dictionaries-ordered-in-python-3.6+-1657387834234">Are dictionaries ordered in Python 3.6+?</a><a href="/questions/sorting-an-array-of-objects-by-property-values-1657387447490">Sorting an array of objects by property values</a><a href="/questions/how-do-i-pass-data-between-activities-in-android-application-1657384739839">How do I pass data between Activities in Android application?</a><a href="/questions/is-there-any-way-to-kill-a-thread-1657387859831">Is there any way to kill a Thread?</a><a href="/questions/syntax-error-due-to-using-a-reserved-word-as-a-table-or-column-name-in-mysql-1657384689274">Syntax error due to using a reserved word as a table or column name in MySQL</a><a href="/questions/what-does-this-symbol-mean-in-javascript-1657387632971">What does this symbol mean in JavaScript?</a><a href="/questions/the-use-of-multiple-jframes:-good-or-bad-practice-closed-1657384478184">The Use of Multiple JFrames: Good or Bad Practice? [closed]</a><a href="/questions/jquery-ajax-file-upload-1657387368970">jQuery Ajax File Upload</a><a href="/questions/how-do-i-vertically-center-text-with-css-duplicate-1657387645821">How do I vertically center text with CSS? [duplicate]</a><a href="/questions/ways-to-circumvent-the-same-origin-policy-1657384763316">Ways to circumvent the same-origin policy</a><a href="/questions/query-based-on-multiple-where-clauses-in-firebase-1657387494547">Query based on multiple where clauses in Firebase</a><a href="/questions/flexbox:-center-horizontally-and-vertically-1657384587888">Flexbox: center horizontally and vertically</a><a href="/questions/how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909">How do I set a variable to the output of a command in Bash?</a><a href="/questions/use-of-&#x27;prototype&#x27;-vs.-&#x27;this&#x27;-in-javascript-1657388117307">Use of &#x27;prototype&#x27; vs. &#x27;this&#x27; in JavaScript?</a><a href="/questions/iterating-over-dictionaries-using-&#x27;for&#x27;-loops-1657388334481">Iterating over dictionaries using &#x27;for&#x27; loops</a><a href="/questions/how-to-test-multiple-variables-for-equality-against-a-single-value-1657384358504">How to test multiple variables for equality against a single value?</a><a href="/questions/what-does-it-mean-to-%22program-to-an-interface%22-1657384671665">What does it mean to &quot;program to an interface&quot;?</a><a href="/questions/why-can&#x27;t-an-element-with-a-z-index-value-cover-its-child-1657387707187">Why can&#x27;t an element with a z-index value cover its child?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;Three alternative solutions:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;1) With \u0026lt;a href=\u0026quot;/questions/tagged/data.table\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;data.table\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;data.table\u0026lt;/a\u0026gt;:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can use the same \u0026lt;code\u0026gt;melt\u0026lt;/code\u0026gt; function as in the \u0026lt;code\u0026gt;reshape2\u0026lt;/code\u0026gt; package (which is an extended \u0026amp;amp; improved implementation). \u0026lt;code\u0026gt;melt\u0026lt;/code\u0026gt; from \u0026lt;code\u0026gt;data.table\u0026lt;/code\u0026gt; has also more parameters that the \u0026lt;code\u0026gt;melt\u0026lt;/code\u0026gt;-function from \u0026lt;code\u0026gt;reshape2\u0026lt;/code\u0026gt;. You can for example also specify the name of the variable-column:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;data.table\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nlong \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; melt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;setDT\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; id.vars \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Code\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Country\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; variable.name \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;which gives:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; long\n    Code     Country year  value\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;  AFG Afghanistan \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;249\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;  ALB     Albania \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;097\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;  AFG Afghanistan \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1951\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;21\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;352\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;  ALB     Albania \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1951\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;986\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;  AFG Afghanistan \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1952\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;532\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;  ALB     Albania \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1952\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;058\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;  AFG Afghanistan \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1953\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;557\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;  ALB     Albania \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1953\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;  AFG Afghanistan \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;24\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;555\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;  ALB     Albania \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;246\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;Some alternative notations:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;melt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;setDT\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; id.vars \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; variable.name \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nmelt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;setDT\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; measure.vars \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; variable.name \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nmelt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;setDT\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; measure.vars \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;as.character\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; variable.name \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;2) With \u0026lt;a href=\u0026quot;/questions/tagged/tidyr\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;tidyr\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;tidyr\u0026lt;/a\u0026gt;:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;tidyr\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nlong \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; wide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; gather\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Code\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; Country\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Some alternative notations:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;wide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; gather\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;Code\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;Country\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nwide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; gather\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nwide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; gather\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nwide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; gather\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nwide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; gather\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nwide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; gather\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; `\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;`:`1954`)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;3) With \u0026lt;a href=\u0026quot;/questions/tagged/reshape2\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;reshape2\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;reshape2\u0026lt;/a\u0026gt;:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;reshape2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nlong \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; melt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; id.vars \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Code\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Country\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Some alternative notations that give the same result:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# you can also define the id-variables by column number\u0026lt;/span\u0026gt;\nmelt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; id.vars \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# as an alternative you can also specify the measure-variables\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# all other variables will then be used as id-variables\u0026lt;/span\u0026gt;\nmelt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; measure.vars \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nmelt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; measure.vars \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;as.character\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;NOTES:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;/questions/tagged/reshape2\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;reshape2\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;reshape2\u0026lt;/a\u0026gt; is retired. Only changes necessary to keep it on CRAN will be made. (\u0026lt;a href=\u0026quot;https://github.com/hadley/reshape#status\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;source\u0026lt;/a\u0026gt;)\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;If you want to exclude \u0026lt;code\u0026gt;NA\u0026lt;/code\u0026gt; values, you can add \u0026lt;code\u0026gt;na.rm = TRUE\u0026lt;/code\u0026gt; to the \u0026lt;code\u0026gt;melt\u0026lt;/code\u0026gt; as well as the \u0026lt;code\u0026gt;gather\u0026lt;/code\u0026gt; functions.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;Another problem with the data is that the values will be read by R as character-values (as a result of the \u0026lt;code\u0026gt;,\u0026lt;/code\u0026gt; in the numbers). You can repair that with \u0026lt;code\u0026gt;gsub\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;as.numeric\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;long\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;value \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;as.numeric\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;gsub\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; long\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or directly with \u0026lt;code\u0026gt;data.table\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;dplyr\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# data.table\u0026lt;/span\u0026gt;\nlong \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; melt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;setDT\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n             id.vars \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Code\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Country\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n             variable.name \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;as.numeric\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;gsub\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# tidyr and dplyr\u0026lt;/span\u0026gt;\nlong \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; wide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; gather\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Code\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;Country\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt; \n  mutate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;value \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;as.numeric\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;gsub\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;,\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Data:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;wide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; read.table\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;text\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Code Country        1950    1951    1952    1953    1954\nAFG  Afghanistan    20,249  21,352  22,532  23,557  24,555\nALB  Albania        8,097   8,986   10,058  11,123  12,246\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; header\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; check.names\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;reshape()\u0026lt;/code\u0026gt; takes a while to get used to, just as \u0026lt;code\u0026gt;melt\u0026lt;/code\u0026gt;/\u0026lt;code\u0026gt;cast\u0026lt;/code\u0026gt;. Here is a solution with reshape, assuming your data frame is called \u0026lt;code\u0026gt;d\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;reshape\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;d\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \n        direction \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;long\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n        varying \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;names\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;d\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n        v.names \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Value\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n        idvar \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Code\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Country\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n        timevar \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n        times \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;With \u0026lt;code\u0026gt;tidyr_1.0.0\u0026lt;/code\u0026gt;, another option is \u0026lt;code\u0026gt;pivot_longer\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;library\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;tidyr\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\npivot_longer\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;df1\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Code\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; Country\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; values_to \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Value\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; names_to \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# A tibble: 10 x 4\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#   Code  Country     Year  Value \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#   \u0026amp;lt;fct\u0026amp;gt; \u0026amp;lt;fct\u0026amp;gt;       \u0026amp;lt;chr\u0026amp;gt; \u0026amp;lt;fct\u0026amp;gt; \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 1 AFG   Afghanistan 1950  20,249\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 2 AFG   Afghanistan 1951  21,352\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 3 AFG   Afghanistan 1952  22,532\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 4 AFG   Afghanistan 1953  23,557\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 5 AFG   Afghanistan 1954  24,555\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 6 ALB   Albania     1950  8,097 \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 7 ALB   Albania     1951  8,986 \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 8 ALB   Albania     1952  10,058\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# 9 ALB   Albania     1953  11,123\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#10 ALB   Albania     1954  12,246\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h3\u0026gt;data\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;df1 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; structure\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;list\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Code \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; structure\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; .Label \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;AFG\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ALB\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;factor\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \n    Country \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; structure\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; .Label \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Afghanistan\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Albania\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;factor\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; `\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;` = structure(1:2, .Label = c(\u0026quot;20,249\u0026quot;, \n    \u0026quot;8,097\u0026quot;), class = \u0026quot;factor\u0026quot;), `1951` = structure(1:2, .Label = c(\u0026quot;21,352\u0026quot;, \n    \u0026quot;8,986\u0026quot;), class = \u0026quot;factor\u0026quot;), `1952` = structure(2:1, .Label = c(\u0026quot;10,058\u0026quot;, \n    \u0026quot;22,532\u0026quot;), class = \u0026quot;factor\u0026quot;), `1953` = structure(2:1, .Label = c(\u0026quot;11,123\u0026quot;, \n    \u0026quot;23,557\u0026quot;), class = \u0026quot;factor\u0026quot;), `1954` = structure(2:1, .Label = c(\u0026quot;12,246\u0026quot;, \n    \u0026quot;24,555\u0026quot;), class = \u0026quot;factor\u0026quot;)), class = \u0026quot;data.frame\u0026quot;, row.names = c(NA, \n-2L))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Using \u0026lt;em\u0026gt;reshape\u0026lt;/em\u0026gt; package:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#data\u0026lt;/span\u0026gt;\nx \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; read.table\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;textConnection\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Code Country        1950    1951    1952    1953    1954\nAFG  Afghanistan    20,249  21,352  22,532  23,557  24,555\nALB  Albania        8,097   8,986   10,058  11,123  12,246\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; header\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\nlibrary\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;reshape\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\nx2 \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; melt\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;x\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; id \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Code\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Country\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; variable_name \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nx2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;as.numeric\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;gsub\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;X\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; x2\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Year\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Since this answer is tagged with \u0026lt;a href=\u0026quot;/questions/tagged/r-faq\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;r-faq\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;r-faq\u0026lt;/a\u0026gt;, I felt it would be useful to share another alternative from base R: \u0026lt;code\u0026gt;stack\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Note, however, that \u0026lt;code\u0026gt;stack\u0026lt;/code\u0026gt; does not work with \u0026lt;code\u0026gt;factor\u0026lt;/code\u0026gt;s--it only works if \u0026lt;code\u0026gt;is.vector\u0026lt;/code\u0026gt; is \u0026lt;code\u0026gt;TRUE\u0026lt;/code\u0026gt;, and from the documentation for \u0026lt;code\u0026gt;is.vector\u0026lt;/code\u0026gt;, we find that:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;\u0026lt;code\u0026gt;is.vector\u0026lt;/code\u0026gt; returns \u0026lt;code\u0026gt;TRUE\u0026lt;/code\u0026gt; if x is a vector of the specified mode having no attributes \u0026lt;em\u0026gt;other than names\u0026lt;/em\u0026gt;. It returns \u0026lt;code\u0026gt;FALSE\u0026lt;/code\u0026gt; otherwise.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;I\u0026apos;m using the sample data \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/25856135/1270695\u0026quot;\u0026gt;from @Jaap\u0026apos;s answer\u0026lt;/a\u0026gt;, where the values in the year columns are \u0026lt;code\u0026gt;factor\u0026lt;/code\u0026gt;s.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Here\u0026apos;s the \u0026lt;code\u0026gt;stack\u0026lt;/code\u0026gt; approach:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;cbind\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; stack\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;lapply\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;[\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;]\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;as.character\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;##    Code     Country values  ind\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;## 1   AFG Afghanistan 20,249 1950\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;## 2   ALB     Albania  8,097 1950\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;## 3   AFG Afghanistan 21,352 1951\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;## 4   ALB     Albania  8,986 1951\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;## 5   AFG Afghanistan 22,532 1952\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;## 6   ALB     Albania 10,058 1952\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;## 7   AFG Afghanistan 23,557 1953\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;## 8   ALB     Albania 11,123 1953\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;## 9   AFG Afghanistan 24,555 1954\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;## 10  ALB     Albania 12,246 1954\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is another example showing the use of \u0026lt;code\u0026gt;gather\u0026lt;/code\u0026gt; from \u0026lt;code\u0026gt;tidyr\u0026lt;/code\u0026gt;. You can select the columns to \u0026lt;code\u0026gt;gather\u0026lt;/code\u0026gt; either by removing them individually (as I do here), or by including the years you want explicitly.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Note that, to handle the commas (and X\u0026apos;s added if \u0026lt;code\u0026gt;check.names = FALSE\u0026lt;/code\u0026gt; is not set), I am also using \u0026lt;code\u0026gt;dplyr\u0026lt;/code\u0026gt;\u0026apos;s mutate with \u0026lt;code\u0026gt;parse_number\u0026lt;/code\u0026gt; from \u0026lt;code\u0026gt;readr\u0026lt;/code\u0026gt; to convert the text values back to numbers. These are all part of the \u0026lt;code\u0026gt;tidyverse\u0026lt;/code\u0026gt; and so can be loaded together with \u0026lt;code\u0026gt;library(tidyverse)\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;wide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt;\n  gather\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; Value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;Code\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;Country\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026amp;gt;%\u0026lt;/span\u0026gt;\n  mutate\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Year \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parse_number\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Year\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n         \u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; Value \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; parse_number\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;Value\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Returns:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;   Code     Country Year Value\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;   AFG Afghanistan \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20249\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;   ALB     Albania \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8097\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;   AFG Afghanistan \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1951\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;21352\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;   ALB     Albania \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1951\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8986\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;   AFG Afghanistan \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1952\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22532\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;   ALB     Albania \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1952\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10058\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;   AFG Afghanistan \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1953\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23557\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;   ALB     Albania \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1953\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11123\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;   AFG Afghanistan \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;24555\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;  ALB     Albania \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12246\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here\u0026apos;s a \u0026lt;a href=\u0026quot;/questions/tagged/sqldf\u0026quot; class=\u0026quot;post-tag\u0026quot; title=\u0026quot;show questions tagged \u0026apos;sqldf\u0026apos;\u0026quot; rel=\u0026quot;tag\u0026quot;\u0026gt;sqldf\u0026lt;/a\u0026gt; solution:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;sqldf\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Select Code, Country, \u0026apos;1950\u0026apos; As Year, `1950` As Value From wide\n        Union All\n       Select Code, Country, \u0026apos;1951\u0026apos; As Year, `1951` As Value From wide\n        Union All\n       Select Code, Country, \u0026apos;1952\u0026apos; As Year, `1952` As Value From wide\n        Union All\n       Select Code, Country, \u0026apos;1953\u0026apos; As Year, `1953` As Value From wide\n        Union All\n       Select Code, Country, \u0026apos;1954\u0026apos; As Year, `1954` As Value From wide;\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;To make the query without typing in everything, you can use the following:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;sup\u0026gt;Thanks to G. Grothendieck for implementing it.\u0026lt;/sup\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;ValCol \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; tail\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;names\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\ns \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; sprintf\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Select Code, Country, \u0026apos;%s\u0026apos; As Year, `%s` As Value from wide\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; ValCol\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; ValCol\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\nmquery \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; paste\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;s\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; collapse \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n Union All\\n\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\ncat\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;mquery\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#just to show the query\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; Select Code, Country, \u0026apos;1950\u0026apos; As Year, `1950` As Value from wide\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  Union All\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; Select Code, Country, \u0026apos;1951\u0026apos; As Year, `1951` As Value from wide\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  Union All\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; Select Code, Country, \u0026apos;1952\u0026apos; As Year, `1952` As Value from wide\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  Union All\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; Select Code, Country, \u0026apos;1953\u0026apos; As Year, `1953` As Value from wide\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;  Union All\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; Select Code, Country, \u0026apos;1954\u0026apos; As Year, `1954` As Value from wide\u0026lt;/span\u0026gt;\n\nsqldf\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;mquery\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt;    Code     Country Year  Value\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 1   AFG Afghanistan 1950 20,249\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 2   ALB     Albania 1950  8,097\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 3   AFG Afghanistan 1951 21,352\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 4   ALB     Albania 1951  8,986\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 5   AFG Afghanistan 1952 22,532\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 6   ALB     Albania 1952 10,058\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 7   AFG Afghanistan 1953 23,557\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 8   ALB     Albania 1953 11,123\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 9   AFG Afghanistan 1954 24,555\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;#\u0026amp;gt; 10  ALB     Albania 1954 12,246\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Unfortunately, I don\u0026apos;t think that \u0026lt;code\u0026gt;PIVOT\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;UNPIVOT\u0026lt;/code\u0026gt; would work for \u0026lt;code\u0026gt;R\u0026lt;/code\u0026gt; \u0026lt;code\u0026gt;SQLite\u0026lt;/code\u0026gt;. If you want to write up your query in a more sophisticated manner, you can also take a look at these posts:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/40432590/r-sprintf-list-of-variables-of-mixed-type\u0026quot;\u0026gt;Using \u0026lt;code\u0026gt;sprintf\u0026lt;/code\u0026gt; writing up sql queries\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/7547950/how-can-i-pass-r-variable-into-sqldf\u0026quot;\u0026gt;Pass variables to \u0026lt;code\u0026gt;sqldf\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can also use the \u0026lt;code\u0026gt;cdata\u0026lt;/code\u0026gt; package, which uses the concept of (transformation) control table:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# data\u0026lt;/span\u0026gt;\nwide \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; read.table\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;text\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Code Country        1950    1951    1952    1953    1954\nAFG  Afghanistan    20,249  21,352  22,532  23,557  24,555\nALB  Albania        8,097   8,986   10,058  11,123  12,246\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; header\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; check.names\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\nlibrary\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;cdata\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# build control table\u0026lt;/span\u0026gt;\ndrec \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; data.frame\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\n    Year\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;as.character\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n    Value\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;as.character\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;:\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\n    stringsAsFactors\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\ndrec \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;lt;-\u0026lt;/span\u0026gt; cdata\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;::\u0026lt;/span\u0026gt;rowrecs_to_blocks_spec\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;drec\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; recordKeys\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;c\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Code\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Country\u0026quot;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# apply control table\u0026lt;/span\u0026gt;\ncdata\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;::\u0026lt;/span\u0026gt;layout_by\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;(\u0026lt;/span\u0026gt;drec\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt; wide\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I am currently exploring that package and find it quite accessible. It is designed for much more complicated transformations and includes the backtransformation. There is \u0026lt;a href=\u0026quot;https://win-vector.com/2019/04/16/controlling-data-layout-with-cdata/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;a tutorial\u0026lt;/a\u0026gt; available.\u0026lt;/p\u0026gt;\n    "],"id":120,"title":"Reshaping data.frame from wide to long format","content":"\n                \n\u0026lt;p\u0026gt;I have some trouble to convert my \u0026lt;code\u0026gt;data.frame\u0026lt;/code\u0026gt; from a wide table to a long table.\nAt the moment it looks like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;Code Country        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1951\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1952\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1953\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt;\nAFG  Afghanistan    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;249\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;21\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;352\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;532\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;557\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;24\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;555\u0026lt;/span\u0026gt;\nALB  Albania        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;097\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;986\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;058\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;246\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Now I would like to transform this \u0026lt;code\u0026gt;data.frame\u0026lt;/code\u0026gt; into a long \u0026lt;code\u0026gt;data.frame\u0026lt;/code\u0026gt;.\nSomething like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-r s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-r\u0026quot;\u0026gt;Code Country        Year    Value\nAFG  Afghanistan    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;20\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;249\u0026lt;/span\u0026gt;\nAFG  Afghanistan    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1951\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;21\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;352\u0026lt;/span\u0026gt;\nAFG  Afghanistan    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1952\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;532\u0026lt;/span\u0026gt;\nAFG  Afghanistan    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1953\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;557\u0026lt;/span\u0026gt;\nAFG  Afghanistan    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;24\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;555\u0026lt;/span\u0026gt;\nALB  Albania        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1950\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;097\u0026lt;/span\u0026gt;\nALB  Albania        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1951\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;986\u0026lt;/span\u0026gt;\nALB  Albania        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1952\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;058\u0026lt;/span\u0026gt;\nALB  Albania        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1953\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;11\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;123\u0026lt;/span\u0026gt;\nALB  Albania        \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1954\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;12\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-punctuation\u0026quot;\u0026gt;,\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;246\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I have looked at and already tried using the \u0026lt;code\u0026gt;melt()\u0026lt;/code\u0026gt; and the \u0026lt;code\u0026gt;reshape()\u0026lt;/code\u0026gt; functions\nas some people were suggesting in similar questions.\nHowever, so far I only get messy results.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If it is possible I would like to do it with the \u0026lt;code\u0026gt;reshape()\u0026lt;/code\u0026gt; function since\nit looks a little bit nicer to handle.\u0026lt;/p\u0026gt;\n    ","slug":"reshaping-data.frame-from-wide-to-long-format-1657384678522","postType":"QUESTION","createdAt":"2022-07-09T16:37:58.000Z","updatedAt":"2022-07-09T16:37:58.000Z","tags":[{"id":440,"name":"dataframe","slug":"dataframe","createdAt":"2022-07-09T16:37:58.000Z","updatedAt":"2022-07-09T16:37:58.000Z","Questions_Tags":{"questionId":120,"tagId":440}}],"relatedQuestions":[{"title":"Reshaping data.frame from wide to long format","slug":"reshaping-data.frame-from-wide-to-long-format-1657384678522","tags":[{"name":"dataframe","Questions_Tags":{"questionId":120,"tagId":440}}]}]},"randomQuestions":[{"title":"Retrieve only the queried element in an object array in MongoDB collection","slug":"retrieve-only-the-queried-element-in-an-object-array-in-mongodb-collection-1657384890457"},{"title":"I just assigned a variable, but echo $variable shows something else","slug":"i-just-assigned-a-variable-but-echo-dollarvariable-shows-something-else-1657387574561"},{"title":"Are dictionaries ordered in Python 3.6+?","slug":"are-dictionaries-ordered-in-python-3.6+-1657387834234"},{"title":"Sorting an array of objects by property values","slug":"sorting-an-array-of-objects-by-property-values-1657387447490"},{"title":"How do I pass data between Activities in Android application?","slug":"how-do-i-pass-data-between-activities-in-android-application-1657384739839"},{"title":"Is there any way to kill a Thread?","slug":"is-there-any-way-to-kill-a-thread-1657387859831"},{"title":"Syntax error due to using a reserved word as a table or column name in MySQL","slug":"syntax-error-due-to-using-a-reserved-word-as-a-table-or-column-name-in-mysql-1657384689274"},{"title":"What does this symbol mean in JavaScript?","slug":"what-does-this-symbol-mean-in-javascript-1657387632971"},{"title":"The Use of Multiple JFrames: Good or Bad Practice? [closed]","slug":"the-use-of-multiple-jframes:-good-or-bad-practice-closed-1657384478184"},{"title":"jQuery Ajax File Upload","slug":"jquery-ajax-file-upload-1657387368970"},{"title":"How do I vertically center text with CSS? [duplicate]","slug":"how-do-i-vertically-center-text-with-css-duplicate-1657387645821"},{"title":"Ways to circumvent the same-origin policy","slug":"ways-to-circumvent-the-same-origin-policy-1657384763316"},{"title":"Query based on multiple where clauses in Firebase","slug":"query-based-on-multiple-where-clauses-in-firebase-1657387494547"},{"title":"Flexbox: center horizontally and vertically","slug":"flexbox:-center-horizontally-and-vertically-1657384587888"},{"title":"How do I set a variable to the output of a command in Bash?","slug":"how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-1657387250909"},{"title":"Use of 'prototype' vs. 'this' in JavaScript?","slug":"use-of-'prototype'-vs.-'this'-in-javascript-1657388117307"},{"title":"Iterating over dictionaries using 'for' loops","slug":"iterating-over-dictionaries-using-'for'-loops-1657388334481"},{"title":"How to test multiple variables for equality against a single value?","slug":"how-to-test-multiple-variables-for-equality-against-a-single-value-1657384358504"},{"title":"What does it mean to \"program to an interface\"?","slug":"what-does-it-mean-to-\"program-to-an-interface\"-1657384671665"},{"title":"Why can't an element with a z-index value cover its child?","slug":"why-can't-an-element-with-a-z-index-value-cover-its-child-1657387707187"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"reshaping-data.frame-from-wide-to-long-format-1657384678522"},"buildId":"xZs8haGjOP63QuDE0kxeX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>