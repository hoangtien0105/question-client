<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="bit-manipulation,bitwise-operators,solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052","name":"Questions"}}]}</script><title>How do I set, clear, and toggle a single bit? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="How do I set, clear, and toggle a bit?
    "/><meta property="og:title" content="How do I set, clear, and toggle a single bit? | Solution Checker"/><meta property="og:description" content="How do I set, clear, and toggle a bit?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How do I set, clear, and toggle a single bit?","text":"How do I set, clear, and toggle a bit?\n    ","answerCount":27,"upVoteCount":500,"suggestedAnswer":[{"text":"Setting a bit\nUse the bitwise OR operator (|) to set a bit.\nnumber |= 1UL &lt;&lt; n;\n\nThat will set the nth bit of number. n should be zero, if you want to set the 1st bit and so on upto n-1, if you want to set the nth bit.\nUse 1ULL if number is wider than unsigned long; promotion of 1UL &lt;&lt; n doesn&apos;t happen until after evaluating 1UL &lt;&lt; n where it&apos;s undefined behaviour to shift by more than the width of a long.  The same applies to all the rest of the examples.\nClearing a bit\nUse the bitwise AND operator (&amp;) to clear a bit.\nnumber &amp;= ~(1UL &lt;&lt; n);\n\nThat will clear the nth bit of number. You must invert the bit string with the bitwise NOT operator (~), then AND it.\nToggling a bit\nThe XOR operator (^) can be used to toggle a bit.\nnumber ^= 1UL &lt;&lt; n;\n\nThat will toggle the nth bit of number.\nChecking a bit\nYou didn&apos;t ask for this, but I might as well add it.\nTo check a bit, shift the number n to the right, then bitwise AND it:\nbit = (number &gt;&gt; n) &amp; 1U;\n\nThat will put the value of the nth bit of number into the variable bit.\nChanging the nth bit to x\nSetting the nth bit to either 1 or 0 can be achieved with the following on a 2&apos;s complement C++ implementation:\nnumber ^= (-x ^ number) &amp; (1UL &lt;&lt; n);\n\nBit n will be set if x is 1, and cleared if x is 0.  If x has some other value, you get garbage.  x = !!x will booleanize it to 0 or 1.\nTo make this independent of 2&apos;s complement negation behaviour (where -1 has all bits set, unlike on a 1&apos;s complement or sign/magnitude C++ implementation), use unsigned negation.\nnumber ^= (-(unsigned long)x ^ number) &amp; (1UL &lt;&lt; n);\n\nor\nunsigned long newbit = !!x;    // Also booleanize to force 0 or 1\nnumber ^= (-newbit ^ number) &amp; (1UL &lt;&lt; n);\n\nIt&apos;s generally a good idea to use unsigned types for portable bit manipulation.\nor\nnumber = (number &amp; ~(1UL &lt;&lt; n)) | (x &lt;&lt; n);\n\n(number &amp; ~(1UL &lt;&lt; n)) will clear the nth bit and (x &lt;&lt; n) will set the nth bit to x.\nIt&apos;s also generally a good idea to not to copy/paste code in general and so many people use preprocessor macros (like the community wiki answer further down) or some sort of encapsulation.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution1","@type":"Answer","upvoteCount":0},{"text":"Using the Standard C++ Library: std::bitset&lt;N&gt;.\n\nOr the Boost version: boost::dynamic_bitset.\n\nThere is no need to roll your own:\n\n#include &lt;bitset&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::bitset&lt;5&gt; x;\n\n    x[1] = 1;\n    x[2] = 0;\n    // Note x[0-4]  valid\n\n    std::cout &lt;&lt; x &lt;&lt; std::endl;\n}\n\n\n\n\n[Alpha:] &gt; ./a.out\n00010\n\n\nThe Boost version allows a runtime sized bitset compared with a standard library compile-time sized bitset.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution2","@type":"Answer","upvoteCount":0},{"text":"The other option is to use bit fields:\n\nstruct bits {\n    unsigned int a:1;\n    unsigned int b:1;\n    unsigned int c:1;\n};\n\nstruct bits mybits;\n\n\ndefines a 3-bit field (actually, it&apos;s three 1-bit felds). Bit operations now become a bit (haha) simpler:\n\nTo set or clear a bit:\n\nmybits.b = 1;\nmybits.c = 0;\n\n\nTo toggle a bit:\n\nmybits.a = !mybits.a;\nmybits.b = ~mybits.b;\nmybits.c ^= 1;  /* all work */\n\n\nChecking a bit:\n\nif (mybits.c)  //if mybits.c is non zero the next line below will execute\n\n\nThis only works with fixed-size bit fields. Otherwise you have to resort to the bit-twiddling techniques described in previous posts.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution3","@type":"Answer","upvoteCount":0},{"text":"I use macros defined in a header file to handle bit set and clear:\n/* a=target variable, b=bit number to act upon 0-n */\n#define BIT_SET(a,b) ((a) |= (1ULL&lt;&lt;(b)))\n#define BIT_CLEAR(a,b) ((a) &amp;= ~(1ULL&lt;&lt;(b)))\n#define BIT_FLIP(a,b) ((a) ^= (1ULL&lt;&lt;(b)))\n#define BIT_CHECK(a,b) (!!((a) &amp; (1ULL&lt;&lt;(b))))        // &apos;!!&apos; to make sure this returns 0 or 1\n\n#define BITMASK_SET(x, mask) ((x) |= (mask))\n#define BITMASK_CLEAR(x, mask) ((x) &amp;= (~(mask)))\n#define BITMASK_FLIP(x, mask) ((x) ^= (mask))\n#define BITMASK_CHECK_ALL(x, mask) (!(~(x) &amp; (mask)))\n#define BITMASK_CHECK_ANY(x, mask) ((x) &amp; (mask))\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution4","@type":"Answer","upvoteCount":0},{"text":"It is sometimes worth using an enum to name the bits:\n\nenum ThingFlags = {\n  ThingMask  = 0x0000,\n  ThingFlag0 = 1 &lt;&lt; 0,\n  ThingFlag1 = 1 &lt;&lt; 1,\n  ThingError = 1 &lt;&lt; 8,\n}\n\n\nThen use the names later on. I.e. write \n\nthingstate |= ThingFlag1;\nthingstate &amp;= ~ThingFlag0;\nif (thing &amp; ThingError) {...}\n\n\nto set, clear and test. This way you hide the magic numbers from the rest of your code. \n\nOther than that I endorse Jeremy&apos;s solution.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution5","@type":"Answer","upvoteCount":0},{"text":"From snip-c.zip&apos;s bitops.h:\n\n/*\n**  Bit set, clear, and test operations\n**\n**  public domain snippet by Bob Stout\n*/\n\ntypedef enum {ERROR = -1, FALSE, TRUE} LOGICAL;\n\n#define BOOL(x) (!(!(x)))\n\n#define BitSet(arg,posn) ((arg) | (1L &lt;&lt; (posn)))\n#define BitClr(arg,posn) ((arg) &amp; ~(1L &lt;&lt; (posn)))\n#define BitTst(arg,posn) BOOL((arg) &amp; (1L &lt;&lt; (posn)))\n#define BitFlp(arg,posn) ((arg) ^ (1L &lt;&lt; (posn)))\n\n\nOK, let&apos;s analyze things...\n\nThe common expression that you seem to be having problems with in all of these is &quot;(1L &lt;&lt; (posn))&quot;. All this does is create a mask with a single bit on\nand which will work with any integer type. The &quot;posn&quot; argument specifies the\nposition where you want the bit. If posn==0, then this expression will\nevaluate to:\n\n0000 0000 0000 0000 0000 0000 0000 0001 binary.\n\n\nIf posn==8, it will evaluate to:\n\n0000 0000 0000 0000 0000 0001 0000 0000 binary.\n\n\nIn other words, it simply creates a field of 0&apos;s with a 1 at the specified\nposition. The only tricky part is in the BitClr() macro where we need to set\na single 0 bit in a field of 1&apos;s. This is accomplished by using the 1&apos;s\ncomplement of the same expression as denoted by the tilde (~) operator.\n\nOnce the mask is created it&apos;s applied to the argument just as you suggest,\nby use of the bitwise and (&amp;), or (|), and xor (^) operators. Since the mask\nis of type long, the macros will work just as well on char&apos;s, short&apos;s, int&apos;s,\nor long&apos;s.\n\nThe bottom line is that this is a general solution to an entire class of\nproblems. It is, of course, possible and even appropriate to rewrite the\nequivalent of any of these macros with explicit mask values every time you\nneed one, but why do it? Remember, the macro substitution occurs in the\npreprocessor and so the generated code will reflect the fact that the values\nare considered constant by the compiler - i.e. it&apos;s just as efficient to use\nthe generalized macros as to &quot;reinvent the wheel&quot; every time you need to do\nbit manipulation. \n\nUnconvinced? Here&apos;s some test code - I used Watcom C with full optimization\nand without using _cdecl so the resulting disassembly would be as clean as\npossible:\n\n----[ TEST.C ]----------------------------------------------------------------\n\n#define BOOL(x) (!(!(x)))\n\n#define BitSet(arg,posn) ((arg) | (1L &lt;&lt; (posn)))\n#define BitClr(arg,posn) ((arg) &amp; ~(1L &lt;&lt; (posn)))\n#define BitTst(arg,posn) BOOL((arg) &amp; (1L &lt;&lt; (posn)))\n#define BitFlp(arg,posn) ((arg) ^ (1L &lt;&lt; (posn)))\n\nint bitmanip(int word)\n{\n      word = BitSet(word, 2);\n      word = BitSet(word, 7);\n      word = BitClr(word, 3);\n      word = BitFlp(word, 9);\n      return word;\n}\n\n\n----[ TEST.OUT (disassembled) ]-----------------------------------------------\n\nModule: C:\\BINK\\tst.c\nGroup: &apos;DGROUP&apos; CONST,CONST2,_DATA,_BSS\n\nSegment: _TEXT  BYTE   00000008 bytes  \n 0000  0c 84             bitmanip_       or      al,84H    ; set bits 2 and 7\n 0002  80 f4 02                          xor     ah,02H    ; flip bit 9 of EAX (bit 1 of AH)\n 0005  24 f7                             and     al,0f7H\n 0007  c3                                ret     \n\nNo disassembly errors\n\n\n----[ finis ]----------------------------------------------------------------- \n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution6","@type":"Answer","upvoteCount":0},{"text":"For the beginner I would like to explain a bit more with an example:\n\nExample:\n\nvalue is 0x55;\nbitnum : 3rd.\n\n\nThe &amp; operator is used check the bit:\n\n0101 0101\n&amp;\n0000 1000\n___________\n0000 0000 (mean 0: False). It will work fine if the third bit is 1 (then the answer will be True)\n\n\nToggle or Flip:\n\n0101 0101\n^\n0000 1000\n___________\n0101 1101 (Flip the third bit without affecting other bits)\n\n\n| operator: set the bit\n\n0101 0101\n|\n0000 1000\n___________\n0101 1101 (set the third bit without affecting other bits)\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution7","@type":"Answer","upvoteCount":0},{"text":"As this is tagged &quot;embedded&quot; I&apos;ll assume you&apos;re using a microcontroller. All of the above suggestions are valid &amp; work (read-modify-write, unions, structs, etc.).\n\nHowever, during a bout of oscilloscope-based debugging I was amazed to find that these methods have a considerable overhead in CPU cycles compared to writing a value directly to the micro&apos;s PORTnSET / PORTnCLEAR registers which makes a real difference where there are tight loops / high-frequency ISR&apos;s toggling pins.\n\nFor those unfamiliar: In my example, the micro has a general pin-state register PORTn which reflects the output pins, so doing PORTn |= BIT_TO_SET results in a read-modify-write to that register. However, the PORTnSET / PORTnCLEAR registers take a &apos;1&apos; to mean &quot;please make this bit 1&quot; (SET) or &quot;please make this bit zero&quot; (CLEAR) and a &apos;0&apos; to mean &quot;leave the pin alone&quot;. so, you end up with two port addresses depending whether you&apos;re setting or clearing the bit (not always convenient) but a much faster reaction and smaller assembled code.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution8","@type":"Answer","upvoteCount":0},{"text":"Here&apos;s my favorite bit arithmetic macro, which works for any type of unsigned integer array from unsigned char up to size_t (which is the biggest type that should be efficient to work with):\n\n#define BITOP(a,b,op) \\\n ((a)[(size_t)(b)/(8*sizeof *(a))] op ((size_t)1&lt;&lt;((size_t)(b)%(8*sizeof *(a)))))\n\n\nTo set a bit:\n\nBITOP(array, bit, |=);\n\n\nTo clear a bit:\n\nBITOP(array, bit, &amp;=~);\n\n\nTo toggle a bit:\n\nBITOP(array, bit, ^=);\n\n\nTo test a bit:\n\nif (BITOP(array, bit, &amp;)) ...\n\n\netc.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution9","@type":"Answer","upvoteCount":0},{"text":"The bitfield approach has other advantages in the embedded arena. You can define a struct that maps directly onto the bits in a particular hardware register.\n\nstruct HwRegister {\n    unsigned int errorFlag:1;  // one-bit flag field\n    unsigned int Mode:3;       // three-bit mode field\n    unsigned int StatusCode:4;  // four-bit status code\n};\n\nstruct HwRegister CR3342_AReg;\n\n\nYou need to be aware of the bit packing order - I think it&apos;s MSB first, but this may be implementation-dependent. Also, verify how your compiler handlers fields crossing byte boundaries.\n\nYou can then read, write, test the individual values as before.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution10","@type":"Answer","upvoteCount":0},{"text":"\n  Let suppose few things first\n  num = 55 Integer to perform bitwise operations (set, get, clear, toggle).\n  n = 4 0 based bit position to perform bitwise operations.   \n\n\nHow to get a bit?\n\n\nTo get the nth bit of num right shift num, n times. Then perform bitwise AND &amp; with 1.\n\n\nbit = (num &gt;&gt; n) &amp; 1;\n\n\nHow it works?\n\n       0011 0111 (55 in decimal)\n    &gt;&gt;         4 (right shift 4 times)\n-----------------\n       0000 0011\n     &amp; 0000 0001 (1 in decimal)\n-----------------\n    =&gt; 0000 0001 (final result)\n\n\nHow to set a bit?\n\n\nTo set a particular bit of number. Left shift 1 n times. Then perform bitwise OR | operation with num.\n\n\nnum |= (1 &lt;&lt; n);    // Equivalent to; num = (1 &lt;&lt; n) | num;\n\n\nHow it works?\n\n       0000 0001 (1 in decimal)\n    &lt;&lt;         4 (left shift 4 times)\n-----------------\n       0001 0000\n     | 0011 0111 (55 in decimal)\n-----------------\n    =&gt; 0001 0000 (final result)\n\n\nHow to clear a bit?\n\n\nLeft shift 1, n times i.e. 1 &lt;&lt; n.\nPerform bitwise complement with the above result. So that the nth bit becomes unset and rest of bit becomes set i.e. ~ (1 &lt;&lt; n).\nFinally, perform bitwise AND &amp; operation with the above result and num. The above three steps together can be written as num &amp; (~ (1 &lt;&lt; n));\n\n\n\n\nnum &amp;= (~(1 &lt;&lt; n));    // Equivalent to; num = num &amp; (~(1 &lt;&lt; n));\n\n\nHow it works?\n\n       0000 0001 (1 in decimal)\n    &lt;&lt;         4 (left shift 4 times)\n-----------------\n     ~ 0001 0000\n-----------------\n       1110 1111\n     &amp; 0011 0111 (55 in decimal)\n-----------------\n    =&gt; 0010 0111 (final result)\n\n\nHow to toggle a bit?\n\nTo toggle a bit we use bitwise XOR ^ operator. Bitwise XOR operator evaluates to 1 if corresponding bit of both operands are different, otherwise evaluates to 0.  \n\nWhich means to toggle a bit, we need to perform XOR operation with the bit you want to toggle and 1. \n\nnum ^= (1 &lt;&lt; n);    // Equivalent to; num = num ^ (1 &lt;&lt; n);\n\n\nHow it works? \n\n\nIf the bit to toggle is 0 then, 0 ^ 1 =&gt; 1.  \nIf the bit to toggle is 1 then, 1 ^ 1 =&gt; 0.\n\n\n       0000 0001 (1 in decimal)\n    &lt;&lt;         4 (left shift 4 times)\n-----------------\n       0001 0000\n     ^ 0011 0111 (55 in decimal)\n-----------------\n    =&gt; 0010 0111 (final result)\n\n\nRecommended reading - Bitwise operator exercises\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution11","@type":"Answer","upvoteCount":0},{"text":"Check a bit at an arbitrary location in a variable of arbitrary type:\n\n#define bit_test(x, y)  ( ( ((const char*)&amp;(x))[(y)&gt;&gt;3] &amp; 0x80 &gt;&gt; ((y)&amp;0x07)) &gt;&gt; (7-((y)&amp;0x07) ) )\n\n\nSample usage:\n\nint main(void)\n{\n    unsigned char arr[8] = { 0x01, 0x23, 0x45, 0x67, 0x89, 0xAB, 0xCD, 0xEF };\n\n    for (int ix = 0; ix &lt; 64; ++ix)\n        printf(&quot;bit %d is %d\\n&quot;, ix, bit_test(arr, ix));\n\n    return 0;\n}\n\n\nNotes:\nThis is designed to be fast (given its flexibility) and non-branchy.  It results in efficient SPARC machine code when compiled Sun Studio 8; I&apos;ve also tested it using MSVC++ 2008 on amd64.  It&apos;s possible to make similar macros for setting and clearing bits.  The key difference of this solution compared with many others here is that it works for any location in pretty much any type of variable.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution12","@type":"Answer","upvoteCount":0},{"text":"More general, for arbitrary sized bitmaps:\n\n#define BITS 8\n#define BIT_SET(  p, n) (p[(n)/BITS] |=  (0x80&gt;&gt;((n)%BITS)))\n#define BIT_CLEAR(p, n) (p[(n)/BITS] &amp;= ~(0x80&gt;&gt;((n)%BITS)))\n#define BIT_ISSET(p, n) (p[(n)/BITS] &amp;   (0x80&gt;&gt;((n)%BITS)))\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution13","@type":"Answer","upvoteCount":0},{"text":"This program is to change any data bit from 0 to 1 or 1 to 0:\n\n{\n    unsigned int data = 0x000000F0;\n    int bitpos = 4;\n    int bitvalue = 1;\n    unsigned int bit = data;\n    bit = (bit&gt;&gt;bitpos)&amp;0x00000001;\n    int invbitvalue = 0x00000001&amp;(~bitvalue);\n    printf(&quot;%x\\n&quot;,bit);\n\n    if (bitvalue == 0)\n    {\n        if (bit == 0)\n            printf(&quot;%x\\n&quot;, data);\n        else\n        {\n             data = (data^(invbitvalue&lt;&lt;bitpos));\n             printf(&quot;%x\\n&quot;, data);\n        }\n    }\n    else\n    {\n        if (bit == 1)\n            printf(&quot;elseif %x\\n&quot;, data);\n        else\n        {\n            data = (data|(bitvalue&lt;&lt;bitpos));\n            printf(&quot;else %x\\n&quot;, data);\n        }\n    }\n}\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution14","@type":"Answer","upvoteCount":0},{"text":"If you&apos;re doing a lot of bit twiddling you might want to use masks which will make the whole thing quicker. The following functions are very fast and are still flexible (they allow bit twiddling in bit maps of any size).\n\nconst unsigned char TQuickByteMask[8] =\n{\n   0x01, 0x02, 0x04, 0x08,\n   0x10, 0x20, 0x40, 0x80,\n};\n\n\n/** Set bit in any sized bit mask.\n *\n * @return    none\n *\n * @param     bit    - Bit number.\n * @param     bitmap - Pointer to bitmap.\n */\nvoid TSetBit( short bit, unsigned char *bitmap)\n{\n    short n, x;\n\n    x = bit / 8;        // Index to byte.\n    n = bit % 8;        // Specific bit in byte.\n\n    bitmap[x] |= TQuickByteMask[n];        // Set bit.\n}\n\n\n/** Reset bit in any sized mask.\n *\n * @return  None\n *\n * @param   bit    - Bit number.\n * @param   bitmap - Pointer to bitmap.\n */\nvoid TResetBit( short bit, unsigned char *bitmap)\n{\n    short n, x;\n\n    x = bit / 8;        // Index to byte.\n    n = bit % 8;        // Specific bit in byte.\n\n    bitmap[x] &amp;= (~TQuickByteMask[n]);    // Reset bit.\n}\n\n\n/** Toggle bit in any sized bit mask.\n *\n * @return   none\n *\n * @param   bit    - Bit number.\n * @param   bitmap - Pointer to bitmap.\n */\nvoid TToggleBit( short bit, unsigned char *bitmap)\n{\n    short n, x;\n\n    x = bit / 8;        // Index to byte.\n    n = bit % 8;        // Specific bit in byte.\n\n    bitmap[x] ^= TQuickByteMask[n];        // Toggle bit.\n}\n\n\n/** Checks specified bit.\n *\n * @return  1 if bit set else 0.\n *\n * @param   bit    - Bit number.\n * @param   bitmap - Pointer to bitmap.\n */\nshort TIsBitSet( short bit, const unsigned char *bitmap)\n{\n    short n, x;\n\n    x = bit / 8;    // Index to byte.\n    n = bit % 8;    // Specific bit in byte.\n\n    // Test bit (logigal AND).\n    if (bitmap[x] &amp; TQuickByteMask[n])\n        return 1;\n\n    return 0;\n}\n\n\n/** Checks specified bit.\n *\n * @return  1 if bit reset else 0.\n *\n * @param   bit    - Bit number.\n * @param   bitmap - Pointer to bitmap.\n */\nshort TIsBitReset( short bit, const unsigned char *bitmap)\n{\n    return TIsBitSet(bit, bitmap) ^ 1;\n}\n\n\n/** Count number of bits set in a bitmap.\n *\n * @return   Number of bits set.\n *\n * @param    bitmap - Pointer to bitmap.\n * @param    size   - Bitmap size (in bits).\n *\n * @note    Not very efficient in terms of execution speed. If you are doing\n *        some computationally intense stuff you may need a more complex\n *        implementation which would be faster (especially for big bitmaps).\n *        See (http://graphics.stanford.edu/~seander/bithacks.html).\n */\nint TCountBits( const unsigned char *bitmap, int size)\n{\n    int i, count = 0;\n\n    for (i=0; i&lt;size; i++)\n        if (TIsBitSet(i, bitmap))\n            count++;\n\n    return count;\n}\n\n\nNote, to set bit &apos;n&apos; in a 16 bit integer you do the following:\n\nTSetBit( n, &amp;my_int);\n\n\nIt&apos;s up to you to ensure that the bit number is within the range of the bit map that you pass. Note that for little endian processors that bytes, words, dwords, qwords, etc., map correctly to each other in memory (main reason that little endian processors are &apos;better&apos; than big-endian processors, ah, I feel a flame war coming on...).\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution15","@type":"Answer","upvoteCount":0},{"text":"Use this:\n\nint ToggleNthBit ( unsigned char n, int num )\n{\n    if(num &amp; (1 &lt;&lt; n))\n        num &amp;= ~(1 &lt;&lt; n);\n    else\n        num |= (1 &lt;&lt; n);\n\n    return num;\n}\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution16","@type":"Answer","upvoteCount":0},{"text":"Expanding on the bitset answer:\n\n#include &lt;iostream&gt;\n#include &lt;bitset&gt;\n#include &lt;string&gt;\n\nusing namespace std;\nint main() {\n  bitset&lt;8&gt; byte(std::string(&quot;10010011&quot;);\n\n  // Set Bit\n  byte.set(3); // 10010111\n\n  // Clear Bit\n  byte.reset(2); // 10010101\n\n  // Toggle Bit\n  byte.flip(7); // 00010101\n\n  cout &lt;&lt; byte &lt;&lt; endl;\n\n  return 0;\n}\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution17","@type":"Answer","upvoteCount":0},{"text":"If you want to perform this all operation with C programming in the Linux kernel then I suggest to use standard APIs of the Linux kernel.\n\nSee https://www.kernel.org/doc/htmldocs/kernel-api/ch02s03.html\n\nset_bit  Atomically set a bit in memory\nclear_bit  Clears a bit in memory\nchange_bit  Toggle a bit in memory\ntest_and_set_bit  Set a bit and return its old value\ntest_and_clear_bit  Clear a bit and return its old value\ntest_and_change_bit  Change a bit and return its old value\ntest_bit  Determine whether a bit is set\n\n\nNote: Here the whole operation happens in a single step. So these all are  guaranteed to be atomic even on SMP computers and are useful\nto keep coherence across processors.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution18","@type":"Answer","upvoteCount":0},{"text":"Visual C 2010, and perhaps many other compilers, have direct support for boolean operations built in. A bit has two possible values, just like a boolean, so we can use booleans instead - even if they take up more space than a single bit in memory in this representation. This works, even the sizeof() operator works properly. \n\nbool    IsGph[256], IsNotGph[256];\n\n//  Initialize boolean array to detect printable characters\nfor(i=0; i&lt;sizeof(IsGph); i++)  {\n    IsGph[i] = isgraph((unsigned char)i);\n}\n\n\nSo, to your question, IsGph[i] =1, or IsGph[i] =0 make setting and clearing bools easy.\n\nTo find unprintable characters:\n\n//  Initialize boolean array to detect UN-printable characters, \n//  then call function to toggle required bits true, while initializing a 2nd\n//  boolean array as the complement of the 1st.\nfor(i=0; i&lt;sizeof(IsGph); i++)  {\n    if(IsGph[i])    {\n         IsNotGph[i] = 0;\n    }   else   {\n         IsNotGph[i] = 1;\n    }\n}\n\n\nNote there is nothing &quot;special&quot; about this code. It treats a bit like an integer - which technically, it is. A 1 bit integer that can hold 2 values, and 2 values only.\n\nI once used this approach to find duplicate loan records, where loan_number was the ISAM key, using the 6-digit loan number as an index into the bit array. Savagely fast, and after 8 months, proved that the mainframe system we were getting the data from was in fact malfunctioning. The simplicity of bit arrays makes confidence in their correctness very high - vs a searching approach for example.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution19","@type":"Answer","upvoteCount":0},{"text":"int set_nth_bit(int num, int n){    \n    return (num | 1 &lt;&lt; n);\n}\n\nint clear_nth_bit(int num, int n){    \n    return (num &amp; ~( 1 &lt;&lt; n));\n}\n\nint toggle_nth_bit(int num, int n){    \n    return num ^ (1 &lt;&lt; n);\n}\n\nint check_nth_bit(int num, int n){    \n    return num &amp; (1 &lt;&lt; n);\n}\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution20","@type":"Answer","upvoteCount":0},{"text":"Here are some macros I use:\n\nSET_FLAG(Status, Flag)            ((Status) |= (Flag))\nCLEAR_FLAG(Status, Flag)          ((Status) &amp;= ~(Flag))\nINVALID_FLAGS(ulFlags, ulAllowed) ((ulFlags) &amp; ~(ulAllowed))\nTEST_FLAGS(t,ulMask, ulBit)       (((t)&amp;(ulMask)) == (ulBit))\nIS_FLAG_SET(t,ulMask)             TEST_FLAGS(t,ulMask,ulMask)\nIS_FLAG_CLEAR(t,ulMask)           TEST_FLAGS(t,ulMask,0)\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution21","@type":"Answer","upvoteCount":0},{"text":"\n  How do you set, clear, and toggle a single bit?\n\n\nTo address a common coding pitfall when attempting to form the mask:\n1 is not always wide enough\n\nWhat problems happen when number is a wider type than 1?\nx may be too great for the shift 1 &lt;&lt; x leading to undefined behavior (UB).  Even if x is not too great, ~ may not flip enough most-significant-bits.\n\n// assume 32 bit int/unsigned\nunsigned long long number = foo();\n\nunsigned x = 40; \nnumber |= (1 &lt;&lt; x);  // UB\nnumber ^= (1 &lt;&lt; x);  // UB\nnumber &amp;= ~(1 &lt;&lt; x); // UB\n\nx = 10;\nnumber &amp;= ~(1 &lt;&lt; x); // Wrong mask, not wide enough\n\n\n\n\nTo insure 1 is wide enough:\n\nCode could use 1ull or pedantically (uintmax_t)1 and let the compiler optimize.\n\nnumber |= (1ull &lt;&lt; x);\nnumber |= ((uintmax_t)1 &lt;&lt; x);\n\n\nOr cast - which makes for coding/review/maintenance issues keeping the cast correct and up-to-date.\n\nnumber |= (type_of_number)1 &lt;&lt; x;\n\n\nOr gently promote the 1 by forcing a math operation that is as least as wide as the type of number.\n\nnumber |= (number*0 + 1) &lt;&lt; x;\n\n\n\n\nAs with most bit manipulations, best to work with unsigned types rather than signed ones\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution22","@type":"Answer","upvoteCount":0},{"text":"This program is based out of @Jeremy&apos;s above solution. If someone wish to quickly play around.\n\npublic class BitwiseOperations {\n\n    public static void main(String args[]) {\n\n        setABit(0, 4); // set the 4th bit, 0000 -&gt; 1000 [8]\n        clearABit(16, 5); // clear the 5th bit, 10000 -&gt; 00000 [0]\n        toggleABit(8, 4); // toggle the 4th bit, 1000 -&gt; 0000 [0]\n        checkABit(8,4); // check the 4th bit 1000 -&gt; true \n    }\n\n    public static void setABit(int input, int n) {\n        input = input | ( 1 &lt;&lt; n-1);\n        System.out.println(input);\n    }\n\n\n    public static void clearABit(int input, int n) {\n        input = input &amp; ~(1 &lt;&lt; n-1);\n        System.out.println(input);\n    }\n\n    public static void toggleABit(int input, int n) {\n        input = input ^ (1 &lt;&lt; n-1);\n        System.out.println(input);\n    }\n\n    public static void checkABit(int input, int n) {\n        boolean isSet = ((input &gt;&gt; n-1) &amp; 1) == 1; \n        System.out.println(isSet);\n    }\n}\n\n\nOutput :\n8\n0\n0\ntrue\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution23","@type":"Answer","upvoteCount":0},{"text":"A templated version (put in a header file) with support for changing multiple bits (works on AVR microcontrollers btw):\nnamespace bit {\n  template &lt;typename T1, typename T2&gt;\n  constexpr inline T1 bitmask(T2 bit) \n  {return (T1)1 &lt;&lt; bit;}\n  template &lt;typename T1, typename T3, typename ...T2&gt;\n  constexpr inline T1 bitmask(T3 bit, T2 ...bits) \n  {return ((T1)1 &lt;&lt; bit) | bitmask&lt;T1&gt;(bits...);}\n\n  /** Set these bits (others retain their state) */\n  template &lt;typename T1, typename ...T2&gt;\n  constexpr inline void set (T1 &amp;variable, T2 ...bits) \n  {variable |= bitmask&lt;T1&gt;(bits...);}\n  /** Set only these bits (others will be cleared) */\n  template &lt;typename T1, typename ...T2&gt;\n  constexpr inline void setOnly (T1 &amp;variable, T2 ...bits) \n  {variable = bitmask&lt;T1&gt;(bits...);}\n  /** Clear these bits (others retain their state) */\n  template &lt;typename T1, typename ...T2&gt;\n  constexpr inline void clear (T1 &amp;variable, T2 ...bits) \n  {variable &amp;= ~bitmask&lt;T1&gt;(bits...);}\n  /** Flip these bits (others retain their state) */\n  template &lt;typename T1, typename ...T2&gt;\n  constexpr inline void flip (T1 &amp;variable, T2 ...bits) \n  {variable ^= bitmask&lt;T1&gt;(bits...);}\n  /** Check if any of these bits are set */\n  template &lt;typename T1, typename ...T2&gt;\n  constexpr inline bool isAnySet(const T1 &amp;variable, T2 ...bits) \n  {return variable &amp; bitmask&lt;T1&gt;(bits...);}\n  /** Check if all these bits are set */\n  template &lt;typename T1, typename ...T2&gt;\n  constexpr inline bool isSet (const T1 &amp;variable, T2 ...bits) \n  {return ((variable &amp; bitmask&lt;T1&gt;(bits...)) == bitmask&lt;T1&gt;(bits...));}\n  /** Check if all these bits are not set */\n  template &lt;typename T1, typename ...T2&gt;\n  constexpr inline bool isNotSet (const T1 &amp;variable, T2 ...bits) \n  {return ((variable &amp; bitmask&lt;T1&gt;(bits...)) != bitmask&lt;T1&gt;(bits...));}\n}\n\nExample of use:\n#include &lt;iostream&gt;\n#include &lt;bitset&gt; // for console output of binary values\n\n// and include the code above of course\n\nusing namespace std;\n\nint main() {\n  uint8_t v = 0b1111&apos;1100;\n  bit::set(v, 0);\n  cout &lt;&lt; bitset&lt;8&gt;(v) &lt;&lt; endl;\n\n  bit::clear(v, 0,1);\n  cout &lt;&lt; bitset&lt;8&gt;(v) &lt;&lt; endl;\n\n  bit::flip(v, 0,1);\n  cout &lt;&lt; bitset&lt;8&gt;(v) &lt;&lt; endl;\n\n  bit::clear(v, 0,1,2,3,4,5,6,7);\n  cout &lt;&lt; bitset&lt;8&gt;(v) &lt;&lt; endl;\n\n  bit::flip(v, 0,7);\n  cout &lt;&lt; bitset&lt;8&gt;(v) &lt;&lt; endl;\n}\n\nBTW: It turns out that constexpr and inline is not used if not sending the optimizer argument (e.g.: -O3) to the compiler. Feel free to try the code at https://godbolt.org/ and look at the ASM output.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution24","@type":"Answer","upvoteCount":0},{"text":"Here is a routine in C to perform the basic bitwise operations:\n#define INT_BIT (unsigned int) (sizeof(unsigned int) * 8U) //number of bits in unsigned int\n\nint main(void)\n{\n    \n    unsigned int k = 5; //k is the bit position; here it is the 5th bit from the LSb (0th bit)\n    \n    unsigned int regA = 0x00007C7C; //we perform bitwise operations on regA\n    \n    regA |= (1U &lt;&lt; k);    //Set kth bit\n    \n    regA &amp;= ~(1U &lt;&lt; k);   //Clear kth bit\n    \n    regA ^= (1U &lt;&lt; k);    //Toggle kth bit\n    \n    regA = (regA &lt;&lt; k) | regA &gt;&gt; (INT_BIT - k); //Rotate left by k bits\n    \n    regA = (regA &gt;&gt; k) | regA &lt;&lt; (INT_BIT - k); //Rotate right by k bits\n\n    return 0;   \n}\n\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution25","@type":"Answer","upvoteCount":0},{"text":"Setting the nth bit to x (bit value) without using -1\nSometimes when you are not sure what -1 or the like will result in, you may wish to set the nth bit without using -1:\nnumber = (((number | (1 &lt;&lt; n)) ^ (1 &lt;&lt; n))) | (x &lt;&lt; n);\n\nExplanation: ((number | (1 &lt;&lt; n) sets the nth bit to 1 (where | denotes bitwise OR), then with (...) ^ (1 &lt;&lt; n) we set the nth bit to 0, and finally with (...) | x &lt;&lt; n) we set the nth bit that was 0, to (bit value) x.\nThis also works in golang.\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution26","@type":"Answer","upvoteCount":0},{"text":"Try one of these functions in the C language to change n bit:\n\nchar bitfield;\n\n// Start at 0th position\n\nvoid chang_n_bit(int n, int value)\n{\n    bitfield = (bitfield | (1 &lt;&lt; n)) &amp; (~( (1 &lt;&lt; n) ^ (value &lt;&lt; n) ));\n}\n\n\nOr\n\nvoid chang_n_bit(int n, int value)\n{\n    bitfield = (bitfield | (1 &lt;&lt; n)) &amp; ((value &lt;&lt; n) | ((~0) ^ (1 &lt;&lt; n)));\n}\n\n\nOr\n\nvoid chang_n_bit(int n, int value)\n{\n    if(value)\n        bitfield |= 1 &lt;&lt; n;\n    else\n        bitfield &amp;= ~0 ^ (1 &lt;&lt; n);\n}\n\nchar get_n_bit(int n)\n{\n    return (bitfield &amp; (1 &lt;&lt; n)) ? 1 : 0;\n}\n\n    ","url":"https://solutionschecker.com/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#solution27","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><script id="google-analytics" data-nscript="beforeInteractive">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NXVLL8B');</script><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-862498b6ec7885c3.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-47289857226115f9.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_buildManifest.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_ssgManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXVLL8B"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-do-i-set-clear-and-toggle-a-single-bit-1657388227052"><h1>How do I set, clear, and toggle a single bit?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div><div class="question-content mt-5">
                
<p>How do I set, clear, and toggle a bit?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li><li class="pagination-solution-item"><span data-id="#solution21" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">21</span></li><li class="pagination-solution-item"><span data-id="#solution22" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">22</span></li><li class="pagination-solution-item"><span data-id="#solution23" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">23</span></li><li class="pagination-solution-item"><span data-id="#solution24" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">24</span></li><li class="pagination-solution-item"><span data-id="#solution25" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">25</span></li><li class="pagination-solution-item"><span data-id="#solution26" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">26</span></li><li class="pagination-solution-item"><span data-id="#solution27" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">27</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Setting a bit</h1>
<p>Use the bitwise OR operator (<code>|</code>) to set a bit.</p>
<pre class="default s-code-block"><code class="hljs language-bash">number |= 1UL &lt;&lt; <span class="hljs-string">n;
</span></code></pre>
<p>That will set the <code>n</code>th bit of <code>number</code>. <code>n</code> should be zero, if you want to set the <code>1</code>st bit and so on upto <code>n-1</code>, if you want to set the <code>n</code>th bit.</p>
<p>Use <code>1ULL</code> if <code>number</code> is wider than <code>unsigned long</code>; promotion of <code>1UL &lt;&lt; n</code> doesn't happen until after evaluating <code>1UL &lt;&lt; n</code> where it's undefined behaviour to shift by more than the width of a <code>long</code>.  The same applies to all the rest of the examples.</p>
<h1>Clearing a bit</h1>
<p>Use the bitwise AND operator (<code>&amp;</code>) to clear a bit.</p>
<pre class="default s-code-block"><code class="hljs language-bash">number &amp;= ~(1UL &lt;&lt; <span class="hljs-string">n);
</span></code></pre>
<p>That will clear the <code>n</code>th bit of <code>number</code>. You must invert the bit string with the bitwise NOT operator (<code>~</code>), then AND it.</p>
<h1>Toggling a bit</h1>
<p>The XOR operator (<code>^</code>) can be used to toggle a bit.</p>
<pre class="default s-code-block"><code class="hljs language-bash">number ^= 1UL &lt;&lt; <span class="hljs-string">n;
</span></code></pre>
<p>That will toggle the <code>n</code>th bit of <code>number</code>.</p>
<h1>Checking a bit</h1>
<p>You didn't ask for this, but I might as well add it.</p>
<p>To check a bit, shift the number n to the right, then bitwise AND it:</p>
<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">bit</span> = (number &gt;&gt; n) &amp; <span class="hljs-number">1</span>U<span class="hljs-comment">;</span>
</code></pre>
<p>That will put the value of the <code>n</code>th bit of <code>number</code> into the variable <code>bit</code>.</p>
<h1>Changing the <em>n</em>th bit to <em>x</em></h1>
<p>Setting the <code>n</code>th bit to either <code>1</code> or <code>0</code> can be achieved with the following on a 2's complement C++ implementation:</p>
<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-built_in">number</span> ^= (-x ^ <span class="hljs-built_in">number</span>) &amp; (1UL &lt;&lt; n);
</code></pre>
<p>Bit <code>n</code> will be set if <code>x</code> is <code>1</code>, and cleared if <code>x</code> is <code>0</code>.  If <code>x</code> has some other value, you get garbage.  <code>x = !!x</code> will booleanize it to 0 or 1.</p>
<p>To make this independent of 2's complement negation behaviour (where <code>-1</code> has all bits set, unlike on a 1's complement or sign/magnitude C++ implementation), use unsigned negation.</p>
<pre class="default s-code-block"><code class="hljs language-cpp">number ^= (-(<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span>)x ^ number) &amp; (<span class="hljs-number">1UL</span> &lt;&lt; n);
</code></pre>
<p>or</p>
<pre class="default s-code-block"><code class="hljs language-cpp"><span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> newbit = !!x;    <span class="hljs-comment">// Also booleanize to force 0 or 1</span>
number ^= (-newbit ^ number) &amp; (<span class="hljs-number">1UL</span> &lt;&lt; n);
</code></pre>
<p>It's generally a good idea to use unsigned types for portable bit manipulation.</p>
<p>or</p>
<pre class="default s-code-block"><code class="hljs language-bash">number = (number &amp; ~(1UL &lt;&lt; <span class="hljs-string">n)) | (x &lt;&lt; n</span>);
</code></pre>
<p><code>(number &amp; ~(1UL &lt;&lt; n))</code> will clear the <code>n</code>th bit and <code>(x &lt;&lt; n)</code> will set the <code>n</code>th bit to <code>x</code>.</p>
<p>It's also generally a good idea to not to copy/paste code in general and so many people use preprocessor macros (like <a href="https://stackoverflow.com/a/263738/52074">the community wiki answer further down</a>) or some sort of encapsulation.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Using the Standard C++ Library: <a href="http://en.cppreference.com/w/cpp/utility/bitset" rel="noreferrer"><code>std::bitset&lt;N&gt;</code></a>.</p>

<p>Or the <a href="http://en.wikipedia.org/wiki/Boost_%28C%2B%2B_libraries%29" rel="noreferrer">Boost</a> version: <a href="http://www.boost.org/doc/libs/release/libs/dynamic_bitset/dynamic_bitset.html" rel="noreferrer"><code>boost::dynamic_bitset</code></a>.</p>

<p>There is no need to roll your own:</p>

<pre class="default s-code-block"><code class="hljs language-cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bitset&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    std::bitset&lt;5&gt; x;

    x[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;
    x[<span class="hljs-number">2</span>] = <span class="hljs-number">0</span>;
    <span class="hljs-comment">// Note x[0-4]  valid</span>

    std::cout &lt;&lt; x &lt;&lt; std::endl;
}
</code></pre>

<hr>

<pre class="default s-code-block"><code class="hljs language-csharp">[<span class="hljs-meta">Alpha:</span>] &gt; ./a.<span class="hljs-keyword">out</span>
<span class="hljs-number">00010</span>
</code></pre>

<p>The Boost version allows a runtime sized bitset compared with a <a href="https://en.wikipedia.org/wiki/C%2B%2B_Standard_Library" rel="noreferrer">standard library</a> compile-time sized bitset.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The other option is to use bit fields:</p>

<pre class="default s-code-block"><code class="hljs language-cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">bits</span> {
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> a:<span class="hljs-number">1</span>;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> b:<span class="hljs-number">1</span>;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> c:<span class="hljs-number">1</span>;
};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">bits</span> mybits;
</code></pre>

<p>defines a 3-bit field (actually, it's three 1-bit felds). Bit operations now become a bit (haha) simpler:</p>

<p>To set or clear a bit:</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">mybits.b</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
<span class="hljs-attr">mybits.c</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
</code></pre>

<p>To toggle a bit:</p>

<pre class="default s-code-block"><code class="hljs language-csharp">mybits.a = !mybits.a;
mybits.b = ~mybits.b;
mybits.c ^= <span class="hljs-number">1</span>;  <span class="hljs-comment">/* all work */</span>
</code></pre>

<p>Checking a bit:</p>

<pre class="default s-code-block"><code class="hljs language-scss">if (mybits.c)  <span class="hljs-comment">//if mybits.c is non zero the next line below will execute</span>
</code></pre>

<p>This only works with fixed-size bit fields. Otherwise you have to resort to the bit-twiddling techniques described in previous posts.</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I use macros defined in a header file to handle bit set and clear:</p>
<pre class="default s-code-block"><code class="hljs language-cpp"><span class="hljs-comment">/* a=target variable, b=bit number to act upon 0-n */</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BIT_SET(a,b) ((a) |= (1ULL&lt;&lt;(b)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BIT_CLEAR(a,b) ((a) &amp;= ~(1ULL&lt;&lt;(b)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BIT_FLIP(a,b) ((a) ^= (1ULL&lt;&lt;(b)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BIT_CHECK(a,b) (!!((a) &amp; (1ULL&lt;&lt;(b))))        <span class="hljs-comment">// '!!' to make sure this returns 0 or 1</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> BITMASK_SET(x, mask) ((x) |= (mask))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BITMASK_CLEAR(x, mask) ((x) &amp;= (~(mask)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BITMASK_FLIP(x, mask) ((x) ^= (mask))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BITMASK_CHECK_ALL(x, mask) (!(~(x) &amp; (mask)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BITMASK_CHECK_ANY(x, mask) ((x) &amp; (mask))</span>
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It is sometimes worth using an <code>enum</code> to <em>name</em> the bits:</p>

<pre class="default s-code-block"><code class="hljs language-bash">enum ThingFlags = {
  ThingMask  = 0x0000,
  ThingFlag0 = 1 &lt;&lt; <span class="hljs-string">0,
  ThingFlag1 = 1 &lt;&lt; 1,
  ThingError = 1 &lt;&lt; 8,
}
</span></code></pre>

<p>Then use the <em>names</em> later on. I.e. write </p>

<pre class="default s-code-block"><code class="hljs language-erlang">thingstate |= ThingFlag1;
thingstate &amp;= ~ThingFlag0;
<span class="hljs-function"><span class="hljs-title">if</span> <span class="hljs-params">(thing &amp; ThingError)</span> {...}
</span></code></pre>

<p>to set, clear and test. This way you hide the magic numbers from the rest of your code. </p>

<p>Other than that I endorse Jeremy's solution.</p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>From <a href="http://snippets.org/code/temp/snip-c.zip" rel="noreferrer">snip-c.zip</a>'s bitops.h:</h2>

<pre class="default s-code-block"><code class="hljs language-objectivec"><span class="hljs-comment">/*
**  Bit set, clear, and test operations
**
**  public domain snippet by Bob Stout
*/</span>

<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">enum</span> {ERROR = <span class="hljs-number">-1</span>, <span class="hljs-literal">FALSE</span>, <span class="hljs-literal">TRUE</span>} LOGICAL;

<span class="hljs-meta">#<span class="hljs-keyword">define</span> BOOL(x) (!(!(x)))</span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> BitSet(arg,posn) ((arg) | (1L &lt;&lt; (posn)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BitClr(arg,posn) ((arg) &amp; ~(1L &lt;&lt; (posn)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BitTst(arg,posn) BOOL((arg) &amp; (1L &lt;&lt; (posn)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BitFlp(arg,posn) ((arg) ^ (1L &lt;&lt; (posn)))</span>
</code></pre>

<p>OK, let's analyze things...</p>

<p>The common expression that you seem to be having problems with in all of these is "(1L &lt;&lt; (posn))". All this does is create a mask with a single bit on
and which will work with any integer type. The "posn" argument specifies the
position where you want the bit. If posn==0, then this expression will
evaluate to:</p>

<pre class="default s-code-block"><code class="hljs language-yaml"><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0001 </span><span class="hljs-string">binary.</span>
</code></pre>

<p>If posn==8, it will evaluate to:</p>

<pre class="default s-code-block"><code class="hljs language-yaml"><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0001 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-string">binary.</span>
</code></pre>

<p>In other words, it simply creates a field of 0's with a 1 at the specified
position. The only tricky part is in the BitClr() macro where we need to set
a single 0 bit in a field of 1's. This is accomplished by using the 1's
complement of the same expression as denoted by the tilde (~) operator.</p>

<p>Once the mask is created it's applied to the argument just as you suggest,
by use of the bitwise and (&amp;), or (|), and xor (^) operators. Since the mask
is of type long, the macros will work just as well on char's, short's, int's,
or long's.</p>

<p>The bottom line is that this is a general solution to an entire class of
problems. It is, of course, possible and even appropriate to rewrite the
equivalent of any of these macros with explicit mask values every time you
need one, but why do it? Remember, the macro substitution occurs in the
preprocessor and so the generated code will reflect the fact that the values
are considered constant by the compiler - i.e. it's just as efficient to use
the generalized macros as to "reinvent the wheel" every time you need to do
bit manipulation. </p>

<p>Unconvinced? Here's some test code - I used Watcom C with full optimization
and without using _cdecl so the resulting disassembly would be as clean as
possible:</p>

<p>----[ TEST.C ]----------------------------------------------------------------</p>

<pre class="default s-code-block"><code class="hljs language-csharp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> BOOL(x) (!(!(x)))</span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> BitSet(arg,posn) ((arg) | (1L &lt;&lt; (posn)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BitClr(arg,posn) ((arg) &amp; ~(1L &lt;&lt; (posn)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BitTst(arg,posn) BOOL((arg) &amp; (1L &lt;&lt; (posn)))</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> BitFlp(arg,posn) ((arg) ^ (1L &lt;&lt; (posn)))</span>

<span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">bitmanip</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> word</span>)</span>
{
      word = BitSet(word, <span class="hljs-number">2</span>);
      word = BitSet(word, <span class="hljs-number">7</span>);
      word = BitClr(word, <span class="hljs-number">3</span>);
      word = BitFlp(word, <span class="hljs-number">9</span>);
      <span class="hljs-keyword">return</span> word;
}
</code></pre>

<p>----[ TEST.OUT (disassembled) ]-----------------------------------------------</p>

<pre class="default s-code-block"><code class="hljs language-yaml"><span class="hljs-attr">Module:</span> <span class="hljs-string">C:\BINK\tst.c</span>
<span class="hljs-attr">Group:</span> <span class="hljs-string">'DGROUP'</span> <span class="hljs-string">CONST,CONST2,_DATA,_BSS</span>

<span class="hljs-attr">Segment:</span> <span class="hljs-string">_TEXT</span>  <span class="hljs-string">BYTE</span>   <span class="hljs-number">00000008</span> <span class="hljs-string">bytes</span>  
 <span class="hljs-number">0000  </span><span class="hljs-string">0c</span> <span class="hljs-number">84</span>             <span class="hljs-string">bitmanip_</span>       <span class="hljs-string">or</span>      <span class="hljs-string">al,84H</span>    <span class="hljs-string">;</span> <span class="hljs-string">set</span> <span class="hljs-string">bits</span> <span class="hljs-number">2</span> <span class="hljs-string">and</span> <span class="hljs-number">7</span>
 <span class="hljs-number">0002  </span><span class="hljs-number">80</span> <span class="hljs-string">f4</span> <span class="hljs-number">02</span>                          <span class="hljs-string">xor</span>     <span class="hljs-string">ah,02H</span>    <span class="hljs-string">;</span> <span class="hljs-string">flip</span> <span class="hljs-string">bit</span> <span class="hljs-number">9</span> <span class="hljs-string">of</span> <span class="hljs-string">EAX</span> <span class="hljs-string">(bit</span> <span class="hljs-number">1</span> <span class="hljs-string">of</span> <span class="hljs-string">AH)</span>
 <span class="hljs-number">0005  </span><span class="hljs-number">24</span> <span class="hljs-string">f7</span>                             <span class="hljs-string">and</span>     <span class="hljs-string">al,0f7H</span>
 <span class="hljs-number">0007  </span><span class="hljs-string">c3</span>                                <span class="hljs-string">ret</span>     

<span class="hljs-literal">No</span> <span class="hljs-string">disassembly</span> <span class="hljs-string">errors</span>
</code></pre>

<p>----[ finis ]----------------------------------------------------------------- </p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For the beginner I would like to explain a bit more with an example:</p>

<p>Example:</p>

<pre class="default s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">value</span> <span class="hljs-keyword">is</span> <span class="hljs-number">0x55</span>;
bitnum : <span class="hljs-number">3</span>rd.
</code></pre>

<p>The <code>&amp;</code> operator is used check the bit:</p>

<pre class="default s-code-block"><code class="hljs language-yaml"><span class="hljs-number">0101 </span><span class="hljs-number">0101</span>
<span class="hljs-string">&amp;</span>
<span class="hljs-number">0000 </span><span class="hljs-number">1000</span>
<span class="hljs-string">___________</span>
<span class="hljs-number">0000 </span><span class="hljs-number">0000</span> <span class="hljs-string">(mean</span> <span class="hljs-attr">0:</span> <span class="hljs-literal">False</span><span class="hljs-string">).</span> <span class="hljs-string">It</span> <span class="hljs-string">will</span> <span class="hljs-string">work</span> <span class="hljs-string">fine</span> <span class="hljs-string">if</span> <span class="hljs-string">the</span> <span class="hljs-string">third</span> <span class="hljs-string">bit</span> <span class="hljs-string">is</span> <span class="hljs-number">1</span> <span class="hljs-string">(then</span> <span class="hljs-string">the</span> <span class="hljs-string">answer</span> <span class="hljs-string">will</span> <span class="hljs-string">be</span> <span class="hljs-literal">True</span><span class="hljs-string">)</span>
</code></pre>

<p>Toggle or Flip:</p>

<pre class="default s-code-block"><code class="hljs language-yaml"><span class="hljs-number">0101 </span><span class="hljs-number">0101</span>
<span class="hljs-string">^</span>
<span class="hljs-number">0000 </span><span class="hljs-number">1000</span>
<span class="hljs-string">___________</span>
<span class="hljs-number">0101 </span><span class="hljs-number">1101</span> <span class="hljs-string">(Flip</span> <span class="hljs-string">the</span> <span class="hljs-string">third</span> <span class="hljs-string">bit</span> <span class="hljs-string">without</span> <span class="hljs-string">affecting</span> <span class="hljs-string">other</span> <span class="hljs-string">bits)</span>
</code></pre>

<p><code>|</code> operator: set the bit</p>

<pre class="default s-code-block"><code class="hljs language-yaml"><span class="hljs-number">0101 </span><span class="hljs-number">0101</span>
<span class="hljs-string">|</span>
<span class="hljs-number">0000 </span><span class="hljs-number">1000</span>
<span class="hljs-string">___________</span>
<span class="hljs-number">0101 </span><span class="hljs-number">1101</span> <span class="hljs-string">(set</span> <span class="hljs-string">the</span> <span class="hljs-string">third</span> <span class="hljs-string">bit</span> <span class="hljs-string">without</span> <span class="hljs-string">affecting</span> <span class="hljs-string">other</span> <span class="hljs-string">bits)</span>
</code></pre>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>As this is tagged "embedded" I'll assume you're using a microcontroller. All of the above suggestions are valid &amp; work (read-modify-write, unions, structs, etc.).</p>

<p>However, during a bout of oscilloscope-based debugging I was amazed to find that these methods have a considerable overhead in CPU cycles compared to writing a value directly to the micro's PORTnSET / PORTnCLEAR registers which makes a real difference where there are tight loops / high-frequency ISR's toggling pins.</p>

<p>For those unfamiliar: In my example, the micro has a general pin-state register PORTn which reflects the output pins, so doing PORTn |= BIT_TO_SET results in a read-modify-write to that register. However, the PORTnSET / PORTnCLEAR registers take a '1' to mean "please make this bit 1" (SET) or "please make this bit zero" (CLEAR) and a '0' to mean "leave the pin alone". so, you end up with two port addresses depending whether you're setting or clearing the bit (not always convenient) but a <em>much</em> faster reaction and smaller assembled code.</p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 9</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here's my favorite bit arithmetic macro, which works for any type of unsigned integer array from <code>unsigned char</code> up to <code>size_t</code> (which is the biggest type that should be efficient to work with):</p>

<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-selector-id">#define</span> <span class="hljs-built_in">BITOP</span>(a,b,op) \
 ((a)<span class="hljs-selector-attr">[(size_t)(b)/(8*sizeof *(a))]</span> op ((size_t)<span class="hljs-number">1</span>&lt;&lt;((size_t)(b)%(<span class="hljs-number">8</span>*sizeof *(a)))))
</code></pre>

<p>To set a bit:</p>

<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-built_in">BITOP</span>(array, bit, |=);
</code></pre>

<p>To clear a bit:</p>

<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-built_in">BITOP</span>(array, bit, &amp;=~);
</code></pre>

<p>To toggle a bit:</p>

<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-built_in">BITOP</span>(array, bit, ^=);
</code></pre>

<p>To test a bit:</p>

<pre class="default s-code-block"><code class="hljs language-vhdl"><span class="hljs-keyword">if</span> (BITOP(<span class="hljs-keyword">array</span>, <span class="hljs-built_in">bit</span>, &amp;)) ...
</code></pre>

<p>etc.</p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 10</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The bitfield approach has other advantages in the embedded arena. You can define a struct that maps directly onto the bits in a particular hardware register.</p>

<pre class="default s-code-block"><code class="hljs language-cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">HwRegister</span> {
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> errorFlag:<span class="hljs-number">1</span>;  <span class="hljs-comment">// one-bit flag field</span>
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> Mode:<span class="hljs-number">3</span>;       <span class="hljs-comment">// three-bit mode field</span>
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> StatusCode:<span class="hljs-number">4</span>;  <span class="hljs-comment">// four-bit status code</span>
};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">HwRegister</span> CR3342_AReg;
</code></pre>

<p>You need to be aware of the bit packing order - I think it's MSB first, but this may be implementation-dependent. Also, verify how your compiler handlers fields crossing byte boundaries.</p>

<p>You can then read, write, test the individual values as before.</p>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 11</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
  <p><strong>Let suppose few things first</strong><br>
  <code>num = 55</code> Integer to perform bitwise operations (set, get, clear, toggle).<br>
  <code>n = 4</code> 0 based bit position to perform bitwise operations.   </p>
</blockquote>

<h1>How to get a bit?</h1>

<ol>
<li>To get the <code>nth</code> bit of num right shift <code>num</code>, <code>n</code> times. Then perform bitwise AND <code>&amp;</code> with 1.</li>
</ol>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">bit</span> = (num &gt;&gt; n) &amp; <span class="hljs-number">1</span><span class="hljs-comment">;</span>
</code></pre>

<p><strong>How it works?</strong></p>

<pre class="default s-code-block"><code class="hljs language-yaml">       <span class="hljs-number">0011 </span><span class="hljs-number">0111</span> <span class="hljs-string">(55</span> <span class="hljs-string">in</span> <span class="hljs-string">decimal)</span>
    <span class="hljs-string">&gt;&gt;</span>         <span class="hljs-number">4</span> <span class="hljs-string">(right</span> <span class="hljs-string">shift</span> <span class="hljs-number">4</span> <span class="hljs-string">times)</span>
<span class="hljs-string">-----------------</span>
       <span class="hljs-number">0000 </span><span class="hljs-number">0011</span>
     <span class="hljs-string">&amp;</span> <span class="hljs-number">0000 </span><span class="hljs-number">0001</span> <span class="hljs-string">(1</span> <span class="hljs-string">in</span> <span class="hljs-string">decimal)</span>
<span class="hljs-string">-----------------</span>
    <span class="hljs-string">=&gt;</span> <span class="hljs-number">0000 </span><span class="hljs-number">0001</span> <span class="hljs-string">(final</span> <span class="hljs-string">result)</span>
</code></pre>

<h1>How to set a bit?</h1>

<ol>
<li>To set a particular bit of number. Left shift 1 <code>n</code> times. Then perform bitwise OR <code>|</code> operation with <code>num</code>.</li>
</ol>

<pre class="default s-code-block"><code class="hljs language-bash">num |= (1 &lt;&lt; <span class="hljs-string">n);    // Equivalent to; num = (1 &lt;&lt; n</span>) | num;
</code></pre>

<p><strong>How it works?</strong></p>

<pre class="default s-code-block"><code class="hljs language-yaml">       <span class="hljs-number">0000 </span><span class="hljs-number">0001</span> <span class="hljs-string">(1</span> <span class="hljs-string">in</span> <span class="hljs-string">decimal)</span>
    <span class="hljs-string">&lt;&lt;</span>         <span class="hljs-number">4</span> <span class="hljs-string">(left</span> <span class="hljs-string">shift</span> <span class="hljs-number">4</span> <span class="hljs-string">times)</span>
<span class="hljs-string">-----------------</span>
       <span class="hljs-number">0001 </span><span class="hljs-number">0000</span>
     <span class="hljs-string">|</span> <span class="hljs-number">0011 </span><span class="hljs-number">0111</span> <span class="hljs-string">(55</span> <span class="hljs-string">in</span> <span class="hljs-string">decimal)</span>
<span class="hljs-string">-----------------</span>
    <span class="hljs-string">=&gt;</span> <span class="hljs-number">0001 </span><span class="hljs-number">0000</span> <span class="hljs-string">(final</span> <span class="hljs-string">result)</span>
</code></pre>

<h1>How to clear a bit?</h1>

<ol>
<li>Left shift 1, <code>n</code> times i.e. <code>1 &lt;&lt; n</code>.</li>
<li>Perform bitwise complement with the above result. So that the nth bit becomes unset and rest of bit becomes set i.e. <code>~ (1 &lt;&lt; n)</code>.</li>
<li>Finally, perform bitwise AND <code>&amp;</code> operation with the above result and <code>num</code>. The above three steps together can be written as <code>num &amp; (~ (1 &lt;&lt; n))</code>;</li>
</ol>

<p><a href="https://i.stack.imgur.com/mf8hm.png" rel="noreferrer"><img src="https://i.stack.imgur.com/mf8hm.png" alt="Steps to clear a bit"></a></p>

<pre class="default s-code-block"><code class="hljs language-bash">num &amp;= (~(1 &lt;&lt; <span class="hljs-string">n));    // Equivalent to; num = num &amp; (~(1 &lt;&lt; n</span>));
</code></pre>

<p><strong>How it works?</strong></p>

<pre class="default s-code-block"><code class="hljs language-yaml">       <span class="hljs-number">0000 </span><span class="hljs-number">0001</span> <span class="hljs-string">(1</span> <span class="hljs-string">in</span> <span class="hljs-string">decimal)</span>
    <span class="hljs-string">&lt;&lt;</span>         <span class="hljs-number">4</span> <span class="hljs-string">(left</span> <span class="hljs-string">shift</span> <span class="hljs-number">4</span> <span class="hljs-string">times)</span>
<span class="hljs-string">-----------------</span>
     <span class="hljs-string">~</span> <span class="hljs-number">0001 </span><span class="hljs-number">0000</span>
<span class="hljs-string">-----------------</span>
       <span class="hljs-number">1110 </span><span class="hljs-number">1111</span>
     <span class="hljs-string">&amp;</span> <span class="hljs-number">0011 </span><span class="hljs-number">0111</span> <span class="hljs-string">(55</span> <span class="hljs-string">in</span> <span class="hljs-string">decimal)</span>
<span class="hljs-string">-----------------</span>
    <span class="hljs-string">=&gt;</span> <span class="hljs-number">0010 </span><span class="hljs-number">0111</span> <span class="hljs-string">(final</span> <span class="hljs-string">result)</span>
</code></pre>

<h1>How to toggle a bit?</h1>

<p>To toggle a bit we use bitwise XOR <code>^</code> operator. Bitwise XOR operator evaluates to 1 if corresponding bit of both operands are different, otherwise evaluates to 0.  </p>

<p>Which means to toggle a bit, we need to perform XOR operation with the bit you want to toggle and 1. </p>

<pre class="default s-code-block"><code class="hljs language-bash">num ^= (1 &lt;&lt; <span class="hljs-string">n);    // Equivalent to; num = num ^ (1 &lt;&lt; n</span>);
</code></pre>

<p><strong>How it works?</strong> </p>

<ul>
<li>If the bit to toggle is 0 then, <code>0 ^ 1 =&gt; 1</code>.  </li>
<li>If the bit to toggle is 1 then, <code>1 ^ 1 =&gt; 0</code>.</li>
</ul>

<pre class="default s-code-block"><code class="hljs language-yaml">       <span class="hljs-number">0000 </span><span class="hljs-number">0001</span> <span class="hljs-string">(1</span> <span class="hljs-string">in</span> <span class="hljs-string">decimal)</span>
    <span class="hljs-string">&lt;&lt;</span>         <span class="hljs-number">4</span> <span class="hljs-string">(left</span> <span class="hljs-string">shift</span> <span class="hljs-number">4</span> <span class="hljs-string">times)</span>
<span class="hljs-string">-----------------</span>
       <span class="hljs-number">0001 </span><span class="hljs-number">0000</span>
     <span class="hljs-string">^</span> <span class="hljs-number">0011 </span><span class="hljs-number">0111</span> <span class="hljs-string">(55</span> <span class="hljs-string">in</span> <span class="hljs-string">decimal)</span>
<span class="hljs-string">-----------------</span>
    <span class="hljs-string">=&gt;</span> <span class="hljs-number">0010 </span><span class="hljs-number">0111</span> <span class="hljs-string">(final</span> <span class="hljs-string">result)</span>
</code></pre>

<p>Recommended reading - <a href="https://codeforwin.org/2016/01/bitwise-operator-programming-exercises-and-solutions-in-c.html" rel="noreferrer">Bitwise operator exercises</a></p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 12</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>Check a bit at an arbitrary location in a variable of arbitrary type:</h2>

<pre class="default s-code-block"><code class="hljs language-lisp">#define bit_test(<span class="hljs-name">x</span>, y)  ( ( ((<span class="hljs-name">const</span> char*)&amp;(<span class="hljs-name">x</span>))[(<span class="hljs-name">y</span>)&gt;&gt;3] &amp; <span class="hljs-number">0</span>x80 &gt;&gt; ((<span class="hljs-name">y</span>)&amp;0x07)) &gt;&gt; (<span class="hljs-number">7</span>-((<span class="hljs-name">y</span>)&amp;0x07) ) )
</code></pre>

<p><strong>Sample usage:</strong></p>

<pre class="default s-code-block"><code class="hljs language-cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
</span>{
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> arr[<span class="hljs-number">8</span>] = { <span class="hljs-number">0x01</span>, <span class="hljs-number">0x23</span>, <span class="hljs-number">0x45</span>, <span class="hljs-number">0x67</span>, <span class="hljs-number">0x89</span>, <span class="hljs-number">0xAB</span>, <span class="hljs-number">0xCD</span>, <span class="hljs-number">0xEF</span> };

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> ix = <span class="hljs-number">0</span>; ix &lt; <span class="hljs-number">64</span>; ++ix)
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"bit %d is %d\n"</span>, ix, <span class="hljs-built_in">bit_test</span>(arr, ix));

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>

<p><strong>Notes:</strong>
This is designed to be fast (given its flexibility) and non-branchy.  It results in efficient SPARC machine code when compiled Sun Studio 8; I've also tested it using MSVC++ 2008 on amd64.  It's possible to make similar macros for setting and clearing bits.  The key difference of this solution compared with many others here is that it works for any location in pretty much any type of variable.</p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 13</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>More general, for arbitrary sized bitmaps:</p>

<pre class="default s-code-block"><code class="hljs language-lisp">#define BITS <span class="hljs-number">8</span>
#define BIT_SET(  <span class="hljs-name">p</span>, n) (<span class="hljs-name">p</span>[(<span class="hljs-name">n</span>)/BITS] |=  (<span class="hljs-number">0</span>x80&gt;&gt;((<span class="hljs-name">n</span>)%BITS)))
#define BIT_CLEAR(<span class="hljs-name">p</span>, n) (<span class="hljs-name">p</span>[(<span class="hljs-name">n</span>)/BITS] <span class="hljs-symbol">&amp;=</span> ~(<span class="hljs-number">0</span>x80&gt;&gt;((<span class="hljs-name">n</span>)%BITS)))
#define BIT_ISSET(<span class="hljs-name">p</span>, n) (<span class="hljs-name">p</span>[(<span class="hljs-name">n</span>)/BITS] &amp;   (<span class="hljs-number">0</span>x80&gt;&gt;((<span class="hljs-name">n</span>)%BITS)))
</code></pre>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 14</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This program is to change any data bit from 0 to 1 or 1 to 0:</p>

<pre class="default s-code-block"><code class="hljs language-haskell">{
    unsigned int <span class="hljs-class"><span class="hljs-keyword">data</span> = 0x000000F0;</span>
    int bitpos = <span class="hljs-number">4</span>;
    int bitvalue = <span class="hljs-number">1</span>;
    unsigned int bit = <span class="hljs-class"><span class="hljs-keyword">data</span>;</span>
    bit = (bit&gt;&gt;bitpos)&amp;<span class="hljs-number">0x00000001</span>;
    int invbitvalue = <span class="hljs-number">0x00000001</span>&amp;(~bitvalue);
    printf(<span class="hljs-string">"%x\n"</span>,bit);

    <span class="hljs-keyword">if</span> (bitvalue == <span class="hljs-number">0</span>)
    {
        <span class="hljs-keyword">if</span> (bit == <span class="hljs-number">0</span>)
            printf(<span class="hljs-string">"%x\n"</span>, <span class="hljs-class"><span class="hljs-keyword">data</span>);</span>
        <span class="hljs-keyword">else</span>
        {
             <span class="hljs-class"><span class="hljs-keyword">data</span> = (<span class="hljs-title">data</span>^(<span class="hljs-title">invbitvalue</span>&lt;&lt;<span class="hljs-title">bitpos</span>));</span>
             printf(<span class="hljs-string">"%x\n"</span>, <span class="hljs-class"><span class="hljs-keyword">data</span>);</span>
        }
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-keyword">if</span> (bit == <span class="hljs-number">1</span>)
            printf(<span class="hljs-string">"elseif %x\n"</span>, <span class="hljs-class"><span class="hljs-keyword">data</span>);</span>
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-class"><span class="hljs-keyword">data</span> = (<span class="hljs-title">data</span>|(<span class="hljs-title">bitvalue</span>&lt;&lt;<span class="hljs-title">bitpos</span>));</span>
            printf(<span class="hljs-string">"else %x\n"</span>, <span class="hljs-class"><span class="hljs-keyword">data</span>);</span>
        }
    }
}
</code></pre>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 15</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you're doing a lot of bit twiddling you might want to use masks which will make the whole thing quicker. The following functions are very fast and are still flexible (they allow bit twiddling in bit maps of any size).</p>

<pre class="default s-code-block"><code class="hljs language-java">const unsigned <span class="hljs-type">char</span> TQuickByteMask[<span class="hljs-number">8</span>] =
{
   <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x08</span>,
   <span class="hljs-number">0x10</span>, <span class="hljs-number">0x20</span>, <span class="hljs-number">0x40</span>, <span class="hljs-number">0x80</span>,
};


<span class="hljs-comment">/** Set bit in any sized bit mask.
 *
 * <span class="hljs-doctag">@return</span>    none
 *
 * <span class="hljs-doctag">@param</span>     bit    - Bit number.
 * <span class="hljs-doctag">@param</span>     bitmap - Pointer to bitmap.
 */</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">TSetBit</span><span class="hljs-params">( <span class="hljs-type">short</span> bit, unsigned <span class="hljs-type">char</span> *bitmap)</span>
{
    <span class="hljs-type">short</span> n, x;

    x = bit / <span class="hljs-number">8</span>;        <span class="hljs-comment">// Index to byte.</span>
    n = bit % <span class="hljs-number">8</span>;        <span class="hljs-comment">// Specific bit in byte.</span>

    bitmap[x] |= TQuickByteMask[n];        <span class="hljs-comment">// Set bit.</span>
}


<span class="hljs-comment">/** Reset bit in any sized mask.
 *
 * <span class="hljs-doctag">@return</span>  None
 *
 * <span class="hljs-doctag">@param</span>   bit    - Bit number.
 * <span class="hljs-doctag">@param</span>   bitmap - Pointer to bitmap.
 */</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">TResetBit</span><span class="hljs-params">( <span class="hljs-type">short</span> bit, unsigned <span class="hljs-type">char</span> *bitmap)</span>
{
    <span class="hljs-type">short</span> n, x;

    x = bit / <span class="hljs-number">8</span>;        <span class="hljs-comment">// Index to byte.</span>
    n = bit % <span class="hljs-number">8</span>;        <span class="hljs-comment">// Specific bit in byte.</span>

    bitmap[x] &amp;= (~TQuickByteMask[n]);    <span class="hljs-comment">// Reset bit.</span>
}


<span class="hljs-comment">/** Toggle bit in any sized bit mask.
 *
 * <span class="hljs-doctag">@return</span>   none
 *
 * <span class="hljs-doctag">@param</span>   bit    - Bit number.
 * <span class="hljs-doctag">@param</span>   bitmap - Pointer to bitmap.
 */</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">TToggleBit</span><span class="hljs-params">( <span class="hljs-type">short</span> bit, unsigned <span class="hljs-type">char</span> *bitmap)</span>
{
    <span class="hljs-type">short</span> n, x;

    x = bit / <span class="hljs-number">8</span>;        <span class="hljs-comment">// Index to byte.</span>
    n = bit % <span class="hljs-number">8</span>;        <span class="hljs-comment">// Specific bit in byte.</span>

    bitmap[x] ^= TQuickByteMask[n];        <span class="hljs-comment">// Toggle bit.</span>
}


<span class="hljs-comment">/** Checks specified bit.
 *
 * <span class="hljs-doctag">@return</span>  1 if bit set else 0.
 *
 * <span class="hljs-doctag">@param</span>   bit    - Bit number.
 * <span class="hljs-doctag">@param</span>   bitmap - Pointer to bitmap.
 */</span>
<span class="hljs-type">short</span> <span class="hljs-title function_">TIsBitSet</span><span class="hljs-params">( <span class="hljs-type">short</span> bit, const unsigned <span class="hljs-type">char</span> *bitmap)</span>
{
    <span class="hljs-type">short</span> n, x;

    x = bit / <span class="hljs-number">8</span>;    <span class="hljs-comment">// Index to byte.</span>
    n = bit % <span class="hljs-number">8</span>;    <span class="hljs-comment">// Specific bit in byte.</span>

    <span class="hljs-comment">// Test bit (logigal AND).</span>
    <span class="hljs-keyword">if</span> (bitmap[x] &amp; TQuickByteMask[n])
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}


<span class="hljs-comment">/** Checks specified bit.
 *
 * <span class="hljs-doctag">@return</span>  1 if bit reset else 0.
 *
 * <span class="hljs-doctag">@param</span>   bit    - Bit number.
 * <span class="hljs-doctag">@param</span>   bitmap - Pointer to bitmap.
 */</span>
<span class="hljs-type">short</span> <span class="hljs-title function_">TIsBitReset</span><span class="hljs-params">( <span class="hljs-type">short</span> bit, const unsigned <span class="hljs-type">char</span> *bitmap)</span>
{
    <span class="hljs-keyword">return</span> TIsBitSet(bit, bitmap) ^ <span class="hljs-number">1</span>;
}


<span class="hljs-comment">/** Count number of bits set in a bitmap.
 *
 * <span class="hljs-doctag">@return</span>   Number of bits set.
 *
 * <span class="hljs-doctag">@param</span>    bitmap - Pointer to bitmap.
 * <span class="hljs-doctag">@param</span>    size   - Bitmap size (in bits).
 *
 * <span class="hljs-doctag">@note</span>    Not very efficient in terms of execution speed. If you are doing
 *        some computationally intense stuff you may need a more complex
 *        implementation which would be faster (especially for big bitmaps).
 *        See (http://graphics.stanford.edu/~seander/bithacks.html).
 */</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">TCountBits</span><span class="hljs-params">( const unsigned <span class="hljs-type">char</span> *bitmap, <span class="hljs-type">int</span> size)</span>
{
    <span class="hljs-type">int</span> i, count = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;size; i++)
        <span class="hljs-keyword">if</span> (TIsBitSet(i, bitmap))
            count++;

    <span class="hljs-keyword">return</span> count;
}
</code></pre>

<p>Note, to set bit 'n' in a 16 bit integer you do the following:</p>

<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-built_in">TSetBit</span>( n, &amp;my_int);
</code></pre>

<p>It's up to you to ensure that the bit number is within the range of the bit map that you pass. Note that for little endian processors that bytes, words, dwords, qwords, etc., map correctly to each other in memory (main reason that little endian processors are 'better' than big-endian processors, ah, I feel a flame war coming on...).</p>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 16</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Use this:</p>

<pre class="default s-code-block"><code class="hljs language-dart"><span class="hljs-built_in">int</span> ToggleNthBit ( unsigned char n, <span class="hljs-built_in">int</span> <span class="hljs-built_in">num</span> )
{
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">num</span> &amp; (<span class="hljs-number">1</span> &lt;&lt; n))
        <span class="hljs-built_in">num</span> &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; n);
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">num</span> |= (<span class="hljs-number">1</span> &lt;&lt; n);

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">num</span>;
}
</code></pre>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 17</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Expanding on the <code>bitset</code> answer:</p>

<pre class="default s-code-block"><code class="hljs language-cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bitset&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-function">bitset&lt;8&gt; <span class="hljs-title">byte</span><span class="hljs-params">(std::string(<span class="hljs-string">"10010011"</span>);

  <span class="hljs-comment">// Set Bit</span>
  byte.set(<span class="hljs-number">3</span>); <span class="hljs-comment">// 10010111</span>

  <span class="hljs-comment">// Clear Bit</span>
  byte.reset(<span class="hljs-number">2</span>); <span class="hljs-comment">// 10010101</span>

  <span class="hljs-comment">// Toggle Bit</span>
  byte.flip(<span class="hljs-number">7</span>); <span class="hljs-comment">// 00010101</span>

  cout &lt;&lt; byte &lt;&lt; endl;

  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</span></span></code></pre>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 18</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you want to perform this all operation with C programming in the <strong>Linux kernel</strong> then I suggest to use standard APIs of the Linux kernel.</p>

<p>See <a href="https://www.kernel.org/doc/htmldocs/kernel-api/ch02s03.html" rel="nofollow noreferrer">https://www.kernel.org/doc/htmldocs/kernel-api/ch02s03.html</a></p>

<pre class="default s-code-block"><code class="hljs language-vhdl">set_bit  Atomically set a <span class="hljs-built_in">bit</span> <span class="hljs-keyword">in</span> memory
clear_bit  Clears a <span class="hljs-built_in">bit</span> <span class="hljs-keyword">in</span> memory
change_bit  Toggle a <span class="hljs-built_in">bit</span> <span class="hljs-keyword">in</span> memory
test_and_set_bit  Set a <span class="hljs-built_in">bit</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">return</span> its old value
test_and_clear_bit  Clear a <span class="hljs-built_in">bit</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">return</span> its old value
test_and_change_bit  Change a <span class="hljs-built_in">bit</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">return</span> its old value
test_bit  Determine whether a <span class="hljs-built_in">bit</span> <span class="hljs-keyword">is</span> set
</code></pre>

<p>Note: Here the whole operation happens in a single step. So these all are  guaranteed to be <strong>atomic</strong> even on SMP computers and are useful
to keep coherence across processors.</p>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 19</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Visual C 2010, and perhaps many other compilers, have direct support for boolean operations built in. A bit has two possible values, just like a boolean, so we can use booleans instead - even if they take up more space than a single bit in memory in this representation. This works, even the <code>sizeof()</code> operator works properly. </p>

<pre class="default s-code-block"><code class="hljs language-cpp"><span class="hljs-type">bool</span>    IsGph[<span class="hljs-number">256</span>], IsNotGph[<span class="hljs-number">256</span>];

<span class="hljs-comment">//  Initialize boolean array to detect printable characters</span>
<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-built_in">sizeof</span>(IsGph); i++)  {
    IsGph[i] = <span class="hljs-built_in">isgraph</span>((<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>)i);
}
</code></pre>

<p>So, to your question, <code>IsGph[i] =1</code>, or <code>IsGph[i] =0</code> make setting and clearing bools easy.</p>

<p>To find unprintable characters:</p>

<pre class="default s-code-block"><code class="hljs language-csharp"><span class="hljs-comment">//  Initialize boolean array to detect UN-printable characters, </span>
<span class="hljs-comment">//  then call function to toggle required bits true, while initializing a 2nd</span>
<span class="hljs-comment">//  boolean array as the complement of the 1st.</span>
<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-keyword">sizeof</span>(IsGph); i++)  {
    <span class="hljs-keyword">if</span>(IsGph[i])    {
         IsNotGph[i] = <span class="hljs-number">0</span>;
    }   <span class="hljs-keyword">else</span>   {
         IsNotGph[i] = <span class="hljs-number">1</span>;
    }
}
</code></pre>

<p>Note there is nothing "special" about this code. It treats a bit like an integer - which technically, it is. A 1 bit integer that can hold 2 values, and 2 values only.</p>

<p>I once used this approach to find duplicate loan records, where loan_number was the ISAM key, using the 6-digit loan number as an index into the bit array. Savagely fast, and after 8 months, proved that the mainframe system we were getting the data from was in fact malfunctioning. The simplicity of bit arrays makes confidence in their correctness very high - vs a searching approach for example.</p>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 20</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="default s-code-block"><code class="hljs language-dart"><span class="hljs-built_in">int</span> set_nth_bit(<span class="hljs-built_in">int</span> <span class="hljs-built_in">num</span>, <span class="hljs-built_in">int</span> n){    
    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">num</span> | <span class="hljs-number">1</span> &lt;&lt; n);
}

<span class="hljs-built_in">int</span> clear_nth_bit(<span class="hljs-built_in">int</span> <span class="hljs-built_in">num</span>, <span class="hljs-built_in">int</span> n){    
    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">num</span> &amp; ~( <span class="hljs-number">1</span> &lt;&lt; n));
}

<span class="hljs-built_in">int</span> toggle_nth_bit(<span class="hljs-built_in">int</span> <span class="hljs-built_in">num</span>, <span class="hljs-built_in">int</span> n){    
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">num</span> ^ (<span class="hljs-number">1</span> &lt;&lt; n);
}

<span class="hljs-built_in">int</span> check_nth_bit(<span class="hljs-built_in">int</span> <span class="hljs-built_in">num</span>, <span class="hljs-built_in">int</span> n){    
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">num</span> &amp; (<span class="hljs-number">1</span> &lt;&lt; n);
}
</code></pre>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 21</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here are some macros I use:</p>

<pre class="default s-code-block"><code class="hljs language-lisp">SET_FLAG(<span class="hljs-name">Status</span>, Flag)            ((<span class="hljs-name">Status</span>) |= (<span class="hljs-name">Flag</span>))
CLEAR_FLAG(<span class="hljs-name">Status</span>, Flag)          ((<span class="hljs-name">Status</span>) <span class="hljs-symbol">&amp;=</span> ~(<span class="hljs-name">Flag</span>))
INVALID_FLAGS(<span class="hljs-name">ulFlags</span>, ulAllowed) ((<span class="hljs-name">ulFlags</span>) &amp; ~(<span class="hljs-name">ulAllowed</span>))
TEST_FLAGS(<span class="hljs-name">t</span>,ulMask, ulBit)       (((<span class="hljs-name">t</span>)&amp;(<span class="hljs-name">ulMask</span>)) == (<span class="hljs-name">ulBit</span>))
IS_FLAG_SET(<span class="hljs-name">t</span>,ulMask)             TEST_FLAGS(<span class="hljs-name">t</span>,ulMask,ulMask)
IS_FLAG_CLEAR(<span class="hljs-name">t</span>,ulMask)           TEST_FLAGS(<span class="hljs-name">t</span>,ulMask,<span class="hljs-number">0</span>)
</code></pre>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 22</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
  <p>How do you set, clear, and toggle a single bit?</p>
</blockquote>

<p>To address a common coding pitfall when attempting to form the mask:<br>
<strong><code>1</code> is not always wide enough</strong></p>

<p>What problems happen when <code>number</code> is a wider type than <code>1</code>?<br>
<code>x</code> may be too great for the shift <code>1 &lt;&lt; x</code> leading to <em>undefined behavior</em> (UB).  Even if <code>x</code> is not too great, <code>~</code> may not flip enough most-significant-bits.</p>

<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-comment">// assume 32 bit int/unsigned</span>
unsigned long long <span class="hljs-built_in">number</span> = <span class="hljs-title function_">foo</span>();

unsigned x = <span class="hljs-number">40</span>; 
<span class="hljs-built_in">number</span> |= (<span class="hljs-number">1</span> &lt;&lt; x);  <span class="hljs-comment">// UB</span>
<span class="hljs-built_in">number</span> ^= (<span class="hljs-number">1</span> &lt;&lt; x);  <span class="hljs-comment">// UB</span>
<span class="hljs-built_in">number</span> &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; x); <span class="hljs-comment">// UB</span>

x = <span class="hljs-number">10</span>;
<span class="hljs-built_in">number</span> &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; x); <span class="hljs-comment">// Wrong mask, not wide enough</span>
</code></pre>

<hr>

<p><strong>To insure 1 is wide enough:</strong></p>

<p>Code could use <code>1ull</code> or pedantically <code>(uintmax_t)1</code> and let the compiler optimize.</p>

<pre class="default s-code-block"><code class="hljs language-bash">number |= (1ull &lt;&lt; <span class="hljs-string">x);
number |= ((uintmax_t)1 &lt;&lt; x</span>);
</code></pre>

<p>Or cast - which makes for coding/review/maintenance issues keeping the cast correct and up-to-date.</p>

<pre class="default s-code-block"><code class="hljs language-bash">number |= (type_of_number)1 &lt;&lt; <span class="hljs-string">x;
</span></code></pre>

<p>Or gently promote the <code>1</code> by forcing a math operation that is as least as wide as the type of <code>number</code>.</p>

<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-built_in">number</span> |= (<span class="hljs-built_in">number</span>*<span class="hljs-number">0</span> + <span class="hljs-number">1</span>) &lt;&lt; x;
</code></pre>

<hr>

<p>As with most bit manipulations, best to work with <em>unsigned</em> types rather than <em>signed</em> ones</p>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 23</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This program is based out of @Jeremy's above solution. If someone wish to quickly play around.</p>

<pre class="default s-code-block"><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BitwiseOperations</span> {

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String args[]</span>)</span> {

        setABit(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// set the 4th bit, 0000 -&gt; 1000 [8]</span>
        clearABit(<span class="hljs-number">16</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// clear the 5th bit, 10000 -&gt; 00000 [0]</span>
        toggleABit(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// toggle the 4th bit, 1000 -&gt; 0000 [0]</span>
        checkABit(<span class="hljs-number">8</span>,<span class="hljs-number">4</span>); <span class="hljs-comment">// check the 4th bit 1000 -&gt; true </span>
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setABit</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> input, <span class="hljs-built_in">int</span> n</span>)</span> {
        input = input | ( <span class="hljs-number">1</span> &lt;&lt; n<span class="hljs-number">-1</span>);
        System.<span class="hljs-keyword">out</span>.println(input);
    }


    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">clearABit</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> input, <span class="hljs-built_in">int</span> n</span>)</span> {
        input = input &amp; ~(<span class="hljs-number">1</span> &lt;&lt; n<span class="hljs-number">-1</span>);
        System.<span class="hljs-keyword">out</span>.println(input);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toggleABit</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> input, <span class="hljs-built_in">int</span> n</span>)</span> {
        input = input ^ (<span class="hljs-number">1</span> &lt;&lt; n<span class="hljs-number">-1</span>);
        System.<span class="hljs-keyword">out</span>.println(input);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkABit</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> input, <span class="hljs-built_in">int</span> n</span>)</span> {
        boolean isSet = ((input &gt;&gt; n<span class="hljs-number">-1</span>) &amp; <span class="hljs-number">1</span>) == <span class="hljs-number">1</span>; 
        System.<span class="hljs-keyword">out</span>.println(isSet);
    }
}


Output :
<span class="hljs-number">8</span>
<span class="hljs-number">0</span>
<span class="hljs-number">0</span>
<span class="hljs-literal">true</span>
</code></pre>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 24</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A templated version (put in a header file) with support for changing multiple bits (works on AVR microcontrollers btw):</p>
<pre class="lang-cpp s-code-block"><code class="hljs language-cpp"><span class="hljs-keyword">namespace</span> bit {
  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T1, <span class="hljs-keyword">typename</span> T2&gt;
  <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">inline</span> T1 <span class="hljs-title">bitmask</span><span class="hljs-params">(T2 bit)</span> 
  </span>{<span class="hljs-keyword">return</span> (T1)<span class="hljs-number">1</span> &lt;&lt; bit;}
  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T1, <span class="hljs-keyword">typename</span> T3, <span class="hljs-keyword">typename</span> ...T2&gt;
  <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">inline</span> T1 <span class="hljs-title">bitmask</span><span class="hljs-params">(T3 bit, T2 ...bits)</span> 
  </span>{<span class="hljs-keyword">return</span> ((T1)<span class="hljs-number">1</span> &lt;&lt; bit) | <span class="hljs-built_in">bitmask</span>&lt;T1&gt;(bits...);}

  <span class="hljs-comment">/** Set these bits (others retain their state) */</span>
  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T1, <span class="hljs-keyword">typename</span> ...T2&gt;
  <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">set</span> <span class="hljs-params">(T1 &amp;variable, T2 ...bits)</span> 
  </span>{variable |= <span class="hljs-built_in">bitmask</span>&lt;T1&gt;(bits...);}
  <span class="hljs-comment">/** Set only these bits (others will be cleared) */</span>
  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T1, <span class="hljs-keyword">typename</span> ...T2&gt;
  <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">setOnly</span> <span class="hljs-params">(T1 &amp;variable, T2 ...bits)</span> 
  </span>{variable = <span class="hljs-built_in">bitmask</span>&lt;T1&gt;(bits...);}
  <span class="hljs-comment">/** Clear these bits (others retain their state) */</span>
  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T1, <span class="hljs-keyword">typename</span> ...T2&gt;
  <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">clear</span> <span class="hljs-params">(T1 &amp;variable, T2 ...bits)</span> 
  </span>{variable &amp;= ~<span class="hljs-built_in">bitmask</span>&lt;T1&gt;(bits...);}
  <span class="hljs-comment">/** Flip these bits (others retain their state) */</span>
  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T1, <span class="hljs-keyword">typename</span> ...T2&gt;
  <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">flip</span> <span class="hljs-params">(T1 &amp;variable, T2 ...bits)</span> 
  </span>{variable ^= <span class="hljs-built_in">bitmask</span>&lt;T1&gt;(bits...);}
  <span class="hljs-comment">/** Check if any of these bits are set */</span>
  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T1, <span class="hljs-keyword">typename</span> ...T2&gt;
  <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-title">isAnySet</span><span class="hljs-params">(<span class="hljs-type">const</span> T1 &amp;variable, T2 ...bits)</span> 
  </span>{<span class="hljs-keyword">return</span> variable &amp; <span class="hljs-built_in">bitmask</span>&lt;T1&gt;(bits...);}
  <span class="hljs-comment">/** Check if all these bits are set */</span>
  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T1, <span class="hljs-keyword">typename</span> ...T2&gt;
  <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-title">isSet</span> <span class="hljs-params">(<span class="hljs-type">const</span> T1 &amp;variable, T2 ...bits)</span> 
  </span>{<span class="hljs-keyword">return</span> ((variable &amp; <span class="hljs-built_in">bitmask</span>&lt;T1&gt;(bits...)) == <span class="hljs-built_in">bitmask</span>&lt;T1&gt;(bits...));}
  <span class="hljs-comment">/** Check if all these bits are not set */</span>
  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T1, <span class="hljs-keyword">typename</span> ...T2&gt;
  <span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-title">isNotSet</span> <span class="hljs-params">(<span class="hljs-type">const</span> T1 &amp;variable, T2 ...bits)</span> 
  </span>{<span class="hljs-keyword">return</span> ((variable &amp; <span class="hljs-built_in">bitmask</span>&lt;T1&gt;(bits...)) != <span class="hljs-built_in">bitmask</span>&lt;T1&gt;(bits...));}
}
</code></pre>
<p>Example of use:</p>
<pre class="lang-cpp s-code-block"><code class="hljs language-cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bitset&gt;</span> <span class="hljs-comment">// for console output of binary values</span></span>

<span class="hljs-comment">// and include the code above of course</span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-type">uint8_t</span> v = <span class="hljs-number">0b1111'1100</span>;
  bit::<span class="hljs-built_in">set</span>(v, <span class="hljs-number">0</span>);
  cout &lt;&lt; <span class="hljs-built_in">bitset</span>&lt;<span class="hljs-number">8</span>&gt;(v) &lt;&lt; endl;

  bit::<span class="hljs-built_in">clear</span>(v, <span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
  cout &lt;&lt; <span class="hljs-built_in">bitset</span>&lt;<span class="hljs-number">8</span>&gt;(v) &lt;&lt; endl;

  bit::<span class="hljs-built_in">flip</span>(v, <span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
  cout &lt;&lt; <span class="hljs-built_in">bitset</span>&lt;<span class="hljs-number">8</span>&gt;(v) &lt;&lt; endl;

  bit::<span class="hljs-built_in">clear</span>(v, <span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>);
  cout &lt;&lt; <span class="hljs-built_in">bitset</span>&lt;<span class="hljs-number">8</span>&gt;(v) &lt;&lt; endl;

  bit::<span class="hljs-built_in">flip</span>(v, <span class="hljs-number">0</span>,<span class="hljs-number">7</span>);
  cout &lt;&lt; <span class="hljs-built_in">bitset</span>&lt;<span class="hljs-number">8</span>&gt;(v) &lt;&lt; endl;
}
</code></pre>
<p>BTW: It turns out that constexpr and inline is not used if not sending the optimizer argument (e.g.: -O3) to the compiler. Feel free to try the code at <a href="https://godbolt.org/" rel="nofollow noreferrer">https://godbolt.org/</a> and look at the ASM output.</p>
    </div></div></div></div><div id="solution25" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 25</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is a routine in C to perform the basic bitwise operations:</p>
<pre class="default s-code-block"><code class="hljs language-cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> INT_BIT (unsigned int) (sizeof(unsigned int) * 8U) <span class="hljs-comment">//number of bits in unsigned int</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
</span>{
    
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> k = <span class="hljs-number">5</span>; <span class="hljs-comment">//k is the bit position; here it is the 5th bit from the LSb (0th bit)</span>
    
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> regA = <span class="hljs-number">0x00007C7C</span>; <span class="hljs-comment">//we perform bitwise operations on regA</span>
    
    regA |= (<span class="hljs-number">1U</span> &lt;&lt; k);    <span class="hljs-comment">//Set kth bit</span>
    
    regA &amp;= ~(<span class="hljs-number">1U</span> &lt;&lt; k);   <span class="hljs-comment">//Clear kth bit</span>
    
    regA ^= (<span class="hljs-number">1U</span> &lt;&lt; k);    <span class="hljs-comment">//Toggle kth bit</span>
    
    regA = (regA &lt;&lt; k) | regA &gt;&gt; (INT_BIT - k); <span class="hljs-comment">//Rotate left by k bits</span>
    
    regA = (regA &gt;&gt; k) | regA &lt;&lt; (INT_BIT - k); <span class="hljs-comment">//Rotate right by k bits</span>

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;   
}

</code></pre>
    </div></div></div></div><div id="solution26" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 26</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Setting the nth bit to x (bit value) without using -1</h1>
<p>Sometimes when you are not sure what -1 or the like will result in, you may wish to set the nth bit without using -1:</p>
<pre class="default s-code-block"><code class="hljs language-bash">number = (((number | (1 &lt;&lt; <span class="hljs-string">n)) ^ (1 &lt;&lt; n</span>))) | (x &lt;&lt; <span class="hljs-string">n);
</span></code></pre>
<p>Explanation: <code>((number | (1 &lt;&lt; n)</code> sets the nth bit to 1 (where <code>|</code> denotes bitwise OR), then with <code>(...) ^ (1 &lt;&lt; n)</code> we set the nth bit to 0, and finally with <code>(...) | x &lt;&lt; n)</code> we set the nth bit that was 0, to (bit value) <code>x</code>.</p>
<p>This also works in <code>golang</code>.</p>
    </div></div></div></div><div id="solution27" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 27</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bit-manipulation">bit-manipulation</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/bitwise-operators">bitwise-operators</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Try one of these functions in the C language to change n bit:</p>

<pre class="default s-code-block"><code class="hljs language-csharp"><span class="hljs-built_in">char</span> bitfield;

<span class="hljs-comment">// Start at 0th position</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">chang_n_bit</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> n, <span class="hljs-built_in">int</span> <span class="hljs-keyword">value</span></span>)</span>
{
    bitfield = (bitfield | (<span class="hljs-number">1</span> &lt;&lt; n)) &amp; (~( (<span class="hljs-number">1</span> &lt;&lt; n) ^ (<span class="hljs-keyword">value</span> &lt;&lt; n) ));
}
</code></pre>

<p>Or</p>

<pre class="default s-code-block"><code class="hljs language-bash">void chang_n_bit(int n, int value)
{
    bitfield = (bitfield | (1 &lt;&lt; <span class="hljs-string">n)) &amp; ((value &lt;&lt; n</span>) | ((~0) ^ (1 &lt;&lt; <span class="hljs-string">n)));
}
</span></code></pre>

<p>Or</p>

<pre class="default s-code-block"><code class="hljs language-csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">chang_n_bit</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> n, <span class="hljs-built_in">int</span> <span class="hljs-keyword">value</span></span>)</span>
{
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">value</span>)
        bitfield |= <span class="hljs-number">1</span> &lt;&lt; n;
    <span class="hljs-keyword">else</span>
        bitfield &amp;= ~<span class="hljs-number">0</span> ^ (<span class="hljs-number">1</span> &lt;&lt; n);
}

<span class="hljs-function"><span class="hljs-built_in">char</span> <span class="hljs-title">get_n_bit</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> n</span>)</span>
{
    <span class="hljs-keyword">return</span> (bitfield &amp; (<span class="hljs-number">1</span> &lt;&lt; n)) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
}
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-do-i-pandas-group-by-to-get-sum-1657387908708">How do I Pandas group-by to get sum?</a><a href="/questions/how-can-i-parse-a-json-file-with-php-duplicate-1657388002325">How can I parse a JSON file with PHP? [duplicate]</a><a href="/questions/how-do-i-add-a-delay-in-a-javascript-loop-1657388544679">How do I add a delay in a JavaScript loop?</a><a href="/questions/how-to-manage-startactivityforresult-on-android-1657387967393">How to manage startActivityForResult on Android</a><a href="/questions/undefined-unspecified-and-implementation-defined-behavior-1657384516085">Undefined, unspecified and implementation-defined behavior</a><a href="/questions/can-php-pdo-statements-accept-the-table-or-column-name-as-parameter-1657387478588">Can PHP PDO Statements accept the table or column name as parameter?</a><a href="/questions/how-can-i-do-a-full-outer-join-in-mysql-1657388175444">How can I do a FULL OUTER JOIN in MySQL?</a><a href="/questions/why-jsf-calls-getters-multiple-times-1657388244489">Why JSF calls getters multiple times</a><a href="/questions/how-can-i-vertically-align-elements-in-a-div-1657385504431">How can I vertically align elements in a div?</a><a href="/questions/%22cross-origin-requests-are-only-supported-for-http.%22-error-when-loading-a-local-file-1657387942403">&quot;Cross origin requests are only supported for HTTP.&quot; error when loading a local file</a><a href="/questions/how-do-i-import-a-module-given-the-full-path-1657388139965">How do I import a module given the full path?</a><a href="/questions/i-just-assigned-a-variable-but-echo-dollarvariable-shows-something-else-1657387574561">I just assigned a variable, but echo $variable shows something else</a><a href="/questions/copy-array-by-value-1657387649531">Copy array by value</a><a href="/questions/how-do-i-use-shell-variables-in-an-awk-script-1657387754261">How do I use shell variables in an awk script?</a><a href="/questions/why-does-std::getline()-skip-input-after-a-formatted-extraction-1657384756118">Why does std::getline() skip input after a formatted extraction?</a><a href="/questions/sending-email-in-android-using-javamail-api-without-using-the-defaultbuilt-in-app-1657387883400">Sending Email in Android using JavaMail API without using the default/built-in app</a><a href="/questions/how-should-a-model-be-structured-in-mvc-closed-1657388394807">How should a model be structured in MVC? [closed]</a><a href="/questions/what&#x27;s-the-simplest-way-to-print-a-java-array-1657384702397">What&#x27;s the simplest way to print a Java array?</a><a href="/questions/persist-variables-between-page-loads-1657388558452">Persist variables between page loads</a><a href="/questions/how-to-avoid-having-class-data-shared-among-instances-1657387687732">How to avoid having class data shared among instances?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;h1\u0026gt;Setting a bit\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;Use the bitwise OR operator (\u0026lt;code\u0026gt;|\u0026lt;/code\u0026gt;) to set a bit.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;number |= 1UL \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n;\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;That will set the \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt;th bit of \u0026lt;code\u0026gt;number\u0026lt;/code\u0026gt;. \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt; should be zero, if you want to set the \u0026lt;code\u0026gt;1\u0026lt;/code\u0026gt;st bit and so on upto \u0026lt;code\u0026gt;n-1\u0026lt;/code\u0026gt;, if you want to set the \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt;th bit.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Use \u0026lt;code\u0026gt;1ULL\u0026lt;/code\u0026gt; if \u0026lt;code\u0026gt;number\u0026lt;/code\u0026gt; is wider than \u0026lt;code\u0026gt;unsigned long\u0026lt;/code\u0026gt;; promotion of \u0026lt;code\u0026gt;1UL \u0026amp;lt;\u0026amp;lt; n\u0026lt;/code\u0026gt; doesn\u0026apos;t happen until after evaluating \u0026lt;code\u0026gt;1UL \u0026amp;lt;\u0026amp;lt; n\u0026lt;/code\u0026gt; where it\u0026apos;s undefined behaviour to shift by more than the width of a \u0026lt;code\u0026gt;long\u0026lt;/code\u0026gt;.  The same applies to all the rest of the examples.\u0026lt;/p\u0026gt;\n\u0026lt;h1\u0026gt;Clearing a bit\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;Use the bitwise AND operator (\u0026lt;code\u0026gt;\u0026amp;amp;\u0026lt;/code\u0026gt;) to clear a bit.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;number \u0026amp;amp;= ~(1UL \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n);\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;That will clear the \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt;th bit of \u0026lt;code\u0026gt;number\u0026lt;/code\u0026gt;. You must invert the bit string with the bitwise NOT operator (\u0026lt;code\u0026gt;~\u0026lt;/code\u0026gt;), then AND it.\u0026lt;/p\u0026gt;\n\u0026lt;h1\u0026gt;Toggling a bit\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;The XOR operator (\u0026lt;code\u0026gt;^\u0026lt;/code\u0026gt;) can be used to toggle a bit.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;number ^= 1UL \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n;\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;That will toggle the \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt;th bit of \u0026lt;code\u0026gt;number\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;h1\u0026gt;Checking a bit\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;You didn\u0026apos;t ask for this, but I might as well add it.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;To check a bit, shift the number n to the right, then bitwise AND it:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; = (number \u0026amp;gt;\u0026amp;gt; n) \u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;U\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;That will put the value of the \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt;th bit of \u0026lt;code\u0026gt;number\u0026lt;/code\u0026gt; into the variable \u0026lt;code\u0026gt;bit\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;h1\u0026gt;Changing the \u0026lt;em\u0026gt;n\u0026lt;/em\u0026gt;th bit to \u0026lt;em\u0026gt;x\u0026lt;/em\u0026gt;\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;Setting the \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt;th bit to either \u0026lt;code\u0026gt;1\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;0\u0026lt;/code\u0026gt; can be achieved with the following on a 2\u0026apos;s complement C++ implementation:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt; ^= (-x ^ \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;) \u0026amp;amp; (1UL \u0026amp;lt;\u0026amp;lt; n);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Bit \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt; will be set if \u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt; is \u0026lt;code\u0026gt;1\u0026lt;/code\u0026gt;, and cleared if \u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt; is \u0026lt;code\u0026gt;0\u0026lt;/code\u0026gt;.  If \u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt; has some other value, you get garbage.  \u0026lt;code\u0026gt;x = !!x\u0026lt;/code\u0026gt; will booleanize it to 0 or 1.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;To make this independent of 2\u0026apos;s complement negation behaviour (where \u0026lt;code\u0026gt;-1\u0026lt;/code\u0026gt; has all bits set, unlike on a 1\u0026apos;s complement or sign/magnitude C++ implementation), use unsigned negation.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;number ^= (-(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;long\u0026lt;/span\u0026gt;)x ^ number) \u0026amp;amp; (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1UL\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;long\u0026lt;/span\u0026gt; newbit = !!x;    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Also booleanize to force 0 or 1\u0026lt;/span\u0026gt;\nnumber ^= (-newbit ^ number) \u0026amp;amp; (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1UL\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;It\u0026apos;s generally a good idea to use unsigned types for portable bit manipulation.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;number = (number \u0026amp;amp; ~(1UL \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n)) | (x \u0026amp;lt;\u0026amp;lt; n\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;(number \u0026amp;amp; ~(1UL \u0026amp;lt;\u0026amp;lt; n))\u0026lt;/code\u0026gt; will clear the \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt;th bit and \u0026lt;code\u0026gt;(x \u0026amp;lt;\u0026amp;lt; n)\u0026lt;/code\u0026gt; will set the \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt;th bit to \u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;It\u0026apos;s also generally a good idea to not to copy/paste code in general and so many people use preprocessor macros (like \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/263738/52074\u0026quot;\u0026gt;the community wiki answer further down\u0026lt;/a\u0026gt;) or some sort of encapsulation.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Using the Standard C++ Library: \u0026lt;a href=\u0026quot;http://en.cppreference.com/w/cpp/utility/bitset\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;std::bitset\u0026amp;lt;N\u0026amp;gt;\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Or the \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Boost_%28C%2B%2B_libraries%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Boost\u0026lt;/a\u0026gt; version: \u0026lt;a href=\u0026quot;http://www.boost.org/doc/libs/release/libs/dynamic_bitset/dynamic_bitset.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;boost::dynamic_bitset\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;There is no need to roll your own:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;bitset\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;iostream\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;{\n    std::bitset\u0026amp;lt;5\u0026amp;gt; x;\n\n    x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n    x[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Note x[0-4]  valid\u0026lt;/span\u0026gt;\n\n    std::cout \u0026amp;lt;\u0026amp;lt; x \u0026amp;lt;\u0026amp;lt; std::endl;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;Alpha:\u0026lt;/span\u0026gt;] \u0026amp;gt; ./a.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00010\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The Boost version allows a runtime sized bitset compared with a \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/C%2B%2B_Standard_Library\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;standard library\u0026lt;/a\u0026gt; compile-time sized bitset.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The other option is to use bit fields:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;struct\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;bits\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; a:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; b:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; c:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n};\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;struct\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;bits\u0026lt;/span\u0026gt; mybits;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;defines a 3-bit field (actually, it\u0026apos;s three 1-bit felds). Bit operations now become a bit (haha) simpler:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To set or clear a bit:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;mybits.b\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;mybits.c\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;To toggle a bit:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;mybits.a = !mybits.a;\nmybits.b = ~mybits.b;\nmybits.c ^= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* all work */\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Checking a bit:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;if (mybits.c)  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//if mybits.c is non zero the next line below will execute\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This only works with fixed-size bit fields. Otherwise you have to resort to the bit-twiddling techniques described in previous posts.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I use macros defined in a header file to handle bit set and clear:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* a=target variable, b=bit number to act upon 0-n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BIT_SET(a,b) ((a) |= (1ULL\u0026amp;lt;\u0026amp;lt;(b)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BIT_CLEAR(a,b) ((a) \u0026amp;amp;= ~(1ULL\u0026amp;lt;\u0026amp;lt;(b)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BIT_FLIP(a,b) ((a) ^= (1ULL\u0026amp;lt;\u0026amp;lt;(b)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BIT_CHECK(a,b) (!!((a) \u0026amp;amp; (1ULL\u0026amp;lt;\u0026amp;lt;(b))))        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// \u0026apos;!!\u0026apos; to make sure this returns 0 or 1\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BITMASK_SET(x, mask) ((x) |= (mask))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BITMASK_CLEAR(x, mask) ((x) \u0026amp;amp;= (~(mask)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BITMASK_FLIP(x, mask) ((x) ^= (mask))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BITMASK_CHECK_ALL(x, mask) (!(~(x) \u0026amp;amp; (mask)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BITMASK_CHECK_ANY(x, mask) ((x) \u0026amp;amp; (mask))\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It is sometimes worth using an \u0026lt;code\u0026gt;enum\u0026lt;/code\u0026gt; to \u0026lt;em\u0026gt;name\u0026lt;/em\u0026gt; the bits:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;enum ThingFlags = {\n  ThingMask  = 0x0000,\n  ThingFlag0 = 1 \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;0,\n  ThingFlag1 = 1 \u0026amp;lt;\u0026amp;lt; 1,\n  ThingError = 1 \u0026amp;lt;\u0026amp;lt; 8,\n}\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then use the \u0026lt;em\u0026gt;names\u0026lt;/em\u0026gt; later on. I.e. write \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-erlang\u0026quot;\u0026gt;thingstate |= ThingFlag1;\nthingstate \u0026amp;amp;= ~ThingFlag0;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(thing \u0026amp;amp; ThingError)\u0026lt;/span\u0026gt; {...}\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;to set, clear and test. This way you hide the magic numbers from the rest of your code. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Other than that I endorse Jeremy\u0026apos;s solution.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;From \u0026lt;a href=\u0026quot;http://snippets.org/code/temp/snip-c.zip\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;snip-c.zip\u0026lt;/a\u0026gt;\u0026apos;s bitops.h:\u0026lt;/h2\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-objectivec\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/*\n**  Bit set, clear, and test operations\n**\n**  public domain snippet by Bob Stout\n*/\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typedef\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;enum\u0026lt;/span\u0026gt; {ERROR = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;FALSE\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;TRUE\u0026lt;/span\u0026gt;} LOGICAL;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BOOL(x) (!(!(x)))\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BitSet(arg,posn) ((arg) | (1L \u0026amp;lt;\u0026amp;lt; (posn)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BitClr(arg,posn) ((arg) \u0026amp;amp; ~(1L \u0026amp;lt;\u0026amp;lt; (posn)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BitTst(arg,posn) BOOL((arg) \u0026amp;amp; (1L \u0026amp;lt;\u0026amp;lt; (posn)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BitFlp(arg,posn) ((arg) ^ (1L \u0026amp;lt;\u0026amp;lt; (posn)))\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;OK, let\u0026apos;s analyze things...\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The common expression that you seem to be having problems with in all of these is \u0026quot;(1L \u0026amp;lt;\u0026amp;lt; (posn))\u0026quot;. All this does is create a mask with a single bit on\nand which will work with any integer type. The \u0026quot;posn\u0026quot; argument specifies the\nposition where you want the bit. If posn==0, then this expression will\nevaluate to:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;binary.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If posn==8, it will evaluate to:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;binary.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;In other words, it simply creates a field of 0\u0026apos;s with a 1 at the specified\nposition. The only tricky part is in the BitClr() macro where we need to set\na single 0 bit in a field of 1\u0026apos;s. This is accomplished by using the 1\u0026apos;s\ncomplement of the same expression as denoted by the tilde (~) operator.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Once the mask is created it\u0026apos;s applied to the argument just as you suggest,\nby use of the bitwise and (\u0026amp;amp;), or (|), and xor (^) operators. Since the mask\nis of type long, the macros will work just as well on char\u0026apos;s, short\u0026apos;s, int\u0026apos;s,\nor long\u0026apos;s.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The bottom line is that this is a general solution to an entire class of\nproblems. It is, of course, possible and even appropriate to rewrite the\nequivalent of any of these macros with explicit mask values every time you\nneed one, but why do it? Remember, the macro substitution occurs in the\npreprocessor and so the generated code will reflect the fact that the values\nare considered constant by the compiler - i.e. it\u0026apos;s just as efficient to use\nthe generalized macros as to \u0026quot;reinvent the wheel\u0026quot; every time you need to do\nbit manipulation. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Unconvinced? Here\u0026apos;s some test code - I used Watcom C with full optimization\nand without using _cdecl so the resulting disassembly would be as clean as\npossible:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;----[ TEST.C ]----------------------------------------------------------------\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BOOL(x) (!(!(x)))\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BitSet(arg,posn) ((arg) | (1L \u0026amp;lt;\u0026amp;lt; (posn)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BitClr(arg,posn) ((arg) \u0026amp;amp; ~(1L \u0026amp;lt;\u0026amp;lt; (posn)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BitTst(arg,posn) BOOL((arg) \u0026amp;amp; (1L \u0026amp;lt;\u0026amp;lt; (posn)))\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; BitFlp(arg,posn) ((arg) ^ (1L \u0026amp;lt;\u0026amp;lt; (posn)))\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;bitmanip\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; word\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n      word = BitSet(word, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;);\n      word = BitSet(word, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;);\n      word = BitClr(word, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;);\n      word = BitFlp(word, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;);\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; word;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;----[ TEST.OUT (disassembled) ]-----------------------------------------------\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;Module:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;C:\\BINK\\tst.c\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;Group:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;DGROUP\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;CONST,CONST2,_DATA,_BSS\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;Segment:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;_TEXT\u0026lt;/span\u0026gt;  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;BYTE\u0026lt;/span\u0026gt;   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;00000008\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;bytes\u0026lt;/span\u0026gt;  \n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000  \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;0c\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;84\u0026lt;/span\u0026gt;             \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;bitmanip_\u0026lt;/span\u0026gt;       \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt;      \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;al,84H\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;bits\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0002  \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;80\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;f4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;02\u0026lt;/span\u0026gt;                          \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;xor\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;ah,02H\u0026lt;/span\u0026gt;    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;flip\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;of\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;EAX\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;of\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;AH)\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0005  \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;24\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;f7\u0026lt;/span\u0026gt;                             \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt;     \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;al,0f7H\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0007  \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;c3\u0026lt;/span\u0026gt;                                \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;ret\u0026lt;/span\u0026gt;     \n\n\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;No\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;disassembly\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;errors\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;----[ finis ]----------------------------------------------------------------- \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For the beginner I would like to explain a bit more with an example:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x55\u0026lt;/span\u0026gt;;\nbitnum : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;rd.\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;\u0026amp;amp;\u0026lt;/code\u0026gt; operator is used check the bit:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0101 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0101\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;___________\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(mean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;0:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;False\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;).\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;It\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;will\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;work\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;fine\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;the\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;third\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(then\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;the\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;answer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;will\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;be\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;True\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Toggle or Flip:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0101 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0101\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;^\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;___________\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0101 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1101\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(Flip\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;the\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;third\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;without\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;affecting\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;other\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;bits)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;|\u0026lt;/code\u0026gt; operator: set the bit\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0101 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0101\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;___________\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0101 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1101\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(set\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;the\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;third\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;without\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;affecting\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;other\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;bits)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;As this is tagged \u0026quot;embedded\u0026quot; I\u0026apos;ll assume you\u0026apos;re using a microcontroller. All of the above suggestions are valid \u0026amp;amp; work (read-modify-write, unions, structs, etc.).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;However, during a bout of oscilloscope-based debugging I was amazed to find that these methods have a considerable overhead in CPU cycles compared to writing a value directly to the micro\u0026apos;s PORTnSET / PORTnCLEAR registers which makes a real difference where there are tight loops / high-frequency ISR\u0026apos;s toggling pins.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For those unfamiliar: In my example, the micro has a general pin-state register PORTn which reflects the output pins, so doing PORTn |= BIT_TO_SET results in a read-modify-write to that register. However, the PORTnSET / PORTnCLEAR registers take a \u0026apos;1\u0026apos; to mean \u0026quot;please make this bit 1\u0026quot; (SET) or \u0026quot;please make this bit zero\u0026quot; (CLEAR) and a \u0026apos;0\u0026apos; to mean \u0026quot;leave the pin alone\u0026quot;. so, you end up with two port addresses depending whether you\u0026apos;re setting or clearing the bit (not always convenient) but a \u0026lt;em\u0026gt;much\u0026lt;/em\u0026gt; faster reaction and smaller assembled code.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here\u0026apos;s my favorite bit arithmetic macro, which works for any type of unsigned integer array from \u0026lt;code\u0026gt;unsigned char\u0026lt;/code\u0026gt; up to \u0026lt;code\u0026gt;size_t\u0026lt;/code\u0026gt; (which is the biggest type that should be efficient to work with):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-selector-id\u0026quot;\u0026gt;#define\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;BITOP\u0026lt;/span\u0026gt;(a,b,op) \\\n ((a)\u0026lt;span class=\u0026quot;hljs-selector-attr\u0026quot;\u0026gt;[(size_t)(b)/(8*sizeof *(a))]\u0026lt;/span\u0026gt; op ((size_t)\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026amp;lt;((size_t)(b)%(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;*sizeof *(a)))))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;To set a bit:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;BITOP\u0026lt;/span\u0026gt;(array, bit, |=);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;To clear a bit:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;BITOP\u0026lt;/span\u0026gt;(array, bit, \u0026amp;amp;=~);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;To toggle a bit:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;BITOP\u0026lt;/span\u0026gt;(array, bit, ^=);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;To test a bit:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-vhdl\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (BITOP(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt;, \u0026amp;amp;)) ...\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;etc.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The bitfield approach has other advantages in the embedded arena. You can define a struct that maps directly onto the bits in a particular hardware register.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;struct\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HwRegister\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; errorFlag:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// one-bit flag field\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; Mode:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;;       \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// three-bit mode field\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; StatusCode:\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// four-bit status code\u0026lt;/span\u0026gt;\n};\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;struct\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HwRegister\u0026lt;/span\u0026gt; CR3342_AReg;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You need to be aware of the bit packing order - I think it\u0026apos;s MSB first, but this may be implementation-dependent. Also, verify how your compiler handlers fields crossing byte boundaries.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can then read, write, test the individual values as before.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Let suppose few things first\u0026lt;/strong\u0026gt;\u0026lt;br\u0026gt;\n  \u0026lt;code\u0026gt;num = 55\u0026lt;/code\u0026gt; Integer to perform bitwise operations (set, get, clear, toggle).\u0026lt;br\u0026gt;\n  \u0026lt;code\u0026gt;n = 4\u0026lt;/code\u0026gt; 0 based bit position to perform bitwise operations.   \u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;h1\u0026gt;How to get a bit?\u0026lt;/h1\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;To get the \u0026lt;code\u0026gt;nth\u0026lt;/code\u0026gt; bit of num right shift \u0026lt;code\u0026gt;num\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt; times. Then perform bitwise AND \u0026lt;code\u0026gt;\u0026amp;amp;\u0026lt;/code\u0026gt; with 1.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; = (num \u0026amp;gt;\u0026amp;gt; n) \u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;How it works?\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0011 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(55\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;decimal)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;gt;\u0026amp;gt;\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(right\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;shift\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;times)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;-----------------\u0026lt;/span\u0026gt;\n       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0011\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;decimal)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;-----------------\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;result)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h1\u0026gt;How to set a bit?\u0026lt;/h1\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;To set a particular bit of number. Left shift 1 \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt; times. Then perform bitwise OR \u0026lt;code\u0026gt;|\u0026lt;/code\u0026gt; operation with \u0026lt;code\u0026gt;num\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;num |= (1 \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n);    // Equivalent to; num = (1 \u0026amp;lt;\u0026amp;lt; n\u0026lt;/span\u0026gt;) | num;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;How it works?\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;decimal)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;\u0026amp;lt;\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(left\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;shift\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;times)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;-----------------\u0026lt;/span\u0026gt;\n       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;|\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0011 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(55\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;decimal)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;-----------------\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;result)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h1\u0026gt;How to clear a bit?\u0026lt;/h1\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;Left shift 1, \u0026lt;code\u0026gt;n\u0026lt;/code\u0026gt; times i.e. \u0026lt;code\u0026gt;1 \u0026amp;lt;\u0026amp;lt; n\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Perform bitwise complement with the above result. So that the nth bit becomes unset and rest of bit becomes set i.e. \u0026lt;code\u0026gt;~ (1 \u0026amp;lt;\u0026amp;lt; n)\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Finally, perform bitwise AND \u0026lt;code\u0026gt;\u0026amp;amp;\u0026lt;/code\u0026gt; operation with the above result and \u0026lt;code\u0026gt;num\u0026lt;/code\u0026gt;. The above three steps together can be written as \u0026lt;code\u0026gt;num \u0026amp;amp; (~ (1 \u0026amp;lt;\u0026amp;lt; n))\u0026lt;/code\u0026gt;;\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/mf8hm.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/mf8hm.png\u0026quot; alt=\u0026quot;Steps to clear a bit\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;num \u0026amp;amp;= (~(1 \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n));    // Equivalent to; num = num \u0026amp;amp; (~(1 \u0026amp;lt;\u0026amp;lt; n\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;How it works?\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;decimal)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;\u0026amp;lt;\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(left\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;shift\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;times)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;-----------------\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;~\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;-----------------\u0026lt;/span\u0026gt;\n       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1110 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1111\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0011 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(55\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;decimal)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;-----------------\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0010 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;result)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h1\u0026gt;How to toggle a bit?\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;To toggle a bit we use bitwise XOR \u0026lt;code\u0026gt;^\u0026lt;/code\u0026gt; operator. Bitwise XOR operator evaluates to 1 if corresponding bit of both operands are different, otherwise evaluates to 0.  \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Which means to toggle a bit, we need to perform XOR operation with the bit you want to toggle and 1. \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;num ^= (1 \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n);    // Equivalent to; num = num ^ (1 \u0026amp;lt;\u0026amp;lt; n\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;How it works?\u0026lt;/strong\u0026gt; \u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;If the bit to toggle is 0 then, \u0026lt;code\u0026gt;0 ^ 1 =\u0026amp;gt; 1\u0026lt;/code\u0026gt;.  \u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;If the bit to toggle is 1 then, \u0026lt;code\u0026gt;1 ^ 1 =\u0026amp;gt; 0\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;decimal)\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;\u0026amp;lt;\u0026lt;/span\u0026gt;         \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(left\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;shift\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;times)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;-----------------\u0026lt;/span\u0026gt;\n       \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0001 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0000\u0026lt;/span\u0026gt;\n     \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;^\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0011 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(55\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;decimal)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;-----------------\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0010 \u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0111\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;(final\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;result)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Recommended reading - \u0026lt;a href=\u0026quot;https://codeforwin.org/2016/01/bitwise-operator-programming-exercises-and-solutions-in-c.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Bitwise operator exercises\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;Check a bit at an arbitrary location in a variable of arbitrary type:\u0026lt;/h2\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-lisp\u0026quot;\u0026gt;#define bit_test(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;, y)  ( ( ((\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; char*)\u0026amp;amp;(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;))[(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;)\u0026amp;gt;\u0026amp;gt;3] \u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;x80 \u0026amp;gt;\u0026amp;gt; ((\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;)\u0026amp;amp;0x07)) \u0026amp;gt;\u0026amp;gt; (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;-((\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;y\u0026lt;/span\u0026gt;)\u0026amp;amp;0x07) ) )\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Sample usage:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; arr[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;] = { \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x01\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x23\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x45\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x67\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x89\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0xAB\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0xCD\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0xEF\u0026lt;/span\u0026gt; };\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; ix = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; ix \u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;64\u0026lt;/span\u0026gt;; ++ix)\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;printf\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bit %d is %d\\n\u0026quot;\u0026lt;/span\u0026gt;, ix, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bit_test\u0026lt;/span\u0026gt;(arr, ix));\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Notes:\u0026lt;/strong\u0026gt;\nThis is designed to be fast (given its flexibility) and non-branchy.  It results in efficient SPARC machine code when compiled Sun Studio 8; I\u0026apos;ve also tested it using MSVC++ 2008 on amd64.  It\u0026apos;s possible to make similar macros for setting and clearing bits.  The key difference of this solution compared with many others here is that it works for any location in pretty much any type of variable.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;More general, for arbitrary sized bitmaps:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-lisp\u0026quot;\u0026gt;#define BITS \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\n#define BIT_SET(  \u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;p\u0026lt;/span\u0026gt;, n) (\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;p\u0026lt;/span\u0026gt;[(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;n\u0026lt;/span\u0026gt;)/BITS] |=  (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;x80\u0026amp;gt;\u0026amp;gt;((\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;n\u0026lt;/span\u0026gt;)%BITS)))\n#define BIT_CLEAR(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;p\u0026lt;/span\u0026gt;, n) (\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;p\u0026lt;/span\u0026gt;[(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;n\u0026lt;/span\u0026gt;)/BITS] \u0026lt;span class=\u0026quot;hljs-symbol\u0026quot;\u0026gt;\u0026amp;amp;=\u0026lt;/span\u0026gt; ~(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;x80\u0026amp;gt;\u0026amp;gt;((\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;n\u0026lt;/span\u0026gt;)%BITS)))\n#define BIT_ISSET(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;p\u0026lt;/span\u0026gt;, n) (\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;p\u0026lt;/span\u0026gt;[(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;n\u0026lt;/span\u0026gt;)/BITS] \u0026amp;amp;   (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;x80\u0026amp;gt;\u0026amp;gt;((\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;n\u0026lt;/span\u0026gt;)%BITS)))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This program is to change any data bit from 0 to 1 or 1 to 0:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-haskell\u0026quot;\u0026gt;{\n    unsigned int \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt; = 0x000000F0;\u0026lt;/span\u0026gt;\n    int bitpos = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;\n    int bitvalue = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n    unsigned int bit = \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;;\u0026lt;/span\u0026gt;\n    bit = (bit\u0026amp;gt;\u0026amp;gt;bitpos)\u0026amp;amp;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x00000001\u0026lt;/span\u0026gt;;\n    int invbitvalue = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x00000001\u0026lt;/span\u0026gt;\u0026amp;amp;(~bitvalue);\n    printf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%x\\n\u0026quot;\u0026lt;/span\u0026gt;,bit);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (bitvalue == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n    {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (bit == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n            printf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%x\\n\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;);\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n        {\n             \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt; = (\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;^(\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;invbitvalue\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;bitpos\u0026lt;/span\u0026gt;));\u0026lt;/span\u0026gt;\n             printf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;%x\\n\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;);\u0026lt;/span\u0026gt;\n        }\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n    {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (bit == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n            printf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;elseif %x\\n\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;);\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n        {\n            \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt; = (\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;|(\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;bitvalue\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;bitpos\u0026lt;/span\u0026gt;));\u0026lt;/span\u0026gt;\n            printf(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;else %x\\n\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;);\u0026lt;/span\u0026gt;\n        }\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you\u0026apos;re doing a lot of bit twiddling you might want to use masks which will make the whole thing quicker. The following functions are very fast and are still flexible (they allow bit twiddling in bit maps of any size).\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;const unsigned \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; TQuickByteMask[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;] =\n{\n   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x01\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x02\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x04\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x08\u0026lt;/span\u0026gt;,\n   \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x10\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x20\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x40\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x80\u0026lt;/span\u0026gt;,\n};\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Set bit in any sized bit mask.\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@return\u0026lt;/span\u0026gt;    none\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;     bit    - Bit number.\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;     bitmap - Pointer to bitmap.\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;TSetBit\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;( \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; bit, unsigned \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *bitmap)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; n, x;\n\n    x = bit / \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Index to byte.\u0026lt;/span\u0026gt;\n    n = bit % \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Specific bit in byte.\u0026lt;/span\u0026gt;\n\n    bitmap[x] |= TQuickByteMask[n];        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Set bit.\u0026lt;/span\u0026gt;\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Reset bit in any sized mask.\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@return\u0026lt;/span\u0026gt;  None\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;   bit    - Bit number.\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;   bitmap - Pointer to bitmap.\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;TResetBit\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;( \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; bit, unsigned \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *bitmap)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; n, x;\n\n    x = bit / \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Index to byte.\u0026lt;/span\u0026gt;\n    n = bit % \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Specific bit in byte.\u0026lt;/span\u0026gt;\n\n    bitmap[x] \u0026amp;amp;= (~TQuickByteMask[n]);    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Reset bit.\u0026lt;/span\u0026gt;\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Toggle bit in any sized bit mask.\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@return\u0026lt;/span\u0026gt;   none\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;   bit    - Bit number.\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;   bitmap - Pointer to bitmap.\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;TToggleBit\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;( \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; bit, unsigned \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *bitmap)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; n, x;\n\n    x = bit / \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Index to byte.\u0026lt;/span\u0026gt;\n    n = bit % \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Specific bit in byte.\u0026lt;/span\u0026gt;\n\n    bitmap[x] ^= TQuickByteMask[n];        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Toggle bit.\u0026lt;/span\u0026gt;\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Checks specified bit.\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@return\u0026lt;/span\u0026gt;  1 if bit set else 0.\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;   bit    - Bit number.\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;   bitmap - Pointer to bitmap.\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;TIsBitSet\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;( \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; bit, const unsigned \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *bitmap)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; n, x;\n\n    x = bit / \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Index to byte.\u0026lt;/span\u0026gt;\n    n = bit % \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;;    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Specific bit in byte.\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Test bit (logigal AND).\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (bitmap[x] \u0026amp;amp; TQuickByteMask[n])\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Checks specified bit.\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@return\u0026lt;/span\u0026gt;  1 if bit reset else 0.\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;   bit    - Bit number.\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;   bitmap - Pointer to bitmap.\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;TIsBitReset\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;( \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;short\u0026lt;/span\u0026gt; bit, const unsigned \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *bitmap)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; TIsBitSet(bit, bitmap) ^ \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Count number of bits set in a bitmap.\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@return\u0026lt;/span\u0026gt;   Number of bits set.\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;    bitmap - Pointer to bitmap.\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt;    size   - Bitmap size (in bits).\n *\n * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@note\u0026lt;/span\u0026gt;    Not very efficient in terms of execution speed. If you are doing\n *        some computationally intense stuff you may need a more complex\n *        implementation which would be faster (especially for big bitmaps).\n *        See (http://graphics.stanford.edu/~seander/bithacks.html).\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;TCountBits\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;( const unsigned \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; *bitmap, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; size)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; i, count = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i\u0026amp;lt;size; i++)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (TIsBitSet(i, bitmap))\n            count++;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; count;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note, to set bit \u0026apos;n\u0026apos; in a 16 bit integer you do the following:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;TSetBit\u0026lt;/span\u0026gt;( n, \u0026amp;amp;my_int);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It\u0026apos;s up to you to ensure that the bit number is within the range of the bit map that you pass. Note that for little endian processors that bytes, words, dwords, qwords, etc., map correctly to each other in memory (main reason that little endian processors are \u0026apos;better\u0026apos; than big-endian processors, ah, I feel a flame war coming on...).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Use this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-dart\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; ToggleNthBit ( unsigned char n, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt; )\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt; \u0026amp;amp; (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n))\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt; \u0026amp;amp;= ~(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt; |= (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Expanding on the \u0026lt;code\u0026gt;bitset\u0026lt;/code\u0026gt; answer:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;iostream\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;bitset\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;string\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;using\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;namespace\u0026lt;/span\u0026gt; std;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n  \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;bitset\u0026amp;lt;8\u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;byte\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(std::string(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;10010011\u0026quot;\u0026lt;/span\u0026gt;);\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Set Bit\u0026lt;/span\u0026gt;\n  byte.set(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 10010111\u0026lt;/span\u0026gt;\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Clear Bit\u0026lt;/span\u0026gt;\n  byte.reset(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 10010101\u0026lt;/span\u0026gt;\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Toggle Bit\u0026lt;/span\u0026gt;\n  byte.flip(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// 00010101\u0026lt;/span\u0026gt;\n\n  cout \u0026amp;lt;\u0026amp;lt; byte \u0026amp;lt;\u0026amp;lt; endl;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you want to perform this all operation with C programming in the \u0026lt;strong\u0026gt;Linux kernel\u0026lt;/strong\u0026gt; then I suggest to use standard APIs of the Linux kernel.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;See \u0026lt;a href=\u0026quot;https://www.kernel.org/doc/htmldocs/kernel-api/ch02s03.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://www.kernel.org/doc/htmldocs/kernel-api/ch02s03.html\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-vhdl\u0026quot;\u0026gt;set_bit  Atomically set a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; memory\nclear_bit  Clears a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; memory\nchange_bit  Toggle a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; memory\ntest_and_set_bit  Set a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; its old value\ntest_and_clear_bit  Clear a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; its old value\ntest_and_change_bit  Change a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;and\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; its old value\ntest_bit  Determine whether a \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bit\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;is\u0026lt;/span\u0026gt; set\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note: Here the whole operation happens in a single step. So these all are  guaranteed to be \u0026lt;strong\u0026gt;atomic\u0026lt;/strong\u0026gt; even on SMP computers and are useful\nto keep coherence across processors.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Visual C 2010, and perhaps many other compilers, have direct support for boolean operations built in. A bit has two possible values, just like a boolean, so we can use booleans instead - even if they take up more space than a single bit in memory in this representation. This works, even the \u0026lt;code\u0026gt;sizeof()\u0026lt;/code\u0026gt; operator works properly. \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt;    IsGph[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;256\u0026lt;/span\u0026gt;], IsNotGph[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;256\u0026lt;/span\u0026gt;];\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//  Initialize boolean array to detect printable characters\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;sizeof\u0026lt;/span\u0026gt;(IsGph); i++)  {\n    IsGph[i] = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;isgraph\u0026lt;/span\u0026gt;((\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt;)i);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;So, to your question, \u0026lt;code\u0026gt;IsGph[i] =1\u0026lt;/code\u0026gt;, or \u0026lt;code\u0026gt;IsGph[i] =0\u0026lt;/code\u0026gt; make setting and clearing bools easy.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;To find unprintable characters:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//  Initialize boolean array to detect UN-printable characters, \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//  then call function to toggle required bits true, while initializing a 2nd\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//  boolean array as the complement of the 1st.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt;(i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;sizeof\u0026lt;/span\u0026gt;(IsGph); i++)  {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(IsGph[i])    {\n         IsNotGph[i] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n    }   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;   {\n         IsNotGph[i] = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note there is nothing \u0026quot;special\u0026quot; about this code. It treats a bit like an integer - which technically, it is. A 1 bit integer that can hold 2 values, and 2 values only.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I once used this approach to find duplicate loan records, where loan_number was the ISAM key, using the 6-digit loan number as an index into the bit array. Savagely fast, and after 8 months, proved that the mainframe system we were getting the data from was in fact malfunctioning. The simplicity of bit arrays makes confidence in their correctness very high - vs a searching approach for example.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-dart\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; set_nth_bit(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n){    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt; | \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n);\n}\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; clear_nth_bit(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n){    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt; \u0026amp;amp; ~( \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n));\n}\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; toggle_nth_bit(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n){    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt; ^ (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n);\n}\n\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; check_nth_bit(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n){    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt; \u0026amp;amp; (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here are some macros I use:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-lisp\u0026quot;\u0026gt;SET_FLAG(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;Status\u0026lt;/span\u0026gt;, Flag)            ((\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;Status\u0026lt;/span\u0026gt;) |= (\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;Flag\u0026lt;/span\u0026gt;))\nCLEAR_FLAG(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;Status\u0026lt;/span\u0026gt;, Flag)          ((\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;Status\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-symbol\u0026quot;\u0026gt;\u0026amp;amp;=\u0026lt;/span\u0026gt; ~(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;Flag\u0026lt;/span\u0026gt;))\nINVALID_FLAGS(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;ulFlags\u0026lt;/span\u0026gt;, ulAllowed) ((\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;ulFlags\u0026lt;/span\u0026gt;) \u0026amp;amp; ~(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;ulAllowed\u0026lt;/span\u0026gt;))\nTEST_FLAGS(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;t\u0026lt;/span\u0026gt;,ulMask, ulBit)       (((\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;t\u0026lt;/span\u0026gt;)\u0026amp;amp;(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;ulMask\u0026lt;/span\u0026gt;)) == (\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;ulBit\u0026lt;/span\u0026gt;))\nIS_FLAG_SET(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;t\u0026lt;/span\u0026gt;,ulMask)             TEST_FLAGS(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;t\u0026lt;/span\u0026gt;,ulMask,ulMask)\nIS_FLAG_CLEAR(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;t\u0026lt;/span\u0026gt;,ulMask)           TEST_FLAGS(\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;t\u0026lt;/span\u0026gt;,ulMask,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;How do you set, clear, and toggle a single bit?\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;To address a common coding pitfall when attempting to form the mask:\u0026lt;br\u0026gt;\n\u0026lt;strong\u0026gt;\u0026lt;code\u0026gt;1\u0026lt;/code\u0026gt; is not always wide enough\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;What problems happen when \u0026lt;code\u0026gt;number\u0026lt;/code\u0026gt; is a wider type than \u0026lt;code\u0026gt;1\u0026lt;/code\u0026gt;?\u0026lt;br\u0026gt;\n\u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt; may be too great for the shift \u0026lt;code\u0026gt;1 \u0026amp;lt;\u0026amp;lt; x\u0026lt;/code\u0026gt; leading to \u0026lt;em\u0026gt;undefined behavior\u0026lt;/em\u0026gt; (UB).  Even if \u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt; is not too great, \u0026lt;code\u0026gt;~\u0026lt;/code\u0026gt; may not flip enough most-significant-bits.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// assume 32 bit int/unsigned\u0026lt;/span\u0026gt;\nunsigned long long \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;foo\u0026lt;/span\u0026gt;();\n\nunsigned x = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;40\u0026lt;/span\u0026gt;; \n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt; |= (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; x);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// UB\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt; ^= (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; x);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// UB\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt; \u0026amp;amp;= ~(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; x); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// UB\u0026lt;/span\u0026gt;\n\nx = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt; \u0026amp;amp;= ~(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; x); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Wrong mask, not wide enough\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;To insure 1 is wide enough:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Code could use \u0026lt;code\u0026gt;1ull\u0026lt;/code\u0026gt; or pedantically \u0026lt;code\u0026gt;(uintmax_t)1\u0026lt;/code\u0026gt; and let the compiler optimize.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;number |= (1ull \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;x);\nnumber |= ((uintmax_t)1 \u0026amp;lt;\u0026amp;lt; x\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or cast - which makes for coding/review/maintenance issues keeping the cast correct and up-to-date.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;number |= (type_of_number)1 \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;x;\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or gently promote the \u0026lt;code\u0026gt;1\u0026lt;/code\u0026gt; by forcing a math operation that is as least as wide as the type of \u0026lt;code\u0026gt;number\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt; |= (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;number\u0026lt;/span\u0026gt;*\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) \u0026amp;lt;\u0026amp;lt; x;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;As with most bit manipulations, best to work with \u0026lt;em\u0026gt;unsigned\u0026lt;/em\u0026gt; types rather than \u0026lt;em\u0026gt;signed\u0026lt;/em\u0026gt; ones\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This program is based out of @Jeremy\u0026apos;s above solution. If someone wish to quickly play around.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;BitwiseOperations\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;String args[]\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt; {\n\n        setABit(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// set the 4th bit, 0000 -\u0026amp;gt; 1000 [8]\u0026lt;/span\u0026gt;\n        clearABit(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;16\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// clear the 5th bit, 10000 -\u0026amp;gt; 00000 [0]\u0026lt;/span\u0026gt;\n        toggleABit(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// toggle the 4th bit, 1000 -\u0026amp;gt; 0000 [0]\u0026lt;/span\u0026gt;\n        checkABit(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// check the 4th bit 1000 -\u0026amp;gt; true \u0026lt;/span\u0026gt;\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;setABit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; input, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt; {\n        input = input | ( \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-1\u0026lt;/span\u0026gt;);\n        System.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt;.println(input);\n    }\n\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;clearABit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; input, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt; {\n        input = input \u0026amp;amp; ~(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-1\u0026lt;/span\u0026gt;);\n        System.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt;.println(input);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;toggleABit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; input, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt; {\n        input = input ^ (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-1\u0026lt;/span\u0026gt;);\n        System.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt;.println(input);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;checkABit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; input, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt; {\n        boolean isSet = ((input \u0026amp;gt;\u0026amp;gt; n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;-1\u0026lt;/span\u0026gt;) \u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;; \n        System.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt;.println(isSet);\n    }\n}\n\n\nOutput :\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A templated version (put in a header file) with support for changing multiple bits (works on AVR microcontrollers btw):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cpp s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;namespace\u0026lt;/span\u0026gt; bit {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;template\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T1, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T2\u0026amp;gt;\n  \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;constexpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;inline\u0026lt;/span\u0026gt; T1 \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(T2 bit)\u0026lt;/span\u0026gt; \n  \u0026lt;/span\u0026gt;{\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (T1)\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; bit;}\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;template\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T1, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T3, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; ...T2\u0026amp;gt;\n  \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;constexpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;inline\u0026lt;/span\u0026gt; T1 \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(T3 bit, T2 ...bits)\u0026lt;/span\u0026gt; \n  \u0026lt;/span\u0026gt;{\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ((T1)\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; bit) | \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026amp;lt;T1\u0026amp;gt;(bits...);}\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Set these bits (others retain their state) */\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;template\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T1, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; ...T2\u0026amp;gt;\n  \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;constexpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;inline\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(T1 \u0026amp;amp;variable, T2 ...bits)\u0026lt;/span\u0026gt; \n  \u0026lt;/span\u0026gt;{variable |= \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026amp;lt;T1\u0026amp;gt;(bits...);}\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Set only these bits (others will be cleared) */\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;template\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T1, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; ...T2\u0026amp;gt;\n  \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;constexpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;inline\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;setOnly\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(T1 \u0026amp;amp;variable, T2 ...bits)\u0026lt;/span\u0026gt; \n  \u0026lt;/span\u0026gt;{variable = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026amp;lt;T1\u0026amp;gt;(bits...);}\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Clear these bits (others retain their state) */\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;template\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T1, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; ...T2\u0026amp;gt;\n  \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;constexpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;inline\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;clear\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(T1 \u0026amp;amp;variable, T2 ...bits)\u0026lt;/span\u0026gt; \n  \u0026lt;/span\u0026gt;{variable \u0026amp;amp;= ~\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026amp;lt;T1\u0026amp;gt;(bits...);}\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Flip these bits (others retain their state) */\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;template\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T1, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; ...T2\u0026amp;gt;\n  \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;constexpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;inline\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;flip\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(T1 \u0026amp;amp;variable, T2 ...bits)\u0026lt;/span\u0026gt; \n  \u0026lt;/span\u0026gt;{variable ^= \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026amp;lt;T1\u0026amp;gt;(bits...);}\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Check if any of these bits are set */\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;template\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T1, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; ...T2\u0026amp;gt;\n  \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;constexpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;inline\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;isAnySet\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; T1 \u0026amp;amp;variable, T2 ...bits)\u0026lt;/span\u0026gt; \n  \u0026lt;/span\u0026gt;{\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; variable \u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026amp;lt;T1\u0026amp;gt;(bits...);}\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Check if all these bits are set */\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;template\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T1, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; ...T2\u0026amp;gt;\n  \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;constexpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;inline\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;isSet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; T1 \u0026amp;amp;variable, T2 ...bits)\u0026lt;/span\u0026gt; \n  \u0026lt;/span\u0026gt;{\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ((variable \u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026amp;lt;T1\u0026amp;gt;(bits...)) == \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026amp;lt;T1\u0026amp;gt;(bits...));}\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Check if all these bits are not set */\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;template\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; T1, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typename\u0026lt;/span\u0026gt; ...T2\u0026amp;gt;\n  \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;constexpr\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;inline\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;isNotSet\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; T1 \u0026amp;amp;variable, T2 ...bits)\u0026lt;/span\u0026gt; \n  \u0026lt;/span\u0026gt;{\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; ((variable \u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026amp;lt;T1\u0026amp;gt;(bits...)) != \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitmask\u0026lt;/span\u0026gt;\u0026amp;lt;T1\u0026amp;gt;(bits...));}\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Example of use:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-cpp s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;iostream\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;include\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026amp;lt;bitset\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// for console output of binary values\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// and include the code above of course\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;using\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;namespace\u0026lt;/span\u0026gt; std;\n\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;uint8_t\u0026lt;/span\u0026gt; v = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0b1111\u0026apos;1100\u0026lt;/span\u0026gt;;\n  bit::\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(v, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n  cout \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitset\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026amp;gt;(v) \u0026amp;lt;\u0026amp;lt; endl;\n\n  bit::\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;clear\u0026lt;/span\u0026gt;(v, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n  cout \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitset\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026amp;gt;(v) \u0026amp;lt;\u0026amp;lt; endl;\n\n  bit::\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;flip\u0026lt;/span\u0026gt;(v, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n  cout \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitset\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026amp;gt;(v) \u0026amp;lt;\u0026amp;lt; endl;\n\n  bit::\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;clear\u0026lt;/span\u0026gt;(v, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;6\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;);\n  cout \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitset\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026amp;gt;(v) \u0026amp;lt;\u0026amp;lt; endl;\n\n  bit::\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;flip\u0026lt;/span\u0026gt;(v, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;7\u0026lt;/span\u0026gt;);\n  cout \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;bitset\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;8\u0026lt;/span\u0026gt;\u0026amp;gt;(v) \u0026amp;lt;\u0026amp;lt; endl;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;BTW: It turns out that constexpr and inline is not used if not sending the optimizer argument (e.g.: -O3) to the compiler. Feel free to try the code at \u0026lt;a href=\u0026quot;https://godbolt.org/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://godbolt.org/\u0026lt;/a\u0026gt; and look at the ASM output.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is a routine in C to perform the basic bitwise operations:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-cpp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;#\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;define\u0026lt;/span\u0026gt; INT_BIT (unsigned int) (sizeof(unsigned int) * 8U) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//number of bits in unsigned int\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;main\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n\u0026lt;/span\u0026gt;{\n    \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; k = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//k is the bit position; here it is the 5th bit from the LSb (0th bit)\u0026lt;/span\u0026gt;\n    \n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;unsigned\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; regA = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0x00007C7C\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//we perform bitwise operations on regA\u0026lt;/span\u0026gt;\n    \n    regA |= (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1U\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; k);    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Set kth bit\u0026lt;/span\u0026gt;\n    \n    regA \u0026amp;amp;= ~(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1U\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; k);   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Clear kth bit\u0026lt;/span\u0026gt;\n    \n    regA ^= (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1U\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; k);    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Toggle kth bit\u0026lt;/span\u0026gt;\n    \n    regA = (regA \u0026amp;lt;\u0026amp;lt; k) | regA \u0026amp;gt;\u0026amp;gt; (INT_BIT - k); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Rotate left by k bits\u0026lt;/span\u0026gt;\n    \n    regA = (regA \u0026amp;gt;\u0026amp;gt; k) | regA \u0026amp;lt;\u0026amp;lt; (INT_BIT - k); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Rotate right by k bits\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;   \n}\n\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;Setting the nth bit to x (bit value) without using -1\u0026lt;/h1\u0026gt;\n\u0026lt;p\u0026gt;Sometimes when you are not sure what -1 or the like will result in, you may wish to set the nth bit without using -1:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;number = (((number | (1 \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n)) ^ (1 \u0026amp;lt;\u0026amp;lt; n\u0026lt;/span\u0026gt;))) | (x \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n);\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Explanation: \u0026lt;code\u0026gt;((number | (1 \u0026amp;lt;\u0026amp;lt; n)\u0026lt;/code\u0026gt; sets the nth bit to 1 (where \u0026lt;code\u0026gt;|\u0026lt;/code\u0026gt; denotes bitwise OR), then with \u0026lt;code\u0026gt;(...) ^ (1 \u0026amp;lt;\u0026amp;lt; n)\u0026lt;/code\u0026gt; we set the nth bit to 0, and finally with \u0026lt;code\u0026gt;(...) | x \u0026amp;lt;\u0026amp;lt; n)\u0026lt;/code\u0026gt; we set the nth bit that was 0, to (bit value) \u0026lt;code\u0026gt;x\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This also works in \u0026lt;code\u0026gt;golang\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Try one of these functions in the C language to change n bit:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; bitfield;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Start at 0th position\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;chang_n_bit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n    bitfield = (bitfield | (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n)) \u0026amp;amp; (~( (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n) ^ (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n) ));\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;void chang_n_bit(int n, int value)\n{\n    bitfield = (bitfield | (1 \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n)) \u0026amp;amp; ((value \u0026amp;lt;\u0026amp;lt; n\u0026lt;/span\u0026gt;) | ((~0) ^ (1 \u0026amp;lt;\u0026amp;lt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;n)));\n}\n\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;chang_n_bit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;)\n        bitfield |= \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n        bitfield \u0026amp;amp;= ~\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt; ^ (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n);\n}\n\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;char\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;get_n_bit\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; n\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\n{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (bitfield \u0026amp;amp; (\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026amp;lt;\u0026amp;lt; n)) ? \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":508,"title":"How do I set, clear, and toggle a single bit?","content":"\n                \n\u0026lt;p\u0026gt;How do I set, clear, and toggle a bit?\u0026lt;/p\u0026gt;\n    ","slug":"how-do-i-set-clear-and-toggle-a-single-bit-1657388227052","postType":"QUESTION","createdAt":"2022-07-09T17:37:07.000Z","updatedAt":"2022-07-09T17:37:07.000Z","tags":[{"id":2528,"name":"bit-manipulation","slug":"bit-manipulation","createdAt":"2022-07-09T17:37:07.000Z","updatedAt":"2022-07-09T17:37:07.000Z","Questions_Tags":{"questionId":508,"tagId":2528}},{"id":2529,"name":"bitwise-operators","slug":"bitwise-operators","createdAt":"2022-07-09T17:37:07.000Z","updatedAt":"2022-07-09T17:37:07.000Z","Questions_Tags":{"questionId":508,"tagId":2529}}],"relatedQuestions":[{"title":"How do I set, clear, and toggle a single bit?","slug":"how-do-i-set-clear-and-toggle-a-single-bit-1657388227052","tags":[{"name":"bit-manipulation","Questions_Tags":{"questionId":508,"tagId":2528}},{"name":"bitwise-operators","Questions_Tags":{"questionId":508,"tagId":2529}}]}]},"randomQuestions":[{"title":"How do I Pandas group-by to get sum?","slug":"how-do-i-pandas-group-by-to-get-sum-1657387908708"},{"title":"How can I parse a JSON file with PHP? [duplicate]","slug":"how-can-i-parse-a-json-file-with-php-duplicate-1657388002325"},{"title":"How do I add a delay in a JavaScript loop?","slug":"how-do-i-add-a-delay-in-a-javascript-loop-1657388544679"},{"title":"How to manage startActivityForResult on Android","slug":"how-to-manage-startactivityforresult-on-android-1657387967393"},{"title":"Undefined, unspecified and implementation-defined behavior","slug":"undefined-unspecified-and-implementation-defined-behavior-1657384516085"},{"title":"Can PHP PDO Statements accept the table or column name as parameter?","slug":"can-php-pdo-statements-accept-the-table-or-column-name-as-parameter-1657387478588"},{"title":"How can I do a FULL OUTER JOIN in MySQL?","slug":"how-can-i-do-a-full-outer-join-in-mysql-1657388175444"},{"title":"Why JSF calls getters multiple times","slug":"why-jsf-calls-getters-multiple-times-1657388244489"},{"title":"How can I vertically align elements in a div?","slug":"how-can-i-vertically-align-elements-in-a-div-1657385504431"},{"title":"\"Cross origin requests are only supported for HTTP.\" error when loading a local file","slug":"\"cross-origin-requests-are-only-supported-for-http.\"-error-when-loading-a-local-file-1657387942403"},{"title":"How do I import a module given the full path?","slug":"how-do-i-import-a-module-given-the-full-path-1657388139965"},{"title":"I just assigned a variable, but echo $variable shows something else","slug":"i-just-assigned-a-variable-but-echo-dollarvariable-shows-something-else-1657387574561"},{"title":"Copy array by value","slug":"copy-array-by-value-1657387649531"},{"title":"How do I use shell variables in an awk script?","slug":"how-do-i-use-shell-variables-in-an-awk-script-1657387754261"},{"title":"Why does std::getline() skip input after a formatted extraction?","slug":"why-does-std::getline()-skip-input-after-a-formatted-extraction-1657384756118"},{"title":"Sending Email in Android using JavaMail API without using the default/built-in app","slug":"sending-email-in-android-using-javamail-api-without-using-the-defaultbuilt-in-app-1657387883400"},{"title":"How should a model be structured in MVC? [closed]","slug":"how-should-a-model-be-structured-in-mvc-closed-1657388394807"},{"title":"What's the simplest way to print a Java array?","slug":"what's-the-simplest-way-to-print-a-java-array-1657384702397"},{"title":"Persist variables between page loads","slug":"persist-variables-between-page-loads-1657388558452"},{"title":"How to avoid having class data shared among instances?","slug":"how-to-avoid-having-class-data-shared-among-instances-1657387687732"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-do-i-set-clear-and-toggle-a-single-bit-1657388227052"},"buildId":"xZs8haGjOP63QuDE0kxeX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>