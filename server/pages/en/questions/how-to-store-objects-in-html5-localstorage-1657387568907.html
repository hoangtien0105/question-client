<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="local-storage,solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/how-to-store-objects-in-html5-localstorage-1657387568907","name":"Questions"}}]}</script><title>How to store objects in HTML5 localStorage | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I&#x27;d like to store a JavaScript object in HTML5 localStorage, but my object is apparently being converted to a string.
I can store and retrieve primitive JavaScript types and arrays using localStorage, but objects don&#x27;t seem to work.  Should they?
Here&#x27;s my code:
var testObject = { &#x27;one&#x27;: 1, &#x27;two&#x27;: 2, &#x27;three&#x27;: 3 };
console.log(&#x27;typeof testObject: &#x27; + typeof testObject);
console.log(&#x27;testObject properties:&#x27;);
for (var prop in testObject) {
    console.log(&#x27;  &#x27; + prop + &#x27;: &#x27; + testObject[prop]);
}

// Put the object into storage
localStorage.setItem(&#x27;testObject&#x27;, testObject);

// Retrieve the object from storage
var retrievedObject = localStorage.getItem(&#x27;testObject&#x27;);

console.log(&#x27;typeof retrievedObject: &#x27; + typeof retrievedObject);
console.log(&#x27;Value of retrievedObject: &#x27; + retrievedObject);

The console output is
typeof testObject: object
testObject properties:
  one: 1
  two: 2
  three: 3
typeof retrievedObject: string
Value of retrievedObject: [object Object]

It looks to me like the setItem method is converting the input to a string before storing it.
I see this behavior in Safari, Chrome, and Firefox, so I assume it&#x27;s my misunderstanding of the HTML5 Web Storage specification, not a browser-specific bug or limitation.
I&#x27;ve tried to make sense of the structured clone algorithm described in 2 Common infrastructure.  I don&#x27;t fully understand what it&#x27;s saying, but maybe my problem has to do with my object&#x27;s properties not being enumerable (???).
Is there an easy workaround?

Update: The W3C eventually changed their minds about the structured-clone specification, and decided to change the spec to match the implementations.  See 12111 – spec for Storage object getItem(key) method does not match implementation behavior. So this question is no longer 100% valid, but the answers still may be of interest.
    "/><meta property="og:title" content="How to store objects in HTML5 localStorage | Solution Checker"/><meta property="og:description" content="I&#x27;d like to store a JavaScript object in HTML5 localStorage, but my object is apparently being converted to a string.
I can store and retrieve primitive JavaScript types and arrays using localStorage, but objects don&#x27;t seem to work.  Should they?
Here&#x27;s my code:
var testObject = { &#x27;one&#x27;: 1, &#x27;two&#x27;: 2, &#x27;three&#x27;: 3 };
console.log(&#x27;typeof testObject: &#x27; + typeof testObject);
console.log(&#x27;testObject properties:&#x27;);
for (var prop in testObject) {
    console.log(&#x27;  &#x27; + prop + &#x27;: &#x27; + testObject[prop]);
}

// Put the object into storage
localStorage.setItem(&#x27;testObject&#x27;, testObject);

// Retrieve the object from storage
var retrievedObject = localStorage.getItem(&#x27;testObject&#x27;);

console.log(&#x27;typeof retrievedObject: &#x27; + typeof retrievedObject);
console.log(&#x27;Value of retrievedObject: &#x27; + retrievedObject);

The console output is
typeof testObject: object
testObject properties:
  one: 1
  two: 2
  three: 3
typeof retrievedObject: string
Value of retrievedObject: [object Object]

It looks to me like the setItem method is converting the input to a string before storing it.
I see this behavior in Safari, Chrome, and Firefox, so I assume it&#x27;s my misunderstanding of the HTML5 Web Storage specification, not a browser-specific bug or limitation.
I&#x27;ve tried to make sense of the structured clone algorithm described in 2 Common infrastructure.  I don&#x27;t fully understand what it&#x27;s saying, but maybe my problem has to do with my object&#x27;s properties not being enumerable (???).
Is there an easy workaround?

Update: The W3C eventually changed their minds about the structured-clone specification, and decided to change the spec to match the implementations.  See 12111 – spec for Storage object getItem(key) method does not match implementation behavior. So this question is no longer 100% valid, but the answers still may be of interest.
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How to store objects in HTML5 localStorage","text":"I&apos;d like to store a JavaScript object in HTML5 localStorage, but my object is apparently being converted to a string.\nI can store and retrieve primitive JavaScript types and arrays using localStorage, but objects don&apos;t seem to work.  Should they?\nHere&apos;s my code:\nvar testObject = { &apos;one&apos;: 1, &apos;two&apos;: 2, &apos;three&apos;: 3 };\nconsole.log(&apos;typeof testObject: &apos; + typeof testObject);\nconsole.log(&apos;testObject properties:&apos;);\nfor (var prop in testObject) {\n    console.log(&apos;  &apos; + prop + &apos;: &apos; + testObject[prop]);\n}\n\n// Put the object into storage\nlocalStorage.setItem(&apos;testObject&apos;, testObject);\n\n// Retrieve the object from storage\nvar retrievedObject = localStorage.getItem(&apos;testObject&apos;);\n\nconsole.log(&apos;typeof retrievedObject: &apos; + typeof retrievedObject);\nconsole.log(&apos;Value of retrievedObject: &apos; + retrievedObject);\n\nThe console output is\ntypeof testObject: object\ntestObject properties:\n  one: 1\n  two: 2\n  three: 3\ntypeof retrievedObject: string\nValue of retrievedObject: [object Object]\n\nIt looks to me like the setItem method is converting the input to a string before storing it.\nI see this behavior in Safari, Chrome, and Firefox, so I assume it&apos;s my misunderstanding of the HTML5 Web Storage specification, not a browser-specific bug or limitation.\nI&apos;ve tried to make sense of the structured clone algorithm described in 2 Common infrastructure.  I don&apos;t fully understand what it&apos;s saying, but maybe my problem has to do with my object&apos;s properties not being enumerable (???).\nIs there an easy workaround?\n\nUpdate: The W3C eventually changed their minds about the structured-clone specification, and decided to change the spec to match the implementations.  See 12111 – spec for Storage object getItem(key) method does not match implementation behavior. So this question is no longer 100% valid, but the answers still may be of interest.\n    ","answerCount":24,"upVoteCount":500,"suggestedAnswer":[{"text":"Looking at the Apple, Mozilla and Mozilla again documentation, the functionality seems to be limited to handle only string key/value pairs.\n\nA workaround can be to stringify your object before storing it, and later parse it when you retrieve it:\n\nvar testObject = { &apos;one&apos;: 1, &apos;two&apos;: 2, &apos;three&apos;: 3 };\n\n// Put the object into storage\nlocalStorage.setItem(&apos;testObject&apos;, JSON.stringify(testObject));\n\n// Retrieve the object from storage\nvar retrievedObject = localStorage.getItem(&apos;testObject&apos;);\n\nconsole.log(&apos;retrievedObject: &apos;, JSON.parse(retrievedObject));\n\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"A minor improvement on a variant:\n\nStorage.prototype.setObject = function(key, value) {\n    this.setItem(key, JSON.stringify(value));\n}\n\nStorage.prototype.getObject = function(key) {\n    var value = this.getItem(key);\n    return value &amp;&amp; JSON.parse(value);\n}\n\n\nBecause of short-circuit evaluation, getObject() will immediately return null if key is not in Storage. It also will not throw a SyntaxError exception if value is &quot;&quot; (the empty string; JSON.parse() cannot handle that).\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"You might find it useful to extend the Storage object with these handy methods:\n\nStorage.prototype.setObject = function(key, value) {\n    this.setItem(key, JSON.stringify(value));\n}\n\nStorage.prototype.getObject = function(key) {\n    return JSON.parse(this.getItem(key));\n}\n\n\nThis way you get the functionality that you really wanted even though underneath the API only supports strings.\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"Creating a facade for the Storage object is an awesome solution. That way, you can implement your own get and set methods. For my API, I have created a facade for localStorage and then check if it is an object or not while setting and getting.\nvar data = {\n  set: function(key, value) {\n    if (!key || !value) {return;}\n\n    if (typeof value === &quot;object&quot;) {\n      value = JSON.stringify(value);\n    }\n    localStorage.setItem(key, value);\n  },\n  get: function(key) {\n    var value = localStorage.getItem(key);\n\n    if (!value) {return;}\n\n    // assume it is an object that has been stringified\n    if (value[0] === &quot;{&quot;) {\n      value = JSON.parse(value);\n    }\n\n    return value;\n  }\n}\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"Stringify doesn&apos;t solve all problems\nIt seems that the answers here don&apos;t cover all types that are possible in JavaScript, so here are some short examples on how to deal with them correctly:\n// Objects and Arrays:\n    var obj = {key: &quot;value&quot;};\n    localStorage.object = JSON.stringify(obj);  // Will ignore private members\n    obj = JSON.parse(localStorage.object);\n\n// Boolean:\n    var bool = false;\n    localStorage.bool = bool;\n    bool = (localStorage.bool === &quot;true&quot;);\n\n// Numbers:\n    var num = 42;\n    localStorage.num = num;\n    num = +localStorage.num;    // Short for &quot;num = parseFloat(localStorage.num);&quot;\n\n// Dates:\n    var date = Date.now();\n    localStorage.date = date;\n    date = new Date(parseInt(localStorage.date));\n\n// Regular expressions:\n    var regex = /^No\\.[\\d]*$/i;     // Usage example: &quot;No.42&quot;.match(regex);\n    localStorage.regex = regex;\n    var components = localStorage.regex.match(&quot;^/(.*)/([a-z]*)$&quot;);\n    regex = new RegExp(components[1], components[2]);\n\n// Functions (not recommended):\n    function func() {}\n\n    localStorage.func = func;\n    eval(localStorage.func);      // Recreates the function with the name &quot;func&quot;\n\nI do not recommend to store functions, because eval() is evil and can lead to issues regarding security, optimisation and debugging.\nIn general, eval() should never be used in JavaScript code.\nPrivate members\nThe problem with using JSON.stringify() for storing objects is, that this function can not serialise private members.\nThis issue can be solved by overwriting the .toString() method (which is called implicitly when storing data in web storage):\n// Object with private and public members:\n    function MyClass(privateContent, publicContent) {\n        var privateMember = privateContent || &quot;defaultPrivateValue&quot;;\n        this.publicMember = publicContent  || &quot;defaultPublicValue&quot;;\n\n        this.toString = function() {\n            return &apos;{&quot;private&quot;: &quot;&apos; + privateMember + &apos;&quot;, &quot;public&quot;: &quot;&apos; + this.publicMember + &apos;&quot;}&apos;;\n        };\n    }\n    MyClass.fromString = function(serialisedString) {\n        var properties = JSON.parse(serialisedString || &quot;{}&quot;);\n        return new MyClass(properties.private, properties.public);\n    };\n\n// Storing:\n    var obj = new MyClass(&quot;invisible&quot;, &quot;visible&quot;);\n    localStorage.object = obj;\n\n// Loading:\n    obj = MyClass.fromString(localStorage.object);\n\nCircular references\nAnother problem stringify can&apos;t deal with are circular references:\nvar obj = {};\nobj[&quot;circular&quot;] = obj;\nlocalStorage.object = JSON.stringify(obj);  // Fails\n\nIn this example, JSON.stringify() will throw a TypeError &quot;Converting circular structure to JSON&quot;.\nIf storing circular references should be supported, the second parameter of JSON.stringify() might be used:\nvar obj = {id: 1, sub: {}};\nobj.sub[&quot;circular&quot;] = obj;\nlocalStorage.object = JSON.stringify(obj, function(key, value) {\n    if(key == &apos;circular&apos;) {\n        return &quot;$ref&quot; + value.id + &quot;$&quot;;\n    } else {\n        return value;\n    }\n});\n\nHowever, finding an efficient solution for storing circular references highly depends on the tasks that need to be solved, and restoring such data is not trivial either.\nThere are already some question on Stack Overflow dealing with this problem: Stringify (convert to JSON) a JavaScript object with circular reference\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"There is a great library that wraps many solutions so it even supports older browsers called jStorage\n\nYou can set an object\n\n$.jStorage.set(key, value)\n\n\nAnd retrieve it easily\n\nvalue = $.jStorage.get(key)\nvalue = $.jStorage.get(key, &quot;default value&quot;)\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"I arrived at this post after hitting on another post that has been closed as a duplicate of this - titled &apos;how to store an array in localstorage?&apos;.  Which is fine except neither thread actually provides a full answer as to how you can maintain an array in localStorage - however I have managed to craft a solution based on information contained in both threads.\n\nSo if anyone else is wanting to be able to push/pop/shift items within an array, and they want that array stored in localStorage or indeed sessionStorage, here you go:\n\nStorage.prototype.getArray = function(arrayName) {\n  var thisArray = [];\n  var fetchArrayObject = this.getItem(arrayName);\n  if (typeof fetchArrayObject !== &apos;undefined&apos;) {\n    if (fetchArrayObject !== null) { thisArray = JSON.parse(fetchArrayObject); }\n  }\n  return thisArray;\n}\n\nStorage.prototype.pushArrayItem = function(arrayName,arrayItem) {\n  var existingArray = this.getArray(arrayName);\n  existingArray.push(arrayItem);\n  this.setItem(arrayName,JSON.stringify(existingArray));\n}\n\nStorage.prototype.popArrayItem = function(arrayName) {\n  var arrayItem = {};\n  var existingArray = this.getArray(arrayName);\n  if (existingArray.length &gt; 0) {\n    arrayItem = existingArray.pop();\n    this.setItem(arrayName,JSON.stringify(existingArray));\n  }\n  return arrayItem;\n}\n\nStorage.prototype.shiftArrayItem = function(arrayName) {\n  var arrayItem = {};\n  var existingArray = this.getArray(arrayName);\n  if (existingArray.length &gt; 0) {\n    arrayItem = existingArray.shift();\n    this.setItem(arrayName,JSON.stringify(existingArray));\n  }\n  return arrayItem;\n}\n\nStorage.prototype.unshiftArrayItem = function(arrayName,arrayItem) {\n  var existingArray = this.getArray(arrayName);\n  existingArray.unshift(arrayItem);\n  this.setItem(arrayName,JSON.stringify(existingArray));\n}\n\nStorage.prototype.deleteArray = function(arrayName) {\n  this.removeItem(arrayName);\n}\n\n\nexample usage - storing simple strings in localStorage array:\n\nlocalStorage.pushArrayItem(&apos;myArray&apos;,&apos;item one&apos;);\nlocalStorage.pushArrayItem(&apos;myArray&apos;,&apos;item two&apos;);\n\n\nexample usage - storing objects in sessionStorage array:\n\nvar item1 = {}; item1.name = &apos;fred&apos;; item1.age = 48;\nsessionStorage.pushArrayItem(&apos;myArray&apos;,item1);\n\nvar item2 = {}; item2.name = &apos;dave&apos;; item2.age = 22;\nsessionStorage.pushArrayItem(&apos;myArray&apos;,item2);\n\n\ncommon methods to manipulate arrays:\n\n.pushArrayItem(arrayName,arrayItem); -&gt; adds an element onto end of named array\n.unshiftArrayItem(arrayName,arrayItem); -&gt; adds an element onto front of named array\n.popArrayItem(arrayName); -&gt; removes &amp; returns last array element\n.shiftArrayItem(arrayName); -&gt; removes &amp; returns first array element\n.getArray(arrayName); -&gt; returns entire array\n.deleteArray(arrayName); -&gt; removes entire array from storage\n\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"In theory, it is possible to store objects with functions:\nfunction store (a)\n{\n  var c = {f: {}, d: {}};\n  for (var k in a)\n  {\n    if (a.hasOwnProperty(k) &amp;&amp; typeof a[k] === &apos;function&apos;)\n    {\n      c.f[k] = encodeURIComponent(a[k]);\n    }\n  }\n\n  c.d = a;\n  var data = JSON.stringify(c);\n  window.localStorage.setItem(&apos;CODE&apos;, data);\n}\n\nfunction restore ()\n{\n  var data = window.localStorage.getItem(&apos;CODE&apos;);\n  data = JSON.parse(data);\n  var b = data.d;\n\n  for (var k in data.f)\n  {\n    if (data.f.hasOwnProperty(k))\n    {\n      b[k] = eval(&quot;(&quot; + decodeURIComponent(data.f[k]) + &quot;)&quot;);\n    }\n  }\n\n  return b;\n}\n\nHowever, function serialization/deserialization is unreliable because it is implementation-dependent.\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"It is recommended using an abstraction library for many of the features discussed here, as well as better compatibility. There are lots of options:\n\njStorage or simpleStorage  my preference\nlocalForage\nalekseykulikov/storage\nLawnchair\nStore.js  another good option\nOMG\nlocalDataStorage\n\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"You can use localDataStorage to transparently store JavaScript data types (Array, Boolean, Date, Float, Integer, String and Object). It also provides lightweight data obfuscation, automatically compresses strings, facilitates query by key (name) as well as query by (key) value, and helps to enforce segmented shared storage within the same domain by prefixing keys.\n[DISCLAIMER] I am the author of the utility [/DISCLAIMER]\nExamples:\nlocalDataStorage.set( &apos;key1&apos;, &apos;Belgian&apos; )\nlocalDataStorage.set( &apos;key2&apos;, 1200.0047 )\nlocalDataStorage.set( &apos;key3&apos;, true )\nlocalDataStorage.set( &apos;key4&apos;, { &apos;RSK&apos; : [1,&apos;3&apos;,5,&apos;7&apos;,9] } )\nlocalDataStorage.set( &apos;key5&apos;, null )\n\nlocalDataStorage.get( &apos;key1&apos; )  // --&gt;   &apos;Belgian&apos;\nlocalDataStorage.get( &apos;key2&apos; )  // --&gt;   1200.0047\nlocalDataStorage.get( &apos;key3&apos; )  // --&gt;   true\nlocalDataStorage.get( &apos;key4&apos; )  // --&gt;   Object {RSK: Array(5)}\nlocalDataStorage.get( &apos;key5&apos; )  // --&gt;   null\n\nAs you can see, the primitive values are respected.\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"You cannot store a key value without a string format.\nLocalStorage only supports string formats for keys/values.\nThat is why you should convert your data to string whatever it is an array or object.\nTo store data in localStorage, first of all stringify it using the JSON.stringify() method.\nvar myObj = [{name:&quot;test&quot;, time:&quot;Date 2017-02-03T08:38:04.449Z&quot;}];\nlocalStorage.setItem(&apos;item&apos;, JSON.stringify(myObj));\n\nThen when you want to retrieve data, you need to parse the string to object again.\nvar getObj = JSON.parse(localStorage.getItem(&apos;item&apos;));\n\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"You can use ejson to store the objects as strings.\n\n\n  EJSON is an extension of JSON to support more types. It supports all JSON-safe types, as well as:\n  \n  \n  Date (JavaScript Date)\n  Binary (JavaScript Uint8Array or the result of EJSON.newBinary)\n  User-defined types (see EJSON.addType. For example, Mongo.ObjectID is implemented this way.)\n  \n  \n  All EJSON serializations are also valid JSON. For example an object with a date and a binary buffer would be serialized in EJSON as:\n\n{\n  &quot;d&quot;: {&quot;$date&quot;: 1358205756553},\n  &quot;b&quot;: {&quot;$binary&quot;: &quot;c3VyZS4=&quot;}\n}\n\n\n\nHere is my localStorage wrapper using ejson\n\nhttps://github.com/UziTech/storage.js\n\nI added some types to my wrapper including regular expressions and functions\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"Another option would be to use an existing plugin.\n\nFor example persisto is an open source project that provides an easy interface to localStorage/sessionStorage and automates persistence for form fields (input, radio buttons, and checkboxes).\n\n\n\n(Disclaimer: I am the author.)\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"For TypeScript users willing to set and get typed properties:\n/**\n * Silly wrapper to be able to type the storage keys\n */\nexport class TypedStorage&lt;T&gt; {\n\n    public removeItem(key: keyof T): void {\n        localStorage.removeItem(key);\n    }\n\n    public getItem&lt;K extends keyof T&gt;(key: K): T[K] | null {\n        const data: string | null =  localStorage.getItem(key);\n        return JSON.parse(data);\n    }\n\n    public setItem&lt;K extends keyof T&gt;(key: K, value: T[K]): void {\n        const data: string = JSON.stringify(value);\n        localStorage.setItem(key, data);\n    }\n}\n\nExample usage:\n// write an interface for the storage\ninterface MyStore {\n   age: number,\n   name: string,\n   address: {city:string}\n}\n\nconst storage: TypedStorage&lt;MyStore&gt; = new TypedStorage&lt;MyStore&gt;();\n\nstorage.setItem(&quot;wrong key&quot;, &quot;&quot;); // error unknown key\nstorage.setItem(&quot;age&quot;, &quot;hello&quot;); // error, age should be number\nstorage.setItem(&quot;address&quot;, {city:&quot;Here&quot;}); // ok\n\nconst address: {city:string} = storage.getItem(&quot;address&quot;);\n\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"https://github.com/adrianmay/rhaboo is a localStorage sugar layer that lets you write things like this:\n\nvar store = Rhaboo.persistent(&apos;Some name&apos;);\nstore.write(&apos;count&apos;, store.count ? store.count+1 : 1);\nstore.write(&apos;somethingfancy&apos;, {\n  one: [&apos;man&apos;, &apos;went&apos;],\n  2: &apos;mow&apos;,\n  went: [  2, { mow: [&apos;a&apos;, &apos;meadow&apos; ] }, {}  ]\n});\nstore.somethingfancy.went[1].mow.write(1, &apos;lawn&apos;);\n\n\nIt doesn&apos;t use JSON.stringify/parse because that would be inaccurate and slow on big objects. Instead, each terminal value has its own localStorage entry.\n\nYou can probably guess that I might have something to do with rhaboo.\n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"localStorage.setItem(&apos;obj&apos;,JSON.stringify({name:&apos;Akash&apos;})); // Set Object in localStorage\nlocalStorage.getItem(&apos;obj&apos;); // Get Object from localStorage\n\nsessionStorage.setItem(&apos;obj&apos;,JSON.stringify({name:&apos;Akash&apos;})); // Set Object in sessionStorage\nsessionStorage.getItem(&apos;obj&apos;); // Get Object from sessionStorage\n\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"I made another minimalistic wrapper with only 20 lines of code to allow using it like it should:\n\nlocalStorage.set(&apos;myKey&apos;,{a:[1,2,5], b: &apos;ok&apos;});\nlocalStorage.has(&apos;myKey&apos;);   // --&gt; true\nlocalStorage.get(&apos;myKey&apos;);   // --&gt; {a:[1,2,5], b: &apos;ok&apos;}\nlocalStorage.keys();         // --&gt; [&apos;myKey&apos;]\nlocalStorage.remove(&apos;myKey&apos;);\n\n\nhttps://github.com/zevero/simpleWebstorage\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"I made a thing that doesn&apos;t break the existing Storage objects, but creates a wrapper so you can do what you want. The result is a normal object, no methods, with access like any object.\n\nThe thing I made.\n\nIf you want 1 localStorage property to be magic:\n\nvar prop = ObjectStorage(localStorage, &apos;prop&apos;);\n\n\nIf you need several:\n\nvar storage = ObjectStorage(localStorage, [&apos;prop&apos;, &apos;more&apos;, &apos;props&apos;]);\n\n\nEverything you do to prop, or the objects inside storage will be automatically saved into localStorage. You&apos;re always playing with a real object, so you can do stuff like this:\n\nstorage.data.list.push(&apos;more data&apos;);\nstorage.another.list.splice(1, 2, {another: &apos;object&apos;});\n\n\nAnd every new object inside a tracked object will be automatically tracked.\n\nThe very big downside: it depends on Object.observe() so it has very limited browser support. And it doesn&apos;t look like it&apos;ll be coming for Firefox or Edge anytime soon.\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"I found a way to make it work with objects that have cyclic references.\n\nLet&apos;s make an object with cyclic references.\n\nobj = {\n    L: {\n        L: { v: &apos;lorem&apos; },\n        R: { v: &apos;ipsum&apos; }\n    },\n    R: {\n        L: { v: &apos;dolor&apos; },\n        R: {\n            L: { v: &apos;sit&apos; },\n            R: { v: &apos;amet&apos; }\n        }\n    }\n}\nobj.R.L.uncle = obj.L;\nobj.R.R.uncle = obj.L;\nobj.R.R.L.uncle = obj.R.L;\nobj.R.R.R.uncle = obj.R.L;\nobj.L.L.uncle = obj.R;\nobj.L.R.uncle = obj.R;\n\n\nWe can&apos;t do JSON.stringify here, because of the circular references.\n\n\n\nLOCALSTORAGE.CYCLICJSON has .stringify and .parse just like normal JSON, but works with objects with circular references. (&quot;Works&quot; meaning parse(stringify(obj)) and obj are deep equal AND have identical sets of &apos;inner equalities&apos;)\n\nBut we can just use the shortcuts:\n\nLOCALSTORAGE.setObject(&apos;latinUncles&apos;, obj)\nrecovered = LOCALSTORAGE.getObject(&apos;latinUncles&apos;)\n\n\nThen, recovered will be &quot;the same&quot; to obj, in the following sense:\n\n[\nobj.L.L.v === recovered.L.L.v,\nobj.L.R.v === recovered.L.R.v,\nobj.R.L.v === recovered.R.L.v,\nobj.R.R.L.v === recovered.R.R.L.v,\nobj.R.R.R.v === recovered.R.R.R.v,\nobj.R.L.uncle === obj.L,\nobj.R.R.uncle === obj.L,\nobj.R.R.L.uncle === obj.R.L,\nobj.R.R.R.uncle === obj.R.L,\nobj.L.L.uncle === obj.R,\nobj.L.R.uncle === obj.R,\nrecovered.R.L.uncle === recovered.L,\nrecovered.R.R.uncle === recovered.L,\nrecovered.R.R.L.uncle === recovered.R.L,\nrecovered.R.R.R.uncle === recovered.R.L,\nrecovered.L.L.uncle === recovered.R,\nrecovered.L.R.uncle === recovered.R\n]\n\n\nHere is the implementation of LOCALSTORAGE\n\n\n\nLOCALSTORAGE = (function(){\n  &quot;use strict&quot;;\n  var ignore = [Boolean, Date, Number, RegExp, String];\n  function primitive(item){\n    if (typeof item === &apos;object&apos;){\n      if (item === null) { return true; }\n      for (var i=0; i&lt;ignore.length; i++){\n        if (item instanceof ignore[i]) { return true; }\n      }\n      return false;\n    } else {\n      return true;\n    }\n  }\n  function infant(value){\n    return Array.isArray(value) ? [] : {};\n  }\n  function decycleIntoForest(object, replacer) {\n    if (typeof replacer !== &apos;function&apos;){\n      replacer = function(x){ return x; }\n    }\n    object = replacer(object);\n    if (primitive(object)) return object;\n    var objects = [object];\n    var forest  = [infant(object)];\n    var bucket  = new WeakMap(); // bucket = inverse of objects \n    bucket.set(object, 0);    \n    function addToBucket(obj){\n      var result = objects.length;\n      objects.push(obj);\n      bucket.set(obj, result);\n      return result;\n    }\n    function isInBucket(obj){ return bucket.has(obj); }\n    function processNode(source, target){\n      Object.keys(source).forEach(function(key){\n        var value = replacer(source[key]);\n        if (primitive(value)){\n          target[key] = {value: value};\n        } else {\n          var ptr;\n          if (isInBucket(value)){\n            ptr = bucket.get(value);\n          } else {\n            ptr = addToBucket(value);\n            var newTree = infant(value);\n            forest.push(newTree);\n            processNode(value, newTree);\n          }\n          target[key] = {pointer: ptr};\n        }\n      });\n    }\n    processNode(object, forest[0]);\n    return forest;\n  };\n  function deForestIntoCycle(forest) {\n    var objects = [];\n    var objectRequested = [];\n    var todo = [];\n    function processTree(idx) {\n      if (idx in objects) return objects[idx];\n      if (objectRequested[idx]) return null;\n      objectRequested[idx] = true;\n      var tree = forest[idx];\n      var node = Array.isArray(tree) ? [] : {};\n      for (var key in tree) {\n        var o = tree[key];\n        if (&apos;pointer&apos; in o) {\n          var ptr = o.pointer;\n          var value = processTree(ptr);\n          if (value === null) {\n            todo.push({\n              node: node,\n              key: key,\n              idx: ptr\n            });\n          } else {\n            node[key] = value;\n          }\n        } else {\n          if (&apos;value&apos; in o) {\n            node[key] = o.value;\n          } else {\n            throw new Error(&apos;unexpected&apos;)\n          }\n        }\n      }\n      objects[idx] = node;\n      return node;\n    }\n    var result = processTree(0);\n    for (var i = 0; i &lt; todo.length; i++) {\n      var item = todo[i];\n      item.node[item.key] = objects[item.idx];\n    }\n    return result;\n  };\n  var console = {\n    log: function(x){\n      var the = document.getElementById(&apos;the&apos;);\n      the.textContent = the.textContent + &apos;\\n&apos; + x;\n\t},\n\tdelimiter: function(){\n      var the = document.getElementById(&apos;the&apos;);\n      the.textContent = the.textContent +\n\t\t&apos;\\n*******************************************&apos;;\n\t}\n  }\n  function logCyclicObjectToConsole(root) {\n    var cycleFree = decycleIntoForest(root);\n    var shown = cycleFree.map(function(tree, idx) {\n      return false;\n    });\n    var indentIncrement = 4;\n    function showItem(nodeSlot, indent, label) {\n      var leadingSpaces = &apos; &apos;.repeat(indent);\n      var leadingSpacesPlus = &apos; &apos;.repeat(indent + indentIncrement);\n      if (shown[nodeSlot]) {\n        console.log(leadingSpaces + label + &apos; ... see above (object #&apos; + nodeSlot + &apos;)&apos;);\n      } else {\n        console.log(leadingSpaces + label + &apos; object#&apos; + nodeSlot);\n        var tree = cycleFree[nodeSlot];\n        shown[nodeSlot] = true;\n        Object.keys(tree).forEach(function(key) {\n          var entry = tree[key];\n          if (&apos;value&apos; in entry) {\n            console.log(leadingSpacesPlus + key + &quot;: &quot; + entry.value);\n          } else {\n            if (&apos;pointer&apos; in entry) {\n              showItem(entry.pointer, indent + indentIncrement, key);\n            }\n          }\n        });\n      }\n    }\n\tconsole.delimiter();\n    showItem(0, 0, &apos;root&apos;);\n  };\n  function stringify(obj){\n    return JSON.stringify(decycleIntoForest(obj));\n  }\n  function parse(str){\n    return deForestIntoCycle(JSON.parse(str));\n  }\n  var CYCLICJSON = {\n    decycleIntoForest: decycleIntoForest,\n    deForestIntoCycle : deForestIntoCycle,\n    logCyclicObjectToConsole: logCyclicObjectToConsole,\n    stringify : stringify,\n    parse : parse\n  }\n  function setObject(name, object){\n    var str = stringify(object);\n    localStorage.setItem(name, str);\n  }\n  function getObject(name){\n    var str = localStorage.getItem(name);\n    if (str===null) return null;\n    return parse(str);\n  }\n  return {\n    CYCLICJSON : CYCLICJSON,\n    setObject  : setObject,\n    getObject  : getObject\n  }\n})();\nobj = {\n\tL: {\n\t\tL: { v: &apos;lorem&apos; },\n\t\tR: { v: &apos;ipsum&apos; }\n\t},\n\tR: {\n\t\tL: { v: &apos;dolor&apos; },\n\t\tR: {\n\t\t\tL: { v: &apos;sit&apos; },\n\t\t\tR: { v: &apos;amet&apos; }\n\t\t}\n\t}\n}\nobj.R.L.uncle = obj.L;\nobj.R.R.uncle = obj.L;\nobj.R.R.L.uncle = obj.R.L;\nobj.R.R.R.uncle = obj.R.L;\nobj.L.L.uncle = obj.R;\nobj.L.R.uncle = obj.R;\n\n// LOCALSTORAGE.setObject(&apos;latinUncles&apos;, obj)\n// recovered = LOCALSTORAGE.getObject(&apos;latinUncles&apos;)\n// localStorage not available inside fiddle ):\nLOCALSTORAGE.CYCLICJSON.logCyclicObjectToConsole(obj)\nputIntoLS = LOCALSTORAGE.CYCLICJSON.stringify(obj);\nrecovered = LOCALSTORAGE.CYCLICJSON.parse(putIntoLS);\nLOCALSTORAGE.CYCLICJSON.logCyclicObjectToConsole(recovered);\n\nvar the = document.getElementById(&apos;the&apos;);\nthe.textContent = the.textContent + &apos;\\n\\n&apos; +\nJSON.stringify(\n[\nobj.L.L.v === recovered.L.L.v,\nobj.L.R.v === recovered.L.R.v,\nobj.R.L.v === recovered.R.L.v,\nobj.R.R.L.v === recovered.R.R.L.v,\nobj.R.R.R.v === recovered.R.R.R.v,\nobj.R.L.uncle === obj.L,\nobj.R.R.uncle === obj.L,\nobj.R.R.L.uncle === obj.R.L,\nobj.R.R.R.uncle === obj.R.L,\nobj.L.L.uncle === obj.R,\nobj.L.R.uncle === obj.R,\nrecovered.R.L.uncle === recovered.L,\nrecovered.R.R.uncle === recovered.L,\nrecovered.R.R.L.uncle === recovered.R.L,\nrecovered.R.R.R.uncle === recovered.R.L,\nrecovered.L.L.uncle === recovered.R,\nrecovered.L.R.uncle === recovered.R\n]\n)\n&lt;pre id=&apos;the&apos;&gt;&lt;/pre&gt;\n Run code snippetHide resultsExpand snippet\n\n\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"This question has been answered sufficiently from the JavaScript-only perspective, and others have already noted that both localStorage.getItem and localStorage.setItem have no concept of objectsthey handle strings and strings only. This answer provides a TypeScript-friendly solution that incorporates what others have suggested in JavaScript-only solutions.\nTypeScript 4.2.3\nStorage.prototype.setObject = function (key: string, value: unknown) {\n  this.setItem(key, JSON.stringify(value));\n};\n\nStorage.prototype.getObject = function (key: string) {\n  const value = this.getItem(key);\n  if (!value) {\n    return null;\n  }\n\n  return JSON.parse(value);\n};\n\ndeclare global {\n  interface Storage {\n    setObject: (key: string, value: unknown) =&gt; void;\n    getObject: (key: string) =&gt; unknown;\n  }\n}\n\nUsage\nlocalStorage.setObject(&apos;ages&apos;, [23, 18, 33, 22, 58]);\nlocalStorage.getObject(&apos;ages&apos;);\n\nExplanation\nWe declare both setObject and getObject functions on the Storage prototypelocalStorage is an instance of this type. There&apos;s nothing special we really need to note besides the null handling in getObject. Since getItem can return null, we must exit early since calling JSON.parse on a null value will throw a runtime exception.\nAfter declaring the functions on the Storage prototype, we include their type definitions on the Storage type in the global namespace.\nNote: If we defined these functions with arrow functions, we&apos;d need to assume that the storage object we&apos;re calling is always localStorage, which might not be true. For instance, the above code will add setObject and getObject support to sessionStorage as well.\n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0},{"text":"Here is some extended version of the code posted by danott:\nIt&apos;ll also implement a delete value from localstorage and shows how to adds a Getter and Setter layer so instead of,\nlocalstorage.setItem(preview, true)\nyou can write\nconfig.preview = true\nOkay, here were go:\nvar PT=Storage.prototype\n\nif (typeof PT._setItem &gt;=&apos;u&apos;)\n  PT._setItem = PT.setItem;\nPT.setItem = function(key, value)\n{\n  if (typeof value &gt;=&apos;u&apos;) //..undefined\n    this.removeItem(key)\n  else\n    this._setItem(key, JSON.stringify(value));\n}\n\nif (typeof PT._getItem &gt;=&apos;u&apos;)\n  PT._getItem = PT.getItem;\nPT.getItem = function(key)\n{\n  var ItemData = this._getItem(key)\n  try\n  {\n    return JSON.parse(ItemData);\n  }\n  catch(e)\n  {\n    return ItemData;\n  }\n}\n\n// Aliases for localStorage.set/getItem\nget = localStorage.getItem.bind(localStorage)\nset = localStorage.setItem.bind(localStorage)\n\n// Create ConfigWrapperObject\nvar config = {}\n\n// Helper to create getter &amp; setter\nfunction configCreate(PropToAdd){\n    Object.defineProperty( config, PropToAdd, {\n      get: function ()    { return (get(PropToAdd)    )},\n      set: function (val) {         set(PropToAdd, val)}\n    })\n}\n//------------------------------\n\n// Usage Part\n// Create properties\nconfigCreate(&apos;preview&apos;)\nconfigCreate(&apos;notification&apos;)\n//...\n\n// Configuration Data transfer\n// Set\nconfig.preview = true\n\n// Get\nconfig.preview\n\n// Delete\nconfig.preview = undefined\n\nWell, you may strip the aliases part with .bind(...). However, I just put it in since it&apos;s really good to know about this. I took me hours to find out why a simple get = localStorage.getItem; don&apos;t work.\n    ","url":"/questions/[slug]#solution21","@type":"Answer","upvoteCount":0},{"text":"Circular References\nIn this answer I focus on data-only objects (without functions, etc.) with circular references and develop ideas mentioned by maja and mathheadinclouds (I use his test case and\nmy code is several times shorter).\nActually, we can use JSON.stringify with a proper replacer - if the source object contains multi-references to some object, or contains circular references then we reference it by special path-string (similar to JSONPath).\nShow code snippet\n\n// JSON.strigify replacer for objects with circ ref\nfunction refReplacer() {\n  let m = new Map(), v = new Map(), init = null;\n\n  return function(field, value) {\n    let p = m.get(this) + (Array.isArray(this) ? `[${field}]` : &apos;.&apos; + field);\n    let isComplex = value === Object(value)\n\n    if (isComplex) m.set(value, p);\n\n    let pp = v.get(value)||&apos;&apos;;\n    let path = p.replace(/undefined\\.\\.?/, &apos;&apos;);\n    let val = pp ? `#REF:${pp[0] == &apos;[&apos; ? &apos;$&apos;:&apos;$.&apos;}${pp}` : value;\n\n    !init ? (init=value) : (val===init ? val=&quot;#REF:$&quot; : 0);\n    if(!pp &amp;&amp; isComplex) v.set(value, path);\n\n    return val;\n  }\n}\n\n\n// ---------------\n// TEST\n// ---------------\n\n// Generate obj with duplicate/circular references\nlet obj = {\n    L: {\n        L: { v: &apos;lorem&apos; },\n        R: { v: &apos;ipsum&apos; }\n    },\n    R: {\n        L: { v: &apos;dolor&apos; },\n        R: {\n            L: { v: &apos;sit&apos; },\n            R: { v: &apos;amet&apos; }\n        }\n    }\n}\nobj.R.L.uncle = obj.L;\nobj.R.R.uncle = obj.L;\nobj.R.R.L.uncle = obj.R.L;\nobj.R.R.R.uncle = obj.R.L;\nobj.L.L.uncle = obj.R;\nobj.L.R.uncle = obj.R;\ntestObject = obj;\n\nlet json = JSON.stringify(testObject, refReplacer(), 4);\n\nconsole.log(&quot;Test Object\\n&quot;, testObject);\nconsole.log(&quot;JSON with JSONpath references\\n&quot;, json);\n Run code snippetHide resultsExpand snippet\n\n\nParse such JSON content with JSONpath-like references:\nShow code snippet\n\n// Parse JSON content with JSONpath references to object\nfunction parseRefJSON(json) {\n  let objToPath = new Map();\n  let pathToObj = new Map();\n  let o = JSON.parse(json);\n\n  let traverse = (parent, field) =&gt; {\n    let obj = parent;\n    let path = &apos;#REF:$&apos;;\n\n    if (field !== undefined) {\n      obj = parent[field];\n      path = objToPath.get(parent) + (Array.isArray(parent) ? `[${field}]` : `${field ? &apos;.&apos; + field : &apos;&apos;}`);\n    }\n\n    objToPath.set(obj, path);\n    pathToObj.set(path, obj);\n\n    let ref = pathToObj.get(obj);\n    if (ref) parent[field] = ref;\n\n    for (let f in obj) if (obj === Object(obj)) traverse(obj, f);\n  }\n\n  traverse(o);\n  return o;\n}\n\n\n// ---------------\n// TEST 1\n// ---------------\n\nlet json = `\n{\n    &quot;L&quot;: {\n        &quot;L&quot;: {\n            &quot;v&quot;: &quot;lorem&quot;,\n            &quot;uncle&quot;: {\n                &quot;L&quot;: {\n                    &quot;v&quot;: &quot;dolor&quot;,\n                    &quot;uncle&quot;: &quot;#REF:$.L&quot;\n                },\n                &quot;R&quot;: {\n                    &quot;L&quot;: {\n                        &quot;v&quot;: &quot;sit&quot;,\n                        &quot;uncle&quot;: &quot;#REF:$.L.L.uncle.L&quot;\n                    },\n                    &quot;R&quot;: {\n                        &quot;v&quot;: &quot;amet&quot;,\n                        &quot;uncle&quot;: &quot;#REF:$.L.L.uncle.L&quot;\n                    },\n                    &quot;uncle&quot;: &quot;#REF:$.L&quot;\n                }\n            }\n        },\n        &quot;R&quot;: {\n            &quot;v&quot;: &quot;ipsum&quot;,\n            &quot;uncle&quot;: &quot;#REF:$.L.L.uncle&quot;\n        }\n    },\n    &quot;R&quot;: &quot;#REF:$.L.L.uncle&quot;\n}`;\n\nlet testObject = parseRefJSON(json);\n\nconsole.log(&quot;Test Object\\n&quot;, testObject);\n\n\n// ---------------\n// TEST 2\n// ---------------\n\nconsole.log(&apos;Tests from mathheadinclouds answer: &apos;);\n\nlet recovered = testObject;\n\nlet obj = { // Original object\n    L: {\n        L: { v: &apos;lorem&apos; },\n        R: { v: &apos;ipsum&apos; }\n    },\n    R: {\n        L: { v: &apos;dolor&apos; },\n        R: {\n            L: { v: &apos;sit&apos; },\n            R: { v: &apos;amet&apos; }\n        }\n    }\n}\nobj.R.L.uncle = obj.L;\nobj.R.R.uncle = obj.L;\nobj.R.R.L.uncle = obj.R.L;\nobj.R.R.R.uncle = obj.R.L;\nobj.L.L.uncle = obj.R;\nobj.L.R.uncle = obj.R;\n\n[\n  obj.L.L.v === recovered.L.L.v,\n  obj.L.R.v === recovered.L.R.v,\n  obj.R.L.v === recovered.R.L.v,\n  obj.R.R.L.v === recovered.R.R.L.v,\n  obj.R.R.R.v === recovered.R.R.R.v,\n  obj.R.L.uncle === obj.L,\n  obj.R.R.uncle === obj.L,\n  obj.R.R.L.uncle === obj.R.L,\n  obj.R.R.R.uncle === obj.R.L,\n  obj.L.L.uncle === obj.R,\n  obj.L.R.uncle === obj.R,\n  recovered.R.L.uncle === recovered.L,\n  recovered.R.R.uncle === recovered.L,\n  recovered.R.R.L.uncle === recovered.R.L,\n  recovered.R.R.R.uncle === recovered.R.L,\n  recovered.L.L.uncle === recovered.R,\n  recovered.L.R.uncle === recovered.R\n].forEach(x =&gt; console.log(&apos;test pass: &apos; + x));\n Run code snippetHide resultsExpand snippet\n\n\nTo load/save the resulting JSON content into storage, use the following code:\nlocalStorage.myObject = JSON.stringify(testObject, refReplacer());  // Save\ntestObject = parseRefJSON(localStorage.myObject);                   // Load\n\n    ","url":"/questions/[slug]#solution22","@type":"Answer","upvoteCount":0},{"text":"I suggest using Jackson-js. It is a library that handles serializing and deserializing of Objects while retaining their structure, based on decorators.\nThe library handles all the pitfalls such as cyclic reference, attributes aliasing, etc.\nSimply describe your class using the @JsonProperty() and @JsonClassType() decorators.\nSerialize your object using:\nconst objectMapper = new ObjectMapper();\nlocalstore.setItem(key, objectMapper.stringify&lt;yourObjectType&gt;(yourObject));\n\nFor slightly more detailed explanation, check my answer here:\nTypescript objects serialization?\nAnd the Jackson-js tutorial here:\nJackson-js: Powerful JavaScript decorators to serialize/deserialize objects into JSON and vice versa (Part 1)\n    ","url":"/questions/[slug]#solution23","@type":"Answer","upvoteCount":0},{"text":"localStorage.setItem(&apos;user&apos;, JSON.stringify(user));\n\nThen to retrieve it from the store and convert to an object again:\nvar user = JSON.parse(localStorage.getItem(&apos;user&apos;));\n\nIf we need to delete all entries of the store we can simply do:\n\nlocalStorage.clear();\n\n    ","url":"/questions/[slug]#solution24","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-260362324a06d105.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-50e201fdaa1e0fd1.js" defer=""></script><script src="/_next/static/5tS3Jli5j89_wXapXajXn/_buildManifest.js" defer=""></script><script src="/_next/static/5tS3Jli5j89_wXapXajXn/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-to-store-objects-in-html5-localstorage-1657387568907#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-to-store-objects-in-html5-localstorage-1657387568907"><h1>How to store objects in HTML5 localStorage</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/local-storage">local-storage</a></div></div><div class="question-content mt-5">
                
<p>I'd like to store a JavaScript object in HTML5 <code>localStorage</code>, but my object is apparently being converted to a string.</p>
<p>I can store and retrieve primitive JavaScript types and arrays using <code>localStorage</code>, but objects don't seem to work.  Should they?</p>
<p>Here's my code:</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> testObject = { <span class="hljs-string">'one'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'two'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'three'</span>: <span class="hljs-number">3</span> };
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'typeof testObject: '</span> + <span class="hljs-keyword">typeof</span> testObject);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'testObject properties:'</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> testObject) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'  '</span> + prop + <span class="hljs-string">': '</span> + testObject[prop]);
}

<span class="hljs-comment">// Put the object into storage</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'testObject'</span>, testObject);

<span class="hljs-comment">// Retrieve the object from storage</span>
<span class="hljs-keyword">var</span> retrievedObject = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'testObject'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'typeof retrievedObject: '</span> + <span class="hljs-keyword">typeof</span> retrievedObject);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Value of retrievedObject: '</span> + retrievedObject);
</code></pre>
<p>The console output is</p>
<pre class="lang-none s-code-block"><code>typeof testObject: object
testObject properties:
  one: 1
  two: 2
  three: 3
typeof retrievedObject: string
Value of retrievedObject: [object Object]
</code></pre>
<p>It looks to me like the <code>setItem</code> method is converting the input to a string before storing it.</p>
<p>I see this behavior in Safari, Chrome, and Firefox, so I assume it's my misunderstanding of the <a href="http://www.w3.org/TR/webstorage/" rel="noreferrer">HTML5 Web Storage</a> specification, not a browser-specific bug or limitation.</p>
<p>I've tried to make sense of the <em>structured clone</em> algorithm described in <em><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#infrastructure" rel="noreferrer">2 Common infrastructure</a></em>.  I don't fully understand what it's saying, but maybe my problem has to do with my object's properties not being enumerable (???).</p>
<p>Is there an easy workaround?</p>
<hr>
<p>Update: The W3C eventually changed their minds about the structured-clone specification, and decided to change the spec to match the implementations.  See <em><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=12111" rel="noreferrer">12111 – spec for Storage object getItem(key) method does not match implementation behavior</a></em>. So this question is no longer 100% valid, but the answers still may be of interest.</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li><li class="pagination-solution-item"><span data-id="#solution21" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">21</span></li><li class="pagination-solution-item"><span data-id="#solution22" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">22</span></li><li class="pagination-solution-item"><span data-id="#solution23" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">23</span></li><li class="pagination-solution-item"><span data-id="#solution24" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">24</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Looking at the <a href="https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Name-ValueStorage/Name-ValueStorage.html" rel="noreferrer">Apple</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API" rel="noreferrer">Mozilla</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem" rel="noreferrer">Mozilla again</a> documentation, the functionality seems to be limited to handle only string key/value pairs.</p>

<p>A workaround can be to <a href="https://www.w3schools.com/js/js_json_stringify.asp" rel="noreferrer"><em>stringify</em></a> your object before storing it, and later parse it when you retrieve it:</p>

<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> testObject = { <span class="hljs-string">'one'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'two'</span>: <span class="hljs-number">2</span>, <span class="hljs-string">'three'</span>: <span class="hljs-number">3</span> };

<span class="hljs-comment">// Put the object into storage</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'testObject'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(testObject));

<span class="hljs-comment">// Retrieve the object from storage</span>
<span class="hljs-keyword">var</span> retrievedObject = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'testObject'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'retrievedObject: '</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(retrievedObject));
</code></pre>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>A minor improvement on a <a href="https://stackoverflow.com/a/2010994/59087">variant</a>:</p>

<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setObject</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));
}

<span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getObject</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">var</span> value = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getItem</span>(key);
    <span class="hljs-keyword">return</span> value &amp;&amp; <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(value);
}
</code></pre>

<p>Because of <a href="http://en.wikipedia.org/wiki/Short-circuit_evaluation" rel="noreferrer">short-circuit evaluation</a>, <code>getObject()</code> will <em>immediately</em> return <code>null</code> if <code>key</code> is not in Storage. It also will not throw a <code>SyntaxError</code> exception if <code>value</code> is <code>""</code> (the empty string; <code>JSON.parse()</code> cannot handle that).</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You might find it useful to extend the Storage object with these handy methods:</p>

<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setObject</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));
}

<span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getObject</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getItem</span>(key));
}
</code></pre>

<p>This way you get the functionality that you really wanted even though underneath the API only supports strings.</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Creating a facade for the Storage object is an awesome solution. That way, you can implement your own <code>get</code> and <code>set</code> methods. For my API, I have created a facade for localStorage and then check if it is an object or not while setting and getting.</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> data = {
  <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) {
    <span class="hljs-keyword">if</span> (!key || !value) {<span class="hljs-keyword">return</span>;}

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span>) {
      value = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value);
    }
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value);
  },
  <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">var</span> value = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key);

    <span class="hljs-keyword">if</span> (!value) {<span class="hljs-keyword">return</span>;}

    <span class="hljs-comment">// assume it is an object that has been stringified</span>
    <span class="hljs-keyword">if</span> (value[<span class="hljs-number">0</span>] === <span class="hljs-string">"{"</span>) {
      value = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(value);
    }

    <span class="hljs-keyword">return</span> value;
  }
}
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>Stringify doesn't solve all problems</h2>
<p>It seems that the answers here don't cover all types that are possible in JavaScript, so here are some short examples on how to deal with them correctly:</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">// Objects and Arrays:</span>
    <span class="hljs-keyword">var</span> obj = {<span class="hljs-attr">key</span>: <span class="hljs-string">"value"</span>};
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">object</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj);  <span class="hljs-comment">// Will ignore private members</span>
    obj = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">object</span>);

<span class="hljs-comment">// Boolean:</span>
    <span class="hljs-keyword">var</span> bool = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">bool</span> = bool;
    bool = (<span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">bool</span> === <span class="hljs-string">"true"</span>);

<span class="hljs-comment">// Numbers:</span>
    <span class="hljs-keyword">var</span> num = <span class="hljs-number">42</span>;
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">num</span> = num;
    num = +<span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">num</span>;    <span class="hljs-comment">// Short for "num = parseFloat(localStorage.num);"</span>

<span class="hljs-comment">// Dates:</span>
    <span class="hljs-keyword">var</span> date = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">date</span> = date;
    date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-built_in">parseInt</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">date</span>));

<span class="hljs-comment">// Regular expressions:</span>
    <span class="hljs-keyword">var</span> regex = <span class="hljs-regexp">/^No\.[\d]*$/i</span>;     <span class="hljs-comment">// Usage example: "No.42".match(regex);</span>
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">regex</span> = regex;
    <span class="hljs-keyword">var</span> components = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">regex</span>.<span class="hljs-title function_">match</span>(<span class="hljs-string">"^/(.*)/([a-z]*)$"</span>);
    regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(components[<span class="hljs-number">1</span>], components[<span class="hljs-number">2</span>]);

<span class="hljs-comment">// Functions (not recommended):</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">func</span>(<span class="hljs-params"></span>) {}

    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">func</span> = func;
    <span class="hljs-built_in">eval</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">func</span>);      <span class="hljs-comment">// Recreates the function with the name "func"</span>
</code></pre>
<p><strong>I do not recommend</strong> to store functions, because <code>eval()</code> is evil and can lead to issues regarding security, optimisation and debugging.</p>
<p>In general, <code>eval()</code> should never be used in JavaScript code.</p>
<h2>Private members</h2>
<p>The problem with using <code>JSON.stringify()</code> for storing objects is, that this function can not serialise private members.</p>
<p>This issue can be solved by overwriting the <code>.toString()</code> method (which is called implicitly when storing data in web storage):</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">// Object with private and public members:</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyClass</span>(<span class="hljs-params">privateContent, publicContent</span>) {
        <span class="hljs-keyword">var</span> privateMember = privateContent || <span class="hljs-string">"defaultPrivateValue"</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">publicMember</span> = publicContent  || <span class="hljs-string">"defaultPublicValue"</span>;

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">toString</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">'{"private": "'</span> + privateMember + <span class="hljs-string">'", "public": "'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">publicMember</span> + <span class="hljs-string">'"}'</span>;
        };
    }
    <span class="hljs-title class_">MyClass</span>.<span class="hljs-property">fromString</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">serialisedString</span>) {
        <span class="hljs-keyword">var</span> properties = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(serialisedString || <span class="hljs-string">"{}"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyClass</span>(properties.<span class="hljs-property">private</span>, properties.<span class="hljs-property">public</span>);
    };

<span class="hljs-comment">// Storing:</span>
    <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyClass</span>(<span class="hljs-string">"invisible"</span>, <span class="hljs-string">"visible"</span>);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">object</span> = obj;

<span class="hljs-comment">// Loading:</span>
    obj = <span class="hljs-title class_">MyClass</span>.<span class="hljs-title function_">fromString</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">object</span>);
</code></pre>
<h2>Circular references</h2>
<p>Another problem <code>stringify</code> can't deal with are circular references:</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj = {};
obj[<span class="hljs-string">"circular"</span>] = obj;
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">object</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj);  <span class="hljs-comment">// Fails</span>
</code></pre>
<p>In this example, <code>JSON.stringify()</code> will throw a <code>TypeError</code> <em>"Converting circular structure to JSON"</em>.</p>
<p>If storing circular references should be supported, the second parameter of <code>JSON.stringify()</code> might be used:</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> obj = {<span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">sub</span>: {}};
obj.<span class="hljs-property">sub</span>[<span class="hljs-string">"circular"</span>] = obj;
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">object</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj, <span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) {
    <span class="hljs-keyword">if</span>(key == <span class="hljs-string">'circular'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"$ref"</span> + value.<span class="hljs-property">id</span> + <span class="hljs-string">"$"</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> value;
    }
});
</code></pre>
<p>However, finding an efficient solution for storing circular references highly depends on the tasks that need to be solved, and restoring such data is not trivial either.</p>
<p>There are already some question on Stack&nbsp;Overflow dealing with this problem: <em><a href="https://stackoverflow.com/questions/10392293/stringify-javascript-object-with-circular-reference/12659424#12659424">Stringify (convert to JSON) a JavaScript object with circular reference</a></em></p>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There is a great library that wraps many solutions so it even supports older browsers called <a href="https://github.com/andris9/jStorage" rel="nofollow noreferrer">jStorage</a></p>

<p>You can set an object</p>

<pre class="default s-code-block"><code class="hljs language-shell"><span class="hljs-meta prompt_">$</span><span class="language-bash">.jStorage.<span class="hljs-built_in">set</span>(key, value)</span>
</code></pre>

<p>And retrieve it easily</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">value</span> = $.jStorage.get(key)
<span class="hljs-attr">value</span> = $.jStorage.get(key, <span class="hljs-string">"default value"</span>)
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I arrived at this post after hitting on another post that has been closed as a duplicate of this - titled 'how to store an array in localstorage?'.  Which is fine except neither thread actually provides a full answer as to how you can maintain an array in localStorage - however I have managed to craft a solution based on information contained in both threads.</p>

<p>So if anyone else is wanting to be able to push/pop/shift items within an array, and they want that array stored in localStorage or indeed sessionStorage, here you go:</p>

<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getArray</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">arrayName</span>) {
  <span class="hljs-keyword">var</span> thisArray = [];
  <span class="hljs-keyword">var</span> fetchArrayObject = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getItem</span>(arrayName);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> fetchArrayObject !== <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-keyword">if</span> (fetchArrayObject !== <span class="hljs-literal">null</span>) { thisArray = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fetchArrayObject); }
  }
  <span class="hljs-keyword">return</span> thisArray;
}

<span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">pushArrayItem</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">arrayName,arrayItem</span>) {
  <span class="hljs-keyword">var</span> existingArray = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getArray</span>(arrayName);
  existingArray.<span class="hljs-title function_">push</span>(arrayItem);
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setItem</span>(arrayName,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(existingArray));
}

<span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">popArrayItem</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">arrayName</span>) {
  <span class="hljs-keyword">var</span> arrayItem = {};
  <span class="hljs-keyword">var</span> existingArray = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getArray</span>(arrayName);
  <span class="hljs-keyword">if</span> (existingArray.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    arrayItem = existingArray.<span class="hljs-title function_">pop</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setItem</span>(arrayName,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(existingArray));
  }
  <span class="hljs-keyword">return</span> arrayItem;
}

<span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">shiftArrayItem</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">arrayName</span>) {
  <span class="hljs-keyword">var</span> arrayItem = {};
  <span class="hljs-keyword">var</span> existingArray = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getArray</span>(arrayName);
  <span class="hljs-keyword">if</span> (existingArray.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    arrayItem = existingArray.<span class="hljs-title function_">shift</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setItem</span>(arrayName,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(existingArray));
  }
  <span class="hljs-keyword">return</span> arrayItem;
}

<span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">unshiftArrayItem</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">arrayName,arrayItem</span>) {
  <span class="hljs-keyword">var</span> existingArray = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getArray</span>(arrayName);
  existingArray.<span class="hljs-title function_">unshift</span>(arrayItem);
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setItem</span>(arrayName,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(existingArray));
}

<span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">deleteArray</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">arrayName</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeItem</span>(arrayName);
}
</code></pre>

<p>example usage - storing simple strings in localStorage array:</p>

<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">pushArrayItem</span>(<span class="hljs-string">'myArray'</span>,<span class="hljs-string">'item one'</span>);
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">pushArrayItem</span>(<span class="hljs-string">'myArray'</span>,<span class="hljs-string">'item two'</span>);
</code></pre>

<p>example usage - storing objects in sessionStorage array:</p>

<pre class="default s-code-block"><code class="hljs language-delphi"><span class="hljs-keyword">var</span> item1 = <span class="hljs-comment">{}</span>; item1.<span class="hljs-keyword">name</span> = <span class="hljs-string">'fred'</span>; item1.age = <span class="hljs-number">48</span>;
sessionStorage.pushArrayItem(<span class="hljs-string">'myArray'</span>,item1);

<span class="hljs-keyword">var</span> item2 = <span class="hljs-comment">{}</span>; item2.<span class="hljs-keyword">name</span> = <span class="hljs-string">'dave'</span>; item2.age = <span class="hljs-number">22</span>;
sessionStorage.pushArrayItem(<span class="hljs-string">'myArray'</span>,item2);
</code></pre>

<p>common methods to manipulate arrays:</p>

<pre class="default s-code-block"><code class="hljs language-sql">.pushArrayItem(arrayName,arrayItem); <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> adds an element onto <span class="hljs-keyword">end</span> <span class="hljs-keyword">of</span> named <span class="hljs-keyword">array</span>
.unshiftArrayItem(arrayName,arrayItem); <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> adds an element onto front <span class="hljs-keyword">of</span> named <span class="hljs-keyword">array</span>
.popArrayItem(arrayName); <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> removes <span class="hljs-operator">&amp;</span> <span class="hljs-keyword">returns</span> <span class="hljs-keyword">last</span> <span class="hljs-keyword">array</span> element
.shiftArrayItem(arrayName); <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> removes <span class="hljs-operator">&amp;</span> <span class="hljs-keyword">returns</span> <span class="hljs-keyword">first</span> <span class="hljs-keyword">array</span> element
.getArray(arrayName); <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">returns</span> entire <span class="hljs-keyword">array</span>
.deleteArray(arrayName); <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> removes entire <span class="hljs-keyword">array</span> <span class="hljs-keyword">from</span> storage
</code></pre>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>In theory, it is possible to store objects with functions:</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">store</span> (a)
{
  <span class="hljs-keyword">var</span> c = {<span class="hljs-attr">f</span>: {}, <span class="hljs-attr">d</span>: {}};
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k <span class="hljs-keyword">in</span> a)
  {
    <span class="hljs-keyword">if</span> (a.<span class="hljs-title function_">hasOwnProperty</span>(k) &amp;&amp; <span class="hljs-keyword">typeof</span> a[k] === <span class="hljs-string">'function'</span>)
    {
      c.<span class="hljs-property">f</span>[k] = <span class="hljs-built_in">encodeURIComponent</span>(a[k]);
    }
  }

  c.<span class="hljs-property">d</span> = a;
  <span class="hljs-keyword">var</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(c);
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'CODE'</span>, data);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">restore</span> ()
{
  <span class="hljs-keyword">var</span> data = <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'CODE'</span>);
  data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data);
  <span class="hljs-keyword">var</span> b = data.<span class="hljs-property">d</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k <span class="hljs-keyword">in</span> data.<span class="hljs-property">f</span>)
  {
    <span class="hljs-keyword">if</span> (data.<span class="hljs-property">f</span>.<span class="hljs-title function_">hasOwnProperty</span>(k))
    {
      b[k] = <span class="hljs-built_in">eval</span>(<span class="hljs-string">"("</span> + <span class="hljs-built_in">decodeURIComponent</span>(data.<span class="hljs-property">f</span>[k]) + <span class="hljs-string">")"</span>);
    }
  }

  <span class="hljs-keyword">return</span> b;
}
</code></pre>
<p>However, function serialization/deserialization is unreliable because <a href="http://ecma-international.org/ecma-262/5.1/#sec-15.3.4" rel="nofollow noreferrer">it is implementation-dependent</a>.</p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 9</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It is recommended using an abstraction library for many of the features discussed here, as well as better compatibility. There are lots of options:</p>
<ul>
<li><a href="https://github.com/andris9/jStorage" rel="nofollow noreferrer">jStorage</a> or <a href="https://github.com/andris9/simpleStorage" rel="nofollow noreferrer">simpleStorage</a>  my preference</li>
<li><a href="https://github.com/mozilla/localForage" rel="nofollow noreferrer">localForage</a></li>
<li><a href="https://github.com/alekseykulikov/storage" rel="nofollow noreferrer">alekseykulikov/storage</a></li>
<li><a href="https://github.com/brianleroux/lawnchair" rel="nofollow noreferrer">Lawnchair</a></li>
<li><a href="https://github.com/marcuswestin/store.js" rel="nofollow noreferrer">Store.js</a>  another good option</li>
<li><a href="https://github.com/aaronagray/omg" rel="nofollow noreferrer">OMG</a></li>
<li><a href="https://github.com/macmcmeans/localDataStorage" rel="nofollow noreferrer">localDataStorage</a></li>
</ul>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 10</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can use <a href="https://github.com/macmcmeans/localDataStorage" rel="nofollow noreferrer">localDataStorage</a> to transparently store JavaScript data types (Array, Boolean, Date, Float, Integer, String and Object). It also provides lightweight data obfuscation, automatically compresses strings, facilitates query by key (name) as well as query by (key) value, and helps to enforce segmented shared storage within the same domain by prefixing keys.</p>
<p>[DISCLAIMER] I am the author of the utility [/DISCLAIMER]</p>
<p>Examples:</p>
<pre class="default s-code-block"><code class="hljs language-csharp">localDataStorage.<span class="hljs-keyword">set</span>( <span class="hljs-string">'key1'</span>, <span class="hljs-string">'Belgian'</span> )
localDataStorage.<span class="hljs-keyword">set</span>( <span class="hljs-string">'key2'</span>, <span class="hljs-number">1200.0047</span> )
localDataStorage.<span class="hljs-keyword">set</span>( <span class="hljs-string">'key3'</span>, <span class="hljs-literal">true</span> )
localDataStorage.<span class="hljs-keyword">set</span>( <span class="hljs-string">'key4'</span>, { <span class="hljs-string">'RSK'</span> : [<span class="hljs-number">1</span>,<span class="hljs-string">'3'</span>,<span class="hljs-number">5</span>,<span class="hljs-string">'7'</span>,<span class="hljs-number">9</span>] } )
localDataStorage.<span class="hljs-keyword">set</span>( <span class="hljs-string">'key5'</span>, <span class="hljs-literal">null</span> )

localDataStorage.<span class="hljs-keyword">get</span>( <span class="hljs-string">'key1'</span> )  <span class="hljs-comment">// --&gt;   'Belgian'</span>
localDataStorage.<span class="hljs-keyword">get</span>( <span class="hljs-string">'key2'</span> )  <span class="hljs-comment">// --&gt;   1200.0047</span>
localDataStorage.<span class="hljs-keyword">get</span>( <span class="hljs-string">'key3'</span> )  <span class="hljs-comment">// --&gt;   true</span>
localDataStorage.<span class="hljs-keyword">get</span>( <span class="hljs-string">'key4'</span> )  <span class="hljs-comment">// --&gt;   Object {RSK: Array(5)}</span>
localDataStorage.<span class="hljs-keyword">get</span>( <span class="hljs-string">'key5'</span> )  <span class="hljs-comment">// --&gt;   null</span>
</code></pre>
<p>As you can see, the primitive values are respected.</p>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 11</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You cannot store a key value without a string format.</p>
<p><em>LocalStorage</em> only supports string formats for keys/values.</p>
<p>That is why you should convert your data to string whatever it is an array or object.</p>
<p>To <em>store</em> data in localStorage, first of all stringify it using the JSON.stringify() method.</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> myObj = [{<span class="hljs-attr">name</span>:<span class="hljs-string">"test"</span>, <span class="hljs-attr">time</span>:<span class="hljs-string">"Date 2017-02-03T08:38:04.449Z"</span>}];
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'item'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(myObj));
</code></pre>
<p>Then when you want to retrieve data, you need to parse the string to object again.</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> getObj = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'item'</span>));
</code></pre>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 12</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can use <a href="https://docs.meteor.com/api/ejson.html" rel="noreferrer">ejson</a> to store the objects as strings.</p>

<blockquote>
  <p>EJSON is an extension of JSON to support more types. It supports all JSON-safe types, as well as:</p>
  
  <ul>
  <li>Date (JavaScript <code>Date</code>)</li>
  <li>Binary (JavaScript <code>Uint8Array</code> or the result of <a href="https://docs.meteor.com/api/ejson.html#ejson_new_binary" rel="noreferrer">EJSON.newBinary</a>)</li>
  <li>User-defined types (see <a href="https://docs.meteor.com/api/ejson.html#ejson_add_type" rel="noreferrer">EJSON.addType</a>. For example, <a href="https://docs.meteor.com/api/ejson.html#mongo_object_id" rel="noreferrer">Mongo.ObjectID</a> is implemented this way.)</li>
  </ul>
  
  <p>All EJSON serializations are also valid JSON. For example an object with a date and a binary buffer would be serialized in EJSON as:</p>

<pre class="default s-code-block"><code class="hljs language-bash">{
  <span class="hljs-string">"d"</span>: {<span class="hljs-string">"<span class="hljs-variable">$date</span>"</span>: 1358205756553},
  <span class="hljs-string">"b"</span>: {<span class="hljs-string">"<span class="hljs-variable">$binary</span>"</span>: <span class="hljs-string">"c3VyZS4="</span>}
}
</code></pre>
</blockquote>

<p>Here is my localStorage wrapper using ejson</p>

<p><a href="https://github.com/UziTech/storage.js" rel="noreferrer">https://github.com/UziTech/storage.js</a></p>

<p>I added some types to my wrapper including regular expressions and functions</p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 13</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Another option would be to use an existing plugin.</p>

<p>For example <a href="https://github.com/mar10/persisto" rel="noreferrer">persisto</a> is an open source project that provides an easy interface to localStorage/sessionStorage and automates persistence for form fields (input, radio buttons, and checkboxes).</p>

<p><a href="https://i.stack.imgur.com/cU5V0.png" rel="noreferrer"><img src="https://i.stack.imgur.com/cU5V0.png" alt="persisto features"></a></p>

<p>(Disclaimer: I am the author.)</p>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 14</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>For TypeScript users willing to set and get typed properties:</p>
<pre class="default s-code-block"><code class="hljs language-csharp"><span class="hljs-comment">/**
 * Silly wrapper to be able to type the storage keys
 */</span>
<span class="hljs-function">export <span class="hljs-keyword">class</span> <span class="hljs-title">TypedStorage</span>&lt;<span class="hljs-title">T</span>&gt;</span> {

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">removeItem</span>(<span class="hljs-params">key: keyof T</span>): <span class="hljs-keyword">void</span></span> {
        localStorage.removeItem(key);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">getItem</span>&lt;<span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">keyof</span> <span class="hljs-title">T</span>&gt;(<span class="hljs-params">key: K</span>): T[K] | <span class="hljs-literal">null</span></span> {
        <span class="hljs-keyword">const</span> data: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> =  localStorage.getItem(key);
        <span class="hljs-keyword">return</span> JSON.parse(data);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">setItem</span>&lt;<span class="hljs-title">K</span> <span class="hljs-title">extends</span> <span class="hljs-title">keyof</span> <span class="hljs-title">T</span>&gt;(<span class="hljs-params">key: K, <span class="hljs-keyword">value</span>: T[K]</span>): <span class="hljs-keyword">void</span></span> {
        <span class="hljs-keyword">const</span> data: <span class="hljs-built_in">string</span> = JSON.stringify(<span class="hljs-keyword">value</span>);
        localStorage.setItem(key, data);
    }
}
</code></pre>
<p><a href="http://www.typescriptlang.org/play/#src=%2F**%0D%0A%20*%20Silly%20wrapper%20to%20be%20able%20to%20type%20the%20storage%20keys%0D%0A%20*%2F%0D%0Aexport%20class%20TypedStorage%3CT%3E%20%7B%0D%0A%0D%0A%20%20%20%20public%20removeItem(key%3A%20keyof%20T)%3A%20void%20%7B%0D%0A%20%20%20%20%20%20%20%20localStorage.removeItem(key)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20public%20getItem%3CK%20extends%20keyof%20T%3E(key%3A%20K)%3A%20T%5BK%5D%20%7C%20null%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20data%3A%20string%20%7C%20null%20%3D%20%20localStorage.getItem(key)%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.parse(data)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20public%20setItem%3CK%20extends%20keyof%20T%3E(key%3A%20K%2C%20value%3A%20T%5BK%5D)%3A%20void%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20data%3A%20string%20%3D%20JSON.stringify(value)%3B%0D%0A%20%20%20%20%20%20%20%20localStorage.setItem(key%2C%20data)%3B%0D%0A%20%20%20%20%7D%0D%0A%7D%0D%0A%0D%0A%2F%2F%20write%20an%20interface%20for%20the%20storage%0D%0Ainterface%20MyStore%20%7B%0D%0A%20%20%20age%3A%20number%2C%0D%0A%20%20%20name%3A%20string%2C%0D%0A%20%20%20address%3A%20%7Bcity%3Astring%7D%0D%0A%7D%0D%0A%0D%0Aconst%20storage%3A%20TypedStorage%3CMyStore%3E%20%3D%20new%20TypedStorage%3CMyStore%3E()%3B%0D%0A%0D%0Astorage.setItem(%22wrong%20key%22%2C%20%22%22)%3B%20%2F%2F%20error%20unknown%20key%0D%0Astorage.setItem(%22age%22%2C%20%22hello%22)%3B%20%2F%2F%20error%2C%20age%20should%20be%20number%0D%0Astorage.setItem(%22address%22%2C%20%7Bcity%3A%22Here%22%7D)%3B%20%2F%2F%20ok%0D%0A%0D%0Aconst%20address%3A%20%7Bcity%3Astring%7D%20%3D%20storage.getItem(%22address%22)%3B" rel="nofollow noreferrer">Example usage</a>:</p>
<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-comment">// write an interface for the storage</span>
<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MyStore</span> </span>{
   age: number,
   name: <span class="hljs-keyword">string</span>,
   address: {city:<span class="hljs-keyword">string</span>}
}

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">storage</span>: TypedStorage&lt;MyStore&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypedStorage</span>&lt;MyStore&gt;();

storage.<span class="hljs-title function_ invoke__">setItem</span>(<span class="hljs-string">"wrong key"</span>, <span class="hljs-string">""</span>); <span class="hljs-comment">// error unknown key</span>
storage.<span class="hljs-title function_ invoke__">setItem</span>(<span class="hljs-string">"age"</span>, <span class="hljs-string">"hello"</span>); <span class="hljs-comment">// error, age should be number</span>
storage.<span class="hljs-title function_ invoke__">setItem</span>(<span class="hljs-string">"address"</span>, {<span class="hljs-attr">city</span>:<span class="hljs-string">"Here"</span>}); <span class="hljs-comment">// ok</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">address</span>: {city:<span class="hljs-keyword">string</span>} = storage.<span class="hljs-title function_ invoke__">getItem</span>(<span class="hljs-string">"address"</span>);
</code></pre>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 15</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="https://github.com/adrianmay/rhaboo" rel="nofollow noreferrer">https://github.com/adrianmay/rhaboo</a> is a localStorage sugar layer that lets you write things like this:</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-keyword">var</span> store = Rhaboo.<span class="hljs-title function_ invoke__">persistent</span>(<span class="hljs-string">'Some name'</span>);
store.<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">'count'</span>, store.count ? store.count+<span class="hljs-number">1</span> : <span class="hljs-number">1</span>);
store.<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">'somethingfancy'</span>, {
  <span class="hljs-attr">one</span>: [<span class="hljs-string">'man'</span>, <span class="hljs-string">'went'</span>],
  <span class="hljs-number">2</span>: <span class="hljs-string">'mow'</span>,
  <span class="hljs-attr">went</span>: [  <span class="hljs-number">2</span>, { <span class="hljs-attr">mow</span>: [<span class="hljs-string">'a'</span>, <span class="hljs-string">'meadow'</span> ] }, {}  ]
});
store.somethingfancy.went[<span class="hljs-number">1</span>].mow.<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'lawn'</span>);
</code></pre>

<p>It doesn't use JSON.stringify/parse because that would be inaccurate and slow on big objects. Instead, each terminal value has its own localStorage entry.</p>

<p>You can probably guess that I might have something to do with rhaboo.</p>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 16</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'obj'</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({<span class="hljs-attr">name</span>:<span class="hljs-string">'Akash'</span>})); <span class="hljs-comment">// Set Object in localStorage</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'obj'</span>); <span class="hljs-comment">// Get Object from localStorage</span>

sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'obj'</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({<span class="hljs-attr">name</span>:<span class="hljs-string">'Akash'</span>})); <span class="hljs-comment">// Set Object in sessionStorage</span>
sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'obj'</span>); <span class="hljs-comment">// Get Object from sessionStorage</span>
</code></pre>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 17</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I made another minimalistic wrapper with only 20 lines of code to allow using it like it should:</p>

<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'myKey'</span>,{<span class="hljs-attr">a</span>:[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>], <span class="hljs-attr">b</span>: <span class="hljs-string">'ok'</span>});
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">has</span>(<span class="hljs-string">'myKey'</span>);   <span class="hljs-comment">// --&gt; true</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'myKey'</span>);   <span class="hljs-comment">// --&gt; {a:[1,2,5], b: 'ok'}</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">keys</span>();         <span class="hljs-comment">// --&gt; ['myKey']</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'myKey'</span>);
</code></pre>

<p><a href="https://github.com/zevero/simpleWebstorage" rel="nofollow">https://github.com/zevero/simpleWebstorage</a></p>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 18</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I made a thing that doesn't break the existing Storage objects, but creates a wrapper so you can do what you want. The result is a normal object, no methods, with access like any object.</p>

<p><a href="https://github.com/rudiedirkx/ObjectStorage" rel="nofollow">The thing I made.</a></p>

<p>If you want 1 <code>localStorage</code> property to be magic:</p>

<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> prop = <span class="hljs-title class_">ObjectStorage</span>(<span class="hljs-variable language_">localStorage</span>, <span class="hljs-string">'prop'</span>);
</code></pre>

<p>If you need several:</p>

<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> storage = <span class="hljs-title class_">ObjectStorage</span>(<span class="hljs-variable language_">localStorage</span>, [<span class="hljs-string">'prop'</span>, <span class="hljs-string">'more'</span>, <span class="hljs-string">'props'</span>]);
</code></pre>

<p>Everything you do to <code>prop</code>, or the objects <strong>inside</strong> <code>storage</code> will be automatically saved into <code>localStorage</code>. You're always playing with a real object, so you can do stuff like this:</p>

<pre class="default s-code-block"><code class="hljs language-kotlin">storage.<span class="hljs-keyword">data</span>.list.push(<span class="hljs-string">'more data'</span>);
storage.another.list.splice(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, {another: <span class="hljs-string">'object'</span>});
</code></pre>

<p>And every new object <strong>inside</strong> a tracked object will be automatically tracked.</p>

<p><strong>The very big downside:</strong> it depends on <code>Object.observe()</code> so it has very limited browser support. And it doesn't look like it'll be coming for Firefox or Edge anytime soon.</p>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 19</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I found a way to make it work with objects that have cyclic references.</p>

<p>Let's make an object with cyclic references.</p>

<pre class="default s-code-block"><code class="hljs language-yaml"><span class="hljs-string">obj</span> <span class="hljs-string">=</span> {
    <span class="hljs-attr">L:</span> {
        <span class="hljs-attr">L:</span> { <span class="hljs-attr">v:</span> <span class="hljs-string">'lorem'</span> },
        <span class="hljs-attr">R:</span> { <span class="hljs-attr">v:</span> <span class="hljs-string">'ipsum'</span> }
    },
    <span class="hljs-attr">R:</span> {
        <span class="hljs-attr">L:</span> { <span class="hljs-attr">v:</span> <span class="hljs-string">'dolor'</span> },
        <span class="hljs-attr">R:</span> {
            <span class="hljs-attr">L:</span> { <span class="hljs-attr">v:</span> <span class="hljs-string">'sit'</span> },
            <span class="hljs-attr">R:</span> { <span class="hljs-attr">v:</span> <span class="hljs-string">'amet'</span> }
        }
    }
}
<span class="hljs-string">obj.R.L.uncle</span> <span class="hljs-string">=</span> <span class="hljs-string">obj.L;</span>
<span class="hljs-string">obj.R.R.uncle</span> <span class="hljs-string">=</span> <span class="hljs-string">obj.L;</span>
<span class="hljs-string">obj.R.R.L.uncle</span> <span class="hljs-string">=</span> <span class="hljs-string">obj.R.L;</span>
<span class="hljs-string">obj.R.R.R.uncle</span> <span class="hljs-string">=</span> <span class="hljs-string">obj.R.L;</span>
<span class="hljs-string">obj.L.L.uncle</span> <span class="hljs-string">=</span> <span class="hljs-string">obj.R;</span>
<span class="hljs-string">obj.L.R.uncle</span> <span class="hljs-string">=</span> <span class="hljs-string">obj.R;</span>
</code></pre>

<p>We can't do <code>JSON.stringify</code> here, because of the circular references.</p>

<p><a href="https://i.stack.imgur.com/4taQx.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/4taQx.png" alt="circularUncle"></a></p>

<p><code>LOCALSTORAGE.CYCLICJSON</code> has <code>.stringify</code> and <code>.parse</code> just like normal <code>JSON</code>, but works with objects with circular references. ("Works" meaning parse(stringify(obj)) and obj are deep equal AND have identical sets of 'inner equalities')</p>

<p>But we can just use the shortcuts:</p>

<pre class="default s-code-block"><code class="hljs language-bash">LOCALSTORAGE.setObject(<span class="hljs-string">'latinUncles'</span>, obj)
recovered = LOCALSTORAGE.getObject(<span class="hljs-string">'latinUncles'</span>)
</code></pre>

<p>Then, <code>recovered</code> will be "the same" to obj, in the following sense:</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-section">[
obj.L.L.v === recovered.L.L.v,
obj.L.R.v === recovered.L.R.v,
obj.R.L.v === recovered.R.L.v,
obj.R.R.L.v === recovered.R.R.L.v,
obj.R.R.R.v === recovered.R.R.R.v,
obj.R.L.uncle === obj.L,
obj.R.R.uncle === obj.L,
obj.R.R.L.uncle === obj.R.L,
obj.R.R.R.uncle === obj.R.L,
obj.L.L.uncle === obj.R,
obj.L.R.uncle === obj.R,
recovered.R.L.uncle === recovered.L,
recovered.R.R.uncle === recovered.L,
recovered.R.R.L.uncle === recovered.R.L,
recovered.R.R.R.uncle === recovered.R.L,
recovered.L.L.uncle === recovered.R,
recovered.L.R.uncle === recovered.R
]</span>
</code></pre>

<p>Here is the implementation of <code>LOCALSTORAGE</code></p>

<p></p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-variable constant_">LOCALSTORAGE</span> = (<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
  <span class="hljs-string">"use strict"</span>;
  <span class="hljs-keyword">var</span> ignore = [<span class="hljs-title class_">Boolean</span>, <span class="hljs-title class_">Date</span>, <span class="hljs-title class_">Number</span>, <span class="hljs-title class_">RegExp</span>, <span class="hljs-title class_">String</span>];
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">primitive</span>(<span class="hljs-params">item</span>){
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> item === <span class="hljs-string">'object'</span>){
      <span class="hljs-keyword">if</span> (item === <span class="hljs-literal">null</span>) { <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; }
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;ignore.<span class="hljs-property">length</span>; i++){
        <span class="hljs-keyword">if</span> (item <span class="hljs-keyword">instanceof</span> ignore[i]) { <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; }
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">infant</span>(<span class="hljs-params">value</span>){
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(value) ? [] : {};
  }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">decycleIntoForest</span>(<span class="hljs-params">object, replacer</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> replacer !== <span class="hljs-string">'function'</span>){
      replacer = <span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>){ <span class="hljs-keyword">return</span> x; }
    }
    object = <span class="hljs-title function_">replacer</span>(object);
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">primitive</span>(object)) <span class="hljs-keyword">return</span> object;
    <span class="hljs-keyword">var</span> objects = [object];
    <span class="hljs-keyword">var</span> forest  = [<span class="hljs-title function_">infant</span>(object)];
    <span class="hljs-keyword">var</span> bucket  = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>(); <span class="hljs-comment">// bucket = inverse of objects </span>
    bucket.<span class="hljs-title function_">set</span>(object, <span class="hljs-number">0</span>);    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">addToBucket</span>(<span class="hljs-params">obj</span>){
      <span class="hljs-keyword">var</span> result = objects.<span class="hljs-property">length</span>;
      objects.<span class="hljs-title function_">push</span>(obj);
      bucket.<span class="hljs-title function_">set</span>(obj, result);
      <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">isInBucket</span>(<span class="hljs-params">obj</span>){ <span class="hljs-keyword">return</span> bucket.<span class="hljs-title function_">has</span>(obj); }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">processNode</span>(<span class="hljs-params">source, target</span>){
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(source).<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>){
        <span class="hljs-keyword">var</span> value = <span class="hljs-title function_">replacer</span>(source[key]);
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">primitive</span>(value)){
          target[key] = {<span class="hljs-attr">value</span>: value};
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">var</span> ptr;
          <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isInBucket</span>(value)){
            ptr = bucket.<span class="hljs-title function_">get</span>(value);
          } <span class="hljs-keyword">else</span> {
            ptr = <span class="hljs-title function_">addToBucket</span>(value);
            <span class="hljs-keyword">var</span> newTree = <span class="hljs-title function_">infant</span>(value);
            forest.<span class="hljs-title function_">push</span>(newTree);
            <span class="hljs-title function_">processNode</span>(value, newTree);
          }
          target[key] = {<span class="hljs-attr">pointer</span>: ptr};
        }
      });
    }
    <span class="hljs-title function_">processNode</span>(object, forest[<span class="hljs-number">0</span>]);
    <span class="hljs-keyword">return</span> forest;
  };
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">deForestIntoCycle</span>(<span class="hljs-params">forest</span>) {
    <span class="hljs-keyword">var</span> objects = [];
    <span class="hljs-keyword">var</span> objectRequested = [];
    <span class="hljs-keyword">var</span> todo = [];
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">processTree</span>(<span class="hljs-params">idx</span>) {
      <span class="hljs-keyword">if</span> (idx <span class="hljs-keyword">in</span> objects) <span class="hljs-keyword">return</span> objects[idx];
      <span class="hljs-keyword">if</span> (objectRequested[idx]) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      objectRequested[idx] = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">var</span> tree = forest[idx];
      <span class="hljs-keyword">var</span> node = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(tree) ? [] : {};
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> tree) {
        <span class="hljs-keyword">var</span> o = tree[key];
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'pointer'</span> <span class="hljs-keyword">in</span> o) {
          <span class="hljs-keyword">var</span> ptr = o.<span class="hljs-property">pointer</span>;
          <span class="hljs-keyword">var</span> value = <span class="hljs-title function_">processTree</span>(ptr);
          <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span>) {
            todo.<span class="hljs-title function_">push</span>({
              <span class="hljs-attr">node</span>: node,
              <span class="hljs-attr">key</span>: key,
              <span class="hljs-attr">idx</span>: ptr
            });
          } <span class="hljs-keyword">else</span> {
            node[key] = value;
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">if</span> (<span class="hljs-string">'value'</span> <span class="hljs-keyword">in</span> o) {
            node[key] = o.<span class="hljs-property">value</span>;
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'unexpected'</span>)
          }
        }
      }
      objects[idx] = node;
      <span class="hljs-keyword">return</span> node;
    }
    <span class="hljs-keyword">var</span> result = <span class="hljs-title function_">processTree</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; todo.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">var</span> item = todo[i];
      item.<span class="hljs-property">node</span>[item.<span class="hljs-property">key</span>] = objects[item.<span class="hljs-property">idx</span>];
    }
    <span class="hljs-keyword">return</span> result;
  };
  <span class="hljs-keyword">var</span> <span class="hljs-variable language_">console</span> = {
    <span class="hljs-attr">log</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>){
      <span class="hljs-keyword">var</span> the = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'the'</span>);
      the.<span class="hljs-property">textContent</span> = the.<span class="hljs-property">textContent</span> + <span class="hljs-string">'\n'</span> + x;
	},
	<span class="hljs-attr">delimiter</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
      <span class="hljs-keyword">var</span> the = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'the'</span>);
      the.<span class="hljs-property">textContent</span> = the.<span class="hljs-property">textContent</span> +
		<span class="hljs-string">'\n*******************************************'</span>;
	}
  }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">logCyclicObjectToConsole</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-keyword">var</span> cycleFree = <span class="hljs-title function_">decycleIntoForest</span>(root);
    <span class="hljs-keyword">var</span> shown = cycleFree.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">tree, idx</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    });
    <span class="hljs-keyword">var</span> indentIncrement = <span class="hljs-number">4</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">showItem</span>(<span class="hljs-params">nodeSlot, indent, label</span>) {
      <span class="hljs-keyword">var</span> leadingSpaces = <span class="hljs-string">' '</span>.<span class="hljs-title function_">repeat</span>(indent);
      <span class="hljs-keyword">var</span> leadingSpacesPlus = <span class="hljs-string">' '</span>.<span class="hljs-title function_">repeat</span>(indent + indentIncrement);
      <span class="hljs-keyword">if</span> (shown[nodeSlot]) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(leadingSpaces + label + <span class="hljs-string">' ... see above (object #'</span> + nodeSlot + <span class="hljs-string">')'</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(leadingSpaces + label + <span class="hljs-string">' object#'</span> + nodeSlot);
        <span class="hljs-keyword">var</span> tree = cycleFree[nodeSlot];
        shown[nodeSlot] = <span class="hljs-literal">true</span>;
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(tree).<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) {
          <span class="hljs-keyword">var</span> entry = tree[key];
          <span class="hljs-keyword">if</span> (<span class="hljs-string">'value'</span> <span class="hljs-keyword">in</span> entry) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(leadingSpacesPlus + key + <span class="hljs-string">": "</span> + entry.<span class="hljs-property">value</span>);
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-string">'pointer'</span> <span class="hljs-keyword">in</span> entry) {
              <span class="hljs-title function_">showItem</span>(entry.<span class="hljs-property">pointer</span>, indent + indentIncrement, key);
            }
          }
        });
      }
    }
	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">delimiter</span>();
    <span class="hljs-title function_">showItem</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'root'</span>);
  };
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">stringify</span>(<span class="hljs-params">obj</span>){
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">decycleIntoForest</span>(obj));
  }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">str</span>){
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">deForestIntoCycle</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(str));
  }
  <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">CYCLICJSON</span> = {
    <span class="hljs-attr">decycleIntoForest</span>: decycleIntoForest,
    deForestIntoCycle : deForestIntoCycle,
    <span class="hljs-attr">logCyclicObjectToConsole</span>: logCyclicObjectToConsole,
    stringify : stringify,
    parse : parse
  }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">setObject</span>(<span class="hljs-params">name, object</span>){
    <span class="hljs-keyword">var</span> str = <span class="hljs-title function_">stringify</span>(object);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(name, str);
  }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getObject</span>(<span class="hljs-params">name</span>){
    <span class="hljs-keyword">var</span> str = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(name);
    <span class="hljs-keyword">if</span> (str===<span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">parse</span>(str);
  }
  <span class="hljs-keyword">return</span> {
    <span class="hljs-variable constant_">CYCLICJSON</span> : <span class="hljs-variable constant_">CYCLICJSON</span>,
    setObject  : setObject,
    getObject  : getObject
  }
})();
obj = {
	<span class="hljs-attr">L</span>: {
		<span class="hljs-attr">L</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'lorem'</span> },
		<span class="hljs-attr">R</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'ipsum'</span> }
	},
	<span class="hljs-attr">R</span>: {
		<span class="hljs-attr">L</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'dolor'</span> },
		<span class="hljs-attr">R</span>: {
			<span class="hljs-attr">L</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'sit'</span> },
			<span class="hljs-attr">R</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'amet'</span> }
		}
	}
}
obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>;
obj.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>;

<span class="hljs-comment">// LOCALSTORAGE.setObject('latinUncles', obj)</span>
<span class="hljs-comment">// recovered = LOCALSTORAGE.getObject('latinUncles')</span>
<span class="hljs-comment">// localStorage not available inside fiddle ):</span>
<span class="hljs-variable constant_">LOCALSTORAGE</span>.<span class="hljs-property">CYCLICJSON</span>.<span class="hljs-title function_">logCyclicObjectToConsole</span>(obj)
putIntoLS = <span class="hljs-variable constant_">LOCALSTORAGE</span>.<span class="hljs-property">CYCLICJSON</span>.<span class="hljs-title function_">stringify</span>(obj);
recovered = <span class="hljs-variable constant_">LOCALSTORAGE</span>.<span class="hljs-property">CYCLICJSON</span>.<span class="hljs-title function_">parse</span>(putIntoLS);
<span class="hljs-variable constant_">LOCALSTORAGE</span>.<span class="hljs-property">CYCLICJSON</span>.<span class="hljs-title function_">logCyclicObjectToConsole</span>(recovered);

<span class="hljs-keyword">var</span> the = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'the'</span>);
the.<span class="hljs-property">textContent</span> = the.<span class="hljs-property">textContent</span> + <span class="hljs-string">'\n\n'</span> +
<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(
[
obj.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span> === recovered.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span>,
obj.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">v</span> === recovered.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">v</span>,
obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span> === recovered.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span>,
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span> === recovered.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span>,
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">v</span> === recovered.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">v</span>,
obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">L</span>,
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">L</span>,
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>,
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>,
obj.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">R</span>,
obj.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">R</span>,
recovered.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">L</span>,
recovered.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">L</span>,
recovered.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>,
recovered.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>,
recovered.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">R</span>,
recovered.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">R</span>
]
)</code></pre>
<pre class="snippet-code-html lang-html s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">id</span>=<span class="hljs-string">'the'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span></code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif1" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 20</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This question has been answered sufficiently from the JavaScript-only perspective, and others have already noted that both <code>localStorage.getItem</code> and <code>localStorage.setItem</code> have no concept of objectsthey handle strings and strings only. This answer provides a TypeScript-friendly solution that incorporates what <a href="https://stackoverflow.com/a/2010948/39155">others</a> <a href="https://stackoverflow.com/a/3146971/39155">have</a> <a href="https://stackoverflow.com/a/4762411/39155">suggested</a> in JavaScript-only solutions.</p>
<h2>TypeScript 4.2.3</h2>
<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setObject</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">unknown</span></span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));
};

<span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getObject</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> value = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getItem</span>(key);
  <span class="hljs-keyword">if</span> (!value) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(value);
};

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> {
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Storage</span> {
    <span class="hljs-attr">setObject</span>: <span class="hljs-function">(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">unknown</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
    <span class="hljs-attr">getObject</span>: <span class="hljs-function">(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">unknown</span>;
  }
}
</code></pre>
<h3>Usage</h3>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setObject</span>(<span class="hljs-string">'ages'</span>, [<span class="hljs-number">23</span>, <span class="hljs-number">18</span>, <span class="hljs-number">33</span>, <span class="hljs-number">22</span>, <span class="hljs-number">58</span>]);
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getObject</span>(<span class="hljs-string">'ages'</span>);
</code></pre>
<h3>Explanation</h3>
<p>We declare both <code>setObject</code> and <code>getObject</code> functions on the <code>Storage</code> prototype<code>localStorage</code> is an instance of this type. There's nothing special we really need to note besides the null handling in <code>getObject</code>. Since <code>getItem</code> can return <code>null</code>, we must exit early since calling <code>JSON.parse</code> on a <code>null</code> value will throw a runtime exception.</p>
<p>After declaring the functions on the <code>Storage</code> prototype, we include their type definitions on the <code>Storage</code> type in the global namespace.</p>
<p>Note: If we defined these functions with arrow functions, we'd need to assume that the storage object we're calling is always <code>localStorage</code>, which might not be true. For instance, the above code will add <code>setObject</code> and <code>getObject</code> support to <code>sessionStorage</code> as well.</p>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 21</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is some extended version of the code <a href="https://stackoverflow.com/questions/2010892/how-to-store-objects-in-html5-localstorage/5790739#5790739">posted by danott</a>:</p>
<p>It'll also implement a <strong>delete</strong> value from localstorage and shows how to adds a Getter and Setter layer so instead of,</p>
<p><code>localstorage.setItem(preview, true)</code></p>
<p>you can write</p>
<p><code>config.preview = true</code></p>
<p>Okay, here were go:</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> <span class="hljs-variable constant_">PT</span>=<span class="hljs-title class_">Storage</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable constant_">PT</span>.<span class="hljs-property">_setItem</span> &gt;=<span class="hljs-string">'u'</span>)
  <span class="hljs-variable constant_">PT</span>.<span class="hljs-property">_setItem</span> = <span class="hljs-variable constant_">PT</span>.<span class="hljs-property">setItem</span>;
<span class="hljs-variable constant_">PT</span>.<span class="hljs-property">setItem</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>)
{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value &gt;=<span class="hljs-string">'u'</span>) <span class="hljs-comment">//..undefined</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeItem</span>(key)
  <span class="hljs-keyword">else</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));
}

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable constant_">PT</span>.<span class="hljs-property">_getItem</span> &gt;=<span class="hljs-string">'u'</span>)
  <span class="hljs-variable constant_">PT</span>.<span class="hljs-property">_getItem</span> = <span class="hljs-variable constant_">PT</span>.<span class="hljs-property">getItem</span>;
<span class="hljs-variable constant_">PT</span>.<span class="hljs-property">getItem</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>)
{
  <span class="hljs-keyword">var</span> <span class="hljs-title class_">ItemData</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_getItem</span>(key)
  <span class="hljs-keyword">try</span>
  {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">ItemData</span>);
  }
  <span class="hljs-keyword">catch</span>(e)
  {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">ItemData</span>;
  }
}

<span class="hljs-comment">// Aliases for localStorage.set/getItem</span>
get = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">getItem</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">localStorage</span>)
set = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">setItem</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">localStorage</span>)

<span class="hljs-comment">// Create ConfigWrapperObject</span>
<span class="hljs-keyword">var</span> config = {}

<span class="hljs-comment">// Helper to create getter &amp; setter</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">configCreate</span>(<span class="hljs-params">PropToAdd</span>){
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>( config, <span class="hljs-title class_">PropToAdd</span>, {
      <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)    { <span class="hljs-keyword">return</span> (<span class="hljs-title function_">get</span>(<span class="hljs-title class_">PropToAdd</span>)    )},
      <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) {         <span class="hljs-title function_">set</span>(<span class="hljs-title class_">PropToAdd</span>, val)}
    })
}
<span class="hljs-comment">//------------------------------</span>

<span class="hljs-comment">// Usage Part</span>
<span class="hljs-comment">// Create properties</span>
<span class="hljs-title function_">configCreate</span>(<span class="hljs-string">'preview'</span>)
<span class="hljs-title function_">configCreate</span>(<span class="hljs-string">'notification'</span>)
<span class="hljs-comment">//...</span>

<span class="hljs-comment">// Configuration Data transfer</span>
<span class="hljs-comment">// Set</span>
config.<span class="hljs-property">preview</span> = <span class="hljs-literal">true</span>

<span class="hljs-comment">// Get</span>
config.<span class="hljs-property">preview</span>

<span class="hljs-comment">// Delete</span>
config.<span class="hljs-property">preview</span> = <span class="hljs-literal">undefined</span>
</code></pre>
<p>Well, you may strip the aliases part with <code>.bind(...)</code>. However, I just put it in since it's really good to know about this. I took me hours to find out why a simple <code>get = localStorage.getItem;</code> don't work.</p>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 22</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h3>Circular References</h3>
<p>In this answer I focus on data-only objects (without functions, etc.) with circular references and develop ideas mentioned <a href="https://stackoverflow.com/a/27013704/860099">by maja</a> <a href="https://stackoverflow.com/a/58825573/860099">and mathheadinclouds</a> (I use his test case and
my code is several times shorter).</p>
<p>Actually, we can use JSON.stringify with a proper <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" rel="nofollow noreferrer">replacer</a> - if the source object contains multi-references to some object, or contains circular references then we reference it by special path-string (similar to <a href="https://jsonpath.com/" rel="nofollow noreferrer">JSONPath</a>).</p>
<p></p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false"><div class="snippet-display" style="vertical-align: center"><p><a class="snippet-show-link-chevron"><span class="expander-arrow-hide" style="vertical-align: middle;"></span></a><a class="snippet-show-link"><span class="show-hide" data-ishidden="true" style="vertical-align: middle">Show code snippet</span></a></p></div>
<div class="snippet-code snippet-currently-hidden" style="display: none;">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">// JSON.strigify replacer for objects with circ ref</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">refReplacer</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">let</span> m = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(), v = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(), init = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">field, value</span>) {
    <span class="hljs-keyword">let</span> p = m.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>) + (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(<span class="hljs-variable language_">this</span>) ? <span class="hljs-string">`[<span class="hljs-subst">${field}</span>]`</span> : <span class="hljs-string">'.'</span> + field);
    <span class="hljs-keyword">let</span> isComplex = value === <span class="hljs-title class_">Object</span>(value)

    <span class="hljs-keyword">if</span> (isComplex) m.<span class="hljs-title function_">set</span>(value, p);

    <span class="hljs-keyword">let</span> pp = v.<span class="hljs-title function_">get</span>(value)||<span class="hljs-string">''</span>;
    <span class="hljs-keyword">let</span> path = p.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/undefined\.\.?/</span>, <span class="hljs-string">''</span>);
    <span class="hljs-keyword">let</span> val = pp ? <span class="hljs-string">`#REF:<span class="hljs-subst">${pp[<span class="hljs-number">0</span>] == <span class="hljs-string">'['</span> ? <span class="hljs-string">'$'</span>:<span class="hljs-string">'$.'</span>}</span><span class="hljs-subst">${pp}</span>`</span> : value;

    !init ? (init=value) : (val===init ? val=<span class="hljs-string">"#REF:$"</span> : <span class="hljs-number">0</span>);
    <span class="hljs-keyword">if</span>(!pp &amp;&amp; isComplex) v.<span class="hljs-title function_">set</span>(value, path);

    <span class="hljs-keyword">return</span> val;
  }
}


<span class="hljs-comment">// ---------------</span>
<span class="hljs-comment">// TEST</span>
<span class="hljs-comment">// ---------------</span>

<span class="hljs-comment">// Generate obj with duplicate/circular references</span>
<span class="hljs-keyword">let</span> obj = {
    <span class="hljs-attr">L</span>: {
        <span class="hljs-attr">L</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'lorem'</span> },
        <span class="hljs-attr">R</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'ipsum'</span> }
    },
    <span class="hljs-attr">R</span>: {
        <span class="hljs-attr">L</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'dolor'</span> },
        <span class="hljs-attr">R</span>: {
            <span class="hljs-attr">L</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'sit'</span> },
            <span class="hljs-attr">R</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'amet'</span> }
        }
    }
}
obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>;
obj.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>;
testObject = obj;

<span class="hljs-keyword">let</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(testObject, <span class="hljs-title function_">refReplacer</span>(), <span class="hljs-number">4</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Test Object\n"</span>, testObject);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"JSON with JSONpath references\n"</span>, json);</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif2" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
<p>Parse such JSON content with JSONpath-like references:</p>
<p></p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="false"><div class="snippet-display" style="vertical-align: center"><p><a class="snippet-show-link-chevron"><span class="expander-arrow-hide" style="vertical-align: middle;"></span></a><a class="snippet-show-link"><span class="show-hide" data-ishidden="true" style="vertical-align: middle">Show code snippet</span></a></p></div>
<div class="snippet-code snippet-currently-hidden" style="display: none;">
<pre class="snippet-code-js lang-js s-code-block"><code class="hljs language-javascript"><span class="hljs-comment">// Parse JSON content with JSONpath references to object</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">parseRefJSON</span>(<span class="hljs-params">json</span>) {
  <span class="hljs-keyword">let</span> objToPath = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  <span class="hljs-keyword">let</span> pathToObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  <span class="hljs-keyword">let</span> o = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(json);

  <span class="hljs-keyword">let</span> <span class="hljs-title function_">traverse</span> = (<span class="hljs-params">parent, field</span>) =&gt; {
    <span class="hljs-keyword">let</span> obj = parent;
    <span class="hljs-keyword">let</span> path = <span class="hljs-string">'#REF:$'</span>;

    <span class="hljs-keyword">if</span> (field !== <span class="hljs-literal">undefined</span>) {
      obj = parent[field];
      path = objToPath.<span class="hljs-title function_">get</span>(parent) + (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(parent) ? <span class="hljs-string">`[<span class="hljs-subst">${field}</span>]`</span> : <span class="hljs-string">`<span class="hljs-subst">${field ? <span class="hljs-string">'.'</span> + field : <span class="hljs-string">''</span>}</span>`</span>);
    }

    objToPath.<span class="hljs-title function_">set</span>(obj, path);
    pathToObj.<span class="hljs-title function_">set</span>(path, obj);

    <span class="hljs-keyword">let</span> ref = pathToObj.<span class="hljs-title function_">get</span>(obj);
    <span class="hljs-keyword">if</span> (ref) parent[field] = ref;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> f <span class="hljs-keyword">in</span> obj) <span class="hljs-keyword">if</span> (obj === <span class="hljs-title class_">Object</span>(obj)) <span class="hljs-title function_">traverse</span>(obj, f);
  }

  <span class="hljs-title function_">traverse</span>(o);
  <span class="hljs-keyword">return</span> o;
}


<span class="hljs-comment">// ---------------</span>
<span class="hljs-comment">// TEST 1</span>
<span class="hljs-comment">// ---------------</span>

<span class="hljs-keyword">let</span> json = <span class="hljs-string">`
{
    "L": {
        "L": {
            "v": "lorem",
            "uncle": {
                "L": {
                    "v": "dolor",
                    "uncle": "#REF:$.L"
                },
                "R": {
                    "L": {
                        "v": "sit",
                        "uncle": "#REF:$.L.L.uncle.L"
                    },
                    "R": {
                        "v": "amet",
                        "uncle": "#REF:$.L.L.uncle.L"
                    },
                    "uncle": "#REF:$.L"
                }
            }
        },
        "R": {
            "v": "ipsum",
            "uncle": "#REF:$.L.L.uncle"
        }
    },
    "R": "#REF:$.L.L.uncle"
}`</span>;

<span class="hljs-keyword">let</span> testObject = <span class="hljs-title function_">parseRefJSON</span>(json);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Test Object\n"</span>, testObject);


<span class="hljs-comment">// ---------------</span>
<span class="hljs-comment">// TEST 2</span>
<span class="hljs-comment">// ---------------</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Tests from mathheadinclouds answer: '</span>);

<span class="hljs-keyword">let</span> recovered = testObject;

<span class="hljs-keyword">let</span> obj = { <span class="hljs-comment">// Original object</span>
    <span class="hljs-attr">L</span>: {
        <span class="hljs-attr">L</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'lorem'</span> },
        <span class="hljs-attr">R</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'ipsum'</span> }
    },
    <span class="hljs-attr">R</span>: {
        <span class="hljs-attr">L</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'dolor'</span> },
        <span class="hljs-attr">R</span>: {
            <span class="hljs-attr">L</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'sit'</span> },
            <span class="hljs-attr">R</span>: { <span class="hljs-attr">v</span>: <span class="hljs-string">'amet'</span> }
        }
    }
}
obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>;
obj.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>;
obj.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> = obj.<span class="hljs-property">R</span>;

[
  obj.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span> === recovered.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span>,
  obj.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">v</span> === recovered.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">v</span>,
  obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span> === recovered.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span>,
  obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span> === recovered.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">v</span>,
  obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">v</span> === recovered.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">v</span>,
  obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">L</span>,
  obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">L</span>,
  obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>,
  obj.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>,
  obj.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">R</span>,
  obj.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === obj.<span class="hljs-property">R</span>,
  recovered.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">L</span>,
  recovered.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">L</span>,
  recovered.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>,
  recovered.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">R</span>.<span class="hljs-property">L</span>,
  recovered.<span class="hljs-property">L</span>.<span class="hljs-property">L</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">R</span>,
  recovered.<span class="hljs-property">L</span>.<span class="hljs-property">R</span>.<span class="hljs-property">uncle</span> === recovered.<span class="hljs-property">R</span>
].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'test pass: '</span> + x));</code></pre>
<div class="snippet-result"><div class="snippet-ctas"><button type="button" class="s-btn s-btn__primary"><span class="icon-play-white _hover"></span><span> Run code snippet</span></button><input class="copySnippet s-btn s-btn__filled" type="button" value="Copy snippet to answer" style="display: none;"><button type="button" class="s-btn hideResults" style="display: none;">Hide results</button><div class="popout-code"><a class="snippet-expand-link">Expand snippet</a></div></div><div class="snippet-result-code" style="display: none;"><iframe name="sif3" sandbox="allow-forms allow-modals allow-scripts" class="snippet-box-edit snippet-box-result" frameborder="0"></iframe></div></div></div>
</div>
<p></p>
<p>To load/save the resulting JSON content into storage, use the following code:</p>
<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">localStorage.myObject</span> = JSON.stringify(testObject, refReplacer())<span class="hljs-comment">;  // Save</span>
<span class="hljs-attr">testObject</span> = parseRefJSON(localStorage.myObject)<span class="hljs-comment">;                   // Load</span>
</code></pre>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 23</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I suggest using <a href="https://github.com/pichillilorenzo/jackson-js" rel="nofollow noreferrer">Jackson-js</a>. It is a library that handles serializing and deserializing of Objects while retaining their structure, based on decorators.</p>
<p>The library handles all the pitfalls such as cyclic reference, attributes aliasing, etc.</p>
<p>Simply describe your class using the @JsonProperty() and @JsonClassType() decorators.</p>
<p>Serialize your object using:</p>
<pre class="default s-code-block"><code class="hljs language-vbnet"><span class="hljs-keyword">const</span> objectMapper = <span class="hljs-built_in">new</span> ObjectMapper();
localstore.setItem(<span class="hljs-keyword">key</span>, objectMapper.stringify&lt;yourObjectType&gt;(yourObject));
</code></pre>
<p>For slightly more detailed explanation, check my answer here:</p>
<p><em><a href="https://stackoverflow.com/questions/16261119/typescript-objects-serialization/66706365#66706365">Typescript objects serialization?</a></em></p>
<p>And the Jackson-js tutorial here:</p>
<p><em><a href="https://itnext.io/jackson-js-powerful-javascript-decorators-to-serialize-deserialize-objects-into-json-and-vice-df952454cf" rel="nofollow noreferrer">Jackson-js: Powerful JavaScript decorators to serialize/deserialize objects into JSON and vice versa (Part 1)</a></em></p>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 24</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/local-storage">local-storage</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'user'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(user));
</code></pre>
<p>Then to retrieve it from the store and convert to an object again:</p>
<pre class="default s-code-block"><code class="hljs language-javascript"><span class="hljs-keyword">var</span> user = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'user'</span>));

<span class="hljs-title class_">If</span> we need to <span class="hljs-keyword">delete</span> all entries <span class="hljs-keyword">of</span> the store we can simply <span class="hljs-attr">do</span>:

<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">clear</span>();
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/what-does-%22fatal-error:-unexpectedly-found-nil-while-unwrapping-an-optional-value%22-mean-1657384593944">What does &quot;Fatal error: Unexpectedly found nil while unwrapping an Optional value&quot; mean?</a><a href="/questions/how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658">How can I upload files to a server using JSP/Servlet?</a><a href="/questions/what-is-event-bubbling-and-capturing-1657388059203">What is event bubbling and capturing?</a><a href="/questions/list-of-lists-changes-reflected-across-sublists-unexpectedly-1657384393720">List of lists changes reflected across sublists unexpectedly</a><a href="/questions/get-top-1-row-of-each-group-1657387438304">Get top 1 row of each group</a><a href="/questions/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url-1657387618306">What is the best regular expression to check if a string is a valid URL?</a><a href="/questions/how-do-i-count-the-occurrences-of-a-list-item-1657387916234">How do I count the occurrences of a list item?</a><a href="/questions/is-it-possible-for-flex-items-to-align-tightly-to-the-items-above-them-1657388511179">Is it possible for flex items to align tightly to the items above them?</a><a href="/questions/how-can-i-fix-&#x27;android.os.networkonmainthreadexception&#x27;-1657384454963">How can I fix &#x27;android.os.NetworkOnMainThreadException&#x27;?</a><a href="/questions/why-does-%22a-x-or-y-or-z%22-always-evaluate-to-true-1657384855216">Why does &quot;a == x or y or z&quot; always evaluate to True?</a><a href="/questions/how-to-choose-the-right-bean-scope-1657387596513">How to choose the right bean scope?</a><a href="/questions/console.log()-async-or-sync-1657388401087">console.log() async or sync?</a><a href="/questions/how-do-i-return-the-response-from-an-asynchronous-call-1657384208012">How do I return the response from an asynchronous call?</a><a href="/questions/what-is-object-slicing-1657384506425">What is object slicing?</a><a href="/questions/how-to-closehide-the-android-soft-keyboard-programmatically-1657388217420">How to close/hide the Android soft keyboard programmatically?</a><a href="/questions/why-is-using-&#x27;eval&#x27;-a-bad-practice-1657387348760">Why is using &#x27;eval&#x27; a bad practice?</a><a href="/questions/what-is-a-stackoverflowerror-1657388319634">What is a StackOverflowError?</a><a href="/questions/syntax-error-due-to-using-a-reserved-word-as-a-table-or-column-name-in-mysql-1657384689274">Syntax error due to using a reserved word as a table or column name in MySQL</a><a href="/questions/why-are-global-variables-evil-closed-1657388260006">Why are global variables evil? [closed]</a><a href="/questions/cross-thread-operation-not-valid:-control-accessed-from-a-thread-other-than-the-thread-it-was-created-on-1657387659019">Cross-thread operation not valid: Control accessed from a thread other than the thread it was created on</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;Looking at the \u0026lt;a href=\u0026quot;https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Name-ValueStorage/Name-ValueStorage.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Apple\u0026lt;/a\u0026gt;, \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Mozilla\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Mozilla again\u0026lt;/a\u0026gt; documentation, the functionality seems to be limited to handle only string key/value pairs.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;A workaround can be to \u0026lt;a href=\u0026quot;https://www.w3schools.com/js/js_json_stringify.asp\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;em\u0026gt;stringify\u0026lt;/em\u0026gt;\u0026lt;/a\u0026gt; your object before storing it, and later parse it when you retrieve it:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; testObject = { \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;one\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;two\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;three\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; };\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Put the object into storage\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;testObject\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(testObject));\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Retrieve the object from storage\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; retrievedObject = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;testObject\u0026apos;\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;retrievedObject: \u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(retrievedObject));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;A minor improvement on a \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/2010994/59087\u0026quot;\u0026gt;variant\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;setObject\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key, value\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(key, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(value));\n}\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;getObject\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; value = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(key);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; value \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(value);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Because of \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Short-circuit_evaluation\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;short-circuit evaluation\u0026lt;/a\u0026gt;, \u0026lt;code\u0026gt;getObject()\u0026lt;/code\u0026gt; will \u0026lt;em\u0026gt;immediately\u0026lt;/em\u0026gt; return \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt; if \u0026lt;code\u0026gt;key\u0026lt;/code\u0026gt; is not in Storage. It also will not throw a \u0026lt;code\u0026gt;SyntaxError\u0026lt;/code\u0026gt; exception if \u0026lt;code\u0026gt;value\u0026lt;/code\u0026gt; is \u0026lt;code\u0026gt;\u0026quot;\u0026quot;\u0026lt;/code\u0026gt; (the empty string; \u0026lt;code\u0026gt;JSON.parse()\u0026lt;/code\u0026gt; cannot handle that).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You might find it useful to extend the Storage object with these handy methods:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;setObject\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key, value\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(key, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(value));\n}\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;getObject\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(key));\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;This way you get the functionality that you really wanted even though underneath the API only supports strings.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Creating a facade for the Storage object is an awesome solution. That way, you can implement your own \u0026lt;code\u0026gt;get\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;set\u0026lt;/code\u0026gt; methods. For my API, I have created a facade for localStorage and then check if it is an object or not while setting and getting.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; data = {\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key, value\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!key || !value) {\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;}\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; value === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;object\u0026quot;\u0026lt;/span\u0026gt;) {\n      value = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(value);\n    }\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(key, value);\n  },\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; value = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(key);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!value) {\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;}\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// assume it is an object that has been stringified\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (value[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;{\u0026quot;\u0026lt;/span\u0026gt;) {\n      value = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(value);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; value;\n  }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;Stringify doesn\u0026apos;t solve all problems\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;It seems that the answers here don\u0026apos;t cover all types that are possible in JavaScript, so here are some short examples on how to deal with them correctly:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Objects and Arrays:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value\u0026quot;\u0026lt;/span\u0026gt;};\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Will ignore private members\u0026lt;/span\u0026gt;\n    obj = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Boolean:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; bool = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt; = bool;\n    bool = (\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;bool\u0026lt;/span\u0026gt; === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Numbers:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; num = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;42\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt; = num;\n    num = +\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;num\u0026lt;/span\u0026gt;;    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Short for \u0026quot;num = parseFloat(localStorage.num);\u0026quot;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Dates:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; date = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;now\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt; = date;\n    date = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;parseInt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;date\u0026lt;/span\u0026gt;));\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Regular expressions:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; regex = \u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/^No\\.[\\d]*$/i\u0026lt;/span\u0026gt;;     \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Usage example: \u0026quot;No.42\u0026quot;.match(regex);\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;regex\u0026lt;/span\u0026gt; = regex;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; components = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;regex\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;match\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;^/(.*)/([a-z]*)$\u0026quot;\u0026lt;/span\u0026gt;);\n    regex = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;(components[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;], components[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;]);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Functions (not recommended):\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {}\n\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt; = func;\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;func\u0026lt;/span\u0026gt;);      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Recreates the function with the name \u0026quot;func\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;I do not recommend\u0026lt;/strong\u0026gt; to store functions, because \u0026lt;code\u0026gt;eval()\u0026lt;/code\u0026gt; is evil and can lead to issues regarding security, optimisation and debugging.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;In general, \u0026lt;code\u0026gt;eval()\u0026lt;/code\u0026gt; should never be used in JavaScript code.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Private members\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;The problem with using \u0026lt;code\u0026gt;JSON.stringify()\u0026lt;/code\u0026gt; for storing objects is, that this function can not serialise private members.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;This issue can be solved by overwriting the \u0026lt;code\u0026gt;.toString()\u0026lt;/code\u0026gt; method (which is called implicitly when storing data in web storage):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Object with private and public members:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;MyClass\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;privateContent, publicContent\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; privateMember = privateContent || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;defaultPrivateValue\u0026quot;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;publicMember\u0026lt;/span\u0026gt; = publicContent  || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;defaultPublicValue\u0026quot;\u0026lt;/span\u0026gt;;\n\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;toString\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;{\u0026quot;private\u0026quot;: \u0026quot;\u0026apos;\u0026lt;/span\u0026gt; + privateMember + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026quot;, \u0026quot;public\u0026quot;: \u0026quot;\u0026apos;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;publicMember\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026quot;}\u0026apos;\u0026lt;/span\u0026gt;;\n        };\n    }\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyClass\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;fromString\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;serialisedString\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; properties = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(serialisedString || \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;{}\u0026quot;\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyClass\u0026lt;/span\u0026gt;(properties.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt;, properties.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt;);\n    };\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Storing:\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyClass\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;invisible\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;visible\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; = obj;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Loading:\u0026lt;/span\u0026gt;\n    obj = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyClass\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;fromString\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2\u0026gt;Circular references\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;Another problem \u0026lt;code\u0026gt;stringify\u0026lt;/code\u0026gt; can\u0026apos;t deal with are circular references:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = {};\nobj[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;circular\u0026quot;\u0026lt;/span\u0026gt;] = obj;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj);  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Fails\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;In this example, \u0026lt;code\u0026gt;JSON.stringify()\u0026lt;/code\u0026gt; will throw a \u0026lt;code\u0026gt;TypeError\u0026lt;/code\u0026gt; \u0026lt;em\u0026gt;\u0026quot;Converting circular structure to JSON\u0026quot;\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;If storing circular references should be supported, the second parameter of \u0026lt;code\u0026gt;JSON.stringify()\u0026lt;/code\u0026gt; might be used:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; obj = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;sub\u0026lt;/span\u0026gt;: {}};\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;sub\u0026lt;/span\u0026gt;[\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;circular\u0026quot;\u0026lt;/span\u0026gt;] = obj;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key, value\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(key == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;circular\u0026apos;\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;$ref\u0026quot;\u0026lt;/span\u0026gt; + value.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;$\u0026quot;\u0026lt;/span\u0026gt;;\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; value;\n    }\n});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;However, finding an efficient solution for storing circular references highly depends on the tasks that need to be solved, and restoring such data is not trivial either.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;There are already some question on Stack\u0026amp;nbsp;Overflow dealing with this problem: \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/10392293/stringify-javascript-object-with-circular-reference/12659424#12659424\u0026quot;\u0026gt;Stringify (convert to JSON) a JavaScript object with circular reference\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There is a great library that wraps many solutions so it even supports older browsers called \u0026lt;a href=\u0026quot;https://github.com/andris9/jStorage\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;jStorage\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can set an object\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-shell\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta prompt_\u0026quot;\u0026gt;$\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;language-bash\u0026quot;\u0026gt;.jStorage.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(key, value)\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And retrieve it easily\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; = $.jStorage.get(key)\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt; = $.jStorage.get(key, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;default value\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I arrived at this post after hitting on another post that has been closed as a duplicate of this - titled \u0026apos;how to store an array in localstorage?\u0026apos;.  Which is fine except neither thread actually provides a full answer as to how you can maintain an array in localStorage - however I have managed to craft a solution based on information contained in both threads.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;So if anyone else is wanting to be able to push/pop/shift items within an array, and they want that array stored in localStorage or indeed sessionStorage, here you go:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;getArray\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;arrayName\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; thisArray = [];\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; fetchArrayObject = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(arrayName);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; fetchArrayObject !== \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;undefined\u0026apos;\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (fetchArrayObject !== \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) { thisArray = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(fetchArrayObject); }\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; thisArray;\n}\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;pushArrayItem\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;arrayName,arrayItem\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; existingArray = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getArray\u0026lt;/span\u0026gt;(arrayName);\n  existingArray.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(arrayItem);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(arrayName,\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(existingArray));\n}\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;popArrayItem\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;arrayName\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; arrayItem = {};\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; existingArray = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getArray\u0026lt;/span\u0026gt;(arrayName);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (existingArray.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt; \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n    arrayItem = existingArray.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;pop\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(arrayName,\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(existingArray));\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; arrayItem;\n}\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;shiftArrayItem\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;arrayName\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; arrayItem = {};\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; existingArray = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getArray\u0026lt;/span\u0026gt;(arrayName);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (existingArray.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt; \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) {\n    arrayItem = existingArray.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;shift\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(arrayName,\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(existingArray));\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; arrayItem;\n}\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;unshiftArrayItem\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;arrayName,arrayItem\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; existingArray = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getArray\u0026lt;/span\u0026gt;(arrayName);\n  existingArray.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;unshift\u0026lt;/span\u0026gt;(arrayItem);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(arrayName,\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(existingArray));\n}\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;deleteArray\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;arrayName\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;removeItem\u0026lt;/span\u0026gt;(arrayName);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;example usage - storing simple strings in localStorage array:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;pushArrayItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;myArray\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;item one\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;pushArrayItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;myArray\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;item two\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;example usage - storing objects in sessionStorage array:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-delphi\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; item1 = \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;{}\u0026lt;/span\u0026gt;; item1.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;fred\u0026apos;\u0026lt;/span\u0026gt;; item1.age = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;48\u0026lt;/span\u0026gt;;\nsessionStorage.pushArrayItem(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;myArray\u0026apos;\u0026lt;/span\u0026gt;,item1);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; item2 = \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;{}\u0026lt;/span\u0026gt;; item2.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dave\u0026apos;\u0026lt;/span\u0026gt;; item2.age = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22\u0026lt;/span\u0026gt;;\nsessionStorage.pushArrayItem(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;myArray\u0026apos;\u0026lt;/span\u0026gt;,item2);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;common methods to manipulate arrays:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;.pushArrayItem(arrayName,arrayItem); \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; adds an element onto \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;end\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;of\u0026lt;/span\u0026gt; named \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;\n.unshiftArrayItem(arrayName,arrayItem); \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; adds an element onto front \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;of\u0026lt;/span\u0026gt; named \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;\n.popArrayItem(arrayName); \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; removes \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;returns\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;last\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt; element\n.shiftArrayItem(arrayName); \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; removes \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;amp;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;returns\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;first\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt; element\n.getArray(arrayName); \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;returns\u0026lt;/span\u0026gt; entire \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt;\n.deleteArray(arrayName); \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;-\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; removes entire \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;array\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;from\u0026lt;/span\u0026gt; storage\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;In theory, it is possible to store objects with functions:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;store\u0026lt;/span\u0026gt; (a)\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; c = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;: {}, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;d\u0026lt;/span\u0026gt;: {}};\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; k \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; a)\n  {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (a.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(k) \u0026amp;amp;\u0026amp;amp; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; a[k] === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;function\u0026apos;\u0026lt;/span\u0026gt;)\n    {\n      c.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;[k] = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;encodeURIComponent\u0026lt;/span\u0026gt;(a[k]);\n    }\n  }\n\n  c.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;d\u0026lt;/span\u0026gt; = a;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; data = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(c);\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;CODE\u0026apos;\u0026lt;/span\u0026gt;, data);\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;restore\u0026lt;/span\u0026gt; ()\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; data = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;window\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;CODE\u0026apos;\u0026lt;/span\u0026gt;);\n  data = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(data);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; b = data.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;d\u0026lt;/span\u0026gt;;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; k \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; data.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;)\n  {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (data.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;hasOwnProperty\u0026lt;/span\u0026gt;(k))\n    {\n      b[k] = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;eval\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(\u0026quot;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;decodeURIComponent\u0026lt;/span\u0026gt;(data.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;f\u0026lt;/span\u0026gt;[k]) + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;)\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; b;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;However, function serialization/deserialization is unreliable because \u0026lt;a href=\u0026quot;http://ecma-international.org/ecma-262/5.1/#sec-15.3.4\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;it is implementation-dependent\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It is recommended using an abstraction library for many of the features discussed here, as well as better compatibility. There are lots of options:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/andris9/jStorage\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;jStorage\u0026lt;/a\u0026gt; or \u0026lt;a href=\u0026quot;https://github.com/andris9/simpleStorage\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;simpleStorage\u0026lt;/a\u0026gt;  my preference\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/mozilla/localForage\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;localForage\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/alekseykulikov/storage\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;alekseykulikov/storage\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/brianleroux/lawnchair\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Lawnchair\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/marcuswestin/store.js\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Store.js\u0026lt;/a\u0026gt;  another good option\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/aaronagray/omg\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;OMG\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/macmcmeans/localDataStorage\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;localDataStorage\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can use \u0026lt;a href=\u0026quot;https://github.com/macmcmeans/localDataStorage\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;localDataStorage\u0026lt;/a\u0026gt; to transparently store JavaScript data types (Array, Boolean, Date, Float, Integer, String and Object). It also provides lightweight data obfuscation, automatically compresses strings, facilitates query by key (name) as well as query by (key) value, and helps to enforce segmented shared storage within the same domain by prefixing keys.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;[DISCLAIMER] I am the author of the utility [/DISCLAIMER]\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Examples:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;localDataStorage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;key1\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Belgian\u0026apos;\u0026lt;/span\u0026gt; )\nlocalDataStorage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;key2\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1200.0047\u0026lt;/span\u0026gt; )\nlocalDataStorage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;key3\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt; )\nlocalDataStorage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;key4\u0026apos;\u0026lt;/span\u0026gt;, { \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;RSK\u0026apos;\u0026lt;/span\u0026gt; : [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;3\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;7\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9\u0026lt;/span\u0026gt;] } )\nlocalDataStorage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;key5\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; )\n\nlocalDataStorage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;key1\u0026apos;\u0026lt;/span\u0026gt; )  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// --\u0026amp;gt;   \u0026apos;Belgian\u0026apos;\u0026lt;/span\u0026gt;\nlocalDataStorage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;key2\u0026apos;\u0026lt;/span\u0026gt; )  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// --\u0026amp;gt;   1200.0047\u0026lt;/span\u0026gt;\nlocalDataStorage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;key3\u0026apos;\u0026lt;/span\u0026gt; )  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// --\u0026amp;gt;   true\u0026lt;/span\u0026gt;\nlocalDataStorage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;key4\u0026apos;\u0026lt;/span\u0026gt; )  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// --\u0026amp;gt;   Object {RSK: Array(5)}\u0026lt;/span\u0026gt;\nlocalDataStorage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;key5\u0026apos;\u0026lt;/span\u0026gt; )  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// --\u0026amp;gt;   null\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;As you can see, the primitive values are respected.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You cannot store a key value without a string format.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;LocalStorage\u0026lt;/em\u0026gt; only supports string formats for keys/values.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;That is why you should convert your data to string whatever it is an array or object.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;To \u0026lt;em\u0026gt;store\u0026lt;/em\u0026gt; data in localStorage, first of all stringify it using the JSON.stringify() method.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; myObj = [{\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;test\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;time\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Date 2017-02-03T08:38:04.449Z\u0026quot;\u0026lt;/span\u0026gt;}];\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;item\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(myObj));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then when you want to retrieve data, you need to parse the string to object again.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; getObj = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;item\u0026apos;\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can use \u0026lt;a href=\u0026quot;https://docs.meteor.com/api/ejson.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;ejson\u0026lt;/a\u0026gt; to store the objects as strings.\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;EJSON is an extension of JSON to support more types. It supports all JSON-safe types, as well as:\u0026lt;/p\u0026gt;\n  \n  \u0026lt;ul\u0026gt;\n  \u0026lt;li\u0026gt;Date (JavaScript \u0026lt;code\u0026gt;Date\u0026lt;/code\u0026gt;)\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;Binary (JavaScript \u0026lt;code\u0026gt;Uint8Array\u0026lt;/code\u0026gt; or the result of \u0026lt;a href=\u0026quot;https://docs.meteor.com/api/ejson.html#ejson_new_binary\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;EJSON.newBinary\u0026lt;/a\u0026gt;)\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;User-defined types (see \u0026lt;a href=\u0026quot;https://docs.meteor.com/api/ejson.html#ejson_add_type\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;EJSON.addType\u0026lt;/a\u0026gt;. For example, \u0026lt;a href=\u0026quot;https://docs.meteor.com/api/ejson.html#mongo_object_id\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Mongo.ObjectID\u0026lt;/a\u0026gt; is implemented this way.)\u0026lt;/li\u0026gt;\n  \u0026lt;/ul\u0026gt;\n  \n  \u0026lt;p\u0026gt;All EJSON serializations are also valid JSON. For example an object with a date and a binary buffer would be serialized in EJSON as:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;{\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;d\u0026quot;\u0026lt;/span\u0026gt;: {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$date\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;: 1358205756553},\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;b\u0026quot;\u0026lt;/span\u0026gt;: {\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$binary\u0026lt;/span\u0026gt;\u0026quot;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;c3VyZS4=\u0026quot;\u0026lt;/span\u0026gt;}\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;Here is my localStorage wrapper using ejson\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/UziTech/storage.js\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://github.com/UziTech/storage.js\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I added some types to my wrapper including regular expressions and functions\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Another option would be to use an existing plugin.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example \u0026lt;a href=\u0026quot;https://github.com/mar10/persisto\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;persisto\u0026lt;/a\u0026gt; is an open source project that provides an easy interface to localStorage/sessionStorage and automates persistence for form fields (input, radio buttons, and checkboxes).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/cU5V0.png\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/cU5V0.png\u0026quot; alt=\u0026quot;persisto features\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;(Disclaimer: I am the author.)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;For TypeScript users willing to set and get typed properties:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n * Silly wrapper to be able to type the storage keys\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;export \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;TypedStorage\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;T\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;removeItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key: keyof T\u0026lt;/span\u0026gt;): \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; {\n        localStorage.removeItem(key);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;K\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;keyof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;T\u0026lt;/span\u0026gt;\u0026amp;gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key: K\u0026lt;/span\u0026gt;): T[K] | \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; data: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; | \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; =  localStorage.getItem(key);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; JSON.parse(data);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;K\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;keyof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;T\u0026lt;/span\u0026gt;\u0026amp;gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key: K, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;: T[K]\u0026lt;/span\u0026gt;): \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; data: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt; = JSON.stringify(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;);\n        localStorage.setItem(key, data);\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://www.typescriptlang.org/play/#src=%2F**%0D%0A%20*%20Silly%20wrapper%20to%20be%20able%20to%20type%20the%20storage%20keys%0D%0A%20*%2F%0D%0Aexport%20class%20TypedStorage%3CT%3E%20%7B%0D%0A%0D%0A%20%20%20%20public%20removeItem(key%3A%20keyof%20T)%3A%20void%20%7B%0D%0A%20%20%20%20%20%20%20%20localStorage.removeItem(key)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20public%20getItem%3CK%20extends%20keyof%20T%3E(key%3A%20K)%3A%20T%5BK%5D%20%7C%20null%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20data%3A%20string%20%7C%20null%20%3D%20%20localStorage.getItem(key)%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.parse(data)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20public%20setItem%3CK%20extends%20keyof%20T%3E(key%3A%20K%2C%20value%3A%20T%5BK%5D)%3A%20void%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20data%3A%20string%20%3D%20JSON.stringify(value)%3B%0D%0A%20%20%20%20%20%20%20%20localStorage.setItem(key%2C%20data)%3B%0D%0A%20%20%20%20%7D%0D%0A%7D%0D%0A%0D%0A%2F%2F%20write%20an%20interface%20for%20the%20storage%0D%0Ainterface%20MyStore%20%7B%0D%0A%20%20%20age%3A%20number%2C%0D%0A%20%20%20name%3A%20string%2C%0D%0A%20%20%20address%3A%20%7Bcity%3Astring%7D%0D%0A%7D%0D%0A%0D%0Aconst%20storage%3A%20TypedStorage%3CMyStore%3E%20%3D%20new%20TypedStorage%3CMyStore%3E()%3B%0D%0A%0D%0Astorage.setItem(%22wrong%20key%22%2C%20%22%22)%3B%20%2F%2F%20error%20unknown%20key%0D%0Astorage.setItem(%22age%22%2C%20%22hello%22)%3B%20%2F%2F%20error%2C%20age%20should%20be%20number%0D%0Astorage.setItem(%22address%22%2C%20%7Bcity%3A%22Here%22%7D)%3B%20%2F%2F%20ok%0D%0A%0D%0Aconst%20address%3A%20%7Bcity%3Astring%7D%20%3D%20storage.getItem(%22address%22)%3B\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Example usage\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// write an interface for the storage\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;interface\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;MyStore\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n   age: number,\n   name: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;,\n   address: {city:\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;}\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;storage\u0026lt;/span\u0026gt;: TypedStorage\u0026amp;lt;MyStore\u0026amp;gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;TypedStorage\u0026lt;/span\u0026gt;\u0026amp;lt;MyStore\u0026amp;gt;();\n\nstorage.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;wrong key\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// error unknown key\u0026lt;/span\u0026gt;\nstorage.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;age\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hello\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// error, age should be number\u0026lt;/span\u0026gt;\nstorage.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;address\u0026quot;\u0026lt;/span\u0026gt;, {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;city\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Here\u0026quot;\u0026lt;/span\u0026gt;}); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ok\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;address\u0026lt;/span\u0026gt;: {city:\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;} = storage.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;address\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/adrianmay/rhaboo\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://github.com/adrianmay/rhaboo\u0026lt;/a\u0026gt; is a localStorage sugar layer that lets you write things like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; store = Rhaboo.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;persistent\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Some name\u0026apos;\u0026lt;/span\u0026gt;);\nstore.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;write\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;count\u0026apos;\u0026lt;/span\u0026gt;, store.count ? store.count+\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\nstore.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;write\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;somethingfancy\u0026apos;\u0026lt;/span\u0026gt;, {\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;one\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;man\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;went\u0026apos;\u0026lt;/span\u0026gt;],\n  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;mow\u0026apos;\u0026lt;/span\u0026gt;,\n  \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;went\u0026lt;/span\u0026gt;: [  \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;mow\u0026lt;/span\u0026gt;: [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;a\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;meadow\u0026apos;\u0026lt;/span\u0026gt; ] }, {}  ]\n});\nstore.somethingfancy.went[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;].mow.\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;write\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;lawn\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It doesn\u0026apos;t use JSON.stringify/parse because that would be inaccurate and slow on big objects. Instead, each terminal value has its own localStorage entry.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;You can probably guess that I might have something to do with rhaboo.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;obj\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;({\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Akash\u0026apos;\u0026lt;/span\u0026gt;})); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Set Object in localStorage\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;obj\u0026apos;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Get Object from localStorage\u0026lt;/span\u0026gt;\n\nsessionStorage.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;obj\u0026apos;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;({\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Akash\u0026apos;\u0026lt;/span\u0026gt;})); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Set Object in sessionStorage\u0026lt;/span\u0026gt;\nsessionStorage.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;obj\u0026apos;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Get Object from sessionStorage\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I made another minimalistic wrapper with only 20 lines of code to allow using it like it should:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;myKey\u0026apos;\u0026lt;/span\u0026gt;,{\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;a\u0026lt;/span\u0026gt;:[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;5\u0026lt;/span\u0026gt;], \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;b\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ok\u0026apos;\u0026lt;/span\u0026gt;});\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;has\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;myKey\u0026apos;\u0026lt;/span\u0026gt;);   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// --\u0026amp;gt; true\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;myKey\u0026apos;\u0026lt;/span\u0026gt;);   \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// --\u0026amp;gt; {a:[1,2,5], b: \u0026apos;ok\u0026apos;}\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;();         \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// --\u0026amp;gt; [\u0026apos;myKey\u0026apos;]\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;remove\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;myKey\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/zevero/simpleWebstorage\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;https://github.com/zevero/simpleWebstorage\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I made a thing that doesn\u0026apos;t break the existing Storage objects, but creates a wrapper so you can do what you want. The result is a normal object, no methods, with access like any object.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/rudiedirkx/ObjectStorage\u0026quot; rel=\u0026quot;nofollow\u0026quot;\u0026gt;The thing I made.\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;If you want 1 \u0026lt;code\u0026gt;localStorage\u0026lt;/code\u0026gt; property to be magic:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; prop = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ObjectStorage\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;prop\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;If you need several:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; storage = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ObjectStorage\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;prop\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;more\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;props\u0026apos;\u0026lt;/span\u0026gt;]);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Everything you do to \u0026lt;code\u0026gt;prop\u0026lt;/code\u0026gt;, or the objects \u0026lt;strong\u0026gt;inside\u0026lt;/strong\u0026gt; \u0026lt;code\u0026gt;storage\u0026lt;/code\u0026gt; will be automatically saved into \u0026lt;code\u0026gt;localStorage\u0026lt;/code\u0026gt;. You\u0026apos;re always playing with a real object, so you can do stuff like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-kotlin\u0026quot;\u0026gt;storage.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;data\u0026lt;/span\u0026gt;.list.push(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;more data\u0026apos;\u0026lt;/span\u0026gt;);\nstorage.another.list.splice(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, {another: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;object\u0026apos;\u0026lt;/span\u0026gt;});\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And every new object \u0026lt;strong\u0026gt;inside\u0026lt;/strong\u0026gt; a tracked object will be automatically tracked.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;The very big downside:\u0026lt;/strong\u0026gt; it depends on \u0026lt;code\u0026gt;Object.observe()\u0026lt;/code\u0026gt; so it has very limited browser support. And it doesn\u0026apos;t look like it\u0026apos;ll be coming for Firefox or Edge anytime soon.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I found a way to make it work with objects that have cyclic references.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Let\u0026apos;s make an object with cyclic references.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-yaml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L:\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L:\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;lorem\u0026apos;\u0026lt;/span\u0026gt; },\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R:\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ipsum\u0026apos;\u0026lt;/span\u0026gt; }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R:\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L:\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dolor\u0026apos;\u0026lt;/span\u0026gt; },\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R:\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L:\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;sit\u0026apos;\u0026lt;/span\u0026gt; },\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R:\u0026lt;/span\u0026gt; { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;amet\u0026apos;\u0026lt;/span\u0026gt; }\n        }\n    }\n}\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.R.L.uncle\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.L;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.R.R.uncle\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.L;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.R.R.L.uncle\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.R.L;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.R.R.R.uncle\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.R.L;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.L.L.uncle\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.R;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.L.R.uncle\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;obj.R;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;We can\u0026apos;t do \u0026lt;code\u0026gt;JSON.stringify\u0026lt;/code\u0026gt; here, because of the circular references.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://i.stack.imgur.com/4taQx.png\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/4taQx.png\u0026quot; alt=\u0026quot;circularUncle\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;LOCALSTORAGE.CYCLICJSON\u0026lt;/code\u0026gt; has \u0026lt;code\u0026gt;.stringify\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;.parse\u0026lt;/code\u0026gt; just like normal \u0026lt;code\u0026gt;JSON\u0026lt;/code\u0026gt;, but works with objects with circular references. (\u0026quot;Works\u0026quot; meaning parse(stringify(obj)) and obj are deep equal AND have identical sets of \u0026apos;inner equalities\u0026apos;)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;But we can just use the shortcuts:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;LOCALSTORAGE.setObject(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;latinUncles\u0026apos;\u0026lt;/span\u0026gt;, obj)\nrecovered = LOCALSTORAGE.getObject(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;latinUncles\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then, \u0026lt;code\u0026gt;recovered\u0026lt;/code\u0026gt; will be \u0026quot;the same\u0026quot; to obj, in the following sense:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-section\u0026quot;\u0026gt;[\nobj.L.L.v === recovered.L.L.v,\nobj.L.R.v === recovered.L.R.v,\nobj.R.L.v === recovered.R.L.v,\nobj.R.R.L.v === recovered.R.R.L.v,\nobj.R.R.R.v === recovered.R.R.R.v,\nobj.R.L.uncle === obj.L,\nobj.R.R.uncle === obj.L,\nobj.R.R.L.uncle === obj.R.L,\nobj.R.R.R.uncle === obj.R.L,\nobj.L.L.uncle === obj.R,\nobj.L.R.uncle === obj.R,\nrecovered.R.L.uncle === recovered.L,\nrecovered.R.R.uncle === recovered.L,\nrecovered.R.R.L.uncle === recovered.R.L,\nrecovered.R.R.R.uncle === recovered.R.L,\nrecovered.L.L.uncle === recovered.R,\nrecovered.L.R.uncle === recovered.R\n]\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Here is the implementation of \u0026lt;code\u0026gt;LOCALSTORAGE\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;false\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;LOCALSTORAGE\u0026lt;/span\u0026gt; = (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;){\n  \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;use strict\u0026quot;\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; ignore = [\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Boolean\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Number\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RegExp\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;];\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;primitive\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;item\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; item === \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;object\u0026apos;\u0026lt;/span\u0026gt;){\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (item === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;; }\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i=\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i\u0026amp;lt;ignore.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i++){\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (item \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; ignore[i]) { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;; }\n      }\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n    }\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;infant\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isArray\u0026lt;/span\u0026gt;(value) ? [] : {};\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decycleIntoForest\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;object, replacer\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; replacer !== \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;function\u0026apos;\u0026lt;/span\u0026gt;){\n      replacer = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;){ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; x; }\n    }\n    object = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replacer\u0026lt;/span\u0026gt;(object);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;primitive\u0026lt;/span\u0026gt;(object)) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; object;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; objects = [object];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; forest  = [\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;infant\u0026lt;/span\u0026gt;(object)];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; bucket  = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;WeakMap\u0026lt;/span\u0026gt;(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// bucket = inverse of objects \u0026lt;/span\u0026gt;\n    bucket.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(object, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);    \n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addToBucket\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;){\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; result = objects.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;;\n      objects.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(obj);\n      bucket.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(obj, result);\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; result;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isInBucket\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;){ \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; bucket.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;has\u0026lt;/span\u0026gt;(obj); }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;processNode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;source, target\u0026lt;/span\u0026gt;){\n      \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;(source).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;forEach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;){\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; value = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replacer\u0026lt;/span\u0026gt;(source[key]);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;primitive\u0026lt;/span\u0026gt;(value)){\n          target[key] = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;: value};\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; ptr;\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isInBucket\u0026lt;/span\u0026gt;(value)){\n            ptr = bucket.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(value);\n          } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            ptr = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;addToBucket\u0026lt;/span\u0026gt;(value);\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; newTree = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;infant\u0026lt;/span\u0026gt;(value);\n            forest.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;(newTree);\n            \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;processNode\u0026lt;/span\u0026gt;(value, newTree);\n          }\n          target[key] = {\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;pointer\u0026lt;/span\u0026gt;: ptr};\n        }\n      });\n    }\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;processNode\u0026lt;/span\u0026gt;(object, forest[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; forest;\n  };\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deForestIntoCycle\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;forest\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; objects = [];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; objectRequested = [];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; todo = [];\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;processTree\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;idx\u0026lt;/span\u0026gt;) {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (idx \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; objects) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; objects[idx];\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (objectRequested[idx]) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n      objectRequested[idx] = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; tree = forest[idx];\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; node = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isArray\u0026lt;/span\u0026gt;(tree) ? [] : {};\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; key \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; tree) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; o = tree[key];\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;pointer\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; o) {\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; ptr = o.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;pointer\u0026lt;/span\u0026gt;;\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; value = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;processTree\u0026lt;/span\u0026gt;(ptr);\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (value === \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            todo.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;push\u0026lt;/span\u0026gt;({\n              \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;node\u0026lt;/span\u0026gt;: node,\n              \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;: key,\n              \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;idx\u0026lt;/span\u0026gt;: ptr\n            });\n          } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            node[key] = value;\n          }\n        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; o) {\n            node[key] = o.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;;\n          } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Error\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;unexpected\u0026apos;\u0026lt;/span\u0026gt;)\n          }\n        }\n      }\n      objects[idx] = node;\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; node;\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; result = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;processTree\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; i = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;; i \u0026amp;lt; todo.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;length\u0026lt;/span\u0026gt;; i++) {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; item = todo[i];\n      item.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;node\u0026lt;/span\u0026gt;[item.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;] = objects[item.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;idx\u0026lt;/span\u0026gt;];\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; result;\n  };\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt; = {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt;){\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; the = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;the\u0026apos;\u0026lt;/span\u0026gt;);\n      the.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;textContent\u0026lt;/span\u0026gt; = the.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;textContent\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\n\u0026apos;\u0026lt;/span\u0026gt; + x;\n\t},\n\t\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;delimiter\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;){\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; the = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;the\u0026apos;\u0026lt;/span\u0026gt;);\n      the.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;textContent\u0026lt;/span\u0026gt; = the.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;textContent\u0026lt;/span\u0026gt; +\n\t\t\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\n*******************************************\u0026apos;\u0026lt;/span\u0026gt;;\n\t}\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;logCyclicObjectToConsole\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;root\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; cycleFree = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decycleIntoForest\u0026lt;/span\u0026gt;(root);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; shown = cycleFree.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;map\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;tree, idx\u0026lt;/span\u0026gt;) {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n    });\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; indentIncrement = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;showItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;nodeSlot, indent, label\u0026lt;/span\u0026gt;) {\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; leadingSpaces = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;repeat\u0026lt;/span\u0026gt;(indent);\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; leadingSpacesPlus = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; \u0026apos;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;repeat\u0026lt;/span\u0026gt;(indent + indentIncrement);\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (shown[nodeSlot]) {\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(leadingSpaces + label + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; ... see above (object #\u0026apos;\u0026lt;/span\u0026gt; + nodeSlot + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;)\u0026apos;\u0026lt;/span\u0026gt;);\n      } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(leadingSpaces + label + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos; object#\u0026apos;\u0026lt;/span\u0026gt; + nodeSlot);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; tree = cycleFree[nodeSlot];\n        shown[nodeSlot] = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;keys\u0026lt;/span\u0026gt;(tree).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;forEach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;) {\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; entry = tree[key];\n          \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;value\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; entry) {\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(leadingSpacesPlus + key + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;: \u0026quot;\u0026lt;/span\u0026gt; + entry.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;value\u0026lt;/span\u0026gt;);\n          } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;pointer\u0026apos;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; entry) {\n              \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;showItem\u0026lt;/span\u0026gt;(entry.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;pointer\u0026lt;/span\u0026gt;, indent + indentIncrement, key);\n            }\n          }\n        });\n      }\n    }\n\t\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;delimiter\u0026lt;/span\u0026gt;();\n    \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;showItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;root\u0026apos;\u0026lt;/span\u0026gt;);\n  };\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;obj\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;decycleIntoForest\u0026lt;/span\u0026gt;(obj));\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;str\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;deForestIntoCycle\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(str));\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;CYCLICJSON\u0026lt;/span\u0026gt; = {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;decycleIntoForest\u0026lt;/span\u0026gt;: decycleIntoForest,\n    deForestIntoCycle : deForestIntoCycle,\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;logCyclicObjectToConsole\u0026lt;/span\u0026gt;: logCyclicObjectToConsole,\n    stringify : stringify,\n    parse : parse\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;name, object\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; str = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(object);\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(name, str);\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;name\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; str = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(name);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (str===\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(str);\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;CYCLICJSON\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;CYCLICJSON\u0026lt;/span\u0026gt;,\n    setObject  : setObject,\n    getObject  : getObject\n  }\n})();\nobj = {\n\t\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: {\n\t\t\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;lorem\u0026apos;\u0026lt;/span\u0026gt; },\n\t\t\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ipsum\u0026apos;\u0026lt;/span\u0026gt; }\n\t},\n\t\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: {\n\t\t\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dolor\u0026apos;\u0026lt;/span\u0026gt; },\n\t\t\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: {\n\t\t\t\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;sit\u0026apos;\u0026lt;/span\u0026gt; },\n\t\t\t\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;amet\u0026apos;\u0026lt;/span\u0026gt; }\n\t\t}\n\t}\n}\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// LOCALSTORAGE.setObject(\u0026apos;latinUncles\u0026apos;, obj)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// recovered = LOCALSTORAGE.getObject(\u0026apos;latinUncles\u0026apos;)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// localStorage not available inside fiddle ):\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;LOCALSTORAGE\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;CYCLICJSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;logCyclicObjectToConsole\u0026lt;/span\u0026gt;(obj)\nputIntoLS = \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;LOCALSTORAGE\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;CYCLICJSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(obj);\nrecovered = \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;LOCALSTORAGE\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;CYCLICJSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(putIntoLS);\n\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;LOCALSTORAGE\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;CYCLICJSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;logCyclicObjectToConsole\u0026lt;/span\u0026gt;(recovered);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; the = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;document\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getElementById\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;the\u0026apos;\u0026lt;/span\u0026gt;);\nthe.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;textContent\u0026lt;/span\u0026gt; = the.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;textContent\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\\n\\n\u0026apos;\u0026lt;/span\u0026gt; +\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(\n[\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;,\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;,\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;,\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;,\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;,\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;,\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;,\nrecovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\nrecovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\nrecovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\nrecovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\nrecovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;,\nrecovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;\n]\n)\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-html lang-html s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;pre\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;id\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;the\u0026apos;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;pre\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif1\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This question has been answered sufficiently from the JavaScript-only perspective, and others have already noted that both \u0026lt;code\u0026gt;localStorage.getItem\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;localStorage.setItem\u0026lt;/code\u0026gt; have no concept of objectsthey handle strings and strings only. This answer provides a TypeScript-friendly solution that incorporates what \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/2010948/39155\u0026quot;\u0026gt;others\u0026lt;/a\u0026gt; \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/3146971/39155\u0026quot;\u0026gt;have\u0026lt;/a\u0026gt; \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/4762411/39155\u0026quot;\u0026gt;suggested\u0026lt;/a\u0026gt; in JavaScript-only solutions.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;TypeScript 4.2.3\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;setObject\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;, value: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;unknown\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(key, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(value));\n};\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;getObject\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; value = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(key);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!value) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(value);\n};\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;declare\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;global\u0026lt;/span\u0026gt; {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;interface\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;setObject\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;, value: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;unknown\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;) =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;getObject\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;string\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;) =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;unknown\u0026lt;/span\u0026gt;;\n  }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Usage\u0026lt;/h3\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ages\u0026apos;\u0026lt;/span\u0026gt;, [\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;23\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;18\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;33\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;22\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;58\u0026lt;/span\u0026gt;]);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getObject\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ages\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h3\u0026gt;Explanation\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;We declare both \u0026lt;code\u0026gt;setObject\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;getObject\u0026lt;/code\u0026gt; functions on the \u0026lt;code\u0026gt;Storage\u0026lt;/code\u0026gt; prototype\u0026lt;code\u0026gt;localStorage\u0026lt;/code\u0026gt; is an instance of this type. There\u0026apos;s nothing special we really need to note besides the null handling in \u0026lt;code\u0026gt;getObject\u0026lt;/code\u0026gt;. Since \u0026lt;code\u0026gt;getItem\u0026lt;/code\u0026gt; can return \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt;, we must exit early since calling \u0026lt;code\u0026gt;JSON.parse\u0026lt;/code\u0026gt; on a \u0026lt;code\u0026gt;null\u0026lt;/code\u0026gt; value will throw a runtime exception.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;After declaring the functions on the \u0026lt;code\u0026gt;Storage\u0026lt;/code\u0026gt; prototype, we include their type definitions on the \u0026lt;code\u0026gt;Storage\u0026lt;/code\u0026gt; type in the global namespace.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Note: If we defined these functions with arrow functions, we\u0026apos;d need to assume that the storage object we\u0026apos;re calling is always \u0026lt;code\u0026gt;localStorage\u0026lt;/code\u0026gt;, which might not be true. For instance, the above code will add \u0026lt;code\u0026gt;setObject\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;getObject\u0026lt;/code\u0026gt; support to \u0026lt;code\u0026gt;sessionStorage\u0026lt;/code\u0026gt; as well.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is some extended version of the code \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/2010892/how-to-store-objects-in-html5-localstorage/5790739#5790739\u0026quot;\u0026gt;posted by danott\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;It\u0026apos;ll also implement a \u0026lt;strong\u0026gt;delete\u0026lt;/strong\u0026gt; value from localstorage and shows how to adds a Getter and Setter layer so instead of,\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;localstorage.setItem(preview, true)\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;you can write\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;config.preview = true\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Okay, here were go:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PT\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Storage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;prototype\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PT\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;_setItem\u0026lt;/span\u0026gt; \u0026amp;gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;u\u0026apos;\u0026lt;/span\u0026gt;)\n  \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PT\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;_setItem\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PT\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PT\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key, value\u0026lt;/span\u0026gt;)\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; value \u0026amp;gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;u\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//..undefined\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;removeItem\u0026lt;/span\u0026gt;(key)\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_setItem\u0026lt;/span\u0026gt;(key, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(value));\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PT\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;_getItem\u0026lt;/span\u0026gt; \u0026amp;gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;u\u0026apos;\u0026lt;/span\u0026gt;)\n  \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PT\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;_getItem\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PT\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;PT\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;)\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ItemData\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;_getItem\u0026lt;/span\u0026gt;(key)\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt;\n  {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ItemData\u0026lt;/span\u0026gt;);\n  }\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt;(e)\n  {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ItemData\u0026lt;/span\u0026gt;;\n  }\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Aliases for localStorage.set/getItem\u0026lt;/span\u0026gt;\nget = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;bind\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;)\nset = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;bind\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;)\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Create ConfigWrapperObject\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; config = {}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Helper to create getter \u0026amp;amp; setter\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;configCreate\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;PropToAdd\u0026lt;/span\u0026gt;){\n    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;defineProperty\u0026lt;/span\u0026gt;( config, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PropToAdd\u0026lt;/span\u0026gt;, {\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;)    { \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PropToAdd\u0026lt;/span\u0026gt;)    )},\n      \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt;) {         \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PropToAdd\u0026lt;/span\u0026gt;, val)}\n    })\n}\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//------------------------------\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Usage Part\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Create properties\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;configCreate\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;preview\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;configCreate\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;notification\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//...\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Configuration Data transfer\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Set\u0026lt;/span\u0026gt;\nconfig.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;preview\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Get\u0026lt;/span\u0026gt;\nconfig.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;preview\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Delete\u0026lt;/span\u0026gt;\nconfig.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;preview\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Well, you may strip the aliases part with \u0026lt;code\u0026gt;.bind(...)\u0026lt;/code\u0026gt;. However, I just put it in since it\u0026apos;s really good to know about this. I took me hours to find out why a simple \u0026lt;code\u0026gt;get = localStorage.getItem;\u0026lt;/code\u0026gt; don\u0026apos;t work.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h3\u0026gt;Circular References\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;In this answer I focus on data-only objects (without functions, etc.) with circular references and develop ideas mentioned \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/27013704/860099\u0026quot;\u0026gt;by maja\u0026lt;/a\u0026gt; \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/58825573/860099\u0026quot;\u0026gt;and mathheadinclouds\u0026lt;/a\u0026gt; (I use his test case and\nmy code is several times shorter).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Actually, we can use JSON.stringify with a proper \u0026lt;a href=\u0026quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;replacer\u0026lt;/a\u0026gt; - if the source object contains multi-references to some object, or contains circular references then we reference it by special path-string (similar to \u0026lt;a href=\u0026quot;https://jsonpath.com/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;JSONPath\u0026lt;/a\u0026gt;).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;true\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-display\u0026quot; style=\u0026quot;vertical-align: center\u0026quot;\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link-chevron\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;expander-arrow-hide\u0026quot; style=\u0026quot;vertical-align: middle;\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;show-hide\u0026quot; data-ishidden=\u0026quot;true\u0026quot; style=\u0026quot;vertical-align: middle\u0026quot;\u0026gt;Show code snippet\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code snippet-currently-hidden\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// JSON.strigify replacer for objects with circ ref\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;refReplacer\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; m = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Map\u0026lt;/span\u0026gt;(), v = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Map\u0026lt;/span\u0026gt;(), init = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;field, value\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; p = m.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;) + (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isArray\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;) ? \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`[\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${field}\u0026lt;/span\u0026gt;]`\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt; + field);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; isComplex = value === \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;(value)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (isComplex) m.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(value, p);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; pp = v.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(value)||\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; path = p.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;replace\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-regexp\u0026quot;\u0026gt;/undefined\\.\\.?/\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; val = pp ? \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`#REF:\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${pp[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;] == \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;[\u0026apos;\u0026lt;/span\u0026gt; ? \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;$\u0026apos;\u0026lt;/span\u0026gt;:\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;$.\u0026apos;\u0026lt;/span\u0026gt;}\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${pp}\u0026lt;/span\u0026gt;`\u0026lt;/span\u0026gt; : value;\n\n    !init ? (init=value) : (val===init ? val=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#REF:$\u0026quot;\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(!pp \u0026amp;amp;\u0026amp;amp; isComplex) v.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(value, path);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; val;\n  }\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ---------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TEST\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ---------------\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Generate obj with duplicate/circular references\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj = {\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;lorem\u0026apos;\u0026lt;/span\u0026gt; },\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ipsum\u0026apos;\u0026lt;/span\u0026gt; }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dolor\u0026apos;\u0026lt;/span\u0026gt; },\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: {\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;sit\u0026apos;\u0026lt;/span\u0026gt; },\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;amet\u0026apos;\u0026lt;/span\u0026gt; }\n        }\n    }\n}\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;;\ntestObject = obj;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; json = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(testObject, \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;refReplacer\u0026lt;/span\u0026gt;(), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Test Object\\n\u0026quot;\u0026lt;/span\u0026gt;, testObject);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;JSON with JSONpath references\\n\u0026quot;\u0026lt;/span\u0026gt;, json);\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif2\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Parse such JSON content with JSONpath-like references:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026quot;snippet\u0026quot; data-lang=\u0026quot;js\u0026quot; data-hide=\u0026quot;true\u0026quot; data-console=\u0026quot;true\u0026quot; data-babel=\u0026quot;false\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-display\u0026quot; style=\u0026quot;vertical-align: center\u0026quot;\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link-chevron\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;expander-arrow-hide\u0026quot; style=\u0026quot;vertical-align: middle;\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;a class=\u0026quot;snippet-show-link\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;show-hide\u0026quot; data-ishidden=\u0026quot;true\u0026quot; style=\u0026quot;vertical-align: middle\u0026quot;\u0026gt;Show code snippet\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-code snippet-currently-hidden\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\n\u0026lt;pre class=\u0026quot;snippet-code-js lang-js s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Parse JSON content with JSONpath references to object\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseRefJSON\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;json\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; objToPath = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Map\u0026lt;/span\u0026gt;();\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; pathToObj = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Map\u0026lt;/span\u0026gt;();\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; o = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(json);\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;traverse\u0026lt;/span\u0026gt; = (\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;parent, field\u0026lt;/span\u0026gt;) =\u0026amp;gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj = parent;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; path = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;#REF:$\u0026apos;\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (field !== \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;undefined\u0026lt;/span\u0026gt;) {\n      obj = parent[field];\n      path = objToPath.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(parent) + (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Array\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isArray\u0026lt;/span\u0026gt;(parent) ? \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`[\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${field}\u0026lt;/span\u0026gt;]`\u0026lt;/span\u0026gt; : \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`\u0026lt;span class=\u0026quot;hljs-subst\u0026quot;\u0026gt;${field ? \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;.\u0026apos;\u0026lt;/span\u0026gt; + field : \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;\u0026apos;\u0026lt;/span\u0026gt;}\u0026lt;/span\u0026gt;`\u0026lt;/span\u0026gt;);\n    }\n\n    objToPath.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(obj, path);\n    pathToObj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(path, obj);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; ref = pathToObj.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(obj);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (ref) parent[field] = ref;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; f \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; obj) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (obj === \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;(obj)) \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;traverse\u0026lt;/span\u0026gt;(obj, f);\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;traverse\u0026lt;/span\u0026gt;(o);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; o;\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ---------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TEST 1\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ---------------\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; json = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;`\n{\n    \u0026quot;L\u0026quot;: {\n        \u0026quot;L\u0026quot;: {\n            \u0026quot;v\u0026quot;: \u0026quot;lorem\u0026quot;,\n            \u0026quot;uncle\u0026quot;: {\n                \u0026quot;L\u0026quot;: {\n                    \u0026quot;v\u0026quot;: \u0026quot;dolor\u0026quot;,\n                    \u0026quot;uncle\u0026quot;: \u0026quot;#REF:$.L\u0026quot;\n                },\n                \u0026quot;R\u0026quot;: {\n                    \u0026quot;L\u0026quot;: {\n                        \u0026quot;v\u0026quot;: \u0026quot;sit\u0026quot;,\n                        \u0026quot;uncle\u0026quot;: \u0026quot;#REF:$.L.L.uncle.L\u0026quot;\n                    },\n                    \u0026quot;R\u0026quot;: {\n                        \u0026quot;v\u0026quot;: \u0026quot;amet\u0026quot;,\n                        \u0026quot;uncle\u0026quot;: \u0026quot;#REF:$.L.L.uncle.L\u0026quot;\n                    },\n                    \u0026quot;uncle\u0026quot;: \u0026quot;#REF:$.L\u0026quot;\n                }\n            }\n        },\n        \u0026quot;R\u0026quot;: {\n            \u0026quot;v\u0026quot;: \u0026quot;ipsum\u0026quot;,\n            \u0026quot;uncle\u0026quot;: \u0026quot;#REF:$.L.L.uncle\u0026quot;\n        }\n    },\n    \u0026quot;R\u0026quot;: \u0026quot;#REF:$.L.L.uncle\u0026quot;\n}`\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; testObject = \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseRefJSON\u0026lt;/span\u0026gt;(json);\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Test Object\\n\u0026quot;\u0026lt;/span\u0026gt;, testObject);\n\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ---------------\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// TEST 2\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ---------------\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Tests from mathheadinclouds answer: \u0026apos;\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; recovered = testObject;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;let\u0026lt;/span\u0026gt; obj = { \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Original object\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;lorem\u0026apos;\u0026lt;/span\u0026gt; },\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;ipsum\u0026apos;\u0026lt;/span\u0026gt; }\n    },\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: {\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;dolor\u0026apos;\u0026lt;/span\u0026gt; },\n        \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: {\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;sit\u0026apos;\u0026lt;/span\u0026gt; },\n            \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;: { \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;amet\u0026apos;\u0026lt;/span\u0026gt; }\n        }\n    }\n}\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;;\nobj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; = obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;;\n\n[\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;,\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;,\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;,\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;,\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;v\u0026lt;/span\u0026gt;,\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;,\n  obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === obj.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;,\n  recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\n  recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\n  recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\n  recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;,\n  recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;,\n  recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;L\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;uncle\u0026lt;/span\u0026gt; === recovered.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;R\u0026lt;/span\u0026gt;\n].\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;forEach\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;x\u0026lt;/span\u0026gt; =\u0026amp;gt;\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;test pass: \u0026apos;\u0026lt;/span\u0026gt; + x));\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;div class=\u0026quot;snippet-result\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;snippet-ctas\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn s-btn__primary\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;icon-play-white _hover\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;span\u0026gt; Run code snippet\u0026lt;/span\u0026gt;\u0026lt;/button\u0026gt;\u0026lt;input class=\u0026quot;copySnippet s-btn s-btn__filled\u0026quot; type=\u0026quot;button\u0026quot; value=\u0026quot;Copy snippet to answer\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;button type=\u0026quot;button\u0026quot; class=\u0026quot;s-btn hideResults\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;Hide results\u0026lt;/button\u0026gt;\u0026lt;div class=\u0026quot;popout-code\u0026quot;\u0026gt;\u0026lt;a class=\u0026quot;snippet-expand-link\u0026quot;\u0026gt;Expand snippet\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;snippet-result-code\u0026quot; style=\u0026quot;display: none;\u0026quot;\u0026gt;\u0026lt;iframe name=\u0026quot;sif3\u0026quot; sandbox=\u0026quot;allow-forms allow-modals allow-scripts\u0026quot; class=\u0026quot;snippet-box-edit snippet-box-result\u0026quot; frameborder=\u0026quot;0\u0026quot;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;/div\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;To load/save the resulting JSON content into storage, use the following code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;localStorage.myObject\u0026lt;/span\u0026gt; = JSON.stringify(testObject, refReplacer())\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;  // Save\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;testObject\u0026lt;/span\u0026gt; = parseRefJSON(localStorage.myObject)\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;                   // Load\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I suggest using \u0026lt;a href=\u0026quot;https://github.com/pichillilorenzo/jackson-js\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Jackson-js\u0026lt;/a\u0026gt;. It is a library that handles serializing and deserializing of Objects while retaining their structure, based on decorators.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The library handles all the pitfalls such as cyclic reference, attributes aliasing, etc.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Simply describe your class using the @JsonProperty() and @JsonClassType() decorators.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Serialize your object using:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-vbnet\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;const\u0026lt;/span\u0026gt; objectMapper = \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; ObjectMapper();\nlocalstore.setItem(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;key\u0026lt;/span\u0026gt;, objectMapper.stringify\u0026amp;lt;yourObjectType\u0026amp;gt;(yourObject));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;For slightly more detailed explanation, check my answer here:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/16261119/typescript-objects-serialization/66706365#66706365\u0026quot;\u0026gt;Typescript objects serialization?\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;And the Jackson-js tutorial here:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://itnext.io/jackson-js-powerful-javascript-decorators-to-serialize-deserialize-objects-into-json-and-vice-df952454cf\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Jackson-js: Powerful JavaScript decorators to serialize/deserialize objects into JSON and vice versa (Part 1)\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;user\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;stringify\u0026lt;/span\u0026gt;(user));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then to retrieve it from the store and convert to an object again:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; user = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parse\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;user\u0026apos;\u0026lt;/span\u0026gt;));\n\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;If\u0026lt;/span\u0026gt; we need to \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;delete\u0026lt;/span\u0026gt; all entries \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;of\u0026lt;/span\u0026gt; the store we can simply \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;do\u0026lt;/span\u0026gt;:\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;clear\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":306,"title":"How to store objects in HTML5 localStorage","content":"\n                \n\u0026lt;p\u0026gt;I\u0026apos;d like to store a JavaScript object in HTML5 \u0026lt;code\u0026gt;localStorage\u0026lt;/code\u0026gt;, but my object is apparently being converted to a string.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I can store and retrieve primitive JavaScript types and arrays using \u0026lt;code\u0026gt;localStorage\u0026lt;/code\u0026gt;, but objects don\u0026apos;t seem to work.  Should they?\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Here\u0026apos;s my code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-javascript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; testObject = { \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;one\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;two\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;three\u0026apos;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;3\u0026lt;/span\u0026gt; };\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;typeof testObject: \u0026apos;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; testObject);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;testObject properties:\u0026apos;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; prop \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;in\u0026lt;/span\u0026gt; testObject) {\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;  \u0026apos;\u0026lt;/span\u0026gt; + prop + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;: \u0026apos;\u0026lt;/span\u0026gt; + testObject[prop]);\n}\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Put the object into storage\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;testObject\u0026apos;\u0026lt;/span\u0026gt;, testObject);\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Retrieve the object from storage\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; retrievedObject = \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;localStorage\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getItem\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;testObject\u0026apos;\u0026lt;/span\u0026gt;);\n\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;typeof retrievedObject: \u0026apos;\u0026lt;/span\u0026gt; + \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;typeof\u0026lt;/span\u0026gt; retrievedObject);\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;console\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;log\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Value of retrievedObject: \u0026apos;\u0026lt;/span\u0026gt; + retrievedObject);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The console output is\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-none s-code-block\u0026quot;\u0026gt;\u0026lt;code\u0026gt;typeof testObject: object\ntestObject properties:\n  one: 1\n  two: 2\n  three: 3\ntypeof retrievedObject: string\nValue of retrievedObject: [object Object]\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;It looks to me like the \u0026lt;code\u0026gt;setItem\u0026lt;/code\u0026gt; method is converting the input to a string before storing it.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I see this behavior in Safari, Chrome, and Firefox, so I assume it\u0026apos;s my misunderstanding of the \u0026lt;a href=\u0026quot;http://www.w3.org/TR/webstorage/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTML5 Web Storage\u0026lt;/a\u0026gt; specification, not a browser-specific bug or limitation.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I\u0026apos;ve tried to make sense of the \u0026lt;em\u0026gt;structured clone\u0026lt;/em\u0026gt; algorithm described in \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://html.spec.whatwg.org/multipage/infrastructure.html#infrastructure\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;2 Common infrastructure\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;.  I don\u0026apos;t fully understand what it\u0026apos;s saying, but maybe my problem has to do with my object\u0026apos;s properties not being enumerable (???).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Is there an easy workaround?\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;Update: The W3C eventually changed their minds about the structured-clone specification, and decided to change the spec to match the implementations.  See \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://www.w3.org/Bugs/Public/show_bug.cgi?id=12111\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;12111 – spec for Storage object getItem(key) method does not match implementation behavior\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;. So this question is no longer 100% valid, but the answers still may be of interest.\u0026lt;/p\u0026gt;\n    ","slug":"how-to-store-objects-in-html5-localstorage-1657387568907","postType":"QUESTION","createdAt":"2022-07-09T17:26:08.000Z","updatedAt":"2022-07-09T17:26:08.000Z","tags":[{"id":1822,"name":"local-storage","slug":"local-storage","createdAt":"2022-07-09T17:26:09.000Z","updatedAt":"2022-07-09T17:26:09.000Z","Questions_Tags":{"questionId":306,"tagId":1822}}],"relatedQuestions":[{"title":"How to store objects in HTML5 localStorage","slug":"how-to-store-objects-in-html5-localstorage-1657387568907","tags":[{"name":"local-storage","Questions_Tags":{"questionId":306,"tagId":1822}}]}]},"randomQuestions":[{"title":"What does \"Fatal error: Unexpectedly found nil while unwrapping an Optional value\" mean?","slug":"what-does-\"fatal-error:-unexpectedly-found-nil-while-unwrapping-an-optional-value\"-mean-1657384593944"},{"title":"How can I upload files to a server using JSP/Servlet?","slug":"how-can-i-upload-files-to-a-server-using-jspservlet-1657384847658"},{"title":"What is event bubbling and capturing?","slug":"what-is-event-bubbling-and-capturing-1657388059203"},{"title":"List of lists changes reflected across sublists unexpectedly","slug":"list-of-lists-changes-reflected-across-sublists-unexpectedly-1657384393720"},{"title":"Get top 1 row of each group","slug":"get-top-1-row-of-each-group-1657387438304"},{"title":"What is the best regular expression to check if a string is a valid URL?","slug":"what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url-1657387618306"},{"title":"How do I count the occurrences of a list item?","slug":"how-do-i-count-the-occurrences-of-a-list-item-1657387916234"},{"title":"Is it possible for flex items to align tightly to the items above them?","slug":"is-it-possible-for-flex-items-to-align-tightly-to-the-items-above-them-1657388511179"},{"title":"How can I fix 'android.os.NetworkOnMainThreadException'?","slug":"how-can-i-fix-'android.os.networkonmainthreadexception'-1657384454963"},{"title":"Why does \"a == x or y or z\" always evaluate to True?","slug":"why-does-\"a-x-or-y-or-z\"-always-evaluate-to-true-1657384855216"},{"title":"How to choose the right bean scope?","slug":"how-to-choose-the-right-bean-scope-1657387596513"},{"title":"console.log() async or sync?","slug":"console.log()-async-or-sync-1657388401087"},{"title":"How do I return the response from an asynchronous call?","slug":"how-do-i-return-the-response-from-an-asynchronous-call-1657384208012"},{"title":"What is object slicing?","slug":"what-is-object-slicing-1657384506425"},{"title":"How to close/hide the Android soft keyboard programmatically?","slug":"how-to-closehide-the-android-soft-keyboard-programmatically-1657388217420"},{"title":"Why is using 'eval' a bad practice?","slug":"why-is-using-'eval'-a-bad-practice-1657387348760"},{"title":"What is a StackOverflowError?","slug":"what-is-a-stackoverflowerror-1657388319634"},{"title":"Syntax error due to using a reserved word as a table or column name in MySQL","slug":"syntax-error-due-to-using-a-reserved-word-as-a-table-or-column-name-in-mysql-1657384689274"},{"title":"Why are global variables evil? [closed]","slug":"why-are-global-variables-evil-closed-1657388260006"},{"title":"Cross-thread operation not valid: Control accessed from a thread other than the thread it was created on","slug":"cross-thread-operation-not-valid:-control-accessed-from-a-thread-other-than-the-thread-it-was-created-on-1657387659019"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-to-store-objects-in-html5-localstorage-1657387568907"},"buildId":"5tS3Jli5j89_wXapXajXn","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>