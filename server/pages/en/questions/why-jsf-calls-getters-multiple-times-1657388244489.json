{"pageProps":{"data":{"answer":["\n&lt;p&gt;This is caused by the nature of deferred expressions &lt;code&gt;#{}&lt;/code&gt; (note that &quot;legacy&quot; standard expressions &lt;code&gt;${}&lt;/code&gt; behave exactly the same when Facelets is used instead of JSP). The deferred expression is not &lt;em&gt;immediately&lt;/em&gt; evaluated, but created as a &lt;a href=&quot;http://docs.oracle.com/javaee/6/api/javax/el/ValueExpression.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;ValueExpression&lt;/code&gt;&lt;/a&gt; object and the getter method behind the expression is executed everytime when the code calls &lt;a href=&quot;http://docs.oracle.com/javaee/6/api/javax/el/ValueExpression.html#getValue%28javax.el.ELContext%29&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;ValueExpression#getValue()&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;This will normally be invoked one or two times per JSF request-response cycle, depending on whether the component is an input or output component (&lt;a href=&quot;http://balusc.blogspot.com/2006/09/debug-jsf-lifecycle.html&quot; rel=&quot;noreferrer&quot;&gt;learn it here&lt;/a&gt;). However, this count can get up (much) higher when used in iterating JSF components (such as &lt;code&gt;&amp;lt;h:dataTable&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;ui:repeat&amp;gt;&lt;/code&gt;), or here and there in a boolean expression like the &lt;code&gt;rendered&lt;/code&gt; attribute. JSF (specifically, EL) won&apos;t cache the evaluated result of the EL expression at all as it &lt;em&gt;may&lt;/em&gt; return different values on each call (for example, when it&apos;s dependent on the currently iterated datatable row). &lt;/p&gt;\n\n&lt;p&gt;Evaluating an EL expression and invoking a getter method is a very cheap operation, so you should generally not worry about this at all. However, the story changes when you&apos;re performing expensive DB/business logic in the getter method for some reason. This would be re-executed everytime! &lt;/p&gt;\n\n&lt;p&gt;Getter methods in JSF backing beans should be designed that way that they solely &lt;strong&gt;return&lt;/strong&gt; the already-prepared property and nothing more, exactly as per the &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html&quot; rel=&quot;noreferrer&quot;&gt;Javabeans specification&lt;/a&gt;. They should not do any expensive DB/business logic at all. For that the bean&apos;s &lt;code&gt;@PostConstruct&lt;/code&gt; and/or (action)listener methods should be used. They are executed &lt;strong&gt;only once&lt;/strong&gt; at some point of request-based JSF lifecycle and that&apos;s exactly what you want.&lt;/p&gt;\n\n&lt;p&gt;Here is a summary of all different &lt;em&gt;right&lt;/em&gt; ways to preset/load a property.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Bean&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SomeObject&lt;/span&gt; someProperty;\n\n    &lt;span class=&quot;hljs-meta&quot;&gt;@PostConstruct&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;init&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// In @PostConstruct (will be invoked immediately after construction and dependency/property injection).&lt;/span&gt;\n        someProperty = &lt;span class=&quot;hljs-title function_&quot;&gt;loadSomeProperty&lt;/span&gt;();\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;onload&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Or in GET action method (e.g. &amp;lt;f:viewAction action&amp;gt;).&lt;/span&gt;\n        someProperty = &lt;span class=&quot;hljs-title function_&quot;&gt;loadSomeProperty&lt;/span&gt;();\n    }           \n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;preRender&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;ComponentSystemEvent event&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Or in some SystemEvent method (e.g. &amp;lt;f:event type=&quot;preRenderView&quot;&amp;gt;).&lt;/span&gt;\n        someProperty = &lt;span class=&quot;hljs-title function_&quot;&gt;loadSomeProperty&lt;/span&gt;();\n    }           \n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;change&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;ValueChangeEvent event&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Or in some FacesEvent method (e.g. &amp;lt;h:inputXxx valueChangeListener&amp;gt;).&lt;/span&gt;\n        someProperty = &lt;span class=&quot;hljs-title function_&quot;&gt;loadSomeProperty&lt;/span&gt;();\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ajaxListener&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;AjaxBehaviorEvent event&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Or in some BehaviorEvent method (e.g. &amp;lt;f:ajax listener&amp;gt;).&lt;/span&gt;\n        someProperty = &lt;span class=&quot;hljs-title function_&quot;&gt;loadSomeProperty&lt;/span&gt;();\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;actionListener&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;ActionEvent event&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Or in some ActionEvent method (e.g. &amp;lt;h:commandXxx actionListener&amp;gt;).&lt;/span&gt;\n        someProperty = &lt;span class=&quot;hljs-title function_&quot;&gt;loadSomeProperty&lt;/span&gt;();\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;submit&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Or in POST action method (e.g. &amp;lt;h:commandXxx action&amp;gt;).&lt;/span&gt;\n        someProperty = &lt;span class=&quot;hljs-title function_&quot;&gt;loadSomeProperty&lt;/span&gt;();\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;outcome&quot;&lt;/span&gt;;\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;SomeObject&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getSomeProperty&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Just keep getter untouched. It isn&apos;t intented to do business logic!&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; someProperty;\n    }\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note that you should &lt;strong&gt;not&lt;/strong&gt; use bean&apos;s constructor or initialization block for the job because it may be invoked multiple times if you&apos;re using a bean management framework which uses proxies, such as CDI.&lt;/p&gt;\n\n&lt;p&gt;If there are for you really no other ways, due to some restrictive design requirements, then you should introduce lazy loading inside the getter method. I.e. if the property is &lt;code&gt;null&lt;/code&gt;, then load and assign it to the property, else return it.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; SomeObject &lt;span class=&quot;hljs-title&quot;&gt;getSomeProperty&lt;/span&gt;()&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// If there are really no other ways, introduce lazy loading.&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (someProperty == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            someProperty = loadSomeProperty();\n        }\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; someProperty;\n    }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This way the expensive DB/business logic won&apos;t unnecessarily be executed on every single getter call. &lt;/p&gt;\n\n&lt;h3&gt;See also:&lt;/h3&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/4281261/why-is-the-getter-called-so-many-times-by-the-rendered-attribute&quot;&gt;Why is the getter called so many times by the rendered attribute?&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/2451154/invoke-jsf-managed-bean-action-on-page-load&quot;&gt;Invoke JSF managed bean action on page load&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/5765853/when-should-i-load-the-collection-from-database-for-hdatatable&quot;&gt;How and when should I load the model from database for h:dataTable&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/6848970/how-to-prepopulate-hselectonemenu-with-entities-from-database&quot;&gt;How to populate options of h:selectOneMenu from database?&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/8207325/display-dynamic-image-from-database-with-pgraphicimage-and-streamedcontent&quot;&gt;Display dynamic image from database with p:graphicImage and StreamedContent&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/6434866/defining-and-reusing-an-el-variable-in-jsf-page/&quot;&gt;Defining and reusing an EL variable in JSF page&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/33106118/measure-the-render-time-of-a-jsf-view-after-a-server-request/&quot;&gt;Measure the render time of a JSF view after a server request&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;With JSF 2.0 you can attach a listener to a system event&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h:outputText&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#{ManagedBean.someProperty}&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n   &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;f:event&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;preRenderView&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;listener&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#{ManagedBean.loadSomeProperty}&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h:outputText&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Alternatively you can enclose the JSF page in an &lt;code&gt;f:view&lt;/code&gt; tag&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;f:view&lt;/span&gt;&amp;gt;&lt;/span&gt;\n   &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;f:event&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;preRenderView&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;listener&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#{ManagedBean.loadSomeProperty}&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n\n      .. jsf page here...\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;f:view&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I have written an &lt;a href=&quot;http://java.dzone.com/articles/how-cache-jsf-beans-getter&quot; rel=&quot;noreferrer&quot;&gt;article&lt;/a&gt; about how to cache JSF beans getter with Spring AOP.&lt;/p&gt;\n\n&lt;p&gt;I create a simple &lt;code&gt;MethodInterceptor&lt;/code&gt; which intercepts all methods annotated with a special annotation:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-java&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;CacheAdvice&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MethodInterceptor&lt;/span&gt; {\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;Logger&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; LoggerFactory.getLogger(CacheAdvice.class);\n\n&lt;span class=&quot;hljs-meta&quot;&gt;@Autowired&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; CacheService cacheService;\n\n&lt;span class=&quot;hljs-meta&quot;&gt;@Override&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Object &lt;span class=&quot;hljs-title function_&quot;&gt;invoke&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(MethodInvocation methodInvocation)&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;throws&lt;/span&gt; Throwable {\n\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; methodInvocation.getThis() + methodInvocation.getMethod().getName();\n\n    &lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;thread&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; Thread.currentThread().getName();\n\n    &lt;span class=&quot;hljs-type&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;cachedValue&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; cacheService.getData(thread , key);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (cachedValue == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;){\n        cachedValue = methodInvocation.proceed();\n        cacheService.cacheData(thread , key , cachedValue);\n        logger.debug(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Cache miss &quot;&lt;/span&gt; + thread + &lt;span class=&quot;hljs-string&quot;&gt;&quot; &quot;&lt;/span&gt; + key);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;{\n        logger.debug(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Cached hit &quot;&lt;/span&gt; + thread + &lt;span class=&quot;hljs-string&quot;&gt;&quot; &quot;&lt;/span&gt; + key);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; cachedValue;\n}\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; CacheService &lt;span class=&quot;hljs-title function_&quot;&gt;getCacheService&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; cacheService;\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setCacheService&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(CacheService cacheService)&lt;/span&gt; {\n    &lt;span class=&quot;hljs-built_in&quot;&gt;this&lt;/span&gt;.cacheService = cacheService;\n}\n\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This interceptor is used in a spring configuration file:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;bean&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;advisor&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;pointcut&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;bean&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;org.springframework.aop.support.annotation.AnnotationMatchingPointcut&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;constructor-arg&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;index&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0&quot;&lt;/span&gt;  &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;classAnnotationType&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;java.lang.Class&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n                &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;null&lt;/span&gt;/&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;constructor-arg&lt;/span&gt;&amp;gt;&lt;/span&gt;\n            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;constructor-arg&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;index&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;1&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;com._4dconcept.docAdvance.jsfCache.annotation.Cacheable&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;methodAnnotationType&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;java.lang.Class&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;bean&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;advice&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;bean&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;com._4dconcept.docAdvance.jsfCache.CacheAdvice&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;bean&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Hope it will help!&lt;/p&gt;\n    ","\n&lt;p&gt;Originally posted in PrimeFaces forum @ &lt;a href=&quot;http://forum.primefaces.org/viewtopic.php?f=3&amp;amp;t=29546&quot; rel=&quot;noreferrer&quot;&gt;http://forum.primefaces.org/viewtopic.php?f=3&amp;amp;t=29546&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Recently, I have been obsessed evaluating the performance of my app, tuning JPA queries, replacing dynamic SQL queries with named queries, and just this morning, I recognized that a getter method was more of a HOT SPOT in Java Visual VM than the rest of my code (or majority of my code).&lt;/p&gt;\n\n&lt;p&gt;Getter method:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;PageNavigationController&lt;span class=&quot;hljs-selector-class&quot;&gt;.getGmapsAutoComplete&lt;/span&gt;()\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Referenced by ui:include in  in index.xhtml&lt;/p&gt;\n\n&lt;p&gt;Below, you will see that PageNavigationController.getGmapsAutoComplete() is a HOT SPOT (performance issue) in Java Visual VM. If you look further down, on the screen capture, you will see that getLazyModel(), PrimeFaces lazy datatable getter method, is a hot spot too, only when enduser is doing a lot of &apos;lazy datatable&apos; type of stuff/operations/tasks in the app. :)&lt;/p&gt;\n\n&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/9mkxy.png&quot; alt=&quot;Java Visual VM: showing HOT SPOT&quot;&gt;&lt;/p&gt;\n\n&lt;p&gt;See (original) code below.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Boolean &lt;span class=&quot;hljs-title&quot;&gt;getGmapsAutoComplete&lt;/span&gt;()&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (page) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;/orders/pf_Add.xhtml&quot;&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;/orders/pf_Edit.xhtml&quot;&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;/orders/pf_EditDriverVehicles.xhtml&quot;&lt;/span&gt;:\n            gmapsAutoComplete = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n        &lt;span class=&quot;hljs-literal&quot;&gt;default&lt;/span&gt;:\n            gmapsAutoComplete = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; gmapsAutoComplete;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Referenced by the following in index.xhtml:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-coffeescript&quot;&gt;&amp;lt;h:head&amp;gt;\n    &amp;lt;ui:include src=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-subst&quot;&gt;#{pageNavigationController.gmapsAutoComplete ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;/head_gmapsAutoComplete.xhtml&apos;&lt;/span&gt; : (pageNavigationController.gmaps ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;/head_gmaps.xhtml&apos;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;/head_default.xhtml&apos;&lt;/span&gt;)}&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;\n&amp;lt;/h:head&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Solution: since this is a &apos;getter&apos; method, move code and assign value to gmapsAutoComplete prior to method being called; see code below.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/*\n * 2013-04-06 moved switch {...} to updateGmapsAutoComplete()\n *            because performance = 115ms (hot spot) while\n *            navigating through web app\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Boolean &lt;span class=&quot;hljs-title&quot;&gt;getGmapsAutoComplete&lt;/span&gt;()&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; gmapsAutoComplete;\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/*\n * ALWAYS call this method after &quot;page = ...&quot;\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;updateGmapsAutoComplete&lt;/span&gt;()&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;switch&lt;/span&gt; (page) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;/orders/pf_Add.xhtml&quot;&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;/orders/pf_Edit.xhtml&quot;&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;/orders/pf_EditDriverVehicles.xhtml&quot;&lt;/span&gt;:\n            gmapsAutoComplete = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n        &lt;span class=&quot;hljs-literal&quot;&gt;default&lt;/span&gt;:\n            gmapsAutoComplete = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;;\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Test results: PageNavigationController.getGmapsAutoComplete() is no longer a HOT SPOT in Java Visual VM (doesn&apos;t even show up anymore)&lt;/p&gt;\n\n&lt;p&gt;Sharing this topic, since many of the expert users have advised junior JSF developers to NOT add code in &apos;getter&apos; methods. :)&lt;/p&gt;\n    ","\n&lt;p&gt;If you are using CDI, you can use Producers methods.\nIt will be called many times, but the result of first call is cached in scope of the bean and is efficient for getters that are computing or initializing heavy objects!\nSee &lt;a href=&quot;https://stackoverflow.com/questions/8592583/is-produces-more-efficient-that-a-getter-in-an-el-expression&quot;&gt;here&lt;/a&gt;, for more info.&lt;/p&gt;\n    ","\n&lt;p&gt;You could probably use AOP to create some sort of Aspect that cached the results of our getters for a configurable amount of time. This would prevent you from needing to copy-and-paste boilerplate code in dozens of accessors.&lt;/p&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;If the value of someProperty is\n  expensive to calculate, this can\n  potentially be a problem.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;This is what we call a premature optimization. In the rare case that a profiler tells you that the calculation of a property is so extraordinarily expensive that calling it three times rather than once has a significant performance impact, you add caching as you describe. But unless you do something really stupid like factoring primes or accessing a databse in a getter, your code most likely has a dozen worse inefficiencies in places you&apos;ve never thought about.&lt;/p&gt;\n    ","\n&lt;p&gt;I would also advice using such Framework as Primefaces instead of stock JSF,  they address such issues before JSF team e. g in primefaces you can set partial submit. Otherwise BalusC has explained it well. &lt;/p&gt;\n    ","\n&lt;p&gt;It still big problem in JSF. Fo example if you have a method &lt;code&gt;isPermittedToBlaBla&lt;/code&gt; for security checks and in your view you have &lt;code&gt;rendered=&quot;#{bean.isPermittedToBlaBla}&lt;/code&gt; then the method will be called multiple times.&lt;/p&gt;\n\n&lt;p&gt;The security check could be complicated e.g . LDAP query etc. So you must avoid that with &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;Boolean&lt;/span&gt; isAllowed = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ... &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(isAllowed==&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;){...} &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; isAllowed?\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and you must ensure within a session bean this per request.&lt;/p&gt;\n\n&lt;p&gt;Ich think JSF must implement here some extensions to avoid multiple calls (e.g annotation &lt;code&gt;@Phase(RENDER_RESPONSE)&lt;/code&gt; calle this method only once after &lt;code&gt;RENDER_RESPONSE&lt;/code&gt; phase...)&lt;/p&gt;\n    "],"id":513,"title":"Why JSF calls getters multiple times","content":"\n                \n&lt;p&gt;Let&apos;s say I specify an outputText component like this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-coffeescript&quot;&gt;&amp;lt;h:outputText value=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-subst&quot;&gt;#{ManagedBean.someProperty}&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If I print a log message when the getter for &lt;code&gt;someProperty&lt;/code&gt; is called and load the page, it is trivial to notice that the getter is being called more than once per request (twice or three times is what happened in my case):&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-less&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;DEBUG&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2010&lt;/span&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;-01-18&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;31&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;40&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;104&lt;/span&gt; (ManagedBean.&lt;span class=&quot;hljs-attribute&quot;&gt;java&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;) &lt;span class=&quot;hljs-selector-tag&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;Getting&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;some&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;property&lt;/span&gt;\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;DEBUG&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2010&lt;/span&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;-01-18&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;31&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;40&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;104&lt;/span&gt; (ManagedBean.&lt;span class=&quot;hljs-attribute&quot;&gt;java&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;) &lt;span class=&quot;hljs-selector-tag&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;Getting&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;some&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;property&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If the value of &lt;code&gt;someProperty&lt;/code&gt; is expensive to calculate, this can potentially be a problem.&lt;/p&gt;\n\n&lt;p&gt;I googled a bit and figured this is a known issue. One workaround was to include a check and see if it had already been calculated:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;private&lt;/span&gt; String someProperty;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; String getSomeProperty() {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.someProperty == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.someProperty = &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.calculatePropertyValue();\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.someProperty;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The main problem with this is that you get loads of boilerplate code, not to mention private variables that you might not need.&lt;/p&gt;\n\n&lt;p&gt;What are the alternatives to this approach? Is there a  way to achieve this without so much unnecessary code? Is there a way to stop JSF from behaving in this way?&lt;/p&gt;\n\n&lt;p&gt;Thanks for your input!&lt;/p&gt;\n    ","slug":"why-jsf-calls-getters-multiple-times-1657388244489","postType":"QUESTION","createdAt":"2022-07-09T17:37:24.000Z","updatedAt":"2022-07-09T17:37:24.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"Get the data received in a Flask request","slug":"get-the-data-received-in-a-flask-request-1657387804432"},{"title":"Using Auto Layout in UITableView for dynamic cell layouts & variable row heights","slug":"using-auto-layout-in-uitableview-for-dynamic-cell-layouts-and-variable-row-heights-1657387722263"},{"title":"How do I compose a rotation matrix with human readable angles from scratch?","slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457"},{"title":"What is event bubbling and capturing?","slug":"what-is-event-bubbling-and-capturing-1657388059203"},{"title":"What is the difference between single-quoted and double-quoted strings in PHP?","slug":"what-is-the-difference-between-single-quoted-and-double-quoted-strings-in-php-1657384624345"},{"title":"How to serve static files in Flask","slug":"how-to-serve-static-files-in-flask-1657387862496"},{"title":"What is object slicing?","slug":"what-is-object-slicing-1657384506425"},{"title":"Error: could not find function ... in R","slug":"error:-could-not-find-function-...-in-r-1657388476492"},{"title":"Sort a Map<Key, Value> by values","slug":"sort-a-maplesskey-valuegreater-by-values-1657387443904"},{"title":"Get top 1 row of each group","slug":"get-top-1-row-of-each-group-1657387438304"},{"title":"Test for existence of nested JavaScript object key","slug":"test-for-existence-of-nested-javascript-object-key-1657387935411"},{"title":"Passing data between view controllers","slug":"passing-data-between-view-controllers-1657384540021"},{"title":"Can PHP PDO Statements accept the table or column name as parameter?","slug":"can-php-pdo-statements-accept-the-table-or-column-name-as-parameter-1657387478588"},{"title":"How to get all possible combinations of a listâ€™s elements?","slug":"how-to-get-all-possible-combinations-of-a-list's-elements-1657388271070"},{"title":"event.preventDefault() vs. return false","slug":"event.preventdefault()-vs.-return-false-1657387458377"},{"title":"Is there a CSS parent selector?","slug":"is-there-a-css-parent-selector-1657384430692"},{"title":"What is JSONP, and why was it created?","slug":"what-is-jsonp-and-why-was-it-created-1657387770563"},{"title":"Why should I not #include <bits/stdc++.h>?","slug":"why-should-i-not-include-lessbitsstdc++.hgreater-1657384470484"},{"title":"What does a space mean in a CSS selector? i.e. What is the difference between .classA.classB and .classA .classB?","slug":"what-does-a-space-mean-in-a-css-selector-i.e.-what-is-the-difference-between-.classa.classb-and-.classa-.classb-1657387912095"},{"title":"Pandas Merging 101","slug":"pandas-merging-101-1657384447080"}]},"__N_SSG":true}