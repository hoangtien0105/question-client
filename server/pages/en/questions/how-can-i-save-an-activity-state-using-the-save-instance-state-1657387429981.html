<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="application-state,solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981","name":"Questions"}}]}</script><title>How can I save an activity state using the save instance state? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I&#x27;ve been working on the Android SDK platform, and it is a little unclear how to save an application&#x27;s state. So given this minor re-tooling of the &#x27;Hello, Android&#x27; example:
package com.android.hello;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class HelloAndroid extends Activity {

  private TextView mTextView = null;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mTextView = new TextView(this);

    if (savedInstanceState == null) {
       mTextView.setText(&quot;Welcome to HelloAndroid!&quot;);
    } else {
       mTextView.setText(&quot;Welcome back.&quot;);
    }

    setContentView(mTextView);
  }
}

I thought it would be enough for the simplest case, but it always responds with the first message, no matter how I navigate away from the app.
I&#x27;m sure the solution is as simple as overriding onPause or something like that, but I&#x27;ve been poking away in the documentation for 30 minutes or so and haven&#x27;t found anything obvious.
    "/><meta property="og:title" content="How can I save an activity state using the save instance state? | Solution Checker"/><meta property="og:description" content="I&#x27;ve been working on the Android SDK platform, and it is a little unclear how to save an application&#x27;s state. So given this minor re-tooling of the &#x27;Hello, Android&#x27; example:
package com.android.hello;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class HelloAndroid extends Activity {

  private TextView mTextView = null;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mTextView = new TextView(this);

    if (savedInstanceState == null) {
       mTextView.setText(&quot;Welcome to HelloAndroid!&quot;);
    } else {
       mTextView.setText(&quot;Welcome back.&quot;);
    }

    setContentView(mTextView);
  }
}

I thought it would be enough for the simplest case, but it always responds with the first message, no matter how I navigate away from the app.
I&#x27;m sure the solution is as simple as overriding onPause or something like that, but I&#x27;ve been poking away in the documentation for 30 minutes or so and haven&#x27;t found anything obvious.
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How can I save an activity state using the save instance state?","text":"I&apos;ve been working on the Android SDK platform, and it is a little unclear how to save an application&apos;s state. So given this minor re-tooling of the &apos;Hello, Android&apos; example:\npackage com.android.hello;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.widget.TextView;\n\npublic class HelloAndroid extends Activity {\n\n  private TextView mTextView = null;\n\n  /** Called when the activity is first created. */\n  @Override\n  public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    mTextView = new TextView(this);\n\n    if (savedInstanceState == null) {\n       mTextView.setText(&quot;Welcome to HelloAndroid!&quot;);\n    } else {\n       mTextView.setText(&quot;Welcome back.&quot;);\n    }\n\n    setContentView(mTextView);\n  }\n}\n\nI thought it would be enough for the simplest case, but it always responds with the first message, no matter how I navigate away from the app.\nI&apos;m sure the solution is as simple as overriding onPause or something like that, but I&apos;ve been poking away in the documentation for 30 minutes or so and haven&apos;t found anything obvious.\n    ","answerCount":30,"upVoteCount":500,"suggestedAnswer":[{"text":"You need to override onSaveInstanceState(Bundle savedInstanceState) and write the application state values you want to change to the Bundle parameter like this:\n\n@Override\npublic void onSaveInstanceState(Bundle savedInstanceState) {\n  super.onSaveInstanceState(savedInstanceState);\n  // Save UI state changes to the savedInstanceState.\n  // This bundle will be passed to onCreate if the process is\n  // killed and restarted.\n  savedInstanceState.putBoolean(&quot;MyBoolean&quot;, true);\n  savedInstanceState.putDouble(&quot;myDouble&quot;, 1.9);\n  savedInstanceState.putInt(&quot;MyInt&quot;, 1);\n  savedInstanceState.putString(&quot;MyString&quot;, &quot;Welcome back to Android&quot;);\n  // etc.\n}\n\n\nThe Bundle is essentially a way of storing a NVP (&quot;Name-Value Pair&quot;) map, and it will get passed in to onCreate() and also onRestoreInstanceState() where you would then extract the values from activity like this:\n\n@Override\npublic void onRestoreInstanceState(Bundle savedInstanceState) {\n  super.onRestoreInstanceState(savedInstanceState);\n  // Restore UI state from the savedInstanceState.\n  // This bundle has also been passed to onCreate.\n  boolean myBoolean = savedInstanceState.getBoolean(&quot;MyBoolean&quot;);\n  double myDouble = savedInstanceState.getDouble(&quot;myDouble&quot;);\n  int myInt = savedInstanceState.getInt(&quot;MyInt&quot;);\n  String myString = savedInstanceState.getString(&quot;MyString&quot;);\n}\n\n\nOr from a fragment.\n\n@Override\npublic void onViewStateRestored(@Nullable Bundle savedInstanceState) {\n    super.onViewStateRestored(savedInstanceState);\n    // Restore UI state from the savedInstanceState.\n    // This bundle has also been passed to onCreate.\n    boolean myBoolean = savedInstanceState.getBoolean(&quot;MyBoolean&quot;);\n    double myDouble = savedInstanceState.getDouble(&quot;myDouble&quot;);\n    int myInt = savedInstanceState.getInt(&quot;MyInt&quot;);\n    String myString = savedInstanceState.getString(&quot;MyString&quot;);\n}\n\n\nYou would usually use this technique to store instance values for your application (selections, unsaved text, etc.).\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"The savedInstanceState is only for saving state associated with a current instance of an Activity, for example current navigation or selection info, so that if Android destroys and recreates an Activity, it can come back as it was before.  See the documentation for onCreate and onSaveInstanceState\n\nFor more long lived state, consider using a SQLite database, a file, or preferences.  See Saving Persistent State.\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Note that it is not safe to use onSaveInstanceState and onRestoreInstanceState for persistent data, according to  the documentation on Activity.\nThe document states (in the &apos;Activity Lifecycle&apos; section):\n\nNote that it is important to save\npersistent data in onPause() instead\nof onSaveInstanceState(Bundle)\nbecause the later is not part of the\nlifecycle callbacks, so will not be\ncalled in every situation as described\nin its documentation.\n\nIn other words, put your save/restore code for persistent data in onPause() and onResume()!\nFor further clarification, here&apos;s the onSaveInstanceState() documentation:\n\nThis method is called before an activity may be killed so that when it\ncomes back some time in the future it can restore its state. For\nexample, if activity B is launched in front of activity A, and at some\npoint activity A is killed to reclaim resources, activity A will have\na chance to save the current state of its user interface via this\nmethod so that when the user returns to activity A, the state of the\nuser interface can be restored via onCreate(Bundle) or\nonRestoreInstanceState(Bundle).\n\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"My colleague wrote an article explaining application state on Android devices, including explanations on activity lifecycle and state information, how to store state information, and saving to state Bundle and SharedPreferences. Take a look at it here.\nThe article covers three approaches:\nStore local variable/UI control data for application lifetime (i.e. temporarily) using an instance state bundle\n[Code sample  Store state in state bundle]\n@Override\npublic void onSaveInstanceState(Bundle savedInstanceState)\n{\n  // Store UI state to the savedInstanceState.\n  // This bundle will be passed to onCreate on next call.  EditText txtName = (EditText)findViewById(R.id.txtName);\n  String strName = txtName.getText().toString();\n\n  EditText txtEmail = (EditText)findViewById(R.id.txtEmail);\n  String strEmail = txtEmail.getText().toString();\n\n  CheckBox chkTandC = (CheckBox)findViewById(R.id.chkTandC);\n  boolean blnTandC = chkTandC.isChecked();\n\n  savedInstanceState.putString(Name, strName);\n  savedInstanceState.putString(Email, strEmail);\n  savedInstanceState.putBoolean(TandC, blnTandC);\n\n  super.onSaveInstanceState(savedInstanceState);\n}\n\nStore local variable/UI control data between application instances (i.e. permanently) using shared preferences\n[Code sample  store state in SharedPreferences]\n@Override\nprotected void onPause()\n{\n  super.onPause();\n\n  // Store values between instances here\n  SharedPreferences preferences = getPreferences(MODE_PRIVATE);\n  SharedPreferences.Editor editor = preferences.edit();  // Put the values from the UI\n  EditText txtName = (EditText)findViewById(R.id.txtName);\n  String strName = txtName.getText().toString();\n\n  EditText txtEmail = (EditText)findViewById(R.id.txtEmail);\n  String strEmail = txtEmail.getText().toString();\n\n  CheckBox chkTandC = (CheckBox)findViewById(R.id.chkTandC);\n  boolean blnTandC = chkTandC.isChecked();\n\n  editor.putString(Name, strName); // value to store\n  editor.putString(Email, strEmail); // value to store\n  editor.putBoolean(TandC, blnTandC); // value to store\n  // Commit to storage\n  editor.commit();\n}\n\nKeeping object instances alive in memory between activities within application lifetime using a retained non-configuration instance\n[Code sample  store object instance]\nprivate cMyClassType moInstanceOfAClass; // Store the instance of an object\n@Override\npublic Object onRetainNonConfigurationInstance()\n{\n  if (moInstanceOfAClass != null) // Check that the object exists\n      return(moInstanceOfAClass);\n  return super.onRetainNonConfigurationInstance();\n}\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"This is a classic &apos;gotcha&apos; of Android development. There are two issues here:\n\nThere is a subtle Android Framework bug which greatly complicates application stack management during development, at least on legacy versions (not entirely sure if/when/how it was fixed). I&apos;ll discuss this bug below.\nThe &apos;normal&apos; or intended way to manage this issue is, itself, rather complicated with the duality of onPause/onResume and onSaveInstanceState/onRestoreInstanceState\n\nBrowsing across all these threads, I suspect that much of the time developers are talking about these two different issues simultaneously ... hence all the confusion and reports of &quot;this doesn&apos;t work for me&quot;.\nFirst, to clarify the &apos;intended&apos; behavior: onSaveInstance and onRestoreInstance are fragile and only for transient state. The intended usage (as far as I can tell) is to handle Activity recreation when the phone is rotated (orientation change). In other words, the intended usage is when your Activity is still logically &apos;on top&apos;, but still must be reinstantiated by the system. The saved Bundle is not persisted outside of the process/memory/GC, so you cannot really rely on this if your activity goes to the background. Yes, perhaps your Activity&apos;s memory will survive its trip to the background and escape GC, but this is not reliable (nor is it predictable).\nSo if you have a scenario where there is meaningful &apos;user progress&apos; or state that should be persisted between &apos;launches&apos; of your application, the guidance is to use onPause and onResume. You must choose and prepare a persistent store yourself.\nBut - there is a very confusing bug which complicates all of this. Details are here:\n\nActivity stack behaves incorrectly during the first run of an app when started from Eclipse (#36907463)\n\nMarketplace / browser app installer allows second instance off app (#36911210)\n\n\nBasically, if your application is launched with the SingleTask flag, and then later on you launch it from the home screen or launcher menu, then that subsequent invocation will create a NEW task ... you&apos;ll effectively have two different instances of your app inhabiting the same stack ... which gets very strange very fast. This seems to happen when you launch your app during development (i.e. from Eclipse or IntelliJ), so developers run into this a lot. But also through some of the app store update mechanisms (so it impacts your users as well).\nI battled through these threads for hours before I realized that my main issue was this bug, not the intended framework behavior. A great write-up and workaround (UPDATE: see below) seems to be from user @kaciula in this answer:\nHome key press behaviour\nUPDATE June 2013: Months later, I have finally found the &apos;correct&apos; solution. You don&apos;t need to manage any stateful startedApp flags yourself. You can detect this from the framework and bail appropriately. I use this near the beginning of my LauncherActivity.onCreate:\nif (!isTaskRoot()) {\n    Intent intent = getIntent();\n    String action = intent.getAction();\n    if (intent.hasCategory(Intent.CATEGORY_LAUNCHER) &amp;&amp; action != null &amp;&amp; action.equals(Intent.ACTION_MAIN)) {\n        finish();\n        return;\n    }\n}\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"onSaveInstanceState is called when the system needs memory and kills an application. It is not called when the user just closes the application. So I think application state should also be saved in onPause.\nIt should be saved to some persistent storage like Preferences or SQLite.\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"Both methods are useful and valid and both are best suited for different scenarios:\n\n\nThe user terminates the application and re-opens it at a later date, but the application needs to reload data from the last session  this requires a persistent storage approach such as using SQLite.\nThe user switches application and then comes back to the original and wants to pick up where they left off -  save and restore bundle data (such as application state data) in onSaveInstanceState() and onRestoreInstanceState() is usually adequate.\n\n\nIf you save the state data in a persistent manner, it can be reloaded in an onResume() or onCreate() (or actually on any lifecycle call). This may or may not be desired behaviour. If you store it in a bundle in an InstanceState, then it is transient and is only suitable for storing data for use in the same user session (I use the term session loosely) but not between sessions.\n\nIt is not that one approach is better than the other, like everything, it is just important to understand what behaviour you require and to select the most appropriate approach.\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"Saving state is a kludge at best as far as I&apos;m concerned. If you need to save persistent data, just use an SQLite database. Android makes it SOOO easy.\n\nSomething like this:\n\nimport java.util.Date;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\n\npublic class dataHelper {\n\n    private static final String DATABASE_NAME = &quot;autoMate.db&quot;;\n    private static final int DATABASE_VERSION = 1;\n\n    private Context context;\n    private SQLiteDatabase db;\n    private OpenHelper oh ;\n\n    public dataHelper(Context context) {\n        this.context = context;\n        this.oh = new OpenHelper(this.context);\n        this.db = oh.getWritableDatabase();\n    }\n\n    public void close() {\n        db.close();\n        oh.close();\n        db = null;\n        oh = null;\n        SQLiteDatabase.releaseMemory();\n    }\n\n\n    public void setCode(String codeName, Object codeValue, String codeDataType) {\n        Cursor codeRow = db.rawQuery(&quot;SELECT * FROM code WHERE codeName = &apos;&quot;+  codeName + &quot;&apos;&quot;, null);\n        String cv = &quot;&quot; ;\n\n        if (codeDataType.toLowerCase().trim().equals(&quot;long&quot;) == true){\n            cv = String.valueOf(codeValue);\n        }\n        else if (codeDataType.toLowerCase().trim().equals(&quot;int&quot;) == true)\n        {\n            cv = String.valueOf(codeValue);\n        }\n        else if (codeDataType.toLowerCase().trim().equals(&quot;date&quot;) == true)\n        {\n            cv = String.valueOf(((Date)codeValue).getTime());\n        }\n        else if (codeDataType.toLowerCase().trim().equals(&quot;boolean&quot;) == true)\n        {\n            String.valueOf(codeValue);\n        }\n        else\n        {\n            cv = String.valueOf(codeValue);\n        }\n\n        if(codeRow.getCount() &gt; 0) //exists-- update\n        {\n            db.execSQL(&quot;update code set codeValue = &apos;&quot; + cv +\n                &quot;&apos; where codeName = &apos;&quot; + codeName + &quot;&apos;&quot;);\n        }\n        else // does not exist, insert\n        {\n            db.execSQL(&quot;INSERT INTO code (codeName, codeValue, codeDataType) VALUES(&quot; +\n                    &quot;&apos;&quot; + codeName + &quot;&apos;,&quot; +\n                    &quot;&apos;&quot; + cv + &quot;&apos;,&quot; +\n                    &quot;&apos;&quot; + codeDataType + &quot;&apos;)&quot; );\n        }\n    }\n\n    public Object getCode(String codeName, Object defaultValue){\n\n        //Check to see if it already exists\n        String codeValue = &quot;&quot;;\n        String codeDataType = &quot;&quot;;\n        boolean found = false;\n        Cursor codeRow  = db.rawQuery(&quot;SELECT * FROM code WHERE codeName = &apos;&quot;+  codeName + &quot;&apos;&quot;, null);\n        if (codeRow.moveToFirst())\n        {\n            codeValue = codeRow.getString(codeRow.getColumnIndex(&quot;codeValue&quot;));\n            codeDataType = codeRow.getString(codeRow.getColumnIndex(&quot;codeDataType&quot;));\n            found = true;\n        }\n\n        if (found == false)\n        {\n            return defaultValue;\n        }\n        else if (codeDataType.toLowerCase().trim().equals(&quot;long&quot;) == true)\n        {\n            if (codeValue.equals(&quot;&quot;) == true)\n            {\n                return (long)0;\n            }\n            return Long.parseLong(codeValue);\n        }\n        else if (codeDataType.toLowerCase().trim().equals(&quot;int&quot;) == true)\n        {\n            if (codeValue.equals(&quot;&quot;) == true)\n            {\n                return (int)0;\n            }\n            return Integer.parseInt(codeValue);\n        }\n        else if (codeDataType.toLowerCase().trim().equals(&quot;date&quot;) == true)\n        {\n            if (codeValue.equals(&quot;&quot;) == true)\n            {\n                return null;\n            }\n            return new Date(Long.parseLong(codeValue));\n        }\n        else if (codeDataType.toLowerCase().trim().equals(&quot;boolean&quot;) == true)\n        {\n            if (codeValue.equals(&quot;&quot;) == true)\n            {\n                return false;\n            }\n            return Boolean.parseBoolean(codeValue);\n        }\n        else\n        {\n            return (String)codeValue;\n        }\n    }\n\n\n    private static class OpenHelper extends SQLiteOpenHelper {\n\n        OpenHelper(Context context) {\n            super(context, DATABASE_NAME, null, DATABASE_VERSION);\n        }\n\n        @Override\n        public void onCreate(SQLiteDatabase db) {\n            db.execSQL(&quot;CREATE TABLE IF  NOT EXISTS code&quot; +\n            &quot;(id INTEGER PRIMARY KEY, codeName TEXT, codeValue TEXT, codeDataType TEXT)&quot;);\n        }\n\n        @Override\n        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        }\n    }\n}\n\n\nA simple call after that\n\ndataHelper dh = new dataHelper(getBaseContext());\nString status = (String) dh.getCode(&quot;appState&quot;, &quot;safetyDisabled&quot;);\nDate serviceStart = (Date) dh.getCode(&quot;serviceStartTime&quot;, null);\ndh.close();\ndh = null;\n\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"I think I found the answer. Let me tell what I have done in simple words:\n\nSuppose I have two activities, activity1 and activity2 and I am navigating from activity1 to activity2 (I have done some works in activity2) and again back to activity 1 by clicking on a button in activity1. Now at this stage I wanted to go back to activity2 and I want to see my activity2 in the same condition when I last left activity2.\n\nFor the above scenario what I have done is that in the manifest I made some changes like this:\n\n&lt;activity android:name=&quot;.activity2&quot;\n          android:alwaysRetainTaskState=&quot;true&quot;      \n          android:launchMode=&quot;singleInstance&quot;&gt;\n&lt;/activity&gt;\n\n\nAnd in the activity1 on the button click event I have done like this:\n\nIntent intent = new Intent();\nintent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\nintent.setClassName(this,&quot;com.mainscreen.activity2&quot;);\nstartActivity(intent);\n\n\nAnd in activity2 on button click event I have done like this:\n\nIntent intent=new Intent();\nintent.setClassName(this,&quot;com.mainscreen.activity1&quot;);\nstartActivity(intent);\n\n\nNow what will happen is that whatever the changes we have made in the activity2 will not be lost, and we can view activity2 in the same state as we left previously.\n\nI believe this is the answer and this works fine for me. Correct me if I am wrong.\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"onSaveInstanceState() for transient data (restored in onCreate()/onRestoreInstanceState()), onPause() for persistent data (restored in onResume()).\nFrom Android technical resources:\n\nonSaveInstanceState() is called by Android if the Activity is being stopped and may be killed before it is resumed! This means it should store any state necessary to re-initialize to the same condition when the Activity is restarted. It is the counterpart to the onCreate() method, and in fact the savedInstanceState Bundle passed in to onCreate() is the same Bundle that you construct as outState in the onSaveInstanceState() method.\nonPause() and onResume() are also complimentary methods. onPause() is always called when the Activity ends, even if we instigated that (with a finish() call for example). We will use this to save the current note back to the database. Good practice is to release any resources that can be released during an onPause() as well, to take up less resources when in the passive state.\n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"Really onSaveInstanceState() is called when the Activity goes to background.\n\nQuote from the docs:\n&quot;This method is called before an activity may be killed so that when it comes back some time in the future it can restore its state.&quot;\nSource\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"To help reduce boilerplate I use the following interface and class to read/write to a Bundle for saving instance state.\n\n\n\nFirst, create an interface that will be used to annotate your instance variables:\n\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Documented\n@Retention(RetentionPolicy.RUNTIME)\n@Target({\n        ElementType.FIELD\n})\npublic @interface SaveInstance {\n\n}\n\n\nThen, create a class where reflection will be used to save values to the bundle:\n\nimport android.app.Activity;\nimport android.app.Fragment;\nimport android.os.Bundle;\nimport android.os.Parcelable;\nimport android.util.Log;\n\nimport java.io.Serializable;\nimport java.lang.reflect.Field;\n\n/**\n * Save and load fields to/from a {@link Bundle}. All fields should be annotated with {@link\n * SaveInstance}.&lt;/p&gt;\n */\npublic class Icicle {\n\n    private static final String TAG = &quot;Icicle&quot;;\n\n    /**\n     * Find all fields with the {@link SaveInstance} annotation and add them to the {@link Bundle}.\n     *\n     * @param outState\n     *         The bundle from {@link Activity#onSaveInstanceState(Bundle)} or {@link\n     *         Fragment#onSaveInstanceState(Bundle)}\n     * @param classInstance\n     *         The object to access the fields which have the {@link SaveInstance} annotation.\n     * @see #load(Bundle, Object)\n     */\n    public static void save(Bundle outState, Object classInstance) {\n        save(outState, classInstance, classInstance.getClass());\n    }\n\n    /**\n     * Find all fields with the {@link SaveInstance} annotation and add them to the {@link Bundle}.\n     *\n     * @param outState\n     *         The bundle from {@link Activity#onSaveInstanceState(Bundle)} or {@link\n     *         Fragment#onSaveInstanceState(Bundle)}\n     * @param classInstance\n     *         The object to access the fields which have the {@link SaveInstance} annotation.\n     * @param baseClass\n     *         Base class, used to get all superclasses of the instance.\n     * @see #load(Bundle, Object, Class)\n     */\n    public static void save(Bundle outState, Object classInstance, Class&lt;?&gt; baseClass) {\n        if (outState == null) {\n            return;\n        }\n        Class&lt;?&gt; clazz = classInstance.getClass();\n        while (baseClass.isAssignableFrom(clazz)) {\n            String className = clazz.getName();\n            for (Field field : clazz.getDeclaredFields()) {\n                if (field.isAnnotationPresent(SaveInstance.class)) {\n                    field.setAccessible(true);\n                    String key = className + &quot;#&quot; + field.getName();\n                    try {\n                        Object value = field.get(classInstance);\n                        if (value instanceof Parcelable) {\n                            outState.putParcelable(key, (Parcelable) value);\n                        } else if (value instanceof Serializable) {\n                            outState.putSerializable(key, (Serializable) value);\n                        }\n                    } catch (Throwable t) {\n                        Log.d(TAG, &quot;The field &apos;&quot; + key + &quot;&apos; was not added to the bundle&quot;);\n                    }\n                }\n            }\n            clazz = clazz.getSuperclass();\n        }\n    }\n\n    /**\n     * Load all saved fields that have the {@link SaveInstance} annotation.\n     *\n     * @param savedInstanceState\n     *         The saved-instance {@link Bundle} from an {@link Activity} or {@link Fragment}.\n     * @param classInstance\n     *         The object to access the fields which have the {@link SaveInstance} annotation.\n     * @see #save(Bundle, Object)\n     */\n    public static void load(Bundle savedInstanceState, Object classInstance) {\n        load(savedInstanceState, classInstance, classInstance.getClass());\n    }\n\n    /**\n     * Load all saved fields that have the {@link SaveInstance} annotation.\n     *\n     * @param savedInstanceState\n     *         The saved-instance {@link Bundle} from an {@link Activity} or {@link Fragment}.\n     * @param classInstance\n     *         The object to access the fields which have the {@link SaveInstance} annotation.\n     * @param baseClass\n     *         Base class, used to get all superclasses of the instance.\n     * @see #save(Bundle, Object, Class)\n     */\n    public static void load(Bundle savedInstanceState, Object classInstance, Class&lt;?&gt; baseClass) {\n        if (savedInstanceState == null) {\n            return;\n        }\n        Class&lt;?&gt; clazz = classInstance.getClass();\n        while (baseClass.isAssignableFrom(clazz)) {\n            String className = clazz.getName();\n            for (Field field : clazz.getDeclaredFields()) {\n                if (field.isAnnotationPresent(SaveInstance.class)) {\n                    String key = className + &quot;#&quot; + field.getName();\n                    field.setAccessible(true);\n                    try {\n                        Object fieldVal = savedInstanceState.get(key);\n                        if (fieldVal != null) {\n                            field.set(classInstance, fieldVal);\n                        }\n                    } catch (Throwable t) {\n                        Log.d(TAG, &quot;The field &apos;&quot; + key + &quot;&apos; was not retrieved from the bundle&quot;);\n                    }\n                }\n            }\n            clazz = clazz.getSuperclass();\n        }\n    }\n\n}\n\n\n\n\nExample usage:\n\npublic class MainActivity extends Activity {\n\n    @SaveInstance\n    private String foo;\n\n    @SaveInstance\n    private int bar;\n\n    @SaveInstance\n    private Intent baz;\n\n    @SaveInstance\n    private boolean qux;\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        Icicle.load(savedInstanceState, this);\n    }\n\n    @Override\n    public void onSaveInstanceState(Bundle outState) {\n        super.onSaveInstanceState(outState);\n        Icicle.save(outState, this);\n    }\n\n}\n\n\n\n\nNote: This code was adapted from a library project named AndroidAutowire which is licensed under the MIT license.\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0},{"text":"Meanwhile I do in general no more use\n\nBundle savedInstanceState &amp; Co\n\n\nThe life cycle is for most activities too complicated and not necessary.\n\nAnd Google states itself, it is NOT even reliable.\n\nMy way is to save any changes immediately in the preferences:\n\n SharedPreferences p;\n p.edit().put(..).commit()\n\n\nIn some way SharedPreferences work similar like Bundles.\nAnd naturally and at first such values have to be read from preferences.\n\nIn the case of complex data you may use SQLite instead of using preferences.\n\nWhen applying this concept, the activity just continues to use the last saved state, regardless of whether it was an initial open with reboots in between or a reopen due to the back stack.\n    ","url":"/questions/[slug]#solution13","@type":"Answer","upvoteCount":0},{"text":"To answer the original question directly. savedInstancestate is null because your Activity is never being re-created.\n\nYour Activity will only be re-created with a state bundle when:\n\n\nConfiguration changes such as changing the orientation or phone language which may requires a new activity instance to be created.\nYou return to the app from the background after the OS has destroyed the activity. \n\n\nAndroid will destroy background activities when under memory pressure or after they&apos;ve been in the background for an extended period of time.\n\nWhen testing your hello world example there are a few ways to leave and return to the Activity.\n\n\nWhen you press the back button the Activity is finished. Re-launching the app is a brand new instance. You aren&apos;t resuming from the background at all.\nWhen you press the home button or use the task switcher the Activity will go into the background. When navigating back to the application onCreate will only be called if the Activity had to be destroyed. \n\n\nIn most cases if you&apos;re just pressing home and then launching the app again the activity won&apos;t need to be re-created. It already exists in memory so onCreate() won&apos;t be called.\n\nThere is an option under Settings -&gt; Developer Options called &quot;Don&apos;t keep activities&quot;. When it&apos;s enabled Android will always destroy activities and recreate them when they&apos;re backgrounded. This is a great option to leave enabled when developing because it simulates the worst case scenario. ( A low memory device recycling your activities all the time ).\n\nThe other answers are valuable in that they teach you the correct ways to store state but I didn&apos;t feel they really answered WHY your code wasn&apos;t working in the way you expected.\n    ","url":"/questions/[slug]#solution14","@type":"Answer","upvoteCount":0},{"text":"The onSaveInstanceState(bundle) and onRestoreInstanceState(bundle) methods are useful for data persistence merely while rotating the screen (orientation change).\nThey are not even good while switching between applications (since the onSaveInstanceState() method is called but onCreate(bundle) and onRestoreInstanceState(bundle) is not invoked again.\nFor more persistence use shared preferences. read this article  \n    ","url":"/questions/[slug]#solution15","@type":"Answer","upvoteCount":0},{"text":"My problem was that I needed persistence only during the application lifetime (i.e. a single execution including starting other sub-activities within the same app and rotating the device etc). I tried various combinations of the above answers but did not get what I wanted in all situations. In the end what worked for me was to obtain a reference to the savedInstanceState during onCreate:\n\nmySavedInstanceState=savedInstanceState;\n\n\nand use that to obtain the contents of my variable when I needed it, along the lines of:\n\nif (mySavedInstanceState !=null) {\n   boolean myVariable = mySavedInstanceState.getBoolean(&quot;MyVariable&quot;);\n}\n\n\nI use onSaveInstanceStateand onRestoreInstanceState as suggested above but I guess i could also or alternatively use my method to save the variable when it changes (e.g. using putBoolean)\n    ","url":"/questions/[slug]#solution16","@type":"Answer","upvoteCount":0},{"text":"Although the accepted answer is correct, there is a faster and easier method to save the Activity state on Android using a library called Icepick. Icepick is an annotation processor that takes care of all the boilerplate code used in saving and restoring state for you. \n\nDoing something like this with Icepick:\n\nclass MainActivity extends Activity {\n  @State String username; // These will be automatically saved and restored\n  @State String password;\n  @State int age;\n\n  @Override public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    Icepick.restoreInstanceState(this, savedInstanceState);\n  }\n\n  @Override public void onSaveInstanceState(Bundle outState) {\n    super.onSaveInstanceState(outState);\n    Icepick.saveInstanceState(this, outState);\n  }\n}\n\n\nIs the same as doing this:\n\nclass MainActivity extends Activity {\n  String username;\n  String password;\n  int age;\n\n  @Override\n  public void onSaveInstanceState(Bundle savedInstanceState) {\n    super.onSaveInstanceState(savedInstanceState);\n    savedInstanceState.putString(&quot;MyString&quot;, username);\n    savedInstanceState.putString(&quot;MyPassword&quot;, password);\n    savedInstanceState.putInt(&quot;MyAge&quot;, age); \n    /* remember you would need to actually initialize these variables before putting it in the\n    Bundle */\n  }\n\n  @Override\n  public void onRestoreInstanceState(Bundle savedInstanceState) {\n    super.onRestoreInstanceState(savedInstanceState);\n    username = savedInstanceState.getString(&quot;MyString&quot;);\n    password = savedInstanceState.getString(&quot;MyPassword&quot;);\n    age = savedInstanceState.getInt(&quot;MyAge&quot;);\n  }\n}\n\n\nIcepick will work with any object that saves its state with a Bundle.\n    ","url":"/questions/[slug]#solution17","@type":"Answer","upvoteCount":0},{"text":"When an activity is created it&apos;s  onCreate() method is called.\n\n   @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n    }\n\n\nsavedInstanceState is an object of Bundle class which is null for the first time, but it contains values when it is recreated. To save Activity&apos;s state you have to override onSaveInstanceState().\n\n   @Override\n    protected void onSaveInstanceState(Bundle outState) {\n      outState.putString(&quot;key&quot;,&quot;Welcome Back&quot;)\n        super.onSaveInstanceState(outState);       //save state\n    }\n\n\nput your values in &quot;outState&quot; Bundle object like outState.putString(&quot;key&quot;,&quot;Welcome Back&quot;) and save by calling super.\nWhen activity will be destroyed it&apos;s state get saved in Bundle object and can be restored after recreation in onCreate() or onRestoreInstanceState(). Bundle received in onCreate() and onRestoreInstanceState() are same.\n\n   @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n          //restore activity&apos;s state\n         if(savedInstanceState!=null){\n          String reStoredString=savedInstanceState.getString(&quot;key&quot;);\n            }\n    }\n\n\nor\n\n  //restores activity&apos;s saved state\n @Override\n    protected void onRestoreInstanceState(Bundle savedInstanceState) {\n      String restoredMessage=savedInstanceState.getString(&quot;key&quot;);\n    }\n\n    ","url":"/questions/[slug]#solution18","@type":"Answer","upvoteCount":0},{"text":"There are basically two ways to implement this change.\n\n\nusing onSaveInstanceState() and onRestoreInstanceState().\nIn manifest android:configChanges=&quot;orientation|screenSize&quot;.\n\n\nI really do not recommend to use second method. Since in one of my experience it was causing half of the device screen black while rotating from portrait to landscape and vice versa. \n\nUsing first method mentioned above , we can persist data when orientation is changed or any config change happens.\nI know a way in which you can store any type of data inside savedInstance state object.\n\nExample: Consider a case if you want to persist Json object.\ncreate a model class with getters and setters .\n\nclass MyModel extends Serializable{\nJSONObject obj;\n\nsetJsonObject(JsonObject obj)\n{\nthis.obj=obj;\n}\n\nJSONObject getJsonObject()\nreturn this.obj;\n} \n}\n\n\nNow in your activity in onCreate and onSaveInstanceState method do the following. It will look something like this:\n\n@override\nonCreate(Bundle savedInstaceState){\nMyModel data= (MyModel)savedInstaceState.getSerializable(&quot;yourkey&quot;)\nJSONObject obj=data.getJsonObject();\n//Here you have retained JSONObject and can use.\n}\n\n\n@Override\nprotected void onSaveInstanceState(Bundle outState) {\nsuper.onSaveInstanceState(outState);\n//Obj is some json object \nMyModel dataToSave= new MyModel();\ndataToSave.setJsonObject(obj);\noustate.putSerializable(&quot;yourkey&quot;,dataToSave); \n\n}\n\n    ","url":"/questions/[slug]#solution19","@type":"Answer","upvoteCount":0},{"text":"Here is a comment from Steve Moseley&apos;s answer (by ToolmakerSteve) that puts things into perspective (in the whole onSaveInstanceState vs onPause, east cost vs west cost saga)\n\n\n  @VVK - I partially disagree. Some ways of exiting an app don&apos;t trigger\n  onSaveInstanceState (oSIS). This limits the usefulness of oSIS. Its\n  worth supporting, for minimal OS resources, but if an app wants to\n  return the user to the state they were in, no matter how the app was\n  exited, it is necessary to use a persistent storage approach instead.\n  I use onCreate to check for bundle, and if it is missing, then check\n  persistent storage. This centralizes the decision making. I can\n  recover from a crash, or back button exit or custom menu item Exit, or\n  get back to screen user was on many days later.  ToolmakerSteve Sep\n  19 &apos;15 at 10:38\n\n    ","url":"/questions/[slug]#solution20","@type":"Answer","upvoteCount":0},{"text":"Kotlin code:\n\nsave:\n\noverride fun onSaveInstanceState(outState: Bundle) {\n    super.onSaveInstanceState(outState.apply {\n        putInt(&quot;intKey&quot;, 1)\n        putString(&quot;stringKey&quot;, &quot;String Value&quot;)\n        putParcelable(&quot;parcelableKey&quot;, parcelableObject)\n    })\n}\n\n\nand then in onCreate() or onRestoreInstanceState() \n\n    val restoredInt = savedInstanceState?.getInt(&quot;intKey&quot;) ?: 1 //default int\n    val restoredString = savedInstanceState?.getString(&quot;stringKey&quot;) ?: &quot;default string&quot;\n    val restoredParcelable = savedInstanceState?.getParcelable&lt;ParcelableClass&gt;(&quot;parcelableKey&quot;) ?: ParcelableClass() //default parcelable\n\n\nAdd default values if you don&apos;t want to have Optionals\n    ","url":"/questions/[slug]#solution21","@type":"Answer","upvoteCount":0},{"text":"To get activity state data stored in onCreate(), first you have to save data in savedInstanceState by overriding SaveInstanceState(Bundle savedInstanceState) method.\n\nWhen activity destroy SaveInstanceState(Bundle savedInstanceState) method gets called and there you save data you want to save. And you get same in onCreate() when activity restart.(savedInstanceState wont be null since you have saved some data in it before activity get destroyed)\n    ","url":"/questions/[slug]#solution22","@type":"Answer","upvoteCount":0},{"text":"Kotlin\n\nYou must override onSaveInstanceState and onRestoreInstanceState to store and retrieve your variables you want to be persistent\n\nLife cycle graph\n\n\n\nStore variables\n\npublic override fun onSaveInstanceState(savedInstanceState: Bundle) {\n    super.onSaveInstanceState(savedInstanceState)\n\n    // prepare variables here\n    savedInstanceState.putInt(&quot;kInt&quot;, 10)\n    savedInstanceState.putBoolean(&quot;kBool&quot;, true)\n    savedInstanceState.putDouble(&quot;kDouble&quot;, 4.5)\n    savedInstanceState.putString(&quot;kString&quot;, &quot;Hello Kotlin&quot;)\n}\n\n\nRetrieve variables\n\npublic override fun onRestoreInstanceState(savedInstanceState: Bundle) {\n    super.onRestoreInstanceState(savedInstanceState)\n\n    val myInt = savedInstanceState.getInt(&quot;kInt&quot;)\n    val myBoolean = savedInstanceState.getBoolean(&quot;kBool&quot;)\n    val myDouble = savedInstanceState.getDouble(&quot;kDouble&quot;)\n    val myString = savedInstanceState.getString(&quot;kString&quot;)\n    // use variables here\n}\n\n    ","url":"/questions/[slug]#solution23","@type":"Answer","upvoteCount":0},{"text":"Not sure if my solution is frowned upon or not, but I use a bound service to persist ViewModel state. Whether you store it in memory in the service or persist and retrieve it from a SQLite database depends on your requirements. This is what services of any flavor do, they provide services such as maintaining application state and abstract common business logic. \n\nBecause of memory and processing constraints inherent on mobile devices, I treat Android views in a similar way to a web page. The page does not maintain state, it is purely a presentation layer component whose only purpose is to present application state and accept user input. Recent trends in web app architecture employ the use of the age-old Model, View, Controller (MVC) pattern, where the page is the View, domain data is the model, and the controller sits behind a web service. The same pattern can be employed in Android with the View being, well ... the View, the model is your domain data, and the Controller is implemented as an Android bound service. Whenever you want a view to interact with the controller, bind to it on start/resume and unbind on stop/pause.\n\nThis approach gives you the added bonus of enforcing the Separation of Concern design principle in that all of you application business logic can be moved into your service which reduces duplicated logic across multiple views and allows the view to enforce another important design principle, Single Responsibility.\n    ","url":"/questions/[slug]#solution24","@type":"Answer","upvoteCount":0},{"text":"Simple quick to solve this problem is using IcePick\n\nFirst, setup the library in app/build.gradle\n\nrepositories {\n  maven {url &quot;https://clojars.org/repo/&quot;}\n}\ndependencies {\n  compile &apos;frankiesardo:icepick:3.2.0&apos;\n  provided &apos;frankiesardo:icepick-processor:3.2.0&apos;\n}\n\n\nNow, let&apos;s check this example below how to save state in Activity\n\npublic class ExampleActivity extends Activity {\n  @State String username; // This will be automatically saved and restored\n\n  @Override public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    Icepick.restoreInstanceState(this, savedInstanceState);\n  }\n\n  @Override public void onSaveInstanceState(Bundle outState) {\n    super.onSaveInstanceState(outState);\n    Icepick.saveInstanceState(this, outState);\n  }\n}\n\n\nIt works for Activities, Fragments or any object that needs to serialize its state on a Bundle (e.g. mortar&apos;s ViewPresenters)\n\nIcepick can also generate the instance state code for custom Views:\n\nclass CustomView extends View {\n  @State int selectedPosition; // This will be automatically saved and restored\n\n  @Override public Parcelable onSaveInstanceState() {\n    return Icepick.saveInstanceState(this, super.onSaveInstanceState());\n  }\n\n  @Override public void onRestoreInstanceState(Parcelable state) {\n    super.onRestoreInstanceState(Icepick.restoreInstanceState(this, state));\n  }\n\n  // You can put the calls to Icepick into a BaseCustomView and inherit from it\n  // All Views extending this CustomView automatically have state saved/restored\n}\n\n    ","url":"/questions/[slug]#solution25","@type":"Answer","upvoteCount":0},{"text":"Now Android provides ViewModels for saving state, you should try to use that instead of saveInstanceState.\n    ","url":"/questions/[slug]#solution26","@type":"Answer","upvoteCount":0},{"text":"There is a way to make Android save the states without implementing any method. Just add this line to your Manifest in Activity declaration:\n\nandroid:configChanges=&quot;orientation|screenSize&quot;\n\n\nIt should look like this:\n\n&lt;activity\n    android:name=&quot;.activities.MyActivity&quot;\n    android:configChanges=&quot;orientation|screenSize&quot;&gt;\n&lt;/activity&gt;\n\n\nHere you can find more information about this property. \n\nIt&apos;s recommended to let Android handle this for you than the manually handling.\n    ","url":"/questions/[slug]#solution27","@type":"Answer","upvoteCount":0},{"text":"What to save and what not to?\n\nEver wondered why the text in the EditText gets saved automatically while an orientation change? Well, this answer is for you.\n\nWhen an instance of an Activity gets destroyed and the System recreates a new instance (for example, configuration change). It tries to recreate it using a set of saved data of old Activity State (instance state).\n\nInstance state is a collection of key-value pairs stored in a Bundle object.\n\n\n  By default System saves the View objects in the Bundle for example.\n\n\n\nText in EditText\nScroll position in a ListView, etc.\n\n\nIf you need another variable to be saved as a part of instance state you should OVERRIDE onSavedInstanceState(Bundle savedinstaneState) method.\n\nFor example, int currentScore in a GameActivity\n\nMore detail about the onSavedInstanceState(Bundle savedinstaneState) while saving data\n\n@Override\npublic void onSaveInstanceState(Bundle savedInstanceState) {\n    // Save the user&apos;s current game state\n    savedInstanceState.putInt(STATE_SCORE, mCurrentScore);\n\n    // Always call the superclass so it can save the view hierarchy state\n    super.onSaveInstanceState(savedInstanceState);\n}\n\n\n\n  So by mistake if you forget to call\n  super.onSaveInstanceState(savedInstanceState);the default behavior\n  will not work ie Text in EditText will not save.\n\n\nWhich to choose for restoring Activity state?\n\n onCreate(Bundle savedInstanceState)\n\n\nOR\n\nonRestoreInstanceState(Bundle savedInstanceState)\n\n\nBoth methods get the same Bundle object, so it does not really matter where you write your restoring logic. The only difference is that in onCreate(Bundle savedInstanceState) method you will have to give a null check while it is not needed in the latter case. Other answers have already code snippets. You can refer them.\n\nMore detail about the onRestoreInstanceState(Bundle savedinstaneState)\n\n@Override\npublic void onRestoreInstanceState(Bundle savedInstanceState) {\n    // Always call the superclass so it can restore the view hierarchy\n    super.onRestoreInstanceState(savedInstanceState);\n\n    // Restore state members from the saved instance\n    mCurrentScore = savedInstanceState.getInt(STATE_SCORE);\n}\n\n\n\n  Always call super.onRestoreInstanceState(savedInstanceState); so that System restore the View hierarchy by default\n\n\nBonus\n\nThe onSaveInstanceState(Bundle savedInstanceState) is invoked by the system only when the user intends to come back to the Activity. For example, you are using App X and suddenly you get a call. You move to the caller app and come back to the app X. In this case the onSaveInstanceState(Bundle savedInstanceState) method will be invoked.\n\nBut consider this if a user presses the back button. It is assumed that the user does not intend to come back to the Activity, hence in this case onSaveInstanceState(Bundle savedInstanceState) will not be invoked by the system.\nPoint being you should consider all the scenarios while saving data.\n\nRelevant links:\n\nDemo on default behavior\nAndroid Official Documentation.\n    ","url":"/questions/[slug]#solution28","@type":"Answer","upvoteCount":0},{"text":"Now it makes sense to do 2 ways in the view model.\nif you want to save the first as a saved instance:\nYou can add state parameter in view model like this\nhttps://developer.android.com/topic/libraries/architecture/viewmodel-savedstate#java\n\nor you can save variables or object in view model, in this case the view model will hold the life cycle until the activity is destroyed.\n\npublic class HelloAndroidViewModel extends ViewModel {\n   public Booelan firstInit = false;\n\n    public HelloAndroidViewModel() {\n        firstInit = false;\n    }\n    ...\n}\n\npublic class HelloAndroid extends Activity {\n\n  private TextView mTextView = null;\n  HelloAndroidViewModel viewModel = ViewModelProviders.of(this).get(HelloAndroidViewModel.class);\n  /** Called when the activity is first created. */\n  @Override\n  public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    mTextView = new TextView(this);\n\n    //Because even if the state is deleted, the data in the viewmodel will be kept because the activity does not destroy\n    if(!viewModel.firstInit){\n        viewModel.firstInit = true\n        mTextView.setText(&quot;Welcome to HelloAndroid!&quot;);\n    }else{\n       mTextView.setText(&quot;Welcome back.&quot;);\n    }\n\n    setContentView(mTextView);\n  }\n}\n\n    ","url":"/questions/[slug]#solution29","@type":"Answer","upvoteCount":0},{"text":"Kotlin Solution:\nFor custom class save in onSaveInstanceState you can be converted your class to JSON string and restore it with Gson convertion and for single String, Double, Int, Long value save and restore as following. The following example is for Fragment and Activity:\n\nFor Activity:\n\nFor put data in saveInstanceState:\n\noverride fun onSaveInstanceState(outState: Bundle) {\n        super.onSaveInstanceState(outState)\n\n        //for custom class-----\n        val gson = Gson()\n        val json = gson.toJson(your_custom_class)\n        outState.putString(&quot;CUSTOM_CLASS&quot;, json)\n\n        //for single value------\n        outState.putString(&quot;MyString&quot;, stringValue)\n        outState.putBoolean(&quot;MyBoolean&quot;, true)\n        outState.putDouble(&quot;myDouble&quot;, doubleValue)\n        outState.putInt(&quot;MyInt&quot;, intValue)\n    }\n\n\nRestore data:\n\n override fun onRestoreInstanceState(savedInstanceState: Bundle) {\n    super.onRestoreInstanceState(savedInstanceState)\n\n    //for custom class restore\n    val json = savedInstanceState?.getString(&quot;CUSTOM_CLASS&quot;)\n    if (!json!!.isEmpty()) {\n        val gson = Gson()\n        testBundle = gson.fromJson(json, Session::class.java)\n    }\n\n  //for single value restore\n\n   val myBoolean: Boolean = savedInstanceState?.getBoolean(&quot;MyBoolean&quot;)\n   val myDouble: Double = savedInstanceState?.getDouble(&quot;myDouble&quot;)\n   val myInt: Int = savedInstanceState?.getInt(&quot;MyInt&quot;)\n   val myString: String = savedInstanceState?.getString(&quot;MyString&quot;)\n }\n\n\nYou can restore it on Activity onCreate also.\n\nFor fragment:\n\nFor put class in saveInstanceState:\n\n override fun onSaveInstanceState(outState: Bundle) {\n        super.onSaveInstanceState(outState)\n        val gson = Gson()\n        val json = gson.toJson(customClass)\n        outState.putString(&quot;CUSTOM_CLASS&quot;, json)\n    }\n\n\nRestore data:\n\n override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n\n        //for custom class restore\n        if (savedInstanceState != null) {\n            val json = savedInstanceState.getString(&quot;CUSTOM_CLASS&quot;)\n            if (!json!!.isEmpty()) {\n                val gson = Gson()\n                val customClass: CustomClass = gson.fromJson(json, CustomClass::class.java)\n            }\n        }\n\n      // for single value restore\n      val myBoolean: Boolean = savedInstanceState.getBoolean(&quot;MyBoolean&quot;)\n      val myDouble: Double = savedInstanceState.getDouble(&quot;myDouble&quot;)\n      val myInt: Int = savedInstanceState.getInt(&quot;MyInt&quot;)\n      val myString: String = savedInstanceState.getString(&quot;MyString&quot;)\n    }\n\n    ","url":"/questions/[slug]#solution30","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c0d2dcb5e85faf18.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-50e201fdaa1e0fd1.js" defer=""></script><script src="/_next/static/DSpI0pSdXueTMCIVyw0q4/_buildManifest.js" defer=""></script><script src="/_next/static/DSpI0pSdXueTMCIVyw0q4/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981"><h1>How can I save an activity state using the save instance state?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/application-state">application-state</a></div></div><div class="question-content mt-5">
                
<p>I've been working on the Android SDK platform, and it is a little unclear how to save an application's state. So given this minor re-tooling of the 'Hello, Android' example:</p>
<pre class="default s-code-block"><code class="hljs language-scala"><span class="hljs-keyword">package</span> com.android.hello;

<span class="hljs-keyword">import</span> android.app.<span class="hljs-type">Activity</span>;
<span class="hljs-keyword">import</span> android.os.<span class="hljs-type">Bundle</span>;
<span class="hljs-keyword">import</span> android.widget.<span class="hljs-type">TextView</span>;

public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloAndroid</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> </span>{

  <span class="hljs-keyword">private</span> <span class="hljs-type">TextView</span> mTextView = <span class="hljs-literal">null</span>;

  <span class="hljs-comment">/** Called when the activity is first created. */</span>
  <span class="hljs-meta">@Override</span>
  public void onCreate(<span class="hljs-type">Bundle</span> savedInstanceState) {
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);

    mTextView = <span class="hljs-keyword">new</span> <span class="hljs-type">TextView</span>(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">if</span> (savedInstanceState == <span class="hljs-literal">null</span>) {
       mTextView.setText(<span class="hljs-string">"Welcome to HelloAndroid!"</span>);
    } <span class="hljs-keyword">else</span> {
       mTextView.setText(<span class="hljs-string">"Welcome back."</span>);
    }

    setContentView(mTextView);
  }
}
</code></pre>
<p>I thought it would be enough for the simplest case, but it always responds with the first message, no matter how I navigate away from the app.</p>
<p>I'm sure the solution is as simple as overriding <code>onPause</code> or something like that, but I've been poking away in the documentation for 30 minutes or so and haven't found anything obvious.</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li><li class="pagination-solution-item"><span data-id="#solution13" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">13</span></li><li class="pagination-solution-item"><span data-id="#solution14" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">14</span></li><li class="pagination-solution-item"><span data-id="#solution15" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">15</span></li><li class="pagination-solution-item"><span data-id="#solution16" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">16</span></li><li class="pagination-solution-item"><span data-id="#solution17" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">17</span></li><li class="pagination-solution-item"><span data-id="#solution18" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">18</span></li><li class="pagination-solution-item"><span data-id="#solution19" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">19</span></li><li class="pagination-solution-item"><span data-id="#solution20" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">20</span></li><li class="pagination-solution-item"><span data-id="#solution21" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">21</span></li><li class="pagination-solution-item"><span data-id="#solution22" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">22</span></li><li class="pagination-solution-item"><span data-id="#solution23" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">23</span></li><li class="pagination-solution-item"><span data-id="#solution24" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">24</span></li><li class="pagination-solution-item"><span data-id="#solution25" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">25</span></li><li class="pagination-solution-item"><span data-id="#solution26" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">26</span></li><li class="pagination-solution-item"><span data-id="#solution27" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">27</span></li><li class="pagination-solution-item"><span data-id="#solution28" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">28</span></li><li class="pagination-solution-item"><span data-id="#solution29" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">29</span></li><li class="pagination-solution-item"><span data-id="#solution30" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">30</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You need to override <code>onSaveInstanceState(Bundle savedInstanceState)</code> and write the application state values you want to change to the <code>Bundle</code> parameter like this:</p>

<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onSaveInstanceState</span>(<span class="hljs-params">Bundle savedInstanceState</span>) {
  <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onSaveInstanceState</span>(savedInstanceState);
  <span class="hljs-comment">// Save UI state changes to the savedInstanceState.</span>
  <span class="hljs-comment">// This bundle will be passed to onCreate if the process is</span>
  <span class="hljs-comment">// killed and restarted.</span>
  savedInstanceState.<span class="hljs-title function_">putBoolean</span>(<span class="hljs-string">"MyBoolean"</span>, <span class="hljs-literal">true</span>);
  savedInstanceState.<span class="hljs-title function_">putDouble</span>(<span class="hljs-string">"myDouble"</span>, <span class="hljs-number">1.9</span>);
  savedInstanceState.<span class="hljs-title function_">putInt</span>(<span class="hljs-string">"MyInt"</span>, <span class="hljs-number">1</span>);
  savedInstanceState.<span class="hljs-title function_">putString</span>(<span class="hljs-string">"MyString"</span>, <span class="hljs-string">"Welcome back to Android"</span>);
  <span class="hljs-comment">// etc.</span>
}
</code></pre>

<p>The Bundle is essentially a way of storing a NVP ("Name-Value Pair") map, and it will get passed in to <code>onCreate()</code> and also <code>onRestoreInstanceState()</code> where you would then extract the values from activity like this:</p>

<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onRestoreInstanceState</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
  <span class="hljs-built_in">super</span>.onRestoreInstanceState(savedInstanceState);
  <span class="hljs-comment">// Restore UI state from the savedInstanceState.</span>
  <span class="hljs-comment">// This bundle has also been passed to onCreate.</span>
  <span class="hljs-type">boolean</span> <span class="hljs-variable">myBoolean</span> <span class="hljs-operator">=</span> savedInstanceState.getBoolean(<span class="hljs-string">"MyBoolean"</span>);
  <span class="hljs-type">double</span> <span class="hljs-variable">myDouble</span> <span class="hljs-operator">=</span> savedInstanceState.getDouble(<span class="hljs-string">"myDouble"</span>);
  <span class="hljs-type">int</span> <span class="hljs-variable">myInt</span> <span class="hljs-operator">=</span> savedInstanceState.getInt(<span class="hljs-string">"MyInt"</span>);
  <span class="hljs-type">String</span> <span class="hljs-variable">myString</span> <span class="hljs-operator">=</span> savedInstanceState.getString(<span class="hljs-string">"MyString"</span>);
}
</code></pre>

<p>Or from a fragment.</p>

<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onViewStateRestored</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> {
    <span class="hljs-built_in">super</span>.onViewStateRestored(savedInstanceState);
    <span class="hljs-comment">// Restore UI state from the savedInstanceState.</span>
    <span class="hljs-comment">// This bundle has also been passed to onCreate.</span>
    <span class="hljs-type">boolean</span> <span class="hljs-variable">myBoolean</span> <span class="hljs-operator">=</span> savedInstanceState.getBoolean(<span class="hljs-string">"MyBoolean"</span>);
    <span class="hljs-type">double</span> <span class="hljs-variable">myDouble</span> <span class="hljs-operator">=</span> savedInstanceState.getDouble(<span class="hljs-string">"myDouble"</span>);
    <span class="hljs-type">int</span> <span class="hljs-variable">myInt</span> <span class="hljs-operator">=</span> savedInstanceState.getInt(<span class="hljs-string">"MyInt"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">myString</span> <span class="hljs-operator">=</span> savedInstanceState.getString(<span class="hljs-string">"MyString"</span>);
}
</code></pre>

<p>You would usually use this technique to store instance values for your application (selections, unsaved text, etc.).</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The <code>savedInstanceState</code> is only for saving state associated with a current instance of an Activity, for example current navigation or selection info, so that if Android destroys and recreates an Activity, it can come back as it was before.  See the documentation for <a href="http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle)" rel="noreferrer"><code>onCreate</code></a> and <a href="http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)" rel="noreferrer"><code>onSaveInstanceState</code></a></p>

<p>For more long lived state, consider using a SQLite database, a file, or preferences.  See <a href="http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState" rel="noreferrer">Saving Persistent State</a>.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Note that it is <em><strong>not</strong></em> safe to use <code>onSaveInstanceState</code> and <code>onRestoreInstanceState</code> <strong>for persistent data</strong>, according to  <em><a href="http://developer.android.com/reference/android/app/Activity.html" rel="noreferrer">the documentation on Activity</a></em>.</p>
<p>The document states (in the 'Activity Lifecycle' section):</p>
<blockquote>
<p>Note that it is important to save
persistent data in <code>onPause()</code> instead
of <code>onSaveInstanceState(Bundle)</code>
because the later is not part of the
lifecycle callbacks, so will not be
called in every situation as described
in its documentation.</p>
</blockquote>
<p>In other words, put your save/restore code for persistent data in <code>onPause()</code> and <code>onResume()</code>!</p>
<p>For further clarification, here's the <code>onSaveInstanceState()</code> documentation:</p>
<blockquote>
<p>This method is called before an activity may be killed so that when it
comes back some time in the future it can restore its state. For
example, if activity B is launched in front of activity A, and at some
point activity A is killed to reclaim resources, activity A will have
a chance to save the current state of its user interface via this
method so that when the user returns to activity A, the state of the
user interface can be restored via <code>onCreate(Bundle)</code> or
<code>onRestoreInstanceState(Bundle)</code>.</p>
</blockquote>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>My colleague wrote an article explaining application state on Android devices, including explanations on activity lifecycle and state information, how to store state information, and saving to state <code>Bundle</code> and <code>SharedPreferences</code>. <a href="http://www.eigo.co.uk/Managing-State-in-an-Android-Activity.aspx" rel="noreferrer">Take a look at it here</a>.</p>
<p>The article covers three approaches:</p>
<h2 id="store-local-variableui-control-data-for-application-lifetime-i.e.temporarily-using-an-instance-state-bundle-cq9v">Store local variable/UI control data for application lifetime (i.e. temporarily) using an instance state bundle</h2>
<pre class="default s-code-block"><code class="hljs language-java">[Code sample  Store state in state bundle]
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSaveInstanceState</span><span class="hljs-params">(Bundle savedInstanceState)</span>
{
  <span class="hljs-comment">// Store UI state to the savedInstanceState.</span>
  <span class="hljs-comment">// This bundle will be passed to onCreate on next call.  EditText txtName = (EditText)findViewById(R.id.txtName);</span>
  <span class="hljs-type">String</span> <span class="hljs-variable">strName</span> <span class="hljs-operator">=</span> txtName.getText().toString();

  <span class="hljs-type">EditText</span> <span class="hljs-variable">txtEmail</span> <span class="hljs-operator">=</span> (EditText)findViewById(R.id.txtEmail);
  <span class="hljs-type">String</span> <span class="hljs-variable">strEmail</span> <span class="hljs-operator">=</span> txtEmail.getText().toString();

  <span class="hljs-type">CheckBox</span> <span class="hljs-variable">chkTandC</span> <span class="hljs-operator">=</span> (CheckBox)findViewById(R.id.chkTandC);
  <span class="hljs-type">boolean</span> <span class="hljs-variable">blnTandC</span> <span class="hljs-operator">=</span> chkTandC.isChecked();

  savedInstanceState.putString(Name, strName);
  savedInstanceState.putString(Email, strEmail);
  savedInstanceState.putBoolean(TandC, blnTandC);

  <span class="hljs-built_in">super</span>.onSaveInstanceState(savedInstanceState);
}
</code></pre>
<h2 id="store-local-variableui-control-data-between-application-instances-i.e.permanently-using-shared-preferences-9sl9">Store local variable/UI control data between application instances (i.e. permanently) using shared preferences</h2>
<pre class="default s-code-block"><code class="hljs language-java">[Code sample  store state in SharedPreferences]
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPause</span><span class="hljs-params">()</span>
{
  <span class="hljs-built_in">super</span>.onPause();

  <span class="hljs-comment">// Store values between instances here</span>
  <span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">preferences</span> <span class="hljs-operator">=</span> getPreferences(MODE_PRIVATE);
  SharedPreferences.<span class="hljs-type">Editor</span> <span class="hljs-variable">editor</span> <span class="hljs-operator">=</span> preferences.edit();  <span class="hljs-comment">// Put the values from the UI</span>
  <span class="hljs-type">EditText</span> <span class="hljs-variable">txtName</span> <span class="hljs-operator">=</span> (EditText)findViewById(R.id.txtName);
  <span class="hljs-type">String</span> <span class="hljs-variable">strName</span> <span class="hljs-operator">=</span> txtName.getText().toString();

  <span class="hljs-type">EditText</span> <span class="hljs-variable">txtEmail</span> <span class="hljs-operator">=</span> (EditText)findViewById(R.id.txtEmail);
  <span class="hljs-type">String</span> <span class="hljs-variable">strEmail</span> <span class="hljs-operator">=</span> txtEmail.getText().toString();

  <span class="hljs-type">CheckBox</span> <span class="hljs-variable">chkTandC</span> <span class="hljs-operator">=</span> (CheckBox)findViewById(R.id.chkTandC);
  <span class="hljs-type">boolean</span> <span class="hljs-variable">blnTandC</span> <span class="hljs-operator">=</span> chkTandC.isChecked();

  editor.putString(Name, strName); <span class="hljs-comment">// value to store</span>
  editor.putString(Email, strEmail); <span class="hljs-comment">// value to store</span>
  editor.putBoolean(TandC, blnTandC); <span class="hljs-comment">// value to store</span>
  <span class="hljs-comment">// Commit to storage</span>
  editor.commit();
}
</code></pre>
<h2 id="keeping-object-instances-alive-in-memory-between-activities-within-application-lifetime-using-a-retained-non-configuration-instance-qv67">Keeping object instances alive in memory between activities within application lifetime using a retained non-configuration instance</h2>
<pre class="default s-code-block"><code class="hljs language-typescript">[<span class="hljs-title class_">Code</span> sample  store <span class="hljs-built_in">object</span> instance]
<span class="hljs-keyword">private</span> cMyClassType moInstanceOfAClass; <span class="hljs-comment">// Store the instance of an object</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">onRetainNonConfigurationInstance</span>(<span class="hljs-params"></span>)
{
  <span class="hljs-keyword">if</span> (moInstanceOfAClass != <span class="hljs-literal">null</span>) <span class="hljs-comment">// Check that the object exists</span>
      <span class="hljs-keyword">return</span>(moInstanceOfAClass);
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onRetainNonConfigurationInstance</span>();
}
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>This is a classic 'gotcha' of Android development. There are two issues here:</p>
<ul>
<li>There is a subtle Android Framework bug which greatly complicates application stack management during development, at least on legacy versions (not entirely sure if/when/how it was fixed). I'll discuss this bug below.</li>
<li>The 'normal' or intended way to manage this issue is, itself, rather complicated with the duality of onPause/onResume and onSaveInstanceState/onRestoreInstanceState</li>
</ul>
<p>Browsing across all these threads, I suspect that much of the time developers are talking about these two different issues simultaneously ... hence all the confusion and reports of "this doesn't work for me".</p>
<p>First, to clarify the 'intended' behavior: onSaveInstance and onRestoreInstance are fragile and only for transient state. The intended usage (as far as I can tell) is to handle Activity recreation when the phone is rotated (orientation change). In other words, the intended usage is when your Activity is still logically 'on top', but still must be reinstantiated by the system. The saved Bundle is not persisted outside of the process/memory/<a href="https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29" rel="noreferrer">GC</a>, so you cannot really rely on this if your activity goes to the background. Yes, perhaps your Activity's memory will survive its trip to the background and escape GC, but this is not reliable (nor is it predictable).</p>
<p>So if you have a scenario where there is meaningful 'user progress' or state that should be persisted between 'launches' of your application, the guidance is to use onPause and onResume. You must choose and prepare a persistent store yourself.</p>
<p><em>But</em> - there is a very confusing bug which complicates all of this. Details are here:</p>
<ul>
<li><p><em><a href="http://code.google.com/p/android/issues/detail?id=2373" rel="noreferrer">Activity stack behaves incorrectly during the first run of an app when started from Eclipse</a></em> (#36907463)</p>
</li>
<li><p><em><a href="https://issuetracker.google.com/issues/36911210" rel="noreferrer">Marketplace / browser app installer allows second instance off app</a></em> (#36911210)</p>
</li>
</ul>
<p>Basically, if your application is launched with the SingleTask flag, and then later on you launch it from the home screen or launcher menu, then that subsequent invocation will create a NEW task ... you'll effectively have two different instances of your app inhabiting the same stack ... which gets very strange very fast. This seems to happen when you launch your app during development (i.e. from <a href="https://en.wikipedia.org/wiki/Eclipse_%28software%29" rel="noreferrer">Eclipse</a> or <a href="https://en.wikipedia.org/wiki/IntelliJ_IDEA" rel="noreferrer">IntelliJ</a>), so developers run into this a lot. But also through some of the app store update mechanisms (so it impacts your users as well).</p>
<p>I battled through these threads for hours before I realized that my main issue was this bug, not the intended framework behavior. A great write-up and <del>workaround</del> (UPDATE: see below) seems to be from user @kaciula in this answer:</p>
<p><em><a href="https://stackoverflow.com/questions/3042420/home-key-press-behaviour/4782423#4782423">Home key press behaviour</a></em></p>
<p><strong>UPDATE June 2013</strong>: Months later, I have finally found the 'correct' solution. You don't need to manage any stateful startedApp flags yourself. You can detect this from the framework and bail appropriately. I use this near the beginning of my LauncherActivity.onCreate:</p>
<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-keyword">if</span> (!isTaskRoot()) {
    <span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> getIntent();
    <span class="hljs-type">String</span> <span class="hljs-variable">action</span> <span class="hljs-operator">=</span> intent.getAction();
    <span class="hljs-keyword">if</span> (intent.hasCategory(Intent.CATEGORY_LAUNCHER) &amp;&amp; action != <span class="hljs-literal">null</span> &amp;&amp; action.equals(Intent.ACTION_MAIN)) {
        finish();
        <span class="hljs-keyword">return</span>;
    }
}
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 6</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><code>onSaveInstanceState</code> is called when the system needs memory and kills an application. It is not called when the user just closes the application. So I think application state should also be saved in <code>onPause</code>.</p>
<p>It should be saved to some persistent storage like <code>Preferences</code> or SQLite.</p>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 7</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Both methods are useful and valid and both are best suited for different scenarios:</p>

<ol>
<li>The user terminates the application and re-opens it at a later date, but the application needs to reload data from the last session  this requires a persistent storage approach such as using SQLite.</li>
<li>The user switches application and then comes back to the original and wants to pick up where they left off -  save and restore bundle data (such as application state data) in <code>onSaveInstanceState()</code> and <code>onRestoreInstanceState()</code> is usually adequate.</li>
</ol>

<p>If you save the state data in a persistent manner, it can be reloaded in an <code>onResume()</code> or <code>onCreate()</code> (or actually on any lifecycle call). This may or may not be desired behaviour. If you store it in a bundle in an <code>InstanceState</code>, then it is transient and is only suitable for storing data for use in the same user session (I use the term session loosely) but not between sessions.</p>

<p>It is not that one approach is better than the other, like everything, it is just important to understand what behaviour you require and to select the most appropriate approach.</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 8</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Saving state is a kludge at best as far as I'm concerned. If you need to save persistent data, just use an <a href="http://en.wikipedia.org/wiki/SQLite" rel="noreferrer">SQLite</a> database. Android makes it <strong><em>SOOO</em></strong> easy.</p>

<p>Something like this:</p>

<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Date</span>;
<span class="hljs-keyword">import</span> android.<span class="hljs-property">content</span>.<span class="hljs-property">Context</span>;
<span class="hljs-keyword">import</span> android.<span class="hljs-property">database</span>.<span class="hljs-property">Cursor</span>;
<span class="hljs-keyword">import</span> android.<span class="hljs-property">database</span>.<span class="hljs-property">sqlite</span>.<span class="hljs-property">SQLiteDatabase</span>;
<span class="hljs-keyword">import</span> android.<span class="hljs-property">database</span>.<span class="hljs-property">sqlite</span>.<span class="hljs-property">SQLiteOpenHelper</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">dataHelper</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">String</span> <span class="hljs-variable constant_">DATABASE_NAME</span> = <span class="hljs-string">"autoMate.db"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final int <span class="hljs-variable constant_">DATABASE_VERSION</span> = <span class="hljs-number">1</span>;

    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Context</span> context;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">SQLiteDatabase</span> db;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">OpenHelper</span> oh ;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">dataHelper</span>(<span class="hljs-params">Context context</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span> = context;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">oh</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenHelper</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span> = oh.<span class="hljs-title function_">getWritableDatabase</span>();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">close</span>(<span class="hljs-params"></span>) {
        db.<span class="hljs-title function_">close</span>();
        oh.<span class="hljs-title function_">close</span>();
        db = <span class="hljs-literal">null</span>;
        oh = <span class="hljs-literal">null</span>;
        <span class="hljs-title class_">SQLiteDatabase</span>.<span class="hljs-title function_">releaseMemory</span>();
    }


    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setCode</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> codeName, <span class="hljs-built_in">Object</span> codeValue, <span class="hljs-built_in">String</span> codeDataType</span>) {
        <span class="hljs-title class_">Cursor</span> codeRow = db.<span class="hljs-title function_">rawQuery</span>(<span class="hljs-string">"SELECT * FROM code WHERE codeName = '"</span>+  codeName + <span class="hljs-string">"'"</span>, <span class="hljs-literal">null</span>);
        <span class="hljs-title class_">String</span> cv = <span class="hljs-string">""</span> ;

        <span class="hljs-keyword">if</span> (codeDataType.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">equals</span>(<span class="hljs-string">"long"</span>) == <span class="hljs-literal">true</span>){
            cv = <span class="hljs-title class_">String</span>.<span class="hljs-title function_">valueOf</span>(codeValue);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codeDataType.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">equals</span>(<span class="hljs-string">"int"</span>) == <span class="hljs-literal">true</span>)
        {
            cv = <span class="hljs-title class_">String</span>.<span class="hljs-title function_">valueOf</span>(codeValue);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codeDataType.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">equals</span>(<span class="hljs-string">"date"</span>) == <span class="hljs-literal">true</span>)
        {
            cv = <span class="hljs-title class_">String</span>.<span class="hljs-title function_">valueOf</span>(((<span class="hljs-title class_">Date</span>)codeValue).<span class="hljs-title function_">getTime</span>());
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codeDataType.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">equals</span>(<span class="hljs-string">"boolean"</span>) == <span class="hljs-literal">true</span>)
        {
            <span class="hljs-title class_">String</span>.<span class="hljs-title function_">valueOf</span>(codeValue);
        }
        <span class="hljs-keyword">else</span>
        {
            cv = <span class="hljs-title class_">String</span>.<span class="hljs-title function_">valueOf</span>(codeValue);
        }

        <span class="hljs-keyword">if</span>(codeRow.<span class="hljs-title function_">getCount</span>() &gt; <span class="hljs-number">0</span>) <span class="hljs-comment">//exists-- update</span>
        {
            db.<span class="hljs-title function_">execSQL</span>(<span class="hljs-string">"update code set codeValue = '"</span> + cv +
                <span class="hljs-string">"' where codeName = '"</span> + codeName + <span class="hljs-string">"'"</span>);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-comment">// does not exist, insert</span>
        {
            db.<span class="hljs-title function_">execSQL</span>(<span class="hljs-string">"INSERT INTO code (codeName, codeValue, codeDataType) VALUES("</span> +
                    <span class="hljs-string">"'"</span> + codeName + <span class="hljs-string">"',"</span> +
                    <span class="hljs-string">"'"</span> + cv + <span class="hljs-string">"',"</span> +
                    <span class="hljs-string">"'"</span> + codeDataType + <span class="hljs-string">"')"</span> );
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">getCode</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> codeName, <span class="hljs-built_in">Object</span> defaultValue</span>){

        <span class="hljs-comment">//Check to see if it already exists</span>
        <span class="hljs-title class_">String</span> codeValue = <span class="hljs-string">""</span>;
        <span class="hljs-title class_">String</span> codeDataType = <span class="hljs-string">""</span>;
        <span class="hljs-built_in">boolean</span> found = <span class="hljs-literal">false</span>;
        <span class="hljs-title class_">Cursor</span> codeRow  = db.<span class="hljs-title function_">rawQuery</span>(<span class="hljs-string">"SELECT * FROM code WHERE codeName = '"</span>+  codeName + <span class="hljs-string">"'"</span>, <span class="hljs-literal">null</span>);
        <span class="hljs-keyword">if</span> (codeRow.<span class="hljs-title function_">moveToFirst</span>())
        {
            codeValue = codeRow.<span class="hljs-title function_">getString</span>(codeRow.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">"codeValue"</span>));
            codeDataType = codeRow.<span class="hljs-title function_">getString</span>(codeRow.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">"codeDataType"</span>));
            found = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">if</span> (found == <span class="hljs-literal">false</span>)
        {
            <span class="hljs-keyword">return</span> defaultValue;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codeDataType.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">equals</span>(<span class="hljs-string">"long"</span>) == <span class="hljs-literal">true</span>)
        {
            <span class="hljs-keyword">if</span> (codeValue.<span class="hljs-title function_">equals</span>(<span class="hljs-string">""</span>) == <span class="hljs-literal">true</span>)
            {
                <span class="hljs-keyword">return</span> (long)<span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Long</span>.<span class="hljs-title function_">parseLong</span>(codeValue);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codeDataType.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">equals</span>(<span class="hljs-string">"int"</span>) == <span class="hljs-literal">true</span>)
        {
            <span class="hljs-keyword">if</span> (codeValue.<span class="hljs-title function_">equals</span>(<span class="hljs-string">""</span>) == <span class="hljs-literal">true</span>)
            {
                <span class="hljs-keyword">return</span> (int)<span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Integer</span>.<span class="hljs-built_in">parseInt</span>(codeValue);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codeDataType.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">equals</span>(<span class="hljs-string">"date"</span>) == <span class="hljs-literal">true</span>)
        {
            <span class="hljs-keyword">if</span> (codeValue.<span class="hljs-title function_">equals</span>(<span class="hljs-string">""</span>) == <span class="hljs-literal">true</span>)
            {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-title class_">Long</span>.<span class="hljs-title function_">parseLong</span>(codeValue));
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codeDataType.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">equals</span>(<span class="hljs-string">"boolean"</span>) == <span class="hljs-literal">true</span>)
        {
            <span class="hljs-keyword">if</span> (codeValue.<span class="hljs-title function_">equals</span>(<span class="hljs-string">""</span>) == <span class="hljs-literal">true</span>)
            {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Boolean</span>.<span class="hljs-title function_">parseBoolean</span>(codeValue);
        }
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-keyword">return</span> (<span class="hljs-title class_">String</span>)codeValue;
        }
    }


    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OpenHelper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">SQLiteOpenHelper</span> {

        <span class="hljs-title class_">OpenHelper</span>(<span class="hljs-title class_">Context</span> context) {
            <span class="hljs-variable language_">super</span>(context, <span class="hljs-variable constant_">DATABASE_NAME</span>, <span class="hljs-literal">null</span>, <span class="hljs-variable constant_">DATABASE_VERSION</span>);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">SQLiteDatabase db</span>) {
            db.<span class="hljs-title function_">execSQL</span>(<span class="hljs-string">"CREATE TABLE IF  NOT EXISTS code"</span> +
            <span class="hljs-string">"(id INTEGER PRIMARY KEY, codeName TEXT, codeValue TEXT, codeDataType TEXT)"</span>);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onUpgrade</span>(<span class="hljs-params">SQLiteDatabase db, int oldVersion, int newVersion</span>) {
        }
    }
}
</code></pre>

<p>A simple call after that</p>

<pre class="default s-code-block"><code class="hljs language-coffeescript">dataHelper dh = <span class="hljs-keyword">new</span> dataHelper(getBaseContext());
<span class="hljs-built_in">String</span> status = (<span class="hljs-built_in">String</span>) dh.getCode(<span class="hljs-string">"appState"</span>, <span class="hljs-string">"safetyDisabled"</span>);
<span class="hljs-built_in">Date</span> serviceStart = (<span class="hljs-built_in">Date</span>) dh.getCode(<span class="hljs-string">"serviceStartTime"</span>, <span class="hljs-literal">null</span>);
dh.close();
dh = <span class="hljs-literal">null</span>;
</code></pre>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 9</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I think I found the answer. Let me tell what I have done in simple words:</p>

<p>Suppose I have two activities, activity1 and activity2 and I am navigating from activity1 to activity2 (I have done some works in activity2) and again back to activity 1 by clicking on a button in activity1. Now at this stage I wanted to go back to activity2 and I want to see my activity2 in the same condition when I last left activity2.</p>

<p>For the above scenario what I have done is that in the manifest I made some changes like this:</p>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">".activity2"</span>
          <span class="hljs-attr">android:alwaysRetainTaskState</span>=<span class="hljs-string">"true"</span>      
          <span class="hljs-attr">android:launchMode</span>=<span class="hljs-string">"singleInstance"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>
</code></pre>

<p>And in the activity1 on the button click event I have done like this:</p>

<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>();
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
intent.setClassName(<span class="hljs-built_in">this</span>,<span class="hljs-string">"com.mainscreen.activity2"</span>);
startActivity(intent);
</code></pre>

<p>And in activity2 on button click event I have done like this:</p>

<pre class="default s-code-block"><code class="hljs language-csharp">Intent intent=<span class="hljs-keyword">new</span> Intent();
intent.setClassName(<span class="hljs-keyword">this</span>,<span class="hljs-string">"com.mainscreen.activity1"</span>);
startActivity(intent);
</code></pre>

<p>Now what will happen is that whatever the changes we have made in the activity2 will not be lost, and we can view activity2 in the same state as we left previously.</p>

<p>I believe this is the answer and this works fine for me. Correct me if I am wrong.</p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 10</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><code>onSaveInstanceState()</code> for transient data (restored in <code>onCreate()</code>/<code>onRestoreInstanceState()</code>), <code>onPause()</code> for persistent data (restored in <code>onResume()</code>).
From Android technical resources:</p>
<blockquote>
<p><strong>onSaveInstanceState()</strong> is called by Android if the Activity is being stopped and may be killed before it is resumed! This means it should store any state necessary to re-initialize to the same condition when the Activity is restarted. It is the counterpart to the onCreate() method, and in fact the savedInstanceState Bundle passed in to onCreate() is the same Bundle that you construct as outState in the onSaveInstanceState() method.</p>
<p><strong>onPause()</strong> and <strong>onResume()</strong> are also complimentary methods. onPause() is always called when the Activity ends, even if we instigated that (with a finish() call for example). We will use this to save the current note back to the database. Good practice is to release any resources that can be released during an onPause() as well, to take up less resources when in the passive state.</p>
</blockquote>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 11</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Really <code>onSaveInstanceState()</code> is called when the Activity goes to background.</p>

<p>Quote from the docs:
"This method is called before an activity may be killed so that when it comes back some time in the future it can restore its state."
<a href="https://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)" rel="noreferrer">Source</a></p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 12</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>To help reduce boilerplate I use the following <code>interface</code> and <code>class</code> to read/write to a <code>Bundle</code> for saving instance state.</p>

<hr>

<p>First, create an interface that will be used to annotate your instance variables:</p>

<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-keyword">import</span> java.lang.annotation.Documented;
<span class="hljs-keyword">import</span> java.lang.annotation.ElementType;
<span class="hljs-keyword">import</span> java.lang.annotation.Retention;
<span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;
<span class="hljs-keyword">import</span> java.lang.annotation.Target;

<span class="hljs-meta">@Documented</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target({
        ElementType.FIELD
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> SaveInstance {

}
</code></pre>

<p>Then, create a class where reflection will be used to save values to the bundle:</p>

<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-keyword">import</span> android.<span class="hljs-property">app</span>.<span class="hljs-property">Activity</span>;
<span class="hljs-keyword">import</span> android.<span class="hljs-property">app</span>.<span class="hljs-property">Fragment</span>;
<span class="hljs-keyword">import</span> android.<span class="hljs-property">os</span>.<span class="hljs-property">Bundle</span>;
<span class="hljs-keyword">import</span> android.<span class="hljs-property">os</span>.<span class="hljs-property">Parcelable</span>;
<span class="hljs-keyword">import</span> android.<span class="hljs-property">util</span>.<span class="hljs-property">Log</span>;

<span class="hljs-keyword">import</span> java.<span class="hljs-property">io</span>.<span class="hljs-property">Serializable</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">lang</span>.<span class="hljs-property">reflect</span>.<span class="hljs-property">Field</span>;

<span class="hljs-comment">/**
 * Save and load fields to/from a {<span class="hljs-doctag">@link</span> Bundle}. All fields should be annotated with {<span class="hljs-doctag">@link</span>
 * SaveInstance}.&lt;/p&gt;
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Icicle</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">String</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"Icicle"</span>;

    <span class="hljs-comment">/**
     * Find all fields with the {<span class="hljs-doctag">@link</span> SaveInstance} annotation and add them to the {<span class="hljs-doctag">@link</span> Bundle}.
     *
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">outState</span>
     *         The bundle from {<span class="hljs-doctag">@link</span> Activity#onSaveInstanceState(Bundle)} or {<span class="hljs-doctag">@link</span>
     *         Fragment#onSaveInstanceState(Bundle)}
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">classInstance</span>
     *         The object to access the fields which have the {<span class="hljs-doctag">@link</span> SaveInstance} annotation.
     * <span class="hljs-doctag">@see</span> #load(Bundle, Object)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params">Bundle outState, <span class="hljs-built_in">Object</span> classInstance</span>) {
        <span class="hljs-title function_">save</span>(outState, classInstance, classInstance.<span class="hljs-title function_">getClass</span>());
    }

    <span class="hljs-comment">/**
     * Find all fields with the {<span class="hljs-doctag">@link</span> SaveInstance} annotation and add them to the {<span class="hljs-doctag">@link</span> Bundle}.
     *
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">outState</span>
     *         The bundle from {<span class="hljs-doctag">@link</span> Activity#onSaveInstanceState(Bundle)} or {<span class="hljs-doctag">@link</span>
     *         Fragment#onSaveInstanceState(Bundle)}
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">classInstance</span>
     *         The object to access the fields which have the {<span class="hljs-doctag">@link</span> SaveInstance} annotation.
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">baseClass</span>
     *         Base class, used to get all superclasses of the instance.
     * <span class="hljs-doctag">@see</span> #load(Bundle, Object, Class)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params">Bundle outState, <span class="hljs-built_in">Object</span> classInstance, Class&lt;?&gt; baseClass</span>) {
        <span class="hljs-keyword">if</span> (outState == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-title class_">Class</span>&lt;?&gt; clazz = classInstance.<span class="hljs-title function_">getClass</span>();
        <span class="hljs-keyword">while</span> (baseClass.<span class="hljs-title function_">isAssignableFrom</span>(clazz)) {
            <span class="hljs-title class_">String</span> className = clazz.<span class="hljs-title function_">getName</span>();
            <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Field</span> field : clazz.<span class="hljs-title function_">getDeclaredFields</span>()) {
                <span class="hljs-keyword">if</span> (field.<span class="hljs-title function_">isAnnotationPresent</span>(<span class="hljs-title class_">SaveInstance</span>.<span class="hljs-property">class</span>)) {
                    field.<span class="hljs-title function_">setAccessible</span>(<span class="hljs-literal">true</span>);
                    <span class="hljs-title class_">String</span> key = className + <span class="hljs-string">"#"</span> + field.<span class="hljs-title function_">getName</span>();
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-title class_">Object</span> value = field.<span class="hljs-title function_">get</span>(classInstance);
                        <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Parcelable</span>) {
                            outState.<span class="hljs-title function_">putParcelable</span>(key, (<span class="hljs-title class_">Parcelable</span>) value);
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Serializable</span>) {
                            outState.<span class="hljs-title function_">putSerializable</span>(key, (<span class="hljs-title class_">Serializable</span>) value);
                        }
                    } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Throwable</span> t) {
                        <span class="hljs-title class_">Log</span>.<span class="hljs-title function_">d</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">"The field '"</span> + key + <span class="hljs-string">"' was not added to the bundle"</span>);
                    }
                }
            }
            clazz = clazz.<span class="hljs-title function_">getSuperclass</span>();
        }
    }

    <span class="hljs-comment">/**
     * Load all saved fields that have the {<span class="hljs-doctag">@link</span> SaveInstance} annotation.
     *
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">savedInstanceState</span>
     *         The saved-instance {<span class="hljs-doctag">@link</span> Bundle} from an {<span class="hljs-doctag">@link</span> Activity} or {<span class="hljs-doctag">@link</span> Fragment}.
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">classInstance</span>
     *         The object to access the fields which have the {<span class="hljs-doctag">@link</span> SaveInstance} annotation.
     * <span class="hljs-doctag">@see</span> #save(Bundle, Object)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">load</span>(<span class="hljs-params">Bundle savedInstanceState, <span class="hljs-built_in">Object</span> classInstance</span>) {
        <span class="hljs-title function_">load</span>(savedInstanceState, classInstance, classInstance.<span class="hljs-title function_">getClass</span>());
    }

    <span class="hljs-comment">/**
     * Load all saved fields that have the {<span class="hljs-doctag">@link</span> SaveInstance} annotation.
     *
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">savedInstanceState</span>
     *         The saved-instance {<span class="hljs-doctag">@link</span> Bundle} from an {<span class="hljs-doctag">@link</span> Activity} or {<span class="hljs-doctag">@link</span> Fragment}.
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">classInstance</span>
     *         The object to access the fields which have the {<span class="hljs-doctag">@link</span> SaveInstance} annotation.
     * <span class="hljs-doctag">@param</span> <span class="hljs-variable">baseClass</span>
     *         Base class, used to get all superclasses of the instance.
     * <span class="hljs-doctag">@see</span> #save(Bundle, Object, Class)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">load</span>(<span class="hljs-params">Bundle savedInstanceState, <span class="hljs-built_in">Object</span> classInstance, Class&lt;?&gt; baseClass</span>) {
        <span class="hljs-keyword">if</span> (savedInstanceState == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-title class_">Class</span>&lt;?&gt; clazz = classInstance.<span class="hljs-title function_">getClass</span>();
        <span class="hljs-keyword">while</span> (baseClass.<span class="hljs-title function_">isAssignableFrom</span>(clazz)) {
            <span class="hljs-title class_">String</span> className = clazz.<span class="hljs-title function_">getName</span>();
            <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Field</span> field : clazz.<span class="hljs-title function_">getDeclaredFields</span>()) {
                <span class="hljs-keyword">if</span> (field.<span class="hljs-title function_">isAnnotationPresent</span>(<span class="hljs-title class_">SaveInstance</span>.<span class="hljs-property">class</span>)) {
                    <span class="hljs-title class_">String</span> key = className + <span class="hljs-string">"#"</span> + field.<span class="hljs-title function_">getName</span>();
                    field.<span class="hljs-title function_">setAccessible</span>(<span class="hljs-literal">true</span>);
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-title class_">Object</span> fieldVal = savedInstanceState.<span class="hljs-title function_">get</span>(key);
                        <span class="hljs-keyword">if</span> (fieldVal != <span class="hljs-literal">null</span>) {
                            field.<span class="hljs-title function_">set</span>(classInstance, fieldVal);
                        }
                    } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Throwable</span> t) {
                        <span class="hljs-title class_">Log</span>.<span class="hljs-title function_">d</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">"The field '"</span> + key + <span class="hljs-string">"' was not retrieved from the bundle"</span>);
                    }
                }
            }
            clazz = clazz.<span class="hljs-title function_">getSuperclass</span>();
        }
    }

}
</code></pre>

<hr>

<h2>Example usage:</h2>

<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Activity</span> {

    <span class="hljs-meta">@SaveInstance</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> foo;

    <span class="hljs-meta">@SaveInstance</span>
    <span class="hljs-keyword">private</span> int bar;

    <span class="hljs-meta">@SaveInstance</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Intent</span> baz;

    <span class="hljs-meta">@SaveInstance</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> qux;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">Bundle savedInstanceState</span>) {
        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onCreate</span>(savedInstanceState);
        <span class="hljs-title class_">Icicle</span>.<span class="hljs-title function_">load</span>(savedInstanceState, <span class="hljs-variable language_">this</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onSaveInstanceState</span>(<span class="hljs-params">Bundle outState</span>) {
        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onSaveInstanceState</span>(outState);
        <span class="hljs-title class_">Icicle</span>.<span class="hljs-title function_">save</span>(outState, <span class="hljs-variable language_">this</span>);
    }

}
</code></pre>

<hr>

<p><strong>Note:</strong> This code was adapted from a library project named <a href="https://github.com/CardinalNow/AndroidAutowire">AndroidAutowire</a> which is licensed under the <a href="https://raw.githubusercontent.com/CardinalNow/AndroidAutowire/master/LICENSE">MIT license</a>.</p>
    </div></div></div></div><div id="solution13" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 13</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Meanwhile I do in general no more use</p>

<pre class="default s-code-block"><code class="hljs language-undefined">Bundle savedInstanceState &amp; Co
</code></pre>

<p>The life cycle is for most activities too complicated and not necessary.</p>

<p>And Google states itself, it is NOT even reliable.</p>

<p>My way is to save any changes immediately in the preferences:</p>

<pre class="default s-code-block"><code class="hljs language-scss"> SharedPreferences <span class="hljs-selector-tag">p</span>;
 <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.edit</span>()<span class="hljs-selector-class">.put</span>(..)<span class="hljs-selector-class">.commit</span>()
</code></pre>

<p>In some way SharedPreferences work similar like Bundles.
And naturally and at first such values have to be read from preferences.</p>

<p>In the case of complex data you may use SQLite instead of using preferences.</p>

<p>When applying this concept, the activity just continues to use the last saved state, regardless of whether it was an initial open with reboots in between or a reopen due to the back stack.</p>
    </div></div></div></div><div id="solution14" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 14</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>To answer the original question directly. savedInstancestate is null because your Activity is never being re-created.</p>

<p>Your Activity will only be re-created with a state bundle when:</p>

<ul>
<li>Configuration changes such as changing the orientation or phone language which may requires a new activity instance to be created.</li>
<li>You return to the app from the background after the OS has destroyed the activity. </li>
</ul>

<p>Android will destroy background activities when under memory pressure or after they've been in the background for an extended period of time.</p>

<p>When testing your hello world example there are a few ways to leave and return to the Activity.</p>

<ul>
<li>When you press the back button the Activity is finished. Re-launching the app is a brand new instance. You aren't resuming from the background at all.</li>
<li>When you press the home button or use the task switcher the Activity will go into the background. When navigating back to the application onCreate will only be called if the Activity had to be destroyed. </li>
</ul>

<p>In most cases if you're just pressing home and then launching the app again the activity won't need to be re-created. It already exists in memory so onCreate() won't be called.</p>

<p>There is an option under Settings -&gt; Developer Options called "Don't keep activities". When it's enabled Android will always destroy activities and recreate them when they're backgrounded. This is a great option to leave enabled when developing because it simulates the worst case scenario. ( A low memory device recycling your activities all the time ).</p>

<p>The other answers are valuable in that they teach you the correct ways to store state but I didn't feel they really answered WHY your code wasn't working in the way you expected.</p>
    </div></div></div></div><div id="solution15" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 15</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The <code>onSaveInstanceState(bundle)</code> and <code>onRestoreInstanceState(bundle)</code> methods are useful for data persistence merely while rotating the screen (orientation change).<br>
They are not even good while switching between applications (since the <code>onSaveInstanceState()</code> method is called but <code>onCreate(bundle)</code> and <code>onRestoreInstanceState(bundle)</code> is not invoked again.<br>
For more persistence use shared preferences. <a href="http://www.eigo.co.uk/Managing-State-in-an-Android-Activity.aspx">read this article</a>  </p>
    </div></div></div></div><div id="solution16" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 16</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>My problem was that I needed persistence only during the application lifetime (i.e. a single execution including starting other sub-activities within the same app and rotating the device etc). I tried various combinations of the above answers but did not get what I wanted in all situations. In the end what worked for me was to obtain a reference to the savedInstanceState during onCreate:</p>

<pre class="default s-code-block"><code class="hljs language-ini"><span class="hljs-attr">mySavedInstanceState</span>=savedInstanceState<span class="hljs-comment">;</span>
</code></pre>

<p>and use that to obtain the contents of my variable when I needed it, along the lines of:</p>

<pre class="default s-code-block"><code class="hljs language-java"><span class="hljs-keyword">if</span> (mySavedInstanceState !=<span class="hljs-literal">null</span>) {
   <span class="hljs-type">boolean</span> <span class="hljs-variable">myVariable</span> <span class="hljs-operator">=</span> mySavedInstanceState.getBoolean(<span class="hljs-string">"MyVariable"</span>);
}
</code></pre>

<p>I use <code>onSaveInstanceState</code>and <code>onRestoreInstanceState</code> as suggested above but I guess i could also or alternatively use my method to save the variable when it changes (e.g. using <code>putBoolean</code>)</p>
    </div></div></div></div><div id="solution17" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 17</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Although the accepted answer is correct, there is a faster and easier method to save the Activity state on Android using a library called <a href="https://github.com/frankiesardo/icepick">Icepick</a>. Icepick is an annotation processor that takes care of all the boilerplate code used in saving and restoring state for you. </p>

<p>Doing something like this with Icepick:</p>

<pre class="default s-code-block"><code class="hljs language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> </span>{
  <span class="hljs-meta">@State</span> <span class="hljs-type">String</span> username; <span class="hljs-comment">// These will be automatically saved and restored</span>
  <span class="hljs-meta">@State</span> <span class="hljs-type">String</span> password;
  <span class="hljs-meta">@State</span> int age;

  <span class="hljs-meta">@Override</span> public void onCreate(<span class="hljs-type">Bundle</span> savedInstanceState) {
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
    <span class="hljs-type">Icepick</span>.restoreInstanceState(<span class="hljs-keyword">this</span>, savedInstanceState);
  }

  <span class="hljs-meta">@Override</span> public void onSaveInstanceState(<span class="hljs-type">Bundle</span> outState) {
    <span class="hljs-keyword">super</span>.onSaveInstanceState(outState);
    <span class="hljs-type">Icepick</span>.saveInstanceState(<span class="hljs-keyword">this</span>, outState);
  }
}
</code></pre>

<p>Is the same as doing this:</p>

<pre class="default s-code-block"><code class="hljs language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> </span>{
  <span class="hljs-type">String</span> username;
  <span class="hljs-type">String</span> password;
  int age;

  <span class="hljs-meta">@Override</span>
  public void onSaveInstanceState(<span class="hljs-type">Bundle</span> savedInstanceState) {
    <span class="hljs-keyword">super</span>.onSaveInstanceState(savedInstanceState);
    savedInstanceState.putString(<span class="hljs-string">"MyString"</span>, username);
    savedInstanceState.putString(<span class="hljs-string">"MyPassword"</span>, password);
    savedInstanceState.putInt(<span class="hljs-string">"MyAge"</span>, age); 
    <span class="hljs-comment">/* remember you would need to actually initialize these variables before putting it in the
    Bundle */</span>
  }

  <span class="hljs-meta">@Override</span>
  public void onRestoreInstanceState(<span class="hljs-type">Bundle</span> savedInstanceState) {
    <span class="hljs-keyword">super</span>.onRestoreInstanceState(savedInstanceState);
    username = savedInstanceState.getString(<span class="hljs-string">"MyString"</span>);
    password = savedInstanceState.getString(<span class="hljs-string">"MyPassword"</span>);
    age = savedInstanceState.getInt(<span class="hljs-string">"MyAge"</span>);
  }
}
</code></pre>

<p>Icepick will work with any object that saves its state with a <code>Bundle</code>.</p>
    </div></div></div></div><div id="solution18" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 18</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>When an activity is created it's  onCreate() method is called.</p>

<pre class="default s-code-block"><code class="hljs language-typescript">   <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">Bundle savedInstanceState</span>) {
        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onCreate</span>(savedInstanceState);
    }
</code></pre>

<p>savedInstanceState is an object of Bundle class which is null for the first time, but it contains values when it is recreated. To save Activity's state you have to override onSaveInstanceState().</p>

<pre class="default s-code-block"><code class="hljs language-typescript">   <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onSaveInstanceState</span>(<span class="hljs-params">Bundle outState</span>) {
      outState.<span class="hljs-title function_">putString</span>(<span class="hljs-string">"key"</span>,<span class="hljs-string">"Welcome Back"</span>)
        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onSaveInstanceState</span>(outState);       <span class="hljs-comment">//save state</span>
    }
</code></pre>

<p>put your values in "outState" Bundle object like outState.putString("key","Welcome Back") and save by calling super.
When activity will be destroyed it's state get saved in Bundle object and can be restored after recreation in onCreate() or onRestoreInstanceState(). Bundle received in onCreate() and onRestoreInstanceState() are same.</p>

<pre class="default s-code-block"><code class="hljs language-typescript">   <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">Bundle savedInstanceState</span>) {
        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onCreate</span>(savedInstanceState);
        <span class="hljs-title function_">setContentView</span>(R.<span class="hljs-property">layout</span>.<span class="hljs-property">activity_main</span>);

          <span class="hljs-comment">//restore activity's state</span>
         <span class="hljs-keyword">if</span>(savedInstanceState!=<span class="hljs-literal">null</span>){
          <span class="hljs-title class_">String</span> reStoredString=savedInstanceState.<span class="hljs-title function_">getString</span>(<span class="hljs-string">"key"</span>);
            }
    }
</code></pre>

<p>or</p>

<pre class="default s-code-block"><code class="hljs language-typescript">  <span class="hljs-comment">//restores activity's saved state</span>
 <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onRestoreInstanceState</span>(<span class="hljs-params">Bundle savedInstanceState</span>) {
      <span class="hljs-title class_">String</span> restoredMessage=savedInstanceState.<span class="hljs-title function_">getString</span>(<span class="hljs-string">"key"</span>);
    }
</code></pre>
    </div></div></div></div><div id="solution19" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 19</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are basically two ways to implement this change.</p>

<ol>
<li>using <code>onSaveInstanceState()</code> and <code>onRestoreInstanceState()</code>.</li>
<li>In manifest <code>android:configChanges="orientation|screenSize"</code>.</li>
</ol>

<p>I really do not recommend to use second method. Since in one of my experience it was causing half of the device screen black while rotating from portrait to landscape and vice versa. </p>

<p>Using first method mentioned above , we can persist data when orientation is changed or any config change happens.
I know a way in which you can store any type of data inside savedInstance state object.</p>

<p><em>Example: Consider a case if you want to persist Json object.
create a model class with getters and setters .</em></p>

<pre class="default s-code-block"><code class="hljs language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Serializable</span></span>{
<span class="hljs-type">JSONObject</span> obj;

setJsonObject(<span class="hljs-type">JsonObject</span> obj)
{
<span class="hljs-keyword">this</span>.obj=obj;
}

<span class="hljs-type">JSONObject</span> getJsonObject()
<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.obj;
} 
}
</code></pre>

<p><em>Now in your activity in onCreate and onSaveInstanceState method do the following. It will look something like this:</em></p>

<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-meta">@override</span>
<span class="hljs-title function_">onCreate</span>(<span class="hljs-params">Bundle savedInstaceState</span>){
<span class="hljs-title class_">MyModel</span> data= (<span class="hljs-title class_">MyModel</span>)savedInstaceState.<span class="hljs-title function_">getSerializable</span>(<span class="hljs-string">"yourkey"</span>)
<span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span> obj=data.<span class="hljs-title function_">getJsonObject</span>();
<span class="hljs-comment">//Here you have retained JSONObject and can use.</span>
}


<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onSaveInstanceState</span>(<span class="hljs-params">Bundle outState</span>) {
<span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onSaveInstanceState</span>(outState);
<span class="hljs-comment">//Obj is some json object </span>
<span class="hljs-title class_">MyModel</span> dataToSave= <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyModel</span>();
dataToSave.<span class="hljs-title function_">setJsonObject</span>(obj);
oustate.<span class="hljs-title function_">putSerializable</span>(<span class="hljs-string">"yourkey"</span>,dataToSave); 

}
</code></pre>
    </div></div></div></div><div id="solution20" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 20</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Here is a comment from <strong>Steve Moseley</strong>'s answer (by <strong>ToolmakerSteve</strong>) that puts things into perspective (in the whole onSaveInstanceState vs onPause, east cost vs west cost saga)</p>

<blockquote>
  <p>@VVK - I partially disagree. Some ways of exiting an app don't trigger
  onSaveInstanceState (oSIS). This limits the usefulness of oSIS. Its
  worth supporting, for minimal OS resources, but if an app wants to
  return the user to the state they were in, no matter how the app was
  exited, it is necessary to use a persistent storage approach instead.
  <strong>I use onCreate to check for bundle, and if it is missing, then check</strong>
  <strong>persistent storage.</strong> This centralizes the decision making. I can
  recover from a crash, or back button exit or custom menu item Exit, or
  get back to screen user was on many days later.  ToolmakerSteve Sep
  19 '15 at 10:38</p>
</blockquote>
    </div></div></div></div><div id="solution21" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 21</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Kotlin code:</p>

<p>save:</p>

<pre class="default s-code-block"><code class="hljs language-kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSaveInstanceState</span><span class="hljs-params">(outState: <span class="hljs-type">Bundle</span>)</span></span> {
    <span class="hljs-keyword">super</span>.onSaveInstanceState(outState.apply {
        putInt(<span class="hljs-string">"intKey"</span>, <span class="hljs-number">1</span>)
        putString(<span class="hljs-string">"stringKey"</span>, <span class="hljs-string">"String Value"</span>)
        putParcelable(<span class="hljs-string">"parcelableKey"</span>, parcelableObject)
    })
}
</code></pre>

<p>and then in <code>onCreate()</code> or <code>onRestoreInstanceState()</code> </p>

<pre class="default s-code-block"><code class="hljs language-java">    <span class="hljs-type">val</span> <span class="hljs-variable">restoredInt</span> <span class="hljs-operator">=</span> savedInstanceState?.getInt(<span class="hljs-string">"intKey"</span>) ?: <span class="hljs-number">1</span> <span class="hljs-comment">//default int</span>
    <span class="hljs-type">val</span> <span class="hljs-variable">restoredString</span> <span class="hljs-operator">=</span> savedInstanceState?.getString(<span class="hljs-string">"stringKey"</span>) ?: <span class="hljs-string">"default string"</span>
    <span class="hljs-type">val</span> <span class="hljs-variable">restoredParcelable</span> <span class="hljs-operator">=</span> savedInstanceState?.getParcelable&lt;ParcelableClass&gt;(<span class="hljs-string">"parcelableKey"</span>) ?: ParcelableClass() <span class="hljs-comment">//default parcelable</span>
</code></pre>

<p>Add default values if you don't want to have Optionals</p>
    </div></div></div></div><div id="solution22" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 22</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>To get activity state data stored in <code>onCreate()</code>, first you have to save data in savedInstanceState by overriding <code>SaveInstanceState(Bundle savedInstanceState)</code> method.</p>

<p>When activity destroy <code>SaveInstanceState(Bundle savedInstanceState)</code> method gets called and there you save data you want to save. And you get same in <code>onCreate()</code> when activity restart.(savedInstanceState wont be null since you have saved some data in it before activity get destroyed)</p>
    </div></div></div></div><div id="solution23" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 23</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h1>Kotlin</h1>

<p>You must override <code>onSaveInstanceState</code> and <code>onRestoreInstanceState</code> to store and retrieve your variables you want to be persistent</p>

<h3>Life cycle graph</h3>

<p><img src="https://i.stack.imgur.com/Ts2F1.png"></p>

<h3>Store variables</h3>

<pre class="default s-code-block"><code class="hljs language-kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSaveInstanceState</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>)</span></span> {
    <span class="hljs-keyword">super</span>.onSaveInstanceState(savedInstanceState)

    <span class="hljs-comment">// prepare variables here</span>
    savedInstanceState.putInt(<span class="hljs-string">"kInt"</span>, <span class="hljs-number">10</span>)
    savedInstanceState.putBoolean(<span class="hljs-string">"kBool"</span>, <span class="hljs-literal">true</span>)
    savedInstanceState.putDouble(<span class="hljs-string">"kDouble"</span>, <span class="hljs-number">4.5</span>)
    savedInstanceState.putString(<span class="hljs-string">"kString"</span>, <span class="hljs-string">"Hello Kotlin"</span>)
}
</code></pre>

<h3>Retrieve variables</h3>

<pre class="default s-code-block"><code class="hljs language-kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRestoreInstanceState</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>)</span></span> {
    <span class="hljs-keyword">super</span>.onRestoreInstanceState(savedInstanceState)

    <span class="hljs-keyword">val</span> myInt = savedInstanceState.getInt(<span class="hljs-string">"kInt"</span>)
    <span class="hljs-keyword">val</span> myBoolean = savedInstanceState.getBoolean(<span class="hljs-string">"kBool"</span>)
    <span class="hljs-keyword">val</span> myDouble = savedInstanceState.getDouble(<span class="hljs-string">"kDouble"</span>)
    <span class="hljs-keyword">val</span> myString = savedInstanceState.getString(<span class="hljs-string">"kString"</span>)
    <span class="hljs-comment">// use variables here</span>
}
</code></pre>
    </div></div></div></div><div id="solution24" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 24</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Not sure if my solution is frowned upon or not, but I use a bound service to persist ViewModel state. Whether you store it in memory in the service or persist and retrieve it from a SQLite database depends on your requirements. This is what services of any flavor do, they provide services such as maintaining application state and abstract common business logic. </p>

<p>Because of memory and processing constraints inherent on mobile devices, I treat Android views in a similar way to a web page. The page does not maintain state, it is purely a presentation layer component whose only purpose is to present application state and accept user input. Recent trends in web app architecture employ the use of the age-old Model, View, Controller (MVC) pattern, where the page is the View, domain data is the model, and the controller sits behind a web service. The same pattern can be employed in Android with the View being, well ... the View, the model is your domain data, and the Controller is implemented as an Android bound service. Whenever you want a view to interact with the controller, bind to it on start/resume and unbind on stop/pause.</p>

<p>This approach gives you the added bonus of enforcing the Separation of Concern design principle in that all of you application business logic can be moved into your service which reduces duplicated logic across multiple views and allows the view to enforce another important design principle, Single Responsibility.</p>
    </div></div></div></div><div id="solution25" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 25</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Simple quick to solve this problem is using <a href="https://github.com/frankiesardo/icepick" rel="noreferrer">IcePick</a></p>

<p>First, setup the library in <code>app/build.gradle</code></p>

<pre class="default s-code-block"><code class="hljs language-python">repositories {
  maven {url <span class="hljs-string">"https://clojars.org/repo/"</span>}
}
dependencies {
  <span class="hljs-built_in">compile</span> <span class="hljs-string">'frankiesardo:icepick:3.2.0'</span>
  provided <span class="hljs-string">'frankiesardo:icepick-processor:3.2.0'</span>
}
</code></pre>

<p>Now, let's check this example below how to save state in Activity</p>

<pre class="default s-code-block"><code class="hljs language-scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExampleActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> </span>{
  <span class="hljs-meta">@State</span> <span class="hljs-type">String</span> username; <span class="hljs-comment">// This will be automatically saved and restored</span>

  <span class="hljs-meta">@Override</span> public void onCreate(<span class="hljs-type">Bundle</span> savedInstanceState) {
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
    <span class="hljs-type">Icepick</span>.restoreInstanceState(<span class="hljs-keyword">this</span>, savedInstanceState);
  }

  <span class="hljs-meta">@Override</span> public void onSaveInstanceState(<span class="hljs-type">Bundle</span> outState) {
    <span class="hljs-keyword">super</span>.onSaveInstanceState(outState);
    <span class="hljs-type">Icepick</span>.saveInstanceState(<span class="hljs-keyword">this</span>, outState);
  }
}
</code></pre>

<p>It works for Activities, Fragments or any object that needs to serialize its state on a Bundle (e.g. mortar's ViewPresenters)</p>

<p>Icepick can also generate the instance state code for custom Views:</p>

<pre class="default s-code-block"><code class="hljs language-scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">View</span> </span>{
  <span class="hljs-meta">@State</span> int selectedPosition; <span class="hljs-comment">// This will be automatically saved and restored</span>

  <span class="hljs-meta">@Override</span> public <span class="hljs-type">Parcelable</span> onSaveInstanceState() {
    <span class="hljs-keyword">return</span> <span class="hljs-type">Icepick</span>.saveInstanceState(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">super</span>.onSaveInstanceState());
  }

  <span class="hljs-meta">@Override</span> public void onRestoreInstanceState(<span class="hljs-type">Parcelable</span> state) {
    <span class="hljs-keyword">super</span>.onRestoreInstanceState(<span class="hljs-type">Icepick</span>.restoreInstanceState(<span class="hljs-keyword">this</span>, state));
  }

  <span class="hljs-comment">// You can put the calls to Icepick into a BaseCustomView and inherit from it</span>
  <span class="hljs-comment">// All Views extending this CustomView automatically have state saved/restored</span>
}
</code></pre>
    </div></div></div></div><div id="solution26" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 26</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Now Android provides <a href="https://developer.android.com/topic/libraries/architecture/saving-states" rel="noreferrer">ViewModels</a> for saving state, you should try to use that instead of saveInstanceState.</p>
    </div></div></div></div><div id="solution27" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 27</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There is a way to make Android save the states without implementing any method. Just add this line to your Manifest in Activity declaration:</p>

<pre class="default s-code-block"><code class="hljs language-vbnet"><span class="hljs-symbol">android:</span>configChanges=<span class="hljs-string">"orientation|screenSize"</span>
</code></pre>

<p>It should look like this:</p>

<pre class="default s-code-block"><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".activities.MyActivity"</span>
    <span class="hljs-attr">android:configChanges</span>=<span class="hljs-string">"orientation|screenSize"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>
</code></pre>

<p><a href="https://developer.android.com/guide/topics/resources/runtime-changes" rel="nofollow noreferrer">Here</a> you can find more information about this property. </p>

<p>It's recommended to let Android handle this for you than the manually handling.</p>
    </div></div></div></div><div id="solution28" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 28</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>What to save and what not to?</h2>

<p>Ever wondered why the text in the <code>EditText</code> gets saved automatically while an orientation change? Well, this answer is for you.</p>

<p>When an instance of an Activity gets destroyed and the System recreates a new instance (for example, configuration change). It tries to recreate it using a set of saved data of old Activity State (<strong>instance state</strong>).</p>

<p>Instance state is a collection of <strong>key-value</strong> pairs stored in a <code>Bundle</code> object.</p>

<blockquote>
  <p>By default System saves the View objects in the Bundle for example.</p>
</blockquote>

<ul>
<li>Text in <code>EditText</code></li>
<li>Scroll position in a <code>ListView</code>, etc.</li>
</ul>

<p>If you need another variable to be saved as a part of instance state you should <strong>OVERRIDE</strong> <code>onSavedInstanceState(Bundle savedinstaneState)</code> method.</p>

<p>For example, <code>int currentScore</code> in a GameActivity</p>

<h3>More detail about the onSavedInstanceState(Bundle savedinstaneState) while saving data</h3>

<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onSaveInstanceState</span>(<span class="hljs-params">Bundle savedInstanceState</span>) {
    <span class="hljs-comment">// Save the user's current game state</span>
    savedInstanceState.<span class="hljs-title function_">putInt</span>(<span class="hljs-variable constant_">STATE_SCORE</span>, mCurrentScore);

    <span class="hljs-comment">// Always call the superclass so it can save the view hierarchy state</span>
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onSaveInstanceState</span>(savedInstanceState);
}
</code></pre>

<blockquote>
  <p>So by mistake if you forget to call
  <code>super.onSaveInstanceState(savedInstanceState);</code>the default behavior
  will not work ie Text in EditText will not save.</p>
</blockquote>

<h3>Which to choose for restoring Activity state?</h3>

<pre class="default s-code-block"><code class="hljs language-scss"> <span class="hljs-built_in">onCreate</span>(Bundle savedInstanceState)
</code></pre>

<p><em>OR</em></p>

<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-built_in">onRestoreInstanceState</span>(Bundle savedInstanceState)
</code></pre>

<p>Both methods get the same Bundle object, so it does not really matter where you write your restoring logic. The only difference is that in <code>onCreate(Bundle savedInstanceState)</code> method you will have to give a null check while it is not needed in the latter case. Other answers have already code snippets. You can refer them.</p>

<h3>More detail about the onRestoreInstanceState(Bundle savedinstaneState)</h3>

<pre class="default s-code-block"><code class="hljs language-typescript"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onRestoreInstanceState</span>(<span class="hljs-params">Bundle savedInstanceState</span>) {
    <span class="hljs-comment">// Always call the superclass so it can restore the view hierarchy</span>
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onRestoreInstanceState</span>(savedInstanceState);

    <span class="hljs-comment">// Restore state members from the saved instance</span>
    mCurrentScore = savedInstanceState.<span class="hljs-title function_">getInt</span>(<span class="hljs-variable constant_">STATE_SCORE</span>);
}
</code></pre>

<blockquote>
  <p>Always call <code>super.onRestoreInstanceState(savedInstanceState);</code> so that System restore the View hierarchy by default</p>
</blockquote>

<h2>Bonus</h2>

<p>The <code>onSaveInstanceState(Bundle savedInstanceState)</code> is invoked by the system only when the user intends to come back to the Activity. For example, you are using App X and suddenly you get a call. You move to the caller app and come back to the app X. In this case the <code>onSaveInstanceState(Bundle savedInstanceState)</code> method will be invoked.</p>

<p>But consider this if a user presses the back button. It is assumed that the user does not intend to come back to the Activity, hence in this case <code>onSaveInstanceState(Bundle savedInstanceState)</code> will not be invoked by the system.
Point being you should consider all the scenarios while saving data.</p>

<h1>Relevant links:</h1>

<p><a href="https://github.com/rohitksingh/My_Android_Garage/blob/master/Activity%20Related%20Stuff/app/src/main/java/rohitksingh/com/activityrelatedstuff/FirstActivity.java" rel="nofollow noreferrer">Demo on default behavior</a><br>
<a href="https://developer.android.com/guide/components/activities/activity-lifecycle#saras" rel="nofollow noreferrer">Android Official Documentation</a>.</p>
    </div></div></div></div><div id="solution29" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 29</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Now it makes sense to do 2 ways in the view model.
if you want to save the first as a saved instance:
You can add state parameter in view model like this
<a href="https://developer.android.com/topic/libraries/architecture/viewmodel-savedstate#java" rel="nofollow noreferrer">https://developer.android.com/topic/libraries/architecture/viewmodel-savedstate#java</a></p>

<p>or you can save variables or object in view model, in this case the view model will hold the life cycle until the activity is destroyed.</p>

<pre class="default s-code-block"><code class="hljs language-scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloAndroidViewModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ViewModel</span> </span>{
   public <span class="hljs-type">Booelan</span> firstInit = <span class="hljs-literal">false</span>;

    public <span class="hljs-type">HelloAndroidViewModel</span>() {
        firstInit = <span class="hljs-literal">false</span>;
    }
    ...
}

public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloAndroid</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> </span>{

  <span class="hljs-keyword">private</span> <span class="hljs-type">TextView</span> mTextView = <span class="hljs-literal">null</span>;
  <span class="hljs-type">HelloAndroidViewModel</span> viewModel = <span class="hljs-type">ViewModelProviders</span>.of(<span class="hljs-keyword">this</span>).get(<span class="hljs-type">HelloAndroidViewModel</span>.<span class="hljs-keyword">class</span>);
  <span class="hljs-comment">/** Called when the activity is first created. */</span>
  <span class="hljs-meta">@Override</span>
  public void onCreate(<span class="hljs-type">Bundle</span> savedInstanceState) {
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);

    mTextView = <span class="hljs-keyword">new</span> <span class="hljs-type">TextView</span>(<span class="hljs-keyword">this</span>);

    <span class="hljs-comment">//Because even if the state is deleted, the data in the viewmodel will be kept because the activity does not destroy</span>
    <span class="hljs-keyword">if</span>(!viewModel.firstInit){
        viewModel.firstInit = <span class="hljs-literal">true</span>
        mTextView.setText(<span class="hljs-string">"Welcome to HelloAndroid!"</span>);
    }<span class="hljs-keyword">else</span>{
       mTextView.setText(<span class="hljs-string">"Welcome back."</span>);
    }

    setContentView(mTextView);
  }
}
</code></pre>
    </div></div></div></div><div id="solution30" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 30</h1><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/application-state">application-state</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><strong>Kotlin Solution:</strong>
For custom class save in <code>onSaveInstanceState</code> you can be converted your class to <code>JSON</code> string and restore it with <code>Gson</code> convertion and for single <code>String, Double, Int, Long</code> value save and restore as following. The following example is for <code>Fragment</code> and <code>Activity</code>:</p>

<p><strong>For Activity:</strong></p>

<p>For put data in <code>saveInstanceState</code>:</p>

<pre class="default s-code-block"><code class="hljs language-kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSaveInstanceState</span><span class="hljs-params">(outState: <span class="hljs-type">Bundle</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onSaveInstanceState(outState)

        <span class="hljs-comment">//for custom class-----</span>
        <span class="hljs-keyword">val</span> gson = Gson()
        <span class="hljs-keyword">val</span> json = gson.toJson(your_custom_class)
        outState.putString(<span class="hljs-string">"CUSTOM_CLASS"</span>, json)

        <span class="hljs-comment">//for single value------</span>
        outState.putString(<span class="hljs-string">"MyString"</span>, stringValue)
        outState.putBoolean(<span class="hljs-string">"MyBoolean"</span>, <span class="hljs-literal">true</span>)
        outState.putDouble(<span class="hljs-string">"myDouble"</span>, doubleValue)
        outState.putInt(<span class="hljs-string">"MyInt"</span>, intValue)
    }
</code></pre>

<p>Restore data:</p>

<pre class="default s-code-block"><code class="hljs language-kotlin"> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRestoreInstanceState</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>)</span></span> {
    <span class="hljs-keyword">super</span>.onRestoreInstanceState(savedInstanceState)

    <span class="hljs-comment">//for custom class restore</span>
    <span class="hljs-keyword">val</span> json = savedInstanceState?.getString(<span class="hljs-string">"CUSTOM_CLASS"</span>)
    <span class="hljs-keyword">if</span> (!json!!.isEmpty()) {
        <span class="hljs-keyword">val</span> gson = Gson()
        testBundle = gson.fromJson(json, Session::<span class="hljs-keyword">class</span>.java)
    }

  <span class="hljs-comment">//for single value restore</span>

   <span class="hljs-keyword">val</span> myBoolean: <span class="hljs-built_in">Boolean</span> = savedInstanceState?.getBoolean(<span class="hljs-string">"MyBoolean"</span>)
   <span class="hljs-keyword">val</span> myDouble: <span class="hljs-built_in">Double</span> = savedInstanceState?.getDouble(<span class="hljs-string">"myDouble"</span>)
   <span class="hljs-keyword">val</span> myInt: <span class="hljs-built_in">Int</span> = savedInstanceState?.getInt(<span class="hljs-string">"MyInt"</span>)
   <span class="hljs-keyword">val</span> myString: String = savedInstanceState?.getString(<span class="hljs-string">"MyString"</span>)
 }
</code></pre>

<p>You can restore it on Activity <code>onCreate</code> also.</p>

<p><strong>For fragment:</strong></p>

<p>For put class in <code>saveInstanceState</code>:</p>

<pre class="default s-code-block"><code class="hljs language-kotlin"> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSaveInstanceState</span><span class="hljs-params">(outState: <span class="hljs-type">Bundle</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onSaveInstanceState(outState)
        <span class="hljs-keyword">val</span> gson = Gson()
        <span class="hljs-keyword">val</span> json = gson.toJson(customClass)
        outState.putString(<span class="hljs-string">"CUSTOM_CLASS"</span>, json)
    }
</code></pre>

<p>Restore data:</p>

<pre class="default s-code-block"><code class="hljs language-kotlin"> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onActivityCreated</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onActivityCreated(savedInstanceState)

        <span class="hljs-comment">//for custom class restore</span>
        <span class="hljs-keyword">if</span> (savedInstanceState != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">val</span> json = savedInstanceState.getString(<span class="hljs-string">"CUSTOM_CLASS"</span>)
            <span class="hljs-keyword">if</span> (!json!!.isEmpty()) {
                <span class="hljs-keyword">val</span> gson = Gson()
                <span class="hljs-keyword">val</span> customClass: CustomClass = gson.fromJson(json, CustomClass::<span class="hljs-keyword">class</span>.java)
            }
        }

      <span class="hljs-comment">// for single value restore</span>
      <span class="hljs-keyword">val</span> myBoolean: <span class="hljs-built_in">Boolean</span> = savedInstanceState.getBoolean(<span class="hljs-string">"MyBoolean"</span>)
      <span class="hljs-keyword">val</span> myDouble: <span class="hljs-built_in">Double</span> = savedInstanceState.getDouble(<span class="hljs-string">"myDouble"</span>)
      <span class="hljs-keyword">val</span> myInt: <span class="hljs-built_in">Int</span> = savedInstanceState.getInt(<span class="hljs-string">"MyInt"</span>)
      <span class="hljs-keyword">val</span> myString: String = savedInstanceState.getString(<span class="hljs-string">"MyString"</span>)
    }
</code></pre>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/how-do-i-profile-a-python-script-1657388346692">How do I profile a Python script?</a><a href="/questions/how-do-i-split-a-list-into-equally-sized-chunks-1657384580399">How do I split a list into equally-sized chunks?</a><a href="/questions/how-can-i-fix-&#x27;android.os.networkonmainthreadexception&#x27;-1657384454963">How can I fix &#x27;android.os.NetworkOnMainThreadException&#x27;?</a><a href="/questions/why-are-mutable-structs-%22evil%22-1657388508974">Why are mutable structs evil?</a><a href="/questions/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors-1657384750732">What is a stack trace, and how can I use it to debug my application errors?</a><a href="/questions/why-use-integer-instead-of-long-1657388012352">Why Use Integer Instead of Long?</a><a href="/questions/why-is-24.0000-not-equal-to-24.0000-in-matlab-1657388376753">Why is 24.0000 not equal to 24.0000 in MATLAB?</a><a href="/questions/how-should-a-model-be-structured-in-mvc-closed-1657388394807">How should a model be structured in MVC? [closed]</a><a href="/questions/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other-resources-needed-by-my-javafx-application-1657388143988">How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?</a><a href="/questions/sorting-an-array-of-objects-by-property-values-1657387447490">Sorting an array of objects by property values</a><a href="/questions/the-3-different-equals-1657385490242">The 3 different equals</a><a href="/questions/how-do-i-write-a-correct-micro-benchmark-in-java-1657384488725">How do I write a correct micro-benchmark in Java?</a><a href="/questions/what-is-object-slicing-1657384506425">What is object slicing?</a><a href="/questions/dynamically-select-data-frame-columns-using-dollar-and-a-character-value-1657387836662">Dynamically select data frame columns using $ and a character value</a><a href="/questions/how-do-i-return-the-response-from-an-asynchronous-call-1657384208012">How do I return the response from an asynchronous call?</a><a href="/questions/what-are-valid-values-for-the-id-attribute-in-html-1657384874780">What are valid values for the id attribute in HTML?</a><a href="/questions/web-scraping-javascript-page-with-python-1657388240875">Web-scraping JavaScript page with Python</a><a href="/questions/how-do-i-give-text-or-an-image-a-transparent-background-using-css-1657388188508">How do I give text or an image a transparent background using CSS?</a><a href="/questions/why-are-these-constructs-using-pre-and-post-increment-undefined-behavior-1657384520109">Why are these constructs using pre and post-increment undefined behavior?</a><a href="/questions/how-do-i-make-a-redirect-in-php-1657387381903">How do I make a redirect in PHP?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;You need to override \u0026lt;code\u0026gt;onSaveInstanceState(Bundle savedInstanceState)\u0026lt;/code\u0026gt; and write the application state values you want to change to the \u0026lt;code\u0026gt;Bundle\u0026lt;/code\u0026gt; parameter like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle savedInstanceState\u0026lt;/span\u0026gt;) {\n  \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;(savedInstanceState);\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Save UI state changes to the savedInstanceState.\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This bundle will be passed to onCreate if the process is\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// killed and restarted.\u0026lt;/span\u0026gt;\n  savedInstanceState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putBoolean\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyBoolean\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n  savedInstanceState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putDouble\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;myDouble\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1.9\u0026lt;/span\u0026gt;);\n  savedInstanceState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putInt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyInt\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;);\n  savedInstanceState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putString\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyString\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Welcome back to Android\u0026quot;\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// etc.\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The Bundle is essentially a way of storing a NVP (\u0026quot;Name-Value Pair\u0026quot;) map, and it will get passed in to \u0026lt;code\u0026gt;onCreate()\u0026lt;/code\u0026gt; and also \u0026lt;code\u0026gt;onRestoreInstanceState()\u0026lt;/code\u0026gt; where you would then extract the values from activity like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onRestoreInstanceState\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Bundle savedInstanceState)\u0026lt;/span\u0026gt; {\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onRestoreInstanceState(savedInstanceState);\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Restore UI state from the savedInstanceState.\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This bundle has also been passed to onCreate.\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myBoolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState.getBoolean(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyBoolean\u0026quot;\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myDouble\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState.getDouble(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;myDouble\u0026quot;\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myInt\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState.getInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyInt\u0026quot;\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myString\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState.getString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyString\u0026quot;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Or from a fragment.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onViewStateRestored\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Nullable\u0026lt;/span\u0026gt; Bundle savedInstanceState)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onViewStateRestored(savedInstanceState);\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Restore UI state from the savedInstanceState.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This bundle has also been passed to onCreate.\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myBoolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState.getBoolean(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyBoolean\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;double\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myDouble\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState.getDouble(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;myDouble\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myInt\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState.getInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyInt\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myString\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState.getString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyString\u0026quot;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You would usually use this technique to store instance values for your application (selections, unsaved text, etc.).\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;savedInstanceState\u0026lt;/code\u0026gt; is only for saving state associated with a current instance of an Activity, for example current navigation or selection info, so that if Android destroys and recreates an Activity, it can come back as it was before.  See the documentation for \u0026lt;a href=\u0026quot;http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle)\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;onCreate\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; and \u0026lt;a href=\u0026quot;http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;onSaveInstanceState\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For more long lived state, consider using a SQLite database, a file, or preferences.  See \u0026lt;a href=\u0026quot;http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Saving Persistent State\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Note that it is \u0026lt;em\u0026gt;\u0026lt;strong\u0026gt;not\u0026lt;/strong\u0026gt;\u0026lt;/em\u0026gt; safe to use \u0026lt;code\u0026gt;onSaveInstanceState\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;onRestoreInstanceState\u0026lt;/code\u0026gt; \u0026lt;strong\u0026gt;for persistent data\u0026lt;/strong\u0026gt;, according to  \u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;http://developer.android.com/reference/android/app/Activity.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;the documentation on Activity\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The document states (in the \u0026apos;Activity Lifecycle\u0026apos; section):\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Note that it is important to save\npersistent data in \u0026lt;code\u0026gt;onPause()\u0026lt;/code\u0026gt; instead\nof \u0026lt;code\u0026gt;onSaveInstanceState(Bundle)\u0026lt;/code\u0026gt;\nbecause the later is not part of the\nlifecycle callbacks, so will not be\ncalled in every situation as described\nin its documentation.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;In other words, put your save/restore code for persistent data in \u0026lt;code\u0026gt;onPause()\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;onResume()\u0026lt;/code\u0026gt;!\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For further clarification, here\u0026apos;s the \u0026lt;code\u0026gt;onSaveInstanceState()\u0026lt;/code\u0026gt; documentation:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;This method is called before an activity may be killed so that when it\ncomes back some time in the future it can restore its state. For\nexample, if activity B is launched in front of activity A, and at some\npoint activity A is killed to reclaim resources, activity A will have\na chance to save the current state of its user interface via this\nmethod so that when the user returns to activity A, the state of the\nuser interface can be restored via \u0026lt;code\u0026gt;onCreate(Bundle)\u0026lt;/code\u0026gt; or\n\u0026lt;code\u0026gt;onRestoreInstanceState(Bundle)\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;My colleague wrote an article explaining application state on Android devices, including explanations on activity lifecycle and state information, how to store state information, and saving to state \u0026lt;code\u0026gt;Bundle\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;SharedPreferences\u0026lt;/code\u0026gt;. \u0026lt;a href=\u0026quot;http://www.eigo.co.uk/Managing-State-in-an-Android-Activity.aspx\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Take a look at it here\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The article covers three approaches:\u0026lt;/p\u0026gt;\n\u0026lt;h2 id=\u0026quot;store-local-variableui-control-data-for-application-lifetime-i.e.temporarily-using-an-instance-state-bundle-cq9v\u0026quot;\u0026gt;Store local variable/UI control data for application lifetime (i.e. temporarily) using an instance state bundle\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;[Code sample  Store state in state bundle]\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Bundle savedInstanceState)\u0026lt;/span\u0026gt;\n{\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Store UI state to the savedInstanceState.\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This bundle will be passed to onCreate on next call.  EditText txtName = (EditText)findViewById(R.id.txtName);\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;strName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; txtName.getText().toString();\n\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;EditText\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;txtEmail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (EditText)findViewById(R.id.txtEmail);\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;strEmail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; txtEmail.getText().toString();\n\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CheckBox\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;chkTandC\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (CheckBox)findViewById(R.id.chkTandC);\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;blnTandC\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; chkTandC.isChecked();\n\n  savedInstanceState.putString(Name, strName);\n  savedInstanceState.putString(Email, strEmail);\n  savedInstanceState.putBoolean(TandC, blnTandC);\n\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onSaveInstanceState(savedInstanceState);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2 id=\u0026quot;store-local-variableui-control-data-between-application-instances-i.e.permanently-using-shared-preferences-9sl9\u0026quot;\u0026gt;Store local variable/UI control data between application instances (i.e. permanently) using shared preferences\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;[Code sample  store state in SharedPreferences]\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onPause\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt;\n{\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onPause();\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Store values between instances here\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SharedPreferences\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;preferences\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getPreferences(MODE_PRIVATE);\n  SharedPreferences.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Editor\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;editor\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; preferences.edit();  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Put the values from the UI\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;EditText\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;txtName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (EditText)findViewById(R.id.txtName);\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;strName\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; txtName.getText().toString();\n\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;EditText\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;txtEmail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (EditText)findViewById(R.id.txtEmail);\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;strEmail\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; txtEmail.getText().toString();\n\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;CheckBox\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;chkTandC\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (CheckBox)findViewById(R.id.chkTandC);\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;blnTandC\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; chkTandC.isChecked();\n\n  editor.putString(Name, strName); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// value to store\u0026lt;/span\u0026gt;\n  editor.putString(Email, strEmail); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// value to store\u0026lt;/span\u0026gt;\n  editor.putBoolean(TandC, blnTandC); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// value to store\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Commit to storage\u0026lt;/span\u0026gt;\n  editor.commit();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h2 id=\u0026quot;keeping-object-instances-alive-in-memory-between-activities-within-application-lifetime-using-a-retained-non-configuration-instance-qv67\u0026quot;\u0026gt;Keeping object instances alive in memory between activities within application lifetime using a retained non-configuration instance\u0026lt;/h2\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;[\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Code\u0026lt;/span\u0026gt; sample  store \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;object\u0026lt;/span\u0026gt; instance]\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; cMyClassType moInstanceOfAClass; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Store the instance of an object\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onRetainNonConfigurationInstance\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;)\n{\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (moInstanceOfAClass != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Check that the object exists\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;(moInstanceOfAClass);\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onRetainNonConfigurationInstance\u0026lt;/span\u0026gt;();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;This is a classic \u0026apos;gotcha\u0026apos; of Android development. There are two issues here:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;There is a subtle Android Framework bug which greatly complicates application stack management during development, at least on legacy versions (not entirely sure if/when/how it was fixed). I\u0026apos;ll discuss this bug below.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;The \u0026apos;normal\u0026apos; or intended way to manage this issue is, itself, rather complicated with the duality of onPause/onResume and onSaveInstanceState/onRestoreInstanceState\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;Browsing across all these threads, I suspect that much of the time developers are talking about these two different issues simultaneously ... hence all the confusion and reports of \u0026quot;this doesn\u0026apos;t work for me\u0026quot;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;First, to clarify the \u0026apos;intended\u0026apos; behavior: onSaveInstance and onRestoreInstance are fragile and only for transient state. The intended usage (as far as I can tell) is to handle Activity recreation when the phone is rotated (orientation change). In other words, the intended usage is when your Activity is still logically \u0026apos;on top\u0026apos;, but still must be reinstantiated by the system. The saved Bundle is not persisted outside of the process/memory/\u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;GC\u0026lt;/a\u0026gt;, so you cannot really rely on this if your activity goes to the background. Yes, perhaps your Activity\u0026apos;s memory will survive its trip to the background and escape GC, but this is not reliable (nor is it predictable).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So if you have a scenario where there is meaningful \u0026apos;user progress\u0026apos; or state that should be persisted between \u0026apos;launches\u0026apos; of your application, the guidance is to use onPause and onResume. You must choose and prepare a persistent store yourself.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;But\u0026lt;/em\u0026gt; - there is a very confusing bug which complicates all of this. Details are here:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;http://code.google.com/p/android/issues/detail?id=2373\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Activity stack behaves incorrectly during the first run of an app when started from Eclipse\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt; (#36907463)\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://issuetracker.google.com/issues/36911210\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Marketplace / browser app installer allows second instance off app\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt; (#36911210)\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;Basically, if your application is launched with the SingleTask flag, and then later on you launch it from the home screen or launcher menu, then that subsequent invocation will create a NEW task ... you\u0026apos;ll effectively have two different instances of your app inhabiting the same stack ... which gets very strange very fast. This seems to happen when you launch your app during development (i.e. from \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Eclipse_%28software%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Eclipse\u0026lt;/a\u0026gt; or \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/IntelliJ_IDEA\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;IntelliJ\u0026lt;/a\u0026gt;), so developers run into this a lot. But also through some of the app store update mechanisms (so it impacts your users as well).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I battled through these threads for hours before I realized that my main issue was this bug, not the intended framework behavior. A great write-up and \u0026lt;del\u0026gt;workaround\u0026lt;/del\u0026gt; (UPDATE: see below) seems to be from user @kaciula in this answer:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/3042420/home-key-press-behaviour/4782423#4782423\u0026quot;\u0026gt;Home key press behaviour\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;UPDATE June 2013\u0026lt;/strong\u0026gt;: Months later, I have finally found the \u0026apos;correct\u0026apos; solution. You don\u0026apos;t need to manage any stateful startedApp flags yourself. You can detect this from the framework and bail appropriately. I use this near the beginning of my LauncherActivity.onCreate:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!isTaskRoot()) {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;intent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getIntent();\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;action\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; intent.getAction();\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (intent.hasCategory(Intent.CATEGORY_LAUNCHER) \u0026amp;amp;\u0026amp;amp; action != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; action.equals(Intent.ACTION_MAIN)) {\n        finish();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;onSaveInstanceState\u0026lt;/code\u0026gt; is called when the system needs memory and kills an application. It is not called when the user just closes the application. So I think application state should also be saved in \u0026lt;code\u0026gt;onPause\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;It should be saved to some persistent storage like \u0026lt;code\u0026gt;Preferences\u0026lt;/code\u0026gt; or SQLite.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Both methods are useful and valid and both are best suited for different scenarios:\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;The user terminates the application and re-opens it at a later date, but the application needs to reload data from the last session  this requires a persistent storage approach such as using SQLite.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;The user switches application and then comes back to the original and wants to pick up where they left off -  save and restore bundle data (such as application state data) in \u0026lt;code\u0026gt;onSaveInstanceState()\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;onRestoreInstanceState()\u0026lt;/code\u0026gt; is usually adequate.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;If you save the state data in a persistent manner, it can be reloaded in an \u0026lt;code\u0026gt;onResume()\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;onCreate()\u0026lt;/code\u0026gt; (or actually on any lifecycle call). This may or may not be desired behaviour. If you store it in a bundle in an \u0026lt;code\u0026gt;InstanceState\u0026lt;/code\u0026gt;, then it is transient and is only suitable for storing data for use in the same user session (I use the term session loosely) but not between sessions.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It is not that one approach is better than the other, like everything, it is just important to understand what behaviour you require and to select the most appropriate approach.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Saving state is a kludge at best as far as I\u0026apos;m concerned. If you need to save persistent data, just use an \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/SQLite\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;SQLite\u0026lt;/a\u0026gt; database. Android makes it \u0026lt;strong\u0026gt;\u0026lt;em\u0026gt;SOOO\u0026lt;/em\u0026gt;\u0026lt;/strong\u0026gt; easy.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Something like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;util\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;content\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Context\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;database\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Cursor\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;database\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;sqlite\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;SQLiteDatabase\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;database\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;sqlite\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;SQLiteOpenHelper\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;dataHelper\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; final \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;DATABASE_NAME\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;autoMate.db\u0026quot;\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; final int \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;DATABASE_VERSION\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Context\u0026lt;/span\u0026gt; context;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SQLiteDatabase\u0026lt;/span\u0026gt; db;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OpenHelper\u0026lt;/span\u0026gt; oh ;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;dataHelper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Context context\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;context\u0026lt;/span\u0026gt; = context;\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;oh\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OpenHelper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;context\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;db\u0026lt;/span\u0026gt; = oh.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getWritableDatabase\u0026lt;/span\u0026gt;();\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;close\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;) {\n        db.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;close\u0026lt;/span\u0026gt;();\n        oh.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;close\u0026lt;/span\u0026gt;();\n        db = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        oh = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SQLiteDatabase\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;releaseMemory\u0026lt;/span\u0026gt;();\n    }\n\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setCode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; codeName, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; codeValue, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; codeDataType\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Cursor\u0026lt;/span\u0026gt; codeRow = db.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;rawQuery\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM code WHERE codeName = \u0026apos;\u0026quot;\u0026lt;/span\u0026gt;+  codeName + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; cv = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; ;\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeDataType.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toLowerCase\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;trim\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;long\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;){\n            cv = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;valueOf\u0026lt;/span\u0026gt;(codeValue);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeDataType.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toLowerCase\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;trim\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;int\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n        {\n            cv = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;valueOf\u0026lt;/span\u0026gt;(codeValue);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeDataType.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toLowerCase\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;trim\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;date\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n        {\n            cv = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;valueOf\u0026lt;/span\u0026gt;(((\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;)codeValue).\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getTime\u0026lt;/span\u0026gt;());\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeDataType.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toLowerCase\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;trim\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;boolean\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n        {\n            \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;valueOf\u0026lt;/span\u0026gt;(codeValue);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n        {\n            cv = \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;valueOf\u0026lt;/span\u0026gt;(codeValue);\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(codeRow.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCount\u0026lt;/span\u0026gt;() \u0026amp;gt; \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//exists-- update\u0026lt;/span\u0026gt;\n        {\n            db.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;execSQL\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;update code set codeValue = \u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + cv +\n                \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos; where codeName = \u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + codeName + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// does not exist, insert\u0026lt;/span\u0026gt;\n        {\n            db.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;execSQL\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;INSERT INTO code (codeName, codeValue, codeDataType) VALUES(\u0026quot;\u0026lt;/span\u0026gt; +\n                    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + codeName + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;,\u0026quot;\u0026lt;/span\u0026gt; +\n                    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + cv + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;,\u0026quot;\u0026lt;/span\u0026gt; +\n                    \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + codeDataType + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;)\u0026quot;\u0026lt;/span\u0026gt; );\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCode\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; codeName, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; defaultValue\u0026lt;/span\u0026gt;){\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Check to see if it already exists\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; codeValue = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; codeDataType = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; found = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Cursor\u0026lt;/span\u0026gt; codeRow  = db.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;rawQuery\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM code WHERE codeName = \u0026apos;\u0026quot;\u0026lt;/span\u0026gt;+  codeName + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeRow.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;moveToFirst\u0026lt;/span\u0026gt;())\n        {\n            codeValue = codeRow.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getString\u0026lt;/span\u0026gt;(codeRow.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getColumnIndex\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;codeValue\u0026quot;\u0026lt;/span\u0026gt;));\n            codeDataType = codeRow.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getString\u0026lt;/span\u0026gt;(codeRow.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getColumnIndex\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;codeDataType\u0026quot;\u0026lt;/span\u0026gt;));\n            found = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;;\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (found == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;)\n        {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; defaultValue;\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeDataType.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toLowerCase\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;trim\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;long\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n        {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeValue.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n            {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (long)\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Long\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseLong\u0026lt;/span\u0026gt;(codeValue);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeDataType.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toLowerCase\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;trim\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;int\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n        {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeValue.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n            {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (int)\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;;\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Integer\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;parseInt\u0026lt;/span\u0026gt;(codeValue);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeDataType.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toLowerCase\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;trim\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;date\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n        {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeValue.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n            {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Long\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseLong\u0026lt;/span\u0026gt;(codeValue));\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeDataType.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;toLowerCase\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;trim\u0026lt;/span\u0026gt;().\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;boolean\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n        {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (codeValue.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;equals\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;) == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n            {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n            }\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Boolean\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;parseBoolean\u0026lt;/span\u0026gt;(codeValue);\n        }\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;\n        {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;)codeValue;\n        }\n    }\n\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OpenHelper\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;SQLiteOpenHelper\u0026lt;/span\u0026gt; {\n\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OpenHelper\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Context\u0026lt;/span\u0026gt; context) {\n            \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;(context, \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;DATABASE_NAME\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;DATABASE_VERSION\u0026lt;/span\u0026gt;);\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;SQLiteDatabase db\u0026lt;/span\u0026gt;) {\n            db.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;execSQL\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;CREATE TABLE IF  NOT EXISTS code\u0026quot;\u0026lt;/span\u0026gt; +\n            \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;(id INTEGER PRIMARY KEY, codeName TEXT, codeValue TEXT, codeDataType TEXT)\u0026quot;\u0026lt;/span\u0026gt;);\n        }\n\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onUpgrade\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;SQLiteDatabase db, int oldVersion, int newVersion\u0026lt;/span\u0026gt;) {\n        }\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;A simple call after that\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-coffeescript\u0026quot;\u0026gt;dataHelper dh = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; dataHelper(getBaseContext());\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; status = (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt;) dh.getCode(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;appState\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;safetyDisabled\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt; serviceStart = (\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Date\u0026lt;/span\u0026gt;) dh.getCode(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;serviceStartTime\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\ndh.close();\ndh = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I think I found the answer. Let me tell what I have done in simple words:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Suppose I have two activities, activity1 and activity2 and I am navigating from activity1 to activity2 (I have done some works in activity2) and again back to activity 1 by clicking on a button in activity1. Now at this stage I wanted to go back to activity2 and I want to see my activity2 in the same condition when I last left activity2.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For the above scenario what I have done is that in the manifest I made some changes like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;activity\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.activity2\u0026quot;\u0026lt;/span\u0026gt;\n          \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:alwaysRetainTaskState\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;true\u0026quot;\u0026lt;/span\u0026gt;      \n          \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:launchMode\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;singleInstance\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;activity\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And in the activity1 on the button click event I have done like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;intent\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt;();\nintent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\nintent.setClassName(\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;com.mainscreen.activity2\u0026quot;\u0026lt;/span\u0026gt;);\nstartActivity(intent);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;And in activity2 on button click event I have done like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-csharp\u0026quot;\u0026gt;Intent intent=\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; Intent();\nintent.setClassName(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;com.mainscreen.activity1\u0026quot;\u0026lt;/span\u0026gt;);\nstartActivity(intent);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Now what will happen is that whatever the changes we have made in the activity2 will not be lost, and we can view activity2 in the same state as we left previously.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;I believe this is the answer and this works fine for me. Correct me if I am wrong.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;onSaveInstanceState()\u0026lt;/code\u0026gt; for transient data (restored in \u0026lt;code\u0026gt;onCreate()\u0026lt;/code\u0026gt;/\u0026lt;code\u0026gt;onRestoreInstanceState()\u0026lt;/code\u0026gt;), \u0026lt;code\u0026gt;onPause()\u0026lt;/code\u0026gt; for persistent data (restored in \u0026lt;code\u0026gt;onResume()\u0026lt;/code\u0026gt;).\nFrom Android technical resources:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;onSaveInstanceState()\u0026lt;/strong\u0026gt; is called by Android if the Activity is being stopped and may be killed before it is resumed! This means it should store any state necessary to re-initialize to the same condition when the Activity is restarted. It is the counterpart to the onCreate() method, and in fact the savedInstanceState Bundle passed in to onCreate() is the same Bundle that you construct as outState in the onSaveInstanceState() method.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;onPause()\u0026lt;/strong\u0026gt; and \u0026lt;strong\u0026gt;onResume()\u0026lt;/strong\u0026gt; are also complimentary methods. onPause() is always called when the Activity ends, even if we instigated that (with a finish() call for example). We will use this to save the current note back to the database. Good practice is to release any resources that can be released during an onPause() as well, to take up less resources when in the passive state.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Really \u0026lt;code\u0026gt;onSaveInstanceState()\u0026lt;/code\u0026gt; is called when the Activity goes to background.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Quote from the docs:\n\u0026quot;This method is called before an activity may be killed so that when it comes back some time in the future it can restore its state.\u0026quot;\n\u0026lt;a href=\u0026quot;https://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Source\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To help reduce boilerplate I use the following \u0026lt;code\u0026gt;interface\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;class\u0026lt;/code\u0026gt; to read/write to a \u0026lt;code\u0026gt;Bundle\u0026lt;/code\u0026gt; for saving instance state.\u0026lt;/p\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;First, create an interface that will be used to annotate your instance variables:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.lang.annotation.Documented;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.lang.annotation.ElementType;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.lang.annotation.Retention;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.lang.annotation.RetentionPolicy;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.lang.annotation.Target;\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Documented\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Retention(RetentionPolicy.RUNTIME)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Target({\n        ElementType.FIELD\n})\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@interface\u0026lt;/span\u0026gt; SaveInstance {\n\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then, create a class where reflection will be used to save values to the bundle:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;app\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Activity\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;app\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Fragment\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;os\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;os\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Parcelable\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;util\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Log\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;io\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Serializable\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;lang\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;reflect\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;Field\u0026lt;/span\u0026gt;;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n * Save and load fields to/from a {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Bundle}. All fields should be annotated with {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt;\n * SaveInstance}.\u0026amp;lt;/p\u0026amp;gt;\n */\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Icicle\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; final \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;TAG\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Icicle\u0026quot;\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n     * Find all fields with the {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; SaveInstance} annotation and add them to the {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Bundle}.\n     *\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;outState\u0026lt;/span\u0026gt;\n     *         The bundle from {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Activity#onSaveInstanceState(Bundle)} or {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt;\n     *         Fragment#onSaveInstanceState(Bundle)}\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;classInstance\u0026lt;/span\u0026gt;\n     *         The object to access the fields which have the {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; SaveInstance} annotation.\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@see\u0026lt;/span\u0026gt; #load(Bundle, Object)\n     */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;save\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle outState, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; classInstance\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;save\u0026lt;/span\u0026gt;(outState, classInstance, classInstance.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getClass\u0026lt;/span\u0026gt;());\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n     * Find all fields with the {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; SaveInstance} annotation and add them to the {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Bundle}.\n     *\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;outState\u0026lt;/span\u0026gt;\n     *         The bundle from {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Activity#onSaveInstanceState(Bundle)} or {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt;\n     *         Fragment#onSaveInstanceState(Bundle)}\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;classInstance\u0026lt;/span\u0026gt;\n     *         The object to access the fields which have the {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; SaveInstance} annotation.\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;baseClass\u0026lt;/span\u0026gt;\n     *         Base class, used to get all superclasses of the instance.\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@see\u0026lt;/span\u0026gt; #load(Bundle, Object, Class)\n     */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;save\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle outState, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; classInstance, Class\u0026amp;lt;?\u0026amp;gt; baseClass\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (outState == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n        }\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Class\u0026lt;/span\u0026gt;\u0026amp;lt;?\u0026amp;gt; clazz = classInstance.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getClass\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (baseClass.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isAssignableFrom\u0026lt;/span\u0026gt;(clazz)) {\n            \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; className = clazz.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getName\u0026lt;/span\u0026gt;();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Field\u0026lt;/span\u0026gt; field : clazz.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getDeclaredFields\u0026lt;/span\u0026gt;()) {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (field.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isAnnotationPresent\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SaveInstance\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;)) {\n                    field.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setAccessible\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n                    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; key = className + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#\u0026quot;\u0026lt;/span\u0026gt; + field.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getName\u0026lt;/span\u0026gt;();\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n                        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; value = field.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(classInstance);\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Parcelable\u0026lt;/span\u0026gt;) {\n                            outState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putParcelable\u0026lt;/span\u0026gt;(key, (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Parcelable\u0026lt;/span\u0026gt;) value);\n                        } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (value \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;instanceof\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Serializable\u0026lt;/span\u0026gt;) {\n                            outState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putSerializable\u0026lt;/span\u0026gt;(key, (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Serializable\u0026lt;/span\u0026gt;) value);\n                        }\n                    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Throwable\u0026lt;/span\u0026gt; t) {\n                        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Log\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;d\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;TAG\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;The field \u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + key + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos; was not added to the bundle\u0026quot;\u0026lt;/span\u0026gt;);\n                    }\n                }\n            }\n            clazz = clazz.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getSuperclass\u0026lt;/span\u0026gt;();\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n     * Load all saved fields that have the {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; SaveInstance} annotation.\n     *\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;savedInstanceState\u0026lt;/span\u0026gt;\n     *         The saved-instance {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Bundle} from an {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Activity} or {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Fragment}.\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;classInstance\u0026lt;/span\u0026gt;\n     *         The object to access the fields which have the {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; SaveInstance} annotation.\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@see\u0026lt;/span\u0026gt; #save(Bundle, Object)\n     */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;load\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle savedInstanceState, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; classInstance\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;load\u0026lt;/span\u0026gt;(savedInstanceState, classInstance, classInstance.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getClass\u0026lt;/span\u0026gt;());\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/**\n     * Load all saved fields that have the {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; SaveInstance} annotation.\n     *\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;savedInstanceState\u0026lt;/span\u0026gt;\n     *         The saved-instance {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Bundle} from an {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Activity} or {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; Fragment}.\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;classInstance\u0026lt;/span\u0026gt;\n     *         The object to access the fields which have the {\u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@link\u0026lt;/span\u0026gt; SaveInstance} annotation.\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;baseClass\u0026lt;/span\u0026gt;\n     *         Base class, used to get all superclasses of the instance.\n     * \u0026lt;span class=\u0026quot;hljs-doctag\u0026quot;\u0026gt;@see\u0026lt;/span\u0026gt; #save(Bundle, Object, Class)\n     */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;load\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle savedInstanceState, \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; classInstance, Class\u0026amp;lt;?\u0026amp;gt; baseClass\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (savedInstanceState == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt;;\n        }\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Class\u0026lt;/span\u0026gt;\u0026amp;lt;?\u0026amp;gt; clazz = classInstance.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getClass\u0026lt;/span\u0026gt;();\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;while\u0026lt;/span\u0026gt; (baseClass.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isAssignableFrom\u0026lt;/span\u0026gt;(clazz)) {\n            \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; className = clazz.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getName\u0026lt;/span\u0026gt;();\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Field\u0026lt;/span\u0026gt; field : clazz.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getDeclaredFields\u0026lt;/span\u0026gt;()) {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (field.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;isAnnotationPresent\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SaveInstance\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;)) {\n                    \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; key = className + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;#\u0026quot;\u0026lt;/span\u0026gt; + field.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getName\u0026lt;/span\u0026gt;();\n                    field.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setAccessible\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n                    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n                        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; fieldVal = savedInstanceState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;(key);\n                        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (fieldVal != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n                            field.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;set\u0026lt;/span\u0026gt;(classInstance, fieldVal);\n                        }\n                    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Throwable\u0026lt;/span\u0026gt; t) {\n                        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Log\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;d\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;TAG\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;The field \u0026apos;\u0026quot;\u0026lt;/span\u0026gt; + key + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026apos; was not retrieved from the bundle\u0026quot;\u0026lt;/span\u0026gt;);\n                    }\n                }\n            }\n            clazz = clazz.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getSuperclass\u0026lt;/span\u0026gt;();\n        }\n    }\n\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;h2\u0026gt;Example usage:\u0026lt;/h2\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MainActivity\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_ inherited__\u0026quot;\u0026gt;Activity\u0026lt;/span\u0026gt; {\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@SaveInstance\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; foo;\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@SaveInstance\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; int bar;\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@SaveInstance\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Intent\u0026lt;/span\u0026gt; baz;\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@SaveInstance\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; qux;\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle savedInstanceState\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;(savedInstanceState);\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Icicle\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;load\u0026lt;/span\u0026gt;(savedInstanceState, \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;);\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle outState\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;(outState);\n        \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Icicle\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;save\u0026lt;/span\u0026gt;(outState, \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;);\n    }\n\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;hr\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Note:\u0026lt;/strong\u0026gt; This code was adapted from a library project named \u0026lt;a href=\u0026quot;https://github.com/CardinalNow/AndroidAutowire\u0026quot;\u0026gt;AndroidAutowire\u0026lt;/a\u0026gt; which is licensed under the \u0026lt;a href=\u0026quot;https://raw.githubusercontent.com/CardinalNow/AndroidAutowire/master/LICENSE\u0026quot;\u0026gt;MIT license\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Meanwhile I do in general no more use\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-undefined\u0026quot;\u0026gt;Bundle savedInstanceState \u0026amp;amp; Co\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;The life cycle is for most activities too complicated and not necessary.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;And Google states itself, it is NOT even reliable.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;My way is to save any changes immediately in the preferences:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt; SharedPreferences \u0026lt;span class=\u0026quot;hljs-selector-tag\u0026quot;\u0026gt;p\u0026lt;/span\u0026gt;;\n \u0026lt;span class=\u0026quot;hljs-selector-tag\u0026quot;\u0026gt;p\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-selector-class\u0026quot;\u0026gt;.edit\u0026lt;/span\u0026gt;()\u0026lt;span class=\u0026quot;hljs-selector-class\u0026quot;\u0026gt;.put\u0026lt;/span\u0026gt;(..)\u0026lt;span class=\u0026quot;hljs-selector-class\u0026quot;\u0026gt;.commit\u0026lt;/span\u0026gt;()\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;In some way SharedPreferences work similar like Bundles.\nAnd naturally and at first such values have to be read from preferences.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;In the case of complex data you may use SQLite instead of using preferences.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;When applying this concept, the activity just continues to use the last saved state, regardless of whether it was an initial open with reboots in between or a reopen due to the back stack.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To answer the original question directly. savedInstancestate is null because your Activity is never being re-created.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Your Activity will only be re-created with a state bundle when:\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Configuration changes such as changing the orientation or phone language which may requires a new activity instance to be created.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;You return to the app from the background after the OS has destroyed the activity. \u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;Android will destroy background activities when under memory pressure or after they\u0026apos;ve been in the background for an extended period of time.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;When testing your hello world example there are a few ways to leave and return to the Activity.\u0026lt;/p\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;When you press the back button the Activity is finished. Re-launching the app is a brand new instance. You aren\u0026apos;t resuming from the background at all.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;When you press the home button or use the task switcher the Activity will go into the background. When navigating back to the application onCreate will only be called if the Activity had to be destroyed. \u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;In most cases if you\u0026apos;re just pressing home and then launching the app again the activity won\u0026apos;t need to be re-created. It already exists in memory so onCreate() won\u0026apos;t be called.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;There is an option under Settings -\u0026amp;gt; Developer Options called \u0026quot;Don\u0026apos;t keep activities\u0026quot;. When it\u0026apos;s enabled Android will always destroy activities and recreate them when they\u0026apos;re backgrounded. This is a great option to leave enabled when developing because it simulates the worst case scenario. ( A low memory device recycling your activities all the time ).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The other answers are valuable in that they teach you the correct ways to store state but I didn\u0026apos;t feel they really answered WHY your code wasn\u0026apos;t working in the way you expected.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;onSaveInstanceState(bundle)\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;onRestoreInstanceState(bundle)\u0026lt;/code\u0026gt; methods are useful for data persistence merely while rotating the screen (orientation change).\u0026lt;br\u0026gt;\nThey are not even good while switching between applications (since the \u0026lt;code\u0026gt;onSaveInstanceState()\u0026lt;/code\u0026gt; method is called but \u0026lt;code\u0026gt;onCreate(bundle)\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;onRestoreInstanceState(bundle)\u0026lt;/code\u0026gt; is not invoked again.\u0026lt;br\u0026gt;\nFor more persistence use shared preferences. \u0026lt;a href=\u0026quot;http://www.eigo.co.uk/Managing-State-in-an-Android-Activity.aspx\u0026quot;\u0026gt;read this article\u0026lt;/a\u0026gt;  \u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;My problem was that I needed persistence only during the application lifetime (i.e. a single execution including starting other sub-activities within the same app and rotating the device etc). I tried various combinations of the above answers but did not get what I wanted in all situations. In the end what worked for me was to obtain a reference to the savedInstanceState during onCreate:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-ini\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;mySavedInstanceState\u0026lt;/span\u0026gt;=savedInstanceState\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and use that to obtain the contents of my variable when I needed it, along the lines of:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (mySavedInstanceState !=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n   \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;myVariable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; mySavedInstanceState.getBoolean(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyVariable\u0026quot;\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;I use \u0026lt;code\u0026gt;onSaveInstanceState\u0026lt;/code\u0026gt;and \u0026lt;code\u0026gt;onRestoreInstanceState\u0026lt;/code\u0026gt; as suggested above but I guess i could also or alternatively use my method to save the variable when it changes (e.g. using \u0026lt;code\u0026gt;putBoolean\u0026lt;/code\u0026gt;)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Although the accepted answer is correct, there is a faster and easier method to save the Activity state on Android using a library called \u0026lt;a href=\u0026quot;https://github.com/frankiesardo/icepick\u0026quot;\u0026gt;Icepick\u0026lt;/a\u0026gt;. Icepick is an annotation processor that takes care of all the boilerplate code used in saving and restoring state for you. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Doing something like this with Icepick:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scala\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;MainActivity\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Activity\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@State\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; username; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// These will be automatically saved and restored\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@State\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; password;\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@State\u0026lt;/span\u0026gt; int age;\n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt; public void onCreate(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt; savedInstanceState) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onCreate(savedInstanceState);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Icepick\u0026lt;/span\u0026gt;.restoreInstanceState(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, savedInstanceState);\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt; public void onSaveInstanceState(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt; outState) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onSaveInstanceState(outState);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Icepick\u0026lt;/span\u0026gt;.saveInstanceState(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, outState);\n  }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Is the same as doing this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scala\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;MainActivity\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Activity\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; username;\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; password;\n  int age;\n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n  public void onSaveInstanceState(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt; savedInstanceState) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onSaveInstanceState(savedInstanceState);\n    savedInstanceState.putString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyString\u0026quot;\u0026lt;/span\u0026gt;, username);\n    savedInstanceState.putString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyPassword\u0026quot;\u0026lt;/span\u0026gt;, password);\n    savedInstanceState.putInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyAge\u0026quot;\u0026lt;/span\u0026gt;, age); \n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* remember you would need to actually initialize these variables before putting it in the\n    Bundle */\u0026lt;/span\u0026gt;\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n  public void onRestoreInstanceState(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt; savedInstanceState) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onRestoreInstanceState(savedInstanceState);\n    username = savedInstanceState.getString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyString\u0026quot;\u0026lt;/span\u0026gt;);\n    password = savedInstanceState.getString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyPassword\u0026quot;\u0026lt;/span\u0026gt;);\n    age = savedInstanceState.getInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyAge\u0026quot;\u0026lt;/span\u0026gt;);\n  }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Icepick will work with any object that saves its state with a \u0026lt;code\u0026gt;Bundle\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;When an activity is created it\u0026apos;s  onCreate() method is called.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;   \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle savedInstanceState\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;(savedInstanceState);\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;savedInstanceState is an object of Bundle class which is null for the first time, but it contains values when it is recreated. To save Activity\u0026apos;s state you have to override onSaveInstanceState().\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;   \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle outState\u0026lt;/span\u0026gt;) {\n      outState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putString\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;key\u0026quot;\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Welcome Back\u0026quot;\u0026lt;/span\u0026gt;)\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;(outState);       \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//save state\u0026lt;/span\u0026gt;\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;put your values in \u0026quot;outState\u0026quot; Bundle object like outState.putString(\u0026quot;key\u0026quot;,\u0026quot;Welcome Back\u0026quot;) and save by calling super.\nWhen activity will be destroyed it\u0026apos;s state get saved in Bundle object and can be restored after recreation in onCreate() or onRestoreInstanceState(). Bundle received in onCreate() and onRestoreInstanceState() are same.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;   \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle savedInstanceState\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;(savedInstanceState);\n        \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setContentView\u0026lt;/span\u0026gt;(R.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;layout\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-property\u0026quot;\u0026gt;activity_main\u0026lt;/span\u0026gt;);\n\n          \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//restore activity\u0026apos;s state\u0026lt;/span\u0026gt;\n         \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(savedInstanceState!=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;){\n          \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; reStoredString=savedInstanceState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getString\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;key\u0026quot;\u0026lt;/span\u0026gt;);\n            }\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//restores activity\u0026apos;s saved state\u0026lt;/span\u0026gt;\n \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onRestoreInstanceState\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle savedInstanceState\u0026lt;/span\u0026gt;) {\n      \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; restoredMessage=savedInstanceState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getString\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;key\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are basically two ways to implement this change.\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;using \u0026lt;code\u0026gt;onSaveInstanceState()\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;onRestoreInstanceState()\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;In manifest \u0026lt;code\u0026gt;android:configChanges=\u0026quot;orientation|screenSize\u0026quot;\u0026lt;/code\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\n\u0026lt;p\u0026gt;I really do not recommend to use second method. Since in one of my experience it was causing half of the device screen black while rotating from portrait to landscape and vice versa. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Using first method mentioned above , we can persist data when orientation is changed or any config change happens.\nI know a way in which you can store any type of data inside savedInstance state object.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Example: Consider a case if you want to persist Json object.\ncreate a model class with getters and setters .\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scala\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;MyModel\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Serializable\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;{\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;JSONObject\u0026lt;/span\u0026gt; obj;\n\nsetJsonObject(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;JsonObject\u0026lt;/span\u0026gt; obj)\n{\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.obj=obj;\n}\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;JSONObject\u0026lt;/span\u0026gt; getJsonObject()\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;.obj;\n} \n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;Now in your activity in onCreate and onSaveInstanceState method do the following. It will look something like this:\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle savedInstaceState\u0026lt;/span\u0026gt;){\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyModel\u0026lt;/span\u0026gt; data= (\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyModel\u0026lt;/span\u0026gt;)savedInstaceState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getSerializable\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;yourkey\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JSON\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt; obj=data.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getJsonObject\u0026lt;/span\u0026gt;();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Here you have retained JSONObject and can use.\u0026lt;/span\u0026gt;\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;protected\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle outState\u0026lt;/span\u0026gt;) {\n\u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;(outState);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Obj is some json object \u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyModel\u0026lt;/span\u0026gt; dataToSave= \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyModel\u0026lt;/span\u0026gt;();\ndataToSave.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;setJsonObject\u0026lt;/span\u0026gt;(obj);\noustate.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putSerializable\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;yourkey\u0026quot;\u0026lt;/span\u0026gt;,dataToSave); \n\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Here is a comment from \u0026lt;strong\u0026gt;Steve Moseley\u0026lt;/strong\u0026gt;\u0026apos;s answer (by \u0026lt;strong\u0026gt;ToolmakerSteve\u0026lt;/strong\u0026gt;) that puts things into perspective (in the whole onSaveInstanceState vs onPause, east cost vs west cost saga)\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;@VVK - I partially disagree. Some ways of exiting an app don\u0026apos;t trigger\n  onSaveInstanceState (oSIS). This limits the usefulness of oSIS. Its\n  worth supporting, for minimal OS resources, but if an app wants to\n  return the user to the state they were in, no matter how the app was\n  exited, it is necessary to use a persistent storage approach instead.\n  \u0026lt;strong\u0026gt;I use onCreate to check for bundle, and if it is missing, then check\u0026lt;/strong\u0026gt;\n  \u0026lt;strong\u0026gt;persistent storage.\u0026lt;/strong\u0026gt; This centralizes the decision making. I can\n  recover from a crash, or back button exit or custom menu item Exit, or\n  get back to screen user was on many days later.  ToolmakerSteve Sep\n  19 \u0026apos;15 at 10:38\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Kotlin code:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;save:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-kotlin\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;fun\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(outState: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onSaveInstanceState(outState.apply {\n        putInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;intKey\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;)\n        putString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;stringKey\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;String Value\u0026quot;\u0026lt;/span\u0026gt;)\n        putParcelable(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;parcelableKey\u0026quot;\u0026lt;/span\u0026gt;, parcelableObject)\n    })\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;and then in \u0026lt;code\u0026gt;onCreate()\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;onRestoreInstanceState()\u0026lt;/code\u0026gt; \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;restoredInt\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState?.getInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;intKey\u0026quot;\u0026lt;/span\u0026gt;) ?: \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//default int\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;restoredString\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState?.getString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;stringKey\u0026quot;\u0026lt;/span\u0026gt;) ?: \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;default string\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;restoredParcelable\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; savedInstanceState?.getParcelable\u0026amp;lt;ParcelableClass\u0026amp;gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;parcelableKey\u0026quot;\u0026lt;/span\u0026gt;) ?: ParcelableClass() \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//default parcelable\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Add default values if you don\u0026apos;t want to have Optionals\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;To get activity state data stored in \u0026lt;code\u0026gt;onCreate()\u0026lt;/code\u0026gt;, first you have to save data in savedInstanceState by overriding \u0026lt;code\u0026gt;SaveInstanceState(Bundle savedInstanceState)\u0026lt;/code\u0026gt; method.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;When activity destroy \u0026lt;code\u0026gt;SaveInstanceState(Bundle savedInstanceState)\u0026lt;/code\u0026gt; method gets called and there you save data you want to save. And you get same in \u0026lt;code\u0026gt;onCreate()\u0026lt;/code\u0026gt; when activity restart.(savedInstanceState wont be null since you have saved some data in it before activity get destroyed)\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h1\u0026gt;Kotlin\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;You must override \u0026lt;code\u0026gt;onSaveInstanceState\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;onRestoreInstanceState\u0026lt;/code\u0026gt; to store and retrieve your variables you want to be persistent\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;Life cycle graph\u0026lt;/h3\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;img src=\u0026quot;https://i.stack.imgur.com/Ts2F1.png\u0026quot;\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;Store variables\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-kotlin\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;fun\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(savedInstanceState: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onSaveInstanceState(savedInstanceState)\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// prepare variables here\u0026lt;/span\u0026gt;\n    savedInstanceState.putInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;kInt\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;)\n    savedInstanceState.putBoolean(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;kBool\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n    savedInstanceState.putDouble(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;kDouble\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;4.5\u0026lt;/span\u0026gt;)\n    savedInstanceState.putString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;kString\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Hello Kotlin\u0026quot;\u0026lt;/span\u0026gt;)\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;h3\u0026gt;Retrieve variables\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-kotlin\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;fun\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;onRestoreInstanceState\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(savedInstanceState: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onRestoreInstanceState(savedInstanceState)\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myInt = savedInstanceState.getInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;kInt\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myBoolean = savedInstanceState.getBoolean(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;kBool\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myDouble = savedInstanceState.getDouble(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;kDouble\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myString = savedInstanceState.getString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;kString\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// use variables here\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Not sure if my solution is frowned upon or not, but I use a bound service to persist ViewModel state. Whether you store it in memory in the service or persist and retrieve it from a SQLite database depends on your requirements. This is what services of any flavor do, they provide services such as maintaining application state and abstract common business logic. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Because of memory and processing constraints inherent on mobile devices, I treat Android views in a similar way to a web page. The page does not maintain state, it is purely a presentation layer component whose only purpose is to present application state and accept user input. Recent trends in web app architecture employ the use of the age-old Model, View, Controller (MVC) pattern, where the page is the View, domain data is the model, and the controller sits behind a web service. The same pattern can be employed in Android with the View being, well ... the View, the model is your domain data, and the Controller is implemented as an Android bound service. Whenever you want a view to interact with the controller, bind to it on start/resume and unbind on stop/pause.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;This approach gives you the added bonus of enforcing the Separation of Concern design principle in that all of you application business logic can be moved into your service which reduces duplicated logic across multiple views and allows the view to enforce another important design principle, Single Responsibility.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Simple quick to solve this problem is using \u0026lt;a href=\u0026quot;https://github.com/frankiesardo/icepick\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;IcePick\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;First, setup the library in \u0026lt;code\u0026gt;app/build.gradle\u0026lt;/code\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;repositories {\n  maven {url \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;https://clojars.org/repo/\u0026quot;\u0026lt;/span\u0026gt;}\n}\ndependencies {\n  \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;compile\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;frankiesardo:icepick:3.2.0\u0026apos;\u0026lt;/span\u0026gt;\n  provided \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;frankiesardo:icepick-processor:3.2.0\u0026apos;\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Now, let\u0026apos;s check this example below how to save state in Activity\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scala\u0026quot;\u0026gt;public \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;ExampleActivity\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Activity\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@State\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; username; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This will be automatically saved and restored\u0026lt;/span\u0026gt;\n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt; public void onCreate(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt; savedInstanceState) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onCreate(savedInstanceState);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Icepick\u0026lt;/span\u0026gt;.restoreInstanceState(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, savedInstanceState);\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt; public void onSaveInstanceState(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt; outState) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onSaveInstanceState(outState);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Icepick\u0026lt;/span\u0026gt;.saveInstanceState(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, outState);\n  }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It works for Activities, Fragments or any object that needs to serialize its state on a Bundle (e.g. mortar\u0026apos;s ViewPresenters)\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Icepick can also generate the instance state code for custom Views:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scala\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;CustomView\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;View\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@State\u0026lt;/span\u0026gt; int selectedPosition; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// This will be automatically saved and restored\u0026lt;/span\u0026gt;\n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt; public \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Parcelable\u0026lt;/span\u0026gt; onSaveInstanceState() {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Icepick\u0026lt;/span\u0026gt;.saveInstanceState(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onSaveInstanceState());\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt; public void onRestoreInstanceState(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Parcelable\u0026lt;/span\u0026gt; state) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onRestoreInstanceState(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Icepick\u0026lt;/span\u0026gt;.restoreInstanceState(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;, state));\n  }\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// You can put the calls to Icepick into a BaseCustomView and inherit from it\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// All Views extending this CustomView automatically have state saved/restored\u0026lt;/span\u0026gt;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Now Android provides \u0026lt;a href=\u0026quot;https://developer.android.com/topic/libraries/architecture/saving-states\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;ViewModels\u0026lt;/a\u0026gt; for saving state, you should try to use that instead of saveInstanceState.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There is a way to make Android save the states without implementing any method. Just add this line to your Manifest in Activity declaration:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-vbnet\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-symbol\u0026quot;\u0026gt;android:\u0026lt;/span\u0026gt;configChanges=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;orientation|screenSize\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;It should look like this:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-xml\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;activity\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:name\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;.activities.MyActivity\u0026quot;\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-attr\u0026quot;\u0026gt;android:configChanges\u0026lt;/span\u0026gt;=\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;orientation|screenSize\u0026quot;\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-tag\u0026quot;\u0026gt;\u0026amp;lt;/\u0026lt;span class=\u0026quot;hljs-name\u0026quot;\u0026gt;activity\u0026lt;/span\u0026gt;\u0026amp;gt;\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://developer.android.com/guide/topics/resources/runtime-changes\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Here\u0026lt;/a\u0026gt; you can find more information about this property. \u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It\u0026apos;s recommended to let Android handle this for you than the manually handling.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;What to save and what not to?\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;Ever wondered why the text in the \u0026lt;code\u0026gt;EditText\u0026lt;/code\u0026gt; gets saved automatically while an orientation change? Well, this answer is for you.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;When an instance of an Activity gets destroyed and the System recreates a new instance (for example, configuration change). It tries to recreate it using a set of saved data of old Activity State (\u0026lt;strong\u0026gt;instance state\u0026lt;/strong\u0026gt;).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Instance state is a collection of \u0026lt;strong\u0026gt;key-value\u0026lt;/strong\u0026gt; pairs stored in a \u0026lt;code\u0026gt;Bundle\u0026lt;/code\u0026gt; object.\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;By default System saves the View objects in the Bundle for example.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Text in \u0026lt;code\u0026gt;EditText\u0026lt;/code\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Scroll position in a \u0026lt;code\u0026gt;ListView\u0026lt;/code\u0026gt;, etc.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\n\u0026lt;p\u0026gt;If you need another variable to be saved as a part of instance state you should \u0026lt;strong\u0026gt;OVERRIDE\u0026lt;/strong\u0026gt; \u0026lt;code\u0026gt;onSavedInstanceState(Bundle savedinstaneState)\u0026lt;/code\u0026gt; method.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For example, \u0026lt;code\u0026gt;int currentScore\u0026lt;/code\u0026gt; in a GameActivity\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;More detail about the onSavedInstanceState(Bundle savedinstaneState) while saving data\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle savedInstanceState\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Save the user\u0026apos;s current game state\u0026lt;/span\u0026gt;\n    savedInstanceState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;putInt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;STATE_SCORE\u0026lt;/span\u0026gt;, mCurrentScore);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Always call the superclass so it can save the view hierarchy state\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;(savedInstanceState);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;So by mistake if you forget to call\n  \u0026lt;code\u0026gt;super.onSaveInstanceState(savedInstanceState);\u0026lt;/code\u0026gt;the default behavior\n  will not work ie Text in EditText will not save.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;h3\u0026gt;Which to choose for restoring Activity state?\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;onCreate\u0026lt;/span\u0026gt;(Bundle savedInstanceState)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;OR\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;onRestoreInstanceState\u0026lt;/span\u0026gt;(Bundle savedInstanceState)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Both methods get the same Bundle object, so it does not really matter where you write your restoring logic. The only difference is that in \u0026lt;code\u0026gt;onCreate(Bundle savedInstanceState)\u0026lt;/code\u0026gt; method you will have to give a null check while it is not needed in the latter case. Other answers have already code snippets. You can refer them.\u0026lt;/p\u0026gt;\n\n\u0026lt;h3\u0026gt;More detail about the onRestoreInstanceState(Bundle savedinstaneState)\u0026lt;/h3\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-typescript\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onRestoreInstanceState\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;Bundle savedInstanceState\u0026lt;/span\u0026gt;) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Always call the superclass so it can restore the view hierarchy\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-variable language_\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;onRestoreInstanceState\u0026lt;/span\u0026gt;(savedInstanceState);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Restore state members from the saved instance\u0026lt;/span\u0026gt;\n    mCurrentScore = savedInstanceState.\u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getInt\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable constant_\u0026quot;\u0026gt;STATE_SCORE\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;Always call \u0026lt;code\u0026gt;super.onRestoreInstanceState(savedInstanceState);\u0026lt;/code\u0026gt; so that System restore the View hierarchy by default\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;h2\u0026gt;Bonus\u0026lt;/h2\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;onSaveInstanceState(Bundle savedInstanceState)\u0026lt;/code\u0026gt; is invoked by the system only when the user intends to come back to the Activity. For example, you are using App X and suddenly you get a call. You move to the caller app and come back to the app X. In this case the \u0026lt;code\u0026gt;onSaveInstanceState(Bundle savedInstanceState)\u0026lt;/code\u0026gt; method will be invoked.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;But consider this if a user presses the back button. It is assumed that the user does not intend to come back to the Activity, hence in this case \u0026lt;code\u0026gt;onSaveInstanceState(Bundle savedInstanceState)\u0026lt;/code\u0026gt; will not be invoked by the system.\nPoint being you should consider all the scenarios while saving data.\u0026lt;/p\u0026gt;\n\n\u0026lt;h1\u0026gt;Relevant links:\u0026lt;/h1\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/rohitksingh/My_Android_Garage/blob/master/Activity%20Related%20Stuff/app/src/main/java/rohitksingh/com/activityrelatedstuff/FirstActivity.java\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Demo on default behavior\u0026lt;/a\u0026gt;\u0026lt;br\u0026gt;\n\u0026lt;a href=\u0026quot;https://developer.android.com/guide/components/activities/activity-lifecycle#saras\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;Android Official Documentation\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Now it makes sense to do 2 ways in the view model.\nif you want to save the first as a saved instance:\nYou can add state parameter in view model like this\n\u0026lt;a href=\u0026quot;https://developer.android.com/topic/libraries/architecture/viewmodel-savedstate#java\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://developer.android.com/topic/libraries/architecture/viewmodel-savedstate#java\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;or you can save variables or object in view model, in this case the view model will hold the life cycle until the activity is destroyed.\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scala\u0026quot;\u0026gt;public \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;HelloAndroidViewModel\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;ViewModel\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n   public \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Booelan\u0026lt;/span\u0026gt; firstInit = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n\n    public \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HelloAndroidViewModel\u0026lt;/span\u0026gt;() {\n        firstInit = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;false\u0026lt;/span\u0026gt;;\n    }\n    ...\n}\n\npublic \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;HelloAndroid\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Activity\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;TextView\u0026lt;/span\u0026gt; mTextView = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n  \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HelloAndroidViewModel\u0026lt;/span\u0026gt; viewModel = \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;ViewModelProviders\u0026lt;/span\u0026gt;.of(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;).get(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HelloAndroidViewModel\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;);\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Called when the activity is first created. */\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n  public void onCreate(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt; savedInstanceState) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onCreate(savedInstanceState);\n\n    mTextView = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;TextView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//Because even if the state is deleted, the data in the viewmodel will be kept because the activity does not destroy\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt;(!viewModel.firstInit){\n        viewModel.firstInit = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;\n        mTextView.setText(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Welcome to HelloAndroid!\u0026quot;\u0026lt;/span\u0026gt;);\n    }\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt;{\n       mTextView.setText(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Welcome back.\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n\n    setContentView(mTextView);\n  }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Kotlin Solution:\u0026lt;/strong\u0026gt;\nFor custom class save in \u0026lt;code\u0026gt;onSaveInstanceState\u0026lt;/code\u0026gt; you can be converted your class to \u0026lt;code\u0026gt;JSON\u0026lt;/code\u0026gt; string and restore it with \u0026lt;code\u0026gt;Gson\u0026lt;/code\u0026gt; convertion and for single \u0026lt;code\u0026gt;String, Double, Int, Long\u0026lt;/code\u0026gt; value save and restore as following. The following example is for \u0026lt;code\u0026gt;Fragment\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;Activity\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;For Activity:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For put data in \u0026lt;code\u0026gt;saveInstanceState\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-kotlin\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;fun\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(outState: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onSaveInstanceState(outState)\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//for custom class-----\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; gson = Gson()\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; json = gson.toJson(your_custom_class)\n        outState.putString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;CUSTOM_CLASS\u0026quot;\u0026lt;/span\u0026gt;, json)\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//for single value------\u0026lt;/span\u0026gt;\n        outState.putString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyString\u0026quot;\u0026lt;/span\u0026gt;, stringValue)\n        outState.putBoolean(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyBoolean\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;)\n        outState.putDouble(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;myDouble\u0026quot;\u0026lt;/span\u0026gt;, doubleValue)\n        outState.putInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyInt\u0026quot;\u0026lt;/span\u0026gt;, intValue)\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Restore data:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-kotlin\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;fun\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;onRestoreInstanceState\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(savedInstanceState: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onRestoreInstanceState(savedInstanceState)\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//for custom class restore\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; json = savedInstanceState?.getString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;CUSTOM_CLASS\u0026quot;\u0026lt;/span\u0026gt;)\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!json!!.isEmpty()) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; gson = Gson()\n        testBundle = gson.fromJson(json, Session::\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;.java)\n    }\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//for single value restore\u0026lt;/span\u0026gt;\n\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myBoolean: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Boolean\u0026lt;/span\u0026gt; = savedInstanceState?.getBoolean(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyBoolean\u0026quot;\u0026lt;/span\u0026gt;)\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myDouble: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Double\u0026lt;/span\u0026gt; = savedInstanceState?.getDouble(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;myDouble\u0026quot;\u0026lt;/span\u0026gt;)\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myInt: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Int\u0026lt;/span\u0026gt; = savedInstanceState?.getInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyInt\u0026quot;\u0026lt;/span\u0026gt;)\n   \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myString: String = savedInstanceState?.getString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyString\u0026quot;\u0026lt;/span\u0026gt;)\n }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;You can restore it on Activity \u0026lt;code\u0026gt;onCreate\u0026lt;/code\u0026gt; also.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;For fragment:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;For put class in \u0026lt;code\u0026gt;saveInstanceState\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-kotlin\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;fun\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;onSaveInstanceState\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(outState: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt;)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onSaveInstanceState(outState)\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; gson = Gson()\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; json = gson.toJson(customClass)\n        outState.putString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;CUSTOM_CLASS\u0026quot;\u0026lt;/span\u0026gt;, json)\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Restore data:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-kotlin\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;override\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;fun\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;onActivityCreated\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(savedInstanceState: \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt;?)\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onActivityCreated(savedInstanceState)\n\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;//for custom class restore\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (savedInstanceState != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; json = savedInstanceState.getString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;CUSTOM_CLASS\u0026quot;\u0026lt;/span\u0026gt;)\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (!json!!.isEmpty()) {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; gson = Gson()\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; customClass: CustomClass = gson.fromJson(json, CustomClass::\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt;.java)\n            }\n        }\n\n      \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// for single value restore\u0026lt;/span\u0026gt;\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myBoolean: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Boolean\u0026lt;/span\u0026gt; = savedInstanceState.getBoolean(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyBoolean\u0026quot;\u0026lt;/span\u0026gt;)\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myDouble: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Double\u0026lt;/span\u0026gt; = savedInstanceState.getDouble(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;myDouble\u0026quot;\u0026lt;/span\u0026gt;)\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myInt: \u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;Int\u0026lt;/span\u0026gt; = savedInstanceState.getInt(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyInt\u0026quot;\u0026lt;/span\u0026gt;)\n      \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;val\u0026lt;/span\u0026gt; myString: String = savedInstanceState.getString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;MyString\u0026quot;\u0026lt;/span\u0026gt;)\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    "],"id":257,"title":"How can I save an activity state using the save instance state?","content":"\n                \n\u0026lt;p\u0026gt;I\u0026apos;ve been working on the Android SDK platform, and it is a little unclear how to save an application\u0026apos;s state. So given this minor re-tooling of the \u0026apos;Hello, Android\u0026apos; example:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scala\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; com.android.hello;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.app.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Activity\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.os.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; android.widget.\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;TextView\u0026lt;/span\u0026gt;;\n\npublic \u0026lt;span class=\u0026quot;hljs-class\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;HelloAndroid\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;Activity\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;{\n\n  \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;TextView\u0026lt;/span\u0026gt; mTextView = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/** Called when the activity is first created. */\u0026lt;/span\u0026gt;\n  \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n  public void onCreate(\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Bundle\u0026lt;/span\u0026gt; savedInstanceState) {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;super\u0026lt;/span\u0026gt;.onCreate(savedInstanceState);\n\n    mTextView = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;TextView\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;this\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (savedInstanceState == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n       mTextView.setText(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Welcome to HelloAndroid!\u0026quot;\u0026lt;/span\u0026gt;);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n       mTextView.setText(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Welcome back.\u0026quot;\u0026lt;/span\u0026gt;);\n    }\n\n    setContentView(mTextView);\n  }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;I thought it would be enough for the simplest case, but it always responds with the first message, no matter how I navigate away from the app.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I\u0026apos;m sure the solution is as simple as overriding \u0026lt;code\u0026gt;onPause\u0026lt;/code\u0026gt; or something like that, but I\u0026apos;ve been poking away in the documentation for 30 minutes or so and haven\u0026apos;t found anything obvious.\u0026lt;/p\u0026gt;\n    ","slug":"how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981","postType":"QUESTION","createdAt":"2022-07-09T17:23:49.000Z","updatedAt":"2022-07-09T17:23:49.000Z","tags":[{"id":1652,"name":"application-state","slug":"application-state","createdAt":"2022-07-09T17:23:50.000Z","updatedAt":"2022-07-09T17:23:50.000Z","Questions_Tags":{"questionId":257,"tagId":1652}}],"relatedQuestions":[{"title":"How can I save an activity state using the save instance state?","slug":"how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981","tags":[{"name":"application-state","Questions_Tags":{"questionId":257,"tagId":1652}}]}]},"randomQuestions":[{"title":"How do I profile a Python script?","slug":"how-do-i-profile-a-python-script-1657388346692"},{"title":"How do I split a list into equally-sized chunks?","slug":"how-do-i-split-a-list-into-equally-sized-chunks-1657384580399"},{"title":"How can I fix 'android.os.NetworkOnMainThreadException'?","slug":"how-can-i-fix-'android.os.networkonmainthreadexception'-1657384454963"},{"title":"Why are mutable structs evil?","slug":"why-are-mutable-structs-\"evil\"-1657388508974"},{"title":"What is a stack trace, and how can I use it to debug my application errors?","slug":"what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors-1657384750732"},{"title":"Why Use Integer Instead of Long?","slug":"why-use-integer-instead-of-long-1657388012352"},{"title":"Why is 24.0000 not equal to 24.0000 in MATLAB?","slug":"why-is-24.0000-not-equal-to-24.0000-in-matlab-1657388376753"},{"title":"How should a model be structured in MVC? [closed]","slug":"how-should-a-model-be-structured-in-mvc-closed-1657388394807"},{"title":"How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?","slug":"how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other-resources-needed-by-my-javafx-application-1657388143988"},{"title":"Sorting an array of objects by property values","slug":"sorting-an-array-of-objects-by-property-values-1657387447490"},{"title":"The 3 different equals","slug":"the-3-different-equals-1657385490242"},{"title":"How do I write a correct micro-benchmark in Java?","slug":"how-do-i-write-a-correct-micro-benchmark-in-java-1657384488725"},{"title":"What is object slicing?","slug":"what-is-object-slicing-1657384506425"},{"title":"Dynamically select data frame columns using $ and a character value","slug":"dynamically-select-data-frame-columns-using-dollar-and-a-character-value-1657387836662"},{"title":"How do I return the response from an asynchronous call?","slug":"how-do-i-return-the-response-from-an-asynchronous-call-1657384208012"},{"title":"What are valid values for the id attribute in HTML?","slug":"what-are-valid-values-for-the-id-attribute-in-html-1657384874780"},{"title":"Web-scraping JavaScript page with Python","slug":"web-scraping-javascript-page-with-python-1657388240875"},{"title":"How do I give text or an image a transparent background using CSS?","slug":"how-do-i-give-text-or-an-image-a-transparent-background-using-css-1657388188508"},{"title":"Why are these constructs using pre and post-increment undefined behavior?","slug":"why-are-these-constructs-using-pre-and-post-increment-undefined-behavior-1657384520109"},{"title":"How do I make a redirect in PHP?","slug":"how-do-i-make-a-redirect-in-php-1657387381903"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981"},"buildId":"DSpI0pSdXueTMCIVyw0q4","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>