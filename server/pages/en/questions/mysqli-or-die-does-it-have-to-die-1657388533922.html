<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/mysqli-or-die-does-it-have-to-die-1657388533922","name":"Questions"}}]}</script><title>mysqli or die, does it have to die? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="If I use a bit of code like this: 

$update_result = mysqli_query( $link , $sql_update_login ) or die (&#x27;Unable to execute query. &#x27;. mysqli_error($link));


Does it have to die or can you put a different query afterwards?  Like a predetermined function that writes a log of the error to another table?  Such as:

$update_result = mysqli_query( $link , $sql_update_login ) or function(&#x27;$query, $error);


What are the other options after &#x27;or&#x27;?  I haven&#x27;t found it in the documentation, any clues are appreciated.
    "/><meta property="og:title" content="mysqli or die, does it have to die? | Solution Checker"/><meta property="og:description" content="If I use a bit of code like this: 

$update_result = mysqli_query( $link , $sql_update_login ) or die (&#x27;Unable to execute query. &#x27;. mysqli_error($link));


Does it have to die or can you put a different query afterwards?  Like a predetermined function that writes a log of the error to another table?  Such as:

$update_result = mysqli_query( $link , $sql_update_login ) or function(&#x27;$query, $error);


What are the other options after &#x27;or&#x27;?  I haven&#x27;t found it in the documentation, any clues are appreciated.
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"mysqli or die, does it have to die?","text":"If I use a bit of code like this: \n\n$update_result = mysqli_query( $link , $sql_update_login ) or die (&apos;Unable to execute query. &apos;. mysqli_error($link));\n\n\nDoes it have to die or can you put a different query afterwards?  Like a predetermined function that writes a log of the error to another table?  Such as:\n\n$update_result = mysqli_query( $link , $sql_update_login ) or function(&apos;$query, $error);\n\n\nWhat are the other options after &apos;or&apos;?  I haven&apos;t found it in the documentation, any clues are appreciated.\n    ","answerCount":4,"upVoteCount":500,"suggestedAnswer":[{"text":"\nDoes it have to die\n\nQuite contrary, it shouldn&apos;t or die() ever.\nPHP is a language of bad heredity. Very bad heredity. And or die() with error message is one of the worst rudiments:\n\ndie throws the error message out, revealing some system internals to the potential attacker\nsuch error message confuses casual users, because they don&apos;t understand what does it mean\nBesides, die kills the script in the middle, leaving users without  familiar interface to work with, so they&apos;d likely just drop out\nit kills the script irrecoverably. While exceptions can be caught and gracefully handled\ndie() gives you no hint of where the error has been occurred. And in a relatively big application it will be quite a pain to find.\n\nSo, never use die() with MySQL errors, even for the temporary debugging: there are better ways.\nInstead of manually checking for the error, just configure mysqli to throw exceptions on error, by adding the following line to your connection code\nmysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n\nand after that just write every mysqli command as is, without any or die or anything else:\n$result = mysqli_query($link, $sql);\n\nThis code will throw an exception in case of error and thus you will always be informed of every problem without a single line of extra code.\nA more detailed explanation on how to make your error reporting production ready, uniform and overall sensible while making your code much cleaner, you can find in my article on PHP error reporting.\n    ","url":"https://solutionschecker.com/questions/mysqli-or-die-does-it-have-to-die-1657388533922#solution1","@type":"Answer","upvoteCount":0},{"text":"or is just an operator (very similar to ||).\n\nThe or die() syntax works because or short-circuits, which means that if the first statement is true, True or X will always be true, so X isn&apos;t evaluated and your script doesn&apos;t die.\n    ","url":"https://solutionschecker.com/questions/mysqli-or-die-does-it-have-to-die-1657388533922#solution2","@type":"Answer","upvoteCount":0},{"text":"Yes, you can provide a different function after the (or).\nI have tested the following:\n\nmysqli_query($sel_db,&apos;what!&apos;) or some_func(mysqli_error($sel_db));\n\nfunction some_func($str) {\n    die(&quot;ERROR: &quot;.$str);\n}\n\n    ","url":"https://solutionschecker.com/questions/mysqli-or-die-does-it-have-to-die-1657388533922#solution3","@type":"Answer","upvoteCount":0},{"text":"It doesn&apos;t have to be die() specifically, but it needs to be something that&apos;ll make the script halt by calling exit() or die(), or something that throws an exception. Otherwise, the script will continue with the return value of that function (which is probably either null or some sort of junk) in $update_result, which will almost certainly cause problems.\n    ","url":"https://solutionschecker.com/questions/mysqli-or-die-does-it-have-to-die-1657388533922#solution4","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><script id="google-analytics" data-nscript="beforeInteractive">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NXVLL8B');</script><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-862498b6ec7885c3.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-47289857226115f9.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_buildManifest.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_ssgManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXVLL8B"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/mysqli-or-die-does-it-have-to-die-1657388533922#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/mysqli-or-die-does-it-have-to-die-1657388533922"><h1>mysqli or die, does it have to die?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>If I use a bit of code like this: </p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-variable">$update_result</span> = <span class="hljs-title function_ invoke__">mysqli_query</span>( <span class="hljs-variable">$link</span> , <span class="hljs-variable">$sql_update_login</span> ) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> (<span class="hljs-string">'Unable to execute query. '</span>. <span class="hljs-title function_ invoke__">mysqli_error</span>(<span class="hljs-variable">$link</span>));
</code></pre>

<p>Does it have to die or can you put a different query afterwards?  Like a predetermined function that writes a log of the error to another table?  Such as:</p>

<pre class="default s-code-block"><code class="hljs language-swift"><span class="hljs-variable">$update_result</span> <span class="hljs-operator">=</span> mysqli_query( <span class="hljs-variable">$link</span> , <span class="hljs-variable">$sql_update_login</span> ) or function('<span class="hljs-variable">$query</span>, <span class="hljs-variable">$error</span>);
</code></pre>

<p>What are the other options after 'or'?  I haven't found it in the documentation, any clues are appreciated.</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<blockquote>
<p>Does it have to die</p>
</blockquote>
<p>Quite contrary, <strong>it shouldn't <code>or die()</code> ever.</strong><br>
PHP is a language of bad heredity. Very bad heredity. And <code>or die()</code> with error message is one of the worst rudiments:</p>
<ul>
<li>die throws the error message out, revealing some system internals to the potential attacker</li>
<li>such error message confuses casual users, because they don't understand what does it mean</li>
<li>Besides, <code>die</code> kills the script in the middle, leaving users without  familiar interface to work with, so they'd likely just drop out</li>
<li>it kills the script irrecoverably. While exceptions can be caught and gracefully handled</li>
<li><code>die()</code> gives you no hint of <em>where the error has been occurred</em>. And in a relatively big application it will be quite a pain to find.</li>
</ul>
<p>So, never use <code>die()</code> with MySQL errors, <strong>even for the temporary debugging</strong>: there are better ways.</p>
<p>Instead of manually checking for the error, just configure mysqli to throw exceptions on error, by adding the following line to your connection code</p>
<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-built_in">mysqli_report</span>(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
</code></pre>
<p>and after that just write every mysqli command as is, without any <code>or die</code> or anything else:</p>
<pre class="default s-code-block"><code class="hljs language-bash"><span class="hljs-variable">$result</span> = mysqli_query(<span class="hljs-variable">$link</span>, <span class="hljs-variable">$sql</span>);
</code></pre>
<p>This code will throw an exception in case of error and thus you will always be informed of every problem without a single line of extra code.</p>
<p>A more detailed explanation on how to make your error reporting production ready, uniform and overall sensible while making your code much cleaner, you can find in my article on <a href="https://phpdelusions.net/articles/error_reporting" rel="nofollow noreferrer">PHP error reporting</a>.</p>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><code>or</code> is just an operator (very similar to <code>||</code>).</p>

<p>The <code>or die()</code> syntax works because <code>or</code> short-circuits, which means that if the first statement is true, <code>True or X</code> will always be true, so <code>X</code> isn't evaluated and your script doesn't <code>die</code>.</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Yes, you can provide a different function after the (or).
I have tested the following:</p>

<pre class="default s-code-block"><code class="hljs language-php"><span class="hljs-title function_ invoke__">mysqli_query</span>(<span class="hljs-variable">$sel_db</span>,<span class="hljs-string">'what!'</span>) <span class="hljs-keyword">or</span> <span class="hljs-title function_ invoke__">some_func</span>(<span class="hljs-title function_ invoke__">mysqli_error</span>(<span class="hljs-variable">$sel_db</span>));

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">some_func</span>(<span class="hljs-params"><span class="hljs-variable">$str</span></span>) </span>{
    <span class="hljs-keyword">die</span>(<span class="hljs-string">"ERROR: "</span>.<span class="hljs-variable">$str</span>);
}
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>It doesn't have to be <code>die()</code> specifically, but it needs to be something that'll make the script halt by calling <code>exit()</code> or <code>die()</code>, or something that throws an exception. Otherwise, the script will continue with the return value of that function (which is probably either null or some sort of junk) in <code>$update_result</code>, which will almost certainly cause problems.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/convert-columns-into-rows-with-pandas-1657388374964">Convert columns into rows with Pandas</a><a href="/questions/is-it-possible-to-escape-regex-metacharacters-reliably-with-sed-1657388428795">Is it possible to escape regex metacharacters reliably with sed</a><a href="/questions/non-static-variable-cannot-be-referenced-from-a-static-context-1657387386240">Non-static variable cannot be referenced from a static context</a><a href="/questions/actual-meaning-of-&#x27;shelltrue&#x27;-in-subprocess-1657388470341">Actual meaning of &#x27;shell=True&#x27; in subprocess</a><a href="/questions/what-is-the-difference-between-%22px%22-%22dip%22-%22dp%22-and-%22sp%22-1657388093250">What is the difference between &quot;px&quot;, &quot;dip&quot;, &quot;dp&quot; and &quot;sp&quot;?</a><a href="/questions/list-of-lists-changes-reflected-across-sublists-unexpectedly-1657384393720">List of lists changes reflected across sublists unexpectedly</a><a href="/questions/how-can-i-get-query-string-values-in-javascript-1657384443631">How can I get query string values in JavaScript?</a><a href="/questions/what-are-valid-values-for-the-id-attribute-in-html-1657384874780">What are valid values for the id attribute in HTML?</a><a href="/questions/returning-data-from-async-call-in-swift-function-1657387469218">Returning data from async call in Swift function</a><a href="/questions/what-is-the-explicit-promise-construction-antipattern-and-how-do-i-avoid-it-1657384436212">What is the explicit promise construction antipattern and how do I avoid it?</a><a href="/questions/how-do-i-give-text-or-an-image-a-transparent-background-using-css-1657388188508">How do I give text or an image a transparent background using CSS?</a><a href="/questions/command-not-found-error-in-bash-variable-assignment-1657388326347">Command not found error in Bash variable assignment</a><a href="/questions/how-to-remove-%22noise%22-from-gccclang-assembly-output-1657387612391">How to remove &quot;noise&quot; from GCC/clang assembly output?</a><a href="/questions/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element-1657384326458">Why does jQuery or a DOM method such as getElementById not find the element?</a><a href="/questions/open-a-url-in-a-new-tab-(and-not-a-new-window)-1657387699598">Open a URL in a new tab (and not a new window)</a><a href="/questions/how-do-you-use-bcrypt-for-hashing-passwords-in-php-duplicate-1657387318517">How do you use bcrypt for hashing passwords in PHP? [duplicate]</a><a href="/questions/selecting-and-manipulating-css-pseudo-elements-such-as-::before-and-::after-using-javascript-(or-jquery)-1657387406132">Selecting and manipulating CSS pseudo-elements such as ::before and ::after using javascript (or jQuery)</a><a href="/questions/why-shouldn&#x27;t-i-use-mysql_*-functions-in-php-1657384260352">Why shouldn&#x27;t I use mysql_* functions in PHP?</a><a href="/questions/big-o-how-do-you-calculateapproximate-it-1657387856392">Big O, how do you calculate/approximate it?</a><a href="/questions/css-selector-for-first-element-with-class-1657388028765">CSS selector for first element with class</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Does it have to die\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;Quite contrary, \u0026lt;strong\u0026gt;it shouldn\u0026apos;t \u0026lt;code\u0026gt;or die()\u0026lt;/code\u0026gt; ever.\u0026lt;/strong\u0026gt;\u0026lt;br\u0026gt;\nPHP is a language of bad heredity. Very bad heredity. And \u0026lt;code\u0026gt;or die()\u0026lt;/code\u0026gt; with error message is one of the worst rudiments:\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;die throws the error message out, revealing some system internals to the potential attacker\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;such error message confuses casual users, because they don\u0026apos;t understand what does it mean\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;Besides, \u0026lt;code\u0026gt;die\u0026lt;/code\u0026gt; kills the script in the middle, leaving users without  familiar interface to work with, so they\u0026apos;d likely just drop out\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;it kills the script irrecoverably. While exceptions can be caught and gracefully handled\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;code\u0026gt;die()\u0026lt;/code\u0026gt; gives you no hint of \u0026lt;em\u0026gt;where the error has been occurred\u0026lt;/em\u0026gt;. And in a relatively big application it will be quite a pain to find.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;p\u0026gt;So, never use \u0026lt;code\u0026gt;die()\u0026lt;/code\u0026gt; with MySQL errors, \u0026lt;strong\u0026gt;even for the temporary debugging\u0026lt;/strong\u0026gt;: there are better ways.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Instead of manually checking for the error, just configure mysqli to throw exceptions on error, by adding the following line to your connection code\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;mysqli_report\u0026lt;/span\u0026gt;(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;and after that just write every mysqli command as is, without any \u0026lt;code\u0026gt;or die\u0026lt;/code\u0026gt; or anything else:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$result\u0026lt;/span\u0026gt; = mysqli_query(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$link\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;This code will throw an exception in case of error and thus you will always be informed of every problem without a single line of extra code.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;A more detailed explanation on how to make your error reporting production ready, uniform and overall sensible while making your code much cleaner, you can find in my article on \u0026lt;a href=\u0026quot;https://phpdelusions.net/articles/error_reporting\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;PHP error reporting\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;code\u0026gt;or\u0026lt;/code\u0026gt; is just an operator (very similar to \u0026lt;code\u0026gt;||\u0026lt;/code\u0026gt;).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;or die()\u0026lt;/code\u0026gt; syntax works because \u0026lt;code\u0026gt;or\u0026lt;/code\u0026gt; short-circuits, which means that if the first statement is true, \u0026lt;code\u0026gt;True or X\u0026lt;/code\u0026gt; will always be true, so \u0026lt;code\u0026gt;X\u0026lt;/code\u0026gt; isn\u0026apos;t evaluated and your script doesn\u0026apos;t \u0026lt;code\u0026gt;die\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Yes, you can provide a different function after the (or).\nI have tested the following:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;mysqli_query\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sel_db\u0026lt;/span\u0026gt;,\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;what!\u0026apos;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;some_func\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;mysqli_error\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sel_db\u0026lt;/span\u0026gt;));\n\n\u0026lt;span class=\u0026quot;hljs-function\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;function\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title\u0026quot;\u0026gt;some_func\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$str\u0026lt;/span\u0026gt;\u0026lt;/span\u0026gt;) \u0026lt;/span\u0026gt;{\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;die\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;ERROR: \u0026quot;\u0026lt;/span\u0026gt;.\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$str\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;It doesn\u0026apos;t have to be \u0026lt;code\u0026gt;die()\u0026lt;/code\u0026gt; specifically, but it needs to be something that\u0026apos;ll make the script halt by calling \u0026lt;code\u0026gt;exit()\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;die()\u0026lt;/code\u0026gt;, or something that throws an exception. Otherwise, the script will continue with the return value of that function (which is probably either null or some sort of junk) in \u0026lt;code\u0026gt;$update_result\u0026lt;/code\u0026gt;, which will almost certainly cause problems.\u0026lt;/p\u0026gt;\n    "],"id":599,"title":"mysqli or die, does it have to die?","content":"\n                \n\u0026lt;p\u0026gt;If I use a bit of code like this: \u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-php\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$update_result\u0026lt;/span\u0026gt; = \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;mysqli_query\u0026lt;/span\u0026gt;( \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$link\u0026lt;/span\u0026gt; , \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql_update_login\u0026lt;/span\u0026gt; ) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;or\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;die\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;Unable to execute query. \u0026apos;\u0026lt;/span\u0026gt;. \u0026lt;span class=\u0026quot;hljs-title function_ invoke__\u0026quot;\u0026gt;mysqli_error\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$link\u0026lt;/span\u0026gt;));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Does it have to die or can you put a different query afterwards?  Like a predetermined function that writes a log of the error to another table?  Such as:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-swift\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$update_result\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; mysqli_query( \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$link\u0026lt;/span\u0026gt; , \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$sql_update_login\u0026lt;/span\u0026gt; ) or function(\u0026apos;\u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$query\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;$error\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;What are the other options after \u0026apos;or\u0026apos;?  I haven\u0026apos;t found it in the documentation, any clues are appreciated.\u0026lt;/p\u0026gt;\n    ","slug":"mysqli-or-die-does-it-have-to-die-1657388533922","postType":"QUESTION","createdAt":"2022-07-09T17:42:13.000Z","updatedAt":"2022-07-09T17:42:13.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"Convert columns into rows with Pandas","slug":"convert-columns-into-rows-with-pandas-1657388374964"},{"title":"Is it possible to escape regex metacharacters reliably with sed","slug":"is-it-possible-to-escape-regex-metacharacters-reliably-with-sed-1657388428795"},{"title":"Non-static variable cannot be referenced from a static context","slug":"non-static-variable-cannot-be-referenced-from-a-static-context-1657387386240"},{"title":"Actual meaning of 'shell=True' in subprocess","slug":"actual-meaning-of-'shelltrue'-in-subprocess-1657388470341"},{"title":"What is the difference between \"px\", \"dip\", \"dp\" and \"sp\"?","slug":"what-is-the-difference-between-\"px\"-\"dip\"-\"dp\"-and-\"sp\"-1657388093250"},{"title":"List of lists changes reflected across sublists unexpectedly","slug":"list-of-lists-changes-reflected-across-sublists-unexpectedly-1657384393720"},{"title":"How can I get query string values in JavaScript?","slug":"how-can-i-get-query-string-values-in-javascript-1657384443631"},{"title":"What are valid values for the id attribute in HTML?","slug":"what-are-valid-values-for-the-id-attribute-in-html-1657384874780"},{"title":"Returning data from async call in Swift function","slug":"returning-data-from-async-call-in-swift-function-1657387469218"},{"title":"What is the explicit promise construction antipattern and how do I avoid it?","slug":"what-is-the-explicit-promise-construction-antipattern-and-how-do-i-avoid-it-1657384436212"},{"title":"How do I give text or an image a transparent background using CSS?","slug":"how-do-i-give-text-or-an-image-a-transparent-background-using-css-1657388188508"},{"title":"Command not found error in Bash variable assignment","slug":"command-not-found-error-in-bash-variable-assignment-1657388326347"},{"title":"How to remove \"noise\" from GCC/clang assembly output?","slug":"how-to-remove-\"noise\"-from-gccclang-assembly-output-1657387612391"},{"title":"Why does jQuery or a DOM method such as getElementById not find the element?","slug":"why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element-1657384326458"},{"title":"Open a URL in a new tab (and not a new window)","slug":"open-a-url-in-a-new-tab-(and-not-a-new-window)-1657387699598"},{"title":"How do you use bcrypt for hashing passwords in PHP? [duplicate]","slug":"how-do-you-use-bcrypt-for-hashing-passwords-in-php-duplicate-1657387318517"},{"title":"Selecting and manipulating CSS pseudo-elements such as ::before and ::after using javascript (or jQuery)","slug":"selecting-and-manipulating-css-pseudo-elements-such-as-::before-and-::after-using-javascript-(or-jquery)-1657387406132"},{"title":"Why shouldn't I use mysql_* functions in PHP?","slug":"why-shouldn't-i-use-mysql_*-functions-in-php-1657384260352"},{"title":"Big O, how do you calculate/approximate it?","slug":"big-o-how-do-you-calculateapproximate-it-1657387856392"},{"title":"CSS selector for first element with class","slug":"css-selector-for-first-element-with-class-1657388028765"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"mysqli-or-die-does-it-have-to-die-1657388533922"},"buildId":"xZs8haGjOP63QuDE0kxeX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>