{"pageProps":{"data":{"answer":["\n&lt;p&gt;Using &lt;code&gt;reshape&lt;/code&gt; function:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;reshape&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; idvar &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; timevar &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;numbers&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; direction &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;wide&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The new (in 2014) &lt;code&gt;tidyr&lt;/code&gt; package also does this simply, with &lt;code&gt;gather()&lt;/code&gt;/&lt;code&gt;spread()&lt;/code&gt; being the terms for &lt;code&gt;melt&lt;/code&gt;/&lt;code&gt;cast&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Edit:&lt;/strong&gt; Now, in 2019, tidyr v 1.0 has launched and set &lt;code&gt;spread&lt;/code&gt; and &lt;code&gt;gather&lt;/code&gt; on a deprecation path, preferring instead &lt;code&gt;pivot_wider&lt;/code&gt; and &lt;code&gt;pivot_longer&lt;/code&gt;, which you can find described &lt;a href=&quot;https://stackoverflow.com/a/57013551/903061&quot;&gt;in this answer&lt;/a&gt;. Read on if you want a brief glimpse into the brief life of &lt;code&gt;spread/gather&lt;/code&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;tidyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nspread&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; key &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; numbers&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;From &lt;a href=&quot;https://github.com/hadley/tidyr&quot; rel=&quot;noreferrer&quot;&gt;github&lt;/a&gt;,&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;code&gt;tidyr&lt;/code&gt; is a reframing of &lt;code&gt;reshape2&lt;/code&gt; designed to accompany the tidy data framework, and to work hand-in-hand with &lt;code&gt;magrittr&lt;/code&gt; and &lt;code&gt;dplyr&lt;/code&gt; to build a solid pipeline for data analysis.&lt;/p&gt;\n&lt;p&gt;Just as &lt;code&gt;reshape2&lt;/code&gt; did less than reshape, &lt;code&gt;tidyr&lt;/code&gt; does less than &lt;code&gt;reshape2&lt;/code&gt;. It&apos;s designed specifically for tidying data, not the general reshaping that &lt;code&gt;reshape2&lt;/code&gt; does, or the general aggregation that reshape did. In particular, built-in methods only work for data frames, and &lt;code&gt;tidyr&lt;/code&gt; provides no margins or aggregation.&lt;/p&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;p&gt;You can do this with the &lt;code&gt;reshape()&lt;/code&gt; function, or with the &lt;code&gt;melt()&lt;/code&gt; / &lt;code&gt;cast()&lt;/code&gt; functions in the reshape package. For the second option, example code is&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;reshape&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ncast&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; name &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; numbers&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or using &lt;code&gt;reshape2&lt;/code&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;reshape2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndcast&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; name &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; numbers&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Another option if performance is a concern is to use &lt;code&gt;data.table&lt;/code&gt;&apos;s extension of &lt;code&gt;reshape2&lt;/code&gt;&apos;s melt &amp;amp; dcast functions&lt;/p&gt;\n\n&lt;p&gt;(&lt;a href=&quot;https://cran.r-project.org/web/packages/data.table/vignettes/datatable-reshape.html&quot; rel=&quot;noreferrer&quot;&gt;Reference: Efficient reshaping using data.tables&lt;/a&gt;)&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\nsetDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndcast&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; name &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; numbers&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value.var &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#          name          1          2         3         4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1:  firstName  0.1836433 -0.8356286 1.5952808 0.3295078&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2: secondName -0.8204684  0.4874291 0.7383247 0.5757814&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And, as of data.table v1.9.6 we can cast on multiple columns&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;## add an extra column&lt;/span&gt;\ndat1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value2 &lt;span class=&quot;hljs-operator&quot;&gt;:=&lt;/span&gt; value &lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;## cast multiple value columns&lt;/span&gt;\ndcast&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; name &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; numbers&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value.var &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;value2&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#          name    value_1    value_2   value_3   value_4   value2_1   value2_2 value2_3  value2_4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1:  firstName  0.1836433 -0.8356286 1.5952808 0.3295078  0.3672866 -1.6712572 3.190562 0.6590155&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2: secondName -0.8204684  0.4874291 0.7383247 0.5757814 -1.6409368  0.9748581 1.476649 1.1515627&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;With the devel version of &lt;code&gt;tidyr&lt;/code&gt; &lt;code&gt;0.8.3.9000&lt;/code&gt;, there is &lt;code&gt;pivot_wider&lt;/code&gt; and &lt;code&gt;pivot_longer&lt;/code&gt; which is generalized to do the reshaping (long -&amp;gt; wide, wide -&amp;gt; long, respectively) from 1 to multiple columns.  Using the OP&apos;s data&lt;/p&gt;\n\n&lt;p&gt;-single column long -&amp;gt; wide&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dplyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;tidyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndat1 &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; \n    pivot_wider&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;names_from &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; numbers&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; values_from &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# A tibble: 2 x 5&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#  name          `1`    `2`    `3`    `4`&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#  &amp;lt;fct&amp;gt;       &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#1 firstName   0.341 -0.703 -0.380 -0.746&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#2 secondName -0.898 -0.335 -0.501 -0.175&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;-&amp;gt; created another column for showing the functionality&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;dat1 &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; \n    mutate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;value2 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; value &lt;span class=&quot;hljs-operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; \n    pivot_wider&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;names_from &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; numbers&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; values_from &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;value2&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# A tibble: 2 x 9&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#  name       value_1 value_2 value_3 value_4 value2_1 value2_2 value2_3 value2_4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#  &amp;lt;fct&amp;gt;        &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;    &amp;lt;dbl&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#1 firstName    0.341  -0.703  -0.380  -0.746    0.682   -1.41    -0.759   -1.49 &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#2 secondName  -0.898  -0.335  -0.501  -0.175   -1.80    -0.670   -1.00    -0.349&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Using your example dataframe, we could:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;xtabs&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; name &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; numbers&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; data &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Other two options:&lt;/p&gt;\n\n&lt;p&gt;Base package:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;df &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; unstack&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; form &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; value &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; numbers&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nrownames&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; unique&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dat1&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;name&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;code&gt;sqldf&lt;/code&gt; package:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;sqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nsqldf&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;SELECT name,\n      MAX(CASE WHEN numbers = 1 THEN value ELSE NULL END) x1, \n      MAX(CASE WHEN numbers = 2 THEN value ELSE NULL END) x2,\n      MAX(CASE WHEN numbers = 3 THEN value ELSE NULL END) x3,\n      MAX(CASE WHEN numbers = 4 THEN value ELSE NULL END) x4\n      FROM dat1\n      GROUP BY name&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Using base R &lt;code&gt;aggregate&lt;/code&gt; function:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;aggregate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; name&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; I&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# name           value.1  value.2  value.3  value.4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#1 firstName      0.4145  -0.4747   0.0659   -0.5024&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#2 secondName    -0.8259   0.1669  -0.8962    0.1681&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The base &lt;code&gt;reshape&lt;/code&gt; function works perfectly fine:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;df &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n  year   &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;2001&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n  month  &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n  values &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf_wide &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; reshape&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; idvar&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; timevar&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;month&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; v.names&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;values&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; direction&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;wide&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; sep&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;_&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf_wide\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Where&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;idvar&lt;/code&gt; is the column of classes that separates rows&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;timevar&lt;/code&gt; is the column of classes to cast wide&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;v.names&lt;/code&gt; is the column containing numeric values&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;direction&lt;/code&gt; specifies wide or long format&lt;/li&gt;\n&lt;li&gt;the optional &lt;code&gt;sep&lt;/code&gt; argument is the separator used in between &lt;code&gt;timevar&lt;/code&gt; class names and &lt;code&gt;v.names&lt;/code&gt; in the output &lt;code&gt;data.frame&lt;/code&gt;. &lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;If no &lt;code&gt;idvar&lt;/code&gt; exists, create one before using the &lt;code&gt;reshape()&lt;/code&gt; function:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;df&lt;span class=&quot;hljs-operator&quot;&gt;$&lt;/span&gt;id   &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;year1&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;year2&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf_wide &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; reshape&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; idvar&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; timevar&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;month&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; v.names&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;values&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; direction&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;wide&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; sep&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;_&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf_wide\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Just remember that &lt;code&gt;idvar&lt;/code&gt; is required! The &lt;code&gt;timevar&lt;/code&gt; and &lt;code&gt;v.names&lt;/code&gt; part is easy. The output of this function is more predictable than some of the others, as everything is explicitly defined.&lt;/p&gt;\n    ","\n&lt;p&gt;There&apos;s very powerful new package from genius data scientists at Win-Vector (folks that made &lt;code&gt;vtreat&lt;/code&gt;, &lt;code&gt;seplyr&lt;/code&gt; and &lt;code&gt;replyr&lt;/code&gt;) called &lt;code&gt;cdata&lt;/code&gt;. It implements &quot;coordinated data&quot; principles described in &lt;a href=&quot;https://github.com/WinVector/cdata/blob/master/extras/RowsAndColumns.md&quot; rel=&quot;noreferrer&quot;&gt;this document&lt;/a&gt; and also in this &lt;a href=&quot;http://www.win-vector.com/blog/2017/03/coordinatized-data-a-fluid-data-specification/&quot; rel=&quot;noreferrer&quot;&gt;blog post&lt;/a&gt;. The idea is that regardless how you organize your data, it should be possible to identify individual data points using a system of &quot;data coordinates&quot;. Here&apos;s a excerpt from the recent blog post by John Mount:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;The whole system is based on two primitives or operators\n  cdata::moveValuesToRowsD() and cdata::moveValuesToColumnsD(). These\n  operators have pivot, un-pivot, one-hot encode, transpose, moving\n  multiple rows and columns, and many other transforms as simple special\n  cases. &lt;/p&gt;\n  \n  &lt;p&gt;It is easy to write many different operations in terms of the\n  cdata primitives. These operators can work-in memory or at big data\n  scale (with databases and Apache Spark; for big data use the\n  cdata::moveValuesToRowsN() and cdata::moveValuesToColumnsN()\n  variants). The transforms are controlled by a control table that\n  itself is a diagram of (or picture of) the transform.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;We will first build the control table (see &lt;a href=&quot;http://www.win-vector.com/blog/2017/03/coordinatized-data-a-fluid-data-specification/&quot; rel=&quot;noreferrer&quot;&gt;blog post&lt;/a&gt; for details) and then perform the move of data from rows to columns.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;cdata&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# first build the control table&lt;/span&gt;\npivotControlTable &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; buildPivotControlTableD&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;table &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;# reference to dataset&lt;/span&gt;\n                        columnToTakeKeysFrom &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;numbers&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;# this will become column headers&lt;/span&gt;\n                        columnToTakeValuesFrom &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;value&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;# this contains data&lt;/span&gt;\n                        sep&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;_&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;                          &lt;span class=&quot;hljs-comment&quot;&gt;# optional for making column names&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# perform the move of data to columns&lt;/span&gt;\ndat_wide &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; moveValuesToColumnsD&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;tallTable &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;  dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;# reference to dataset&lt;/span&gt;\n                    keyColumns &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;         &lt;span class=&quot;hljs-comment&quot;&gt;# this(these) column(s) should stay untouched &lt;/span&gt;\n                    controlTable &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; pivotControlTable&lt;span class=&quot;hljs-comment&quot;&gt;# control table above&lt;/span&gt;\n                    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; \ndat_wide\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;         name  numbers_1  numbers_2  numbers_3  numbers_4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 1  firstName  0.3407997 -0.7033403 -0.3795377 -0.7460474&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 2 secondName -0.8981073 -0.3347941 -0.5013782 -0.1745357&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;much easier way!&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;devtools&lt;span class=&quot;hljs-operator&quot;&gt;::&lt;/span&gt;install_github&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;yikeshu0611/onetree&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;#install onetree package&lt;/span&gt;\n\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;onetree&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nwidedata&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;reshape_toWide&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;id &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;j &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;numbers&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;value.var.prefix &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nwidedata\n\n        name     value1     value2     value3     value4\n   firstName  &lt;span class=&quot;hljs-number&quot;&gt;0.3407997&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7033403&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.3795377&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7460474&lt;/span&gt;\n  secondName &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.8981073&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.3347941&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.5013782&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.1745357&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;if you want to go back from wide to long, only change Wide to Long, and no changes in objects.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;reshape_toLong&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; widedata&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;id &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;j &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;numbers&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;value.var.prefix &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n        name numbers      value\n   firstName       &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;0.3407997&lt;/span&gt;\n  secondName       &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.8981073&lt;/span&gt;\n   firstName       &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7033403&lt;/span&gt;\n  secondName       &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.3347941&lt;/span&gt;\n   firstName       &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.3795377&lt;/span&gt;\n  secondName       &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.5013782&lt;/span&gt;\n   firstName       &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7460474&lt;/span&gt;\n  secondName       &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.1745357&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Using only &lt;code&gt;dplyr&lt;/code&gt; and &lt;code&gt;map&lt;/code&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dplyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nlibrary&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;purrr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nset.seed&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndat1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n  name &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;firstName&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;secondName&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; each&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n  numbers &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nlonger_to_wider &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; name_from&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; value_from&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n  group &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; colnames&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;colnames&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%in%&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;name_from&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;value_from&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\n  data &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; group_by&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;.data&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;group&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt;\n    summarise&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt; name &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;.data&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;name_from&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; \n               value &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;.data&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;value_from&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n      d &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n        name &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; .&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;name_from&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; unlist&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; unique&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n      &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n      e &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; map_dfc&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;.&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;group&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n          y &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data_frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n            x &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; data &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; filter&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;.data&lt;span class=&quot;hljs-punctuation&quot;&gt;[[&lt;/span&gt;group&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;==&lt;/span&gt; x&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; pull&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;value_from&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n          &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n          colnames&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;y&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; x\n          y\n      &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n      cbind&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;d&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;e&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;\nlonger_to_wider&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dat1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#    name          1          2          3          4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1  firstName  0.3407997 -0.7033403 -0.3795377 -0.7460474&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2 secondName -0.8981073 -0.3347941 -0.5013782 -0.1745357&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    "],"id":72,"title":"How to reshape data from long to wide format","content":"\n                \n&lt;p&gt;I&apos;m having trouble rearranging the following data frame:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;set.seed&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndat1 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; data.frame&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n    name &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;firstName&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;secondName&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; each&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    numbers &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n    value &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; rnorm&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n    &lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\ndat1\n       name  numbers      value\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;  firstName       &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;0.3407997&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;  firstName       &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7033403&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;  firstName       &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.3795377&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;  firstName       &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7460474&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; secondName       &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.8981073&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; secondName       &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.3347941&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt; secondName       &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.5013782&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt; secondName       &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.1745357&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I want to reshape it so that each unique &quot;name&quot; variable is a rowname, with the &quot;values&quot; as observations along that row and the &quot;numbers&quot; as colnames. Sort of like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;     name          &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;          &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;          &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;         &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;  firstName  &lt;span class=&quot;hljs-number&quot;&gt;0.3407997&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7033403&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.3795377&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.7460474&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; secondName &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.8981073&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.3347941&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.5013782&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;0.1745357&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I&apos;ve looked at &lt;code&gt;melt&lt;/code&gt; and &lt;code&gt;cast&lt;/code&gt; and a few other things, but none seem to do the job.&lt;/p&gt;\n    ","slug":"how-to-reshape-data-from-long-to-wide-format-1657384486421","postType":"QUESTION","createdAt":"2022-07-09T16:34:46.000Z","updatedAt":"2022-07-09T16:34:46.000Z","tags":[{"id":262,"name":"reshape","slug":"reshape","createdAt":"2022-07-09T16:34:46.000Z","updatedAt":"2022-07-09T16:34:46.000Z","Questions_Tags":{"questionId":72,"tagId":262}}],"relatedQuestions":[{"title":"How to reshape data from long to wide format","slug":"how-to-reshape-data-from-long-to-wide-format-1657384486421","tags":[{"name":"reshape","Questions_Tags":{"questionId":72,"tagId":262}}]}]},"randomQuestions":[{"title":"Useless use of cat?","slug":"useless-use-of-cat-1657388390794"},{"title":"How do you convert a byte array to a hexadecimal string, and vice versa?","slug":"how-do-you-convert-a-byte-array-to-a-hexadecimal-string-and-vice-versa-1657388010428"},{"title":"How do I clone a list so that it doesn't change unexpectedly after assignment?","slug":"how-do-i-clone-a-list-so-that-it-doesn't-change-unexpectedly-after-assignment-1657384423195"},{"title":"Can you provide some examples of why it is hard to parse XML and HTML with a regex? [closed]","slug":"can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-regex-closed-1657388410824"},{"title":"Sort ArrayList of custom Objects by property","slug":"sort-arraylist-of-custom-objects-by-property-1657387678339"},{"title":"How can I change an element's class with JavaScript?","slug":"how-can-i-change-an-element's-class-with-javascript-1657387694695"},{"title":"Is JavaScript a pass-by-reference or pass-by-value language?","slug":"is-javascript-a-pass-by-reference-or-pass-by-value-language-1657384675679"},{"title":"How to parse JSON in Java","slug":"how-to-parse-json-in-java-1657384575136"},{"title":"Is Java \"pass-by-reference\" or \"pass-by-value\"?","slug":"is-java-\"pass-by-reference\"-or-\"pass-by-value\"-1657384319828"},{"title":"How do I return the response from an Observable/http/async call in angular?","slug":"how-do-i-return-the-response-from-an-observablehttpasync-call-in-angular-1657387335024"},{"title":"What is the difference between JSON and Object Literal Notation?","slug":"what-is-the-difference-between-json-and-object-literal-notation-1657387515710"},{"title":"Is it possible to escape regex metacharacters reliably with sed","slug":"is-it-possible-to-escape-regex-metacharacters-reliably-with-sed-1657388428795"},{"title":"What should main() return in C and C++?","slug":"what-should-main()-return-in-c-and-c++-1657384745630"},{"title":"Importing installed package from script raises \"AttributeError: module has no attribute\" or \"ImportError: cannot import name\"","slug":"importing-installed-package-from-script-raises-\"attributeerror:-module-has-no-attribute\"-or-\"importerror:-cannot-import-name\"-1657387790607"},{"title":"What is PECS (Producer Extends Consumer Super)?","slug":"what-is-pecs-(producer-extends-consumer-super)-1657384828870"},{"title":"The Definitive C++ Book Guide and List","slug":"the-definitive-c++-book-guide-and-list-1657384247395"},{"title":"Why shouldn't I use mysql_* functions in PHP?","slug":"why-shouldn't-i-use-mysql_*-functions-in-php-1657384260352"},{"title":"How can I sanitize user input with PHP?","slug":"how-can-i-sanitize-user-input-with-php-1657387892329"},{"title":"How do I use shell variables in an awk script?","slug":"how-do-i-use-shell-variables-in-an-awk-script-1657387754261"},{"title":"What is the difference between __str__ and __repr__?","slug":"what-is-the-difference-between-__str__-and-__repr__-1657387738760"}]},"__N_SSG":true}