<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find solution for coding, HTML, CSS, JAVASCRIPT, MYSQL, PHP, PYTHON,... quickly. - solutionschecker.com"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><title>How to use java.net.URLConnection to fire and handle HTTP requests | Solutions Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="Use of java.net.URLConnection is asked about pretty often here, and the Oracle tutorial is too concise about it.
That tutorial basically only shows how to fire a GET request and read the response. It doesn&#x27;t explain anywhere how to use it to, among others, perform a POST request, set request headers, read response headers, deal with cookies, submit a HTML form, upload a file, etc.
So, how can I use java.net.URLConnection to fire and handle &quot;advanced&quot; HTTP requests?
    "/><meta property="og:title" content="How to use java.net.URLConnection to fire and handle HTTP requests | Solutions Checker"/><meta property="og:description" content="Use of java.net.URLConnection is asked about pretty often here, and the Oracle tutorial is too concise about it.
That tutorial basically only shows how to fire a GET request and read the response. It doesn&#x27;t explain anywhere how to use it to, among others, perform a POST request, set request headers, read response headers, deal with cookies, submit a HTML form, upload a file, etc.
So, how can I use java.net.URLConnection to fire and handle &quot;advanced&quot; HTTP requests?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How to use java.net.URLConnection to fire and handle HTTP requests","text":"Use of java.net.URLConnection is asked about pretty often here, and the Oracle tutorial is too concise about it.\nThat tutorial basically only shows how to fire a GET request and read the response. It doesn&apos;t explain anywhere how to use it to, among others, perform a POST request, set request headers, read response headers, deal with cookies, submit a HTML form, upload a file, etc.\nSo, how can I use java.net.URLConnection to fire and handle &quot;advanced&quot; HTTP requests?\n    ","answerCount":12,"upVoteCount":500,"suggestedAnswer":[{"text":"First a disclaimer beforehand: the posted code snippets are all basic examples. You&apos;ll need to handle trivial IOExceptions and RuntimeExceptions like NullPointerException, ArrayIndexOutOfBoundsException and consorts yourself.\nIn case you&apos;re developing for Android instead of Java, note also that since introduction of API level 28, cleartext HTTP requests are disabled by default. You are encouraged to use HttpsURLConnection, but if it is really necessary, cleartext can be enabled in the Application Manifest.\n\nPreparing\nWe first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.\nString url = &quot;http://example.com&quot;;\nString charset = &quot;UTF-8&quot;;  // Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()\nString param1 = &quot;value1&quot;;\nString param2 = &quot;value2&quot;;\n// ...\n\nString query = String.format(&quot;param1=%s&amp;param2=%s&quot;,\n    URLEncoder.encode(param1, charset),\n    URLEncoder.encode(param2, charset));\n\nThe query parameters must be in name=value format and be concatenated by &amp;. You would normally also URL-encode the query parameters with the specified charset using URLEncoder#encode().\nThe String#format() is just for convenience. I prefer it when I would need the String concatenation operator + more than twice.\n\nFiring an HTTP GET request with (optionally) query parameters\nIt&apos;s a trivial task. It&apos;s the default request method.\nURLConnection connection = new URL(url + &quot;?&quot; + query).openConnection();\nconnection.setRequestProperty(&quot;Accept-Charset&quot;, charset);\nInputStream response = connection.getInputStream();\n// ...\n\nAny query string should be concatenated to the URL using ?. The Accept-Charset header may hint the server what encoding the parameters are in. If you don&apos;t send any query string, then you can leave the Accept-Charset header away. If you don&apos;t need to set any headers, then you can even use the URL#openStream() shortcut method.\nInputStream response = new URL(url).openStream();\n// ...\n\nEither way, if the other side is an HttpServlet, then its doGet() method will be called and the parameters will be available by HttpServletRequest#getParameter().\nFor testing purposes, you can print the response body to standard output as below:\ntry (Scanner scanner = new Scanner(response)) {\n    String responseBody = scanner.useDelimiter(&quot;\\\\A&quot;).next();\n    System.out.println(responseBody);\n}\n\n\nFiring an HTTP POST request with query parameters\nSetting the URLConnection#setDoOutput() to true implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type application/x-www-form-urlencoded wherein the query string is written to the request body.\nURLConnection connection = new URL(url).openConnection();\nconnection.setDoOutput(true); // Triggers POST.\nconnection.setRequestProperty(&quot;Accept-Charset&quot;, charset);\nconnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded;charset=&quot; + charset);\n\ntry (OutputStream output = connection.getOutputStream()) {\n    output.write(query.getBytes(charset));\n}\n\nInputStream response = connection.getInputStream();\n// ...\n\nNote: whenever you&apos;d like to submit a HTML form programmatically, don&apos;t forget to take the name=value pairs of any &lt;input type=&quot;hidden&quot;&gt; elements into the query string and of course also the name=value pair of the &lt;input type=&quot;submit&quot;&gt; element which you&apos;d like to &quot;press&quot; programmatically (because that&apos;s usually been used in the server side to distinguish if a button was pressed and if so, which one).\nYou can also cast the obtained URLConnection to HttpURLConnection and use its HttpURLConnection#setRequestMethod() instead. But if you&apos;re trying to use the connection for output you still need to set URLConnection#setDoOutput() to true.\nHttpURLConnection httpConnection = (HttpURLConnection) new URL(url).openConnection();\nhttpConnection.setRequestMethod(&quot;POST&quot;);\n// ...\n\nEither way, if the other side is an HttpServlet, then its doPost() method will be called and the parameters will be available by HttpServletRequest#getParameter().\n\nActually firing the HTTP request\nYou can fire the HTTP request explicitly with URLConnection#connect(), but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using URLConnection#getInputStream() and so on. The above examples does exactly that, so the connect() call is in fact superfluous.\n\nGathering HTTP response information\n\nHTTP response status:\n\nYou need an HttpURLConnection here. Cast it first if necessary.\n    int status = httpConnection.getResponseCode();\n\n\nHTTP response headers:\n for (Entry&lt;String, List&lt;String&gt;&gt; header : connection.getHeaderFields().entrySet()) {\n     System.out.println(header.getKey() + &quot;=&quot; + header.getValue());\n }\n\n\nHTTP response encoding:\n\n\nWhen the Content-Type contains a charset parameter, then the response body is likely text based and we&apos;d like to process the response body with the server-side specified character encoding then.\n    String contentType = connection.getHeaderField(&quot;Content-Type&quot;);\n    String charset = null;\n\n    for (String param : contentType.replace(&quot; &quot;, &quot;&quot;).split(&quot;;&quot;)) {\n        if (param.startsWith(&quot;charset=&quot;)) {\n            charset = param.split(&quot;=&quot;, 2)[1];\n            break;\n        }\n    }\n\n    if (charset != null) {\n        try (BufferedReader reader = new BufferedReader(new InputStreamReader(response, charset))) {\n            for (String line; (line = reader.readLine()) != null;) {\n                // ... System.out.println(line)?\n            }\n        }\n    } else {\n        // It&apos;s likely binary content, use InputStream/OutputStream.\n    }\n\n\nMaintaining the session\nThe server side session is usually backed by a cookie. Some web forms require that you&apos;re logged in and/or are tracked by a session. You can use the CookieHandler API to maintain cookies. You need to prepare a CookieManager with a CookiePolicy of ACCEPT_ALL before sending all HTTP requests.\n// First set the default cookie manager.\nCookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));\n\n// All the following subsequent URLConnections will use the same cookie manager.\nURLConnection connection = new URL(url).openConnection();\n// ...\n\nconnection = new URL(url).openConnection();\n// ...\n\nconnection = new URL(url).openConnection();\n// ...\n\nNote that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all Set-Cookie headers from the response of the login or the first GET request and then pass this through the subsequent requests.\n// Gather all cookies on the first request.\nURLConnection connection = new URL(url).openConnection();\nList&lt;String&gt; cookies = connection.getHeaderFields().get(&quot;Set-Cookie&quot;);\n// ...\n\n// Then use the same cookies on all subsequent requests.\nconnection = new URL(url).openConnection();\nfor (String cookie : cookies) {\n    connection.addRequestProperty(&quot;Cookie&quot;, cookie.split(&quot;;&quot;, 2)[0]);\n}\n// ...\n\nThe split(&quot;;&quot;, 2)[0] is there to get rid of cookie attributes which are irrelevant for the server side like expires, path, etc. Alternatively, you could also use cookie.substring(0, cookie.indexOf(&apos;;&apos;)) instead of split().\n\nStreaming mode\nThe HttpURLConnection will by default buffer the entire request body before actually sending it, regardless of whether you&apos;ve set a fixed content length yourself using connection.setRequestProperty(&quot;Content-Length&quot;, contentLength);. This may cause OutOfMemoryExceptions whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the HttpURLConnection#setFixedLengthStreamingMode().\nhttpConnection.setFixedLengthStreamingMode(contentLength);\n\nBut if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the HttpURLConnection#setChunkedStreamingMode() accordingly. This will set the HTTP Transfer-Encoding header to chunked which will force the request body being sent in chunks. The below example will send the body in chunks of 1 KB.\nhttpConnection.setChunkedStreamingMode(1024);\n\n\nUser-Agent\nIt can happen that a request returns an unexpected response, while it works fine with a real web browser. The server side is probably blocking requests based on the User-Agent request header. The URLConnection will by default set it to Java/1.6.0_19 where the last part is obviously the JRE version. You can override this as follows:\nconnection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36&quot;); // Do as if you&apos;re using Chrome 41 on Windows 7.\n\nUse the User-Agent string from a recent browser.\n\nError handling\nIf the HTTP response code is 4nn (Client Error) or 5nn (Server Error), then you may want to read the HttpURLConnection#getErrorStream() to see if the server has sent any useful error information.\nInputStream error = ((HttpURLConnection) connection).getErrorStream();\n\nIf the HTTP response code is -1, then something went wrong with connection and response handling. The HttpURLConnection implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the http.keepAlive system property to false. You can do this programmatically in the beginning of your application by:\nSystem.setProperty(&quot;http.keepAlive&quot;, &quot;false&quot;);\n\n\nUploading files\nYou&apos;d normally use multipart/form-data encoding for mixed POST content (binary and character data). The encoding is in more detail described in RFC2388.\nString param = &quot;value&quot;;\nFile textFile = new File(&quot;/path/to/file.txt&quot;);\nFile binaryFile = new File(&quot;/path/to/file.bin&quot;);\nString boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.\nString CRLF = &quot;\\r\\n&quot;; // Line separator required by multipart/form-data.\nURLConnection connection = new URL(url).openConnection();\nconnection.setDoOutput(true);\nconnection.setRequestProperty(&quot;Content-Type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\n\ntry (\n    OutputStream output = connection.getOutputStream();\n    PrintWriter writer = new PrintWriter(new OutputStreamWriter(output, charset), true);\n) {\n    // Send normal param.\n    writer.append(&quot;--&quot; + boundary).append(CRLF);\n    writer.append(&quot;Content-Disposition: form-data; name=\\&quot;param\\&quot;&quot;).append(CRLF);\n    writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF);\n    writer.append(CRLF).append(param).append(CRLF).flush();\n\n    // Send text file.\n    writer.append(&quot;--&quot; + boundary).append(CRLF);\n    writer.append(&quot;Content-Disposition: form-data; name=\\&quot;textFile\\&quot;; filename=\\&quot;&quot; + textFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\n    writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF); // Text file itself must be saved in this charset!\n    writer.append(CRLF).flush();\n    Files.copy(textFile.toPath(), output);\n    output.flush(); // Important before continuing with writer!\n    writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\n\n    // Send binary file.\n    writer.append(&quot;--&quot; + boundary).append(CRLF);\n    writer.append(&quot;Content-Disposition: form-data; name=\\&quot;binaryFile\\&quot;; filename=\\&quot;&quot; + binaryFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\n    writer.append(&quot;Content-Type: &quot; + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);\n    writer.append(&quot;Content-Transfer-Encoding: binary&quot;).append(CRLF);\n    writer.append(CRLF).flush();\n    Files.copy(binaryFile.toPath(), output);\n    output.flush(); // Important before continuing with writer!\n    writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\n\n    // End of multipart/form-data.\n    writer.append(&quot;--&quot; + boundary + &quot;--&quot;).append(CRLF).flush();\n}\n\nIf the other side is an HttpServlet, then its doPost() method will be called and the parts will be available by HttpServletRequest#getPart() (note, thus not getParameter() and so on!). The getPart() method is however relatively new, it&apos;s introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc.). Prior to Servlet 3.0, your best choice is using Apache Commons FileUpload to parse a multipart/form-data request. Also see this answer for examples of both the FileUpload and the Servelt 3.0 approaches.\n\nDealing with untrusted or misconfigured HTTPS sites\nIn case you&apos;re developing for Android instead of Java, be careful: the workaround below may save your day if you don&apos;t have correct certificates deployed during development. But you should not use it for production. These days (April 2021) Google will not allow your app be distributed on Play Store if they detect insecure hostname verifier, see https://support.google.com/faqs/answer/7188426.\nSometimes you need to connect an HTTPS URL, perhaps because you&apos;re writing a web scraper. In that case, you may likely face a javax.net.ssl.SSLException: Not trusted server certificate on some HTTPS sites who doesn&apos;t keep their SSL certificates up to date, or a java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found or javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name on some misconfigured HTTPS sites.\nThe following one-time-run static initializer in your web scraper class should make HttpsURLConnection more lenient as to those HTTPS sites and thus not throw those exceptions anymore.\nstatic {\n    TrustManager[] trustAllCertificates = new TrustManager[] {\n        new X509TrustManager() {\n            @Override\n            public X509Certificate[] getAcceptedIssuers() {\n                return null; // Not relevant.\n            }\n            @Override\n            public void checkClientTrusted(X509Certificate[] certs, String authType) {\n                // Do nothing. Just allow them all.\n            }\n            @Override\n            public void checkServerTrusted(X509Certificate[] certs, String authType) {\n                // Do nothing. Just allow them all.\n            }\n        }\n    };\n\n    HostnameVerifier trustAllHostnames = new HostnameVerifier() {\n        @Override\n        public boolean verify(String hostname, SSLSession session) {\n            return true; // Just allow them all.\n        }\n    };\n\n    try {\n        System.setProperty(&quot;jsse.enableSNIExtension&quot;, &quot;false&quot;);\n        SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\n        sc.init(null, trustAllCertificates, new SecureRandom());\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n        HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);\n    }\n    catch (GeneralSecurityException e) {\n        throw new ExceptionInInitializerError(e);\n    }\n}\n\n\nLast words\nThe Apache HttpComponents HttpClient is much more convenient in this all :)\n\nHttpClient Tutorial\nHttpClient Examples\n\n\nParsing and extracting HTML\nIf all you want is parsing and extracting data from HTML, then better use a HTML parser like Jsoup.\n\nWhat are the pros/cons of leading HTML parsers in Java\nHow to scan and extract a webpage in Java\n\n    ","url":"/questions/[slug]#solution1","@type":"Answer","upvoteCount":0},{"text":"When working with HTTP it&apos;s almost always more useful to refer to HttpURLConnection rather than the base class URLConnection (since URLConnection is an abstract class when you ask for URLConnection.openConnection() on a HTTP URL that&apos;s what you&apos;ll get back anyway).\n\nThen you can instead of relying on URLConnection#setDoOutput(true) to implicitly set the request method to POST instead do httpURLConnection.setRequestMethod(&quot;POST&quot;) which some might find more natural (and which also allows you to specify other request methods such as PUT, DELETE, ...).\n\nIt also provides useful HTTP constants so you can do:\n\nint responseCode = httpURLConnection.getResponseCode();\n\nif (responseCode == HttpURLConnection.HTTP_OK) {\n\n    ","url":"/questions/[slug]#solution2","@type":"Answer","upvoteCount":0},{"text":"Inspired by this and other questions on Stack Overflow, I&apos;ve created a minimal open source basic-http-client that embodies most of the techniques found here.\ngoogle-http-java-client is also a great open source resource.\n    ","url":"/questions/[slug]#solution3","@type":"Answer","upvoteCount":0},{"text":"I suggest you take a look at the code on kevinsawicki/http-request, its basically a wrapper on top of HttpUrlConnection it provides a much simpler API in case you just want to make the requests right now or you can take a look at the sources (it&apos;s not too big) to take a look at how connections are handled.\n\nExample: Make a GET request with content type application/json and some query parameters:\n\n// GET http://google.com?q=baseball%20gloves&amp;size=100\nString response = HttpRequest.get(&quot;http://google.com&quot;, true, &quot;q&quot;, &quot;baseball gloves&quot;, &quot;size&quot;, 100)\n        .accept(&quot;application/json&quot;)\n        .body();\nSystem.out.println(&quot;Response was: &quot; + response);\n\n    ","url":"/questions/[slug]#solution4","@type":"Answer","upvoteCount":0},{"text":"Update\n\n\n  The new HTTP Client shipped with Java 9 but as part of an\n  Incubator module named jdk.incubator.httpclient. Incubator modules are\n  a means of putting non-final APIs in the hands of developers while the\n  APIs progress towards either finalization or removal in a future\n  release.\n\n\nIn Java 9, you can send a GET request like:\n\n// GET\nHttpResponse response = HttpRequest\n    .create(new URI(&quot;http://www.stackoverflow.com&quot;))\n    .headers(&quot;Foo&quot;, &quot;foovalue&quot;, &quot;Bar&quot;, &quot;barvalue&quot;)\n    .GET()\n    .response();\n\n\nThen you can examine the returned HttpResponse:\n\nint statusCode = response.statusCode();\nString responseBody = response.body(HttpResponse.asString());\n\n\nSince this new HTTP Client is in java.httpclient jdk.incubator.httpclient module, you should declare this dependency in your module-info.java file:\n\nmodule com.foo.bar {\n    requires jdk.incubator.httpclient;\n}\n\n    ","url":"/questions/[slug]#solution5","@type":"Answer","upvoteCount":0},{"text":"There are two options you can go with HTTP URL Hits : GET / POST\nGET Request:\nHttpURLConnection.setFollowRedirects(true); // Defaults to true\n\nString url = &quot;https://name_of_the_url&quot;;\nURL request_url = new URL(url);\nHttpURLConnection http_conn = (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(100000);\nhttp_conn.setReadTimeout(100000);\nhttp_conn.setInstanceFollowRedirects(true);\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n\nPOST request:\nHttpURLConnection.setFollowRedirects(true); // Defaults to true\n\nString url = &quot;https://name_of_the_url&quot;\nURL request_url = new URL(url);\nHttpURLConnection http_conn = (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(100000);\nhttp_conn.setReadTimeout(100000);\nhttp_conn.setInstanceFollowRedirects(true);\nhttp_conn.setDoOutput(true);\nPrintWriter out = new PrintWriter(http_conn.getOutputStream());\nif (urlparameter != null) {\n   out.println(urlparameter);\n}\nout.close();\nout = null;\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n\n    ","url":"/questions/[slug]#solution6","@type":"Answer","upvoteCount":0},{"text":"I was also very inspired by this response.\nI am often on projects where I need to do some HTTP, and I may not want to bring in a lot of third-party dependencies (which bring in others and so on and so on, etc.)\nI started to write my own utilities based on some of this conversation (not any where done):\npackage org.boon.utils;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.util.Map;\n\nimport static org.boon.utils.IO.read;\n\npublic class HTTP {\n\nThen there are just a bunch or static methods.\npublic static String get(\n        final String url) {\n\n    Exceptions.tryIt(() -&gt; {\n        URLConnection connection;\n        connection = doGet(url, null, null, null);\n        return extractResponseString(connection);\n    });\n    return null;\n}\n\npublic static String getWithHeaders(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers) {\n    URLConnection connection;\n    try {\n        connection = doGet(url, headers, null, null);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\npublic static String getWithContentType(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        String contentType) {\n    URLConnection connection;\n    try {\n        connection = doGet(url, headers, contentType, null);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\npublic static String getWithCharSet(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        String contentType,\n        String charSet) {\n    URLConnection connection;\n    try {\n        connection = doGet(url, headers, contentType, charSet);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\nThen post...\npublic static String postBody(\n        final String url,\n        final String body) {\n    URLConnection connection;\n    try {\n        connection = doPost(url, null, &quot;text/plain&quot;, null, body);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\npublic static String postBodyWithHeaders(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        final String body) {\n    URLConnection connection;\n    try {\n        connection = doPost(url, headers, &quot;text/plain&quot;, null, body);\n        return extractResponseString(connection);\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\n\npublic static String postBodyWithContentType(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        final String contentType,\n        final String body) {\n\n    URLConnection connection;\n    try {\n        connection = doPost(url, headers, contentType, null, body);\n\n        return extractResponseString(connection);\n\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n\n}\n\n\npublic static String postBodyWithCharset(\n        final String url,\n        final Map&lt;String, ? extends Object&gt; headers,\n        final String contentType,\n        final String charSet,\n        final String body) {\n\n    URLConnection connection;\n    try {\n        connection = doPost(url, headers, contentType, charSet, body);\n\n        return extractResponseString(connection);\n\n    } catch (Exception ex) {\n        Exceptions.handle(ex);\n        return null;\n    }\n}\n\nprivate static URLConnection doPost(String url, Map&lt;String, ? extends Object&gt; headers,\n                                    String contentType, String charset, String body\n                                    ) throws IOException {\n    URLConnection connection;/* Handle output. */\n    connection = new URL(url).openConnection();\n    connection.setDoOutput(true);\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    IO.write(connection.getOutputStream(), body, IO.CHARSET);\n    return connection;\n}\n\nprivate static void manageHeaders(Map&lt;String, ? extends Object&gt; headers, URLConnection connection) {\n    if (headers != null) {\n        for (Map.Entry&lt;String, ? extends Object&gt; entry : headers.entrySet()) {\n            connection.setRequestProperty(entry.getKey(), entry.getValue().toString());\n        }\n    }\n}\n\nprivate static void manageContentTypeHeaders(String contentType, String charset, URLConnection connection) {\n    connection.setRequestProperty(&quot;Accept-Charset&quot;, charset == null ? IO.CHARSET : charset);\n    if (contentType!=null &amp;&amp; !contentType.isEmpty()) {\n        connection.setRequestProperty(&quot;Content-Type&quot;, contentType);\n    }\n}\n\nprivate static URLConnection doGet(String url, Map&lt;String, ? extends Object&gt; headers,\n                                    String contentType, String charset) throws IOException {\n    URLConnection connection;/* Handle output. */\n    connection = new URL(url).openConnection();\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    return connection;\n}\n\nprivate static String extractResponseString(URLConnection connection) throws IOException {\n/* Handle input. */\n    HttpURLConnection http = (HttpURLConnection)connection;\n    int status = http.getResponseCode();\n    String charset = getCharset(connection.getHeaderField(&quot;Content-Type&quot;));\n\n    if (status==200) {\n        return readResponseBody(http, charset);\n    } else {\n        return readErrorResponseBody(http, status, charset);\n    }\n}\n\nprivate static String readErrorResponseBody(HttpURLConnection http, int status, String charset) {\n    InputStream errorStream = http.getErrorStream();\n    if ( errorStream!=null ) {\n        String error = charset== null ? read( errorStream ) :\n            read( errorStream, charset );\n        throw new RuntimeException(&quot;STATUS CODE =&quot; + status + &quot;\\n\\n&quot; + error);\n    } else {\n        throw new RuntimeException(&quot;STATUS CODE =&quot; + status);\n    }\n}\n\nprivate static String readResponseBody(HttpURLConnection http, String charset) throws IOException {\n    if (charset != null) {\n        return read(http.getInputStream(), charset);\n    } else {\n        return read(http.getInputStream());\n    }\n}\n\nprivate static String getCharset(String contentType) {\n    if (contentType==null)  {\n        return null;\n    }\n    String charset = null;\n    for (String param : contentType.replace(&quot; &quot;, &quot;&quot;).split(&quot;;&quot;)) {\n        if (param.startsWith(&quot;charset=&quot;)) {\n            charset = param.split(&quot;=&quot;, 2)[1];\n            break;\n        }\n    }\n    charset = charset == null ? IO.CHARSET : charset;\n\n    return charset;\n}\n\nWell, you get the idea....\nHere are the tests:\nstatic class MyHandler implements HttpHandler {\n    public void handle(HttpExchange t) throws IOException {\n\n        InputStream requestBody = t.getRequestBody();\n        String body = IO.read(requestBody);\n        Headers requestHeaders = t.getRequestHeaders();\n        body = body + &quot;\\n&quot; + copy(requestHeaders).toString();\n        t.sendResponseHeaders(200, body.length());\n        OutputStream os = t.getResponseBody();\n        os.write(body.getBytes());\n        os.close();\n    }\n}\n\n\n@Test\npublic void testHappy() throws Exception {\n\n    HttpServer server = HttpServer.create(new InetSocketAddress(9212), 0);\n    server.createContext(&quot;/test&quot;, new MyHandler());\n    server.setExecutor(null); // creates a default executor\n    server.start();\n\n    Thread.sleep(10);\n\n    Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\n\n    String response = HTTP.postBodyWithContentType(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.postBodyWithCharset(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;UTF-8&quot;, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.postBodyWithHeaders(&quot;http://localhost:9212/test&quot;, headers, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.get(&quot;http://localhost:9212/test&quot;);\n\n    System.out.println(response);\n\n    response = HTTP.getWithHeaders(&quot;http://localhost:9212/test&quot;, headers);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.getWithContentType(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    response = HTTP.getWithCharSet(&quot;http://localhost:9212/test&quot;, headers, &quot;text/plain&quot;, &quot;UTF-8&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    Thread.sleep(10);\n\n    server.stop(0);\n}\n\n@Test\npublic void testPostBody() throws Exception {\n\n    HttpServer server = HttpServer.create(new InetSocketAddress(9220), 0);\n    server.createContext(&quot;/test&quot;, new MyHandler());\n    server.setExecutor(null); // creates a default executor\n    server.start();\n\n    Thread.sleep(10);\n\n    Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\n\n    String response = HTTP.postBody(&quot;http://localhost:9220/test&quot;, &quot;hi mom&quot;);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n\n    Thread.sleep(10);\n\n    server.stop(0);\n}\n\n@Test(expected = RuntimeException.class)\npublic void testSad() throws Exception {\n\n    HttpServer server = HttpServer.create(new InetSocketAddress(9213), 0);\n    server.createContext(&quot;/test&quot;, new MyHandler());\n    server.setExecutor(null); // creates a default executor\n    server.start();\n\n    Thread.sleep(10);\n\n    Map&lt;String,String&gt; headers = map(&quot;foo&quot;, &quot;bar&quot;, &quot;fun&quot;, &quot;sun&quot;);\n\n    String response = HTTP.postBodyWithContentType(&quot;http://localhost:9213/foo&quot;, headers, &quot;text/plain&quot;, &quot;hi mom&quot;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(&quot;hi mom&quot;));\n    assertTrue(response.contains(&quot;Fun=[sun], Foo=[bar]&quot;));\n\n    Thread.sleep(10);\n\n    server.stop(0);\n}\n\nYou can find the rest here:\nhttps://github.com/RichardHightower/boon\nMy goal is to provide the common things one would want to do in a bit more easier way then....\n    ","url":"/questions/[slug]#solution7","@type":"Answer","upvoteCount":0},{"text":"Initially I was misled by this article which favours HttpClient.\nLater I have realized that HttpURLConnection is going to stay from this article.\nAs per the Google blog:\n\nApache HTTP client has fewer bugs on Eclair and Froyo. It is the best choice for these releases. For Gingerbread , HttpURLConnection is the best choice. Its simple API and small size makes it great fit for Android.\nTransparent compression and response caching reduce network use, improve speed and save battery. New applications should use HttpURLConnection; it is where we will be spending our energy going forward.\n\nAfter reading this article and some other stack over flow questions, I am convinced that HttpURLConnection is going to stay for longer durations.\nSome of the SE questions favouring HttpURLConnections:\nOn Android, make a POST request with URL Encoded Form data without using UrlEncodedFormEntity\nHttpPost works in Java project, but not on Android\n    ","url":"/questions/[slug]#solution8","@type":"Answer","upvoteCount":0},{"text":"There is also OkHttp, which is an HTTP client thats efficient by default:\n\n\n  \n  HTTP/2 support allows all requests to the same host to share a    socket.\n  Connection pooling reduces request latency (if HTTP/2 isnt    available).\n  Transparent GZIP shrinks download sizes.\n  Response caching avoids the network completely for repeat requests.\n  \n\n\nFirst create an instance of OkHttpClient:\n\nOkHttpClient client = new OkHttpClient();\n\n\nThen, prepare your GET request:\n\nRequest request = new Request.Builder()\n      .url(url)\n      .build();\n\n\nfinally, use OkHttpClient to send prepared Request:\n\nResponse response = client.newCall(request).execute();\n\n\nFor more details, you can consult the OkHttp&apos;s documentation\n    ","url":"/questions/[slug]#solution9","@type":"Answer","upvoteCount":0},{"text":"If you are using HTTP GET, please remove this line:\nurlConnection.setDoOutput(true);\n\n    ","url":"/questions/[slug]#solution10","@type":"Answer","upvoteCount":0},{"text":"You can also use JdkRequest from jcabi-http (I&apos;m a developer), which does all this work for you, decorating HttpURLConnection, firing HTTP requests and parsing responses, for example:\n\nString html = new JdkRequest(&quot;http://www.google.com&quot;).fetch().body();\n\n\nCheck this blog post for more info: http://www.yegor256.com/2014/04/11/jcabi-http-intro.html\n    ","url":"/questions/[slug]#solution11","@type":"Answer","upvoteCount":0},{"text":"If you are using Java 11 (except on Android), instead of the legacy HttpUrlConnection class, you can use Java 11 new HTTP Client API.\nAn example GET request:\nvar uri = URI.create(&quot;https://httpbin.org/get?age=26&amp;isHappy=true&quot;);\nvar client = HttpClient.newHttpClient();\nvar request = HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .header(&quot;accept&quot;, &quot;application/json&quot;)\n        .GET()\n        .build();\nvar response = client.send(request, HttpResponse.BodyHandlers.ofString());\nSystem.out.println(response.statusCode());\nSystem.out.println(response.body());\n\nThe same request executed asynchronously:\nvar responseAsync = client\n        .sendAsync(request, HttpResponse.BodyHandlers.ofString())\n        .thenApply(HttpResponse::body)\n        .thenAccept(System.out::println);\n// responseAsync.join(); // Wait for completion\n\nAn example POST request:\nvar request = HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .version(HttpClient.Version.HTTP_2)\n        .timeout(Duration.ofMinutes(1))\n        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n        .header(&quot;Authorization&quot;, &quot;Bearer fake&quot;)\n        .POST(BodyPublishers.ofString(&quot;{ title: &apos;This is cool&apos; }&quot;))\n        .build();\nvar response = client.send(request, HttpResponse.BodyHandlers.ofString());\n\nFor sending form data as multipart (multipart/form-data) or url-encoded (application/x-www-form-urlencoded) format, see this solution.\nSee this article for examples and more information about HTTP Client API.\nSidenote\nFor Java standard library HTTP server, see this post.\n    ","url":"/questions/[slug]#solution12","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/08bcc42a26fe5c92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/08bcc42a26fe5c92.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-08d1a634dea6705e.js" defer=""></script><script src="/_next/static/chunks/29107295-fbcfe2172188e46f.js" defer=""></script><script src="/_next/static/chunks/150-b06815e21c943e0d.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/108-87de33c23337ff53.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-79a1437acf654019.js" defer=""></script><script src="/_next/static/Zo3C7AOWQzKM9qqyzx2hf/_buildManifest.js" defer=""></script><script src="/_next/static/Zo3C7AOWQzKM9qqyzx2hf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h4 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h4></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934"><h1>How to use java.net.URLConnection to fire and handle HTTP requests</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold" href="/questions/tag/urlconnection">urlconnection</a></div></div><div class="question-content mt-5">
                
<p>Use of <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html" rel="noreferrer"><code>java.net.URLConnection</code></a> is asked about pretty often here, and the <a href="http://download.oracle.com/javase/tutorial/networking/urls/connecting.html" rel="noreferrer">Oracle tutorial</a> is <em>too</em> concise about it.</p>
<p>That tutorial basically only shows how to fire a <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods" rel="noreferrer">GET</a> request and read the response. It doesn't explain anywhere how to use it to, among others, perform a <a href="https://en.wikipedia.org/wiki/POST_%28HTTP%29" rel="noreferrer">POST</a> request, set request headers, read response headers, deal with cookies, submit a HTML form, upload a file, etc.</p>
<p>So, how can I use <code>java.net.URLConnection</code> to fire and handle "advanced" HTTP requests?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li><li class="pagination-solution-item"><span data-id="#solution6" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">6</span></li><li class="pagination-solution-item"><span data-id="#solution7" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">7</span></li><li class="pagination-solution-item"><span data-id="#solution8" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">8</span></li><li class="pagination-solution-item"><span data-id="#solution9" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">9</span></li><li class="pagination-solution-item"><span data-id="#solution10" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">10</span></li><li class="pagination-solution-item"><span data-id="#solution11" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">11</span></li><li class="pagination-solution-item"><span data-id="#solution12" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">12</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 1</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><sup><em>First a disclaimer beforehand: the posted code snippets are all basic examples. You'll need to handle trivial <code>IOException</code>s and <code>RuntimeException</code>s like <code>NullPointerException</code>, <code>ArrayIndexOutOfBoundsException</code> and consorts yourself.</em></sup></p>
<p><sup><em>In case you're developing for Android instead of Java, note also that since introduction of API level 28, cleartext HTTP requests are <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-28#tls-enabled" rel="noreferrer">disabled by default</a>. You are encouraged to use <code>HttpsURLConnection</code>, but if it is really necessary, cleartext can be enabled in the Application Manifest.</em></sup></p>
<hr>
<h3>Preparing</h3>
<p>We first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"http://example.com"</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">charset</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UTF-8"</span>;  <span class="hljs-comment">// Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()</span>
<span class="hljs-type">String</span> <span class="hljs-variable">param1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"value1"</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">param2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"value2"</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-type">String</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"param1=%s&amp;param2=%s"</span>,
    URLEncoder.encode(param1, charset),
    URLEncoder.encode(param2, charset));
</code></pre>
<p>The query parameters must be in <code>name=value</code> format and be concatenated by <code>&amp;</code>. You would normally also <a href="http://en.wikipedia.org/wiki/Percent-encoding" rel="noreferrer">URL-encode</a> the query parameters with the specified charset using <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html#encode-java.lang.String-java.lang.String-" rel="noreferrer"><code>URLEncoder#encode()</code></a>.</p>
<p><sup>The <code>String#format()</code> is just for convenience. I prefer it when I would need the String concatenation operator <code>+</code> more than twice.</sup></p>
<hr>
<h3>Firing an <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3" rel="noreferrer">HTTP GET</a> request with (optionally) query parameters</h3>
<p>It's a trivial task. It's the default request method.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">URLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url + <span class="hljs-string">"?"</span> + query).openConnection();
connection.setRequestProperty(<span class="hljs-string">"Accept-Charset"</span>, charset);
<span class="hljs-type">InputStream</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> connection.getInputStream();
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Any query string should be concatenated to the URL using <code>?</code>. The <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2" rel="noreferrer"><code>Accept-Charset</code></a> header may hint the server what encoding the parameters are in. If you don't send any query string, then you can leave the <code>Accept-Charset</code> header away. If you don't need to set any headers, then you can even use the <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#openStream%28%29" rel="noreferrer"><code>URL#openStream()</code></a> shortcut method.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">InputStream</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openStream();
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Either way, if the other side is an <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html" rel="noreferrer"><code>HttpServlet</code></a>, then its <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29" rel="noreferrer"><code>doGet()</code></a> method will be called and the parameters will be available by <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29" rel="noreferrer"><code>HttpServletRequest#getParameter()</code></a>.</p>
<p>For testing purposes, you can print the response body to <a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29" rel="noreferrer">standard output</a> as below:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">try</span> (<span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(response)) {
    <span class="hljs-type">String</span> <span class="hljs-variable">responseBody</span> <span class="hljs-operator">=</span> scanner.useDelimiter(<span class="hljs-string">"\\A"</span>).next();
    System.out.println(responseBody);
}
</code></pre>
<hr>
<h3>Firing an <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5" rel="noreferrer">HTTP POST</a> request with query parameters</h3>
<p>Setting the <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29" rel="noreferrer"><code>URLConnection#setDoOutput()</code></a> to <code>true</code> implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type <code>application/x-www-form-urlencoded</code> wherein the query string is written to the request body.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">URLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
connection.setDoOutput(<span class="hljs-literal">true</span>); <span class="hljs-comment">// Triggers POST.</span>
connection.setRequestProperty(<span class="hljs-string">"Accept-Charset"</span>, charset);
connection.setRequestProperty(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/x-www-form-urlencoded;charset="</span> + charset);

<span class="hljs-keyword">try</span> (<span class="hljs-type">OutputStream</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> connection.getOutputStream()) {
    output.write(query.getBytes(charset));
}

<span class="hljs-type">InputStream</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> connection.getInputStream();
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Note: whenever you'd like to submit a HTML form programmatically, don't forget to take the <code>name=value</code> pairs of any <code>&lt;input type="hidden"&gt;</code> elements into the query string and of course also the <code>name=value</code> pair of the <code>&lt;input type="submit"&gt;</code> element which you'd like to "press" programmatically (because that's usually been used in the server side to distinguish if a button was pressed and if so, which one).</p>
<p>You can also cast the obtained <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html" rel="noreferrer"><code>URLConnection</code></a> to <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html" rel="noreferrer"><code>HttpURLConnection</code></a> and use its <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29" rel="noreferrer"><code>HttpURLConnection#setRequestMethod()</code></a> instead. But if you're trying to use the connection for output you still need to set <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29" rel="noreferrer"><code>URLConnection#setDoOutput()</code></a> to <code>true</code>.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">httpConnection</span> <span class="hljs-operator">=</span> (HttpURLConnection) <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
httpConnection.setRequestMethod(<span class="hljs-string">"POST"</span>);
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Either way, if the other side is an <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html" rel="noreferrer"><code>HttpServlet</code></a>, then its <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29" rel="noreferrer"><code>doPost()</code></a> method will be called and the parameters will be available by <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29" rel="noreferrer"><code>HttpServletRequest#getParameter()</code></a>.</p>
<hr>
<h3>Actually firing the HTTP request</h3>
<p>You can fire the HTTP request explicitly with <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#connect%28%29" rel="noreferrer"><code>URLConnection#connect()</code></a>, but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using <a href="http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#getInputStream%28%29" rel="noreferrer"><code>URLConnection#getInputStream()</code></a> and so on. The above examples does exactly that, so the <code>connect()</code> call is in fact superfluous.</p>
<hr>
<h3>Gathering HTTP response information</h3>
<ol>
<li><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" rel="noreferrer">HTTP response status</a>:</li>
</ol>
<p>You need an <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html" rel="noreferrer"><code>HttpURLConnection</code></a> here. Cast it first if necessary.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">    <span class="hljs-type">int</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> httpConnection.getResponseCode();
</code></pre>
<ol start="2">
<li><p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html" rel="noreferrer">HTTP response headers</a>:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"> <span class="hljs-keyword">for</span> (Entry&lt;String, List&lt;String&gt;&gt; header : connection.getHeaderFields().entrySet()) {
     System.out.println(header.getKey() + <span class="hljs-string">"="</span> + header.getValue());
 }
</code></pre>
</li>
<li><p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17" rel="noreferrer">HTTP response encoding</a>:</p>
</li>
</ol>
<p>When the <code>Content-Type</code> contains a <code>charset</code> parameter, then the response body is likely text based and we'd like to process the response body with the server-side specified character encoding then.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">    <span class="hljs-type">String</span> <span class="hljs-variable">contentType</span> <span class="hljs-operator">=</span> connection.getHeaderField(<span class="hljs-string">"Content-Type"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">charset</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">for</span> (String param : contentType.replace(<span class="hljs-string">" "</span>, <span class="hljs-string">""</span>).split(<span class="hljs-string">";"</span>)) {
        <span class="hljs-keyword">if</span> (param.startsWith(<span class="hljs-string">"charset="</span>)) {
            charset = param.split(<span class="hljs-string">"="</span>, <span class="hljs-number">2</span>)[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">break</span>;
        }
    }

    <span class="hljs-keyword">if</span> (charset != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(response, charset))) {
            <span class="hljs-keyword">for</span> (String line; (line = reader.readLine()) != <span class="hljs-literal">null</span>;) {
                <span class="hljs-comment">// ... System.out.println(line)?</span>
            }
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// It's likely binary content, use InputStream/OutputStream.</span>
    }
</code></pre>
<hr>
<h3>Maintaining the session</h3>
<p>The server side session is usually backed by a cookie. Some web forms require that you're logged in and/or are tracked by a session. You can use the <a href="http://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html" rel="noreferrer"><code>CookieHandler</code></a> API to maintain cookies. You need to prepare a <a href="http://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html" rel="noreferrer"><code>CookieManager</code></a> with a <a href="http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html" rel="noreferrer"><code>CookiePolicy</code></a> of <a href="http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html#ACCEPT_ALL" rel="noreferrer"><code>ACCEPT_ALL</code></a> before sending all HTTP requests.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// First set the default cookie manager.</span>
CookieHandler.setDefault(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CookieManager</span>(<span class="hljs-literal">null</span>, CookiePolicy.ACCEPT_ALL));

<span class="hljs-comment">// All the following subsequent URLConnections will use the same cookie manager.</span>
<span class="hljs-type">URLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
<span class="hljs-comment">// ...</span>

connection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
<span class="hljs-comment">// ...</span>

connection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Note that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all <code>Set-Cookie</code> headers from the response of the login or the first <code>GET</code> request and then pass this through the subsequent requests.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// Gather all cookies on the first request.</span>
<span class="hljs-type">URLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
List&lt;String&gt; cookies = connection.getHeaderFields().get(<span class="hljs-string">"Set-Cookie"</span>);
<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// Then use the same cookies on all subsequent requests.</span>
connection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
<span class="hljs-keyword">for</span> (String cookie : cookies) {
    connection.addRequestProperty(<span class="hljs-string">"Cookie"</span>, cookie.split(<span class="hljs-string">";"</span>, <span class="hljs-number">2</span>)[<span class="hljs-number">0</span>]);
}
<span class="hljs-comment">// ...</span>
</code></pre>
<p>The <code>split(";", 2)[0]</code> is there to get rid of cookie attributes which are irrelevant for the server side like <code>expires</code>, <code>path</code>, etc. Alternatively, you could also use <code>cookie.substring(0, cookie.indexOf(';'))</code> instead of <code>split()</code>.</p>
<hr>
<h3>Streaming mode</h3>
<p>The <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html" rel="noreferrer"><code>HttpURLConnection</code></a> will by default buffer the <em>entire</em> request body before actually sending it, regardless of whether you've set a fixed content length yourself using <code>connection.setRequestProperty("Content-Length", contentLength);</code>. This may cause <code>OutOfMemoryException</code>s whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29" rel="noreferrer"><code>HttpURLConnection#setFixedLengthStreamingMode()</code></a>.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">httpConnection.setFixedLengthStreamingMode(contentLength);
</code></pre>
<p>But if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the <a href="http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29" rel="noreferrer"><code>HttpURLConnection#setChunkedStreamingMode()</code></a> accordingly. This will set the HTTP <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41" rel="noreferrer"><code>Transfer-Encoding</code></a> header to <code>chunked</code> which will force the request body being sent in chunks. The below example will send the body in chunks of 1&nbsp;KB.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">httpConnection.setChunkedStreamingMode(<span class="hljs-number">1024</span>);
</code></pre>
<hr>
<h3>User-Agent</h3>
<p>It can happen that <a href="https://stackoverflow.com/questions/13670692/403-forbidden-with-java-but-not-web-browser">a request returns an unexpected response, while it works fine with a real web browser</a>. The server side is probably blocking requests based on the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43" rel="noreferrer"><code>User-Agent</code></a> request header. The <code>URLConnection</code> will by default set it to <code>Java/1.6.0_19</code> where the last part is obviously the JRE version. You can override this as follows:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">connection.setRequestProperty(<span class="hljs-string">"User-Agent"</span>, <span class="hljs-string">"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36"</span>); <span class="hljs-comment">// Do as if you're using Chrome 41 on Windows 7.</span>
</code></pre>
<p>Use the User-Agent string from a <a href="http://www.useragentstring.com/pages/useragentstring.php" rel="noreferrer">recent browser</a>.</p>
<hr>
<h3>Error handling</h3>
<p>If the HTTP response code is <code>4nn</code> (Client Error) or <code>5nn</code> (Server Error), then you may want to read the <code>HttpURLConnection#getErrorStream()</code> to see if the server has sent any useful error information.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">InputStream</span> <span class="hljs-variable">error</span> <span class="hljs-operator">=</span> ((HttpURLConnection) connection).getErrorStream();
</code></pre>
<p>If the HTTP response code is -1, then something went wrong with connection and response handling. The <code>HttpURLConnection</code> implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the <code>http.keepAlive</code> system property to <code>false</code>. You can do this programmatically in the beginning of your application by:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">System.setProperty(<span class="hljs-string">"http.keepAlive"</span>, <span class="hljs-string">"false"</span>);
</code></pre>
<hr>
<h3>Uploading files</h3>
<p>You'd normally use <a href="http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2" rel="noreferrer"><code>multipart/form-data</code></a> encoding for mixed POST content (binary and character data). The encoding is in more detail described in <a href="http://www.faqs.org/rfcs/rfc2388.html" rel="noreferrer">RFC2388</a>.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">String</span> <span class="hljs-variable">param</span> <span class="hljs-operator">=</span> <span class="hljs-string">"value"</span>;
<span class="hljs-type">File</span> <span class="hljs-variable">textFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"/path/to/file.txt"</span>);
<span class="hljs-type">File</span> <span class="hljs-variable">binaryFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"/path/to/file.bin"</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">boundary</span> <span class="hljs-operator">=</span> Long.toHexString(System.currentTimeMillis()); <span class="hljs-comment">// Just generate some unique random value.</span>
<span class="hljs-type">String</span> <span class="hljs-variable">CRLF</span> <span class="hljs-operator">=</span> <span class="hljs-string">"\r\n"</span>; <span class="hljs-comment">// Line separator required by multipart/form-data.</span>
<span class="hljs-type">URLConnection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
connection.setDoOutput(<span class="hljs-literal">true</span>);
connection.setRequestProperty(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"multipart/form-data; boundary="</span> + boundary);

<span class="hljs-keyword">try</span> (
    <span class="hljs-type">OutputStream</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> connection.getOutputStream();
    <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(output, charset), <span class="hljs-literal">true</span>);
) {
    <span class="hljs-comment">// Send normal param.</span>
    writer.append(<span class="hljs-string">"--"</span> + boundary).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Disposition: form-data; name=\"param\""</span>).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Type: text/plain; charset="</span> + charset).append(CRLF);
    writer.append(CRLF).append(param).append(CRLF).flush();

    <span class="hljs-comment">// Send text file.</span>
    writer.append(<span class="hljs-string">"--"</span> + boundary).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Disposition: form-data; name=\"textFile\"; filename=\""</span> + textFile.getName() + <span class="hljs-string">"\""</span>).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Type: text/plain; charset="</span> + charset).append(CRLF); <span class="hljs-comment">// Text file itself must be saved in this charset!</span>
    writer.append(CRLF).flush();
    Files.copy(textFile.toPath(), output);
    output.flush(); <span class="hljs-comment">// Important before continuing with writer!</span>
    writer.append(CRLF).flush(); <span class="hljs-comment">// CRLF is important! It indicates end of boundary.</span>

    <span class="hljs-comment">// Send binary file.</span>
    writer.append(<span class="hljs-string">"--"</span> + boundary).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Disposition: form-data; name=\"binaryFile\"; filename=\""</span> + binaryFile.getName() + <span class="hljs-string">"\""</span>).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Type: "</span> + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);
    writer.append(<span class="hljs-string">"Content-Transfer-Encoding: binary"</span>).append(CRLF);
    writer.append(CRLF).flush();
    Files.copy(binaryFile.toPath(), output);
    output.flush(); <span class="hljs-comment">// Important before continuing with writer!</span>
    writer.append(CRLF).flush(); <span class="hljs-comment">// CRLF is important! It indicates end of boundary.</span>

    <span class="hljs-comment">// End of multipart/form-data.</span>
    writer.append(<span class="hljs-string">"--"</span> + boundary + <span class="hljs-string">"--"</span>).append(CRLF).flush();
}
</code></pre>
<p>If the other side is an <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html" rel="noreferrer"><code>HttpServlet</code></a>, then its <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29" rel="noreferrer"><code>doPost()</code></a> method will be called and the parts will be available by <a href="http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29" rel="noreferrer"><code>HttpServletRequest#getPart()</code></a> (note, thus <strong>not</strong> <code>getParameter()</code> and so on!). The <code>getPart()</code> method is however relatively new, it's introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc.). Prior to Servlet 3.0, your best choice is using <a href="http://commons.apache.org/fileupload" rel="noreferrer">Apache Commons FileUpload</a> to parse a <code>multipart/form-data</code> request. Also see <a href="https://stackoverflow.com/questions/2422468/upload-big-file-to-servlet/2424824#2424824">this answer</a> for examples of both the FileUpload and the Servelt 3.0 approaches.</p>
<hr>
<h3>Dealing with untrusted or misconfigured HTTPS sites</h3>
<p><sup><em>In case you're developing for Android instead of Java, <strong>be careful</strong>: the workaround below may save your day if you don't have correct certificates deployed during development. But you should not use it for production. These days (April 2021) Google will not allow your app be distributed on Play Store if they detect insecure hostname verifier, see <a href="https://support.google.com/faqs/answer/7188426." rel="noreferrer">https://support.google.com/faqs/answer/7188426.</a></em></sup></p>
<p>Sometimes you need to connect an HTTPS URL, perhaps because you're writing a web scraper. In that case, you may likely face a <code>javax.net.ssl.SSLException: Not trusted server certificate</code> on some HTTPS sites who doesn't keep their SSL certificates up to date, or a <code>java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found</code> or <code>javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name</code> on some misconfigured HTTPS sites.</p>
<p>The following one-time-run <code>static</code> initializer in your web scraper class should make <code>HttpsURLConnection</code> more lenient as to those HTTPS sites and thus not throw those exceptions anymore.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">static</span> {
    TrustManager[] trustAllCertificates = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrustManager</span>[] {
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">X509TrustManager</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> X509Certificate[] getAcceptedIssuers() {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// Not relevant.</span>
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkClientTrusted</span><span class="hljs-params">(X509Certificate[] certs, String authType)</span> {
                <span class="hljs-comment">// Do nothing. Just allow them all.</span>
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkServerTrusted</span><span class="hljs-params">(X509Certificate[] certs, String authType)</span> {
                <span class="hljs-comment">// Do nothing. Just allow them all.</span>
            }
        }
    };

    <span class="hljs-type">HostnameVerifier</span> <span class="hljs-variable">trustAllHostnames</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HostnameVerifier</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">verify</span><span class="hljs-params">(String hostname, SSLSession session)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// Just allow them all.</span>
        }
    };

    <span class="hljs-keyword">try</span> {
        System.setProperty(<span class="hljs-string">"jsse.enableSNIExtension"</span>, <span class="hljs-string">"false"</span>);
        <span class="hljs-type">SSLContext</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> SSLContext.getInstance(<span class="hljs-string">"SSL"</span>);
        sc.init(<span class="hljs-literal">null</span>, trustAllCertificates, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecureRandom</span>());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
        HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);
    }
    <span class="hljs-keyword">catch</span> (GeneralSecurityException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(e);
    }
}
</code></pre>
<hr>
<h3>Last words</h3>
<p>The <a href="http://hc.apache.org/httpcomponents-client-ga/" rel="noreferrer">Apache HttpComponents HttpClient</a> is <em>much</em> more convenient in this all :)</p>
<ul>
<li><a href="http://hc.apache.org/httpcomponents-client-ga/tutorial/html/" rel="noreferrer">HttpClient Tutorial</a></li>
<li><a href="http://hc.apache.org/httpcomponents-client-ga/examples.html" rel="noreferrer">HttpClient Examples</a></li>
</ul>
<hr>
<h3>Parsing and extracting HTML</h3>
<p>If all you want is parsing and extracting data from HTML, then better use a HTML parser like <a href="http://jsoup.org" rel="noreferrer">Jsoup</a>.</p>
<ul>
<li><a href="https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281">What are the pros/cons of leading HTML parsers in Java</a></li>
<li><a href="https://stackoverflow.com/questions/2835505/how-to-scan-a-website-or-page-for-info-and-bring-it-into-my-program/2835555#2835555">How to scan and extract a webpage in Java</a></li>
</ul>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 2</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>When working with HTTP it's almost always more useful to refer to <code>HttpURLConnection</code> rather than the base class <code>URLConnection</code> (since <code>URLConnection</code> is an abstract class when you ask for <code>URLConnection.openConnection()</code> on a HTTP URL that's what you'll get back anyway).</p>

<p>Then you can instead of relying on <code>URLConnection#setDoOutput(true)</code> to implicitly set the request method to <em>POST</em> instead do <code>httpURLConnection.setRequestMethod("POST")</code> which some might find more natural (and which also allows you to specify other request methods such as <em>PUT</em>, <em>DELETE</em>, ...).</p>

<p>It also provides useful HTTP constants so you can do:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">int</span> <span class="hljs-variable">responseCode</span> <span class="hljs-operator">=</span> httpURLConnection.getResponseCode();

<span class="hljs-keyword">if</span> (responseCode == HttpURLConnection.HTTP_OK) {
</code></pre>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 3</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Inspired by this and other questions on Stack&nbsp;Overflow, I've created a minimal open source <a href="http://code.google.com/p/basic-http-client/" rel="nofollow noreferrer">basic-http-client</a> that embodies most of the techniques found here.</p>
<p><a href="https://code.google.com/p/google-http-java-client/" rel="nofollow noreferrer">google-http-java-client</a> is also a great open source resource.</p>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 4</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I suggest you take a look at the code on <a href="https://github.com/kevinsawicki/http-request">kevinsawicki/http-request</a>, its basically a wrapper on top of <code>HttpUrlConnection</code> it provides a much simpler API in case you just want to make the requests right now or you can take a look at the sources (it's not too big) to take a look at how connections are handled.</p>

<p>Example: Make a <code>GET</code> request with content type <code>application/json</code> and some query parameters:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// GET http://google.com?q=baseball%20gloves&amp;size=100</span>
<span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> HttpRequest.get(<span class="hljs-string">"http://google.com"</span>, <span class="hljs-literal">true</span>, <span class="hljs-string">"q"</span>, <span class="hljs-string">"baseball gloves"</span>, <span class="hljs-string">"size"</span>, <span class="hljs-number">100</span>)
        .accept(<span class="hljs-string">"application/json"</span>)
        .body();
System.out.println(<span class="hljs-string">"Response was: "</span> + response);
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 5</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<h2>Update</h2>

<blockquote>
  <p>The new HTTP Client shipped with Java 9 but as part of an
  Incubator module named <code>jdk.incubator.httpclient</code>. Incubator modules are
  a means of putting non-final APIs in the hands of developers while the
  APIs progress towards either finalization or removal in a future
  release.</p>
</blockquote>

<p>In Java 9, you can send a <code>GET</code> request like:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-comment">// GET</span>
<span class="hljs-type">HttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> HttpRequest
    .create(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URI</span>(<span class="hljs-string">"http://www.stackoverflow.com"</span>))
    .headers(<span class="hljs-string">"Foo"</span>, <span class="hljs-string">"foovalue"</span>, <span class="hljs-string">"Bar"</span>, <span class="hljs-string">"barvalue"</span>)
    .GET()
    .response();
</code></pre>

<p>Then you can examine the returned <code>HttpResponse</code>:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">int</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> response.statusCode();
<span class="hljs-type">String</span> <span class="hljs-variable">responseBody</span> <span class="hljs-operator">=</span> response.body(HttpResponse.asString());
</code></pre>

<p>Since this new HTTP Client is in <del><code>java.httpclient</code></del> <code>jdk.incubator.httpclient</code> module, you should declare this dependency in your <code>module-info.java</code> file:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">module</span> com.foo.bar {
    <span class="hljs-keyword">requires</span> jdk.incubator.httpclient;
}
</code></pre>
    </div></div></div></div><div id="solution6" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 6</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There are two options you can go with HTTP URL Hits : GET / POST</p>
<p>GET Request:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">HttpURLConnection.setFollowRedirects(<span class="hljs-literal">true</span>); <span class="hljs-comment">// Defaults to true</span>

<span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"https://name_of_the_url"</span>;
<span class="hljs-type">URL</span> <span class="hljs-variable">request_url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url);
<span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">http_conn</span> <span class="hljs-operator">=</span> (HttpURLConnection)request_url.openConnection();
http_conn.setConnectTimeout(<span class="hljs-number">100000</span>);
http_conn.setReadTimeout(<span class="hljs-number">100000</span>);
http_conn.setInstanceFollowRedirects(<span class="hljs-literal">true</span>);
System.out.println(String.valueOf(http_conn.getResponseCode()));
</code></pre>
<p>POST request:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">HttpURLConnection.setFollowRedirects(<span class="hljs-literal">true</span>); <span class="hljs-comment">// Defaults to true</span>

<span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"https://name_of_the_url"</span>
<span class="hljs-type">URL</span> <span class="hljs-variable">request_url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url);
<span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">http_conn</span> <span class="hljs-operator">=</span> (HttpURLConnection)request_url.openConnection();
http_conn.setConnectTimeout(<span class="hljs-number">100000</span>);
http_conn.setReadTimeout(<span class="hljs-number">100000</span>);
http_conn.setInstanceFollowRedirects(<span class="hljs-literal">true</span>);
http_conn.setDoOutput(<span class="hljs-literal">true</span>);
<span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(http_conn.getOutputStream());
<span class="hljs-keyword">if</span> (urlparameter != <span class="hljs-literal">null</span>) {
   out.println(urlparameter);
}
out.close();
out = <span class="hljs-literal">null</span>;
System.out.println(String.valueOf(http_conn.getResponseCode()));
</code></pre>
    </div></div></div></div><div id="solution7" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 7</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>I was also very inspired by this response.</p>
<p>I am often on projects where I need to do some HTTP, and I may not want to bring in a lot of third-party dependencies (which bring in others and so on and so on, etc.)</p>
<p>I started to write my own utilities based on some of this conversation (not any where done):</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">package</span> org.boon.utils;

<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.io.InputStream;
<span class="hljs-keyword">import</span> java.net.HttpURLConnection;
<span class="hljs-keyword">import</span> java.net.URL;
<span class="hljs-keyword">import</span> java.net.URLConnection;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.boon.utils.IO.read;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HTTP</span> {
</code></pre>
<p>Then there are just a bunch or static methods.</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">get</span><span class="hljs-params">(
        <span class="hljs-keyword">final</span> String url)</span> {

    Exceptions.tryIt(() -&gt; {
        URLConnection connection;
        connection = doGet(url, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
        <span class="hljs-keyword">return</span> extractResponseString(connection);
    });
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getWithHeaders</span><span class="hljs-params">(
        <span class="hljs-keyword">final</span> String url,
        <span class="hljs-keyword">final</span> Map&lt;String, ? extends Object&gt; headers)</span> {
    URLConnection connection;
    <span class="hljs-keyword">try</span> {
        connection = doGet(url, headers, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
        <span class="hljs-keyword">return</span> extractResponseString(connection);
    } <span class="hljs-keyword">catch</span> (Exception ex) {
        Exceptions.handle(ex);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getWithContentType</span><span class="hljs-params">(
        <span class="hljs-keyword">final</span> String url,
        <span class="hljs-keyword">final</span> Map&lt;String, ? extends Object&gt; headers,
        String contentType)</span> {
    URLConnection connection;
    <span class="hljs-keyword">try</span> {
        connection = doGet(url, headers, contentType, <span class="hljs-literal">null</span>);
        <span class="hljs-keyword">return</span> extractResponseString(connection);
    } <span class="hljs-keyword">catch</span> (Exception ex) {
        Exceptions.handle(ex);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getWithCharSet</span><span class="hljs-params">(
        <span class="hljs-keyword">final</span> String url,
        <span class="hljs-keyword">final</span> Map&lt;String, ? extends Object&gt; headers,
        String contentType,
        String charSet)</span> {
    URLConnection connection;
    <span class="hljs-keyword">try</span> {
        connection = doGet(url, headers, contentType, charSet);
        <span class="hljs-keyword">return</span> extractResponseString(connection);
    } <span class="hljs-keyword">catch</span> (Exception ex) {
        Exceptions.handle(ex);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<p>Then post...</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">postBody</span><span class="hljs-params">(
        <span class="hljs-keyword">final</span> String url,
        <span class="hljs-keyword">final</span> String body)</span> {
    URLConnection connection;
    <span class="hljs-keyword">try</span> {
        connection = doPost(url, <span class="hljs-literal">null</span>, <span class="hljs-string">"text/plain"</span>, <span class="hljs-literal">null</span>, body);
        <span class="hljs-keyword">return</span> extractResponseString(connection);
    } <span class="hljs-keyword">catch</span> (Exception ex) {
        Exceptions.handle(ex);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">postBodyWithHeaders</span><span class="hljs-params">(
        <span class="hljs-keyword">final</span> String url,
        <span class="hljs-keyword">final</span> Map&lt;String, ? extends Object&gt; headers,
        <span class="hljs-keyword">final</span> String body)</span> {
    URLConnection connection;
    <span class="hljs-keyword">try</span> {
        connection = doPost(url, headers, <span class="hljs-string">"text/plain"</span>, <span class="hljs-literal">null</span>, body);
        <span class="hljs-keyword">return</span> extractResponseString(connection);
    } <span class="hljs-keyword">catch</span> (Exception ex) {
        Exceptions.handle(ex);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}


<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">postBodyWithContentType</span><span class="hljs-params">(
        <span class="hljs-keyword">final</span> String url,
        <span class="hljs-keyword">final</span> Map&lt;String, ? extends Object&gt; headers,
        <span class="hljs-keyword">final</span> String contentType,
        <span class="hljs-keyword">final</span> String body)</span> {

    URLConnection connection;
    <span class="hljs-keyword">try</span> {
        connection = doPost(url, headers, contentType, <span class="hljs-literal">null</span>, body);

        <span class="hljs-keyword">return</span> extractResponseString(connection);

    } <span class="hljs-keyword">catch</span> (Exception ex) {
        Exceptions.handle(ex);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

}


<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">postBodyWithCharset</span><span class="hljs-params">(
        <span class="hljs-keyword">final</span> String url,
        <span class="hljs-keyword">final</span> Map&lt;String, ? extends Object&gt; headers,
        <span class="hljs-keyword">final</span> String contentType,
        <span class="hljs-keyword">final</span> String charSet,
        <span class="hljs-keyword">final</span> String body)</span> {

    URLConnection connection;
    <span class="hljs-keyword">try</span> {
        connection = doPost(url, headers, contentType, charSet, body);

        <span class="hljs-keyword">return</span> extractResponseString(connection);

    } <span class="hljs-keyword">catch</span> (Exception ex) {
        Exceptions.handle(ex);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> URLConnection <span class="hljs-title function_">doPost</span><span class="hljs-params">(String url, Map&lt;String, ? extends Object&gt; headers,
                                    String contentType, String charset, String body
                                    )</span> <span class="hljs-keyword">throws</span> IOException {
    URLConnection connection;<span class="hljs-comment">/* Handle output. */</span>
    connection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
    connection.setDoOutput(<span class="hljs-literal">true</span>);
    manageContentTypeHeaders(contentType, charset, connection);

    manageHeaders(headers, connection);

    IO.write(connection.getOutputStream(), body, IO.CHARSET);
    <span class="hljs-keyword">return</span> connection;
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">manageHeaders</span><span class="hljs-params">(Map&lt;String, ? extends Object&gt; headers, URLConnection connection)</span> {
    <span class="hljs-keyword">if</span> (headers != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, ? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Object</span>&gt; entry : headers.entrySet()) {
            connection.setRequestProperty(entry.getKey(), entry.getValue().toString());
        }
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">manageContentTypeHeaders</span><span class="hljs-params">(String contentType, String charset, URLConnection connection)</span> {
    connection.setRequestProperty(<span class="hljs-string">"Accept-Charset"</span>, charset == <span class="hljs-literal">null</span> ? IO.CHARSET : charset);
    <span class="hljs-keyword">if</span> (contentType!=<span class="hljs-literal">null</span> &amp;&amp; !contentType.isEmpty()) {
        connection.setRequestProperty(<span class="hljs-string">"Content-Type"</span>, contentType);
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> URLConnection <span class="hljs-title function_">doGet</span><span class="hljs-params">(String url, Map&lt;String, ? extends Object&gt; headers,
                                    String contentType, String charset)</span> <span class="hljs-keyword">throws</span> IOException {
    URLConnection connection;<span class="hljs-comment">/* Handle output. */</span>
    connection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
    manageContentTypeHeaders(contentType, charset, connection);

    manageHeaders(headers, connection);

    <span class="hljs-keyword">return</span> connection;
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">extractResponseString</span><span class="hljs-params">(URLConnection connection)</span> <span class="hljs-keyword">throws</span> IOException {
<span class="hljs-comment">/* Handle input. */</span>
    <span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">http</span> <span class="hljs-operator">=</span> (HttpURLConnection)connection;
    <span class="hljs-type">int</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> http.getResponseCode();
    <span class="hljs-type">String</span> <span class="hljs-variable">charset</span> <span class="hljs-operator">=</span> getCharset(connection.getHeaderField(<span class="hljs-string">"Content-Type"</span>));

    <span class="hljs-keyword">if</span> (status==<span class="hljs-number">200</span>) {
        <span class="hljs-keyword">return</span> readResponseBody(http, charset);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> readErrorResponseBody(http, status, charset);
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">readErrorResponseBody</span><span class="hljs-params">(HttpURLConnection http, <span class="hljs-type">int</span> status, String charset)</span> {
    <span class="hljs-type">InputStream</span> <span class="hljs-variable">errorStream</span> <span class="hljs-operator">=</span> http.getErrorStream();
    <span class="hljs-keyword">if</span> ( errorStream!=<span class="hljs-literal">null</span> ) {
        <span class="hljs-type">String</span> <span class="hljs-variable">error</span> <span class="hljs-operator">=</span> charset== <span class="hljs-literal">null</span> ? read( errorStream ) :
            read( errorStream, charset );
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"STATUS CODE ="</span> + status + <span class="hljs-string">"\n\n"</span> + error);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"STATUS CODE ="</span> + status);
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">readResponseBody</span><span class="hljs-params">(HttpURLConnection http, String charset)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-keyword">if</span> (charset != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> read(http.getInputStream(), charset);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> read(http.getInputStream());
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getCharset</span><span class="hljs-params">(String contentType)</span> {
    <span class="hljs-keyword">if</span> (contentType==<span class="hljs-literal">null</span>)  {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-type">String</span> <span class="hljs-variable">charset</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">for</span> (String param : contentType.replace(<span class="hljs-string">" "</span>, <span class="hljs-string">""</span>).split(<span class="hljs-string">";"</span>)) {
        <span class="hljs-keyword">if</span> (param.startsWith(<span class="hljs-string">"charset="</span>)) {
            charset = param.split(<span class="hljs-string">"="</span>, <span class="hljs-number">2</span>)[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">break</span>;
        }
    }
    charset = charset == <span class="hljs-literal">null</span> ? IO.CHARSET : charset;

    <span class="hljs-keyword">return</span> charset;
}
</code></pre>
<p>Well, you get the idea....</p>
<p>Here are the tests:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HttpHandler</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(HttpExchange t)</span> <span class="hljs-keyword">throws</span> IOException {

        <span class="hljs-type">InputStream</span> <span class="hljs-variable">requestBody</span> <span class="hljs-operator">=</span> t.getRequestBody();
        <span class="hljs-type">String</span> <span class="hljs-variable">body</span> <span class="hljs-operator">=</span> IO.read(requestBody);
        <span class="hljs-type">Headers</span> <span class="hljs-variable">requestHeaders</span> <span class="hljs-operator">=</span> t.getRequestHeaders();
        body = body + <span class="hljs-string">"\n"</span> + copy(requestHeaders).toString();
        t.sendResponseHeaders(<span class="hljs-number">200</span>, body.length());
        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">os</span> <span class="hljs-operator">=</span> t.getResponseBody();
        os.write(body.getBytes());
        os.close();
    }
}


<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testHappy</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {

    <span class="hljs-type">HttpServer</span> <span class="hljs-variable">server</span> <span class="hljs-operator">=</span> HttpServer.create(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">9212</span>), <span class="hljs-number">0</span>);
    server.createContext(<span class="hljs-string">"/test"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHandler</span>());
    server.setExecutor(<span class="hljs-literal">null</span>); <span class="hljs-comment">// creates a default executor</span>
    server.start();

    Thread.sleep(<span class="hljs-number">10</span>);

    Map&lt;String,String&gt; headers = map(<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>, <span class="hljs-string">"fun"</span>, <span class="hljs-string">"sun"</span>);

    <span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> HTTP.postBodyWithContentType(<span class="hljs-string">"http://localhost:9212/test"</span>, headers, <span class="hljs-string">"text/plain"</span>, <span class="hljs-string">"hi mom"</span>);

    System.out.println(response);

    assertTrue(response.contains(<span class="hljs-string">"hi mom"</span>));
    assertTrue(response.contains(<span class="hljs-string">"Fun=[sun], Foo=[bar]"</span>));

    response = HTTP.postBodyWithCharset(<span class="hljs-string">"http://localhost:9212/test"</span>, headers, <span class="hljs-string">"text/plain"</span>, <span class="hljs-string">"UTF-8"</span>, <span class="hljs-string">"hi mom"</span>);

    System.out.println(response);

    assertTrue(response.contains(<span class="hljs-string">"hi mom"</span>));
    assertTrue(response.contains(<span class="hljs-string">"Fun=[sun], Foo=[bar]"</span>));

    response = HTTP.postBodyWithHeaders(<span class="hljs-string">"http://localhost:9212/test"</span>, headers, <span class="hljs-string">"hi mom"</span>);

    System.out.println(response);

    assertTrue(response.contains(<span class="hljs-string">"hi mom"</span>));
    assertTrue(response.contains(<span class="hljs-string">"Fun=[sun], Foo=[bar]"</span>));

    response = HTTP.get(<span class="hljs-string">"http://localhost:9212/test"</span>);

    System.out.println(response);

    response = HTTP.getWithHeaders(<span class="hljs-string">"http://localhost:9212/test"</span>, headers);

    System.out.println(response);

    assertTrue(response.contains(<span class="hljs-string">"Fun=[sun], Foo=[bar]"</span>));

    response = HTTP.getWithContentType(<span class="hljs-string">"http://localhost:9212/test"</span>, headers, <span class="hljs-string">"text/plain"</span>);

    System.out.println(response);

    assertTrue(response.contains(<span class="hljs-string">"Fun=[sun], Foo=[bar]"</span>));

    response = HTTP.getWithCharSet(<span class="hljs-string">"http://localhost:9212/test"</span>, headers, <span class="hljs-string">"text/plain"</span>, <span class="hljs-string">"UTF-8"</span>);

    System.out.println(response);

    assertTrue(response.contains(<span class="hljs-string">"Fun=[sun], Foo=[bar]"</span>));

    Thread.sleep(<span class="hljs-number">10</span>);

    server.stop(<span class="hljs-number">0</span>);
}

<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testPostBody</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {

    <span class="hljs-type">HttpServer</span> <span class="hljs-variable">server</span> <span class="hljs-operator">=</span> HttpServer.create(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">9220</span>), <span class="hljs-number">0</span>);
    server.createContext(<span class="hljs-string">"/test"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHandler</span>());
    server.setExecutor(<span class="hljs-literal">null</span>); <span class="hljs-comment">// creates a default executor</span>
    server.start();

    Thread.sleep(<span class="hljs-number">10</span>);

    Map&lt;String,String&gt; headers = map(<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>, <span class="hljs-string">"fun"</span>, <span class="hljs-string">"sun"</span>);

    <span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> HTTP.postBody(<span class="hljs-string">"http://localhost:9220/test"</span>, <span class="hljs-string">"hi mom"</span>);

    assertTrue(response.contains(<span class="hljs-string">"hi mom"</span>));

    Thread.sleep(<span class="hljs-number">10</span>);

    server.stop(<span class="hljs-number">0</span>);
}

<span class="hljs-meta">@Test(expected = RuntimeException.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSad</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {

    <span class="hljs-type">HttpServer</span> <span class="hljs-variable">server</span> <span class="hljs-operator">=</span> HttpServer.create(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">9213</span>), <span class="hljs-number">0</span>);
    server.createContext(<span class="hljs-string">"/test"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHandler</span>());
    server.setExecutor(<span class="hljs-literal">null</span>); <span class="hljs-comment">// creates a default executor</span>
    server.start();

    Thread.sleep(<span class="hljs-number">10</span>);

    Map&lt;String,String&gt; headers = map(<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>, <span class="hljs-string">"fun"</span>, <span class="hljs-string">"sun"</span>);

    <span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> HTTP.postBodyWithContentType(<span class="hljs-string">"http://localhost:9213/foo"</span>, headers, <span class="hljs-string">"text/plain"</span>, <span class="hljs-string">"hi mom"</span>);

    System.out.println(response);

    assertTrue(response.contains(<span class="hljs-string">"hi mom"</span>));
    assertTrue(response.contains(<span class="hljs-string">"Fun=[sun], Foo=[bar]"</span>));

    Thread.sleep(<span class="hljs-number">10</span>);

    server.stop(<span class="hljs-number">0</span>);
}
</code></pre>
<p>You can find the rest here:</p>
<p><a href="https://github.com/RichardHightower/boon" rel="nofollow noreferrer">https://github.com/RichardHightower/boon</a></p>
<p>My goal is to provide the common things one would want to do in a bit more easier way then....</p>
    </div></div></div></div><div id="solution8" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 8</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Initially I was misled by <a href="http://www.innovation.ch/java/HTTPClient/urlcon_vs_httpclient.html" rel="nofollow noreferrer">this article</a> which favours <code>HttpClient</code>.</p>
<p>Later I have realized that <code>HttpURLConnection</code> is going to stay from <a href="https://github.com/loopj/android-async-http/issues/75" rel="nofollow noreferrer">this article</a>.</p>
<p><strong>As per the Google blog</strong>:</p>
<blockquote>
<p>Apache HTTP client has fewer bugs on Eclair and Froyo. It is the best choice for these releases. For Gingerbread , HttpURLConnection is the best choice. Its simple API and small size makes it great fit for Android.</p>
<p>Transparent compression and response caching reduce network use, improve speed and save battery. New applications should use HttpURLConnection; it is where we will be spending our energy going forward.</p>
</blockquote>
<p>After reading <a href="http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/" rel="nofollow noreferrer">this article</a> and some other stack over flow questions, I am convinced that <code>HttpURLConnection</code> is going to stay for longer durations.</p>
<p>Some of the SE questions favouring <code>HttpURLConnections</code>:</p>
<p><em><a href="https://stackoverflow.com/questions/4330392/on-android-make-a-post-request-with-url-encoded-form-data-without-using-urlenco/4794289#4794289">On Android, make a POST request with URL Encoded Form data without using UrlEncodedFormEntity</a></em></p>
<p><em><a href="https://stackoverflow.com/questions/4221420/httppost-works-in-java-project-not-in-android">HttpPost works in Java project, but not on Android</a></em></p>
    </div></div></div></div><div id="solution9" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 9</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>There is also <a href="http://square.github.io/okhttp/">OkHttp</a>, which is an HTTP client thats efficient by default:</p>

<blockquote>
  <ul>
  <li>HTTP/2 support allows all requests to the same host to share a    socket.</li>
  <li>Connection pooling reduces request latency (if HTTP/2 isnt    available).</li>
  <li>Transparent GZIP shrinks download sizes.</li>
  <li>Response caching avoids the network completely for repeat requests.</li>
  </ul>
</blockquote>

<p>First create an instance of <code>OkHttpClient</code>:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">OkHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>();
</code></pre>

<p>Then, prepare your <code>GET</code> request:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder()
      .url(url)
      .build();
</code></pre>

<p>finally, use <code>OkHttpClient</code> to send prepared <code>Request</code>:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">Response</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.newCall(request).execute();
</code></pre>

<p>For more details, you can consult the <a href="https://github.com/square/okhttp/wiki">OkHttp's documentation</a></p>
    </div></div></div></div><div id="solution10" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 10</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are using HTTP <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods" rel="nofollow noreferrer">GET</a>, please remove this line:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java">urlConnection.setDoOutput(<span class="hljs-literal">true</span>);
</code></pre>
    </div></div></div></div><div id="solution11" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 11</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>You can also use <a href="http://http.jcabi.com/apidocs-1.0/com/jcabi/http/request/JdkRequest.html"><code>JdkRequest</code></a> from <a href="http://http.jcabi.com">jcabi-http</a> (I'm a developer), which does all this work for you, decorating HttpURLConnection, firing HTTP requests and parsing responses, for example:</p>

<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">String</span> <span class="hljs-variable">html</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdkRequest</span>(<span class="hljs-string">"http://www.google.com"</span>).fetch().body();
</code></pre>

<p>Check this blog post for more info: <a href="http://www.yegor256.com/2014/04/11/jcabi-http-intro.html">http://www.yegor256.com/2014/04/11/jcabi-http-intro.html</a></p>
    </div></div></div></div><div id="solution12" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h4 class="text-4xl font-semibold mb-5">Solution 12</h4><div class="tags-wrap h-max space-x-8"><div class="tags"><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/http">http</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httpurlconnection">httpurlconnection</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/httprequest">httprequest</a><a class="rounded-2xl border bg-neutral-100 px-3 py-1 text-sm font-semibold whitespace-nowrap" href="/questions/tag/urlconnection">urlconnection</a></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>If you are using <strong>Java 11</strong> (<a href="https://stackoverflow.com/q/65363995/8583692">except on Android</a>), instead of the legacy <em>HttpUrlConnection</em> class, you can use Java 11 new <a href="https://openjdk.java.net/groups/net/httpclient/intro.html" rel="nofollow noreferrer">HTTP Client API</a>.</p>
<h4>An example <em>GET</em> request:</h4>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">var</span> <span class="hljs-variable">uri</span> <span class="hljs-operator">=</span> URI.create(<span class="hljs-string">"https://httpbin.org/get?age=26&amp;isHappy=true"</span>);
<span class="hljs-type">var</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> HttpClient.newHttpClient();
<span class="hljs-type">var</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest
        .newBuilder()
        .uri(uri)
        .header(<span class="hljs-string">"accept"</span>, <span class="hljs-string">"application/json"</span>)
        .GET()
        .build();
<span class="hljs-type">var</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.send(request, HttpResponse.BodyHandlers.ofString());
System.out.println(response.statusCode());
System.out.println(response.body());
</code></pre>
<p>The same request executed asynchronously:</p>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">var</span> <span class="hljs-variable">responseAsync</span> <span class="hljs-operator">=</span> client
        .sendAsync(request, HttpResponse.BodyHandlers.ofString())
        .thenApply(HttpResponse::body)
        .thenAccept(System.out::println);
<span class="hljs-comment">// responseAsync.join(); // Wait for completion</span>
</code></pre>
<h4>An example <em>POST</em> request:</h4>
<pre class="lang-java s-code-block"><code class="hljs language-java"><span class="hljs-type">var</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> HttpRequest
        .newBuilder()
        .uri(uri)
        .version(HttpClient.Version.HTTP_2)
        .timeout(Duration.ofMinutes(<span class="hljs-number">1</span>))
        .header(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>)
        .header(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer fake"</span>)
        .POST(BodyPublishers.ofString(<span class="hljs-string">"{ title: 'This is cool' }"</span>))
        .build();
<span class="hljs-type">var</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.send(request, HttpResponse.BodyHandlers.ofString());
</code></pre>
<p>For sending form data as multipart (<code>multipart/form-data</code>) or url-encoded (<code>application/x-www-form-urlencoded</code>) format, see <a href="https://stackoverflow.com/a/56482187/8583692">this solution</a>.</p>
<p>See <a href="https://www.baeldung.com/java-9-http-client" rel="nofollow noreferrer">this article</a> for examples and more information about HTTP Client API.</p>
<h2>Sidenote</h2>
<p>For Java standard library HTTP server, see <a href="https://stackoverflow.com/a/71635295/8583692">this post</a>.</p>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/what-does-enctype&#x27;multipartform-data&#x27;-mean-1657388229352">What does enctype=&#x27;multipart/form-data&#x27; mean?</a><a href="/questions/why-not-use-double-or-float-to-represent-currency-1657387417964">Why not use Double or Float to represent currency?</a><a href="/questions/how-to-iterate-over-rows-in-a-dataframe-in-pandas-1657387358115">How to iterate over rows in a DataFrame in Pandas</a><a href="/questions/copy-array-by-value-1657387649531">Copy array by value</a><a href="/questions/why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877">Why do I need to override the equals and hashCode methods in Java?</a><a href="/questions/how-to-check-whether-a-string-contains-a-substring-in-javascript-1657388080698">How to check whether a string contains a substring in JavaScript?</a><a href="/questions/how-do-i-vertically-center-text-with-css-duplicate-1657387645821">How do I vertically center text with CSS? [duplicate]</a><a href="/questions/parsing-a-string-to-a-date-in-javascript-1657387782497">Parsing a string to a date in JavaScript</a><a href="/questions/what-does-this-symbol-mean-in-javascript-1657387632971">What does this symbol mean in JavaScript?</a><a href="/questions/how-to-test-multiple-variables-for-equality-against-a-single-value-1657384358504">How to test multiple variables for equality against a single value?</a><a href="/questions/error-in-finding-last-used-cell-in-excel-with-vba-1657384584748">Error in finding last used cell in Excel with VBA</a><a href="/questions/truth-value-of-a-series-is-ambiguous.-use-a.empty-a.bool()-a.item()-a.any()-or-a.all()-1657387724259">Truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all()</a><a href="/questions/how-do-i-use-reflection-to-call-a-generic-method-1657387256751">How do I use reflection to call a generic method?</a><a href="/questions/how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457">How do I compose a rotation matrix with human readable angles from scratch?</a><a href="/questions/i-just-assigned-a-variable-but-echo-dollarvariable-shows-something-else-1657387574561">I just assigned a variable, but echo $variable shows something else</a><a href="/questions/what-is-the-difference-between-include-lessfilenamegreater-and-include-%22filename%22-1657388489547">What is the difference between #include &lt;filename&gt; and #include &quot;filename&quot;?</a><a href="/questions/how-does-access-control-allow-origin-header-work-1657384881723">How does Access-Control-Allow-Origin header work?</a><a href="/questions/creating-multiline-strings-in-javascript-1657388025414">Creating multiline strings in JavaScript</a><a href="/questions/what-is-javascript&#x27;s-highest-integer-value-that-a-number-can-go-to-without-losing-precision-1657387622983">What is JavaScript&#x27;s highest integer value that a number can go to without losing precision?</a><a href="/questions/how-do-i-profile-c++-code-running-on-linux-1657384754272">How do I profile C++ code running on Linux?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;p\u0026gt;\u0026lt;sup\u0026gt;\u0026lt;em\u0026gt;First a disclaimer beforehand: the posted code snippets are all basic examples. You\u0026apos;ll need to handle trivial \u0026lt;code\u0026gt;IOException\u0026lt;/code\u0026gt;s and \u0026lt;code\u0026gt;RuntimeException\u0026lt;/code\u0026gt;s like \u0026lt;code\u0026gt;NullPointerException\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;ArrayIndexOutOfBoundsException\u0026lt;/code\u0026gt; and consorts yourself.\u0026lt;/em\u0026gt;\u0026lt;/sup\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;sup\u0026gt;\u0026lt;em\u0026gt;In case you\u0026apos;re developing for Android instead of Java, note also that since introduction of API level 28, cleartext HTTP requests are \u0026lt;a href=\u0026quot;https://developer.android.com/about/versions/pie/android-9.0-changes-28#tls-enabled\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;disabled by default\u0026lt;/a\u0026gt;. You are encouraged to use \u0026lt;code\u0026gt;HttpsURLConnection\u0026lt;/code\u0026gt;, but if it is really necessary, cleartext can be enabled in the Application Manifest.\u0026lt;/em\u0026gt;\u0026lt;/sup\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Preparing\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;We first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://example.com\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;charset\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UTF-8\u0026quot;\u0026lt;/span\u0026gt;;  \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;param1\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value1\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;param2\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value2\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;query\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; String.format(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;param1=%s\u0026amp;amp;param2=%s\u0026quot;\u0026lt;/span\u0026gt;,\n    URLEncoder.encode(param1, charset),\n    URLEncoder.encode(param2, charset));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The query parameters must be in \u0026lt;code\u0026gt;name=value\u0026lt;/code\u0026gt; format and be concatenated by \u0026lt;code\u0026gt;\u0026amp;amp;\u0026lt;/code\u0026gt;. You would normally also \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/Percent-encoding\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;URL-encode\u0026lt;/a\u0026gt; the query parameters with the specified charset using \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html#encode-java.lang.String-java.lang.String-\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLEncoder#encode()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;sup\u0026gt;The \u0026lt;code\u0026gt;String#format()\u0026lt;/code\u0026gt; is just for convenience. I prefer it when I would need the String concatenation operator \u0026lt;code\u0026gt;+\u0026lt;/code\u0026gt; more than twice.\u0026lt;/sup\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Firing an \u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP GET\u0026lt;/a\u0026gt; request with (optionally) query parameters\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;It\u0026apos;s a trivial task. It\u0026apos;s the default request method.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;?\u0026quot;\u0026lt;/span\u0026gt; + query).openConnection();\nconnection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Accept-Charset\u0026quot;\u0026lt;/span\u0026gt;, charset);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getInputStream();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Any query string should be concatenated to the URL using \u0026lt;code\u0026gt;?\u0026lt;/code\u0026gt;. The \u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Accept-Charset\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; header may hint the server what encoding the parameters are in. If you don\u0026apos;t send any query string, then you can leave the \u0026lt;code\u0026gt;Accept-Charset\u0026lt;/code\u0026gt; header away. If you don\u0026apos;t need to set any headers, then you can even use the \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#openStream%28%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URL#openStream()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; shortcut method.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openStream();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Either way, if the other side is an \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServlet\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, then its \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;doGet()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; method will be called and the parameters will be available by \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServletRequest#getParameter()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;For testing purposes, you can print the response body to \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;standard output\u0026lt;/a\u0026gt; as below:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Scanner\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;scanner\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Scanner\u0026lt;/span\u0026gt;(response)) {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;responseBody\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; scanner.useDelimiter(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\\A\u0026quot;\u0026lt;/span\u0026gt;).next();\n    System.out.println(responseBody);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Firing an \u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP POST\u0026lt;/a\u0026gt; request with query parameters\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;Setting the \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLConnection#setDoOutput()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to \u0026lt;code\u0026gt;true\u0026lt;/code\u0026gt; implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type \u0026lt;code\u0026gt;application/x-www-form-urlencoded\u0026lt;/code\u0026gt; wherein the query string is written to the request body.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\nconnection.setDoOutput(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Triggers POST.\u0026lt;/span\u0026gt;\nconnection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Accept-Charset\u0026quot;\u0026lt;/span\u0026gt;, charset);\nconnection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/x-www-form-urlencoded;charset=\u0026quot;\u0026lt;/span\u0026gt; + charset);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;OutputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;output\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getOutputStream()) {\n    output.write(query.getBytes(charset));\n}\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getInputStream();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Note: whenever you\u0026apos;d like to submit a HTML form programmatically, don\u0026apos;t forget to take the \u0026lt;code\u0026gt;name=value\u0026lt;/code\u0026gt; pairs of any \u0026lt;code\u0026gt;\u0026amp;lt;input type=\u0026quot;hidden\u0026quot;\u0026amp;gt;\u0026lt;/code\u0026gt; elements into the query string and of course also the \u0026lt;code\u0026gt;name=value\u0026lt;/code\u0026gt; pair of the \u0026lt;code\u0026gt;\u0026amp;lt;input type=\u0026quot;submit\u0026quot;\u0026amp;gt;\u0026lt;/code\u0026gt; element which you\u0026apos;d like to \u0026quot;press\u0026quot; programmatically (because that\u0026apos;s usually been used in the server side to distinguish if a button was pressed and if so, which one).\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;You can also cast the obtained \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLConnection\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; and use its \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection#setRequestMethod()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; instead. But if you\u0026apos;re trying to use the connection for output you still need to set \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLConnection#setDoOutput()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; to \u0026lt;code\u0026gt;true\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpURLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;httpConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (HttpURLConnection) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\nhttpConnection.setRequestMethod(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;POST\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Either way, if the other side is an \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServlet\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, then its \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;doPost()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; method will be called and the parameters will be available by \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServletRequest#getParameter()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Actually firing the HTTP request\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;You can fire the HTTP request explicitly with \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#connect%28%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLConnection#connect()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#getInputStream%28%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;URLConnection#getInputStream()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; and so on. The above examples does exactly that, so the \u0026lt;code\u0026gt;connect()\u0026lt;/code\u0026gt; call is in fact superfluous.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Gathering HTTP response information\u0026lt;/h3\u0026gt;\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP response status\u0026lt;/a\u0026gt;:\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;You need an \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; here. Cast it first if necessary.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;status\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; httpConnection.getResponseCode();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;ol start=\u0026quot;2\u0026quot;\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP response headers\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (Entry\u0026amp;lt;String, List\u0026amp;lt;String\u0026amp;gt;\u0026amp;gt; header : connection.getHeaderFields().entrySet()) {\n     System.out.println(header.getKey() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;=\u0026quot;\u0026lt;/span\u0026gt; + header.getValue());\n }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HTTP response encoding\u0026lt;/a\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n\u0026lt;p\u0026gt;When the \u0026lt;code\u0026gt;Content-Type\u0026lt;/code\u0026gt; contains a \u0026lt;code\u0026gt;charset\u0026lt;/code\u0026gt; parameter, then the response body is likely text based and we\u0026apos;d like to process the response body with the server-side specified character encoding then.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;contentType\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getHeaderField(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;);\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;charset\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (String param : contentType.replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;;\u0026quot;\u0026lt;/span\u0026gt;)) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (param.startsWith(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;charset=\u0026quot;\u0026lt;/span\u0026gt;)) {\n            charset = param.split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;=\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n        }\n    }\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (charset != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;BufferedReader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;reader\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;BufferedReader\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InputStreamReader\u0026lt;/span\u0026gt;(response, charset))) {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (String line; (line = reader.readLine()) != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;) {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ... System.out.println(line)?\u0026lt;/span\u0026gt;\n            }\n        }\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// It\u0026apos;s likely binary content, use InputStream/OutputStream.\u0026lt;/span\u0026gt;\n    }\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Maintaining the session\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;The server side session is usually backed by a cookie. Some web forms require that you\u0026apos;re logged in and/or are tracked by a session. You can use the \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;CookieHandler\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; API to maintain cookies. You need to prepare a \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;CookieManager\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; with a \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;CookiePolicy\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; of \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html#ACCEPT_ALL\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;ACCEPT_ALL\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; before sending all HTTP requests.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// First set the default cookie manager.\u0026lt;/span\u0026gt;\nCookieHandler.setDefault(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;CookieManager\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, CookiePolicy.ACCEPT_ALL));\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// All the following subsequent URLConnections will use the same cookie manager.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\nconnection = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\nconnection = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Note that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all \u0026lt;code\u0026gt;Set-Cookie\u0026lt;/code\u0026gt; headers from the response of the login or the first \u0026lt;code\u0026gt;GET\u0026lt;/code\u0026gt; request and then pass this through the subsequent requests.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Gather all cookies on the first request.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\nList\u0026amp;lt;String\u0026amp;gt; cookies = connection.getHeaderFields().get(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Set-Cookie\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Then use the same cookies on all subsequent requests.\u0026lt;/span\u0026gt;\nconnection = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (String cookie : cookies) {\n    connection.addRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Cookie\u0026quot;\u0026lt;/span\u0026gt;, cookie.split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;;\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;]);\n}\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// ...\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;code\u0026gt;split(\u0026quot;;\u0026quot;, 2)[0]\u0026lt;/code\u0026gt; is there to get rid of cookie attributes which are irrelevant for the server side like \u0026lt;code\u0026gt;expires\u0026lt;/code\u0026gt;, \u0026lt;code\u0026gt;path\u0026lt;/code\u0026gt;, etc. Alternatively, you could also use \u0026lt;code\u0026gt;cookie.substring(0, cookie.indexOf(\u0026apos;;\u0026apos;))\u0026lt;/code\u0026gt; instead of \u0026lt;code\u0026gt;split()\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Streaming mode\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; will by default buffer the \u0026lt;em\u0026gt;entire\u0026lt;/em\u0026gt; request body before actually sending it, regardless of whether you\u0026apos;ve set a fixed content length yourself using \u0026lt;code\u0026gt;connection.setRequestProperty(\u0026quot;Content-Length\u0026quot;, contentLength);\u0026lt;/code\u0026gt;. This may cause \u0026lt;code\u0026gt;OutOfMemoryException\u0026lt;/code\u0026gt;s whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection#setFixedLengthStreamingMode()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;httpConnection.setFixedLengthStreamingMode(contentLength);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;But if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpURLConnection#setChunkedStreamingMode()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; accordingly. This will set the HTTP \u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;Transfer-Encoding\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; header to \u0026lt;code\u0026gt;chunked\u0026lt;/code\u0026gt; which will force the request body being sent in chunks. The below example will send the body in chunks of 1\u0026amp;nbsp;KB.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;httpConnection.setChunkedStreamingMode(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1024\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;User-Agent\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;It can happen that \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/13670692/403-forbidden-with-java-but-not-web-browser\u0026quot;\u0026gt;a request returns an unexpected response, while it works fine with a real web browser\u0026lt;/a\u0026gt;. The server side is probably blocking requests based on the \u0026lt;a href=\u0026quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;User-Agent\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; request header. The \u0026lt;code\u0026gt;URLConnection\u0026lt;/code\u0026gt; will by default set it to \u0026lt;code\u0026gt;Java/1.6.0_19\u0026lt;/code\u0026gt; where the last part is obviously the JRE version. You can override this as follows:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;connection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;User-Agent\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36\u0026quot;\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do as if you\u0026apos;re using Chrome 41 on Windows 7.\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Use the User-Agent string from a \u0026lt;a href=\u0026quot;http://www.useragentstring.com/pages/useragentstring.php\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;recent browser\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Error handling\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;If the HTTP response code is \u0026lt;code\u0026gt;4nn\u0026lt;/code\u0026gt; (Client Error) or \u0026lt;code\u0026gt;5nn\u0026lt;/code\u0026gt; (Server Error), then you may want to read the \u0026lt;code\u0026gt;HttpURLConnection#getErrorStream()\u0026lt;/code\u0026gt; to see if the server has sent any useful error information.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;error\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; ((HttpURLConnection) connection).getErrorStream();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If the HTTP response code is -1, then something went wrong with connection and response handling. The \u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt; implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the \u0026lt;code\u0026gt;http.keepAlive\u0026lt;/code\u0026gt; system property to \u0026lt;code\u0026gt;false\u0026lt;/code\u0026gt;. You can do this programmatically in the beginning of your application by:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;System.setProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http.keepAlive\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;false\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Uploading files\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;You\u0026apos;d normally use \u0026lt;a href=\u0026quot;http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;multipart/form-data\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; encoding for mixed POST content (binary and character data). The encoding is in more detail described in \u0026lt;a href=\u0026quot;http://www.faqs.org/rfcs/rfc2388.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;RFC2388\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;param\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;value\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;textFile\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/path/to/file.txt\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;binaryFile\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;File\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/path/to/file.bin\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;boundary\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; Long.toHexString(System.currentTimeMillis()); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Just generate some unique random value.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;CRLF\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\r\\n\u0026quot;\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Line separator required by multipart/form-data.\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;connection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\nconnection.setDoOutput(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\nconnection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;multipart/form-data; boundary=\u0026quot;\u0026lt;/span\u0026gt; + boundary);\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; (\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;OutputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;output\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; connection.getOutputStream();\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;writer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OutputStreamWriter\u0026lt;/span\u0026gt;(output, charset), \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n) {\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Send normal param.\u0026lt;/span\u0026gt;\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--\u0026quot;\u0026lt;/span\u0026gt; + boundary).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Disposition: form-data; name=\\\u0026quot;param\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type: text/plain; charset=\u0026quot;\u0026lt;/span\u0026gt; + charset).append(CRLF);\n    writer.append(CRLF).append(param).append(CRLF).flush();\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Send text file.\u0026lt;/span\u0026gt;\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--\u0026quot;\u0026lt;/span\u0026gt; + boundary).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Disposition: form-data; name=\\\u0026quot;textFile\\\u0026quot;; filename=\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; + textFile.getName() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type: text/plain; charset=\u0026quot;\u0026lt;/span\u0026gt; + charset).append(CRLF); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Text file itself must be saved in this charset!\u0026lt;/span\u0026gt;\n    writer.append(CRLF).flush();\n    Files.copy(textFile.toPath(), output);\n    output.flush(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Important before continuing with writer!\u0026lt;/span\u0026gt;\n    writer.append(CRLF).flush(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// CRLF is important! It indicates end of boundary.\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Send binary file.\u0026lt;/span\u0026gt;\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--\u0026quot;\u0026lt;/span\u0026gt; + boundary).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Disposition: form-data; name=\\\u0026quot;binaryFile\\\u0026quot;; filename=\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt; + binaryFile.getName() + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type: \u0026quot;\u0026lt;/span\u0026gt; + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Transfer-Encoding: binary\u0026quot;\u0026lt;/span\u0026gt;).append(CRLF);\n    writer.append(CRLF).flush();\n    Files.copy(binaryFile.toPath(), output);\n    output.flush(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Important before continuing with writer!\u0026lt;/span\u0026gt;\n    writer.append(CRLF).flush(); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// CRLF is important! It indicates end of boundary.\u0026lt;/span\u0026gt;\n\n    \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// End of multipart/form-data.\u0026lt;/span\u0026gt;\n    writer.append(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--\u0026quot;\u0026lt;/span\u0026gt; + boundary + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;--\u0026quot;\u0026lt;/span\u0026gt;).append(CRLF).flush();\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;If the other side is an \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServlet\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt;, then its \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;doPost()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; method will be called and the parts will be available by \u0026lt;a href=\u0026quot;http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;HttpServletRequest#getPart()\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; (note, thus \u0026lt;strong\u0026gt;not\u0026lt;/strong\u0026gt; \u0026lt;code\u0026gt;getParameter()\u0026lt;/code\u0026gt; and so on!). The \u0026lt;code\u0026gt;getPart()\u0026lt;/code\u0026gt; method is however relatively new, it\u0026apos;s introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc.). Prior to Servlet 3.0, your best choice is using \u0026lt;a href=\u0026quot;http://commons.apache.org/fileupload\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Apache Commons FileUpload\u0026lt;/a\u0026gt; to parse a \u0026lt;code\u0026gt;multipart/form-data\u0026lt;/code\u0026gt; request. Also see \u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/2422468/upload-big-file-to-servlet/2424824#2424824\u0026quot;\u0026gt;this answer\u0026lt;/a\u0026gt; for examples of both the FileUpload and the Servelt 3.0 approaches.\u0026lt;/p\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Dealing with untrusted or misconfigured HTTPS sites\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;sup\u0026gt;\u0026lt;em\u0026gt;In case you\u0026apos;re developing for Android instead of Java, \u0026lt;strong\u0026gt;be careful\u0026lt;/strong\u0026gt;: the workaround below may save your day if you don\u0026apos;t have correct certificates deployed during development. But you should not use it for production. These days (April 2021) Google will not allow your app be distributed on Play Store if they detect insecure hostname verifier, see \u0026lt;a href=\u0026quot;https://support.google.com/faqs/answer/7188426.\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;https://support.google.com/faqs/answer/7188426.\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/sup\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Sometimes you need to connect an HTTPS URL, perhaps because you\u0026apos;re writing a web scraper. In that case, you may likely face a \u0026lt;code\u0026gt;javax.net.ssl.SSLException: Not trusted server certificate\u0026lt;/code\u0026gt; on some HTTPS sites who doesn\u0026apos;t keep their SSL certificates up to date, or a \u0026lt;code\u0026gt;java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name\u0026lt;/code\u0026gt; on some misconfigured HTTPS sites.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;The following one-time-run \u0026lt;code\u0026gt;static\u0026lt;/code\u0026gt; initializer in your web scraper class should make \u0026lt;code\u0026gt;HttpsURLConnection\u0026lt;/code\u0026gt; more lenient as to those HTTPS sites and thus not throw those exceptions anymore.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; {\n    TrustManager[] trustAllCertificates = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;TrustManager\u0026lt;/span\u0026gt;[] {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;X509TrustManager\u0026lt;/span\u0026gt;() {\n            \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; X509Certificate[] getAcceptedIssuers() {\n                \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Not relevant.\u0026lt;/span\u0026gt;\n            }\n            \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;checkClientTrusted\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(X509Certificate[] certs, String authType)\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do nothing. Just allow them all.\u0026lt;/span\u0026gt;\n            }\n            \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;checkServerTrusted\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(X509Certificate[] certs, String authType)\u0026lt;/span\u0026gt; {\n                \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Do nothing. Just allow them all.\u0026lt;/span\u0026gt;\n            }\n        }\n    };\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HostnameVerifier\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;trustAllHostnames\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HostnameVerifier\u0026lt;/span\u0026gt;() {\n        \u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Override\u0026lt;/span\u0026gt;\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;boolean\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;verify\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String hostname, SSLSession session)\u0026lt;/span\u0026gt; {\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;; \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Just allow them all.\u0026lt;/span\u0026gt;\n        }\n    };\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        System.setProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;jsse.enableSNIExtension\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;false\u0026quot;\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;SSLContext\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;sc\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; SSLContext.getInstance(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SSL\u0026quot;\u0026lt;/span\u0026gt;);\n        sc.init(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, trustAllCertificates, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;SecureRandom\u0026lt;/span\u0026gt;());\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n        HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);\n    }\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (GeneralSecurityException e) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;ExceptionInInitializerError\u0026lt;/span\u0026gt;(e);\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Last words\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;The \u0026lt;a href=\u0026quot;http://hc.apache.org/httpcomponents-client-ga/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Apache HttpComponents HttpClient\u0026lt;/a\u0026gt; is \u0026lt;em\u0026gt;much\u0026lt;/em\u0026gt; more convenient in this all :)\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://hc.apache.org/httpcomponents-client-ga/tutorial/html/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HttpClient Tutorial\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;http://hc.apache.org/httpcomponents-client-ga/examples.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;HttpClient Examples\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;h3\u0026gt;Parsing and extracting HTML\u0026lt;/h3\u0026gt;\n\u0026lt;p\u0026gt;If all you want is parsing and extracting data from HTML, then better use a HTML parser like \u0026lt;a href=\u0026quot;http://jsoup.org\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Jsoup\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281\u0026quot;\u0026gt;What are the pros/cons of leading HTML parsers in Java\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/2835505/how-to-scan-a-website-or-page-for-info-and-bring-it-into-my-program/2835555#2835555\u0026quot;\u0026gt;How to scan and extract a webpage in Java\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    ","\n\u0026lt;p\u0026gt;When working with HTTP it\u0026apos;s almost always more useful to refer to \u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt; rather than the base class \u0026lt;code\u0026gt;URLConnection\u0026lt;/code\u0026gt; (since \u0026lt;code\u0026gt;URLConnection\u0026lt;/code\u0026gt; is an abstract class when you ask for \u0026lt;code\u0026gt;URLConnection.openConnection()\u0026lt;/code\u0026gt; on a HTTP URL that\u0026apos;s what you\u0026apos;ll get back anyway).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Then you can instead of relying on \u0026lt;code\u0026gt;URLConnection#setDoOutput(true)\u0026lt;/code\u0026gt; to implicitly set the request method to \u0026lt;em\u0026gt;POST\u0026lt;/em\u0026gt; instead do \u0026lt;code\u0026gt;httpURLConnection.setRequestMethod(\u0026quot;POST\u0026quot;)\u0026lt;/code\u0026gt; which some might find more natural (and which also allows you to specify other request methods such as \u0026lt;em\u0026gt;PUT\u0026lt;/em\u0026gt;, \u0026lt;em\u0026gt;DELETE\u0026lt;/em\u0026gt;, ...).\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;It also provides useful HTTP constants so you can do:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;responseCode\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; httpURLConnection.getResponseCode();\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (responseCode == HttpURLConnection.HTTP_OK) {\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Inspired by this and other questions on Stack\u0026amp;nbsp;Overflow, I\u0026apos;ve created a minimal open source \u0026lt;a href=\u0026quot;http://code.google.com/p/basic-http-client/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;basic-http-client\u0026lt;/a\u0026gt; that embodies most of the techniques found here.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://code.google.com/p/google-http-java-client/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;google-http-java-client\u0026lt;/a\u0026gt; is also a great open source resource.\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I suggest you take a look at the code on \u0026lt;a href=\u0026quot;https://github.com/kevinsawicki/http-request\u0026quot;\u0026gt;kevinsawicki/http-request\u0026lt;/a\u0026gt;, its basically a wrapper on top of \u0026lt;code\u0026gt;HttpUrlConnection\u0026lt;/code\u0026gt; it provides a much simpler API in case you just want to make the requests right now or you can take a look at the sources (it\u0026apos;s not too big) to take a look at how connections are handled.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;Example: Make a \u0026lt;code\u0026gt;GET\u0026lt;/code\u0026gt; request with content type \u0026lt;code\u0026gt;application/json\u0026lt;/code\u0026gt; and some query parameters:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// GET http://google.com?q=baseball%20gloves\u0026amp;amp;size=100\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpRequest.get(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://google.com\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;q\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;baseball gloves\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;size\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100\u0026lt;/span\u0026gt;)\n        .accept(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/json\u0026quot;\u0026lt;/span\u0026gt;)\n        .body();\nSystem.out.println(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Response was: \u0026quot;\u0026lt;/span\u0026gt; + response);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;h2\u0026gt;Update\u0026lt;/h2\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;p\u0026gt;The new HTTP Client shipped with Java 9 but as part of an\n  Incubator module named \u0026lt;code\u0026gt;jdk.incubator.httpclient\u0026lt;/code\u0026gt;. Incubator modules are\n  a means of putting non-final APIs in the hands of developers while the\n  APIs progress towards either finalization or removal in a future\n  release.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;In Java 9, you can send a \u0026lt;code\u0026gt;GET\u0026lt;/code\u0026gt; request like:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// GET\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpResponse\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpRequest\n    .create(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URI\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://www.stackoverflow.com\u0026quot;\u0026lt;/span\u0026gt;))\n    .headers(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Foo\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foovalue\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Bar\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;barvalue\u0026quot;\u0026lt;/span\u0026gt;)\n    .GET()\n    .response();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then you can examine the returned \u0026lt;code\u0026gt;HttpResponse\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;statusCode\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; response.statusCode();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;responseBody\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; response.body(HttpResponse.asString());\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Since this new HTTP Client is in \u0026lt;del\u0026gt;\u0026lt;code\u0026gt;java.httpclient\u0026lt;/code\u0026gt;\u0026lt;/del\u0026gt; \u0026lt;code\u0026gt;jdk.incubator.httpclient\u0026lt;/code\u0026gt; module, you should declare this dependency in your \u0026lt;code\u0026gt;module-info.java\u0026lt;/code\u0026gt; file:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;module\u0026lt;/span\u0026gt; com.foo.bar {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;requires\u0026lt;/span\u0026gt; jdk.incubator.httpclient;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There are two options you can go with HTTP URL Hits : GET / POST\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;GET Request:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;HttpURLConnection.setFollowRedirects(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Defaults to true\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;https://name_of_the_url\u0026quot;\u0026lt;/span\u0026gt;;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request_url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpURLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;http_conn\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100000\u0026lt;/span\u0026gt;);\nhttp_conn.setReadTimeout(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100000\u0026lt;/span\u0026gt;);\nhttp_conn.setInstanceFollowRedirects(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;POST request:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;HttpURLConnection.setFollowRedirects(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// Defaults to true\u0026lt;/span\u0026gt;\n\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;https://name_of_the_url\u0026quot;\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request_url\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpURLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;http_conn\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (HttpURLConnection)request_url.openConnection();\nhttp_conn.setConnectTimeout(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100000\u0026lt;/span\u0026gt;);\nhttp_conn.setReadTimeout(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;100000\u0026lt;/span\u0026gt;);\nhttp_conn.setInstanceFollowRedirects(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\nhttp_conn.setDoOutput(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;out\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;PrintWriter\u0026lt;/span\u0026gt;(http_conn.getOutputStream());\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (urlparameter != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n   out.println(urlparameter);\n}\nout.close();\nout = \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\nSystem.out.println(String.valueOf(http_conn.getResponseCode()));\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;I was also very inspired by this response.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I am often on projects where I need to do some HTTP, and I may not want to bring in a lot of third-party dependencies (which bring in others and so on and so on, etc.)\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;I started to write my own utilities based on some of this conversation (not any where done):\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;package\u0026lt;/span\u0026gt; org.boon.utils;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.IOException;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.io.InputStream;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.HttpURLConnection;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.URL;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.net.URLConnection;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; java.util.Map;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;import\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; org.boon.utils.IO.read;\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HTTP\u0026lt;/span\u0026gt; {\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then there are just a bunch or static methods.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;get\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url)\u0026lt;/span\u0026gt; {\n\n    Exceptions.tryIt(() -\u0026amp;gt; {\n        URLConnection connection;\n        connection = doGet(url, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    });\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getWithHeaders\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers)\u0026lt;/span\u0026gt; {\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doGet(url, headers, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getWithContentType\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n        String contentType)\u0026lt;/span\u0026gt; {\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doGet(url, headers, contentType, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getWithCharSet\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n        String contentType,\n        String charSet)\u0026lt;/span\u0026gt; {\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doGet(url, headers, contentType, charSet);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Then post...\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;postBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String body)\u0026lt;/span\u0026gt; {\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doPost(url, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, body);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;postBodyWithHeaders\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String body)\u0026lt;/span\u0026gt; {\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doPost(url, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, body);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;postBodyWithContentType\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String contentType,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String body)\u0026lt;/span\u0026gt; {\n\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doPost(url, headers, contentType, \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;, body);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;postBodyWithCharset\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String url,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String contentType,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String charSet,\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;final\u0026lt;/span\u0026gt; String body)\u0026lt;/span\u0026gt; {\n\n    URLConnection connection;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;try\u0026lt;/span\u0026gt; {\n        connection = doPost(url, headers, contentType, charSet, body);\n\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; extractResponseString(connection);\n\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;catch\u0026lt;/span\u0026gt; (Exception ex) {\n        Exceptions.handle(ex);\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; URLConnection \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doPost\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url, Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n                                    String contentType, String charset, String body\n                                    )\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n    URLConnection connection;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Handle output. */\u0026lt;/span\u0026gt;\n    connection = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n    connection.setDoOutput(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    IO.write(connection.getOutputStream(), body, IO.CHARSET);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; connection;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;manageHeaders\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers, URLConnection connection)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (headers != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (Map.Entry\u0026amp;lt;String, ? \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;extends\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Object\u0026lt;/span\u0026gt;\u0026amp;gt; entry : headers.entrySet()) {\n            connection.setRequestProperty(entry.getKey(), entry.getValue().toString());\n        }\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;manageContentTypeHeaders\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String contentType, String charset, URLConnection connection)\u0026lt;/span\u0026gt; {\n    connection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Accept-Charset\u0026quot;\u0026lt;/span\u0026gt;, charset == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; ? IO.CHARSET : charset);\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (contentType!=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; \u0026amp;amp;\u0026amp;amp; !contentType.isEmpty()) {\n        connection.setRequestProperty(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;, contentType);\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; URLConnection \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;doGet\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String url, Map\u0026amp;lt;String, ? extends Object\u0026amp;gt; headers,\n                                    String contentType, String charset)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n    URLConnection connection;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Handle output. */\u0026lt;/span\u0026gt;\n    connection = \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;URL\u0026lt;/span\u0026gt;(url).openConnection();\n    manageContentTypeHeaders(contentType, charset, connection);\n\n    manageHeaders(headers, connection);\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; connection;\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;extractResponseString\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(URLConnection connection)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;/* Handle input. */\u0026lt;/span\u0026gt;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpURLConnection\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;http\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; (HttpURLConnection)connection;\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;status\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; http.getResponseCode();\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;charset\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; getCharset(connection.getHeaderField(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;));\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (status==\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;200\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; readResponseBody(http, charset);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; readErrorResponseBody(http, status, charset);\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;readErrorResponseBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpURLConnection http, \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;int\u0026lt;/span\u0026gt; status, String charset)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;errorStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; http.getErrorStream();\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; ( errorStream!=\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; ) {\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;error\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; charset== \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; ? read( errorStream ) :\n            read( errorStream, charset );\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;STATUS CODE =\u0026quot;\u0026lt;/span\u0026gt; + status + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\\n\u0026quot;\u0026lt;/span\u0026gt; + error);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throw\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;RuntimeException\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;STATUS CODE =\u0026quot;\u0026lt;/span\u0026gt; + status);\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;readResponseBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpURLConnection http, String charset)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (charset != \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; read(http.getInputStream(), charset);\n    } \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;else\u0026lt;/span\u0026gt; {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; read(http.getInputStream());\n    }\n}\n\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;private\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; String \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;getCharset\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(String contentType)\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (contentType==\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;)  {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    }\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;charset\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;;\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;for\u0026lt;/span\u0026gt; (String param : contentType.replace(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot; \u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;).split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;;\u0026quot;\u0026lt;/span\u0026gt;)) {\n        \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;if\u0026lt;/span\u0026gt; (param.startsWith(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;charset=\u0026quot;\u0026lt;/span\u0026gt;)) {\n            charset = param.split(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;=\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;2\u0026lt;/span\u0026gt;)[\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;];\n            \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;break\u0026lt;/span\u0026gt;;\n        }\n    }\n    charset = charset == \u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt; ? IO.CHARSET : charset;\n\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;return\u0026lt;/span\u0026gt; charset;\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Well, you get the idea....\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Here are the tests:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;static\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyHandler\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;implements\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;HttpHandler\u0026lt;/span\u0026gt; {\n    \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;handle\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;(HttpExchange t)\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; IOException {\n\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;InputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;requestBody\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; t.getRequestBody();\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;body\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; IO.read(requestBody);\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Headers\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;requestHeaders\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; t.getRequestHeaders();\n        body = body + \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\\n\u0026quot;\u0026lt;/span\u0026gt; + copy(requestHeaders).toString();\n        t.sendResponseHeaders(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;200\u0026lt;/span\u0026gt;, body.length());\n        \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;OutputStream\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;os\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; t.getResponseBody();\n        os.write(body.getBytes());\n        os.close();\n    }\n}\n\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Test\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testHappy\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception {\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpServer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;server\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpServer.create(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InetSocketAddress\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9212\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n    server.createContext(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/test\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyHandler\u0026lt;/span\u0026gt;());\n    server.setExecutor(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// creates a default executor\u0026lt;/span\u0026gt;\n    server.start();\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    Map\u0026amp;lt;String,String\u0026amp;gt; headers = map(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bar\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fun\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sun\u0026quot;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HTTP.postBodyWithContentType(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;));\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    response = HTTP.postBodyWithCharset(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UTF-8\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;));\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    response = HTTP.postBodyWithHeaders(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;));\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    response = HTTP.get(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    response = HTTP.getWithHeaders(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    response = HTTP.getWithContentType(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    response = HTTP.getWithCharSet(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9212/test\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;UTF-8\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    server.stop(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n}\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Test\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testPostBody\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception {\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpServer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;server\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpServer.create(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InetSocketAddress\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9220\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n    server.createContext(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/test\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyHandler\u0026lt;/span\u0026gt;());\n    server.setExecutor(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// creates a default executor\u0026lt;/span\u0026gt;\n    server.start();\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    Map\u0026amp;lt;String,String\u0026amp;gt; headers = map(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bar\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fun\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sun\u0026quot;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HTTP.postBody(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9220/test\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;));\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    server.stop(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n}\n\n\u0026lt;span class=\u0026quot;hljs-meta\u0026quot;\u0026gt;@Test(expected = RuntimeException.class)\u0026lt;/span\u0026gt;\n\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;public\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;void\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title function_\u0026quot;\u0026gt;testSad\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-params\u0026quot;\u0026gt;()\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;throws\u0026lt;/span\u0026gt; Exception {\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;HttpServer\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;server\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpServer.create(\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;InetSocketAddress\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;9213\u0026lt;/span\u0026gt;), \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n    server.createContext(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;/test\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;MyHandler\u0026lt;/span\u0026gt;());\n    server.setExecutor(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;null\u0026lt;/span\u0026gt;); \u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// creates a default executor\u0026lt;/span\u0026gt;\n    server.start();\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    Map\u0026amp;lt;String,String\u0026amp;gt; headers = map(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;foo\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;bar\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;fun\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;sun\u0026quot;\u0026lt;/span\u0026gt;);\n\n    \u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HTTP.postBodyWithContentType(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://localhost:9213/foo\u0026quot;\u0026lt;/span\u0026gt;, headers, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;text/plain\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;);\n\n    System.out.println(response);\n\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;hi mom\u0026quot;\u0026lt;/span\u0026gt;));\n    assertTrue(response.contains(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Fun=[sun], Foo=[bar]\u0026quot;\u0026lt;/span\u0026gt;));\n\n    Thread.sleep(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;10\u0026lt;/span\u0026gt;);\n\n    server.stop(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;0\u0026lt;/span\u0026gt;);\n}\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;You can find the rest here:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;https://github.com/RichardHightower/boon\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;https://github.com/RichardHightower/boon\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;My goal is to provide the common things one would want to do in a bit more easier way then....\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Initially I was misled by \u0026lt;a href=\u0026quot;http://www.innovation.ch/java/HTTPClient/urlcon_vs_httpclient.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this article\u0026lt;/a\u0026gt; which favours \u0026lt;code\u0026gt;HttpClient\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Later I have realized that \u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt; is going to stay from \u0026lt;a href=\u0026quot;https://github.com/loopj/android-async-http/issues/75\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this article\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;As per the Google blog\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;Apache HTTP client has fewer bugs on Eclair and Froyo. It is the best choice for these releases. For Gingerbread , HttpURLConnection is the best choice. Its simple API and small size makes it great fit for Android.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Transparent compression and response caching reduce network use, improve speed and save battery. New applications should use HttpURLConnection; it is where we will be spending our energy going forward.\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;p\u0026gt;After reading \u0026lt;a href=\u0026quot;http://www.rapidvaluesolutions.com/tech_blog/introduction-to-httpurlconnection-http-client-for-performing-efficient-network-operations/\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this article\u0026lt;/a\u0026gt; and some other stack over flow questions, I am convinced that \u0026lt;code\u0026gt;HttpURLConnection\u0026lt;/code\u0026gt; is going to stay for longer durations.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Some of the SE questions favouring \u0026lt;code\u0026gt;HttpURLConnections\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/4330392/on-android-make-a-post-request-with-url-encoded-form-data-without-using-urlenco/4794289#4794289\u0026quot;\u0026gt;On Android, make a POST request with URL Encoded Form data without using UrlEncodedFormEntity\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;em\u0026gt;\u0026lt;a href=\u0026quot;https://stackoverflow.com/questions/4221420/httppost-works-in-java-project-not-in-android\u0026quot;\u0026gt;HttpPost works in Java project, but not on Android\u0026lt;/a\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;There is also \u0026lt;a href=\u0026quot;http://square.github.io/okhttp/\u0026quot;\u0026gt;OkHttp\u0026lt;/a\u0026gt;, which is an HTTP client thats efficient by default:\u0026lt;/p\u0026gt;\n\n\u0026lt;blockquote\u0026gt;\n  \u0026lt;ul\u0026gt;\n  \u0026lt;li\u0026gt;HTTP/2 support allows all requests to the same host to share a    socket.\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;Connection pooling reduces request latency (if HTTP/2 isnt    available).\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;Transparent GZIP shrinks download sizes.\u0026lt;/li\u0026gt;\n  \u0026lt;li\u0026gt;Response caching avoids the network completely for repeat requests.\u0026lt;/li\u0026gt;\n  \u0026lt;/ul\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\n\u0026lt;p\u0026gt;First create an instance of \u0026lt;code\u0026gt;OkHttpClient\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;OkHttpClient\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;client\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;OkHttpClient\u0026lt;/span\u0026gt;();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Then, prepare your \u0026lt;code\u0026gt;GET\u0026lt;/code\u0026gt; request:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Request\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;Request\u0026lt;/span\u0026gt;.Builder()\n      .url(url)\n      .build();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;finally, use \u0026lt;code\u0026gt;OkHttpClient\u0026lt;/code\u0026gt; to send prepared \u0026lt;code\u0026gt;Request\u0026lt;/code\u0026gt;:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;Response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; client.newCall(request).execute();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;For more details, you can consult the \u0026lt;a href=\u0026quot;https://github.com/square/okhttp/wiki\u0026quot;\u0026gt;OkHttp\u0026apos;s documentation\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are using HTTP \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;GET\u0026lt;/a\u0026gt;, please remove this line:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;urlConnection.setDoOutput(\u0026lt;span class=\u0026quot;hljs-literal\u0026quot;\u0026gt;true\u0026lt;/span\u0026gt;);\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;You can also use \u0026lt;a href=\u0026quot;http://http.jcabi.com/apidocs-1.0/com/jcabi/http/request/JdkRequest.html\u0026quot;\u0026gt;\u0026lt;code\u0026gt;JdkRequest\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; from \u0026lt;a href=\u0026quot;http://http.jcabi.com\u0026quot;\u0026gt;jcabi-http\u0026lt;/a\u0026gt; (I\u0026apos;m a developer), which does all this work for you, decorating HttpURLConnection, firing HTTP requests and parsing responses, for example:\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;String\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;html\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;new\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-title class_\u0026quot;\u0026gt;JdkRequest\u0026lt;/span\u0026gt;(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;http://www.google.com\u0026quot;\u0026lt;/span\u0026gt;).fetch().body();\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Check this blog post for more info: \u0026lt;a href=\u0026quot;http://www.yegor256.com/2014/04/11/jcabi-http-intro.html\u0026quot;\u0026gt;http://www.yegor256.com/2014/04/11/jcabi-http-intro.html\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;If you are using \u0026lt;strong\u0026gt;Java 11\u0026lt;/strong\u0026gt; (\u0026lt;a href=\u0026quot;https://stackoverflow.com/q/65363995/8583692\u0026quot;\u0026gt;except on Android\u0026lt;/a\u0026gt;), instead of the legacy \u0026lt;em\u0026gt;HttpUrlConnection\u0026lt;/em\u0026gt; class, you can use Java 11 new \u0026lt;a href=\u0026quot;https://openjdk.java.net/groups/net/httpclient/intro.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;HTTP Client API\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;h4\u0026gt;An example \u0026lt;em\u0026gt;GET\u0026lt;/em\u0026gt; request:\u0026lt;/h4\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;uri\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; URI.create(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;https://httpbin.org/get?age=26\u0026amp;amp;isHappy=true\u0026quot;\u0026lt;/span\u0026gt;);\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;client\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpClient.newHttpClient();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .header(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;accept\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/json\u0026quot;\u0026lt;/span\u0026gt;)\n        .GET()\n        .build();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; client.send(request, HttpResponse.BodyHandlers.ofString());\nSystem.out.println(response.statusCode());\nSystem.out.println(response.body());\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;The same request executed asynchronously:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;responseAsync\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; client\n        .sendAsync(request, HttpResponse.BodyHandlers.ofString())\n        .thenApply(HttpResponse::body)\n        .thenAccept(System.out::println);\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;// responseAsync.join(); // Wait for completion\u0026lt;/span\u0026gt;\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;h4\u0026gt;An example \u0026lt;em\u0026gt;POST\u0026lt;/em\u0026gt; request:\u0026lt;/h4\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-java s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-java\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;request\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; HttpRequest\n        .newBuilder()\n        .uri(uri)\n        .version(HttpClient.Version.HTTP_2)\n        .timeout(Duration.ofMinutes(\u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1\u0026lt;/span\u0026gt;))\n        .header(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Content-Type\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;application/json\u0026quot;\u0026lt;/span\u0026gt;)\n        .header(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Authorization\u0026quot;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;Bearer fake\u0026quot;\u0026lt;/span\u0026gt;)\n        .POST(BodyPublishers.ofString(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;{ title: \u0026apos;This is cool\u0026apos; }\u0026quot;\u0026lt;/span\u0026gt;))\n        .build();\n\u0026lt;span class=\u0026quot;hljs-type\u0026quot;\u0026gt;var\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-variable\u0026quot;\u0026gt;response\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;=\u0026lt;/span\u0026gt; client.send(request, HttpResponse.BodyHandlers.ofString());\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;For sending form data as multipart (\u0026lt;code\u0026gt;multipart/form-data\u0026lt;/code\u0026gt;) or url-encoded (\u0026lt;code\u0026gt;application/x-www-form-urlencoded\u0026lt;/code\u0026gt;) format, see \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/56482187/8583692\u0026quot;\u0026gt;this solution\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;See \u0026lt;a href=\u0026quot;https://www.baeldung.com/java-9-http-client\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;this article\u0026lt;/a\u0026gt; for examples and more information about HTTP Client API.\u0026lt;/p\u0026gt;\n\u0026lt;h2\u0026gt;Sidenote\u0026lt;/h2\u0026gt;\n\u0026lt;p\u0026gt;For Java standard library HTTP server, see \u0026lt;a href=\u0026quot;https://stackoverflow.com/a/71635295/8583692\u0026quot;\u0026gt;this post\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n    "],"id":210,"title":"How to use java.net.URLConnection to fire and handle HTTP requests","content":"\n                \n\u0026lt;p\u0026gt;Use of \u0026lt;a href=\u0026quot;http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;\u0026lt;code\u0026gt;java.net.URLConnection\u0026lt;/code\u0026gt;\u0026lt;/a\u0026gt; is asked about pretty often here, and the \u0026lt;a href=\u0026quot;http://download.oracle.com/javase/tutorial/networking/urls/connecting.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;Oracle tutorial\u0026lt;/a\u0026gt; is \u0026lt;em\u0026gt;too\u0026lt;/em\u0026gt; concise about it.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;That tutorial basically only shows how to fire a \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;GET\u0026lt;/a\u0026gt; request and read the response. It doesn\u0026apos;t explain anywhere how to use it to, among others, perform a \u0026lt;a href=\u0026quot;https://en.wikipedia.org/wiki/POST_%28HTTP%29\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;POST\u0026lt;/a\u0026gt; request, set request headers, read response headers, deal with cookies, submit a HTML form, upload a file, etc.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;So, how can I use \u0026lt;code\u0026gt;java.net.URLConnection\u0026lt;/code\u0026gt; to fire and handle \u0026quot;advanced\u0026quot; HTTP requests?\u0026lt;/p\u0026gt;\n    ","slug":"how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934","postType":"QUESTION","createdAt":"2022-07-09T17:20:45.000Z","updatedAt":"2022-07-09T17:20:45.000Z","tags":[{"id":1469,"name":"http","slug":"http","createdAt":"2022-07-09T17:20:46.000Z","updatedAt":"2022-07-09T17:20:46.000Z","Questions_Tags":{"questionId":210,"tagId":1469}},{"id":1470,"name":"httpurlconnection","slug":"httpurlconnection","createdAt":"2022-07-09T17:20:46.000Z","updatedAt":"2022-07-09T17:20:46.000Z","Questions_Tags":{"questionId":210,"tagId":1470}},{"id":1471,"name":"httprequest","slug":"httprequest","createdAt":"2022-07-09T17:20:46.000Z","updatedAt":"2022-07-09T17:20:46.000Z","Questions_Tags":{"questionId":210,"tagId":1471}},{"id":1472,"name":"urlconnection","slug":"urlconnection","createdAt":"2022-07-09T17:20:46.000Z","updatedAt":"2022-07-09T17:20:46.000Z","Questions_Tags":{"questionId":210,"tagId":1472}}],"relatedQuestions":[{"title":"How to use java.net.URLConnection to fire and handle HTTP requests","slug":"how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934","tags":[{"name":"http","Questions_Tags":{"questionId":210,"tagId":1469}},{"name":"httpurlconnection","Questions_Tags":{"questionId":210,"tagId":1470}},{"name":"httprequest","Questions_Tags":{"questionId":210,"tagId":1471}},{"name":"urlconnection","Questions_Tags":{"questionId":210,"tagId":1472}}]}]},"randomQuestions":[{"title":"What does enctype='multipart/form-data' mean?","slug":"what-does-enctype'multipartform-data'-mean-1657388229352"},{"title":"Why not use Double or Float to represent currency?","slug":"why-not-use-double-or-float-to-represent-currency-1657387417964"},{"title":"How to iterate over rows in a DataFrame in Pandas","slug":"how-to-iterate-over-rows-in-a-dataframe-in-pandas-1657387358115"},{"title":"Copy array by value","slug":"copy-array-by-value-1657387649531"},{"title":"Why do I need to override the equals and hashCode methods in Java?","slug":"why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877"},{"title":"How to check whether a string contains a substring in JavaScript?","slug":"how-to-check-whether-a-string-contains-a-substring-in-javascript-1657388080698"},{"title":"How do I vertically center text with CSS? [duplicate]","slug":"how-do-i-vertically-center-text-with-css-duplicate-1657387645821"},{"title":"Parsing a string to a date in JavaScript","slug":"parsing-a-string-to-a-date-in-javascript-1657387782497"},{"title":"What does this symbol mean in JavaScript?","slug":"what-does-this-symbol-mean-in-javascript-1657387632971"},{"title":"How to test multiple variables for equality against a single value?","slug":"how-to-test-multiple-variables-for-equality-against-a-single-value-1657384358504"},{"title":"Error in finding last used cell in Excel with VBA","slug":"error-in-finding-last-used-cell-in-excel-with-vba-1657384584748"},{"title":"Truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all()","slug":"truth-value-of-a-series-is-ambiguous.-use-a.empty-a.bool()-a.item()-a.any()-or-a.all()-1657387724259"},{"title":"How do I use reflection to call a generic method?","slug":"how-do-i-use-reflection-to-call-a-generic-method-1657387256751"},{"title":"How do I compose a rotation matrix with human readable angles from scratch?","slug":"how-do-i-compose-a-rotation-matrix-with-human-readable-angles-from-scratch-1657387963457"},{"title":"I just assigned a variable, but echo $variable shows something else","slug":"i-just-assigned-a-variable-but-echo-dollarvariable-shows-something-else-1657387574561"},{"title":"What is the difference between #include \u003cfilename\u003e and #include \"filename\"?","slug":"what-is-the-difference-between-include-lessfilenamegreater-and-include-\"filename\"-1657388489547"},{"title":"How does Access-Control-Allow-Origin header work?","slug":"how-does-access-control-allow-origin-header-work-1657384881723"},{"title":"Creating multiline strings in JavaScript","slug":"creating-multiline-strings-in-javascript-1657388025414"},{"title":"What is JavaScript's highest integer value that a number can go to without losing precision?","slug":"what-is-javascript's-highest-integer-value-that-a-number-can-go-to-without-losing-precision-1657387622983"},{"title":"How do I profile C++ code running on Linux?","slug":"how-do-i-profile-c++-code-running-on-linux-1657384754272"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-to-use-java.net.urlconnection-to-fire-and-handle-http-requests-1657387245934"},"buildId":"Zo3C7AOWQzKM9qqyzx2hf","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>