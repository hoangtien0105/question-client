<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@solutionschecker.com"/><meta name="twitter:creator" content="@solutionschecker.com"/><meta property="og:url" content="https://solutionschecker.com"/><meta property="og:type" content="website"/><meta property="og:image" content="https://solutionschecker.com/solutions-checker-banner.png"/><meta property="og:image:alt" content="Find the solution to any question. We focus on finding the fastest possible solution for users. Main topics like coding, learning. - solutionschecker.com"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","logo":"/logo.svg","url":"https://solutionschecker.com"}</script><link name="keywords" content="solutions checker, solution checker, how to, solution for, check for solution, resolve question, what is, what solution for, find solution"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://solutionschecker.com","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://solutionschecker.com/questions","name":"Questions"}},{"@type":"ListItem","position":3,"item":{"@id":"https://solutionschecker.com/questions/how-to-use-variables-in-sql-statement-in-python-1657388479077","name":"Questions"}}]}</script><title>How to use variables in SQL statement in Python? | Solution Checker</title><meta name="robots" content="index,follow"/><meta name="description" content="I have the following Python code:
cursor.execute(&quot;INSERT INTO table VALUES var1, var2, var3,&quot;)

where var1 is an integer, var2 and var3 are strings.
How can I write the variable names without Python including them as part of the query text?
    "/><meta property="og:title" content="How to use variables in SQL statement in Python? | Solution Checker"/><meta property="og:description" content="I have the following Python code:
cursor.execute(&quot;INSERT INTO table VALUES var1, var2, var3,&quot;)

where var1 is an integer, var2 and var3 are strings.
How can I write the variable names without Python including them as part of the query text?
    "/><script type="application/ld+json">{"@context":"https://schema.org","@type":"QAPage","mainEntity":{"name":"How to use variables in SQL statement in Python?","text":"I have the following Python code:\ncursor.execute(&quot;INSERT INTO table VALUES var1, var2, var3,&quot;)\n\nwhere var1 is an integer, var2 and var3 are strings.\nHow can I write the variable names without Python including them as part of the query text?\n    ","answerCount":5,"upVoteCount":500,"suggestedAnswer":[{"text":"cursor.execute(&quot;INSERT INTO table VALUES (%s, %s, %s)&quot;, (var1, var2, var3))\n\n\nNote that the parameters are passed as a tuple.\n\nThe database API does proper escaping and quoting of variables. Be careful not to use the string formatting operator (%), because\n\n\nit does not do any escaping or quoting.\nit is prone to Uncontrolled string format attacks e.g. SQL injection.\n\n    ","url":"https://solutionschecker.com/questions/how-to-use-variables-in-sql-statement-in-python-1657388479077#solution1","@type":"Answer","upvoteCount":0},{"text":"Different implementations of the Python DB-API are allowed to use different placeholders, so you&apos;ll need to find out which one you&apos;re using -- it could be (e.g. with MySQLdb):\n\ncursor.execute(&quot;INSERT INTO table VALUES (%s, %s, %s)&quot;, (var1, var2, var3))\n\n\nor (e.g. with sqlite3 from the Python standard library):\n\ncursor.execute(&quot;INSERT INTO table VALUES (?, ?, ?)&quot;, (var1, var2, var3))\n\n\nor others yet (after VALUES you could have (:1, :2, :3) , or &quot;named styles&quot; (:fee, :fie, :fo) or (%(fee)s, %(fie)s, %(fo)s) where you pass a dict instead of a map as the second argument to execute).  Check the paramstyle string constant in the DB API module you&apos;re using, and look for paramstyle at http://www.python.org/dev/peps/pep-0249/ to see what all the parameter-passing styles are!\n    ","url":"https://solutionschecker.com/questions/how-to-use-variables-in-sql-statement-in-python-1657388479077#solution2","@type":"Answer","upvoteCount":0},{"text":"Many ways. DON&apos;T use the most obvious one (%s with %) in real code, it&apos;s open to attacks.\nHere copy-paste&apos;d from pydoc of sqlite3:\n# Never do this -- insecure!\nsymbol = &apos;RHAT&apos;\nc.execute(&quot;SELECT * FROM stocks WHERE symbol = &apos;%s&apos;&quot; % symbol)\n\n# Do this instead\nt = (&apos;RHAT&apos;,)\nc.execute(&apos;SELECT * FROM stocks WHERE symbol=?&apos;, t)\nprint c.fetchone()\n\n# Larger example that inserts many records at a time\npurchases = [(&apos;2006-03-28&apos;, &apos;BUY&apos;, &apos;IBM&apos;, 1000, 45.00),\n             (&apos;2006-04-05&apos;, &apos;BUY&apos;, &apos;MSFT&apos;, 1000, 72.00),\n             (&apos;2006-04-06&apos;, &apos;SELL&apos;, &apos;IBM&apos;, 500, 53.00),\n            ]\nc.executemany(&apos;INSERT INTO stocks VALUES (?,?,?,?,?)&apos;, purchases)\n\nMore examples if you need:\n# Multiple values single statement/execution\nc.execute(&apos;SELECT * FROM stocks WHERE symbol=? OR symbol=?&apos;, (&apos;RHAT&apos;, &apos;MSO&apos;))\nprint c.fetchall()\nc.execute(&apos;SELECT * FROM stocks WHERE symbol IN (?, ?)&apos;, (&apos;RHAT&apos;, &apos;MSO&apos;))\nprint c.fetchall()\n# This also works, though ones above are better as a habit as it&apos;s inline with syntax of executemany().. but your choice.\nc.execute(&apos;SELECT * FROM stocks WHERE symbol=? OR symbol=?&apos;, &apos;RHAT&apos;, &apos;MSO&apos;)\nprint c.fetchall()\n# Insert a single item\nc.execute(&apos;INSERT INTO stocks VALUES (?,?,?,?,?)&apos;, (&apos;2006-03-28&apos;, &apos;BUY&apos;, &apos;IBM&apos;, 1000, 45.00))\n\n    ","url":"https://solutionschecker.com/questions/how-to-use-variables-in-sql-statement-in-python-1657388479077#solution3","@type":"Answer","upvoteCount":0},{"text":"http://www.amk.ca/python/writing/DB-API.html\nBe careful when you simply append values of variables to your statements:\nImagine a user naming himself &apos;;DROP TABLE Users;&apos; --\nThat&apos;s why you need to use SQL escaping, which Python provides for you when you use cursor.execute in a decent manner. Example in the URL is:\ncursor.execute(&quot;insert into Attendees values (?, ?, ?)&quot;, (name, seminar, paid))\n\n    ","url":"https://solutionschecker.com/questions/how-to-use-variables-in-sql-statement-in-python-1657388479077#solution4","@type":"Answer","upvoteCount":0},{"text":"The syntax for providing a single value can be confusing for inexperienced Python users.\nGiven the query\nINSERT INTO mytable (fruit) VALUES (%s)\n\nGenerally*, the value passed to cursor.execute must wrapped in an ordered sequence such as a tuple or list even though the value itself is a singleton, so we must provide a single element tuple, like this: (value,).\ncursor.execute(&quot;&quot;&quot;INSERT INTO mytable (fruit) VALUES (%s)&quot;&quot;&quot;, (&apos;apple&apos;,))\n\nPassing a single string\ncursor.execute(&quot;&quot;&quot;INSERT INTO mytable (fruit) VALUES (%s)&quot;&quot;&quot;, (&apos;apple&apos;))\n\nwill result in an error which varies by the DB-API connector, for example\n\npsycopg2:\n\nTypeError: not all arguments converted during string formatting\n\n\nsqlite3\n\nsqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement uses 1, and there are 5 supplied\n\n\nmysql.connector\n\nmysql.connector.errors.ProgrammingError: 1064 (42000): You have an error in your SQL syntax;\n\n\n\n\n*  The pymysql connector handles a single string parameter without erroring.  However it&apos;s better to wrap the string in a tuple even if it&apos;s a single because\n\nyou won&apos;t need to change the code if you switch connector package\nyou keep a consistent mental model of the query parameters being a sequence of objects rather than a single object.\n\n    ","url":"https://solutionschecker.com/questions/how-to-use-variables-in-sql-statement-in-python-1657388479077#solution5","@type":"Answer","upvoteCount":0}],"@type":"Question"}}</script><meta name="next-head-count" content="22"/><script id="google-analytics" data-nscript="beforeInteractive">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NXVLL8B');</script><link rel="preload" href="/_next/static/css/c116652e2d6f4ad0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c116652e2d6f4ad0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-42cdea76c8170223.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-ccfab947c79712f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-862498b6ec7885c3.js" defer=""></script><script src="/_next/static/chunks/294-106ef8570fa99deb.js" defer=""></script><script src="/_next/static/chunks/490-7f0418bb4354ac73.js" defer=""></script><script src="/_next/static/chunks/pages/questions/%5Bslug%5D-47289857226115f9.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_buildManifest.js" defer=""></script><script src="/_next/static/xZs8haGjOP63QuDE0kxeX/_ssgManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXVLL8B"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next"><div class="wrapper"><header><nav class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800"><div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"><a class="flex items-center" href="/"><img src="/logo-second.png" class="mr-3 h-6 sm:h-9" alt="Solution Checker Logo"/><h1 class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Solution Checker</h1></a><div class="flex items-center lg:order-2"><button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2"><ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0"><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" aria-current="page" href="/">Home</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions?tab=news">Questions</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/post?tab=news">Post</a></li><li><a class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-blue-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700" href="/questions/how-to-use-variables-in-sql-statement-in-python-1657388479077#">Coding</a></li></ul></div></div></nav></header><div class="main-content"><div class="question my-5"><div class="flex question-header items-center m-auto justify-center"><div class="rounded-xl w-full border p-5 shadow-md bg-white"><div class="flex w-full items-center justify-between border-b pb-3"><div class="flex items-center space-x-3"><div class="text-lg font-bold text-slate-700"><a href="/questions/how-to-use-variables-in-sql-statement-in-python-1657388479077"><h1>How to use variables in SQL statement in Python?</h1></a></div></div><div class="flex flex-wrap h-auto justify-end items-center space-x-8"></div></div><div class="question-content mt-5">
                
<p>I have the following Python code:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">cursor.execute(<span class="hljs-string">"INSERT INTO table VALUES var1, var2, var3,"</span>)
</code></pre>
<p>where <code>var1</code> is an integer, <code>var2</code> and <code>var3</code> are strings.</p>
<p>How can I write the variable names without Python including them as part of the query text?</p>
    </div></div></div><div class="solution-section"><nav class="flex pagination-solution flex-col justify-end"><h1 class="text-lg font-semibold mb-5">Navigate to solutions: </h1><ul class="inline-flex -space-x-px overflow-auto"><li class="pagination-solution-item"><span data-id="#solution1" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">1</span></li><li class="pagination-solution-item"><span data-id="#solution2" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">2</span></li><li class="pagination-solution-item"><span data-id="#solution3" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">3</span></li><li class="pagination-solution-item"><span data-id="#solution4" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">4</span></li><li class="pagination-solution-item"><span data-id="#solution5" class="cursor-pointer py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">5</span></li></ul></nav><div id="solution1" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 1</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<pre class="default s-code-block"><code class="hljs language-perl">cursor.execute(<span class="hljs-string">"INSERT INTO table VALUES (%s, %s, %s)"</span>, (var1, var2, var3))
</code></pre>

<p>Note that the parameters are passed as a tuple.</p>

<p>The database API does proper escaping and quoting of variables. Be careful not to use the string formatting operator (<code>%</code>), because</p>

<ol>
<li>it does not do any escaping or quoting.</li>
<li>it is prone to Uncontrolled string format attacks e.g. <a href="http://en.wikipedia.org/wiki/SQL_injection" rel="noreferrer">SQL injection</a>.</li>
</ol>
    </div></div></div></div><div id="solution2" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 2</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Different implementations of the Python DB-API are allowed to use different placeholders, so you'll need to find out which one you're using -- it could be (e.g. with MySQLdb):</p>

<pre class="default s-code-block"><code class="hljs language-perl">cursor.execute(<span class="hljs-string">"INSERT INTO table VALUES (%s, %s, %s)"</span>, (var1, var2, var3))
</code></pre>

<p>or (e.g. with sqlite3 from the Python standard library):</p>

<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-attribute">cursor</span><span class="hljs-selector-class">.execute</span>("INSERT INTO table VALUES (?, ?, ?)", (var1, var2, var3))
</code></pre>

<p>or others yet (after <code>VALUES</code> you could have <code>(:1, :2, :3)</code> , or "named styles" <code>(:fee, :fie, :fo)</code> or <code>(%(fee)s, %(fie)s, %(fo)s)</code> where you pass a dict instead of a map as the second argument to <code>execute</code>).  Check the <code>paramstyle</code> string constant in the DB API module you're using, and look for paramstyle at <a href="http://www.python.org/dev/peps/pep-0249/" rel="noreferrer">http://www.python.org/dev/peps/pep-0249/</a> to see what all the parameter-passing styles are!</p>
    </div></div></div></div><div id="solution3" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 3</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>Many ways. <strong>DON'T</strong> use the most obvious one (<code>%s</code> with <code>%</code>) in real code, it's open to <a href="http://en.wikipedia.org/wiki/SQL_injection" rel="noreferrer">attacks</a>.</p>
<p>Here copy-paste'd <strong><a href="http://docs.python.org/2/library/sqlite3.html" rel="noreferrer">from pydoc of sqlite3</a></strong>:</p>
<pre class="lang-py s-code-block"><code class="hljs language-python"><span class="hljs-comment"># Never do this -- insecure!</span>
symbol = <span class="hljs-string">'RHAT'</span>
c.execute(<span class="hljs-string">"SELECT * FROM stocks WHERE symbol = '%s'"</span> % symbol)

<span class="hljs-comment"># Do this instead</span>
t = (<span class="hljs-string">'RHAT'</span>,)
c.execute(<span class="hljs-string">'SELECT * FROM stocks WHERE symbol=?'</span>, t)
<span class="hljs-built_in">print</span> c.fetchone()

<span class="hljs-comment"># Larger example that inserts many records at a time</span>
purchases = [(<span class="hljs-string">'2006-03-28'</span>, <span class="hljs-string">'BUY'</span>, <span class="hljs-string">'IBM'</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">45.00</span>),
             (<span class="hljs-string">'2006-04-05'</span>, <span class="hljs-string">'BUY'</span>, <span class="hljs-string">'MSFT'</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">72.00</span>),
             (<span class="hljs-string">'2006-04-06'</span>, <span class="hljs-string">'SELL'</span>, <span class="hljs-string">'IBM'</span>, <span class="hljs-number">500</span>, <span class="hljs-number">53.00</span>),
            ]
c.executemany(<span class="hljs-string">'INSERT INTO stocks VALUES (?,?,?,?,?)'</span>, purchases)
</code></pre>
<p><strong>More examples if you need:</strong></p>
<pre class="default s-code-block"><code class="hljs language-bash"><span class="hljs-comment"># Multiple values single statement/execution</span>
c.execute(<span class="hljs-string">'SELECT * FROM stocks WHERE symbol=? OR symbol=?'</span>, (<span class="hljs-string">'RHAT'</span>, <span class="hljs-string">'MSO'</span>))
<span class="hljs-built_in">print</span> c.fetchall()
c.execute(<span class="hljs-string">'SELECT * FROM stocks WHERE symbol IN (?, ?)'</span>, (<span class="hljs-string">'RHAT'</span>, <span class="hljs-string">'MSO'</span>))
<span class="hljs-built_in">print</span> c.fetchall()
<span class="hljs-comment"># This also works, though ones above are better as a habit as it's inline with syntax of executemany().. but your choice.</span>
c.execute(<span class="hljs-string">'SELECT * FROM stocks WHERE symbol=? OR symbol=?'</span>, <span class="hljs-string">'RHAT'</span>, <span class="hljs-string">'MSO'</span>)
<span class="hljs-built_in">print</span> c.fetchall()
<span class="hljs-comment"># Insert a single item</span>
c.execute(<span class="hljs-string">'INSERT INTO stocks VALUES (?,?,?,?,?)'</span>, (<span class="hljs-string">'2006-03-28'</span>, <span class="hljs-string">'BUY'</span>, <span class="hljs-string">'IBM'</span>, 1000, 45.00))
</code></pre>
    </div></div></div></div><div id="solution4" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 4</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p><a href="http://web.archive.org/web/20090504233107/amk.ca/python/writing/DB-API.html" rel="nofollow noreferrer">http://www.amk.ca/python/writing/DB-API.html</a></p>
<p>Be careful when you simply append values of variables to your statements:
Imagine a user naming himself <code>';DROP TABLE Users;'</code> --
That's why you need to use SQL escaping, which Python provides for you when you use <code>cursor.execute</code> in a decent manner. Example in the URL is:</p>
<pre class="default s-code-block"><code class="hljs language-scss"><span class="hljs-attribute">cursor</span><span class="hljs-selector-class">.execute</span>("insert into Attendees values (?, ?, ?)", (name, seminar, paid))
</code></pre>
    </div></div></div></div><div id="solution5" class="flex mt-5 answer items-center justify-center py-5"><div class="rounded-xl solution-inner border md:px-10 md:py-10 px-2 py-10 shadow-md bg-white"><div style="display:flex;justify-content:space-between"><h1 class="text-4xl font-semibold mb-5">Solution 5</h1><div class="tags-wrap h-max space-x-8"><div class="tags"></div></div></div><div class=" items-center justify-between"><div class=" space-x-4 md:space-x-8">
<p>The syntax for providing a single value can be confusing for inexperienced Python users.</p>
<p>Given the query</p>
<pre class="lang-sql s-code-block"><code class="hljs language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> mytable (fruit) <span class="hljs-keyword">VALUES</span> (<span class="hljs-operator">%</span>s)
</code></pre>
<p>Generally*, the value passed to <code>cursor.execute</code> must wrapped in an ordered sequence such as a <a href="https://docs.python.org/3/library/stdtypes.html#tuple" rel="nofollow noreferrer">tuple</a> or <a href="https://docs.python.org/3/library/stdtypes.html#list" rel="nofollow noreferrer">list</a> even though the value itself is a singleton, so we must provide a single element tuple, like this: <code>(value,)</code>.</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">cursor.execute(<span class="hljs-string">"""INSERT INTO mytable (fruit) VALUES (%s)"""</span>, (<span class="hljs-string">'apple'</span>,))
</code></pre>
<p>Passing a single string</p>
<pre class="lang-py s-code-block"><code class="hljs language-python">cursor.execute(<span class="hljs-string">"""INSERT INTO mytable (fruit) VALUES (%s)"""</span>, (<span class="hljs-string">'apple'</span>))
</code></pre>
<p>will result in an error which varies by the DB-API connector, for example</p>
<ul>
<li>psycopg2:
<blockquote>
<p>TypeError: not all arguments converted during string formatting</p>
</blockquote>
</li>
<li>sqlite3
<blockquote>
<p>sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement uses 1, and there are 5 supplied</p>
</blockquote>
</li>
<li>mysql.connector
<blockquote>
<p>mysql.connector.errors.ProgrammingError: 1064 (42000): You have an error in your SQL syntax;</p>
</blockquote>
</li>
</ul>
<hr>
<p>*  The pymysql connector handles a single string parameter without erroring.  However it's better to wrap the string in a tuple even if it's a single because</p>
<ul>
<li>you won't need to change the code if you switch connector package</li>
<li>you keep a consistent mental model of the query parameters being a sequence of objects rather than a single object.</li>
</ul>
    </div></div></div></div></div></div><div class="widget"><a href="/questions/webdriverwait-not-working-as-expected-1657387373148">WebDriverWait not working as expected</a><a href="/questions/how-to-center-an-element-horizontally-and-vertically-1657388132330">How to center an element horizontally and vertically</a><a href="/questions/no-&#x27;access-control-allow-origin&#x27;-header-is-present-on-the-requested-resourcewhen-trying-to-get-data-from-a-rest-api-1657387628467">No &#x27;Access-Control-Allow-Origin&#x27; header is present on the requested resource—when trying to get data from a REST API</a><a href="/questions/how-can-i-fix-&#x27;android.os.networkonmainthreadexception&#x27;-1657384454963">How can I fix &#x27;android.os.NetworkOnMainThreadException&#x27;?</a><a href="/questions/int-division:-why-is-the-result-of-13-0-1657387547814">Int division: Why is the result of 1/3 == 0?</a><a href="/questions/what-does-if-__name__-%22__main__%22:-do-1657384825815">What does if __name__ == &quot;__main__&quot;: do?</a><a href="/questions/mysql-pivot-row-into-dynamic-number-of-columns-1657387981930">MySQL pivot row into dynamic number of columns</a><a href="/questions/understanding-slicing-1657384397680">Understanding slicing</a><a href="/questions/how-do-you-remove-duplicates-from-a-list-whilst-preserving-order-1657387877978">How do you remove duplicates from a list whilst preserving order?</a><a href="/questions/how-do-i-vertically-center-text-with-css-duplicate-1657387645821">How do I vertically center text with CSS? [duplicate]</a><a href="/questions/how-can-i-sanitize-user-input-with-php-1657387892329">How can I sanitize user input with PHP?</a><a href="/questions/how-can-i-find-the-time-complexity-of-an-algorithm-1657388486001">How can I find the time complexity of an algorithm?</a><a href="/questions/how-to-determine-equality-for-two-javascript-objects-1657387638650">How to determine equality for two JavaScript objects?</a><a href="/questions/why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877">Why do I need to override the equals and hashCode methods in Java?</a><a href="/questions/jquery-ajax-file-upload-1657387368970">jQuery Ajax File Upload</a><a href="/questions/find-object-by-id-in-an-array-of-javascript-objects-1657387572087">Find object by id in an array of JavaScript objects</a><a href="/questions/iterating-over-dictionaries-using-&#x27;for&#x27;-loops-1657388334481">Iterating over dictionaries using &#x27;for&#x27; loops</a><a href="/questions/why-does-my-javascript-code-receive-a-%22no-&#x27;access-control-allow-origin&#x27;-header-is-present-on-the-requested-resource%22-error-while-postman-does-not-1657384636363">Why does my JavaScript code receive a &quot;No &#x27;Access-Control-Allow-Origin&#x27; header is present on the requested resource&quot; error, while Postman does not?</a><a href="/questions/learning-regular-expressions-closed-1657384719460">Learning Regular Expressions [closed]</a><a href="/questions/how-to-filter-object-array-based-on-attributes-1657388211247">How to filter object array based on attributes?</a></div></div><span class="cursor-pointer text-lg p-2" style="position:fixed;bottom:20px;left:20px;background:#000;z-index:2000;color:white">Go go top</span></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"answer":["\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-perl\u0026quot;\u0026gt;cursor.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;INSERT INTO table VALUES (%s, %s, %s)\u0026quot;\u0026lt;/span\u0026gt;, (var1, var2, var3))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;Note that the parameters are passed as a tuple.\u0026lt;/p\u0026gt;\n\n\u0026lt;p\u0026gt;The database API does proper escaping and quoting of variables. Be careful not to use the string formatting operator (\u0026lt;code\u0026gt;%\u0026lt;/code\u0026gt;), because\u0026lt;/p\u0026gt;\n\n\u0026lt;ol\u0026gt;\n\u0026lt;li\u0026gt;it does not do any escaping or quoting.\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;it is prone to Uncontrolled string format attacks e.g. \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/SQL_injection\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;SQL injection\u0026lt;/a\u0026gt;.\u0026lt;/li\u0026gt;\n\u0026lt;/ol\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Different implementations of the Python DB-API are allowed to use different placeholders, so you\u0026apos;ll need to find out which one you\u0026apos;re using -- it could be (e.g. with MySQLdb):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-perl\u0026quot;\u0026gt;cursor.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;INSERT INTO table VALUES (%s, %s, %s)\u0026quot;\u0026lt;/span\u0026gt;, (var1, var2, var3))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or (e.g. with sqlite3 from the Python standard library):\u0026lt;/p\u0026gt;\n\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attribute\u0026quot;\u0026gt;cursor\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-selector-class\u0026quot;\u0026gt;.execute\u0026lt;/span\u0026gt;(\u0026quot;INSERT INTO table VALUES (?, ?, ?)\u0026quot;, (var1, var2, var3))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\n\u0026lt;p\u0026gt;or others yet (after \u0026lt;code\u0026gt;VALUES\u0026lt;/code\u0026gt; you could have \u0026lt;code\u0026gt;(:1, :2, :3)\u0026lt;/code\u0026gt; , or \u0026quot;named styles\u0026quot; \u0026lt;code\u0026gt;(:fee, :fie, :fo)\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;(%(fee)s, %(fie)s, %(fo)s)\u0026lt;/code\u0026gt; where you pass a dict instead of a map as the second argument to \u0026lt;code\u0026gt;execute\u0026lt;/code\u0026gt;).  Check the \u0026lt;code\u0026gt;paramstyle\u0026lt;/code\u0026gt; string constant in the DB API module you\u0026apos;re using, and look for paramstyle at \u0026lt;a href=\u0026quot;http://www.python.org/dev/peps/pep-0249/\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;http://www.python.org/dev/peps/pep-0249/\u0026lt;/a\u0026gt; to see what all the parameter-passing styles are!\u0026lt;/p\u0026gt;\n    ","\n\u0026lt;p\u0026gt;Many ways. \u0026lt;strong\u0026gt;DON\u0026apos;T\u0026lt;/strong\u0026gt; use the most obvious one (\u0026lt;code\u0026gt;%s\u0026lt;/code\u0026gt; with \u0026lt;code\u0026gt;%\u0026lt;/code\u0026gt;) in real code, it\u0026apos;s open to \u0026lt;a href=\u0026quot;http://en.wikipedia.org/wiki/SQL_injection\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;attacks\u0026lt;/a\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Here copy-paste\u0026apos;d \u0026lt;strong\u0026gt;\u0026lt;a href=\u0026quot;http://docs.python.org/2/library/sqlite3.html\u0026quot; rel=\u0026quot;noreferrer\u0026quot;\u0026gt;from pydoc of sqlite3\u0026lt;/a\u0026gt;\u0026lt;/strong\u0026gt;:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Never do this -- insecure!\u0026lt;/span\u0026gt;\nsymbol = \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;RHAT\u0026apos;\u0026lt;/span\u0026gt;\nc.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;SELECT * FROM stocks WHERE symbol = \u0026apos;%s\u0026apos;\u0026quot;\u0026lt;/span\u0026gt; % symbol)\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Do this instead\u0026lt;/span\u0026gt;\nt = (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;RHAT\u0026apos;\u0026lt;/span\u0026gt;,)\nc.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT * FROM stocks WHERE symbol=?\u0026apos;\u0026lt;/span\u0026gt;, t)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; c.fetchone()\n\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Larger example that inserts many records at a time\u0026lt;/span\u0026gt;\npurchases = [(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;2006-03-28\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;BUY\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;IBM\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;45.00\u0026lt;/span\u0026gt;),\n             (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;2006-04-05\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;BUY\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;MSFT\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;1000\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;72.00\u0026lt;/span\u0026gt;),\n             (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;2006-04-06\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELL\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;IBM\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;500\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-number\u0026quot;\u0026gt;53.00\u0026lt;/span\u0026gt;),\n            ]\nc.executemany(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;INSERT INTO stocks VALUES (?,?,?,?,?)\u0026apos;\u0026lt;/span\u0026gt;, purchases)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;More examples if you need:\u0026lt;/strong\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-bash\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Multiple values single statement/execution\u0026lt;/span\u0026gt;\nc.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT * FROM stocks WHERE symbol=? OR symbol=?\u0026apos;\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;RHAT\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;MSO\u0026apos;\u0026lt;/span\u0026gt;))\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; c.fetchall()\nc.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT * FROM stocks WHERE symbol IN (?, ?)\u0026apos;\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;RHAT\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;MSO\u0026apos;\u0026lt;/span\u0026gt;))\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; c.fetchall()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# This also works, though ones above are better as a habit as it\u0026apos;s inline with syntax of executemany().. but your choice.\u0026lt;/span\u0026gt;\nc.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;SELECT * FROM stocks WHERE symbol=? OR symbol=?\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;RHAT\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;MSO\u0026apos;\u0026lt;/span\u0026gt;)\n\u0026lt;span class=\u0026quot;hljs-built_in\u0026quot;\u0026gt;print\u0026lt;/span\u0026gt; c.fetchall()\n\u0026lt;span class=\u0026quot;hljs-comment\u0026quot;\u0026gt;# Insert a single item\u0026lt;/span\u0026gt;\nc.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;INSERT INTO stocks VALUES (?,?,?,?,?)\u0026apos;\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;2006-03-28\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;BUY\u0026apos;\u0026lt;/span\u0026gt;, \u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;IBM\u0026apos;\u0026lt;/span\u0026gt;, 1000, 45.00))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;\u0026lt;a href=\u0026quot;http://web.archive.org/web/20090504233107/amk.ca/python/writing/DB-API.html\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;http://www.amk.ca/python/writing/DB-API.html\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Be careful when you simply append values of variables to your statements:\nImagine a user naming himself \u0026lt;code\u0026gt;\u0026apos;;DROP TABLE Users;\u0026apos;\u0026lt;/code\u0026gt; --\nThat\u0026apos;s why you need to use SQL escaping, which Python provides for you when you use \u0026lt;code\u0026gt;cursor.execute\u0026lt;/code\u0026gt; in a decent manner. Example in the URL is:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;default s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-scss\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-attribute\u0026quot;\u0026gt;cursor\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026quot;hljs-selector-class\u0026quot;\u0026gt;.execute\u0026lt;/span\u0026gt;(\u0026quot;insert into Attendees values (?, ?, ?)\u0026quot;, (name, seminar, paid))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n    ","\n\u0026lt;p\u0026gt;The syntax for providing a single value can be confusing for inexperienced Python users.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;Given the query\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-sql s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-sql\u0026quot;\u0026gt;\u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INSERT\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;INTO\u0026lt;/span\u0026gt; mytable (fruit) \u0026lt;span class=\u0026quot;hljs-keyword\u0026quot;\u0026gt;VALUES\u0026lt;/span\u0026gt; (\u0026lt;span class=\u0026quot;hljs-operator\u0026quot;\u0026gt;%\u0026lt;/span\u0026gt;s)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Generally*, the value passed to \u0026lt;code\u0026gt;cursor.execute\u0026lt;/code\u0026gt; must wrapped in an ordered sequence such as a \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/stdtypes.html#tuple\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;tuple\u0026lt;/a\u0026gt; or \u0026lt;a href=\u0026quot;https://docs.python.org/3/library/stdtypes.html#list\u0026quot; rel=\u0026quot;nofollow noreferrer\u0026quot;\u0026gt;list\u0026lt;/a\u0026gt; even though the value itself is a singleton, so we must provide a single element tuple, like this: \u0026lt;code\u0026gt;(value,)\u0026lt;/code\u0026gt;.\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;cursor.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;INSERT INTO mytable (fruit) VALUES (%s)\u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;apple\u0026apos;\u0026lt;/span\u0026gt;,))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;Passing a single string\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;cursor.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;INSERT INTO mytable (fruit) VALUES (%s)\u0026quot;\u0026quot;\u0026quot;\u0026lt;/span\u0026gt;, (\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026apos;apple\u0026apos;\u0026lt;/span\u0026gt;))\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;will result in an error which varies by the DB-API connector, for example\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;psycopg2:\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;TypeError: not all arguments converted during string formatting\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;sqlite3\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement uses 1, and there are 5 supplied\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;mysql.connector\n\u0026lt;blockquote\u0026gt;\n\u0026lt;p\u0026gt;mysql.connector.errors.ProgrammingError: 1064 (42000): You have an error in your SQL syntax;\u0026lt;/p\u0026gt;\n\u0026lt;/blockquote\u0026gt;\n\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n\u0026lt;hr\u0026gt;\n\u0026lt;p\u0026gt;*  The pymysql connector handles a single string parameter without erroring.  However it\u0026apos;s better to wrap the string in a tuple even if it\u0026apos;s a single because\u0026lt;/p\u0026gt;\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;you won\u0026apos;t need to change the code if you switch connector package\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt;you keep a consistent mental model of the query parameters being a sequence of objects rather than a single object.\u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n    "],"id":581,"title":"How to use variables in SQL statement in Python?","content":"\n                \n\u0026lt;p\u0026gt;I have the following Python code:\u0026lt;/p\u0026gt;\n\u0026lt;pre class=\u0026quot;lang-py s-code-block\u0026quot;\u0026gt;\u0026lt;code class=\u0026quot;hljs language-python\u0026quot;\u0026gt;cursor.execute(\u0026lt;span class=\u0026quot;hljs-string\u0026quot;\u0026gt;\u0026quot;INSERT INTO table VALUES var1, var2, var3,\u0026quot;\u0026lt;/span\u0026gt;)\n\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\n\u0026lt;p\u0026gt;where \u0026lt;code\u0026gt;var1\u0026lt;/code\u0026gt; is an integer, \u0026lt;code\u0026gt;var2\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;var3\u0026lt;/code\u0026gt; are strings.\u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt;How can I write the variable names without Python including them as part of the query text?\u0026lt;/p\u0026gt;\n    ","slug":"how-to-use-variables-in-sql-statement-in-python-1657388479077","postType":"QUESTION","createdAt":"2022-07-09T17:41:19.000Z","updatedAt":"2022-07-09T17:41:19.000Z","tags":[],"relatedQuestions":[]},"randomQuestions":[{"title":"WebDriverWait not working as expected","slug":"webdriverwait-not-working-as-expected-1657387373148"},{"title":"How to center an element horizontally and vertically","slug":"how-to-center-an-element-horizontally-and-vertically-1657388132330"},{"title":"No 'Access-Control-Allow-Origin' header is present on the requested resource—when trying to get data from a REST API","slug":"no-'access-control-allow-origin'-header-is-present-on-the-requested-resourcewhen-trying-to-get-data-from-a-rest-api-1657387628467"},{"title":"How can I fix 'android.os.NetworkOnMainThreadException'?","slug":"how-can-i-fix-'android.os.networkonmainthreadexception'-1657384454963"},{"title":"Int division: Why is the result of 1/3 == 0?","slug":"int-division:-why-is-the-result-of-13-0-1657387547814"},{"title":"What does if __name__ == \"__main__\": do?","slug":"what-does-if-__name__-\"__main__\":-do-1657384825815"},{"title":"MySQL pivot row into dynamic number of columns","slug":"mysql-pivot-row-into-dynamic-number-of-columns-1657387981930"},{"title":"Understanding slicing","slug":"understanding-slicing-1657384397680"},{"title":"How do you remove duplicates from a list whilst preserving order?","slug":"how-do-you-remove-duplicates-from-a-list-whilst-preserving-order-1657387877978"},{"title":"How do I vertically center text with CSS? [duplicate]","slug":"how-do-i-vertically-center-text-with-css-duplicate-1657387645821"},{"title":"How can I sanitize user input with PHP?","slug":"how-can-i-sanitize-user-input-with-php-1657387892329"},{"title":"How can I find the time complexity of an algorithm?","slug":"how-can-i-find-the-time-complexity-of-an-algorithm-1657388486001"},{"title":"How to determine equality for two JavaScript objects?","slug":"how-to-determine-equality-for-two-javascript-objects-1657387638650"},{"title":"Why do I need to override the equals and hashCode methods in Java?","slug":"why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877"},{"title":"jQuery Ajax File Upload","slug":"jquery-ajax-file-upload-1657387368970"},{"title":"Find object by id in an array of JavaScript objects","slug":"find-object-by-id-in-an-array-of-javascript-objects-1657387572087"},{"title":"Iterating over dictionaries using 'for' loops","slug":"iterating-over-dictionaries-using-'for'-loops-1657388334481"},{"title":"Why does my JavaScript code receive a \"No 'Access-Control-Allow-Origin' header is present on the requested resource\" error, while Postman does not?","slug":"why-does-my-javascript-code-receive-a-\"no-'access-control-allow-origin'-header-is-present-on-the-requested-resource\"-error-while-postman-does-not-1657384636363"},{"title":"Learning Regular Expressions [closed]","slug":"learning-regular-expressions-closed-1657384719460"},{"title":"How to filter object array based on attributes?","slug":"how-to-filter-object-array-based-on-attributes-1657388211247"}]},"__N_SSG":true},"page":"/questions/[slug]","query":{"slug":"how-to-use-variables-in-sql-statement-in-python-1657388479077"},"buildId":"xZs8haGjOP63QuDE0kxeX","isFallback":false,"gsp":true,"locale":"en","locales":["en"],"defaultLocale":"en","scriptLoader":[]}</script></body></html>