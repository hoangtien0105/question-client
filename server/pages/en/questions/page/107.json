{"pageProps":{"data":{"count":610,"rows":[{"id":80,"title":"Undefined, unspecified and implementation-defined behavior","slug":"undefined-unspecified-and-implementation-defined-behavior-1657384516085","postType":"QUESTION","createdAt":"2022-07-09T16:35:16.000Z","updatedAt":"2022-07-09T16:35:16.000Z","tags":[{"id":294,"name":"undefined-behavior","slug":"undefined-behavior","createdAt":"2022-07-09T16:35:16.000Z","updatedAt":"2022-07-09T16:35:16.000Z","Questions_Tags":{"questionId":80,"tagId":294}},{"id":295,"name":"unspecified-behavior","slug":"unspecified-behavior","createdAt":"2022-07-09T16:35:16.000Z","updatedAt":"2022-07-09T16:35:16.000Z","Questions_Tags":{"questionId":80,"tagId":295}}]},{"id":79,"title":"Using async/await with a forEach loop","slug":"using-asyncawait-with-a-foreach-loop-1657384512667","postType":"QUESTION","createdAt":"2022-07-09T16:35:12.000Z","updatedAt":"2022-07-09T16:35:12.000Z","tags":[{"id":288,"name":"node.js","slug":"node.js","createdAt":"2022-07-09T16:35:12.000Z","updatedAt":"2022-07-09T16:35:12.000Z","Questions_Tags":{"questionId":79,"tagId":288}},{"id":290,"name":"async-await","slug":"async-await","createdAt":"2022-07-09T16:35:12.000Z","updatedAt":"2022-07-09T16:35:12.000Z","Questions_Tags":{"questionId":79,"tagId":290}},{"id":291,"name":"ecmascript-2017","slug":"ecmascript-2017","createdAt":"2022-07-09T16:35:12.000Z","updatedAt":"2022-07-09T16:35:12.000Z","Questions_Tags":{"questionId":79,"tagId":291}}]},{"id":78,"title":"What is object slicing?","slug":"what-is-object-slicing-1657384506425","postType":"QUESTION","createdAt":"2022-07-09T16:35:06.000Z","updatedAt":"2022-07-09T16:35:06.000Z","tags":[{"id":285,"name":"inheritance","slug":"inheritance","createdAt":"2022-07-09T16:35:06.000Z","updatedAt":"2022-07-09T16:35:06.000Z","Questions_Tags":{"questionId":78,"tagId":285}},{"id":286,"name":"object-slicing","slug":"object-slicing","createdAt":"2022-07-09T16:35:06.000Z","updatedAt":"2022-07-09T16:35:06.000Z","Questions_Tags":{"questionId":78,"tagId":286}}]},{"id":77,"title":"How can I read inputs as numbers?","slug":"how-can-i-read-inputs-as-numbers-1657384503324","postType":"QUESTION","createdAt":"2022-07-09T16:35:03.000Z","updatedAt":"2022-07-09T16:35:03.000Z","tags":[{"id":279,"name":"python-3.x","slug":"python-3.x","createdAt":"2022-07-09T16:35:03.000Z","updatedAt":"2022-07-09T16:35:03.000Z","Questions_Tags":{"questionId":77,"tagId":279}},{"id":280,"name":"python-2.7","slug":"python-2.7","createdAt":"2022-07-09T16:35:03.000Z","updatedAt":"2022-07-09T16:35:03.000Z","Questions_Tags":{"questionId":77,"tagId":280}},{"id":282,"name":"int","slug":"int","createdAt":"2022-07-09T16:35:03.000Z","updatedAt":"2022-07-09T16:35:03.000Z","Questions_Tags":{"questionId":77,"tagId":282}}]},{"id":76,"title":"How do I make a flat list out of a list of lists?","slug":"how-do-i-make-a-flat-list-out-of-a-list-of-lists-1657384500439","postType":"QUESTION","createdAt":"2022-07-09T16:35:00.000Z","updatedAt":"2022-07-09T16:35:00.000Z","tags":[{"id":276,"name":"multidimensional-array","slug":"multidimensional-array","createdAt":"2022-07-09T16:35:00.000Z","updatedAt":"2022-07-09T16:35:00.000Z","Questions_Tags":{"questionId":76,"tagId":276}},{"id":277,"name":"flatten","slug":"flatten","createdAt":"2022-07-09T16:35:00.000Z","updatedAt":"2022-07-09T16:35:00.000Z","Questions_Tags":{"questionId":76,"tagId":277}}]}]},"answers":{"76":["\n&lt;p&gt;To flatten a list of lists &lt;code&gt;xss&lt;/code&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;flat_list = [x &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; xs &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; xss &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; xs]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This is equivalent to:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;flat_list = []\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; xs &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; xss:\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; xs:\n        flat_list.append(x)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Or as a function:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;xss&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [x &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; xs &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; xss &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; xs]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;h4&gt;Performance analysis:&lt;/h4&gt;\n&lt;p&gt;To measure performance, we use the &lt;a href=&quot;https://docs.python.org/3/library/timeit.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;timeit&lt;/code&gt;&lt;/a&gt; module from the standard library:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;$ python -mtimeit -s&lt;span class=&quot;hljs-string&quot;&gt;&apos;t=[[1,2,3],[4,5,6], [7], [8,9]]*99&apos;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;[x for xs in xss for x in xs]&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt; loops, best of &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;143&lt;/span&gt; usec per loop\n$ python -mtimeit -s&lt;span class=&quot;hljs-string&quot;&gt;&apos;t=[[1,2,3],[4,5,6], [7], [8,9]]*99&apos;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;sum(t, [])&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt; loops, best of &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;969&lt;/span&gt; usec per loop\n$ python -mtimeit -s&lt;span class=&quot;hljs-string&quot;&gt;&apos;t=[[1,2,3],[4,5,6], [7], [8,9]]*99&apos;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;reduce(lambda x,y: x+y,t)&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt; loops, best of &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1.1&lt;/span&gt; msec per loop\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Explanation:&lt;/strong&gt; the methods based on &lt;code&gt;+&lt;/code&gt; (including the implied use in &lt;code&gt;sum&lt;/code&gt;) are, of necessity, &lt;code&gt;O(T**2)&lt;/code&gt; when there are T sublists -- as the intermediate result list keeps getting longer, at each step a new intermediate result list object gets allocated, and all the items in the previous intermediate result must be copied over (as well as a few new ones added at the end). So, for simplicity and without actual loss of generality, say you have T sublists of k items each: the first k items are copied back and forth T-1 times, the second k items T-2 times, and so on; total number of copies is k times the sum of x for x from 1 to T excluded, i.e., &lt;code&gt;k * (T**2)/2&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;The list comprehension just generates one list, once, and copies each item over (from its original place of residence to the result list) also exactly once.&lt;/p&gt;\n    ","\n&lt;p&gt;You can use &lt;a href=&quot;http://docs.python.org/library/itertools.html#itertools.chain&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;itertools.chain()&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; itertools\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;list2d = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;merged = &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(itertools.chain(*list2d))\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Or you can use &lt;a href=&quot;http://docs.python.org/library/itertools.html#itertools.chain.from_iterable&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;itertools.chain.from_iterable()&lt;/code&gt;&lt;/a&gt; which doesn&apos;t require unpacking the list with the &lt;code&gt;*&lt;/code&gt; operator:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; itertools\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;list2d = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;merged = &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(itertools.chain.from_iterable(list2d))\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This approach is arguably more readable than &lt;code&gt;[item for sublist in l for item in sublist]&lt;/code&gt; and appears to be faster too:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;$ python3 -mtimeit -s&lt;span class=&quot;hljs-string&quot;&gt;&apos;l=[[1,2,3],[4,5,6], [7], [8,9]]*99;import itertools&apos;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;list(itertools.chain.from_iterable(l))&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;20000&lt;/span&gt; loops, best of &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10.8&lt;/span&gt; usec per loop\n$ python3 -mtimeit -s&lt;span class=&quot;hljs-string&quot;&gt;&apos;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&apos;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;[item for sublist in l for item in sublist]&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt; loops, best of &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;21.7&lt;/span&gt; usec per loop\n$ python3 -mtimeit -s&lt;span class=&quot;hljs-string&quot;&gt;&apos;l=[[1,2,3],[4,5,6], [7], [8,9]]*99&apos;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;sum(l, [])&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt; loops, best of &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;258&lt;/span&gt; usec per loop\n$ python3 -mtimeit -s&lt;span class=&quot;hljs-string&quot;&gt;&apos;l=[[1,2,3],[4,5,6], [7], [8,9]]*99;from functools import reduce&apos;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;reduce(lambda x,y: x+y,l)&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt; loops, best of &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;292&lt;/span&gt; usec per loop\n$ python3 --version\nPython &lt;span class=&quot;hljs-number&quot;&gt;3.7&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;.5&lt;/span&gt;rc1\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Note from the author&lt;/strong&gt;: This is very inefficient. But fun, because &lt;a href=&quot;https://en.wikipedia.org/wiki/Monoid#Monoids_in_computer_science&quot; rel=&quot;noreferrer&quot;&gt;monoids&lt;/a&gt; are awesome.&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;xss = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;(xss, [])\n[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;code&gt;sum&lt;/code&gt; sums the elements of the iterable &lt;code&gt;xss&lt;/code&gt;, and uses the second argument as the initial value &lt;code&gt;[]&lt;/code&gt; for the sum. (The default initial value is &lt;code&gt;0&lt;/code&gt;, which is not a list.)&lt;/p&gt;\n&lt;p&gt;Because you are summing nested lists, you actually get &lt;code&gt;[1,3]+[2,4]&lt;/code&gt; as a result of &lt;code&gt;sum([[1,3],[2,4]],[])&lt;/code&gt;, which is equal to &lt;code&gt;[1,3,2,4]&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;Note that only works on lists of lists. For lists of lists of lists, you&apos;ll need another solution.&lt;/p&gt;\n    ","\n&lt;p&gt;I tested most suggested solutions with &lt;a href=&quot;https://github.com/nschloe/perfplot&quot; rel=&quot;noreferrer&quot;&gt;perfplot&lt;/a&gt; (a pet project of mine, essentially a wrapper around &lt;code&gt;timeit&lt;/code&gt;), and found&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; functools\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; operator\nfunctools.reduce(operator.iconcat, a, [])\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;to be the fastest solution, both when many small lists and few long lists are concatenated. (&lt;code&gt;operator.iadd&lt;/code&gt; is equally fast.)&lt;/p&gt;\n&lt;p&gt;A simpler and also acceptable variant is&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;out = []\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; sublist &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; a:\n    out.extend(sublist)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;If the number of sublists is large, this performs a little worse than the above suggestion.&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/82YEG.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/82YEG.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/Mo7iy.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/Mo7iy.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;Code to reproduce the plot:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; functools\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; itertools\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; operator\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; numpy &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; np\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; perfplot\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;forfor&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [item &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; sublist &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; a &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; sublist]\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;sum_brackets&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;(a, [])\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;functools_reduce&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; functools.reduce(operator.concat, a)\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;functools_reduce_iconcat&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; functools.reduce(operator.iconcat, a, [])\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;itertools_chain&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(itertools.chain.from_iterable(a))\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;numpy_flat&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(np.array(a).flat)\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;numpy_concatenate&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(np.concatenate(a))\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    out = []\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; sublist &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; a:\n        out.extend(sublist)\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; out\n\n\nb = perfplot.bench(\n    setup=&lt;span class=&quot;hljs-keyword&quot;&gt;lambda&lt;/span&gt; n: [&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;range&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;))] * n,\n    &lt;span class=&quot;hljs-comment&quot;&gt;# setup=lambda n: [list(range(n))] * 10,&lt;/span&gt;\n    kernels=[\n        forfor,\n        sum_brackets,\n        functools_reduce,\n        functools_reduce_iconcat,\n        itertools_chain,\n        numpy_flat,\n        numpy_concatenate,\n        extend,\n    ],\n    n_range=[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; ** k &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;range&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;)],\n    xlabel=&lt;span class=&quot;hljs-string&quot;&gt;&quot;num lists (of length 10)&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-comment&quot;&gt;# xlabel=&quot;len lists (10 lists total)&quot;&lt;/span&gt;\n)\nb.save(&lt;span class=&quot;hljs-string&quot;&gt;&quot;out.png&quot;&lt;/span&gt;)\nb.show()\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Using &lt;a href=&quot;https://docs.python.org/3/library/functools.html#functools.reduce&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;functools.reduce&lt;/code&gt;&lt;/a&gt;, which adds an accumulated list &lt;code&gt;xs&lt;/code&gt; to the next list &lt;code&gt;ys&lt;/code&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; functools &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; reduce\nxss = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\nout = reduce(&lt;span class=&quot;hljs-keyword&quot;&gt;lambda&lt;/span&gt; xs, ys: xs + ys, xss)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Output:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;A faster way using &lt;a href=&quot;https://docs.python.org/3/library/operator.html#operator.concat&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;operator.concat&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; functools &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; reduce\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; operator\nxss = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\nout = reduce(operator.concat, xss)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Output:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Here is a general approach that applies to &lt;strong&gt;numbers&lt;/strong&gt;, &lt;strong&gt;strings&lt;/strong&gt;, &lt;strong&gt;nested&lt;/strong&gt; lists and &lt;strong&gt;mixed&lt;/strong&gt; containers.  This can flatten both simple and complicated containers (see also &lt;em&gt;Demo&lt;/em&gt;).&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Code&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; typing &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; Iterable \n&lt;span class=&quot;hljs-comment&quot;&gt;#from collections import Iterable                            # &amp;lt; py38&lt;/span&gt;\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;items&lt;/span&gt;):\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&quot;Yield items from any nested iterable; see Reference.&quot;&quot;&quot;&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; items:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(x, Iterable) &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(x, (&lt;span class=&quot;hljs-built_in&quot;&gt;str&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;bytes&lt;/span&gt;)):\n            &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; sub_x &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; flatten(x):\n                &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; sub_x\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; x\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;em&gt;Notes&lt;/em&gt;:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;In Python 3, &lt;code&gt;yield from flatten(x)&lt;/code&gt; can replace &lt;code&gt;for sub_x in flatten(x): yield sub_x&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;In Python 3.8, &lt;a href=&quot;https://docs.python.org/3/library/collections.abc.html#module-collections.abc&quot; rel=&quot;nofollow noreferrer&quot;&gt;abstract base classes&lt;/a&gt; are &lt;a href=&quot;https://docs.python.org/3/whatsnew/3.7.html#id3&quot; rel=&quot;nofollow noreferrer&quot;&gt;moved&lt;/a&gt; from &lt;code&gt;collection.abc&lt;/code&gt; to the &lt;code&gt;typing&lt;/code&gt; module.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Demo&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;simple = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(flatten(simple))\n&lt;span class=&quot;hljs-comment&quot;&gt;# [1, 2, 3, 4, 5, 6, 7, 8, 9]&lt;/span&gt;\n\ncomplicated = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]], (&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, {&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;}, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;9&quot;&lt;/span&gt;]              &lt;span class=&quot;hljs-comment&quot;&gt;# numbers, strs, nested &amp;amp; mixed&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(flatten(complicated))\n&lt;span class=&quot;hljs-comment&quot;&gt;# [1, 2, 3, 4, 5, 6, 7, 8, &apos;9&apos;]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Reference&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;This solution is modified from a recipe in &lt;em&gt;Beazley, D. and B. Jones.  Recipe 4.14, Python Cookbook 3rd Ed., O&apos;Reilly Media Inc. Sebastopol, CA: 2013.&lt;/em&gt;&lt;/li&gt;\n&lt;li&gt;Found an earlier &lt;a href=&quot;https://stackoverflow.com/a/2158532/4531270&quot;&gt;SO post&lt;/a&gt;, possibly the original demonstration.&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;To flatten a data-structure that is deeply nested, use &lt;a href=&quot;https://iteration-utilities.readthedocs.io/en/latest/generated/deepflatten.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;iteration_utilities.deepflatten&lt;/code&gt;&lt;/a&gt;&lt;sup&gt;1&lt;/sup&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; iteration_utilities &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; deepflatten\n\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;l = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(deepflatten(l, depth=&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;))\n[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]\n\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;l = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]], &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(deepflatten(l))\n[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It&apos;s a generator so you need to cast the result to a &lt;code&gt;list&lt;/code&gt; or explicitly iterate over it.&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;To flatten only one level and if each of the items is itself iterable you can also use &lt;a href=&quot;https://iteration-utilities.readthedocs.io/en/latest/generated/flatten.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;iteration_utilities.flatten&lt;/code&gt;&lt;/a&gt; which itself is just a thin wrapper around &lt;a href=&quot;https://docs.python.org/library/itertools.html#itertools.chain.from_iterable&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;itertools.chain.from_iterable&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; iteration_utilities &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; flatten\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;l = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(flatten(l))\n[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;Just to add some timings (based on &lt;a href=&quot;https://stackoverflow.com/questions/952914/how-to-make-a-flat-list-out-of-a-list-of-lists/45323085#45323085&quot;&gt;Nico Schlömer&apos;s answer&lt;/a&gt; that didn&apos;t include the function presented in this answer):&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/3D8uN.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/3D8uN.png&quot; alt=&quot;Enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;It&apos;s a log-log plot to accommodate for the huge range of values spanned. For qualitative reasoning: Lower is better.&lt;/p&gt;\n&lt;p&gt;The results show that if the iterable contains only a few inner iterables then &lt;code&gt;sum&lt;/code&gt; will be fastest, however for long iterables only the &lt;code&gt;itertools.chain.from_iterable&lt;/code&gt;, &lt;code&gt;iteration_utilities.deepflatten&lt;/code&gt; or the nested comprehension have reasonable performance with &lt;code&gt;itertools.chain.from_iterable&lt;/code&gt; being the fastest (as already noticed by Nico Schlömer).&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; itertools &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; chain\n&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; functools &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; reduce\n&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; collections &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; Iterable  &lt;span class=&quot;hljs-comment&quot;&gt;# or from collections.abc import Iterable&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; operator\n&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; iteration_utilities &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; deepflatten\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;nested_list_comprehension&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;lsts&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [item &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; sublist &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; lsts &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; sublist]\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;itertools_chain_from_iterable&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;lsts&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(chain.from_iterable(lsts))\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;pythons_sum&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;lsts&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;(lsts, [])\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;reduce_add&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;lsts&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; reduce(&lt;span class=&quot;hljs-keyword&quot;&gt;lambda&lt;/span&gt; x, y: x + y, lsts)\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;pylangs_flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;lsts&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(flatten(lsts))\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;items&lt;/span&gt;):\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&quot;Yield items from any nested iterable; see REF.&quot;&quot;&quot;&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; items:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(x, Iterable) &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(x, (&lt;span class=&quot;hljs-built_in&quot;&gt;str&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;bytes&lt;/span&gt;)):\n            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; flatten(x)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; x\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;reduce_concat&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;lsts&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; reduce(operator.concat, lsts)\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;iteration_utilities_deepflatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;lsts&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(deepflatten(lsts, depth=&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;))\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; simple_benchmark &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; benchmark\n\nb = benchmark(\n    [nested_list_comprehension, itertools_chain_from_iterable, pythons_sum, reduce_add,\n     pylangs_flatten, reduce_concat, iteration_utilities_deepflatten],\n    arguments={&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;**i: [[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]*&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]*(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;**i) &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;range&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;)},\n    argument_name=&lt;span class=&quot;hljs-string&quot;&gt;&apos;number of inner lists&apos;&lt;/span&gt;\n)\n\nb.plot()\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;&lt;sup&gt;1 Disclaimer: I&apos;m the author of that library&lt;/sup&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Consider installing the &lt;a href=&quot;https://github.com/erikrose/more-itertools&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;more_itertools&lt;/code&gt;&lt;/a&gt; package.&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&amp;gt; pip install more_itertools\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It ships with an implementation for &lt;a href=&quot;https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.flatten&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;flatten&lt;/code&gt;&lt;/a&gt; (&lt;a href=&quot;https://more-itertools.readthedocs.io/en/stable/_modules/more_itertools/recipes.html#flatten&quot; rel=&quot;noreferrer&quot;&gt;source&lt;/a&gt;, from the &lt;a href=&quot;https://docs.python.org/3/library/itertools.html#itertools-recipes&quot; rel=&quot;noreferrer&quot;&gt;itertools recipes&lt;/a&gt;):&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; more_itertools\n\n\nlst = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(more_itertools.flatten(lst))\n&lt;span class=&quot;hljs-comment&quot;&gt;# [1, 2, 3, 4, 5, 6, 7, 8, 9]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;em&gt;Note: as mentioned in the &lt;a href=&quot;https://more-itertools.readthedocs.io/en/stable/api.html#more_itertools.flatten&quot; rel=&quot;noreferrer&quot;&gt;docs&lt;/a&gt;, &lt;code&gt;flatten&lt;/code&gt; requires a list of lists.  See below on flattening more irregular inputs.&lt;/em&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;As of version 2.4, you can flatten more complicated, nested iterables with &lt;a href=&quot;https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.collapse&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;more_itertools.collapse&lt;/code&gt;&lt;/a&gt; (&lt;a href=&quot;https://more-itertools.readthedocs.io/en/stable/_modules/more_itertools/more.html#collapse&quot; rel=&quot;noreferrer&quot;&gt;source&lt;/a&gt;, contributed by  abarnet).&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;lst = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(more_itertools.collapse(lst)) \n&lt;span class=&quot;hljs-comment&quot;&gt;# [1, 2, 3, 4, 5, 6, 7, 8, 9]&lt;/span&gt;\n\nlst = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [[&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]], [[[&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;]]], &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]              &lt;span class=&quot;hljs-comment&quot;&gt;# complex nesting&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(more_itertools.collapse(lst))\n&lt;span class=&quot;hljs-comment&quot;&gt;# [1, 2, 3, 4, 5, 6, 7, 8, 9]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The following seems simplest to me:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; numpy &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; np\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;l = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt;(np.concatenate(l))\n[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The reason your function didn&apos;t work is because the &lt;em&gt;extend&lt;/em&gt; extends an array in-place and doesn&apos;t return it. You can still return x from lambda, using something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;reduce(&lt;span class=&quot;hljs-keyword&quot;&gt;lambda&lt;/span&gt; x,y: x.extend(y) &lt;span class=&quot;hljs-keyword&quot;&gt;or&lt;/span&gt; x, l)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note: extend is more efficient than + on lists.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;code&gt;matplotlib.cbook.flatten()&lt;/code&gt; will work for nested lists even if they nest more deeply than the example.&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; matplotlib\nl = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(matplotlib.cbook.flatten(l)))\nl2 = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]]]]]\n&lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(matplotlib.cbook.flatten(l2)))\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Result:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]\n[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This is 18x faster than underscore._.flatten:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;Average time over &lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt; trials of matplotlib.cbook.flatten: &lt;span class=&quot;hljs-number&quot;&gt;2.55e-05&lt;/span&gt; sec\nAverage time over &lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt; trials of underscore._.flatten: &lt;span class=&quot;hljs-number&quot;&gt;4.63e-04&lt;/span&gt; sec\n(time &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; underscore._)/(time &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; matplotlib.cbook) = &lt;span class=&quot;hljs-number&quot;&gt;18.1233394636&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;According your list &lt;code&gt;[[1, 2, 3], [4, 5, 6], [7], [8, 9]]&lt;/code&gt; which is 1 list level, we can simply use &lt;code&gt;sum(list,[])&lt;/code&gt; without using any libraries&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;([[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]],[])\n&lt;span class=&quot;hljs-comment&quot;&gt;# [1, 2, 3, 4, 5, 6, 7, 8, 9]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;To extend the advantage of this method when there is a tuple or number existing inside. Simply adding a mapping function for each element by &lt;code&gt;map&lt;/code&gt; to the list&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;#For only tuple&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;,[[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], (&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;), (&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,), [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]])),[])\n&lt;span class=&quot;hljs-comment&quot;&gt;# [1, 2, 3, 4, 5, 6, 7, 8, 9]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;#In general&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;convert&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;(x) &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;(x) &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;float&lt;/span&gt;:\n           &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [x]\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n           &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(x)\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;map&lt;/span&gt;(convert,[[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], (&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]])),[])\n&lt;span class=&quot;hljs-comment&quot;&gt;# [1, 2, 3, 4, 5, 6, 7, 8, 9]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In &lt;a href=&quot;https://mathieularose.com/how-not-to-flatten-a-list-of-lists-in-python&quot; rel=&quot;nofollow noreferrer&quot;&gt;here&lt;/a&gt;, there is a clear explanation of the drawback in terms of memory for this approach. In short, it recursively creates list objects, which should be avoided :(&lt;/p&gt;\n    ","\n&lt;p&gt;One can also use NumPy&apos;s &lt;a href=&quot;http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flat.html&quot; rel=&quot;noreferrer&quot;&gt;flat&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; numpy &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; np\n&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(np.array(l).flat)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It only works when sublists have identical dimensions.&lt;/p&gt;\n    ","\n&lt;p&gt;Use two &lt;code&gt;for&lt;/code&gt; in list comprehension:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;l = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\nflat_l = [e &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; v &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; l &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; e &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; v]\n&lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt;(flat_l)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can use the &lt;code&gt;list&lt;/code&gt; &lt;code&gt;extend&lt;/code&gt; method. It shows to be the fastest:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;flat_list = []\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; sublist &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; l:\n    flat_list.extend(sublist)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Performance:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; functools\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; itertools\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; numpy\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; operator\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; perfplot\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;functools_reduce_iconcat&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; functools.reduce(operator.iconcat, a, [])\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;itertools_chain&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(itertools.chain.from_iterable(a))\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;numpy_flat&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(numpy.array(a).flat)\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;):\n    n = []\n\n    &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;map&lt;/span&gt;(n.extend, a))\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; n\n\n\nperfplot.show(\n    setup = &lt;span class=&quot;hljs-keyword&quot;&gt;lambda&lt;/span&gt; n: [&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;range&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;))] * n,\n    kernels = [\n        functools_reduce_iconcat, extend, itertools_chain, numpy_flat\n        ],\n    n_range = [&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;**k &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;range&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;)],\n    xlabel = &lt;span class=&quot;hljs-string&quot;&gt;&apos;num lists&apos;&lt;/span&gt;,\n    )\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Output:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/xMrjA.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/xMrjA.png&quot; alt=&quot;Enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;There are several answers with the same recursive appending scheme as below, but none makes use of &lt;code&gt;try&lt;/code&gt;, which makes the solution more robust and &lt;em&gt;Pythonic&lt;/em&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;itr&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; itr:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; flatten(x)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;except&lt;/span&gt; TypeError:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; x\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Usage&lt;/strong&gt;: this is a generator, and you typically want to enclose it in an iterable builder like &lt;code&gt;list()&lt;/code&gt; or &lt;code&gt;tuple()&lt;/code&gt; or use it in a &lt;code&gt;for&lt;/code&gt; loop.&lt;/p&gt;\n&lt;p&gt;Advantages of this solution are:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;works with any kind of iterable (even future ones!)&lt;/li&gt;\n&lt;li&gt;works with any combination and deepness of nesting&lt;/li&gt;\n&lt;li&gt;works also if top level contains bare items&lt;/li&gt;\n&lt;li&gt;no dependencies&lt;/li&gt;\n&lt;li&gt;fast and efficient (you can flatten the nested iterable partially, without wasting time on the remaining part you don&apos;t need)&lt;/li&gt;\n&lt;li&gt;versatile (you can use it to build an iterable of your choice or in a loop)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;N.B.: Since &lt;em&gt;all&lt;/em&gt; iterables are flattened, strings are decomposed into sequences of single characters. If you don&apos;t like/want such behavior, you can use the following version which filters out from flattening iterables like strings and bytes:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;itr&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;(itr) &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;str&lt;/span&gt;,&lt;span class=&quot;hljs-built_in&quot;&gt;bytes&lt;/span&gt;):\n        &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; itr\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; itr:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;:\n                &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; flatten(x)\n            &lt;span class=&quot;hljs-keyword&quot;&gt;except&lt;/span&gt; TypeError:\n                &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; x\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you are willing to give up a tiny amount of speed for a cleaner look, then you could use &lt;code&gt;numpy.concatenate().tolist()&lt;/code&gt; or &lt;code&gt;numpy.concatenate().ravel().tolist()&lt;/code&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; numpy\n\nl = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]] * &lt;span class=&quot;hljs-number&quot;&gt;99&lt;/span&gt;\n\n%timeit numpy.concatenate(l).ravel().tolist()\n&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt; loops, best of &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;313&lt;/span&gt; µs per loop\n\n%timeit numpy.concatenate(l).tolist()\n&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt; loops, best of &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;312&lt;/span&gt; µs per loop\n\n%timeit [item &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; sublist &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; l &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; sublist]\n&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt; loops, best of &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;31.5&lt;/span&gt; µs per loop\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;You can find out more here in the documentation, &lt;a href=&quot;https://docs.scipy.org/doc/numpy/reference/generated/numpy.concatenate.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;numpy.concatenate&lt;/a&gt; and &lt;a href=&quot;https://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;numpy.ravel&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: Below applies to Python 3.3+ because it uses &lt;a href=&quot;https://docs.python.org/3/whatsnew/3.3.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;yield_from&lt;/code&gt;&lt;/a&gt;.  &lt;code&gt;six&lt;/code&gt; is also a third-party package, though it is stable.  Alternately, you could use &lt;code&gt;sys.version&lt;/code&gt;.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;In the case of &lt;code&gt;obj = [[1, 2,], [3, 4], [5, 6]]&lt;/code&gt;, all of the solutions here are good, including list comprehension and &lt;code&gt;itertools.chain.from_iterable&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;However, consider this slightly more complex case:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;obj = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;abc&apos;&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;]]]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;There are several problems here:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;One element, &lt;code&gt;6&lt;/code&gt;, is just a scalar; it&apos;s not iterable, so the above routes will fail here.&lt;/li&gt;\n&lt;li&gt;One element, &lt;code&gt;&apos;abc&apos;&lt;/code&gt;, &lt;em&gt;is&lt;/em&gt; technically iterable (all &lt;code&gt;str&lt;/code&gt;s are).  However, reading between the lines a bit, you don&apos;t want to treat it as such--you want to treat it as a single element.&lt;/li&gt;\n&lt;li&gt;The final element, &lt;code&gt;[8, [9, 10]]&lt;/code&gt; is itself a nested iterable.  Basic list comprehension and &lt;code&gt;chain.from_iterable&lt;/code&gt; only extract &quot;1 level down.&quot;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;You can remedy this as follows:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; collections &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; Iterable\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; six &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; string_types\n\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;):\n&lt;span class=&quot;hljs-meta&quot;&gt;... &lt;/span&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj:\n&lt;span class=&quot;hljs-meta&quot;&gt;... &lt;/span&gt;        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(i, Iterable) &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(i, string_types):\n&lt;span class=&quot;hljs-meta&quot;&gt;... &lt;/span&gt;            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; flatten(i)\n&lt;span class=&quot;hljs-meta&quot;&gt;... &lt;/span&gt;        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n&lt;span class=&quot;hljs-meta&quot;&gt;... &lt;/span&gt;            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; i\n\n\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(flatten(obj))\n[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;abc&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here, you check that the sub-element (1) is iterable with &lt;a href=&quot;https://github.com/python/cpython/blob/master/Lib/_collections_abc.py#L243&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;Iterable&lt;/code&gt;&lt;/a&gt;, an ABC from &lt;code&gt;itertools&lt;/code&gt;, but also want to ensure that (2) the element is &lt;em&gt;not&lt;/em&gt; &quot;string-like.&quot;&lt;/p&gt;\n    ","\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;alist&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; alist == []:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; []\n    &lt;span class=&quot;hljs-keyword&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;(alist) &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [alist]\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; flatten(alist[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]) + flatten(alist[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;:])\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This may not be the most efficient way, but I thought to put a one-liner (actually a two-liner). Both versions will work on arbitrary hierarchy nested lists, and exploits language features (Python&amp;nbsp;3.5) and recursion.&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;make_list_flat&lt;/span&gt; (l):\n    flist = []\n    flist.extend ([l]) &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt; (l) &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; [flist.extend (make_list_flat (e)) &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; e &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; l]\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; flist\n\na = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;], [[[[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]]], &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;, [[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;17&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;18&lt;/span&gt;]]]]]]\nflist = make_list_flat(a)\n&lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt; (flist)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The output is&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;17&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;18&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This works in a depth first manner. The recursion goes down until it finds a non-list element, then extends the local variable &lt;code&gt;flist&lt;/code&gt; and then rolls back it to the parent. Whenever &lt;code&gt;flist&lt;/code&gt; is returned, it is extended to the parent&apos;s &lt;code&gt;flist&lt;/code&gt; in the list comprehension. Therefore, at the root, a flat list is returned.&lt;/p&gt;\n&lt;p&gt;The above one creates several local lists and returns them which are used to extend the parent&apos;s list. I think the way around for this may be creating a gloabl &lt;code&gt;flist&lt;/code&gt;, like below.&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;a = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;], [[[[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]]], &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;, [[&lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;17&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;18&lt;/span&gt;]]]]]]\nflist = []\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;make_list_flat&lt;/span&gt; (l):\n    flist.extend ([l]) &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt; (l) &lt;span class=&quot;hljs-keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; [make_list_flat (e) &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; e &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; l]\n\nmake_list_flat(a)\n&lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt; (flist)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The output is again&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;13&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;14&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;17&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;18&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Although I am not sure at this time about the efficiency.&lt;/p&gt;\n    ","\n&lt;p&gt;Another unusual approach that works for hetero- and homogeneous lists of integers:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; typing &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;List&lt;/span&gt;\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;l: &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;/span&gt;) -&amp;gt; &lt;span class=&quot;hljs-type&quot;&gt;List&lt;/span&gt;[&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;]:\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&quot;Flatten an arbitrary deep nested list of lists of integers.\n\n    Examples:\n        &amp;gt;&amp;gt;&amp;gt; flatten([1, 2, [1, [10]]])\n        [1, 2, 1, 10]\n\n    Args:\n        l: Union[l, Union[int, List[int]]\n\n    Returns:\n        Flatted list of integer\n    &quot;&quot;&quot;&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(i.strip(&lt;span class=&quot;hljs-string&quot;&gt;&apos;[ ]&apos;&lt;/span&gt;)) &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;str&lt;/span&gt;(l).split(&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;)]\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I wanted a solution which can deal with multiple nesting (&lt;code&gt;[[1], [[[2]], [3]]], [1, 2, 3]&lt;/code&gt; for example), but would also not be recursive (I had a big level of recursion and I got a recursion error.&lt;/p&gt;\n&lt;p&gt;This is what I came up with:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;_flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;l&lt;/span&gt;) -&amp;gt; Iterator[&lt;span class=&quot;hljs-type&quot;&gt;Any&lt;/span&gt;]:\n    stack = l.copy()\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; stack:\n        item = stack.pop()\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(item, &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;):\n            stack.extend(item)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; item\n\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;l&lt;/span&gt;) -&amp;gt; Iterator[&lt;span class=&quot;hljs-type&quot;&gt;Any&lt;/span&gt;]:\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;reversed&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(_flatten(l)))\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;and tests:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@pytest.mark.parametrize(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;input_list, expected_output&apos;&lt;/span&gt;, [\n    (&lt;span class=&quot;hljs-params&quot;&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]&lt;/span&gt;),\n    (&lt;span class=&quot;hljs-params&quot;&gt;[[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]&lt;/span&gt;),\n    (&lt;span class=&quot;hljs-params&quot;&gt;[[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]&lt;/span&gt;),\n    (&lt;span class=&quot;hljs-params&quot;&gt;[[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]], [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]&lt;/span&gt;),\n    (&lt;span class=&quot;hljs-params&quot;&gt;[[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;], [[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]], [&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]], [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]&lt;/span&gt;),\n    (&lt;span class=&quot;hljs-params&quot;&gt;[[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;], [[[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]], [&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]]], [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]&lt;/span&gt;),\n]&lt;/span&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;test_flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;input_list, expected_output&lt;/span&gt;):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(flatten(input_list)) == expected_output\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Not a one-liner, but seeing all the answers here, I guess this long list missed some pattern matching, so here it is :)&lt;/p&gt;\n&lt;p&gt;The two methods are probably not efficient, but anyway, it&apos;s easy to read (to me at least; perhaps I&apos;m spoiled by functional programming):&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flat&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;):\n    match x:\n        case []:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; []\n        case [[*sublist], *r]:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [*sublist, *flat(r)]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The second version considers lists of lists of lists... whatever the nesting:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flat&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;):\n    match x:\n        case []:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; []\n        case [[*sublist], *r]:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [*flat(sublist), *flat(r)]\n        case [h, *r]:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; [h, *flat(r)]\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;A non-recursive function to flatten lists of lists of any depth:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten_list&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;list1&lt;/span&gt;):\n    out = []\n    inside = list1\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; inside:\n        x = inside.pop(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(x, &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;):\n            inside[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = x\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n            out.append(x)\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; out\n\nl = [[[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;],&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,[&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,[[&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;],&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;],[&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;]]],[&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;]]\nflatten_list(l)\n&lt;span class=&quot;hljs-comment&quot;&gt;# [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can use the following:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatlst&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;lista&lt;/span&gt;):\n    listaplana = []\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; lista: listaplana = listaplana + k\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; listaplana\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I would suggest using generators with &lt;strong&gt;yield&lt;/strong&gt; statement and &lt;strong&gt;yield from&lt;/strong&gt;.\nHere&apos;s an example:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; collections.abc &lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; Iterable\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;items, ignore_types=(&lt;span class=&quot;hljs-params&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;bytes&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;str&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;):\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&quot;\n       Flatten all of the nested lists to the one. Ignoring flatting of iterable types str and bytes by default.\n    &quot;&quot;&quot;&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; x &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; items:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(x, Iterable) &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(x, ignore_types):\n            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; flatten(x)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; x\n\nvalues = [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], (&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;), (&lt;span class=&quot;hljs-string&quot;&gt;&apos;A&apos;&lt;/span&gt;, {&lt;span class=&quot;hljs-string&quot;&gt;&apos;B&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;C&apos;&lt;/span&gt;})]]\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; v &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; flatten(values):\n    &lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt;(v)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If I want to add something to the great previous answers, here is my recursive &lt;code&gt;flatten&lt;/code&gt; function which can flatten not only nested lists, but also any given container or any generally any object which can throw out items. This does also work for any depth of nesting and it is a lazy iterator which yields the items as requested:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;iterable&lt;/span&gt;):\n    &lt;span class=&quot;hljs-comment&quot;&gt;# These types won&apos;t considered a sequence or generally a container&lt;/span&gt;\n    exclude = &lt;span class=&quot;hljs-built_in&quot;&gt;str&lt;/span&gt;, &lt;span class=&quot;hljs-built_in&quot;&gt;bytes&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; iterable:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(i, exclude):\n                &lt;span class=&quot;hljs-keyword&quot;&gt;raise&lt;/span&gt; TypeError\n            &lt;span class=&quot;hljs-built_in&quot;&gt;iter&lt;/span&gt;(i)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;except&lt;/span&gt; TypeError:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; i\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n            &lt;span class=&quot;hljs-keyword&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; flatten(i)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This way, you can exclude types you don&apos;t want to be flattened, like &lt;code&gt;str&lt;/code&gt; or what else.&lt;/p&gt;\n&lt;p&gt;The idea is if an object can pass the &lt;code&gt;iter()&lt;/code&gt; it&apos;s ready to yield items. So the iterable can have even generator expressions as an item.&lt;/p&gt;\n&lt;p&gt;Someone could argue: Why did you write this that generic when the OP didn&apos;t ask for it? OK, you&apos;re right. I just felt like this might help someone (like it did for myself).&lt;/p&gt;\n&lt;p&gt;Test cases:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;lst1 = [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, {&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;}, (&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;), [[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;]], [[[&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]]], &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;, ((((&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,),),),)]\nlst2 = [&lt;span class=&quot;hljs-string&quot;&gt;&apos;3&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;B&apos;A&apos;&lt;/span&gt;, [[[(i ** &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;range&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;))]]], &lt;span class=&quot;hljs-built_in&quot;&gt;range&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;)]\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(flatten(lst1)))\n&lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(flatten(lst2)))\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Output:&lt;/p&gt;\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;[1, 3, 1, 6, 3, 8, 5, 9, 2]\n[&apos;3&apos;, b&apos;A&apos;, 0, 1, 4, 0, 1, 2]\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;flatten_array&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr&lt;/span&gt;):\n  result = []\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; arr:\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;isinstance&lt;/span&gt;(item, &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;):\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; num &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; item:\n        result.append(num)\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n      result.append(item)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result\n\n&lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt;(flatten_array([&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]))\n// output: [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Considering the list has just integers:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; re\nl = [[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;], [&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;]]\n&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;,re.sub(&lt;span class=&quot;hljs-string&quot;&gt;&apos;(\\[|\\])&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-built_in&quot;&gt;str&lt;/span&gt;(l)).split(&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;)))\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;np.hstack(listoflist).tolist()\n&lt;/code&gt;&lt;/pre&gt;\n    "],"77":["\n&lt;h3&gt;Solution&lt;/h3&gt;\n&lt;p&gt;Since Python 3, &lt;code&gt;input&lt;/code&gt; returns a string which you have to explicitly convert to &lt;code&gt;int&lt;/code&gt;s, with &lt;a href=&quot;https://docs.python.org/3/library/functions.html#int&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;int&lt;/code&gt;&lt;/a&gt;, like this&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;x = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;))\ny = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;))\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;You can accept numbers of any base and convert them directly to base-10 with the &lt;code&gt;int&lt;/code&gt; function, like this&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;)\nEnter a number: &lt;span class=&quot;hljs-number&quot;&gt;777&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data\n&lt;span class=&quot;hljs-number&quot;&gt;511&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;)\nEnter a number: FFFF\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data\n&lt;span class=&quot;hljs-number&quot;&gt;65535&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;), &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;)\nEnter a number: &lt;span class=&quot;hljs-number&quot;&gt;10101010101&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data\n&lt;span class=&quot;hljs-number&quot;&gt;1365&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The second parameter tells what is the base of the numbers entered and then internally it understands and converts it. If the entered data is wrong it will throw a &lt;code&gt;ValueError&lt;/code&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; data = int(input(&quot;Enter a number: &quot;), 2)\nEnter a number: 1234\nTraceback (most recent call last):\n  File &quot;&amp;lt;input&amp;gt;&quot;, line 1, in &amp;lt;module&amp;gt;\nValueError: invalid literal for int() with base 2: &apos;1234&apos;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For values that can have a fractional component, the type would be &lt;code&gt;float&lt;/code&gt; rather than &lt;code&gt;int&lt;/code&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;x = &lt;span class=&quot;hljs-built_in&quot;&gt;float&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number:&quot;&lt;/span&gt;))\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;Differences between Python 2 and 3&lt;/h3&gt;\n&lt;p&gt;&lt;strong&gt;Summary&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Python 2&apos;s &lt;code&gt;input&lt;/code&gt; function evaluated the received data, converting it to an integer implicitly (read the next section to understand the implication), but Python 3&apos;s &lt;code&gt;input&lt;/code&gt; function does not do that anymore.&lt;/li&gt;\n&lt;li&gt;Python 2&apos;s equivalent of Python 3&apos;s &lt;code&gt;input&lt;/code&gt; is the &lt;code&gt;raw_input&lt;/code&gt; function.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Python 2.x&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;There were two functions to get user input, called &lt;a href=&quot;https://docs.python.org/2/library/functions.html#input&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;input&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://docs.python.org/2/library/functions.html#raw_input&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;raw_input&lt;/code&gt;&lt;/a&gt;. The difference between them is, &lt;code&gt;raw_input&lt;/code&gt; doesn&apos;t evaluate the data and returns as it is, in string form. But, &lt;code&gt;input&lt;/code&gt; will evaluate whatever you entered and the result of evaluation will be returned. For example,&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; sys\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;sys.version\n&lt;span class=&quot;hljs-string&quot;&gt;&apos;2.7.6 (default, Mar 22 2014, 22:59:56) \\n[GCC 4.8.2]&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data = &lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;)\nEnter a number: &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;17&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data, &lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;(data)\n(&lt;span class=&quot;hljs-number&quot;&gt;22&lt;/span&gt;, &amp;lt;&lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;int&apos;&lt;/span&gt;&amp;gt;)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The data &lt;code&gt;5 + 17&lt;/code&gt; is evaluated and the result is &lt;code&gt;22&lt;/code&gt;. When it evaluates the expression &lt;code&gt;5 + 17&lt;/code&gt;, it detects that you are adding two numbers and so the result will also be of the same &lt;code&gt;int&lt;/code&gt; type. So, the type conversion is done for free and &lt;code&gt;22&lt;/code&gt; is returned as the result of &lt;code&gt;input&lt;/code&gt; and stored in &lt;code&gt;data&lt;/code&gt; variable. You can think of &lt;code&gt;input&lt;/code&gt; as the &lt;code&gt;raw_input&lt;/code&gt; composed with an &lt;a href=&quot;https://docs.python.org/2/library/functions.html#eval&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;eval&lt;/code&gt;&lt;/a&gt; call.&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data = &lt;span class=&quot;hljs-built_in&quot;&gt;eval&lt;/span&gt;(raw_input(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;))\nEnter a number: &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;17&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data, &lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;(data)\n(&lt;span class=&quot;hljs-number&quot;&gt;22&lt;/span&gt;, &amp;lt;&lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;int&apos;&lt;/span&gt;&amp;gt;)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; you should be careful when you are using &lt;code&gt;input&lt;/code&gt; in Python 2.x. I explained why one should be careful when using it, in &lt;a href=&quot;https://stackoverflow.com/a/21122817/1903116&quot;&gt;this answer&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;But, &lt;code&gt;raw_input&lt;/code&gt; doesn&apos;t evaluate the input and returns as it is, as a string.&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; sys\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;sys.version\n&lt;span class=&quot;hljs-string&quot;&gt;&apos;2.7.6 (default, Mar 22 2014, 22:59:56) \\n[GCC 4.8.2]&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data = raw_input(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;)\nEnter a number: &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;17&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data, &lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;(data)\n(&lt;span class=&quot;hljs-string&quot;&gt;&apos;5 + 17&apos;&lt;/span&gt;, &amp;lt;&lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;str&apos;&lt;/span&gt;&amp;gt;)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;Python 3.x&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Python 3.x&apos;s &lt;a href=&quot;https://docs.python.org/3/library/functions.html#input&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;input&lt;/code&gt;&lt;/a&gt; and Python 2.x&apos;s &lt;code&gt;raw_input&lt;/code&gt; are similar and &lt;code&gt;raw_input&lt;/code&gt; is not available in Python 3.x.&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; sys\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;sys.version\n&lt;span class=&quot;hljs-string&quot;&gt;&apos;3.4.0 (default, Apr 11 2014, 13:05:11) \\n[GCC 4.8.2]&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data = &lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;)\nEnter a number: &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;17&lt;/span&gt;\n&lt;span class=&quot;hljs-meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;data, &lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;(data)\n(&lt;span class=&quot;hljs-string&quot;&gt;&apos;5 + 17&apos;&lt;/span&gt;, &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;str&apos;&lt;/span&gt;&amp;gt;)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;In Python 3.x, &lt;code&gt;raw_input&lt;/code&gt; was renamed to &lt;code&gt;input&lt;/code&gt; and the Python 2.x &lt;code&gt;input&lt;/code&gt; was removed.  &lt;/p&gt;\n\n&lt;p&gt;This means that, just like &lt;code&gt;raw_input&lt;/code&gt;, &lt;a href=&quot;http://docs.python.org/3/library/functions.html#input&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;input&lt;/code&gt;&lt;/a&gt; in Python 3.x always returns a string object.&lt;/p&gt;\n\n&lt;p&gt;To fix the problem, you need to explicitly make those inputs into integers by putting them in &lt;a href=&quot;http://docs.python.org/3/library/functions.html#int&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;int&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;x = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;))\ny = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;))\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;For multiple integer in a single line, &lt;a href=&quot;https://docs.python.org/library/functions.html#map&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;map&lt;/code&gt;&lt;/a&gt; might be better.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;arr = &lt;span class=&quot;hljs-built_in&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;, raw_input().split())\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If the number is already known, (like 2 integers), you can use&lt;/p&gt;\n\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;num1, num2 = &lt;span class=&quot;hljs-built_in&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;, raw_input().split())\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;code&gt;input()&lt;/code&gt; (Python 3) and &lt;code&gt;raw_input()&lt;/code&gt; (Python 2) &lt;em&gt;always&lt;/em&gt; return strings. Convert the result to integer explicitly with &lt;code&gt;int()&lt;/code&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;x = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;))\ny = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter a number: &quot;&lt;/span&gt;))\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Multiple questions require multiple integers to be entered on a single line. The best way is to enter the entire string of numbers line by line and split them into integers. Here is the Python 3 version:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;a = []\np = &lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;()\np = p.split()      \n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; p:\n    a.append(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(i))\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;You can also use list comprehensions:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;p = &lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;().split(&lt;span class=&quot;hljs-string&quot;&gt;&quot;whatever the seperator is&quot;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;To convert all input from string to int we do the following:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;x = [&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(i) &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; p]\n&lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt;(x, end=&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;List elements should be printed in straight lines.&lt;/p&gt;\n    ","\n&lt;p&gt;Convert to integers:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;my_number = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;enter the number&quot;&lt;/span&gt;))\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Similarly for floating point numbers:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;my_decimalnumber = &lt;span class=&quot;hljs-built_in&quot;&gt;float&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;enter the number&quot;&lt;/span&gt;))\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;n=&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;())\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;range&lt;/span&gt;(n):\n    n=&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;()\n    n=&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(n)\n    arr1=&lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;,&lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;().split()))\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;the for loop shall run &apos;n&apos; number of times . the second &apos;n&apos; is the length of the array.\nthe last statement maps the integers to a list and takes input in space separated form .\nyou can also return the array at the end of for loop.&lt;/p&gt;\n    ","\n&lt;p&gt;I encountered a problem of taking integer input while solving a problem on &lt;a href=&quot;http://www.codechef.com/problems/TLG&quot; rel=&quot;nofollow noreferrer&quot;&gt;CodeChef&lt;/a&gt;, where two integers - separated by space - should be read from one line.&lt;/p&gt;\n&lt;p&gt;While &lt;code&gt;int(input())&lt;/code&gt; is sufficient for a single integer, I did not find a direct way to input two integers.  I tried this:&lt;/p&gt;\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;num = &lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;()\nnum1 = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\nnum2 = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;range&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;len&lt;/span&gt;(num)):\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; num[i] == &lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;:\n        &lt;span class=&quot;hljs-keyword&quot;&gt;break&lt;/span&gt;\n\nnum1 = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(num[:i])\nnum2 = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(num[i+&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;:])\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Now I use &lt;code&gt;num1&lt;/code&gt; and &lt;code&gt;num2&lt;/code&gt; as integers.&lt;/p&gt;\n    ","\n&lt;pre class=&quot;lang-py s-code-block&quot;&gt;&lt;code class=&quot;hljs language-python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;dbz&lt;/span&gt;():\n    &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;:\n        r = raw_input(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter number:&quot;&lt;/span&gt;)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; r.isdigit():\n            i = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(raw_input(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter divident:&quot;&lt;/span&gt;))\n            d = &lt;span class=&quot;hljs-built_in&quot;&gt;int&lt;/span&gt;(r)/i\n            &lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;O/p is -:&quot;&lt;/span&gt;,d\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;:\n            &lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Not a number&quot;&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;except&lt;/span&gt; Exception ,e:\n        &lt;span class=&quot;hljs-built_in&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Program halted incorrect data entered&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt;(e)\ndbz()\n\nOr \n\nnum = &lt;span class=&quot;hljs-built_in&quot;&gt;input&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter Number:&quot;&lt;/span&gt;)&lt;span class=&quot;hljs-comment&quot;&gt;#&quot;input&quot; will accept only numbers&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;While in your example, &lt;code&gt;int(input(...))&lt;/code&gt; does the trick in any case, &lt;code&gt;python-future&lt;/code&gt;&apos;s &lt;a href=&quot;http://python-future.org/compatible_idioms.html#input&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;builtins.input&lt;/code&gt;&lt;/a&gt; is worth consideration since that makes sure your code works for both Python 2 and 3 &lt;em&gt;and&lt;/em&gt; disables Python2&apos;s default behaviour of &lt;code&gt;input&lt;/code&gt; trying to be &quot;clever&quot; about the input data type (&lt;code&gt;builtins.input&lt;/code&gt; basically just behaves like &lt;code&gt;raw_input&lt;/code&gt;).&lt;/p&gt;\n    "],"78":["\n&lt;p&gt;&quot;Slicing&quot; is where you assign an object of a derived class to an instance of a base class, thereby losing part of the information - some of it is &quot;sliced&quot; away.&lt;/p&gt;\n\n&lt;p&gt;For example, &lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;A&lt;/span&gt; {\n   &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; foo;\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;B&lt;/span&gt; : &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; A {\n   &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; bar;\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So an object of type &lt;code&gt;B&lt;/code&gt; has two data members, &lt;code&gt;foo&lt;/code&gt; and &lt;code&gt;bar&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;Then if you were to write this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;B b;\n\nA a = b;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then the information in &lt;code&gt;b&lt;/code&gt; about member &lt;code&gt;bar&lt;/code&gt; is lost in &lt;code&gt;a&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;Most answers here fail to explain what the actual problem with slicing is. They only explain the benign cases of slicing, not the treacherous ones. Assume, like the other answers, that you&apos;re dealing with two classes &lt;code&gt;A&lt;/code&gt; and &lt;code&gt;B&lt;/code&gt;, where &lt;code&gt;B&lt;/code&gt; derives (publicly) from &lt;code&gt;A&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;In this situation, C++ lets you pass an instance of &lt;code&gt;B&lt;/code&gt; to  &lt;code&gt;A&lt;/code&gt;&apos;s assignment operator (and also to the copy constructor). This works because an instance of &lt;code&gt;B&lt;/code&gt; can be converted to a &lt;code&gt;const A&amp;amp;&lt;/code&gt;, which is what assignment operators and copy-constructors expect their arguments to be.&lt;/p&gt;\n\n&lt;h3&gt;The benign case&lt;/h3&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;B b;\nA a = b;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Nothing bad happens there - you asked for an instance of &lt;code&gt;A&lt;/code&gt; which is a copy of &lt;code&gt;B&lt;/code&gt;, and that&apos;s exactly what you get. Sure, &lt;code&gt;a&lt;/code&gt; won&apos;t contain some of &lt;code&gt;b&lt;/code&gt;&apos;s members, but how should it? It&apos;s an &lt;code&gt;A&lt;/code&gt;, after all, not a &lt;code&gt;B&lt;/code&gt;, so it hasn&apos;t even &lt;em&gt;heard&lt;/em&gt; about these members, let alone would be able to store them.&lt;/p&gt;\n\n&lt;h3&gt;The treacherous case&lt;/h3&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;B b1;\nB b2;\nA&amp;amp; a_ref = b2;\na_ref = b1;\n&lt;span class=&quot;hljs-comment&quot;&gt;//b2 now contains a mixture of b1 and b2!&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You might think that &lt;code&gt;b2&lt;/code&gt; will be a copy of &lt;code&gt;b1&lt;/code&gt; afterward. But, alas, it&apos;s &lt;strong&gt;not&lt;/strong&gt;! If you inspect it, you&apos;ll discover that &lt;code&gt;b2&lt;/code&gt; is a Frankensteinian creature, made from some chunks of &lt;code&gt;b1&lt;/code&gt; (the chunks that &lt;code&gt;B&lt;/code&gt; inherits from &lt;code&gt;A&lt;/code&gt;), and some chunks of &lt;code&gt;b2&lt;/code&gt; (the chunks that only &lt;code&gt;B&lt;/code&gt; contains). Ouch!&lt;/p&gt;\n\n&lt;p&gt;What happened? Well, C++ by default doesn&apos;t treat assignment operators as &lt;code&gt;virtual&lt;/code&gt;. Thus, the line &lt;code&gt;a_ref = b1&lt;/code&gt; will call the assignment operator of &lt;code&gt;A&lt;/code&gt;, not that of &lt;code&gt;B&lt;/code&gt;. This is because, for non-virtual functions, the &lt;strong&gt;declared&lt;/strong&gt; (formally: &lt;em&gt;static&lt;/em&gt;) type (which is &lt;code&gt;A&amp;amp;&lt;/code&gt;) determines which function is called, as opposed to the &lt;strong&gt;actual&lt;/strong&gt; (formally: &lt;em&gt;dynamic&lt;/em&gt;) type (which would be &lt;code&gt;B&lt;/code&gt;, since &lt;code&gt;a_ref&lt;/code&gt; references an instance of &lt;code&gt;B&lt;/code&gt;). Now, &lt;code&gt;A&lt;/code&gt;&apos;s assignment operator obviously knows only about the members declared in &lt;code&gt;A&lt;/code&gt;, so it will copy only those, leaving the members added in &lt;code&gt;B&lt;/code&gt; unchanged.&lt;/p&gt;\n\n&lt;h3&gt;A solution&lt;/h3&gt;\n\n&lt;p&gt;Assigning only to parts of an object usually makes little sense, yet C++, unfortunately, provides no built-in way to forbid this. You can, however, roll your own. The first step is making the assignment operator &lt;em&gt;virtual&lt;/em&gt;. This will guarantee that it&apos;s always the &lt;strong&gt;actual&lt;/strong&gt; type&apos;s assignment operator which is called, not the &lt;strong&gt;declared&lt;/strong&gt; type&apos;s. The second step is to use &lt;code&gt;dynamic_cast&lt;/code&gt; to verify that the assigned object has a compatible type. The third step is to do the actual assignment in a (protected!) member &lt;code&gt;assign()&lt;/code&gt;, since &lt;code&gt;B&lt;/code&gt;&apos;s &lt;code&gt;assign()&lt;/code&gt; will probably want to use &lt;code&gt;A&lt;/code&gt;&apos;s &lt;code&gt;assign()&lt;/code&gt; to copy &lt;code&gt;A&lt;/code&gt;&apos;s, members.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;A&lt;/span&gt; {\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n  &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; A&amp;amp; &lt;span class=&quot;hljs-keyword&quot;&gt;operator&lt;/span&gt;= (&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; A&amp;amp; a) {\n    &lt;span class=&quot;hljs-built_in&quot;&gt;assign&lt;/span&gt;(a);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; *&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;;\n  }\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt;:\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; A&amp;amp; a)&lt;/span&gt; &lt;/span&gt;{\n    &lt;span class=&quot;hljs-comment&quot;&gt;// copy members of A from a to this&lt;/span&gt;\n  }\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;B&lt;/span&gt; : &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; A {\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n  &lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; B&amp;amp; &lt;span class=&quot;hljs-keyword&quot;&gt;operator&lt;/span&gt;= (&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; A&amp;amp; a) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; B* b = &lt;span class=&quot;hljs-built_in&quot;&gt;dynamic_cast&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; B*&amp;gt;(&amp;amp;a))\n      &lt;span class=&quot;hljs-built_in&quot;&gt;assign&lt;/span&gt;(*b);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;bad_assignment&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; *&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;;\n  }\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;protected&lt;/span&gt;:\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; B&amp;amp; b)&lt;/span&gt; &lt;/span&gt;{\n    A::&lt;span class=&quot;hljs-built_in&quot;&gt;assign&lt;/span&gt;(b); &lt;span class=&quot;hljs-comment&quot;&gt;// Let A&apos;s assign() copy members of A from b to this&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// copy members of B from b to this&lt;/span&gt;\n  }\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note that, for pure convenience, &lt;code&gt;B&lt;/code&gt;&apos;s &lt;code&gt;operator=&lt;/code&gt; covariantly overrides the return type, since it &lt;strong&gt;knows&lt;/strong&gt; that it&apos;s returning an instance of &lt;code&gt;B&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;If You have a base class &lt;code&gt;A&lt;/code&gt; and a derived class &lt;code&gt;B&lt;/code&gt;, then You can do the following.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;wantAnA&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(A myA)&lt;/span&gt;\n&lt;/span&gt;{\n   &lt;span class=&quot;hljs-comment&quot;&gt;// work with myA&lt;/span&gt;\n}\n\nB derived;\n&lt;span class=&quot;hljs-comment&quot;&gt;// work with the object &quot;derived&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;wantAnA&lt;/span&gt;(derived);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now the method &lt;code&gt;wantAnA&lt;/code&gt; needs a copy of &lt;code&gt;derived&lt;/code&gt;. However, the object &lt;code&gt;derived&lt;/code&gt; cannot be copied completely, as the class &lt;code&gt;B&lt;/code&gt; could invent additional member variables which are not in its base class &lt;code&gt;A&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;Therefore, to call &lt;code&gt;wantAnA&lt;/code&gt;, the compiler will &quot;slice off&quot; all additional members of the derived class. The result might be an object you did not want to create, because&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;it may be incomplete,&lt;/li&gt;\n&lt;li&gt;it behaves like an &lt;code&gt;A&lt;/code&gt;-object (all special behaviour of the class &lt;code&gt;B&lt;/code&gt; is lost).&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;These are all good answers. I would just like to add an execution example when passing objects by value vs by reference:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Base class&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;A&lt;/span&gt; {\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-built_in&quot;&gt;A&lt;/span&gt;() {}\n    &lt;span class=&quot;hljs-built_in&quot;&gt;A&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; A&amp;amp; a) {\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;A&apos; copy constructor&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl;\n    }\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;/span&gt;{ cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;I am an &apos;A&apos;&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl; }\n};\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Derived class&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;B&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; A {\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;():&lt;span class=&quot;hljs-built_in&quot;&gt;A&lt;/span&gt;() {}\n    &lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; B&amp;amp; a):&lt;span class=&quot;hljs-built_in&quot;&gt;A&lt;/span&gt;(a) {\n        cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;B&apos; copy constructor&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl;\n    }\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; &lt;/span&gt;{ cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;I am a &apos;B&apos;&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl; }\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; A &amp;amp; a)&lt;/span&gt; &lt;/span&gt;{\n    a.&lt;span class=&quot;hljs-built_in&quot;&gt;run&lt;/span&gt;();\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; A a)&lt;/span&gt; &lt;/span&gt;{\n    a.&lt;span class=&quot;hljs-built_in&quot;&gt;run&lt;/span&gt;();\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{\n    cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Call by reference&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;g&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;());\n    cout &amp;lt;&amp;lt; endl &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Call by copy&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;h&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;());\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The output is:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;Call by reference\nI am a &lt;span class=&quot;hljs-string&quot;&gt;&apos;B&apos;&lt;/span&gt;\n\nCall by copy\n&lt;span class=&quot;hljs-string&quot;&gt;&apos;A&apos;&lt;/span&gt; copy constructor\nI am an &lt;span class=&quot;hljs-string&quot;&gt;&apos;A&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Third match in google for &quot;C++ slicing&quot; gives me this Wikipedia article &lt;a href=&quot;http://en.wikipedia.org/wiki/Object_slicing&quot; rel=&quot;noreferrer&quot;&gt;http://en.wikipedia.org/wiki/Object_slicing&lt;/a&gt; and this (heated, but the first few posts define the problem) : &lt;a href=&quot;http://bytes.com/forum/thread163565.html&quot; rel=&quot;noreferrer&quot;&gt;http://bytes.com/forum/thread163565.html&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;So it&apos;s when you assign an object of a subclass to the super class. The superclass knows nothing of the additional information in the subclass, and hasn&apos;t got room to store it, so the additional information gets &quot;sliced off&quot;.&lt;/p&gt;\n\n&lt;p&gt;If those links don&apos;t give enough info for a &quot;good answer&quot; please edit your question to let us know what more you&apos;re looking for.&lt;/p&gt;\n    ","\n&lt;p&gt;The slicing problem is serious because it can result in memory corruption, and it is very difficult to guarantee a program does not suffer from it. To design it out of the language, classes that support inheritance should be accessible by reference only (not by value). The D programming language has this property.&lt;/p&gt;\n\n&lt;p&gt;Consider class A, and class B derived from A. Memory corruption can happen if the A part has a pointer p, and a B instance that points p to B&apos;s additional data. Then, when the additional data gets sliced off, p is pointing to garbage.&lt;/p&gt;\n    ","\n&lt;p&gt;In C++, a derived class object can be assigned to a base class object, but the other way is not possible.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Base&lt;/span&gt; { &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; x, y; };\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Derived&lt;/span&gt; : &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Base { &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; z, w; };\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; \n&lt;/span&gt;{\n    Derived d;\n    Base b = d; &lt;span class=&quot;hljs-comment&quot;&gt;// Object Slicing,  z and w of d are sliced off&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Object slicing happens when a derived class object is assigned to a base class object, additional attributes of a derived class object are sliced off to form the base class object.&lt;/p&gt;\n    ","\n&lt;p&gt;I see all the answers mention when object slicing happens when data members are sliced. Here I give an example that the methods are not overridden:&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;A&lt;/span&gt;{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Say&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;{\n        std::cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;I am A&quot;&lt;/span&gt;&amp;lt;&amp;lt;std::endl;\n    }\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;B&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; A{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Say&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;override&lt;/span&gt;&lt;/span&gt;{\n        std::cout&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;I am B&quot;&lt;/span&gt;&amp;lt;&amp;lt;std::endl;\n    }\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;{\n   B b;\n   A a1;\n   A a2=b;\n\n   b.&lt;span class=&quot;hljs-built_in&quot;&gt;Say&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// I am B&lt;/span&gt;\n   a1.&lt;span class=&quot;hljs-built_in&quot;&gt;Say&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// I am A&lt;/span&gt;\n   a2.&lt;span class=&quot;hljs-built_in&quot;&gt;Say&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// I am A   why???&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;B (object b) is derived from A (object a1 and a2). b and a1, as we expect, call their member function. But from polymorphism viewpoint we dont expect a2, which is assigned by b, to not be overridden. Basically, a2 only saves A-class part of b and that is object slicing in C++.&lt;/p&gt;\n&lt;p&gt;To solve this problem, a reference or pointer should be used&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt; A&amp;amp; a2=b;\n a2.&lt;span class=&quot;hljs-built_in&quot;&gt;Say&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// I am B&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;or&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;A* a2 = &amp;amp;b;\na2-&amp;gt;&lt;span class=&quot;hljs-built_in&quot;&gt;Say&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// I am B&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;So ... Why is losing the derived information bad? ... because the author of the derived class may have changed the representation such that slicing off the extra information changes the value being represented by the object.  This can happen if the derived class if used to cache a representation that is more efficient for certain operations, but expensive to transform back to the base representation.&lt;/p&gt;\n\n&lt;p&gt;Also thought someone should also mention what you should do to avoid slicing...\nGet a copy of C++ Coding Standards, 101 rules guidlines, and best practices.  Dealing with slicing is #54.&lt;/p&gt;\n\n&lt;p&gt;It suggests a somewhat sophisticated pattern to fully deal with the issue:  have a protected copy constructor, a protected pure virtual DoClone, and a public Clone with an assert which will tell you if a (further) derived class failed to implement DoClone correctly.  (The Clone method makes a proper deep copy of the polymorphic object.)&lt;/p&gt;\n\n&lt;p&gt;You can also mark the copy constructor on the base explicit which allows for explicit slicing if it is desired.&lt;/p&gt;\n    ","\n&lt;p&gt;The slicing problem in C++ arises from the value semantics of its objects, which remained mostly due to compatibility with C structs. You need to use explicit reference or pointer syntax to achieve &quot;normal&quot; object behavior found in most other languages that do objects, i.e., objects are always passed around by reference.&lt;/p&gt;\n\n&lt;p&gt;The short answers is that you slice the object by assigning a derived object to a base object &lt;em&gt;by value&lt;/em&gt;, i.e. the remaining object is only a part of the derived object. In order to preserve value semantics, slicing is a reasonable behavior and has its relatively rare uses, which doesn&apos;t exist in most other languages. Some people consider it a feature of C++, while many considered it one of the quirks/misfeatures of C++.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;1. THE DEFINITION OF SLICING PROBLEM&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;If D is a derived class of the base class B, then you can assign an object of type Derived to a variable (or parameter) of type Base. &lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;EXAMPLE&lt;/em&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Pet&lt;/span&gt;\n{\n &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    string name;\n};\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Dog&lt;/span&gt; : &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Pet\n{\n&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n    string breed;\n};\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{   \n    Dog dog;\n    Pet pet;\n\n    dog.name = &lt;span class=&quot;hljs-string&quot;&gt;&quot;Tommy&quot;&lt;/span&gt;;\n    dog.breed = &lt;span class=&quot;hljs-string&quot;&gt;&quot;Kangal Dog&quot;&lt;/span&gt;;\n    pet = dog;\n    cout &amp;lt;&amp;lt; pet.breed; &lt;span class=&quot;hljs-comment&quot;&gt;//ERROR&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Although the above assignment is allowed, the value that is assigned to the variable pet loses its breed field. This is called the &lt;strong&gt;slicing problem&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;2. HOW TO FIX THE SLICING PROBLEM&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;To defeat the problem, we use pointers to dynamic variables.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;EXAMPLE&lt;/em&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;Pet *ptrP;\nDog *ptrD;\nptrD = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; Dog;         \nptrD-&amp;gt;name = &lt;span class=&quot;hljs-string&quot;&gt;&quot;Tommy&quot;&lt;/span&gt;;\nptrD-&amp;gt;breed = &lt;span class=&quot;hljs-string&quot;&gt;&quot;Kangal Dog&quot;&lt;/span&gt;;\nptrP = ptrD;\ncout &amp;lt;&amp;lt; ((Dog *)ptrP)-&amp;gt;breed; \n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;In this case, none of the data members or member functions of the dynamic variable\nbeing pointed to by ptrD (descendant class object) will be lost. In addition,  if you need to use functions, the function must be a virtual function.&lt;/p&gt;\n    ","\n&lt;p&gt;It seems to me, that slicing isn&apos;t so much a problem other than when your own classes and program are poorly architected/designed.&lt;/p&gt;\n\n&lt;p&gt;If I pass a subclass object in as a parameter to a method, which takes a parameter of type superclass, I should certainly be aware of that and know the internally, the called method will be working with the superclass (aka baseclass) object only.&lt;/p&gt;\n\n&lt;p&gt;It seems to me only the unreasonable expectation that providing a subclass where a baseclass is requested, would somehow result in subclass specific results, would cause slicing to be a problem.  Its either poor design in the use of the method or a poor subclass implementation.  I&apos;m guessing its usually the result of sacrificing good OOP design in favor of expediency or performance gains.&lt;/p&gt;\n    ","\n&lt;p&gt;OK, I&apos;ll give it a try after reading many posts explaining object slicing but not how it becomes problematic. &lt;/p&gt;\n\n&lt;p&gt;The vicious scenario that can result in memory corruption is the following:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Class provides (accidentally, possibly compiler-generated) assignment on a polymorphic base class.&lt;/li&gt;\n&lt;li&gt;Client copies and slices an instance of a derived class.&lt;/li&gt;\n&lt;li&gt;Client calls a virtual member function that accesses the sliced-off state.&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;Slicing means that the data added by a subclass are discarded when an object of the subclass is passed or returned by value or from a function expecting a base class object.    &lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Explanation:&lt;/strong&gt;\nConsider the following class declaration:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;           &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;baseclass&lt;/span&gt;\n          {\n                 ...\n                 baseclass &amp;amp; &lt;span class=&quot;hljs-keyword&quot;&gt;operator&lt;/span&gt; =(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; baseclass&amp;amp;);\n                 &lt;span class=&quot;hljs-built_in&quot;&gt;baseclass&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;const&lt;/span&gt; baseclass&amp;amp;);\n          }\n          &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( )&lt;/span&gt;\n          &lt;/span&gt;{\n                baseclass obj1=m;\n                obj1=m;\n          }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;As baseclass copy functions don&apos;t know anything about the derived only the base part of the derived is copied. This is commonly referred to as slicing. &lt;/p&gt;\n    ","\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;A&lt;/span&gt; \n{ \n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; x; \n};  \n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;B&lt;/span&gt; \n{ \n    &lt;span class=&quot;hljs-built_in&quot;&gt;B&lt;/span&gt;( ) : &lt;span class=&quot;hljs-built_in&quot;&gt;x&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;), &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;) { } \n    &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; x; \n    &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; c; \n};  \n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;( )&lt;/span&gt; \n&lt;/span&gt;{ \n    A a; \n    B b; \n    a = b;     &lt;span class=&quot;hljs-comment&quot;&gt;// b.c == &apos;a&apos; is &quot;sliced&quot; off&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; \n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;when a derived class object is assigned to a base class object, additional attributes of a derived class object are sliced off (discard)  form the base class object.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Base&lt;/span&gt; { \n&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; x;\n };\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Derived&lt;/span&gt; : &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Base { \n &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; z; \n };\n\n &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; \n&lt;/span&gt;{\nDerived d;\nBase b = d; &lt;span class=&quot;hljs-comment&quot;&gt;// Object Slicing,  z of d is sliced off&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;When a Derived class Object is assigned to Base class Object, all the members of derived class object is copied to base class object except the members which are not present in the base class. These members are Sliced away by the compiler.\nThis is called Object Slicing.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Here is an Example:&lt;/strong&gt; &lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;bits/stdc++.h&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;namespace&lt;/span&gt; std;\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Base&lt;/span&gt;\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n        &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; a;\n        &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; b;\n        &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; c;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;Base&lt;/span&gt;()\n        {\n            a=&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;;\n            b=&lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;;\n            c=&lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;;\n        }\n};\n&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Derived&lt;/span&gt; : &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; Base\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt;:\n        &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; d;\n        &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; e;\n        &lt;span class=&quot;hljs-built_in&quot;&gt;Derived&lt;/span&gt;()\n        {\n            d=&lt;span class=&quot;hljs-number&quot;&gt;40&lt;/span&gt;;\n            e=&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;;\n        }\n};\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n    Derived d;\n    cout&amp;lt;&amp;lt;d.a&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    cout&amp;lt;&amp;lt;d.b&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    cout&amp;lt;&amp;lt;d.c&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    cout&amp;lt;&amp;lt;d.d&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    cout&amp;lt;&amp;lt;d.e&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n\n\n    Base b = d;\n    cout&amp;lt;&amp;lt;b.a&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    cout&amp;lt;&amp;lt;b.b&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    cout&amp;lt;&amp;lt;b.c&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    cout&amp;lt;&amp;lt;b.d&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    cout&amp;lt;&amp;lt;b.e&amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;It will generate:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;[Error] &lt;span class=&quot;hljs-string&quot;&gt;&apos;class Base&apos;&lt;/span&gt; has no member named &lt;span class=&quot;hljs-string&quot;&gt;&apos;d&apos;&lt;/span&gt;\n[Error] &lt;span class=&quot;hljs-string&quot;&gt;&apos;class Base&apos;&lt;/span&gt; has no member named &lt;span class=&quot;hljs-string&quot;&gt;&apos;e&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I just ran across the slicing problem and promptly landed here. So let me add my two cents to this.&lt;/p&gt;\n\n&lt;p&gt;Let&apos;s have an example from &quot;production code&quot; (or something that comes kind of close):&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Let&apos;s say we have something that dispatches actions. A control center UI for example.&lt;br&gt;\nThis UI needs to get a list of things that are currently able to be dispatched. So we define a class that contains the dispatch-information. Let&apos;s call it &lt;code&gt;Action&lt;/code&gt;. So an &lt;code&gt;Action&lt;/code&gt; has some member variables. For simplicity we just have 2, being a &lt;code&gt;std::string name&lt;/code&gt; and a &lt;code&gt;std::function&amp;lt;void()&amp;gt; f&lt;/code&gt;. Then it has an &lt;code&gt;void activate()&lt;/code&gt; which just executes the &lt;code&gt;f&lt;/code&gt; member.&lt;/p&gt;\n\n&lt;p&gt;So the UI gets a &lt;code&gt;std::vector&amp;lt;Action&amp;gt;&lt;/code&gt; supplied. Imagine some functions like:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;push_back&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Action toAdd)&lt;/span&gt;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Now we have established how it looks from the UI&apos;s perspective. No problem so far. But some other guy who works on this project suddenly decides that there are specialized actions that need more information in the &lt;code&gt;Action&lt;/code&gt; object. For what reason ever. That could also be solved with lambda captures.  This example is not taken 1-1 from the code.&lt;/p&gt;\n\n&lt;p&gt;So the guy derives from &lt;code&gt;Action&lt;/code&gt; to add his own flavour.&lt;br&gt;\nHe passes an instance of his home-brewed class to the &lt;code&gt;push_back&lt;/code&gt; but then the program goes haywire.&lt;/p&gt;\n\n&lt;p&gt;So what happened?&lt;br&gt;\nAs you &lt;em&gt;might&lt;/em&gt; have guessed: the object has been sliced.&lt;/p&gt;\n\n&lt;p&gt;The extra information from the instance has been lost, and &lt;code&gt;f&lt;/code&gt; is now prone to undefined behaviour.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;I hope this example brings light about for those people who can&apos;t really imagine things when talking about &lt;code&gt;A&lt;/code&gt;s and &lt;code&gt;B&lt;/code&gt;s being derived in some manner.&lt;/p&gt;\n    "],"79":["\n&lt;p&gt;Sure the code does work, but I&apos;m pretty sure it doesn&apos;t do what you expect it to do. It just fires off multiple asynchronous calls, but the &lt;code&gt;printFiles&lt;/code&gt; function does immediately return after that.&lt;/p&gt;\n\n&lt;h3&gt;Reading in sequence&lt;/h3&gt;\n\n&lt;p&gt;If you want to read the files in sequence, &lt;strong&gt;you cannot use &lt;code&gt;forEach&lt;/code&gt;&lt;/strong&gt; indeed. Just use a modern &lt;code&gt;for  of&lt;/code&gt; loop instead, in which &lt;code&gt;await&lt;/code&gt; will work as expected:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; () {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; file &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; files) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents);\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h3&gt;Reading in parallel&lt;/h3&gt;\n\n&lt;p&gt;If you want to read the files in parallel, &lt;strong&gt;you cannot use &lt;code&gt;forEach&lt;/code&gt;&lt;/strong&gt; indeed. Each of the &lt;code&gt;async&lt;/code&gt; callback function calls does return a promise, but you&apos;re throwing them away instead of awaiting them. Just use &lt;code&gt;map&lt;/code&gt; instead, and you can await the array of promises that you&apos;ll get with &lt;code&gt;Promise.all&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; () {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(files.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (file) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;)\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents)\n  }));\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;With ES2018, you are able to greatly simplify all of the above answers to:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; () {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;()\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; files.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt; =&amp;gt;&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;))) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents)\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;See spec: &lt;a href=&quot;https://github.com/tc39/proposal-async-iteration&quot; rel=&quot;noreferrer&quot;&gt;proposal-async-iteration&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Simplified:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; results &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; array) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;longRunningTask&lt;/span&gt;()\n  }\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;I will wait&apos;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;2018-09-10: This answer has been getting a lot of attention recently, please see &lt;a href=&quot;http://2ality.com/2016/10/asynchronous-iteration.html&quot; rel=&quot;noreferrer&quot;&gt;Axel Rauschmayer&apos;s blog post&lt;/a&gt; for further information about asynchronous iteration.&lt;/p&gt;\n    ","\n\n\n&lt;p&gt;Instead of &lt;code&gt;Promise.all&lt;/code&gt; in conjunction with &lt;code&gt;Array.prototype.map&lt;/code&gt; (which does not guarantee the order in which the &lt;code&gt;Promise&lt;/code&gt;s are resolved), I use &lt;code&gt;Array.prototype.reduce&lt;/code&gt;, starting with a resolved &lt;code&gt;Promise&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; () {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; files.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (promise, file) =&amp;gt; {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// This line will wait for the last async function to finish.&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// The first iteration uses an already resolved Promise&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// so, it will immediately continue.&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; promise;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents);\n  }, &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;());\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The &lt;a href=&quot;https://github.com/toniov/p-iteration&quot; rel=&quot;noreferrer&quot;&gt;p-iteration&lt;/a&gt; module on npm implements the Array iteration methods so they can be used in a very straightforward way with async/await.&lt;/p&gt;\n\n&lt;p&gt;An example with your case:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; { forEach } = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;p-iteration&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; fs = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;fs-promise&apos;&lt;/span&gt;);\n\n(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; () {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(files, &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (file) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents);\n  });\n})();\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Here are some &lt;code&gt;forEachAsync&lt;/code&gt; prototypes. Note you&apos;ll need to &lt;code&gt;await&lt;/code&gt; them:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;forEachAsync&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;fn&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; t &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fn&lt;/span&gt;(t) }\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;forEachAsyncParallel&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;fn&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(fn));\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt; while you may include this in your own code, you should not include this in libraries you distribute to others (to avoid polluting their globals).&lt;/p&gt;\n    ","\n&lt;h2&gt;Picture worth 1000 words - For Sequential Approach Only&lt;/h2&gt;\n&lt;hr&gt;\n&lt;p&gt;&lt;strong&gt;Background&lt;/strong&gt; : I was in similar situation last night. I used async function as foreach argument. The result was un-predictable. When I did testing for my code 3 times, it ran without issues 2 times and failed 1 time. (something weird)&lt;/p&gt;\n&lt;p&gt;Finally I got my head around &amp;amp; did some scratch pad testing.&lt;/p&gt;\n&lt;h3&gt;Scenario 1 - How un-sequential it can get with async in foreach&lt;/h3&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/VGXEa.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/VGXEa.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;time&lt;/span&gt;) =&amp;gt; { \n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolve, reject&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {\n      &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`Promise resolved for &lt;span class=&quot;hljs-subst&quot;&gt;${time}&lt;/span&gt;s`&lt;/span&gt;)\n    }, time)\n  })\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; myPromiseArray = [&lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;), &lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;500&lt;/span&gt;), &lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3000&lt;/span&gt;)]\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Before For Each Loop&apos;&lt;/span&gt;)\n\n  myPromiseArray.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (element, index) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; result = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; element;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(result);\n  })\n\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;After For Each Loop&apos;&lt;/span&gt;)\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;Scenario 2 - Using &lt;code&gt;for - of&lt;/code&gt; loop as @Bergi above suggested&lt;/h3&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/QWbRI.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/QWbRI.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;time&lt;/span&gt;) =&amp;gt; { \n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolve, reject&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {\n      &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`Promise resolved for &lt;span class=&quot;hljs-subst&quot;&gt;${time}&lt;/span&gt;s`&lt;/span&gt;)\n    }, time)\n  })\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; myPromiseArray = [&lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;), &lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;500&lt;/span&gt;), &lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3000&lt;/span&gt;)]\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Before For Each Loop&apos;&lt;/span&gt;)\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// AVOID USING THIS&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// myPromiseArray.forEach(async (element, index) =&amp;gt; {&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;//   let result = await element;&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;//   console.log(result);&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// })&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// This works well&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; element &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; myPromiseArray) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; result = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; element;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(result)\n  }\n\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;After For Each Loop&apos;&lt;/span&gt;)\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;If you are little old school like me, you could simply use the classic for loop, that works too :)&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;time&lt;/span&gt;) =&amp;gt; { \n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolve, reject&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {\n      &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`Promise resolved for &lt;span class=&quot;hljs-subst&quot;&gt;${time}&lt;/span&gt;s`&lt;/span&gt;)\n    }, time)\n  })\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; myPromiseArray = [&lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;), &lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;500&lt;/span&gt;), &lt;span class=&quot;hljs-title function_&quot;&gt;getPromise&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3000&lt;/span&gt;)]\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Before For Each Loop&apos;&lt;/span&gt;)\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// AVOID USING THIS&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// myPromiseArray.forEach(async (element, index) =&amp;gt; {&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;//   let result = await element;&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;//   console.log(result);&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// })&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// This works well too - the classic for loop :)&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; myPromiseArray.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; result = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; myPromiseArray[i];\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(result);\n  }\n\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;After For Each Loop&apos;&lt;/span&gt;)\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;I hope this helps someone, good day, cheers!&lt;/p&gt;\n    ","\n&lt;p&gt;@Bergi has already gave the answer on how to handle this particular case properly. I&apos;ll not duplicate here.&lt;/p&gt;\n&lt;p&gt;I&apos;d like to address the difference between using &lt;code&gt;forEach&lt;/code&gt; and &lt;code&gt;for&lt;/code&gt; loop when it comes to &lt;code&gt;async&lt;/code&gt; and &lt;code&gt;await&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;how &lt;code&gt;forEach&lt;/code&gt; works&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Let&apos;s look at how &lt;code&gt;forEach&lt;/code&gt; works. According to &lt;a href=&quot;https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.foreach&quot; rel=&quot;noreferrer&quot;&gt;ECMAScript Specification&lt;/a&gt;, MDN provides an &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#polyfill&quot; rel=&quot;noreferrer&quot;&gt;implementation&lt;/a&gt; which can be used as a polyfill. I copy it and paste here with comments removal.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;forEach&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;callback, thisArg&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt; == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;TypeError&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Array.prototype.forEach called on null or undefined&apos;&lt;/span&gt;); }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; T, k;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; O = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; len = O.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; callback !== &lt;span class=&quot;hljs-string&quot;&gt;&quot;function&quot;&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;TypeError&lt;/span&gt;(callback + &lt;span class=&quot;hljs-string&quot;&gt;&apos; is not a function&apos;&lt;/span&gt;); }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;arguments&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) { T = thisArg; }\n  k = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (k &amp;lt; len) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; kValue;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; O) {\n      kValue = O[k];\n      callback.&lt;span class=&quot;hljs-title function_&quot;&gt;call&lt;/span&gt;(T, kValue, k, O); &lt;span class=&quot;hljs-comment&quot;&gt;// pay attention to this line&lt;/span&gt;\n    }\n    k++;\n  }\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Let&apos;s back to your code, let&apos;s extract the callback as a function.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;callback&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt;){\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;)\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents)\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;So, basically &lt;code&gt;callback&lt;/code&gt; returns a promise since it&apos;s declared with &lt;code&gt;async&lt;/code&gt;. Inside &lt;code&gt;forEach&lt;/code&gt;, &lt;code&gt;callback&lt;/code&gt; is just called in a normal way, if the callback itself returns a promise, the javascript engine will not wait it to be resolved or rejected. Instead, it puts the &lt;code&gt;promise&lt;/code&gt; in a job queue, and continues executing the loop.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;How about &lt;code&gt;await fs.readFile(file, &apos;utf8&apos;)&lt;/code&gt; inside the &lt;code&gt;callback&lt;/code&gt;?&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Basically, when your async &lt;code&gt;callback&lt;/code&gt; gets the chance to be executed, the js engine will pause until &lt;code&gt;fs.readFile(file, &apos;utf8&apos;)&lt;/code&gt; to be resolved or rejected, and resume execution of the async function after fulfillment. So the &lt;code&gt;contents&lt;/code&gt; variable store the actual result from &lt;code&gt;fs.readFile&lt;/code&gt;, not a &lt;code&gt;promise&lt;/code&gt;. So, &lt;code&gt;console.log(contents)&lt;/code&gt; logs out the file content not a &lt;code&gt;Promise&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Why &lt;code&gt;for ... of&lt;/code&gt; works?&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;when we write a generic &lt;code&gt;for of&lt;/code&gt; loop, we gain more control than &lt;code&gt;forEach&lt;/code&gt;. Let&apos;s refactor &lt;code&gt;printFiles&lt;/code&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; () {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// Assume this works fine&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; file &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; files) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;)\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents)\n    &lt;span class=&quot;hljs-comment&quot;&gt;// or await callback(file)&lt;/span&gt;\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;When evaluate &lt;code&gt;for&lt;/code&gt; loop, we have &lt;code&gt;await&lt;/code&gt; promise inside the &lt;code&gt;async&lt;/code&gt; function, the execution will pause until the &lt;code&gt;await&lt;/code&gt; promise is settled. So, you can think of that the files are read one by one in a determined order.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Execute sequentially&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Sometimes, we really need the the async functions to be executed in a sequential order. For example, I have a few new records stored in an array to be saved to database, and I want them to be saved in sequential order which means first record in array should be saved first, then second, until last one is saved.&lt;/p&gt;\n&lt;p&gt;Here is an example:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; records = [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;];\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;saveRecord&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;record&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolved, rejected&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;()=&amp;gt;&lt;/span&gt; {\n      &lt;span class=&quot;hljs-title function_&quot;&gt;resolved&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`record &lt;span class=&quot;hljs-subst&quot;&gt;${record}&lt;/span&gt; saved`&lt;/span&gt;)\n    }, &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;500&lt;/span&gt;)\n  });\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;forEachSaveRecords&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;records&lt;/span&gt;) {\n  records.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (record) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; res = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;saveRecord&lt;/span&gt;(record);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(res);\n  })\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;forofSaveRecords&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;records&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; record &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; records) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; res = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;saveRecord&lt;/span&gt;(record);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(res);\n  }\n}\n(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; () =&amp;gt; {\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;=== for of save records ===&quot;&lt;/span&gt;)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;forofSaveRecords&lt;/span&gt;(records)\n  \n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;=== forEach save records ===&quot;&lt;/span&gt;)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;forEachSaveRecords&lt;/span&gt;(records)\n})()&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;I use &lt;code&gt;setTimeout&lt;/code&gt; to simulate the process of saving a record to database - it&apos;s asynchronous and cost a random time. Using &lt;code&gt;forEach&lt;/code&gt;, the records are saved in an undetermined order, but using &lt;code&gt;for..of&lt;/code&gt;, they are saved sequentially.&lt;/p&gt;\n    ","\n&lt;p&gt;This solution is also memory-optimized so you can run it on 10,000&apos;s of data items and requests. Some of the other solutions here will crash the server on large data sets.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;In TypeScript:&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; asyncForEach&amp;lt;T&amp;gt;(&lt;span class=&quot;hljs-attr&quot;&gt;array&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;&amp;lt;T&amp;gt;, &lt;span class=&quot;hljs-attr&quot;&gt;callback&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item: T, index: number&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;&amp;gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; index = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; index &amp;lt; array.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; index++) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;callback&lt;/span&gt;(array[index], index);\n        }\n    }\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;How to use?&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;asyncForEach&lt;/span&gt;(receipts, &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (eachItem) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; ...\n})\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;blockquote&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;files.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (file) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;)\n})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;The issue is, the promise returned by the iteration function is ignored by &lt;code&gt;forEach()&lt;/code&gt;. As a result, all the &lt;code&gt;fs.readFile&lt;/code&gt; functions\nare invoked in the same round of the event loop, which means they are started in parallel, not in sequential, and the execution continues immediately after invoking forEach(), without\nwaiting for all the &lt;code&gt;fs.readFile&lt;/code&gt; operations to complete. Since forEach does not wait for each promise to resolve, the loop actually finishes iterating before promises are resolved.  You may end up trying to access values that are not available yet.&lt;/p&gt;\n    ","\n&lt;p&gt;In addition to &lt;a href=&quot;https://stackoverflow.com/a/37576787/877703&quot;&gt;@Bergis answer&lt;/a&gt;, Id like to offer a third alternative. It&apos;s very similar to @Bergis 2nd example, but instead of awaiting each &lt;code&gt;readFile&lt;/code&gt; individually, you create an array of promises, each which you await at the end.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; fs &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;fs-promise&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; () {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; promises = files.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt;) =&amp;gt;&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;))\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(promises)\n\n  contents.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;log&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note that the function passed to &lt;code&gt;.map()&lt;/code&gt; does not need to be &lt;code&gt;async&lt;/code&gt;, since &lt;code&gt;fs.readFile&lt;/code&gt; returns a Promise object anyway. Therefore &lt;code&gt;promises&lt;/code&gt; is an array of Promise objects, which can be sent to &lt;code&gt;Promise.all()&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;In @Bergis answer, the console may log file contents in the order theyre read. For example if a really small file finishes reading before a really large file, it will be logged first, even if the small file comes &lt;em&gt;after&lt;/em&gt; the large file in the &lt;code&gt;files&lt;/code&gt; array. However, in my method above, you are guaranteed the console will log the files in the same order as the provided array.&lt;/p&gt;\n    ","\n&lt;p&gt;A simple drop-in solution for replacing a &lt;code&gt;forEach()&lt;/code&gt; await loop that is not working is replacing &lt;code&gt;forEach&lt;/code&gt; with &lt;code&gt;map&lt;/code&gt; and adding &lt;code&gt;Promise.all(&lt;/code&gt; to the beginning.&lt;/p&gt;\n&lt;p&gt;For example:&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;await y.forEach(async (x) =&amp;gt; {&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;to&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;await Promise.all(y.map(async (x) =&amp;gt; {&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;An extra &lt;code&gt;)&lt;/code&gt; is needed at the end.&lt;/p&gt;\n    ","\n&lt;p&gt;it&apos;s pretty painless to pop a couple methods in a file that will handle asynchronous data in a serialized order and give a more conventional flavour to your code.  For example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;module&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;exports&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; self = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;each&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (items, fn) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (items &amp;amp;&amp;amp; items.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(\n        items.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (item) =&amp;gt; {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fn&lt;/span&gt;(item);\n        }));\n    }\n  };\n\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;reduce&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (items, fn, initialValue) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; self.&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(\n      items, &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (item) =&amp;gt; {\n        initialValue = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fn&lt;/span&gt;(initialValue, item);\n      });\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; initialValue;\n  };\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;now, assuming that&apos;s saved at &apos;./myAsync.js&apos; you can do something similar to the below in an adjacent file:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;...\n&lt;span class=&quot;hljs-comment&quot;&gt;/* your server setup here */&lt;/span&gt;\n...\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyAsync&lt;/span&gt; = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;./myAsync&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Cat&lt;/span&gt; = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;./models/Cat&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Doje&lt;/span&gt; = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;./models/Doje&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;example&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myAsync = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyAsync&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; doje = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Doje&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;findOne&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Doje&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;noises&lt;/span&gt;: [] }).&lt;span class=&quot;hljs-title function_&quot;&gt;save&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; cleanParams = [];\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// FOR EACH EXAMPLE&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; myAsync.&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;([&lt;span class=&quot;hljs-string&quot;&gt;&apos;bork&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;concern&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;heck&apos;&lt;/span&gt;], \n    &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (elem) =&amp;gt; {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (elem !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;heck&apos;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; doje.&lt;span class=&quot;hljs-title function_&quot;&gt;update&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;$push&lt;/span&gt;: { &lt;span class=&quot;hljs-string&quot;&gt;&apos;noises&apos;&lt;/span&gt;: elem }});\n      }\n    });\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; cat = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Cat&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;findOne&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Nyan&apos;&lt;/span&gt; });\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// REDUCE EXAMPLE&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; friendsOfNyanCat = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; myAsync.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(cat.&lt;span class=&quot;hljs-property&quot;&gt;friends&lt;/span&gt;,\n    &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (catArray, friendId) =&amp;gt; {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; friend = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Friend&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;findById&lt;/span&gt;(friendId);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (friend.&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt; !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;Long cat&apos;&lt;/span&gt;) {\n        catArray.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(friend.&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt;);\n      }\n    }, []);\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Assuming Long Cat was a friend of Nyan Cat...&lt;/span&gt;\n  &lt;span class=&quot;hljs-title function_&quot;&gt;assert&lt;/span&gt;(friendsOfNyanCat.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === (cat.&lt;span class=&quot;hljs-property&quot;&gt;friends&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;));\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/a/37576787/3241111&quot;&gt;Bergi&apos;s solution&lt;/a&gt; works nicely when &lt;code&gt;fs&lt;/code&gt; is promise based.\nYou can use &lt;code&gt;bluebird&lt;/code&gt;, &lt;code&gt;fs-extra&lt;/code&gt; or &lt;code&gt;fs-promise&lt;/code&gt; for this.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;However, solution for&lt;/strong&gt; node&apos;s native &lt;code&gt;fs&lt;/code&gt; libary is as follows:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; result = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(filePaths\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;( &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; filePath =&amp;gt; {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; fileContents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getAssetFromCache&lt;/span&gt;(filePath, &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n\n        &lt;span class=&quot;hljs-comment&quot;&gt;// 1. Wrap with Promise    &lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// 2. Return the result of the Promise&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;res, rej&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n          fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(filePath, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;err, data&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (data) {\n              &lt;span class=&quot;hljs-title function_&quot;&gt;res&lt;/span&gt;(data);\n            }\n          });\n        });\n      });\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; fileContents;\n    }));\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;\n&lt;code&gt;require(&apos;fs&apos;)&lt;/code&gt; compulsorily takes function as 3rd arguments, otherwise throws error:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;TypeError&lt;/span&gt; [&lt;span class=&quot;hljs-variable constant_&quot;&gt;ERR_INVALID_CALLBACK&lt;/span&gt;]: &lt;span class=&quot;hljs-title class_&quot;&gt;Callback&lt;/span&gt; must be a &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;It is not good to call an asynchronous method from a loop. This is because each loop iteration will be delayed until the entire asynchronous operation completes. That is not very performant. It also averts the advantages of parallelization benefits of &lt;code&gt;async&lt;/code&gt;/&lt;code&gt;await&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;A better solution would be to create all promises at once, then get access to the results using &lt;code&gt;Promise.all()&lt;/code&gt;. Otherwise, each successive operation will not start until the previous one has completed.&lt;/p&gt;\n&lt;p&gt;Consequently, the code may be refactored as follows;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; results = [];\n  files.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    results.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;));\n  });\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(results);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;One important &lt;strong&gt;caveat&lt;/strong&gt; is: The &lt;code&gt;await + for .. of&lt;/code&gt; method and the &lt;code&gt;forEach + async&lt;/code&gt; way actually have different effect. &lt;/p&gt;\n\n&lt;p&gt;Having &lt;code&gt;await&lt;/code&gt; inside a real &lt;code&gt;for&lt;/code&gt; loop will make sure all async calls are executed one by one. And the &lt;code&gt;forEach + async&lt;/code&gt; way will fire off all promises at the same time, which is faster but sometimes overwhelmed(&lt;strong&gt;if you do some DB query or visit some web services with volume restrictions&lt;/strong&gt; and do not want to fire 100,000 calls at a time). &lt;/p&gt;\n\n&lt;p&gt;You can also use &lt;code&gt;reduce + promise&lt;/code&gt;(less elegant) if you do not use &lt;code&gt;async/await&lt;/code&gt; and want to make sure files are read &lt;strong&gt;one after another&lt;/strong&gt;. &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;files.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;lastPromise, file&lt;/span&gt;) =&amp;gt;&lt;/span&gt; \n lastPromise.&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; \n   fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;)\n ), &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;()\n)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or you can create a forEachAsync to help but basically use the same for loop underlying.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;forEachAsync&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;cb&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; x &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;){\n        &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cb&lt;/span&gt;(x);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Both the solutions above work, however, Antonio&apos;s does the job with less code, here is how it helped me resolve data from my database, from several different child refs and then pushing them all into an array and resolving it in a promise after all is done:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;PacksList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;pack&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; fireBaseRef.&lt;span class=&quot;hljs-title function_&quot;&gt;child&lt;/span&gt;(pack.&lt;span class=&quot;hljs-property&quot;&gt;folderPath&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;once&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;value&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;snap&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{\n        snap.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;( &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;childSnap&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; file = childSnap.&lt;span class=&quot;hljs-title function_&quot;&gt;val&lt;/span&gt;()\n            file.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; = childSnap.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt;;\n            allItems.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;( file )\n        })\n    })\n})).&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;()=&amp;gt;&lt;/span&gt;store.&lt;span class=&quot;hljs-title function_&quot;&gt;dispatch&lt;/span&gt;( actions.&lt;span class=&quot;hljs-title function_&quot;&gt;allMockupItems&lt;/span&gt;(allItems)))\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Just adding to the original answer&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;The parallel reading syntax in the original answer is sometimes confusing and difficult to read, maybe we can write it in a different approach&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; fileReadPromises = [];\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;readAndLogFile&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; filePath =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&quot;utf8&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; contents;\n  };\n\n  files.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n    fileReadPromises.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;readAndLogFile&lt;/span&gt;(file));\n  });\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(fileReadPromises);\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;ul&gt;\n&lt;li&gt;For sequential operation, not just &lt;strong&gt;for...of&lt;/strong&gt;, normal for loop will also work&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; files.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; file = files[i];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&quot;utf8&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents);\n  }\n}\n\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Like @Bergi&apos;s response, but with one difference.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;Promise.all&lt;/code&gt; rejects all promises if one gets rejected.&lt;/p&gt;\n\n&lt;p&gt;So, use a recursion.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; readFilesQueue = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (files, index = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(files[index], &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;)\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents)\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; files.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt;= index\n        ? &lt;span class=&quot;hljs-title function_&quot;&gt;readFilesQueue&lt;/span&gt;(files, ++index)\n        : files\n\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; printFiles &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; = &lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; printContents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;readFilesQueue&lt;/span&gt;(files)\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; printContents\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;()\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;PS&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;readFilesQueue&lt;/code&gt; is outside of &lt;code&gt;printFiles&lt;/code&gt; cause the side effect* introduced by &lt;code&gt;console.log&lt;/code&gt;, it&apos;s better to mock, test, and or spy so, it&apos;s not cool to have a function that returns the content(sidenote).&lt;/p&gt;\n\n&lt;p&gt;Therefore, the code can simply be designed by that: three separated functions that are &quot;pure&quot;** and introduce no side effects, process the entire list and can easily be modified to handle failed cases.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilesPath&lt;/span&gt;()\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFile&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt;) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; content = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;)\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(content)\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; readFiles = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; = &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;files, index = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFile&lt;/span&gt;(files[index])\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; files.&lt;span class=&quot;hljs-property&quot;&gt;lengh&lt;/span&gt; &amp;lt;= index\n        ? &lt;span class=&quot;hljs-title function_&quot;&gt;readFiles&lt;/span&gt;(files, ++index)\n        : files\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;readFiles&lt;/span&gt;(files)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Future edit/current state&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Node supports top-level await (this doesn&apos;t have a plugin yet, won&apos;t have and can be enabled via harmony flags), it&apos;s cool but doesn&apos;t solve one problem (strategically I work only on LTS versions). How to get the files?&lt;/p&gt;\n\n&lt;p&gt;Using composition. Given the code, causes to me a sensation that this is inside a module, so, should have a function to do it. If not, you should use an IIFE to wrap the role code into an async function creating simple module that&apos;s do all for you, or you can go with the right way, there is, composition.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// more complex version with IIFE to a single module&lt;/span&gt;\n(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (files) =&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;readFiles&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;files&lt;/span&gt;())(getFilesPath)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note that the name of variable changes due to semantics. You pass a functor (a function that can be invoked by another function) and recieves a pointer on memory that contains the initial block of logic of the application.&lt;/p&gt;\n\n&lt;p&gt;But, if&apos;s not a module and you need to export the logic?&lt;/p&gt;\n\n&lt;p&gt;Wrap the functions in a async function.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;readFilesQueue&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// ... to code goes here&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or change the names of variables, whatever...&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;&lt;code&gt;*&lt;/code&gt; by side effect menans any colacteral effect of application  that can change the statate/behaviour or introuce bugs in the application, like IO.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;**&lt;/code&gt; by &quot;pure&quot;, it&apos;s in apostrophe since the functions it&apos;s not pure and the code can be converged to a pure version, when there&apos;s no console output, only data manipulations.&lt;/p&gt;\n\n&lt;p&gt;Aside this, to be pure, you&apos;ll need to work with monads that handles the side effect, that are error prone, and treats that error separately of the application. &lt;/p&gt;\n    ","\n&lt;p&gt;Today I came across multiple solutions for this. Running the async await functions in the forEach Loop. By building the wrapper around we can make this happen.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://www.creospiders.com/2019/11/api-call-or-async-await-not-working-in.html&quot; rel=&quot;noreferrer&quot;&gt;More detailed explanation on how it works internally, for the native forEach and why it is not able to make a async function call and other details on the various methods are provided in link here&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;The multiple ways through which it can be done and they are as follows,&lt;/p&gt;\n\n&lt;p&gt;Method 1 : Using the wrapper.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; (&lt;span class=&quot;hljs-function&quot;&gt;()=&amp;gt;&lt;/span&gt;{\n     &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolve,reject&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{\n       items.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (item,index)=&amp;gt;{\n           &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;{\n               &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;someAPICall&lt;/span&gt;();\n           } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(e) {\n              &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(e)\n           }\n           count++;\n           &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(index === items.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;){\n             &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Done&apos;&lt;/span&gt;)\n           }\n         });\n     });\n    })();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Method 2: Using the same as a generic function of Array.prototype&lt;/p&gt;\n\n&lt;p&gt;Array.prototype.forEachAsync.js&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(!&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;forEachAsync&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;forEachAsync&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;fn&lt;/span&gt;){\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolve,reject&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;async&lt;/span&gt;(item,index,array)=&amp;gt;{\n            &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fn&lt;/span&gt;(item,index,array);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(index === array.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;){\n                &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;done&apos;&lt;/span&gt;);\n            }\n        })\n      });\n    };\n  }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Usage : &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;./Array.prototype.forEachAsync&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; count = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;hello&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;items&lt;/span&gt;) =&amp;gt; {\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Method 1 - Using the Array.prototype.forEach &lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; items.&lt;span class=&quot;hljs-title function_&quot;&gt;forEachAsync&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; () =&amp;gt; {\n         &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;{\n               &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;someAPICall&lt;/span&gt;();\n           } &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(e) {\n              &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(e)\n           }\n        count++;\n    });\n\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;count = &quot;&lt;/span&gt; + count);\n}\n\nsomeAPICall = &lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolve, reject&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {\n            &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;done&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;// or reject(&apos;error&apos;)&lt;/span&gt;\n        }, &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;);\n    })\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;hello&lt;/span&gt;([&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;]); &lt;span class=&quot;hljs-comment&quot;&gt;// hello([]) empty array is also be handled by default&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Method 3 :&lt;/p&gt;\n\n&lt;p&gt;Using Promise.all&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(items.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (item) =&amp;gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;someAPICall&lt;/span&gt;();\n        count++;\n    }));\n\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;count = &quot;&lt;/span&gt; + count);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Method 4 : Traditional for loop or modern for loop&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Method 4 - using for loop directly&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// 1. Using the modern for(.. in..) loop&lt;/span&gt;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(item &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; items){\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;someAPICall&lt;/span&gt;();\n        count++;\n    }\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//2. Using the traditional for loop &lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;items.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;i++){\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;someAPICall&lt;/span&gt;();\n        count++;\n    }\n\n\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;count = &quot;&lt;/span&gt; + count);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can use &lt;code&gt;Array.prototype.forEach&lt;/code&gt;, but async/await is not so compatible. This is because the promise returned from an async callback expects to be resolved, but &lt;code&gt;Array.prototype.forEach&lt;/code&gt; does not resolve any promises from the execution of its callback. So then, you can use forEach, but you&apos;ll have to handle the promise resolution yourself.&lt;/p&gt;\n\n&lt;p&gt;Here is a way to read and print each file in series using &lt;code&gt;Array.prototype.forEach&lt;/code&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFilesInSeries&lt;/span&gt; () {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;()\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; promiseChain = &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;()\n  files.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    promiseChain = promiseChain.&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {\n      fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;contents&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents)\n      })\n    })\n  })\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; promiseChain\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here is a way (still using &lt;code&gt;Array.prototype.forEach&lt;/code&gt;) to print the contents of files in parallel&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFilesInParallel&lt;/span&gt; () {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;()\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; promises = []\n  files.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    promises.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(\n      fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;contents&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents)\n      })\n    )\n  })\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(promises)\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Currently the Array.forEach prototype property doesn&apos;t support async operations, but we can create our own poly-fill to meet our needs.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Example of asyncForEach Array poly-fill for NodeJs&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// file: asyncForEach.js&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Define asynForEach function &lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;asyncForEach&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;iteratorFunction&lt;/span&gt;){\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; indexer = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; data &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;iteratorFunction&lt;/span&gt;(data, indexer)\n    indexer++\n  }\n}\n&lt;span class=&quot;hljs-comment&quot;&gt;// Append it as an Array prototype property&lt;/span&gt;\n&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;asyncForEach&lt;/span&gt; = asyncForEach\n&lt;span class=&quot;hljs-variable language_&quot;&gt;module&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;exports&lt;/span&gt; = {&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And that&apos;s it! You now have an async forEach method available on any arrays that are defined after these to operations.&lt;/p&gt;\n\n&lt;p&gt;Let&apos;s test it...&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Nodejs style&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// file: someOtherFile.js&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; readline = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;readline&apos;&lt;/span&gt;)\n&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt; = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;./asyncForEach&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;Array&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; log = &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;log&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Create a stream interface&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;createReader&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;options={prompt: &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;gt;&apos;&lt;/span&gt;}&lt;/span&gt;){\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; readline.&lt;span class=&quot;hljs-title function_&quot;&gt;createInterface&lt;/span&gt;({\n    &lt;span class=&quot;hljs-attr&quot;&gt;input&lt;/span&gt;: process.&lt;span class=&quot;hljs-property&quot;&gt;stdin&lt;/span&gt;\n    ,&lt;span class=&quot;hljs-attr&quot;&gt;output&lt;/span&gt;: process.&lt;span class=&quot;hljs-property&quot;&gt;stdout&lt;/span&gt;\n    ,&lt;span class=&quot;hljs-attr&quot;&gt;prompt&lt;/span&gt;: options.&lt;span class=&quot;hljs-property&quot;&gt;prompt&lt;/span&gt; !== &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt; ? options.&lt;span class=&quot;hljs-property&quot;&gt;prompt&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;gt;&apos;&lt;/span&gt;\n  })\n}\n&lt;span class=&quot;hljs-comment&quot;&gt;// Create a cli stream reader&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getUserIn&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;question, options={prompt:&lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;gt;&apos;&lt;/span&gt;}&lt;/span&gt;){\n  &lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(question)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; reader = &lt;span class=&quot;hljs-title function_&quot;&gt;createReader&lt;/span&gt;(options)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;res&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{\n    reader.&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;line&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;answer&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{\n      process.&lt;span class=&quot;hljs-property&quot;&gt;stdout&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;cursorTo&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n      process.&lt;span class=&quot;hljs-property&quot;&gt;stdout&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;clearScreenDown&lt;/span&gt;()\n      reader.&lt;span class=&quot;hljs-title function_&quot;&gt;close&lt;/span&gt;()\n      &lt;span class=&quot;hljs-title function_&quot;&gt;res&lt;/span&gt;(answer)\n    })\n  })\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; questions = [\n  &lt;span class=&quot;hljs-string&quot;&gt;`What&apos;s your name`&lt;/span&gt;\n  ,&lt;span class=&quot;hljs-string&quot;&gt;`What&apos;s your favorite programming language`&lt;/span&gt;\n  ,&lt;span class=&quot;hljs-string&quot;&gt;`What&apos;s your favorite async function`&lt;/span&gt;\n]\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; responses = {}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getResponses&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n&lt;span class=&quot;hljs-comment&quot;&gt;// Notice we have to prepend await before calling the async Array function&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// in order for it to function as expected&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; questions.&lt;span class=&quot;hljs-title function_&quot;&gt;asyncForEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;question, index&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; answer = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getUserIn&lt;/span&gt;(question)\n    responses[question] = answer\n  })\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getResponses&lt;/span&gt;()\n  &lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(responses)\n}\n&lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;()\n&lt;span class=&quot;hljs-comment&quot;&gt;// Should prompt user for an answer to each question and then &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// log each question and answer as an object to the terminal&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;We could do the same for some of the other array functions like map...&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;asyncMap&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;iteratorFunction&lt;/span&gt;){\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; newMap = []\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; indexer = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; data &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;){\n    newMap[indexer] = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;iteratorFunction&lt;/span&gt;(data, indexer, &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;)\n    indexer++\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; newMap\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;asyncMap&lt;/span&gt; = asyncMap\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;... and so on :)&lt;/p&gt;\n\n&lt;p&gt;Some things to note:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Your iteratorFunction must be an async function or promise&lt;/li&gt;\n&lt;li&gt;Any arrays created before &lt;code&gt;Array.prototype.&amp;lt;yourAsyncFunc&amp;gt; = &amp;lt;yourAsyncFunc&amp;gt;&lt;/code&gt; will not have this feature available&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;To see how that can go wrong, print console.log at the end of the method.&lt;/p&gt;\n\n&lt;p&gt;Things that can go wrong in general:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Arbitrary order.&lt;/li&gt;\n&lt;li&gt;printFiles can finish running before printing files.&lt;/li&gt;\n&lt;li&gt;Poor performance.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;These are not always wrong but frequently are in standard use cases.&lt;/p&gt;\n\n&lt;p&gt;Generally, using forEach will result in all but the last. It&apos;ll call each function without awaiting for the function meaning it tells all of the functions to start then finishes without waiting for the functions to finish.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; fs &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;fs-promise&apos;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; () {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = (&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;()).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt; =&amp;gt;&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;))\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; file &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; files)\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; file)\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;()\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This is an example in native JS that will preserve order, prevent the function from returning prematurely and in theory retain optimal performance.&lt;/p&gt;\n\n&lt;p&gt;This will:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Initiate all of the file reads to happen in parallel.&lt;/li&gt;\n&lt;li&gt;Preserve the order via the use of map to map file names to promises to wait for.&lt;/li&gt;\n&lt;li&gt;Wait for each promise in the order defined by the array.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;With this solution the first file will be shown as soon as it is available without having to wait for the others to be available first.&lt;/p&gt;\n\n&lt;p&gt;It will also be loading all files at the same time rather than having to wait for the first to finish before the second file read can be started.&lt;/p&gt;\n\n&lt;p&gt;The only draw back of this and the original version is that if multiple reads are started at once then it&apos;s more difficult to handle errors on account of having more errors that can happen at a time.&lt;/p&gt;\n\n&lt;p&gt;With versions that read a file at a time then then will stop on a failure without wasting time trying to read any more files. Even with an elaborate cancellation system it can be hard to avoid it failing on the first file but reading most of the other files already as well.&lt;/p&gt;\n\n&lt;p&gt;Performance is not always predictable. While many systems will be faster with parallel file reads some will prefer sequential. Some are dynamic and may shift under load, optimisations that offer latency do not always yield good throughput under heavy contention.&lt;/p&gt;\n\n&lt;p&gt;There is also no error handling in that example. If something requires them to either all be successfully shown or not at all it won&apos;t do that.&lt;/p&gt;\n\n&lt;p&gt;In depth experimentation is recommended with console.log at each stage and fake file read solutions (random delay instead). Although many solutions appear to do the same in simple cases all have subtle differences that take some extra scrutiny to squeeze out.&lt;/p&gt;\n\n&lt;p&gt;Use this mock to help tell the difference between solutions:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; () =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; start = +&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;mock&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {\n      &lt;span class=&quot;hljs-attr&quot;&gt;fs&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;readFile&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolve, reject&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Instead of this just make three files and try each timing arrangement.&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// IE, all same, [100, 200, 300], [300, 200, 100], [100, 300, 200], etc.&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; time = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;round&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt; + &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * &lt;span class=&quot;hljs-number&quot;&gt;4900&lt;/span&gt;);\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`Read of &lt;span class=&quot;hljs-subst&quot;&gt;${file}&lt;/span&gt; started at &lt;span class=&quot;hljs-subst&quot;&gt;${&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;() - start}&lt;/span&gt; and will take &lt;span class=&quot;hljs-subst&quot;&gt;${time}&lt;/span&gt;ms.`&lt;/span&gt;)\n        &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {\n          &lt;span class=&quot;hljs-comment&quot;&gt;// Bonus material here if random reject instead.&lt;/span&gt;\n          &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`Read of &lt;span class=&quot;hljs-subst&quot;&gt;${file}&lt;/span&gt; finished, resolving promise at &lt;span class=&quot;hljs-subst&quot;&gt;${&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;() - start}&lt;/span&gt;.`&lt;/span&gt;);\n          &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(file);\n        }, time);\n      })},\n      &lt;span class=&quot;hljs-attr&quot;&gt;console&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;log&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`Console Log of &lt;span class=&quot;hljs-subst&quot;&gt;${file}&lt;/span&gt; finished at &lt;span class=&quot;hljs-subst&quot;&gt;${&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;() - start}&lt;/span&gt;.`&lt;/span&gt;)},\n      &lt;span class=&quot;hljs-attr&quot;&gt;getFilePaths&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; [&lt;span class=&quot;hljs-string&quot;&gt;&apos;A&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;B&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;C&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;D&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;E&apos;&lt;/span&gt;]\n    };\n  };\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; printFiles = (&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;{fs, &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;, getFilePaths}&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = (&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;()).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt; =&amp;gt;&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;));\n\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; file &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; files)\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; file);\n    };\n  })(&lt;span class=&quot;hljs-title function_&quot;&gt;mock&lt;/span&gt;());\n\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`Running at &lt;span class=&quot;hljs-subst&quot;&gt;${&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;() - start}&lt;/span&gt;`&lt;/span&gt;);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;();\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`Finished running at &lt;span class=&quot;hljs-subst&quot;&gt;${&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Date&lt;/span&gt;() - start}&lt;/span&gt;`&lt;/span&gt;);\n})();\n\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Using Task, futurize, and a traversable List, you can simply do&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFiles&lt;/span&gt;();\n\n  &lt;span class=&quot;hljs-title class_&quot;&gt;List&lt;/span&gt;(files).&lt;span class=&quot;hljs-title function_&quot;&gt;traverse&lt;/span&gt;( &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;of&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;f&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;( f, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf-8&apos;&lt;/span&gt;))\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;fork&lt;/span&gt;( &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;error&lt;/span&gt;, &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;log&lt;/span&gt;)\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here is how you&apos;d set this up&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; fs &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;fs&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { futurize } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;futurize&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;data.task&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { &lt;span class=&quot;hljs-title class_&quot;&gt;List&lt;/span&gt; } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;immutable-ext&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; future = &lt;span class=&quot;hljs-title function_&quot;&gt;futurizeP&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;)\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; readFile = &lt;span class=&quot;hljs-title function_&quot;&gt;future&lt;/span&gt;(fs.&lt;span class=&quot;hljs-property&quot;&gt;readFile&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Another way to have structured the desired code would be&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; = files =&amp;gt; \n  &lt;span class=&quot;hljs-title class_&quot;&gt;List&lt;/span&gt;(files).&lt;span class=&quot;hljs-title function_&quot;&gt;traverse&lt;/span&gt;( &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;of&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;fn&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;( fn, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf-8&apos;&lt;/span&gt;))\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;fork&lt;/span&gt;( &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;error&lt;/span&gt;, &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;log&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or perhaps even more functionally oriented&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// 90% of encodings are utf-8, making that use case super easy is prudent&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// handy-library.js&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt; = f =&amp;gt;\n  &lt;span class=&quot;hljs-title function_&quot;&gt;future&lt;/span&gt;(fs.&lt;span class=&quot;hljs-property&quot;&gt;readFile&lt;/span&gt;)( f, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf-8&apos;&lt;/span&gt; )\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;arrayToTaskList&lt;/span&gt; = list =&amp;gt; &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;taskFn&lt;/span&gt; =&amp;gt;&lt;/span&gt; \n  &lt;span class=&quot;hljs-title class_&quot;&gt;List&lt;/span&gt;(files).&lt;span class=&quot;hljs-title function_&quot;&gt;traverse&lt;/span&gt;( &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;of&lt;/span&gt;, taskFn ) \n\n&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;readFiles&lt;/span&gt; = files =&amp;gt;\n  &lt;span class=&quot;hljs-title function_&quot;&gt;arrayToTaskList&lt;/span&gt;( files, readFile )\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; = files =&amp;gt; \n  &lt;span class=&quot;hljs-title function_&quot;&gt;readFiles&lt;/span&gt;(files).&lt;span class=&quot;hljs-title function_&quot;&gt;fork&lt;/span&gt;( &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;error&lt;/span&gt;, &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;log&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then from the parent function&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;/* awesome code with side-effects before */&lt;/span&gt;\n  &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;( &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFiles&lt;/span&gt;() );\n  &lt;span class=&quot;hljs-comment&quot;&gt;/* awesome code with side-effects after */&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If you really wanted more flexibility in encoding, you could just do this (for fun, I&apos;m using the proposed &lt;a href=&quot;https://github.com/tc39/proposal-pipeline-operator&quot; rel=&quot;nofollow noreferrer&quot;&gt;Pipe Forward operator&lt;/a&gt; )&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { curry, flip } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;ramda&apos;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; readFile = fs.&lt;span class=&quot;hljs-property&quot;&gt;readFile&lt;/span&gt; \n  |&amp;gt; future,\n  |&amp;gt; curry,\n  |&amp;gt; flip\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; readFileUtf8 = &lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;utf-8&apos;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;PS - I didn&apos;t try this code on the console, might have some typos... &quot;straight freestyle, off the top of the dome!&quot; as the 90s kids would say. :-p&lt;/p&gt;\n    ","\n&lt;h3&gt;Here is a great example for using async in forEach loop.&lt;/h3&gt;\n&lt;p&gt;&lt;strong&gt;Write your own asyncForEach&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;asyncForEach&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;array, callback&lt;/span&gt;) {  \n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; index = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; index &amp;lt; array.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; index++) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;callback&lt;/span&gt;(array[index], index, array)\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;You can use it like this&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;asyncForEach&lt;/span&gt;(array, &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item,index,array&lt;/span&gt;){\n     &lt;span class=&quot;hljs-comment&quot;&gt;//await here&lt;/span&gt;\n   }\n)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The OP&apos;s orignal question&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Are there any issues with using async/await in a forEach loop? ...&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;was covered to an extent in @Bergi&apos;s &lt;a href=&quot;https://stackoverflow.com/a/37576787/4376643&quot;&gt;selected answer&lt;/a&gt;,\nwhich showed how to process in serial and in parallel.  However there are other issues noted with parallelism -&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;Order -- &lt;a href=&quot;https://stackoverflow.com/a/48939529/4376643&quot;&gt;@chharvey&lt;/a&gt; notes that -&lt;/li&gt;\n&lt;/ol&gt;\n&lt;blockquote&gt;\n&lt;p&gt;For example if a really small file finishes reading before a really large file, it will be logged first, even if the small file comes after the large file in the files array.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;ol start=&quot;2&quot;&gt;\n&lt;li&gt;Possibly opening too many files at once -- A comment by Bergi under another &lt;a href=&quot;https://stackoverflow.com/a/66919921/4376643&quot;&gt;answer&lt;/a&gt;&lt;/li&gt;\n&lt;/ol&gt;\n&lt;blockquote&gt;\n&lt;p&gt;It is also not good to open thousands of files at once to read them concurrently. One always has to do an assessment whether a sequential, parallel, or mixed approach is better.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;So let&apos;s address these issues showing actual code that is brief and concise, and does &lt;em&gt;not&lt;/em&gt; use third party libraries.  Something easily cut, paste, and modifiable.&lt;/p&gt;\n&lt;h3&gt;Reading in parallel (all at once), printing in serial (as early as possible per file).&lt;/h3&gt;\n&lt;p&gt;The easiest improvement is perform full parallelism as in &lt;a href=&quot;https://stackoverflow.com/a/37576787/4376643&quot;&gt;@Bergi&apos;s answer&lt;/a&gt;, but make a small change so that each file is &lt;em&gt;printed as soon as possible while preserving order&lt;/em&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles2&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; readProms = (&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;()).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt;) =&amp;gt;&lt;/span&gt;\n    fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&quot;utf8&quot;&lt;/span&gt;)\n  );\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;([\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(readProms),                      &lt;span class=&quot;hljs-comment&quot;&gt;// branch 1&lt;/span&gt;\n    (&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; () =&amp;gt; {                                     &lt;span class=&quot;hljs-comment&quot;&gt;// branch 2&lt;/span&gt;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; p &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; readProms) &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; p);\n    })(),\n  ]);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Above, two seperate branches are run concurrently.&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;branch 1: Reading in parallel, all at once,&lt;/li&gt;\n&lt;li&gt;branch 2: Reading in serial to force order, but waiting no longer than necessary&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;That was easy.&lt;/p&gt;\n&lt;h3&gt;Reading in parallel with a concurrency limit, printing in serial (as early as possible per file).&lt;/h3&gt;\n&lt;p&gt;A &quot;concurrecy limit&quot; means that no more than &lt;code&gt;N&lt;/code&gt; files will ever being read at the same time.&lt;br&gt;\nLike a store that only allows in so many customers at a time (at least during COVID).&lt;/p&gt;\n&lt;p&gt;First a helper function is introduced -&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;bootablePromise&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;kickMe: () =&amp;gt; &lt;span class=&quot;hljs-built_in&quot;&gt;Promise&lt;/span&gt;&amp;lt;any&amp;gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;resolve&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;value: unknown&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt; = &lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; promise = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;res&lt;/span&gt;) =&amp;gt;&lt;/span&gt; { resolve = res; });\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;boot&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; { &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;kickMe&lt;/span&gt;()); };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; { promise, boot };\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The funciton &lt;code&gt;bootablePromise(kickMe:() =&amp;gt; Promise&amp;lt;any&amp;gt;)&lt;/code&gt; takes an\nfunction &lt;code&gt;kickMe&lt;/code&gt; as an argumment to start a task (in our case &lt;code&gt;readFile&lt;/code&gt;).  But it is not started immediately.&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;bootablePromise&lt;/code&gt; returns a couple of properties&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;promise&lt;/code&gt; of type &lt;code&gt;Promise&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;boot&lt;/code&gt; of type function &lt;code&gt;()=&amp;gt;void&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;code&gt;promise&lt;/code&gt; has two stages in life&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;Being a promise to start a task&lt;/li&gt;\n&lt;li&gt;Being a promise complete a task it has already started.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;code&gt;promise&lt;/code&gt; transitions from the first to the second state when &lt;code&gt;boot()&lt;/code&gt; is called.&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;bootablePromise&lt;/code&gt; is used in &lt;code&gt;printFiles&lt;/code&gt; --&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles4&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;boots&lt;/span&gt;: (&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;)[] = [];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;set&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Set&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;&amp;lt;{ &lt;span class=&quot;hljs-attr&quot;&gt;pidx&lt;/span&gt;: number }&amp;gt;&amp;gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Set&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;&amp;lt;any&amp;gt;&amp;gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; bootableProms = files.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;file,pidx&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; { promise, boot } = &lt;span class=&quot;hljs-title function_&quot;&gt;bootablePromise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&quot;utf8&quot;&lt;/span&gt;));\n    boots.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(boot);\n    set.&lt;span class=&quot;hljs-title function_&quot;&gt;add&lt;/span&gt;(promise.&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; ({ pidx })));\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; promise;\n  });\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; concurLimit = &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;([\n    (&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; () =&amp;gt; {                                       &lt;span class=&quot;hljs-comment&quot;&gt;// branch 1&lt;/span&gt;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; idx = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n      boots.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, concurLimit).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;b&lt;/span&gt;) =&amp;gt;&lt;/span&gt; { &lt;span class=&quot;hljs-title function_&quot;&gt;b&lt;/span&gt;(); idx++; });\n      &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (idx&amp;lt;boots.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; { pidx } = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;race&lt;/span&gt;([...set]);\n        set.&lt;span class=&quot;hljs-title function_&quot;&gt;delete&lt;/span&gt;([...set][pidx]);\n        boots[idx++]();\n      }\n    })(),\n    (&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; () =&amp;gt; {                                       &lt;span class=&quot;hljs-comment&quot;&gt;// branch 2&lt;/span&gt;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; p &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; bootableProms) &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; p);\n    })(),\n  ]);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;As before there are two branches&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;branch 1:   For running and handling concurrecy.&lt;/li&gt;\n&lt;li&gt;branch 2:   For printing&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;The difference now is the never more than &lt;code&gt;concurLimit&lt;/code&gt; promises are allowed to run concurrently.&lt;/p&gt;\n&lt;p&gt;The important variables are&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;boots&lt;/code&gt;: The array of functions to call to force it&apos;s corresponding promise to transition. It is used only in branch 1.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;set&lt;/code&gt;: There are promises in a random acces container so that they can be easily removed once fulfilled.  This contianer is used only in branch 1.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;bootableProms&lt;/code&gt;:  These are the smae promises as initally in &lt;code&gt;set&lt;/code&gt;, but it is an array not a set, and the array is never changed.  It is used only in branch 2.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Running with a mock &lt;code&gt;fs.readFile&lt;/code&gt; that takes times as follows (filename vs. time in ms).&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; timeTable = {\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;1&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;600&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;2&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;500&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;3&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;400&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;4&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;300&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;5&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;6&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;,\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;test run times such as this are seen, showing the concurrency is working --&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;--&lt;span class=&quot;hljs-number&quot;&gt;0.601&lt;/span&gt;\n[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;--&lt;span class=&quot;hljs-number&quot;&gt;0.502&lt;/span&gt;\n[&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;]&lt;span class=&quot;hljs-number&quot;&gt;0.503&lt;/span&gt;--&lt;span class=&quot;hljs-number&quot;&gt;0.904&lt;/span&gt;\n[&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;]&lt;span class=&quot;hljs-number&quot;&gt;0.608&lt;/span&gt;--&lt;span class=&quot;hljs-number&quot;&gt;0.908&lt;/span&gt;\n[&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;]&lt;span class=&quot;hljs-number&quot;&gt;0.905&lt;/span&gt;--&lt;span class=&quot;hljs-number&quot;&gt;1.105&lt;/span&gt;\n[&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;]&lt;span class=&quot;hljs-number&quot;&gt;0.905&lt;/span&gt;--&lt;span class=&quot;hljs-number&quot;&gt;1.005&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Available as executable in the &lt;a href=&quot;https://www.typescriptlang.org/play?#code/FAYw9gdgzgLgBDAlgWwKYBUCGAjANquAXjgG9g44AiARkoC44A2ABmYBpyqAmeuAVlYcKlAMy8ALIM6VxvEVOF9eXBVUa9qUgL4BuYKEiw4sTACcY6InAAimGKgB0EMAHcAFAEpgAMwCuEECRIOAATVFwYTDcADzoIX2RsVFMPElNUGF9TCDgYgFoTc3QPAHpNVh0tfUwoAE8AuD8AoJyAcwyAMUR8AAU7AAsoTwYe0zBkRChUAB5YU0QIVoBtAF0APlJOdMzsuAB5bAArVECHAGtUWqGkNCw8VA89KoNoeG8oKzIKGvqQOHTMCEuvg3N5uqgGHMFq02HAHPCzK0oAxMBBaqsPCMxhMprMYPNFhsvhQ4OBXnAkq0FpZiLZ7E5XJ5OBRtlkcpgXJhEPAIKgXHBRuNJjMoYS3G50lBYelDh4iETmSTFRQphYUKgwL4YOK5YQFSSDaTDPBUBAQjSbHZHM53F5DSTJW4AAZLAAkJDB+C0K3dYQiUUp1I8WjyeV94UiblN5uDTseyrgWlhbhuGBw+DgNUzaI8S09qBWcAA-EW4Mx4watBXExxdPofP5AohgtgwGBIvdBTjUG4zogQGcALIQ3K6jZd4XTVG1NaYkgAB2xwroE9x07WbFb7bonj1ADcwIgQlpNhR8PBJWBcHuR2495hcL4R-4zjaIGO4Aej1ZPPLSHWKDJIxFyFKYrF5flVx7CVUCgD8SH+WCrxvKxJR0RNqyA+At3gYhfz1UhEKgZCez7Adh08R5Ez0FkMjZQiQO7WEcOo4Bnh+BomibYJFwWGBgVg8Rf2JLDGnBD5iA5Ll4HafjwT6GBBk8GijXJHDkVyfCNi-EJc0LYhVhU0TVQYABlDJpig6YEPnI9YjgeJEmSRM1g2YgILgcyYEspc1zRVzlM4UScPTVAuwksT8CgBxkEwedxXzNhbJCaJ4MVUSbN81BmLbeAT2IELOyynU-3eBwASBcFQXBWFKC1bwAA5KA8asKHUhx518KB+jcHDWuMDIHEBEI3EY4UHEU00SoItwbLsjCWpU2idhyMaphUqsjONVSQCyAAZFBuSsLgVKko6oKG3BcDcJZFTcDi-i009DXPOB5uIZglpJdqoFwfse3YHb9sOmAPAcbwwFMABRTAQB63r4IpZS3pSgBqVH0M2hMXH6cFcjs6Z2vwRZFLlYl7QyuBkuiRMrDO+ALtMWGeyWeEHFVFZ+oNYK-QyVAQisVUHF5+wbrZjmlmpzmvoNdSljs9GVkC+0qkrDxPCEEl7rqBonvJkkIdMXJRPnOAwG8ClctC8K5SAq9HFwMBWnuzkjvnfqqw1zhpbY-Rtd+Uc-2JemqYJOSoqE+NPfjIA&quot; rel=&quot;nofollow noreferrer&quot;&gt;typescript playground sandbox&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;As other answers have mentioned, you&apos;re probably wanting it to be executed in sequence rather in parallel. Ie. run for first file, wait until it&apos;s done, &lt;em&gt;then&lt;/em&gt; once it&apos;s done run for second file. That&apos;s not what will happen.&lt;/p&gt;\n&lt;p&gt;I think it&apos;s important to address &lt;em&gt;why&lt;/em&gt; this doesn&apos;t happen.&lt;/p&gt;\n&lt;p&gt;Think about how &lt;code&gt;forEach&lt;/code&gt; works. I can&apos;t find the source, but I presume it works something like this:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;arr, cb&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; arr.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n    &lt;span class=&quot;hljs-title function_&quot;&gt;cb&lt;/span&gt;(arr[i]);\n  }\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Now think about what happens when you do something like this:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(files, &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;logFile&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents);\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Inside &lt;code&gt;forEach&lt;/code&gt;&apos;s &lt;code&gt;for&lt;/code&gt; loop we&apos;re calling &lt;code&gt;cb(arr[i])&lt;/code&gt;, which ends up being &lt;code&gt;logFile(file)&lt;/code&gt;. The &lt;code&gt;logFile&lt;/code&gt; function has an &lt;code&gt;await&lt;/code&gt; inside it, so maybe the &lt;code&gt;for&lt;/code&gt; loop will wait for this &lt;code&gt;await&lt;/code&gt; before proceeding to &lt;code&gt;i++&lt;/code&gt;?&lt;/p&gt;\n&lt;p&gt;No, it won&apos;t. Confusingly, that&apos;s not how &lt;code&gt;await&lt;/code&gt; works. From &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await&quot; rel=&quot;nofollow noreferrer&quot;&gt;the docs&lt;/a&gt;:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;An await splits execution flow, allowing the caller of the async function to resume execution. After the await defers the continuation of the async function, execution of subsequent statements ensues. If this await is the last expression executed by its function execution continues by returning to the function&apos;s caller a pending Promise for completion of the await&apos;s function and resuming execution of that caller.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;So if you have the following, the numbers won&apos;t be logged before &lt;code&gt;&quot;b&quot;&lt;/code&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;delay&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;ms&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolve&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(resolve, ms);\n  });\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;logNumbers&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;delay&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;delay&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;);\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;);\n  &lt;span class=&quot;hljs-title function_&quot;&gt;logNumbers&lt;/span&gt;();\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;);\n};\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;main&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Circling back to &lt;code&gt;forEach&lt;/code&gt;, &lt;code&gt;forEach&lt;/code&gt; is like &lt;code&gt;main&lt;/code&gt; and &lt;code&gt;logFile&lt;/code&gt; is like &lt;code&gt;logNumbers&lt;/code&gt;. &lt;code&gt;main&lt;/code&gt; won&apos;t stop just because &lt;code&gt;logNumbers&lt;/code&gt; does some &lt;code&gt;await&lt;/code&gt;ing, and &lt;code&gt;forEach&lt;/code&gt; won&apos;t stop just because &lt;code&gt;logFile&lt;/code&gt; does some &lt;code&gt;await&lt;/code&gt;ing.&lt;/p&gt;\n    ","\n&lt;p&gt;Similar to Antonio Val&apos;s &lt;a href=&quot;https://stackoverflow.com/a/45006966/8550747&quot;&gt;&lt;code&gt;p-iteration&lt;/code&gt;&lt;/a&gt;, an alternative npm module is &lt;a href=&quot;https://async-af.js.org/AsyncAF.html#forEachAF&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;async-af&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;AsyncAF&lt;/span&gt; = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;async-af&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; fs = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;fs-promise&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;// since AsyncAF accepts promises or non-promises, there&apos;s no need to await here&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n\n  &lt;span class=&quot;hljs-title class_&quot;&gt;AsyncAF&lt;/span&gt;(files).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; file =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; contents = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(contents);\n  });\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Alternatively, &lt;a href=&quot;https://async-af.js.org/AsyncAF.html#logAF&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;async-af&lt;/code&gt;&lt;/a&gt; has a static method (log/logAF) that logs the results of promises:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;AsyncAF&lt;/span&gt; = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;async-af&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; fs = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;fs-promise&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n\n  &lt;span class=&quot;hljs-title class_&quot;&gt;AsyncAF&lt;/span&gt;(files).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt; =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-title class_&quot;&gt;AsyncAF&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;));\n  });\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;However, the main advantage of the library is that you can chain asynchronous methods to do something like:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; aaf = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;async-af&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; fs = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;fs-promise&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;hljs-title function_&quot;&gt;aaf&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;())\n  .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt; =&amp;gt;&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;))\n  .&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;file&lt;/span&gt; =&amp;gt;&lt;/span&gt; aaf.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(file));\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://async-af.js.org/AsyncAF&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;async-af&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;In 2022 I would still advise using external libraries to handle all this async flow.  I&apos;ve created the module &lt;a href=&quot;https://github.com/atmajs/alot&quot; rel=&quot;nofollow noreferrer&quot;&gt;alot&lt;/a&gt; for similar things.&lt;/p&gt;\n&lt;p&gt;Your example would be:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; fs &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;fs-promise&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; alot &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;alot&apos;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt; () {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; files = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;() &lt;span class=&quot;hljs-comment&quot;&gt;// Assume this works fine&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;alot&lt;/span&gt;(files)\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;forEachAsync&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; file =&amp;gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; content = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; fs.&lt;span class=&quot;hljs-title function_&quot;&gt;readFile&lt;/span&gt;(file, &lt;span class=&quot;hljs-string&quot;&gt;&apos;utf8&apos;&lt;/span&gt;);\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(content);\n        })\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;toArrayAsync&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;threads&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; });\n    }\n}\n&lt;span class=&quot;hljs-title function_&quot;&gt;printFiles&lt;/span&gt;()\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For simple examples surely the async &lt;code&gt;for..of&lt;/code&gt; would do the job, but as soon the task is more complicated you have to use some utility for this.&lt;/p&gt;\n&lt;p&gt;Alot has dozens of other methods that you can chain, like &lt;code&gt;mapAsync&lt;/code&gt;, &lt;code&gt;filterAsync&lt;/code&gt;, &lt;code&gt;groupAsync&lt;/code&gt;, etc.&lt;/p&gt;\n&lt;p&gt;As an example:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Load JSON files with products meta&lt;/li&gt;\n&lt;li&gt;Extract &lt;code&gt;ProductID&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;Load products from the server&lt;/li&gt;\n&lt;li&gt;Filter those with a price &amp;gt; 100$&lt;/li&gt;\n&lt;li&gt;Order by price ascending&lt;/li&gt;\n&lt;li&gt;Take top 50&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; fs &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;fs-promise&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; alot &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;alot&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; axios &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;axios&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt; } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;atma-io&apos;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; paths = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getFilePaths&lt;/span&gt;();\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; products = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;alot&lt;/span&gt;(paths)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;mapAsync&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; path =&amp;gt; &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;File&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;readAsync&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title class_&quot;&gt;IProductMeta&lt;/span&gt;&amp;gt;(path))\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;mapAsync&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; meta =&amp;gt; &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; axios.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${server}&lt;/span&gt;/api/product/&lt;span class=&quot;hljs-subst&quot;&gt;${meta.productId}&lt;/span&gt;`&lt;/span&gt;))\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;mapAsync&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;resp&lt;/span&gt; =&amp;gt;&lt;/span&gt; resp.&lt;span class=&quot;hljs-property&quot;&gt;data&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;filterAsync&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;product&lt;/span&gt; =&amp;gt;&lt;/span&gt; product.&lt;span class=&quot;hljs-property&quot;&gt;price&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;sortBy&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;product&lt;/span&gt; =&amp;gt;&lt;/span&gt; product.&lt;span class=&quot;hljs-property&quot;&gt;price&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;asc&apos;&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;takeAsync&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;)\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;toArrayAsync&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;threads&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;errors&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;include&apos;&lt;/span&gt; });\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you&apos;d like to iterate over all elements concurrently:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;asyncForEach&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, fn&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;all&lt;/span&gt;(arr.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(fn));\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;If you&apos;d like to iterate over all elements non-concurrently (e.g. when your mapping function has side effects or running mapper over all array elements at once would be too resource costly):&lt;/p&gt;\n&lt;p&gt;Option A: Promises&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;asyncForEachStrict&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, fn&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;resolve&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    arr.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(\n      &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;promise, cur, idx&lt;/span&gt;) =&amp;gt;&lt;/span&gt; promise\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fn&lt;/span&gt;(cur, idx, arr)),\n      &lt;span class=&quot;hljs-title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;(),\n    ).&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;resolve&lt;/span&gt;());\n  });\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Option B: async/await&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;asyncForEachStrict&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, fn&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; idx = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; idx &amp;lt; arr.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; idx += &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; cur = arr[idx];\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fn&lt;/span&gt;(cur, idx, arr);\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;If you can&apos;t use async/await&lt;/strong&gt; (IE11, old packer, etc.) then you can try this recursive function. I used &lt;code&gt;fetch&lt;/code&gt; as my asynchronous call, but you could use any function that returns a promise.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; urlsToGet = [&lt;span class=&quot;hljs-string&quot;&gt;&apos;https://google.com&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;https://yahoo.com&apos;&lt;/span&gt;];\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;fetchOneAtATime&lt;/span&gt;(urlsToGet);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fetchOneAtATime&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;urls&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (urls.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n    }\n    &lt;span class=&quot;hljs-title function_&quot;&gt;fetch&lt;/span&gt;(urls[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]).&lt;span class=&quot;hljs-title function_&quot;&gt;finally&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fetchOneAtATime&lt;/span&gt;(urls.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;)));\n}\n&lt;/code&gt;&lt;/pre&gt;\n    "],"80":["\n&lt;p&gt;&lt;em&gt;&lt;strong&gt;Undefined behavior&lt;/strong&gt;&lt;/em&gt; is one of those aspects of the C and C++ language that can be surprising to programmers coming from other languages (other languages try to hide it better). Basically,  it is possible to write C++ programs that do not behave in a predictable way, even though many C++ compilers will not report any errors in the program!&lt;/p&gt;\n&lt;p&gt;Let&apos;s look at a classic example:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;#&lt;span class=&quot;hljs-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt;\n&lt;/span&gt;{\n    &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt;* p = &lt;span class=&quot;hljs-string&quot;&gt;&quot;hello!\\n&quot;&lt;/span&gt;;   &lt;span class=&quot;hljs-comment&quot;&gt;// yes I know, deprecated conversion&lt;/span&gt;\n    p[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;y&apos;&lt;/span&gt;;\n    p[&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;] = &lt;span class=&quot;hljs-string&quot;&gt;&apos;w&apos;&lt;/span&gt;;\n    std::cout &amp;lt;&amp;lt; p;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The variable &lt;code&gt;p&lt;/code&gt; points to the string literal &lt;code&gt;&quot;hello!\\n&quot;&lt;/code&gt;, and the two assignments below try to modify that string literal. What does this program do? According to section 2.14.5 paragraph 11 of the C++ standard, it invokes &lt;em&gt;undefined behavior&lt;/em&gt;:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;The effect of attempting to modify a string literal is undefined.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;I can hear people screaming &quot;But wait, I can compile this no problem and get the output &lt;code&gt;yellow&lt;/code&gt;&quot; or &quot;What do you mean undefined, string literals are stored in read-only memory, so the first assignment attempt results in a core dump&quot;. This is exactly the problem with undefined behavior. Basically, the standard allows anything to happen once you invoke undefined behavior (even nasal demons). If there is a &quot;correct&quot; behavior according to your mental model of the language, that model is simply wrong; The C++ standard has the only vote, period.&lt;/p&gt;\n&lt;p&gt;Other examples of undefined behavior include accessing an array beyond its bounds, &lt;a href=&quot;https://stackoverflow.com/q/2894891&quot;&gt;dereferencing the null pointer&lt;/a&gt;, &lt;a href=&quot;https://stackoverflow.com/q/6441218&quot;&gt;accessing objects after their lifetime ended&lt;/a&gt; or writing &lt;a href=&quot;https://stackoverflow.com/q/949433&quot;&gt;allegedly clever expressions&lt;/a&gt; like &lt;code&gt;i++ + ++i&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;Section 1.9 of the C++ standard also mentions undefined behavior&apos;s two less dangerous brothers, &lt;strong&gt;unspecified behavior&lt;/strong&gt; and &lt;strong&gt;implementation-defined behavior&lt;/strong&gt;:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;The semantic descriptions in this International Standard define a parameterized nondeterministic abstract machine.&lt;/p&gt;\n&lt;p&gt;Certain aspects and operations of the abstract machine are described in this International Standard as &lt;strong&gt;implementation-defined&lt;/strong&gt; (for example, &lt;code&gt;sizeof(int)&lt;/code&gt;). These constitute the parameters of the abstract machine. Each implementation shall include documentation describing its characteristics and behavior in these respects.&lt;/p&gt;\n&lt;p&gt;Certain other aspects and operations of the abstract machine are described in this International Standard as &lt;strong&gt;unspecified&lt;/strong&gt; (for example, order of evaluation of arguments to a function). Where possible, this International Standard defines a set of allowable behaviors. These define the nondeterministic aspects of the abstract machine.&lt;/p&gt;\n&lt;p&gt;Certain other operations are described in this International Standard as &lt;strong&gt;undefined&lt;/strong&gt; (for example, the  effect of dereferencing the null pointer). [ &lt;em&gt;Note&lt;/em&gt;: &lt;strong&gt;this International Standard imposes no requirements on the behavior of programs that contain undefined behavior.&lt;/strong&gt; &lt;em&gt;end note&lt;/em&gt; ]&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;Specifically, section 1.3.24 states:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Permissible undefined behavior ranges from &lt;strong&gt;ignoring the situation completely with unpredictable results&lt;/strong&gt;, to behaving during translation or program execution in a documented manner characteristic of the environment (with or without the issuance of a diagnostic message), to terminating a translation or execution (with the issuance of a diagnostic message).&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;What can you do to avoid running into undefined behavior? Basically, you have to read &lt;a href=&quot;https://stackoverflow.com/questions/388242/&quot;&gt;good C++ books&lt;/a&gt; by authors who know what they&apos;re talking about. Avoid internet tutorials. Avoid bullschildt.&lt;/p&gt;\n    ","\n&lt;p&gt;Well, this is basically a straight copy-paste from the standard&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;strong&gt;3.4.1&lt;/strong&gt; 1 &lt;strong&gt;implementation-defined behavior&lt;/strong&gt; unspecified behavior where\neach implementation documents how the\nchoice is made&lt;/p&gt;\n&lt;p&gt;2 EXAMPLE An example of\nimplementation-defined behavior is the\npropagation of the high-order bit when\na signed integer is shifted right.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;3.4.3&lt;/strong&gt; 1 &lt;strong&gt;undefined behavior&lt;/strong&gt; behavior, upon use of a nonportable or erroneous\nprogram construct or of erroneous\ndata, for which this International\nStandard imposes no requirements&lt;/p&gt;\n&lt;p&gt;2\nNOTE Possible undefined behavior\nranges from ignoring the situation\ncompletely with unpredictable results,\nto behaving during translation or\nprogram execution in a documented\nmanner characteristic of the\nenvironment (with or without the\nissuance of a diagnostic message), to\nterminating a translation or execution\n(with the issuance of a diagnostic\nmessage).&lt;/p&gt;\n&lt;p&gt;3 EXAMPLE An example of\nundefined behavior is the behavior on\ninteger overflow.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;3.4.4&lt;/strong&gt; 1 &lt;strong&gt;unspecified behavior&lt;/strong&gt; use of an unspecified value, or other behavior\nwhere this International Standard\nprovides two or more possibilities and\nimposes no further requirements on\nwhich is chosen in any instance&lt;/p&gt;\n&lt;p&gt;2\nEXAMPLE An example of unspecified\nbehavior is the order in which the\narguments to a function are evaluated.&lt;/p&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;p&gt;Maybe easy wording could be easier for understanding than the rigorous definition of the standards.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;implementation-defined behavior&lt;/strong&gt;&lt;br&gt;\nThe language says that we have data-types. The compiler vendors specify what sizes shall they use, and provide a documentation of what they did.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;undefined behavior&lt;/strong&gt;&lt;br&gt;\nYou are doing something wrong. For example, you have a very large value in an &lt;code&gt;int&lt;/code&gt; that doesn&apos;t fit in &lt;code&gt;char&lt;/code&gt;. How do you put that value in &lt;code&gt;char&lt;/code&gt;? actually there is no way! Anything could happen, but the most sensible thing would be to take the first byte of that int and put it in &lt;code&gt;char&lt;/code&gt;. It is just wrong to do that to assign the first byte, but thats what happens under the hood.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;unspecified behavior&lt;/strong&gt;&lt;br&gt;\nWhich function of these two is executed first?&lt;/p&gt;\n&lt;pre class=&quot;lang-cpp s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; n, &lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; m)&lt;/span&gt;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;fun1&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{\n    std::cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;fun1&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;fun2&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{\n    std::cout &amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;fun2&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;;\n}\n...\n&lt;span class=&quot;hljs-built_in&quot;&gt;fun&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;fun1&lt;/span&gt;(), &lt;span class=&quot;hljs-built_in&quot;&gt;fun2&lt;/span&gt;()); &lt;span class=&quot;hljs-comment&quot;&gt;// which one is executed first?&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The language doesn&apos;t specify the evaluation, left to right or right to left! So an unspecified behavior may or mayn&apos;t result in an undefined behavior, but certainly your program should not produce an unspecified behavior.&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;@eSKay I think your question is worth editing the answer to clarify more :)&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;for &lt;code&gt;fun(fun1(), fun2());&lt;/code&gt; isn&apos;t the behaviour &quot;implementation defined&quot;? The compiler has to choose one or the other course, after all?&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;The difference between implementation-defined and unspecified, is that the compiler is supposed to pick a behavior in the first case but it doesn&apos;t have to in the second case. For example, an implementation must have one and only one definition of &lt;code&gt;sizeof(int)&lt;/code&gt;. So, it can&apos;t say that &lt;code&gt;sizeof(int)&lt;/code&gt; is 4 for some portion of the program and 8 for others. Unlike unspecified behavior, where the compiler can say OK I am gonna evaluate these arguments left-to-right and the next function&apos;s arguments are evaluated right-to-left. It can happen in the same program, that&apos;s why it is called &lt;em&gt;&lt;strong&gt;unspecified&lt;/strong&gt;&lt;/em&gt;. In fact, C++ could have been made easier if some of the unspecified behaviors were specified. Take a look here at &lt;a href=&quot;//www.stroustrup.com/bs_faq2.html#undefined&quot; rel=&quot;nofollow noreferrer&quot;&gt;Dr. Stroustrup&apos;s answer for that&lt;/a&gt;:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;It is claimed that the difference between what can be produced giving the compiler this freedom and requiring &quot;ordinary left-to-right evaluation&quot; can be significant. I&apos;m unconvinced, but with innumerable compilers &quot;out there&quot; taking advantage of the freedom and some people passionately defending that freedom, a change would be difficult and could take decades to penetrate to the distant corners of the C and C++ worlds. I am disappointed that not all compilers warn against code such as &lt;code&gt;++i+i++&lt;/code&gt;. Similarly, the order of evaluation of arguments is unspecified.&lt;/p&gt;\n&lt;p&gt;IMO far too many &quot;things&quot; are left undefined, unspecified, that&apos;s easy to say and even to give examples of, but hard to fix. It should also be noted that it is not all that difficult to avoid most of the problems and produce portable code.&lt;/p&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;p&gt;From the official C Rationale Document&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;The terms &lt;em&gt;unspecified&lt;/em&gt; behavior, &lt;em&gt;undefined&lt;/em&gt; behavior, and &lt;em&gt;implementation-defined&lt;/em&gt; behavior are used to categorize the result of writing programs whose properties the Standard does not, or cannot, completely describe.  The goal of adopting this categorization is to allow a certain variety among implementations which permits quality of implementation to be an active force in the marketplace as well as to allow certain popular extensions, without removing the cachet of conformance to the Standard.  Appendix F to the Standard catalogs those behaviors which fall into one of these three categories. &lt;/p&gt;\n  \n  &lt;p&gt;&lt;em&gt;Unspecified behavior&lt;/em&gt; gives the implementor some latitude in translating programs.  This latitude does not extend as far as failing to translate the program. &lt;/p&gt;\n  \n  &lt;p&gt;&lt;em&gt;Undefined behavior&lt;/em&gt; gives the implementor license not to catch certain program errors that are difficult to diagnose.  It also identifies areas of possible conforming language extension: the implementor may augment the language by providing a definition of the officially undefined behavior. &lt;/p&gt;\n  \n  &lt;p&gt;&lt;em&gt;Implementation-defined&lt;/em&gt; behavior gives an implementor the freedom to choose the appropriate approach, but requires that this choice be explained to the user.  Behaviors designated as implementation-defined are generally those in which a user could make meaningful coding decisions based on the implementation definition.  Implementors should bear in mind this criterion when deciding how extensive an implementation definition ought to be.  As with unspecified behavior, simply failing to translate the source containing the implementation-defined behavior is not an adequate response. &lt;/p&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;http://www.devx.com/tips/Tip/12684&quot; rel=&quot;noreferrer&quot;&gt;Undefined Behavior vs. Unspecified Behavior&lt;/a&gt; has a short description of it.&lt;/p&gt;\n\n&lt;p&gt;Their final summary:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;To sum up, unspecified behavior is usually something you shouldn&apos;t\n  worry about, unless your software is required to be portable.\n  Conversely, undefined behavior is always undesirable and should never\n  occur.&lt;/p&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;p&gt;Implementation defined- &lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Implementors wish,should be well documented,standard gives choices but sure to compile&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Unspecified -&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Same as implementation-defined but not documented&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Undefined-&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;Anything might happen,take care of it.&lt;/p&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;p&gt;Historically, both Implementation-Defined Behavior and Undefined Behavior represented situations in which the authors of the Standard expected that people writing quality implementations would use judgment to decide what behavioral guarantees, if any, would be useful for programs in the intended application field running on the intended targets.  The needs of high-end number-crunching code are quite different from those of low-level systems code, and both UB and IDB give compiler writers flexibility to meet those different needs.  Neither category mandates that implementations behave in a way that&apos;s useful for any particular purpose, or even for any purpose whatsoever.  Quality implementations that claim to be suitable for a particular purpose, however, should behave in a manner befitting such purpose &lt;em&gt;whether the Standard requires it or not&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;The only difference between Implementation-Defined Behavior and Undefined Behavior is that the former requires that implementations define and document a consistent behavior &lt;em&gt;even in cases where nothing the implementation could possibly do would be useful&lt;/em&gt;.  The dividing line between them is not whether it would generally be useful for implementations to define behaviors (compiler writers should define useful behaviors when practical whether the Standard requires them to or not) but &lt;em&gt;whether there might be implementations where defining a behavior would be simultaneously costly and useless&lt;/em&gt;.  A judgment that such implementations might exist does not in any way, shape, or form, imply any judgment about the usefulness of supporting a defined behavior on other platforms.&lt;/p&gt;\n\n&lt;p&gt;Unfortunately, since the mid 1990s compiler writers have started to interpret the lack of behavioral mandates as an judgment that behavioral guarantees aren&apos;t worth the cost even in application fields where they&apos;re vital, and even on systems where they cost practically nothing.  Instead of treating UB as an invitation to exercise reasonable judgment, compiler writers have started treating it as an excuse &lt;em&gt;not&lt;/em&gt; to do so.&lt;/p&gt;\n\n&lt;p&gt;For example, given the following code:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-cpp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;scaled_velocity&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-type&quot;&gt;int&lt;/span&gt; v, &lt;span class=&quot;hljs-type&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;char&lt;/span&gt; pow)&lt;/span&gt;\n&lt;/span&gt;{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (v &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;250&lt;/span&gt;)\n    v = &lt;span class=&quot;hljs-number&quot;&gt;250&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (v &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;-250&lt;/span&gt;)\n    v = &lt;span class=&quot;hljs-number&quot;&gt;-250&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; v &amp;lt;&amp;lt; pow;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;a two&apos;s-complement implementation would not have to expend any effort\nwhatsoever to treat the expression &lt;code&gt;v &amp;lt;&amp;lt; pow&lt;/code&gt; as a two&apos;s-complement shift\nwithout regard for whether &lt;code&gt;v&lt;/code&gt; was positive or negative.&lt;/p&gt;\n\n&lt;p&gt;The preferred philosophy among some of today&apos;s compiler writers, however, would suggest that because &lt;code&gt;v&lt;/code&gt; can only be negative if the program is going to engage in Undefined Behavior, there&apos;s no reason to have the program clip the negative range of &lt;code&gt;v&lt;/code&gt;.  Even though left-shifting of negative values used to be supported on every single compiler of significance, and a large amount of existing code relies upon that behavior, modern philosophy would interpret the fact that the Standard says that left-shifting negative values is UB as implying that compiler writers should feel free to ignore that.&lt;/p&gt;\n    ","\n&lt;p&gt;C++ standard n3337  &lt;strong&gt;§&lt;/strong&gt; 1.3.10\n&lt;strong&gt;implementation-defined behavior&lt;/strong&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;behavior, for a well-formed program construct and correct data, that\n  depends on the implementation and that each implementation documents&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Sometimes C++ Standard doesn&apos;t impose particular behavior on some constructs but says instead that a particular, well defined behavior has to be chosen and &lt;strong&gt;described&lt;/strong&gt; by particular implementation (version of library). So user can still know exactly how will program behave even though Standard doesn&apos;t describe this. &lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;C++ standard n3337  &lt;strong&gt;§&lt;/strong&gt; 1.3.24\n&lt;strong&gt;undefined behavior&lt;/strong&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;behavior for which this International Standard imposes no requirements\n  [ Note: Undefined behavior may be expected when this International\n  Standard omits any explicit definition of behavior or when a program\n  uses an erroneous construct or erroneous data. Permissible undefined\n  behavior ranges from ignoring the situation completely with\n  unpredictable results, to behaving during translation or program\n  execution in a documented manner characteristic of the environment\n  (with or without the issuance of a diagnostic message), to terminating\n  a translation or execution (with the issuance of a diagnostic\n  message). Many erroneous program constructs do not engender undefined\n  behavior; they are required to be diagnosed.  end note ]&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;When the program encounters construct that is not defined according to C++ Standard it is allowed to do whatever it wants to do ( maybe send an email to me or maybe send an email to you or maybe ignore the code completely). &lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;C++ standard n3337  &lt;strong&gt;§&lt;/strong&gt; 1.3.25\n&lt;strong&gt;unspecified behavior&lt;/strong&gt;&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;behavior, for a well-formed program construct and correct data, that\n  depends on the implementation [ Note: The implementation is not\n  required to document which behavior occurs. The range of possible\n  behaviors is usually delineated by this International Standard.  end\n  note ]&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;C++ Standard doesn&apos;t impose particular behavior on some constructs but says instead that a particular, well defined behavior has to be chosen ( &lt;strong&gt;bot not necessary described&lt;/strong&gt;) by particular implementation (version of library). So in the case when no description has been provided it can be difficult to the user to know exactly how will program behave.&lt;/p&gt;\n    ","\n&lt;p&gt;Undefined behavior is &lt;em&gt;ugly&lt;/em&gt; -- as in, &quot;The good, the bad, and the ugly&quot;.&lt;/p&gt;\n&lt;p&gt;Good: a program that compiles and works, for the right reasons.&lt;/p&gt;\n&lt;p&gt;Bad: a program that has an error, of a kind that the compiler can detect and complain about.&lt;/p&gt;\n&lt;p&gt;Ugly: a program that has an error, that the compiler &lt;em&gt;cannot&lt;/em&gt; detect and warn about, meaning that the program compiles, and may seem to work correctly some of the time, but also fails bizarrely some of the time.  That&apos;s what undefined behavior is.&lt;/p&gt;\n&lt;p&gt;Some program languages and other formal systems try hard to limit the &quot;gulf of undefinedness&quot; -- that is, they try to arrange things so that most or all programs are either &quot;good&quot; or &quot;bad&quot;, and that very few are &quot;ugly&quot;.  It&apos;s a characteristic feature of C, however, that its &quot;gulf of undefinedness&quot; is quite wide.&lt;/p&gt;\n    "]},"page":"107","randomQuestions":[{"title":"What is an undefined reference/unresolved external symbol error and how do I fix it?","slug":"what-is-an-undefined-referenceunresolved-external-symbol-error-and-how-do-i-fix-it-1657384255179"},{"title":"Using LIMIT within GROUP BY to get N results per group?","slug":"using-limit-within-group-by-to-get-n-results-per-group-1657388324167"},{"title":"Why are mutable structs “evil”?","slug":"why-are-mutable-structs-\"evil\"-1657388508974"},{"title":"How can I change an element's class with JavaScript?","slug":"how-can-i-change-an-element's-class-with-javascript-1657387694695"},{"title":"\"Thinking in AngularJS\" if I have a jQuery background? [closed]","slug":"\"thinking-in-angularjs\"-if-i-have-a-jquery-background-closed-1657384761159"},{"title":"What is the behavior of integer division?","slug":"what-is-the-behavior-of-integer-division-1657388222571"},{"title":"How to include a PHP variable inside a MySQL statement","slug":"how-to-include-a-php-variable-inside-a-mysql-statement-1657387669365"},{"title":"What does ** (double star/asterisk) and * (star/asterisk) do for parameters?","slug":"what-does-**-(double-starasterisk)-and-*-(starasterisk)-do-for-parameters-1657384800967"},{"title":"RegEx match open tags except XHTML self-contained tags","slug":"regex-match-open-tags-except-xhtml-self-contained-tags-1657384228245"},{"title":"Is storing a delimited list in a database column really that bad?","slug":"is-storing-a-delimited-list-in-a-database-column-really-that-bad-1657384474773"},{"title":"What do lambda function closures capture? [duplicate]","slug":"what-do-lambda-function-closures-capture-duplicate-1657388161827"},{"title":"Randomize a List<T>","slug":"randomize-a-listlesstgreater-1657388172793"},{"title":"Get the values from the \"GET\" parameters (JavaScript) [duplicate]","slug":"get-the-values-from-the-\"get\"-parameters-(javascript)-duplicate-1657387656693"},{"title":"Get the row(s) which have the max value in groups using groupby","slug":"get-the-row(s)-which-have-the-max-value-in-groups-using-groupby-1657388014787"},{"title":"CSS selector for first element with class","slug":"css-selector-for-first-element-with-class-1657388028765"},{"title":"How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version","slug":"how-to-fix-java.lang.unsupportedclassversionerror:-unsupported-major.minor-version-1657384863422"},{"title":"\"Least Astonishment\" and the Mutable Default Argument","slug":"\"least-astonishment\"-and-the-mutable-default-argument-1657384412508"},{"title":"Get all unique values in a JavaScript array (remove duplicates)","slug":"get-all-unique-values-in-a-javascript-array-(remove-duplicates)-1657387435296"},{"title":"Why do I need to override the equals and hashCode methods in Java?","slug":"why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java-1657388359877"},{"title":"What is a StackOverflowError?","slug":"what-is-a-stackoverflowerror-1657388319634"}]},"__N_SSG":true}