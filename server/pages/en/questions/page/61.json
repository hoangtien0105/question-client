{"pageProps":{"data":{"count":610,"rows":[{"id":310,"title":"How to remove/delete a large file from commit history in the Git repository?","slug":"how-to-removedelete-a-large-file-from-commit-history-in-the-git-repository-1657387589093","postType":"QUESTION","createdAt":"2022-07-09T17:26:29.000Z","updatedAt":"2022-07-09T17:26:29.000Z","tags":[{"id":1835,"name":"git-rewrite-history","slug":"git-rewrite-history","createdAt":"2022-07-09T17:26:29.000Z","updatedAt":"2022-07-09T17:26:29.000Z","Questions_Tags":{"questionId":310,"tagId":1835}},{"id":1837,"name":"version-control","slug":"version-control","createdAt":"2022-07-09T17:26:29.000Z","updatedAt":"2022-07-09T17:26:29.000Z","Questions_Tags":{"questionId":310,"tagId":1837}},{"id":1838,"name":"git-rebase","slug":"git-rebase","createdAt":"2022-07-09T17:26:29.000Z","updatedAt":"2022-07-09T17:26:29.000Z","Questions_Tags":{"questionId":310,"tagId":1838}}]},{"id":309,"title":"Most efficient method to groupby on an array of objects","slug":"most-efficient-method-to-groupby-on-an-array-of-objects-1657387580538","postType":"QUESTION","createdAt":"2022-07-09T17:26:20.000Z","updatedAt":"2022-07-09T17:26:20.000Z","tags":[{"id":1834,"name":"underscore.js","slug":"underscore.js","createdAt":"2022-07-09T17:26:20.000Z","updatedAt":"2022-07-09T17:26:20.000Z","Questions_Tags":{"questionId":309,"tagId":1834}}]},{"id":308,"title":"I just assigned a variable, but echo $variable shows something else","slug":"i-just-assigned-a-variable-but-echo-dollarvariable-shows-something-else-1657387574561","postType":"QUESTION","createdAt":"2022-07-09T17:26:14.000Z","updatedAt":"2022-07-09T17:26:14.000Z","tags":[{"id":1827,"name":"quoting","slug":"quoting","createdAt":"2022-07-09T17:26:14.000Z","updatedAt":"2022-07-09T17:26:14.000Z","Questions_Tags":{"questionId":308,"tagId":1827}},{"id":1828,"name":"sh","slug":"sh","createdAt":"2022-07-09T17:26:14.000Z","updatedAt":"2022-07-09T17:26:14.000Z","Questions_Tags":{"questionId":308,"tagId":1828}}]},{"id":307,"title":"Find object by id in an array of JavaScript objects","slug":"find-object-by-id-in-an-array-of-javascript-objects-1657387572087","postType":"QUESTION","createdAt":"2022-07-09T17:26:12.000Z","updatedAt":"2022-07-09T17:26:12.000Z","tags":[]},{"id":306,"title":"How to store objects in HTML5 localStorage","slug":"how-to-store-objects-in-html5-localstorage-1657387568907","postType":"QUESTION","createdAt":"2022-07-09T17:26:08.000Z","updatedAt":"2022-07-09T17:26:08.000Z","tags":[{"id":1822,"name":"local-storage","slug":"local-storage","createdAt":"2022-07-09T17:26:09.000Z","updatedAt":"2022-07-09T17:26:09.000Z","Questions_Tags":{"questionId":306,"tagId":1822}}]}]},"answers":{"306":["\n&lt;p&gt;Looking at the &lt;a href=&quot;https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Name-ValueStorage/Name-ValueStorage.html&quot; rel=&quot;noreferrer&quot;&gt;Apple&lt;/a&gt;, &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API&quot; rel=&quot;noreferrer&quot;&gt;Mozilla&lt;/a&gt; and &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem&quot; rel=&quot;noreferrer&quot;&gt;Mozilla again&lt;/a&gt; documentation, the functionality seems to be limited to handle only string key/value pairs.&lt;/p&gt;\n\n&lt;p&gt;A workaround can be to &lt;a href=&quot;https://www.w3schools.com/js/js_json_stringify.asp&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;stringify&lt;/em&gt;&lt;/a&gt; your object before storing it, and later parse it when you retrieve it:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; testObject = { &lt;span class=&quot;hljs-string&quot;&gt;&apos;one&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;two&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;three&apos;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; };\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Put the object into storage&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;testObject&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(testObject));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Retrieve the object from storage&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; retrievedObject = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;testObject&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;retrievedObject: &apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(retrievedObject));\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;A minor improvement on a &lt;a href=&quot;https://stackoverflow.com/a/2010994/59087&quot;&gt;variant&lt;/a&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(key, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(value));\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; value = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(key);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value &amp;amp;&amp;amp; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(value);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Because of &lt;a href=&quot;http://en.wikipedia.org/wiki/Short-circuit_evaluation&quot; rel=&quot;noreferrer&quot;&gt;short-circuit evaluation&lt;/a&gt;, &lt;code&gt;getObject()&lt;/code&gt; will &lt;em&gt;immediately&lt;/em&gt; return &lt;code&gt;null&lt;/code&gt; if &lt;code&gt;key&lt;/code&gt; is not in Storage. It also will not throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception if &lt;code&gt;value&lt;/code&gt; is &lt;code&gt;&quot;&quot;&lt;/code&gt; (the empty string; &lt;code&gt;JSON.parse()&lt;/code&gt; cannot handle that).&lt;/p&gt;\n    ","\n&lt;p&gt;You might find it useful to extend the Storage object with these handy methods:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(key, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(value));\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(key));\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This way you get the functionality that you really wanted even though underneath the API only supports strings.&lt;/p&gt;\n    ","\n&lt;p&gt;Creating a facade for the Storage object is an awesome solution. That way, you can implement your own &lt;code&gt;get&lt;/code&gt; and &lt;code&gt;set&lt;/code&gt; methods. For my API, I have created a facade for localStorage and then check if it is an object or not while setting and getting.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = {\n  &lt;span class=&quot;hljs-attr&quot;&gt;set&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!key || !value) {&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;}\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; value === &lt;span class=&quot;hljs-string&quot;&gt;&quot;object&quot;&lt;/span&gt;) {\n      value = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(value);\n    }\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(key, value);\n  },\n  &lt;span class=&quot;hljs-attr&quot;&gt;get&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; value = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(key);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!value) {&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;}\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// assume it is an object that has been stringified&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (value[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] === &lt;span class=&quot;hljs-string&quot;&gt;&quot;{&quot;&lt;/span&gt;) {\n      value = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(value);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value;\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h2&gt;Stringify doesn&apos;t solve all problems&lt;/h2&gt;\n&lt;p&gt;It seems that the answers here don&apos;t cover all types that are possible in JavaScript, so here are some short examples on how to deal with them correctly:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Objects and Arrays:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = {&lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;value&quot;&lt;/span&gt;};\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj);  &lt;span class=&quot;hljs-comment&quot;&gt;// Will ignore private members&lt;/span&gt;\n    obj = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Boolean:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bool = &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;bool&lt;/span&gt; = bool;\n    bool = (&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;bool&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Numbers:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; num = &lt;span class=&quot;hljs-number&quot;&gt;42&lt;/span&gt;;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;num&lt;/span&gt; = num;\n    num = +&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;num&lt;/span&gt;;    &lt;span class=&quot;hljs-comment&quot;&gt;// Short for &quot;num = parseFloat(localStorage.num);&quot;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Dates:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; date = &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;now&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;date&lt;/span&gt; = date;\n    date = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;parseInt&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;date&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Regular expressions:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; regex = &lt;span class=&quot;hljs-regexp&quot;&gt;/^No\\.[\\d]*$/i&lt;/span&gt;;     &lt;span class=&quot;hljs-comment&quot;&gt;// Usage example: &quot;No.42&quot;.match(regex);&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;regex&lt;/span&gt; = regex;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; components = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;regex&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;^/(.*)/([a-z]*)$&quot;&lt;/span&gt;);\n    regex = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(components[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;], components[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;]);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Functions (not recommended):&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;func&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {}\n\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;func&lt;/span&gt; = func;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;eval&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;func&lt;/span&gt;);      &lt;span class=&quot;hljs-comment&quot;&gt;// Recreates the function with the name &quot;func&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;I do not recommend&lt;/strong&gt; to store functions, because &lt;code&gt;eval()&lt;/code&gt; is evil and can lead to issues regarding security, optimisation and debugging.&lt;/p&gt;\n&lt;p&gt;In general, &lt;code&gt;eval()&lt;/code&gt; should never be used in JavaScript code.&lt;/p&gt;\n&lt;h2&gt;Private members&lt;/h2&gt;\n&lt;p&gt;The problem with using &lt;code&gt;JSON.stringify()&lt;/code&gt; for storing objects is, that this function can not serialise private members.&lt;/p&gt;\n&lt;p&gt;This issue can be solved by overwriting the &lt;code&gt;.toString()&lt;/code&gt; method (which is called implicitly when storing data in web storage):&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Object with private and public members:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;MyClass&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;privateContent, publicContent&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; privateMember = privateContent || &lt;span class=&quot;hljs-string&quot;&gt;&quot;defaultPrivateValue&quot;&lt;/span&gt;;\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;publicMember&lt;/span&gt; = publicContent  || &lt;span class=&quot;hljs-string&quot;&gt;&quot;defaultPublicValue&quot;&lt;/span&gt;;\n\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;toString&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;{&quot;private&quot;: &quot;&apos;&lt;/span&gt; + privateMember + &lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;, &quot;public&quot;: &quot;&apos;&lt;/span&gt; + &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;publicMember&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;}&apos;&lt;/span&gt;;\n        };\n    }\n    &lt;span class=&quot;hljs-title class_&quot;&gt;MyClass&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;fromString&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;serialisedString&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; properties = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(serialisedString || &lt;span class=&quot;hljs-string&quot;&gt;&quot;{}&quot;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyClass&lt;/span&gt;(properties.&lt;span class=&quot;hljs-property&quot;&gt;private&lt;/span&gt;, properties.&lt;span class=&quot;hljs-property&quot;&gt;public&lt;/span&gt;);\n    };\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Storing:&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;MyClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;invisible&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;visible&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt; = obj;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Loading:&lt;/span&gt;\n    obj = &lt;span class=&quot;hljs-title class_&quot;&gt;MyClass&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;fromString&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Circular references&lt;/h2&gt;\n&lt;p&gt;Another problem &lt;code&gt;stringify&lt;/code&gt; can&apos;t deal with are circular references:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = {};\nobj[&lt;span class=&quot;hljs-string&quot;&gt;&quot;circular&quot;&lt;/span&gt;] = obj;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj);  &lt;span class=&quot;hljs-comment&quot;&gt;// Fails&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In this example, &lt;code&gt;JSON.stringify()&lt;/code&gt; will throw a &lt;code&gt;TypeError&lt;/code&gt; &lt;em&gt;&quot;Converting circular structure to JSON&quot;&lt;/em&gt;.&lt;/p&gt;\n&lt;p&gt;If storing circular references should be supported, the second parameter of &lt;code&gt;JSON.stringify()&lt;/code&gt; might be used:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = {&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;sub&lt;/span&gt;: {}};\nobj.&lt;span class=&quot;hljs-property&quot;&gt;sub&lt;/span&gt;[&lt;span class=&quot;hljs-string&quot;&gt;&quot;circular&quot;&lt;/span&gt;] = obj;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;object&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(key == &lt;span class=&quot;hljs-string&quot;&gt;&apos;circular&apos;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;$ref&quot;&lt;/span&gt; + value.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot;$&quot;&lt;/span&gt;;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value;\n    }\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;However, finding an efficient solution for storing circular references highly depends on the tasks that need to be solved, and restoring such data is not trivial either.&lt;/p&gt;\n&lt;p&gt;There are already some question on Stack&amp;nbsp;Overflow dealing with this problem: &lt;em&gt;&lt;a href=&quot;https://stackoverflow.com/questions/10392293/stringify-javascript-object-with-circular-reference/12659424#12659424&quot;&gt;Stringify (convert to JSON) a JavaScript object with circular reference&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;There is a great library that wraps many solutions so it even supports older browsers called &lt;a href=&quot;https://github.com/andris9/jStorage&quot; rel=&quot;nofollow noreferrer&quot;&gt;jStorage&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;You can set an object&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-shell&quot;&gt;&lt;span class=&quot;hljs-meta prompt_&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;language-bash&quot;&gt;.jStorage.&lt;span class=&quot;hljs-built_in&quot;&gt;set&lt;/span&gt;(key, value)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And retrieve it easily&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt; = $.jStorage.get(key)\n&lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt; = $.jStorage.get(key, &lt;span class=&quot;hljs-string&quot;&gt;&quot;default value&quot;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I arrived at this post after hitting on another post that has been closed as a duplicate of this - titled &apos;how to store an array in localstorage?&apos;.  Which is fine except neither thread actually provides a full answer as to how you can maintain an array in localStorage - however I have managed to craft a solution based on information contained in both threads.&lt;/p&gt;\n\n&lt;p&gt;So if anyone else is wanting to be able to push/pop/shift items within an array, and they want that array stored in localStorage or indeed sessionStorage, here you go:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getArray&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; thisArray = [];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; fetchArrayObject = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(arrayName);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; fetchArrayObject !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (fetchArrayObject !== &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) { thisArray = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(fetchArrayObject); }\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; thisArray;\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;pushArrayItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName,arrayItem&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; existingArray = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getArray&lt;/span&gt;(arrayName);\n  existingArray.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(arrayItem);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(arrayName,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(existingArray));\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;popArrayItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; arrayItem = {};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; existingArray = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getArray&lt;/span&gt;(arrayName);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (existingArray.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n    arrayItem = existingArray.&lt;span class=&quot;hljs-title function_&quot;&gt;pop&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(arrayName,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(existingArray));\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arrayItem;\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;shiftArrayItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; arrayItem = {};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; existingArray = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getArray&lt;/span&gt;(arrayName);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (existingArray.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n    arrayItem = existingArray.&lt;span class=&quot;hljs-title function_&quot;&gt;shift&lt;/span&gt;();\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(arrayName,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(existingArray));\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arrayItem;\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;unshiftArrayItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName,arrayItem&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; existingArray = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getArray&lt;/span&gt;(arrayName);\n  existingArray.&lt;span class=&quot;hljs-title function_&quot;&gt;unshift&lt;/span&gt;(arrayItem);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(arrayName,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(existingArray));\n}\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;deleteArray&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arrayName&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;removeItem&lt;/span&gt;(arrayName);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;example usage - storing simple strings in localStorage array:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;pushArrayItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myArray&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;item one&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;pushArrayItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myArray&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;item two&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;example usage - storing objects in sessionStorage array:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-delphi&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; item1 = &lt;span class=&quot;hljs-comment&quot;&gt;{}&lt;/span&gt;; item1.&lt;span class=&quot;hljs-keyword&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;fred&apos;&lt;/span&gt;; item1.age = &lt;span class=&quot;hljs-number&quot;&gt;48&lt;/span&gt;;\nsessionStorage.pushArrayItem(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myArray&apos;&lt;/span&gt;,item1);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; item2 = &lt;span class=&quot;hljs-comment&quot;&gt;{}&lt;/span&gt;; item2.&lt;span class=&quot;hljs-keyword&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;dave&apos;&lt;/span&gt;; item2.age = &lt;span class=&quot;hljs-number&quot;&gt;22&lt;/span&gt;;\nsessionStorage.pushArrayItem(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myArray&apos;&lt;/span&gt;,item2);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;common methods to manipulate arrays:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-sql&quot;&gt;.pushArrayItem(arrayName,arrayItem); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; adds an element onto &lt;span class=&quot;hljs-keyword&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; named &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;\n.unshiftArrayItem(arrayName,arrayItem); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; adds an element onto front &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; named &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;\n.popArrayItem(arrayName); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; removes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;returns&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;last&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt; element\n.shiftArrayItem(arrayName); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; removes &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;returns&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;first&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt; element\n.getArray(arrayName); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;returns&lt;/span&gt; entire &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt;\n.deleteArray(arrayName); &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; removes entire &lt;span class=&quot;hljs-keyword&quot;&gt;array&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; storage\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;In theory, it is possible to store objects with functions:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;store&lt;/span&gt; (a)\n{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; c = {&lt;span class=&quot;hljs-attr&quot;&gt;f&lt;/span&gt;: {}, &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;: {}};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; a)\n  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (a.&lt;span class=&quot;hljs-title function_&quot;&gt;hasOwnProperty&lt;/span&gt;(k) &amp;amp;&amp;amp; &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; a[k] === &lt;span class=&quot;hljs-string&quot;&gt;&apos;function&apos;&lt;/span&gt;)\n    {\n      c.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt;[k] = &lt;span class=&quot;hljs-built_in&quot;&gt;encodeURIComponent&lt;/span&gt;(a[k]);\n    }\n  }\n\n  c.&lt;span class=&quot;hljs-property&quot;&gt;d&lt;/span&gt; = a;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(c);\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;CODE&apos;&lt;/span&gt;, data);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;restore&lt;/span&gt; ()\n{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;CODE&apos;&lt;/span&gt;);\n  data = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(data);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; b = data.&lt;span class=&quot;hljs-property&quot;&gt;d&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; data.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt;)\n  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (data.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;hasOwnProperty&lt;/span&gt;(k))\n    {\n      b[k] = &lt;span class=&quot;hljs-built_in&quot;&gt;eval&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;(&quot;&lt;/span&gt; + &lt;span class=&quot;hljs-built_in&quot;&gt;decodeURIComponent&lt;/span&gt;(data.&lt;span class=&quot;hljs-property&quot;&gt;f&lt;/span&gt;[k]) + &lt;span class=&quot;hljs-string&quot;&gt;&quot;)&quot;&lt;/span&gt;);\n    }\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; b;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;However, function serialization/deserialization is unreliable because &lt;a href=&quot;http://ecma-international.org/ecma-262/5.1/#sec-15.3.4&quot; rel=&quot;nofollow noreferrer&quot;&gt;it is implementation-dependent&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;It is recommended using an abstraction library for many of the features discussed here, as well as better compatibility. There are lots of options:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/andris9/jStorage&quot; rel=&quot;nofollow noreferrer&quot;&gt;jStorage&lt;/a&gt; or &lt;a href=&quot;https://github.com/andris9/simpleStorage&quot; rel=&quot;nofollow noreferrer&quot;&gt;simpleStorage&lt;/a&gt;  my preference&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/mozilla/localForage&quot; rel=&quot;nofollow noreferrer&quot;&gt;localForage&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/alekseykulikov/storage&quot; rel=&quot;nofollow noreferrer&quot;&gt;alekseykulikov/storage&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/brianleroux/lawnchair&quot; rel=&quot;nofollow noreferrer&quot;&gt;Lawnchair&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/marcuswestin/store.js&quot; rel=&quot;nofollow noreferrer&quot;&gt;Store.js&lt;/a&gt;  another good option&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/aaronagray/omg&quot; rel=&quot;nofollow noreferrer&quot;&gt;OMG&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://github.com/macmcmeans/localDataStorage&quot; rel=&quot;nofollow noreferrer&quot;&gt;localDataStorage&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;You can use &lt;a href=&quot;https://github.com/macmcmeans/localDataStorage&quot; rel=&quot;nofollow noreferrer&quot;&gt;localDataStorage&lt;/a&gt; to transparently store JavaScript data types (Array, Boolean, Date, Float, Integer, String and Object). It also provides lightweight data obfuscation, automatically compresses strings, facilitates query by key (name) as well as query by (key) value, and helps to enforce segmented shared storage within the same domain by prefixing keys.&lt;/p&gt;\n&lt;p&gt;[DISCLAIMER] I am the author of the utility [/DISCLAIMER]&lt;/p&gt;\n&lt;p&gt;Examples:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;localDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;set&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key1&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Belgian&apos;&lt;/span&gt; )\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;set&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key2&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1200.0047&lt;/span&gt; )\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;set&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key3&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt; )\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;set&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key4&apos;&lt;/span&gt;, { &lt;span class=&quot;hljs-string&quot;&gt;&apos;RSK&apos;&lt;/span&gt; : [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;3&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;7&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;] } )\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;set&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key5&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; )\n\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key1&apos;&lt;/span&gt; )  &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt;   &apos;Belgian&apos;&lt;/span&gt;\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key2&apos;&lt;/span&gt; )  &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt;   1200.0047&lt;/span&gt;\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key3&apos;&lt;/span&gt; )  &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt;   true&lt;/span&gt;\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key4&apos;&lt;/span&gt; )  &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt;   Object {RSK: Array(5)}&lt;/span&gt;\nlocalDataStorage.&lt;span class=&quot;hljs-keyword&quot;&gt;get&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;key5&apos;&lt;/span&gt; )  &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt;   null&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;As you can see, the primitive values are respected.&lt;/p&gt;\n    ","\n&lt;p&gt;You cannot store a key value without a string format.&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;LocalStorage&lt;/em&gt; only supports string formats for keys/values.&lt;/p&gt;\n&lt;p&gt;That is why you should convert your data to string whatever it is an array or object.&lt;/p&gt;\n&lt;p&gt;To &lt;em&gt;store&lt;/em&gt; data in localStorage, first of all stringify it using the JSON.stringify() method.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myObj = [{&lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;test&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;time&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Date 2017-02-03T08:38:04.449Z&quot;&lt;/span&gt;}];\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;item&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(myObj));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Then when you want to retrieve data, you need to parse the string to object again.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; getObj = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;item&apos;&lt;/span&gt;));\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can use &lt;a href=&quot;https://docs.meteor.com/api/ejson.html&quot; rel=&quot;noreferrer&quot;&gt;ejson&lt;/a&gt; to store the objects as strings.&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;EJSON is an extension of JSON to support more types. It supports all JSON-safe types, as well as:&lt;/p&gt;\n  \n  &lt;ul&gt;\n  &lt;li&gt;Date (JavaScript &lt;code&gt;Date&lt;/code&gt;)&lt;/li&gt;\n  &lt;li&gt;Binary (JavaScript &lt;code&gt;Uint8Array&lt;/code&gt; or the result of &lt;a href=&quot;https://docs.meteor.com/api/ejson.html#ejson_new_binary&quot; rel=&quot;noreferrer&quot;&gt;EJSON.newBinary&lt;/a&gt;)&lt;/li&gt;\n  &lt;li&gt;User-defined types (see &lt;a href=&quot;https://docs.meteor.com/api/ejson.html#ejson_add_type&quot; rel=&quot;noreferrer&quot;&gt;EJSON.addType&lt;/a&gt;. For example, &lt;a href=&quot;https://docs.meteor.com/api/ejson.html#mongo_object_id&quot; rel=&quot;noreferrer&quot;&gt;Mongo.ObjectID&lt;/a&gt; is implemented this way.)&lt;/li&gt;\n  &lt;/ul&gt;\n  \n  &lt;p&gt;All EJSON serializations are also valid JSON. For example an object with a date and a binary buffer would be serialized in EJSON as:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;{\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;d&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;$date&lt;/span&gt;&quot;&lt;/span&gt;: 1358205756553},\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;$binary&lt;/span&gt;&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;c3VyZS4=&quot;&lt;/span&gt;}\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Here is my localStorage wrapper using ejson&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/UziTech/storage.js&quot; rel=&quot;noreferrer&quot;&gt;https://github.com/UziTech/storage.js&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;I added some types to my wrapper including regular expressions and functions&lt;/p&gt;\n    ","\n&lt;p&gt;Another option would be to use an existing plugin.&lt;/p&gt;\n\n&lt;p&gt;For example &lt;a href=&quot;https://github.com/mar10/persisto&quot; rel=&quot;noreferrer&quot;&gt;persisto&lt;/a&gt; is an open source project that provides an easy interface to localStorage/sessionStorage and automates persistence for form fields (input, radio buttons, and checkboxes).&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/cU5V0.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/cU5V0.png&quot; alt=&quot;persisto features&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;(Disclaimer: I am the author.)&lt;/p&gt;\n    ","\n&lt;p&gt;For TypeScript users willing to set and get typed properties:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Silly wrapper to be able to type the storage keys\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-function&quot;&gt;export &lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;TypedStorage&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;T&lt;/span&gt;&amp;gt;&lt;/span&gt; {\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;removeItem&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key: keyof T&lt;/span&gt;): &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;&lt;/span&gt; {\n        localStorage.removeItem(key);\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;getItem&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;keyof&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;T&lt;/span&gt;&amp;gt;(&lt;span class=&quot;hljs-params&quot;&gt;key: K&lt;/span&gt;): T[K] | &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; data: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt; | &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; =  localStorage.getItem(key);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; JSON.parse(data);\n    }\n\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;setItem&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;keyof&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;T&lt;/span&gt;&amp;gt;(&lt;span class=&quot;hljs-params&quot;&gt;key: K, &lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;: T[K]&lt;/span&gt;): &lt;span class=&quot;hljs-keyword&quot;&gt;void&lt;/span&gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; data: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt; = JSON.stringify(&lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;);\n        localStorage.setItem(key, data);\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;a href=&quot;http://www.typescriptlang.org/play/#src=%2F**%0D%0A%20*%20Silly%20wrapper%20to%20be%20able%20to%20type%20the%20storage%20keys%0D%0A%20*%2F%0D%0Aexport%20class%20TypedStorage%3CT%3E%20%7B%0D%0A%0D%0A%20%20%20%20public%20removeItem(key%3A%20keyof%20T)%3A%20void%20%7B%0D%0A%20%20%20%20%20%20%20%20localStorage.removeItem(key)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20public%20getItem%3CK%20extends%20keyof%20T%3E(key%3A%20K)%3A%20T%5BK%5D%20%7C%20null%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20data%3A%20string%20%7C%20null%20%3D%20%20localStorage.getItem(key)%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.parse(data)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20public%20setItem%3CK%20extends%20keyof%20T%3E(key%3A%20K%2C%20value%3A%20T%5BK%5D)%3A%20void%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20data%3A%20string%20%3D%20JSON.stringify(value)%3B%0D%0A%20%20%20%20%20%20%20%20localStorage.setItem(key%2C%20data)%3B%0D%0A%20%20%20%20%7D%0D%0A%7D%0D%0A%0D%0A%2F%2F%20write%20an%20interface%20for%20the%20storage%0D%0Ainterface%20MyStore%20%7B%0D%0A%20%20%20age%3A%20number%2C%0D%0A%20%20%20name%3A%20string%2C%0D%0A%20%20%20address%3A%20%7Bcity%3Astring%7D%0D%0A%7D%0D%0A%0D%0Aconst%20storage%3A%20TypedStorage%3CMyStore%3E%20%3D%20new%20TypedStorage%3CMyStore%3E()%3B%0D%0A%0D%0Astorage.setItem(%22wrong%20key%22%2C%20%22%22)%3B%20%2F%2F%20error%20unknown%20key%0D%0Astorage.setItem(%22age%22%2C%20%22hello%22)%3B%20%2F%2F%20error%2C%20age%20should%20be%20number%0D%0Astorage.setItem(%22address%22%2C%20%7Bcity%3A%22Here%22%7D)%3B%20%2F%2F%20ok%0D%0A%0D%0Aconst%20address%3A%20%7Bcity%3Astring%7D%20%3D%20storage.getItem(%22address%22)%3B&quot; rel=&quot;nofollow noreferrer&quot;&gt;Example usage&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// write an interface for the storage&lt;/span&gt;\n&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;MyStore&lt;/span&gt; &lt;/span&gt;{\n   age: number,\n   name: &lt;span class=&quot;hljs-keyword&quot;&gt;string&lt;/span&gt;,\n   address: {city:&lt;span class=&quot;hljs-keyword&quot;&gt;string&lt;/span&gt;}\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;storage&lt;/span&gt;: TypedStorage&amp;lt;MyStore&amp;gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;TypedStorage&lt;/span&gt;&amp;lt;MyStore&amp;gt;();\n\nstorage.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;wrong key&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// error unknown key&lt;/span&gt;\nstorage.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;hello&quot;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// error, age should be number&lt;/span&gt;\nstorage.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;address&quot;&lt;/span&gt;, {&lt;span class=&quot;hljs-attr&quot;&gt;city&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Here&quot;&lt;/span&gt;}); &lt;span class=&quot;hljs-comment&quot;&gt;// ok&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;address&lt;/span&gt;: {city:&lt;span class=&quot;hljs-keyword&quot;&gt;string&lt;/span&gt;} = storage.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;address&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;https://github.com/adrianmay/rhaboo&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://github.com/adrianmay/rhaboo&lt;/a&gt; is a localStorage sugar layer that lets you write things like this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; store = Rhaboo.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;persistent&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Some name&apos;&lt;/span&gt;);\nstore.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;write&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;count&apos;&lt;/span&gt;, store.count ? store.count+&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\nstore.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;write&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;somethingfancy&apos;&lt;/span&gt;, {\n  &lt;span class=&quot;hljs-attr&quot;&gt;one&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&apos;man&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;went&apos;&lt;/span&gt;],\n  &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;mow&apos;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;went&lt;/span&gt;: [  &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;mow&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;meadow&apos;&lt;/span&gt; ] }, {}  ]\n});\nstore.somethingfancy.went[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;].mow.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;write&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;lawn&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It doesn&apos;t use JSON.stringify/parse because that would be inaccurate and slow on big objects. Instead, each terminal value has its own localStorage entry.&lt;/p&gt;\n\n&lt;p&gt;You can probably guess that I might have something to do with rhaboo.&lt;/p&gt;\n    ","\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;Akash&apos;&lt;/span&gt;})); &lt;span class=&quot;hljs-comment&quot;&gt;// Set Object in localStorage&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Get Object from localStorage&lt;/span&gt;\n\nsessionStorage.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;Akash&apos;&lt;/span&gt;})); &lt;span class=&quot;hljs-comment&quot;&gt;// Set Object in sessionStorage&lt;/span&gt;\nsessionStorage.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;obj&apos;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Get Object from sessionStorage&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I made another minimalistic wrapper with only 20 lines of code to allow using it like it should:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myKey&apos;&lt;/span&gt;,{&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;], &lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;ok&apos;&lt;/span&gt;});\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myKey&apos;&lt;/span&gt;);   &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt; true&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myKey&apos;&lt;/span&gt;);   &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt; {a:[1,2,5], b: &apos;ok&apos;}&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;();         &lt;span class=&quot;hljs-comment&quot;&gt;// --&amp;gt; [&apos;myKey&apos;]&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;remove&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;myKey&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/zevero/simpleWebstorage&quot; rel=&quot;nofollow&quot;&gt;https://github.com/zevero/simpleWebstorage&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I made a thing that doesn&apos;t break the existing Storage objects, but creates a wrapper so you can do what you want. The result is a normal object, no methods, with access like any object.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/rudiedirkx/ObjectStorage&quot; rel=&quot;nofollow&quot;&gt;The thing I made.&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;If you want 1 &lt;code&gt;localStorage&lt;/code&gt; property to be magic:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; prop = &lt;span class=&quot;hljs-title class_&quot;&gt;ObjectStorage&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;prop&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If you need several:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; storage = &lt;span class=&quot;hljs-title class_&quot;&gt;ObjectStorage&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;prop&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;more&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;props&apos;&lt;/span&gt;]);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Everything you do to &lt;code&gt;prop&lt;/code&gt;, or the objects &lt;strong&gt;inside&lt;/strong&gt; &lt;code&gt;storage&lt;/code&gt; will be automatically saved into &lt;code&gt;localStorage&lt;/code&gt;. You&apos;re always playing with a real object, so you can do stuff like this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;storage.&lt;span class=&quot;hljs-keyword&quot;&gt;data&lt;/span&gt;.list.push(&lt;span class=&quot;hljs-string&quot;&gt;&apos;more data&apos;&lt;/span&gt;);\nstorage.another.list.splice(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, {another: &lt;span class=&quot;hljs-string&quot;&gt;&apos;object&apos;&lt;/span&gt;});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And every new object &lt;strong&gt;inside&lt;/strong&gt; a tracked object will be automatically tracked.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;The very big downside:&lt;/strong&gt; it depends on &lt;code&gt;Object.observe()&lt;/code&gt; so it has very limited browser support. And it doesn&apos;t look like it&apos;ll be coming for Firefox or Edge anytime soon.&lt;/p&gt;\n    ","\n&lt;p&gt;I found a way to make it work with objects that have cyclic references.&lt;/p&gt;\n\n&lt;p&gt;Let&apos;s make an object with cyclic references.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-string&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;L:&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L:&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;v:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;lorem&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R:&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;v:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;ipsum&apos;&lt;/span&gt; }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;R:&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L:&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;v:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;dolor&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R:&lt;/span&gt; {\n            &lt;span class=&quot;hljs-attr&quot;&gt;L:&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;v:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;sit&apos;&lt;/span&gt; },\n            &lt;span class=&quot;hljs-attr&quot;&gt;R:&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;v:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;amet&apos;&lt;/span&gt; }\n        }\n    }\n}\n&lt;span class=&quot;hljs-string&quot;&gt;obj.R.L.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.L;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;obj.R.R.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.L;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;obj.R.R.L.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.R.L;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;obj.R.R.R.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.R.L;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;obj.L.L.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.R;&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;obj.L.R.uncle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;obj.R;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;We can&apos;t do &lt;code&gt;JSON.stringify&lt;/code&gt; here, because of the circular references.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/4taQx.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/4taQx.png&quot; alt=&quot;circularUncle&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;LOCALSTORAGE.CYCLICJSON&lt;/code&gt; has &lt;code&gt;.stringify&lt;/code&gt; and &lt;code&gt;.parse&lt;/code&gt; just like normal &lt;code&gt;JSON&lt;/code&gt;, but works with objects with circular references. (&quot;Works&quot; meaning parse(stringify(obj)) and obj are deep equal AND have identical sets of &apos;inner equalities&apos;)&lt;/p&gt;\n\n&lt;p&gt;But we can just use the shortcuts:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;LOCALSTORAGE.setObject(&lt;span class=&quot;hljs-string&quot;&gt;&apos;latinUncles&apos;&lt;/span&gt;, obj)\nrecovered = LOCALSTORAGE.getObject(&lt;span class=&quot;hljs-string&quot;&gt;&apos;latinUncles&apos;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then, &lt;code&gt;recovered&lt;/code&gt; will be &quot;the same&quot; to obj, in the following sense:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-section&quot;&gt;[\nobj.L.L.v === recovered.L.L.v,\nobj.L.R.v === recovered.L.R.v,\nobj.R.L.v === recovered.R.L.v,\nobj.R.R.L.v === recovered.R.R.L.v,\nobj.R.R.R.v === recovered.R.R.R.v,\nobj.R.L.uncle === obj.L,\nobj.R.R.uncle === obj.L,\nobj.R.R.L.uncle === obj.R.L,\nobj.R.R.R.uncle === obj.R.L,\nobj.L.L.uncle === obj.R,\nobj.L.R.uncle === obj.R,\nrecovered.R.L.uncle === recovered.L,\nrecovered.R.R.uncle === recovered.L,\nrecovered.R.R.L.uncle === recovered.R.L,\nrecovered.R.R.R.uncle === recovered.R.L,\nrecovered.L.L.uncle === recovered.R,\nrecovered.L.R.uncle === recovered.R\n]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here is the implementation of &lt;code&gt;LOCALSTORAGE&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable constant_&quot;&gt;LOCALSTORAGE&lt;/span&gt; = (&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;use strict&quot;&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ignore = [&lt;span class=&quot;hljs-title class_&quot;&gt;Boolean&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;primitive&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; item === &lt;span class=&quot;hljs-string&quot;&gt;&apos;object&apos;&lt;/span&gt;){\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (item === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;; }\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i&amp;lt;ignore.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++){\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (item &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; ignore[i]) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;; }\n      }\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n    }\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;infant&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;value&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(value) ? [] : {};\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;decycleIntoForest&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;object, replacer&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; replacer !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;function&apos;&lt;/span&gt;){\n      replacer = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;){ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; x; }\n    }\n    object = &lt;span class=&quot;hljs-title function_&quot;&gt;replacer&lt;/span&gt;(object);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;primitive&lt;/span&gt;(object)) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; object;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; objects = [object];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; forest  = [&lt;span class=&quot;hljs-title function_&quot;&gt;infant&lt;/span&gt;(object)];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bucket  = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;WeakMap&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// bucket = inverse of objects &lt;/span&gt;\n    bucket.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(object, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);    \n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;addToBucket&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;){\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result = objects.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;\n      objects.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(obj);\n      bucket.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(obj, result);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;isInBucket&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;){ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; bucket.&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(obj); }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;processNode&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;source, target&lt;/span&gt;){\n      &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(source).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;){\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; value = &lt;span class=&quot;hljs-title function_&quot;&gt;replacer&lt;/span&gt;(source[key]);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;primitive&lt;/span&gt;(value)){\n          target[key] = {&lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: value};\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ptr;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;isInBucket&lt;/span&gt;(value)){\n            ptr = bucket.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(value);\n          } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            ptr = &lt;span class=&quot;hljs-title function_&quot;&gt;addToBucket&lt;/span&gt;(value);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; newTree = &lt;span class=&quot;hljs-title function_&quot;&gt;infant&lt;/span&gt;(value);\n            forest.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(newTree);\n            &lt;span class=&quot;hljs-title function_&quot;&gt;processNode&lt;/span&gt;(value, newTree);\n          }\n          target[key] = {&lt;span class=&quot;hljs-attr&quot;&gt;pointer&lt;/span&gt;: ptr};\n        }\n      });\n    }\n    &lt;span class=&quot;hljs-title function_&quot;&gt;processNode&lt;/span&gt;(object, forest[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; forest;\n  };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;deForestIntoCycle&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;forest&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; objects = [];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; objectRequested = [];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; todo = [];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;processTree&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;idx&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (idx &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; objects) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; objects[idx];\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (objectRequested[idx]) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n      objectRequested[idx] = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tree = forest[idx];\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; node = &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(tree) ? [] : {};\n      &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; key &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; tree) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; o = tree[key];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-string&quot;&gt;&apos;pointer&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; o) {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ptr = o.&lt;span class=&quot;hljs-property&quot;&gt;pointer&lt;/span&gt;;\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; value = &lt;span class=&quot;hljs-title function_&quot;&gt;processTree&lt;/span&gt;(ptr);\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (value === &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n            todo.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;({\n              &lt;span class=&quot;hljs-attr&quot;&gt;node&lt;/span&gt;: node,\n              &lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;: key,\n              &lt;span class=&quot;hljs-attr&quot;&gt;idx&lt;/span&gt;: ptr\n            });\n          } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            node[key] = value;\n          }\n        } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-string&quot;&gt;&apos;value&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; o) {\n            node[key] = o.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;;\n          } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;unexpected&apos;&lt;/span&gt;)\n          }\n        }\n      }\n      objects[idx] = node;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; node;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result = &lt;span class=&quot;hljs-title function_&quot;&gt;processTree&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; todo.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; item = todo[i];\n      item.&lt;span class=&quot;hljs-property&quot;&gt;node&lt;/span&gt;[item.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt;] = objects[item.&lt;span class=&quot;hljs-property&quot;&gt;idx&lt;/span&gt;];\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n  };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt; = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;log&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;){\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; the = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;the&apos;&lt;/span&gt;);\n      the.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; = the.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n&apos;&lt;/span&gt; + x;\n\t},\n\t&lt;span class=&quot;hljs-attr&quot;&gt;delimiter&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; the = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;the&apos;&lt;/span&gt;);\n      the.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; = the.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; +\n\t\t&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n*******************************************&apos;&lt;/span&gt;;\n\t}\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;logCyclicObjectToConsole&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;root&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; cycleFree = &lt;span class=&quot;hljs-title function_&quot;&gt;decycleIntoForest&lt;/span&gt;(root);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; shown = cycleFree.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;tree, idx&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n    });\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; indentIncrement = &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;showItem&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;nodeSlot, indent, label&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; leadingSpaces = &lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;repeat&lt;/span&gt;(indent);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; leadingSpacesPlus = &lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;repeat&lt;/span&gt;(indent + indentIncrement);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (shown[nodeSlot]) {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(leadingSpaces + label + &lt;span class=&quot;hljs-string&quot;&gt;&apos; ... see above (object #&apos;&lt;/span&gt; + nodeSlot + &lt;span class=&quot;hljs-string&quot;&gt;&apos;)&apos;&lt;/span&gt;);\n      } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(leadingSpaces + label + &lt;span class=&quot;hljs-string&quot;&gt;&apos; object#&apos;&lt;/span&gt; + nodeSlot);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tree = cycleFree[nodeSlot];\n        shown[nodeSlot] = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;;\n        &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(tree).&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n          &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; entry = tree[key];\n          &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-string&quot;&gt;&apos;value&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; entry) {\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(leadingSpacesPlus + key + &lt;span class=&quot;hljs-string&quot;&gt;&quot;: &quot;&lt;/span&gt; + entry.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;);\n          } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-string&quot;&gt;&apos;pointer&apos;&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; entry) {\n              &lt;span class=&quot;hljs-title function_&quot;&gt;showItem&lt;/span&gt;(entry.&lt;span class=&quot;hljs-property&quot;&gt;pointer&lt;/span&gt;, indent + indentIncrement, key);\n            }\n          }\n        });\n      }\n    }\n\t&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;delimiter&lt;/span&gt;();\n    &lt;span class=&quot;hljs-title function_&quot;&gt;showItem&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;root&apos;&lt;/span&gt;);\n  };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;decycleIntoForest&lt;/span&gt;(obj));\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;str&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;deForestIntoCycle&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(str));\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;CYCLICJSON&lt;/span&gt; = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;decycleIntoForest&lt;/span&gt;: decycleIntoForest,\n    deForestIntoCycle : deForestIntoCycle,\n    &lt;span class=&quot;hljs-attr&quot;&gt;logCyclicObjectToConsole&lt;/span&gt;: logCyclicObjectToConsole,\n    stringify : stringify,\n    parse : parse\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;setObject&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name, object&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; str = &lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(object);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(name, str);\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getObject&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; str = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(name);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (str===&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(str);\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {\n    &lt;span class=&quot;hljs-variable constant_&quot;&gt;CYCLICJSON&lt;/span&gt; : &lt;span class=&quot;hljs-variable constant_&quot;&gt;CYCLICJSON&lt;/span&gt;,\n    setObject  : setObject,\n    getObject  : getObject\n  }\n})();\nobj = {\n\t&lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: {\n\t\t&lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;lorem&apos;&lt;/span&gt; },\n\t\t&lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;ipsum&apos;&lt;/span&gt; }\n\t},\n\t&lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n\t\t&lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;dolor&apos;&lt;/span&gt; },\n\t\t&lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n\t\t\t&lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;sit&apos;&lt;/span&gt; },\n\t\t\t&lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;amet&apos;&lt;/span&gt; }\n\t\t}\n\t}\n}\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// LOCALSTORAGE.setObject(&apos;latinUncles&apos;, obj)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// recovered = LOCALSTORAGE.getObject(&apos;latinUncles&apos;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// localStorage not available inside fiddle ):&lt;/span&gt;\n&lt;span class=&quot;hljs-variable constant_&quot;&gt;LOCALSTORAGE&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;CYCLICJSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;logCyclicObjectToConsole&lt;/span&gt;(obj)\nputIntoLS = &lt;span class=&quot;hljs-variable constant_&quot;&gt;LOCALSTORAGE&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;CYCLICJSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(obj);\nrecovered = &lt;span class=&quot;hljs-variable constant_&quot;&gt;LOCALSTORAGE&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;CYCLICJSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(putIntoLS);\n&lt;span class=&quot;hljs-variable constant_&quot;&gt;LOCALSTORAGE&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;CYCLICJSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;logCyclicObjectToConsole&lt;/span&gt;(recovered);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; the = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;the&apos;&lt;/span&gt;);\nthe.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; = the.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\n\\n&apos;&lt;/span&gt; +\n&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(\n[\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\nrecovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;\n]\n)&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;pre&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;the&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;pre&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;This question has been answered sufficiently from the JavaScript-only perspective, and others have already noted that both &lt;code&gt;localStorage.getItem&lt;/code&gt; and &lt;code&gt;localStorage.setItem&lt;/code&gt; have no concept of objectsthey handle strings and strings only. This answer provides a TypeScript-friendly solution that incorporates what &lt;a href=&quot;https://stackoverflow.com/a/2010948/39155&quot;&gt;others&lt;/a&gt; &lt;a href=&quot;https://stackoverflow.com/a/3146971/39155&quot;&gt;have&lt;/a&gt; &lt;a href=&quot;https://stackoverflow.com/a/4762411/39155&quot;&gt;suggested&lt;/a&gt; in JavaScript-only solutions.&lt;/p&gt;\n&lt;h2&gt;TypeScript 4.2.3&lt;/h2&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-typescript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;key: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;, value: &lt;span class=&quot;hljs-built_in&quot;&gt;unknown&lt;/span&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(key, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(value));\n};\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getObject&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;key: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; value = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(key);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!value) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(value);\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;declare&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;global&lt;/span&gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attr&quot;&gt;setObject&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;, value: &lt;span class=&quot;hljs-built_in&quot;&gt;unknown&lt;/span&gt;&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;void&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attr&quot;&gt;getObject&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key: &lt;span class=&quot;hljs-built_in&quot;&gt;string&lt;/span&gt;&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;unknown&lt;/span&gt;;\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;Usage&lt;/h3&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setObject&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;ages&apos;&lt;/span&gt;, [&lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;18&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;33&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;22&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;58&lt;/span&gt;]);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getObject&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;ages&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;Explanation&lt;/h3&gt;\n&lt;p&gt;We declare both &lt;code&gt;setObject&lt;/code&gt; and &lt;code&gt;getObject&lt;/code&gt; functions on the &lt;code&gt;Storage&lt;/code&gt; prototype&lt;code&gt;localStorage&lt;/code&gt; is an instance of this type. There&apos;s nothing special we really need to note besides the null handling in &lt;code&gt;getObject&lt;/code&gt;. Since &lt;code&gt;getItem&lt;/code&gt; can return &lt;code&gt;null&lt;/code&gt;, we must exit early since calling &lt;code&gt;JSON.parse&lt;/code&gt; on a &lt;code&gt;null&lt;/code&gt; value will throw a runtime exception.&lt;/p&gt;\n&lt;p&gt;After declaring the functions on the &lt;code&gt;Storage&lt;/code&gt; prototype, we include their type definitions on the &lt;code&gt;Storage&lt;/code&gt; type in the global namespace.&lt;/p&gt;\n&lt;p&gt;Note: If we defined these functions with arrow functions, we&apos;d need to assume that the storage object we&apos;re calling is always &lt;code&gt;localStorage&lt;/code&gt;, which might not be true. For instance, the above code will add &lt;code&gt;setObject&lt;/code&gt; and &lt;code&gt;getObject&lt;/code&gt; support to &lt;code&gt;sessionStorage&lt;/code&gt; as well.&lt;/p&gt;\n    ","\n&lt;p&gt;Here is some extended version of the code &lt;a href=&quot;https://stackoverflow.com/questions/2010892/how-to-store-objects-in-html5-localstorage/5790739#5790739&quot;&gt;posted by danott&lt;/a&gt;:&lt;/p&gt;\n&lt;p&gt;It&apos;ll also implement a &lt;strong&gt;delete&lt;/strong&gt; value from localstorage and shows how to adds a Getter and Setter layer so instead of,&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;localstorage.setItem(preview, true)&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;you can write&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;config.preview = true&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;Okay, here were go:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;=&lt;span class=&quot;hljs-title class_&quot;&gt;Storage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;_setItem&lt;/span&gt; &amp;gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;u&apos;&lt;/span&gt;)\n  &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;_setItem&lt;/span&gt; = &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setItem&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;)\n{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; value &amp;gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;u&apos;&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;//..undefined&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;removeItem&lt;/span&gt;(key)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;_setItem&lt;/span&gt;(key, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(value));\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;_getItem&lt;/span&gt; &amp;gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;u&apos;&lt;/span&gt;)\n  &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;_getItem&lt;/span&gt; = &lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getItem&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable constant_&quot;&gt;PT&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getItem&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;)\n{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ItemData&lt;/span&gt; = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;_getItem&lt;/span&gt;(key)\n  &lt;span class=&quot;hljs-keyword&quot;&gt;try&lt;/span&gt;\n  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;ItemData&lt;/span&gt;);\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;catch&lt;/span&gt;(e)\n  {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ItemData&lt;/span&gt;;\n  }\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Aliases for localStorage.set/getItem&lt;/span&gt;\nget = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getItem&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;bind&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;)\nset = &lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;setItem&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;bind&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;)\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Create ConfigWrapperObject&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; config = {}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Helper to create getter &amp;amp; setter&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;configCreate&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;PropToAdd&lt;/span&gt;){\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;defineProperty&lt;/span&gt;( config, &lt;span class=&quot;hljs-title class_&quot;&gt;PropToAdd&lt;/span&gt;, {\n      &lt;span class=&quot;hljs-attr&quot;&gt;get&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;)    { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;PropToAdd&lt;/span&gt;)    )},\n      &lt;span class=&quot;hljs-attr&quot;&gt;set&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;val&lt;/span&gt;) {         &lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;PropToAdd&lt;/span&gt;, val)}\n    })\n}\n&lt;span class=&quot;hljs-comment&quot;&gt;//------------------------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Usage Part&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Create properties&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;configCreate&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;preview&apos;&lt;/span&gt;)\n&lt;span class=&quot;hljs-title function_&quot;&gt;configCreate&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;notification&apos;&lt;/span&gt;)\n&lt;span class=&quot;hljs-comment&quot;&gt;//...&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Configuration Data transfer&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// Set&lt;/span&gt;\nconfig.&lt;span class=&quot;hljs-property&quot;&gt;preview&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get&lt;/span&gt;\nconfig.&lt;span class=&quot;hljs-property&quot;&gt;preview&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Delete&lt;/span&gt;\nconfig.&lt;span class=&quot;hljs-property&quot;&gt;preview&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Well, you may strip the aliases part with &lt;code&gt;.bind(...)&lt;/code&gt;. However, I just put it in since it&apos;s really good to know about this. I took me hours to find out why a simple &lt;code&gt;get = localStorage.getItem;&lt;/code&gt; don&apos;t work.&lt;/p&gt;\n    ","\n&lt;h3&gt;Circular References&lt;/h3&gt;\n&lt;p&gt;In this answer I focus on data-only objects (without functions, etc.) with circular references and develop ideas mentioned &lt;a href=&quot;https://stackoverflow.com/a/27013704/860099&quot;&gt;by maja&lt;/a&gt; &lt;a href=&quot;https://stackoverflow.com/a/58825573/860099&quot;&gt;and mathheadinclouds&lt;/a&gt; (I use his test case and\nmy code is several times shorter).&lt;/p&gt;\n&lt;p&gt;Actually, we can use JSON.stringify with a proper &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify&quot; rel=&quot;nofollow noreferrer&quot;&gt;replacer&lt;/a&gt; - if the source object contains multi-references to some object, or contains circular references then we reference it by special path-string (similar to &lt;a href=&quot;https://jsonpath.com/&quot; rel=&quot;nofollow noreferrer&quot;&gt;JSONPath&lt;/a&gt;).&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// JSON.strigify replacer for objects with circ ref&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;refReplacer&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; m = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;(), v = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;(), init = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;field, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; p = m.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;) + (&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;) ? &lt;span class=&quot;hljs-string&quot;&gt;`[&lt;span class=&quot;hljs-subst&quot;&gt;${field}&lt;/span&gt;]`&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; + field);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; isComplex = value === &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(value)\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (isComplex) m.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(value, p);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; pp = v.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(value)||&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; path = p.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/undefined\\.\\.?/&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; val = pp ? &lt;span class=&quot;hljs-string&quot;&gt;`#REF:&lt;span class=&quot;hljs-subst&quot;&gt;${pp[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] == &lt;span class=&quot;hljs-string&quot;&gt;&apos;[&apos;&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;$&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;$.&apos;&lt;/span&gt;}&lt;/span&gt;&lt;span class=&quot;hljs-subst&quot;&gt;${pp}&lt;/span&gt;`&lt;/span&gt; : value;\n\n    !init ? (init=value) : (val===init ? val=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#REF:$&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(!pp &amp;amp;&amp;amp; isComplex) v.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(value, path);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; val;\n  }\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// TEST&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Generate obj with duplicate/circular references&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj = {\n    &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;lorem&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;ipsum&apos;&lt;/span&gt; }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;dolor&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n            &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;sit&apos;&lt;/span&gt; },\n            &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;amet&apos;&lt;/span&gt; }\n        }\n    }\n}\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\ntestObject = obj;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; json = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(testObject, &lt;span class=&quot;hljs-title function_&quot;&gt;refReplacer&lt;/span&gt;(), &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Test Object\\n&quot;&lt;/span&gt;, testObject);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;JSON with JSONpath references\\n&quot;&lt;/span&gt;, json);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Parse such JSON content with JSONpath-like references:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Parse JSON content with JSONpath references to object&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;parseRefJSON&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;json&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; objToPath = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; pathToObj = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; o = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(json);\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;traverse&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;parent, field&lt;/span&gt;) =&amp;gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj = parent;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; path = &lt;span class=&quot;hljs-string&quot;&gt;&apos;#REF:$&apos;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (field !== &lt;span class=&quot;hljs-literal&quot;&gt;undefined&lt;/span&gt;) {\n      obj = parent[field];\n      path = objToPath.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(parent) + (&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(parent) ? &lt;span class=&quot;hljs-string&quot;&gt;`[&lt;span class=&quot;hljs-subst&quot;&gt;${field}&lt;/span&gt;]`&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${field ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; + field : &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;}&lt;/span&gt;`&lt;/span&gt;);\n    }\n\n    objToPath.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(obj, path);\n    pathToObj.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(path, obj);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; ref = pathToObj.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(obj);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (ref) parent[field] = ref;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; f &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; obj) &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj === &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;(obj)) &lt;span class=&quot;hljs-title function_&quot;&gt;traverse&lt;/span&gt;(obj, f);\n  }\n\n  &lt;span class=&quot;hljs-title function_&quot;&gt;traverse&lt;/span&gt;(o);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; o;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// TEST 1&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; json = &lt;span class=&quot;hljs-string&quot;&gt;`\n{\n    &quot;L&quot;: {\n        &quot;L&quot;: {\n            &quot;v&quot;: &quot;lorem&quot;,\n            &quot;uncle&quot;: {\n                &quot;L&quot;: {\n                    &quot;v&quot;: &quot;dolor&quot;,\n                    &quot;uncle&quot;: &quot;#REF:$.L&quot;\n                },\n                &quot;R&quot;: {\n                    &quot;L&quot;: {\n                        &quot;v&quot;: &quot;sit&quot;,\n                        &quot;uncle&quot;: &quot;#REF:$.L.L.uncle.L&quot;\n                    },\n                    &quot;R&quot;: {\n                        &quot;v&quot;: &quot;amet&quot;,\n                        &quot;uncle&quot;: &quot;#REF:$.L.L.uncle.L&quot;\n                    },\n                    &quot;uncle&quot;: &quot;#REF:$.L&quot;\n                }\n            }\n        },\n        &quot;R&quot;: {\n            &quot;v&quot;: &quot;ipsum&quot;,\n            &quot;uncle&quot;: &quot;#REF:$.L.L.uncle&quot;\n        }\n    },\n    &quot;R&quot;: &quot;#REF:$.L.L.uncle&quot;\n}`&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; testObject = &lt;span class=&quot;hljs-title function_&quot;&gt;parseRefJSON&lt;/span&gt;(json);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Test Object\\n&quot;&lt;/span&gt;, testObject);\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// TEST 2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Tests from mathheadinclouds answer: &apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; recovered = testObject;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; obj = { &lt;span class=&quot;hljs-comment&quot;&gt;// Original object&lt;/span&gt;\n    &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;lorem&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;ipsum&apos;&lt;/span&gt; }\n    },\n    &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n        &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;dolor&apos;&lt;/span&gt; },\n        &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: {\n            &lt;span class=&quot;hljs-attr&quot;&gt;L&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;sit&apos;&lt;/span&gt; },\n            &lt;span class=&quot;hljs-attr&quot;&gt;R&lt;/span&gt;: { &lt;span class=&quot;hljs-attr&quot;&gt;v&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;amet&apos;&lt;/span&gt; }\n        }\n    }\n}\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\nobj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; = obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;;\n\n[\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;v&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\n  obj.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === obj.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;,\n  recovered.&lt;span class=&quot;hljs-property&quot;&gt;L&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;uncle&lt;/span&gt; === recovered.&lt;span class=&quot;hljs-property&quot;&gt;R&lt;/span&gt;\n].&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;test pass: &apos;&lt;/span&gt; + x));&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;To load/save the resulting JSON content into storage, use the following code:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-ini&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;localStorage.myObject&lt;/span&gt; = JSON.stringify(testObject, refReplacer())&lt;span class=&quot;hljs-comment&quot;&gt;;  // Save&lt;/span&gt;\n&lt;span class=&quot;hljs-attr&quot;&gt;testObject&lt;/span&gt; = parseRefJSON(localStorage.myObject)&lt;span class=&quot;hljs-comment&quot;&gt;;                   // Load&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I suggest using &lt;a href=&quot;https://github.com/pichillilorenzo/jackson-js&quot; rel=&quot;nofollow noreferrer&quot;&gt;Jackson-js&lt;/a&gt;. It is a library that handles serializing and deserializing of Objects while retaining their structure, based on decorators.&lt;/p&gt;\n&lt;p&gt;The library handles all the pitfalls such as cyclic reference, attributes aliasing, etc.&lt;/p&gt;\n&lt;p&gt;Simply describe your class using the @JsonProperty() and @JsonClassType() decorators.&lt;/p&gt;\n&lt;p&gt;Serialize your object using:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-vbnet&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; objectMapper = &lt;span class=&quot;hljs-built_in&quot;&gt;new&lt;/span&gt; ObjectMapper();\nlocalstore.setItem(&lt;span class=&quot;hljs-keyword&quot;&gt;key&lt;/span&gt;, objectMapper.stringify&amp;lt;yourObjectType&amp;gt;(yourObject));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For slightly more detailed explanation, check my answer here:&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;&lt;a href=&quot;https://stackoverflow.com/questions/16261119/typescript-objects-serialization/66706365#66706365&quot;&gt;Typescript objects serialization?&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;And the Jackson-js tutorial here:&lt;/p&gt;\n&lt;p&gt;&lt;em&gt;&lt;a href=&quot;https://itnext.io/jackson-js-powerful-javascript-decorators-to-serialize-deserialize-objects-into-json-and-vice-df952454cf&quot; rel=&quot;nofollow noreferrer&quot;&gt;Jackson-js: Powerful JavaScript decorators to serialize/deserialize objects into JSON and vice versa (Part 1)&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;setItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;user&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(user));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Then to retrieve it from the store and convert to an object again:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; user = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getItem&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;user&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;If&lt;/span&gt; we need to &lt;span class=&quot;hljs-keyword&quot;&gt;delete&lt;/span&gt; all entries &lt;span class=&quot;hljs-keyword&quot;&gt;of&lt;/span&gt; the store we can simply &lt;span class=&quot;hljs-attr&quot;&gt;do&lt;/span&gt;:\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;localStorage&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;clear&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n    "],"307":["\n&lt;p&gt;Use the &lt;code&gt;find()&lt;/code&gt; method:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; x.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;From &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find&quot; rel=&quot;noreferrer&quot;&gt;MDN&lt;/a&gt;:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;The &lt;code&gt;find()&lt;/code&gt; method returns the first value in the array, if an element in the array satisfies the provided testing function. Otherwise &lt;code&gt;undefined&lt;/code&gt; is returned.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;hr&gt;\n&lt;p&gt;If you want to find its &lt;em&gt;index&lt;/em&gt; instead, use &lt;code&gt;findIndex()&lt;/code&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;findIndex&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; x.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;From &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex&quot; rel=&quot;noreferrer&quot;&gt;MDN&lt;/a&gt;:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;The &lt;code&gt;findIndex()&lt;/code&gt; method returns the index of the first element in the array that satisfies the provided testing function. Otherwise -1 is returned.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;hr&gt;\n&lt;p&gt;If you want to get an array of matching elements, use the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;filter()&lt;/code&gt;&lt;/a&gt; method instead:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; x.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This will return an array of objects. If you want to get an array of &lt;code&gt;foo&lt;/code&gt; properties, you can do this with the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;map()&lt;/code&gt;&lt;/a&gt; method:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; x.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; x.&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;Side note: methods like &lt;code&gt;find()&lt;/code&gt; or &lt;code&gt;filter()&lt;/code&gt;, and &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions&quot; rel=&quot;noreferrer&quot;&gt;arrow functions&lt;/a&gt; are not supported by older browsers (like IE), so if you want to support these browsers, you should transpile your code using &lt;a href=&quot;https://babeljs.io/&quot; rel=&quot;noreferrer&quot;&gt;Babel&lt;/a&gt; (with the &lt;a href=&quot;https://babeljs.io/docs/usage/polyfill/&quot; rel=&quot;noreferrer&quot;&gt;polyfill&lt;/a&gt;).&lt;/p&gt;\n    ","\n&lt;p&gt;As you are already using jQuery, you can use the &lt;a href=&quot;http://api.jquery.com/jQuery.grep/&quot; rel=&quot;noreferrer&quot;&gt;grep&lt;/a&gt; function which is intended for searching an array:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result = $.&lt;span class=&quot;hljs-title function_&quot;&gt;grep&lt;/span&gt;(myArray, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;e&lt;/span&gt;){ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; e.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == id; });\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The result is an array with the items found. If you know that the object is always there and that it only occurs once, you can just use &lt;code&gt;result[0].foo&lt;/code&gt; to get the value. Otherwise you should check the length of the resulting array. Example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (result.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;// no result found&lt;/span&gt;\n} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (result.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;// property found, access the foo property using result[0].foo&lt;/span&gt;\n} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n  &lt;span class=&quot;hljs-comment&quot;&gt;// multiple items found&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Another solution is to create a lookup object:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; lookup = {};\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, len = array.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i &amp;lt; len; i++) {\n    lookup[array[i].&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;] = array[i];\n}\n\n... now you can use lookup[id]...\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This is especially interesting if you need to do many lookups.&lt;/p&gt;\n\n&lt;p&gt;This won&apos;t need much more memory since the IDs and objects will be shared.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;em&gt;ECMAScript 2015&lt;/em&gt; (JavaScript ES6) provides the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;find()&lt;/strong&gt;&lt;/a&gt;\nmethod on arrays:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myArray = [\n {&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;bob&quot;&lt;/span&gt;},\n {&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;dan&quot;&lt;/span&gt;},\n {&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;barb&quot;&lt;/span&gt;},\n]\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// grab the Array item which matchs the id &quot;2&quot;&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; item = myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt; =&amp;gt;&lt;/span&gt; item.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// print&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(item.&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;It works without external libraries. But if you want &lt;a href=&quot;http://kangax.github.io/compat-table/es6/#Array.prototype_methods&quot; rel=&quot;noreferrer&quot;&gt;older browser support&lt;/a&gt; you might want to include &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find#Polyfill&quot; rel=&quot;noreferrer&quot;&gt;this polyfill&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;http://underscorejs.org/#find&quot;&gt;Underscore.js&lt;/a&gt; has a nice method for that:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;myArray = [{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;73&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;},{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;},etc.]\nobj = _.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(myArray, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == &lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt; })\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I think the easiest way would be the following, but it won&apos;t work on Internet&amp;nbsp;Explorer&amp;nbsp;8 (or earlier):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result = myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;v&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; v.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Filter out the appropriate one&lt;/span&gt;\n})[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Get result and access the foo property&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Try the following&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;findById&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;source, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; source.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (source[i].&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === id) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; source[i];\n    }\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Couldn&apos;t find object with id: &quot;&lt;/span&gt; + id;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;){ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == some_id_you_want })[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;A generic and more flexible version of the findById function above:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// array = [{key:value},{key:value}]&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;objectFindByKey&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;array, key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; array.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (array[i][key] === value) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; array[i];\n        }\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; array = [{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;73&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;},{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;}];\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result_obj = &lt;span class=&quot;hljs-title function_&quot;&gt;objectFindByKey&lt;/span&gt;(array, &lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h1&gt;Performance&lt;/h1&gt;\n&lt;p&gt;Today 2020.06.20 I perform test on MacOs High Sierra on Chrome 81.0, Firefox 77.0 and Safari 13.1 for chosen solutions.&lt;/p&gt;\n&lt;h2&gt;Conclusions for solutions which use precalculations&lt;/h2&gt;\n&lt;p&gt;Solutions with precalculations (K,L)  are (much much) faster than other solutions and will not be compared with them - probably they are use some special build-in browser optimisations&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;surprisingly on Chrome and Safari solution based on &lt;code&gt;Map&lt;/code&gt; (K) are much faster than solution based on object &lt;code&gt;{}&lt;/code&gt; (L)&lt;/li&gt;\n&lt;li&gt;surprisingly on Safari for small arrays solution based on object &lt;code&gt;{}&lt;/code&gt; (L) is slower than traditional &lt;code&gt;for&lt;/code&gt; (E)&lt;/li&gt;\n&lt;li&gt;surprisingly on Firefox for small arrays solution based on &lt;code&gt;Map&lt;/code&gt; (K) is slower than traditional &lt;code&gt;for&lt;/code&gt; (E)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2&gt;Conclusions when searched objects ALWAYS exists&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;solution which use traditional &lt;code&gt;for&lt;/code&gt; (E) is fastest for small arrays and fast for big arrays&lt;/li&gt;\n&lt;li&gt;solution using cache (J) is fastest for big arrays - surprisingly for small arrays is medium fast&lt;/li&gt;\n&lt;li&gt;solutions based on &lt;code&gt;find&lt;/code&gt; (A) and &lt;code&gt;findIndex&lt;/code&gt; (B) are fast for small arras and medium fast on big arrays&lt;/li&gt;\n&lt;li&gt;solution based on &lt;code&gt;$.map&lt;/code&gt; (H) is slowest on small arrays&lt;/li&gt;\n&lt;li&gt;solution based on &lt;code&gt;reduce&lt;/code&gt; (D) is slowest on big arrays&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/W3dYP.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/W3dYP.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;h3&gt;Conclusions when searched objects NEVER exists&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;solution based on traditional &lt;code&gt;for&lt;/code&gt; (E) is fastest on small and big arrays (except Chrome-small arrays where it is second fast)&lt;/li&gt;\n&lt;li&gt;solution based on &lt;code&gt;reduce&lt;/code&gt; (D) is slowest on big arrays&lt;/li&gt;\n&lt;li&gt;solution which use cache (J) is medium fast but can be speed up if we save in cache also keys which have null values (which was not done here because we want to avoid unlimited memory consumption in cache in case when many not existing keys will be searched)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/nvXDF.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/nvXDF.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;h2&gt;Details&lt;/h2&gt;\n&lt;p&gt;For solutions&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;without precalculations: &lt;a href=&quot;https://stackoverflow.com/a/35398031/860099&quot;&gt;A&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/35398031/860099&quot;&gt;B&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/7364203/860099&quot;&gt;C&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/30632924/860099&quot;&gt;D&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/7364184/860099&quot;&gt;E&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/15138786/860099&quot;&gt;F&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/7364307/860099&quot;&gt;G&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/7364205/860099&quot;&gt;H&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/13513161/860099&quot;&gt;I&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/62439978/860099&quot;&gt;J&lt;/a&gt; (the J solution use &apos;inner&apos; cache and it speed depend on how often searched elements will repeat)&lt;/li&gt;\n&lt;li&gt;with precalculations\n&lt;a href=&quot;https://stackoverflow.com/a/45572348/860099&quot;&gt;K&lt;/a&gt;\n&lt;a href=&quot;https://stackoverflow.com/a/7364247/860099&quot;&gt;L&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;I perform four tests. In tests I want to find 5 objects in 10 loop iterations (the objects ID not change during iterations) - so I call tested method 50 times but only first 5 times have unique id values:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;small array (10 elements) and searched object ALWAYS exists - you can perform it &lt;a href=&quot;https://jsbench.me/jqkbm6lgoq/1&quot; rel=&quot;noreferrer&quot;&gt;HERE&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;big array (10k elements) and searched object ALWAYS exist - you can perform it &lt;a href=&quot;https://jsbench.me/u9kbm7k8dl/1&quot; rel=&quot;noreferrer&quot;&gt;HERE&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;small array (10 elements) and searched object NEVER exists - you can perform it &lt;a href=&quot;https://jsbench.me/oukbmjb1e6/1&quot; rel=&quot;noreferrer&quot;&gt;HERE&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;big array (10k elements) and searched object NEVER exists - you can perform it &lt;a href=&quot;https://jsbench.me/47kbmj7c87/1&quot; rel=&quot;noreferrer&quot;&gt;HERE&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Tested codes are presented below&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;A&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arr.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt;=&amp;gt;&lt;/span&gt; o.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;==id);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;B&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; idx= arr.&lt;span class=&quot;hljs-title function_&quot;&gt;findIndex&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt;=&amp;gt;&lt;/span&gt; o.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;==id);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arr[idx];\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;C&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arr.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt;=&amp;gt;&lt;/span&gt; o.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;==id)[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;D&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arr.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&amp;gt;&lt;/span&gt; (a.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;==id &amp;amp;&amp;amp; a) || (b.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == id &amp;amp;&amp;amp; b));\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;E&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; arr.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (arr[i].&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;==id) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arr[i];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;F&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; retObj ={};\n  $.&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(arr, &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;index, obj&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == id) { \n      retObj = obj;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n    }\n  });\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; retObj;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;G&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; $.&lt;span class=&quot;hljs-title function_&quot;&gt;grep&lt;/span&gt;(arr, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;e&lt;/span&gt;=&amp;gt;&lt;/span&gt; e.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == id )[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;H&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; $.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(myArray, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;val&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; val.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == id ? val : &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n  })[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;I&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(arr, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt; =&amp;gt;&lt;/span&gt; o.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;==id);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; J = (&lt;span class=&quot;hljs-function&quot;&gt;()=&amp;gt;&lt;/span&gt;{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; cache = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;J&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr,id,el=&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt;) { \n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; cache.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(id) || (el=arr.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt;=&amp;gt;&lt;/span&gt; o.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;==id), cache.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(id,el), el);\n  }\n})();\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;K&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; mapK.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(id)\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;L&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr, id&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; mapL[id];\n}\n\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// -------------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// TEST&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// -------------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Find id=5&apos;&lt;/span&gt;);\n\nmyArray = [...&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;)].&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x,i&lt;/span&gt;)=&amp;gt;&lt;/span&gt; ({&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${i}&lt;/span&gt;`&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;`bar_&lt;span class=&quot;hljs-subst&quot;&gt;${i}&lt;/span&gt;`&lt;/span&gt;}));\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; mapK = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;( myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;el&lt;/span&gt; =&amp;gt;&lt;/span&gt; [el.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;, el]) );\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; mapL = {}; myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;el&lt;/span&gt; =&amp;gt;&lt;/span&gt; mapL[el.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;]=el);\n\n\n\n[A,B,C,D,E,F,G,H,I,J,K,L].&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;f&lt;/span&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${f.name}&lt;/span&gt;: &lt;span class=&quot;hljs-subst&quot;&gt;${&lt;span class=&quot;hljs-built_in&quot;&gt;JSON&lt;/span&gt;.stringify(f(myArray, &lt;span class=&quot;hljs-string&quot;&gt;&apos;5&apos;&lt;/span&gt;))}&lt;/span&gt;`&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Whole array&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(myArray));&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\nThis snippet only presents tested codes&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Example tests results for Chrome for small array where searched objects always exists&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/36oqr.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/36oqr.png&quot; alt=&quot;enter image description here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;As others have pointed out, &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;.find()&lt;/code&gt;&lt;/a&gt; is the way to go when looking for one object within your array. However, if your object cannot be found using this method, your program will crash:\n&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; myArray = [{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;73&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;},{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;}];\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; res = myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; x.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;100&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Uh oh!&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;/*\nError:\n&quot;Uncaught TypeError: Cannot read property &apos;foo&apos; of undefined&quot;\nor in newer chrome versions:\nUncaught TypeError: Cannot read properties of undefined (reading &apos;foo&apos;)\n*/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;This can be fixed by checking whether the result of &lt;code&gt;.find()&lt;/code&gt; is defined before using &lt;code&gt;.foo&lt;/code&gt; on it. Modern JS allows us to do this easily with &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining&quot; rel=&quot;noreferrer&quot;&gt;optional chaining&lt;/a&gt;, returning &lt;code&gt;undefined&lt;/code&gt; if the object cannot be found, rather than crashing your code:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; myArray = [{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;73&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;},{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;}];\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; res = myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; x.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;100&apos;&lt;/span&gt;)?.&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// No error!&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(res); &lt;span class=&quot;hljs-comment&quot;&gt;// undefined when the object cannot be found&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif4&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;If you do this multiple times, you may set up a Map (ES6):&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; map = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;( myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;el&lt;/span&gt; =&amp;gt;&lt;/span&gt; [el.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;, el]) );\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Then you can simply do a O(1) lookup:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;map.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;27&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;h1&gt;Using native &lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;Array.reduce&lt;/code&gt;&lt;/a&gt;&lt;/h1&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; array = [ {&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;73&apos;&lt;/span&gt; ,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;} , {&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt; ,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;} , ];\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; id = &lt;span class=&quot;hljs-number&quot;&gt;73&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; found = array.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (a.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;==id &amp;amp;&amp;amp; a) || (b.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == id &amp;amp;&amp;amp; b)\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;returns the object element if found, otherwise &lt;code&gt;false&lt;/code&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;You can get this easily using the &lt;a href=&quot;http://api.jquery.com/jQuery.map/&quot; rel=&quot;noreferrer&quot;&gt;map()&lt;/a&gt; function:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;myArray = [{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;73&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;},{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;}];\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; found = $.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(myArray, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;val&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; val.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == &lt;span class=&quot;hljs-number&quot;&gt;45&lt;/span&gt; ? val.&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt; : &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n});\n\n&lt;span class=&quot;hljs-comment&quot;&gt;//found[0] == &quot;bar&quot;;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Working example: &lt;a href=&quot;http://jsfiddle.net/hunter/Pxaua/&quot; rel=&quot;noreferrer&quot;&gt;http://jsfiddle.net/hunter/Pxaua/&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;You can use filters,&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getById&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;id, myArray&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(obj.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == id) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj \n      }\n    })[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]\n  }\n\nget_my_obj = &lt;span class=&quot;hljs-title function_&quot;&gt;getById&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;73&lt;/span&gt;, myArray);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;While there are many correct answers here, many of them do not address the fact that this is an unnecessarily expensive operation if done more than once. In an extreme case this could be the cause of real performance problems.&lt;/p&gt;\n\n&lt;p&gt;In the real world, if you are processing a lot of items and performance is a concern it&apos;s much faster to initially build a lookup:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; items = [{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;73&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;},{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;}];\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; lookup = items.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;o,i&lt;/span&gt;)=&amp;gt;&lt;/span&gt;o[i.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;]=o,{});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;you can then get at items in fixed time like this : &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bar = o[id];\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You might also consider using a Map instead of an object as the lookup: &lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Map&quot; rel=&quot;noreferrer&quot;&gt;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Map&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Recently, I have to face the same thing in which I need to search the string from a huge array.&lt;/p&gt;\n\n&lt;p&gt;After some search I found It&apos;ll be easy to handle with simple code:&lt;/p&gt;\n\n&lt;p&gt;Code:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; items = mydata.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; item.&lt;span class=&quot;hljs-property&quot;&gt;word&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;toLowerCase&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;startsWith&lt;/span&gt;( &lt;span class=&quot;hljs-string&quot;&gt;&apos;gk );\n})\n&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;See &lt;a href=&quot;https://jsfiddle.net/maheshwaghmare/cfx3p40v/4/&quot; rel=&quot;noreferrer&quot;&gt;https://jsfiddle.net/maheshwaghmare/cfx3p40v/4/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/v3s8k.gif&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/v3s8k.gif&quot; alt=&quot;Serach from 20k strings&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Iterate over any item in the array. For every item you visit, check that item&apos;s id. If it&apos;s a match, return it.&lt;/p&gt;\n\n&lt;p&gt;If you just want teh codez:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getId&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;array, id&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, len = array.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i &amp;lt; len; i++) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (array[i].&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === id) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; array[i];\n        }\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Nothing found&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And the same thing using ECMAScript 5&apos;s Array methods:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getId&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;array, id&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; obj = array.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;val&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; val.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === id;\n    });\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Filter returns an array, and we just want the matching item.&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You may try out Sugarjs from &lt;a href=&quot;http://sugarjs.com/&quot; rel=&quot;noreferrer&quot;&gt;http://sugarjs.com/&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;It has a very sweet method on Arrays, &lt;code&gt;.find&lt;/code&gt;. So you can find an element like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;array.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;( {&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;75&lt;/span&gt;} );\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You may also pass an object with more properties to it to add another &quot;where-clause&quot;.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Note that Sugarjs extends native objects, and some people consider this very evil...&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;As long as the browser supports &lt;a href=&quot;https://en.wikipedia.org/wiki/ECMAScript#Versions&quot; rel=&quot;nofollow&quot;&gt;ECMA-262&lt;/a&gt;, 5th edition (December 2009), this should work, almost one-liner:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bFound = myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;some&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;45&lt;/span&gt;;\n});\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Here&apos;s how I&apos;d go about it in pure JavaScript, in the most minimal manner I can think of that works in ECMAScript 3 or later. It returns as soon as a match is found.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; getKeyValueById = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;array, key, id&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; testArray = array.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(), test;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(test = testArray.&lt;span class=&quot;hljs-title function_&quot;&gt;pop&lt;/span&gt;()) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (test.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === id) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; test[key];\n        }\n    }\n    &lt;span class=&quot;hljs-comment&quot;&gt;// return undefined if no matching id is found in array&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; myArray = [{&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;73&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;}, {&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt;}]\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result = &lt;span class=&quot;hljs-title function_&quot;&gt;getKeyValueById&lt;/span&gt;(myArray, &lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;45&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// result is &apos;bar&apos;, obtained from object with id of &apos;45&apos;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;More generic and short&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;findFromArray&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;array,key,value&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; array.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;element&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; element[key] == value;\n        }).&lt;span class=&quot;hljs-title function_&quot;&gt;shift&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;in your case Ex. &lt;code&gt;var element = findFromArray(myArray,&apos;id&apos;,45)&lt;/code&gt; that will give you the whole element.&lt;/p&gt;\n    ","\n&lt;p&gt;We can use Jquery methods &lt;code&gt;$.each()/$.grep()&lt;/code&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data= [];\n$.&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(array,&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;i&lt;/span&gt;){&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(n !== &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; &amp;amp;&amp;amp; i &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;){data.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(item)}}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;or &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = $.&lt;span class=&quot;hljs-title function_&quot;&gt;grep&lt;/span&gt;(array, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt; n, i &lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ( n !== &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; &amp;amp;&amp;amp; i &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; );\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;use ES6 syntax: &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;find&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;filter&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;forEach&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;map&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or use Lodash &lt;a href=&quot;https://lodash.com/docs/4.17.10#filter&quot; rel=&quot;noreferrer&quot;&gt;https://lodash.com/docs/4.17.10#filter&lt;/a&gt;, Underscore &lt;a href=&quot;https://underscorejs.org/#filter&quot; rel=&quot;noreferrer&quot;&gt;https://underscorejs.org/#filter&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Building on the accepted answer:&lt;/p&gt;\n\n&lt;p&gt;jQuery:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; foo = $.&lt;span class=&quot;hljs-title function_&quot;&gt;grep&lt;/span&gt;(myArray, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;e&lt;/span&gt;){ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; e.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === foo_id})\nmyArray.&lt;span class=&quot;hljs-title function_&quot;&gt;pop&lt;/span&gt;(foo)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or CoffeeScript:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;foo = $.grep myArray, (e) -&amp;gt; e.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; == foo_id\nmyArray.&lt;span class=&quot;hljs-property&quot;&gt;pop&lt;/span&gt; foo\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Use &lt;code&gt;Array.prototype.filter()&lt;/code&gt; function.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;DEMO&lt;/strong&gt;: &lt;a href=&quot;https://jsfiddle.net/sumitridhal/r0cz0w5o/4/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://jsfiddle.net/sumitridhal/r0cz0w5o/4/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;JSON&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; jsonObj =[\n {\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Me&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;info&quot;&lt;/span&gt;: {\n   &lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;15&quot;&lt;/span&gt;,\n   &lt;span class=&quot;hljs-string&quot;&gt;&quot;favColor&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Green&quot;&lt;/span&gt;,\n   &lt;span class=&quot;hljs-string&quot;&gt;&quot;pets&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;\n  }\n },\n {\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Alex&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;info&quot;&lt;/span&gt;: {\n   &lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;16&quot;&lt;/span&gt;,\n   &lt;span class=&quot;hljs-string&quot;&gt;&quot;favColor&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;orange&quot;&lt;/span&gt;,\n   &lt;span class=&quot;hljs-string&quot;&gt;&quot;pets&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;\n  }\n },\n{\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Kyle&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;info&quot;&lt;/span&gt;: {\n   &lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;15&quot;&lt;/span&gt;,\n   &lt;span class=&quot;hljs-string&quot;&gt;&quot;favColor&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Blue&quot;&lt;/span&gt;,\n   &lt;span class=&quot;hljs-string&quot;&gt;&quot;pets&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;\n  }\n }\n];\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;FILTER&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; getPerson = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; jsonObj.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; obj.&lt;span class=&quot;hljs-property&quot;&gt;name&lt;/span&gt; === name;\n    });\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can do this even in pure JavaScript by using the in built &quot;filter&quot; function for arrays:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;filterObjects&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;) { &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; x[key] === value; })\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So now simply pass &quot;id&quot; in place of &lt;code&gt;key&lt;/code&gt; and &quot;45&quot; in place of &lt;code&gt;value&lt;/code&gt;, and you will get the full object matching an id of 45. So that would be,&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;myArr.&lt;span class=&quot;hljs-title function_&quot;&gt;filterObjects&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;id&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;45&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I really liked the answer provided by Aaron Digulla but needed to keep my array of objects so I could iterate through it later.  So I modified it to &lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;\t&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; indexer = {};\n\t&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i &amp;lt; array.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;; i++) {\n\t    indexer[array[i].&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;] = &lt;span class=&quot;hljs-built_in&quot;&gt;parseInt&lt;/span&gt;(i);\n\t}\n\t\n\t&lt;span class=&quot;hljs-comment&quot;&gt;//Then you can access object properties in your array using &lt;/span&gt;\n\tarray[indexer[id]].&lt;span class=&quot;hljs-property&quot;&gt;property&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif5&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Use:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; retObj ={};\n$.&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;ArrayOfObjects&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;index, obj&lt;/span&gt;) {\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (obj.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;5&apos;&lt;/span&gt;) { &lt;span class=&quot;hljs-comment&quot;&gt;// id.toString() if it is int&lt;/span&gt;\n\n            retObj = obj;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n        }\n    });\n&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; retObj;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It should return an object by id.&lt;/p&gt;\n    ","\n&lt;p&gt;This solution may helpful as well:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;grep&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;key, value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; that = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;, ret = [];\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;elem, index&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (elem[key] === value) {\n            ret.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(that[index]);\n        }\n    });\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ret.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; ? ret[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] : ret;\n};\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; bar = myArray.&lt;span class=&quot;hljs-title function_&quot;&gt;grep&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;id&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;45&quot;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I made it just like &lt;code&gt;$.grep&lt;/code&gt; and if one object is find out, &lt;em&gt;function&lt;/em&gt; will return the object, rather than an array.&lt;/p&gt;\n    ","\n&lt;h1&gt;Dynamic cached find&lt;/h1&gt;\n&lt;p&gt;In this solution, when we search for some object, we save it in cache. This is middle point between &quot;always search solutions&quot; and &quot;create hash-map for each object in precalculations&quot;.&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; cachedFind = (&lt;span class=&quot;hljs-function&quot;&gt;()=&amp;gt;&lt;/span&gt;{\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; cache = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;();\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;arr,id,el=&lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt;) =&amp;gt;&lt;/span&gt; \n    cache.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(id) || (el=arr.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt;=&amp;gt;&lt;/span&gt; o.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;==id), cache.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(id,el), el);\n})();\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// TEST&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// ---------&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; myArray = [...&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100000&lt;/span&gt;)].&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x,i&lt;/span&gt;)=&amp;gt;&lt;/span&gt; ({&lt;span class=&quot;hljs-string&quot;&gt;&apos;id&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${i}&lt;/span&gt;`&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;`bar_&lt;span class=&quot;hljs-subst&quot;&gt;${i}&lt;/span&gt;`&lt;/span&gt;}));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// example usage&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;( &lt;span class=&quot;hljs-title function_&quot;&gt;cachedFind&lt;/span&gt;(myArray,&lt;span class=&quot;hljs-string&quot;&gt;&apos;1234&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt; );\n\n\n\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Benchmark&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;bench&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;id&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;time&lt;/span&gt;   (&lt;span class=&quot;hljs-string&quot;&gt;&apos;time for &apos;&lt;/span&gt;+id ); \n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;log&lt;/span&gt;    ( &lt;span class=&quot;hljs-title function_&quot;&gt;cachedFind&lt;/span&gt;(myArray,id).&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt; );  &lt;span class=&quot;hljs-comment&quot;&gt;// FIND&lt;/span&gt;\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;timeEnd&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;time for &apos;&lt;/span&gt;+id );\n}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;----- no cached -----&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;bench&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;50000&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;bench&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;79980&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;bench&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;99990&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;-----  cached   -----&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;bench&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;79980&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// cached&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;bench&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;99990&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// cached&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif6&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    "],"308":["\n&lt;p&gt;In all of the cases above, the variable is correctly set, but not correctly read! The right way is to &lt;strong&gt;use double quotes &lt;em&gt;when referencing&lt;/em&gt;&lt;/strong&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;$var&lt;/span&gt;&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This gives the expected value in all the examples given. Always quote variable references!&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Why? &lt;/p&gt;\n\n&lt;p&gt;When a variable is &lt;strong&gt;unquoted&lt;/strong&gt;, it will:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;Undergo &lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06_05&quot;&gt;field splitting&lt;/a&gt; where the value is split into multiple words on whitespace (by default):&lt;/p&gt;\n\n&lt;p&gt;Before: &lt;code&gt;/* Foobar is free software */&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;After: &lt;code&gt;/*&lt;/code&gt;, &lt;code&gt;Foobar&lt;/code&gt;, &lt;code&gt;is&lt;/code&gt;, &lt;code&gt;free&lt;/code&gt;, &lt;code&gt;software&lt;/code&gt;, &lt;code&gt;*/&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Each of these words will undergo &lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06_06&quot;&gt;pathname expansion&lt;/a&gt;, where patterns are expanded into matching files:&lt;/p&gt;\n\n&lt;p&gt;Before: &lt;code&gt;/*&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;After: &lt;code&gt;/bin&lt;/code&gt;, &lt;code&gt;/boot&lt;/code&gt;, &lt;code&gt;/dev&lt;/code&gt;, &lt;code&gt;/etc&lt;/code&gt;, &lt;code&gt;/home&lt;/code&gt;, ...&lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Finally, all the arguments are passed to echo, which writes them out &lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/9699919799/utilities/echo.html#tag_20_37_10&quot;&gt;separated by single spaces&lt;/a&gt;, giving&lt;/p&gt;\n\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;/bin /boot /dev /etc /home Foobar is free software Desktop/ Downloads/\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;instead of the variable&apos;s value.&lt;/p&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;When the variable is &lt;strong&gt;quoted&lt;/strong&gt; it will:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Be substituted for its value.&lt;/li&gt;\n&lt;li&gt;There is no step 2.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;This is why you should &lt;strong&gt;always quote all variable references&lt;/strong&gt;, unless you specifically require word splitting and pathname expansion. Tools like &lt;a href=&quot;http://www.shellcheck.net&quot;&gt;shellcheck&lt;/a&gt; are there to help, and will warn about missing quotes in all the cases above.&lt;/p&gt;\n    ","\n&lt;p&gt;You may want to know why this is happening. Together with &lt;a href=&quot;https://stackoverflow.com/a/29378567/1983854&quot;&gt;the great explanation by that other guy&lt;/a&gt;, find a reference of &lt;a href=&quot;https://unix.stackexchange.com/a/131767/40596&quot;&gt;Why does my shell script choke on whitespace or other special characters?&lt;/a&gt; written by &lt;a href=&quot;https://unix.stackexchange.com/users/885/gilles&quot;&gt;Gilles&lt;/a&gt; in &lt;a href=&quot;https://unix.stackexchange.com/&quot;&gt;Unix &amp;amp; Linux&lt;/a&gt;:&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;h2&gt;Why do I need to write &lt;code&gt;&quot;$foo&quot;&lt;/code&gt;? What happens without the quotes?&lt;/h2&gt;\n  \n  &lt;p&gt;&lt;code&gt;$foo&lt;/code&gt; does not mean take the value of the variable &lt;code&gt;foo&lt;/code&gt;. It means\n  something much more complex:&lt;/p&gt;\n  \n  &lt;ul&gt;\n  &lt;li&gt;First, take the value of the variable.  &lt;/li&gt;\n  &lt;li&gt;Field splitting: treat that value as a whitespace-separated list of fields, and build the resulting list. For example, if the variable\n  contains &lt;code&gt;foo *  bar &lt;/code&gt; then the result of this step is the 3-element\n  list &lt;code&gt;foo&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;bar&lt;/code&gt;.  &lt;/li&gt;\n  &lt;li&gt;Filename generation: treat each field as a glob, i.e. as a wildcard pattern, and replace it by the list of file names that match this\n  pattern. If the pattern doesn&apos;t match any files, it is left\n  unmodified. In our example, this results in the list containing &lt;code&gt;foo&lt;/code&gt;,\n  following by the list of files in the current directory, and finally\n  &lt;code&gt;bar&lt;/code&gt;. If the current directory is empty, the result is &lt;code&gt;foo&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;,\n  &lt;code&gt;bar&lt;/code&gt;.&lt;/li&gt;\n  &lt;/ul&gt;\n  \n  &lt;p&gt;Note that the result is a list of strings. There are two contexts in\n  shell syntax: list context and string context. Field splitting and\n  filename generation only happen in list context, but that&apos;s most of\n  the time. Double quotes delimit a string context: the whole\n  double-quoted string is a single string, not to be split. (Exception:\n  &lt;code&gt;&quot;$@&quot;&lt;/code&gt; to expand to the list of positional parameters, e.g. &lt;code&gt;&quot;$@&quot;&lt;/code&gt; is\n  equivalent to &lt;code&gt;&quot;$1&quot; &quot;$2&quot; &quot;$3&quot;&lt;/code&gt; if there are three positional\n  parameters. See &lt;a href=&quot;https://unix.stackexchange.com/questions/41571/what-is-the-difference-between-and/94200#94200&quot;&gt;What is the difference between $* and $@?&lt;/a&gt;)&lt;/p&gt;\n  \n  &lt;p&gt;The same happens to command substitution with &lt;code&gt;$(foo)&lt;/code&gt; or with &lt;code&gt;\n  `foo`&lt;/code&gt;. On a side note, don&apos;t use &lt;code&gt;`foo`&lt;/code&gt;: its quoting rules are\n  weird and non-portable, and all modern shells support &lt;code&gt;$(foo)&lt;/code&gt; which\n  is absolutely equivalent except for having intuitive quoting rules.&lt;/p&gt;\n  \n  &lt;p&gt;The output of arithmetic substitution also undergoes the same\n  expansions, but that isn&apos;t normally a concern as it only contains\n  non-expandable characters (assuming &lt;code&gt;IFS&lt;/code&gt; doesn&apos;t contain digits or\n  &lt;code&gt;-&lt;/code&gt;).&lt;/p&gt;\n  \n  &lt;p&gt;See &lt;a href=&quot;https://unix.stackexchange.com/questions/68694/when-is-double-quoting-necessary&quot;&gt;When is double-quoting necessary?&lt;/a&gt; for more details about the\n  cases when you can leave out the quotes.&lt;/p&gt;\n  \n  &lt;p&gt;Unless you mean for all this rigmarole to happen, just remember to\n  always use double quotes around variable and command substitutions. Do\n  take care: leaving out the quotes can lead not just to errors but to\n  &lt;a href=&quot;https://unix.stackexchange.com/questions/171346/security-implications-of-forgetting-to-quote-a-variable-in-bash-posix-shells/171347#171347&quot;&gt;security\n  holes&lt;/a&gt;.&lt;/p&gt;\n&lt;/blockquote&gt;\n    ","\n&lt;p&gt;In addition to other issues caused by failing to quote, &lt;code&gt;-n&lt;/code&gt; and &lt;code&gt;-e&lt;/code&gt; can be consumed by &lt;code&gt;echo&lt;/code&gt; as arguments. (Only the former is legal per the POSIX spec for &lt;code&gt;echo&lt;/code&gt;, but several common implementations violate the spec and consume &lt;code&gt;-e&lt;/code&gt; as well).&lt;/p&gt;\n&lt;p&gt;To avoid this, &lt;strong&gt;use &lt;code&gt;printf&lt;/code&gt; instead of &lt;code&gt;echo&lt;/code&gt; when details matter.&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Thus:&lt;/p&gt;\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;$ vars=&lt;span class=&quot;hljs-string&quot;&gt;&quot;-e -n -a&quot;&lt;/span&gt;\n$ &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$vars&lt;/span&gt;      &lt;span class=&quot;hljs-comment&quot;&gt;# breaks because -e and -n can be treated as arguments to echo&lt;/span&gt;\n-a\n$ &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;$vars&lt;/span&gt;&quot;&lt;/span&gt;\n-e -n -a\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;However, correct quoting won&apos;t always save you when using &lt;code&gt;echo&lt;/code&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;$ vars=&lt;span class=&quot;hljs-string&quot;&gt;&quot;-n&quot;&lt;/span&gt;\n$ &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;$vars&lt;/span&gt;&quot;&lt;/span&gt;\n$ &lt;span class=&quot;hljs-comment&quot;&gt;## not even an empty line was printed&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;...whereas it &lt;strong&gt;will&lt;/strong&gt; save you with &lt;code&gt;printf&lt;/code&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;$ vars=&lt;span class=&quot;hljs-string&quot;&gt;&quot;-n&quot;&lt;/span&gt;\n$ &lt;span class=&quot;hljs-built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;%s\\n&apos;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;$vars&lt;/span&gt;&quot;&lt;/span&gt;\n-n\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;user double quote to get the exact value. like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;${var}&lt;/span&gt;&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and it will read your value correctly.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;code&gt;echo $var&lt;/code&gt; output highly depends on the value of &lt;code&gt;IFS&lt;/code&gt; variable. By default it contains space, tab, and newline characters:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;[ks@localhost ~]$ &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; -n &lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;$IFS&lt;/span&gt;&quot;&lt;/span&gt; | &lt;span class=&quot;hljs-built_in&quot;&gt;cat&lt;/span&gt; -vte\n ^I$\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This means that when shell is doing field splitting (or word splitting) it uses all these characters as word separators. This is what happens when referencing a variable without double quotes to echo it (&lt;code&gt;$var&lt;/code&gt;) and thus expected output is altered.&lt;/p&gt;\n\n&lt;p&gt;One way to prevent word splitting (besides using double quotes) is to set &lt;code&gt;IFS&lt;/code&gt; to null. See &lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06_05&quot; rel=&quot;nofollow&quot;&gt;http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06_05&lt;/a&gt; :&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;If the value of IFS is null, no field splitting shall be performed.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Setting to null means setting to empty \nvalue:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;IFS=\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Test:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;[ks@localhost ~]$ &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; -n &lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;$IFS&lt;/span&gt;&quot;&lt;/span&gt; | &lt;span class=&quot;hljs-built_in&quot;&gt;cat&lt;/span&gt; -vte\n ^I$\n[ks@localhost ~]$ var=$&lt;span class=&quot;hljs-string&quot;&gt;&apos;key\\nvalue&apos;&lt;/span&gt;\n[ks@localhost ~]$ &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$var&lt;/span&gt;\nkey value\n[ks@localhost ~]$ IFS=\n[ks@localhost ~]$ &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$var&lt;/span&gt;\nkey\nvalue\n[ks@localhost ~]$ \n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;The &lt;a href=&quot;https://stackoverflow.com/questions/29378566/i-just-assigned-a-variable-but-echo-variable-shows-something-else/33719549#33719549&quot;&gt;answer from ks1322&lt;/a&gt; helped me to identify the issue while using &lt;code&gt;docker-compose exec&lt;/code&gt;:&lt;/p&gt;\n\n&lt;p&gt;If you omit the &lt;code&gt;-T&lt;/code&gt; flag, &lt;code&gt;docker-compose exec&lt;/code&gt; add a special character that break output, we see &lt;code&gt;b&lt;/code&gt; instead of &lt;code&gt;1b&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;$ &lt;span class=&quot;hljs-built_in&quot;&gt;test&lt;/span&gt;=$(/usr/local/bin/docker-compose &lt;span class=&quot;hljs-built_in&quot;&gt;exec&lt;/span&gt; db bash -c &lt;span class=&quot;hljs-string&quot;&gt;&quot;echo 1&quot;&lt;/span&gt;)\n$ &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;${test}&lt;/span&gt;b&quot;&lt;/span&gt;\nb\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;${test}&lt;/span&gt;&quot;&lt;/span&gt; | &lt;span class=&quot;hljs-built_in&quot;&gt;cat&lt;/span&gt; -vte\n1^M$\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;With &lt;code&gt;-T&lt;/code&gt; flag, &lt;code&gt;docker-compose exec&lt;/code&gt; works as expected:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;$ &lt;span class=&quot;hljs-built_in&quot;&gt;test&lt;/span&gt;=$(/usr/local/bin/docker-compose &lt;span class=&quot;hljs-built_in&quot;&gt;exec&lt;/span&gt; -T db bash -c &lt;span class=&quot;hljs-string&quot;&gt;&quot;echo 1&quot;&lt;/span&gt;)\n$ &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;&lt;span class=&quot;hljs-variable&quot;&gt;${test}&lt;/span&gt;b&quot;&lt;/span&gt;\n1b\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Additional to putting the variable in quotation, one could also translate the output of the variable using &lt;code&gt;tr&lt;/code&gt; and converting spaces to newlines.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;$ &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$var&lt;/span&gt; | &lt;span class=&quot;hljs-built_in&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\n&quot;&lt;/span&gt;\nfoo\nbar\nbaz\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Although this is a little more convoluted, it does add more diversity with the output as you can substitute any character as the separator between array variables.&lt;/p&gt;\n    "],"309":["\n&lt;p&gt;If you want to avoid external libraries, you can concisely implement a vanilla version of &lt;code&gt;groupBy()&lt;/code&gt; like so:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; groupBy = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;xs, key&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; xs.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;rv, x&lt;/span&gt;) {\n    (rv[x[key]] = rv[x[key]] || []).&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(x);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; rv;\n  }, {});\n};\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;([&lt;span class=&quot;hljs-string&quot;&gt;&apos;one&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;two&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;three&apos;&lt;/span&gt;], &lt;span class=&quot;hljs-string&quot;&gt;&apos;length&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; {3: [&quot;one&quot;, &quot;two&quot;], 5: [&quot;three&quot;]}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Using ES6 Map object:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@description&lt;/span&gt;\n * Takes an Array&amp;lt;V&amp;gt;, and a grouping function,\n * and returns a Map of the array grouped by the grouping function.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; list An array of type V.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; keyGetter A Function that takes the the Array type V as an input, and returns a value of type K.\n *                  K is generally intended to be a property key of V.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@returns&lt;/span&gt; Map of the array grouped by the grouping function.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//export function groupBy&amp;lt;K, V&amp;gt;(list: Array&amp;lt;V&amp;gt;, keyGetter: (input: V) =&amp;gt; K): Map&amp;lt;K, Array&amp;lt;V&amp;gt;&amp;gt; {&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//    const map = new Map&amp;lt;K, Array&amp;lt;V&amp;gt;&amp;gt;();&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;list, keyGetter&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; map = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;();\n    list.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n         &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; key = &lt;span class=&quot;hljs-title function_&quot;&gt;keyGetter&lt;/span&gt;(item);\n         &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; collection = map.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(key);\n         &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!collection) {\n             map.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(key, [item]);\n         } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n             collection.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(item);\n         }\n    });\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; map;\n}\n\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// example usage&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; pets = [\n    {&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Dog&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Spot&quot;&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Cat&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Tiger&quot;&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Dog&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Rover&quot;&lt;/span&gt;}, \n    {&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Cat&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Leo&quot;&lt;/span&gt;}\n];\n    \n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; grouped = &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(pets, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;pet&lt;/span&gt; =&amp;gt;&lt;/span&gt; pet.&lt;span class=&quot;hljs-property&quot;&gt;type&lt;/span&gt;);\n    \n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(grouped.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Dog&quot;&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// -&amp;gt; [{type:&quot;Dog&quot;, name:&quot;Spot&quot;}, {type:&quot;Dog&quot;, name:&quot;Rover&quot;}]&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(grouped.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Cat&quot;&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// -&amp;gt; [{type:&quot;Cat&quot;, name:&quot;Tiger&quot;}, {type:&quot;Cat&quot;, name:&quot;Leo&quot;}]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; odd = &lt;span class=&quot;hljs-title class_&quot;&gt;Symbol&lt;/span&gt;();\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; even = &lt;span class=&quot;hljs-title class_&quot;&gt;Symbol&lt;/span&gt;();\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; numbers = [&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;];\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; oddEven = &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(numbers, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; (x % &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; ? odd : even));\n    \n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(oddEven.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(odd)); &lt;span class=&quot;hljs-comment&quot;&gt;// -&amp;gt; [1,3,5,7]&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(oddEven.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(even)); &lt;span class=&quot;hljs-comment&quot;&gt;// -&amp;gt; [2,4,6]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;About Map:\n&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map&quot; rel=&quot;noreferrer&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;with ES6:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;items, key&lt;/span&gt;) =&amp;gt; items.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(\n  &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;result, item&lt;/span&gt;) =&amp;gt;&lt;/span&gt; ({\n    ...result,\n    [item[key]]: [\n      ...(result[item[key]] || []),\n      item,\n    ],\n  }), \n  {},\n);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can build an ES6 &lt;code&gt;Map&lt;/code&gt; from &lt;code&gt;array.reduce()&lt;/code&gt;. &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; groupedMap = initialArray.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(\n    &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;entryMap, e&lt;/span&gt;) =&amp;gt;&lt;/span&gt; entryMap.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(e.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;, [...entryMap.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(e.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;)||[], e]),\n    &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;()\n);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This has a few advantages over the other solutions: &lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;It doesn&apos;t require any libraries (unlike e.g. &lt;code&gt;_.groupBy()&lt;/code&gt;)&lt;/li&gt;\n&lt;li&gt;You get a JavaScript &lt;code&gt;Map&lt;/code&gt; rather than an object (e.g. as returned by &lt;code&gt;_.groupBy()&lt;/code&gt;). This has &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Objects_and_maps_compared&quot; rel=&quot;noreferrer&quot;&gt;lots of benefits&lt;/a&gt;, including:\n\n&lt;ul&gt;\n&lt;li&gt;it remembers the order in which items were first added,&lt;/li&gt;\n&lt;li&gt;keys can be any type rather than just strings. &lt;/li&gt;\n&lt;/ul&gt;&lt;/li&gt;\n&lt;li&gt;A &lt;code&gt;Map&lt;/code&gt; is a more useful result that an array of arrays. But if you do want an array of arrays, you can then call &lt;code&gt;Array.from(groupedMap.entries())&lt;/code&gt; (for an array of &lt;code&gt;[key, group array]&lt;/code&gt; pairs) or &lt;code&gt;Array.from(groupedMap.values())&lt;/code&gt; (for a simple array of arrays).&lt;/li&gt;\n&lt;li&gt;It&apos;s quite flexible; often, whatever you were planning to do next with this map can be done directly as part of the reduction. &lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;As an example of the last point, imagine I have an array of objects that I want to do a (shallow) merge on by id, like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; objsToMerge = [{&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Steve&quot;&lt;/span&gt;}, {&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Alice&quot;&lt;/span&gt;}, {&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;age&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;}];\n&lt;span class=&quot;hljs-comment&quot;&gt;// The following variable should be created automatically&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; mergedArray = [{&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Steve&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;age&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;}, {&lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Alice&quot;&lt;/span&gt;}]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To do this, I would usually start by grouping by id, and then merging each of the resulting arrays. Instead, you can do the merge directly in the &lt;code&gt;reduce()&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; mergedArray = &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;from&lt;/span&gt;(\n    objsToMerge.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(\n        &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;entryMap, e&lt;/span&gt;) =&amp;gt;&lt;/span&gt; entryMap.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(e.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;, {...entryMap.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(e.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt;)||{}, ...e}),\n        &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;()\n    ).&lt;span class=&quot;hljs-title function_&quot;&gt;values&lt;/span&gt;()\n);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I would check &lt;a href=&quot;https://lodash.com/docs#groupBy&quot; rel=&quot;noreferrer&quot;&gt;lodash groupBy&lt;/a&gt; it seems to do exactly what you are looking for. It is also quite lightweight and really simple.&lt;/p&gt;\n\n&lt;p&gt;Fiddle example: &lt;a href=&quot;https://jsfiddle.net/r7szvt5k/&quot; rel=&quot;noreferrer&quot;&gt;https://jsfiddle.net/r7szvt5k/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Provided that your array name is &lt;code&gt;arr&lt;/code&gt; the groupBy with lodash is just:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; groupBy &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;lodash/groupBy&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-comment&quot;&gt;// if you still use require:&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// const groupBy = require(&apos;lodash/groupBy&apos;);&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; a = &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(arr, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;n&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; n.&lt;span class=&quot;hljs-property&quot;&gt;Phase&lt;/span&gt;;\n});\n&lt;span class=&quot;hljs-comment&quot;&gt;// a is your array grouped by Phase attribute&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Although the &lt;a href=&quot;http://linqjs.codeplex.com/&quot; rel=&quot;noreferrer&quot;&gt;linq&lt;/a&gt; answer is interesting, it&apos;s also quite heavy-weight.  My approach is somewhat different:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DataGrouper&lt;/span&gt; = (&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; has = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, target&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;any&lt;/span&gt;(obj, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;value&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;isEqual&lt;/span&gt;(value, target);\n        });\n    };\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; keys = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data, names&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(data, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;memo, item&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; key = _.&lt;span class=&quot;hljs-title function_&quot;&gt;pick&lt;/span&gt;(item, names);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(memo, key)) {\n                memo.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(key);\n            }\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; memo;\n        }, []);\n    };\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; group = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data, names&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; stems = &lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(data, names);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(stems, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;stem&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {\n                &lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;: stem,\n                &lt;span class=&quot;hljs-attr&quot;&gt;vals&lt;/span&gt;:_.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(_.&lt;span class=&quot;hljs-title function_&quot;&gt;where&lt;/span&gt;(data, stem), &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;) {\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;omit&lt;/span&gt;(item, names);\n                })\n            };\n        });\n    };\n\n    group.&lt;span class=&quot;hljs-property&quot;&gt;register&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name, converter&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; group[name] = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data, names&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;group&lt;/span&gt;(data, names), converter);\n        };\n    };\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; group;\n}());\n\n&lt;span class=&quot;hljs-title class_&quot;&gt;DataGrouper&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;register&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;sum&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;({}, item.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt;, {&lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: _.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(item.&lt;span class=&quot;hljs-property&quot;&gt;vals&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;memo, node&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; memo + &lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;(node.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt;);\n    }, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)});\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You can see it &lt;a href=&quot;http://jsbin.com/usepej/1/edit&quot; rel=&quot;noreferrer&quot;&gt;in action on JSBin&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;I didn&apos;t see anything in Underscore that does what &lt;code&gt;has&lt;/code&gt; does, although I might be missing it.  It&apos;s much the same as &lt;code&gt;_.contains&lt;/code&gt;, but uses &lt;code&gt;_.isEqual&lt;/code&gt; rather than &lt;code&gt;===&lt;/code&gt; for comparisons.  Other than that, the rest of this is problem-specific, although with an attempt to be generic.&lt;/p&gt;\n\n&lt;p&gt;Now &lt;code&gt;DataGrouper.sum(data, [&quot;Phase&quot;])&lt;/code&gt; returns&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;130&lt;/span&gt;}\n]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And &lt;code&gt;DataGrouper.sum(data, [&quot;Phase&quot;, &quot;Step&quot;])&lt;/code&gt; returns&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;35&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;55&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;75&lt;/span&gt;}\n]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;But &lt;code&gt;sum&lt;/code&gt; is only one potential function here.  You can register others as you like:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;DataGrouper&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;register&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;max&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;({}, item.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt;, {&lt;span class=&quot;hljs-title class_&quot;&gt;Max&lt;/span&gt;: _.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(item.&lt;span class=&quot;hljs-property&quot;&gt;vals&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;memo, node&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;max&lt;/span&gt;(memo, &lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;(node.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt;));\n    }, &lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;NEGATIVE_INFINITY&lt;/span&gt;)});\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and now &lt;code&gt;DataGrouper.max(data, [&quot;Phase&quot;, &quot;Step&quot;])&lt;/code&gt; will return&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Max&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Max&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Max&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Max&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;40&lt;/span&gt;}\n]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;or if you registered this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;DataGrouper&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;register&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;tasks&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;({}, item.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt;, {&lt;span class=&quot;hljs-title class_&quot;&gt;Tasks&lt;/span&gt;: _.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(item.&lt;span class=&quot;hljs-property&quot;&gt;vals&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; item.&lt;span class=&quot;hljs-property&quot;&gt;Task&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot; (&quot;&lt;/span&gt; + item.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot;)&quot;&lt;/span&gt;;\n    }).&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;, &quot;&lt;/span&gt;)});\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;then calling &lt;code&gt;DataGrouper.tasks(data, [&quot;Phase&quot;, &quot;Step&quot;])&lt;/code&gt; will get you&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Tasks&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1 (5), Task 2 (10)&quot;&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Tasks&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1 (15), Task 2 (20)&quot;&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Tasks&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1 (25), Task 2 (30)&quot;&lt;/span&gt;},\n    {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Tasks&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1 (35), Task 2 (40)&quot;&lt;/span&gt;}\n]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;code&gt;DataGrouper&lt;/code&gt; itself is a function.  You can call it with your data and a list of the properties you want to group by.  It returns an array whose elements are object with two properties: &lt;code&gt;key&lt;/code&gt; is the collection of grouped properties, &lt;code&gt;vals&lt;/code&gt; is an array of objects containing the remaining properties not in the key.  For example, &lt;code&gt;DataGrouper(data, [&quot;Phase&quot;, &quot;Step&quot;])&lt;/code&gt; will yield:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[\n    {\n        &lt;span class=&quot;hljs-string&quot;&gt;&quot;key&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;},\n        &lt;span class=&quot;hljs-string&quot;&gt;&quot;vals&quot;&lt;/span&gt;: [\n            {&lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;5&quot;&lt;/span&gt;},\n            {&lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt;}\n        ]\n    },\n    {\n        &lt;span class=&quot;hljs-string&quot;&gt;&quot;key&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;},\n        &lt;span class=&quot;hljs-string&quot;&gt;&quot;vals&quot;&lt;/span&gt;: [\n            {&lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;15&quot;&lt;/span&gt;}, \n            {&lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;20&quot;&lt;/span&gt;}\n        ]\n    },\n    {\n        &lt;span class=&quot;hljs-string&quot;&gt;&quot;key&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;},\n        &lt;span class=&quot;hljs-string&quot;&gt;&quot;vals&quot;&lt;/span&gt;: [\n            {&lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;25&quot;&lt;/span&gt;},\n            {&lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;30&quot;&lt;/span&gt;}\n        ]\n    },\n    {\n        &lt;span class=&quot;hljs-string&quot;&gt;&quot;key&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;},\n        &lt;span class=&quot;hljs-string&quot;&gt;&quot;vals&quot;&lt;/span&gt;: [\n            {&lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;35&quot;&lt;/span&gt;}, \n            {&lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;40&quot;&lt;/span&gt;}\n        ]\n    }\n]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;code&gt;DataGrouper.register&lt;/code&gt; accepts a function and creates a new function which accepts the initial data and the properties to group by.  This new function then takes the output format as above and runs your function against each of them in turn, returning a new array.  The function that&apos;s generated is stored as a property of &lt;code&gt;DataGrouper&lt;/code&gt; according to a name you supply and also returned if you just want a local reference.&lt;/p&gt;\n\n&lt;p&gt;Well that&apos;s a lot of explanation.  The code is reasonably straightforward, I hope!&lt;/p&gt;\n    ","\n&lt;h3&gt;GroupBy &lt;em&gt;one-liner&lt;/em&gt;, an &lt;strong&gt;ES2021&lt;/strong&gt; solution&lt;/h3&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;x,f&lt;/span&gt;)=&amp;gt;x.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a,b&lt;/span&gt;)=&amp;gt;&lt;/span&gt;((a[&lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(b)]||=[]).&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(b),a),{});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4&gt;TypeScript&lt;/h4&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; groupBy = &amp;lt;T&amp;gt;&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;array: T[], predicate: (v: T) =&amp;gt; string&lt;/span&gt;) =&amp;gt;&lt;/span&gt;\n  array.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, value&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    (acc[&lt;span class=&quot;hljs-title function_&quot;&gt;predicate&lt;/span&gt;(value)] ||= []).&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(value);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; acc;\n  }, {} &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; { [&lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;: string]: T[] });\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;strong&gt;EXAMPLES&lt;/strong&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;x, f&lt;/span&gt;) =&amp;gt; x.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&amp;gt;&lt;/span&gt; ((a[&lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(b)] ||= []).&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(b), a), {});\n&lt;span class=&quot;hljs-comment&quot;&gt;// f -&amp;gt; should must return string/number because it will be use as key in object&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// for demo&lt;/span&gt;\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;], &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;v&lt;/span&gt; =&amp;gt;&lt;/span&gt; (v % &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&quot;odd&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;even&quot;&lt;/span&gt;));\n&lt;span class=&quot;hljs-comment&quot;&gt;// { odd: [1, 3, 5, 7, 9], even: [2, 4, 6, 8] };&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; colors = [\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;Apricot&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;Brown&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;Burgundy&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;Cerulean&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;Peach&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;Pear&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;Red&quot;&lt;/span&gt;,\n];\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(colors, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;v&lt;/span&gt; =&amp;gt;&lt;/span&gt; v[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]); &lt;span class=&quot;hljs-comment&quot;&gt;// group by colors name first letter&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// {&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   A: [&quot;Apricot&quot;],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   B: [&quot;Brown&quot;, &quot;Burgundy&quot;],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   C: [&quot;Cerulean&quot;],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   P: [&quot;Peach&quot;, &quot;Pear&quot;],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   R: [&quot;Red&quot;],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// };&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(colors, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;v&lt;/span&gt; =&amp;gt;&lt;/span&gt; v.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// group by length of color names&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// {&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   3: [&quot;Red&quot;],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   4: [&quot;Pear&quot;],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   5: [&quot;Brown&quot;, &quot;Peach&quot;],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   7: [&quot;Apricot&quot;],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   8: [&quot;Burgundy&quot;, &quot;Cerulean&quot;],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// }&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; data = [\n  { &lt;span class=&quot;hljs-attr&quot;&gt;comment&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;abc&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;forItem&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;inModule&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; },\n  { &lt;span class=&quot;hljs-attr&quot;&gt;comment&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;pqr&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;forItem&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;inModule&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; },\n  { &lt;span class=&quot;hljs-attr&quot;&gt;comment&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;klm&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;forItem&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;inModule&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; },\n  { &lt;span class=&quot;hljs-attr&quot;&gt;comment&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;xyz&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;forItem&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;inModule&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; },\n];\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(data, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;v&lt;/span&gt; =&amp;gt;&lt;/span&gt; v.&lt;span class=&quot;hljs-property&quot;&gt;inModule&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// group by module&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// {&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   1: [&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//     { comment: &quot;abc&quot;, forItem: 1, inModule: 1 },&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//     { comment: &quot;pqr&quot;, forItem: 1, inModule: 1 },&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   ],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   2: [&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//     { comment: &quot;klm&quot;, forItem: 1, inModule: 2 },&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//     { comment: &quot;xyz&quot;, forItem: 1, inModule: 2 },&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   ],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// }&lt;/span&gt;\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(data, &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt; =&amp;gt;&lt;/span&gt; x.&lt;span class=&quot;hljs-property&quot;&gt;forItem&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt; + x.&lt;span class=&quot;hljs-property&quot;&gt;inModule&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// group by module with item&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// {&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   &quot;1-1&quot;: [&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//     { comment: &quot;abc&quot;, forItem: 1, inModule: 1 },&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//     { comment: &quot;pqr&quot;, forItem: 1, inModule: 1 },&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   ],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   &quot;1-2&quot;: [&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//     { comment: &quot;klm&quot;, forItem: 1, inModule: 2 },&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//     { comment: &quot;xyz&quot;, forItem: 1, inModule: 2 },&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   ],&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// }&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;groupByToMap&lt;/h3&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupByToMap&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;x, f&lt;/span&gt;) =&amp;gt;\n  x.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, b, i, x&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; k = &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(b, i, x);\n    a.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(k)?.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(b) ?? a.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(k, [b]);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a;\n  }, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;());\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4&gt;TypeScript&lt;/h4&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; groupByToMap = &amp;lt;T, Q&amp;gt;&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;array: T[], predicate: (value: T, index: number, array: T[]) =&amp;gt; Q&lt;/span&gt;) =&amp;gt;&lt;/span&gt;\n  array.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;map, value, index, array&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; key = &lt;span class=&quot;hljs-title function_&quot;&gt;predicate&lt;/span&gt;(value, index, array);\n    map.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(key)?.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(value) ?? map.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(key, [value]);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; map;\n  }, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;&amp;lt;Q, T[]&amp;gt;());\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This is probably more easily done with &lt;a href=&quot;https://github.com/neuecc/linq.js&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;&lt;code&gt;linq.js&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, which is intended to be a true implementation of LINQ in JavaScript (&lt;a href=&quot;http://jsfiddle.net/n8vEt/&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;DEMO&lt;/strong&gt;&lt;/a&gt;):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; linq = &lt;span class=&quot;hljs-title class_&quot;&gt;Enumerable&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;From&lt;/span&gt;(data);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; result =\n    linq.&lt;span class=&quot;hljs-title class_&quot;&gt;GroupBy&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;){ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; x.&lt;span class=&quot;hljs-property&quot;&gt;Phase&lt;/span&gt;; })\n        .&lt;span class=&quot;hljs-title class_&quot;&gt;Select&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;){\n          &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {\n            &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: x.&lt;span class=&quot;hljs-title class_&quot;&gt;Key&lt;/span&gt;(),\n            &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: x.&lt;span class=&quot;hljs-title class_&quot;&gt;Sum&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;y&lt;/span&gt;){ &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; y.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt;|&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; })\n          };\n        }).&lt;span class=&quot;hljs-title class_&quot;&gt;ToArray&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;result:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;130&lt;/span&gt; }\n]\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or, more simply using the string-based selectors (&lt;a href=&quot;http://jsfiddle.net/n8vEt/1/&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;DEMO&lt;/strong&gt;&lt;/a&gt;):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;linq.&lt;span class=&quot;hljs-title class_&quot;&gt;GroupBy&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;$.Phase&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;k,e =&amp;gt; { Phase:k, Value:e.Sum(&apos;$.Value|0&apos;) }&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title class_&quot;&gt;ToArray&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;MDN has &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce#Grouping_objects_by_a_property&quot; rel=&quot;noreferrer&quot;&gt;this example&lt;/a&gt; in their &lt;code&gt;Array.reduce()&lt;/code&gt; documentation. &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Grouping objects by a property&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce#Grouping_objects_by_a_property#Grouping_objects_by_a_property&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; people = [\n  { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Alice&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;age&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;21&lt;/span&gt; },\n  { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Max&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;age&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt; },\n  { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;Jane&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;age&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt; }\n];\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;objectArray, property&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; objectArray.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;acc, obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; key = obj[property];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!acc[key]) {\n      acc[key] = [];\n    }\n    acc[key].&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(obj);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; acc;\n  }, {});\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; groupedPeople = &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(people, &lt;span class=&quot;hljs-string&quot;&gt;&apos;age&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-comment&quot;&gt;// groupedPeople is:&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// { &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   20: [&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//     { name: &apos;Max&apos;, age: 20 }, &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//     { name: &apos;Jane&apos;, age: 20 }&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   ], &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;//   21: [{ name: &apos;Alice&apos;, age: 21 }] &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// }&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;_.&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;([{&lt;span class=&quot;hljs-attr&quot;&gt;tipo&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;A&apos;&lt;/span&gt; },{&lt;span class=&quot;hljs-attr&quot;&gt;tipo&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;A&apos;&lt;/span&gt;}, {&lt;span class=&quot;hljs-attr&quot;&gt;tipo&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;B&apos;&lt;/span&gt;}], &lt;span class=&quot;hljs-string&quot;&gt;&apos;tipo&apos;&lt;/span&gt;);\n&amp;gt;&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt; {&lt;span class=&quot;hljs-attr&quot;&gt;A&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;], &lt;span class=&quot;hljs-attr&quot;&gt;B&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;From: &lt;a href=&quot;http://underscorejs.org/#groupBy&quot;&gt;http://underscorejs.org/#groupBy&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;groupBy&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;keyFunction&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; groups = {};\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;forEach&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;el&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; key = &lt;span class=&quot;hljs-title function_&quot;&gt;keyFunction&lt;/span&gt;(el);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (key &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; groups == &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;) {\n            groups[key] = [];\n        }\n        groups[key].&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(el);\n    });\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(groups).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {\n            &lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;: key,\n            &lt;span class=&quot;hljs-attr&quot;&gt;values&lt;/span&gt;: groups[key]\n        };\n    });\n};\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;it&apos;s a bit late but maybe someone like this one.&lt;/p&gt;\n&lt;p&gt;ES6:&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; users = [{\n    &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Jim&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;blue&quot;&lt;/span&gt;\n  },\n  {\n    &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Sam&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;blue&quot;&lt;/span&gt;\n  },\n  {\n    &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Eddie&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;green&quot;&lt;/span&gt;\n  },\n  {\n    &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Robert&quot;&lt;/span&gt;,\n    &lt;span class=&quot;hljs-attr&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;green&quot;&lt;/span&gt;\n  },\n];\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;arr, key&lt;/span&gt;) =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; initialValue = {};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arr.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, cval&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; myAttribute = cval[key];\n    acc[myAttribute] = [...(acc[myAttribute] || []), cval]\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; acc;\n  }, initialValue);\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; res = &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(users, &lt;span class=&quot;hljs-string&quot;&gt;&quot;color&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;group by:&quot;&lt;/span&gt;, res);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;You can do it with &lt;a href=&quot;http://github.com/agershun/alasql&quot;&gt;Alasql&lt;/a&gt; JavaScript library:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = [ { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;5&quot;&lt;/span&gt; },\n             { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt; }];\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; res = &lt;span class=&quot;hljs-title function_&quot;&gt;alasql&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;SELECT Phase, Step, SUM(CAST([Value] AS INT)) AS [Value] \\\n                  FROM ? GROUP BY Phase, Step&apos;&lt;/span&gt;,[data]);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Try this example &lt;a href=&quot;http://jsfiddle.net/agershun/ztc32a8h/1/&quot;&gt;at jsFiddle&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;&lt;em&gt;BTW:&lt;/em&gt;&lt;/strong&gt; On large arrays (100000 records and more) Alasql faster tham Linq. See test &lt;a href=&quot;http://jsperf.com/alasql-vs-linq-on-groupby&quot;&gt;at jsPref&lt;/a&gt;. &lt;/p&gt;\n\n&lt;p&gt;Comments:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Here I put Value in square brackets, because VALUE is a keyword in SQL&lt;/li&gt;\n&lt;li&gt;I have to use CAST() function to convert string Values to number type.&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;A newer approach with an object for grouping and two more function to create a key and to get an object with wanted items of grouping and another key for the adding value.&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt;\n    &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;array, groups, valueKey&lt;/span&gt;) =&amp;gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt;\n            &lt;span class=&quot;hljs-title function_&quot;&gt;getKey&lt;/span&gt; = o =&amp;gt; groups.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;k&lt;/span&gt; =&amp;gt;&lt;/span&gt; o[k]).&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;|&apos;&lt;/span&gt;),\n            getObject = &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;fromEntries&lt;/span&gt;([...groups.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;k&lt;/span&gt; =&amp;gt;&lt;/span&gt; [k, o[k]]), [valueKey, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]]);\n\n        groups = [].&lt;span class=&quot;hljs-title function_&quot;&gt;concat&lt;/span&gt;(groups);\n\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;values&lt;/span&gt;(array.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;r, o&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n            (r[&lt;span class=&quot;hljs-title function_&quot;&gt;getKey&lt;/span&gt;(o)] ??= &lt;span class=&quot;hljs-title function_&quot;&gt;getObject&lt;/span&gt;(o))[valueKey] += +o[valueKey];\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; r;\n        }, {}));\n    },\n    data = [{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;5&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;15&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;20&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;25&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;30&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;35&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;40&quot;&lt;/span&gt; }];\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(data, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Phase&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Value&apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(data, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;Phase&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Step&apos;&lt;/span&gt;], &lt;span class=&quot;hljs-string&quot;&gt;&apos;Value&apos;&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.as-console-wrapper&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; &lt;span class=&quot;hljs-meta&quot;&gt;!important&lt;/span&gt;; &lt;span class=&quot;hljs-attribute&quot;&gt;top&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; }&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif4&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Old approach:&lt;/p&gt;\n&lt;p&gt;Although the question have some answers and the answers look a bit over complicated, I suggest to use vanilla Javascript for group-by with a nested (if necessary) &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;Map&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;array, groups, valueKey&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; map = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;;\n    groups = [].&lt;span class=&quot;hljs-title function_&quot;&gt;concat&lt;/span&gt;(groups);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; array.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;r, o&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n        groups.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;m, k, i, { length }&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; child;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (m.&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(o[k])) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; m.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(o[k]);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (i + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; === length) {\n                child = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;\n                    .&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;(...groups.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;k&lt;/span&gt; =&amp;gt;&lt;/span&gt; ({ [k]: o[k] })), { [valueKey]: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; });\n                r.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(child);\n            } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n                child = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;;\n            }\n            m.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(o[k], child);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; child;\n        }, map)[valueKey] += +o[valueKey];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; r;\n    }, [])\n};\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; data = [{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;5&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;15&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;20&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;25&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;30&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;35&quot;&lt;/span&gt; }, { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;40&quot;&lt;/span&gt; }];\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(data, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Phase&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Value&apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(data, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;Phase&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Step&apos;&lt;/span&gt;], &lt;span class=&quot;hljs-string&quot;&gt;&apos;Value&apos;&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.as-console-wrapper&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; &lt;span class=&quot;hljs-meta&quot;&gt;!important&lt;/span&gt;; &lt;span class=&quot;hljs-attribute&quot;&gt;top&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; }&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif5&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Here&apos;s a nasty, hard to read solution using ES6:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;default&lt;/span&gt; (arr, key) =&amp;gt; \n  arr.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(\n    &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;r, v, _, __, k = v[key]&lt;/span&gt;) =&amp;gt;&lt;/span&gt; ((r[k] || (r[k] = [])).&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(v), r),\n    {}\n  );\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For those asking how does this &lt;strong&gt;even&lt;/strong&gt; work, here&apos;s an explanation:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;In both &lt;code&gt;=&amp;gt;&lt;/code&gt; you have a free &lt;code&gt;return&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;The &lt;code&gt;Array.prototype.reduce&lt;/code&gt; function takes up to 4 parameters. That&apos;s why a fifth parameter is being added so we can have a cheap variable declaration for the group (k) at the parameter declaration level by using a default value. (yes, this is sorcery)&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;If our current group doesn&apos;t exist on the previous iteration, we create a new empty array &lt;code&gt;((r[k] || (r[k] = []))&lt;/code&gt; This will evaluate to the leftmost expression, &lt;em&gt;in other words, an existing array or an empty array&lt;/em&gt;, this is why there&apos;s an immediate &lt;code&gt;push&lt;/code&gt; after that expression, because either way you will get an array.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;When there&apos;s a &lt;code&gt;return&lt;/code&gt;, the comma &lt;code&gt;,&lt;/code&gt; operator will discard the leftmost value, returning the tweaked previous group for this scenario.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;An easier to understand version that does the same is:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;default&lt;/span&gt; (array, key) =&amp;gt; \n  array.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;previous, currentItem&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; group = currentItem[key];\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!previous[group]) previous[group] = [];\n    previous[group].&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(currentItem);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; previous;\n  }, {});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Edit:&lt;/p&gt;\n&lt;p&gt;TS Version:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; groupBy = &amp;lt;T, K &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; keyof any&amp;gt;&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;list: T[], getKey: (item: T) =&amp;gt; K&lt;/span&gt;) =&amp;gt;&lt;/span&gt;\n  list.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;previous, currentItem&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; group = &lt;span class=&quot;hljs-title function_&quot;&gt;getKey&lt;/span&gt;(currentItem);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!previous[group]) previous[group] = [];\n    previous[group].&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(currentItem);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; previous;\n  }, {} &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Record&lt;/span&gt;&amp;lt;K, T[]&amp;gt;);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Checked answer -- just shallow grouping. It&apos;s pretty nice to understand reducing. Question also provide the problem of additional aggregate calculations.&lt;/p&gt;\n&lt;p&gt;Here is a REAL GROUP BY for Array of Objects by some field(s) with 1) calculated key name and 2) complete solution for cascading of grouping by providing the list of the desired keys\nand converting its unique values to root keys like SQL GROUP BY\ndoes.&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; inputArray = [ \n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;5&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;15&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;20&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;25&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;30&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;35&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;40&quot;&lt;/span&gt; }\n];\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; outObject = inputArray.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, e&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;// GROUP BY estimated key (estKey), well, may be a just plain key&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// a -- Accumulator result object&lt;/span&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// e -- sequentally checked Element, the Element that is tested just at this itaration&lt;/span&gt;\n\n  &lt;span class=&quot;hljs-comment&quot;&gt;// new grouping name may be calculated, but must be based on real value of real field&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; estKey = (e[&lt;span class=&quot;hljs-string&quot;&gt;&apos;Phase&apos;&lt;/span&gt;]); \n\n  (a[estKey] ? a[estKey] : (a[estKey] = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; || [])).&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(e);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a;\n}, {});\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(outObject);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif6&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Play with &lt;code&gt;estKey&lt;/code&gt; -- you may group by more then one field, add additional aggregations, calculations or other processing.&lt;/p&gt;\n&lt;p&gt;Also you can groups data recursively. For example initially group by &lt;code&gt;Phase&lt;/code&gt;, then by &lt;code&gt;Step&lt;/code&gt; field and so on. Additionally blow off\nthe fat rest data.&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;true&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; inputArray = [\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;5&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;15&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;20&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;25&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;30&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;35&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;40&quot;&lt;/span&gt; }\n  ];\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Small helper to get SHALLOW copy of obj WITHOUT prop\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;rmProp&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;obj, prop&lt;/span&gt;) =&amp;gt; ( (&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;{[prop]:_, ...rest}&lt;/span&gt;)=&amp;gt;&lt;/span&gt;rest)(obj) )\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Group Array by key. Root keys of a resulting array is value\n * of specified key.\n *\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;      {&lt;span class=&quot;hljs-type&quot;&gt;Array&lt;/span&gt;}   src     The source array\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt;      {&lt;span class=&quot;hljs-type&quot;&gt;String&lt;/span&gt;}  key     The by key to group by\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt;     {&lt;span class=&quot;hljs-type&quot;&gt;Object&lt;/span&gt;}          Object with grouped objects as values\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;grpBy&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;src, key&lt;/span&gt;) =&amp;gt; src.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, e&lt;/span&gt;) =&amp;gt;&lt;/span&gt; (\n  (a[e[key]] = a[e[key]] || []).&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;rmProp&lt;/span&gt;(e, key)),  a\n), {});\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Collapse array of object if it consists of only object with single value.\n * Replace it by the rest value.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;blowObj&lt;/span&gt; = obj =&amp;gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(obj) &amp;amp;&amp;amp; obj.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;values&lt;/span&gt;(obj[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; ? &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;values&lt;/span&gt;(obj[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] : obj;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Recursive grouping with list of keys. `keyList` may be an array\n * of key names or comma separated list of key names whom UNIQUE values will\n * becomes the keys of the resulting object.\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; grpByReal = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;src, keyList&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; [key, ...rest] = &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;isArray&lt;/span&gt;(keyList) ? keyList : &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(keyList).&lt;span class=&quot;hljs-title function_&quot;&gt;trim&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\s*,\\s*/&lt;/span&gt;);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; res = key ? &lt;span class=&quot;hljs-title function_&quot;&gt;grpBy&lt;/span&gt;(src, key) : [...src];\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (rest.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;) {\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; res) {\n  res[k] = &lt;span class=&quot;hljs-title function_&quot;&gt;grpByReal&lt;/span&gt;(res[k], rest)\n}\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n&lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; k &lt;span class=&quot;hljs-keyword&quot;&gt;in&lt;/span&gt; res) {\n  res[k] = &lt;span class=&quot;hljs-title function_&quot;&gt;blowObj&lt;/span&gt;(res[k])\n}\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; res;\n}\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;( &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;( &lt;span class=&quot;hljs-title function_&quot;&gt;grpByReal&lt;/span&gt;(inputArray, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Phase, Step, Task&apos;&lt;/span&gt;), &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; ) );&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif7&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;This solution takes any arbitrary function (not a key) so it&apos;s more flexible than solutions above, and allows &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;arrow functions&lt;/em&gt;&lt;/a&gt;, which are similar to &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/bb397687.aspx&quot; rel=&quot;noreferrer&quot;&gt;&lt;em&gt;lambda expressions&lt;/em&gt;&lt;/a&gt; used in &lt;strong&gt;LINQ&lt;/strong&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;groupBy&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;funcProp&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;acc, val&lt;/span&gt;) {\n        (acc[&lt;span class=&quot;hljs-title function_&quot;&gt;funcProp&lt;/span&gt;(val)] = acc[&lt;span class=&quot;hljs-title function_&quot;&gt;funcProp&lt;/span&gt;(val)] || []).&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(val);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; acc;\n    }, {});\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;NOTE: whether you want to extend &lt;code&gt;Array&lt;/code&gt;&apos;s prototype is up to you.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Example supported in most browsers:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[{&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;},{&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;c&quot;&lt;/span&gt;},{&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;d&quot;&lt;/span&gt;}].&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;c&lt;/span&gt;){&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; c.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt;;})\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Example using arrow functions (ES6):&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[{&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;},{&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-attr&quot;&gt;c&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;c&quot;&lt;/span&gt;},{&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;d&quot;&lt;/span&gt;}].&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;c&lt;/span&gt;=&amp;gt;&lt;/span&gt;c.&lt;span class=&quot;hljs-property&quot;&gt;a&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Both examples above return:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;{\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;1&quot;&lt;/span&gt;: [{&lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;}, {&lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;c&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;c&quot;&lt;/span&gt;}],\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;2&quot;&lt;/span&gt;: [{&lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;d&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;d&quot;&lt;/span&gt;}]\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Without mutations:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;xs, key&lt;/span&gt;) =&amp;gt; xs.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, x&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;({}, acc, {\n  [x[key]]: (acc[x[key]] || []).&lt;span class=&quot;hljs-title function_&quot;&gt;concat&lt;/span&gt;(x)\n}), {})\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;([&lt;span class=&quot;hljs-string&quot;&gt;&apos;one&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;two&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;three&apos;&lt;/span&gt;], &lt;span class=&quot;hljs-string&quot;&gt;&apos;length&apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; {3: [&quot;one&quot;, &quot;two&quot;], 5: [&quot;three&quot;]}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;i&apos;d like to suggest my approach. First, separate grouping and aggregating. Lets declare prototypical &quot;group by&quot; function. It takes another function to produce &quot;hash&quot; string for each array element to group by. &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;groupBy&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;hash&lt;/span&gt;){\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; _hash = hash ? hash : &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt;){&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; o;};\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; _map = {};\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; put = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;map, key, value&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!map[&lt;span class=&quot;hljs-title function_&quot;&gt;_hash&lt;/span&gt;(key)]) {\n        map[&lt;span class=&quot;hljs-title function_&quot;&gt;_hash&lt;/span&gt;(key)] = {};\n        map[&lt;span class=&quot;hljs-title function_&quot;&gt;_hash&lt;/span&gt;(key)].&lt;span class=&quot;hljs-property&quot;&gt;group&lt;/span&gt; = [];\n        map[&lt;span class=&quot;hljs-title function_&quot;&gt;_hash&lt;/span&gt;(key)].&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt; = key;\n\n    }\n    map[&lt;span class=&quot;hljs-title function_&quot;&gt;_hash&lt;/span&gt;(key)].&lt;span class=&quot;hljs-property&quot;&gt;group&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(value); \n  }\n\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;){\n    &lt;span class=&quot;hljs-title function_&quot;&gt;put&lt;/span&gt;(_map, obj, obj);\n  });\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(_map).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {&lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;: _map[key].&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;group&lt;/span&gt;: _map[key].&lt;span class=&quot;hljs-property&quot;&gt;group&lt;/span&gt;};\n  });\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;when grouping is done you can aggregate data how you need, in your case&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;data.&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;o&lt;/span&gt;){&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;a&lt;/span&gt;: o.&lt;span class=&quot;hljs-property&quot;&gt;Phase&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;b&lt;/span&gt;: o.&lt;span class=&quot;hljs-property&quot;&gt;Step&lt;/span&gt;});})\n    &lt;span class=&quot;hljs-comment&quot;&gt;/* aggreagating */&lt;/span&gt;\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;el&lt;/span&gt;){ \n         &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; sum = el.&lt;span class=&quot;hljs-property&quot;&gt;group&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(\n           &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;l,c&lt;/span&gt;){\n             &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; l + &lt;span class=&quot;hljs-built_in&quot;&gt;parseInt&lt;/span&gt;(c.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt;);\n           },\n           &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n         );\n         el.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt; = sum; \n         &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; el.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt;;\n    });\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;in common it works. i have tested this code in chrome console. and feel free to improve and find mistakes ;)&lt;/p&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;groupByArray&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;xs, key&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; xs.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;rv, x&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; v = key &lt;span class=&quot;hljs-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Function&lt;/span&gt; ? &lt;span class=&quot;hljs-title function_&quot;&gt;key&lt;/span&gt;(x) : x[key];\n        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; el = rv.&lt;span class=&quot;hljs-title function_&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;r&lt;/span&gt;) =&amp;gt;&lt;/span&gt; r &amp;amp;&amp;amp; r.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt; === v);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (el) {\n            el.&lt;span class=&quot;hljs-property&quot;&gt;values&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(x);\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n            rv.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;({\n                &lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;: v,\n                &lt;span class=&quot;hljs-attr&quot;&gt;values&lt;/span&gt;: [x]\n            });\n        }\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; rv;\n    }, []);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This one outputs array.&lt;/p&gt;\n    ","\n&lt;p&gt;Imagine that you have something like this:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;[{id:1, cat:&apos;sedan&apos;},{id:2, cat:&apos;sport&apos;},{id:3, cat:&apos;sport&apos;},{id:4, cat:&apos;sedan&apos;}]&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;By doing this:\n&lt;code&gt;const categories =  [...new Set(cars.map((car) =&amp;gt; car.cat))]&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;You will get this:\n&lt;code&gt;[&apos;sedan&apos;,&apos;sport&apos;]&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Explanation:&lt;/strong&gt;\n 1. First, we are creating a new Set by passing an array. Because Set only allows unique values, all duplicates will be removed.&lt;/p&gt;\n\n&lt;ol start=&quot;2&quot;&gt;\n&lt;li&gt;Now the duplicates are gone, were going to convert it back to an array by using the spread operator ...&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Set Doc:&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set&lt;/a&gt;\nSpread OperatorDoc: &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Based on previous answers&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;prop&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;xs&lt;/span&gt;) =&amp;gt;&lt;/span&gt;\n  xs.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;rv, x&lt;/span&gt;) =&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;assign&lt;/span&gt;(rv, {[x[prop]]: [...(rv[x[prop]] || []), x]}), {});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;and it&apos;s a little nicer to look at with object spread syntax, if your environment supports.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;prop&lt;/span&gt;) =&amp;gt; &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;xs&lt;/span&gt;) =&amp;gt;&lt;/span&gt;\n  xs.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, x&lt;/span&gt;) =&amp;gt;&lt;/span&gt; ({\n    ...acc,\n    [ x[ prop ] ]: [...( acc[ x[ prop ] ] || []), x],\n  }), {});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here, our reducer takes the partially-formed return value (starting with an empty object), and returns an object composed of the spread out members of the previous return value, along with a new member whose key is calculated from the current iteree&apos;s value at &lt;code&gt;prop&lt;/code&gt; and whose value is a list of all values for that prop along with the current value.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;code&gt;groupBy&lt;/code&gt; function that can group an array by a specific key or a given grouping function. Typed.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;groupBy = &amp;lt;T, K &lt;span class=&quot;hljs-keyword&quot;&gt;extends&lt;/span&gt; keyof T&amp;gt;(&lt;span class=&quot;hljs-attr&quot;&gt;array&lt;/span&gt;: T[], &lt;span class=&quot;hljs-attr&quot;&gt;groupOn&lt;/span&gt;: K | (&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;i: T&lt;/span&gt;) =&amp;gt;&lt;/span&gt; string)): &lt;span class=&quot;hljs-title class_&quot;&gt;Record&lt;/span&gt;&amp;lt;string, T[]&amp;gt; =&amp;gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; groupFn = &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; groupOn === &lt;span class=&quot;hljs-string&quot;&gt;&apos;function&apos;&lt;/span&gt; ? groupOn : &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;o: T&lt;/span&gt;) =&amp;gt;&lt;/span&gt; o[groupOn];\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;fromEntries&lt;/span&gt;(\n    array.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, obj&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; groupKey = &lt;span class=&quot;hljs-title function_&quot;&gt;groupFn&lt;/span&gt;(obj);\n      &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; acc.&lt;span class=&quot;hljs-title function_&quot;&gt;set&lt;/span&gt;(groupKey, [...(acc.&lt;span class=&quot;hljs-title function_&quot;&gt;get&lt;/span&gt;(groupKey) || []), obj]);\n    }, &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;())\n  ) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Record&lt;/span&gt;&amp;lt;string, T[]&amp;gt;;\n};\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I don&apos;t think that given answers are responding to the question, I think this following should answer to the first part :&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; arr = [ \n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;5&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;15&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;20&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;25&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;30&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;35&quot;&lt;/span&gt; },\n{ &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;40&quot;&lt;/span&gt; }\n]\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt;) =&amp;gt; arr.&lt;span class=&quot;hljs-title function_&quot;&gt;sort&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&amp;gt;&lt;/span&gt; a[key].&lt;span class=&quot;hljs-title function_&quot;&gt;localeCompare&lt;/span&gt;(b[key])).&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;total, currentValue&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; newTotal = total;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (\n    total.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;amp;&amp;amp;\n    total[total.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;][key] === currentValue[key]\n  )\n    newTotal[total.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = {\n      ...total[total.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;],\n      ...currentValue,\n      &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;parseInt&lt;/span&gt;(total[total.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt;) + &lt;span class=&quot;hljs-built_in&quot;&gt;parseInt&lt;/span&gt;(currentValue.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt;),\n    };\n  &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; newTotal[total.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;] = currentValue;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; newTotal;\n}, []);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Phase&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; [{ Phase: &quot;Phase 1&quot;, Value: 50 },{ Phase: &quot;Phase 2&quot;, Value: 130 }]&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Step&apos;&lt;/span&gt;));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; [{ Step: &quot;Step 1&quot;, Value: 70 },{ Step: &quot;Step 2&quot;, Value: 110 }] &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif8&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Let&apos;s fully answer the original question while reusing code that was already written (i.e., Underscore). You can do much more with Underscore if you &lt;em&gt;combine&lt;/em&gt; its &amp;gt;100 functions. The following solution demonstrates this.&lt;/p&gt;\n&lt;p&gt;Step 1: group the objects in the array by an arbitrary combination of properties. This uses the fact that &lt;a href=&quot;https://underscorejs.org/#groupBy&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.groupBy&lt;/code&gt;&lt;/a&gt; accepts a function that returns the group of an object. It also uses &lt;a href=&quot;https://underscorejs.org/#chain&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.chain&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://underscorejs.org/#pick&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.pick&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://underscorejs.org/#values&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.values&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://underscorejs.org/#chaining&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.join&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://underscorejs.org/#value&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.value&lt;/code&gt;&lt;/a&gt;. Note that &lt;code&gt;_.value&lt;/code&gt; is not strictly needed here, because chained values will automatically unwrap when used as a property name. I&apos;m including it to safeguard against confusion in case somebody tries to write similar code in a context where automatic unwrapping does not take place.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Given an object, return a string naming the group it belongs to.&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;category&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;chain&lt;/span&gt;(obj).&lt;span class=&quot;hljs-title function_&quot;&gt;pick&lt;/span&gt;(propertyNames).&lt;span class=&quot;hljs-title function_&quot;&gt;values&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;value&lt;/span&gt;();\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Perform the grouping.&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; intermediate = _.&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(arrayOfObjects, category);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Given the &lt;code&gt;arrayOfObjects&lt;/code&gt; in the original question and setting &lt;code&gt;propertyNames&lt;/code&gt; to &lt;code&gt;[&apos;Phase&apos;, &apos;Step&apos;]&lt;/code&gt;, &lt;code&gt;intermediate&lt;/code&gt; will get the following value:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;{\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1 Step 1&quot;&lt;/span&gt;: [\n        { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;5&quot;&lt;/span&gt; },\n        { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt; }\n    ],\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1 Step 2&quot;&lt;/span&gt;: [\n        { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;15&quot;&lt;/span&gt; },\n        { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;20&quot;&lt;/span&gt; }\n    ],\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2 Step 1&quot;&lt;/span&gt;: [\n        { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;25&quot;&lt;/span&gt; },\n        { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;30&quot;&lt;/span&gt; }\n    ],\n    &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2 Step 2&quot;&lt;/span&gt;: [\n        { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;35&quot;&lt;/span&gt; },\n        { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;40&quot;&lt;/span&gt; }\n    ]\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Step 2: reduce each group to a single flat object and return the results in an array. Besides the functions we have seen before, the following code uses &lt;a href=&quot;https://underscorejs.org/#pluck&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.pluck&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://underscorejs.org/#first&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.first&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://underscorejs.org/#pick&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.pick&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://underscorejs.org/#extend&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.extend&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://underscorejs.org/#reduce&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.reduce&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://underscorejs.org/#map&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.map&lt;/code&gt;&lt;/a&gt;. &lt;code&gt;_.first&lt;/code&gt; is guaranteed to return an object in this case, because &lt;code&gt;_.groupBy&lt;/code&gt; does not produce empty groups. &lt;code&gt;_.value&lt;/code&gt; is necessary in this case.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Sum two numbers, even if they are contained in strings.&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;addNumeric&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&amp;gt; +a + +b;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Given a `group` of objects, return a flat object with their common&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// properties and the sum of the property with name `aggregateProperty`.&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;summarize&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;group&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; valuesToSum = _.&lt;span class=&quot;hljs-title function_&quot;&gt;pluck&lt;/span&gt;(group, aggregateProperty);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;chain&lt;/span&gt;(group).&lt;span class=&quot;hljs-title function_&quot;&gt;first&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;pick&lt;/span&gt;(propertyNames).&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;({\n        [aggregateProperty]: _.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(valuesToSum, addNumeric)\n    }).&lt;span class=&quot;hljs-title function_&quot;&gt;value&lt;/span&gt;();\n}\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get an array with all the computed aggregates.&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; result = _.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(intermediate, summarize);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Given the &lt;code&gt;intermediate&lt;/code&gt; that we obtained before and setting &lt;code&gt;aggregateProperty&lt;/code&gt; to &lt;code&gt;Value&lt;/code&gt;, we get the &lt;code&gt;result&lt;/code&gt; that the asker desired:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;15&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;35&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;55&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;75&lt;/span&gt; }\n]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;We can put this all together in a function that takes &lt;code&gt;arrayOfObjects&lt;/code&gt;, &lt;code&gt;propertyNames&lt;/code&gt; and &lt;code&gt;aggregateProperty&lt;/code&gt; as parameters. Note that &lt;code&gt;arrayOfObjects&lt;/code&gt; can actually also be a plain object with string keys, because &lt;code&gt;_.groupBy&lt;/code&gt; accepts either. For this reason, I have renamed &lt;code&gt;arrayOfObjects&lt;/code&gt; to &lt;code&gt;collection&lt;/code&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;aggregate&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;collection, propertyNames, aggregateProperty&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;category&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;chain&lt;/span&gt;(obj).&lt;span class=&quot;hljs-title function_&quot;&gt;pick&lt;/span&gt;(propertyNames).&lt;span class=&quot;hljs-title function_&quot;&gt;values&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;addNumeric&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&amp;gt; +a + +b;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;summarize&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;group&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; valuesToSum = _.&lt;span class=&quot;hljs-title function_&quot;&gt;pluck&lt;/span&gt;(group, aggregateProperty);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;chain&lt;/span&gt;(group).&lt;span class=&quot;hljs-title function_&quot;&gt;first&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;pick&lt;/span&gt;(propertyNames).&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;({\n            [aggregateProperty]: _.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(valuesToSum, addNumeric)\n        }).&lt;span class=&quot;hljs-title function_&quot;&gt;value&lt;/span&gt;();\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;chain&lt;/span&gt;(collection).&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(category).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(summarize).&lt;span class=&quot;hljs-title function_&quot;&gt;value&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;code&gt;aggregate(arrayOfObjects, [&apos;Phase&apos;, &apos;Step&apos;], &apos;Value&apos;)&lt;/code&gt; will now give us the same &lt;code&gt;result&lt;/code&gt; again.&lt;/p&gt;\n&lt;p&gt;We can take this a step further and enable the caller to compute &lt;em&gt;any&lt;/em&gt; statistic over the values in each group. We can do this and also enable the caller to add arbitrary properties to the summary of each group. We can do all of this while making our code &lt;em&gt;shorter&lt;/em&gt;. We replace the &lt;code&gt;aggregateProperty&lt;/code&gt; parameter by an &lt;code&gt;iteratee&lt;/code&gt; parameter and pass this straight to &lt;code&gt;_.reduce&lt;/code&gt;:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;aggregate&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;collection, propertyNames, iteratee&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;category&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;chain&lt;/span&gt;(obj).&lt;span class=&quot;hljs-title function_&quot;&gt;pick&lt;/span&gt;(propertyNames).&lt;span class=&quot;hljs-title function_&quot;&gt;values&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;summarize&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;group&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;chain&lt;/span&gt;(group).&lt;span class=&quot;hljs-title function_&quot;&gt;first&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;pick&lt;/span&gt;(propertyNames)\n            .&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;(_.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(group, iteratee)).&lt;span class=&quot;hljs-title function_&quot;&gt;value&lt;/span&gt;();\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;chain&lt;/span&gt;(collection).&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(category).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(summarize).&lt;span class=&quot;hljs-title function_&quot;&gt;value&lt;/span&gt;();\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;In effect, we move some of the responsibility to the caller; she must provide an &lt;code&gt;iteratee&lt;/code&gt; that can be passed to &lt;code&gt;_.reduce&lt;/code&gt;, so that the call to &lt;code&gt;_.reduce&lt;/code&gt; will produce an object with the aggregate properties she wants to add. For example, we obtain the same &lt;code&gt;result&lt;/code&gt; as before with the following expression:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;aggregate&lt;/span&gt;(arrayOfObjects, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;Phase&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Step&apos;&lt;/span&gt;], &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;memo, value&lt;/span&gt;) =&amp;gt;&lt;/span&gt; ({\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: +memo.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt; + +value.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt;\n}));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For an example of a slightly more sophisticated &lt;code&gt;iteratee&lt;/code&gt;, suppose that we want to compute the &lt;em&gt;maximum&lt;/em&gt; &lt;code&gt;Value&lt;/code&gt; of each group instead of the sum, and that we want to add a &lt;code&gt;Tasks&lt;/code&gt; property that lists all the values of &lt;code&gt;Task&lt;/code&gt; that occur in the group. Here&apos;s one way we can do this, using the last version of &lt;code&gt;aggregate&lt;/code&gt; above (and &lt;a href=&quot;https://underscorejs.org/#union&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;_.union&lt;/code&gt;&lt;/a&gt;):&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;aggregate&lt;/span&gt;(arrayOfObjects, [&lt;span class=&quot;hljs-string&quot;&gt;&apos;Phase&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;Step&apos;&lt;/span&gt;], &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;memo, value&lt;/span&gt;) =&amp;gt;&lt;/span&gt; ({\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;max&lt;/span&gt;(memo.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt;, value.&lt;span class=&quot;hljs-property&quot;&gt;Value&lt;/span&gt;),\n    &lt;span class=&quot;hljs-title class_&quot;&gt;Tasks&lt;/span&gt;: _.&lt;span class=&quot;hljs-title function_&quot;&gt;union&lt;/span&gt;(memo.&lt;span class=&quot;hljs-property&quot;&gt;Tasks&lt;/span&gt; || [memo.&lt;span class=&quot;hljs-property&quot;&gt;Task&lt;/span&gt;], [value.&lt;span class=&quot;hljs-property&quot;&gt;Task&lt;/span&gt;])\n}));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;We obtain the following result:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;[\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Tasks&lt;/span&gt;: [ &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt; ] },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Tasks&lt;/span&gt;: [ &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt; ] },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Tasks&lt;/span&gt;: [ &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt; ] },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;40&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Tasks&lt;/span&gt;: [ &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt; ] }\n]\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Credit to @much2learn, who also posted an &lt;a href=&quot;https://stackoverflow.com/a/62393557/1166087&quot;&gt;answer&lt;/a&gt; that can handle arbitrary reducing functions. I wrote a couple more SO answers that demonstrate how one can achieve sophisticated things by combining multiple Underscore functions:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/64938636/1166087&quot;&gt;https://stackoverflow.com/a/64938636/1166087&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/64094738/1166087&quot;&gt;https://stackoverflow.com/a/64094738/1166087&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/63625129/1166087&quot;&gt;https://stackoverflow.com/a/63625129/1166087&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/63088916/1166087&quot;&gt;https://stackoverflow.com/a/63088916/1166087&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;groupBy&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;groupingKeyFn&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; groupingKeyFn !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;function&apos;&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;groupBy take a function as only parameter&quot;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;result, item&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; key = &lt;span class=&quot;hljs-title function_&quot;&gt;groupingKeyFn&lt;/span&gt;(item);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!result[key])\n            result[key] = [];\n        result[key].&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(item);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; result;\n    }, {});\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; a = [\n\t{&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;video&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;a&quot;&lt;/span&gt;},\n  {&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;image&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;b&quot;&lt;/span&gt;},\n  {&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;video&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;c&quot;&lt;/span&gt;},\n  {&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;blog&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;d&quot;&lt;/span&gt;},\n  {&lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;video&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;e&quot;&lt;/span&gt;},\n]\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(a.&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;) =&amp;gt;&lt;/span&gt; item.&lt;span class=&quot;hljs-property&quot;&gt;type&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif9&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I would check &lt;a href=&quot;https://www.npmjs.com/package/declarative-js#groupby&quot; rel=&quot;nofollow noreferrer&quot;&gt;declarative-js&lt;/a&gt; &lt;code&gt;groupBy&lt;/code&gt; it seems to do exactly what you are looking for. It is also: &lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;very performant (performance &lt;a href=&quot;https://github.com/pavel-surinin/performance-bechmark/blob/master/output.md#reduergroupby&quot; rel=&quot;nofollow noreferrer&quot;&gt;benchmark&lt;/a&gt;)&lt;/li&gt;\n&lt;li&gt;written in typescript so all typpings are included.&lt;/li&gt;\n&lt;li&gt;It is not enforcing to use 3rd party array-like objects.&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { &lt;span class=&quot;hljs-title class_&quot;&gt;Reducers&lt;/span&gt; } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&apos;declarative-js&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; groupBy = &lt;span class=&quot;hljs-title class_&quot;&gt;Reducers&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;groupBy&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;Reducers&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;Map&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; data = [\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;5&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;10&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;15&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;20&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;25&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;30&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 1&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;35&quot;&lt;/span&gt; },\n    { &lt;span class=&quot;hljs-title class_&quot;&gt;Phase&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Phase 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Step&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Step 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Task&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Task 2&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Value&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;40&quot;&lt;/span&gt; }\n];\n\ndata.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;element&lt;/span&gt;=&amp;gt;&lt;/span&gt; element.&lt;span class=&quot;hljs-property&quot;&gt;Step&lt;/span&gt;), &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;());\ndata.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;Step&apos;&lt;/span&gt;), &lt;span class=&quot;hljs-title class_&quot;&gt;Map&lt;/span&gt;());\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Lets generate a generic &lt;code&gt;Array.prototype.groupBy()&lt;/code&gt; tool. Just for variety let&apos;s use ES6 fanciness the spread operator for some Haskellesque pattern matching on a recursive approach. Also let&apos;s make our &lt;code&gt;Array.prototype.groupBy()&lt;/code&gt; to accept a callback which takes the item (&lt;code&gt;e&lt;/code&gt;) the index (&lt;code&gt;i&lt;/code&gt;) and the applied array (&lt;code&gt;a&lt;/code&gt;) as arguments.&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;groupBy&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;cb&lt;/span&gt;){\n                            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;iterate&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;[x,...xs], i = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, r = [[],[]]&lt;/span&gt;){\n                                     &lt;span class=&quot;hljs-title function_&quot;&gt;cb&lt;/span&gt;(x,i,[x,...xs]) ? (r[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(x), r)\n                                                       : (r[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(x), r);\n                                     &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; xs.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; ? &lt;span class=&quot;hljs-title function_&quot;&gt;iterate&lt;/span&gt;(xs, ++i, r) : r;\n                                   }(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;);\n                          };\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; arr = [&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;],\n    res = arr.&lt;span class=&quot;hljs-title function_&quot;&gt;groupBy&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;e&lt;/span&gt; =&amp;gt;&lt;/span&gt; e &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;);\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(res);&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif10&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Just to add to Scott Sauyet&apos;s &lt;a href=&quot;https://stackoverflow.com/a/14484332/5484795&quot;&gt;answer&lt;/a&gt;, some people were asking in the comments how to use his function to groupby value1, value2, etc., instead of grouping just one value.&lt;/p&gt;\n\n&lt;p&gt;All it takes is to edit his sum function:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;DataGrouper&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;register&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;sum&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;extend&lt;/span&gt;({}, item.&lt;span class=&quot;hljs-property&quot;&gt;key&lt;/span&gt;,\n        {&lt;span class=&quot;hljs-title class_&quot;&gt;VALUE1&lt;/span&gt;: _.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(item.&lt;span class=&quot;hljs-property&quot;&gt;vals&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;memo, node&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; memo + &lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;(node.&lt;span class=&quot;hljs-property&quot;&gt;VALUE1&lt;/span&gt;);}, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)},\n        {&lt;span class=&quot;hljs-title class_&quot;&gt;VALUE2&lt;/span&gt;: _.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(item.&lt;span class=&quot;hljs-property&quot;&gt;vals&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;memo, node&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; memo + &lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;(node.&lt;span class=&quot;hljs-property&quot;&gt;VALUE2&lt;/span&gt;);}, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)}\n    );\n});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;leaving the main one (DataGrouper) unchanged:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;DataGrouper&lt;/span&gt; = (&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; has = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;obj, target&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;any&lt;/span&gt;(obj, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;value&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;isEqual&lt;/span&gt;(value, target);\n        });\n    };\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; keys = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data, names&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(data, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;memo, item&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; key = _.&lt;span class=&quot;hljs-title function_&quot;&gt;pick&lt;/span&gt;(item, names);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(memo, key)) {\n                memo.&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(key);\n            }\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; memo;\n        }, []);\n    };\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; group = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data, names&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; stems = &lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(data, names);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(stems, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;stem&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {\n                &lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;: stem,\n                &lt;span class=&quot;hljs-attr&quot;&gt;vals&lt;/span&gt;:_.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(_.&lt;span class=&quot;hljs-title function_&quot;&gt;where&lt;/span&gt;(data, stem), &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt;) {\n                    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;omit&lt;/span&gt;(item, names);\n                })\n            };\n        });\n    };\n\n    group.&lt;span class=&quot;hljs-property&quot;&gt;register&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;name, converter&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; group[name] = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data, names&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; _.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;group&lt;/span&gt;(data, names), converter);\n        };\n    };\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; group;\n}());\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Ceasar&apos;s answer is good, but works only for inner properties of the elements inside the array (length in case of string).&lt;/p&gt;\n\n&lt;p&gt;this implementation works more like: &lt;a href=&quot;https://lodash.com/docs/4.17.4#groupBy&quot; rel=&quot;nofollow noreferrer&quot;&gt;this link&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; groupBy = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;arr, f&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; arr.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;out, val&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; by = &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; f === &lt;span class=&quot;hljs-string&quot;&gt;&apos;function&apos;&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt; + &lt;span class=&quot;hljs-title function_&quot;&gt;f&lt;/span&gt;(val) : val[f];\n        (out[by] = out[by] || []).&lt;span class=&quot;hljs-title function_&quot;&gt;push&lt;/span&gt;(val);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; out;\n    }, {});\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;hope this helps...&lt;/p&gt;\n    "],"310":["\n&lt;p&gt;Use the &lt;a href=&quot;https://rtyley.github.io/bfg-repo-cleaner/&quot; rel=&quot;noreferrer&quot;&gt;BFG Repo-Cleaner&lt;/a&gt;, a simpler, faster alternative to &lt;code&gt;git-filter-branch&lt;/code&gt; specifically designed for removing unwanted files from Git history.&lt;/p&gt;\n\n&lt;p&gt;Carefully follow the &lt;a href=&quot;https://rtyley.github.io/bfg-repo-cleaner/#usage&quot; rel=&quot;noreferrer&quot;&gt;usage instructions&lt;/a&gt;, the core part is just this:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;$ java -jar bfg.jar --strip-blobs-bigger-than 100M my-repo.git\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Any files over 100MB in size (that aren&apos;t in your &lt;em&gt;latest&lt;/em&gt; commit) will be removed from your Git repository&apos;s history. You can then use &lt;code&gt;git gc&lt;/code&gt; to clean away the dead data:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;$ git gc --prune=now --aggressive\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The BFG is typically at least &lt;a href=&quot;https://docs.google.com/spreadsheet/ccc?key=0AsR1d5Zpes8HdER3VGU1a3dOcmVHMmtzT2dsS2xNenc#gid=0&quot; rel=&quot;noreferrer&quot;&gt;10-50x&lt;/a&gt; faster than running &lt;code&gt;git-filter-branch&lt;/code&gt;, and generally easier to use.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Full disclosure: I&apos;m the author of the BFG Repo-Cleaner.&lt;/em&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;What you want to do is highly disruptive if you have published history to other developers. See &lt;a href=&quot;https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html#_recovering_from_upstream_rebase&quot; rel=&quot;noreferrer&quot;&gt;Recovering From Upstream Rebase in the &lt;code&gt;git rebase&lt;/code&gt; documentation&lt;/a&gt; for the necessary steps after repairing your history.&lt;/p&gt;\n&lt;p&gt;You have at least two options: &lt;a href=&quot;https://git-scm.com/docs/git-filter-branch&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;git filter-branch&lt;/code&gt;&lt;/a&gt; and an &lt;a href=&quot;https://git-scm.com/docs/git-rebase#Documentation/git-rebase.txt---interactive&quot; rel=&quot;noreferrer&quot;&gt;interactive rebase&lt;/a&gt;, both explained below.&lt;/p&gt;\n&lt;h2&gt;Using &lt;code&gt;git filter-branch&lt;/code&gt;&lt;/h2&gt;\n&lt;p&gt;I had a similar problem with bulky binary test data from a Subversion import and wrote about &lt;a href=&quot;http://blog.gbacon.com/2009/08/git-shrinking-subversion-import.html&quot; rel=&quot;noreferrer&quot;&gt;removing data from a git repository&lt;/a&gt;.&lt;/p&gt;\n&lt;p&gt;Say your git history is:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;$ git lola --name-status\n* f772d66 (HEAD, master) Login page\n| A     login.html\n* cb14efd Remove DVD-rip\n| D     oops.iso\n* ce36c98 Careless\n| A     oops.iso\n| A     other.html\n* 5af4522 Admin page\n| A     admin.html\n* e738b63 Index\n  A     index.html\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Note that &lt;a href=&quot;http://blog.kfish.org/2010/04/git-lola.html&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;git lola&lt;/code&gt;&lt;/a&gt; is a non-standard but highly useful alias. With the &lt;code&gt;--name-status&lt;/code&gt; switch, we can see tree modifications associated with each commit.&lt;/p&gt;\n&lt;p&gt;In the Careless commit (whose SHA1 object name is ce36c98) the file &lt;code&gt;oops.iso&lt;/code&gt; is the DVD-rip added by accident and removed in the next commit, cb14efd. Using the technique described in the aforementioned blog post, the command to execute is:&lt;/p&gt;\n&lt;pre class=&quot;lang-bash s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;git filter-branch --prune-empty -d /dev/shm/scratch \\\n  --index-filter &lt;span class=&quot;hljs-string&quot;&gt;&quot;git rm --cached -f --ignore-unmatch oops.iso&quot;&lt;/span&gt; \\\n  --tag-name-filter &lt;span class=&quot;hljs-built_in&quot;&gt;cat&lt;/span&gt; -- --all\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Options:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;--prune-empty&lt;/code&gt; removes commits that become empty (&lt;em&gt;i.e.&lt;/em&gt;, do not change the tree) as a result of the filter operation. In the typical case, this option produces a cleaner history.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;-d&lt;/code&gt; names a temporary directory that does not yet exist to use for building the filtered history. If you are running on a modern Linux distribution, specifying a &lt;a href=&quot;https://superuser.com/q/45342/20872&quot;&gt;tree in &lt;code&gt;/dev/shm&lt;/code&gt; will result in faster execution&lt;/a&gt;.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;--index-filter&lt;/code&gt; is the main event and runs against the index at each step in the history. You want to remove &lt;code&gt;oops.iso&lt;/code&gt; wherever it is found, but it isnt present in all commits. The command &lt;code&gt;git rm --cached -f --ignore-unmatch oops.iso&lt;/code&gt; deletes the DVD-rip when it is present and does not fail otherwise.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;--tag-name-filter&lt;/code&gt; describes how to rewrite tag names. A filter of &lt;code&gt;cat&lt;/code&gt; is the identity operation. Your repository, like the sample above, may not have any tags, but I included this option for full generality.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;--&lt;/code&gt; specifies the end of options to &lt;code&gt;git filter-branch&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;--all&lt;/code&gt; following &lt;code&gt;--&lt;/code&gt; is shorthand for all refs. Your repository, like the sample above, may have only one ref (master), but I included this option for full generality.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;After some churning, the history is now:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;$ git lola --name-status\n* 8e0a11c (HEAD, master) Login page\n| A     login.html\n* e45ac59 Careless\n| A     other.html\n|\n| * f772d66 (refs/original/refs/heads/master) Login page\n| | A   login.html\n| * cb14efd Remove DVD-rip\n| | D   oops.iso\n| * ce36c98 Careless\n|/  A   oops.iso\n|   A   other.html\n|\n* 5af4522 Admin page\n| A     admin.html\n* e738b63 Index\n  A     index.html\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Notice that the new Careless commit adds only &lt;code&gt;other.html&lt;/code&gt; and that the Remove DVD-rip commit is no longer on the master branch. The branch labeled &lt;code&gt;refs/original/refs/heads/master&lt;/code&gt; contains your original commits in case you made a mistake. To remove it, follow the steps in &lt;a href=&quot;https://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html#_checklist_for_shrinking_a_repository&quot; rel=&quot;noreferrer&quot;&gt;Checklist for Shrinking a Repository.&lt;/a&gt;&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;$ git update-ref -d refs/original/refs/heads/master\n$ git reflog expire --expire=now --all\n$ git gc --prune=now\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;For a simpler alternative, clone the repository to discard the unwanted bits.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;$ cd ~/src\n$ mv repo repo.old\n$ git clone file:///home/user/src/repo.old repo\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Using a &lt;code&gt;file:///...&lt;/code&gt; clone URL copies objects rather than creating hardlinks only.&lt;/p&gt;\n&lt;p&gt;Now your history is:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;$ git lola --name-status\n* 8e0a11c (HEAD, master) Login page\n| A     login.html\n* e45ac59 Careless\n| A     other.html\n* 5af4522 Admin page\n| A     admin.html\n* e738b63 Index\n  A     index.html\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The SHA1 object names for the first two commits (Index and Admin page) stayed the same because the filter operation did not modify those commits. Careless lost &lt;code&gt;oops.iso&lt;/code&gt; and Login page got a new parent, so their SHA1s &lt;em&gt;did&lt;/em&gt; change.&lt;/p&gt;\n&lt;h2&gt;Interactive rebase&lt;/h2&gt;\n&lt;p&gt;With a history of:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;$ git lola --name-status\n* f772d66 (HEAD, master) Login page\n| A     login.html\n* cb14efd Remove DVD-rip\n| D     oops.iso\n* ce36c98 Careless\n| A     oops.iso\n| A     other.html\n* 5af4522 Admin page\n| A     admin.html\n* e738b63 Index\n  A     index.html\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;you want to remove &lt;code&gt;oops.iso&lt;/code&gt; from Careless as though you never added it, and then Remove DVD-rip is useless to you. Thus, our plan going into an interactive rebase is to keep Admin page, edit Careless, and discard Remove DVD-rip.&lt;/p&gt;\n&lt;p&gt;Running &lt;code&gt;$ git rebase -i 5af4522&lt;/code&gt; starts an editor with the following contents.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;pick ce36c98 Careless\npick cb14efd Remove DVD-rip\npick f772d66 Login page\n\n# Rebase 5af4522..f772d66 onto 5af4522\n#\n# Commands:\n#  p, pick = use commit\n#  r, reword = use commit, but edit the commit message\n#  e, edit = use commit, but stop for amending\n#  s, squash = use commit, but meld into previous commit\n#  f, fixup = like &quot;squash&quot;, but discard this commit&apos;s log message\n#  x, exec = run command (the rest of the line) using shell\n#\n# If you remove a line here THAT COMMIT WILL BE LOST.\n# However, if you remove everything, the rebase will be aborted.\n#\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Executing our plan, we modify it to&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;edit ce36c98 Careless\npick f772d66 Login page\n\n# Rebase 5af4522..f772d66 onto 5af4522\n# ...\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;That is, we delete the line with Remove DVD-rip and change the operation on Careless to be &lt;code&gt;edit&lt;/code&gt; rather than &lt;code&gt;pick&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;Save-quitting the editor drops us at a command prompt with the following message.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;Stopped at ce36c98... Careless\nYou can amend the commit now, with\n\n        git commit --amend\n\nOnce you are satisfied with your changes, run\n\n        git rebase --continue\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;As the message tells us, we are on the Careless commit we want to edit, so we run two commands.&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;$ git rm --cached oops.iso\n$ git commit --amend -C HEAD\n$ git rebase --continue\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The first removes the offending file from the index. The second modifies or amends Careless to be the updated index and &lt;code&gt;-C HEAD&lt;/code&gt; instructs git to reuse the old commit message. Finally, &lt;code&gt;git rebase --continue&lt;/code&gt; goes ahead with the rest of the rebase operation.&lt;/p&gt;\n&lt;p&gt;This gives a history of:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;$ git lola --name-status\n* 93174be (HEAD, master) Login page\n| A     login.html\n* a570198 Careless\n| A     other.html\n* 5af4522 Admin page\n| A     admin.html\n* e738b63 Index\n  A     index.html\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;which is what you want.&lt;/p&gt;\n    ","\n&lt;p&gt;Why not use this simple but powerful command?&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;git filter-branch --tree-filter &apos;rm -f DVD-rip&apos; HEAD\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The &lt;code&gt;--tree-filter&lt;/code&gt; option runs the specified command after each checkout of the project and then recommits the results. In this case, you remove a file called DVD-rip from every snapshot, whether it exists or not. &lt;/p&gt;\n\n&lt;p&gt;If you know which commit introduced the huge file (say 35dsa2), you can replace HEAD with 35dsa2..HEAD to avoid rewriting too much history, thus avoiding diverging commits if you haven&apos;t pushed yet. This comment courtesy of @alpha_989 seems too important to leave out here.&lt;/p&gt;\n\n&lt;p&gt;See &lt;a href=&quot;https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History#The-Nuclear-Option:-filter-branch&quot; rel=&quot;noreferrer&quot;&gt;this link&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;(The best answer I&apos;ve seen to this problem is: &lt;a href=&quot;https://stackoverflow.com/a/42544963/714112&quot;&gt;https://stackoverflow.com/a/42544963/714112&lt;/a&gt; , copied here since this thread appears high in Google search rankings but that other one doesn&apos;t)&lt;/p&gt;\n\n&lt;h1&gt; A blazingly fast shell one-liner &lt;/h1&gt;\n\n&lt;p&gt;This shell script displays all blob objects in the repository, sorted from smallest to largest.&lt;/p&gt;\n\n&lt;p&gt;For my sample repo, it ran about &lt;strong&gt;100 times faster&lt;/strong&gt; than the other ones found here.&lt;br&gt;\nOn my trusty Athlon II X4 system, it handles the &lt;em&gt;Linux Kernel repository&lt;/em&gt; with its 5,622,155 objects in &lt;em&gt;just over a minute&lt;/em&gt;.&lt;/p&gt;\n\n&lt;h2&gt;The Base Script&lt;/h2&gt;\n\n&lt;pre class=&quot;lang-sh s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;git rev-list --objects --all \\\n| git cat-file --batch-check=&lt;span class=&quot;hljs-string&quot;&gt;&apos;%(objecttype) %(objectname) %(objectsize) %(rest)&apos;&lt;/span&gt; \\\n| awk &lt;span class=&quot;hljs-string&quot;&gt;&apos;/^blob/ {print substr($0,6)}&apos;&lt;/span&gt; \\\n| &lt;span class=&quot;hljs-built_in&quot;&gt;sort&lt;/span&gt; --numeric-sort --key=2 \\\n| &lt;span class=&quot;hljs-built_in&quot;&gt;cut&lt;/span&gt; --complement --characters=13-40 \\\n| &lt;span class=&quot;hljs-built_in&quot;&gt;numfmt&lt;/span&gt; --field=2 --to=iec-i --suffix=B --padding=7 --round=nearest\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;When you run above code, you will get nice &lt;strong&gt;human-readable output&lt;/strong&gt; like this:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;...\n0d99bb931299  530KiB path/to/some-image.jpg\n2ba44098e28f   12MiB path/to/hires-image.png\nbd1741ddce0d   63MiB path/to/some-video-1080p.mp4\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h2&gt; Fast File Removal &lt;/h2&gt;\n\n&lt;p&gt;Suppose you then want to remove the files &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt; from every commit reachable from &lt;code&gt;HEAD&lt;/code&gt;, you can use this command:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-sh s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;git filter-branch --index-filter &lt;span class=&quot;hljs-string&quot;&gt;&apos;git rm --cached --ignore-unmatch a b&apos;&lt;/span&gt; HEAD\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;After trying virtually every answer in SO, I finally found this gem that quickly removed and deleted the large files in my repository and allowed me to sync again: &lt;a href=&quot;http://www.zyxware.com/articles/4027/how-to-delete-files-permanently-from-your-local-and-remote-git-repositories&quot; rel=&quot;noreferrer&quot;&gt;http://www.zyxware.com/articles/4027/how-to-delete-files-permanently-from-your-local-and-remote-git-repositories&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;CD to your local working folder and run the following command:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;git filter-branch -f --index-filter &quot;git rm -rf --cached --ignore-unmatch FOLDERNAME&quot; -- --all\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;replace FOLDERNAME with the file or folder you wish to remove from the given git repository.&lt;/p&gt;\n\n&lt;p&gt;Once this is done run the following commands to clean up the local repository:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;rm -rf .git/refs/original/\ngit reflog expire --expire=now --all\ngit gc --prune=now\ngit gc --aggressive --prune=now\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now push all the changes to the remote repository:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;git push --all --force\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This will clean up the remote repository.&lt;/p&gt;\n    ","\n&lt;h1&gt;100 times faster than git filter-branch and simpler&lt;/h1&gt;\n&lt;p&gt;There are very good answers in this thread, but meanwhile many of them are outdated. Using &lt;code&gt;git-filter-branch&lt;/code&gt; is no longer recommended, because it is difficult to use and awfully slow on big repositories.&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;git-filter-repo&lt;/code&gt; is much faster and simpler to use.&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;git-filter-repo&lt;/code&gt; is a Python script, available at github: &lt;a href=&quot;https://github.com/newren/git-filter-repo&quot; rel=&quot;noreferrer&quot;&gt;https://github.com/newren/git-filter-repo&lt;/a&gt; . When installed it looks like a regular git command and can be called by &lt;code&gt;git filter-repo&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;You need only one file: the Python3 script git-filter-repo. Copy it to a path that is included in the PATH variable. On Windows you may have to change the first line of the script (refer INSTALL.md). You need Python3 installed installed on your system, but this is not a big deal.&lt;/p&gt;\n&lt;p&gt;First you can run&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git filter-repo --analyze\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This helps you to determine what to do next.&lt;/p&gt;\n&lt;p&gt;You can delete your DVD-rip file everywhere:&lt;/p&gt;\n&lt;pre&gt;&lt;code&gt;git filter-repo --invert-paths --path-match DVD-rip\n \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Filter-repo is really fast. A task that took around 9 hours on my computer by filter-branch, was completed in 4 minutes by filter-repo. You can do many more nice things with filter-repo. Refer to the documentation for that.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Warning:&lt;/strong&gt; Do this on a copy of your repository. Many actions of filter-repo cannot be undone. filter-repo will change the commit hashes of all modified commits (of course) and all their descendants down to the last commits!&lt;/p&gt;\n    ","\n&lt;p&gt;These commands worked in my case:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;git filter-branch --force --index-filter &apos;git rm --cached -r --ignore-unmatch oops.iso&apos; --prune-empty --tag-name-filter cat -- --all\nrm -rf .git/refs/original/\ngit reflog expire --expire=now --all\ngit gc --prune=now\ngit gc --aggressive --prune=now\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It is little different from the above versions.&lt;/p&gt;\n\n&lt;p&gt;For those who need to push this to github/bitbucket (I only tested this with bitbucket):&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;# WARNING!!!\n# this will rewrite completely your bitbucket refs\n# will delete all branches that you didn&apos;t have in your local\n\ngit push --all --prune --force\n\n# Once you pushed, all your teammates need to clone repository again\n# git pull will not work\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;According to GitHub &lt;a href=&quot;https://docs.github.com/en/github/authenticating-to-github/removing-sensitive-data-from-a-repository#using-filter-branch&quot; rel=&quot;noreferrer&quot;&gt;Documentation&lt;/a&gt;, just follow these steps:&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;Get rid of the large file&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;&lt;em&gt;Option 1: You don&apos;t want to keep the large file:&lt;/em&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-sh s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;rm&lt;/span&gt; path/to/your/large/file        &lt;span class=&quot;hljs-comment&quot;&gt;# delete the large file&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;em&gt;Option 2: You want to keep the large file into an untracked directory&lt;/em&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-sh s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;mkdir&lt;/span&gt; large_files                       &lt;span class=&quot;hljs-comment&quot;&gt;# create directory large_files&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;touch&lt;/span&gt; .gitignore                        &lt;span class=&quot;hljs-comment&quot;&gt;# create .gitignore file if needed&lt;/span&gt;\n&lt;span class=&quot;hljs-string&quot;&gt;&apos;/large_files/&apos;&lt;/span&gt; &amp;gt;&amp;gt; .gitignore           &lt;span class=&quot;hljs-comment&quot;&gt;# untrack directory large_files&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;mv&lt;/span&gt; path/to/your/large/file large_files/ &lt;span class=&quot;hljs-comment&quot;&gt;# move the large file into the untracked directory&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=&quot;2&quot;&gt;\n&lt;li&gt;Save your changes&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=&quot;lang-sh s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;git add path/to/your/large/file   &lt;span class=&quot;hljs-comment&quot;&gt;# add the deletion to the index&lt;/span&gt;\ngit commit -m &lt;span class=&quot;hljs-string&quot;&gt;&apos;delete large file&apos;&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;# commit the deletion&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;ol start=&quot;3&quot;&gt;\n&lt;li&gt;Remove the large file from all commits&lt;/li&gt;\n&lt;/ol&gt;\n&lt;pre class=&quot;lang-sh s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;git filter-branch --force --index-filter \\\n  &lt;span class=&quot;hljs-string&quot;&gt;&quot;git rm --cached --ignore-unmatch path/to/your/large/file&quot;&lt;/span&gt; \\\n  --prune-empty --tag-name-filter &lt;span class=&quot;hljs-built_in&quot;&gt;cat&lt;/span&gt; -- --all\ngit push &amp;lt;remote&amp;gt; &amp;lt;branch&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I ran into this with a bitbucket account, where I had accidentally stored ginormous *.jpa backups of my site. &lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;git filter-branch --prune-empty --index-filter &apos;git rm -rf --cached --ignore-unmatch MY-BIG-DIRECTORY-OR-FILE&apos; --tag-name-filter cat -- --all&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;Relpace &lt;code&gt;MY-BIG-DIRECTORY&lt;/code&gt; with the folder in question to completely rewrite your history (&lt;em&gt;including tags&lt;/em&gt;). &lt;/p&gt;\n\n&lt;p&gt;source: &lt;a href=&quot;https://web.archive.org/web/20170727144429/http://naleid.com:80/blog/2012/01/17/finding-and-purging-big-files-from-git-history/&quot; rel=&quot;noreferrer&quot;&gt;https://web.archive.org/web/20170727144429/http://naleid.com:80/blog/2012/01/17/finding-and-purging-big-files-from-git-history/&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Just note that this commands can be very destructive. If more people are working on the repo they&apos;ll all have to pull the new tree. The three middle commands are not necessary if your goal is NOT to reduce the size. Because the filter branch creates a backup of the removed file and it can stay there for a long time. &lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;$ git filter-branch --index-filter &quot;git rm -rf --cached --ignore-unmatch YOURFILENAME&quot; HEAD\n$ rm -rf .git/refs/original/ \n$ git reflog expire --all \n$ git gc --aggressive --prune\n$ git push origin master --force\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;code&gt;git filter-branch --tree-filter &apos;rm -f path/to/file&apos; HEAD&lt;/code&gt; \nworked pretty well for me, although I ran into the same problem as described &lt;a href=&quot;https://stackoverflow.com/q/6403601/97443&quot;&gt;here&lt;/a&gt;, which I solved by following &lt;a href=&quot;https://stackoverflow.com/a/6404368/97443&quot;&gt;this suggestion&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;The pro-git book has an entire chapter on &lt;a href=&quot;http://git-scm.com/book/en/Git-Tools-Rewriting-History&quot; rel=&quot;nofollow noreferrer&quot;&gt;rewriting history&lt;/a&gt; - have a look at the &lt;a href=&quot;http://git-scm.com/book/en/Git-Tools-Rewriting-History#The-Nuclear-Option:-filter-branch&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;code&gt;filter-branch&lt;/code&gt;/Removing a File from Every Commit&lt;/a&gt; section.&lt;/p&gt;\n    ","\n&lt;p&gt;If you know your commit was recent instead of going through the entire tree do the following:\n&lt;code&gt;\ngit filter-branch --tree-filter &apos;rm LARGE_FILE.zip&apos; HEAD~10..HEAD\n&lt;/code&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;This will remove it from your history&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;git filter-branch --force --index-filter &apos;git rm -r --cached --ignore-unmatch bigfile.txt&apos; --prune-empty --tag-name-filter cat -- --all\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Use &lt;a href=&quot;http://gitextensions.github.io/&quot; rel=&quot;noreferrer&quot;&gt;Git Extensions&lt;/a&gt;, it&apos;s a UI tool. It has a plugin named &quot;Find large files&quot; which finds lage files in repositories and allow removing them permenently.&lt;/p&gt;\n\n&lt;p&gt;Don&apos;t use &apos;git filter-branch&apos; before using this tool, since it won&apos;t be able to find files removed by &apos;filter-branch&apos; (Altough &apos;filter-branch&apos; does not remove files completely from the repository pack files).&lt;/p&gt;\n    ","\n&lt;p&gt;I basically did what was on this answer:\n&lt;a href=&quot;https://stackoverflow.com/a/11032521/1286423&quot;&gt;https://stackoverflow.com/a/11032521/1286423&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;(for history, I&apos;ll copy-paste it here)&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;$ git filter-branch --index-filter &quot;git rm -rf --cached --ignore-unmatch YOURFILENAME&quot; HEAD\n$ rm -rf .git/refs/original/ \n$ git reflog expire --all \n$ git gc --aggressive --prune\n$ git push origin master --force\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It didn&apos;t work, because I like to rename and move things a lot. So some big file were in folders that have been renamed, and I think the gc couldn&apos;t delete the reference to those files because of reference in &lt;code&gt;tree&lt;/code&gt; objects pointing to those file.\nMy ultimate solution to really kill it was to:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;# First, apply what&apos;s in the answer linked in the front\n# and before doing the gc --prune --aggressive, do:\n\n# Go back at the origin of the repository\ngit checkout -b newinit &amp;lt;sha1 of first commit&amp;gt;\n# Create a parallel initial commit\ngit commit --amend\n# go back on the master branch that has big file\n# still referenced in history, even though \n# we thought we removed them.\ngit checkout master\n# rebase on the newinit created earlier. By reapply patches,\n# it will really forget about the references to hidden big files.\ngit rebase newinit\n\n# Do the previous part (checkout + rebase) for each branch\n# still connected to the original initial commit, \n# so we remove all the references.\n\n# Remove the .git/logs folder, also containing references\n# to commits that could make git gc not remove them.\nrm -rf .git/logs/\n\n# Then you can do a garbage collection,\n# and the hidden files really will get gc&apos;ed\ngit gc --prune --aggressive\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;My repo (the &lt;code&gt;.git&lt;/code&gt;) changed from 32MB to 388KB, that even filter-branch couldn&apos;t clean.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;code&gt;git filter-branch&lt;/code&gt; is a powerful command which you can use it to delete a huge file from the commits history. The file will stay for a while and Git will remove it in the next garbage collection.\nBelow is the full process from &lt;a href=&quot;https://www.gloomycorner.com/deleting-files-from-git-commit-history/&quot; rel=&quot;nofollow noreferrer&quot;&gt;deleteing files from commit history&lt;/a&gt;. For safety, below process runs the commands on a new branch first. If the result is what you needed, then reset it back to the branch you actually want to change.&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;# Do it in a new testing branch\n$ git checkout -b test\n\n# Remove file-name from every commit on the new branch\n# --index-filter, rewrite index without checking out\n# --cached, remove it from index but not include working tree\n# --ignore-unmatch, ignore if files to be removed are absent in a commit\n# HEAD, execute the specified command for each commit reached from HEAD by parent link\n$ git filter-branch --index-filter &apos;git rm --cached --ignore-unmatch file-name&apos; HEAD\n\n# The output is OK, reset it to the prior branch master\n$ git checkout master\n$ git reset --soft test\n\n# Remove test branch\n$ git branch -d test\n\n# Push it with force\n$ git push --force origin master\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can do this using the &lt;code&gt;branch filter&lt;/code&gt; command:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;git filter-branch --tree-filter &apos;rm -rf path/to/your/file&apos; HEAD&lt;/code&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;When you run into this problem, &lt;code&gt;git rm&lt;/code&gt; will not suffice, as git remembers that the file existed once in our history, and thus will keep a reference to it.&lt;/p&gt;\n\n&lt;p&gt;To make things worse, rebasing is not easy either, because any references to the blob will prevent git garbage collector from cleaning up the space. This includes remote references and reflog references.&lt;/p&gt;\n\n&lt;p&gt;I put together &lt;code&gt;git forget-blob&lt;/code&gt;, a little script that tries removing all these references, and then uses git filter-branch to rewrite every commit in the branch.&lt;/p&gt;\n\n&lt;p&gt;Once your blob is completely unreferenced, &lt;code&gt;git gc&lt;/code&gt; will get rid of it&lt;/p&gt;\n\n&lt;p&gt;The usage is pretty simple &lt;code&gt;git forget-blob file-to-forget&lt;/code&gt;. You can get more info here&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://ownyourbits.com/2017/01/18/completely-remove-a-file-from-a-git-repository-with-git-forget-blob/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://ownyourbits.com/2017/01/18/completely-remove-a-file-from-a-git-repository-with-git-forget-blob/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;I put this together thanks to the answers from Stack Overflow and some blog entries. Credits to them!&lt;/p&gt;\n    ","\n&lt;p&gt;Other than &lt;code&gt;git filter-branch&lt;/code&gt; (slow but pure git solution) and &lt;a href=&quot;https://rtyley.github.io/bfg-repo-cleaner/&quot; rel=&quot;nofollow noreferrer&quot;&gt;BFG&lt;/a&gt; (easier and very performant), there is also another tool to filter with good performance:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/xoofx/git-rocket-filter&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://github.com/xoofx/git-rocket-filter&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;From its description:&lt;/p&gt;\n\n&lt;p&gt;The purpose of git-rocket-filter is similar to the command &lt;code&gt;git-filter-branch&lt;/code&gt; while providing the following unique features:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Fast rewriting of commits and trees (by an order of x10 to x100).&lt;/li&gt;\n&lt;li&gt;Built-in support for both white-listing with --keep (keeps files or directories) and black-listing with --remove options.&lt;/li&gt;\n&lt;li&gt;Use of .gitignore like pattern for tree-filtering&lt;/li&gt;\n&lt;li&gt;Fast and easy C# Scripting for both commit filtering and tree filtering&lt;/li&gt;\n&lt;li&gt;Support for scripting in tree-filtering per file/directory pattern&lt;/li&gt;\n&lt;li&gt;Automatically prune empty/unchanged commit, including merge commits&lt;/li&gt;\n&lt;/ul&gt;\n    ","\n&lt;p&gt;This works perfectly for me : in git extensions :&lt;/p&gt;\n&lt;p&gt;right click on the selected commit :&lt;/p&gt;\n&lt;p&gt;reset current branch to here :&lt;/p&gt;\n&lt;p&gt;hard reset ;&lt;/p&gt;\n&lt;p&gt;It&apos;s surprising nobody else is able to give this simple answer.&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/atZ6T.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/atZ6T.png&quot; alt=&quot;reset current branch to here&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/tDqKF.png&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/tDqKF.png&quot; alt=&quot;hard reset&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;pre&gt;&lt;code&gt;git reset --soft HEAD~1\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;It will keep the changes but remove the commit then you can re-commit those changes.&lt;/p&gt;\n    "]},"page":"61","randomQuestions":[{"title":"How do I give text or an image a transparent background using CSS?","slug":"how-do-i-give-text-or-an-image-a-transparent-background-using-css-1657388188508"},{"title":"How do I select rows from a DataFrame based on column values?","slug":"how-do-i-select-rows-from-a-dataframe-based-on-column-values-1657384901065"},{"title":"How do I undo the most recent local commits in Git?","slug":"how-do-i-undo-the-most-recent-local-commits-in-git-1657388262945"},{"title":"Why is using \"for...in\" for array iteration a bad idea?","slug":"why-is-using-\"for...in\"-for-array-iteration-a-bad-idea-1657384653458"},{"title":"How to use variables in SQL statement in Python?","slug":"how-to-use-variables-in-sql-statement-in-python-1657388479077"},{"title":"Retrieve only the queried element in an object array in MongoDB collection","slug":"retrieve-only-the-queried-element-in-an-object-array-in-mongodb-collection-1657384890457"},{"title":"How to filter Pandas dataframe using 'in' and 'not in' like in SQL","slug":"how-to-filter-pandas-dataframe-using-'in'-and-'not-in'-like-in-sql-1657387371355"},{"title":"How do I make a list of data frames?","slug":"how-do-i-make-a-list-of-data-frames-1657385480437"},{"title":"What is The Rule of Three?","slug":"what-is-the-rule-of-three-1657384390295"},{"title":"Switch between two frames in tkinter?","slug":"switch-between-two-frames-in-tkinter-1657388528781"},{"title":"How can I save an activity state using the save instance state?","slug":"how-can-i-save-an-activity-state-using-the-save-instance-state-1657387429981"},{"title":"Reference — What does this symbol mean in PHP?","slug":"reference-what-does-this-symbol-mean-in-php-1657384561666"},{"title":"What is an efficient way to implement a singleton pattern in Java? [closed]","slug":"what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java-closed-1657387970474"},{"title":"How to randomize (shuffle) a JavaScript array?","slug":"how-to-randomize-(shuffle)-a-javascript-array-1657384790171"},{"title":"The ViewData item that has the key 'XXX' is of type 'System.Int32' but must be of type 'IEnumerable<SelectListItem>'","slug":"the-viewdata-item-that-has-the-key-'xxx'-is-of-type-'system.int32'-but-must-be-of-type-'ienumerablelessselectlistitemgreater'-1657388454191"},{"title":"Using async/await with a forEach loop","slug":"using-asyncawait-with-a-foreach-loop-1657384512667"},{"title":"Creating multiline strings in JavaScript","slug":"creating-multiline-strings-in-javascript-1657388025414"},{"title":"How to make good reproducible pandas examples","slug":"how-to-make-good-reproducible-pandas-examples-1657384310402"},{"title":"Why JSF calls getters multiple times","slug":"why-jsf-calls-getters-multiple-times-1657388244489"},{"title":"How do I generate random integers within a specific range in Java?","slug":"how-do-i-generate-random-integers-within-a-specific-range-in-java-1657385458888"}]},"__N_SSG":true}