{"pageProps":{"data":{"count":610,"rows":[{"id":370,"title":"How to print a number with commas as thousands separators in JavaScript","slug":"how-to-print-a-number-with-commas-as-thousands-separators-in-javascript-1657387777379","postType":"QUESTION","createdAt":"2022-07-09T17:29:37.000Z","updatedAt":"2022-07-09T17:29:37.000Z","tags":[{"id":2040,"name":"formatting","slug":"formatting","createdAt":"2022-07-09T17:29:37.000Z","updatedAt":"2022-07-09T17:29:37.000Z","Questions_Tags":{"questionId":370,"tagId":2040}},{"id":2041,"name":"numbers","slug":"numbers","createdAt":"2022-07-09T17:29:37.000Z","updatedAt":"2022-07-09T17:29:37.000Z","Questions_Tags":{"questionId":370,"tagId":2041}}]},{"id":369,"title":"What is JSONP, and why was it created?","slug":"what-is-jsonp-and-why-was-it-created-1657387770563","postType":"QUESTION","createdAt":"2022-07-09T17:29:30.000Z","updatedAt":"2022-07-09T17:29:30.000Z","tags":[{"id":2037,"name":"jsonp","slug":"jsonp","createdAt":"2022-07-09T17:29:30.000Z","updatedAt":"2022-07-09T17:29:30.000Z","Questions_Tags":{"questionId":369,"tagId":2037}},{"id":2038,"name":"terminology","slug":"terminology","createdAt":"2022-07-09T17:29:30.000Z","updatedAt":"2022-07-09T17:29:30.000Z","Questions_Tags":{"questionId":369,"tagId":2038}}]},{"id":368,"title":"javascript function doesn't work when link is clicked","slug":"javascript-function-doesn't-work-when-link-is-clicked-1657387767488","postType":"QUESTION","createdAt":"2022-07-09T17:29:27.000Z","updatedAt":"2022-07-09T17:29:27.000Z","tags":[{"id":2034,"name":"iframe","slug":"iframe","createdAt":"2022-07-09T17:29:27.000Z","updatedAt":"2022-07-09T17:29:27.000Z","Questions_Tags":{"questionId":368,"tagId":2034}}]},{"id":367,"title":"Aggregate / summarize multiple variables per group (e.g. sum, mean)","slug":"aggregate-summarize-multiple-variables-per-group-(e.g.-sum-mean)-1657387764061","postType":"QUESTION","createdAt":"2022-07-09T17:29:24.000Z","updatedAt":"2022-07-09T17:29:24.000Z","tags":[{"id":2029,"name":"data.table","slug":"data.table","createdAt":"2022-07-09T17:29:24.000Z","updatedAt":"2022-07-09T17:29:24.000Z","Questions_Tags":{"questionId":367,"tagId":2029}}]},{"id":366,"title":"Transitions on the CSS display property","slug":"transitions-on-the-css-display-property-1657387761601","postType":"QUESTION","createdAt":"2022-07-09T17:29:21.000Z","updatedAt":"2022-07-09T17:29:21.000Z","tags":[{"id":2026,"name":"css-transitions","slug":"css-transitions","createdAt":"2022-07-09T17:29:21.000Z","updatedAt":"2022-07-09T17:29:21.000Z","Questions_Tags":{"questionId":366,"tagId":2026}}]}]},"answers":{"366":["\n&lt;p&gt;You can concatenate two transitions or more, and &lt;code&gt;visibility&lt;/code&gt; is what comes handy this time.&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;border&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1px&lt;/span&gt; solid &lt;span class=&quot;hljs-number&quot;&gt;#eee&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: hidden;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: visibility &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt; linear;\n}\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: visible;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Item 1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Item 2&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Item 3&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;(Don&apos;t forget the vendor prefixes to the &lt;code&gt;transition&lt;/code&gt; property.)&lt;/p&gt;\n\n&lt;p&gt;More details are in &lt;a href=&quot;http://www.greywyvern.com/?post=337&quot; rel=&quot;noreferrer&quot;&gt;this article&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;You need to hide the element by other means in order to get this to work.&lt;/p&gt;\n\n&lt;p&gt;I accomplished the effect by positioning both &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt;s absolutely and setting the hidden one to &lt;code&gt;opacity: 0&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;If you even toggle the &lt;code&gt;display&lt;/code&gt; property from &lt;code&gt;none&lt;/code&gt; to &lt;code&gt;block&lt;/code&gt;, your transition on other elements will not occur.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;To work around this, always allow the element to be &lt;code&gt;display: block&lt;/code&gt;, but hide the element by adjusting any of these means:&lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Set the &lt;code&gt;height&lt;/code&gt; to &lt;code&gt;0&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Set the &lt;code&gt;opacity&lt;/code&gt; to &lt;code&gt;0&lt;/code&gt;.&lt;/li&gt;\n&lt;li&gt;Position the element outside of the frame of another element that has &lt;code&gt;overflow: hidden&lt;/code&gt;.&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;There are likely more solutions, but you cannot perform a transition if you toggle the element to &lt;code&gt;display: none&lt;/code&gt;. For example, you may attempt to try something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: opacity &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.active&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;But that will &lt;strong&gt;not&lt;/strong&gt; work. From my experience, I have found this to do nothing.&lt;/p&gt;\n\n&lt;p&gt;Because of this, you will always need to keep the element &lt;code&gt;display: block&lt;/code&gt; - but you could get around it by doing something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: opacity &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;overflow&lt;/span&gt;: hidden;\n}\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.active&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: auto;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;At the time of this post all major browsers disable CSS transitions if you try to change the &lt;code&gt;display&lt;/code&gt; property, but CSS animations still work fine so we can use them as a workaround.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Example Code&lt;/strong&gt; (you can apply it to your menu accordingly) &lt;a href=&quot;http://cssdesk.com/7WPCT&quot; rel=&quot;noreferrer&quot;&gt;Demo&lt;/a&gt;:&lt;/p&gt;\n\n&lt;p&gt;Add the following CSS to your stylesheet:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@-webkit-keyframes&lt;/span&gt; fadeIn {\n    &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; }\n      &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; }\n}\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fadeIn {\n    &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; }\n      &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then apply the &lt;code&gt;fadeIn&lt;/code&gt; animation to the child on parent hover (and of course set &lt;code&gt;display: block&lt;/code&gt;):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.parent&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.child&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fadeIn &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fadeIn &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;h1&gt;Update 2019 - Method that also supports fading out:&lt;/h1&gt;\n\n&lt;p&gt;(Some JavaScript code is required)&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;false&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// We need to keep track of faded in elements so we can apply fade out later in CSS&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;animationstart&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;e&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (e.&lt;span class=&quot;hljs-property&quot;&gt;animationName&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;fade-in&apos;&lt;/span&gt;) {\n      e.&lt;span class=&quot;hljs-property&quot;&gt;target&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;did-fade-in&apos;&lt;/span&gt;);\n  }\n});\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;animationend&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;e&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (e.&lt;span class=&quot;hljs-property&quot;&gt;animationName&lt;/span&gt; === &lt;span class=&quot;hljs-string&quot;&gt;&apos;fade-out&apos;&lt;/span&gt;) {\n      e.&lt;span class=&quot;hljs-property&quot;&gt;target&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;remove&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;did-fade-in&apos;&lt;/span&gt;);\n   }\n});&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;border&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;5px&lt;/span&gt; solid;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;padding&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10px&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;border-color&lt;/span&gt;: red;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.parent&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.child&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.parent&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.child&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fade-in &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.parent&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:not&lt;/span&gt;(&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt;) &lt;span class=&quot;hljs-selector-class&quot;&gt;.child&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.did-fade-in&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fade-out &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fade-in {\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fade-out {\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  }\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;parent&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    Parent\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;child&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        Child\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Instead of callbacks, which don&apos;t exist in CSS, we can use &lt;code&gt;transition-delay&lt;/code&gt; property.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#selector&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;overflow&lt;/span&gt;: hidden;  &lt;span class=&quot;hljs-comment&quot;&gt;/* Hide the element content, while height = 0 */&lt;/span&gt;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0ms&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;400ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;400ms&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0ms&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-selector-id&quot;&gt;#selector&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.visible&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: auto; &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0ms&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;600ms&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0ms&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;So, what&apos;s going on here?&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;p&gt;When &lt;code&gt;visible&lt;/code&gt; class is added, both &lt;code&gt;height&lt;/code&gt; and &lt;code&gt;opacity&lt;/code&gt; start animation without delay (0&amp;nbsp;ms), though &lt;code&gt;height&lt;/code&gt; takes 0&amp;nbsp;ms to complete animation (equivalent of &lt;code&gt;display: block&lt;/code&gt;) and &lt;code&gt;opacity&lt;/code&gt; takes 600&amp;nbsp;ms.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;When &lt;code&gt;visible&lt;/code&gt; class is removed, &lt;code&gt;opacity&lt;/code&gt; starts animation (0&amp;nbsp;ms delay, 400&amp;nbsp;ms duration), and height waits 400&amp;nbsp;ms and only then instantly (0&amp;nbsp;ms) restores initial value (equivalent of &lt;code&gt;display: none&lt;/code&gt; in the animation callback).&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;Note, this approach is better than ones using &lt;code&gt;visibility&lt;/code&gt;. In such cases, the element still occupies the space on the page, and it&apos;s not always suitable.&lt;/p&gt;\n&lt;p&gt;For more examples please refer to &lt;a href=&quot;https://medium.com/@joethedave/achieving-ui-animations-with-react-the-right-way-562fa8a91935&quot; rel=&quot;noreferrer&quot;&gt;this article&lt;/a&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;I suspect that the &lt;em&gt;reason&lt;/em&gt; that transitions are disabled if &lt;code&gt;display&lt;/code&gt; is changed is because of what display actually does. It does &lt;em&gt;not&lt;/em&gt; change anything that could conceivably be smoothly animated.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;display: none;&lt;/code&gt; and &lt;code&gt;visibility: hidden;&lt;/code&gt; are two &lt;em&gt;entirely&lt;/em&gt; different things.&lt;br&gt;\nBoth do have the effect of making the element invisible, but with &lt;code&gt;visibility: hidden;&lt;/code&gt; its still rendered in the layout, but just not &lt;em&gt;visibly&lt;/em&gt; so.&lt;br&gt;\nThe hidden element still takes up space, and is still rendered inline or as a block or block-inline or table or whatever the &lt;code&gt;display&lt;/code&gt; element tells it to render as, and takes up space accordingly.&lt;br&gt;\nOther elements do &lt;em&gt;not&lt;/em&gt; automatically move to occupy that space. The hidden element just doesnt render its actual pixels to the output.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;display: none&lt;/code&gt; on the other hand actually &lt;em&gt;prevents&lt;/em&gt; the element from rendering &lt;em&gt;entirely&lt;/em&gt;.&lt;br&gt;\nIt does not take up &lt;em&gt;any&lt;/em&gt; layout space.&lt;br&gt;\nOther elements that wouldve occupied some or all of the space taken up by this element now adjust to occupy that space, as if the element simply &lt;em&gt;did not exist at all&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;display&lt;/code&gt; is not just another visual attribute.&lt;br&gt;\nIt establishes the entire rendering mode of the element, such as whether its a &lt;code&gt;block&lt;/code&gt;, &lt;code&gt;inline&lt;/code&gt;, &lt;code&gt;inline-block&lt;/code&gt;, &lt;code&gt;table&lt;/code&gt;, &lt;code&gt;table-row&lt;/code&gt;, &lt;code&gt;table-cell&lt;/code&gt;, &lt;code&gt;list-item&lt;/code&gt;, or whatever!&lt;br&gt;\nEach of those have very different layout ramifications, and there would be no reasonable way to animate or smoothly transition them (try to imagine a smooth transition from &lt;code&gt;block&lt;/code&gt; to &lt;code&gt;inline&lt;/code&gt; or vice-versa, for instance!).&lt;/p&gt;\n\n&lt;p&gt;This is why transitions are disabled if display changes (even if the change is to or from &lt;code&gt;none&lt;/code&gt;  &lt;code&gt;none&lt;/code&gt; isnt merely invisibility, its its own element rendering mode that means no rendering at all!).&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;code&gt;display&lt;/code&gt; is not one of the properties that transition works upon.&lt;/p&gt;\n\n&lt;p&gt;See &lt;em&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties&quot; rel=&quot;noreferrer&quot;&gt;Animatable CSS properties&lt;/a&gt;&lt;/em&gt; for the list of CSS properties that can have transitions applied to them. See &lt;em&gt;&lt;a href=&quot;https://drafts.csswg.org/css-values-4/#combining-values&quot; rel=&quot;noreferrer&quot;&gt;CSS Values and Units Module Level 4, Combining Values: Interpolation, Addition, and Accumulation&lt;/a&gt;&lt;/em&gt; for how they are interpolated.&lt;/p&gt;\n\n&lt;p&gt;Up to CSS&amp;nbsp;3 was listed in &lt;em&gt;&lt;a href=&quot;https://www.w3.org/TR/2017/WD-css-transitions-1-20171130/#animatable-css&quot; rel=&quot;noreferrer&quot;&gt;9.1. Properties from CSS&lt;/a&gt;&lt;/em&gt; (just close the warning popup)&lt;/p&gt;\n\n&lt;blockquote&gt;\n  &lt;p&gt;I&apos;ve also tried using height, but that just failed miserably.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Last time I had to do this, I used &lt;code&gt;max-height&lt;/code&gt; instead, which is an animatable property (although it was a bit of a hack, it did work), but beware that it may be very janky for complex pages or users with low-end mobile devices.&lt;/p&gt;\n    ","\n&lt;p&gt;I found better way for this issue, you can use CSS Animation and make your awesome effect for showing items.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.item&lt;/span&gt; {\n     &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.item&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; {\n     &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n     &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fade_in_show &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fade_in_show {\n     &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {\n          &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n          &lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)\n     }\n\n     &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {\n          &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n          &lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;)\n     }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can add a custom animation to the block property now.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; showNav {\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;}\n  &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;}\n}\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.subnav-is-opened&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.main-nav__secondary-nav&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: showNav &lt;span class=&quot;hljs-number&quot;&gt;250ms&lt;/span&gt; ease-in-out both;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://developers.google.com/web/fundamentals/&quot; rel=&quot;noreferrer&quot;&gt;Demo&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;In this demo the sub-menu changes from &lt;code&gt;display:none&lt;/code&gt; to &lt;code&gt;display:block&lt;/code&gt; and still manages to fade.&lt;/p&gt;\n    ","\n&lt;p&gt;According to &lt;a href=&quot;http://www.w3.org/TR/css3-transitions/#animatable-properties&quot; rel=&quot;noreferrer&quot;&gt;W3C Working Draft 19 November 2013&lt;/a&gt; &lt;code&gt;display&lt;/code&gt; is not an &lt;em&gt;animatable property&lt;/em&gt;. Fortunately, &lt;code&gt;visibility&lt;/code&gt; is animatable. You may chain its transition with a transition of opacity (&lt;a href=&quot;http://jsfiddle.net/feklee/6UkVH/&quot; rel=&quot;noreferrer&quot;&gt;JSFiddle&lt;/a&gt;):&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;HTML:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&amp;lt;a href=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://example.com&quot;&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;foo&quot;&lt;/span&gt;&amp;gt;Foo&amp;lt;/a&amp;gt;\n&amp;lt;button &lt;span class=&quot;hljs-built_in&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;hide-button&quot;&lt;/span&gt;&amp;gt;Hide&amp;lt;/button&amp;gt;\n&amp;lt;button &lt;span class=&quot;hljs-built_in&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;show-button&quot;&lt;/span&gt;&amp;gt;Show&amp;lt;/button&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;CSS:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#foo&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition-property&lt;/span&gt;: visibility, opacity;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition-duration&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-id&quot;&gt;#foo&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: hidden;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition-property&lt;/span&gt;: opacity, visibility;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition-duration&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition-delay&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;JavaScript for testing:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; foo = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;foo&apos;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hide-button&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;onclick&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    foo.&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;;\n};\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;show-button&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;onclick&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    foo.&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n};\n&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Note that if you just make the link transparent, without setting &lt;code&gt;visibility: hidden&lt;/code&gt;, then it would stay clickable.&lt;/p&gt;\n    ","\n&lt;p&gt;Edit: display none is not being applied in this example.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; hide {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;99%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;What&apos;s happening above is that through 99% of the animation display is set to block while the opacity fades out. In the last moment display property is set to none.&lt;/p&gt;\n\n&lt;p&gt;And the most important bit is to retain the last frame after the animation ends using animation-fill-mode: forwards&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.hide&lt;/span&gt; {\n   &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: hide &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; linear;\n   &lt;span class=&quot;hljs-attribute&quot;&gt;animation-fill-mode&lt;/span&gt;: forwards;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Here are two examples: &lt;a href=&quot;https://jsfiddle.net/qwnz9tqg/3/&quot; rel=&quot;noreferrer&quot;&gt;https://jsfiddle.net/qwnz9tqg/3/&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;My neat JavaScript trick is &lt;strong&gt;to separate the entire scenario into two different functions&lt;/strong&gt;!&lt;/p&gt;\n\n&lt;p&gt;To prepare things, one global variable is declared and one event handler is defined:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tTimeout;\n  element.addEventListener(&lt;span class=&quot;hljs-string&quot;&gt;&quot;transitionend&quot;&lt;/span&gt;, afterTransition, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);&lt;span class=&quot;hljs-comment&quot;&gt;//firefox&lt;/span&gt;\n  element.addEventListener(&lt;span class=&quot;hljs-string&quot;&gt;&quot;webkitTransitionEnd&quot;&lt;/span&gt;, afterTransition, &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;);&lt;span class=&quot;hljs-comment&quot;&gt;//chrome&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Then, when hiding element, I use something like this: &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-csharp&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;function &lt;span class=&quot;hljs-title&quot;&gt;hide&lt;/span&gt;()&lt;/span&gt;{\n  element.style.opacity = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-function&quot;&gt;function &lt;span class=&quot;hljs-title&quot;&gt;afterTransition&lt;/span&gt;()&lt;/span&gt;{\n  element.style.display = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;For reappearing the element, I am doing something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;show&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n  element.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;block&apos;&lt;/span&gt;;\n  tTimeout = &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(timeoutShow, &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;timeoutShow&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n  element.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;opacity&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It works, so far!&lt;/p&gt;\n    ","\n&lt;p&gt;Fade it in with &lt;a href=&quot;https://www.w3schools.com/css/css3_animations.asp&quot; rel=&quot;noreferrer&quot;&gt;CSS Animations&lt;/a&gt;:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.item&lt;/span&gt; {\n     &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.item&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; {\n     &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n     &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fadeIn &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fadeIn {\n     &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; {\n          &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n     }\n\n     &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; {\n          &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n     }\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I ran into this today, with a &lt;code&gt;position: fixed&lt;/code&gt; modal that I was reusing. I couldn&apos;t keep it &lt;code&gt;display: none&lt;/code&gt; and then animate it, as it just jumped into appearance, and and &lt;code&gt;z-index&lt;/code&gt; (negative values, etc) did weird things as well.&lt;/p&gt;\n\n&lt;p&gt;I was also using a &lt;code&gt;height: 0&lt;/code&gt; to &lt;code&gt;height: 100%&lt;/code&gt;, but it only worked when the modal appeared. This is the same as if you used &lt;code&gt;left: -100%&lt;/code&gt; or something.&lt;/p&gt;\n\n&lt;p&gt;Then it struck me that there was a simple answer. Et voila:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;First,&lt;/strong&gt; your hidden modal. Notice the &lt;code&gt;height&lt;/code&gt; is &lt;code&gt;0&lt;/code&gt;, and check out the &lt;code&gt;height&lt;/code&gt; declaration in transitions... it has a &lt;code&gt;500ms&lt;/code&gt;, &lt;em&gt;which is longer than my &lt;code&gt;opacity&lt;/code&gt; transition&lt;/em&gt;. Remember, this affects the out-going fade-out transition: returning the modal to its default state.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#modal-overlay&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;background&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;#999&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;background&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;33&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;33&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;33&lt;/span&gt;,.&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;overflow&lt;/span&gt;: hidden;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: fixed;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;top&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;left&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;z-index&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n       -moz-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n            -ms-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n         -o-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n        &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Second,&lt;/strong&gt; your visible modal. Say you&apos;re setting a &lt;code&gt;.modal-active&lt;/code&gt; to the &lt;code&gt;body&lt;/code&gt;. Now the &lt;code&gt;height&lt;/code&gt; is &lt;code&gt;100%&lt;/code&gt;, and my transition has also changed. I want the &lt;code&gt;height&lt;/code&gt; to be instantly changed, and the &lt;code&gt;opacity&lt;/code&gt; to take &lt;code&gt;300ms&lt;/code&gt;.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.modal-active&lt;/span&gt; &lt;span class=&quot;hljs-selector-id&quot;&gt;#modal-overlay&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;z-index&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;90000&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n       -moz-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n        -ms-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n         -o-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n            &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt; ease-in-out;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;That&apos;s it, it works like a charm.&lt;/p&gt;\n    ","\n&lt;p&gt;Taking from a few of these answers and some suggestions elsewhere, the following works great for hover menus (I&apos;m using this with &lt;a href=&quot;https://en.wikipedia.org/wiki/Bootstrap_%28front-end_framework%29&quot; rel=&quot;nofollow noreferrer&quot;&gt;Bootstrap&lt;/a&gt;&amp;nbsp;3, specifically):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;nav&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.dropdown-menu&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: block;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;overflow&lt;/span&gt;: hidden;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: max-height &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: max-height &lt;span class=&quot;hljs-number&quot;&gt;500ms&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;nav&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.dropdown&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.dropdown-menu&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;500px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: max-height &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: max-height &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;300ms&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You could also use &lt;code&gt;height&lt;/code&gt; in place of &lt;code&gt;max-height&lt;/code&gt; if you specify both values since &lt;code&gt;height:auto&lt;/code&gt; is not allowed with &lt;code&gt;transition&lt;/code&gt;s. The hover value of &lt;code&gt;max-height&lt;/code&gt; needs to be greater than the &lt;code&gt;height&lt;/code&gt; of the menu can possibly be.&lt;/p&gt;\n    ","\n&lt;p&gt;I&apos;ve came across this issue multiple times and now simply went with:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.block&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: opacity &lt;span class=&quot;hljs-number&quot;&gt;250ms&lt;/span&gt; ease;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.block--invisible&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;pointer-events&lt;/span&gt;: none;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;By adding the class &lt;code&gt;block--invisible&lt;/code&gt; the whole Elements will not be clickable but all Elements behind it will be because of the &lt;code&gt;pointer-events:none&lt;/code&gt; which is supported by all major browsers (no IE &amp;lt; 11).&lt;/p&gt;\n    ","\n&lt;p&gt;Change &lt;code&gt;overflow:hidden&lt;/code&gt; to &lt;code&gt;overflow:visible&lt;/code&gt;. It works better. I use like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#menu&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;li&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;#fe1c1c&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;85px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;box-shadow&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3px&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;10px&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;#000000&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;border-radius&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;3px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;z-index&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;:all &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt; ease;\n    -moz-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;:all &lt;span class=&quot;hljs-number&quot;&gt;0.6s&lt;/span&gt; ease;\n}\n\n&lt;span class=&quot;hljs-selector-id&quot;&gt;#menu&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt;  {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;overflow&lt;/span&gt;:visible;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;140px&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;code&gt;visible&lt;/code&gt; is better because &lt;code&gt;overflow:hidden&lt;/code&gt; act exactly like a &lt;code&gt;display:none&lt;/code&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;It is as simple as the following :)&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; fadeout {\n    &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: auto; }\n    &lt;span class=&quot;hljs-number&quot;&gt;90%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: auto; }\n    &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: fadeout linear &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; normal forwards &lt;span class=&quot;hljs-meta&quot;&gt;!important&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Get it to fade away, and then make it &lt;code&gt;height 0;&lt;/code&gt;. Also make sure to use forwards so that it stays in the final state.&lt;/p&gt;\n    ","\n&lt;p&gt;I appreciate all the answers. Here is what I&apos;m using for similar purposes: transition vs animation.&lt;/p&gt;\n&lt;p&gt;Example: &lt;a href=&quot;https://jsfiddle.net/grinevri/tcod87Le/22/&quot; rel=&quot;noreferrer&quot;&gt;https://jsfiddle.net/grinevri/tcod87Le/22/&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;animation&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;transition&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; animationTo {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.1&lt;/span&gt;); }\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;); }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; animationFrom {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;); }\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.1&lt;/span&gt;); }\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.animation&lt;/span&gt;,\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.transition&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;margin&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;5px&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100px&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100px&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.1&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.animation&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: animationFrom &lt;span class=&quot;hljs-number&quot;&gt;250ms&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.animation&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;);\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: animationTo &lt;span class=&quot;hljs-number&quot;&gt;250ms&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.transition&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: background-color &lt;span class=&quot;hljs-number&quot;&gt;250ms&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.transition&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;rgba&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I finally found a solution for me, by combining &lt;code&gt;opacity&lt;/code&gt; with &lt;code&gt;position absolute&lt;/code&gt; (not to occupy space when hidden).&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.toggle&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: absolute;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: opacity &lt;span class=&quot;hljs-number&quot;&gt;0.8s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.parent&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.toggle&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: static;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;JavaScript is not required, and no outrageously huge max-height is needed. Instead, set your &lt;code&gt;max-height&lt;/code&gt; on your text elements, and use a font relative unit such as &lt;code&gt;rem&lt;/code&gt; or &lt;code&gt;em&lt;/code&gt;. This way, you can set a maximum height larger than your container, while avoiding a delay or &quot;popping&quot; when the menu closes:&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;HTML&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;nav&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;checkbox&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Link 1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Link 1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Link 1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Link 1&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;nav&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;CSS&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;nav&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;input&lt;/span&gt; + &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;li&lt;/span&gt; { // Notice &lt;span class=&quot;hljs-selector-tag&quot;&gt;I&lt;/span&gt; set &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt; on &lt;span class=&quot;hljs-selector-tag&quot;&gt;li&lt;/span&gt;, not &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt;\n   &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;nav&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:checked&lt;/span&gt; + &lt;span class=&quot;hljs-selector-tag&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;li&lt;/span&gt; {\n   &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3rem&lt;/span&gt;; // &lt;span class=&quot;hljs-selector-tag&quot;&gt;A&lt;/span&gt; little bigger &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; allow for text-wrapping - but not outrageous\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;See an example here:\n&lt;a href=&quot;http://codepen.io/mindfullsilence/pen/DtzjE&quot; rel=&quot;nofollow noreferrer&quot;&gt;http://codepen.io/mindfullsilence/pen/DtzjE&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;After the accepted answer from Guillermo was written, the CSS\ntransition specification of 2012-04-03 changed the behavior of the visibility transition and &lt;strong&gt;now it is possible to solve this problem in a shorter way&lt;/strong&gt;, without the use of transition-delay:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.myclass&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt; {\n                   &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;:visibility &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n                   &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;:hidden;  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;\n               }\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.myclass&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;\n               {   &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;:visible; &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The run time specified for both transitions should usually be\nidentical (although a slightly longer time for visibility is not a problem).&lt;/p&gt;\n\n&lt;p&gt;For a running version, see my blog post &lt;em&gt;&lt;a href=&quot;http://www.taccgl.org/blog/css-transition-visibility.html#visibility-opacity&quot; rel=&quot;nofollow noreferrer&quot;&gt;CSS Transition Visibility&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;W.r.t. the title of the question &lt;em&gt;&quot;Transitions on the display: property&quot;&lt;/em&gt; and in response to comments from Rui Marques and josh to the accepted answer:&lt;/p&gt;\n\n&lt;p&gt;This solution works in cases &lt;strong&gt;where it is irrelevant if the display or\nvisibility property is used&lt;/strong&gt; (as it probably was the case in this question).&lt;/p&gt;\n\n&lt;p&gt;It will not completely remove the element as &lt;code&gt;display:none&lt;/code&gt;, just make it invisible, but it still stays in the document flow and influences the position of the following elements.&lt;/p&gt;\n\n&lt;p&gt;Transitions that completely remove the element similar to &lt;code&gt;display:none&lt;/code&gt; can be done using height (as indicated by other answers and comments), max-height, or margin-top/bottom, but also see\n&lt;em&gt;&lt;a href=&quot;https://stackoverflow.com/questions/3508605/css-transition-height-0-to-height-auto/&quot;&gt;How can I transition height: 0; to height: auto; using CSS?&lt;/a&gt;&lt;/em&gt; and my blog post &lt;em&gt;&lt;a href=&quot;https://www.taccgl.org/blog/css_transition_display.html&quot; rel=&quot;nofollow noreferrer&quot;&gt;Workarounds for CSS Transitions on the Display and Height Properties&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;\n\n&lt;p&gt;In response to comment from GeorgeMillo:\nBoth properties and both transitions are needed: The opacity property\nis used to create a fade-in and fade-out animation and the visibility\nproperty to avoid the element still reacting on mouse\nevents. Transitions are needed on opacity for the visual effect and on\nvisibility to delay hiding until the fade-out is finished.&lt;/p&gt;\n    ","\n&lt;p&gt;I suspect anyone just starting CSS transitions quickly discovers that they don&apos;t work if you&apos;re modifying the display property (block/none) at the same time. One workaround that hasn&apos;t yet been mentioned is that you can continue to use &lt;code&gt;display:block/none&lt;/code&gt; to hide/show the element, but set its opacity to 0 so that even when it&apos;s &lt;code&gt;display:block&lt;/code&gt;, it&apos;s still invisible.&lt;/p&gt;\n\n&lt;p&gt;Then to fade it in, add another CSS class such as &quot;on&quot; which sets the opacity to 1 and defines the transition for opacity. As you may have imagined, you&apos;ll have to use JavaScript to add that &quot;on&quot; class to the element, but at least you&apos;re still using CSS for the actual transition.&lt;/p&gt;\n\n&lt;p&gt;P.S. If you find yourself in a situation where you need to do both &lt;code&gt;display:block&lt;/code&gt;, and add class &quot;on&quot;, at the same time, defer the latter using setTimeout. Otherwise, the browser just sees both things as happening at once and disables the transition.&lt;/p&gt;\n    ","\n&lt;p&gt;You can get this to work the natural way you expected - using display - but you have to throttle the browser to get it to work, using either Javascript or as others have suggested a fancy trick with one tag inside another. I don&apos;t care for the inner tag as it further complicates CSS and dimensions, so here&apos;s the Javascript solution:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://jsfiddle.net/b9chris/hweyecu4/17/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://jsfiddle.net/b9chris/hweyecu4/17/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;Starting with a box like:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;&amp;lt;div &lt;span class=&quot;hljs-built_in&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;box&quot;&lt;/span&gt; class=&lt;span class=&quot;hljs-string&quot;&gt;&quot;hidden&quot;&lt;/span&gt;&amp;gt;Lorem&amp;lt;/div&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;A hidden box.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n&lt;span class=&quot;hljs-selector-id&quot;&gt;#box&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: opacity &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n    \n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;We&apos;re going to use a trick found in a related q/a, checking offsetHeight to throttle the browser instantaneously:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/a/16575811/176877&quot;&gt;https://stackoverflow.com/a/16575811/176877&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;First, a library formalizing the above trick:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$.fn.&lt;span class=&quot;hljs-property&quot;&gt;noTrnsn&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;i, tag&lt;/span&gt;) {\n        tag.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;transition&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;none&apos;&lt;/span&gt;;\n    });\n};\n$.fn.&lt;span class=&quot;hljs-property&quot;&gt;resumeTrnsn&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;each&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;i, tag&lt;/span&gt;) {\n        tag.&lt;span class=&quot;hljs-property&quot;&gt;offsetHeight&lt;/span&gt;;    \n        tag.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;transition&lt;/span&gt; = &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;;\n    });\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Next, we&apos;re going to use it to reveal a box, and fade it in:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#button&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tag = $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#box&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (tag.&lt;span class=&quot;hljs-title function_&quot;&gt;hasClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;))\n        tag.&lt;span class=&quot;hljs-title function_&quot;&gt;noTrnsn&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;removeClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;)\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; })\n        .&lt;span class=&quot;hljs-title function_&quot;&gt;resumeTrnsn&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; });\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n        tag.&lt;span class=&quot;hljs-title function_&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; });\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This fades the box in and out. So, &lt;code&gt;.noTrnsn()&lt;/code&gt; turns off transitions, then we remove the &lt;code&gt;hidden&lt;/code&gt; class, which flips &lt;code&gt;display&lt;/code&gt; from &lt;code&gt;none&lt;/code&gt; to its default, &lt;code&gt;block&lt;/code&gt;. We then set opacity to 0 to get ready for fading in. Now that we&apos;ve set the stage, we turn transitions back on, with &lt;code&gt;.resumeTrnsn()&lt;/code&gt;. And finally, kick off the transition by setting opacity to 1.&lt;/p&gt;\n&lt;p&gt;Without the library, both the change to display and the change to opacity would&apos;ve gotten us undesirable results. If we simply removed the library calls, we&apos;d get no transitions at all.&lt;/p&gt;\n&lt;p&gt;Note that the above does not set display to none again at the end of the fadeout animation. We can get fancier though. Let&apos;s do so with one that fades in and grows in height from 0.&lt;/p&gt;\n&lt;h2&gt;Fancy!&lt;/h2&gt;\n&lt;p&gt;&lt;a href=&quot;https://jsfiddle.net/b9chris/hweyecu4/22/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://jsfiddle.net/b9chris/hweyecu4/22/&lt;/a&gt;&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#box&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: height &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;We&apos;re now transitioning both height and opacity. Note that we are not setting height, which means it is the default, &lt;code&gt;auto&lt;/code&gt;. Conventionally this cannot be transitioned - moving from auto to a pixel value (like 0) will get you no transition. We&apos;re going to work around that with the library, and one more library method:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-kotlin&quot;&gt;$.fn.wait = function (time, fn) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (time)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.delay(time);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (!fn)\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; _this = &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.queue(function (n) {\n        fn.call(_this);\n        n();\n    });\n};\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This is a convenience method that lets us participate in jQuery&apos;s existing fx/animation queue, without requiring any of the animation framework that&apos;s now excluded in jQuery 3.x. I&apos;m not going to explain how jQuery works, but suffice to say, the &lt;code&gt;.queue()&lt;/code&gt; and &lt;code&gt;.stop()&lt;/code&gt; plumbing that jQuery provides help us prevent our animations from stepping on each other.&lt;/p&gt;\n&lt;p&gt;Let&apos;s animate the slide down effect.&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-php&quot;&gt;$(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#button&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;click&apos;&lt;/span&gt;, function() {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; tag = $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#box&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;hasClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Open it&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Measure it&lt;/span&gt;\n        tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;stop&lt;/span&gt;().&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;noTrnsn&lt;/span&gt;().&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;removeClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({\n            &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;auto&apos;&lt;/span&gt;\n        });\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; h = tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;height&lt;/span&gt;();\n        tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; }).&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;resumeTrnsn&lt;/span&gt;()\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Animate it&lt;/span&gt;\n        .&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: h })\n        .&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;wait&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;, function() {\n            tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;auto&apos;&lt;/span&gt; });\n        });\n    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Close it&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Measure it&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; h = tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;noTrnsn&lt;/span&gt;().&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;height&lt;/span&gt;();\n        tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;stop&lt;/span&gt;().&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: h })\n        .&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;resumeTrnsn&lt;/span&gt;()\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Animate it&lt;/span&gt;\n        .&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;css&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; })\n        .&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;wait&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;, function() {\n            tag.&lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;addClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;);\n        });\n    }\n});\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This code begins by checking on &lt;code&gt;#box&lt;/code&gt; and whether it&apos;s currently hidden, by checking on its class. But it accomplishes more using the &lt;code&gt;wait()&lt;/code&gt; library call, by adding the &lt;code&gt;hidden&lt;/code&gt; class at the end of the slideout/fade animation, which you&apos;d expect to find if it is in fact hidden - something the above simpler example could not do. This happens to also enable display/hiding the element over and over, which was a bug in the previous example, because the hidden class was never restored.&lt;/p&gt;\n&lt;p&gt;You can also see CSS and class changes being called after &lt;code&gt;.noTrnsn()&lt;/code&gt; to generally set the stage for animations, including taking measurements, like measuring what will be the final height of &lt;code&gt;#box&lt;/code&gt; without showing that to the user, before calling &lt;code&gt;.resumeTrnsn()&lt;/code&gt;, and animating it from that fully-set stage to its goal CSS values.&lt;/p&gt;\n&lt;h1&gt;Old Answer&lt;/h1&gt;\n&lt;p&gt;&lt;a href=&quot;https://jsfiddle.net/b9chris/hweyecu4/1/&quot; rel=&quot;nofollow noreferrer&quot;&gt;https://jsfiddle.net/b9chris/hweyecu4/1/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;You can have it transition on click with:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;toggleTransition&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; el = $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;div.box1&quot;&lt;/span&gt;);\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (el.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;) {\n    el[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;box&quot;&lt;/span&gt;;\n    el.&lt;span class=&quot;hljs-title function_&quot;&gt;stop&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;css&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;maxWidth&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt;}).&lt;span class=&quot;hljs-title function_&quot;&gt;animate&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;maxWidth&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10001&lt;/span&gt;}, &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        el[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;box hidden&quot;&lt;/span&gt;;\n    });\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n    el = $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;div.box&quot;&lt;/span&gt;);\n    el[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;box&quot;&lt;/span&gt;;\n    el.&lt;span class=&quot;hljs-title function_&quot;&gt;stop&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;css&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;maxWidth&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10001&lt;/span&gt;}).&lt;span class=&quot;hljs-title function_&quot;&gt;animate&lt;/span&gt;({&lt;span class=&quot;hljs-attr&quot;&gt;maxWidth&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt;}, &lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n        el[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;box box1&quot;&lt;/span&gt;;\n    });\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; el;\n}\n\nsomeTag.&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;(toggleTransition);\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The CSS is what you&apos;d guess:&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.box&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: blue;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;color&lt;/span&gt;: yellow;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;font-size&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;18px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;left&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;top&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20px&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: absolute;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transform-origin&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;50%&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transform-origin&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;50%&lt;/span&gt;;\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(.&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(.&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: transform &lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt;;\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: transform &lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt;;\n}\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.box1&lt;/span&gt;{\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n    &lt;span class=&quot;hljs-attribute&quot;&gt;transform&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;scale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The key is throttling the display property. By removing the hidden class and then waiting 50&amp;nbsp;ms, &lt;em&gt;then&lt;/em&gt; starting the transition via the added class, we get it to appear and then expand like we wanted, instead of it just blipping onto the screen without any animation. Similar occurs going the other way, except we wait till the animation is over before applying hidden.&lt;/p&gt;\n&lt;p&gt;Note: I&apos;m abusing &lt;code&gt;.animate(maxWidth)&lt;/code&gt; here to avoid &lt;code&gt;setTimeout&lt;/code&gt; race conditions. &lt;code&gt;setTimeout&lt;/code&gt; is quick to introduce hidden bugs when you or someone else picks up code unaware of it. &lt;code&gt;.animate()&lt;/code&gt; can easily be killed with &lt;code&gt;.stop()&lt;/code&gt;. I&apos;m just using it to put a 50&amp;nbsp;ms or 2000&amp;nbsp;ms delay on the standard fx queue where it&apos;s easy to find/resolve by other coders building on top of this.&lt;/p&gt;\n    ","\n&lt;p&gt;Well another way to apply transition in this situation &lt;strong&gt;without using keyframes&lt;/strong&gt; is to set the &lt;strong&gt;width&lt;/strong&gt; of your element to &lt;strong&gt;zero&lt;/strong&gt; and then unset it on hover&lt;/p&gt;\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.className&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;:hidden;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: .&lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.className&lt;/span&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:hover&lt;/span&gt;{\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;:visible;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;margin-right&lt;/span&gt;: .&lt;span class=&quot;hljs-number&quot;&gt;5rem&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;:unset;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I had a similar issue that I couldn&apos;t find the answer to. A few Google searches later led me here. Considering I didn&apos;t find the simple answer I was hoping for, I stumbled upon a solution that is both elegant and effective.&lt;/p&gt;\n\n&lt;p&gt;It turns out the &lt;code&gt;visibility&lt;/code&gt; CSS property has a value &lt;code&gt;collapse&lt;/code&gt; which is generally used for table items. However, if used on any other elements it effectively renders them as &lt;em&gt;hidden&lt;/em&gt;, pretty much the same as &lt;code&gt;display: hidden&lt;/code&gt; but with the added ability that the element doesn&apos;t take up any space and you can still animate the element in question.&lt;/p&gt;\n\n&lt;p&gt;Below is a simple example of this in action.&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;toggleVisibility&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; exampleElement = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;querySelector&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;span&apos;&lt;/span&gt;);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;contains&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;visible&apos;&lt;/span&gt;)) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt;;\n  }\n  exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;innerHTML&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;I will not take up space!&apos;&lt;/span&gt;;\n  exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;toggle&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;);\n  exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;toggle&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;visible&apos;&lt;/span&gt;);\n  &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&amp;gt;&lt;/span&gt; {\n    exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;toggle&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;visible&apos;&lt;/span&gt;);\n    exampleElement.&lt;span class=&quot;hljs-property&quot;&gt;classList&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;toggle&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;);\n  }, &lt;span class=&quot;hljs-number&quot;&gt;3000&lt;/span&gt;);\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-id&quot;&gt;#main&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: flex;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;flex-direction&lt;/span&gt;: column;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;300px&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;text-align&lt;/span&gt;: center;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: collapse;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: visibility &lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt; linear;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.visible&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: visible;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: visibility &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt;, opacity &lt;span class=&quot;hljs-number&quot;&gt;0.5s&lt;/span&gt; linear;\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;main&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;toggleVisibility()&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Click Me!&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;span&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;hidden&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;span&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;span&lt;/span&gt;&amp;gt;&lt;/span&gt;I will get pushed back up...&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;span&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;The simplest universal solution to the problem is: feel free to specify &lt;code&gt;display:none&lt;/code&gt; in your CSS, however you will have change it to &lt;code&gt;block&lt;/code&gt; (or whatever else) using JavaScript, and then you&apos;ll also have to add a class to your element in question that actually does the transition &lt;em&gt;with setTimeout()&lt;/em&gt;. That&apos;s all.&lt;/p&gt;\n\n&lt;p&gt;I.e.:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-css&quot;&gt;\n    &lt;span class=&quot;hljs-selector-id&quot;&gt;#el&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n        &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    }\n    &lt;span class=&quot;hljs-selector-id&quot;&gt;#el&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.auto-fade-in&lt;/span&gt; {\n        &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n        &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: all &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out; &lt;span class=&quot;hljs-comment&quot;&gt;/* Future, future, please come sooner! */&lt;/span&gt;\n        -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: all &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out;\n        -moz-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: all &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out;\n        -o-&lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: all &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt; ease-out;\n    }\n&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;style&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;el&lt;/span&gt;&amp;gt;&lt;/span&gt;Well, well, well&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; el = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;el&apos;&lt;/span&gt;);\n    el.&lt;span class=&quot;hljs-property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;display&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;block&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) { el.&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;auto-fade-in&apos;&lt;/span&gt; }, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This was tested in the latest sane browsers. Obviously it shouldn&apos;t work in Internet&amp;nbsp;Explorer&amp;nbsp;9 or earlier.&lt;/p&gt;\n    ","\n&lt;p&gt;I think SalmanPK has the closest answer. It does fade an item in or out, with the following CSS animations. However, the display property does not animate smoothly, only the opacity.&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@-webkit-keyframes&lt;/span&gt; fadeIn {\n    &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; }\n      &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; }\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@-webkit-keyframes&lt;/span&gt; fadeOut {\n    &lt;span class=&quot;hljs-selector-tag&quot;&gt;from&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; }\n      &lt;span class=&quot;hljs-selector-tag&quot;&gt;to&lt;/span&gt; { &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; }\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If you want to animate the element moving from display block to display none, I can&apos;t see that it is currently possible just with CSS. You have to get the height and use a CSS animation to decrease the height. This is possible with CSS as shown in the example below, but it would be tricky to know the exact height values you need to animate for an element.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;http://jsfiddle.net/StevenIseki/v2nup35t/&quot; rel=&quot;nofollow noreferrer&quot;&gt;jsFiddle&lt;/a&gt; &lt;b&gt;example&lt;/b&gt;&lt;/p&gt;\n\n&lt;h3&gt;CSS&lt;/h3&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@-webkit-keyframes&lt;/span&gt; pushDown {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10em&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;25%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;7.5em&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;50%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;5em&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;75%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2.5em&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0em&lt;/span&gt;;\n  }\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.push-down&lt;/span&gt; {\n    -webkit-&lt;span class=&quot;hljs-attribute&quot;&gt;animation&lt;/span&gt;: pushDown &lt;span class=&quot;hljs-number&quot;&gt;2s&lt;/span&gt; forwards linear;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h3&gt;JavaScript&lt;/h3&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; element = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;element&quot;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Push item down&lt;/span&gt;\nelement.&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; = element.&lt;span class=&quot;hljs-property&quot;&gt;className&lt;/span&gt; + &lt;span class=&quot;hljs-string&quot;&gt;&quot; push-down&quot;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;This solution has excellent compatibility, and I haven&apos;t seen it yet:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden-element&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: absolute;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;z-index&lt;/span&gt;: -&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;pointer-events&lt;/span&gt;: none;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: hidden;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;transition&lt;/span&gt;: visibility &lt;span class=&quot;hljs-number&quot;&gt;0s&lt;/span&gt;, opacity .&lt;span class=&quot;hljs-number&quot;&gt;5s&lt;/span&gt; ease-out;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.hidden-element&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.visible&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;position&lt;/span&gt;: static;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;z-index&lt;/span&gt;: auto;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;pointer-events&lt;/span&gt;: auto;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;visibility&lt;/span&gt;: visible;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Explanation&lt;/strong&gt;: it uses the &lt;code&gt;visibility: hidden&lt;/code&gt; trick (which is compatible with show-and-animate in one step), but it uses the combination &lt;code&gt;position: absolute; z-index: -1; pointer-events: none;&lt;/code&gt; to make sure that the hidden container &lt;strong&gt;does not take space&lt;/strong&gt; and &lt;strong&gt;does not answer to user interactions&lt;/strong&gt;.&lt;/p&gt;\n    ","\n&lt;p&gt;You can do this with transition events, so you build two CSS classes for the transition, one holding the animation other, holding the display none state. And you switch them after the animation is ended? In my case I can display the divs again if I press a button, and remove both classes.&lt;/p&gt;\n\n&lt;p&gt;Try the snippet below...&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;ready&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Assign transition event&lt;/span&gt;\n  $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;table&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;animationend webkitAnimationEnd&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;.visibility_switch_off&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;event&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// We check if this is the same animation we want&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (event.&lt;span class=&quot;hljs-property&quot;&gt;originalEvent&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;animationName&lt;/span&gt; == &lt;span class=&quot;hljs-string&quot;&gt;&quot;col_hide_anim&quot;&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-comment&quot;&gt;// After the animation we assign this new class that basically hides the elements.&lt;/span&gt;\n      $(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;addClass&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;animation-helper-display-none&quot;&lt;/span&gt;);\n    }\n\n  });\n\n  $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;click&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;event&lt;/span&gt;) {\n\n    $(&lt;span class=&quot;hljs-string&quot;&gt;&quot;table tr .hide-col&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toggleClass&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-comment&quot;&gt;// We switch the animation class in a toggle fashion...&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// and we know in that after the animation end, there&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// is will the animation-helper-display-none extra&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// class, that we nee to remove, when we want to&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// show the elements again, depending on the toggle&lt;/span&gt;\n      &lt;span class=&quot;hljs-comment&quot;&gt;// state, so we create a relation between them.&lt;/span&gt;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ($(&lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;is&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.animation-helper-display-none&quot;&lt;/span&gt;)) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// I&apos;m toggling and there is already the above class, then&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// what we want it to show the elements , so we remove&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// both classes...&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;visibility_switch_off animation-helper-display-none&quot;&lt;/span&gt;;\n      }\n      &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Here we just want to hide the elements, so we just&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// add the animation class, the other will be added&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// later be the animationend event...&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;visibility_switch_off&quot;&lt;/span&gt;;\n      }\n    });\n  });\n});&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-tag&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;th&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: grey;\n}\n\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;td&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: white;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;padding&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;5px&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-selector-class&quot;&gt;.animation-helper-display-none&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;display&lt;/span&gt;: none;\n}\n\n&lt;span class=&quot;hljs-selector-tag&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;hljs-selector-tag&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;hljs-selector-class&quot;&gt;.visibility_switch_off&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation-fill-mode&lt;/span&gt;: forwards;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation-name&lt;/span&gt;: col_hide_anim;\n  &lt;span class=&quot;hljs-attribute&quot;&gt;animation-duration&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1s&lt;/span&gt;;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@-webkit-keyframes&lt;/span&gt; col_hide_anim {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;}\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;}\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@-moz-keyframes&lt;/span&gt; col_hide_anim {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;}\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;}\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@-o-keyframes&lt;/span&gt; col_hide_anim {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;}\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;}\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;@keyframes&lt;/span&gt; col_hide_anim {\n  &lt;span class=&quot;hljs-number&quot;&gt;0%&lt;/span&gt;   {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;}\n  &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; {&lt;span class=&quot;hljs-attribute&quot;&gt;opacity&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;}\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;table&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;theader&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;tr&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt;&amp;gt;&lt;/span&gt;Name&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;hide-col&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;Age&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt;&amp;gt;&lt;/span&gt;Country&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;th&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;tr&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;theader&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;tbody&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;tr&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt;&amp;gt;&lt;/span&gt;Name&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;hide-col&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;Age&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt;&amp;gt;&lt;/span&gt;Country&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;td&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;tr&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;tbody&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;table&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;Switch - Hide Age column with fadeout animation and display none after&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif4&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Instead of using &lt;code&gt;display&lt;/code&gt; you could store the element &apos;off-screen&apos; until you needed it, and then set its position to where you want it and transform it at the same time. This brings up a whole host of other design issues though, so your mileage may vary.&lt;/p&gt;\n\n&lt;p&gt;You probably wouldn&apos;t want to use &lt;code&gt;display&lt;/code&gt; anyway, as you&apos;d want the content to be accessible to screen readers, which for the most part try to obey rules for visibility - i.e., if it shouldn&apos;t be visible to the eye, it won&apos;t show up as content to the agent.&lt;/p&gt;\n    "],"367":["\n&lt;p&gt;Yes, in your &lt;code&gt;formula&lt;/code&gt;, you can &lt;code&gt;cbind&lt;/code&gt; the numeric variables to be aggregated:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;aggregate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;cbind&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; x2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; year &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; data &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; na.rm &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n   year month         x1          x2\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;7.862002&lt;/span&gt;   &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;7.469298&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;2001&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;276.758209&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;474.384252&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;13.122369&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;128.122613&lt;/span&gt;\n...\n&lt;span class=&quot;hljs-number&quot;&gt;23&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;63.436507&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;449.794454&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2001&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;999.472226&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;922.726589&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;See &lt;code&gt;?aggregate&lt;/code&gt;, the &lt;code&gt;formula&lt;/code&gt; argument and the examples.&lt;/p&gt;\n    ","\n&lt;p&gt;With the &lt;code&gt;dplyr&lt;/code&gt; package, you can use &lt;code&gt;summarise_all&lt;/code&gt;, &lt;code&gt;summarise_at&lt;/code&gt; or &lt;code&gt;summarise_if&lt;/code&gt; functions to aggregate multiple variables simultaneously. For the example dataset you can do this as follows:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dplyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# summarising all non-grouping variables&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; df1 &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; group_by&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; summarise_all&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# summarising a specific set of non-grouping variables&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; df1 &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; group_by&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; summarise_at&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;vars&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; x2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; df1 &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; group_by&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; summarise_at&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;vars&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;date&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# summarising a specific set of non-grouping variables using select_helpers&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# see ?select_helpers for more options&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; df1 &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; group_by&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; summarise_at&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;vars&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;starts_with&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; df1 &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; group_by&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; summarise_at&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;vars&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;matches&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;.*[0-9]&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# summarising a specific set of non-grouping variables based on condition (class)&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; df1 &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; group_by&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; summarise_if&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;is.numeric&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The result of the latter two options:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;    year month        x1         x2\n   &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;&lt;/span&gt;dbl&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;&lt;/span&gt;dbl&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt;     &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;&lt;/span&gt;dbl&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt;      &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;&lt;/span&gt;dbl&lt;span class=&quot;hljs-operator&quot;&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;73.58134&lt;/span&gt;  &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;92.78595&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;57.81334&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;152.36983&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;122.68758&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;153.55243&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;450.24980&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;285.56374&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;678.37867&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;384.42888&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;792.68696&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;530.28694&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;908.58795&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;452.31222&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;710.69928&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;719.35225&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;725.06079&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;914.93687&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;    &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;770.60304&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;863.39337&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# ... with 14 more rows&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Note: &lt;code&gt;summarise_each&lt;/code&gt; is deprecated in favor of &lt;code&gt;summarise_all&lt;/code&gt;, &lt;code&gt;summarise_at&lt;/code&gt; and &lt;code&gt;summarise_if&lt;/code&gt;.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;As mentioned in &lt;a href=&quot;https://stackoverflow.com/questions/9723208/aggregate-summarize-multiple-variables-per-group-i-e-sum-mean-etc/33168036#comment61936894_9723446&quot;&gt;my comment above&lt;/a&gt;, you can also use the &lt;code&gt;recast&lt;/code&gt; function from the &lt;code&gt;reshape2&lt;/code&gt;-package:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;reshape2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nrecast&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; year &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; month &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; variable&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; id.var &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;date&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;month&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;which will give you the same result.&lt;/p&gt;\n    ","\n&lt;p&gt;Using the &lt;code&gt;data.table&lt;/code&gt; package, which is fast (useful for larger datasets)&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://github.com/Rdatatable/data.table/wiki&quot; rel=&quot;noreferrer&quot;&gt;https://github.com/Rdatatable/data.table/wiki&lt;/a&gt; &lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;data.table&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; setDT&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; lapply&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;.SD&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;.&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; .SDcols&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;x1&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;x2&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;\nsetDF&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;# convert back to dataframe&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Using the plyr package&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;require&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;plyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; ddply&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;month&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; colSums&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;x1&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x2&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Using summarize() from the Hmisc package \n(column headings are messy in my example though)&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;# need to detach plyr because plyr and Hmisc both have a summarize()&lt;/span&gt;\ndetach&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;package&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;plyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\nrequire&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;Hmisc&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf2 &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; with&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; summarize&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt; cbind&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;x1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; x2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;llist&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; FUN&lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt;colSums&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Where is this &lt;code&gt;year()&lt;/code&gt; function from?&lt;/p&gt;\n\n&lt;p&gt;You could also use the &lt;code&gt;reshape2&lt;/code&gt; package for this task:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;require&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;reshape2&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf_melt &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; melt&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; id &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;date&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;month&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndcast&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df_melt&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; year &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; month &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; variable&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#  year month         x1           x2&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;80.83405&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;224.9540159&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;223.76331&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;288.2418017&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;188.83930&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;481.5601913&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;197.47797&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;473.7137420&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;259.07928&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;372.4563522&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Interestingly, base R &lt;code&gt;aggregate&lt;/code&gt;&apos;s &lt;code&gt;data.frame&lt;/code&gt; method is not showcased here, &lt;a href=&quot;https://stackoverflow.com/a/9723314/8876652&quot;&gt;above&lt;/a&gt; the formula interface is used, so for completeness:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;aggregate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;\n  x &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;x1&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x2&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n  by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;month&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n  FUN &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; na.rm &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;More generic use of aggregate&apos;s data.frame method:&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Since we are providing a&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;data.frame&lt;/code&gt; as &lt;code&gt;x&lt;/code&gt; and &lt;/li&gt;\n&lt;li&gt;a &lt;code&gt;list&lt;/code&gt; (&lt;code&gt;data.frame&lt;/code&gt; is also a &lt;code&gt;list&lt;/code&gt;) as &lt;code&gt;by&lt;/code&gt;, this is very useful if we need to use it in a dynamic manner, e.g. using other columns to be aggregated and to aggregate by is very simple&lt;/li&gt;\n&lt;li&gt;also with custom-made aggregation functions &lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;For example like so:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;colsToAggregate &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;x1&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\naggregateBy &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;month&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndummyaggfun &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;v&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; na.rm &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;\n  &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;v&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; na.rm &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; na.rm&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; mean &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; mean&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;v&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; na.rm &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; na.rm&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;\n\naggregate&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;colsToAggregate&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; by &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; df1&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;aggregateBy&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; FUN &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; dummyaggfun&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;With the &lt;code&gt;dplyr&lt;/code&gt; version &amp;gt;= &lt;code&gt;1.0.0&lt;/code&gt;, we can also use &lt;code&gt;summarise&lt;/code&gt; to apply function on multiple columns with &lt;code&gt;across&lt;/code&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dplyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf1 &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; \n    group_by&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt;\n    summarise&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;across&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;starts_with&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&apos;x&apos;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# A tibble: 24 x 4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# Groups:   year [2]&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#    year month     x1     x2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#   &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 1  2000     1   11.7  52.9 &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 2  2000     2  -74.1 126.  &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 3  2000     3 -132.  149.  &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 4  2000     4 -130.    4.12&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 5  2000     5  -91.6 -55.9 &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 6  2000     6  179.   73.7 &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 7  2000     7   95.0 409.  &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 8  2000     8  255.  283.  &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# 9  2000     9  489.  331.  &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#10  2000    10  719.  305.  &lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#  with 14 more rows&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;For a more flexible and faster approach to data aggregation, check out the &lt;code&gt;collap&lt;/code&gt; function in the &lt;em&gt;collapse&lt;/em&gt; R package available on CRAN:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collapse&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# Simple aggregation with one function&lt;/span&gt;\nhead&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collap&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; x1 &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; x2 &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; year &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; fmean&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n  year month        x1        x2\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.217984&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;4.008534&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.117777&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;11.460301&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;5.552706&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;8.621904&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;4.238889&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;22.382953&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;3.124566&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;39.982799&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.415203&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;48.252283&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# Customized: Aggregate columns with different functions&lt;/span&gt;\nhead&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collap&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; x1 &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; x2 &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; year &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; \n      custom &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;fmean &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;x1&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x2&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; fmedian &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;x2&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n  year month  fmean.x1  fmean.x2 fmedian.x2\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.217984&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;4.008534&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;3.266968&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.117777&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;11.460301&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;11.563387&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;5.552706&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;8.621904&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;8.506329&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;4.238889&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;22.382953&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;20.796205&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;3.124566&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;39.982799&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;39.919145&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.415203&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;48.252283&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;48.653926&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# You can also apply multiple functions to all columns&lt;/span&gt;\nhead&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collap&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; x1 &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; x2 &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; year &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;fmean&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; fmin&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; fmax&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n  year month  fmean.x1    fmin.x1  fmax.x1  fmean.x2   fmin.x2  fmax.x2\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.217984&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4.2460775&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1.245649&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;4.008534&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.720181&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;10.47825&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.117777&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;5.0081858&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;3.330872&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;11.460301&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;9.111287&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;13.86184&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;5.552706&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;0.1193369&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;9.464760&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;8.621904&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;6.807443&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;11.54485&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;4.238889&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;0.8723805&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;8.627637&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;22.382953&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;11.515753&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;31.66365&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;3.124566&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.5985090&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;7.341478&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;39.982799&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;31.957653&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;46.13732&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.415203&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;4.6072295&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2.655084&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;48.252283&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;42.809211&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;52.31309&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# When you do that, you can also return the data in a long format&lt;/span&gt;\nhead&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collap&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;df1&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; x1 &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; x2 &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; year &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; month&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;fmean&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; fmin&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; fmax&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;long&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n  Function year month        x1        x2\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;    fmean &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.217984&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;4.008534&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;    fmean &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.117777&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;11.460301&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;    fmean &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;5.552706&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;8.621904&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;    fmean &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;4.238889&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;22.382953&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;    fmean &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;  &lt;span class=&quot;hljs-number&quot;&gt;3.124566&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;39.982799&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;    fmean &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt;     &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1.415203&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;48.252283&lt;/span&gt;\n\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;em&gt;Note&lt;/em&gt;: You can use base functions like &lt;code&gt;mean, max&lt;/code&gt; etc. with &lt;code&gt;collap&lt;/code&gt;, but &lt;code&gt;fmean, fmax&lt;/code&gt; etc. are C++ based grouped functions offered in the &lt;em&gt;collapse&lt;/em&gt; package which are significantly faster (i.e. the performance on large data aggregations is the same as &lt;em&gt;data.table&lt;/em&gt; while providing greater flexibility, and these fast grouped functions can also be used without &lt;code&gt;collap&lt;/code&gt;). &lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Note2&lt;/em&gt;: &lt;code&gt;collap&lt;/code&gt; also supports flexible multitype data aggregation, which you can of course do using the &lt;code&gt;custom&lt;/code&gt; argument, but you can also apply functions to numeric and non-numeric columns in a semi-automated way: &lt;/p&gt;\n\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;# wlddev is a data set of World Bank Indicators provided in the collapse package&lt;/span&gt;\nhead&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wlddev&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n      country iso3c       date year decade     region     income  OECD PCGDP LIFEEX GINI       ODA\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; Afghanistan   AFG &lt;span class=&quot;hljs-number&quot;&gt;1961&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1960&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;1960&lt;/span&gt; South Asia Low income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;    &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;32.292&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;114440000&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; Afghanistan   AFG &lt;span class=&quot;hljs-number&quot;&gt;1962&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1961&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;1960&lt;/span&gt; South Asia Low income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;    &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;32.742&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;233350000&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; Afghanistan   AFG &lt;span class=&quot;hljs-number&quot;&gt;1963&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1962&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;1960&lt;/span&gt; South Asia Low income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;    &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;33.185&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;114880000&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt; Afghanistan   AFG &lt;span class=&quot;hljs-number&quot;&gt;1964&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1963&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;1960&lt;/span&gt; South Asia Low income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;    &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;33.624&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;236450000&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt; Afghanistan   AFG &lt;span class=&quot;hljs-number&quot;&gt;1965&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1964&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;1960&lt;/span&gt; South Asia Low income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;    &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;34.060&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;302480000&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; Afghanistan   AFG &lt;span class=&quot;hljs-number&quot;&gt;1966&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1965&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;1960&lt;/span&gt; South Asia Low income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;    &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;34.495&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;370250000&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# This aggregates the data, applying the mean to numeric and the statistical mode to categorical columns&lt;/span&gt;\nhead&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;collap&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;wlddev&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt; iso3c &lt;span class=&quot;hljs-operator&quot;&gt;+&lt;/span&gt; decade&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; FUN &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fmean&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; catFUN &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; fmode&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n\n  country iso3c       date   year decade                     region      income  OECD    PCGDP   LIFEEX GINI      ODA\n&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;   Aruba   ABW &lt;span class=&quot;hljs-number&quot;&gt;1961&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1962.5&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;1960&lt;/span&gt; Latin America &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&lt;/span&gt; Caribbean  High income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;       &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;66.58583&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;       &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;   Aruba   ABW &lt;span class=&quot;hljs-number&quot;&gt;1967&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1970.0&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;1970&lt;/span&gt; Latin America &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&lt;/span&gt; Caribbean  High income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;       &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;69.14178&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;       &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;   Aruba   ABW &lt;span class=&quot;hljs-number&quot;&gt;1976&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1980.0&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;1980&lt;/span&gt; Latin America &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&lt;/span&gt; Caribbean  High income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt;       &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;72.17600&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;33630000&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;   Aruba   ABW &lt;span class=&quot;hljs-number&quot;&gt;1987&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1990.0&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;1990&lt;/span&gt; Latin America &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&lt;/span&gt; Caribbean  High income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;23677.09&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;73.45356&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;41563333&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;   Aruba   ABW &lt;span class=&quot;hljs-number&quot;&gt;1996&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2000.0&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2000&lt;/span&gt; Latin America &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&lt;/span&gt; Caribbean  High income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;26766.93&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;73.85773&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;19857000&lt;/span&gt;\n&lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;   Aruba   ABW &lt;span class=&quot;hljs-number&quot;&gt;2007&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2010.0&lt;/span&gt;   &lt;span class=&quot;hljs-number&quot;&gt;2010&lt;/span&gt; Latin America &lt;span class=&quot;hljs-operator&quot;&gt;&amp;amp;&lt;/span&gt; Caribbean  High income &lt;span class=&quot;hljs-literal&quot;&gt;FALSE&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;25238.80&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;75.01078&lt;/span&gt;   &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;       &lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;# Note that by default (argument keep.col.order = TRUE) the column order is also preserved&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Below is another way to summarize multiple columns, especially useful when the function needs further arguments. You can select all columns via &lt;code&gt;everything()&lt;/code&gt; or a subset of columns like &lt;code&gt;any_of(c(&quot;a&quot;, &quot;b&quot;))&lt;/code&gt;.&lt;/p&gt;\n&lt;pre class=&quot;lang-r s-code-block&quot;&gt;&lt;code class=&quot;hljs language-r&quot;&gt;library&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;dplyr&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;# toy data&lt;/span&gt;\ndf &lt;span class=&quot;hljs-operator&quot;&gt;&amp;lt;-&lt;/span&gt; tibble&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;a &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; replace &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; \n             b &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-literal&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; replace &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; \n             &lt;span class=&quot;hljs-built_in&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; replace &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; \n             grp &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; sample&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;hljs-operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; replace &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\ndf\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; # A tibble: 30  4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;        a     b     c   grp&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;    &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  1     7     1     3     1&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  2     7     4     4     2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  3     5     1     3     3&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  4     7    NA     3     2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  5     7     2     5     2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  6     7     4     4     2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  7     7    NA     3     3&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  8    NA     5     4     1&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;  9     5     1     1     2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 10    NA     3     1     2&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; #  with 20 more rows&lt;/span&gt;\ndf &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt; \n  group_by&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;grp&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;%&amp;gt;%&lt;/span&gt;\n  summarise&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;across&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;everything&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; \n                   &lt;span class=&quot;hljs-built_in&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;mean &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt;mean&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;.&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; na.rm &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;\n                        q75 &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;~&lt;/span&gt;quantile&lt;span class=&quot;hljs-punctuation&quot;&gt;(&lt;/span&gt;.&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; probs &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;.75&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt; na.rm &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; # A tibble: 3  7&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;     grp a_mean a_q75 b_mean b_q75 c_mean c_q75&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt;   &amp;lt;int&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 1     1   6.6      7   2.88  4.25   3        4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 2     2   6.33     7   2.62  3.25   2.9      4&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;#&amp;gt; 3     3   5.78     6   3.33  4      3.09     4&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Late to the party, but recently found another way to get the summary statistics.&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;library(psych)\ndescribe(data)&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;Will output: \nmean, min, max, standard deviation, n, standard error, kurtosis, skewness, median, and range for each variable. &lt;/p&gt;\n    "],"368":["\n&lt;p&gt;Your problem was that you forgot to add &lt;code&gt;()&lt;/code&gt; after your function name.&lt;/p&gt;\n&lt;p&gt;Beyond that, there are a few other things to correct:&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Don&apos;t use inline HTML event attributes (&lt;code&gt;onclick&lt;/code&gt;, &lt;code&gt;onmouseover&lt;/code&gt;, etc.) as they:&lt;/strong&gt;&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;Create &quot;spaghetti code&quot; that is difficult to read and debug.&lt;/li&gt;\n&lt;li&gt;Lead to duplication of code.&lt;/li&gt;\n&lt;li&gt;Don&apos;t scale well&lt;/li&gt;\n&lt;li&gt;Don&apos;t follow the &lt;strong&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Separation_of_concerns&quot; rel=&quot;noreferrer&quot;&gt;separation of concerns&lt;/a&gt;&lt;/strong&gt; development methodology.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Create anonymous global wrapper functions around your attribute values that alter the &lt;code&gt;this&lt;/code&gt; binding in your callback functions.&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Don&apos;t follow the &lt;strong&gt;&lt;a href=&quot;https://www.w3.org/TR/dom/#introduction-to-dom-events&quot; rel=&quot;noreferrer&quot;&gt;W3C Event Standard&lt;/a&gt;&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;Don&apos;t cause a reference to the DOM event to be passed to the handler.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h2&gt;&lt;strong&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#inline_event_handlers_%E2%80%94_dont_use_these&quot; rel=&quot;noreferrer&quot;&gt;Even MDN agrees&lt;/a&gt;&lt;/strong&gt;&lt;/h2&gt;\n&lt;p&gt;Instead, do all your work in JavaScript and use &lt;strong&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener&quot; rel=&quot;noreferrer&quot;&gt;&lt;code&gt;.addEventListener()&lt;/code&gt;&lt;/a&gt;&lt;/strong&gt; to set up event handlers.&lt;/p&gt;\n&lt;p&gt;Don&apos;t use a hyperlink when a button (or some other element) will do. If you do use a hyperlink, you need to disable its native desire to navigate, which is done by setting the &lt;code&gt;href&lt;/code&gt; attribute to &lt;code&gt;#&lt;/code&gt;, not &lt;code&gt;&quot;&quot;&lt;/code&gt;.&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Place this code into a &amp;lt;script&amp;gt; element that goes just before the closing body tag (&amp;lt;/body&amp;gt;).&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Get a reference to the button and the iframe&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; btn = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;btnChangeSrc&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; iFrame = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentFrame&quot;&lt;/span&gt;);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Set up a click event handler for the button&lt;/span&gt;\nbtn.&lt;span class=&quot;hljs-title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;click&quot;&lt;/span&gt;, getContent);\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getContent&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Old source was: &quot;&lt;/span&gt; +  iFrame.&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt;);\n  iFrame.&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;LoremIpsum.html&quot;&lt;/span&gt;;  \n  &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;New source is: &quot;&lt;/span&gt; +  iFrame.&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt;);\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;sidebar&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;Technical Documentation&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Configuration Guides&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;API Guides&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;btnChangeSrc&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Change Source&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;content&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentFrame&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;dummy.html&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;This is a syntax error. Parenthesis are required no matter the parameters of the function. However, it is a good practice to place &lt;em&gt;script&lt;/em&gt; tags at the bottom of the &lt;em&gt;body&lt;/em&gt; tag.&lt;/p&gt;\n    ","\n&lt;p&gt;You have a syntax error in your function declaration (missing parenthesis):&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; getContent {\n   &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentFrame&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;LoremIpsum.html&quot;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Should be:&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getContent&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n   &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentFrame&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;LoremIpsum.html&quot;&lt;/span&gt;;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You also need to prevent the default event for the link&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;charset&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;Untitled Document&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;css/default.css&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;rel&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;stylesheet&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/css&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getContent&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;event&lt;/span&gt;) {\n       event.&lt;span class=&quot;hljs-title function_&quot;&gt;preventDefault&lt;/span&gt;();\n       &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentFrame&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;LoremIpsum.html&quot;&lt;/span&gt;;\n    }\n    &lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;sidebar&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;Technical Documentation&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h1&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;Configuration Guides&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;API Guides&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;getContent(event)&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt; LoremIpsum&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;&amp;lt;!-- &amp;lt;button onclick=&quot;getContent()&quot;&amp;gt;Lorem Ipsum&amp;lt;/button&amp;gt;    --&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;content&quot;&lt;/span&gt;  &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentFrame&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;dummy.html&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;iframe&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;You can use javascript:void(0). &lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;javascript:void(0)&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;getContent(event)&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt; LoremIpsum&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;a&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Or return false on javascript&lt;/p&gt;\n\n&lt;pre class=&quot;default s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;     &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getContent&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;contentFrame&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;LoremIpsum.html&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;;\n\n}\n&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    "],"369":["\n&lt;p&gt;It&apos;s actually not too complicated...&lt;/p&gt;\n\n&lt;p&gt;Say you&apos;re on domain &lt;strong&gt;&lt;code&gt;example.com&lt;/code&gt;&lt;/strong&gt;, and you want to make a request to domain &lt;strong&gt;&lt;code&gt;example.net&lt;/code&gt;&lt;/strong&gt;. To do so, you need to &lt;strong&gt;cross domain&lt;/strong&gt; boundaries, a &lt;strong&gt;no-no&lt;/strong&gt; in most of browserland. &lt;/p&gt;\n\n&lt;p&gt;The one item that bypasses this limitation is &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tags. When you use a script tag, the domain limitation is ignored, but under normal circumstances, you can&apos;t really &lt;strong&gt;do&lt;/strong&gt; anything with the results, the script just gets evaluated.&lt;/p&gt;\n\n&lt;p&gt;Enter &lt;strong&gt;&lt;code&gt;JSONP&lt;/code&gt;&lt;/strong&gt;. When you make your request to a server that is JSONP enabled, you pass a special parameter that tells the server a little bit about your page. That way, the server is able to nicely wrap up its response in a way that your page can handle. &lt;/p&gt;\n\n&lt;p&gt;For example, say the server expects a parameter called &lt;strong&gt;&lt;code&gt;callback&lt;/code&gt;&lt;/strong&gt; to enable its JSONP capabilities. Then your request would look like:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-none s-code-block&quot;&gt;&lt;code&gt;http://www.example.net/sample.aspx?callback=mycallback\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Without JSONP, this might return some basic JavaScript object, like so:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;{ &lt;span class=&quot;hljs-attr&quot;&gt;foo&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt; }\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;However, with JSONP, when the server receives the &quot;callback&quot; parameter, it wraps up the result a little differently, returning something like this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;mycallback&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;foo&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;bar&apos;&lt;/span&gt; });\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;As you can see, it will now invoke the method you specified. So, in your page, you define the callback function:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;mycallback = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;){\n  &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(data.&lt;span class=&quot;hljs-property&quot;&gt;foo&lt;/span&gt;);\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And now, when the script is loaded, it&apos;ll be evaluated, and your function will be executed. Voila, cross-domain requests!&lt;/p&gt;\n\n&lt;p&gt;It&apos;s also worth noting the one major issue with JSONP: you lose a lot of control of the request. For example, there is no &quot;nice&quot; way to get proper failure codes back. As a result, you end up using timers to monitor the request, etc, which is always a bit suspect. The proposition for &lt;a href=&quot;http://www.json.org/JSONRequest.html&quot; rel=&quot;noreferrer&quot;&gt;JSONRequest&lt;/a&gt; is a great solution to allowing cross domain scripting, maintaining security, and allowing proper control of the request.&lt;/p&gt;\n\n&lt;p&gt;These days (2015), &lt;a href=&quot;http://en.wikipedia.org/wiki/Cross-origin_resource_sharing&quot; rel=&quot;noreferrer&quot;&gt;CORS&lt;/a&gt; is the recommended approach vs. JSONRequest. JSONP is still useful for older browser support, but given the security implications, unless you have no choice CORS is the better choice.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;JSONP&lt;/strong&gt; is really a simple trick to overcome the &lt;strong&gt;XMLHttpRequest&lt;/strong&gt; same domain policy. (As you know one cannot send &lt;strong&gt;AJAX (XMLHttpRequest)&lt;/strong&gt; request to a different domain.)&lt;/p&gt;\n\n&lt;p&gt;So - instead of using &lt;strong&gt;XMLHttpRequest&lt;/strong&gt; we have to use &lt;strong&gt;script&lt;/strong&gt; HTML tags, the ones you usually use to load js files, in order for js to get data from another domain. Sounds weird?&lt;/p&gt;\n\n&lt;p&gt;Thing is - turns out &lt;strong&gt;script&lt;/strong&gt; tags can be used in a fashion similar to &lt;strong&gt;XMLHttpRequest&lt;/strong&gt;! Check this out:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;script = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;script&apos;&lt;/span&gt;);\nscript.&lt;span class=&quot;hljs-property&quot;&gt;type&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;text/javascript&apos;&lt;/span&gt;;\nscript.&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;http://www.someWebApiServer.com/some-data&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You will end up with a &lt;strong&gt;script&lt;/strong&gt; segment that looks like this after it loads the data:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;script&amp;gt;\n{[&lt;span class=&quot;hljs-string&quot;&gt;&apos;some string 1&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;some data&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;whatever data&apos;&lt;/span&gt;]}\n&amp;lt;/script&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;However this is a bit inconvenient, because we have to fetch this array from &lt;strong&gt;script&lt;/strong&gt; tag. So &lt;strong&gt;JSONP&lt;/strong&gt; creators decided that this will work better(and it is):&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;script = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;script&apos;&lt;/span&gt;);\nscript.&lt;span class=&quot;hljs-property&quot;&gt;type&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;text/javascript&apos;&lt;/span&gt;;\nscript.&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;http://www.someWebApiServer.com/some-data?callback=my_callback&apos;&lt;/span&gt;;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Notice the &lt;strong&gt;my_callback&lt;/strong&gt; function over there? So - when &lt;strong&gt;JSONP&lt;/strong&gt; server receives your request and finds callback parameter - instead of returning plain js array it&apos;ll return this:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;my_callback&lt;/span&gt;({[&lt;span class=&quot;hljs-string&quot;&gt;&apos;some string 1&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;some data&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;whatever data&apos;&lt;/span&gt;]});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;See where the profit is:&lt;/strong&gt; now we get automatic callback (my_callback) that&apos;ll be triggered once we get the data.&lt;br&gt;\nThat&apos;s all there is to know about &lt;strong&gt;JSONP&lt;/strong&gt;: it&apos;s a callback and script tags.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;NOTE: these are simple examples of JSONP usage,  these are not production ready scripts.&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Basic JavaScript example (simple Twitter feed using JSONP)&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;html&amp;gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;twitterFeed&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;myCallback&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;dataWeGotViaJsonp&lt;/span&gt;){\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; text = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; len = dataWeGotViaJsonp.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;len;i++){\n                twitterEntry = dataWeGotViaJsonp[i];\n                text += &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;p&amp;gt;&amp;lt;img src = &quot;&apos;&lt;/span&gt; + twitterEntry.&lt;span class=&quot;hljs-property&quot;&gt;user&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;profile_image_url_https&lt;/span&gt; +&lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;/&amp;gt;&apos;&lt;/span&gt; + twitterEntry[&lt;span class=&quot;hljs-string&quot;&gt;&apos;text&apos;&lt;/span&gt;] + &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;/p&amp;gt;&apos;&lt;/span&gt;\n            }\n            &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;twitterFeed&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;innerHTML&lt;/span&gt; = text;\n        }\n        &lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://twitter.com/status/user_timeline/padraicb.json?count=10&amp;amp;callback=myCallback&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Basic jQuery example (simple Twitter feed using JSONP)&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;html&amp;gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;\n            $(&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;ready&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n                $.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n                    &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;http://twitter.com/status/user_timeline/padraicb.json?count=10&apos;&lt;/span&gt;,\n                    &lt;span class=&quot;hljs-attr&quot;&gt;dataType&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;jsonp&apos;&lt;/span&gt;,\n                    &lt;span class=&quot;hljs-attr&quot;&gt;success&lt;/span&gt;: &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;dataWeGotViaJsonp&lt;/span&gt;){\n                        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; text = &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n                        &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; len = dataWeGotViaJsonp.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;\n                        &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;i&amp;lt;len;i++){\n                            twitterEntry = dataWeGotViaJsonp[i];\n                            text += &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;p&amp;gt;&amp;lt;img src = &quot;&apos;&lt;/span&gt; + twitterEntry.&lt;span class=&quot;hljs-property&quot;&gt;user&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;profile_image_url_https&lt;/span&gt; +&lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;/&amp;gt;&apos;&lt;/span&gt; + twitterEntry[&lt;span class=&quot;hljs-string&quot;&gt;&apos;text&apos;&lt;/span&gt;] + &lt;span class=&quot;hljs-string&quot;&gt;&apos;&amp;lt;/p&amp;gt;&apos;&lt;/span&gt;\n                        }\n                        $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#twitterFeed&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;html&lt;/span&gt;(text);\n                    }\n                });\n            })\n        &lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;twitterFeed&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;br&gt;\n&lt;strong&gt;JSONP&lt;/strong&gt; stands for &lt;strong&gt;JSON with Padding&lt;/strong&gt;. (very poorly named technique as it really has nothing to do with what most people would think of as padding.)&lt;/p&gt;\n    ","\n&lt;p&gt;JSONP works by constructing a script element (either in HTML markup or inserted into the DOM via JavaScript), which requests to a remote data service location. The response is a javascript loaded on to your browser with name of the pre-defined function along with parameter being passed that is tht JSON data being requested. When the script executes, the function is called along with JSON data, allowing the requesting page to receive and process the data.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;For Further Reading Visit:&lt;/strong&gt; &lt;a href=&quot;https://blogs.sap.com/2013/07/15/secret-behind-jsonp/&quot; rel=&quot;noreferrer&quot;&gt;https://blogs.sap.com/2013/07/15/secret-behind-jsonp/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;client side snippet of code&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;    &amp;lt;!&lt;span class=&quot;hljs-variable constant_&quot;&gt;DOCTYPE&lt;/span&gt; html&amp;gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;lang&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;en&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n     &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;AvLabz - CORS : The Secrets Behind JSONP &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;\n     &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;meta&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;charset&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;username&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;placeholder&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Enter Your Name&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;\n      &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;submit&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;sendRequest()&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt; Send Request to Server &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;\n    &quot;use strict&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Construct the script tag at Runtime&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;requestServerCall&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;url&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; head = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;head&lt;/span&gt;;\n      &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; script = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;script&quot;&lt;/span&gt;);\n\n      script.&lt;span class=&quot;hljs-title function_&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;src&quot;&lt;/span&gt;, url);\n      head.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(script);\n      head.&lt;span class=&quot;hljs-title function_&quot;&gt;removeChild&lt;/span&gt;(script);\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Predefined callback function    &lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;jsonpCallback&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(data.&lt;span class=&quot;hljs-property&quot;&gt;message&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// Response data from the server&lt;/span&gt;\n    }\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Reference to the input field&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; username = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;username&quot;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;//Send Request to Server&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;sendRequest&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n      &lt;span class=&quot;hljs-comment&quot;&gt;// Edit with your Web Service URL&lt;/span&gt;\n      &lt;span class=&quot;hljs-title function_&quot;&gt;requestServerCall&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost/PHP_Series/CORS/myService.php?callback=jsonpCallback&amp;amp;message=&quot;&lt;/span&gt;+username.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;+&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;);\n    }    \n\n  &lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n   &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;\n   &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Server side piece of PHP code&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;?php\n    &lt;span class=&quot;hljs-title function_&quot;&gt;header&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Content-Type: application/javascript&quot;&lt;/span&gt;);\n    $callback = $_GET[&lt;span class=&quot;hljs-string&quot;&gt;&quot;callback&quot;&lt;/span&gt;];\n    $message = $_GET[&lt;span class=&quot;hljs-string&quot;&gt;&quot;message&quot;&lt;/span&gt;].&lt;span class=&quot;hljs-string&quot;&gt;&quot; you got a response from server yipeee!!!&quot;&lt;/span&gt;;\n    $jsonResponse = &lt;span class=&quot;hljs-string&quot;&gt;&quot;{\\&quot;message\\&quot;:\\&quot;&quot;&lt;/span&gt; . $message . &lt;span class=&quot;hljs-string&quot;&gt;&quot;\\&quot;}&quot;&lt;/span&gt;;\n    echo $callback . &lt;span class=&quot;hljs-string&quot;&gt;&quot;(&quot;&lt;/span&gt; . $jsonResponse . &lt;span class=&quot;hljs-string&quot;&gt;&quot;)&quot;&lt;/span&gt;;\n?&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Because you can ask the server to prepend a prefix to the returned JSON object. E.g&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;function_prefix(json_object);&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;in order for the browser to &lt;code&gt;eval&lt;/code&gt; &quot;inline&quot; the JSON string as an expression. This trick makes it possible for the server to &quot;inject&quot; javascript code directly in the Client browser and this with bypassing the &quot;same origin&quot; restrictions.&lt;/p&gt;\n\n&lt;p&gt;In other words, you can achieve &lt;strong&gt;cross-domain data exchange&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Normally, &lt;code&gt;XMLHttpRequest&lt;/code&gt; doesn&apos;t permit cross-domain data-exchange directly (one needs to go through a server in the same domain) whereas:&lt;/p&gt;\n\n&lt;p&gt;&lt;code&gt;&amp;lt;script src=&quot;some_other_domain/some_data.js&amp;amp;prefix=function_prefix&lt;/code&gt;&amp;gt;` one can access data from a domain different than from the origin.&lt;/p&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;Also worth noting: even though the server should be considered as &quot;trusted&quot; before attempting that sort of &quot;trick&quot;, the side-effects of possible change in object format etc. can be contained.  If a &lt;code&gt;function_prefix&lt;/code&gt; (i.e. a proper js function) is used to receive the JSON object, the said function can perform checks before accepting/further processing the returned data.&lt;/p&gt;\n    ","\n&lt;h1&gt;TL;DR&lt;/h1&gt;\n&lt;p&gt;JSONP is an &lt;strong&gt;old trick&lt;/strong&gt; invented to bypass the security restriction that forbids us to get JSON data that is in a different website (a different &lt;strong&gt;origin&lt;/strong&gt;&lt;sup&gt;1&lt;/sup&gt;) than the one we are currently browsing.&lt;/p&gt;\n&lt;p&gt;The trick works by using a &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tag that asks for the JSON from that place, e.g.: &lt;code&gt;{ &quot;user&quot;:&quot;Smith&quot; }&lt;/code&gt;, but wrapped in a function, the &lt;em&gt;actual JSONP&lt;/em&gt; (&quot;JSON with Padding&quot;):&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;peopleDataJSONP&lt;/span&gt;({&lt;span class=&quot;hljs-string&quot;&gt;&quot;user&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Smith&quot;&lt;/span&gt;})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Receiving it in this form enables us to use the data within our &lt;code&gt;peopleDataJSONP&lt;/code&gt; function. &lt;strong&gt;JSONP is a bad practice&lt;/strong&gt; and not needed anymore, don&apos;t use it (read below).&lt;/p&gt;\n&lt;br&gt;\n&lt;h1&gt;The problem&lt;/h1&gt;\n&lt;p&gt;Say we want to use on &lt;code&gt;ourweb.com&lt;/code&gt; some JSON data (or any raw data really) hosted at &lt;code&gt;anotherweb.com&lt;/code&gt;. If we were to use GET request (think &lt;code&gt;XMLHttpRequest&lt;/code&gt;, or &lt;code&gt;fetch&lt;/code&gt; call, &lt;code&gt;$.ajax&lt;/code&gt;, etc.), our browser would tell us it&apos;s not allowed with this ugly error:&lt;/p&gt;\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/lezhN.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/lezhN.png&quot; alt=&quot;Chrome CORS console error&quot;&gt;&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;How to get the data we want? Well, &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tags are not subjected to this whole server (origin&lt;sup&gt;1&lt;/sup&gt;) restriction! That&apos;s why we can load a library like jQuery or Google Maps from any server, such as a CDN, without any errors.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Here&apos;s the important point:&lt;/strong&gt; if you think about it, those libraries are &lt;em&gt;actual, runnable JS code&lt;/em&gt; (usually a massive function with all the logic inside). But raw data? JSON data &lt;em&gt;is not code&lt;/em&gt;. There&apos;s nothing to run; it&apos;s just plain text.&lt;/p&gt;\n&lt;p&gt;Therefore, there&apos;s no way to handle or manipulate our precious data. The browser will download the data pointed at by our &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tag and when processing it&apos;ll rightfully complain:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;wtf is this &lt;code&gt;{&quot;user&quot;:&quot;Smith&quot;}&lt;/code&gt; crap we loaded? It&apos;s not code. I can&apos;t compute, syntax error!&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;br&gt;\n&lt;h1&gt;The JSONP hack&lt;/h1&gt;\n&lt;p&gt;The old/hacky way to utilize that data? If we could make plain text somehow &lt;em&gt;runnable&lt;/em&gt;, we could grab it on runtime. So we need &lt;code&gt;anotherweb.com&lt;/code&gt; to send it with some logic, so when it&apos;s loaded, your code in the browser will be able to use said data. We need two things: &lt;strong&gt;1)&lt;/strong&gt; to get the data in a way that it can be run, and &lt;strong&gt;2)&lt;/strong&gt; write some code in the client so that when the data runs, this code is called and we get to use the data.&lt;/p&gt;\n&lt;p&gt;For &lt;strong&gt;1)&lt;/strong&gt; we ask the foreign server to send us the JSON data inside a JS function. The data itself is set up as that function&apos;s input. It looks like this:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;peopleDataJSONP&lt;/span&gt;({&lt;span class=&quot;hljs-string&quot;&gt;&quot;user&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;Smith&quot;&lt;/span&gt;})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;which makes it &lt;em&gt;JS code&lt;/em&gt; our browser will parse and run without complaining! Exactly like it does with the jQuery library.\nTo receive the data like that, the client &quot;asks&quot; the JSONP-friendly server for it, usually done like this:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;script src=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://anotherweb.com/api/data-from-people.json?myCallback=peopleDataJSONP&quot;&lt;/span&gt;&amp;gt;&amp;lt;/script&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;As per &lt;strong&gt;2)&lt;/strong&gt;, since our browser will receive the JSONP with that function name, we need a function with the same name in our code, like this:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;peopleDataJSONP&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;){\n  &lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(data.&lt;span class=&quot;hljs-property&quot;&gt;user&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// &quot;Smith&quot;&lt;/span&gt;\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;The browser will download the JSONP and run it, &lt;strong&gt;which calls our function&lt;/strong&gt;, where the argument &lt;code&gt;data&lt;/code&gt; will be the JSON data from &lt;code&gt;anotherweb.com&lt;/code&gt;. We can now do with our data whatever we want to.&lt;/p&gt;\n&lt;br&gt;\n&lt;h1&gt;Don&apos;t use JSONP, use CORS&lt;/h1&gt;\n&lt;p&gt;JSONP is a cross-site hack with a few downsides:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;We can only perform GET requests&lt;/li&gt;\n&lt;li&gt;Since it&apos;s a GET request triggered by a simple script tag, we don&apos;t get helpful errors or progress info&lt;/li&gt;\n&lt;li&gt;There are also some security concerns, like running in your client JS code that could be changed to a malicious payload&lt;/li&gt;\n&lt;li&gt;It only solves the problem with JSON data, but Same-Origin security policy applies to other data (WebFonts, images/video drawn with drawImage()...)&lt;/li&gt;\n&lt;li&gt;It&apos;s not very elegant nor readable.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;The takeaway is that there&apos;s &lt;strong&gt;no need to use it nowadays&lt;/strong&gt;.&lt;/p&gt;\n&lt;p&gt;You should &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS&quot; rel=&quot;noreferrer&quot;&gt;read about CORS here&lt;/a&gt;, but the gist of it is:&lt;/p&gt;\n&lt;blockquote&gt;\n&lt;p&gt;Cross-Origin Resource Sharing (CORS) is a mechanism that uses\nadditional HTTP headers to tell browsers to give a web application\nrunning at one origin, access to selected resources from a different\norigin. A web application executes a cross-origin HTTP request when it\nrequests a resource that has a different origin (domain, protocol, or\nport) from its own.&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;br&gt;\n&lt;hr&gt;\n&lt;ol&gt;\n&lt;li&gt;&lt;em&gt;origin&lt;/em&gt; is defined by 3 things: &lt;strong&gt;protocol&lt;/strong&gt;, &lt;strong&gt;port&lt;/strong&gt;, and &lt;strong&gt;host&lt;/strong&gt;. So, for example, &lt;code&gt;https://web.com&lt;/code&gt; is a different origin than &lt;code&gt;http://web.com&lt;/code&gt; (different protocol) and &lt;code&gt;https://web.com:8081&lt;/code&gt; (different port) and obviously &lt;code&gt;https://thatotherweb.net&lt;/code&gt; (different host)&lt;/li&gt;\n&lt;/ol&gt;\n    ","\n&lt;p&gt;JSONP is a great away to get around cross-domain scripting errors. You can consume a JSONP service purely with JS without having to implement a AJAX proxy on the server side. &lt;/p&gt;\n\n&lt;p&gt;You can use the &lt;a href=&quot;http://b1t.co&quot; rel=&quot;noreferrer&quot;&gt;b1t.co&lt;/a&gt; service to see how it works. This is a free JSONP service that alllows you to minify your URLs. Here is the url to use for the service:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;http://b1t.co/Site/api/External/MakeUrlWithGet?callback=[resultsCallBack]&amp;amp;url=[escapedUrlToMinify]&quot; rel=&quot;noreferrer&quot;&gt;http://b1t.co/Site/api/External/MakeUrlWithGet?callback=[resultsCallBack]&amp;amp;url=[escapedUrlToMinify]&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;For example the call, &lt;a href=&quot;http://b1t.co/Site/api/External/MakeUrlWithGet?callback=whateverJavascriptName&amp;amp;url=google.com&quot; rel=&quot;noreferrer&quot;&gt;http://b1t.co/Site/api/External/MakeUrlWithGet?callback=whateverJavascriptName&amp;amp;url=google.com&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;would return&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;whateverJavascriptName&lt;/span&gt;({&lt;span class=&quot;hljs-string&quot;&gt;&quot;success&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;url&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://google.com&quot;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&quot;shortUrl&quot;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://b1t.co/54&quot;&lt;/span&gt;});\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;And thus when that get&apos;s loaded in your js as a src, it will automatically run whateverJavascriptName which you should implement as your callback function:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;minifyResultsCallBack&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;results&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;innerHTML&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(data);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;To actually make the JSONP call, you can do it about several ways (including using jQuery) but here is a pure JS example:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;minify&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;urlToMinify&lt;/span&gt;)\n{\n   url = &lt;span class=&quot;hljs-built_in&quot;&gt;escape&lt;/span&gt;(urlToMinify);\n   &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; s = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;script&apos;&lt;/span&gt;);\n   s.&lt;span class=&quot;hljs-property&quot;&gt;id&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;dynScript&apos;&lt;/span&gt;;\n   s.&lt;span class=&quot;hljs-property&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&apos;text/javascript&apos;&lt;/span&gt;;\n   s.&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&quot;http://b1t.co/Site/api/External/MakeUrlWithGet?callback=resultsCallBack&amp;amp;url=&quot;&lt;/span&gt; + url;\n   &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementsByTagName&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;head&apos;&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(s);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;A step by step example and a jsonp web service to practice on is available at: &lt;a href=&quot;http://b1t.co/5f&quot; rel=&quot;noreferrer&quot;&gt;this post&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;A simple example for the usage of JSONP.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;client.html&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;    &amp;lt;html&amp;gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;\n   &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n     body&amp;gt;\n\n\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;001&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;gO(&lt;/span&gt;&quot;&lt;span class=&quot;hljs-attr&quot;&gt;getCompany&lt;/span&gt;&quot;) &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Company&quot;&lt;/span&gt;  /&amp;gt;&lt;/span&gt;&lt;/span&gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;002&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onclick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;gO(&lt;/span&gt;&quot;&lt;span class=&quot;hljs-attr&quot;&gt;getPosition&lt;/span&gt;&quot;) &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Position&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;h3&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;101&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;h3&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n\n    &lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; elem=&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;101&quot;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;gO&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;callback&lt;/span&gt;){\n\n    script = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;script&apos;&lt;/span&gt;);\n    script.&lt;span class=&quot;hljs-property&quot;&gt;type&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;text/javascript&apos;&lt;/span&gt;;\n    script.&lt;span class=&quot;hljs-property&quot;&gt;src&lt;/span&gt; = &lt;span class=&quot;hljs-string&quot;&gt;&apos;http://localhost/test/server.php?callback=&apos;&lt;/span&gt;+callback;\n    elem.&lt;span class=&quot;hljs-title function_&quot;&gt;appendChild&lt;/span&gt;(script);\n    elem.&lt;span class=&quot;hljs-title function_&quot;&gt;removeChild&lt;/span&gt;(script);\n\n\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getCompany&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;){\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; message=&lt;span class=&quot;hljs-string&quot;&gt;&quot;The company you work for is &quot;&lt;/span&gt;+data.&lt;span class=&quot;hljs-property&quot;&gt;company&lt;/span&gt; +&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;img src=&apos;&quot;&lt;/span&gt;+data.&lt;span class=&quot;hljs-property&quot;&gt;image&lt;/span&gt;+&lt;span class=&quot;hljs-string&quot;&gt;&quot;&apos;/   &amp;gt;&quot;&lt;/span&gt;;\n    elem.&lt;span class=&quot;hljs-property&quot;&gt;innerHTML&lt;/span&gt;=message;\n}\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getPosition&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;data&lt;/span&gt;){\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; message=&lt;span class=&quot;hljs-string&quot;&gt;&quot;The position you are offered is &quot;&lt;/span&gt;+data.&lt;span class=&quot;hljs-property&quot;&gt;position&lt;/span&gt;;\n    elem.&lt;span class=&quot;hljs-property&quot;&gt;innerHTML&lt;/span&gt;=message;\n    }\n    &lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;\n    &amp;lt;/html&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;server.php&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;  &amp;lt;?php\n\n    $callback=$_GET[&lt;span class=&quot;hljs-string&quot;&gt;&quot;callback&quot;&lt;/span&gt;];\n    echo $callback;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;($callback==&lt;span class=&quot;hljs-string&quot;&gt;&apos;getCompany&apos;&lt;/span&gt;)\n    $response=&lt;span class=&quot;hljs-string&quot;&gt;&quot;({\\&quot;company\\&quot;:\\&quot;Google\\&quot;,\\&quot;image\\&quot;:\\&quot;xyz.jpg\\&quot;})&quot;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt;\n    $response=&lt;span class=&quot;hljs-string&quot;&gt;&quot;({\\&quot;position\\&quot;:\\&quot;Development Intern\\&quot;})&quot;&lt;/span&gt;;\n    echo $response;\n\n    ?&amp;gt;    \n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;Before understanding JSONP, you need to know JSON format and XML. Currently the most frequently used data format on the web is XML, but XML is very complicated. It makes users inconvenient to process embedded in Web pages. &lt;/p&gt;\n\n&lt;p&gt;To make JavaScript can easily exchange data, even as the data processing program, we use the wording according to JavaScript objects and developed a simple data exchange format, which is JSON. JSON can be used as data, or as a JavaScript program. &lt;/p&gt;\n\n&lt;p&gt;JSON can be directly embedded in JavaScript, using them you can directly execute certain JSON program, but due to security constraints, the browser Sandbox mechanism disables cross-domain JSON code execution.&lt;/p&gt;\n\n&lt;p&gt;To make JSON can be passed after the execution, we developed a JSONP. JSONP bypass the security limits of the browser with JavaScript Callback functionality and the &amp;lt; script &amp;gt; tag. &lt;/p&gt;\n\n&lt;p&gt;So in short it explains what JSONP is, what problem it solves (when to use it).&lt;/p&gt;\n    ","\n&lt;blockquote&gt;\n  &lt;p&gt;&lt;strong&gt;JSONP&lt;/strong&gt; stands for &lt;strong&gt;JSON&lt;/strong&gt; with &lt;strong&gt;Padding&lt;/strong&gt;.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Here is the site, with &lt;strong&gt;great examples&lt;/strong&gt;, &lt;strong&gt;with the explanation from the simplest use&lt;/strong&gt; of this technique &lt;strong&gt;to the most advanced&lt;/strong&gt; in plane JavaScript:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://www.w3schools.com/js/js_json_jsonp.asp&quot; rel=&quot;nofollow noreferrer&quot;&gt;w3schools.com / JSONP&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;One of my more favorite techniques described above is &lt;strong&gt;Dynamic JSON Result&lt;/strong&gt;, which &lt;strong&gt;allow to send JSON to the PHP file in URL parameter&lt;/strong&gt;, and let the &lt;strong&gt;PHP file also return a JSON object based on the information it gets&lt;/strong&gt;.&lt;/p&gt;\n\n&lt;p&gt;Tools like &lt;a href=&quot;https://learn.jquery.com/ajax/working-with-jsonp/&quot; rel=&quot;nofollow noreferrer&quot;&gt;jQuery also have facilities to use JSONP&lt;/a&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;jQuery.&lt;span class=&quot;hljs-title function_&quot;&gt;ajax&lt;/span&gt;({\n  &lt;span class=&quot;hljs-attr&quot;&gt;url&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://data.acgov.org/resource/k9se-aps6.json?city=Berkeley&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;jsonp&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;callbackName&quot;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;dataType&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;jsonp&quot;&lt;/span&gt;\n}).&lt;span class=&quot;hljs-title function_&quot;&gt;done&lt;/span&gt;(\n  &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;response&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(response)\n);\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I try to explain in easy way:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;JSONP stands for JSON with Padding.&lt;/li&gt;\n&lt;li&gt;JSONP is a method for sending JSON data without worrying about cross-domain issues.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Why Used:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Requesting a file from another domain can cause problems, due to cross-domain policy.&lt;/p&gt;\n&lt;p&gt;Requesting an external script from another domain does not have this problem.&lt;/p&gt;\n&lt;p&gt;JSONP uses this advantage, and request files using the script tag instead of the XMLHttpRequest object.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Code For Server File:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&amp;lt;?php\n$myJSON = &lt;span class=&quot;hljs-string&quot;&gt;&apos;{ &quot;name&quot;:&quot;John&quot;, &quot;age&quot;:30, &quot;city&quot;:&quot;New York&quot; }&apos;&lt;/span&gt;;\n\necho &lt;span class=&quot;hljs-string&quot;&gt;&quot;myFunc(&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;$myJSON&lt;/span&gt;.&lt;span class=&quot;hljs-string&quot;&gt;&quot;);&quot;&lt;/span&gt;;\n?&amp;gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Function that will handle data:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;function myFunc(myObj) {\n  document.getElementById(&quot;demo&quot;).innerHTML = myObj.name;\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    "],"370":["\n&lt;p&gt;I used the idea from Kerry&apos;s answer, but simplified it since I was just looking for something simple for my specific purpose. Here is what I have:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;numberWithCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; x.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;numberWithCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; x.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?&amp;lt;!\\.\\d*)(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x, expect&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; result = &lt;span class=&quot;hljs-title function_&quot;&gt;numberWithCommas&lt;/span&gt;(x);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; pass = result === expect;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${pass ? &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;ERROR ====&amp;gt;&quot;&lt;/span&gt;}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${x}&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-subst&quot;&gt;${result}&lt;/span&gt;`&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; pass;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; failures = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,        &lt;span class=&quot;hljs-string&quot;&gt;&quot;0&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;,      &lt;span class=&quot;hljs-string&quot;&gt;&quot;100&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;,     &lt;span class=&quot;hljs-string&quot;&gt;&quot;1,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt;,    &lt;span class=&quot;hljs-string&quot;&gt;&quot;10,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100000&lt;/span&gt;,   &lt;span class=&quot;hljs-string&quot;&gt;&quot;100,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000000&lt;/span&gt;,  &lt;span class=&quot;hljs-string&quot;&gt;&quot;1,000,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000000&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;10,000,000&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (failures) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${failures}&lt;/span&gt; test(s) failed`&lt;/span&gt;);\n} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;All tests passed&quot;&lt;/span&gt;);\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.as-console-wrapper&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; &lt;span class=&quot;hljs-meta&quot;&gt;!important&lt;/span&gt;;\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif1&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;p&gt;The regex uses 2 lookahead assertions:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;a positive one to look for any point in the string that has a multiple of 3 digits in a row after it,&lt;/li&gt;\n&lt;li&gt;a negative assertion to make sure that point only has exactly a multiple of 3 digits. The replacement expression puts a comma there.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;For example, if you pass it &lt;code&gt;123456789.01&lt;/code&gt;, the positive assertion will match every spot to the left of the 7 (since &lt;code&gt;789&lt;/code&gt; is a multiple of 3 digits, &lt;code&gt;678&lt;/code&gt; is a multiple of 3 digits, &lt;code&gt;567&lt;/code&gt;, etc.). The negative assertion checks that the multiple of 3 digits does not have any digits after it. &lt;code&gt;789&lt;/code&gt; has a period after it so it is exactly a multiple of 3 digits, so a comma goes there. &lt;code&gt;678&lt;/code&gt; is a multiple of 3 digits but it has a &lt;code&gt;9&lt;/code&gt; after it, so those 3 digits are part of a group of 4, and a comma does not go there. Similarly for &lt;code&gt;567&lt;/code&gt;. &lt;code&gt;456789&lt;/code&gt; is 6 digits, which is a multiple of 3, so a comma goes before that. &lt;code&gt;345678&lt;/code&gt; is a multiple of 3, but it has a &lt;code&gt;9&lt;/code&gt; after it, so no comma goes there. And so on. The &lt;code&gt;\\B&lt;/code&gt; keeps the regex from putting a comma at the beginning of the string.&lt;/p&gt;\n&lt;p&gt;@&lt;a href=&quot;https://stackoverflow.com/users/1329075/neu-rah&quot;&gt;neu-rah&lt;/a&gt; mentioned that this function adds commas in undesirable places if there are more than 3 digits after the decimal point. If this is a problem, you can use this function:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;numberWithCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; parts = x.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;);\n    parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; parts.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;numberWithCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; parts = x.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;);\n    parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; parts.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x, expect&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; result = &lt;span class=&quot;hljs-title function_&quot;&gt;numberWithCommas&lt;/span&gt;(x);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; pass = result === expect;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${pass ? &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;ERROR ====&amp;gt;&quot;&lt;/span&gt;}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${x}&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-subst&quot;&gt;${result}&lt;/span&gt;`&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; pass;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; failures = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;              , &lt;span class=&quot;hljs-string&quot;&gt;&quot;0&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0.123456&lt;/span&gt;       , &lt;span class=&quot;hljs-string&quot;&gt;&quot;0.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;            , &lt;span class=&quot;hljs-string&quot;&gt;&quot;100&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100.123456&lt;/span&gt;     , &lt;span class=&quot;hljs-string&quot;&gt;&quot;100.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;           , &lt;span class=&quot;hljs-string&quot;&gt;&quot;1,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000.123456&lt;/span&gt;    , &lt;span class=&quot;hljs-string&quot;&gt;&quot;1,000.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt;          , &lt;span class=&quot;hljs-string&quot;&gt;&quot;10,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000.123456&lt;/span&gt;   , &lt;span class=&quot;hljs-string&quot;&gt;&quot;10,000.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100000&lt;/span&gt;         , &lt;span class=&quot;hljs-string&quot;&gt;&quot;100,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100000.123456&lt;/span&gt;  , &lt;span class=&quot;hljs-string&quot;&gt;&quot;100,000.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000000&lt;/span&gt;        , &lt;span class=&quot;hljs-string&quot;&gt;&quot;1,000,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000000.123456&lt;/span&gt; , &lt;span class=&quot;hljs-string&quot;&gt;&quot;1,000,000.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000000&lt;/span&gt;       , &lt;span class=&quot;hljs-string&quot;&gt;&quot;10,000,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000000.123456&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;10,000,000.123456&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (failures) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${failures}&lt;/span&gt; test(s) failed`&lt;/span&gt;);\n} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;All tests passed&quot;&lt;/span&gt;);\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.as-console-wrapper&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; &lt;span class=&quot;hljs-meta&quot;&gt;!important&lt;/span&gt;;\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif2&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;@&lt;a href=&quot;https://stackoverflow.com/users/157247/t-j-crowder&quot;&gt;t.j.crowder&lt;/a&gt; pointed out that now that JavaScript has lookbehind (&lt;a href=&quot;https://caniuse.com/#feat=js-regexp-lookbehind&quot; rel=&quot;noreferrer&quot;&gt;support info&lt;/a&gt;), it can be solved in the regular expression itself:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;numberWithCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; x.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?&amp;lt;!\\.\\d*)(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;true&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;&lt;div class=&quot;snippet-display&quot; style=&quot;vertical-align: center&quot;&gt;&lt;p&gt;&lt;a class=&quot;snippet-show-link-chevron&quot;&gt;&lt;span class=&quot;expander-arrow-hide&quot; style=&quot;vertical-align: middle;&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;snippet-show-link&quot;&gt;&lt;span class=&quot;show-hide&quot; data-ishidden=&quot;true&quot; style=&quot;vertical-align: middle&quot;&gt;Show code snippet&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n&lt;div class=&quot;snippet-code snippet-currently-hidden&quot; style=&quot;display: none;&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;numberWithCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; x.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?&amp;lt;!\\.\\d*)(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;x, expect&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; result = &lt;span class=&quot;hljs-title function_&quot;&gt;numberWithCommas&lt;/span&gt;(x);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; pass = result === expect;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${pass ? &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;ERROR ====&amp;gt;&quot;&lt;/span&gt;}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${x}&lt;/span&gt; =&amp;gt; &lt;span class=&quot;hljs-subst&quot;&gt;${result}&lt;/span&gt;`&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; pass;\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; failures = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;,               &lt;span class=&quot;hljs-string&quot;&gt;&quot;0&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0.123456&lt;/span&gt;,        &lt;span class=&quot;hljs-string&quot;&gt;&quot;0.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;,             &lt;span class=&quot;hljs-string&quot;&gt;&quot;100&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100.123456&lt;/span&gt;,      &lt;span class=&quot;hljs-string&quot;&gt;&quot;100.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;,            &lt;span class=&quot;hljs-string&quot;&gt;&quot;1,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000.123456&lt;/span&gt;,     &lt;span class=&quot;hljs-string&quot;&gt;&quot;1,000.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt;,           &lt;span class=&quot;hljs-string&quot;&gt;&quot;10,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000.123456&lt;/span&gt;,    &lt;span class=&quot;hljs-string&quot;&gt;&quot;10,000.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100000&lt;/span&gt;,          &lt;span class=&quot;hljs-string&quot;&gt;&quot;100,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100000.123456&lt;/span&gt;,   &lt;span class=&quot;hljs-string&quot;&gt;&quot;100,000.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000000&lt;/span&gt;,         &lt;span class=&quot;hljs-string&quot;&gt;&quot;1,000,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000000.123456&lt;/span&gt;,  &lt;span class=&quot;hljs-string&quot;&gt;&quot;1,000,000.123456&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000000&lt;/span&gt;,        &lt;span class=&quot;hljs-string&quot;&gt;&quot;10,000,000&quot;&lt;/span&gt;);\nfailures += !&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000000.123456&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;10,000,000.123456&quot;&lt;/span&gt;);\n&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (failures) {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`&lt;span class=&quot;hljs-subst&quot;&gt;${failures}&lt;/span&gt; test(s) failed`&lt;/span&gt;);\n} &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;All tests passed&quot;&lt;/span&gt;);\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.as-console-wrapper&lt;/span&gt; {\n    &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; &lt;span class=&quot;hljs-meta&quot;&gt;!important&lt;/span&gt;;\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif3&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;&lt;code&gt;(?&amp;lt;!\\.\\d*)&lt;/code&gt; is a negative lookbehind that says the match can&apos;t be preceded by a &lt;code&gt;.&lt;/code&gt; followed by zero or more digits. The negative lookbehind is faster than the &lt;code&gt;split&lt;/code&gt; and &lt;code&gt;join&lt;/code&gt; solution (&lt;a href=&quot;http://jsben.ch/umq99&quot; rel=&quot;noreferrer&quot;&gt;comparison&lt;/a&gt;), at least in V8.&lt;/p&gt;\n    ","\n&lt;p&gt;I&apos;m surprised nobody mentioned &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString&quot; rel=&quot;noreferrer&quot;&gt;Number.prototype.toLocaleString&lt;/a&gt;.\nIt&apos;s implemented in JavaScript 1.5 (which was introduced in 1999) so it&apos;s basically supported across all major browsers.&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; n = &lt;span class=&quot;hljs-number&quot;&gt;34523453.345&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(n.&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;());    &lt;span class=&quot;hljs-comment&quot;&gt;// &quot;34,523,453.345&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif4&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;It also works in Node.js as of v0.12 via inclusion of &lt;a href=&quot;https://github.com/andyearnshaw/Intl.js&quot; rel=&quot;noreferrer&quot;&gt;Intl&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;If you want something different, &lt;a href=&quot;http://numeraljs.com/&quot; rel=&quot;noreferrer&quot;&gt;Numeral.js&lt;/a&gt; might be interesting.&lt;/p&gt;\n    ","\n&lt;p&gt;Below are two different browser APIs that can transform &lt;em&gt;Numbers&lt;/em&gt; into structured &lt;em&gt;Strings&lt;/em&gt;. Keep in mind that not all users&apos; machines have a &lt;a href=&quot;https://en.wikipedia.org/wiki/Decimal_separator&quot; rel=&quot;noreferrer&quot;&gt;&lt;strong&gt;locale&lt;/strong&gt; that uses commas in numbers&lt;/a&gt;. To enforce commas to the output, any &quot;western&quot; &lt;em&gt;locale&lt;/em&gt; may be used, such as &lt;code&gt;en-US&lt;/code&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; number = &lt;span class=&quot;hljs-number&quot;&gt;1234567890&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Example number to be converted&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt; Mind that javascript has a &lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER&quot; rel=&quot;noreferrer&quot;&gt;maximum integer&lt;/a&gt; value of &lt;code&gt;9007199254740991&lt;/code&gt;&lt;/p&gt;\n&lt;hr&gt;\n&lt;h2&gt;&lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString&quot; rel=&quot;noreferrer&quot;&gt;toLocaleString&lt;/a&gt;&lt;/h2&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// default behaviour on a machine with a local that uses commas for numbers&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; number = &lt;span class=&quot;hljs-number&quot;&gt;1234567890&lt;/span&gt;;\nnumber.&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// &quot;1,234,567,890&quot;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// With custom settings, forcing a &quot;US&quot; locale to guarantee commas in output&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; number2 = &lt;span class=&quot;hljs-number&quot;&gt;1234.56789&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// floating point example&lt;/span&gt;\nnumber2.&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;en-US&apos;&lt;/span&gt;, {&lt;span class=&quot;hljs-attr&quot;&gt;maximumFractionDigits&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;}) &lt;span class=&quot;hljs-comment&quot;&gt;// &quot;1,234.57&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat&quot; rel=&quot;noreferrer&quot;&gt;NumberFormat&lt;/a&gt;&lt;/h2&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; number = &lt;span class=&quot;hljs-number&quot;&gt;1234567890&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; nf = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;en-US&apos;&lt;/span&gt;);\nnf.&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(number); &lt;span class=&quot;hljs-comment&quot;&gt;// &quot;1,234,567,890&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;hr&gt;\n&lt;p&gt;From what I checked (Firefox at least) they are both more or less same regarding performance.&lt;/p&gt;\n&lt;p&gt; &lt;strong&gt;Live demo&lt;/strong&gt;: &lt;a href=&quot;https://codepen.io/vsync/pen/MWjdbgL?editors=1000&quot; rel=&quot;noreferrer&quot;&gt;https://codepen.io/vsync/pen/MWjdbgL?editors=1000&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;I suggest using phpjs.org &apos;s &lt;a href=&quot;http://phpjs.org/functions/number_format:481&quot; rel=&quot;noreferrer&quot;&gt;number_format()&lt;/a&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;number_format&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;number, decimals, dec_point, thousands_sep&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// http://kevin.vanzonneveld.net&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   original by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Michael White (http://getsprink.com)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Benjamin Lupton&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Allan Jensen (http://www.winternet.no)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +    revised by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Howard Yeend&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +    revised by: Luke Smith (http://lucassmith.name)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Diogo Resende&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Rival&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +      input by: Kheang Hok Chin (http://www.distantia.ca/)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: davook&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: Brett Zamir (http://brett-zamir.me)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +      input by: Jay Klehr&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: Brett Zamir (http://brett-zamir.me)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +      input by: Amir Habibi (http://www.residence-mixte.com/)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Brett Zamir (http://brett-zamir.me)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: Theriault&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: Drew Noakes&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 1: number_format(1234.56);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 1: &apos;1,235&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 2: number_format(1234.56, 2, &apos;,&apos;, &apos; &apos;);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 2: &apos;1 234,56&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 3: number_format(1234.5678, 2, &apos;.&apos;, &apos;&apos;);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 3: &apos;1234.57&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 4: number_format(67, 2, &apos;,&apos;, &apos;.&apos;);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 4: &apos;67,00&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 5: number_format(1000);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 5: &apos;1,000&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 6: number_format(67.311, 2);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 6: &apos;67.31&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 7: number_format(1000.55, 1);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 7: &apos;1,000.6&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 8: number_format(67000, 5, &apos;,&apos;, &apos;.&apos;);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 8: &apos;67.000,00000&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 9: number_format(0.9, 0);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 9: &apos;1&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    example 10: number_format(&apos;1.20&apos;, 2);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    returns 10: &apos;1.20&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    example 11: number_format(&apos;1.20&apos;, 4);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    returns 11: &apos;1.2000&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    example 12: number_format(&apos;1.2000&apos;, 3);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    returns 12: &apos;1.200&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; n = !&lt;span class=&quot;hljs-built_in&quot;&gt;isFinite&lt;/span&gt;(+number) ? &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; : +number, \n        prec = !&lt;span class=&quot;hljs-built_in&quot;&gt;isFinite&lt;/span&gt;(+decimals) ? &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; : &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;abs&lt;/span&gt;(decimals),\n        sep = (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; thousands_sep === &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;) ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt; : thousands_sep,\n        dec = (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; dec_point === &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;) ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; : dec_point,\n        toFixedFix = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;n, prec&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Fix for IE parseFloat(0.55).toFixed(0) = 0;&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; k = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;pow&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, prec);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;round&lt;/span&gt;(n * k) / k;\n        },\n        s = (prec ? &lt;span class=&quot;hljs-title function_&quot;&gt;toFixedFix&lt;/span&gt;(n, prec) : &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;round&lt;/span&gt;(n)).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (s[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;) {\n        s[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = s[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(?:\\d{3})+(?!\\d))/g&lt;/span&gt;, sep);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ((s[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] || &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt; prec) {\n        s[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = s[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] || &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n        s[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] += &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;(prec - s[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;0&apos;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; s.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(dec);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;hr&gt;\n\n&lt;p&gt;&lt;strong&gt;UPDATE 02/13/14&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;People have been reporting this doesn&apos;t work as expected, so I did a &lt;a href=&quot;http://jsfiddle.net/drewnoakes/xc3qh35z/&quot; rel=&quot;noreferrer&quot;&gt;JS Fiddle&lt;/a&gt; that includes automated tests.&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Update 26/11/2017&lt;/strong&gt;&lt;/p&gt;\n\n&lt;p&gt;Here&apos;s that fiddle as a Stack Snippet with slightly modified output:&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;number_format&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;number, decimals, dec_point, thousands_sep&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// http://kevin.vanzonneveld.net&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   original by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Michael White (http://getsprink.com)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Benjamin Lupton&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Allan Jensen (http://www.winternet.no)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +    revised by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Howard Yeend&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +    revised by: Luke Smith (http://lucassmith.name)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Diogo Resende&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Rival&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +      input by: Kheang Hok Chin (http://www.distantia.ca/)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: davook&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: Brett Zamir (http://brett-zamir.me)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +      input by: Jay Klehr&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: Brett Zamir (http://brett-zamir.me)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +      input by: Amir Habibi (http://www.residence-mixte.com/)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +     bugfix by: Brett Zamir (http://brett-zamir.me)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: Theriault&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// +   improved by: Drew Noakes&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 1: number_format(1234.56);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 1: &apos;1,235&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 2: number_format(1234.56, 2, &apos;,&apos;, &apos; &apos;);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 2: &apos;1 234,56&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 3: number_format(1234.5678, 2, &apos;.&apos;, &apos;&apos;);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 3: &apos;1234.57&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 4: number_format(67, 2, &apos;,&apos;, &apos;.&apos;);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 4: &apos;67,00&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 5: number_format(1000);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 5: &apos;1,000&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 6: number_format(67.311, 2);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 6: &apos;67.31&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 7: number_format(1000.55, 1);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 7: &apos;1,000.6&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 8: number_format(67000, 5, &apos;,&apos;, &apos;.&apos;);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 8: &apos;67.000,00000&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     example 9: number_format(0.9, 0);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *     returns 9: &apos;1&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    example 10: number_format(&apos;1.20&apos;, 2);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    returns 10: &apos;1.20&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    example 11: number_format(&apos;1.20&apos;, 4);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    returns 11: &apos;1.2000&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    example 12: number_format(&apos;1.2000&apos;, 3);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// *    returns 12: &apos;1.200&apos;&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; n = !&lt;span class=&quot;hljs-built_in&quot;&gt;isFinite&lt;/span&gt;(+number) ? &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; : +number, \n        prec = !&lt;span class=&quot;hljs-built_in&quot;&gt;isFinite&lt;/span&gt;(+decimals) ? &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; : &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;abs&lt;/span&gt;(decimals),\n        sep = (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; thousands_sep === &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;) ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt; : thousands_sep,\n        dec = (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; dec_point === &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;) ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; : dec_point,\n        toFixedFix = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;n, prec&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-comment&quot;&gt;// Fix for IE parseFloat(0.55).toFixed(0) = 0;&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; k = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;pow&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;, prec);\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;round&lt;/span&gt;(n * k) / k;\n        },\n        s = (prec ? &lt;span class=&quot;hljs-title function_&quot;&gt;toFixedFix&lt;/span&gt;(n, prec) : &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;round&lt;/span&gt;(n)).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (s[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;) {\n        s[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = s[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(?:\\d{3})+(?!\\d))/g&lt;/span&gt;, sep);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ((s[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] || &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;lt; prec) {\n        s[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] = s[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] || &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n        s[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] += &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;(prec - s[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;0&apos;&lt;/span&gt;);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; s.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(dec);\n}\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; exampleNumber = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;expected, number, decimals, dec_point, thousands_sep&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; actual = &lt;span class=&quot;hljs-title function_&quot;&gt;number_format&lt;/span&gt;(number, decimals, dec_point, thousands_sep);\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;Test case &apos;&lt;/span&gt; + exampleNumber + &lt;span class=&quot;hljs-string&quot;&gt;&apos;: &apos;&lt;/span&gt; +\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;(decimals: &apos;&lt;/span&gt; + (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; decimals === &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;(default)&apos;&lt;/span&gt; : decimals) +\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;, dec_point: &quot;&apos;&lt;/span&gt; + (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; dec_point === &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;(default)&apos;&lt;/span&gt; : dec_point) + &lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;&apos;&lt;/span&gt; +\n        &lt;span class=&quot;hljs-string&quot;&gt;&apos;, thousands_sep: &quot;&apos;&lt;/span&gt; + (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; thousands_sep === &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;(default)&apos;&lt;/span&gt; : thousands_sep) + &lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;)&apos;&lt;/span&gt;\n    );\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;  =&amp;gt; &apos;&lt;/span&gt; + (actual === expected ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;Passed&apos;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;FAILED&apos;&lt;/span&gt;) + &lt;span class=&quot;hljs-string&quot;&gt;&apos;, got &quot;&apos;&lt;/span&gt; + actual + &lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;, expected &quot;&apos;&lt;/span&gt; + expected + &lt;span class=&quot;hljs-string&quot;&gt;&apos;&quot;.&apos;&lt;/span&gt;);\n    exampleNumber++;\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1,235&apos;&lt;/span&gt;,    &lt;span class=&quot;hljs-number&quot;&gt;1234.56&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1 234,56&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1234.56&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1234.57&apos;&lt;/span&gt;,  &lt;span class=&quot;hljs-number&quot;&gt;1234.5678&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;67,00&apos;&lt;/span&gt;,    &lt;span class=&quot;hljs-number&quot;&gt;67&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1,000&apos;&lt;/span&gt;,    &lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;67.31&apos;&lt;/span&gt;,    &lt;span class=&quot;hljs-number&quot;&gt;67.311&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1,000.6&apos;&lt;/span&gt;,  &lt;span class=&quot;hljs-number&quot;&gt;1000.55&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;67.000,00000&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;67000&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1&apos;&lt;/span&gt;,        &lt;span class=&quot;hljs-number&quot;&gt;0.9&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1.20&apos;&lt;/span&gt;,     &lt;span class=&quot;hljs-string&quot;&gt;&apos;1.20&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1.2000&apos;&lt;/span&gt;,   &lt;span class=&quot;hljs-string&quot;&gt;&apos;1.20&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;);\n&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1.200&apos;&lt;/span&gt;,    &lt;span class=&quot;hljs-string&quot;&gt;&apos;1.2000&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-css lang-css s-code-block&quot;&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.as-console-wrapper&lt;/span&gt; {\n  &lt;span class=&quot;hljs-attribute&quot;&gt;max-height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;100%&lt;/span&gt; &lt;span class=&quot;hljs-meta&quot;&gt;!important&lt;/span&gt;;\n}&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif5&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;This is a variation of @mikez302&apos;s answer, but modified to support numbers with decimals (per @neu-rah&apos;s feedback that numberWithCommas(12345.6789) -&amp;gt; &quot;12,345.6,789&quot; instead of &quot;12,345.6789&quot;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;numberWithCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;n&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; parts=n.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;) + (parts[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] ? &lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt; + parts[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] : &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;formatNumber&lt;/span&gt; (num) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; num.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/(\\d)(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;$1,&quot;&lt;/span&gt;)\n}\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNumber&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2665&lt;/span&gt;));      &lt;span class=&quot;hljs-comment&quot;&gt;// 2,665&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNumber&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;102665&lt;/span&gt;));    &lt;span class=&quot;hljs-comment&quot;&gt;// 102,665&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNumber&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;111102665&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// 111,102,665&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;&lt;strong&gt;Using Regular expression&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;toCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;);\n}\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;toCommas&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;123456789&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// 123,456,789&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;toCommas&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1234567890&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// 1,234,567,890&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;toCommas&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1234&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// 1,234&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;&lt;strong&gt;Using toLocaleString()&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; number = &lt;span class=&quot;hljs-number&quot;&gt;123456.789&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// request a currency format&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(number.&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;de-DE&apos;&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;currency&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;currency&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;EUR&apos;&lt;/span&gt; }));\n&lt;span class=&quot;hljs-comment&quot;&gt;//  123.456,79 &lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// the Japanese yen doesn&apos;t use a minor unit&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(number.&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;ja-JP&apos;&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;currency&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;currency&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;JPY&apos;&lt;/span&gt; }))\n&lt;span class=&quot;hljs-comment&quot;&gt;//  123,457&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// limit to three significant digits&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(number.&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;en-IN&apos;&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;maximumSignificantDigits&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; }));\n&lt;span class=&quot;hljs-comment&quot;&gt;//  1,23,000&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;ref &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString&quot; rel=&quot;noreferrer&quot;&gt;MDN:Number.prototype.toLocaleString()&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Using Intl.NumberFormat()&lt;/strong&gt;&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; number = &lt;span class=&quot;hljs-number&quot;&gt;123456.789&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;de-DE&apos;&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;currency&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;currency&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;EUR&apos;&lt;/span&gt; }).&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(number));\n&lt;span class=&quot;hljs-comment&quot;&gt;// expected output: &quot;123.456,79 &quot;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// the Japanese yen doesn&apos;t use a minor unit&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;ja-JP&apos;&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;currency&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;currency&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;JPY&apos;&lt;/span&gt; }).&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(number));\n&lt;span class=&quot;hljs-comment&quot;&gt;// expected output: &quot;123,457&quot;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// limit to three significant digits&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;en-IN&apos;&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;maximumSignificantDigits&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; }).&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(number));\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// expected output: &quot;1,23,000&quot;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;ref &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat&quot; rel=&quot;noreferrer&quot;&gt;Intl.NumberFormat&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;DEMO AT HERE&lt;/strong&gt;\n\n\n&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;false&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;\n  &lt;span class=&quot;hljs-comment&quot;&gt;// Using Regular expression&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;toCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;value&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;);\n  }\n\n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;commas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; num1 = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;myform&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;number1&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Using Regular expression&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;result1&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;toCommas&lt;/span&gt;(&lt;span class=&quot;hljs-built_in&quot;&gt;parseInt&lt;/span&gt;(num1));\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Using toLocaleString()&lt;/span&gt;\n\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;result2&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; = &lt;span class=&quot;hljs-built_in&quot;&gt;parseInt&lt;/span&gt;(num1).&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;ja-JP&apos;&lt;/span&gt;, {\n      &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;currency&apos;&lt;/span&gt;,\n      &lt;span class=&quot;hljs-attr&quot;&gt;currency&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;JPY&apos;&lt;/span&gt;\n    });\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Using Intl.NumberFormat()&lt;/span&gt;\n    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;result3&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;ja-JP&apos;&lt;/span&gt;, {\n      &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;currency&apos;&lt;/span&gt;,\n      &lt;span class=&quot;hljs-attr&quot;&gt;currency&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;JPY&apos;&lt;/span&gt;\n    }).&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(num1);\n  }\n&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;FORM&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;NAME&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;myform&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;INPUT&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;TYPE&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;NAME&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;number1&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;VALUE&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;123456789&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;INPUT&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;TYPE&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;NAME&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;button&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;Value&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;=&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onClick&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;commas()&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;Using Regular expression\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;INPUT&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;TYPE&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;ID&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;result1&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;NAME&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;result1&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;VALUE&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;Using toLocaleString()\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;INPUT&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;TYPE&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;ID&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;result2&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;NAME&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;result2&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;VALUE&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;Using Intl.NumberFormat()\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;INPUT&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;TYPE&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;ID&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;result3&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;NAME&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;result3&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;VALUE&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;FORM&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif6&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;strong&gt;Performance&lt;/strong&gt; &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://i.stack.imgur.com/K9gnJ.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/K9gnJ.png&quot; alt=&quot;Performance&quot;&gt;&lt;/a&gt;\n&lt;a href=&quot;http://jsben.ch/sifRd&quot; rel=&quot;noreferrer&quot;&gt;http://jsben.ch/sifRd&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat&quot; rel=&quot;noreferrer&quot;&gt;Intl.NumberFormat&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Native JS function. Supported by IE11, Edge, latest Safari, Chrome, Firefox, Opera, Safari on iOS and Chrome on Android.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; number = &lt;span class=&quot;hljs-number&quot;&gt;3500&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(number));\n&lt;span class=&quot;hljs-comment&quot;&gt;//  &apos;3,500&apos; if in US English locale&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I am quite impressed by the number of answers this question has got. I like the answer by &lt;em&gt;uKolka&lt;/em&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;n.&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;()\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;But unfortunately, in some locales like Spanish, it does not work (IMHO) as expected for numbers below 10,000:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;ES-es&apos;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Gives &lt;code&gt;1000&lt;/code&gt; and not &lt;code&gt;1.000&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;See &lt;a href=&quot;https://stackoverflow.com/questions/57628055/tolocalestring-not-working-on-numbers-less-than-10000-in-all-browsers&quot;&gt;toLocaleString not working on numbers less than 10000 in all browsers&lt;/a&gt; to know why.&lt;/p&gt;\n\n&lt;p&gt;So I had to use the answer by &lt;em&gt;Elias Zamaria&lt;/em&gt; choosing the right thousands separator character:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;n.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;))\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This one works well as a one-liner for both locales that use &lt;code&gt;,&lt;/code&gt; or &lt;code&gt;.&lt;/code&gt; as the thousands separator and starts working from 1,000 in all cases.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;))\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Gives &lt;code&gt;1.000&lt;/code&gt; with a Spanish locale context.&lt;/p&gt;\n\n&lt;p&gt;Should you want to have absolute control over the way a number is formatted, you may also try the following:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; number   = &lt;span class=&quot;hljs-number&quot;&gt;1234.567&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; decimals = &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; decpoint = &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// Or Number(0.1).toLocaleString().substring(1, 2)&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; thousand = &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// Or Number(10000).toLocaleString().substring(2, 3)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; n = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;abs&lt;/span&gt;(number).&lt;span class=&quot;hljs-title function_&quot;&gt;toFixed&lt;/span&gt;(decimals).&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)\nn[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = n[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;reverse&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;c, i, a&lt;/span&gt;) =&amp;gt;&lt;/span&gt;\n  i &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; i &amp;lt; a.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &amp;amp;&amp;amp; i % &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; ? c + thousand : c\n).&lt;span class=&quot;hljs-title function_&quot;&gt;reverse&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;)\n&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; final = (&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;sign&lt;/span&gt;(number) &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;) + n.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(decpoint)\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(final)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Gives &lt;code&gt;1,234.57&lt;/code&gt;.&lt;/p&gt;\n\n&lt;p&gt;This one does not need a regular expression. It works by adjusting the number to the desired amount of decimals with &lt;code&gt;toFixed&lt;/code&gt; first, then dividing it around the decimal point &lt;code&gt;.&lt;/code&gt; if there is one. The left side is then turned into an array of digits which is reversed. Then a thousands separator is added every three digits from the start and the result reversed again. The final result is the union of the two parts. The sign of the input number is removed with &lt;code&gt;Math.abs&lt;/code&gt; first and then put back if necessary.&lt;/p&gt;\n\n&lt;p&gt;It is not a one-liner but not much longer and easily turned into a function. Variables have been added for clarity, but those may be substituted by their desired values if known in advance. You may use the expressions that use &lt;code&gt;toLocaleString&lt;/code&gt; as a way to find out the right characters for the decimal point and the thousands separator for the current locale (bear in mind that those require a more modern Javascript.)&lt;/p&gt;\n    ","\n&lt;p&gt;Thanks to everyone for their replies. I have built off of some of the answers to make a more &quot;one-size-fits-all&quot; solution. &lt;/p&gt;\n\n&lt;p&gt;The first snippet adds a function that mimics &lt;a href=&quot;http://en.wikipedia.org/wiki/PHP&quot;&gt;PHP&lt;/a&gt;&apos;s &lt;code&gt;number_format()&lt;/code&gt; to the Number prototype. If I am formatting a number, I usually want decimal places so the function takes in the number of decimal places to show. Some countries use commas as the decimal and decimals as the thousands separator so the function allows these separators to be set.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Number&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;numberFormat&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;decimals, dec_point, thousands_sep&lt;/span&gt;) {\n    dec_point = &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; dec_point !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; ? dec_point : &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;;\n    thousands_sep = &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; thousands_sep !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; ? thousands_sep : &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; parts = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;toFixed&lt;/span&gt;(decimals).&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n    parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, thousands_sep);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; parts.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(dec_point);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;You would use this as follows:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; foo = &lt;span class=&quot;hljs-number&quot;&gt;5000&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(foo.&lt;span class=&quot;hljs-title function_&quot;&gt;numberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// us format: 5,000.00&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(foo.&lt;span class=&quot;hljs-title function_&quot;&gt;numberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// european format: 5.000,00&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I found that I often needed to get the number back for math operations, but parseFloat converts 5,000 to 5, simply taking the first sequence of integer values. So I created my own float conversion function and added it to the String prototype.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;getFloat&lt;/span&gt; = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;dec_point, thousands_sep&lt;/span&gt;) {\n    dec_point = &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; dec_point !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; ? dec_point : &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;;\n    thousands_sep = &lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; thousands_sep !== &lt;span class=&quot;hljs-string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; ? thousands_sep : &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; parts = &lt;span class=&quot;hljs-variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(dec_point);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; re = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;[&quot;&lt;/span&gt; + thousands_sep + &lt;span class=&quot;hljs-string&quot;&gt;&quot;]&quot;&lt;/span&gt;);\n    parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(re, &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-built_in&quot;&gt;parseFloat&lt;/span&gt;(parts.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(dec_point));\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Now you can use both functions as follows:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; foo = &lt;span class=&quot;hljs-number&quot;&gt;5000&lt;/span&gt;;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; fooString = foo.&lt;span class=&quot;hljs-title function_&quot;&gt;numberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// The string 5,000.00&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; fooFloat = fooString.&lt;span class=&quot;hljs-title function_&quot;&gt;getFloat&lt;/span&gt;(); &lt;span class=&quot;hljs-comment&quot;&gt;// The number 5000;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;((fooString.&lt;span class=&quot;hljs-title function_&quot;&gt;getFloat&lt;/span&gt;() + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;numberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// The string 5,001.00&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;I think this is the shortest regular expression that does it:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;/\\&lt;span class=&quot;hljs-title function_&quot;&gt;B&lt;/span&gt;(?=(\\d{&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;})+\\b)/g\n\n&lt;span class=&quot;hljs-string&quot;&gt;&quot;123456&quot;&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+\\b)/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I checked it on a few numbers and it worked.&lt;/p&gt;\n    ","\n&lt;p&gt;&lt;code&gt;Number.prototype.toLocaleString()&lt;/code&gt; would have been awesome if it was provided natively by all browsers &lt;em&gt;(Safari)&lt;/em&gt;. &lt;/p&gt;\n\n&lt;p&gt;I checked all other answers but noone seemed to polyfill it. Here is a poc towards that, which is actually a combination of first two answers; if &lt;code&gt;toLocaleString&lt;/code&gt; works it uses it, if it doesn&apos;t it uses a custom function.&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;false&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; putThousandsSeparators;\n\nputThousandsSeparators = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;value, sep&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (sep == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt;) {\n    sep = &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;;\n  }\n  &lt;span class=&quot;hljs-comment&quot;&gt;// check if it needs formatting&lt;/span&gt;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (value.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;() === value.&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;()) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// split decimals&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; parts = value.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)\n    &lt;span class=&quot;hljs-comment&quot;&gt;// format whole numbers&lt;/span&gt;\n    parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, sep);\n    &lt;span class=&quot;hljs-comment&quot;&gt;// put them back together&lt;/span&gt;\n    value = parts[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] ? parts.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;) : parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n  } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {\n    value = value.&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;();\n  }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value;\n};\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;alert&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;putThousandsSeparators&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1234567.890&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif7&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;The thousands separator can be inserted in an international-friendly manner using the browser&apos;s &lt;code&gt;Intl&lt;/code&gt; object:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1234&lt;/span&gt;);\n&lt;span class=&quot;hljs-comment&quot;&gt;// returns &quot;1,234&quot; if the user&apos;s locale is en_US, for example&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;See &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat&quot;&gt;MDN&apos;s article on NumberFormat&lt;/a&gt; for more, you can specify locale behavior or default to the user&apos;s. This is a little more foolproof because it respects local differences; many countries use periods to separate digits while a comma denotes the decimals.&lt;/p&gt;\n\n&lt;p&gt;Intl.NumberFormat isn&apos;t available in all browsers yet, but it works in latest Chrome, Opera, &amp;amp; IE. Firefox&apos;s next release should support it. Webkit doesn&apos;t seem to have a timeline for implementation.&lt;/p&gt;\n    ","\n&lt;p&gt;You can either use this procedure to format your currency needing.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; nf = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;en-US&apos;&lt;/span&gt;, {\n  &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;currency&apos;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;currency&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;USD&apos;&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;minimumFractionDigits&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,\n  &lt;span class=&quot;hljs-attr&quot;&gt;maximumFractionDigits&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;\n});\nnf.&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;123456.789&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// $123,456.79&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;For more info you can access this link.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=&quot;https://www.justinmccandless.com/post/formatting-currency-in-javascript/&quot; rel=&quot;noreferrer&quot;&gt;https://www.justinmccandless.com/post/formatting-currency-in-javascript/&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;if you are dealing with currency values and formatting a lot then it might be worth to add tiny &lt;a href=&quot;http://josscrowcroft.github.io/accounting.js/&quot;&gt;accounting.js&lt;/a&gt; which handles lot of edge cases and localization:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Default usage:&lt;/span&gt;\naccounting.&lt;span class=&quot;hljs-title function_&quot;&gt;formatMoney&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;12345678&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// $12,345,678.00&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// European formatting (custom symbol and separators), could also use options object as second param:&lt;/span&gt;\naccounting.&lt;span class=&quot;hljs-title function_&quot;&gt;formatMoney&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;4999.99&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;// 4.999,99&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Negative values are formatted nicely, too:&lt;/span&gt;\naccounting.&lt;span class=&quot;hljs-title function_&quot;&gt;formatMoney&lt;/span&gt;(-&lt;span class=&quot;hljs-number&quot;&gt;500000&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot; &quot;&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;); &lt;span class=&quot;hljs-comment&quot;&gt;//  -500,000&lt;/span&gt;\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Simple `format` string allows control of symbol position [%v = value, %s = symbol]:&lt;/span&gt;\naccounting.&lt;span class=&quot;hljs-title function_&quot;&gt;formatMoney&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;5318008&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;symbol&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;GBP&quot;&lt;/span&gt;,  &lt;span class=&quot;hljs-attr&quot;&gt;format&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;%v %s&quot;&lt;/span&gt; }); &lt;span class=&quot;hljs-comment&quot;&gt;// 5,318,008.00 GBP&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; number = &lt;span class=&quot;hljs-number&quot;&gt;2561556862056.12&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(number));\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;This is the easiest way I found&lt;/p&gt;\n    ","\n&lt;p&gt;The following code uses char scan, so there&apos;s no regex. &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;commafy&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt; num&lt;/span&gt;){\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; parts = (&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;+(num&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;?-&lt;span class=&quot;hljs-attr&quot;&gt;num&lt;/span&gt;:num)).&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;), s=parts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;], L, i=L= s.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;, o=&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;;\n  &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt;(i--){ o = (i===&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;?&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;:((L-i)%&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;?&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;)) \n                  +s.&lt;span class=&quot;hljs-title function_&quot;&gt;charAt&lt;/span&gt;(i) +o }\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (num&amp;lt;&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;?&lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;:&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;) + o + (parts[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; + parts[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] : &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;); \n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;It shows promising performance: &lt;a href=&quot;http://jsperf.com/number-formatting-with-commas/5&quot; rel=&quot;noreferrer&quot;&gt;http://jsperf.com/number-formatting-with-commas/5&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;2015.4.26: Minor fix to resolve issue when num&amp;lt;0. See &lt;a href=&quot;https://jsfiddle.net/runsun/p5tqqvs3/&quot; rel=&quot;noreferrer&quot;&gt;https://jsfiddle.net/runsun/p5tqqvs3/&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Here&apos;s a simple function that inserts commas for thousand separators.  It uses array functions rather than a RegEx.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/**\n * Format a number as a string with commas separating the thousands.\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@param&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;num&lt;/span&gt; - The number to be formatted (e.g. 10000)\n * &lt;span class=&quot;hljs-doctag&quot;&gt;@return&lt;/span&gt; A string representing the formatted number (e.g. &quot;10,000&quot;)\n */&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; formatNumber = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;num&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; array = num.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; index = -&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (array.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; + index &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {\n        array.&lt;span class=&quot;hljs-title function_&quot;&gt;splice&lt;/span&gt;(index, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;);\n        &lt;span class=&quot;hljs-comment&quot;&gt;// Decrement by 4 since we just added another unit to the array.&lt;/span&gt;\n        index -= &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; array.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;);\n};\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;CodeSandbox link with examples: &lt;a href=&quot;https://codesandbox.io/s/p38k63w0vq&quot; rel=&quot;noreferrer&quot;&gt;https://codesandbox.io/s/p38k63w0vq&lt;/a&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;Use This code to handle currency format for india. Country code can be changed to handle other country currency.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; amount =&lt;span class=&quot;hljs-number&quot;&gt;350256.95&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; formatter = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;en-IN&apos;&lt;/span&gt;, {\n  &lt;span class=&quot;hljs-attr&quot;&gt;minimumFractionDigits&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,\n});\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// Use it.&lt;/span&gt;\n\nformatter.&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(amount);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;output:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;256.95&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;You can also use the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat&quot; rel=&quot;noreferrer&quot;&gt;Intl.NumberFormat&lt;/a&gt; constructor. Here is how you can do it. &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt; resultNumber = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;en-IN&apos;&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;maximumSignificantDigits&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; }).&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(yourNumber); \n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; formatNumber = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;&gt;number&lt;/span&gt;) {\n  &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; splitNum;\n  number = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;abs&lt;/span&gt;(number);\n  number = number.&lt;span class=&quot;hljs-title function_&quot;&gt;toFixed&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);\n  splitNum = number.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n  splitNum[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;] = splitNum[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;);\n  &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; splitNum.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;EDIT:\nThe function only work with positive number. for exmaple:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; number = -&lt;span class=&quot;hljs-number&quot;&gt;123123231232&lt;/span&gt;;\n&lt;span class=&quot;hljs-title function_&quot;&gt;formatNumber&lt;/span&gt;(number)\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Output: &quot;123,123,231,232&quot;&lt;/p&gt;\n\n&lt;p&gt;But to answer the question above &lt;code&gt;toLocaleString()&lt;/code&gt; method just solves the problem.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; number = &lt;span class=&quot;hljs-number&quot;&gt;123123231232&lt;/span&gt;;\n    number.&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;()\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Output: &quot;123,123,231,232&quot;&lt;/p&gt;\n\n&lt;p&gt;Cheer!&lt;/p&gt;\n    ","\n&lt;h3&gt;Universal, fast, accurate, simple function&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;Using RegEx (Fast &amp;amp; Accurate)&lt;/li&gt;\n&lt;li&gt;Support Numbers(Float/Integer)/String/Multiple numbers in a string&lt;/li&gt;\n&lt;li&gt;Smart well (Not grouping decimals - Compatible with different types of grouping)&lt;/li&gt;\n&lt;li&gt;Support all browsers specially &apos;Safari&apos; &amp;amp; &apos;IE&apos; &amp;amp; many older browsers&lt;/li&gt;\n&lt;li&gt;[Optional] Respecting non-English (&lt;strong&gt;Persian&lt;/strong&gt;/&lt;strong&gt;Arabic&lt;/strong&gt;) digits (+ Pre-fix)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h5&gt;TL;DR - Full version function (minified):&lt;/h5&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// num: Number/s (String/Number),&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// sep: Thousands separator (String) - Default: &apos;,&apos;&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// dec: Decimal separator (String) - Default: &apos;.&apos; (Just one char)&lt;/span&gt;\n&lt;span class=&quot;hljs-comment&quot;&gt;// u: Universal support for languages characters (String - RegEx character set / class) - Example: &apos;[\\\\d\\\\u0660-\\\\u0669\\\\u06f0-\\\\u06f9]&apos; (English/Persian/Arabic), Default: &apos;\\\\d&apos; (English)&lt;/span&gt;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;num,sep,dec,u&lt;/span&gt;){sep=sep||&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;;u=u||&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\\\d&apos;&lt;/span&gt;;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; num!=&lt;span class=&quot;hljs-string&quot;&gt;&apos;string&apos;&lt;/span&gt;){num=&lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(num);&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(dec&amp;amp;&amp;amp;dec!=&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)num=num.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;,dec);}&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; num.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\\\&apos;&lt;/span&gt;+(dec||&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)+u+&lt;span class=&quot;hljs-string&quot;&gt;&apos;+|&apos;&lt;/span&gt;+u+&lt;span class=&quot;hljs-string&quot;&gt;&apos;(?=(?:&apos;&lt;/span&gt;+u+&lt;span class=&quot;hljs-string&quot;&gt;&apos;{3})+(?!&apos;&lt;/span&gt;+u+&lt;span class=&quot;hljs-string&quot;&gt;&apos;))&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;g&apos;&lt;/span&gt;),&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;){&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;==&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;?a+&lt;span class=&quot;hljs-attr&quot;&gt;sep&lt;/span&gt;:a})}\n\ntext=&lt;span class=&quot;hljs-string&quot;&gt;&apos;100000000 English or Persian/Arabic / this is 123123123.123123123 with this -123123 and these 10 100 1000 123123/123123 (2000000) .33333 100.00 or any like 500000Kg&apos;&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000000.0012&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;10000000.0012&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// German&lt;/span&gt;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(text,&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;[\\\\d\\\\u0660-\\\\u0669\\\\u06f0-\\\\u06f9]&apos;&lt;/span&gt;)); &lt;span class=&quot;hljs-comment&quot;&gt;// Respect Persian/Arabic digits&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;oninput&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;document.getElementById(&apos;result&apos;).textContent=formatNums(this.value)&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;placeholder&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;Type a number here&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;result&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif8&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;h4&gt;Why NOT satisfied with other answers?&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString&quot; rel=&quot;noreferrer&quot;&gt;Number.prototype.toLocaleString()&lt;/a&gt; / &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat&quot; rel=&quot;noreferrer&quot;&gt;Intl.NumberFormat&lt;/a&gt;\n(Right answer)\n&lt;ul&gt;\n&lt;li&gt;If no well arguments, &lt;strong&gt;we can&apos;t expect same result&lt;/strong&gt;. Also with arguments options we still can&apos;t be sure what can be the result because it will use local settings and possible client modifications effect on it or the browser/device not support it.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;&amp;gt;~2016 browsers support&lt;/strong&gt; and still in 2021 some reports that in some cases like &lt;code&gt;Safari&lt;/code&gt; or &lt;code&gt;IE/Edge&lt;/code&gt; do not return as expected.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;toLocaleString()&lt;/code&gt; Work with numbers, &lt;code&gt;Intl.NumberFormat&lt;/code&gt; Work with String/Numbers; Strings will be/have to be parsed and also rounded if necessary, so:\n&lt;ul&gt;\n&lt;li&gt;If we already have a localized string with &lt;code&gt;non-English digits&lt;/code&gt; we have to replace numbers with the English one, then parse it, then use it again with the local options. (If it return what we expect)&lt;/li&gt;\n&lt;li&gt;Generally while parsing we cant expect not &lt;code&gt;missing decimal zeros&lt;/code&gt; or details in &lt;code&gt;big numbers&lt;/code&gt; or respecting &lt;code&gt;other languages numeral characters&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Decimal / Thousand separator characters can not be customized more than language options, except with post-fixings with replace() + RegEx again. &lt;em&gt;(For example in Persian usually we don&apos;t use the suggested Arabic comma and also sometime we use &lt;code&gt;&lt;/code&gt; Fraction/Division slash as decimal separator)&lt;/em&gt;&lt;/li&gt;\n&lt;li&gt;Slow performance in loops&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Not so good RegEx ways (Fastest &amp;amp; One-liner ways)\n&lt;ul&gt;\n&lt;li&gt;&lt;code&gt;/\\B(?=(\\d{3})+\\b)/&lt;/code&gt; it will group decimals too. &lt;code&gt;// 123,123.123,123 !!!&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;/(?&amp;lt;!\\.\\d+)\\B(?=(\\d{3})+\\b)/&lt;/code&gt; used &lt;strong&gt;look-behind&lt;/strong&gt; that not supported well yet. Please check:&lt;br&gt;\n&lt;a href=&quot;https://caniuse.com/js-regexp-lookbehind&quot; rel=&quot;noreferrer&quot;&gt;https://caniuse.com/js-regexp-lookbehind&lt;/a&gt;&lt;br&gt;\n&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp#browser_compatibility&quot; rel=&quot;noreferrer&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp#browser_compatibility&lt;/a&gt;&lt;br&gt;\nNote: Generally lookbehind can be against of original RegEx structure &lt;em&gt;(because of how the analyzer should work like do not buffer the raw behind as a parser)&lt;/em&gt; and actually it can make the performance seriously low (In this case ~30%). &lt;em&gt;I think it pushed inside over the time by requests.&lt;/em&gt;&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;/\\B(?=(?=\\d*\\.)(\\d{3})+(?!\\d))/&lt;/code&gt; just work with float numbers and ignore integers.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;.replace(/(?:[^.\\d]|^)\\d+/g,function(a){return a.replace(/\\B(?=(?:\\d{3})+\\b)/g,&apos;,&apos;);})&lt;/code&gt; &lt;strong&gt;(My old idea)&lt;/strong&gt; Using 2 RegEx. First one find the integer parts, second one put separator. Why 2 functions, when it can be mixed?&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;/(\\..*)$|(\\d)(?=(\\d{3})+(?!\\d))/g&lt;/code&gt; (Good idea by &lt;a href=&quot;https://stackoverflow.com/users/4490816/&quot;&gt;@djulien&lt;/a&gt; - i voted up) but when the RegEx is global, &lt;code&gt;(\\..*)$&lt;/code&gt; it can make a mistake even with a space in end.&lt;br&gt;\nAlso using capturing groups &lt;em&gt;(Example: &lt;code&gt;(\\d)&lt;/code&gt;)&lt;/em&gt; will make the performance low so if it possible, use non-capturing groups &lt;em&gt;(Example: &lt;code&gt;(?:\\d)&lt;/code&gt;)&lt;/em&gt; or if an statement already exist in our function let&apos;s mix it.&lt;br&gt;\nIn this case, not using capturing groups improve performance about ~20% and in case of &lt;code&gt;/\\B(?=(\\d{3})+\\b)/g&lt;/code&gt; vs &lt;code&gt;/\\B(?=(?:\\d{3})+\\b)/g&lt;/code&gt;, the second one is ~8% faster.&lt;br&gt;\nAbout regex performances:\n&lt;a href=&quot;https://i.stack.imgur.com/obD7I.png&quot; rel=&quot;noreferrer&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/obD7I.png&quot; alt=&quot;https://jsben.ch/HUmDA&quot;&gt;&lt;/a&gt;\n&lt;em&gt;Note: Sure different methods, browsers, hardware, system status, cases and even changes on ECMAScript will effect on result of checking performance. But some changes logically should effect result and i used this one just as visual example.&lt;/em&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Using library&apos;s like &lt;a href=&quot;https://github.com/adamwdraper/Numeral-js&quot; rel=&quot;noreferrer&quot;&gt;Numeral.js&lt;/a&gt; &lt;strong&gt;so much not necessary functions&lt;/strong&gt; for a simple task.&lt;/li&gt;\n&lt;li&gt;Heavy code / &lt;strong&gt;Not accurate&lt;/strong&gt; functions that used &lt;code&gt;.split(&apos;.&apos;)&lt;/code&gt; or &lt;code&gt;.toFixed()&lt;/code&gt; or &lt;code&gt;Math.floor()&lt;/code&gt; ...&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr&gt;\n&lt;h3&gt;Final result:&lt;/h3&gt;\n&lt;p&gt;There is no best of all and it should be chosen based on the need. My priority of sorting;&lt;/p&gt;\n&lt;ol&gt;\n&lt;li&gt;Compatibility&lt;/li&gt;\n&lt;li&gt;Capability&lt;/li&gt;\n&lt;li&gt;Universality&lt;/li&gt;\n&lt;li&gt;Ease of use&lt;/li&gt;\n&lt;li&gt;Performance&lt;/li&gt;\n&lt;/ol&gt;\n&lt;h4&gt;&lt;code&gt;toLocaleString()&lt;/code&gt; (Compatibility - Universality) [Native function]&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;If you have to change digits and grouping from English to another language&lt;/li&gt;\n&lt;li&gt;If you are not sure about your client language&lt;/li&gt;\n&lt;li&gt;If you don&apos;t need to have exact expected result&lt;/li&gt;\n&lt;li&gt;If you don&apos;t care about older version of Safari&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// 1000000.2301&lt;/span&gt;\n&lt;span class=&quot;hljs-built_in&quot;&gt;parseFloat&lt;/span&gt;(num) &lt;span class=&quot;hljs-comment&quot;&gt;// (Pre-fix) If the input is string&lt;/span&gt;\n    .&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;en-US&apos;&lt;/span&gt;, {\n        &lt;span class=&quot;hljs-attr&quot;&gt;useGrouping&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// (Default is true, here is just for show)&lt;/span&gt;\n    });\n&lt;span class=&quot;hljs-comment&quot;&gt;// 1,000,000.23&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Read more: &lt;a href=&quot;https://www.w3schools.com/jsref/jsref_tolocalestring_number.asp&quot; rel=&quot;noreferrer&quot;&gt;https://www.w3schools.com/jsref/jsref_tolocalestring_number.asp&lt;/a&gt;&lt;/p&gt;\n&lt;h4&gt;&lt;code&gt;Intl.NumberFormat()&lt;/code&gt; (Capability - Universality - Compatibility) [Native function]&lt;/h4&gt;\n&lt;p&gt;Almost same as &lt;code&gt;toLocaleString()&lt;/code&gt; +&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Great capability of supporting currency, units, etc... any language &lt;strong&gt;(Modern browsers)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// 1000000.2301&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;en-US&apos;&lt;/span&gt;, { &lt;span class=&quot;hljs-comment&quot;&gt;// It can be &apos;fa-IR&apos; : Farsi - Iran&lt;/span&gt;\n    &lt;span class=&quot;hljs-attr&quot;&gt;numberingSystem&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;arab&apos;&lt;/span&gt;\n}).&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(num)\n&lt;span class=&quot;hljs-comment&quot;&gt;// &lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;Read more: &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat&quot; rel=&quot;noreferrer&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;With these much options of the native functions, we still can not expect:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Exact result (+ Not parsing the input / Not rounding / Not converting big numbers)&lt;/li&gt;\n&lt;li&gt;Accepting other languages digits as input&lt;/li&gt;\n&lt;li&gt;Customizing separators&lt;/li&gt;\n&lt;li&gt;Trusting browsers support&lt;/li&gt;\n&lt;li&gt;Performance&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;So you maybe need a function like any of these:&lt;/p&gt;\n&lt;h4&gt;&lt;code&gt;formatNums()&lt;/code&gt; (Compatibility - Ease of use)&lt;/h4&gt;\n&lt;p&gt;&lt;strong&gt;Full version (Capability)&lt;/strong&gt; &lt;em&gt;(Not faster than toLocaleString)&lt;/em&gt; - Explain:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;num, sep, dec, u&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Setting defaults&lt;/span&gt;\n    sep = sep || &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Seperator&lt;/span&gt;\n    u = u || &lt;span class=&quot;hljs-string&quot;&gt;&apos;\\\\d&apos;&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Universal character set \\d: 0-9 (English)&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;// Mixing of Handeling numbers when the decimal character should be changed + Being sure the input is string&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; num != &lt;span class=&quot;hljs-string&quot;&gt;&apos;string&apos;&lt;/span&gt;) {\n        num = &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(num);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (dec &amp;amp;&amp;amp; dec != &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;) num = num.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;, dec); &lt;span class=&quot;hljs-comment&quot;&gt;// Replacing sure decimal character with the custom&lt;/span&gt;\n    }\n    &lt;span class=&quot;hljs-comment&quot;&gt;//&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; num.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\\\&apos;&lt;/span&gt; + (dec || &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;) + u + &lt;span class=&quot;hljs-string&quot;&gt;&apos;+|&apos;&lt;/span&gt; + u + &lt;span class=&quot;hljs-string&quot;&gt;&apos;(?=(?:&apos;&lt;/span&gt; + u + &lt;span class=&quot;hljs-string&quot;&gt;&apos;{3})+(?!&apos;&lt;/span&gt; + u + &lt;span class=&quot;hljs-string&quot;&gt;&apos;))&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&apos;g&apos;&lt;/span&gt;),\n        &lt;span class=&quot;hljs-comment&quot;&gt;// The RegEx will be like /\\.\\d+|\\d(?=(?:\\d{3})+(?!\\d))/g if not be customized &lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// RegEx explain:&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// 1) \\.\\d+  :  First try to get any part that started with a dot and followed by any much of English digits, one or more (For ignoring it later)&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// 2) |  :  Or&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// 3) \\d  :  Get any 1 char digit&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// 3.1) (?=...)  :  That the next of that should be&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// 3.2) (?:\\d{3})  :  3 length digits&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// 3.2.1) +  :  One or more of the group&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;// 3.3) (?!\\d)  :  ...till any place that there is no digits&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;) { &lt;span class=&quot;hljs-comment&quot;&gt;// Any match can be the decimal part or the integer part so lets check it&lt;/span&gt;\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; == &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; ? a + sep : a &lt;span class=&quot;hljs-comment&quot;&gt;// If the match is one character, it is from the grouping part as item (3) in Regex explain so add the seperator next of it, if not, ignore it and return it back.&lt;/span&gt;\n        })\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;num,sep,dec,u&lt;/span&gt;) {\n    sep=sep||&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;;\n    u=u||&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\\\d&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;typeof&lt;/span&gt; num!=&lt;span class=&quot;hljs-string&quot;&gt;&apos;string&apos;&lt;/span&gt;) {\n        num=&lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(num);\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;( dec &amp;amp;&amp;amp; dec!=&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;) num=num.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;,dec);\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; num.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;\\\\&apos;&lt;/span&gt;+(dec||&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)+u+&lt;span class=&quot;hljs-string&quot;&gt;&apos;+|&apos;&lt;/span&gt;+u+&lt;span class=&quot;hljs-string&quot;&gt;&apos;(?=(?:&apos;&lt;/span&gt;+u+&lt;span class=&quot;hljs-string&quot;&gt;&apos;{3})+(?!&apos;&lt;/span&gt;+u+&lt;span class=&quot;hljs-string&quot;&gt;&apos;))&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;g&apos;&lt;/span&gt;),&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;) {&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;==&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; ? a+sep : a})\n}\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000000.2301&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100.2301&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(-&lt;span class=&quot;hljs-number&quot;&gt;2000.2301&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;123123123&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos; , &apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;0000.0000&apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;5000000.00&apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;5000000,00&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;5000000.1234&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;/&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;/&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;[\\\\d\\\\u0660-\\\\u0669\\\\u06f0-\\\\u06f9]&apos;&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif9&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Play with the examples here:\n&lt;a href=&quot;https://jsfiddle.net/PAPIONbit/198xL3te/&quot; rel=&quot;noreferrer&quot;&gt;https://jsfiddle.net/PAPIONbit/198xL3te/&lt;/a&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Light version (Performance)&lt;/strong&gt; &lt;em&gt;(~30% faster than toLocaleString)&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;num,sep&lt;/span&gt;) {\n    sep=sep||&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(num).&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\.\\d+|\\d(?=(?:\\d{3})+(?!\\d))/g&lt;/span&gt;,\n        &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; a.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;==&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;?a+&lt;span class=&quot;hljs-attr&quot;&gt;sep&lt;/span&gt;:a\n        }\n    );\n}\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1000000.2301&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;100.2301&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(-&lt;span class=&quot;hljs-number&quot;&gt;2000.2301&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;123123123&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos; &apos;&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif10&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Check the RegEx (Without the necessary function) : &lt;a href=&quot;https://regexr.com/66ott&quot; rel=&quot;noreferrer&quot;&gt;https://regexr.com/66ott&lt;/a&gt;&lt;/p&gt;\n&lt;h4&gt;&lt;code&gt;(num+&apos;&apos;).replace(/\\B(?=(?:\\d{3})+\\b)/g,&apos;,&apos;);&lt;/code&gt; (Performance - Compatibility)&lt;/h4&gt;\n&lt;p&gt;Best choose if The input is Specified / Predefined. (Like usual prices that sure will not have more than 3 decimals)\n&lt;em&gt;(~65% faster than toLocaleString)&lt;/em&gt;&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;true&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;num=&lt;span class=&quot;hljs-number&quot;&gt;1000000&lt;/span&gt;;\nstr=&lt;span class=&quot;hljs-string&quot;&gt;&apos;123123.100&apos;&lt;/span&gt;;\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;((num+&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(?:\\d{3})+\\b)/g&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;));\n&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(str.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(?:\\d{3})+\\b)/g&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;));&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif11&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;+&lt;/strong&gt;&lt;/p&gt;\n&lt;h5&gt;For Persian/Arabic local clients:&lt;/h5&gt;\n&lt;p&gt;If your client going to use Persian/Arabic numbers for input as what is usual in Iran, I think the best way is instead of keeping the original characters, convert them to English before you deal with, to you can calculate it.&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// &lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;toEnNum&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;n&lt;/span&gt;) { &lt;span class=&quot;hljs-comment&quot;&gt;// Replacing Persian/Arabic numbers character with English&lt;/span&gt;\n    n.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/[\\u0660-\\u0669\\u06f0-\\u06f9]/g&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// RegEx unicode range Persian/Arabic numbers char&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;c&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; c.&lt;span class=&quot;hljs-title function_&quot;&gt;charCodeAt&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) &amp;amp; &lt;span class=&quot;hljs-number&quot;&gt;0xf&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Replace the char with real number by getting the binary index and breaking to lowest using 15&lt;/span&gt;\n        }\n    );\n}\n&lt;span class=&quot;hljs-comment&quot;&gt;// 1234567890&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;And for still showing them as original looking there is 2 ways:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;CSS&lt;/strong&gt; Using Persian/Arabic fonts with local digits (My choose)&lt;/li&gt;\n&lt;li&gt;Convert the result back with &lt;code&gt;Intl.NumberFormat&lt;/code&gt; or a function like:  &lt;a href=&quot;https://stackoverflow.com/a/13787021/7514010&quot;&gt;https://stackoverflow.com/a/13787021/7514010&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr&gt;\n&lt;p&gt;&lt;strong&gt;My Old-school function&lt;/strong&gt; on this post: &lt;em&gt;(~15% Faster than toLocalString)&lt;/em&gt;&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// 10000000.0012&lt;/span&gt;\n&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;formatNums&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;n, s&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; s = s || &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(n).\n    &lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/(?:^|[^.\\d])\\d+/g&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// First this RegEx take just integer parts&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;n&lt;/span&gt;) {\n            &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; n.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/\\B(?=(?:\\d{3})+\\b)/g&lt;/span&gt;, s);\n        })\n}\n&lt;span class=&quot;hljs-comment&quot;&gt;// 10,000,000.0012&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;My answer is the only answer that completely replaces jQuery with a much more sensible alternative:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;$&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;dollarAmount&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; locale = &lt;span class=&quot;hljs-string&quot;&gt;&apos;en-US&apos;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; options = { &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;currency&apos;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;currency&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&apos;USD&apos;&lt;/span&gt; };\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(locale, options).&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(dollarAmount);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;This solution not only adds commas, but it also rounds to the nearest penny in the event that you input an amount like &lt;code&gt;$(1000.9999)&lt;/code&gt; you&apos;ll get $1,001.00. Additionally, the value you input can safely be a number or a string; it doesn&apos;t matter.&lt;/p&gt;\n\n&lt;p&gt;If you&apos;re dealing with money, but don&apos;t want a leading dollar sign shown on the amount, you can also add this function, which uses the previous function but removes the &lt;code&gt;$&lt;/code&gt;:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;no$&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;dollarAmount&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; $(dollarAmount).&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;$&apos;&lt;/span&gt;,&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;If you&apos;re &lt;strong&gt;not&lt;/strong&gt; dealing with money, and have varying decimal formatting requirements, here&apos;s a more versatile function:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;addCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;number, minDecimalPlaces = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, maxDecimalPlaces = &lt;span class=&quot;hljs-built_in&quot;&gt;Math&lt;/span&gt;.max(&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;,minDecimalPlaces)&lt;/span&gt;)\n{\n    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; options = {};\n    options.&lt;span class=&quot;hljs-property&quot;&gt;maximumFractionDigits&lt;/span&gt; = maxDecimalPlaces;\n    options.&lt;span class=&quot;hljs-property&quot;&gt;minimumFractionDigits&lt;/span&gt; = minDecimalPlaces;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;NumberFormat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;en-US&apos;&lt;/span&gt;,options).&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(number);\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Oh, and by the way, the fact that this code does not work in some old version of Internet Explorer is completely intentional. I try to break IE anytime that I can catch it not supporting modern standards.&lt;/p&gt;\n\n&lt;p&gt;Please remember that excessive praise, in the comment section, is considered off-topic. Instead, just shower me with up-votes.&lt;/p&gt;\n    ","\n&lt;p&gt;I Wrote this one before stumbling on this post. No regex and you can actually understand the code.&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;$(&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;&lt;/span&gt;){\n  \n  &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;insertCommas&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;s&lt;/span&gt;) {\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// get stuff before the dot&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; d = s.&lt;span class=&quot;hljs-title function_&quot;&gt;indexOf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;);\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; s2 = d === -&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; ? s : s.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, d);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// insert commas every 3 digits from the right&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = s2.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;; i &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; i -= &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;)\n      s2 = s2.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, i) + &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt; + s2.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(i);\n\n    &lt;span class=&quot;hljs-comment&quot;&gt;// append fractional part&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (d !== -&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;)\n      s2 += s.&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(d);\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; s2;\n\n  }\n  \n  \n  $(&lt;span class=&quot;hljs-string&quot;&gt;&apos;#theDudeAbides&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;text&lt;/span&gt;( &lt;span class=&quot;hljs-title function_&quot;&gt;insertCommas&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;1234567.89012&apos;&lt;/span&gt; ) );\n  \n  \n});&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;\n\n&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;theDudeAbides&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif12&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n    ","\n&lt;p&gt;For anyone who likes 1-liners and a single regex, but &lt;em&gt;doesn&apos;t&lt;/em&gt; want to use split(), here is an enhanced version of the regex from other answers that handles (ignores) decimal places:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; formatted = (x+&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(&lt;span class=&quot;hljs-regexp&quot;&gt;/(\\..*)$|(\\d)(?=(\\d{3})+(?!\\d))/g&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;digit, fract&lt;/span&gt;) =&amp;gt;&lt;/span&gt; fract || digit + &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;);\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The regex &lt;em&gt;first&lt;/em&gt; matches a substring starting with a literal &quot;.&quot; and replaces it with itself (&quot;fract&quot;), and &lt;em&gt;then&lt;/em&gt; matches any digit followed by multiples of 3 digits and puts &quot;,&quot; after it.&lt;/p&gt;\n\n&lt;p&gt;For example, &lt;em&gt;x&lt;/em&gt; = 12345678.12345678 will give &lt;em&gt;formatted&lt;/em&gt; = &apos;12,345,678.12345678&apos;.&lt;/p&gt;\n    ","\n&lt;p&gt;Let me try to improve &lt;a href=&quot;https://stackoverflow.com/users/1286601/ukolka&quot; title=&quot;uKolka&quot;&gt;uKolka&lt;/a&gt;&apos;s &lt;a href=&quot;https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript/17663871#17663871&quot; title=&quot;answer&quot;&gt;answer&lt;/a&gt; and maybe help others save some time.&lt;/p&gt;\n\n&lt;p&gt;Use &lt;a href=&quot;http://numeraljs.com/&quot; rel=&quot;nofollow noreferrer&quot; title=&quot;Numeral.js&quot;&gt;Numeral.js&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;&lt;div class=&quot;snippet&quot; data-lang=&quot;js&quot; data-hide=&quot;false&quot; data-console=&quot;false&quot; data-babel=&quot;false&quot;&gt;\n&lt;div class=&quot;snippet-code&quot;&gt;\n&lt;pre class=&quot;snippet-code-js lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;body&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;textContent&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;numeral&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1234567&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;0,0&apos;&lt;/span&gt;);&lt;/code&gt;&lt;/pre&gt;\n&lt;pre class=&quot;snippet-code-html lang-html s-code-block&quot;&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;//cdnjs.cloudflare.com/ajax/libs/numeral.js/1.4.5/numeral.min.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\n&lt;div class=&quot;snippet-result&quot;&gt;&lt;div class=&quot;snippet-ctas&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn s-btn__primary&quot;&gt;&lt;span class=&quot;icon-play-white _hover&quot;&gt;&lt;/span&gt;&lt;span&gt; Run code snippet&lt;/span&gt;&lt;/button&gt;&lt;input class=&quot;copySnippet s-btn s-btn__filled&quot; type=&quot;button&quot; value=&quot;Copy snippet to answer&quot; style=&quot;display: none;&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;s-btn hideResults&quot; style=&quot;display: none;&quot;&gt;Hide results&lt;/button&gt;&lt;div class=&quot;popout-code&quot;&gt;&lt;a class=&quot;snippet-expand-link&quot;&gt;Expand snippet&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;snippet-result-code&quot; style=&quot;display: none;&quot;&gt;&lt;iframe name=&quot;sif13&quot; sandbox=&quot;allow-forms allow-modals allow-scripts&quot; class=&quot;snippet-box-edit snippet-box-result&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;You should go with &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString&quot; rel=&quot;nofollow noreferrer&quot; title=&quot;Number.prototype.toLocaleString()&quot;&gt;Number.prototype.toLocaleString()&lt;/a&gt; only if its &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString#AutoCompatibilityTable&quot; rel=&quot;nofollow noreferrer&quot; title=&quot;browser compatibilty&quot;&gt;browser compatibilty&lt;/a&gt; is not an issue.&lt;/p&gt;\n    ","\n&lt;p&gt;Just for future Googlers (or not necessarily &apos;Googlers&apos;):&lt;/p&gt;\n\n&lt;p&gt;All of solutions mentioned above are wonderful, however, RegExp might be awfully bad thing to use in a situation like that.&lt;/p&gt;\n\n&lt;p&gt;So, yes, you might use some of the options proposed or even write something primitive yet useful like:&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;strToNum&lt;/span&gt; = str =&amp;gt; {\n\n   &lt;span class=&quot;hljs-comment&quot;&gt;//Find 1-3 digits followed by exactly 3 digits &amp;amp; a comma or end of string&lt;/span&gt;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; regx = &lt;span class=&quot;hljs-regexp&quot;&gt;/(\\d{1,3})(\\d{3}(?:,|$))/&lt;/span&gt;;\n   &lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; currStr;\n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;do&lt;/span&gt; {\n       currStr = (currStr || str.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`.`&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;])\n           .&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;( regx, &lt;span class=&quot;hljs-string&quot;&gt;`$1,$2`&lt;/span&gt;)\n   } &lt;span class=&quot;hljs-keyword&quot;&gt;while&lt;/span&gt; (currStr.&lt;span class=&quot;hljs-title function_&quot;&gt;match&lt;/span&gt;(regx)) &lt;span class=&quot;hljs-comment&quot;&gt;//Stop when there&apos;s no match &amp;amp; null&apos;s returned&lt;/span&gt;\n\n   &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; ( str.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`.`&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;] ) ?\n           currStr.&lt;span class=&quot;hljs-title function_&quot;&gt;concat&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`.`&lt;/span&gt;, str.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`.`&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]) :\n           currStr;\n\n};\n\n&lt;span class=&quot;hljs-title function_&quot;&gt;strToNum&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`123`&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; 123&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;strToNum&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`123456`&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; 123,456&lt;/span&gt;\n&lt;span class=&quot;hljs-title function_&quot;&gt;strToNum&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`-1234567.0987`&lt;/span&gt;) &lt;span class=&quot;hljs-comment&quot;&gt;// =&amp;gt; -1,234,567.0987&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;The regexp that&apos;s used here is fairly simple and the loop will go precisely the number of times it takes to get the job done.&lt;/p&gt;\n\n&lt;p&gt;And you might optimize it far better, &quot;DRYify&quot; code &amp;amp; so on.&lt;/p&gt;\n\n&lt;p&gt;Yet, &lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;(-&lt;span class=&quot;hljs-number&quot;&gt;1234567.0987&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;toLocaleString&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;(in most situations) would be a far better choice.&lt;/p&gt;\n\n&lt;p&gt;The point is not in the speed of execution or in cross-browser compatibility.&lt;/p&gt;\n\n&lt;p&gt;In situations when you&apos;d like to show the resulting number to user, .toLocaleString() method gives you superpower to speak the same language with the user of your website or app (whatever her/his language is).&lt;/p&gt;\n\n&lt;p&gt;This method according to ECMAScript documentation was introduced in 1999, and I believe that the reason for that was the hope that the Internet at some point will connect people all around the world, so, some &quot;internalization&quot; tools were needed.&lt;/p&gt;\n\n&lt;p&gt;Today the Internet does connect all of us, so, it is important to remember that the world is a way more complex that we might imagine &amp;amp; that (/almost) &lt;strong&gt;all of us are here&lt;/strong&gt;, in the Internet.&lt;/p&gt;\n\n&lt;p&gt;Obviously, considering the diversity of people, it is impossible to guarantee perfect UX for everybody because we speak different languages, value different things, etc. And exactly because of this, it is even more important to try to localize things as much as it&apos;s possible.&lt;/p&gt;\n\n&lt;p&gt;So, considering that there&apos;re some particular standards for representation of date, time, numbers, etc. &amp;amp; that we have a tool to display those things in the format preferred by the final user, isn&apos;t that rare and almost irresponsible not to use that tool (especially in situations when we want to display this data to the user)?&lt;/p&gt;\n\n&lt;p&gt;For me, using RegExp instead of .toLocaleString() in situation like that sounds a little bit like creating a clock app with JavaScript &amp;amp; hard-coding it in such a way so it&apos;ll display Prague time only (which would be quite useless for people who don&apos;t live in Prague) even though the default behaviour of&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;();\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;is to return the data according to final user&apos;s clock.&lt;/p&gt;\n    ","\n&lt;p&gt;An alternative way, supporting decimals, different separators and negatives.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; number_format = &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;number, decimal_pos, decimal_sep, thousand_sep&lt;/span&gt;) {\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; ts      = ( thousand_sep == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt; : thousand_sep )\n        , ds    = ( decimal_sep  == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt; : decimal_sep )\n        , dp    = ( decimal_pos  == &lt;span class=&quot;hljs-literal&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;   : decimal_pos )\n\n        , n     = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;abs&lt;/span&gt;(number)).&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;()\n\n        , i     = n.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; % &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; \n        , f     = ((number &amp;lt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;) + n.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, i)\n    ;\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt;(;i&amp;lt;n.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;i+=&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(i!=&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) f+=ts;\n        f+=n.&lt;span class=&quot;hljs-title function_&quot;&gt;substr&lt;/span&gt;(i,&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;);\n    }\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt;(dp &amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) \n        f += ds + &lt;span class=&quot;hljs-built_in&quot;&gt;parseFloat&lt;/span&gt;(number).&lt;span class=&quot;hljs-title function_&quot;&gt;toFixed&lt;/span&gt;(dp).&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;)[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]\n\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; f;\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Some corrections by @Jignesh Sanghani, don&apos;t forget to upvote his comment.&lt;/p&gt;\n    ","\n&lt;p&gt;I think this function will take care of all the issues related to this problem.&lt;/p&gt;\n\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;commaFormat&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot;&gt;inputString&lt;/span&gt;) {\n    inputString = inputString.&lt;span class=&quot;hljs-title function_&quot;&gt;toString&lt;/span&gt;();\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; decimalPart = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (inputString.&lt;span class=&quot;hljs-title function_&quot;&gt;indexOf&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;.&apos;&lt;/span&gt;) != -&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;//alert(&quot;decimal number&quot;);&lt;/span&gt;\n        inputString = inputString.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt;);\n        decimalPart = &lt;span class=&quot;hljs-string&quot;&gt;&quot;.&quot;&lt;/span&gt; + inputString[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;];\n        inputString = inputString[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];\n        &lt;span class=&quot;hljs-comment&quot;&gt;//alert(inputString);&lt;/span&gt;\n        &lt;span class=&quot;hljs-comment&quot;&gt;//alert(decimalPart);&lt;/span&gt;\n\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; outputString = &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; count = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; i = inputString.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;; i &amp;gt;= &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; inputString.&lt;span class=&quot;hljs-title function_&quot;&gt;charAt&lt;/span&gt;(i) != &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;; i--) {\n        &lt;span class=&quot;hljs-comment&quot;&gt;//alert(&quot;inside for&quot; + inputString.charAt(i) + &quot;and count=&quot; + count + &quot; and outputString=&quot; + outputString);&lt;/span&gt;\n        &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (count == &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;) {\n            outputString += &lt;span class=&quot;hljs-string&quot;&gt;&quot;,&quot;&lt;/span&gt;;\n            count = &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;\n        }\n        outputString += inputString.&lt;span class=&quot;hljs-title function_&quot;&gt;charAt&lt;/span&gt;(i);\n        count++;\n    }\n    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (inputString.&lt;span class=&quot;hljs-title function_&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) == &lt;span class=&quot;hljs-string&quot;&gt;&apos;-&apos;&lt;/span&gt;) {\n        outputString += &lt;span class=&quot;hljs-string&quot;&gt;&quot;-&quot;&lt;/span&gt;;\n    }\n    &lt;span class=&quot;hljs-comment&quot;&gt;//alert(outputString);&lt;/span&gt;\n    &lt;span class=&quot;hljs-comment&quot;&gt;//alert(outputString.split(&quot;&quot;).reverse().join(&quot;&quot;));&lt;/span&gt;\n    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; outputString.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;reverse&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;) + decimalPart;\n}\n&lt;/code&gt;&lt;/pre&gt;\n    ","\n&lt;p&gt;If you&apos;re looking for a short and sweet solution:&lt;/p&gt;\n&lt;pre class=&quot;lang-js s-code-block&quot;&gt;&lt;code class=&quot;hljs language-javascript&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; number = &lt;span class=&quot;hljs-number&quot;&gt;12345678.99&lt;/span&gt;;\n\n&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; numberString = &lt;span class=&quot;hljs-title class_&quot;&gt;String&lt;/span&gt;(number).&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(\n    &lt;span class=&quot;hljs-regexp&quot;&gt;/^\\d+/&lt;/span&gt;,\n    &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;number&lt;/span&gt; =&amp;gt;&lt;/span&gt; [...number].&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(\n        &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;digit, index, digits&lt;/span&gt;) =&amp;gt;&lt;/span&gt; (\n            !index || (digits.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - index) % &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; ? &lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt; : &lt;span class=&quot;hljs-string&quot;&gt;&apos;,&apos;&lt;/span&gt;\n        ) + digit\n    ).&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&apos;&apos;&lt;/span&gt;)\n);\n\n&lt;span class=&quot;hljs-comment&quot;&gt;// numberString: 12,345,678.99&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;\n    "]},"page":"49","randomQuestions":[{"title":"How does the \"this\" keyword work, and when should it be used?","slug":"how-does-the-\"this\"-keyword-work-and-when-should-it-be-used-1657384384385"},{"title":"What do lambda function closures capture? [duplicate]","slug":"what-do-lambda-function-closures-capture-duplicate-1657388161827"},{"title":"What are the nuances of scope prototypal / prototypical inheritance in AngularJS?","slug":"what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs-1657387340067"},{"title":"Why does Date.parse give incorrect results?","slug":"why-does-date.parse-give-incorrect-results-1657384642821"},{"title":"jQuery Ajax POST example with PHP","slug":"jquery-ajax-post-example-with-php-1657387402634"},{"title":"Unfortunately MyApp has stopped. How can I solve this?","slug":"unfortunately-myapp-has-stopped.-how-can-i-solve-this-1657384402171"},{"title":"Short description of the scoping rules?","slug":"short-description-of-the-scoping-rules-1657384853121"},{"title":"Do DOM tree elements with IDs become global properties?","slug":"do-dom-tree-elements-with-ids-become-global-properties-1657387475110"},{"title":"Truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all()","slug":"truth-value-of-a-series-is-ambiguous.-use-a.empty-a.bool()-a.item()-a.any()-or-a.all()-1657387724259"},{"title":"How do I modify the URL without reloading the page?","slug":"how-do-i-modify-the-url-without-reloading-the-page-1657387509731"},{"title":"Preview an image before it is uploaded","slug":"preview-an-image-before-it-is-uploaded-1657388048128"},{"title":"Importing files from different folder","slug":"importing-files-from-different-folder-1657388203798"},{"title":"What is the difference between char s[] and char *s?","slug":"what-is-the-difference-between-char-s-and-char-*s-1657387823570"},{"title":"What is the difference between a deep copy and a shallow copy?","slug":"what-is-the-difference-between-a-deep-copy-and-a-shallow-copy-1657388445063"},{"title":"What does the comma operator , do?","slug":"what-does-the-comma-operator-do-1657388258021"},{"title":"Open a URL in a new tab (and not a new window)","slug":"open-a-url-in-a-new-tab-(and-not-a-new-window)-1657387699598"},{"title":"What is a plain English explanation of \"Big O\" notation?","slug":"what-is-a-plain-english-explanation-of-\"big-o\"-notation-1657387641953"},{"title":"Read file line by line using ifstream in C++","slug":"read-file-line-by-line-using-ifstream-in-c++-1657388236966"},{"title":"How can I vertically align elements in a div?","slug":"how-can-i-vertically-align-elements-in-a-div-1657385504431"},{"title":"Disable same origin policy in Chrome","slug":"disable-same-origin-policy-in-chrome-1657387743804"}]},"__N_SSG":true}